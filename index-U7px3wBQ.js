function Ck(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var Wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _j(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var j5={exports:{}},Y0={},V5={exports:{}},Wt={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ph=Symbol.for("react.element"),Rj=Symbol.for("react.portal"),$j=Symbol.for("react.fragment"),Oj=Symbol.for("react.strict_mode"),Mj=Symbol.for("react.profiler"),Pj=Symbol.for("react.provider"),Aj=Symbol.for("react.context"),Dj=Symbol.for("react.forward_ref"),Lj=Symbol.for("react.suspense"),Fj=Symbol.for("react.memo"),Bj=Symbol.for("react.lazy"),W5=Symbol.iterator;function zj(t){return t===null||typeof t!="object"?null:(t=W5&&t[W5]||t["@@iterator"],typeof t=="function"?t:null)}var G5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H5=Object.assign,q5={};function wd(t,e,n){this.props=t,this.context=e,this.refs=q5,this.updater=n||G5}wd.prototype.isReactComponent={},wd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},wd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function K5(){}K5.prototype=wd.prototype;function Ik(t,e,n){this.props=t,this.context=e,this.refs=q5,this.updater=n||G5}var Ek=Ik.prototype=new K5;Ek.constructor=Ik,H5(Ek,wd.prototype),Ek.isPureReactComponent=!0;var X5=Array.isArray,Y5=Object.prototype.hasOwnProperty,Tk={current:null},Q5={key:!0,ref:!0,__self:!0,__source:!0};function Z5(t,e,n){var r,a={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Y5.call(e,r)&&!Q5.hasOwnProperty(r)&&(a[r]=e[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Ph,type:t,key:i,ref:o,props:a,_owner:Tk.current}}function Uj(t,e){return{$$typeof:Ph,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nk(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ph}function jj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var J5=/\/+/g;function _k(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jj(""+t.key):e.toString(36)}function Q0(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ph:case Rj:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+_k(o,0):r,X5(a)?(n="",t!=null&&(n=t.replace(J5,"$&/")+"/"),Q0(a,e,n,"",function(u){return u})):a!=null&&(Nk(a)&&(a=Uj(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(J5,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",X5(t))for(var s=0;s<t.length;s++){i=t[s];var l=r+_k(i,s);o+=Q0(i,e,n,l,a)}else if(l=zj(t),typeof l=="function")for(t=l.call(t),s=0;!(i=t.next()).done;)i=i.value,l=r+_k(i,s++),o+=Q0(i,e,n,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Z0(t,e,n){if(t==null)return t;var r=[],a=0;return Q0(t,r,"","",function(i){return e.call(n,i,a++)}),r}function Vj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ga={current:null},J0={transition:null},Wj={ReactCurrentDispatcher:Ga,ReactCurrentBatchConfig:J0,ReactCurrentOwner:Tk};Wt.Children={map:Z0,forEach:function(t,e,n){Z0(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Z0(t,function(){e++}),e},toArray:function(t){return Z0(t,function(e){return e})||[]},only:function(t){if(!Nk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},Wt.Component=wd,Wt.Fragment=$j,Wt.Profiler=Mj,Wt.PureComponent=Ik,Wt.StrictMode=Oj,Wt.Suspense=Lj,Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wj,Wt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H5({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Tk.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)Y5.call(e,l)&&!Q5.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Ph,type:t.type,key:a,ref:i,props:r,_owner:o}},Wt.createContext=function(t){return t={$$typeof:Aj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pj,_context:t},t.Consumer=t},Wt.createElement=Z5,Wt.createFactory=function(t){var e=Z5.bind(null,t);return e.type=t,e},Wt.createRef=function(){return{current:null}},Wt.forwardRef=function(t){return{$$typeof:Dj,render:t}},Wt.isValidElement=Nk,Wt.lazy=function(t){return{$$typeof:Bj,_payload:{_status:-1,_result:t},_init:Vj}},Wt.memo=function(t,e){return{$$typeof:Fj,type:t,compare:e===void 0?null:e}},Wt.startTransition=function(t){var e=J0.transition;J0.transition={};try{t()}finally{J0.transition=e}},Wt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Wt.useCallback=function(t,e){return Ga.current.useCallback(t,e)},Wt.useContext=function(t){return Ga.current.useContext(t)},Wt.useDebugValue=function(){},Wt.useDeferredValue=function(t){return Ga.current.useDeferredValue(t)},Wt.useEffect=function(t,e){return Ga.current.useEffect(t,e)},Wt.useId=function(){return Ga.current.useId()},Wt.useImperativeHandle=function(t,e,n){return Ga.current.useImperativeHandle(t,e,n)},Wt.useInsertionEffect=function(t,e){return Ga.current.useInsertionEffect(t,e)},Wt.useLayoutEffect=function(t,e){return Ga.current.useLayoutEffect(t,e)},Wt.useMemo=function(t,e){return Ga.current.useMemo(t,e)},Wt.useReducer=function(t,e,n){return Ga.current.useReducer(t,e,n)},Wt.useRef=function(t){return Ga.current.useRef(t)},Wt.useState=function(t){return Ga.current.useState(t)},Wt.useSyncExternalStore=function(t,e,n){return Ga.current.useSyncExternalStore(t,e,n)},Wt.useTransition=function(){return Ga.current.useTransition()},Wt.version="18.2.0",V5.exports=Wt;var $=V5.exports;const G=Wi($),eR=Ck({__proto__:null,default:G},[$]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Gj=$,Hj=Symbol.for("react.element"),qj=Symbol.for("react.fragment"),Kj=Object.prototype.hasOwnProperty,Xj=Gj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yj={key:!0,ref:!0,__self:!0,__source:!0};function tR(t,e,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Kj.call(e,r)&&!Yj.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:Hj,type:t,key:i,ref:o,props:a,_owner:Xj.current}}Y0.Fragment=qj,Y0.jsx=tR,Y0.jsxs=tR,j5.exports=Y0;var ae=j5.exports;const Qj={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let Zj=class p_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Qj,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new p_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new p_(this.logger,e)}};var ts=new Zj;class e1{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(n)||0;this.observers[r].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o.apply(o,[e,...r])})}}function Ah(){let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n}function nR(t){return t==null?"":""+t}function Jj(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const eV=/###/g;function Dh(t,e,n){function r(s){return s&&s.indexOf("###")>-1?s.replace(eV,"."):s}function a(){return!t||typeof t=="string"}const i=typeof e!="string"?e:e.split(".");let o=0;for(;o<i.length-1;){if(a())return{};const s=r(i[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return a()?{}:{obj:t,k:r(i[o])}}function rR(t,e,n){const{obj:r,k:a}=Dh(t,e,Object);if(r!==void 0||e.length===1){r[a]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),s=Dh(t,o,Object);for(;s.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),s=Dh(t,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${i}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${i}`]=n}function tV(t,e,n,r){const{obj:a,k:i}=Dh(t,e,Object);a[i]=a[i]||[],r&&(a[i]=a[i].concat(n)),r||a[i].push(n)}function t1(t,e){const{obj:n,k:r}=Dh(t,e);if(n)return n[r]}function nV(t,e,n){const r=t1(t,n);return r!==void 0?r:t1(e,n)}function aR(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):aR(t[r],e[r],n):t[r]=e[r]);return t}function kd(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var rV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function aV(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>rV[e]):t}class iV{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const oV=[" ",",","?","!",";"],sV=new iV(20);function lV(t,e,n){e=e||"",n=n||"";const r=oV.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const a=sV.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(n);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i}function Rk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,s="";for(let l=i;l<r.length;++l)if(l!==i&&(s+=n),s+=r[l],o=a[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}a=o}return a}function n1(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class iR extends e1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):typeof r=="string"&&i?s.push(...r.split(i)):s.push(r)));const l=t1(this.data,s);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||typeof r!="string"?l:Rk(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),a=n,n=s[1]),this.addNamespaces(n),rR(this.data,s,a),i.silent||this.emit("added",e,n,r,a)}addResources(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(typeof r[i]=="string"||Object.prototype.toString.apply(r[i])==="[object Array]")&&this.addResource(e,n,i,r[i],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),a=r,r=n,n=s[1]),this.addNamespaces(n);let l=t1(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?aR(l,r,i):l={...l,...r},rR(this.data,s,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var oR={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,a){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,a))}),e}};const sR={};class vw extends e1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Jj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ts.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!lV(e,r,a);if(o&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(a)}return typeof i=="string"&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],n),l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const w=n.nsSeparator||this.options.nsSeparator;return a?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let p=d&&d.res;const f=d&&d.usedKey||o,g=d&&d.exactUsedKey||o,y=Object.prototype.toString.apply(p),v=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&p&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&v.indexOf(y)<0&&!(typeof b=="string"&&y==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...n,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(d.res=w,d.usedParams=this.getUsedParamsDetails(n),d):w}if(i){const w=y==="[object Array]",S=w?[]:{},C=w?g:f;for(const E in p)if(Object.prototype.hasOwnProperty.call(p,E)){const _=`${C}${i}${E}`;S[E]=this.translate(_,{...n,joinArrays:!1,ns:s}),S[E]===_&&(S[E]=p[E])}p=S}}else if(x&&typeof b=="string"&&y==="[object Array]")p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let w=!1,S=!1;const C=n.count!==void 0&&typeof n.count!="string",E=vw.hasDefaultValue(n),_=C?this.pluralResolver.getSuffix(u,n.count,n):"",N=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",M=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),P=M&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${N}`]||n.defaultValue;!this.isValidLookup(p)&&E&&(w=!0,p=P),this.isValidLookup(p)||(S=!0,p=o);const L=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:p,U=E&&P!==p&&this.options.updateMissing;if(S||w||U){if(this.logger.log(U?"updateKey":"missingKey",u,l,o,U?P:p),i){const Z=this.resolve(o,{...n,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let B=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let Z=0;Z<K.length;Z++)B.push(K[Z]);else this.options.saveMissingTo==="all"?B=this.languageUtils.toResolveHierarchy(n.lng||this.language):B.push(n.lng||this.language);const X=(Z,H,F)=>{const Y=E&&F!==p?F:L;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,l,H,Y,U,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Z,l,H,Y,U,n),this.emit("missingKey",Z,l,H,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?B.forEach(Z=>{const H=this.pluralResolver.getSuffixes(Z,n);M&&n[`defaultValue${this.options.pluralSeparator}zero`]&&H.indexOf(`${this.options.pluralSeparator}zero`)<0&&H.push(`${this.options.pluralSeparator}zero`),H.forEach(F=>{X([Z],o+F,n[`defaultValue${F}`]||P)})}):X(B,o,P))}p=this.extendTranslation(p,e,n,d,r),S&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(S||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?p:void 0):p=this.options.parseMissingKeyHandler(p))}return a?(d.res=p,d.usedParams=this.getUsedParamsDetails(n),d):p}extendTranslation(e,n,r,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const p=e.match(this.interpolator.nestingRegexp);c=p&&p.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),u){const p=e.match(this.interpolator.nestingRegexp),f=p&&p.length;c<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return i&&i[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=oR.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,s;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;a=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",f=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(v=>{this.isValidLookup(r)||(s=v,!sR[`${y[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(sR[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${y.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(r))return;o=b;const x=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,b,v,n);else{let S;p&&(S=this.pluralResolver.getSuffix(b,n.count,n));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(x.push(c+S),n.ordinal&&S.indexOf(E)===0&&x.push(c+S.replace(E,this.options.pluralSeparator)),f&&x.push(c+C)),g){const _=`${c}${this.options.contextSeparator}${n.context}`;x.push(_),p&&(x.push(_+S),n.ordinal&&S.indexOf(E)===0&&x.push(_+S.replace(E,this.options.pluralSeparator)),f&&x.push(_+C))}}let w;for(;w=x.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(b,v,w,n))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,a):this.resourceStore.getResource(e,n,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function $k(t){return t.charAt(0).toUpperCase()+t.slice(1)}class lR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ts.create("languageUtils")}getScriptPartFromCode(e){if(e=n1(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=n1(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=$k(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=$k(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=$k(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(i=>{if(i===a||!(i.indexOf("-")<0&&a.indexOf("-")<0)&&i.indexOf(a)===0)return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):typeof e=="string"&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}let uV=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],cV={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const dV=["v1","v2","v3"],pV=["v4"],uR={zero:0,one:1,two:2,few:3,many:4,other:5};function hV(){const t={};return uV.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:cV[e.fc]}})}),t}class fV{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ts.create("pluralResolver"),(!this.options.compatibilityJSON||pV.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=hV()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n1(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${n}${a}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,i)=>uR[a]-uR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(e,a,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let a=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const i=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!dV.includes(this.options.compatibilityJSON)}}function cR(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=nV(t,e,n);return!i&&a&&typeof n=="string"&&(i=Rk(t,n,r),i===void 0&&(i=Rk(e,n,r))),i}class mV{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ts.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:aV,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?kd(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?kd(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?kd(n.nestingPrefix):n.nestingPrefixEscaped||kd("$t("),this.nestingSuffix=n.nestingSuffix?kd(n.nestingSuffix):n.nestingSuffixEscaped||kd(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,a){let i,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(f){return f.replace(/\$/g,"$$$$")}const c=f=>{if(f.indexOf(this.formatSeparator)<0){const b=cR(n,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...a,...n,interpolationkey:f}):b}const g=f.split(this.formatSeparator),y=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(cR(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...a,...n,interpolationkey:y})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>u(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?u(this.escape(f)):u(f)}].forEach(f=>{for(s=0;i=f.regex.exec(e);){const g=i[1].trim();if(o=c(g),o===void 0)if(typeof d=="function"){const v=d(e,i,a);o=typeof v=="string"?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,g))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=nR(o));const y=f.safeValue(o);if(e=e.replace(i[0],y),p?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;function s(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let p=`{${d[1]}`;l=d[0],p=this.interpolate(p,o);const f=p.match(/'/g),g=p.match(/"/g);(f&&f.length%2===0&&!g||g.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${p}`}return delete o.defaultValue,l}for(;a=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const c=a[1].split(this.formatSeparator).map(d=>d.trim());a[1]=c.shift(),l=c,u=!0}if(i=n(s.call(this,a[1].trim(),o),o),i&&a[0]===e&&typeof i!="string")return i;typeof i!="string"&&(i=nR(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((c,d)=>this.format(c,d,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}function gV(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(i=>{if(!i)return;const[o,...s]=i.split(":"),l=s.join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=l),l==="false"&&(n[o.trim()]=!1),l==="true"&&(n[o.trim()]=!0),isNaN(l)||(n[o.trim()]=parseInt(l,10))})}return{formatName:e,formatOptions:n}}function Sd(t){const e={};return function(n,r,a){const i=r+JSON.stringify(a);let o=e[i];return o||(o=t(n1(r),a),e[i]=o),o(n)}}class yV{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ts.create("formatter"),this.options=e,this.formats={number:Sd((n,r)=>{const a=new Intl.NumberFormat(n,{...r});return i=>a.format(i)}),currency:Sd((n,r)=>{const a=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>a.format(i)}),datetime:Sd((n,r)=>{const a=new Intl.DateTimeFormat(n,{...r});return i=>a.format(i)}),relativetime:Sd((n,r)=>{const a=new Intl.RelativeTimeFormat(n,{...r});return i=>a.format(i,r.range||"day")}),list:Sd((n,r)=>{const a=new Intl.ListFormat(n,{...r});return i=>a.format(i)})},this.init(e)}init(e){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Sd(n)}format(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((i,o)=>{const{formatName:s,formatOptions:l}=gV(o);if(this.formats[s]){let u=i;try{const c=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},d=c.locale||c.lng||a.locale||a.lng||r;u=this.formats[s](i,d,{...l,...a,...c})}catch(c){this.logger.warn(c)}return u}else this.logger.warn(`there was no format function for ${s}`);return i},e)}}function bV(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class vV extends e1{constructor(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=ts.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(e,n,r,a){const i={},o={},s={},l={};return e.forEach(u=>{let c=!0;n.forEach(d=>{const p=`${u}|${d}`;!r.reload&&this.store.hasResourceBundle(u,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,c=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const a=e.split("|"),i=a[0],o=a[1];n&&this.emit("failedLoading",i,o,n),r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const s={};this.queue.forEach(l=>{tV(l.loaded,[i],o),bV(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,a+1,i*2,o)},i);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const i=this.queueLoad(e,n,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,o),!o&&s&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,s),this.loaded(e,o,s)})}saveMissing(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,n,r,a,l):c=u(e,n,r,a),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(e,n,r,a,s,l)}!e||!e[0]||this.store.addResource(e[0],n,r,a)}}}function dR(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function pR(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function r1(){}function xV(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{typeof t[e]=="function"&&(t[e]=t[e].bind(t))})}class d0 extends e1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=pR(e),this.services={},this.logger=ts,this.modules={external:[]},xV(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=dR();this.options={...a,...this.options,...pR(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function i(l){return l?typeof l=="function"?new l:l:null}if(!this.options.isClone){this.modules.logger?ts.init(i(this.modules.logger),this.options):ts.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=yV);const u=new lR(this.options);this.store=new iR(this.options.resources,this.options);const c=this.services;c.logger=ts,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new fV(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=i(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new mV(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new vV(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new vw(this.services,this.options),this.translator.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=r1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const o=Ah(),s=()=>{const l=(u,c)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(c),r(u,c)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r1;const r=typeof e=="string"?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],i=o=>{!o||o==="cimode"||this.services.languageUtils.toResolveHierarchy(o).forEach(s=>{s!=="cimode"&&a.indexOf(s)<0&&a.push(s)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>i(o)),this.options.preload&&this.options.preload.forEach(o=>i(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,n,r){const a=Ah();return e||(e=this.languages),n||(n=this.options.ns),r||(r=r1),this.services.backendConnector.reload(e,n,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&oR.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const a=Ah();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),a}getFixedT(e,n,r){var a=this;const i=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=a.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix=l.keyPrefix||r||i.keyPrefix;const p=a.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(g=>`${l.keyPrefix}${p}${g}`):f=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,a.t(f,l)};return typeof e=="string"?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,n){const r=Ah();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Ah();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0);return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new lR(dR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new d0(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r1;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new d0(a);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new iR(this.store.data,a),i.services.resourceStore=i.store),i.translator=new vw(i.services,a),i.translator.on("*",function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];i.emit(o,...l)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ia=d0.createInstance();ia.createInstance=d0.createInstance,ia.createInstance,ia.dir,ia.init,ia.loadResources,ia.reloadResources,ia.use,ia.changeLanguage,ia.getFixedT,ia.t,ia.exists,ia.setDefaultNamespace,ia.hasLoadedNamespace,ia.loadNamespaces,ia.loadLanguages;const hR=$.createContext({dragDropManager:void 0});function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}function wV(t,e){if(Lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kV(t){var e=wV(t,"string");return Lh(e)=="symbol"?e:String(e)}function SV(t,e,n){return e=kV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function mR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(n),!0).forEach(function(r){SV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ca(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var gR=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ok=function(){return Math.random().toString(36).substring(7).split("").join(".")},a1={INIT:"@@redux/INIT"+Ok(),REPLACE:"@@redux/REPLACE"+Ok(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ok()}};function CV(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Mk(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ca(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ca(1));return n(Mk)(t,e)}if(typeof t!="function")throw new Error(Ca(2));var a=t,i=e,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(Ca(3));return i}function d(y){if(typeof y!="function")throw new Error(Ca(4));if(l)throw new Error(Ca(5));var v=!0;return u(),s.push(y),function(){if(v){if(l)throw new Error(Ca(6));v=!1,u();var b=s.indexOf(y);s.splice(b,1),o=null}}}function p(y){if(!CV(y))throw new Error(Ca(7));if(typeof y.type>"u")throw new Error(Ca(8));if(l)throw new Error(Ca(9));try{l=!0,i=a(i,y)}finally{l=!1}for(var v=o=s,b=0;b<v.length;b++){var x=v[b];x()}return y}function f(y){if(typeof y!="function")throw new Error(Ca(10));a=y,p({type:a1.REPLACE})}function g(){var y,v=d;return y={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ca(11));function x(){b.next&&b.next(c())}x();var w=v(x);return{unsubscribe:w}}},y[gR]=function(){return this},y}return p({type:a1.INIT}),r={dispatch:p,subscribe:d,getState:c,replaceReducer:f},r[gR]=g,r}function IV(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:a1.INIT});if(typeof r>"u")throw new Error(Ca(12));if(typeof n(void 0,{type:a1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ca(13))})}function EV(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];typeof t[a]=="function"&&(n[a]=t[a])}var i=Object.keys(n),o;try{IV(n)}catch(s){o=s}return function(s,l){if(s===void 0&&(s={}),o)throw o;for(var u=!1,c={},d=0;d<i.length;d++){var p=i[d],f=n[p],g=s[p],y=f(g,l);if(typeof y>"u")throw l&&l.type,new Error(Ca(14));c[p]=y,u=u||y!==g}return u=u||i.length!==Object.keys(s).length,u?c:s}}function yR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,a){return function(){return r(a.apply(void 0,arguments))}})}function TV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var a=r.apply(void 0,arguments),i=function(){throw new Error(Ca(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map(function(l){return l(o)});return i=yR.apply(void 0,s)(a.dispatch),mR(mR({},a),{},{dispatch:i})}}}function Tt(t,e,...n){if(NV()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;r=new Error(e.replace(/%s/g,function(){return n[a++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function NV(){return typeof process<"u"&&!0}function _V(t,e,n){return e.split(".").reduce((r,a)=>r&&r[a]?r[a]:n||null,t)}function RV(t,e){return t.filter(n=>n!==e)}function bR(t){return typeof t=="object"}function $V(t,e){const n=new Map,r=i=>{n.set(i,n.has(i)?n.get(i)+1:1)};t.forEach(r),e.forEach(r);const a=[];return n.forEach((i,o)=>{i===1&&a.push(o)}),a}function OV(t,e){return t.filter(n=>e.indexOf(n)>-1)}const Pk="dnd-core/INIT_COORDS",i1="dnd-core/BEGIN_DRAG",Ak="dnd-core/PUBLISH_DRAG_SOURCE",o1="dnd-core/HOVER",s1="dnd-core/DROP",l1="dnd-core/END_DRAG";function vR(t,e){return{type:Pk,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const MV={type:Pk,payload:{clientOffset:null,sourceClientOffset:null}};function PV(t){return function(e=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:a,getSourceClientOffset:i}=n,o=t.getMonitor(),s=t.getRegistry();t.dispatch(vR(a)),AV(e,o,s);const l=FV(e,o);if(l==null){t.dispatch(MV);return}let u=null;if(a){if(!i)throw new Error("getSourceClientOffset must be defined");DV(i),u=i(l)}t.dispatch(vR(a,u));const c=s.getSource(l).beginDrag(o,l);if(c==null)return;LV(c),s.pinSource(l);const d=s.getSourceType(l);return{type:i1,payload:{itemType:d,item:c,sourceId:l,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!r}}}}function AV(t,e,n){Tt(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){Tt(n.getSource(r),"Expected sourceIds to be registered.")})}function DV(t){Tt(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function LV(t){Tt(bR(t),"Item must be an object.")}function FV(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function BV(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){BV(t,a,n[a])})}return t}function UV(t){return function(e={}){const n=t.getMonitor(),r=t.getRegistry();jV(n),GV(n).forEach((a,i)=>{const o=VV(a,i,r,n),s={type:s1,payload:{dropResult:zV({},e,o)}};t.dispatch(s)})}}function jV(t){Tt(t.isDragging(),"Cannot call drop while not dragging."),Tt(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function VV(t,e,n,r){const a=n.getTarget(t);let i=a?a.drop(r,t):void 0;return WV(i),typeof i>"u"&&(i=e===0?{}:r.getDropResult()),i}function WV(t){Tt(typeof t>"u"||bR(t),"Drop result must either be an object or undefined.")}function GV(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function HV(t){return function(){const e=t.getMonitor(),n=t.getRegistry();qV(e);const r=e.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(e,r),n.unpinSource()),{type:l1}}}function qV(t){Tt(t.isDragging(),"Cannot call endDrag while not dragging.")}function Dk(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function KV(t){return function(e,{clientOffset:n}={}){XV(e);const r=e.slice(0),a=t.getMonitor(),i=t.getRegistry(),o=a.getItemType();return QV(r,i,o),YV(r,a,i),ZV(r,a,i),{type:o1,payload:{targetIds:r,clientOffset:n||null}}}}function XV(t){Tt(Array.isArray(t),"Expected targetIds to be an array.")}function YV(t,e,n){Tt(e.isDragging(),"Cannot call hover while not dragging."),Tt(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const a=t[r];Tt(t.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array.");const i=n.getTarget(a);Tt(i,"Expected targetIds to be registered.")}}function QV(t,e,n){for(let r=t.length-1;r>=0;r--){const a=t[r],i=e.getTargetType(a);Dk(i,n)||t.splice(r,1)}}function ZV(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function JV(t){return function(){if(t.getMonitor().isDragging())return{type:Ak}}}function eW(t){return{beginDrag:PV(t),publishDragSource:JV(t),hover:KV(t),drop:UV(t),endDrag:HV(t)}}class tW{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(i){return(...o)=>{const s=i.apply(e,o);typeof s<"u"&&n(s)}}const a=eW(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=r(s),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function nW(t,e){return{x:t.x+e.x,y:t.y+e.y}}function xR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rW(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:xR(nW(e,r),n)}function aW(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:xR(e,n)}const Fh=[],Lk=[];Fh.__IS_NONE__=!0,Lk.__IS_ALL__=!0;function iW(t,e){return t===Fh?!1:t===Lk||typeof e>"u"?!0:OV(e,t).length>0}class oW{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;Tt(typeof e=="function","listener must be a function."),Tt(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!iW(o.dirtyHandlerIds,r)||e()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(e){Tt(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const a=this.store.getState().dragOffset;a!==n&&(n=a,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Tt(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Tt(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),a=this.getItemType();return Dk(r,a)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Tt(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),a=this.getItemType();return r!==a?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),i=this.getItemType();if(i&&!Dk(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return rW(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return aW(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const wR=typeof global<"u"?global:self,kR=wR.MutationObserver||wR.WebKitMutationObserver;function SR(t){return function(){const e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}function sW(t){let e=1;const n=new kR(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const lW=typeof kR=="function"?sW:SR;class uW{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,a=e.length-this.index;r<a;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=lW(this.flush),this.requestErrorThrow=SR(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class cW{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class dW{create(e){const n=this.freeTasks,r=n.length?n.pop():new cW(this.onError,a=>n[n.length]=a);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const CR=new uW,pW=new dW(CR.registerPendingError);function hW(t){CR.enqueueTask(pW.create(t))}const Fk="dnd-core/ADD_SOURCE",Bk="dnd-core/ADD_TARGET",zk="dnd-core/REMOVE_SOURCE",u1="dnd-core/REMOVE_TARGET";function fW(t){return{type:Fk,payload:{sourceId:t}}}function mW(t){return{type:Bk,payload:{targetId:t}}}function gW(t){return{type:zk,payload:{sourceId:t}}}function yW(t){return{type:u1,payload:{targetId:t}}}function bW(t){Tt(typeof t.canDrag=="function","Expected canDrag to be a function."),Tt(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Tt(typeof t.endDrag=="function","Expected endDrag to be a function.")}function vW(t){Tt(typeof t.canDrop=="function","Expected canDrop to be a function."),Tt(typeof t.hover=="function","Expected hover to be a function."),Tt(typeof t.drop=="function","Expected beginDrag to be a function.")}function Uk(t,e){if(e&&Array.isArray(t)){t.forEach(n=>Uk(n,!1));return}Tt(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Gi;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Gi||(Gi={}));let xW=0;function wW(){return xW++}function kW(t){const e=wW().toString();switch(t){case Gi.SOURCE:return`S${e}`;case Gi.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function IR(t){switch(t[0]){case"S":return Gi.SOURCE;case"T":return Gi.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function ER(t,e){const n=t.entries();let r=!1;do{const{done:a,value:[,i]}=n.next();if(i===e)return!0;r=!!a}while(!r);return!1}class SW{addSource(e,n){Uk(e),bW(n);const r=this.addHandler(Gi.SOURCE,e,n);return this.store.dispatch(fW(r)),r}addTarget(e,n){Uk(e,!0),vW(n);const r=this.addHandler(Gi.TARGET,e,n);return this.store.dispatch(mW(r)),r}containsHandler(e){return ER(this.dragSources,e)||ER(this.dropTargets,e)}getSource(e,n=!1){return Tt(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Tt(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Tt(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Tt(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return IR(e)===Gi.SOURCE}isTargetId(e){return IR(e)===Gi.TARGET}removeSource(e){Tt(this.getSource(e),"Expected an existing source."),this.store.dispatch(gW(e)),hW(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Tt(this.getTarget(e),"Expected an existing target."),this.store.dispatch(yW(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Tt(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Tt(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const a=kW(e);return this.types.set(a,n),e===Gi.SOURCE?this.dragSources.set(a,r):e===Gi.TARGET&&this.dropTargets.set(a,r),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const CW=(t,e)=>t===e;function IW(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function EW(t,e,n=CW){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function TW(t=Fh,e){switch(e.type){case o1:break;case Fk:case Bk:case u1:case zk:return Fh;case i1:case Ak:case l1:case s1:default:return Lk}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,a=$V(n,r);if(!(a.length>0||!EW(n,r)))return Fh;const i=r[r.length-1],o=n[n.length-1];return i!==o&&(i&&a.push(i),o&&a.push(o)),a}function NW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _W(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){NW(t,a,n[a])})}return t}const TR={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function RW(t=TR,e){const{payload:n}=e;switch(e.type){case Pk:case i1:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case o1:return IW(t.clientOffset,n.clientOffset)?t:_W({},t,{clientOffset:n.clientOffset});case l1:case s1:return TR;default:return t}}function $W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){$W(t,a,n[a])})}return t}const OW={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function MW(t=OW,e){const{payload:n}=e;switch(e.type){case i1:return Cd({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Ak:return Cd({},t,{isSourcePublic:!0});case o1:return Cd({},t,{targetIds:n.targetIds});case u1:return t.targetIds.indexOf(n.targetId)===-1?t:Cd({},t,{targetIds:RV(t.targetIds,n.targetId)});case s1:return Cd({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case l1:return Cd({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function PW(t=0,e){switch(e.type){case Fk:case Bk:return t+1;case zk:case u1:return t-1;default:return t}}function AW(t=0){return t+1}function DW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){DW(t,a,n[a])})}return t}function FW(t={},e){return{dirtyHandlerIds:TW(t.dirtyHandlerIds,{type:e.type,payload:LW({},e.payload,{prevTargetIds:_V(t,"dragOperation.targetIds",[])})}),dragOffset:RW(t.dragOffset,e),refCount:PW(t.refCount,e),dragOperation:MW(t.dragOperation,e),stateId:AW(t.stateId)}}function BW(t,e=void 0,n={},r=!1){const a=zW(r),i=new oW(a,new SW(a)),o=new tW(a,i),s=t(o,e,n);return o.receiveBackend(s),o}function zW(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Mk(FW,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function UW(t,e){if(t==null)return{};var n=jW(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jW(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}let NR=0;const c1=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var VW=$.memo(function(t){var{children:e}=t,n=UW(t,["children"]);const[r,a]=WW(n);return $.useEffect(()=>{if(a){const i=_R();return++NR,()=>{--NR===0&&(i[c1]=null)}}},[]),ae.jsx(hR.Provider,{value:r,children:e})});function WW(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=GW(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function GW(t,e=_R(),n,r){const a=e;return a[c1]||(a[c1]={dragDropManager:BW(t,e,n,r)}),a[c1]}function _R(){return typeof global<"u"?global:window}const HW=$.memo(function({connect:t,src:e}){return $.useEffect(()=>{if(typeof Image>"u")return;let n=!1;const r=new Image;return r.src=e,r.onload=()=>{t(r),n=!0},()=>{n&&t(null)}}),null});var qW=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!==0;){var o=i[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const KW=Wi(qW),Ku=typeof window<"u"?$.useLayoutEffect:$.useEffect;function XW(t,e,n){const[r,a]=$.useState(()=>e(t)),i=$.useCallback(()=>{const o=e(t);KW(r,o)||(a(o),n&&n())},[r,t,n]);return Ku(i),[r,i]}function YW(t,e,n){const[r,a]=XW(t,e,n);return Ku(function(){const i=t.getHandlerId();if(i!=null)return t.subscribeToStateChange(a,{handlerIds:[i]})},[t,a]),r}function RR(t,e,n){return YW(e,t||(()=>({})),()=>n.reconnect())}function $R(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),$.useMemo(()=>typeof t=="function"?t():t,n)}function QW(t){return $.useMemo(()=>t.hooks.dragSource(),[t])}function ZW(t){return $.useMemo(()=>t.hooks.dragPreview(),[t])}let jk=!1,Vk=!1;class JW{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Tt(!jk,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return jk=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{jk=!1}}isDragging(){if(!this.sourceId)return!1;Tt(!Vk,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Vk=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Vk=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Wk=!1;class eG{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Tt(!Wk,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Wk=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Wk=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function tG(t,e,n){const r=n.getRegistry(),a=r.addTarget(t,e);return[a,()=>r.removeTarget(a)]}function nG(t,e,n){const r=n.getRegistry(),a=r.addSource(t,e);return[a,()=>r.removeSource(a)]}function Gk(t,e,n,r){let a=n?n.call(r,t,e):void 0;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<i.length;l++){const u=i[l];if(!s(u))return!1;const c=t[u],d=e[u];if(a=n?n.call(r,c,d,u):void 0,a===!1||a===void 0&&c!==d)return!1}return!0}function Hk(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rG(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function aG(t){return(e=null,n=null)=>{if(!$.isValidElement(e)){const a=e;return t(a,n),a}const r=e;return rG(r),iG(r,n?a=>t(a,n):t)}}function OR(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const a=aG(r);e[n]=()=>a}}),e}function MR(t,e){typeof t=="function"?t(e):t.current=e}function iG(t,e){const n=t.ref;return Tt(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?$.cloneElement(t,{ref:r=>{MR(n,r),MR(e,r)}}):$.cloneElement(t,{ref:e})}class oG{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Gk(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Gk(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=OR({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Hk(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Hk(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class sG{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Gk(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=OR({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Hk(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Id(){const{dragDropManager:t}=$.useContext(hR);return Tt(t!=null,"Expected drag drop context"),t}function lG(t,e){const n=Id(),r=$.useMemo(()=>new oG(n.getBackend()),[n]);return Ku(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Ku(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function uG(){const t=Id();return $.useMemo(()=>new JW(t),[t])}class cG{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,a=this.monitor,{isDragging:i}=r;return i?i(a):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:a}=e;a&&a(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function dG(t,e,n){const r=$.useMemo(()=>new cG(t,e,n),[e,n]);return $.useEffect(()=>{r.spec=t},[t]),r}function pG(t){return $.useMemo(()=>{const e=t.type;return Tt(e!=null,"spec.type must be defined"),e},[t])}function hG(t,e,n){const r=Id(),a=dG(t,e,n),i=pG(t);Ku(function(){if(i!=null){const[o,s]=nG(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s}},[r,e,n,a,i])}function fG(t,e){const n=$R(t,e);Tt(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=uG(),a=lG(n.options,n.previewOptions);return hG(n,r,a),[RR(n.collect,r,a),QW(a),ZW(a)]}function mG(t){return $.useMemo(()=>t.hooks.dropTarget(),[t])}function gG(t){const e=Id(),n=$.useMemo(()=>new sG(e.getBackend()),[e]);return Ku(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function yG(){const t=Id();return $.useMemo(()=>new eG(t),[t])}function bG(t){const{accept:e}=t;return $.useMemo(()=>(Tt(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class vG{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function xG(t,e){const n=$.useMemo(()=>new vG(t,e),[e]);return $.useEffect(()=>{n.spec=t},[t]),n}function wG(t,e,n){const r=Id(),a=xG(t,e),i=bG(t);Ku(function(){const[o,s]=tG(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s},[r,e,a,n,i.map(o=>o.toString()).join("|")])}function kG(t,e){const n=$R(t,e),r=yG(),a=gG(n.options);return wG(n,r,a),[RR(n.collect,r,a),mG(a)]}var Ol;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(Ol||(Ol={}));class SG{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get delayMouseStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function CG(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function IG(t,e,n,r,a){if(!a)return!1;const i=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<a.length;++o){const s=a[o];if(s&&(s.start==null||i>=s.start)&&(s.end==null||i<=s.end))return!0}return!1}const EG={Left:1,Right:2,Center:4},TG={Left:0,Center:1,Right:2};function qk(t){return t.button===void 0||t.button===TG.Left}function NG(t){return t.buttons===void 0||(t.buttons&EG.Left)===0}function PR(t){return!!t.targetTouches}const _G=1;function RG(t){const e=t.nodeType===_G?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function $G(t,e){if(t.targetTouches.length===1)return d1(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return d1(t.touches[0])}function d1(t,e){return PR(t)?$G(t,e):{x:t.clientX,y:t.clientY}}const AR=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Bh={[Ol.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Ol.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Ol.keyboard]:{keydown:"keydown"}};class c0{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(Tt(!c0.isSetUp,"Cannot have two Touch backends at the same time."),c0.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(c0.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,a=!1){const i=AR?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Bh[o][n];s&&e.addEventListener(s,r,i)})}removeEventListener(e,n,r,a=!1){const i=AR?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Bh[o][n];s&&e.removeEventListener(s,r,i)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const a=i=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(i.type){case Bh.mouse.move:o={x:i.clientX,y:i.clientY};break;case Bh.touch.move:var s,l;o={x:((s=i.touches[0])===null||s===void 0?void 0:s.clientX)||0,y:((l=i.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,c=u&&n.contains(u);if(u===n||c)return this.handleMove(i,e)};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",a))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&RG(i)},this.handleTopMoveStartCapture=a=>{qk(a)&&(this.moveStartSourceIds=[])},this.handleMoveStart=a=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(a)},this.handleTopMoveStart=a=>{if(!qk(a))return;const i=d1(a);i&&(PR(a)&&(this.lastTargetTouchFallback=a.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=a=>{if(!qk(a))return;const i=a.type===Bh.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,a),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(a,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=a=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:i,dragOverTargetIds:o}=this,s=this.options.enableHoverOutsideTarget,l=d1(a,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&IG(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&CG(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),a.cancelable&&a.preventDefault();const c=(o||[]).map(g=>this.targetNodes.get(g)).filter(g=>!!g),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,c):this.document.elementsFromPoint(l.x,l.y),p=[];for(const g in d){if(!d.hasOwnProperty(g))continue;let y=d[g];for(y!=null&&p.push(y);y;)y=y.parentElement,y&&p.indexOf(y)===-1&&p.push(y)}const f=p.filter(g=>c.indexOf(g)>-1).map(g=>this._getDropTargetId(g)).filter(g=>!!g).filter((g,y,v)=>v.indexOf(g)===y);if(s)for(const g in this.targetNodes){const y=this.targetNodes.get(g);if(u&&y&&y.contains(u)&&f.indexOf(g)===-1){f.unshift(g);break}}f.reverse(),this.actions.hover(f,{clientOffset:l})},this._getDropTargetId=a=>{const i=this.targetNodes.keys();let o=i.next();for(;o.done===!1;){const s=o.value;if(a===this.targetNodes.get(s))return s;o=i.next()}},this.handleTopMoveEndCapture=a=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!NG(a)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}a.cancelable&&a.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=a=>{a.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new SG(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Ol.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Ol.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Ol.keyboard)}}const OG=function(t,e={},n={}){return new c0(t,e,n)};var DR={exports:{}},Si={},LR={exports:{}},FR={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(F,Y){var Q=F.length;F.push(Y);e:for(;0<Q;){var ne=Q-1>>>1,se=F[ne];if(0<a(se,Y))F[ne]=Y,F[Q]=se,Q=ne;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],Q=F.pop();if(Q!==Y){F[0]=Q;e:for(var ne=0,se=F.length,pe=se>>>1;ne<pe;){var de=2*(ne+1)-1,ie=F[de],xe=de+1,q=F[xe];if(0>a(ie,Q))xe<se&&0>a(q,ie)?(F[ne]=q,F[xe]=Q,ne=xe):(F[ne]=ie,F[de]=Q,ne=de);else if(xe<se&&0>a(q,Q))F[ne]=q,F[xe]=Q,ne=xe;else break e}}return Y}function a(F,Y){var Q=F.sortIndex-Y.sortIndex;return Q!==0?Q:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,p=3,f=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=F)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function S(F){if(y=!1,w(F),!g)if(n(l)!==null)g=!0,Z(C);else{var Y=n(u);Y!==null&&H(S,Y.startTime-F)}}function C(F,Y){g=!1,y&&(y=!1,b(N),N=-1),f=!0;var Q=p;try{for(w(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||F&&!L());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var se=ne(d.expirationTime<=Y);Y=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),w(Y)}else r(l);d=n(l)}if(d!==null)var pe=!0;else{var de=n(u);de!==null&&H(S,de.startTime-Y),pe=!1}return pe}finally{d=null,p=Q,f=!1}}var E=!1,_=null,N=-1,M=5,P=-1;function L(){return!(t.unstable_now()-P<M)}function U(){if(_!==null){var F=t.unstable_now();P=F;var Y=!0;try{Y=_(!0,F)}finally{Y?B():(E=!1,_=null)}}else E=!1}var B;if(typeof x=="function")B=function(){x(U)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,X=K.port2;K.port1.onmessage=U,B=function(){X.postMessage(null)}}else B=function(){v(U,0)};function Z(F){_=F,E||(E=!0,B())}function H(F,Y){N=v(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,Z(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Q=p;p=Y;try{return F()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=p;p=F;try{return Y()}finally{p=Q}},t.unstable_scheduleCallback=function(F,Y,Q){var ne=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Q+se,F={id:c++,callback:Y,priorityLevel:F,startTime:Q,expirationTime:se,sortIndex:-1},Q>ne?(F.sortIndex=Q,e(u,F),n(l)===null&&F===n(u)&&(y?(b(N),N=-1):y=!0,H(S,Q-ne))):(F.sortIndex=se,e(l,F),g||f||(g=!0,Z(C))),F},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(F){var Y=p;return function(){var Q=p;p=Y;try{return F.apply(this,arguments)}finally{p=Q}}}})(FR),LR.exports=FR;var zh=LR.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var BR=$,Ci=zh;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zR=new Set,Uh={};function Xu(t,e){Ed(t,e),Ed(t+"Capture",e)}function Ed(t,e){for(Uh[t]=e,t=0;t<e.length;t++)zR.add(e[t])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kk=Object.prototype.hasOwnProperty,MG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UR={},jR={};function PG(t){return Kk.call(jR,t)?!0:Kk.call(UR,t)?!1:MG.test(t)?jR[t]=!0:(UR[t]=!0,!1)}function AG(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DG(t,e,n,r){if(e===null||typeof e>"u"||AG(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ha(t,e,n,r,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var oa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){oa[t]=new Ha(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];oa[e]=new Ha(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){oa[t]=new Ha(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){oa[t]=new Ha(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){oa[t]=new Ha(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){oa[t]=new Ha(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){oa[t]=new Ha(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){oa[t]=new Ha(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){oa[t]=new Ha(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xk=/[\-:]([a-z])/g;function Yk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xk,Yk);oa[e]=new Ha(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xk,Yk);oa[e]=new Ha(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xk,Yk);oa[e]=new Ha(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){oa[t]=new Ha(t,1,!1,t.toLowerCase(),null,!1,!1)}),oa.xlinkHref=new Ha("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){oa[t]=new Ha(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qk(t,e,n,r){var a=oa.hasOwnProperty(e)?oa[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DG(e,n,a,r)&&(n=null),r||a===null?PG(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ds=BR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,p1=Symbol.for("react.element"),Td=Symbol.for("react.portal"),Nd=Symbol.for("react.fragment"),Zk=Symbol.for("react.strict_mode"),Jk=Symbol.for("react.profiler"),VR=Symbol.for("react.provider"),WR=Symbol.for("react.context"),eS=Symbol.for("react.forward_ref"),tS=Symbol.for("react.suspense"),nS=Symbol.for("react.suspense_list"),rS=Symbol.for("react.memo"),Ml=Symbol.for("react.lazy"),GR=Symbol.for("react.offscreen"),HR=Symbol.iterator;function jh(t){return t===null||typeof t!="object"?null:(t=HR&&t[HR]||t["@@iterator"],typeof t=="function"?t:null)}var Zn=Object.assign,aS;function Vh(t){if(aS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);aS=e&&e[1]||""}return`
`+aS+t}var iS=!1;function oS(t,e){if(!t||iS)return"";iS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{iS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vh(t):""}function LG(t){switch(t.tag){case 5:return Vh(t.type);case 16:return Vh("Lazy");case 13:return Vh("Suspense");case 19:return Vh("SuspenseList");case 0:case 2:case 15:return t=oS(t.type,!1),t;case 11:return t=oS(t.type.render,!1),t;case 1:return t=oS(t.type,!0),t;default:return""}}function sS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nd:return"Fragment";case Td:return"Portal";case Jk:return"Profiler";case Zk:return"StrictMode";case tS:return"Suspense";case nS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WR:return(t.displayName||"Context")+".Consumer";case VR:return(t._context.displayName||"Context")+".Provider";case eS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rS:return e=t.displayName||null,e!==null?e:sS(t.type)||"Memo";case Ml:e=t._payload,t=t._init;try{return sS(t(e))}catch{}}return null}function FG(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sS(e);case 8:return e===Zk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BG(t){var e=qR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function h1(t){t._valueTracker||(t._valueTracker=BG(t))}function KR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function f1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lS(t,e){var n=e.checked;return Zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function XR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YR(t,e){e=e.checked,e!=null&&Qk(t,"checked",e,!1)}function uS(t,e){YR(t,e);var n=Pl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cS(t,e.type,n):e.hasOwnProperty("defaultValue")&&cS(t,e.type,Pl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cS(t,e,n){(e!=="number"||f1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wh=Array.isArray;function _d(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pl(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function dS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return Zn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ZR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(Wh(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pl(n)}}function JR(t,e){var n=Pl(e.value),r=Pl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function e$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function t$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?t$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var m1,n$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(m1=m1||document.createElement("div"),m1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=m1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zG=["Webkit","ms","Moz","O"];Object.keys(Hh).forEach(function(t){zG.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hh[e]=Hh[t]})});function r$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hh.hasOwnProperty(t)&&Hh[t]?(""+e).trim():e+"px"}function a$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=r$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var UG=Zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hS(t,e){if(e){if(UG[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function fS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mS=null;function gS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yS=null,Rd=null,$d=null;function i$(t){if(t=mf(t)){if(typeof yS!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=F1(e),yS(t.stateNode,t.type,e))}}function o$(t){Rd?$d?$d.push(t):$d=[t]:Rd=t}function s$(){if(Rd){var t=Rd,e=$d;if($d=Rd=null,i$(t),e)for(t=0;t<e.length;t++)i$(e[t])}}function l$(t,e){return t(e)}function u$(){}var bS=!1;function c$(t,e,n){if(bS)return t(e,n);bS=!0;try{return l$(t,e,n)}finally{bS=!1,(Rd!==null||$d!==null)&&(u$(),s$())}}function qh(t,e){var n=t.stateNode;if(n===null)return null;var r=F1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var vS=!1;if(As)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){vS=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{vS=!1}function jG(t,e,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Xh=!1,g1=null,y1=!1,xS=null,VG={onError:function(t){Xh=!0,g1=t}};function WG(t,e,n,r,a,i,o,s,l){Xh=!1,g1=null,jG.apply(VG,arguments)}function GG(t,e,n,r,a,i,o,s,l){if(WG.apply(this,arguments),Xh){if(Xh){var u=g1;Xh=!1,g1=null}else throw Error(Te(198));y1||(y1=!0,xS=u)}}function Yu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function d$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p$(t){if(Yu(t)!==t)throw Error(Te(188))}function HG(t){var e=t.alternate;if(!e){if(e=Yu(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return p$(a),t;if(i===r)return p$(a),e;i=i.sibling}throw Error(Te(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(Te(189))}}if(n.alternate!==r)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function h$(t){return t=HG(t),t!==null?f$(t):null}function f$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f$(t);if(e!==null)return e;t=t.sibling}return null}var m$=Ci.unstable_scheduleCallback,g$=Ci.unstable_cancelCallback,qG=Ci.unstable_shouldYield,KG=Ci.unstable_requestPaint,mr=Ci.unstable_now,XG=Ci.unstable_getCurrentPriorityLevel,wS=Ci.unstable_ImmediatePriority,y$=Ci.unstable_UserBlockingPriority,b1=Ci.unstable_NormalPriority,YG=Ci.unstable_LowPriority,b$=Ci.unstable_IdlePriority,v1=null,ns=null;function QG(t){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(v1,t,void 0,(t.current.flags&128)===128)}catch{}}var Co=Math.clz32?Math.clz32:eH,ZG=Math.log,JG=Math.LN2;function eH(t){return t>>>=0,t===0?32:31-(ZG(t)/JG|0)|0}var x1=64,w1=4194304;function Yh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function k1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=Yh(s):(i&=o,i!==0&&(r=Yh(i)))}else o=n&~a,o!==0?r=Yh(o):i!==0&&(r=Yh(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Co(e),a=1<<n,r|=t[n],e&=~a;return r}function tH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nH(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Co(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=tH(s,e)):l<=e&&(t.expiredLanes|=s),i&=~s}}function kS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v$(){var t=x1;return x1<<=1,!(x1&4194240)&&(x1=64),t}function SS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Co(e),t[e]=n}function rH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Co(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function CS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Co(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var gn=0;function x$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var w$,IS,k$,S$,C$,ES=!1,S1=[],Al=null,Dl=null,Ll=null,Zh=new Map,Jh=new Map,Fl=[],aH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function I$(t,e){switch(t){case"focusin":case"focusout":Al=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":Ll=null;break;case"pointerover":case"pointerout":Zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(e.pointerId)}}function ef(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=mf(e),e!==null&&IS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function iH(t,e,n,r,a){switch(e){case"focusin":return Al=ef(Al,t,e,n,r,a),!0;case"dragenter":return Dl=ef(Dl,t,e,n,r,a),!0;case"mouseover":return Ll=ef(Ll,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return Zh.set(i,ef(Zh.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Jh.set(i,ef(Jh.get(i)||null,t,e,n,r,a)),!0}return!1}function E$(t){var e=Qu(t.target);if(e!==null){var n=Yu(e);if(n!==null){if(e=n.tag,e===13){if(e=d$(n),e!==null){t.blockedOn=e,C$(t.priority,function(){k$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function C1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=NS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mS=r,n.target.dispatchEvent(r),mS=null}else return e=mf(n),e!==null&&IS(e),t.blockedOn=n,!1;e.shift()}return!0}function T$(t,e,n){C1(t)&&n.delete(e)}function oH(){ES=!1,Al!==null&&C1(Al)&&(Al=null),Dl!==null&&C1(Dl)&&(Dl=null),Ll!==null&&C1(Ll)&&(Ll=null),Zh.forEach(T$),Jh.forEach(T$)}function tf(t,e){t.blockedOn===e&&(t.blockedOn=null,ES||(ES=!0,Ci.unstable_scheduleCallback(Ci.unstable_NormalPriority,oH)))}function nf(t){function e(a){return tf(a,t)}if(0<S1.length){tf(S1[0],t);for(var n=1;n<S1.length;n++){var r=S1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Al!==null&&tf(Al,t),Dl!==null&&tf(Dl,t),Ll!==null&&tf(Ll,t),Zh.forEach(e),Jh.forEach(e),n=0;n<Fl.length;n++)r=Fl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fl.length&&(n=Fl[0],n.blockedOn===null);)E$(n),n.blockedOn===null&&Fl.shift()}var Od=Ds.ReactCurrentBatchConfig,I1=!0;function sH(t,e,n,r){var a=gn,i=Od.transition;Od.transition=null;try{gn=1,TS(t,e,n,r)}finally{gn=a,Od.transition=i}}function lH(t,e,n,r){var a=gn,i=Od.transition;Od.transition=null;try{gn=4,TS(t,e,n,r)}finally{gn=a,Od.transition=i}}function TS(t,e,n,r){if(I1){var a=NS(t,e,n,r);if(a===null)GS(t,e,r,E1,n),I$(t,r);else if(iH(a,t,e,n,r))r.stopPropagation();else if(I$(t,r),e&4&&-1<aH.indexOf(t)){for(;a!==null;){var i=mf(a);if(i!==null&&w$(i),i=NS(t,e,n,r),i===null&&GS(t,e,r,E1,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else GS(t,e,r,null,n)}}var E1=null;function NS(t,e,n,r){if(E1=null,t=gS(r),t=Qu(t),t!==null)if(e=Yu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=d$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return E1=t,null}function N$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XG()){case wS:return 1;case y$:return 4;case b1:case YG:return 16;case b$:return 536870912;default:return 16}default:return 16}}var Bl=null,_S=null,T1=null;function _$(){if(T1)return T1;var t,e=_S,n=e.length,r,a="value"in Bl?Bl.value:Bl.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[i-r];r++);return T1=a.slice(t,1<r?1-r:void 0)}function N1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _1(){return!0}function R$(){return!1}function Ii(t){function e(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_1:R$,this.isPropagationStopped=R$,this}return Zn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_1)},persist:function(){},isPersistent:_1}),e}var Md={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RS=Ii(Md),rf=Zn({},Md,{view:0,detail:0}),uH=Ii(rf),$S,OS,af,R1=Zn({},rf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==af&&(af&&t.type==="mousemove"?($S=t.screenX-af.screenX,OS=t.screenY-af.screenY):OS=$S=0,af=t),$S)},movementY:function(t){return"movementY"in t?t.movementY:OS}}),$$=Ii(R1),cH=Zn({},R1,{dataTransfer:0}),dH=Ii(cH),pH=Zn({},rf,{relatedTarget:0}),MS=Ii(pH),hH=Zn({},Md,{animationName:0,elapsedTime:0,pseudoElement:0}),fH=Ii(hH),mH=Zn({},Md,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gH=Ii(mH),yH=Zn({},Md,{data:0}),O$=Ii(yH),bH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xH[t])?!!e[t]:!1}function PS(){return wH}var kH=Zn({},rf,{key:function(t){if(t.key){var e=bH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=N1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PS,charCode:function(t){return t.type==="keypress"?N1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?N1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SH=Ii(kH),CH=Zn({},R1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M$=Ii(CH),IH=Zn({},rf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PS}),EH=Ii(IH),TH=Zn({},Md,{propertyName:0,elapsedTime:0,pseudoElement:0}),NH=Ii(TH),_H=Zn({},R1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RH=Ii(_H),$H=[9,13,27,32],AS=As&&"CompositionEvent"in window,of=null;As&&"documentMode"in document&&(of=document.documentMode);var OH=As&&"TextEvent"in window&&!of,P$=As&&(!AS||of&&8<of&&11>=of),A$=" ",D$=!1;function L$(t,e){switch(t){case"keyup":return $H.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F$(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pd=!1;function MH(t,e){switch(t){case"compositionend":return F$(e);case"keypress":return e.which!==32?null:(D$=!0,A$);case"textInput":return t=e.data,t===A$&&D$?null:t;default:return null}}function PH(t,e){if(Pd)return t==="compositionend"||!AS&&L$(t,e)?(t=_$(),T1=_S=Bl=null,Pd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P$&&e.locale!=="ko"?null:e.data;default:return null}}var AH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AH[t.type]:e==="textarea"}function z$(t,e,n,r){o$(r),e=A1(e,"onChange"),0<e.length&&(n=new RS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sf=null,lf=null;function DH(t){aO(t,0)}function $1(t){var e=Bd(t);if(KR(e))return t}function LH(t,e){if(t==="change")return e}var U$=!1;if(As){var DS;if(As){var LS="oninput"in document;if(!LS){var j$=document.createElement("div");j$.setAttribute("oninput","return;"),LS=typeof j$.oninput=="function"}DS=LS}else DS=!1;U$=DS&&(!document.documentMode||9<document.documentMode)}function V$(){sf&&(sf.detachEvent("onpropertychange",W$),lf=sf=null)}function W$(t){if(t.propertyName==="value"&&$1(lf)){var e=[];z$(e,lf,t,gS(t)),c$(DH,e)}}function FH(t,e,n){t==="focusin"?(V$(),sf=e,lf=n,sf.attachEvent("onpropertychange",W$)):t==="focusout"&&V$()}function BH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $1(lf)}function zH(t,e){if(t==="click")return $1(e)}function UH(t,e){if(t==="input"||t==="change")return $1(e)}function jH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Io=typeof Object.is=="function"?Object.is:jH;function uf(t,e){if(Io(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Kk.call(e,a)||!Io(t[a],e[a]))return!1}return!0}function G$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function H$(t,e){var n=G$(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=G$(n)}}function q$(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q$(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K$(){for(var t=window,e=f1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=f1(t.document)}return e}function FS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VH(t){var e=K$(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&q$(n.ownerDocument.documentElement,n)){if(r!==null&&FS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=H$(n,i);var o=H$(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WH=As&&"documentMode"in document&&11>=document.documentMode,Ad=null,BS=null,cf=null,zS=!1;function X$(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zS||Ad==null||Ad!==f1(r)||(r=Ad,"selectionStart"in r&&FS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cf&&uf(cf,r)||(cf=r,r=A1(BS,"onSelect"),0<r.length&&(e=new RS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ad)))}function O1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Dd={animationend:O1("Animation","AnimationEnd"),animationiteration:O1("Animation","AnimationIteration"),animationstart:O1("Animation","AnimationStart"),transitionend:O1("Transition","TransitionEnd")},US={},Y$={};As&&(Y$=document.createElement("div").style,"AnimationEvent"in window||(delete Dd.animationend.animation,delete Dd.animationiteration.animation,delete Dd.animationstart.animation),"TransitionEvent"in window||delete Dd.transitionend.transition);function M1(t){if(US[t])return US[t];if(!Dd[t])return t;var e=Dd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Y$)return US[t]=e[n];return t}var Q$=M1("animationend"),Z$=M1("animationiteration"),J$=M1("animationstart"),eO=M1("transitionend"),tO=new Map,nO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zl(t,e){tO.set(t,e),Xu(e,[t])}for(var jS=0;jS<nO.length;jS++){var VS=nO[jS],GH=VS.toLowerCase(),HH=VS[0].toUpperCase()+VS.slice(1);zl(GH,"on"+HH)}zl(Q$,"onAnimationEnd"),zl(Z$,"onAnimationIteration"),zl(J$,"onAnimationStart"),zl("dblclick","onDoubleClick"),zl("focusin","onFocus"),zl("focusout","onBlur"),zl(eO,"onTransitionEnd"),Ed("onMouseEnter",["mouseout","mouseover"]),Ed("onMouseLeave",["mouseout","mouseover"]),Ed("onPointerEnter",["pointerout","pointerover"]),Ed("onPointerLeave",["pointerout","pointerover"]),Xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xu("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qH=new Set("cancel close invalid load scroll toggle".split(" ").concat(df));function rO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GG(r,e,void 0,t),t.currentTarget=null}function aO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;rO(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;rO(a,s,u),i=l}}}if(y1)throw t=xS,y1=!1,xS=null,t}function Ln(t,e){var n=e[QS];n===void 0&&(n=e[QS]=new Set);var r=t+"__bubble";n.has(r)||(iO(e,t,2,!1),n.add(r))}function WS(t,e,n){var r=0;e&&(r|=4),iO(n,t,r,e)}var P1="_reactListening"+Math.random().toString(36).slice(2);function pf(t){if(!t[P1]){t[P1]=!0,zR.forEach(function(n){n!=="selectionchange"&&(qH.has(n)||WS(n,!1,t),WS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[P1]||(e[P1]=!0,WS("selectionchange",!1,e))}}function iO(t,e,n,r){switch(N$(e)){case 1:var a=sH;break;case 4:a=lH;break;default:a=TS}n=a.bind(null,e,n,t),a=void 0,!vS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function GS(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=Qu(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}c$(function(){var u=i,c=gS(n),d=[];e:{var p=tO.get(t);if(p!==void 0){var f=RS,g=t;switch(t){case"keypress":if(N1(n)===0)break e;case"keydown":case"keyup":f=SH;break;case"focusin":g="focus",f=MS;break;case"focusout":g="blur",f=MS;break;case"beforeblur":case"afterblur":f=MS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=$$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=dH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=EH;break;case Q$:case Z$:case J$:f=fH;break;case eO:f=NH;break;case"scroll":f=uH;break;case"wheel":f=RH;break;case"copy":case"cut":case"paste":f=gH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=M$}var y=(e&4)!==0,v=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var x=u,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=qh(x,b),S!=null&&y.push(hf(x,S,w)))),v)break;x=x.return}0<y.length&&(p=new f(p,g,null,n,c),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==mS&&(g=n.relatedTarget||n.fromElement)&&(Qu(g)||g[Ls]))break e;if((f||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?Qu(g):null,g!==null&&(v=Yu(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=$$,S="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=M$,S="onPointerLeave",b="onPointerEnter",x="pointer"),v=f==null?p:Bd(f),w=g==null?p:Bd(g),p=new y(S,x+"leave",f,n,c),p.target=v,p.relatedTarget=w,S=null,Qu(c)===u&&(y=new y(b,x+"enter",g,n,c),y.target=w,y.relatedTarget=v,S=y),v=S,f&&g)t:{for(y=f,b=g,x=0,w=y;w;w=Ld(w))x++;for(w=0,S=b;S;S=Ld(S))w++;for(;0<x-w;)y=Ld(y),x--;for(;0<w-x;)b=Ld(b),w--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=Ld(y),b=Ld(b)}y=null}else y=null;f!==null&&oO(d,p,f,y,!1),g!==null&&v!==null&&oO(d,v,g,y,!0)}}e:{if(p=u?Bd(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var C=LH;else if(B$(p))if(U$)C=UH;else{C=BH;var E=FH}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=zH);if(C&&(C=C(t,u))){z$(d,C,n,c);break e}E&&E(t,p,u),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&cS(p,"number",p.value)}switch(E=u?Bd(u):window,t){case"focusin":(B$(E)||E.contentEditable==="true")&&(Ad=E,BS=u,cf=null);break;case"focusout":cf=BS=Ad=null;break;case"mousedown":zS=!0;break;case"contextmenu":case"mouseup":case"dragend":zS=!1,X$(d,n,c);break;case"selectionchange":if(WH)break;case"keydown":case"keyup":X$(d,n,c)}var _;if(AS)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Pd?L$(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(P$&&n.locale!=="ko"&&(Pd||N!=="onCompositionStart"?N==="onCompositionEnd"&&Pd&&(_=_$()):(Bl=c,_S="value"in Bl?Bl.value:Bl.textContent,Pd=!0)),E=A1(u,N),0<E.length&&(N=new O$(N,t,null,n,c),d.push({event:N,listeners:E}),_?N.data=_:(_=F$(n),_!==null&&(N.data=_)))),(_=OH?MH(t,n):PH(t,n))&&(u=A1(u,"onBeforeInput"),0<u.length&&(c=new O$("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=_))}aO(d,e)})}function hf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function A1(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=qh(t,n),i!=null&&r.unshift(hf(t,i,a)),i=qh(t,e),i!=null&&r.push(hf(t,i,a))),t=t.return}return r}function Ld(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oO(t,e,n,r,a){for(var i=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=qh(n,i),l!=null&&o.unshift(hf(n,l,s))):a||(l=qh(n,i),l!=null&&o.push(hf(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KH=/\r\n?/g,XH=/\u0000|\uFFFD/g;function sO(t){return(typeof t=="string"?t:""+t).replace(KH,`
`).replace(XH,"")}function D1(t,e,n){if(e=sO(e),sO(t)!==e&&n)throw Error(Te(425))}function L1(){}var HS=null,qS=null;function KS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var XS=typeof setTimeout=="function"?setTimeout:void 0,YH=typeof clearTimeout=="function"?clearTimeout:void 0,lO=typeof Promise=="function"?Promise:void 0,QH=typeof queueMicrotask=="function"?queueMicrotask:typeof lO<"u"?function(t){return lO.resolve(null).then(t).catch(ZH)}:XS;function ZH(t){setTimeout(function(){throw t})}function YS(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),nf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);nf(e)}function Ul(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fd=Math.random().toString(36).slice(2),rs="__reactFiber$"+Fd,ff="__reactProps$"+Fd,Ls="__reactContainer$"+Fd,QS="__reactEvents$"+Fd,JH="__reactListeners$"+Fd,eq="__reactHandles$"+Fd;function Qu(t){var e=t[rs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ls]||n[rs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uO(t);t!==null;){if(n=t[rs])return n;t=uO(t)}return e}t=n,n=t.parentNode}return null}function mf(t){return t=t[rs]||t[Ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function F1(t){return t[ff]||null}var ZS=[],zd=-1;function jl(t){return{current:t}}function Fn(t){0>zd||(t.current=ZS[zd],ZS[zd]=null,zd--)}function $n(t,e){zd++,ZS[zd]=t.current,t.current=e}var Vl={},Ia=jl(Vl),ai=jl(!1),Zu=Vl;function Ud(t,e){var n=t.type.contextTypes;if(!n)return Vl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function ii(t){return t=t.childContextTypes,t!=null}function B1(){Fn(ai),Fn(Ia)}function cO(t,e,n){if(Ia.current!==Vl)throw Error(Te(168));$n(Ia,e),$n(ai,n)}function dO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(Te(108,FG(t)||"Unknown",a));return Zn({},n,r)}function z1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vl,Zu=Ia.current,$n(Ia,t),$n(ai,ai.current),!0}function pO(t,e,n){var r=t.stateNode;if(!r)throw Error(Te(169));n?(t=dO(t,e,Zu),r.__reactInternalMemoizedMergedChildContext=t,Fn(ai),Fn(Ia),$n(Ia,t)):Fn(ai),$n(ai,n)}var Fs=null,U1=!1,JS=!1;function hO(t){Fs===null?Fs=[t]:Fs.push(t)}function tq(t){U1=!0,hO(t)}function Wl(){if(!JS&&Fs!==null){JS=!0;var t=0,e=gn;try{var n=Fs;for(gn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fs=null,U1=!1}catch(a){throw Fs!==null&&(Fs=Fs.slice(t+1)),m$(wS,Wl),a}finally{gn=e,JS=!1}}return null}var jd=[],Vd=0,j1=null,V1=0,Hi=[],qi=0,Ju=null,Bs=1,zs="";function ec(t,e){jd[Vd++]=V1,jd[Vd++]=j1,j1=t,V1=e}function fO(t,e,n){Hi[qi++]=Bs,Hi[qi++]=zs,Hi[qi++]=Ju,Ju=t;var r=Bs;t=zs;var a=32-Co(r)-1;r&=~(1<<a),n+=1;var i=32-Co(e)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Bs=1<<32-Co(e)+a|n<<a|r,zs=i+t}else Bs=1<<i|n<<a|r,zs=t}function eC(t){t.return!==null&&(ec(t,1),fO(t,1,0))}function tC(t){for(;t===j1;)j1=jd[--Vd],jd[Vd]=null,V1=jd[--Vd],jd[Vd]=null;for(;t===Ju;)Ju=Hi[--qi],Hi[qi]=null,zs=Hi[--qi],Hi[qi]=null,Bs=Hi[--qi],Hi[qi]=null}var Ei=null,Ti=null,Wn=!1,Eo=null;function mO(t,e){var n=Qi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gO(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ei=t,Ti=Ul(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ei=t,Ti=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ju!==null?{id:Bs,overflow:zs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ei=t,Ti=null,!0):!1;default:return!1}}function nC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rC(t){if(Wn){var e=Ti;if(e){var n=e;if(!gO(t,e)){if(nC(t))throw Error(Te(418));e=Ul(n.nextSibling);var r=Ei;e&&gO(t,e)?mO(r,n):(t.flags=t.flags&-4097|2,Wn=!1,Ei=t)}}else{if(nC(t))throw Error(Te(418));t.flags=t.flags&-4097|2,Wn=!1,Ei=t}}}function yO(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ei=t}function W1(t){if(t!==Ei)return!1;if(!Wn)return yO(t),Wn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KS(t.type,t.memoizedProps)),e&&(e=Ti)){if(nC(t))throw bO(),Error(Te(418));for(;e;)mO(t,e),e=Ul(e.nextSibling)}if(yO(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ti=Ul(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ti=null}}else Ti=Ei?Ul(t.stateNode.nextSibling):null;return!0}function bO(){for(var t=Ti;t;)t=Ul(t.nextSibling)}function Wd(){Ti=Ei=null,Wn=!1}function aC(t){Eo===null?Eo=[t]:Eo.push(t)}var nq=Ds.ReactCurrentBatchConfig;function To(t,e){if(t&&t.defaultProps){e=Zn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var G1=jl(null),H1=null,Gd=null,iC=null;function oC(){iC=Gd=H1=null}function sC(t){var e=G1.current;Fn(G1),t._currentValue=e}function lC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hd(t,e){H1=t,iC=Gd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(oi=!0),t.firstContext=null)}function Ki(t){var e=t._currentValue;if(iC!==t)if(t={context:t,memoizedValue:e,next:null},Gd===null){if(H1===null)throw Error(Te(308));Gd=t,H1.dependencies={lanes:0,firstContext:t}}else Gd=Gd.next=t;return e}var tc=null;function uC(t){tc===null?tc=[t]:tc.push(t)}function vO(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,uC(e)):(n.next=a.next,a.next=n),e.interleaved=n,Us(t,r)}function Us(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gl=!1;function cC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function js(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Zt&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,Us(t,n)}return a=r.interleaved,a===null?(e.next=e,uC(r)):(e.next=a.next,a.next=e),r.interleaved=e,Us(t,n)}function q1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CS(t,n)}}function wO(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function K1(t,e,n,r){var a=t.updateQueue;Gl=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,c=u=l=null,s=i;do{var p=s.lane,f=s.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=t,y=s;switch(p=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(f,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(f,d,p):g,p==null)break e;d=Zn({},d,p);break e;case 2:Gl=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(c===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);ac|=o,t.lanes=o,t.memoizedState=d}}function kO(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Te(191,a));a.call(r)}}}var SO=new BR.Component().refs;function dC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var X1={isMounted:function(t){return(t=t._reactInternals)?Yu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ka(),a=Yl(t),i=js(r,a);i.payload=e,n!=null&&(i.callback=n),e=Hl(t,i,a),e!==null&&(Ro(e,t,a,r),q1(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ka(),a=Yl(t),i=js(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hl(t,i,a),e!==null&&(Ro(e,t,a,r),q1(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ka(),r=Yl(t),a=js(n,r);a.tag=2,e!=null&&(a.callback=e),e=Hl(t,a,r),e!==null&&(Ro(e,t,r,n),q1(e,t,r))}};function CO(t,e,n,r,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!uf(n,r)||!uf(a,i):!0}function IO(t,e,n){var r=!1,a=Vl,i=e.contextType;return typeof i=="object"&&i!==null?i=Ki(i):(a=ii(e)?Zu:Ia.current,r=e.contextTypes,i=(r=r!=null)?Ud(t,a):Vl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=X1,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function EO(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&X1.enqueueReplaceState(e,e.state,null)}function pC(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=SO,cC(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=Ki(i):(i=ii(e)?Zu:Ia.current,a.context=Ud(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(dC(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&X1.enqueueReplaceState(a,a.state,null),K1(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function gf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var r=n.stateNode}if(!r)throw Error(Te(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=a.refs;s===SO&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function Y1(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function TO(t){var e=t._init;return e(t._payload)}function NO(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=Zl(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,x,w,S){return x===null||x.tag!==6?(x=KC(w,b.mode,S),x.return=b,x):(x=a(x,w),x.return=b,x)}function l(b,x,w,S){var C=w.type;return C===Nd?c(b,x,w.props.children,S,w.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ml&&TO(C)===x.type)?(S=a(x,w.props),S.ref=gf(b,x,w),S.return=b,S):(S=my(w.type,w.key,w.props,null,b.mode,S),S.ref=gf(b,x,w),S.return=b,S)}function u(b,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=XC(w,b.mode,S),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function c(b,x,w,S,C){return x===null||x.tag!==7?(x=lc(w,b.mode,S,C),x.return=b,x):(x=a(x,w),x.return=b,x)}function d(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=KC(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case p1:return w=my(x.type,x.key,x.props,null,b.mode,w),w.ref=gf(b,null,x),w.return=b,w;case Td:return x=XC(x,b.mode,w),x.return=b,x;case Ml:var S=x._init;return d(b,S(x._payload),w)}if(Wh(x)||jh(x))return x=lc(x,b.mode,w,null),x.return=b,x;Y1(b,x)}return null}function p(b,x,w,S){var C=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:s(b,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case p1:return w.key===C?l(b,x,w,S):null;case Td:return w.key===C?u(b,x,w,S):null;case Ml:return C=w._init,p(b,x,C(w._payload),S)}if(Wh(w)||jh(w))return C!==null?null:c(b,x,w,S,null);Y1(b,w)}return null}function f(b,x,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,s(x,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case p1:return b=b.get(S.key===null?w:S.key)||null,l(x,b,S,C);case Td:return b=b.get(S.key===null?w:S.key)||null,u(x,b,S,C);case Ml:var E=S._init;return f(b,x,w,E(S._payload),C)}if(Wh(S)||jh(S))return b=b.get(w)||null,c(x,b,S,C,null);Y1(x,S)}return null}function g(b,x,w,S){for(var C=null,E=null,_=x,N=x=0,M=null;_!==null&&N<w.length;N++){_.index>N?(M=_,_=null):M=_.sibling;var P=p(b,_,w[N],S);if(P===null){_===null&&(_=M);break}t&&_&&P.alternate===null&&e(b,_),x=i(P,x,N),E===null?C=P:E.sibling=P,E=P,_=M}if(N===w.length)return n(b,_),Wn&&ec(b,N),C;if(_===null){for(;N<w.length;N++)_=d(b,w[N],S),_!==null&&(x=i(_,x,N),E===null?C=_:E.sibling=_,E=_);return Wn&&ec(b,N),C}for(_=r(b,_);N<w.length;N++)M=f(_,b,N,w[N],S),M!==null&&(t&&M.alternate!==null&&_.delete(M.key===null?N:M.key),x=i(M,x,N),E===null?C=M:E.sibling=M,E=M);return t&&_.forEach(function(L){return e(b,L)}),Wn&&ec(b,N),C}function y(b,x,w,S){var C=jh(w);if(typeof C!="function")throw Error(Te(150));if(w=C.call(w),w==null)throw Error(Te(151));for(var E=C=null,_=x,N=x=0,M=null,P=w.next();_!==null&&!P.done;N++,P=w.next()){_.index>N?(M=_,_=null):M=_.sibling;var L=p(b,_,P.value,S);if(L===null){_===null&&(_=M);break}t&&_&&L.alternate===null&&e(b,_),x=i(L,x,N),E===null?C=L:E.sibling=L,E=L,_=M}if(P.done)return n(b,_),Wn&&ec(b,N),C;if(_===null){for(;!P.done;N++,P=w.next())P=d(b,P.value,S),P!==null&&(x=i(P,x,N),E===null?C=P:E.sibling=P,E=P);return Wn&&ec(b,N),C}for(_=r(b,_);!P.done;N++,P=w.next())P=f(_,b,N,P.value,S),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?N:P.key),x=i(P,x,N),E===null?C=P:E.sibling=P,E=P);return t&&_.forEach(function(U){return e(b,U)}),Wn&&ec(b,N),C}function v(b,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Nd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case p1:e:{for(var C=w.key,E=x;E!==null;){if(E.key===C){if(C=w.type,C===Nd){if(E.tag===7){n(b,E.sibling),x=a(E,w.props.children),x.return=b,b=x;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ml&&TO(C)===E.type){n(b,E.sibling),x=a(E,w.props),x.ref=gf(b,E,w),x.return=b,b=x;break e}n(b,E);break}else e(b,E);E=E.sibling}w.type===Nd?(x=lc(w.props.children,b.mode,S,w.key),x.return=b,b=x):(S=my(w.type,w.key,w.props,null,b.mode,S),S.ref=gf(b,x,w),S.return=b,b=S)}return o(b);case Td:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=XC(w,b.mode,S),x.return=b,b=x}return o(b);case Ml:return E=w._init,v(b,x,E(w._payload),S)}if(Wh(w))return g(b,x,w,S);if(jh(w))return y(b,x,w,S);Y1(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=a(x,w),x.return=b,b=x):(n(b,x),x=KC(w,b.mode,S),x.return=b,b=x),o(b)):n(b,x)}return v}var qd=NO(!0),_O=NO(!1),yf={},as=jl(yf),bf=jl(yf),vf=jl(yf);function nc(t){if(t===yf)throw Error(Te(174));return t}function hC(t,e){switch($n(vf,e),$n(bf,t),$n(as,yf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pS(e,t)}Fn(as),$n(as,e)}function Kd(){Fn(as),Fn(bf),Fn(vf)}function RO(t){nc(vf.current);var e=nc(as.current),n=pS(e,t.type);e!==n&&($n(bf,t),$n(as,n))}function fC(t){bf.current===t&&(Fn(as),Fn(bf))}var Jn=jl(0);function Q1(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mC=[];function gC(){for(var t=0;t<mC.length;t++)mC[t]._workInProgressVersionPrimary=null;mC.length=0}var Z1=Ds.ReactCurrentDispatcher,yC=Ds.ReactCurrentBatchConfig,rc=0,er=null,Mr=null,Hr=null,J1=!1,xf=!1,wf=0,rq=0;function Ea(){throw Error(Te(321))}function bC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Io(t[n],e[n]))return!1;return!0}function vC(t,e,n,r,a,i){if(rc=i,er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Z1.current=t===null||t.memoizedState===null?sq:lq,t=n(r,a),xf){i=0;do{if(xf=!1,wf=0,25<=i)throw Error(Te(301));i+=1,Hr=Mr=null,e.updateQueue=null,Z1.current=uq,t=n(r,a)}while(xf)}if(Z1.current=ny,e=Mr!==null&&Mr.next!==null,rc=0,Hr=Mr=er=null,J1=!1,e)throw Error(Te(300));return t}function xC(){var t=wf!==0;return wf=0,t}function is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?er.memoizedState=Hr=t:Hr=Hr.next=t,Hr}function Xi(){if(Mr===null){var t=er.alternate;t=t!==null?t.memoizedState:null}else t=Mr.next;var e=Hr===null?er.memoizedState:Hr.next;if(e!==null)Hr=e,Mr=t;else{if(t===null)throw Error(Te(310));Mr=t,t={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Hr===null?er.memoizedState=Hr=t:Hr=Hr.next=t}return Hr}function kf(t,e){return typeof e=="function"?e(t):e}function wC(t){var e=Xi(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=Mr,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((rc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,er.lanes|=c,ac|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,Io(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,er.lanes|=i,ac|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kC(t){var e=Xi(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Io(i,e.memoizedState)||(oi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $O(){}function OO(t,e){var n=er,r=Xi(),a=e(),i=!Io(r.memoizedState,a);if(i&&(r.memoizedState=a,oi=!0),r=r.queue,SC(AO.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Hr!==null&&Hr.memoizedState.tag&1){if(n.flags|=2048,Sf(9,PO.bind(null,n,r,a,e),void 0,null),qr===null)throw Error(Te(349));rc&30||MO(n,e,a)}return a}function MO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PO(t,e,n,r){e.value=n,e.getSnapshot=r,DO(e)&&LO(t)}function AO(t,e,n){return n(function(){DO(e)&&LO(t)})}function DO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Io(t,n)}catch{return!0}}function LO(t){var e=Us(t,1);e!==null&&Ro(e,t,1,-1)}function FO(t){var e=is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kf,lastRenderedState:t},e.queue=t,t=t.dispatch=oq.bind(null,er,t),[e.memoizedState,t]}function Sf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BO(){return Xi().memoizedState}function ey(t,e,n,r){var a=is();er.flags|=t,a.memoizedState=Sf(1|e,n,void 0,r===void 0?null:r)}function ty(t,e,n,r){var a=Xi();r=r===void 0?null:r;var i=void 0;if(Mr!==null){var o=Mr.memoizedState;if(i=o.destroy,r!==null&&bC(r,o.deps)){a.memoizedState=Sf(e,n,i,r);return}}er.flags|=t,a.memoizedState=Sf(1|e,n,i,r)}function zO(t,e){return ey(8390656,8,t,e)}function SC(t,e){return ty(2048,8,t,e)}function UO(t,e){return ty(4,2,t,e)}function jO(t,e){return ty(4,4,t,e)}function VO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WO(t,e,n){return n=n!=null?n.concat([t]):null,ty(4,4,VO.bind(null,e,t),n)}function CC(){}function GO(t,e){var n=Xi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HO(t,e){var n=Xi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qO(t,e,n){return rc&21?(Io(n,e)||(n=v$(),er.lanes|=n,ac|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,oi=!0),t.memoizedState=n)}function aq(t,e){var n=gn;gn=n!==0&&4>n?n:4,t(!0);var r=yC.transition;yC.transition={};try{t(!1),e()}finally{gn=n,yC.transition=r}}function KO(){return Xi().memoizedState}function iq(t,e,n){var r=Yl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XO(t))YO(e,n);else if(n=vO(t,e,n,r),n!==null){var a=Ka();Ro(n,t,r,a),QO(n,e,r)}}function oq(t,e,n){var r=Yl(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XO(t))YO(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,Io(s,o)){var l=e.interleaved;l===null?(a.next=a,uC(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}n=vO(t,e,a,r),n!==null&&(a=Ka(),Ro(n,t,r,a),QO(n,e,r))}}function XO(t){var e=t.alternate;return t===er||e!==null&&e===er}function YO(t,e){xf=J1=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CS(t,n)}}var ny={readContext:Ki,useCallback:Ea,useContext:Ea,useEffect:Ea,useImperativeHandle:Ea,useInsertionEffect:Ea,useLayoutEffect:Ea,useMemo:Ea,useReducer:Ea,useRef:Ea,useState:Ea,useDebugValue:Ea,useDeferredValue:Ea,useTransition:Ea,useMutableSource:Ea,useSyncExternalStore:Ea,useId:Ea,unstable_isNewReconciler:!1},sq={readContext:Ki,useCallback:function(t,e){return is().memoizedState=[t,e===void 0?null:e],t},useContext:Ki,useEffect:zO,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ey(4194308,4,VO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ey(4194308,4,t,e)},useInsertionEffect:function(t,e){return ey(4,2,t,e)},useMemo:function(t,e){var n=is();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=is();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iq.bind(null,er,t),[r.memoizedState,t]},useRef:function(t){var e=is();return t={current:t},e.memoizedState=t},useState:FO,useDebugValue:CC,useDeferredValue:function(t){return is().memoizedState=t},useTransition:function(){var t=FO(!1),e=t[0];return t=aq.bind(null,t[1]),is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=er,a=is();if(Wn){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),qr===null)throw Error(Te(349));rc&30||MO(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,zO(AO.bind(null,r,i,t),[t]),r.flags|=2048,Sf(9,PO.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=is(),e=qr.identifierPrefix;if(Wn){var n=zs,r=Bs;n=(r&~(1<<32-Co(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lq={readContext:Ki,useCallback:GO,useContext:Ki,useEffect:SC,useImperativeHandle:WO,useInsertionEffect:UO,useLayoutEffect:jO,useMemo:HO,useReducer:wC,useRef:BO,useState:function(){return wC(kf)},useDebugValue:CC,useDeferredValue:function(t){var e=Xi();return qO(e,Mr.memoizedState,t)},useTransition:function(){var t=wC(kf)[0],e=Xi().memoizedState;return[t,e]},useMutableSource:$O,useSyncExternalStore:OO,useId:KO,unstable_isNewReconciler:!1},uq={readContext:Ki,useCallback:GO,useContext:Ki,useEffect:SC,useImperativeHandle:WO,useInsertionEffect:UO,useLayoutEffect:jO,useMemo:HO,useReducer:kC,useRef:BO,useState:function(){return kC(kf)},useDebugValue:CC,useDeferredValue:function(t){var e=Xi();return Mr===null?e.memoizedState=t:qO(e,Mr.memoizedState,t)},useTransition:function(){var t=kC(kf)[0],e=Xi().memoizedState;return[t,e]},useMutableSource:$O,useSyncExternalStore:OO,useId:KO,unstable_isNewReconciler:!1};function Xd(t,e){try{var n="",r=e;do n+=LG(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function IC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function EC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cq=typeof WeakMap=="function"?WeakMap:Map;function ZO(t,e,n){n=js(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uy||(uy=!0,zC=r),EC(t,e)},n}function JO(t,e,n){n=js(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){EC(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){EC(t,e),typeof r!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function eM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cq;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=Cq.bind(null,t,e,n),e.then(t,t))}function tM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nM(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=js(-1,1),e.tag=2,Hl(n,e,1))),n.lanes|=1),t)}var dq=Ds.ReactCurrentOwner,oi=!1;function qa(t,e,n,r){e.child=t===null?_O(e,null,n,r):qd(e,t.child,n,r)}function rM(t,e,n,r,a){n=n.render;var i=e.ref;return Hd(e,a),r=vC(t,e,n,r,i,a),n=xC(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Vs(t,e,a)):(Wn&&n&&eC(e),e.flags|=1,qa(t,e,r,a),e.child)}function aM(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!qC(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iM(t,e,i,r,a)):(t=my(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:uf,n(o,r)&&t.ref===e.ref)return Vs(t,e,a)}return e.flags|=1,t=Zl(i,r),t.ref=e.ref,t.return=e,e.child=t}function iM(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(uf(i,r)&&t.ref===e.ref)if(oi=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(oi=!0);else return e.lanes=t.lanes,Vs(t,e,a)}return TC(t,e,n,r,a)}function oM(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Qd,Ni),Ni|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$n(Qd,Ni),Ni|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$n(Qd,Ni),Ni|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$n(Qd,Ni),Ni|=r;return qa(t,e,a,n),e.child}function sM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function TC(t,e,n,r,a){var i=ii(n)?Zu:Ia.current;return i=Ud(e,i),Hd(e,a),n=vC(t,e,n,r,i,a),r=xC(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Vs(t,e,a)):(Wn&&r&&eC(e),e.flags|=1,qa(t,e,n,a),e.child)}function lM(t,e,n,r,a){if(ii(n)){var i=!0;z1(e)}else i=!1;if(Hd(e,a),e.stateNode===null)ay(t,e),IO(e,n,r),pC(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ki(u):(u=ii(n)?Zu:Ia.current,u=Ud(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&EO(e,o,r,u),Gl=!1;var p=e.memoizedState;o.state=p,K1(e,r,o,a),l=e.memoizedState,s!==r||p!==l||ai.current||Gl?(typeof c=="function"&&(dC(e,n,c,r),l=e.memoizedState),(s=Gl||CO(e,n,s,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xO(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:To(e.type,s),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ki(l):(l=ii(n)?Zu:Ia.current,l=Ud(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==l)&&EO(e,o,r,l),Gl=!1,p=e.memoizedState,o.state=p,K1(e,r,o,a);var g=e.memoizedState;s!==d||p!==g||ai.current||Gl?(typeof f=="function"&&(dC(e,n,f,r),g=e.memoizedState),(u=Gl||CO(e,n,u,r,p,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return NC(t,e,n,r,i,a)}function NC(t,e,n,r,a,i){sM(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&pO(e,n,!1),Vs(t,e,i);r=e.stateNode,dq.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qd(e,t.child,null,i),e.child=qd(e,null,s,i)):qa(t,e,s,i),e.memoizedState=r.state,a&&pO(e,n,!0),e.child}function uM(t){var e=t.stateNode;e.pendingContext?cO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cO(t,e.context,!1),hC(t,e.containerInfo)}function cM(t,e,n,r,a){return Wd(),aC(a),e.flags|=256,qa(t,e,n,r),e.child}var _C={dehydrated:null,treeContext:null,retryLane:0};function RC(t){return{baseLanes:t,cachePool:null,transitions:null}}function dM(t,e,n){var r=e.pendingProps,a=Jn.current,i=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(a&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),$n(Jn,a&1),t===null)return rC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gy(o,r,0,null),t=lc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=RC(n),e.memoizedState=_C,t):$C(e,o));if(a=t.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return pq(t,e,o,r,s,a,n);if(i){i=r.fallback,o=e.mode,a=t.child,s=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zl(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=Zl(s,i):(i=lc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?RC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_C,r}return i=t.child,t=i.sibling,r=Zl(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $C(t,e){return e=gy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ry(t,e,n,r){return r!==null&&aC(r),qd(e,t.child,null,n),t=$C(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pq(t,e,n,r,a,i,o){if(n)return e.flags&256?(e.flags&=-257,r=IC(Error(Te(422))),ry(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=gy({mode:"visible",children:r.children},a,0,null),i=lc(i,a,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qd(e,t.child,null,o),e.child.memoizedState=RC(o),e.memoizedState=_C,i);if(!(e.mode&1))return ry(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(Te(419)),r=IC(i,r,void 0),ry(t,e,o,r)}if(s=(o&t.childLanes)!==0,oi||s){if(r=qr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Us(t,a),Ro(r,t,a,-1))}return HC(),r=IC(Error(Te(421))),ry(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Iq.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Ti=Ul(a.nextSibling),Ei=e,Wn=!0,Eo=null,t!==null&&(Hi[qi++]=Bs,Hi[qi++]=zs,Hi[qi++]=Ju,Bs=t.id,zs=t.overflow,Ju=e),e=$C(e,r.children),e.flags|=4096,e)}function pM(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lC(t.return,e,n)}function OC(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function hM(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(qa(t,e,r.children,n),r=Jn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pM(t,n,e);else if(t.tag===19)pM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($n(Jn,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&Q1(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),OC(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Q1(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}OC(e,!0,n,null,i);break;case"together":OC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ay(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ac|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=Zl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hq(t,e,n){switch(e.tag){case 3:uM(e),Wd();break;case 5:RO(e);break;case 1:ii(e.type)&&z1(e);break;case 4:hC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;$n(G1,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($n(Jn,Jn.current&1),e.flags|=128,null):n&e.child.childLanes?dM(t,e,n):($n(Jn,Jn.current&1),t=Vs(t,e,n),t!==null?t.sibling:null);$n(Jn,Jn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hM(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$n(Jn,Jn.current),r)break;return null;case 22:case 23:return e.lanes=0,oM(t,e,n)}return Vs(t,e,n)}var fM,MC,mM,gM;fM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},MC=function(){},mM=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,nc(as.current);var i=null;switch(n){case"input":a=lS(t,a),r=lS(t,r),i=[];break;case"select":a=Zn({},a,{value:void 0}),r=Zn({},r,{value:void 0}),i=[];break;case"textarea":a=dS(t,a),r=dS(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=L1)}hS(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Uh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a?.[u],r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Uh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ln("scroll",t),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}},gM=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cf(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ta(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fq(t,e,n){var r=e.pendingProps;switch(tC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ta(e),null;case 1:return ii(e.type)&&B1(),Ta(e),null;case 3:return r=e.stateNode,Kd(),Fn(ai),Fn(Ia),gC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(W1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Eo!==null&&(VC(Eo),Eo=null))),MC(t,e),Ta(e),null;case 5:fC(e);var a=nc(vf.current);if(n=e.type,t!==null&&e.stateNode!=null)mM(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return Ta(e),null}if(t=nc(as.current),W1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[rs]=e,r[ff]=i,t=(e.mode&1)!==0,n){case"dialog":Ln("cancel",r),Ln("close",r);break;case"iframe":case"object":case"embed":Ln("load",r);break;case"video":case"audio":for(a=0;a<df.length;a++)Ln(df[a],r);break;case"source":Ln("error",r);break;case"img":case"image":case"link":Ln("error",r),Ln("load",r);break;case"details":Ln("toggle",r);break;case"input":XR(r,i),Ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ln("invalid",r);break;case"textarea":ZR(r,i),Ln("invalid",r)}hS(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&D1(r.textContent,s,t),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&D1(r.textContent,s,t),a=["children",""+s]):Uh.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Ln("scroll",r)}switch(n){case"input":h1(r),QR(r,i,!0);break;case"textarea":h1(r),e$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=L1)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=t$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rs]=e,t[ff]=r,fM(t,e,!1,!1),e.stateNode=t;e:{switch(o=fS(n,r),n){case"dialog":Ln("cancel",t),Ln("close",t),a=r;break;case"iframe":case"object":case"embed":Ln("load",t),a=r;break;case"video":case"audio":for(a=0;a<df.length;a++)Ln(df[a],t);a=r;break;case"source":Ln("error",t),a=r;break;case"img":case"image":case"link":Ln("error",t),Ln("load",t),a=r;break;case"details":Ln("toggle",t),a=r;break;case"input":XR(t,r),a=lS(t,r),Ln("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Zn({},r,{value:void 0}),Ln("invalid",t);break;case"textarea":ZR(t,r),a=dS(t,r),Ln("invalid",t);break;default:a=r}hS(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?a$(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&n$(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Gh(t,l):typeof l=="number"&&Gh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ln("scroll",t):l!=null&&Qk(t,i,l,o))}switch(n){case"input":h1(t),QR(t,r,!1);break;case"textarea":h1(t),e$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_d(t,!!r.multiple,i,!1):r.defaultValue!=null&&_d(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=L1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ta(e),null;case 6:if(t&&e.stateNode!=null)gM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(n=nc(vf.current),nc(as.current),W1(e)){if(r=e.stateNode,n=e.memoizedProps,r[rs]=e,(i=r.nodeValue!==n)&&(t=Ei,t!==null))switch(t.tag){case 3:D1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&D1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rs]=e,e.stateNode=r}return Ta(e),null;case 13:if(Fn(Jn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wn&&Ti!==null&&e.mode&1&&!(e.flags&128))bO(),Wd(),e.flags|=98560,i=!1;else if(i=W1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Te(317));i[rs]=e}else Wd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ta(e),i=!1}else Eo!==null&&(VC(Eo),Eo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jn.current&1?Pr===0&&(Pr=3):HC())),e.updateQueue!==null&&(e.flags|=4),Ta(e),null);case 4:return Kd(),MC(t,e),t===null&&pf(e.stateNode.containerInfo),Ta(e),null;case 10:return sC(e.type._context),Ta(e),null;case 17:return ii(e.type)&&B1(),Ta(e),null;case 19:if(Fn(Jn),i=e.memoizedState,i===null)return Ta(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Cf(i,!1);else{if(Pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Q1(t),o!==null){for(e.flags|=128,Cf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $n(Jn,Jn.current&1|2),e.child}t=t.sibling}i.tail!==null&&mr()>Zd&&(e.flags|=128,r=!0,Cf(i,!1),e.lanes=4194304)}else{if(!r)if(t=Q1(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Wn)return Ta(e),null}else 2*mr()-i.renderingStartTime>Zd&&n!==1073741824&&(e.flags|=128,r=!0,Cf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mr(),e.sibling=null,n=Jn.current,$n(Jn,r?n&1|2:n&1),e):(Ta(e),null);case 22:case 23:return GC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ni&1073741824&&(Ta(e),e.subtreeFlags&6&&(e.flags|=8192)):Ta(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function mq(t,e){switch(tC(e),e.tag){case 1:return ii(e.type)&&B1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kd(),Fn(ai),Fn(Ia),gC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fC(e),null;case 13:if(Fn(Jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));Wd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fn(Jn),null;case 4:return Kd(),null;case 10:return sC(e.type._context),null;case 22:case 23:return GC(),null;case 24:return null;default:return null}}var iy=!1,Na=!1,gq=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Yd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){or(t,e,r)}else n.current=null}function yM(t,e,n){try{n()}catch(r){or(t,e,r)}}var bM=!1;function yq(t,e){if(HS=I1,t=K$(),FS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,p=null;t:for(;;){for(var f;d!==n||a!==0&&d.nodeType!==3||(s=o+a),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===n&&++u===a&&(s=o),p===i&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qS={focusedElem:t,selectionRange:n},I1=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:To(e.type,y),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(S){or(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return g=bM,bM=!1,g}function If(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&yM(e,n,i)}a=a.next}while(a!==r)}}function oy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function PC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vM(t){var e=t.alternate;e!==null&&(t.alternate=null,vM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rs],delete e[ff],delete e[QS],delete e[JH],delete e[eq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xM(t){return t.tag===5||t.tag===3||t.tag===4}function wM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function AC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=L1));else if(r!==4&&(t=t.child,t!==null))for(AC(t,e,n),t=t.sibling;t!==null;)AC(t,e,n),t=t.sibling}function DC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(DC(t,e,n),t=t.sibling;t!==null;)DC(t,e,n),t=t.sibling}var sa=null,No=!1;function ql(t,e,n){for(n=n.child;n!==null;)kM(t,e,n),n=n.sibling}function kM(t,e,n){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(v1,n)}catch{}switch(n.tag){case 5:Na||Yd(n,e);case 6:var r=sa,a=No;sa=null,ql(t,e,n),sa=r,No=a,sa!==null&&(No?(t=sa,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sa.removeChild(n.stateNode));break;case 18:sa!==null&&(No?(t=sa,n=n.stateNode,t.nodeType===8?YS(t.parentNode,n):t.nodeType===1&&YS(t,n),nf(t)):YS(sa,n.stateNode));break;case 4:r=sa,a=No,sa=n.stateNode.containerInfo,No=!0,ql(t,e,n),sa=r,No=a;break;case 0:case 11:case 14:case 15:if(!Na&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yM(n,e,o),a=a.next}while(a!==r)}ql(t,e,n);break;case 1:if(!Na&&(Yd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){or(n,e,s)}ql(t,e,n);break;case 21:ql(t,e,n);break;case 22:n.mode&1?(Na=(r=Na)||n.memoizedState!==null,ql(t,e,n),Na=r):ql(t,e,n);break;default:ql(t,e,n)}}function SM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gq),e.forEach(function(r){var a=Eq.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function _o(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:sa=s.stateNode,No=!1;break e;case 3:sa=s.stateNode.containerInfo,No=!0;break e;case 4:sa=s.stateNode.containerInfo,No=!0;break e}s=s.return}if(sa===null)throw Error(Te(160));kM(i,o,a),sa=null,No=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){or(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)CM(e,t),e=e.sibling}function CM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_o(e,t),os(t),r&4){try{If(3,t,t.return),oy(3,t)}catch(y){or(t,t.return,y)}try{If(5,t,t.return)}catch(y){or(t,t.return,y)}}break;case 1:_o(e,t),os(t),r&512&&n!==null&&Yd(n,n.return);break;case 5:if(_o(e,t),os(t),r&512&&n!==null&&Yd(n,n.return),t.flags&32){var a=t.stateNode;try{Gh(a,"")}catch(y){or(t,t.return,y)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&YR(a,i),fS(s,o);var u=fS(s,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?a$(a,d):c==="dangerouslySetInnerHTML"?n$(a,d):c==="children"?Gh(a,d):Qk(a,c,d,u)}switch(s){case"input":uS(a,i);break;case"textarea":JR(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?_d(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?_d(a,!!i.multiple,i.defaultValue,!0):_d(a,!!i.multiple,i.multiple?[]:"",!1))}a[ff]=i}catch(y){or(t,t.return,y)}}break;case 6:if(_o(e,t),os(t),r&4){if(t.stateNode===null)throw Error(Te(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(y){or(t,t.return,y)}}break;case 3:if(_o(e,t),os(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nf(e.containerInfo)}catch(y){or(t,t.return,y)}break;case 4:_o(e,t),os(t);break;case 13:_o(e,t),os(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(BC=mr())),r&4&&SM(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Na=(u=Na)||c,_o(e,t),Na=u):_o(e,t),os(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ve=t,c=t.child;c!==null;){for(d=Ve=c;Ve!==null;){switch(p=Ve,f=p.child,p.tag){case 0:case 11:case 14:case 15:If(4,p,p.return);break;case 1:Yd(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){or(r,n,y)}}break;case 5:Yd(p,p.return);break;case 22:if(p.memoizedState!==null){TM(d);continue}}f!==null?(f.return=p,Ve=f):TM(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=r$("display",o))}catch(y){or(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){or(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_o(e,t),os(t),r&4&&SM(t);break;case 21:break;default:_o(e,t),os(t)}}function os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xM(n)){var r=n;break e}n=n.return}throw Error(Te(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Gh(a,""),r.flags&=-33);var i=wM(t);DC(t,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=wM(t);AC(t,s,o);break;default:throw Error(Te(161))}}catch(l){or(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bq(t,e,n){Ve=t,IM(t)}function IM(t,e,n){for(var r=(t.mode&1)!==0;Ve!==null;){var a=Ve,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||iy;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||Na;s=iy;var u=Na;if(iy=o,(Na=l)&&!u)for(Ve=a;Ve!==null;)o=Ve,l=o.child,o.tag===22&&o.memoizedState!==null?NM(a):l!==null?(l.return=o,Ve=l):NM(a);for(;i!==null;)Ve=i,IM(i),i=i.sibling;Ve=a,iy=s,Na=u}EM(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ve=i):EM(t)}}function EM(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Na||oy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Na)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:To(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kO(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kO(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&nf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Na||e.flags&512&&PC(e)}catch(p){or(e,e.return,p)}}if(e===t){Ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function TM(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function NM(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oy(4,e)}catch(l){or(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(l){or(e,a,l)}}var i=e.return;try{PC(e)}catch(l){or(e,i,l)}break;case 5:var o=e.return;try{PC(e)}catch(l){or(e,o,l)}}}catch(l){or(e,e.return,l)}if(e===t){Ve=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ve=s;break}Ve=e.return}}var vq=Math.ceil,sy=Ds.ReactCurrentDispatcher,LC=Ds.ReactCurrentOwner,Yi=Ds.ReactCurrentBatchConfig,Zt=0,qr=null,Ir=null,la=0,Ni=0,Qd=jl(0),Pr=0,Ef=null,ac=0,ly=0,FC=0,Tf=null,si=null,BC=0,Zd=1/0,Ws=null,uy=!1,zC=null,Kl=null,cy=!1,Xl=null,dy=0,Nf=0,UC=null,py=-1,hy=0;function Ka(){return Zt&6?mr():py!==-1?py:py=mr()}function Yl(t){return t.mode&1?Zt&2&&la!==0?la&-la:nq.transition!==null?(hy===0&&(hy=v$()),hy):(t=gn,t!==0||(t=window.event,t=t===void 0?16:N$(t.type)),t):1}function Ro(t,e,n,r){if(50<Nf)throw Nf=0,UC=null,Error(Te(185));Qh(t,n,r),(!(Zt&2)||t!==qr)&&(t===qr&&(!(Zt&2)&&(ly|=n),Pr===4&&Ql(t,la)),li(t,r),n===1&&Zt===0&&!(e.mode&1)&&(Zd=mr()+500,U1&&Wl()))}function li(t,e){var n=t.callbackNode;nH(t,e);var r=k1(t,t===qr?la:0);if(r===0)n!==null&&g$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&g$(n),e===1)t.tag===0?tq(RM.bind(null,t)):hO(RM.bind(null,t)),QH(function(){!(Zt&6)&&Wl()}),n=null;else{switch(x$(r)){case 1:n=wS;break;case 4:n=y$;break;case 16:n=b1;break;case 536870912:n=b$;break;default:n=b1}n=FM(n,_M.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _M(t,e){if(py=-1,hy=0,Zt&6)throw Error(Te(327));var n=t.callbackNode;if(Jd()&&t.callbackNode!==n)return null;var r=k1(t,t===qr?la:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fy(t,r);else{e=r;var a=Zt;Zt|=2;var i=OM();(qr!==t||la!==e)&&(Ws=null,Zd=mr()+500,oc(t,e));do try{kq();break}catch(s){$M(t,s)}while(!0);oC(),sy.current=i,Zt=a,Ir!==null?e=0:(qr=null,la=0,e=Pr)}if(e!==0){if(e===2&&(a=kS(t),a!==0&&(r=a,e=jC(t,a))),e===1)throw n=Ef,oc(t,0),Ql(t,r),li(t,mr()),n;if(e===6)Ql(t,r);else{if(a=t.current.alternate,!(r&30)&&!xq(a)&&(e=fy(t,r),e===2&&(i=kS(t),i!==0&&(r=i,e=jC(t,i))),e===1))throw n=Ef,oc(t,0),Ql(t,r),li(t,mr()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:sc(t,si,Ws);break;case 3:if(Ql(t,r),(r&130023424)===r&&(e=BC+500-mr(),10<e)){if(k1(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Ka(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=XS(sc.bind(null,t,si,Ws),e);break}sc(t,si,Ws);break;case 4:if(Ql(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-Co(r);i=1<<o,o=e[o],o>a&&(a=o),r&=~i}if(r=a,r=mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vq(r/1960))-r,10<r){t.timeoutHandle=XS(sc.bind(null,t,si,Ws),r);break}sc(t,si,Ws);break;case 5:sc(t,si,Ws);break;default:throw Error(Te(329))}}}return li(t,mr()),t.callbackNode===n?_M.bind(null,t):null}function jC(t,e){var n=Tf;return t.current.memoizedState.isDehydrated&&(oc(t,e).flags|=256),t=fy(t,e),t!==2&&(e=si,si=n,e!==null&&VC(e)),t}function VC(t){si===null?si=t:si.push.apply(si,t)}function xq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Io(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ql(t,e){for(e&=~FC,e&=~ly,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Co(e),r=1<<n;t[n]=-1,e&=~r}}function RM(t){if(Zt&6)throw Error(Te(327));Jd();var e=k1(t,0);if(!(e&1))return li(t,mr()),null;var n=fy(t,e);if(t.tag!==0&&n===2){var r=kS(t);r!==0&&(e=r,n=jC(t,r))}if(n===1)throw n=Ef,oc(t,0),Ql(t,e),li(t,mr()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sc(t,si,Ws),li(t,mr()),null}function WC(t,e){var n=Zt;Zt|=1;try{return t(e)}finally{Zt=n,Zt===0&&(Zd=mr()+500,U1&&Wl())}}function ic(t){Xl!==null&&Xl.tag===0&&!(Zt&6)&&Jd();var e=Zt;Zt|=1;var n=Yi.transition,r=gn;try{if(Yi.transition=null,gn=1,t)return t()}finally{gn=r,Yi.transition=n,Zt=e,!(Zt&6)&&Wl()}}function GC(){Ni=Qd.current,Fn(Qd)}function oc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YH(n)),Ir!==null)for(n=Ir.return;n!==null;){var r=n;switch(tC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&B1();break;case 3:Kd(),Fn(ai),Fn(Ia),gC();break;case 5:fC(r);break;case 4:Kd();break;case 13:Fn(Jn);break;case 19:Fn(Jn);break;case 10:sC(r.type._context);break;case 22:case 23:GC()}n=n.return}if(qr=t,Ir=t=Zl(t.current,null),la=Ni=e,Pr=0,Ef=null,FC=ly=ac=0,si=Tf=null,tc!==null){for(e=0;e<tc.length;e++)if(n=tc[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}tc=null}return t}function $M(t,e){do{var n=Ir;try{if(oC(),Z1.current=ny,J1){for(var r=er.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}J1=!1}if(rc=0,Hr=Mr=er=null,xf=!1,wf=0,LC.current=null,n===null||n.return===null){Pr=1,Ef=e,Ir=null;break}e:{var i=t,o=n.return,s=n,l=e;if(e=la,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=tM(o);if(f!==null){f.flags&=-257,nM(f,o,s,i,e),f.mode&1&&eM(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){eM(i,u,e),HC();break e}l=Error(Te(426))}}else if(Wn&&s.mode&1){var v=tM(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),nM(v,o,s,i,e),aC(Xd(l,s));break e}}i=l=Xd(l,s),Pr!==4&&(Pr=2),Tf===null?Tf=[i]:Tf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=ZO(i,l,e);wO(i,b);break e;case 1:s=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Kl===null||!Kl.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=JO(i,s,e);wO(i,S);break e}}i=i.return}while(i!==null)}PM(n)}catch(C){e=C,Ir===n&&n!==null&&(Ir=n=n.return);continue}break}while(!0)}function OM(){var t=sy.current;return sy.current=ny,t===null?ny:t}function HC(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),qr===null||!(ac&268435455)&&!(ly&268435455)||Ql(qr,la)}function fy(t,e){var n=Zt;Zt|=2;var r=OM();(qr!==t||la!==e)&&(Ws=null,oc(t,e));do try{wq();break}catch(a){$M(t,a)}while(!0);if(oC(),Zt=n,sy.current=r,Ir!==null)throw Error(Te(261));return qr=null,la=0,Pr}function wq(){for(;Ir!==null;)MM(Ir)}function kq(){for(;Ir!==null&&!qG();)MM(Ir)}function MM(t){var e=LM(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,e===null?PM(t):Ir=e,LC.current=null}function PM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mq(n,e),n!==null){n.flags&=32767,Ir=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pr=6,Ir=null;return}}else if(n=fq(n,e,Ni),n!==null){Ir=n;return}if(e=e.sibling,e!==null){Ir=e;return}Ir=e=t}while(e!==null);Pr===0&&(Pr=5)}function sc(t,e,n){var r=gn,a=Yi.transition;try{Yi.transition=null,gn=1,Sq(t,e,n,r)}finally{Yi.transition=a,gn=r}return null}function Sq(t,e,n,r){do Jd();while(Xl!==null);if(Zt&6)throw Error(Te(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(rH(t,i),t===qr&&(Ir=qr=null,la=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cy||(cy=!0,FM(b1,function(){return Jd(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yi.transition,Yi.transition=null;var o=gn;gn=1;var s=Zt;Zt|=4,LC.current=null,yq(t,n),CM(n,t),VH(qS),I1=!!HS,qS=HS=null,t.current=n,bq(n),KG(),Zt=s,gn=o,Yi.transition=i}else t.current=n;if(cy&&(cy=!1,Xl=t,dy=a),i=t.pendingLanes,i===0&&(Kl=null),QG(n.stateNode),li(t,mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(uy)throw uy=!1,t=zC,zC=null,t;return dy&1&&t.tag!==0&&Jd(),i=t.pendingLanes,i&1?t===UC?Nf++:(Nf=0,UC=t):Nf=0,Wl(),null}function Jd(){if(Xl!==null){var t=x$(dy),e=Yi.transition,n=gn;try{if(Yi.transition=null,gn=16>t?16:t,Xl===null)var r=!1;else{if(t=Xl,Xl=null,dy=0,Zt&6)throw Error(Te(331));var a=Zt;for(Zt|=4,Ve=t.current;Ve!==null;){var i=Ve,o=i.child;if(Ve.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ve=u;Ve!==null;){var c=Ve;switch(c.tag){case 0:case 11:case 15:If(8,c,i)}var d=c.child;if(d!==null)d.return=c,Ve=d;else for(;Ve!==null;){c=Ve;var p=c.sibling,f=c.return;if(vM(c),c===u){Ve=null;break}if(p!==null){p.return=f,Ve=p;break}Ve=f}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ve=o;else e:for(;Ve!==null;){if(i=Ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:If(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Ve=b;break e}Ve=i.return}}var x=t.current;for(Ve=x;Ve!==null;){o=Ve;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ve=w;else e:for(o=x;Ve!==null;){if(s=Ve,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:oy(9,s)}}catch(C){or(s,s.return,C)}if(s===o){Ve=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Ve=S;break e}Ve=s.return}}if(Zt=a,Wl(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(v1,t)}catch{}r=!0}return r}finally{gn=n,Yi.transition=e}}return!1}function AM(t,e,n){e=Xd(n,e),e=ZO(t,e,1),t=Hl(t,e,1),e=Ka(),t!==null&&(Qh(t,1,e),li(t,e))}function or(t,e,n){if(t.tag===3)AM(t,t,n);else for(;e!==null;){if(e.tag===3){AM(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kl===null||!Kl.has(r))){t=Xd(n,t),t=JO(e,t,1),e=Hl(e,t,1),t=Ka(),e!==null&&(Qh(e,1,t),li(e,t));break}}e=e.return}}function Cq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ka(),t.pingedLanes|=t.suspendedLanes&n,qr===t&&(la&n)===n&&(Pr===4||Pr===3&&(la&130023424)===la&&500>mr()-BC?oc(t,0):FC|=n),li(t,e)}function DM(t,e){e===0&&(t.mode&1?(e=w1,w1<<=1,!(w1&130023424)&&(w1=4194304)):e=1);var n=Ka();t=Us(t,e),t!==null&&(Qh(t,e,n),li(t,n))}function Iq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DM(t,n)}function Eq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),DM(t,n)}var LM;LM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ai.current)oi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return oi=!1,hq(t,e,n);oi=!!(t.flags&131072)}else oi=!1,Wn&&e.flags&1048576&&fO(e,V1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ay(t,e),t=e.pendingProps;var a=Ud(e,Ia.current);Hd(e,n),a=vC(null,e,r,t,a,n);var i=xC();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ii(r)?(i=!0,z1(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,cC(e),a.updater=X1,e.stateNode=a,a._reactInternals=e,pC(e,r,t,n),e=NC(null,e,r,!0,i,n)):(e.tag=0,Wn&&i&&eC(e),qa(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ay(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=Nq(r),t=To(r,t),a){case 0:e=TC(null,e,r,t,n);break e;case 1:e=lM(null,e,r,t,n);break e;case 11:e=rM(null,e,r,t,n);break e;case 14:e=aM(null,e,r,To(r.type,t),n);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:To(r,a),TC(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:To(r,a),lM(t,e,r,a,n);case 3:e:{if(uM(e),t===null)throw Error(Te(387));r=e.pendingProps,i=e.memoizedState,a=i.element,xO(t,e),K1(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=Xd(Error(Te(423)),e),e=cM(t,e,r,n,a);break e}else if(r!==a){a=Xd(Error(Te(424)),e),e=cM(t,e,r,n,a);break e}else for(Ti=Ul(e.stateNode.containerInfo.firstChild),Ei=e,Wn=!0,Eo=null,n=_O(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wd(),r===a){e=Vs(t,e,n);break e}qa(t,e,r,n)}e=e.child}return e;case 5:return RO(e),t===null&&rC(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,KS(r,a)?o=null:i!==null&&KS(r,i)&&(e.flags|=32),sM(t,e),qa(t,e,o,n),e.child;case 6:return t===null&&rC(e),null;case 13:return dM(t,e,n);case 4:return hC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qd(e,null,r,n):qa(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:To(r,a),rM(t,e,r,a,n);case 7:return qa(t,e,e.pendingProps,n),e.child;case 8:return qa(t,e,e.pendingProps.children,n),e.child;case 12:return qa(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,$n(G1,r._currentValue),r._currentValue=o,i!==null)if(Io(i.value,o)){if(i.children===a.children&&!ai.current){e=Vs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=js(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lC(i.return,n,e),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Te(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),lC(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qa(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,Hd(e,n),a=Ki(a),r=r(a),e.flags|=1,qa(t,e,r,n),e.child;case 14:return r=e.type,a=To(r,e.pendingProps),a=To(r.type,a),aM(t,e,r,a,n);case 15:return iM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:To(r,a),ay(t,e),e.tag=1,ii(r)?(t=!0,z1(e)):t=!1,Hd(e,n),IO(e,r,a),pC(e,r,a,n),NC(null,e,r,!0,t,n);case 19:return hM(t,e,n);case 22:return oM(t,e,n)}throw Error(Te(156,e.tag))};function FM(t,e){return m$(t,e)}function Tq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(t,e,n,r){return new Tq(t,e,n,r)}function qC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nq(t){if(typeof t=="function")return qC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eS)return 11;if(t===rS)return 14}return 2}function Zl(t,e){var n=t.alternate;return n===null?(n=Qi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function my(t,e,n,r,a,i){var o=2;if(r=t,typeof t=="function")qC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Nd:return lc(n.children,a,i,e);case Zk:o=8,a|=8;break;case Jk:return t=Qi(12,n,e,a|2),t.elementType=Jk,t.lanes=i,t;case tS:return t=Qi(13,n,e,a),t.elementType=tS,t.lanes=i,t;case nS:return t=Qi(19,n,e,a),t.elementType=nS,t.lanes=i,t;case GR:return gy(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VR:o=10;break e;case WR:o=9;break e;case eS:o=11;break e;case rS:o=14;break e;case Ml:o=16,r=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=Qi(o,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function lc(t,e,n,r){return t=Qi(7,t,r,e),t.lanes=n,t}function gy(t,e,n,r){return t=Qi(22,t,r,e),t.elementType=GR,t.lanes=n,t.stateNode={isHidden:!1},t}function KC(t,e,n){return t=Qi(6,t,null,e),t.lanes=n,t}function XC(t,e,n){return e=Qi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _q(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=SS(0),this.expirationTimes=SS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=SS(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function YC(t,e,n,r,a,i,o,s,l){return t=new _q(t,e,n,s,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qi(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cC(i),t}function Rq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Td,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function BM(t){if(!t)return Vl;t=t._reactInternals;e:{if(Yu(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(ii(n))return dO(t,n,e)}return e}function zM(t,e,n,r,a,i,o,s,l){return t=YC(n,r,!0,t,a,i,o,s,l),t.context=BM(null),n=t.current,r=Ka(),a=Yl(n),i=js(r,a),i.callback=e??null,Hl(n,i,a),t.current.lanes=a,Qh(t,a,r),li(t,r),t}function yy(t,e,n,r){var a=e.current,i=Ka(),o=Yl(a);return n=BM(n),e.context===null?e.context=n:e.pendingContext=n,e=js(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hl(a,e,o),t!==null&&(Ro(t,a,o,i),q1(t,a,o)),o}function by(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function UM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function QC(t,e){UM(t,e),(t=t.alternate)&&UM(t,e)}function $q(){return null}var jM=typeof reportError=="function"?reportError:function(t){console.error(t)};function ZC(t){this._internalRoot=t}vy.prototype.render=ZC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));yy(t,e,null,null)},vy.prototype.unmount=ZC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ic(function(){yy(null,t,null,null)}),e[Ls]=null}};function vy(t){this._internalRoot=t}vy.prototype.unstable_scheduleHydration=function(t){if(t){var e=S$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fl.length&&e!==0&&e<Fl[n].priority;n++);Fl.splice(n,0,t),n===0&&E$(t)}};function JC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function VM(){}function Oq(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=by(o);i.call(u)}}var o=zM(e,r,t,0,null,!1,!1,"",VM);return t._reactRootContainer=o,t[Ls]=o.current,pf(t.nodeType===8?t.parentNode:t),ic(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=by(l);s.call(u)}}var l=YC(t,0,!1,null,null,!1,!1,"",VM);return t._reactRootContainer=l,t[Ls]=l.current,pf(t.nodeType===8?t.parentNode:t),ic(function(){yy(e,l,n,r)}),l}function wy(t,e,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=by(o);s.call(l)}}yy(e,o,t,a)}else o=Oq(n,e,t,a,r);return by(o)}w$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yh(e.pendingLanes);n!==0&&(CS(e,n|1),li(e,mr()),!(Zt&6)&&(Zd=mr()+500,Wl()))}break;case 13:ic(function(){var r=Us(t,1);if(r!==null){var a=Ka();Ro(r,t,1,a)}}),QC(t,1)}},IS=function(t){if(t.tag===13){var e=Us(t,134217728);if(e!==null){var n=Ka();Ro(e,t,134217728,n)}QC(t,134217728)}},k$=function(t){if(t.tag===13){var e=Yl(t),n=Us(t,e);if(n!==null){var r=Ka();Ro(n,t,e,r)}QC(t,e)}},S$=function(){return gn},C$=function(t,e){var n=gn;try{return gn=t,e()}finally{gn=n}},yS=function(t,e,n){switch(e){case"input":if(uS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=F1(r);if(!a)throw Error(Te(90));KR(r),uS(r,a)}}}break;case"textarea":JR(t,n);break;case"select":e=n.value,e!=null&&_d(t,!!n.multiple,e,!1)}},l$=WC,u$=ic;var Mq={usingClientEntryPoint:!1,Events:[mf,Bd,F1,o$,s$,WC]},_f={findFiberByHostInstance:Qu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Pq={bundleType:_f.bundleType,version:_f.version,rendererPackageName:_f.rendererPackageName,rendererConfig:_f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=h$(t),t===null?null:t.stateNode},findFiberByHostInstance:_f.findFiberByHostInstance||$q,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ky.isDisabled&&ky.supportsFiber)try{v1=ky.inject(Pq),ns=ky}catch{}}Si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mq,Si.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JC(e))throw Error(Te(200));return Rq(t,e,null,n)},Si.createRoot=function(t,e){if(!JC(t))throw Error(Te(299));var n=!1,r="",a=jM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=YC(t,1,!1,null,null,n,!1,r,a),t[Ls]=e.current,pf(t.nodeType===8?t.parentNode:t),new ZC(e)},Si.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=h$(e),t=t===null?null:t.stateNode,t},Si.flushSync=function(t){return ic(t)},Si.hydrate=function(t,e,n){if(!xy(e))throw Error(Te(200));return wy(null,t,e,!0,n)},Si.hydrateRoot=function(t,e,n){if(!JC(t))throw Error(Te(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=jM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zM(e,null,t,1,n??null,a,!1,i,o),t[Ls]=e.current,pf(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new vy(e)},Si.render=function(t,e,n){if(!xy(e))throw Error(Te(200));return wy(null,t,e,!1,n)},Si.unmountComponentAtNode=function(t){if(!xy(t))throw Error(Te(40));return t._reactRootContainer?(ic(function(){wy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ls]=null})}),!0):!1},Si.unstable_batchedUpdates=WC,Si.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xy(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return wy(t,e,n,!1,r)},Si.version="18.2.0-next-9e3b772b8-20220608";function WM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WM)}catch(t){console.error(t)}}WM(),DR.exports=Si;var Rf=DR.exports;const GM=Wi(Rf),Aq=Ck({__proto__:null,default:GM},[Rf]);var HM,qM=Rf;HM=qM.createRoot,qM.hydrateRoot;function Dq(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const KM={};function eI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&KM[e[0]]||(typeof e[0]=="string"&&(KM[e[0]]=new Date),Dq(...e))}const XM=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function YM(t,e,n){t.loadNamespaces(e,XM(t,n))}function QM(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,XM(t,r))}function Lq(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],a=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=e.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!a||o(i,t)))}function Fq(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(eI("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,t))return!1}}):Lq(t,e,n)}const Bq=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,zq={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Uq=t=>zq[t],jq=t=>t.replace(Bq,Uq);let Vq={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:jq};function Wq(){return Vq}let Gq;function Hq(){return Gq}const ZM=$.createContext();class qq{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Kq=(t,e)=>{const n=$.useRef();return $.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function JM(t,e,n,r){return t.getFixedT(e,n,r)}function Xq(t,e,n,r){return $.useCallback(JM(t,e,n,r),[t,e,n,r])}function Jl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:a}=$.useContext(ZM)||{},i=n||r||Hq();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new qq),!i){eI("You will need to pass in an i18next instance by using initReactI18next");const C=(_,N)=>typeof N=="string"?N:N&&typeof N=="object"&&typeof N.defaultValue=="string"?N.defaultValue:Array.isArray(_)?_[_.length-1]:_,E=[C,{},!1];return E.t=C,E.i18n={},E.ready=!1,E}i.options.react&&i.options.react.wait!==void 0&&eI("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Wq(),...i.options.react,...e},{useSuspense:s,keyPrefix:l}=o;let u=t||a||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(C=>Fq(C,i,o)),d=Xq(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),p=()=>d,f=()=>JM(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),[g,y]=$.useState(p);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const b=Kq(v),x=$.useRef(!0);$.useEffect(()=>{const{bindI18n:C,bindI18nStore:E}=o;x.current=!0,!c&&!s&&(e.lng?QM(i,e.lng,u,()=>{x.current&&y(f)}):YM(i,u,()=>{x.current&&y(f)})),c&&b&&b!==v&&x.current&&y(f);function _(){x.current&&y(f)}return C&&i&&i.on(C,_),E&&i&&i.store.on(E,_),()=>{x.current=!1,C&&i&&C.split(" ").forEach(N=>i.off(N,_)),E&&i&&E.split(" ").forEach(N=>i.store.off(N,_))}},[i,v]);const w=$.useRef(!0);$.useEffect(()=>{x.current&&!w.current&&y(p),w.current=!1},[i,l]);const S=[g,i,c];if(S.t=g,S.i18n=i,S.ready=c,c||!c&&!s)return S;throw new Promise(C=>{e.lng?QM(i,e.lng,u,()=>C()):YM(i,u,()=>C())})}function Yq(t){let{i18n:e,defaultNS:n,children:r}=t;const a=$.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return $.createElement(ZM.Provider,{value:a},r)}/**
* @remix-run/router v1.15.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function sr(){return sr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sr.apply(this,arguments)}var gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gr||(gr={}));const e6="popstate";function Qq(t){t===void 0&&(t={});function e(r,a){let{pathname:i,search:o,hash:s}=r.location;return $f("",{pathname:i,search:o,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:uc(a)}return Jq(e,n,null,t)}function kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ep(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zq(){return Math.random().toString(36).substr(2,8)}function t6(t,e){return{usr:t.state,key:t.key,idx:e}}function $f(t,e,n,r){return n===void 0&&(n=null),sr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gs(e):e,{state:n,key:e&&e.key||r||Zq()})}function uc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Jq(t,e,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s=gr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(sr({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=gr.Pop;let v=c(),b=v==null?null:v-u;u=v,l&&l({action:s,location:y.location,delta:b})}function p(v,b){s=gr.Push;let x=$f(y.location,v,b);n&&n(x,v),u=c()+1;let w=t6(x,u),S=y.createHref(x);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&l&&l({action:s,location:y.location,delta:1})}function f(v,b){s=gr.Replace;let x=$f(y.location,v,b);n&&n(x,v),u=c();let w=t6(x,u),S=y.createHref(x);o.replaceState(w,"",S),i&&l&&l({action:s,location:y.location,delta:0})}function g(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:uc(v);return x=x.replace(/ $/,"%20"),kt(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let y={get action(){return s},get location(){return t(a,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(e6,d),l=v,()=>{a.removeEventListener(e6,d),l=null}},createHref(v){return e(a,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:f,go(v){return o.go(v)}};return y}var lr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lr||(lr={}));const eK=new Set(["lazy","caseSensitive","path","id","index","children"]);function tK(t){return t.index===!0}function tI(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((a,i)=>{let o=[...n,i],s=typeof a.id=="string"?a.id:o.join("-");if(kt(a.index!==!0||!a.children,"Cannot specify children on an index route"),kt(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),tK(a)){let l=sr({},a,e(a),{id:s});return r[s]=l,l}else{let l=sr({},a,e(a),{id:s,children:void 0});return r[s]=l,a.children&&(l.children=tI(a.children,e,o,r)),l}})}function tp(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Gs(e):e,a=ss(r.pathname||"/",n);if(a==null)return null;let i=r6(t);nK(i);let o=null;for(let s=0;o==null&&s<i.length;++s){let l=hK(a);o=dK(i[s],l)}return o}function n6(t,e){let{route:n,pathname:r,params:a}=t;return{id:n.id,pathname:r,params:a,data:e[n.id],handle:n.handle}}function r6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(kt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Hs([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(kt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),r6(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:uK(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of a6(i.path))a(i,o,l)}),e}function a6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=a6(r.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function nK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cK(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rK=/^:[\w-]+$/,aK=3,iK=2,oK=1,sK=10,lK=-2,i6=t=>t==="*";function uK(t,e){let n=t.split("/"),r=n.length;return n.some(i6)&&(r+=lK),e&&(r+=iK),n.filter(a=>!i6(a)).reduce((a,i)=>a+(rK.test(i)?aK:i===""?oK:sK),r)}function cK(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function dK(t,e){let{routesMeta:n}=t,r={},a="/",i=[];for(let o=0;o<n.length;++o){let s=n[o],l=o===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",c=Sy({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=s.route;i.push({params:r,pathname:Hs([a,c.pathname]),pathnameBase:gK(Hs([a,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(a=Hs([a,c.pathnameBase]))}return i}function Sy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pK(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((l,u,c)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let g=s[c]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const f=s[c];return p&&!f?l[d]=void 0:l[d]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function pK(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ep(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,s)=>(r.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function hK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ep(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ss(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fK(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Gs(t):t;return{pathname:n?n.startsWith("/")?n:mK(n,e):e,search:yK(r),hash:bK(a)}}function mK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function nI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rI(t,e){let n=o6(t);return e?n.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function aI(t,e,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=Gs(t):(a=sr({},t),kt(!a.pathname||!a.pathname.includes("?"),nI("?","pathname","search",a)),kt(!a.pathname||!a.pathname.includes("#"),nI("#","pathname","hash",a)),kt(!a.search||!a.search.includes("#"),nI("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;a.pathname=p.join("/")}s=d>=0?e[d]:"/"}let l=fK(a,s),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Hs=t=>t.join("/").replace(/\/\/+/g,"/"),gK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class iI{constructor(e,n,r,a){a===void 0&&(a=!1),this.status=e,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function s6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const l6=["post","put","patch","delete"],vK=new Set(l6),xK=["get",...l6],wK=new Set(xK),kK=new Set([301,302,303,307,308]),SK=new Set([307,308]),oI={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},CK={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Of={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},u6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IK=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),c6="remix-router-transitions";function EK(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;kt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let ue=t.detectErrorBoundary;a=me=>({hasErrorBoundary:ue(me)})}else a=IK;let i={},o=tI(t.routes,a,void 0,i),s,l=t.basename||"/",u=sr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,p=null,f=null,g=null,y=t.hydrationData!=null,v=tp(o,t.history.location,l),b=null;if(v==null){let ue=Zi(404,{pathname:t.history.location.pathname}),{matches:me,route:ke}=v6(o);v=me,b={[ke.id]:ue}}let x,w=v.some(ue=>ue.route.lazy),S=v.some(ue=>ue.route.loader);if(w)x=!1;else if(!S)x=!0;else if(u.v7_partialHydration){let ue=t.hydrationData?t.hydrationData.loaderData:null,me=t.hydrationData?t.hydrationData.errors:null;x=v.every(ke=>ke.route.loader&&ke.route.loader.hydrate!==!0&&(ue&&ue[ke.route.id]!==void 0||me&&me[ke.route.id]!==void 0))}else x=t.hydrationData!=null;let C,E={historyAction:t.history.action,location:t.history.location,matches:v,initialized:x,navigation:oI,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},_=gr.Pop,N=!1,M,P=!1,L=new Map,U=null,B=!1,K=!1,X=[],Z=[],H=new Map,F=0,Y=-1,Q=new Map,ne=new Set,se=new Map,pe=new Map,de=new Set,ie=new Map,xe=new Map,q=!1;function oe(){if(c=t.history.listen(ue=>{let{action:me,location:ke,delta:Me}=ue;if(q){q=!1;return}ep(xe.size===0||Me!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ge=xi({currentLocation:E.location,nextLocation:ke,historyAction:me});if(Ge&&Me!=null){q=!0,t.history.go(Me*-1),vi(Ge,{state:"blocked",location:ke,proceed(){vi(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:ke}),t.history.go(Me)},reset(){let yt=new Map(E.blockers);yt.set(Ge,Of),Ee({blockers:yt})}});return}return Oe(me,ke)}),n){LK(e,L);let ue=()=>FK(e,L);e.addEventListener("pagehide",ue),U=()=>e.removeEventListener("pagehide",ue)}return E.initialized||Oe(gr.Pop,E.location,{initialHydration:!0}),C}function he(){c&&c(),U&&U(),d.clear(),M&&M.abort(),E.fetchers.forEach((ue,me)=>Xn(me)),E.blockers.forEach((ue,me)=>Za(me))}function Ie(ue){return d.add(ue),()=>d.delete(ue)}function Ee(ue,me){me===void 0&&(me={}),E=sr({},E,ue);let ke=[],Me=[];u.v7_fetcherPersist&&E.fetchers.forEach((Ge,yt)=>{Ge.state==="idle"&&(de.has(yt)?Me.push(yt):ke.push(yt))}),[...d].forEach(Ge=>Ge(E,{deletedFetchers:Me,unstable_viewTransitionOpts:me.viewTransitionOpts,unstable_flushSync:me.flushSync===!0})),u.v7_fetcherPersist&&(ke.forEach(Ge=>E.fetchers.delete(Ge)),Me.forEach(Ge=>Xn(Ge)))}function _e(ue,me,ke){var Me,Ge;let{flushSync:yt}=ke===void 0?{}:ke,ut=E.actionData!=null&&E.navigation.formMethod!=null&&$o(E.navigation.formMethod)&&E.navigation.state==="loading"&&((Me=ue.state)==null?void 0:Me._isRedirect)!==!0,ot;me.actionData?Object.keys(me.actionData).length>0?ot=me.actionData:ot=null:ut?ot=E.actionData:ot=null;let tt=me.loaderData?b6(E.loaderData,me.loaderData,me.matches||[],me.errors):E.loaderData,Ot=E.blockers;Ot.size>0&&(Ot=new Map(Ot),Ot.forEach((un,fn)=>Ot.set(fn,Of)));let Pn=N===!0||E.navigation.formMethod!=null&&$o(E.navigation.formMethod)&&((Ge=ue.state)==null?void 0:Ge._isRedirect)!==!0;s&&(o=s,s=void 0),B||_===gr.Pop||(_===gr.Push?t.history.push(ue,ue.state):_===gr.Replace&&t.history.replace(ue,ue.state));let vt;if(_===gr.Pop){let un=L.get(E.location.pathname);un&&un.has(ue.pathname)?vt={currentLocation:E.location,nextLocation:ue}:L.has(ue.pathname)&&(vt={currentLocation:ue,nextLocation:E.location})}else if(P){let un=L.get(E.location.pathname);un?un.add(ue.pathname):(un=new Set([ue.pathname]),L.set(E.location.pathname,un)),vt={currentLocation:E.location,nextLocation:ue}}Ee(sr({},me,{actionData:ot,loaderData:tt,historyAction:_,location:ue,initialized:!0,navigation:oI,revalidation:"idle",restoreScrollPosition:Go(ue,me.matches||E.matches),preventScrollReset:Pn,blockers:Ot}),{viewTransitionOpts:vt,flushSync:yt===!0}),_=gr.Pop,N=!1,P=!1,B=!1,K=!1,X=[],Z=[]}async function Fe(ue,me){if(typeof ue=="number"){t.history.go(ue);return}let ke=sI(E.location,E.matches,l,u.v7_prependBasename,ue,u.v7_relativeSplatPath,me?.fromRouteId,me?.relative),{path:Me,submission:Ge,error:yt}=d6(u.v7_normalizeFormMethod,!1,ke,me),ut=E.location,ot=$f(E.location,Me,me&&me.state);ot=sr({},ot,t.history.encodeLocation(ot));let tt=me&&me.replace!=null?me.replace:void 0,Ot=gr.Push;tt===!0?Ot=gr.Replace:tt===!1||Ge!=null&&$o(Ge.formMethod)&&Ge.formAction===E.location.pathname+E.location.search&&(Ot=gr.Replace);let Pn=me&&"preventScrollReset"in me?me.preventScrollReset===!0:void 0,vt=(me&&me.unstable_flushSync)===!0,un=xi({currentLocation:ut,nextLocation:ot,historyAction:Ot});if(un){vi(un,{state:"blocked",location:ot,proceed(){vi(un,{state:"proceeding",proceed:void 0,reset:void 0,location:ot}),Fe(ue,me)},reset(){let fn=new Map(E.blockers);fn.set(un,Of),Ee({blockers:fn})}});return}return await Oe(Ot,ot,{submission:Ge,pendingError:yt,preventScrollReset:Pn,replace:me&&me.replace,enableViewTransition:me&&me.unstable_viewTransition,flushSync:vt})}function Xe(){if(Qt(),Ee({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){Oe(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}Oe(_||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation})}}async function Oe(ue,me,ke){M&&M.abort(),M=null,_=ue,B=(ke&&ke.startUninterruptedRevalidation)===!0,ld(E.location,E.matches),N=(ke&&ke.preventScrollReset)===!0,P=(ke&&ke.enableViewTransition)===!0;let Me=s||o,Ge=ke&&ke.overrideNavigation,yt=tp(Me,me,l),ut=(ke&&ke.flushSync)===!0;if(!yt){let fn=Zi(404,{pathname:me.pathname}),{matches:Rr,route:rr}=v6(Me);Cs(),_e(me,{matches:Rr,loaderData:{},errors:{[rr.id]:fn}},{flushSync:ut});return}if(E.initialized&&!K&&$K(E.location,me)&&!(ke&&ke.submission&&$o(ke.submission.formMethod))){_e(me,{matches:yt},{flushSync:ut});return}M=new AbortController;let ot=Pf(t.history,me,M.signal,ke&&ke.submission),tt,Ot;if(ke&&ke.pendingError)Ot={[Af(yt).route.id]:ke.pendingError};else if(ke&&ke.submission&&$o(ke.submission.formMethod)){let fn=await lt(ot,me,ke.submission,yt,{replace:ke.replace,flushSync:ut});if(fn.shortCircuited)return;tt=fn.pendingActionData,Ot=fn.pendingActionError,Ge=dI(me,ke.submission),ut=!1,ot=new Request(ot.url,{signal:ot.signal})}let{shortCircuited:Pn,loaderData:vt,errors:un}=await Je(ot,me,yt,Ge,ke&&ke.submission,ke&&ke.fetcherSubmission,ke&&ke.replace,ke&&ke.initialHydration===!0,ut,tt,Ot);Pn||(M=null,_e(me,sr({matches:yt},tt?{actionData:tt}:{},{loaderData:vt,errors:un})))}async function lt(ue,me,ke,Me,Ge){Ge===void 0&&(Ge={}),Qt();let yt=AK(me,ke);Ee({navigation:yt},{flushSync:Ge.flushSync===!0});let ut,ot=cI(Me,me);if(!ot.route.action&&!ot.route.lazy)ut={type:lr.error,error:Zi(405,{method:ue.method,pathname:me.pathname,routeId:ot.route.id})};else if(ut=await Mf("action",ue,ot,Me,i,a,l,u.v7_relativeSplatPath),ue.signal.aborted)return{shortCircuited:!0};if(dc(ut)){let tt;return Ge&&Ge.replace!=null?tt=Ge.replace:tt=ut.location===E.location.pathname+E.location.search,await Ut(E,ut,{submission:ke,replace:tt}),{shortCircuited:!0}}if(np(ut)){let tt=Af(Me,ot.route.id);return(Ge&&Ge.replace)!==!0&&(_=gr.Push),{pendingActionData:{},pendingActionError:{[tt.route.id]:ut.error}}}if(cc(ut))throw Zi(400,{type:"defer-action"});return{pendingActionData:{[ot.route.id]:ut.data}}}async function Je(ue,me,ke,Me,Ge,yt,ut,ot,tt,Ot,Pn){let vt=Me||dI(me,Ge),un=Ge||yt||C6(vt),fn=s||o,[Rr,rr]=p6(t.history,E,ke,un,me,u.v7_partialHydration&&ot===!0,K,X,Z,de,se,ne,fn,l,Ot,Pn);if(Cs(tn=>!(ke&&ke.some(cn=>cn.route.id===tn))||Rr&&Rr.some(cn=>cn.route.id===tn)),Y=++F,Rr.length===0&&rr.length===0){let tn=mo();return _e(me,sr({matches:ke,loaderData:{},errors:Pn||null},Ot?{actionData:Ot}:{},tn?{fetchers:new Map(E.fetchers)}:{}),{flushSync:tt}),{shortCircuited:!0}}if(!B&&(!u.v7_partialHydration||!ot)){rr.forEach(cn=>{let xr=E.fetchers.get(cn.key),At=Df(void 0,xr?xr.data:void 0);E.fetchers.set(cn.key,At)});let tn=Ot||E.actionData;Ee(sr({navigation:vt},tn?Object.keys(tn).length===0?{actionData:null}:{actionData:tn}:{},rr.length>0?{fetchers:new Map(E.fetchers)}:{}),{flushSync:tt})}rr.forEach(tn=>{H.has(tn.key)&&_n(tn.key),tn.controller&&H.set(tn.key,tn.controller)});let hr=()=>rr.forEach(tn=>_n(tn.key));M&&M.signal.addEventListener("abort",hr);let{results:Ho,loaderResults:Di,fetcherResults:ga}=await Yt(E.matches,ke,Rr,rr,ue);if(ue.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",hr),rr.forEach(tn=>H.delete(tn.key));let go=x6(Ho);if(go){if(go.idx>=Rr.length){let tn=rr[go.idx-Rr.length].key;ne.add(tn)}return await Ut(E,go.result,{replace:ut}),{shortCircuited:!0}}let{loaderData:Du,errors:Lu}=y6(E,ke,Rr,Di,Pn,rr,ga,ie);ie.forEach((tn,cn)=>{tn.subscribe(xr=>{(xr||tn.done)&&ie.delete(cn)})});let xl=mo(),qo=bi(Y),yo=xl||qo||rr.length>0;return sr({loaderData:Du,errors:Lu},yo?{fetchers:new Map(E.fetchers)}:{})}function nt(ue,me,ke,Me){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(ue)&&_n(ue);let Ge=(Me&&Me.unstable_flushSync)===!0,yt=s||o,ut=sI(E.location,E.matches,l,u.v7_prependBasename,ke,u.v7_relativeSplatPath,me,Me?.relative),ot=tp(yt,ut,l);if(!ot){Ct(ue,me,Zi(404,{pathname:ut}),{flushSync:Ge});return}let{path:tt,submission:Ot,error:Pn}=d6(u.v7_normalizeFormMethod,!0,ut,Me);if(Pn){Ct(ue,me,Pn,{flushSync:Ge});return}let vt=cI(ot,tt);if(N=(Me&&Me.preventScrollReset)===!0,Ot&&$o(Ot.formMethod)){et(ue,me,tt,vt,ot,Ge,Ot);return}se.set(ue,{routeId:me,path:tt}),on(ue,me,tt,vt,ot,Ge,Ot)}async function et(ue,me,ke,Me,Ge,yt,ut){if(Qt(),se.delete(ue),!Me.route.action&&!Me.route.lazy){let cn=Zi(405,{method:ut.formMethod,pathname:ke,routeId:me});Ct(ue,me,cn,{flushSync:yt});return}let ot=E.fetchers.get(ue);$t(ue,DK(ut,ot),{flushSync:yt});let tt=new AbortController,Ot=Pf(t.history,ke,tt.signal,ut);H.set(ue,tt);let Pn=F,vt=await Mf("action",Ot,Me,Ge,i,a,l,u.v7_relativeSplatPath);if(Ot.signal.aborted){H.get(ue)===tt&&H.delete(ue);return}if(u.v7_fetcherPersist&&de.has(ue)){if(dc(vt)||np(vt)){$t(ue,eu(void 0));return}}else{if(dc(vt))if(H.delete(ue),Y>Pn){$t(ue,eu(void 0));return}else return ne.add(ue),$t(ue,Df(ut)),Ut(E,vt,{fetcherSubmission:ut});if(np(vt)){Ct(ue,me,vt.error);return}}if(cc(vt))throw Zi(400,{type:"defer-action"});let un=E.navigation.location||E.location,fn=Pf(t.history,un,tt.signal),Rr=s||o,rr=E.navigation.state!=="idle"?tp(Rr,E.navigation.location,l):E.matches;kt(rr,"Didn't find any matches after fetcher action");let hr=++F;Q.set(ue,hr);let Ho=Df(ut,vt.data);E.fetchers.set(ue,Ho);let[Di,ga]=p6(t.history,E,rr,ut,un,!1,K,X,Z,de,se,ne,Rr,l,{[Me.route.id]:vt.data},void 0);ga.filter(cn=>cn.key!==ue).forEach(cn=>{let xr=cn.key,At=E.fetchers.get(xr),wl=Df(void 0,At?At.data:void 0);E.fetchers.set(xr,wl),H.has(xr)&&_n(xr),cn.controller&&H.set(xr,cn.controller)}),Ee({fetchers:new Map(E.fetchers)});let go=()=>ga.forEach(cn=>_n(cn.key));tt.signal.addEventListener("abort",go);let{results:Du,loaderResults:Lu,fetcherResults:xl}=await Yt(E.matches,rr,Di,ga,fn);if(tt.signal.aborted)return;tt.signal.removeEventListener("abort",go),Q.delete(ue),H.delete(ue),ga.forEach(cn=>H.delete(cn.key));let qo=x6(Du);if(qo){if(qo.idx>=Di.length){let cn=ga[qo.idx-Di.length].key;ne.add(cn)}return Ut(E,qo.result)}let{loaderData:yo,errors:tn}=y6(E,E.matches,Di,Lu,void 0,ga,xl,ie);if(E.fetchers.has(ue)){let cn=eu(vt.data);E.fetchers.set(ue,cn)}bi(hr),E.navigation.state==="loading"&&hr>Y?(kt(_,"Expected pending action"),M&&M.abort(),_e(E.navigation.location,{matches:rr,loaderData:yo,errors:tn,fetchers:new Map(E.fetchers)})):(Ee({errors:tn,loaderData:b6(E.loaderData,yo,rr,tn),fetchers:new Map(E.fetchers)}),K=!1)}async function on(ue,me,ke,Me,Ge,yt,ut){let ot=E.fetchers.get(ue);$t(ue,Df(ut,ot?ot.data:void 0),{flushSync:yt});let tt=new AbortController,Ot=Pf(t.history,ke,tt.signal);H.set(ue,tt);let Pn=F,vt=await Mf("loader",Ot,Me,Ge,i,a,l,u.v7_relativeSplatPath);if(cc(vt)&&(vt=await S6(vt,Ot.signal,!0)||vt),H.get(ue)===tt&&H.delete(ue),!Ot.signal.aborted){if(de.has(ue)){$t(ue,eu(void 0));return}if(dc(vt))if(Y>Pn){$t(ue,eu(void 0));return}else{ne.add(ue),await Ut(E,vt);return}if(np(vt)){Ct(ue,me,vt.error);return}kt(!cc(vt),"Unhandled fetcher deferred data"),$t(ue,eu(vt.data))}}async function Ut(ue,me,ke){let{submission:Me,fetcherSubmission:Ge,replace:yt}=ke===void 0?{}:ke;me.revalidate&&(K=!0);let ut=$f(ue.location,me.location,{_isRedirect:!0});if(kt(ut,"Expected a location on the redirect navigation"),n){let un=!1;if(me.reloadDocument)un=!0;else if(u6.test(me.location)){const fn=t.history.createURL(me.location);un=fn.origin!==e.location.origin||ss(fn.pathname,l)==null}if(un){yt?e.location.replace(me.location):e.location.assign(me.location);return}}M=null;let ot=yt===!0?gr.Replace:gr.Push,{formMethod:tt,formAction:Ot,formEncType:Pn}=ue.navigation;!Me&&!Ge&&tt&&Ot&&Pn&&(Me=C6(ue.navigation));let vt=Me||Ge;if(SK.has(me.status)&&vt&&$o(vt.formMethod))await Oe(ot,ut,{submission:sr({},vt,{formAction:me.location}),preventScrollReset:N});else{let un=dI(ut,Me);await Oe(ot,ut,{overrideNavigation:un,fetcherSubmission:Ge,preventScrollReset:N})}}async function Yt(ue,me,ke,Me,Ge){let yt=await Promise.all([...ke.map(tt=>Mf("loader",Ge,tt,me,i,a,l,u.v7_relativeSplatPath)),...Me.map(tt=>tt.matches&&tt.match&&tt.controller?Mf("loader",Pf(t.history,tt.path,tt.controller.signal),tt.match,tt.matches,i,a,l,u.v7_relativeSplatPath):{type:lr.error,error:Zi(404,{pathname:tt.path})})]),ut=yt.slice(0,ke.length),ot=yt.slice(ke.length);return await Promise.all([k6(ue,ke,ut,ut.map(()=>Ge.signal),!1,E.loaderData),k6(ue,Me.map(tt=>tt.match),ot,Me.map(tt=>tt.controller?tt.controller.signal:null),!0)]),{results:yt,loaderResults:ut,fetcherResults:ot}}function Qt(){K=!0,X.push(...Cs()),se.forEach((ue,me)=>{H.has(me)&&(Z.push(me),_n(me))})}function $t(ue,me,ke){ke===void 0&&(ke={}),E.fetchers.set(ue,me),Ee({fetchers:new Map(E.fetchers)},{flushSync:(ke&&ke.flushSync)===!0})}function Ct(ue,me,ke,Me){Me===void 0&&(Me={});let Ge=Af(E.matches,me);Xn(ue),Ee({errors:{[Ge.route.id]:ke},fetchers:new Map(E.fetchers)},{flushSync:(Me&&Me.flushSync)===!0})}function zn(ue){return u.v7_fetcherPersist&&(pe.set(ue,(pe.get(ue)||0)+1),de.has(ue)&&de.delete(ue)),E.fetchers.get(ue)||CK}function Xn(ue){let me=E.fetchers.get(ue);H.has(ue)&&!(me&&me.state==="loading"&&Q.has(ue))&&_n(ue),se.delete(ue),Q.delete(ue),ne.delete(ue),de.delete(ue),E.fetchers.delete(ue)}function za(ue){if(u.v7_fetcherPersist){let me=(pe.get(ue)||0)-1;me<=0?(pe.delete(ue),de.add(ue)):pe.set(ue,me)}else Xn(ue);Ee({fetchers:new Map(E.fetchers)})}function _n(ue){let me=H.get(ue);kt(me,"Expected fetch controller: "+ue),me.abort(),H.delete(ue)}function Qa(ue){for(let me of ue){let ke=zn(me),Me=eu(ke.data);E.fetchers.set(me,Me)}}function mo(){let ue=[],me=!1;for(let ke of ne){let Me=E.fetchers.get(ke);kt(Me,"Expected fetcher: "+ke),Me.state==="loading"&&(ne.delete(ke),ue.push(ke),me=!0)}return Qa(ue),me}function bi(ue){let me=[];for(let[ke,Me]of Q)if(Me<ue){let Ge=E.fetchers.get(ke);kt(Ge,"Expected fetcher: "+ke),Ge.state==="loading"&&(_n(ke),Q.delete(ke),me.push(ke))}return Qa(me),me.length>0}function hn(ue,me){let ke=E.blockers.get(ue)||Of;return xe.get(ue)!==me&&xe.set(ue,me),ke}function Za(ue){E.blockers.delete(ue),xe.delete(ue)}function vi(ue,me){let ke=E.blockers.get(ue)||Of;kt(ke.state==="unblocked"&&me.state==="blocked"||ke.state==="blocked"&&me.state==="blocked"||ke.state==="blocked"&&me.state==="proceeding"||ke.state==="blocked"&&me.state==="unblocked"||ke.state==="proceeding"&&me.state==="unblocked","Invalid blocker state transition: "+ke.state+" -> "+me.state);let Me=new Map(E.blockers);Me.set(ue,me),Ee({blockers:Me})}function xi(ue){let{currentLocation:me,nextLocation:ke,historyAction:Me}=ue;if(xe.size===0)return;xe.size>1&&ep(!1,"A router only supports one blocker at a time");let Ge=Array.from(xe.entries()),[yt,ut]=Ge[Ge.length-1],ot=E.blockers.get(yt);if(!(ot&&ot.state==="proceeding")&&ut({currentLocation:me,nextLocation:ke,historyAction:Me}))return yt}function Cs(ue){let me=[];return ie.forEach((ke,Me)=>{(!ue||ue(Me))&&(ke.cancel(),me.push(Me),ie.delete(Me))}),me}function ma(ue,me,ke){if(p=ue,g=me,f=ke||null,!y&&E.navigation===oI){y=!0;let Me=Go(E.location,E.matches);Me!=null&&Ee({restoreScrollPosition:Me})}return()=>{p=null,g=null,f=null}}function vl(ue,me){return f&&f(ue,me.map(ke=>n6(ke,E.loaderData)))||ue.key}function ld(ue,me){if(p&&g){let ke=vl(ue,me);p[ke]=g()}}function Go(ue,me){if(p){let ke=vl(ue,me),Me=p[ke];if(typeof Me=="number")return Me}return null}function jt(ue){i={},s=tI(ue,a,void 0,i)}return C={get basename(){return l},get future(){return u},get state(){return E},get routes(){return o},get window(){return e},initialize:oe,subscribe:Ie,enableScrollRestoration:ma,navigate:Fe,fetch:nt,revalidate:Xe,createHref:ue=>t.history.createHref(ue),encodeLocation:ue=>t.history.encodeLocation(ue),getFetcher:zn,deleteFetcher:za,dispose:he,getBlocker:hn,deleteBlocker:Za,_internalFetchControllers:H,_internalActiveDeferreds:ie,_internalSetRoutes:jt},C}function TK(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function sI(t,e,n,r,a,i,o,s){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let c=aI(a||".",rI(l,i),ss(t.pathname,n)||t.pathname,s==="path");return a==null&&(c.search=t.search,c.hash=t.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!uI(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:Hs([n,c.pathname])),uc(c)}function d6(t,e,n,r){if(!r||!TK(r))return{path:n};if(r.formMethod&&!PK(r.formMethod))return{path:n,error:Zi(405,{method:r.formMethod})};let a=()=>({path:n,error:Zi(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),s=w6(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!$o(o))return a();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,g)=>{let[y,v]=g;return""+f+y+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!$o(o))return a();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return a()}}}kt(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=lI(r.formData),u=r.formData;else if(r.body instanceof FormData)l=lI(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=g6(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=g6(l)}catch{return a()}let c={formMethod:o,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if($o(c.formMethod))return{path:n,submission:c};let d=Gs(n);return e&&d.search&&uI(d.search)&&l.append("index",""),d.search="?"+l,{path:uc(d),submission:c}}function NK(t,e){let n=t;if(e){let r=t.findIndex(a=>a.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function p6(t,e,n,r,a,i,o,s,l,u,c,d,p,f,g,y){let v=y?Object.values(y)[0]:g?Object.values(g)[0]:void 0,b=t.createURL(e.location),x=t.createURL(a),w=y?Object.keys(y)[0]:void 0,S=NK(n,w).filter((E,_)=>{let{route:N}=E;if(N.lazy)return!0;if(N.loader==null)return!1;if(i)return N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(_K(e.loaderData,e.matches[_],E)||s.some(L=>L===E.route.id))return!0;let M=e.matches[_],P=E;return f6(E,sr({currentUrl:b,currentParams:M.params,nextUrl:x,nextParams:P.params},r,{actionResult:v,defaultShouldRevalidate:o||b.pathname+b.search===x.pathname+x.search||b.search!==x.search||h6(M,P)}))}),C=[];return c.forEach((E,_)=>{if(i||!n.some(U=>U.route.id===E.routeId)||u.has(_))return;let N=tp(p,E.path,f);if(!N){C.push({key:_,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let M=e.fetchers.get(_),P=cI(N,E.path),L=!1;d.has(_)?L=!1:l.includes(_)?L=!0:M&&M.state!=="idle"&&M.data===void 0?L=o:L=f6(P,sr({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})),L&&C.push({key:_,routeId:E.routeId,path:E.path,matches:N,match:P,controller:new AbortController})}),[S,C]}function _K(t,e,n){let r=!e||n.route.id!==e.route.id,a=t[n.route.id]===void 0;return r||a}function h6(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function f6(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function m6(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let a=n[t.id];kt(a,"No route found in manifest");let i={};for(let o in r){let s=a[o]!==void 0&&o!=="hasErrorBoundary";ep(!s,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!s&&!eK.has(o)&&(i[o]=r[o])}Object.assign(a,i),Object.assign(a,sr({},e(a),{lazy:void 0}))}async function Mf(t,e,n,r,a,i,o,s,l){l===void 0&&(l={});let u,c,d,p=y=>{let v,b=new Promise((x,w)=>v=w);return d=()=>v(),e.signal.addEventListener("abort",d),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let v,b=await Promise.all([p(y).catch(x=>{v=x}),m6(n.route,i,a)]);if(v)throw v;c=b[0]}else if(await m6(n.route,i,a),y=n.route[t],y)c=await p(y);else if(t==="action"){let v=new URL(e.url),b=v.pathname+v.search;throw Zi(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:lr.data,data:void 0};else if(y)c=await p(y);else{let v=new URL(e.url),b=v.pathname+v.search;throw Zi(404,{pathname:b})}kt(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){u=lr.error,c=y}finally{d&&e.signal.removeEventListener("abort",d)}if(MK(c)){let y=c.status;if(kK.has(y)){let b=c.headers.get("Location");if(kt(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!u6.test(b))b=sI(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,s);else if(!l.isStaticRequest){let x=new URL(e.url),w=b.startsWith("//")?new URL(x.protocol+b):new URL(b),S=ss(w.pathname,o)!=null;w.origin===x.origin&&S&&(b=w.pathname+w.search+w.hash)}if(l.isStaticRequest)throw c.headers.set("Location",b),c;return{type:lr.redirect,status:y,location:b,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===lr.error?lr.error:lr.data,response:c};let v;try{let b=c.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?c.body==null?v=null:v=await c.json():v=await c.text()}catch(b){return{type:lr.error,error:b}}return u===lr.error?{type:u,error:new iI(y,c.statusText,v),headers:c.headers}:{type:lr.data,data:v,statusCode:c.status,headers:c.headers}}if(u===lr.error)return{type:u,error:c};if(OK(c)){var f,g;return{type:lr.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((g=c.init)==null?void 0:g.headers)&&new Headers(c.init.headers)}}return{type:lr.data,data:c}}function Pf(t,e,n,r){let a=t.createURL(w6(e)).toString(),i={signal:n};if(r&&$o(r.formMethod)){let{formMethod:o,formEncType:s}=r;i.method=o.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=lI(r.formData):i.body=r.formData}return new Request(a,i)}function lI(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function g6(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function RK(t,e,n,r,a){let i={},o=null,s,l=!1,u={};return n.forEach((c,d)=>{let p=e[d].route.id;if(kt(!dc(c),"Cannot handle redirect results in processLoaderData"),np(c)){let f=Af(t,p),g=c.error;r&&(g=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=g),i[p]=void 0,l||(l=!0,s=s6(c.error)?c.error.status:500),c.headers&&(u[p]=c.headers)}else cc(c)?(a.set(p,c.deferredData),i[p]=c.deferredData.data):i[p]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(s=c.statusCode),c.headers&&(u[p]=c.headers)}),r&&(o=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:o,statusCode:s||200,loaderHeaders:u}}function y6(t,e,n,r,a,i,o,s){let{loaderData:l,errors:u}=RK(e,n,r,a,s);for(let c=0;c<i.length;c++){let{key:d,match:p,controller:f}=i[c];kt(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let g=o[c];if(!(f&&f.signal.aborted))if(np(g)){let y=Af(t.matches,p?.route.id);u&&u[y.route.id]||(u=sr({},u,{[y.route.id]:g.error})),t.fetchers.delete(d)}else if(dc(g))kt(!1,"Unhandled fetcher revalidation redirect");else if(cc(g))kt(!1,"Unhandled fetcher deferred data");else{let y=eu(g.data);t.fetchers.set(d,y)}}return{loaderData:l,errors:u}}function b6(t,e,n,r){let a=sr({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(a[o]=e[o]):t[o]!==void 0&&i.route.loader&&(a[o]=t[o]),r&&r.hasOwnProperty(o))break}return a}function Af(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function v6(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zi(t,e){let{pathname:n,routeId:r,method:a,type:i}=e===void 0?{}:e,o="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(o="Bad Request",a&&n&&r?s="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?s="defer() is not supported in actions":i==="invalid-body"&&(s="Unable to encode submission body")):t===403?(o="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",s='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",a&&n&&r?s="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new iI(t||500,o,new Error(s),!0)}function x6(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(dc(n))return{result:n,idx:e}}}function w6(t){let e=typeof t=="string"?Gs(t):t;return uc(sr({},e,{hash:""}))}function $K(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function cc(t){return t.type===lr.deferred}function np(t){return t.type===lr.error}function dc(t){return(t&&t.type)===lr.redirect}function OK(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function MK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function PK(t){return wK.has(t.toLowerCase())}function $o(t){return vK.has(t.toLowerCase())}async function k6(t,e,n,r,a,i){for(let o=0;o<n.length;o++){let s=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!h6(u,l)&&(i&&i[l.route.id])!==void 0;if(cc(s)&&(a||c)){let d=r[o];kt(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await S6(s,d,a).then(p=>{p&&(n[o]=p||n[o])})}}}async function S6(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:lr.data,data:t.deferredData.unwrappedData}}catch(r){return{type:lr.error,error:r}}return{type:lr.data,data:t.deferredData.data}}}function uI(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function cI(t,e){let n=typeof e=="string"?Gs(e).search:e.search;if(t[t.length-1].route.index&&uI(n||""))return t[t.length-1];let r=o6(t);return r[r.length-1]}function C6(t){let{formMethod:e,formAction:n,formEncType:r,text:a,formData:i,json:o}=t;if(!(!e||!n||!r)){if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function dI(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function AK(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Df(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function DK(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function eu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function LK(t,e){try{let n=t.sessionStorage.getItem(c6);if(n){let r=JSON.parse(n);for(let[a,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(a,new Set(i||[]))}}catch{}}function FK(t,e){if(e.size>0){let n={};for(let[r,a]of e)n[r]=[...a];try{t.sessionStorage.setItem(c6,JSON.stringify(n))}catch(r){ep(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
* React Router v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lf.apply(this,arguments)}const Ff=$.createContext(null),Cy=$.createContext(null),qs=$.createContext(null),Iy=$.createContext(null),tu=$.createContext({outlet:null,matches:[],isDataRoute:!1}),I6=$.createContext(null);function BK(t,e){let{relative:n}=e===void 0?{}:e;rp()||kt(!1);let{basename:r,navigator:a}=$.useContext(qs),{hash:i,pathname:o,search:s}=Ji(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Hs([r,o])),a.createHref({pathname:l,search:s,hash:i})}function rp(){return $.useContext(Iy)!=null}function pc(){return rp()||kt(!1),$.useContext(Iy).location}function nu(t){rp()||kt(!1);let{pathname:e}=pc();return $.useMemo(()=>Sy(t,e),[e,t])}function E6(t){$.useContext(qs).static||$.useLayoutEffect(t)}function zK(){let{isDataRoute:t}=$.useContext(tu);return t?tX():UK()}function UK(){rp()||kt(!1);let t=$.useContext(Ff),{basename:e,future:n,navigator:r}=$.useContext(qs),{matches:a}=$.useContext(tu),{pathname:i}=pc(),o=JSON.stringify(rI(a,n.v7_relativeSplatPath)),s=$.useRef(!1);return E6(()=>{s.current=!0}),$.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let c=aI(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Hs([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,o,i,t])}const jK=$.createContext(null);function VK(t){let e=$.useContext(tu).outlet;return e&&$.createElement(jK.Provider,{value:t},e)}function Ji(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=$.useContext(qs),{matches:a}=$.useContext(tu),{pathname:i}=pc(),o=JSON.stringify(rI(a,r.v7_relativeSplatPath));return $.useMemo(()=>aI(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function WK(t,e,n,r){rp()||kt(!1);let{navigator:a}=$.useContext(qs),{matches:i}=$.useContext(tu),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=pc(),c;if(e){var d;let v=typeof e=="string"?Gs(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||kt(!1),c=v}else c=u;let p=c.pathname||"/",f=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=tp(t,{pathname:f}),y=XK(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Hs([l,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Hs([l,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?$.createElement(Iy.Provider,{value:{location:Lf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:gr.Pop}},y):y}function GK(){let t=eX(),e=s6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:r},n):null,null)}const HK=$.createElement(GK,null);class qK extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(tu.Provider,{value:this.props.routeContext},$.createElement(I6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KK(t){let{routeContext:e,match:n,children:r}=t,a=$.useContext(Ff);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(tu.Provider,{value:e},r)}function XK(t,e,n,r){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(a=n)==null?void 0:a.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&s?.[d.route.id]);c>=0||kt(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:f}=n,g=d.route.loader&&p[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,p)=>{let f,g=!1,y=null,v=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||HK,l&&(u<0&&p===0?(nX("route-fallback",!1),g=!0,v=null):u===p&&(g=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),x=()=>{let w;return f?w=y:g?w=v:d.route.Component?w=$.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,$.createElement(KK,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?$.createElement(qK,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var T6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(T6||{}),ap=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ap||{});function YK(t){let e=$.useContext(Ff);return e||kt(!1),e}function pI(t){let e=$.useContext(Cy);return e||kt(!1),e}function QK(t){let e=$.useContext(tu);return e||kt(!1),e}function N6(t){let e=QK(),n=e.matches[e.matches.length-1];return n.route.id||kt(!1),n.route.id}function ZK(){return pI(ap.UseNavigation).navigation}function JK(){let{matches:t,loaderData:e}=pI(ap.UseMatches);return $.useMemo(()=>t.map(n=>n6(n,e)),[t,e])}function eX(){var t;let e=$.useContext(I6),n=pI(ap.UseRouteError),r=N6(ap.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tX(){let{router:t}=YK(T6.UseNavigateStable),e=N6(ap.UseNavigateStable),n=$.useRef(!1);return E6(()=>{n.current=!0}),$.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Lf({fromRouteId:e},a)))},[t,e])}const _6={};function nX(t,e,n){!e&&!_6[t]&&(_6[t]=!0)}function rX(t){return VK(t.context)}function ip(t){kt(!1)}function aX(t){let{basename:e="/",children:n=null,location:r,navigationType:a=gr.Pop,navigator:i,static:o=!1,future:s}=t;rp()&&kt(!1);let l=e.replace(/^\/*/,"/"),u=$.useMemo(()=>({basename:l,navigator:i,static:o,future:Lf({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof r=="string"&&(r=Gs(r));let{pathname:c="/",search:d="",hash:p="",state:f=null,key:g="default"}=r,y=$.useMemo(()=>{let v=ss(c,l);return v==null?null:{location:{pathname:v,search:d,hash:p,state:f,key:g},navigationType:a}},[l,c,d,p,f,g,a]);return y==null?null:$.createElement(qs.Provider,{value:u},$.createElement(Iy.Provider,{children:n,value:y}))}new Promise(()=>{});function hI(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(r,a)=>{if(!$.isValidElement(r))return;let i=[...e,a];if(r.type===$.Fragment){n.push.apply(n,hI(r.props.children,i));return}r.type!==ip&&kt(!1),!r.props.index||!r.props.children||kt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hI(r.props.children,i)),n.push(o)}),n}function iX(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:$.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:$.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:$.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
* React Router DOM v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function hc(){return hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hc.apply(this,arguments)}function R6(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function oX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sX(t,e){return t.button===0&&(!e||e==="_self")&&!oX(t)}const lX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],uX=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],cX="6";try{window.__reactRouterVersion=cX}catch{}function dX(t,e){return EK({basename:e?.basename,future:hc({},e?.future,{v7_prependBasename:!0}),history:Qq({window:e?.window}),hydrationData:e?.hydrationData||pX(),routes:t,mapRouteProperties:iX,window:e?.window}).initialize()}function pX(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=hc({},e,{errors:hX(e.errors)})),e}function hX(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,a]of e)if(a&&a.__type==="RouteErrorResponse")n[r]=new iI(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(a.message);i.stack="",n[r]=i}}else n[r]=a;return n}const $6=$.createContext({isTransitioning:!1}),fX=$.createContext(new Map),mX="startTransition",O6=eR[mX],gX="flushSync",M6=Aq[gX];function yX(t){O6?O6(t):t()}function Bf(t){M6?M6(t):t()}class bX{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function vX(t){let{fallbackElement:e,router:n,future:r}=t,[a,i]=$.useState(n.state),[o,s]=$.useState(),[l,u]=$.useState({isTransitioning:!1}),[c,d]=$.useState(),[p,f]=$.useState(),[g,y]=$.useState(),v=$.useRef(new Map),{v7_startTransition:b}=r||{},x=$.useCallback(_=>{b?yX(_):_()},[b]),w=$.useCallback((_,N)=>{let{deletedFetchers:M,unstable_flushSync:P,unstable_viewTransitionOpts:L}=N;M.forEach(B=>v.current.delete(B)),_.fetchers.forEach((B,K)=>{B.data!==void 0&&v.current.set(K,B.data)});let U=n.window==null||typeof n.window.document.startViewTransition!="function";if(!L||U){P?Bf(()=>i(_)):x(()=>i(_));return}if(P){Bf(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let B=n.window.document.startViewTransition(()=>{Bf(()=>i(_))});B.finished.finally(()=>{Bf(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})})}),Bf(()=>f(B));return}p?(c&&c.resolve(),p.skipTransition(),y({state:_,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(s(_),u({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,p,c,v,x]);$.useLayoutEffect(()=>n.subscribe(w),[n,w]),$.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new bX)},[l]),$.useEffect(()=>{if(c&&o&&n.window){let _=o,N=c.promise,M=n.window.document.startViewTransition(async()=>{x(()=>i(_)),await N});M.finished.finally(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})}),f(M)}},[x,o,c,n.window]),$.useEffect(()=>{c&&o&&a.location.key===o.location.key&&c.resolve()},[c,p,a.location,o]),$.useEffect(()=>{!l.isTransitioning&&g&&(s(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),y(void 0))},[l.isTransitioning,g]),$.useEffect(()=>{},[]);let S=$.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:_=>n.navigate(_),push:(_,N,M)=>n.navigate(_,{state:N,preventScrollReset:M?.preventScrollReset}),replace:(_,N,M)=>n.navigate(_,{replace:!0,state:N,preventScrollReset:M?.preventScrollReset})}),[n]),C=n.basename||"/",E=$.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return $.createElement($.Fragment,null,$.createElement(Ff.Provider,{value:E},$.createElement(Cy.Provider,{value:a},$.createElement(fX.Provider,{value:v.current},$.createElement($6.Provider,{value:l},$.createElement(aX,{basename:C,location:a.location,navigationType:a.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},a.initialized||n.future.v7_partialHydration?$.createElement(xX,{routes:n.routes,future:n.future,state:a}):e))))),null)}function xX(t){let{routes:e,future:n,state:r}=t;return WK(e,void 0,r,n)}const wX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fI=$.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:a,replace:i,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=t,d=R6(t,lX),{basename:p}=$.useContext(qs),f,g=!1;if(typeof l=="string"&&kX.test(l)&&(f=l,wX))try{let x=new URL(window.location.href),w=l.startsWith("//")?new URL(x.protocol+l):new URL(l),S=ss(w.pathname,p);w.origin===x.origin&&S!=null?l=S+w.search+w.hash:g=!0}catch{}let y=BK(l,{relative:r}),v=IX(l,{replace:i,state:o,target:s,preventScrollReset:u,relative:r,unstable_viewTransition:c});function b(x){n&&n(x),x.defaultPrevented||v(x)}return $.createElement("a",hc({},d,{href:f||y,onClick:g||a?n:b,ref:e,target:s}))}),Ey=$.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:o,to:s,unstable_viewTransition:l,children:u}=t,c=R6(t,uX),d=Ji(s,{relative:c.relative}),p=pc(),f=$.useContext(Cy),{navigator:g,basename:y}=$.useContext(qs),v=f!=null&&NX(d)&&l===!0,b=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=p.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=ss(w,y)||w);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=x===b||!i&&x.startsWith(b)&&x.charAt(S)==="/",E=w!=null&&(w===b||!i&&w.startsWith(b)&&w.charAt(b.length)==="/"),_={isActive:C,isPending:E,isTransitioning:v},N=C?n:void 0,M;typeof a=="function"?M=a(_):M=[a,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(_):o;return $.createElement(fI,hc({},c,{"aria-current":N,className:M,ref:e,style:P,to:s,unstable_viewTransition:l}),typeof u=="function"?u(_):u)});function SX(t){let{getKey:e,storageKey:n}=t;return EX({getKey:e,storageKey:n}),null}var Ty;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ty||(Ty={}));var mI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mI||(mI={}));function P6(t){let e=$.useContext(Ff);return e||kt(!1),e}function CX(t){let e=$.useContext(Cy);return e||kt(!1),e}function IX(t,e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=zK(),u=pc(),c=Ji(t,{relative:o});return $.useCallback(d=>{if(sX(d,n)){d.preventDefault();let p=r!==void 0?r:uc(u)===uc(c);l(t,{replace:p,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s})}},[u,l,c,r,a,n,t,i,o,s])}const A6="react-router-scroll-positions";let Ny={};function EX(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=P6(Ty.UseScrollRestoration),{restoreScrollPosition:a,preventScrollReset:i}=CX(mI.UseScrollRestoration),{basename:o}=$.useContext(qs),s=pc(),l=JK(),u=ZK();$.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),TX($.useCallback(()=>{if(u.state==="idle"){let c=(e?e(s,l):null)||s.key;Ny[c]=window.scrollY}try{sessionStorage.setItem(n||A6,JSON.stringify(Ny))}catch{}window.history.scrollRestoration="auto"},[n,e,u.state,s,l])),typeof document<"u"&&($.useLayoutEffect(()=>{try{let c=sessionStorage.getItem(n||A6);c&&(Ny=JSON.parse(c))}catch{}},[n]),$.useLayoutEffect(()=>{let c=e&&o!=="/"?(p,f)=>e(hc({},p,{pathname:ss(p.pathname,o)||p.pathname}),f):e,d=r?.enableScrollRestoration(Ny,()=>window.scrollY,c);return()=>d&&d()},[r,o,e]),$.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(s.hash){let c=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(c){c.scrollIntoView();return}}i!==!0&&window.scrollTo(0,0)}},[s,a,i]))}function TX(t,e){let{capture:n}=e||{};$.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function NX(t,e){e===void 0&&(e={});let n=$.useContext($6);n==null&&kt(!1);let{basename:r}=P6(Ty.useViewTransitionState),a=Ji(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ss(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ss(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Sy(a.pathname,o)!=null||Sy(a.pathname,i)!=null}const zf=G.createContext({theme:"material",dark:!0,touchRipple:!0});function _X(t,e){return typeof window>"u"?$.useEffect(t,e):$.useLayoutEffect(t,e)}const D6=function(t,e){e===void 0&&(e=!0);const[n,r]=$.useState(t);return _X(()=>{if(e){if(t==="ios"||t==="material")n!==t&&r(t);else if(n==="parent"&&typeof window<"u"&&typeof document<"u"){const a=document.documentElement;a&&(a.classList.contains("ios")?r("ios"):(a.classList.contains("md")||a.classList.contains("material"))&&r("material"))}}},[t]),e?n:t},RX=t=>{const{theme:e,dark:n,touchRipple:r=!0,autoThemeDetection:a=!0,children:i}=t,o=D6(e,a);return G.createElement(zf.Provider,{value:{theme:o,dark:n,touchRipple:r}},i)};function A(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>{typeof i=="object"&&i.constructor===Object?Object.keys(i).forEach(o=>{i[o]&&t.push(o)}):Array.isArray(i)?t.push(...i):typeof i=="function"?t.push(i()):i&&i.value?t.push(i.value):i&&t.push(i)});const a=[];return t.forEach(i=>{a.indexOf(i)<0&&a.push(i)}),a.filter(i=>!!i).join(" ")}const tr=function(t,e){return e===void 0&&(e=""),!e||typeof e!="string"?t:["static","relative","absolute","fixed","sticky"].filter(n=>e.indexOf(n)>=0).length>0?"":t},$X=(t,e,n)=>{const{safeAreas:r}=t;return A(e==="ios"&&"k-ios",e==="material"&&"k-material","k-app w-full h-full min-h-screen",r&&"safe-areas",tr("relative",n),n)};function gI(){return gI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gI.apply(this,arguments)}const L6=$.forwardRef((t,e)=>{const{component:n="div",className:r,theme:a="material",dark:i=!0,touchRipple:o=!0,safeAreas:s=!0,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=D6(a),g=$X({...t,safeAreas:s},f,r);return G.createElement(RX,{theme:f,dark:i,touchRipple:o,autoThemeDetection:!1},G.createElement(d,gI({ref:c,className:g},p),l))});L6.displayName="App";const yI=(t,e,n)=>{if(typeof t=="string")return t;const r=[t.common,t[e]];return n&&t[n]&&(typeof t[n]=="string"?r.push(t[n]):r.push(t[n].common,t[n][e])),r},OX=(t,e,n)=>{const r={},a=["common","ios","material"];return Object.keys(t).forEach(i=>{const o=i==="base"?n:"";if(!(typeof t[i]!="string"&&Object.keys(t[i]).filter(l=>!a.includes(l)).length>0)){r[i]=A(yI(t[i],e),o);return}r[i]={};const s=yI(t[i],e);r[i].default=A(s,o),Object.keys(t[i]).filter(l=>!a.includes(l)).forEach(l=>{r[i][l]=A(s,yI(t[i],e,l),o)})}),r},it=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=$.useContext(zf).theme||"ios";return e&&(r="ios"),n&&(r="material"),(a,i)=>OX(a,r,i)},MX=(t,e)=>({base:{common:A("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",tr("fixed",e)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function bI(){return bI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bI.apply(this,arguments)}const PX=$.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,opened:o,backdrop:s=!0,onBackdropClick:l,children:u,...c}=t,d=$.useRef(null);$.useImperativeHandle(e,()=>({el:d.current}));const p=o?"opened":"closed",f=n,g={...c},y=it({ios:a,material:i})(MX(t,r),r);return G.createElement(G.Fragment,null,s&&G.createElement("div",{className:y.backdrop[p],onClick:l}),G.createElement(f,bI({ref:d,className:y.base[p]},g),u))});PX.displayName="Actions";const AX=t=>{const{dividers:e}=t;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:A(e&&"hairline-b")}}};function vI(){return vI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vI.apply(this,arguments)}const DX=$.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,dividers:o=!0,children:s,...l}=t,u=$.useRef(null);$.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=it({ios:a,material:i})(AX({dividers:o,...t}),r);return G.createElement(c,vI({ref:u,className:p.base},d),s)});DX.displayName="ActionsGroup";const yn=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=$.useContext(zf).theme||"ios";return e&&(r="ios"),n&&(r="material"),r};class LX{constructor(e,n,r){const a=this;if(!e)return;a.el=e;const{left:i,top:o,width:s,height:l}=e.getBoundingClientRect(),u={x:n-i,y:r-o};let c=Math.max((l**2+s**2)**.5,48);const d=e.classList.contains("k-touch-ripple-inset");d&&(c=Math.max(Math.min(s,l),48));const p=typeof window<"u"&&window.getComputedStyle(e,null).getPropertyValue("overflow")==="hidden";if(!d&&p){const g=((u.x-s/2)**2+(u.y-l/2)**2)**.5,y=(c/2+g)/(c/2);a.rippleTransform=`translate3d(0px, 0px, 0) scale(${y})`}else a.rippleTransform=`translate3d(${-u.x+s/2}px, ${-u.y+l/2}px, 0) scale(1)`;a.rippleWaveEl=document.createElement("span"),a.rippleWaveEl.classList.add("k-touch-ripple-wave"),a.rippleWaveEl.setAttribute("hidden",""),a.rippleWaveEl.style=`
      width: ${c}px;
      height: ${c}px;
      margin-top:-${c/2}px;
      margin-left:-${c/2}px;
      left:${u.x}px;
      top:${u.y}px; --k-ripple-transform: ${a.rippleTransform}`,e.insertAdjacentElement("afterbegin",a.rippleWaveEl);const f=()=>{a.rippleWaveEl.removeEventListener("animationend",f),a.rippleWaveEl&&(a.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(a.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),a.shouldBeRemoved&&a.out()))};return a.rippleWaveEl.addEventListener("animationend",f),a}destroy(){let e=this;e.rippleWaveEl&&e.el.removeChild(e.rippleWaveEl),Object.keys(e).forEach(n=>{e[n]=null,delete e[n]}),e=null}out(){const e=this,{rippleWaveEl:n}=this;clearTimeout(e.removeTimeout),n.classList.add("k-touch-ripple-wave-out"),e.removeTimeout=setTimeout(()=>{e.destroy()},300);const r=()=>{e.rippleWaveEl.removeEventListener("animationend",r),clearTimeout(e.removeTimeout),e.destroy()};e.rippleWaveEl.addEventListener("animationend",r)}remove(){const e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout(()=>{e.destroy()},400),e.shouldBeRemoved=!0,e.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&e.out())}}const Oo=(t,e,n)=>{const r=$.useContext(zf);n||(n=t);const a=$.useRef(null),i=()=>{a.current&&a.current.remove(),a.current=null},o=f=>{a.current=new LX(t.current,f.pageX,f.pageY)},s=()=>{i()},l=()=>{i()},u=()=>{if(!r.touchRipple)return;const f=n.current;f.addEventListener("pointerdown",o),f.addEventListener("pointermove",s),f.addEventListener("pointerup",l),f.addEventListener("pointercancel",l),f.addEventListener("contextmenu",l)},c=()=>{const f=n.current;f.removeEventListener("pointerdown",o),f.removeEventListener("pointermove",s),f.removeEventListener("pointerup",l),f.removeEventListener("pointercancel",l),f.removeEventListener("contextmenu",l)},d=()=>{!n||!n.current||!e||u()},p=()=>{!n||!n.current||!e||c()};$.useEffect(()=>(d(),()=>p()))},Nt=()=>{const t=$.useContext(zf);return e=>t.dark?e:""},FX=(t,e,n)=>{const{fontSizeIos:r,fontSizeMaterial:a,bold:i,dividers:o}=t;return{base:{common:A("flex items-center w-full px-4 relative z-10 overflow-hidden",o&&"hairline-b"),ios:A("h-14",e.textIos,e.bgIos,e.activeBgIos,r,"first:rounded-t-xl last:rounded-b-xl justify-center",i&&"font-semibold"),material:A("h-12",e.textMaterial,e.bgMaterial,e.activeBgMaterial,a,"justify-start",n("dark:touch-ripple-white"),i&&"font-medium")}}},BX=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),activeBgIos:A("active:bg-neutral-200",e("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function xI(){return xI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xI.apply(this,arguments)}const zX=$.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,bold:s,boldIos:l=!1,boldMaterial:u=!1,fontSizeIos:c="text-xl",fontSizeMaterial:d="text-base",href:p,touchRipple:f=!0,dividers:g=void 0,children:y,...v}=t,b=$.useRef(null);$.useImperativeHandle(e,()=>({el:b.current}));let x=n;typeof t.component>"u"&&(p||p==="")&&(x="a");const w={href:p,...v},S=yn({ios:i,material:o}),C=it({ios:i,material:o}),E=Nt();Oo(b,S==="material"&&f);const _=BX(a,E),N=C(FX({fontSizeIos:c,fontSizeMaterial:d,bold:typeof s>"u"?S==="ios"?l:u:s,dividers:typeof g>"u"?S==="ios":g,...t},_,E),r);return G.createElement(x,xI({ref:b,role:"button",tabIndex:"0",className:N.base},w),y)});zX.displayName="ActionsButton";const UX=(t,e)=>{const{fontSizeIos:n,fontSizeMaterial:r,dividers:a}=t;return{base:{common:A(`flex items-center w-full px-4 relative z-10 overflow-hidden ${e.activeBg}`,a&&"hairline-b"),ios:A("h-14",e.bgIos,e.textIos,n,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:A("h-12",e.bgMaterial,e.textMaterial,r,"font-medium","justify-start")}}},jX=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function wI(){return wI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wI.apply(this,arguments)}const VX=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,fontSizeIos:s="text-sm",fontSizeMaterial:l="text-sm",dividers:u=void 0,children:c,...d}=t,p=$.useRef(null);$.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=yn({ios:i,material:o}),v=it({ios:i,material:o}),b=Nt(),x=jX(a,b),w=v(UX({fontSizeIos:s,fontSizeMaterial:l,dividers:typeof u>"u"?y==="ios":u,...t},x),r);return G.createElement(f,wI({ref:p,className:w.base},g),c)});VX.displayName="ActionsLabel";const WX=(t,e)=>({base:{common:`${e.text} ${e.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),GX=function(t){return t===void 0&&(t={}),{bg:"bg-primary",text:"text-white",...t}};function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kI.apply(this,arguments)}const F6=$.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,small:i,ios:o,material:s,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:o,material:s}),g=GX(a),y=i?"sm":"md",v=f(WX(t,g),r);return G.createElement(d,kI({ref:c,className:v.base[y]},p),l)});F6.displayName="Badge";const HX=(t,e,n)=>{const{inset:r,nested:a,margin:i,padding:o,strong:s,outline:l}=t;return{base:{common:A("text-sm z-10",tr("relative",n),!r&&!a&&l&&"hairline-t hairline-b",r&&l&&"border",r&&"px-4",!r&&"pl-4-safe pr-4-safe",!a&&i,(s||l)&&o),ios:A(e.textIos,s&&e.strongBgIos,r&&l&&e.outlineIos),material:A(e.textMaterial,s&&e.strongBgMaterial,r&&l&&e.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},qX=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function SI(){return SI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SI.apply(this,arguments)}const Mo=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",padding:o="py-4",inset:s,insetIos:l,insetMaterial:u,strong:c,strongIos:d,strongMaterial:p,outline:f,outlineIos:g,outlineMaterial:y,nested:v,ios:b,material:x,children:w,...S}=t,C=$.useRef(null);$.useImperativeHandle(e,()=>({el:C.current}));const E=n,_={...S},N=yn({ios:b,material:x}),M=it({ios:b,material:x}),P=Nt(),L=qX(a,P),U=typeof c>"u"?N==="ios"?d:p:c,B=typeof f>"u"?N==="ios"?g:y:f,K=typeof s>"u"?N==="ios"?l:u:s,X=M(HX({...t,margin:i,padding:o,inset:K,strong:U,outline:B},L,r)),Z=A(X.base,K&&X.inset,r);return G.createElement(E,SI({ref:C,className:Z},_),w)});Mo.displayName="Block";const KX=(t,e)=>{const{inset:n}=t;return{base:{common:A("mb-8 flex items-center -mt-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},XX=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-75",e("dark:text-white dark:text-opacity-75")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function CI(){return CI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CI.apply(this,arguments)}const YX=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=$.useRef(null);$.useImperativeHandle(e,()=>({el:p.current}));const f=yn(),g=typeof s>"u"?f==="ios"?l:u:s,y=n,v={...d},b=it({ios:i,material:o}),x=Nt(),w=XX(a,x),S=b(KX({...t,inset:g},w),r);return G.createElement(y,CI({ref:p,className:S.base},v),c)});YX.displayName="BlockFooter";const QX=(t,e)=>{const{inset:n}=t;return{base:{common:A("mt-8 flex items-center -mb-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},ZX=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function II(){return II=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},II.apply(this,arguments)}const JX=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=$.useRef(null);$.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=yn(),v=typeof s>"u"?y==="ios"?l:u:s,b=it({ios:i,material:o}),x=Nt(),w=ZX(a,x),S=b(QX({...t,inset:v},w),r);return G.createElement(f,II({ref:p,className:S.base},g),c)});JX.displayName="BlockHeader";const eY=(t,e)=>{const{withBlock:n,medium:r,large:a}=t;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${n?"-mb-6":"mb-2"}`,ios:A(`font-semibold ${e.textIos}`,a&&"text-[1.5rem]",r&&"text-[1.125rem]",!r&&!a&&"text-[1rem]"),material:A(`font-medium ${e.textMaterial}`,a&&"text-[1.375rem]",r&&"text-[1rem]",!r&&!a&&"text-[0.875rem]")}}},tY=function(t,e){return t===void 0&&(t={}),{textIos:"",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}const nY=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,withBlock:i=!0,medium:o,large:s,ios:l,material:u,children:c,...d}=t,p=$.useRef(null);$.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=it({ios:l,material:u}),v=Nt(),b=tY(a,v),x=y(eY({...t,withBlock:i},b),r);return G.createElement(f,EI({ref:p,className:x.base},g),c)});nY.displayName="BlockTitle";const rY=t=>{const{fontSizeIos:e,fontSizeMaterial:n}=t;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:e,material:n}}};function TI(){return TI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TI.apply(this,arguments)}const aY=$.forwardRef((t,e)=>{const{component:n="div",className:r,fontSizeIos:a="text-[17px]",fontSizeMaterial:i="text-[14px]",ios:o,material:s,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:o,material:s})(rY({...t,fontSizeIos:a,fontSizeMaterial:i}),r);return G.createElement(d,TI({ref:c,className:f.base},p),l)});aY.displayName="Breadcrumbs";const iY=(t,e)=>{const{active:n}=t;return{base:{common:A("flex items-center overflow-hidden"),ios:A(e.textIos,e.bgIos,n?e.textActiveIos:e.textIos,n&&"font-semibold"),material:A("font-medium px-2 py-1 rounded-lg",e.bgMaterial,n?e.textActiveMaterial:e.textMaterial)}}},oY=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),textActiveIos:A("text-black",e("dark:text-white")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),...t}};function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NI.apply(this,arguments)}const sY=$.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,colors:o,active:s,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:a,material:i}),g=Nt(),y=oY(o,g),v=f(iY({...t},y),r);return G.createElement(d,NI({ref:c,className:v.base,role:"menuitem",tabIndex:"0"},p),l)});sY.displayName="BreadcrumbsItem";const lY=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_I.apply(this,arguments)}const B6=t=>G.createElement("svg",_I({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},t),G.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RI.apply(this,arguments)}const uY=$.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,children:o,...s}=t,l=$.useRef(null);$.useImperativeHandle(e,()=>({el:l.current}));const u=n,c={...s},d=it({ios:a,material:i})(lY({...t}),r);return G.createElement(u,RI({ref:l,className:d.base},c),G.createElement(B6,{className:d.icon}),o)});uY.displayName="BreadcrumbsSeparator";const cY=(t,e)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${e.bg}`,ios:A("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",e.bgIos),material:A("py-3 px-2 rounded-lg",e.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${e.dotBg}`,ios:e.dotBgIos,material:e.dotBgMaterial}}),dY=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-15",e("dark:bg-white dark:bg-opacity-15")),bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),dotBgIos:A("bg-black",e("dark:bg-white")),dotBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}const pY=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=$.useRef(null);$.useImperativeHandle(e,()=>({el:u.current}));const c=Nt(),d=dY(a,c),p=n,f={...l},g=it({ios:i,material:o})(cY({...t},d),r);return G.createElement(p,$I({ref:u,role:"button",tabIndex:"0",className:g.base},f),G.createElement("span",{className:g.dot}),G.createElement("span",{className:g.dot}),G.createElement("span",{className:g.dot}),s)});pY.displayName="BreadcrumbsCollapsed";const hY=(t,e,n,r)=>{const{inline:a,segmented:i,segmentedStrong:o,segmentedActive:s,disabled:l}=t;return{base:{common:A("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",a?"inline-flex":"w-full flex",tr("relative",n),l&&"pointer-events-none",o&&s&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:i&&!o?"first:rounded-s last:rounded-e":"rounded",material:i&&!o?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:i&&!o?"":"rounded-full"},style:{fill:{common:A(l&&A(e.disabledBg,e.disabledText)),ios:A(l?A(e.disabledBg,e.disabledText):`${e.fillTextIos} ${e.fillBgIos} ${e.fillActiveBgIos}`),material:A(l?A(e.disabledBg,e.disabledText):A(e.fillTextMaterial,e.fillBgMaterial,e.fillActiveBgMaterial,e.fillTouchRipple))},outline:{common:A(l?A(e.disabledText,e.disabledBorder):A("active:bg-opacity-15",e.touchRipple)),ios:A(!i&&"border-2",!l&&!i&&e.outlineBorderIos,!l&&A(e.textIos,e.activeBgIos)),material:A(!i&&"border",!l&&!i&&e.outlineBorderMaterial,!l&&A(e.textMaterial,e.activeBgMaterial))},clear:{common:A(l?e.disabledText:`active:bg-opacity-15 ${e.touchRipple}`),ios:!l&&A(e.textIos,e.activeBgIos),material:!l&&A(e.textMaterial,e.activeBgMaterial)},tonal:{common:l?A(e.disabledBg,e.disabledText):A(e.touchRipple),ios:!l&&A(e.tonalTextIos,e.tonalBgIos,e.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!l&&A(e.tonalTextMaterial,e.tonalBgMaterial,e.activeBgMaterial)},segmentedStrong:A("active:bg-black active:bg-opacity-10",r("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},fY=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),disabledBg:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),disabledBorder:A("border-black border-opacity-10",e("dark:border-white dark:border-opacity-10")),...t}};function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OI.apply(this,arguments)}const yr=$.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,href:l,outline:u,outlineIos:c,outlineMaterial:d,clear:p,clearIos:f,clearMaterial:g,tonal:y,tonalIos:v,tonalMaterial:b,rounded:x,roundedIos:w,roundedMaterial:S,small:C,smallIos:E,smallMaterial:_,large:N,largeIos:M,largeMaterial:P,raised:L,raisedIos:U,raisedMaterial:B,inline:K,segmented:X,segmentedStrong:Z,segmentedActive:H,touchRipple:F=!0,children:Y,...Q}=t,ne=$.useRef(null);$.useImperativeHandle(e,()=>({el:ne.current}));let se=n;typeof t.component>"u"&&(l||l==="")&&(se="a");const pe={href:l,...Q},de=yn({ios:i,material:o}),ie=it({ios:i,material:o}),xe=Nt();Oo(ne,de==="material"&&F);const q=(Fe=>{const Xe={};return Object.keys(Fe).forEach(Oe=>{Xe[Oe]=typeof Fe[Oe]>"u"?de==="ios"?t[`${Oe}Ios`]:t[`${Oe}Material`]:Fe[Oe]}),Xe})({outline:u,clear:p,tonal:y,rounded:x,small:C,large:N,raised:L}),oe=q.large?"large":q.small?"small":"medium";let he=q.outline?"outline":q.clear||X&&!H?"clear":q.tonal?"tonal":"fill";Z&&(he="segmentedStrong"),Z&&H&&(he="segmentedStrongActive");const Ie=fY(a,xe),Ee=ie(hY({...t,...q},Ie,r,xe)),_e=A(Ee.base[q.rounded?"rounded":"square"],Ee.style[he],Ee.size[oe],q.raised&&Ee.raised,r);return G.createElement(se,OI({ref:ne,className:_e,disabled:s,role:"button",tabIndex:"0"},pe),Y)});yr.displayName="Button";const mY=(t,e)=>{const{margin:n,headerDivider:r,footerDivider:a,contentWrapPadding:i}=t;return{base:{common:A(n,"overflow-hidden"),ios:A("rounded-lg",e.bgIos,e.textIos),material:A("rounded-2xl",e.bgMaterial,e.textMaterial),plain:"",raised:"shadow",outline:{common:A("border"),ios:e.outlineIos,material:e.outlineMaterial}},header:{common:A(r&&"border-b","p-4"),ios:A(r&&e.outlineIos,t.headerFontSizeIos),material:A(r&&e.outlineMaterial,t.headerFontSizeMaterial)},content:A(i,"text-sm"),footer:{common:A(r&&"border-t","text-sm p-4"),ios:A(e.footerTextIos,a&&e.outlineIos),material:A(e.footerTextMaterial,a&&e.outlineMaterial)}}},gY=function(t,e){return t===void 0&&(t={}),{textIos:A(""),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),bgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),bgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),footerTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),footerTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}const z6=$.forwardRef((t,e)=>{const{component:n="div",className:r,margin:a="m-4",colors:i,header:o,footer:s,ios:l,material:u,headerFontSizeIos:c="text-[17px]",headerFontSizeMaterial:d="text-[22px]",contentWrap:p=!0,contentWrapPadding:f="p-4",raised:g,raisedIos:y,raisedMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,headerDivider:S=!1,footerDivider:C=!1,children:E,..._}=t,N=$.useRef(null);$.useImperativeHandle(e,()=>({el:N.current}));const M=n,P={..._},L=yn(),U=it({ios:l,material:u}),B=Nt(),K=gY(i,B),X=typeof b>"u"?L==="ios"?x:w:b,Z=typeof g>"u"?L==="ios"?y:v:g,H=X?"outline":Z?"raised":"plain",F=U(mY({...t,margin:a,contentWrapPadding:f,headerDivider:S,footerDivider:C,headerFontSizeIos:c,headerFontSizeMaterial:d,outline:X,raised:Z},K),r);return G.createElement(M,MI({ref:N,className:F.base[H]},P),o&&G.createElement("div",{className:F.header},o),p?G.createElement("div",{className:F.content},E):E,s&&G.createElement("div",{className:F.footer},s))});z6.displayName="Card";const yY=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",tr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:A("flex items-center justify-center text-white",r("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:`${e.bgCheckedIos} ${e.borderCheckedIos}`,material:`${e.bgCheckedMaterial} ${e.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:A("bg-white w-3/4",r("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),bY=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(this,arguments)}const U6=t=>{const{ios:e,material:n,fill:r,...a}=t;return yn({ios:e,material:n})==="ios"?G.createElement("svg",_y({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},a),G.createElement("path",{fill:r||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):G.createElement("svg",_y({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},a),G.createElement("polygon",{fill:r,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}const vY=$.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,indeterminate:s,name:l,value:u,disabled:c,readOnly:d,onChange:p,ios:f,material:g,touchRipple:y=!0,children:v,...b}=t,x=$.useRef(null),w=$.useRef(null);$.useImperativeHandle(e,()=>({el:w.current,inputEl:x.current}));const S=n,C={...b},E=yn({ios:f,material:g}),_=it({ios:f,material:g}),N=Nt();Oo(w,E==="material"&&y);const M=bY(a,N),P=o||i&&!p||s?"checked":"notChecked",L=_(yY(t,M,r,N),r);return $.useEffect(()=>{x.current&&(x.current.indeterminate=!!s)},[s]),G.createElement(S,PI({ref:w,className:L.base},C),G.createElement("input",{ref:x,type:"checkbox",name:l,value:u,disabled:c,readOnly:d,checked:o,defaultChecked:i,onChange:p,className:L.input}),G.createElement("i",{className:L.iconWrap[P]},s?G.createElement("span",{className:L.indeterminateIcon}):G.createElement(U6,{ios:f,material:g,className:L.icon[P]})),v)});vY.displayName="Checkbox";const xY=(t,e)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:A(e.fillBg||e.fillBgIos,e.fillText||e.fillTextIos),material:A(e.fillBg||e.fillBgMaterial,e.fillText||e.fillTextMaterial)},outline:{common:"border",ios:A(e.outlineText||e.outlineTextIos,e.outlineBorder||e.outlineBorderIos),material:A(e.outlineText||e.outlineTextMaterial,e.outlineBorder||e.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),wY=function(t,e){return t===void 0&&(t={}),{fillTextIos:"text-current",fillTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),fillBgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),outlineTextIos:A("text-current"),outlineTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),outlineBorderIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function Ry(){return Ry=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ry.apply(this,arguments)}const Uf=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",Ry({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},n),G.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):G.createElement("svg",Ry({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AI.apply(this,arguments)}const kY=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,media:i,deleteButton:o,onDelete:s,ios:l,material:u,outline:c,children:d,...p}=t,f=$.useRef(null);$.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=it({ios:l,material:u}),b=yn({ios:l,material:u}),x=Nt(),w=c?"outline":"fill",S=wY(a,x),C=v(xY(t,S),r);return G.createElement(g,AI({ref:f,className:C.base[w]},y),i&&G.createElement("div",{className:C.media},i),d,o&&G.createElement("div",{className:C.deleteButton,role:"button",tabIndex:"0",onClick:s},G.createElement(Uf,{theme:b,className:"h-4 w-4"})))});kY.displayName="Chip";const SY=(t,e,n,r)=>{let{hasButtons:a}=r;const{titleFontSizeMaterial:i,titleFontSizeIos:o,translucent:s,sizeIos:l,sizeMaterial:u}=t;return{base:{common:A("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",tr("fixed",n)),ios:A("rounded-xl max-w-full",l,e.bgIos,s&&"translucent"),material:A("rounded-[1.75rem] p-6 max-w-[90%]",u,e.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:A("p-4 space-y-1 relative",a&&"hairline-b")},title:{common:A("w-full"),ios:A(e.titleIos,o,"font-semibold text-center"),material:A(e.titleMaterial,i)},content:{common:A("text-sm w-full"),ios:A(e.contentTextIos,"text-center"),material:A(e.contentTextMaterial)},buttons:{common:"flex items-center",ios:A("justify-center last-child-hairline-r-none"),material:A("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},CY=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DI.apply(this,arguments)}const IY=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,translucent:l=!0,sizeIos:u="w-[16.875rem]",sizeMaterial:c="w-[19.5rem]",titleFontSizeIos:d="text-[18px]",titleFontSizeMaterial:p="text-[24px]",title:f,content:g,buttons:y,ios:v,material:b,children:x,...w}=t,S=$.useRef(null);$.useImperativeHandle(e,()=>({el:S.current}));const C=i?"opened":"closed",E=n,_={...w},N=it({ios:v,material:b}),M=Nt(),P=CY(a,M),L=N(SY({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,translucent:l,sizeIos:u,sizeMaterial:c},P,r,{hasButtons:!!y}),r);return G.createElement(G.Fragment,null,o&&G.createElement("div",{className:L.backdrop[C],onClick:s}),G.createElement(E,DI({ref:S,className:L.base[C]},_),G.createElement("div",{className:L.contentWrap},f&&G.createElement("div",{className:L.title},f),(g||x)&&G.createElement("div",{className:L.content},g,x)),y&&G.createElement("div",{className:L.buttons},y)))});IY.displayName="Dialog";const EY=(t,e)=>{const{strong:n,disabled:r}=t;return{base:{ios:A("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",r?e.disabledTextIos:e.textIos,n&&"font-semibold",!r&&e.activeBgIos)}}},TY=function(t,e){return t===void 0&&(t={}),{activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),...t}};function $y(){return $y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$y.apply(this,arguments)}const NY=$.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,strong:l,strongIos:u,strongMaterial:c,children:d,...p}=t,f=$.useRef(null);$.useImperativeHandle(e,()=>({el:f.current}));const g={...p},y=yn({ios:i,material:o}),v=it({ios:i,material:o}),b=Nt(),x=TY(a,b),w=typeof l>"u"?y==="ios"?u:c:l,S=v(EY({...t,strong:w},x),r),C=n;return y==="ios"?G.createElement(C,$y({className:S.base,disabled:s,role:"button",tabIndex:"0"},g),d):G.createElement(yr,$y({component:n,inline:!0,rounded:!0,disabled:s,clear:!w,className:r},g),d)});NY.displayName="DialogButton";const _Y=(t,e)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${e.bgIos} ${e.activeBgIos} ${e.textIos}`,material:`duration-300 rounded-2xl shadow ${e.bgMaterial} ${e.activeBgMaterial} ${e.textMaterial} ${e.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),RY=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary-container",e("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:A("text-md-light-on-primary-container",e("dark:text-md-dark-on-primary-container")),touchRipple:A("touch-ripple-primary",e("dark:touch-ripple-white")),...t}};function LI(){return LI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LI.apply(this,arguments)}const $Y=$.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,href:i,text:o,textPosition:s="after",icon:l,ios:u,material:c,touchRipple:d=!0,children:p,...f}=t,g=$.useRef(null);$.useImperativeHandle(e,()=>({el:g.current}));const y=n,v={...f},b=yn({ios:u,material:c}),x=it({ios:u,material:c}),w=Nt();Oo(g,b==="material"&&d);const S=RY(a,w),C=x(_Y(t,S),r);return G.createElement(y,LI({className:o?C.base.withText:C.base.iconOnly,href:i,ref:g,role:"button",tabIndex:"0"},v),o&&s==="before"&&G.createElement("span",{className:C.text},o),l&&G.createElement("span",{className:C.icon},l),o&&s==="after"&&G.createElement("span",{className:C.text},o),p)});$Y.displayName="Fab";const OY=(t,e)=>({base:`${tr("relative",e)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FI.apply(this,arguments)}const _a=$.forwardRef((t,e)=>{const{component:n="i",className:r,ios:a,material:i,badge:o,badgeColors:s,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it(),g=yn(),y=f(OY(t,r),r);return G.createElement(d,FI({ref:c,className:y.base},p),g==="ios"?a:i,typeof o<"u"&&o!==null&&G.createElement(F6,{small:!0,className:y.badge,colors:s},o),l)});_a.displayName="Icon";const MY=(t,e,n)=>{let{textColor:r,needsTouchRipple:a}=e;const{iconOnly:i,tabbar:o}=t;return{base:{common:A(!o&&r,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",a&&`touch-ripple-primary ${tr("relative",n)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:a?"":"active:opacity-55"}},tabbar:{common:A(tr("relative",n),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3"}}},PY=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",...t}};function BI(){return BI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BI.apply(this,arguments)}const op=$.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,navbar:i,toolbar:o,iconOnly:s,linkProps:l={},tabbar:u,tabbarActive:c,touchRipple:d=void 0,ios:p,material:f,onClick:g,children:y,...v}=t,b=$.useRef(null);$.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...l,...v},S=yn({ios:p,material:f}),C=it({ios:p,material:f}),E=Nt(),_=S==="material"&&(d||(o||u||i)&&typeof d>"u");Oo(b,_);const N=PY(a,E),M=t.navbar?S==="material"?N.navbarTextMaterial:N.navbarTextIos:S==="material"?N.textMaterial:N.textIos,P=u&&!c?N.tabbarInactive:M,L=c?"active":"inactive",U=C(MY(t,{textColor:P,needsTouchRipple:_},r)),B=A(U.base[u?"default":"notTabbar"],o&&U.toolbar,i&&U.navbar,u&&U.tabbar[L],r);return G.createElement(x,BI({ref:b,className:B},w,{role:"link",tabIndex:"0",onClick:g}),y)});op.displayName="Link";const AY=(t,e,n)=>{const{nested:r,margin:a,inset:i,strong:o,outline:s}=t;return{base:{common:A(!r&&a,!i&&!r&&s&&"hairline-t hairline-b",i&&s&&"border",tr("relative",n),"z-10"),ios:A(o&&e.strongBgIos,i&&s&&e.outlineIos),material:A(o&&e.strongBgMaterial,i&&s&&e.outlineMaterial)},ul:{common:A(i&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},DY=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),...t}},j6=G.createContext(!1);function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}const sp=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",nested:o,menuList:s,dividers:l,dividersIos:u=!0,dividersMaterial:c=!1,inset:d,insetIos:p,insetMaterial:f,strong:g,strongIos:y,strongMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,ios:S,material:C,children:E,..._}=t,N=$.useRef(null);$.useImperativeHandle(e,()=>({el:N.current}));const M=n,P={..._},L=yn(),U=it({ios:S,material:C}),B=Nt(),K=typeof l>"u"?L==="ios"?u:c:l,X=typeof g>"u"?L==="ios"?y:v:g,Z=typeof b>"u"?L==="ios"?x:w:b,H=typeof d>"u"?L==="ios"?p:f:d,F=DY(a,B),Y=U(AY({...t,margin:i,inset:H,strong:X,outline:Z},F,r)),Q=A(Y.base,H&&Y.inset,s&&Y.menuList,r);return G.createElement(j6.Provider,{value:K},G.createElement(M,zI({ref:N,className:Q},P),G.createElement("ul",{className:Y.ul},E)))});sp.displayName="List";function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}const LY=$.forwardRef((t,e)=>{const{children:n,...r}=t,a=$.useRef(null);$.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return G.createElement("li",{ref:a},G.createElement(sp,UI({nested:!0},i),n))});LY.displayName="ListGroup";const FY=(t,e,n)=>{const{dividers:r}=t;return{base:"",button:{common:A(tr("relative",n),r&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${e.touchRipple} overflow-hidden select-none`),ios:A("h-11",e.textIos,e.activeBgIos,e.activeBgIos),material:A("h-12",e.textMaterial,e.activeBgMaterial)}}},BY=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",...t}},V6=()=>$.useContext(j6);function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}const zY=$.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,href:i,target:o,type:s,value:l,linkComponent:u="a",linkProps:c={},ios:d,material:p,touchRipple:f=!0,children:g,...y}=t,v=$.useRef(null),b=$.useRef(null),x=V6();$.useImperativeHandle(e,()=>({el:v.current}));const w=n,S={...y},C=yn({ios:d,material:p}),E=it({ios:d,material:p});Oo(b,C==="material"&&f);const _=Nt(),N=BY(a,_),M=E(FY({...t,dividers:x},N,r),r),P=!!i||i==="",L={href:!P||i===!0||i===!1?void 0:i||"",target:o,type:s,value:l,...c},U=P?u:"button";return G.createElement(w,Oy({ref:v,className:M.base},S),G.createElement(U,Oy({ref:b,className:M.button},L),g))});zY.displayName="ListButton";const UY=(t,e,n)=>{let{className:r,isMediaItem:a,theme:i,textColor:o,needsTouchRipple:s,isMenuListItemActive:l,autoStrongTitle:u}=n;const{menuListItem:c,dividers:d,mediaClassName:p="",mediaClass:f="",innerClassName:g="",innerClass:y="",contentClassName:v="",contentClass:b="",titleWrapClassName:x="",titleWrapClass:w="",titleFontSizeIos:S,titleFontSizeMaterial:C,strongTitle:E,contacts:_}=t;return{base:{common:c?`${o} py-1`:"",material:_&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:A(`flex items-center ${v||b}`),ios:A(!c&&A(e.primaryTextIos,"ps-4-safe"),c&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:A(!c&&A(e.primaryTextMaterial,a?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",_&&"ml-10"),c&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:A("duration-300 active:duration-0 cursor-pointer select-none",d&&i==="ios"&&"active:hairline-transparent",s&&A("relative overflow-hidden z-10",e.touchRipple),A(l?i==="ios"?e.menuListItemActiveBgIos:e.menuListItemActiveBgMaterial:c?i==="ios"?e.menuListItemBgIos:e.menuListItemBgMaterial:i==="ios"?e.activeBgIos:e.activeBgMaterial))},media:{common:`shrink-0 flex ${p||f}`,ios:"py-2 me-4",material:A("py-3",c?"me-3":"me-4")},inner:{common:A("w-full relative",!c&&d&&"hairline-b",g||y),ios:"py-2.5 pe-4-safe",material:A("py-3",a&&!c?"pe-2":"pe-4-safe")},titleWrap:{common:A(`flex justify-between items-center ${x||w}`),ios:A(!c&&S),material:A(!c&&C)},title:{common:"shrink",menuListItem:A("text-sm",E===!0||u?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:A("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:e.secondaryTextIos,material:A(e.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:A("text-sm line-clamp-2"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:e.secondaryTextIos,material:e.secondaryTextMaterial},footer:{common:A("text-xs mt-0.5"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},groupTitle:{common:A("pl-4-safe pr-4-safe py-1 flex items-center z-20",tr("relative",r)),ios:`h-8${d?" hairline-t":""} -mt-px ${S} ${e.secondaryTextIos} ${e.groupTitleBgIos} ${_&&A("font-semibold top-11-safe sticky",e.groupTitleContactsTextIos,e.groupTitleContactsBgIos)}`,material:`h-12 ${C} ${e.secondaryTextMaterial} ${e.groupTitleBgMaterial} ${_&&A("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",e.groupTitleContactsTextMaterial,e.groupTitleContactsBgMaterial)}`}}},jY=function(t,e){return t===void 0&&(t={}),{primaryTextIos:A("text-black",e("dark:text-white")),primaryTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),secondaryTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:A("bg-ios-light-surface-variant",e("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),menuListItemTextIos:A("text-black",e("dark:text-white")),menuListItemTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:A("text-primary",e("dark:text-white")),menuListItemActiveTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:A("bg-primary bg-opacity-15",e("dark:bg-primary")),menuListItemActiveBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),touchRipple:A("touch-ripple-black",e("dark:touch-ripple-white")),groupTitleContactsTextIos:A("text-opacity-90",e("dark:text-opacity-90")),groupTitleContactsTextMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),groupTitleContactsBgIos:A(e("dark:bg-[#323234]")),groupTitleContactsBgMaterial:A("bg-transparent",e("dark:bg-transparent")),...t}};function My(){return My=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},My.apply(this,arguments)}const lp=$.forwardRef((t,e)=>{const{component:n="li",colors:r,className:a,mediaClassName:i="",innerClassName:o="",innerChildren:s,contentClassName:l="",contentChildren:u,titleWrapClassName:c="",titleFontSizeIos:d="text-[17px]",titleFontSizeMaterial:p="text-[16px]",title:f,subtitle:g,text:y,after:v,media:b,header:x,footer:w,menuListItem:S,menuListItemActive:C,groupTitle:E,strongTitle:_="auto",label:N,chevron:M=void 0,chevronIos:P=!0,chevronMaterial:L=!0,chevronIcon:U,href:B,target:K,link:X,linkComponent:Z="a",linkProps:H={},dividers:F,contacts:Y,ios:Q,material:ne,touchRipple:se=!0,children:pe,...de}=t,ie=$.useRef(null),xe=$.useRef(null);$.useImperativeHandle(e,()=>({el:xe.current}));const q=n,oe={...de},he=typeof F>"u"?V6():F,Ie=yn({ios:Q,material:ne}),Ee=it({ios:Q,material:ne}),_e=Nt(),Fe=typeof M>"u"?Ie==="ios"?P:L:M,Xe=jY(r,_e),Oe=S&&C,lt=Xe[`${Oe?"menuListItemActiveText":S?"menuListItemText":"text"}${Ie==="ios"?"Ios":"Material"}`],Je=!!B||B===""||S||X,nt=!!N,et=Ie==="material"&&(nt||Je)&&se;Oo(ie,et);const on=B===!0||B===!1||typeof B>"u"?void 0:B||"",Ut=Je?Z:nt?"label":"div",Yt=Je?{href:on,target:K,...H}:{},Qt=f&&(g||y),$t=_==="auto"&&Qt,Ct=Ee(UY({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,dividers:he,strongTitle:_,mediaClassName:i,innerClassName:o,contentClassName:l,titleWrapClassName:c},Xe,{isMediaItem:Qt,theme:Ie,textColor:lt,needsTouchRipple:et,isMenuListItemActive:Oe,darkClasses:_e,autoStrongTitle:$t,className:a}),a),zn=Je||nt?Ct.itemContent.link:Ct.itemContent.default,Xn=S?Ct.title.menuListItem:_===!0||$t?Ct.title.strong:Ct.title.default;return E?G.createElement(q,{className:A(Ct.groupTitle,a)},f,pe):G.createElement(q,My({ref:xe,className:Ct.base},oe),G.createElement(Ut,My({ref:ie,className:zn},Yt),b&&G.createElement("div",{className:Ct.media},b),G.createElement("div",{className:Ct.inner},x&&G.createElement("div",{className:Ct.header},x),(f||v)&&G.createElement("div",{className:Ct.titleWrap},f&&G.createElement("div",{className:Xn},f),v&&G.createElement("div",{className:Ct.after},v),Je&&Fe&&!S&&(U||G.createElement(B6,{className:Ct.chevron}))),g&&G.createElement("div",{className:Ct.subtitle},g),y&&G.createElement("div",{className:Ct.text},y),w&&G.createElement("div",{className:Ct.footer},w),s),u),pe)});lp.displayName="ListItem";function jI(){return jI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jI.apply(this,arguments)}const VY=t=>G.createElement("svg",jI({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},t),G.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),WY=(t,e,n)=>{let{isFloatingTransformed:r,isFocused:a,darkClasses:i,getLabelColor:o,hasLabel:s}=n;const{error:l,type:u,outline:c,inputClassName:d="",inputClass:p=""}=t;return{base:{common:"",ios:A(c&&"my-4"),material:A("py-2")},itemContent:{common:"relative",ios:A(c&&"ml-4 mr-4 rounded-lg",!c&&e.bgIos),material:A("min-h-[56px] ml-4 mr-4",c?A("rounded"):A(e.bgMaterial,"rounded-t relative "))},inner:{common:"",material:A(c?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:A("duration-200 text-xs",o(),c&&"flex"),ios:A(c&&"-mt-4"),material:A(c&&"-mt-4"),stacked:"",floating:{common:A("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",r&&"scale-133"),ios:r?c?"translate-y-6":"translate-y-4":"",material:r?c?"translate-y-8":"translate-y-3":""}},labelText:{common:A(c&&"relative p-1 block -m-1"),ios:A(c&&A("-top-1",e.outlineLabelBgIos)),material:A(c&&A("-top-2",e.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:A((!s||c)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${o()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${d||p}`,ios:"h-10",material:"h-6",notFloating:{common:A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30")),material:A(u==="textarea"&&"py-1"),ios:A(u==="textarea"&&"py-2")},floating:r?"placeholder-transparent":A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:e.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:A("w-3.5 h-3.5 opacity-45 active:opacity-30",e.labelTextIos),material:A("w-6 h-6 active:opacity-55",e.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:c&&A(l?e.errorBorder:a?e.outlineBorderFocusIos:e.outlineBorderIos,"h-full border rounded-lg -z-10"),material:A(l?e.errorBorder:a?e.outlineBorderFocusMaterial:e.outlineBorderMaterial,c&&A("h-full border rounded -z-10",a&&"border-2"),!c&&A("border-b h-px origin-bottom",a&&"scale-y-[2]"))}}},GY=function(t,e){return t===void 0&&(t={}),{bgIos:"",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),outlineBorderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:A("border-md-light-on-surface",e("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),outlineLabelBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",...t}};function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VI.apply(this,arguments)}const HY=$.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,label:i,floatingLabel:o,outline:s,outlineIos:l,outlineMaterial:u,media:c,input:d,info:p,error:f,clearButton:g,dropdown:y,inputId:v,inputStyle:b,inputClassName:x="",name:w,value:S,defaultValue:C,type:E="text",inputMode:_,readOnly:N,required:M,disabled:P,placeholder:L,size:U,accept:B,autoComplete:K,autoCorrect:X,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Y,max:Q,min:ne,step:se,maxLength:pe,minLength:de,multiple:ie,pattern:xe,tabIndex:q,onInput:oe,onChange:he,onFocus:Ie,onBlur:Ee,onClear:_e,ios:Fe,material:Xe,children:Oe,...lt}=t,Je=$.useRef(null),nt=$.useRef(null);$.useImperativeHandle(e,()=>({el:nt.current,inputEl:Je.current}));const[et,on]=$.useState(!1),Ut=yn({ios:Fe,material:Xe}),Yt=it({ios:Fe,material:Xe}),Qt=Nt(),$t=GY(a,Qt),Ct=i&&o?"floating":"stacked",zn=Ct==="floating"?"floating":"notFloating",Xn=()=>{if(Je.current)return Je.current.value},za=i&&o&&!(()=>{const ma=Xn();return typeof S>"u"?ma||ma===0:S||S===0})()&&!et,_n=()=>f?$t.errorText:Ut==="material"?et?$t.labelTextFocusMaterial:$t.labelTextMaterial:Ut==="ios"?et?$t.labelTextFocusIos:$t.labelTextIos:"",Qa=ma=>{on(!0),Ie&&Ie(ma)},mo=ma=>{on(!1),Ee&&Ee(ma)},bi=typeof s>"u"?Ut==="ios"?l:u:s,hn=Yt(WY({...t,outline:bi},$t,{isFloatingTransformed:za,isFocused:et,darkClasses:Qt,getLabelColor:_n,inputClassName:x,hasLabel:!!i})),Za={...lt},vi=()=>{if(d)return d;const ma=E==="select"||E==="textarea"?E:"input",vl=ma==="input";return G.createElement(ma,{id:v,ref:Je,className:hn.input[zn],style:b,name:w,type:vl?E:void 0,placeholder:L,inputMode:_,size:U,accept:B,autoComplete:K,autoCorrect:X,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Y,disabled:P,max:Q,maxLength:pe,min:ne,minLength:de,step:se,multiple:ie,readOnly:N,required:M,pattern:xe,tabIndex:q,value:S,defaultValue:C,onInput:oe,onChange:he,onFocus:Qa,onBlur:mo},E==="select"?Oe:null)},xi=G.createElement(G.Fragment,null,f&&f!==!0&&G.createElement("div",{className:A(hn.errorInfo,hn.error)},f),p&&!f&&G.createElement("div",{className:A(hn.errorInfo,hn.info)},p)),Cs=G.createElement(G.Fragment,null,i&&G.createElement("div",{className:hn.label[Ct]},G.createElement("div",{className:hn.labelText},i)),G.createElement("div",{className:hn.inputWrap[Ct]},vi(),g&&G.createElement(Uf,{theme:Ut,onClick:_e,className:hn.clearButton}),y&&G.createElement(VY,{className:hn.dropdown})),xi);return G.createElement(lp,VI({ref:nt,component:n,media:c,className:hn.base,title:null,mediaClassName:hn.media,innerClassName:hn.inner[Ct],contentClassName:hn.itemContent,titleWrapClassName:hn.titleWrap,innerChildren:Cs,contentChildren:(bi||Ut==="material")&&G.createElement("span",{className:hn.border}),dividers:Ut==="material"||bi?!1:void 0},Za),E!=="select"?Oe:null)});HY.displayName="ListInput";function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WI.apply(this,arguments)}const qY=$.forwardRef((t,e)=>{const{children:n,...r}=t,a=$.useRef(null);$.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return G.createElement(sp,WI({ref:a,menuList:!0},i),n)});qY.displayName="MenuList";function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GI.apply(this,arguments)}const KY=$.forwardRef((t,e)=>{const{active:n,href:r,children:a,...i}=t,o=$.useRef(null);$.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return G.createElement(lp,GI({ref:o,menuListItem:!0,menuListItemActive:n,href:r||!1},s),a)});KY.displayName="MenuListItem";const XY=(t,e)=>{const{type:n}=t;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:A("self-end",e.messageSent)},messageReceived:{common:e.messageReceived},messageName:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageHeader:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageFooter:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageAvatar:{common:A("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...n==="sent"&&{ios:A("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleSentIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",e.bubbleSentMd)},...n==="received"&&{ios:A("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleReceivedIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",e.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},YY=function(t,e){return t===void 0&&(t={}),{messageSent:"text-white",messageReceived:"text-inherit",messageNameIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),messageNameMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),bubbleSentIos:A("bg-primary"),bubbleSentMd:A("bg-md-light-primary",e("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:A("bg-[#e5e5ea]",e("dark:bg-[#252525]")),bubbleReceivedMd:A(e("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),...t}};function HI(){return HI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HI.apply(this,arguments)}const QY=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,text:o,name:s,type:l="sent",header:u,footer:c,textHeader:d,textFooter:p,avatar:f,ios:g,material:y,children:v,...b}=t,x=$.useRef(null);$.useImperativeHandle(e,()=>({el:x.current}));const w=it({ios:g,material:y}),S=Nt(),C=YY(a,S),E=w(XY({...t},C)),_=n,N={...b},M=A(r,E.message,{[E.messageSent]:l==="sent",[E.messageReceived]:l==="received"});return G.createElement(_,HI({id:i,ref:x,className:M},N),f&&G.createElement("div",{className:E.messageAvatar},f),G.createElement("div",{className:E.messageContent},s&&G.createElement("div",{className:E.messageName},s),u&&G.createElement("div",{className:E.messageHeader},u),G.createElement("div",{className:E.messageBubble},d&&G.createElement("div",{className:E.messageTextHeader},d),o&&G.createElement("div",{className:E.messageText},o),p&&G.createElement("div",{className:E.messageTextFooter},p)),c&&G.createElement("div",{className:E.messageFooter},c)))});QY.displayName="Message";const ZY=(t,e,n)=>{let{isFocused:r}=n;const{rightClassName:a="",rightClass:i="",leftClassName:o="",leftClass:s=""}=t;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:e.bgMessage},left:{common:A("mt-1 -ms-2",o||s),ios:A("px-2",e.toolbarIconIos),material:A("",e.toolbarIconMd)},right:{common:A("mt-1 -me-2",a||i),ios:A("px-2",e.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:A("block w-full focus:outline-none resize-none",r&&"outline-offset-0"),ios:A("border h-8 rounded-3xl px-4 leading-4 py-1.5",e.inputBgIos,e.borderIos,e.placeholderIos),material:A("rounded-3xl h-12 px-4 py-4 leading-4 ",e.inputBgMd,e.placeholderMd)}}},JY=function(t,e){return t===void 0&&(t={}),{toolbarIconIos:A("fill-primary",e("dark:fill-md-dark-primary")),toolbarIconMd:A("fill-black"),inputBgIos:A("bg-transparent"),borderIos:A("border-[#c8c8cd]",e("dark:border-white dark:border-opacity-30")),inputBgMd:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-variant")),placeholderIos:A(e("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}},eQ=(t,e,n)=>{const{bgClassName:r="",bgClass:a="",outline:i,translucent:o,innerClassName:s="",innerClass:l="",tabbar:u,tabbarIcons:c,top:d}=t;return{base:{common:A("w-full z-20",tr("relative",n),!d&&"pb-safe")},bg:{common:A("absolute w-full h-full left-0 top-0",i&&(d?"hairline-b":"hairline-t"),r||a),ios:A(e.bgIos,o&&"translucent"),material:A(`${e.bgMaterial}`)},inner:{common:A("flex relative justify-between items-center w-full overflow-hidden",s||l),ios:A("pl-2-safe pr-2-safe",c?"h-12.5":"h-11"),material:A(u?"":"pl-2-safe pr-2-safe",c?"h-20":"h-14")},highlight:{common:A(d?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:e.tabbarHighlightBgIos,material:e.tabbarHighlightBgMaterial}}},tQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function qI(){return qI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qI.apply(this,arguments)}const KI=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,bgClassName:o="",innerClassName:s="",outline:l,tabbar:u,tabbarIcons:c,tabbarLabels:d,top:p,ios:f,material:g,children:y,...v}=t,b=$.useRef(null),x=$.useRef(null);$.useImperativeHandle(e,()=>({el:x.current}));const w=n,[S,C]=$.useState({transform:"",width:""}),E=yn({ios:f,material:g}),_=it({ios:f,material:g}),N=Nt(),M={...v},P=tQ(a,N),L=_(eQ({...t,outline:typeof l>"u"?E==="ios":l,translucent:i,bgClassName:o,innerClassName:s},P,r),r),U=E==="material"&&u&&!c;return $.useEffect(()=>{if(U&&b.current){const B=b.current.previousElementSibling,K=1/B.children.length*100,X=[...B.children].indexOf(B.querySelector(".k-tabbar-link-active"));C({...S,width:`${K}%`,transform:`translateX(${X*100}%)`})}},[y]),G.createElement(w,qI({ref:x,className:L.base},M),G.createElement("div",{className:L.bg}),G.createElement("div",{className:L.inner},y),U&&G.createElement("span",{className:L.highlight,style:S,ref:b}))});KI.displayName="Toolbar";function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XI.apply(this,arguments)}const nQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,style:o,name:s,placeholder:l="Message",value:u,outline:c=!1,leftClassName:d="",rightClassName:p="",textareaId:f,disabled:g,size:y,left:v,right:b,ios:x,material:w,onInput:S,onChange:C,onFocus:E,children:_,...N}=t,M=$.useRef(null),P=$.useRef(null);$.useImperativeHandle(e,()=>({el:M.current,areaElRef:P.current}));const[L,U]=$.useState(!1),B=it({ios:x,material:w}),K=Nt(),X=JY(a,K),Z=Q=>{U(!0),E&&E(Q)},H=B(ZY({...t},X,{isFocused:L})),F=n,Y={...N};return G.createElement(F,XI({ref:M,id:i,style:o,className:H.base},Y),G.createElement(KI,{colors:X,outline:c},v&&G.createElement("div",{className:H.left},v),G.createElement("div",{className:H.messagebarArea},G.createElement("textarea",{id:f,ref:P,type:"textarea",className:H.messagebarInput,placeholder:l,name:s,size:y,disabled:g,onInput:S,onChange:C,onFocus:Z,value:u})),b&&G.createElement("div",{className:H.right},b)))});nQ.displayName="Messagebar";const rQ=()=>({base:{common:A("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YI.apply(this,arguments)}const aQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,ios:o,material:s,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:o,material:s})(rQ({...t})),p=n,f={...u};return G.createElement(p,YI({id:i,className:d.base,ref:c},f),l)});aQ.displayName="Messages";const iQ=(t,e)=>({base:{common:A("text-center text-xs leading-none"),ios:A("w-full mt-2.5",e.titleIos),material:A("mt-4",e.titleMd)}}),oQ=function(t,e){return t===void 0&&(t={}),{titleIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),titleMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QI.apply(this,arguments)}const sQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,id:s,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:i,material:o}),p=Nt(),f=oQ(a,p),g=d(iQ({...t},f)),y=n,v={...u};return G.createElement(y,QI({id:s,className:g.base,ref:c},v),l)});sQ.displayName="MessagesTitle";const lQ=(t,e,n)=>{const{outline:r,translucent:a,large:i,medium:o,transparent:s,left:l,right:u,fontSizeIos:c,fontSizeMaterial:d,titleFontSizeIos:p,titleFontSizeMaterial:f,titleLargeFontSizeIos:g,titleLargeFontSizeMaterial:y,titleMediumFontSizeIos:v,titleMediumFontSizeMaterial:b,bgClassName:x="",bgClass:w="",subnavbarClassName:S="",subnavbarClass:C="",innerClassName:E="",innerClass:_="",leftClassName:N="",leftClass:M="",titleClassName:P="",titleClass:L="",subtitleClassName:U="",subtitleClass:B="",rightClassName:K="",rightClass:X="",centerTitle:Z}=t;return{base:{common:A("w-full z-20 top-0 pt-safe",(i||o)&&"pointer-events-none",tr("sticky",n)),ios:A(c,e.textIos),material:A(d,e.textMaterial)},bg:{common:A("absolute w-full h-full left-0 top-0",r&&"hairline-b",x||w),ios:A(e.bgIos,a&&"translucent"),material:`${e.bgMaterial}`},subnavbar:{common:A("relative flex items-center",S||C,(i||o)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:A("flex relative items-center w-full overflow-hidden",E||_,(i||o)&&"pointer-events-auto z-10"),ios:A("pl-2-safe pr-2-safe h-11",!l&&u?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:A("flex items-center px-4 relative",(i||o)&&"pointer-events-auto"),ios:A(o&&A(v,"h-11 font-semibold"),i&&A(g,"h-13 font-bold")),material:A(o&&A(b,"h-12 pb-4"),i&&A(y,"h-[5.5rem]"))},left:{common:A("flex justify-center items-center h-full",N||M),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:A("whitespace-nowrap leading-tight",P||L,(i||o||s)&&"opacity-0",Z?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:A(`${p} font-semibold`,!Z&&"first:mx-2"),material:A(`${f} font-normal`,!Z&&"first:mx-4")},subtitle:{common:A("font-normal leading-none",U||B),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:A("flex justify-center items-center h-full",K||X),ios:A("transform transform-gpu",Z?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},uQ=(t,e)=>({bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t});function ZI(){return ZI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZI.apply(this,arguments)}const Py=$.forwardRef((t,e)=>{const{component:n="div",className:r,bgClassName:a="",innerClassName:i="",leftClassName:o="",titleClassName:s="",subtitleClassName:l="",rightClassName:u="",subnavbarClassName:c="",centerTitle:d,colors:p,translucent:f=!0,outline:g,medium:y,large:v,transparent:b,fontSizeIos:x="text-[17px]",fontSizeMaterial:w="text-[16px]",titleFontSizeIos:S="text-[17px]",titleFontSizeMaterial:C="text-[22px]",titleMediumFontSizeIos:E="text-[24px]",titleMediumFontSizeMaterial:_="text-[24px]",titleLargeFontSizeIos:N="text-[34px]",titleLargeFontSizeMaterial:M="text-[28px]",scrollEl:P,left:L,title:U,subtitle:B,right:K,subnavbar:X,ios:Z,material:H,children:F,...Y}=t,Q=$.useRef(null),ne=$.useRef(0),se=$.useRef(null),pe=$.useRef(null),de=$.useRef(null),ie=$.useRef(null),xe=$.useRef(null),q=$.useRef(null);$.useImperativeHandle(e,()=>({el:Q.current}));const oe=n,he=yn({ios:Z,material:H}),Ie=it({ios:Z,material:H}),Ee=Nt(),_e={...Y},Fe=uQ(p,Ee),Xe=et=>{const{scrollTop:on}=et.target;if(!b&&!v&&!y){q.current&&(ie.current&&(ie.current.style.opacity=""),se.current&&(se.current.style.opacity=""));return}const Ut=ne.current,Yt=Math.max(Math.min(on/Ut,1),0);se.current.style.opacity=b?-.5+Yt*1.5:"",(y||v)&&(se.current.style.transform=`translateY(-${Yt*Ut}px)`),de.current&&(de.current.style.transform=`translateY(-${Yt*Ut}px)`,de.current.style.opacity=1-Yt*2),ie.current&&(ie.current.style.opacity=-.5+Yt*1.5),(y||v)&&xe.current&&(xe.current.style.transform=`translateY(-${Yt*Ut}px)`)},Oe=()=>typeof P>"u"?Q.current&&Q.current.parentNode:P.current||P,lt=()=>{if(!v&&!y&&!b){q.current&&(Xe({target:{scrollTop:0}}),q.current=!1);return}q.current=!0,de.current?ne.current=de.current.offsetHeight:ne.current=pe.current.offsetHeight;const et=Oe();et?(et.addEventListener("scroll",Xe),Xe({target:et})):Xe({target:{scrollTop:0}})},Je=()=>{const et=Oe();et&&et.removeEventListener("scroll",Xe)};$.useEffect(()=>(lt(),Je));const nt=Ie(lQ({...t,centerTitle:typeof d>"u"?he==="ios":d,translucent:f,outline:typeof g>"u"?he==="ios":g,fontSizeIos:x,fontSizeMaterial:w,titleFontSizeIos:S,titleFontSizeMaterial:C,titleMediumFontSizeIos:E,titleMediumFontSizeMaterial:_,titleLargeFontSizeIos:N,titleLargeFontSizeMaterial:M,bgClassName:a,innerClassName:i,leftClassName:o,titleClassName:s,subtitleClassName:l,rightClassName:u,subnavbarClassName:c},Fe,r),r);return G.createElement(oe,ZI({ref:Q,className:nt.base},_e),G.createElement("div",{className:nt.bg,ref:se}),G.createElement("div",{className:nt.inner,ref:pe},L&&G.createElement("div",{className:nt.left},L),(U||B)&&G.createElement("div",{className:nt.title,ref:ie},U,B&&G.createElement("div",{className:nt.subtitle},B)),K&&G.createElement("div",{className:nt.right},K),F),(v||y)&&G.createElement("div",{className:nt.titleContainer,ref:de},U),X&&G.createElement("div",{className:nt.subnavbar,ref:xe},X))});Py.displayName="Navbar";function Ay(){return Ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ay.apply(this,arguments)}const W6=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",Ay({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},n),G.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):G.createElement("svg",Ay({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},n),G.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},cQ=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function JI(){return JI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JI.apply(this,arguments)}const dQ=$.forwardRef((t,e)=>{const{component:n="a",className:r,text:a="Back",showText:i="auto",ios:o,material:s,onClick:l,children:u,...c}=t,d=$.useRef(null);$.useImperativeHandle(e,()=>({el:d.current}));const p={...c},f=yn({ios:o,material:s}),g=it({ios:o,material:s}),y=i==="auto"&&f==="ios"||i===!0,v=g(cQ(),r);return G.createElement(op,JI({ref:d,component:n,className:v.base,navbar:!0},p,{onClick:l}),G.createElement("span",{className:v.icon},G.createElement(W6,{theme:f})),y&&G.createElement("span",null,a),u)});dQ.displayName="NavbarBackLink";const pQ=(t,e,n)=>{const{opened:r,translucent:a}=t;return{base:{common:A(tr("absolute",n),"z-50 transform transition-transform-opacity box-border duration-500",!r&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:A("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",e.bgIos,a&&"translucent"),material:A("rounded-2xl py-5 px-4 start-4 end-4 top-4",e.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:A("mt-2")},header:{common:A("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:A("me-2"),material:"me-4"},contentTitle:{material:A("flex flex-row items-center")},title:{ios:A("tracking-wide text-[13px] uppercase",e.titleIos),material:A("font-medium")},titleRightText:{ios:A("me-1 ms-auto text-[13px]",e.titleRightIos),material:A("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",e.titleRightMd)},button:{ios:A("me-1 ms-auto cursor-pointer"),material:A("ms-auto cursor-pointer")},deleteIcon:{ios:A("w-5 h-5",e.deleteIconIos),material:A("w-6 h-6",e.deleteIconMd)},subtitle:{ios:A("text-[15px] font-semibold",e.subtitleIos),material:A("text-sm")},text:{ios:A("text-[15px]"),material:A("text-sm",e.textMaterial)}}},hQ=(t,e)=>({bgIos:A("bg-white",e("dark:bg-[#1e1e1e]")),bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),titleIos:A("text-black",e("dark:text-white")),titleRightIos:A("text-opacity-45 text-black",e("dark:text-white dark:text-opacity-45")),titleRightMd:A("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:A("text-black ",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant ")),deleteIconIos:A("fill-stone-400 active:fill-stone-200",e("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t});function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dy.apply(this,arguments)}const fQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,button:i,icon:o,title:s,titleRightText:l,subtitle:u,text:c,translucent:d=!0,opened:p,onClose:f,ios:g,material:y,children:v,...b}=t,x=$.useRef(null);$.useImperativeHandle(e,()=>({el:x.current}));const w=n,S={...b},C=yn({ios:g,material:y}),E=it({ios:g,material:y}),_=Nt(),N=hQ(a,_),M=E(pQ({...t,translucent:d},N,r),r);return C==="ios"?G.createElement(w,Dy({ref:x,className:M.base},S),G.createElement("div",{className:M.header},o&&G.createElement("div",{className:M.icon},o),s&&G.createElement("div",{className:M.title},s),l&&G.createElement("div",{className:M.titleRightText},l),i&&G.createElement("div",{className:M.button,role:"button",tabIndex:"0",onClick:f},G.createElement(Uf,{theme:C,className:M.deleteIcon}))),G.createElement("div",{className:M.content},u&&G.createElement("div",{className:M.subtitle},u),c&&G.createElement("div",{className:M.text},c),v)):G.createElement(w,Dy({ref:x,className:M.base},S),G.createElement("div",{className:M.header},o&&G.createElement("div",{className:M.icon},o),G.createElement("div",{className:M.contentWrapper},G.createElement("div",{className:M.contentTitle},s&&G.createElement("div",{className:M.title},s),l&&G.createElement("div",{className:M.titleRightText},l)),G.createElement("div",{className:M.content},u&&G.createElement("div",{className:M.subtitle},u),c&&G.createElement("div",{className:M.text},c),v)),i&&G.createElement("div",{className:M.button,role:"button",tabIndex:"0",onClick:f},G.createElement(Uf,{theme:C,className:M.deleteIcon}))))});fQ.displayName="Notification";const mQ=(t,e,n)=>({base:{common:A("h-full w-full left-0 top-0 overflow-auto",tr("absolute",n)),ios:e.bgIos,material:e.bgMaterial}}),gQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface",e("dark:bg-ios-dark-surface")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function eE(){return eE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eE.apply(this,arguments)}const Ly=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=$.useRef(null);$.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=it({ios:i,material:o}),f=Nt(),g=gQ(a,f),y=p(mQ(t,g,r),r);return G.createElement(c,eE({ref:u,className:y.base},d),s)});Ly.displayName="Page";const yQ=(t,e,n)=>{const{size:r,floating:a}=t;return{base:{common:A("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",a?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",e.bg,tr("fixed",n),r),ios:"",material:"ease-material-in"},left:{common:A("no-safe-areas-right",a?"right-full -mr-2 rounded-2xl":"right-full"),material:A(!a&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:A("no-safe-areas-left",a?"left-full -ml-2 rounded-2xl":"left-full"),material:A(!a&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},bQ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tE.apply(this,arguments)}const G6=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-72 h-screen",side:o="left",opened:s,backdrop:l=!0,floating:u=!1,onBackdropClick:c,ios:d,material:p,children:f,...g}=t,y=$.useRef(null);$.useImperativeHandle(e,()=>({el:y.current}));const v=s?"opened":"closed",b=n,x={...g},w=it({ios:d,material:p}),S=Nt(),C=bQ(a,S),E=w(yQ({...t,size:i,floating:u},C,r),r),_=A(E.base,E[o][v]);return G.createElement(G.Fragment,null,l&&G.createElement("div",{className:E.backdrop[v],onClick:c}),G.createElement(b,tE({ref:y,className:_},x),f))});G6.displayName="Panel";const vQ=t=>{let{popoverEl:e,targetEl:n,angleEl:r,needsAngle:a,targetX:i,targetY:o,targetWidth:s=0,targetHeight:l=0,theme:u}=t;n.current?n=n.current:n.value?n=n.value:n.el?n=n.el:n.$el&&(n=n.$el),typeof n=="string"&&(n=document.querySelector(n));let c=document.body.offsetWidth,d=document.body.offsetHeight;c===0&&(c=window.innerWidth),d===0&&(d=window.innerHeight);const[p,f]=[e.offsetWidth,e.offsetHeight];let g=0,y,v,b="";a&&(g=r.offsetWidth/2);let x,w;const S=window.getComputedStyle(n);let C=parseInt(S.getPropertyValue("--k-safe-area-top"),10)||0,E=parseInt(S.getPropertyValue("--k-safe-area-left"),10)||0,_=parseInt(S.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(C)&&(C=0),Number.isNaN(E)&&(E=0),Number.isNaN(_)&&(_=0),n){s=n.offsetWidth,l=n.offsetHeight;const X=n.getBoundingClientRect();x=X.left,w=X.top}else typeof i<"u"&&o!=="undefined"&&(x=i,w=o);let[N,M,P]=[0,0,0];const L=u==="ios"?13:23;let U="top";f+g<w-C?M=w-f-g:f+g<d-w-l?(U="bottom",M=w+l+g):(U="middle",M=l/2+w-f/2,P=M,M=Math.max(5,Math.min(M,d-f-5)),P-=M),U==="top"||U==="bottom"?(N=s/2+x-p/2,P=N,N=Math.max(5,Math.min(N,c-p-5)),E&&(N=Math.max(N,E)),_&&N+p>c-5-_&&(N=c-5-_-p),U==="top"&&(b="bottom"),U==="bottom"&&(b="top"),P-=N,y=p/2-g+P,y=Math.max(Math.min(y,p-g*2-L),L)):U==="middle"&&(N=x-p-g,b="right",(N<5||N+p+_>c||N<E)&&(N<5&&(N=x+s+g),N+p+_>c&&(N=c-p-5-_),N<E&&(N=E),b="left"),v=f/2-g+P,v=Math.max(Math.min(v,f-g*2-L),L));const B=U,K=N<x?"left":"right";return{set:!0,angleTop:typeof v>"u"?void 0:`${v}px`,angleLeft:typeof y>"u"?void 0:`${y}px`,anglePosition:b,popoverTop:`${M}px`,popoverLeft:`${N}px`,popoverPosition:`${B}-${K}`}},xQ=(t,e,n)=>{const{size:r,translucent:a,angleClassName:i,angleClass:o}=t;return{base:{common:A("transition-transform-opacity z-40 no-safe-areas",tr("fixed",n),r),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:A("overflow-hidden relative"),ios:A("rounded-xl",a&&"translucent",e.bgIos),material:A("rounded-[1.75rem]",e.bgMaterial)},angleWrap:{common:A(i||o||"","pointer-events-none"),ios:A("absolute w-6.5 h-6.5 z-50 overflow-hidden",a&&"opacity-80"),material:A("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:A("absolute rounded w-full h-full transform rotate-45"),ios:e.bgIos,material:e.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},wQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-3",e("dark:bg-ios-dark-surface-3")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),...t}};function nE(){return nE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nE.apply(this,arguments)}const kQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,angle:a=!0,angleClassName:i="",colors:o,size:s="w-64",opened:l,backdrop:u=!0,onBackdropClick:c,target:d,targetX:p,targetY:f,targetWidth:g,targetHeight:y,translucent:v=!0,ios:b,material:x,children:w,style:S={},...C}=t,E=$.useRef(null),_=$.useRef(null),[N,M]=$.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});$.useImperativeHandle(e,()=>({el:E.current}));const P=l?"opened":"closed",L=n,U={...C},B=yn({ios:b,material:x}),K=it({ios:b,material:x}),X=Nt(),Z=wQ(o,X),H=K(xQ({...t,size:s,angleClassName:i,translucent:v},Z,r),r),F=()=>{!d||!E.current||!l||M(vQ({popoverEl:E.current,targetEl:d,angleEl:_.current,needsAngle:a,targetX:p,targetY:f,targetHeight:y,targetWidth:g,theme:B}))},Y=()=>{typeof window>"u"||window.addEventListener("resize",F)},Q=()=>{typeof window>"u"||window.removeEventListener("resize",F)};$.useEffect(()=>(Y(),()=>Q())),$.useEffect(()=>{F()},[l]);const ne=N.set?{...S||{},left:N.popoverLeft,top:N.popoverTop}:S,se=N.set?{left:N.angleLeft,top:N.angleTop}:void 0,pe={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},de=A(H.base[P],B==="material"&&pe[N.popoverPosition]);return G.createElement(G.Fragment,null,u&&G.createElement("div",{className:H.backdrop[P],onClick:c}),G.createElement(L,nE({ref:E,className:de,style:ne},U),a&&G.createElement("div",{ref:_,style:se,className:H.angleWrap[N.anglePosition]},G.createElement("div",{className:H.angleArrow[N.anglePosition]})),G.createElement("div",{className:H.inner},w)))});kQ.displayName="Popover";const SQ=(t,e,n)=>{const{size:r}=t;return{base:{common:A("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",e.bg,tr("fixed",n),r),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:A("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},CQ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rE.apply(this,arguments)}const H6=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-screen h-screen md:w-160 md:h-160",opened:o,backdrop:s=!0,onBackdropClick:l,ios:u,material:c,children:d,...p}=t,f=$.useRef(null);$.useImperativeHandle(e,()=>({el:f.current}));const g=o?"opened":"closed",y=n,v={...p},b=it({ios:u,material:c}),x=Nt(),w=CQ(a,x),S=b(SQ({...t,size:i},w,r),r);return G.createElement(G.Fragment,null,s&&G.createElement("div",{className:S.backdrop[g],onClick:l}),G.createElement(y,rE({ref:f,className:S.base[g]},v),d))});H6.displayName="Popup";function aE(){return aE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aE.apply(this,arguments)}const IQ=t=>G.createElement("svg",aE({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},t),G.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),G.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),G.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),G.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),G.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),G.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),G.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),G.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function iE(){return iE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iE.apply(this,arguments)}const EQ=t=>G.createElement("svg",iE({viewBox:"0 0 36 36"},t,{fill:"none",stroke:"currentcolor"}),G.createElement("circle",{cx:"18",cy:"18",r:"16"})),TQ=(t,e,n)=>{const{size:r}=t;return{base:{common:A(n==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${r}`),ios:e.iconIos,material:`stroke-4 ${e.iconMaterial}`},inner:{common:"block w-full h-full"}}},NQ=function(t,e){return t===void 0&&(t={}),{iconIos:"text-primary",iconMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function oE(){return oE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oE.apply(this,arguments)}const _Q=$.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,size:i="w-8 h-8",ios:o,material:s,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=yn({ios:o,material:s}),g=it({ios:o,material:s}),y=Nt(),v=NQ(a,y),b=f==="ios"?IQ:EQ,x=g(TQ({...t,size:i},v,f),r);return G.createElement(d,oE({ref:c,className:x.base},p),G.createElement("span",{className:x.inner},G.createElement(b,{className:"w-full h-full"})),l)});_Q.displayName="Preloader";const RQ=t=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:t.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:t.bgIos,material:t.bgMaterial}}),$Q=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function sE(){return sE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sE.apply(this,arguments)}const OQ=$.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,ios:i,material:o,progress:s=0,children:l,...u}=t,c=$.useRef(null);$.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:i,material:o}),g=Nt(),y=$Q(a,g),v=f(RQ(y),r);return G.createElement(d,sE({ref:c,className:v.base},p),G.createElement("span",{className:v.inner,style:{transform:`translateX(-${100-s/1*100}%)`}}),l)});OQ.displayName="Progressbar";const MQ=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",tr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:e.borderCheckedIos,material:e.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${e.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),PQ=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function lE(){return lE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lE.apply(this,arguments)}const AQ=$.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,ios:p,material:f,touchRipple:g=!0,children:y,...v}=t,b=$.useRef(null);$.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...v},S=yn({ios:p,material:f}),C=it({ios:p,material:f}),E=Nt();Oo(b,S==="material"&&g);const _=PQ(a,E),N=o||i&&!d?"checked":"notChecked",M=C(MQ(t,_,r,E),r);return G.createElement(x,lE({ref:b,className:M.base},w),G.createElement("input",{type:"radio",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:M.input}),G.createElement("i",{className:M.iconWrap[N]},S==="ios"?G.createElement(U6,{className:M.icon[N]}):G.createElement("span",{className:M.icon[N]})),y)});AQ.displayName="Radio";const DQ=(t,e,n)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:A("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",n("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${e.valueBgIos}`,material:`h-0.5 ${e.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${e.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${e.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),LQ=function(t,e){return t===void 0&&(t={}),{valueBgIos:"bg-primary",valueBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:A("range-thumb:bg-md-light-primary",e("dark:range-thumb:bg-md-dark-primary")),...t}};function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(this,arguments)}const Fy=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,inputId:l,name:u,value:c=void 0,defaultValue:d,readOnly:p,disabled:f,step:g=1,min:y=0,max:v=100,onInput:b,onChange:x,onFocus:w,onBlur:S,...C}=t,E=$.useRef(null);$.useImperativeHandle(e,()=>({el:E.current}));const _=n,N={...C},M=it({ios:i,material:o}),P=Nt(),L=LQ(a,P),U=M(DQ(t,L,P),r),B=((c||0)-y)/(v-y)*100;return G.createElement(_,uE({ref:E,className:U.base},N),G.createElement("span",{className:U.trackBg}),G.createElement("span",{className:U.trackValue,style:{width:`${B}%`}}),G.createElement("input",{className:A(U.input,U.inputThumb,U.inputTrack),type:"range",id:l,name:u,min:y,max:v,step:g,value:c,defaultValue:d,readOnly:p,disabled:f,onInput:b,onChange:x,onFocus:w,onBlur:S}))});Fy.displayName="Range";const FQ=(t,e,n)=>{let{isEnabled:r,darkClasses:a}=n;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:A("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",a("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),e.placeholderIos,e.inputBgIos),material:A("h-12 ps-12 pe-4 rounded-full",e.placeholderMaterial,e.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:A("w-4 h-4 opacity-45"),material:A("w-5 h-5 z-30",r?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:A("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",r?"":"opacity-0"),material:A("absolute left-4 cursor-pointer",r?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},BQ=function(t,e){return t===void 0&&(t={}),{inputBgIos:"",inputBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),...t}};function By(){return By=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},By.apply(this,arguments)}const zQ=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",By({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},n),G.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):G.createElement("svg",By({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},n),G.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function cE(){return cE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cE.apply(this,arguments)}const UQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,placeholder:i="Search",value:o,inputId:s,inputStyle:l,disableButton:u=!1,disableButtonText:c="Cancel",clearButton:d=!0,onInput:p,onChange:f,onFocus:g,onBlur:y,onClear:v,onDisable:b,ios:x,material:w,...S}=t,C=$.useRef(null),E=$.useRef(null),_=$.useRef(null),[N,M]=$.useState(0),P=$.useRef(null),L=$.useRef(!1);$.useImperativeHandle(e,()=>({el:E.current,searchEl:C.current}));const[U,B]=$.useState(!1),K=yn({ios:x,material:w}),X=it({ios:x,material:w}),Z=Nt(),H=BQ(a,Z),F=he=>{p&&p(he)},Y=he=>{f&&f(he)},Q=he=>{B(!0),g&&g(he)},ne=he=>{y&&y(he)},se=()=>{o||(P.current=setTimeout(()=>{B(!1)}))},pe=()=>{clearTimeout(P.current)},de=he=>{he.preventDefault(),B(!1),C.current&&C.current.blur(),b&&b(),v&&v()};$.useEffect(()=>{_.current&&M(_.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{L.current=!0})})},[]);const ie=X(FQ({...t},H,{isEnabled:U,darkClasses:Z})),xe=K==="ios"?G.createElement("button",{type:"button",ref:_,style:{marginRight:U?0:`-${N}px`,transitionDuration:L.current?"":"0ms"},className:ie.cancelButton,onClick:de,onPointerDown:he=>he.preventDefault()},c):G.createElement(W6,{theme:K,onClick:de,className:A(ie.cancelButton),onPointerDown:he=>he.preventDefault()}),q=n,oe={...S};return G.createElement(q,cE({ref:E,className:ie.base},oe,{onBlurCapture:se,onFocusCapture:pe}),G.createElement("div",{className:ie.inner},G.createElement("span",{className:ie.searchIconWrap},G.createElement(zQ,{ios:x,material:w,className:ie.searchIcon})),G.createElement("input",{id:s,ref:C,className:A(ie.input),style:l,type:"text",name:"search",placeholder:i,value:o,onInput:F,onChange:Y,onFocus:Q,onBlur:ne}),o&&d&&G.createElement("button",{className:ie.clearButton,onClick:v,type:"button"},G.createElement(Uf,{theme:K,className:ie.deleteIcon}))),u&&xe)});UQ.displayName="Searchbar";const jQ=(t,e,n)=>{const{outline:r,rounded:a}=t;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:r?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${e.borderIos} border-2`,material:`${e.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${e.divideIos}`,material:`divide-x ${e.divideMaterial}`},strong:{common:A("p-0.5 space-x-1 relative"),ios:e.strongBgIos,material:e.strongBgMaterial},strongHighlight:{common:A("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",a&&"rounded-full","bg-white shadow",n("dark:bg-opacity-15 dark:touch-ripple-white")),ios:A(!a&&"rounded"),material:A(!a&&"rounded-md")}}},VQ=function(t,e){return t===void 0&&(t={}),{strongBgIos:A("bg-black bg-opacity-5",e("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:A("divide-md-light-outline",e("dark:divide-md-dark-outline")),...t}};function dE(){return dE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dE.apply(this,arguments)}const WQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,raised:s,outline:l,strong:u,rounded:c,children:d,...p}=t,f=$.useRef(null),g=$.useRef(null);$.useImperativeHandle(e,()=>({el:f.current}));const[y,v]=$.useState({transform:"",width:""}),b=n,x={...p},w=it({ios:i,material:o}),S=Nt(),C=VQ(a,S),E=w(jQ(t,C,S)),_=A(c?E.base.rounded:E.base.square,s&&E.raised,l&&E.outline,u&&E.strong,r);return $.useEffect(()=>{if(u&&g.current){const N=g.current.parentElement,M=N.children.length-1,P=[...N.children].indexOf(N.querySelector(".k-segmented-strong-button-active")),L="4px";v({...y,width:`calc((100% - 2px * 2 - ${L} * (${M} - 1)) / ${M})`,transform:`translateX(calc((${P} * 100% + ${P} * ${L}) * var(--k-rtl-reverse)))`})}},[d]),G.createElement(b,dE({ref:f,className:_},x),l?G.createElement("span",{className:E.outlineInner},d):d,u&&G.createElement("span",{ref:g,className:E.strongHighlight,style:y}))});WQ.displayName="Segmented";function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pE.apply(this,arguments)}const GQ=$.forwardRef((t,e)=>{const{active:n,children:r,outline:a,strong:i,clear:o,rounded:s,...l}=t,u=$.useRef(null);return $.useImperativeHandle(e,()=>({el:u.current})),G.createElement(yr,pE({ref:u,segmented:!0,segmentedActive:n,segmentedStrong:i,rounded:s&&i},l),r)});GQ.displayName="SegmentedButton";const HQ=(t,e,n)=>({base:{common:A("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",tr("fixed",n)),ios:"",material:`rounded-t-2xl ease-material-in ${e.bgIos}`,opened:`-translate-y-full ${e.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),qQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function hE(){return hE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hE.apply(this,arguments)}const KQ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,ios:l,material:u,children:c,...d}=t,p=$.useRef(null);$.useImperativeHandle(e,()=>({el:p.current}));const f=i?"opened":"closed",g=n,y={...d},v=it({ios:l,material:u}),b=Nt(),x=qQ(a,b),w=v(HQ(t,x,r),r);return G.createElement(G.Fragment,null,o&&G.createElement("div",{className:w.backdrop[f],onClick:s}),G.createElement(g,hE({ref:p,className:w.base[f]},y),c))});KQ.displayName="Sheet";const XQ=(t,e)=>{const{buttonsOnly:n}=t;return{base:`${e.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:A(e.fillTouchRipple,n&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:A(e.fillBgIos,e.fillTextIos,e.fillActiveBgIos),material:A(e.fillBgMaterial,e.fillTextMaterial,e.fillActiveBgMaterial)},outline:{common:A(e.touchRipple,"active:bg-opacity-15",n&&"first:border-r-0 rtl:last:border-r-0"),ios:A("border-2",e.textIos,e.activeBgIos,e.outlineBorderIos,n&&"rtl:first:border-r-2"),material:A("border",e.textMaterial,e.activeBgMaterial,e.outlineBorderMaterial,n&&"rtl:first:border-r")},clear:{common:`${e.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:A(e.textIos,e.activeBgIos),material:A(e.textMaterial,e.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${e.textIos}`,material:`text-sm ${e.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},YQ=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",...t}};function fE(){return fE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fE.apply(this,arguments)}const QQ=$.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,value:i=0,defaultValue:o,input:s=!1,inputType:l="text",inputPlaceholder:u,inputDisabled:c,inputReadOnly:d,buttonsOnly:p,rounded:f,roundedIos:g,roundedMaterial:y,small:v,smallIos:b,smallMaterial:x,large:w,largeIos:S,largeMaterial:C,raised:E,raisedIos:_,raisedMaterial:N,outline:M,outlineIos:P,outlineMaterial:L,onInput:U,onChange:B,onFocus:K,onBlur:X,onMinus:Z,onPlus:H,ios:F,material:Y,touchRipple:Q=!0,children:ne,...se}=t,pe=$.useRef(null),de=$.useRef(null),ie=$.useRef(null);$.useImperativeHandle(e,()=>({el:pe.current}));const xe=n,q=yn({ios:F,material:Y}),oe=it({ios:F,material:Y});Oo(de,q==="material"&&Q),Oo(ie,q==="material"&&Q);const he=typeof f>"u"?q==="ios"?g:y:f,Ie=typeof v>"u"?q==="ios"?b:x:v,Ee=typeof w>"u"?q==="ios"?S:C:w,_e=typeof E>"u"?q==="ios"?_:N:E,Fe=typeof M>"u"?q==="ios"?P:L:M,Xe=Nt(),Oe=YQ(a,Xe),lt=Ee?"large":Ie?"small":"medium",Je=Fe&&_e?"clear":Fe?"outline":"fill",nt=he?"rounded":"square",et=oe(XQ({...t,rounded:he,small:Ie,large:Ee,raised:_e,outline:Fe},Oe)),on={...se},Ut=A(et.base,_e&&et.raised,et.size[lt],et.shape[nt],r),Yt=A(et.button,et.buttonStyle[Je],et.buttonLeftShape[nt]),Qt=A(et.button,et.buttonStyle[Je],et.buttonRightShape[nt]),$t=A(s&&et.input,et.value[Je]);return G.createElement(xe,fE({ref:pe,className:Ut},on),G.createElement("span",{ref:de,className:Yt,role:"button",tabIndex:"0",onClick:Z},G.createElement("span",{className:et.hBar})),s&&!p&&G.createElement("input",{className:$t,placeholder:u,type:l,value:i,defaultValue:o,disabled:c,readOnly:d,onInput:U,onChange:B,onFocus:K,onBlur:X}),!s&&!p&&G.createElement("span",{className:$t},i),G.createElement("span",{ref:ie,className:Qt,role:"button",tabIndex:"0",onClick:H},G.createElement("span",{className:et.hBar}),G.createElement("span",{className:et.vBar})))});QQ.displayName="Stepper";function mE(){return mE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mE.apply(this,arguments)}const q6=$.forwardRef((t,e)=>{const{labels:n,icons:r,children:a,...i}=t,o=$.useRef(null);$.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return G.createElement(KI,mE({ref:o,tabbar:!0,tabbarIcons:r,tabbarLabels:n},s),a)});q6.displayName="Tabbar";const ZQ=function(t,e){let{hasIcon:n,hasLabel:r,active:a}=t===void 0?{}:t;return e===void 0&&(e={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:A("py-1",a?e.textActiveIos:e.textIos),material:A("py-2",n&&r&&"space-y-1",a?e.textActiveMaterial:e.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:A("w-7 h-7"),material:A("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:A(a?e.iconBgActiveIos:e.iconBgIos),material:A(a?e.iconBgActiveMaterial:e.iconBgMaterial,!a&&"scale-x-[0.5] opacity-0")},label:{ios:A(n?"text-xs font-medium":"",""),material:A(n?"text-xs":"text-sm","font-medium")}}},JQ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-40",e("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),...t}};function gE(){return gE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gE.apply(this,arguments)}const jf=$.forwardRef((t,e)=>{const{className:n,active:r,ios:a,material:i,colors:o,linkProps:s={},icon:l,label:u,children:c,...d}=t,p=$.useRef(null);$.useImperativeHandle(e,()=>({el:p.current}));const f={...s,...d},g=Nt(),y=JQ(o,g),v=it({ios:a,material:i}),b=!!l,x=u||c&&c.length,w=v(ZQ({hasLabel:x,hasIcon:b,active:r},y));return G.createElement(op,gE({ref:p,tabbar:!0,tabbarActive:r,className:n},f),G.createElement("span",{className:w.content},l&&G.createElement("span",{className:w.iconContainer},G.createElement("span",{className:w.iconBg}),l),(u||c&&c.length)&&G.createElement("span",{className:w.label},u,c)))});jf.displayName="TabbarLink";const eZ=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function yE(){return yE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yE.apply(this,arguments)}const tZ=$.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=$.useRef(null);$.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(eZ({...t})),u={...o};return G.createElement("table",yE({className:l.base,ref:s},u),i)});tZ.displayName="Table";const nZ=()=>({base:{common:"text-sm",ios:"",material:""}});function bE(){return bE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bE.apply(this,arguments)}const rZ=$.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=$.useRef(null);$.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(nZ({...t})),u={...o};return G.createElement("tbody",bE({className:l.base,ref:s},u),i)});rZ.displayName="TableBody";const aZ=(t,e,n)=>{const{header:r}=t;return{base:{common:A("align-middle",n),ios:A(r?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${e.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:A(r?`${e.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},iZ=function(t,e){return t===void 0&&(t={}),{textHeaderIos:A("text-black/45",e("dark:text-white/55")),textHeaderMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function vE(){return vE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vE.apply(this,arguments)}const oZ=$.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=$.useRef(null);$.useImperativeHandle(e,()=>({el:u.current}));const c=a?"th":"td",d=it({ios:i,material:o}),p=Nt(),f=iZ(r,p),g=d(aZ({...t},f,n)),y={...l};return G.createElement(c,vE({className:g.base,ref:u},y),s)});oZ.displayName="TableCell";const sZ=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function xE(){return xE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xE.apply(this,arguments)}const lZ=$.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=$.useRef(null);$.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(sZ({...t})),u={...o};return G.createElement("thead",xE({className:l.base,ref:s},u),i)});lZ.displayName="TableHead";const uZ=(t,e)=>{const{header:n}=t;return{base:{common:"align-middle relative",ios:n?"":A(e.bgIos,"hairline-b last:hairline-transparent"),material:n?"":A(e.bgMaterial,`border-t ${e.dividerMaterial}`)}}},cZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("hover:bg-black/5",e("dark:hover:bg-white/10")),bgMaterial:A("hover:bg-md-light-secondary-container",e("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function wE(){return wE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wE.apply(this,arguments)}const dZ=$.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=$.useRef(null);$.useImperativeHandle(e,()=>({el:u.current}));const c=it({ios:i,material:o}),d=Nt(),p=cZ(r,d),f=c(uZ({...t},p)),g={...l};return G.createElement("tr",wE({className:f.base,ref:u},g),s)});dZ.displayName="TableRow";const pZ=(t,e,n)=>{const{translucent:r,opened:a}=t;return{base:{common:A(tr("fixed",n),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!a&&"translate-y-full opacity-0 pointer-events-none"),ios:A("sm:rounded-lg duration-300",e.textIos,e.bgIos,r&&"translucent"),material:A("sm:rounded-2xl duration-200",e.textMaterial,e.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},hZ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-black",bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kE.apply(this,arguments)}const fZ=$.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,button:o,position:s="left",opened:l,ios:u,material:c,children:d,...p}=t,f=$.useRef(null);$.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=it({ios:u,material:c}),b=Nt(),x=hZ(a,b),w=v(pZ({...t,translucent:i},x,r),r);return G.createElement(g,kE({ref:f,className:w.base[s]},y),G.createElement("div",{className:w.content},d,o&&G.createElement("div",{className:w.button},o)))});fZ.displayName="Toast";const mZ=(t,e,n,r)=>({base:{common:A(tr("relative",n),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",r("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:e.bgIos,material:A(e.bgMaterial,e.borderMaterial)},checked:{ios:`${e.checkedBgIos}`,material:A(e.checkedBgMaterial,e.checkedBorderMaterial)}},inner:{ios:A("w-full h-full bg-white rounded-full block duration-300 transform",r("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:A("translate-x-5 rtl:!-translate-x-5"),material:A("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:A(e.checkedThumbBgIos),material:A(e.checkedThumbBgMaterial)},notChecked:{ios:e.thumbBgIos,material:A("scale-[0.666]",e.thumbBgMaterial)}},input:{common:"hidden"}}),gZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),checkedBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),checkedBorderMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),thumbBgMaterial:A("bg-md-light-outline",e("dark:bg-md-dark-outline")),checkedThumbBgMaterial:A("bg-md-light-on-primary",e("dark:bg-md-dark-on-primary")),...t}};function SE(){return SE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SE.apply(this,arguments)}const yZ=$.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,touchRipple:p=!0,ios:f,material:g,children:y,...v}=t,b=$.useRef(null),x=$.useRef(null);$.useImperativeHandle(e,()=>({el:b.current}));const w=n,S={...v},C=yn({ios:f,material:g}),E=it({ios:f,material:g}),_=Nt();Oo(x,C==="material"&&p,b);const N=gZ(a,_),M=o||i&&!d?"checked":"notChecked",P=E(mZ(t,N,r,_),r);return G.createElement(w,SE({ref:b,className:P.base[M]},S),G.createElement("input",{type:"checkbox",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:P.input}),G.createElement("span",{className:P.inner[M]}),G.createElement("span",{ref:x,className:P.thumbWrap[M]},G.createElement("span",{className:P.thumb[M]})),y)});yZ.displayName="Toggle";var bZ={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const K6=t=>{let e;const n=new Set,r=(s,l)=>{const u=typeof s=="function"?s(e):s;if(!Object.is(u,e)){const c=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(d=>d(e,c))}},a=()=>e,i={setState:r,getState:a,getInitialState:()=>o,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(bZ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=e=t(r,a,i);return i},vZ=t=>t?K6(t):K6;var X6={exports:{}},Y6={},Q6={exports:{}},Z6={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var up=$;function xZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wZ=typeof Object.is=="function"?Object.is:xZ,kZ=up.useState,SZ=up.useEffect,CZ=up.useLayoutEffect,IZ=up.useDebugValue;function EZ(t,e){var n=e(),r=kZ({inst:{value:n,getSnapshot:e}}),a=r[0].inst,i=r[1];return CZ(function(){a.value=n,a.getSnapshot=e,CE(a)&&i({inst:a})},[t,n,e]),SZ(function(){return CE(a)&&i({inst:a}),t(function(){CE(a)&&i({inst:a})})},[t]),IZ(n),n}function CE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wZ(t,n)}catch{return!0}}function TZ(t,e){return e()}var NZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?TZ:EZ;Z6.useSyncExternalStore=up.useSyncExternalStore!==void 0?up.useSyncExternalStore:NZ,Q6.exports=Z6;var _Z=Q6.exports;/**
* @license React
* use-sync-external-store-shim/with-selector.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var zy=$,RZ=_Z;function $Z(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OZ=typeof Object.is=="function"?Object.is:$Z,MZ=RZ.useSyncExternalStore,PZ=zy.useRef,AZ=zy.useEffect,DZ=zy.useMemo,LZ=zy.useDebugValue;Y6.useSyncExternalStoreWithSelector=function(t,e,n,r,a){var i=PZ(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=DZ(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),a!==void 0&&o.hasValue){var g=o.value;if(a(g,f))return d=g}return d=f}if(g=d,OZ(c,f))return g;var y=r(f);return a!==void 0&&a(g,y)?g:(c=f,d=y)}var u=!1,c,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,a]);var s=MZ(t,i[0],i[1]);return AZ(function(){o.hasValue=!0,o.value=s},[s]),LZ(s),s},X6.exports=Y6;var FZ=X6.exports;const BZ=Wi(FZ);var J6={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:zZ}=G,{useSyncExternalStoreWithSelector:UZ}=BZ;let eP=!1;const jZ=t=>t;function VZ(t,e=jZ,n){(J6?"production":void 0)!=="production"&&n&&!eP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),eP=!0);const r=UZ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return zZ(r),r}const tP=t=>{(J6?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?vZ(t):t,n=(r,a)=>VZ(e,r,a);return Object.assign(n,e),n},WZ=t=>t?tP(t):tP;var Uy={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const IE=new Map,jy=t=>{const e=IE.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},GZ=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=IE.get(n.name);if(r)return{type:"tracked",store:t,...r};const a={connection:e.connect(n),stores:{}};return IE.set(n.name,a),{type:"tracked",store:t,...a}},HZ=(t,e={})=>(n,r,a)=>{const{enabled:i,anonymousActionType:o,store:s,...l}=e;let u;try{u=(i??(Uy?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(Uy?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,a);const{connection:c,...d}=GZ(s,u,l);let p=!0;a.setState=(y,v,b)=>{const x=n(y,v);if(!p)return x;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return s===void 0?(c?.send(w,r()),x):(c?.send({...w,type:`${s}/${w.type}`},{...jy(l.name),[s]:a.getState()}),x)};const f=(...y)=>{const v=p;p=!1,n(...y),p=v},g=t(a.setState,r,a);if(d.type==="untracked"?c?.init(g):(d.stores[d.store]=a,c?.init(Object.fromEntries(Object.entries(d.stores).map(([y,v])=>[y,y===d.store?g:v.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let y=!1;const v=a.dispatch;a.dispatch=(...b)=>{(Uy?"production":void 0)!=="production"&&b[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),v(...b)}}return c.subscribe(y=>{var v;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return EE(y.payload,b=>{if(b.type==="__setState"){if(s===void 0){f(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=b.state[s];if(x==null)return;JSON.stringify(a.getState())!==JSON.stringify(x)&&f(x);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(b)});case"DISPATCH":switch(y.payload.type){case"RESET":return f(g),s===void 0?c?.init(a.getState()):c?.init(jy(l.name));case"COMMIT":if(s===void 0){c?.init(a.getState());return}return c?.init(jy(l.name));case"ROLLBACK":return EE(y.state,b=>{if(s===void 0){f(b),c?.init(a.getState());return}f(b[s]),c?.init(jy(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return EE(y.state,b=>{if(s===void 0){f(b);return}JSON.stringify(a.getState())!==JSON.stringify(b[s])&&f(b[s])});case"IMPORT_STATE":{const{nextLiftedState:b}=y.payload,x=(v=b.computedStates.slice(-1)[0])==null?void 0:v.state;if(!x)return;f(s===void 0?x:x[s]),c?.send(null,b);return}case"PAUSE_RECORDING":return p=!p}return}}),g},qZ=HZ,EE=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function KZ(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const i=s=>s===null?null:JSON.parse(s,e?.reviver),o=(a=n.getItem(r))!=null?a:null;return o instanceof Promise?o.then(i):i(o)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,e?.replacer)),removeItem:r=>n.removeItem(r)}}const Vf=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Vf(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Vf(r)(n)}}}},XZ=(t,e)=>(n,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...e},o=!1;const s=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,a);const c=Vf(i.serialize),d=()=>{const v=i.partialize({...r()});let b;const x=c({state:v,version:i.version}).then(w=>u.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return x},p=a.setState;a.setState=(v,b)=>{p(v,b),d()};const f=t((...v)=>{n(...v),d()},r,a);let g;const y=()=>{var v;if(!u)return;o=!1,s.forEach(x=>x(r()));const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return Vf(u.getItem.bind(u))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return g=i.merge(x,(w=r())!=null?w:f),n(g,!0),d()}).then(()=>{b?.(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},y(),g||f},YZ=(t,e)=>(n,r,a)=>{let i={storage:KZ(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...e},o=!1;const s=new Set,l=new Set;let u=i.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const c=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},d=a.setState;a.setState=(y,v)=>{d(y,v),c()};const p=t((...y)=>{n(...y),c()},r,a);a.getInitialState=()=>p;let f;const g=()=>{var y,v;if(!u)return;o=!1,s.forEach(x=>{var w;return x((w=r())!=null?w:p)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=r())!=null?y:p))||void 0;return Vf(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return f=i.merge(x,(w=r())!=null?w:p),n(f,!0),c()}).then(()=>{b?.(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||g(),f||p},QZ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Uy?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),XZ(t,e)):YZ(t,e),ZZ=QZ,nP=[{id:1,image:"./frame/frame_1.png",front:"./frame/frame_1_front.png"},{id:2,image:"./frame/frame_2.png",front:"./frame/frame_2_front.png"},{id:3,image:"./frame/frame_3.png",front:"./frame/frame_3_front.png"},{id:4,image:"./frame/frame_4.png",front:"./frame/frame_4_front.png"},{id:5,image:"./frame/frame_5.png",front:"./frame/frame_5_front.png"}],JZ=[{id:"Betende_Frau_Maria",image:"./sticker/Betende_Frau_Maria.png"},{id:"Blumentopf",image:"./sticker/Blumentopf.png"},{id:"Blume",image:"./sticker/Blume.png"},{id:"Frau_in_gelbem_Kleid",image:"./sticker/Frau_in_gelbem_Kleid.png"},{id:"Magd",image:"./sticker/Magd.png"},{id:"Mann_liegend",image:"./sticker/Mann_liegend.png"},{id:"Mann",image:"./sticker/Mann.png"},{id:"Mucha_Dekor",image:"./sticker/Mucha_Dekor.png"},{id:"The_Hare",image:"./sticker/The_Hare.png"},{id:"Wasserspeier",image:"./sticker/Wasserspeier.png"}],rP=[{id:"http://www.wikidata.org/entity/Q20355536",name:"A Street in Torello, Italy",year:"1890",country:"Denmark",location:"Statens Museum for Kunst",creator:"Peder Severin Kr\xF8yer",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS1435",identifier:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q20537703",name:"At the French Windows. The Artist's Wife",year:"1897",country:"Denmark",location:"Statens Museum for Kunst",creator:"Laurits Andersen Ring",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS3716",identifier:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297795",name:"Brot! (Bread!)",year:"1924",country:"Germany",location:"Vanderbilt University Fine Arts Gallery",creator:"K\xE4the Kollwitz",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1977/1977.011.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297971",name:"Business-Man, ffrom Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Belgium",location:"Vanderbilt University Fine Arts Gallery",creator:"Frans Masereel",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.032.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q3698180",name:"Calvary",year:"1475",country:"Belgium",location:"Royal Museum of Fine Arts Antwerp",creator:"Antonello da Messina",url:"https://iiif.kmska.be/iiif/2/5/manifest.json",identifier:"https://iiif.kmska.be/c/iiif/2/public@5.tif",image:"https://iiif.kmska.be/c/iiif/2/public@5.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.kmska.be/c/iiif/2/public@5.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103300860",name:"Half-Figure Prophet",year:"1450",country:"France",location:"Vanderbilt University Fine Arts Gallery",creator:"http://www.wikidata.org/.well-known/genid/d7c4865c9fae865605be887d7277ab75",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1975/1975.005.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102967848",name:"Landscape with Shepherds",year:"",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Jan Both",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0195P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q106582838",name:"The Blacksmith Worker",year:"",country:"Switzerland",location:"Vanderbilt University Fine Arts Gallery",creator:"Antonello da Messina",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.036.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q104032628",name:"The Empty Jug",year:"1653",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Adriaen van Ostade",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0845P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102975484",name:"Trostung (Consolation), from Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Austria",location:"Vanderbilt University Fine Arts Gallery",creator:"Georg Ehrlich",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.031.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/100,100/0/default.jpg"}],Ks=WZ()(qZ(ZZ(t=>({addToArtwork:(e,n)=>t(r=>({artworkList:[{id:e,image:n},...r.artworkList]})),addToCanvas:(e,n,r)=>t(a=>({canvasList:[...a.canvasList,{brightness:0,contrast:0,height:400,id:`${a.canvasList.length+1}`,image:e,isDragging:!1,opacity:1,width:400,x:n,y:r}]})),addToImageList:e=>t(n=>({imageList:[...n.imageList,...e]})),removeFromImageList:e=>t(n=>({imageList:n.imageList.filter(r=>r.id!==e)})),artworkList:JZ,canvasList:[],frame:nP[1],imageList:rP.sort(()=>Math.random()-.5),imageLikeList:[],likeImage:e=>t(n=>({imageLikeList:[...n.imageLikeList,e]})),resetState:()=>t(()=>({imageList:rP.sort(()=>Math.random()-.5),canvasList:[],imageLikeList:[]})),removeFromCanvas:e=>t(n=>({canvasList:n.canvasList.filter(r=>r.id!==e)})),setFrame:e=>t(()=>({frame:nP.find(n=>n.id===e)})),transformCanvasImage:e=>t(n=>({canvasList:n.canvasList.map(r=>r.id!==e.id?r:{...r,height:e.height,width:e.width,x:e.x,y:e.y,brightness:e.brightness,contrast:e.contrast,opacity:e.opacity})})),moveCanvasImage:(e,n)=>t(r=>{const a=r.canvasList.findIndex(i=>i.id===e);if(a!==-1){const i=n?a+1:a-1;if(i>=0&&i<r.canvasList.length){const o=[...r.canvasList],[s]=o.splice(a,1);return o.splice(i,0,s),{canvasList:o}}}return{}})}),{name:"glamStore"})));function eJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const tJ=$.forwardRef(eJ),nJ=tJ;function rJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"}))}const aJ=$.forwardRef(rJ),iJ=aJ;function oJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"}))}const sJ=$.forwardRef(oJ),lJ=sJ;function uJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const cJ=$.forwardRef(uJ),dJ=cJ;function pJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const hJ=$.forwardRef(pJ),fJ=hJ;function mJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const gJ=$.forwardRef(mJ),yJ=gJ;function bJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const vJ=$.forwardRef(bJ),xJ=vJ;function wJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const kJ=$.forwardRef(wJ),SJ=kJ;function CJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const IJ=$.forwardRef(CJ),EJ=IJ;function TJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const NJ=$.forwardRef(TJ),_J=NJ;function RJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const $J=$.forwardRef(RJ),OJ=$J;function MJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const PJ=$.forwardRef(MJ),AJ=PJ;function DJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 8.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v8.25A2.25 2.25 0 0 0 6 16.5h2.25m8.25-8.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-7.5A2.25 2.25 0 0 1 8.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 0 0-2.25 2.25v6"}))}const LJ=$.forwardRef(DJ),FJ=LJ;function BJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const zJ=$.forwardRef(BJ),UJ=zJ;function jJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const VJ=$.forwardRef(jJ),WJ=VJ;function GJ({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const HJ=$.forwardRef(GJ),qJ=HJ;function aP(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var KJ=["color"],XJ=$.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=aP(t,KJ);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),$.createElement("path",{d:"M3 9C3 6.5 4.5 4.25 7.5 1.5C10.5 4.25 12 6.5 12 9C12 11.4853 9.98528 13.5 7.5 13.5C5.01472 13.5 3 11.4853 3 9ZM10.9524 8.30307C9.67347 7.82121 8.2879 8.46208 6.98956 9.06259C5.9327 9.55142 4.93365 10.0135 4.09695 9.82153C4.03357 9.55804 4 9.28294 4 9C4 7.11203 5.02686 5.27195 7.5 2.87357C9.66837 4.97639 10.725 6.65004 10.9524 8.30307Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),YJ=["color"],QJ=$.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=aP(t,YJ);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),$.createElement("path",{d:"M7.85367 1.48956C7.65841 1.29429 7.34182 1.29429 7.14656 1.48956L1.48971 7.14641C1.29445 7.34167 1.29445 7.65825 1.48971 7.85352L7.14656 13.5104C7.34182 13.7056 7.65841 13.7056 7.85367 13.5104L13.5105 7.85352C13.7058 7.65825 13.7058 7.34167 13.5105 7.14641L7.85367 1.48956ZM7.5 2.55033L2.55037 7.49996L7.5 12.4496V2.55033Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iP={exports:{}};(function(t,e){(function(n,r){r()})(Wa,function(){function n(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,d){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){l(p.response,c,d)},p.onerror=function(){console.error("could not download file")},p.send()}function a(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Wa=="object"&&Wa.global===Wa?Wa:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,d){var p=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?i(f):a(f.href)?r(u,c,d):i(f,f.target="_blank")):(f.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,d){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,d),c);else if(a(u))r(u,c,d);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){i(p)})}}:function(u,c,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,d);var f=u.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&g||s)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var w=v.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=w:location=w,p=null},v.readAsDataURL(u)}else{var b=o.URL||o.webkitURL,x=b.createObjectURL(u);p?p.location=x:location.href=x,p=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(iP);var ZJ=iP.exports,TE={exports:{}},Vy={},Wy={},Dt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Wa<"u"?Wa:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.3",isBrowser:n(),isUnminified:/param/.test(function(a){}.toString()),dblClickWindow:400,getAngle(a){return t.Konva.angleDeg?a*e:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(a){t.glob.Konva=a}};const r=a=>{t.Konva[a.prototype.getClassName()]=a};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Dt);var nr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Dt;class n{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){var C=this.m;return{x:C[0]*S.x+C[2]*S.y+C[4],y:C[1]*S.x+C[3]*S.y+C[5]}}translate(S,C){return this.m[4]+=this.m[0]*S+this.m[2]*C,this.m[5]+=this.m[1]*S+this.m[3]*C,this}scale(S,C){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=C,this.m[3]*=C,this}rotate(S){var C=Math.cos(S),E=Math.sin(S),_=this.m[0]*C+this.m[2]*E,N=this.m[1]*C+this.m[3]*E,M=this.m[0]*-E+this.m[2]*C,P=this.m[1]*-E+this.m[3]*C;return this.m[0]=_,this.m[1]=N,this.m[2]=M,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,C){var E=this.m[0]+this.m[2]*C,_=this.m[1]+this.m[3]*C,N=this.m[2]+this.m[0]*S,M=this.m[3]+this.m[1]*S;return this.m[0]=E,this.m[1]=_,this.m[2]=N,this.m[3]=M,this}multiply(S){var C=this.m[0]*S.m[0]+this.m[2]*S.m[1],E=this.m[1]*S.m[0]+this.m[3]*S.m[1],_=this.m[0]*S.m[2]+this.m[2]*S.m[3],N=this.m[1]*S.m[2]+this.m[3]*S.m[3],M=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],P=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=C,this.m[1]=E,this.m[2]=_,this.m[3]=N,this.m[4]=M,this.m[5]=P,this}invert(){var S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*S,E=-this.m[1]*S,_=-this.m[2]*S,N=this.m[0]*S,M=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=E,this.m[2]=_,this.m[3]=N,this.m[4]=M,this.m[5]=P,this}getMatrix(){return this.m}decompose(){var S=this.m[0],C=this.m[1],E=this.m[2],_=this.m[3],N=this.m[4],M=this.m[5],P=S*_-C*E;let L={x:N,y:M,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||C!=0){var U=Math.sqrt(S*S+C*C);L.rotation=C>0?Math.acos(S/U):-Math.acos(S/U),L.scaleX=U,L.scaleY=P/U,L.skewX=(S*E+C*_)/P,L.skewY=0}else if(E!=0||_!=0){var B=Math.sqrt(E*E+_*_);L.rotation=Math.PI/2-(_>0?Math.acos(-E/B):-Math.acos(E/B)),L.scaleX=P/B,L.scaleY=B,L.skewX=0,L.skewY=(S*E+C*_)/P}return L.rotation=t.Util._getRotation(L.rotation),L}}t.Transform=n;var r="[object Array]",a="[object Number]",i="[object String]",o="[object Boolean]",s=Math.PI/180,l=180/Math.PI,u="#",c="",d="0",p="Konva warning: ",f="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,b=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};t.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===r},_isNumber(w){return Object.prototype.toString.call(w)===a&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===i},_isBoolean(w){return Object.prototype.toString.call(w)===o},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;var S=w[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){b.push(w),b.length===1&&x(function(){const S=b;b=[],S.forEach(function(C){C()})})},createCanvasElement(){var w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,S){var C=t.Util.createImageElement();C.onload=function(){S(C)},C.src=w},_rgbToHex(w,S,C){return((1<<24)+(w<<16)+(S<<8)+C).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,c);var S=parseInt(w,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){for(var w=(Math.random()*16777215<<0).toString(16);w.length<6;)w=d+w;return u+w},getRGB(w){var S;return w in y?(S=y[w],{r:S[0],g:S[1],b:S[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===g?(S=v.exec(w.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",t.Util._namedColorToRBA(w)||t.Util._hex3ColorToRGBA(w)||t.Util._hex4ColorToRGBA(w)||t.Util._hex6ColorToRGBA(w)||t.Util._hex8ColorToRGBA(w)||t.Util._rgbColorToRGBA(w)||t.Util._rgbaColorToRGBA(w)||t.Util._hslColorToRGBA(w)},_namedColorToRBA(w){var S=y[w.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];var S=w.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];var S=w.split(/ *, */).map((C,E)=>C.slice(-1)==="%"?E===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[S,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),E=Number(C[0])/360,_=Number(C[1])/100,N=Number(C[2])/100;let M,P,L;if(_===0)return L=N*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};N<.5?M=N*(1+_):M=N+_-N*_;const U=2*N-M,B=[0,0,0];for(let K=0;K<3;K++)P=E+1/3*-(K-1),P<0&&P++,P>1&&P--,6*P<1?L=U+(M-U)*6*P:2*P<1?L=M:3*P<2?L=U+(M-U)*(2/3-P)*6:L=U,B[K]=L*255;return{r:Math.round(B[0]),g:Math.round(B[1]),b:Math.round(B[2]),a:1}}},haveIntersection(w,S){return!(S.x>w.x+w.width||S.x+S.width<w.x||S.y>w.y+w.height||S.y+S.height<w.y)},cloneObject(w){var S={};for(var C in w)this._isPlainObject(w[C])?S[C]=this.cloneObject(w[C]):this._isArray(w[C])?S[C]=this.cloneArray(w[C]):S[C]=w[C];return S},cloneArray(w){return w.slice(0)},degToRad(w){return w*s},radToDeg(w){return w*l},_degToRad(w){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(w)},_radToDeg(w){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(w)},_getRotation(w){return e.Konva.angleDeg?t.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(f+w)},error(w){console.error(f+w)},warn(w){e.Konva.showWarnings&&console.warn(p+w)},each(w,S){for(var C in w)S(C,w[C])},_inRange(w,S,C){return S<=w&&w<C},_getProjectionToSegment(w,S,C,E,_,N){var M,P,L,U=(w-C)*(w-C)+(S-E)*(S-E);if(U==0)M=w,P=S,L=(_-C)*(_-C)+(N-E)*(N-E);else{var B=((_-w)*(C-w)+(N-S)*(E-S))/U;B<0?(M=w,P=S,L=(w-_)*(w-_)+(S-N)*(S-N)):B>1?(M=C,P=E,L=(C-_)*(C-_)+(E-N)*(E-N)):(M=w+B*(C-w),P=S+B*(E-S),L=(M-_)*(M-_)+(P-N)*(P-N))}return[M,P,L]},_getProjectionToLine(w,S,C){var E=t.Util.cloneObject(w),_=Number.MAX_VALUE;return S.forEach(function(N,M){if(!(!C&&M===S.length-1)){var P=S[(M+1)%S.length],L=t.Util._getProjectionToSegment(N.x,N.y,P.x,P.y,w.x,w.y),U=L[0],B=L[1],K=L[2];K<_&&(E.x=U,E.y=B,_=K)}}),E},_prepareArrayForTween(w,S,C){var E,_=[],N=[];if(w.length>S.length){var M=S;S=w,w=M}for(E=0;E<w.length;E+=2)_.push({x:w[E],y:w[E+1]});for(E=0;E<S.length;E+=2)N.push({x:S[E],y:S[E+1]});var P=[];return N.forEach(function(L){var U=t.Util._getProjectionToLine(L,_,C);P.push(U.x),P.push(U.y)}),P},_prepareToStringify(w){var S;w.visitedByCircularReferenceRemoval=!0;for(var C in w)if(w.hasOwnProperty(C)&&w[C]&&typeof w[C]=="object"){if(S=Object.getOwnPropertyDescriptor(w,C),w[C].visitedByCircularReferenceRemoval||t.Util._isElement(w[C]))if(S.configurable)delete w[C];else return null;else if(t.Util._prepareToStringify(w[C])===null)if(S.configurable)delete w[C];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,S){for(var C in S)w[C]=S[C];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){e.Konva.releaseCanvasOnDestroy&&w.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(w,S,C,E){let _=0,N=0,M=0,P=0;typeof E=="number"?_=N=M=P=Math.min(E,S/2,C/2):(_=Math.min(E[0]||0,S/2,C/2),N=Math.min(E[1]||0,S/2,C/2),P=Math.min(E[2]||0,S/2,C/2),M=Math.min(E[3]||0,S/2,C/2)),w.moveTo(_,0),w.lineTo(S-N,0),w.arc(S-N,N,N,Math.PI*3/2,0,!1),w.lineTo(S,C-P),w.arc(S-P,C-P,P,0,Math.PI/2,!1),w.lineTo(M,C),w.arc(M,C-M,M,Math.PI/2,Math.PI,!1),w.lineTo(0,_),w.arc(_,_,_,Math.PI,Math.PI*3/2,!1)}}})(nr);var Gn={},Lt={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.getComponentValidator=Qe.getBooleanValidator=Qe.getNumberArrayValidator=Qe.getFunctionValidator=Qe.getStringOrGradientValidator=Qe.getStringValidator=Qe.getNumberOrAutoValidator=Qe.getNumberOrArrayOfNumbersValidator=Qe.getNumberValidator=Qe.alphaComponent=Qe.RGBComponent=void 0;const Xs=Dt,ur=nr;function Ys(t){return ur.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||ur.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function JJ(t){return t>255?255:t<0?0:Math.round(t)}Qe.RGBComponent=JJ;function eee(t){return t>1?1:t<1e-4?1e-4:t}Qe.alphaComponent=eee;function tee(){if(Xs.Konva.isUnminified)return function(t,e){return ur.Util._isNumber(t)||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}Qe.getNumberValidator=tee;function nee(t){if(Xs.Konva.isUnminified)return function(e,n){let r=ur.Util._isNumber(e),a=ur.Util._isArray(e)&&e.length==t;return!r&&!a&&ur.Util.warn(Ys(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}Qe.getNumberOrArrayOfNumbersValidator=nee;function ree(){if(Xs.Konva.isUnminified)return function(t,e){var n=ur.Util._isNumber(t),r=t==="auto";return n||r||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}Qe.getNumberOrAutoValidator=ree;function aee(){if(Xs.Konva.isUnminified)return function(t,e){return ur.Util._isString(t)||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}Qe.getStringValidator=aee;function iee(){if(Xs.Konva.isUnminified)return function(t,e){const n=ur.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}Qe.getStringOrGradientValidator=iee;function oee(){if(Xs.Konva.isUnminified)return function(t,e){return ur.Util._isFunction(t)||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}Qe.getFunctionValidator=oee;function see(){if(Xs.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(ur.Util._isArray(t)?t.forEach(function(r){ur.Util._isNumber(r)||ur.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}Qe.getNumberArrayValidator=see;function lee(){if(Xs.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}Qe.getBooleanValidator=lee;function uee(t){if(Xs.Konva.isUnminified)return function(e,n){return e==null||ur.Util.isObject(e)||ur.Util.warn(Ys(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}Qe.getComponentValidator=uee,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=nr,n=Qe;var r="get",a="set";t.Factory={addGetterSetter(i,o,s,l,u){t.Factory.addGetter(i,o,s),t.Factory.addSetter(i,o,l,u),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,s){var l=r+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||t.Factory.overWriteSetter(i,o,s,l)},overWriteSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(i,o,s,l,u){var c=s.length,d=e.Util._capitalize,p=r+d(o),f=a+d(o),g,y;i.prototype[p]=function(){var b={};for(g=0;g<c;g++)y=s[g],b[y]=this.getAttr(o+d(y));return b};var v=(0,n.getComponentValidator)(s);i.prototype[f]=function(b){var x=this.attrs[o],w;l&&(b=l.call(this,b)),v&&v.call(this,b,o);for(w in b)b.hasOwnProperty(w)&&this._setAttr(o+d(w),b[w]);return b||s.forEach(S=>{this._setAttr(o+d(S),void 0)}),this._fireChangeEvent(o,x,b),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){var s=e.Util._capitalize(o),l=a+s,u=r+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=r+e.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(c);var d=this.attrs[o];return d===void 0?s:d},t.Factory.addSetter(i,o,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],c=r+e.Util._capitalize(s),d=a+e.Util._capitalize(s);function p(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=p,i.prototype[c]=p,i.prototype[d]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(Lt);var Po={},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.HitContext=Qs.SceneContext=Qs.Context=void 0;const oP=nr,cee=Dt;function dee(t){var e=[],n=t.length,r=oP.Util,a,i;for(a=0;a<n;a++)i=t[a],r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i);return e}var sP=",",pee="(",hee=")",fee="([",mee="])",gee=";",yee="()",bee="=",lP=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],vee=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const xee=100;class Gy{constructor(e){this.canvas=e,cee.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,a=r.length,i="",o,s,l,u;for(o=0;o<a;o++)s=r[o],l=s.method,l?(u=s.args,i+=l,e?i+=yee:oP.Util._isArray(u[0])?i+=fee+u.join(sP)+mee:(n&&(u=u.map(c=>typeof c=="number"?Math.floor(c):c)),i+=pee+u.join(sP)+hee)):(i+=s.property,e||(i+=bee+s.val)),i+=gee;return i}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=xee&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,a,i,o){this._context.arc(e,n,r,a,i,o)}arcTo(e,n,r,a,i){this._context.arcTo(e,n,r,a,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,a,i,o){this._context.bezierCurveTo(e,n,r,a,i,o)}clearRect(e,n,r,a){this._context.clearRect(e,n,r,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,a){return this._context.createLinearGradient(e,n,r,a)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,a,i,o){return this._context.createRadialGradient(e,n,r,a,i,o)}drawImage(e,n,r,a,i,o,s,l,u){var c=arguments,d=this._context;c.length===3?d.drawImage(e,n,r):c.length===5?d.drawImage(e,n,r,a,i):c.length===9&&d.drawImage(e,n,r,a,i,o,s,l,u)}ellipse(e,n,r,a,i,o,s,l){this._context.ellipse(e,n,r,a,i,o,s,l)}isPointInPath(e,n,r,a){return r?this._context.isPointInPath(r,e,n,a):this._context.isPointInPath(e,n,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,a){this._context.fillRect(e,n,r,a)}strokeRect(e,n,r,a){this._context.strokeRect(e,n,r,a)}fillText(e,n,r,a){a?this._context.fillText(e,n,r,a):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,a){return this._context.getImageData(e,n,r,a)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,a){this._context.rect(e,n,r,a)}roundRect(e,n,r,a,i){this._context.roundRect(e,n,r,a,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,a){this._context.quadraticCurveTo(e,n,r,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,a,i,o){this._context.setTransform(e,n,r,a,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,a){this._context.strokeText(e,n,r,a)}transform(e,n,r,a,i,o){this._context.transform(e,n,r,a,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=lP.length,r=this.setAttr,a,i,o=function(s){var l=e[s],u;e[s]=function(){return i=dee(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:s,args:i}),u}};for(a=0;a<n;a++)o(lP[a]);e.setAttr=function(){r.apply(e,arguments);var s=arguments[0],l=arguments[1];(s==="shadowOffsetX"||s==="shadowOffsetY"||s==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:s,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}Qs.Context=Gy,vee.forEach(function(t){Object.defineProperty(Gy.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class wee extends Gy{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const a=e.getFillPatternImage();if(a&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):a?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(a){for(var o=0;o<a.length;o+=2)i.addColorStop(a[o],a[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var i=e.getStrokeLinearGradientColorStops();i?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,a,i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,s=(a=e.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),c=l.x*u,d=l.y*u;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*d)}}Qs.SceneContext=wee;class kee extends Gy{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),a=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}Qs.HitContext=kee,Object.defineProperty(Po,"__esModule",{value:!0}),Po.HitCanvas=Po.SceneCanvas=Po.Canvas=void 0;const Hy=nr,uP=Qs,cP=Dt,See=Lt,Cee=Qe;var qy;function Iee(){if(qy)return qy;var t=Hy.Util.createCanvasElement(),e=t.getContext("2d");return qy=function(){var n=cP.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),Hy.Util.releaseCanvas(t),qy}class Ky{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||cP.Konva.pixelRatio||Iee();this.pixelRatio=r,this._canvas=Hy.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return Hy.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Po.Canvas=Ky,See.Factory.addGetterSetter(Ky,"pixelRatio",void 0,(0,Cee.getNumberValidator)());class Eee extends Ky{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new uP.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Po.SceneCanvas=Eee;class Tee extends Ky{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new uP.HitContext(this),this.setSize(e.width,e.height)}}Po.HitCanvas=Tee;var Xy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Dt,n=nr;t.DD={get isDragging(){var r=!1;return t.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return t.DD._dragElements.forEach(a=>{r=a.node}),r},_dragElements:new Map,_drag(r){const a=[];t.DD._dragElements.forEach((i,o)=>{const{node:s}=i,l=s.getStage();l.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(p=>p.id===i.pointerId);if(u){if(i.dragStatus!=="dragging"){var c=s.dragDistance(),d=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(d<c||(s.startDrag({evt:r}),!s.isDragging()))return}s._setDragPosition(r,i),a.push(s)}}),a.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const a=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,s=o.getStage();if(r&&s.setPointersPositions(r),!s._changedPointerPositions.find(u=>u.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const l=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;l&&a.indexOf(l)===-1&&a.push(l)}),a.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((a,i)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:r},!0),a.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))})(Xy),Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.Node=void 0;const Gt=nr,Wf=Lt,Gf=Po,fc=Dt,eo=Xy,br=Qe;var Yy="absoluteOpacity",Qy="allEventListeners",Zs="absoluteTransform",dP="absoluteScale",mc="canvas",Nee="Change",_ee="children",Ree="konva",NE="listening",pP="mouseenter",hP="mouseleave",fP="set",mP="Shape",Zy=" ",gP="stage",ru="transform",$ee="Stage",_E="visible",Oee=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Zy);let Mee=1;class gt{constructor(e){this._id=Mee++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===ru||e===Zs)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),a=e===ru||e===Zs,i=r===void 0||a&&r.dirty===!0;return i&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const a=n.map(i=>i+"Change.konva").join(Zy);this.on(a,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(mc)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Zs&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(mc)){const{scene:e,filter:n,hit:r}=this._cache.get(mc);Gt.Util.releaseCanvas(e,n,r),this._cache.delete(mc)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,s=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,c=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!a||!i){Gt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const p=Math.abs(Math.round(r.x)-s)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;a+=u*2+p,i+=u*2+f,s-=u,l-=u;var g=new Gf.SceneCanvas({pixelRatio:o,width:a,height:i}),y=new Gf.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new Gf.HitCanvas({pixelRatio:d,width:a,height:i}),b=g.getContext(),x=v.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(mc),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(g.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),b.save(),x.save(),b.translate(-s,-l),x.translate(-s,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Yy),this._clearSelfAndDescendantCache(dP),this.drawScene(g,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),x.restore(),c&&(b.save(),b.beginPath(),b.rect(0,0,a,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(mc,{scene:g,filter:y,hit:v,x:s,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(mc)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=1/0,i=1/0,o=-1/0,s=-1/0,l=this.getAbsoluteTransform(n);return r.forEach(function(u){var c=l.point(u);a===void 0&&(a=o=c.x,i=s=c.y),a=Math.min(a,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}),{x:a,y:i,width:o-a,height:s-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),a=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/a,r.height/a),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,a=n.filter,i=a.getContext(),o,s,l,u;if(e){if(!this._filterUpToDate){var c=r.pixelRatio;a.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),s=i.getImageData(0,0,a.getWidth(),a.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){Gt.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,s),i.putImageData(s,0,0)}}catch(d){Gt.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return a}return r}on(e,n){if(this._cache&&this._cache.delete(Qy),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(Zy),a=r.length,i,o,s,l,u;for(i=0;i<a;i++)o=r[i],s=o.split("."),l=s[0],u=s[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){var r=(e||"").split(Zy),a=r.length,i,o,s,l,u,c;if(this._cache&&this._cache.delete(Qy),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<a;i++)if(s=r[i],l=s.split("."),u=l[0],c=l[1],u)this.eventListeners[u]&&this._off(u,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var a=this;this.on(e,function(i){for(var o=i.target.findAncestors(n,!0,a),s=0;s<o.length;s++)i=Gt.Util.cloneObject(i),i.currentTarget=o[s],r.call(o[s],i)})}remove(){return this.isDragging()&&this.stopDrag(),eo.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Zs),this._clearSelfAndDescendantCache(Yy),this._clearSelfAndDescendantCache(dP),this._clearSelfAndDescendantCache(gP),this._clearSelfAndDescendantCache(_E),this._clearSelfAndDescendantCache(NE)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Gt.Util._capitalize(e);return Gt.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==_ee&&(r=fP+Gt.Util._capitalize(n),Gt.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(NE,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(_E,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),a=!1;eo.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(a=!0)});var i=!n&&!fc.Konva.hitOnDragEnabled&&a;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,a,i,o,s;function l(c){for(a=[],i=c.length,o=0;o<i;o++)s=c[o],r++,s.nodeType!==mP&&(a=a.concat(s.getChildren().slice())),s._id===n._id&&(o=i);a.length>0&&a[0].getDepth()<=e&&l(a)}const u=this.getStage();return n.nodeType!==$ee&&u&&l(u.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ru),this._clearSelfAndDescendantCache(Zs)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var a=this.getAbsoluteTransform(e).getMatrix(),i=new Gt.Transform,o=this.offset();return i.m=a.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...a}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(ru);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(ru),this._clearSelfAndDescendantCache(Zs),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,a=this.x(),i=this.y();return n!==void 0&&(a+=n),r!==void 0&&(i+=r),this.setPosition({x:a,y:i}),this}_eachAncestorReverse(e,n){var r=[],a=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);a&&(!n||a._id!==n._id);)r.unshift(a),a=a.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Gt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Gt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Gt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Gt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Gt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Gt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Yy,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,r,a,i,o;const s={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=Gt.Util.isObject(r)&&!Gt.Util._isPlainObject(r)&&!Gt.Util._isArray(r),!o&&(a=typeof this[n]=="function"&&this[n],delete e[n],i=a?a.call(this):null,e[n]=r,i!==r&&(s.attrs[n]=r));return Gt.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var a=[];n&&this._isMatch(e)&&a.push(this);for(var i=this.parent;i;){if(i===r)return a;i._isMatch(e)&&a.push(i),i=i.parent}return a}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,a,i;for(a=0;a<r;a++)if(i=n[a],Gt.Util.isValidSelector(i)||(Gt.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Gt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Gt.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(gP,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Zs,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Gt.Transform,this._eachAncestorReverse(function(a){var i=a.transformsEnabled();i==="all"?n.multiply(a.getTransform()):i==="position"&&n.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},e),n;n=this._cache.get(Zs)||new Gt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const a=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,s=this.attrs.offsetY||0;n.translate(a-o,i-s)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ru,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(ru)||new Gt.Transform;r.reset();var a=this.x(),i=this.y(),o=fc.Konva.getAngle(this.rotation()),s=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(a!==0||i!==0)&&r.translate(a,i),o!==0&&r.rotate(o),(u!==0||c!==0)&&r.skew(u,c),(s!==1||l!==1)&&r.scale(s,l),(d!==0||p!==0)&&r.translate(-1*d,-1*p),r.dirty=!1,r}clone(e){var n=Gt.Util.cloneObject(this.attrs),r,a,i,o,s;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(a=this.eventListeners[r],i=a.length,o=0;o<i;o++)s=a[o],s.name.indexOf(Ree)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(s));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),a=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,s=new Gf.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=s.getContext();const u=new Gf.SceneCanvas({width:s.width/s.pixelRatio+Math.abs(a),height:s.height/s.pixelRatio+Math.abs(i),pixelRatio:s.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(a||i)&&l.translate(-1*a,-1*i),this.drawScene(s,void 0,u),l.restore(),s}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(a),a}toImage(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,Gt.Util._urlToImage(this.toDataURL(e),function(i){n(i),a?.(i)})}catch(a){r(a)}})}toBlob(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),a?.(i)},e?.mimeType,e?.quality)}catch(a){r(a)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():fc.Konva.dragDistance}_off(e,n,r){var a=this.eventListeners[e],i,o,s;for(i=0;i<a.length;i++)if(o=a[i].name,s=a[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===s)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+Nee,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[fP+Gt.Util._capitalize(e)];return Gt.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(fc.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!Gt.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var a;r!==void 0&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,a,r))}_fireAndBubble(e,n,r){n&&this.nodeType===mP&&(n.target=this);var a=(e===pP||e===hP)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!a){this._fire(e,n);var i=(e===pP||e===hP)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,a;const i=(n=this._cache.get(Qy))!==null&&n!==void 0?n:{};let o=i?.[e];if(o===void 0){o=[];let s=Object.getPrototypeOf(this);for(;s;){const l=(a=(r=s.eventListeners)===null||r===void 0?void 0:r[e])!==null&&a!==void 0?a:[];o.push(...l),s=Object.getPrototypeOf(s)}i[e]=o,this._cache.set(Qy,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var a=0;a<r.length;a++)r[a].handler.call(this,n);const i=this.eventListeners[e];if(i)for(var a=0;a<i.length;a++)i[a].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),a=this.getAbsolutePosition();if(r){var i=r._getPointerById(n)||r._changedPointerPositions[0]||a;eo.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-a.x,y:i.y-a.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){eo.DD._dragElements.has(this._id)||this._createDragElement(e);const r=eo.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var a={x:r.x-n.offset.x,y:r.y-n.offset.y},i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,a,e);o?a=o:Gt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(e){const n=eo.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),eo.DD._endDragBefore(e),eo.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=eo.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||fc.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var a=!1;eo.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(a=!0)}),a||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=eo.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",a=n&&n.dragStatus==="ready";r?this.stopDrag():a&&eo.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Gt.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return Gt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=gt.prototype.getClassName.call(e),a=e.children,i,o,s;n&&(e.attrs.container=n),fc.Konva[r]||(Gt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=fc.Konva[r];if(i=new l(e.attrs),a)for(o=a.length,s=0;s<o;s++)i.add(gt._createNode(a[s]));return i}}Gn.Node=gt,gt.prototype.nodeType="Node",gt.prototype._attrsAffectingSize=[],gt.prototype.eventListeners={},gt.prototype.on.call(gt.prototype,Oee,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ru),this._clearSelfAndDescendantCache(Zs)}),gt.prototype.on.call(gt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(_E)}),gt.prototype.on.call(gt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(NE)}),gt.prototype.on.call(gt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Yy)});const Sn=Wf.Factory.addGetterSetter;Sn(gt,"zIndex"),Sn(gt,"absolutePosition"),Sn(gt,"position"),Sn(gt,"x",0,(0,br.getNumberValidator)()),Sn(gt,"y",0,(0,br.getNumberValidator)()),Sn(gt,"globalCompositeOperation","source-over",(0,br.getStringValidator)()),Sn(gt,"opacity",1,(0,br.getNumberValidator)()),Sn(gt,"name","",(0,br.getStringValidator)()),Sn(gt,"id","",(0,br.getStringValidator)()),Sn(gt,"rotation",0,(0,br.getNumberValidator)()),Wf.Factory.addComponentsGetterSetter(gt,"scale",["x","y"]),Sn(gt,"scaleX",1,(0,br.getNumberValidator)()),Sn(gt,"scaleY",1,(0,br.getNumberValidator)()),Wf.Factory.addComponentsGetterSetter(gt,"skew",["x","y"]),Sn(gt,"skewX",0,(0,br.getNumberValidator)()),Sn(gt,"skewY",0,(0,br.getNumberValidator)()),Wf.Factory.addComponentsGetterSetter(gt,"offset",["x","y"]),Sn(gt,"offsetX",0,(0,br.getNumberValidator)()),Sn(gt,"offsetY",0,(0,br.getNumberValidator)()),Sn(gt,"dragDistance",null,(0,br.getNumberValidator)()),Sn(gt,"width",0,(0,br.getNumberValidator)()),Sn(gt,"height",0,(0,br.getNumberValidator)()),Sn(gt,"listening",!0,(0,br.getBooleanValidator)()),Sn(gt,"preventDefault",!0,(0,br.getBooleanValidator)()),Sn(gt,"filters",null,function(t){return this._filterUpToDate=!1,t}),Sn(gt,"visible",!0,(0,br.getBooleanValidator)()),Sn(gt,"transformsEnabled","all",(0,br.getStringValidator)()),Sn(gt,"size"),Sn(gt,"dragBoundFunc"),Sn(gt,"draggable",!1,(0,br.getBooleanValidator)()),Wf.Factory.backCompat(gt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var gc={};Object.defineProperty(gc,"__esModule",{value:!0}),gc.Container=void 0;const cp=Lt,RE=Gn,Jy=Qe;class yc extends RE.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(a){e(a)&&r.push(a)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(a=>{const i=a._isMatch(e);return i&&r.push(a),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const a of r)if(n=e(a),n||a.hasChildren()&&(n=a._descendants(e),n))return!0;return!1}toObject(){var e=RE.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=RE.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){var a=this.getLayer(),i=e||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),a=e||r&&r.hitCanvas,i=a&&a.getContext(),o=this._getCanvasCache(),s=o&&o.hit;if(s){i.save();var l=this.getAbsoluteTransform(n).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",a,n);return this}_drawChildren(e,n,r,a){var i,o=n&&n.getContext(),s=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),c=s&&l||u;const d=r===this;if(c){o.save();var p=this.getAbsoluteTransform(r),f=p.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let b;if(u)b=u.call(this,o,this);else{var g=this.clipX(),y=this.clipY();o.rect(g,y,s,l)}o.clip.apply(o,b),f=p.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var v=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(b){b[e](n,r,a)}),v&&o.restore(),c&&o.restore()}getClientRect(e={}){var n,r=e.skipTransform,a=e.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(y.visible()){var v=y.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});v.width===0&&v.height===0||(i===void 0?(i=v.x,o=v.y,s=v.x+v.width,l=v.y+v.height):(i=Math.min(i,v.x),o=Math.min(o,v.y),s=Math.max(s,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var d=this.find("Shape"),p=!1,f=0;f<d.length;f++){var g=d[f];if(g._isVisible(this)){p=!0;break}}return p&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,a)}}gc.Container=yc,cp.Factory.addComponentsGetterSetter(yc,"clip",["x","y","width","height"]),cp.Factory.addGetterSetter(yc,"clipX",void 0,(0,Jy.getNumberValidator)()),cp.Factory.addGetterSetter(yc,"clipY",void 0,(0,Jy.getNumberValidator)()),cp.Factory.addGetterSetter(yc,"clipWidth",void 0,(0,Jy.getNumberValidator)()),cp.Factory.addGetterSetter(yc,"clipHeight",void 0,(0,Jy.getNumberValidator)()),cp.Factory.addGetterSetter(yc,"clipFunc");var yP={},_i={};Object.defineProperty(_i,"__esModule",{value:!0}),_i.releaseCapture=_i.setPointerCapture=_i.hasPointerCapture=_i.createEvent=_i.getCapturedShape=void 0;const Pee=Dt,Hf=new Map,bP=Pee.Konva._global.PointerEvent!==void 0;function Aee(t){return Hf.get(t)}_i.getCapturedShape=Aee;function $E(t){return{evt:t,pointerId:t.pointerId}}_i.createEvent=$E;function Dee(t,e){return Hf.get(t)===e}_i.hasPointerCapture=Dee;function Lee(t,e){vP(t),e.getStage()&&(Hf.set(t,e),bP&&e._fire("gotpointercapture",$E(new PointerEvent("gotpointercapture"))))}_i.setPointerCapture=Lee;function vP(t,e){const n=Hf.get(t);if(!n)return;const r=n.getStage();r&&r.content,Hf.delete(t),bP&&n._fire("lostpointercapture",$E(new PointerEvent("lostpointercapture")))}_i.releaseCapture=vP,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=nr,n=Lt,r=gc,a=Dt,i=Po,o=Xy,s=Dt,l=_i;var u="Stage",c="string",d="px",p="mouseout",f="mouseleave",g="mouseover",y="mouseenter",v="mousemove",b="mousedown",x="mouseup",w="pointermove",S="pointerdown",C="pointerup",E="pointercancel",_="lostpointercapture",N="pointerout",M="pointerleave",P="pointerover",L="pointerenter",U="contextmenu",B="touchstart",K="touchend",X="touchmove",Z="touchcancel",H="wheel",F=5,Y=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[f,"_pointerleave"],[B,"_pointerdown"],[X,"_pointermove"],[K,"_pointerup"],[Z,"_pointercancel"],[g,"_pointerover"],[H,"_wheel"],[U,"_contextmenu"],[S,"_pointerdown"],[w,"_pointermove"],[C,"_pointerup"],[E,"_pointercancel"],[_,"_lostpointercapture"]];const Q={mouse:{[N]:p,[M]:f,[P]:g,[L]:y,[w]:v,[S]:b,[C]:x,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[N]:"touchout",[M]:"touchleave",[P]:"touchover",[L]:"touchenter",[w]:X,[S]:B,[C]:K,[E]:Z,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[N]:N,[M]:M,[P]:P,[L]:L,[w]:w,[S]:S,[C]:C,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ne=xe=>xe.indexOf("pointer")>=0?"pointer":xe.indexOf("touch")>=0?"touch":"mouse",se=xe=>{const q=ne(xe);if(q==="pointer")return a.Konva.pointerEventsEnabled&&Q.pointer;if(q==="touch")return Q.touch;if(q==="mouse")return Q.mouse};function pe(xe={}){return(xe.clipFunc||xe.clipWidth||xe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),xe}const de="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ie extends r.Container{constructor(q){super(pe(q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{pe(this.attrs)}),this._checkVisibility()}_validateAdd(q){const oe=q.getType()==="Layer",he=q.getType()==="FastLayer";oe||he||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const q=this.visible()?"":"none";this.content.style.display=q}setContainer(q){if(typeof q===c){if(q.charAt(0)==="."){var oe=q.slice(1);q=document.getElementsByClassName(oe)[0]}else{var he;q.charAt(0)!=="#"?he=q:he=q.slice(1),q=document.getElementById(he)}if(!q)throw"Can not find container in document with id "+he}return this._setAttr("container",q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var q=this.children,oe=q.length,he;for(he=0;he<oe;he++)q[he].clear();return this}clone(q){return q||(q={}),q.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,q)}destroy(){super.destroy();var q=this.content;q&&e.Util._isInDocument(q)&&this.container().removeChild(q);var oe=t.stages.indexOf(this);return oe>-1&&t.stages.splice(oe,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const q=this._pointerPositions[0]||this._changedPointerPositions[0];return q?{x:q.x,y:q.y}:(e.Util.warn(de),null)}_getPointerById(q){return this._pointerPositions.find(oe=>oe.id===q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(q){q=q||{},q.x=q.x||0,q.y=q.y||0,q.width=q.width||this.width(),q.height=q.height||this.height();var oe=new i.SceneCanvas({width:q.width,height:q.height,pixelRatio:q.pixelRatio||1}),he=oe.getContext()._context,Ie=this.children;return(q.x||q.y)&&he.translate(-1*q.x,-1*q.y),Ie.forEach(function(Ee){if(Ee.isVisible()){var _e=Ee._toKonvaCanvas(q);he.drawImage(_e._canvas,q.x,q.y,_e.getWidth()/_e.getPixelRatio(),_e.getHeight()/_e.getPixelRatio())}}),oe}getIntersection(q){if(!q)return null;var oe=this.children,he=oe.length,Ie=he-1,Ee;for(Ee=Ie;Ee>=0;Ee--){const _e=oe[Ee].getIntersection(q);if(_e)return _e}return null}_resizeDOM(){var q=this.width(),oe=this.height();this.content&&(this.content.style.width=q+d,this.content.style.height=oe+d),this.bufferCanvas.setSize(q,oe),this.bufferHitCanvas.setSize(q,oe),this.children.forEach(he=>{he.setSize({width:q,height:oe}),he.draw()})}add(q,...oe){if(arguments.length>1){for(var he=0;he<arguments.length;he++)this.add(arguments[he]);return this}super.add(q);var Ie=this.children.length;return Ie>F&&e.Util.warn("The stage has "+Ie+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),q.setSize({width:this.width(),height:this.height()}),q.draw(),a.Konva.isBrowser&&this.content.appendChild(q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(q){return l.hasPointerCapture(q,this)}setPointerCapture(q){l.setPointerCapture(q,this)}releaseCapture(q){l.releaseCapture(q,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&Y.forEach(([q,oe])=>{this.content.addEventListener(q,he=>{this[oe](he)},{passive:!1})})}_pointerenter(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerenter,{evt:q,target:this,currentTarget:this})}_pointerover(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this})}_getTargetShape(q){let oe=this[q+"targetShape"];return oe&&!oe.getStage()&&(oe=null),oe}_pointerleave(q){const oe=se(q.type),he=ne(q.type);if(oe){this.setPointersPositions(q);var Ie=this._getTargetShape(he),Ee=!o.DD.isDragging||a.Konva.hitOnDragEnabled;Ie&&Ee?(Ie._fireAndBubble(oe.pointerout,{evt:q}),Ie._fireAndBubble(oe.pointerleave,{evt:q}),this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this[he+"targetShape"]=null):Ee&&(this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this._fire(oe.pointerout,{evt:q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(q){const oe=se(q.type),he=ne(q.type);if(oe){this.setPointersPositions(q);var Ie=!1;this._changedPointerPositions.forEach(Ee=>{var _e=this.getIntersection(Ee);if(o.DD.justDragged=!1,a.Konva["_"+he+"ListenClick"]=!0,!_e||!_e.isListening())return;a.Konva.capturePointerEventsEnabled&&_e.setPointerCapture(Ee.id),this[he+"ClickStartShape"]=_e,_e._fireAndBubble(oe.pointerdown,{evt:q,pointerId:Ee.id}),Ie=!0;const Fe=q.type.indexOf("touch")>=0;_e.preventDefault()&&q.cancelable&&Fe&&q.preventDefault()}),Ie||this._fire(oe.pointerdown,{evt:q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(q){const oe=se(q.type),he=ne(q.type);if(!oe)return;o.DD.isDragging&&o.DD.node.preventDefault()&&q.cancelable&&q.preventDefault(),this.setPointersPositions(q);var Ie=!o.DD.isDragging||a.Konva.hitOnDragEnabled;if(!Ie)return;var Ee={};let _e=!1;var Fe=this._getTargetShape(he);this._changedPointerPositions.forEach(Xe=>{const Oe=l.getCapturedShape(Xe.id)||this.getIntersection(Xe),lt=Xe.id,Je={evt:q,pointerId:lt};var nt=Fe!==Oe;if(nt&&Fe&&(Fe._fireAndBubble(oe.pointerout,{...Je},Oe),Fe._fireAndBubble(oe.pointerleave,{...Je},Oe)),Oe){if(Ee[Oe._id])return;Ee[Oe._id]=!0}Oe&&Oe.isListening()?(_e=!0,nt&&(Oe._fireAndBubble(oe.pointerover,{...Je},Fe),Oe._fireAndBubble(oe.pointerenter,{...Je},Fe),this[he+"targetShape"]=Oe),Oe._fireAndBubble(oe.pointermove,{...Je})):Fe&&(this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this,pointerId:lt}),this[he+"targetShape"]=null)}),_e||this._fire(oe.pointermove,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(q){const oe=se(q.type),he=ne(q.type);if(!oe)return;this.setPointersPositions(q);const Ie=this[he+"ClickStartShape"],Ee=this[he+"ClickEndShape"];var _e={};let Fe=!1;this._changedPointerPositions.forEach(Xe=>{const Oe=l.getCapturedShape(Xe.id)||this.getIntersection(Xe);if(Oe){if(Oe.releaseCapture(Xe.id),_e[Oe._id])return;_e[Oe._id]=!0}const lt=Xe.id,Je={evt:q,pointerId:lt};let nt=!1;a.Konva["_"+he+"InDblClickWindow"]?(nt=!0,clearTimeout(this[he+"DblTimeout"])):o.DD.justDragged||(a.Konva["_"+he+"InDblClickWindow"]=!0,clearTimeout(this[he+"DblTimeout"])),this[he+"DblTimeout"]=setTimeout(function(){a.Konva["_"+he+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),Oe&&Oe.isListening()?(Fe=!0,this[he+"ClickEndShape"]=Oe,Oe._fireAndBubble(oe.pointerup,{...Je}),a.Konva["_"+he+"ListenClick"]&&Ie&&Ie===Oe&&(Oe._fireAndBubble(oe.pointerclick,{...Je}),nt&&Ee&&Ee===Oe&&Oe._fireAndBubble(oe.pointerdblclick,{...Je}))):(this[he+"ClickEndShape"]=null,a.Konva["_"+he+"ListenClick"]&&this._fire(oe.pointerclick,{evt:q,target:this,currentTarget:this,pointerId:lt}),nt&&this._fire(oe.pointerdblclick,{evt:q,target:this,currentTarget:this,pointerId:lt}))}),Fe||this._fire(oe.pointerup,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+he+"ListenClick"]=!1,q.cancelable&&he!=="touch"&&q.preventDefault()}_contextmenu(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(U,{evt:q}):this._fire(U,{evt:q,target:this,currentTarget:this})}_wheel(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(H,{evt:q}):this._fire(H,{evt:q,target:this,currentTarget:this})}_pointercancel(q){this.setPointersPositions(q);const oe=l.getCapturedShape(q.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(C,l.createEvent(q)),l.releaseCapture(q.pointerId)}_lostpointercapture(q){l.releaseCapture(q.pointerId)}setPointersPositions(q){var oe=this._getContentPosition(),he=null,Ie=null;q=q||window.event,q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(q.touches,Ee=>{this._pointerPositions.push({id:Ee.identifier,x:(Ee.clientX-oe.left)/oe.scaleX,y:(Ee.clientY-oe.top)/oe.scaleY})}),Array.prototype.forEach.call(q.changedTouches||q.touches,Ee=>{this._changedPointerPositions.push({id:Ee.identifier,x:(Ee.clientX-oe.left)/oe.scaleX,y:(Ee.clientY-oe.top)/oe.scaleY})})):(he=(q.clientX-oe.left)/oe.scaleX,Ie=(q.clientY-oe.top)/oe.scaleY,this.pointerPos={x:he,y:Ie},this._pointerPositions=[{x:he,y:Ie,id:e.Util._getFirstPointerId(q)}],this._changedPointerPositions=[{x:he,y:Ie,id:e.Util._getFirstPointerId(q)}])}_setPointerPosition(q){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var q=this.content.getBoundingClientRect();return{top:q.top,left:q.left,scaleX:q.width/this.content.clientWidth||1,scaleY:q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!a.Konva.isBrowser){var q=this.container();if(!q)throw"Stage has no container. A container is required.";q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),q.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(q){q.batchDraw()}),this}}t.Stage=ie,ie.prototype.nodeType=u,(0,s._registerNode)(ie),n.Factory.addGetterSetter(ie,"container")}(yP);var qf={},Ar={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Dt,n=nr,r=Lt,a=Gn,i=Qe,o=Dt,s=_i;var l="hasShadow",u="shadowRGBA",c="patternImage",d="linearGradient",p="radialGradient";let f;function g(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y(M){const P=this.attrs.fillRule;P?M.fill(P):M.fill()}function v(M){M.stroke()}function b(M){M.fill()}function x(M){M.stroke()}function w(){this._clearCache(l)}function S(){this._clearCache(u)}function C(){this._clearCache(c)}function E(){this._clearCache(d)}function _(){this._clearCache(p)}class N extends a.Node{constructor(P){super(P);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in t.shapes)););this.colorKey=L,t.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var P=g();const L=P.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const U=new n.Transform;U.translate(this.fillPatternX(),this.fillPatternY()),U.rotate(e.Konva.getAngle(this.fillPatternRotation())),U.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),U.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const B=U.getMatrix(),K=typeof DOMMatrix>"u"?{a:B[0],b:B[1],c:B[2],d:B[3],e:B[4],f:B[5]}:new DOMMatrix(B);L.setTransform(K)}return L}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var P=this.fillLinearGradientColorStops();if(P){for(var L=g(),U=this.fillLinearGradientStartPoint(),B=this.fillLinearGradientEndPoint(),K=L.createLinearGradient(U.x,U.y,B.x,B.y),X=0;X<P.length;X+=2)K.addColorStop(P[X],P[X+1]);return K}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var P=this.fillRadialGradientColorStops();if(P){for(var L=g(),U=this.fillRadialGradientStartPoint(),B=this.fillRadialGradientEndPoint(),K=L.createRadialGradient(U.x,U.y,this.fillRadialGradientStartRadius(),B.x,B.y,this.fillRadialGradientEndRadius()),X=0;X<P.length;X+=2)K.addColorStop(P[X],P[X+1]);return K}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){var L=this.getStage();if(!L)return!1;const U=L.bufferHitCanvas;return U.getContext().clear(),this.drawHit(U,void 0,!0),U.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var L;if(!(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0)||L))return!1;const U=P||this.hasFill(),B=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(U&&B&&K)return!0;const X=this.hasShadow(),Z=this.shadowForStrokeEnabled();return!!(U&&B&&X&&Z)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){const L=P.skipTransform,U=P.relativeTo,B=this.getSelfRect(),K=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,X=B.width+K,Z=B.height+K,H=!P.skipShadow&&this.hasShadow(),F=H?this.shadowOffsetX():0,Y=H?this.shadowOffsetY():0,Q=X+Math.abs(F),ne=Z+Math.abs(Y),se=H&&this.shadowBlur()||0,pe=Q+se*2,de=ne+se*2,ie={width:pe,height:de,x:-(K/2+se)+Math.min(F,0)+B.x,y:-(K/2+se)+Math.min(Y,0)+B.y};return L?ie:this._transformedRect(ie,U)}drawScene(P,L,U){var B=this.getLayer(),K=P||B.getCanvas(),X=K.getContext(),Z=this._getCanvasCache(),H=this.getSceneFunc(),F=this.hasShadow(),Y,Q,ne=K.isCache,se=L===this;if(!this.isVisible()&&!se)return this;if(Z){X.save();var pe=this.getAbsoluteTransform(L).getMatrix();return X.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5]),this._drawCachedSceneCanvas(X),X.restore(),this}if(!H)return this;if(X.save(),this._useBufferCanvas()&&!ne){Y=this.getStage();const xe=U||Y.bufferCanvas;Q=xe.getContext(),Q.clear(),Q.save(),Q._applyLineJoin(this);var de=this.getAbsoluteTransform(L).getMatrix();Q.transform(de[0],de[1],de[2],de[3],de[4],de[5]),H.call(this,Q,this),Q.restore();var ie=xe.pixelRatio;F&&X._applyShadow(this),X._applyOpacity(this),X._applyGlobalCompositeOperation(this),X.drawImage(xe._canvas,0,0,xe.width/ie,xe.height/ie)}else{if(X._applyLineJoin(this),!se){var de=this.getAbsoluteTransform(L).getMatrix();X.transform(de[0],de[1],de[2],de[3],de[4],de[5]),X._applyOpacity(this),X._applyGlobalCompositeOperation(this)}F&&X._applyShadow(this),H.call(this,X,this)}return X.restore(),this}drawHit(P,L,U=!1){if(!this.shouldDrawHit(L,U))return this;var B=this.getLayer(),K=P||B.hitCanvas,X=K&&K.getContext(),Z=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),F=H&&H.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),F){X.save();var Y=this.getAbsoluteTransform(L).getMatrix();return X.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedHitCanvas(X),X.restore(),this}if(!Z)return this;if(X.save(),X._applyLineJoin(this),this!==L){var Q=this.getAbsoluteTransform(L).getMatrix();X.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return Z.call(this,X,this),X.restore(),this}drawHitFromCache(P=0){var L=this._getCanvasCache(),U=this._getCachedSceneCanvas(),B=L.hit,K=B.getContext(),X=B.getWidth(),Z=B.getHeight(),H,F,Y,Q,ne,se;K.clear(),K.drawImage(U._canvas,0,0,X,Z);try{for(H=K.getImageData(0,0,X,Z),F=H.data,Y=F.length,Q=n.Util._hexToRgb(this.colorKey),ne=0;ne<Y;ne+=4)se=F[ne+3],se>P?(F[ne]=Q.r,F[ne+1]=Q.g,F[ne+2]=Q.b,F[ne+3]=255):F[ne+3]=0;K.putImageData(H,0,0)}catch(pe){n.Util.error("Unable to draw hit graph from cached scene canvas. "+pe.message)}return this}hasPointerCapture(P){return s.hasPointerCapture(P,this)}setPointerCapture(P){s.setPointerCapture(P,this)}releaseCapture(P){s.releaseCapture(P,this)}}t.Shape=N,N.prototype._fillFunc=y,N.prototype._strokeFunc=v,N.prototype._fillFuncHit=b,N.prototype._strokeFuncHit=x,N.prototype._centroid=!1,N.prototype.nodeType="Shape",(0,o._registerNode)(N),N.prototype.eventListeners={},N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_),r.Factory.addGetterSetter(N,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(N,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(N,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(N,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"lineJoin"),r.Factory.addGetterSetter(N,"lineCap"),r.Factory.addGetterSetter(N,"sceneFunc"),r.Factory.addGetterSetter(N,"hitFunc"),r.Factory.addGetterSetter(N,"dash"),r.Factory.addGetterSetter(N,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(N,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(N,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternImage"),r.Factory.addGetterSetter(N,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(N,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(N,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(N,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(N,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(N,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(N,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(N,"fillEnabled",!0),r.Factory.addGetterSetter(N,"strokeEnabled",!0),r.Factory.addGetterSetter(N,"shadowEnabled",!0),r.Factory.addGetterSetter(N,"dashEnabled",!0),r.Factory.addGetterSetter(N,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(N,"fillPriority","color"),r.Factory.addComponentsGetterSetter(N,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(N,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(N,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(N,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(N,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(N,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(N,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(N,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(N,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(N,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(N,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(N,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(N,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(N,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(N,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(N,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(N,"fillPatternRotation",0),r.Factory.addGetterSetter(N,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(N,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Ar),Object.defineProperty(qf,"__esModule",{value:!0}),qf.Layer=void 0;const Js=nr,OE=gc,dp=Gn,ME=Lt,xP=Po,Fee=Qe,Bee=Ar,zee=Dt;var Uee="#",jee="beforeDraw",Vee="draw",wP=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Wee=wP.length;let pp=class extends OE.Container{constructor(t){super(t),this.canvas=new xP.SceneCanvas,this.hitCanvas=new xP.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){dp.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=dp.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(dp.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(dp.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return dp.Node.prototype.remove.call(this),t&&t.parentNode&&Js.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&Js.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),dp.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Js.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Js.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Js.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let r=0;r<Wee;r++){const a=wP[r],i=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),o=i.shape;if(o)return o;if(n=!!i.antialiased,!i.antialiased)break}if(n)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(r===255){const a=Js.Util._rgbToHex(n[0],n[1],n[2]),i=Bee.shapes[Uee+a];return i?{shape:i}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire(jee,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),OE.Container.prototype.drawScene.call(this,r,e),this._fire(Vee,{node:this}),this}drawHit(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),OE.Container.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Js.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Js.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Js.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};qf.Layer=pp,pp.prototype.nodeType="Layer",(0,zee._registerNode)(pp),ME.Factory.addGetterSetter(pp,"imageSmoothingEnabled",!0),ME.Factory.addGetterSetter(pp,"clearBeforeDraw",!0),ME.Factory.addGetterSetter(pp,"hitGraphEnabled",!0,(0,Fee.getBooleanValidator)());var eb={};Object.defineProperty(eb,"__esModule",{value:!0}),eb.FastLayer=void 0;const Gee=nr,Hee=qf,qee=Dt;class PE extends Hee.Layer{constructor(e){super(e),this.listening(!1),Gee.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}eb.FastLayer=PE,PE.prototype.nodeType="FastLayer",(0,qee._registerNode)(PE);var hp={};Object.defineProperty(hp,"__esModule",{value:!0}),hp.Group=void 0;const Kee=nr,Xee=gc,Yee=Dt;class AE extends Xee.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Kee.Util.throw("You may only add groups and shapes to groups.")}}hp.Group=AE,AE.prototype.nodeType="Group",(0,Yee._registerNode)(AE);var fp={};Object.defineProperty(fp,"__esModule",{value:!0}),fp.Animation=void 0;const DE=Dt,kP=nr,LE=function(){return DE.glob.performance&&DE.glob.performance.now?function(){return DE.glob.performance.now()}:function(){return new Date().getTime()}}();class Ss{constructor(e,n){this.id=Ss.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:LE(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let a=0;a<r;a++)if(n[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Ss.animations,n=e.length;for(let r=0;r<n;r++)if(e[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=LE(),Ss._addAnimation(this),this}stop(){return Ss._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,a=r.length;for(let i=0;i<a;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const a=n[r],i=a.layers,o=a.func;a._updateFrameObject(LE());const s=i.length;let l;if(o?l=o.call(a,a.frame)!==!1:l=!0,!!l)for(let u=0;u<s;u++){const c=i[u];c._id!==void 0&&(e[c._id]=c)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Ss;e.animations.length?(e._runFrames(),kP.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,kP.Util.requestAnimFrame(this._animationLoop))}}fp.Animation=Ss,Ss.animations=[],Ss.animIdCounter=0,Ss.animRunning=!1;var SP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=nr,n=fp,r=Gn,a=Dt;var i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,c=["fill","stroke","shadowColor"];class d{constructor(g,y,v,b,x,w,S){this.prop=g,this.propFunc=y,this.begin=b,this._pos=b,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=x-this.begin,this.pause()}fire(g){var y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var g=this.getTimer()-this._startTime;this.state===s?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){var y=this,v=g.node,b=v._id,x,w=g.easing||t.Easings.Linear,S=!!g.yoyo,C;typeof g.duration>"u"?x=.3:g.duration===0?x=.001:x=g.duration,this.node=v,this._id=u++;var E=v.getLayer()||(v instanceof a.Konva.Stage?v.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},E),this.tween=new d(C,function(_){y._tweenFunc(_)},w,0,1,x*1e3,S),this._addListeners(),p.attrs[b]||(p.attrs[b]={}),p.attrs[b][this._id]||(p.attrs[b][this._id]={}),p.tweens[b]||(p.tweens[b]={});for(C in g)i[C]===void 0&&this._addAttr(C,g[C]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){var v=this.node,b=v._id,x,w,S,C,E,_,N,M;if(S=p.tweens[b][g],S&&delete p.attrs[b][S][g],x=v.getAttr(g),e.Util._isArray(y))if(w=[],E=Math.max(y.length,x.length),g==="points"&&y.length!==x.length&&(y.length>x.length?(N=x,x=e.Util._prepareArrayForTween(x,y,v.closed())):(_=y,y=e.Util._prepareArrayForTween(y,x,v.closed()))),g.indexOf("fill")===0)for(C=0;C<E;C++)if(C%2===0)w.push(y[C]-x[C]);else{var P=e.Util.colorToRGBA(x[C]);M=e.Util.colorToRGBA(y[C]),x[C]=P,w.push({r:M.r-P.r,g:M.g-P.g,b:M.b-P.b,a:M.a-P.a})}else for(C=0;C<E;C++)w.push(y[C]-x[C]);else c.indexOf(g)!==-1?(x=e.Util.colorToRGBA(x),M=e.Util.colorToRGBA(y),w={r:M.r-x.r,g:M.g-x.g,b:M.b-x.b,a:M.a-x.a}):w=y-x;p.attrs[b][this._id][g]={start:x,diff:w,end:y,trueEnd:_,trueStart:N},p.tweens[b][g]=this._id}_tweenFunc(g){var y=this.node,v=p.attrs[y._id][this._id],b,x,w,S,C,E,_,N;for(b in v){if(x=v[b],w=x.start,S=x.diff,N=x.end,e.Util._isArray(w))if(C=[],_=Math.max(w.length,N.length),b.indexOf("fill")===0)for(E=0;E<_;E++)E%2===0?C.push((w[E]||0)+S[E]*g):C.push("rgba("+Math.round(w[E].r+S[E].r*g)+","+Math.round(w[E].g+S[E].g*g)+","+Math.round(w[E].b+S[E].b*g)+","+(w[E].a+S[E].a*g)+")");else for(E=0;E<_;E++)C.push((w[E]||0)+S[E]*g);else c.indexOf(b)!==-1?C="rgba("+Math.round(w.r+S.r*g)+","+Math.round(w.g+S.g*g)+","+Math.round(w.b+S.b*g)+","+(w.a+S.a*g)+")":C=w+S*g;y.setAttr(b,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var g=this.node._id,y=this._id,v=p.tweens[g],b;this.pause();for(b in v)delete p.tweens[g][b];delete p.attrs[g][y]}}t.Tween=p,p.attrs={},p.tweens={},r.Node.prototype.to=function(f){var g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()};var y=new p(f);y.play()},t.Easings={BackEaseIn(f,g,y,v){var b=1.70158;return y*(f/=v)*f*((b+1)*f-b)+g},BackEaseOut(f,g,y,v){var b=1.70158;return y*((f=f/v-1)*f*((b+1)*f+b)+1)+g},BackEaseInOut(f,g,y,v){var b=1.70158;return(f/=v/2)<1?y/2*(f*f*(((b*=1.525)+1)*f-b))+g:y/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+g},ElasticEaseIn(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g)},ElasticEaseOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),b*Math.pow(2,-10*f)*Math.sin((f*v-w)*(2*Math.PI)/x)+y+g)},ElasticEaseInOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v/2)===2?g+y:(x||(x=v*(.3*1.5)),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g:b*Math.pow(2,-10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x)*.5+y+g)},BounceEaseOut(f,g,y,v){return(f/=v)<1/2.75?y*(7.5625*f*f)+g:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+g:y*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,y,v){return y-t.Easings.BounceEaseOut(v-f,0,y,v)+g},BounceEaseInOut(f,g,y,v){return f<v/2?t.Easings.BounceEaseIn(f*2,0,y,v)*.5+g:t.Easings.BounceEaseOut(f*2-v,0,y,v)*.5+y*.5+g},EaseIn(f,g,y,v){return y*(f/=v)*f+g},EaseOut(f,g,y,v){return-y*(f/=v)*(f-2)+g},EaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f+g:-y/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,y,v){return y*(f/=v)*f*f*f*f+g},StrongEaseOut(f,g,y,v){return y*((f=f/v-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f*f*f*f+g:y/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,y,v){return y*f/v+g}}})(SP),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Dt,n=nr,r=Gn,a=gc,i=yP,o=qf,s=eb,l=hp,u=Xy,c=Ar,d=fp,p=SP,f=Qs,g=Po;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:a.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:s.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:d.Animation,Tween:p.Tween,Easings:p.Easings,Context:f.Context,Canvas:g.Canvas}),t.default=t.Konva}(Wy);var tb={};Object.defineProperty(tb,"__esModule",{value:!0}),tb.Arc=void 0;const nb=Lt,Qee=Ar,CP=Dt,rb=Qe,Zee=Dt;class el extends Qee.Shape{_sceneFunc(e){var n=CP.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),a=CP.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(a,Math.PI)),o=1,s=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),l=Math.sin(Math.min(a,Math.PI/2)),u=i*(i>0?e:n),c=o*n,d=s*(s>0?e:n),p=l*(l>0?n:e);return{x:u,y:r?-1*p:d,width:c-u,height:p-d}}}tb.Arc=el,el.prototype._centroid=!0,el.prototype.className="Arc",el.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Zee._registerNode)(el),nb.Factory.addGetterSetter(el,"innerRadius",0,(0,rb.getNumberValidator)()),nb.Factory.addGetterSetter(el,"outerRadius",0,(0,rb.getNumberValidator)()),nb.Factory.addGetterSetter(el,"angle",0,(0,rb.getNumberValidator)()),nb.Factory.addGetterSetter(el,"clockwise",!1,(0,rb.getBooleanValidator)());var ab={},Kf={};Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.Line=void 0;const ib=Lt,Jee=Ar,IP=Qe,ete=Dt;function FE(t,e,n,r,a,i,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(a-n,2)+Math.pow(i-r,2)),u=o*s/(s+l),c=o*l/(s+l),d=n-u*(a-t),p=r-u*(i-e),f=n+c*(a-t),g=r+c*(i-e);return[d,p,f,g]}function EP(t,e){var n=t.length,r=[],a,i;for(a=2;a<n-2;a+=2)i=FE(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],e),!isNaN(i[0])&&(r.push(i[0]),r.push(i[1]),r.push(t[a]),r.push(t[a+1]),r.push(i[2]),r.push(i[3]));return r}class au extends Jee.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,a=this.tension(),i=this.closed(),o=this.bezier(),s,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),a!==0&&r>4){for(s=this.getTensionPoints(),l=s.length,u=i?0:4,i||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);u<l-2;)e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]);i||e.quadraticCurveTo(s[l-2],s[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():EP(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),a=FE(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=FE(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=EP(e,r),s=[a[2],a[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],a[0],a[1],e[0],e[1]]);return s}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);return{x:n,y:a,width:r-n,height:i-a}}}Kf.Line=au,au.prototype.className="Line",au.prototype._attrsAffectingSize=["points","bezier","tension"],(0,ete._registerNode)(au),ib.Factory.addGetterSetter(au,"closed",!1),ib.Factory.addGetterSetter(au,"bezier",!1),ib.Factory.addGetterSetter(au,"tension",0,(0,IP.getNumberValidator)()),ib.Factory.addGetterSetter(au,"points",[],(0,IP.getNumberArrayValidator)());var mp={},TP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,s,l)=>{let u,c,d;u=l/2,c=0;for(let p=0;p<20;p++)d=u*t.tValues[20][p]+u,c+=t.cValues[20][p]*r(o,s,d);return u*c};t.getCubicArcLength=e;const n=(o,s,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],c=s[0]-2*s[1]+s[2],d=2*o[1]-2*o[0],p=2*s[1]-2*s[0],f=4*(u*u+c*c),g=4*(u*d+c*p),y=d*d+p*p;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(s[2]-s[0],2));const v=g/(2*f),b=y/f,x=l+v,w=b-v*v,S=x*x+w>0?Math.sqrt(x*x+w):0,C=v*v+w>0?Math.sqrt(v*v+w):0,E=v+Math.sqrt(v*v+w)!==0?w*Math.log(Math.abs((x+S)/(v+C))):0;return Math.sqrt(f)/2*(x*S-v*C+E)};t.getQuadraticArcLength=n;function r(o,s,l){const u=a(1,l,o),c=a(1,l,s),d=u*u+c*c;return Math.sqrt(d)}const a=(o,s,l)=>{const u=l.length-1;let c,d;if(u===0)return 0;if(o===0){d=0;for(let p=0;p<=u;p++)d+=t.binomialCoefficients[u][p]*Math.pow(1-s,u-p)*Math.pow(s,p)*l[p];return d}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return a(o-1,s,c)}},i=(o,s,l)=>{let u=1,c=o/s,d=(o-l(c))/s,p=0;for(;u>.001;){const f=l(c+d),g=Math.abs(o-f)/s;if(g<u)u=g,c+=d;else{const y=l(c-d),v=Math.abs(o-y)/s;v<u?(u=v,c-=d):d/=2}if(p++,p>500)break}return c};t.t2length=i})(TP),Object.defineProperty(mp,"__esModule",{value:!0}),mp.Path=void 0;const tte=Lt,nte=Ar,rte=Dt,gp=TP;class Ur extends nte.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ur.parsePathData(this.data()),this.pathLength=Ur.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,a=0;a<n.length;a++){var i=n[a].command,o=n[a].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],f=o[6],g=o[7],y=u>c?u:c,v=u>c?1:u/c,b=u>c?c/u:1;e.translate(s,l),e.rotate(f),e.scale(v,b),e.arc(0,0,y,d,d+p,1-g),e.scale(1/v,1/b),e.rotate(-f),e.translate(-s,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(u){if(u.command==="A"){var c=u.points[4],d=u.points[5],p=u.points[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),d<0)for(let g=c-f;g>p;g-=f){const y=Ur.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}else for(let g=c+f;g<p;g+=f){const y=Ur.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}}else if(u.command==="C")for(let g=0;g<=1;g+=.01){const y=Ur.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(y.x,y.y)}else e=e.concat(u.points)});for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(s)||(a=Math.min(a,s),i=Math.max(i,s));return{x:n,y:a,width:r-n,height:i-a}}getLength(){return this.pathLength}getPointAtLength(e){return Ur.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,a){return Math.sqrt((r-e)*(r-e)+(a-n)*(a-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,a=0,i=n.length;if(!i)return null;for(;a<i&&e>n[a].pathLength;)e-=n[a].pathLength,++a;if(a===i)return r=n[a-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[a].points.slice(0,2),{x:r[0],y:r[1]};var o=n[a],s=o.points;switch(o.command){case"L":return Ur.getPointOnLine(e,o.start.x,o.start.y,s[0],s[1]);case"C":return Ur.getPointOnCubicBezier((0,gp.t2length)(e,Ur.getPathLength(n),y=>(0,gp.getCubicArcLength)([o.start.x,s[0],s[2],s[4]],[o.start.y,s[1],s[3],s[5]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return Ur.getPointOnQuadraticBezier((0,gp.t2length)(e,Ur.getPathLength(n),y=>(0,gp.getQuadraticArcLength)([o.start.x,s[0],s[2]],[o.start.y,s[1],s[3]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],c=s[2],d=s[3],p=s[4],f=s[5],g=s[6];return p+=f*e/o.pathLength,Ur.getPointOnEllipticalArc(l,u,c,d,p,g)}return null}static getPointOnLine(e,n,r,a,i,o,s){o===void 0&&(o=n),s===void 0&&(s=r);var l=(i-r)/(a-n+1e-8),u=Math.sqrt(e*e/(1+l*l));a<n&&(u*=-1);var c=l*u,d;if(a===n)d={x:o,y:s+c};else if((s-r)/(o-n+1e-8)===l)d={x:o+u,y:s+c};else{var p,f,g=this.getLineLength(n,r,a,i),y=(o-n)*(a-n)+(s-r)*(i-r);y=y/(g*g),p=n+y*(a-n),f=r+y*(i-r);var v=this.getLineLength(o,s,p,f),b=Math.sqrt(e*e-v*v);u=Math.sqrt(b*b/(1+l*l)),a<n&&(u*=-1),c=l*u,d={x:p+u,y:f+c}}return d}static getPointOnCubicBezier(e,n,r,a,i,o,s,l,u){function c(v){return v*v*v}function d(v){return 3*v*v*(1-v)}function p(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}var g=l*c(e)+o*d(e)+a*p(e)+n*f(e),y=u*c(e)+s*d(e)+i*p(e)+r*f(e);return{x:g,y}}static getPointOnQuadraticBezier(e,n,r,a,i,o,s){function l(f){return f*f}function u(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}var d=o*l(e)+a*u(e)+n*c(e),p=s*l(e)+i*u(e)+r*c(e);return{x:d,y:p}}static getPointOnEllipticalArc(e,n,r,a,i,o){var s=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(i),y:a*Math.sin(i)};return{x:e+(u.x*s-u.y*l),y:n+(u.x*l+u.y*s)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var a=0;a<r.length;a++)n=n.replace(new RegExp(r[a],"g"),"|"+r[a]);var i=n.split("|"),o=[],s=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(a=1;a<i.length;a++){var p=i[a],f=p.charAt(0);for(p=p.slice(1),s.length=0;d=c.exec(p);)s.push(d[0]);for(var g=[],y=0,v=s.length;y<v;y++){if(s[y]==="00"){g.push(0,0);continue}var b=parseFloat(s[y]);isNaN(b)?g.push(0):g.push(b)}for(;g.length>0&&!isNaN(g[0]);){var x="",w=[],S=l,C=u,E,_,N,M,P,L,U,B,K,X;switch(f){case"l":l+=g.shift(),u+=g.shift(),x="L",w.push(l,u);break;case"L":l=g.shift(),u=g.shift(),w.push(l,u);break;case"m":var Z=g.shift(),H=g.shift();if(l+=Z,u+=H,x="M",o.length>2&&o[o.length-1].command==="z"){for(var F=o.length-2;F>=0;F--)if(o[F].command==="M"){l=o[F].points[0]+Z,u=o[F].points[1]+H;break}}w.push(l,u),f="l";break;case"M":l=g.shift(),u=g.shift(),x="M",w.push(l,u),f="L";break;case"h":l+=g.shift(),x="L",w.push(l,u);break;case"H":l=g.shift(),x="L",w.push(l,u);break;case"v":u+=g.shift(),x="L",w.push(l,u);break;case"V":u=g.shift(),x="L",w.push(l,u);break;case"C":w.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"c":w.push(l+g.shift(),u+g.shift(),l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"S":_=l,N=u,E=o[o.length-1],E.command==="C"&&(_=l+(l-E.points[2]),N=u+(u-E.points[3])),w.push(_,N,g.shift(),g.shift()),l=g.shift(),u=g.shift(),x="C",w.push(l,u);break;case"s":_=l,N=u,E=o[o.length-1],E.command==="C"&&(_=l+(l-E.points[2]),N=u+(u-E.points[3])),w.push(_,N,l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"Q":w.push(g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"q":w.push(l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="Q",w.push(l,u);break;case"T":_=l,N=u,E=o[o.length-1],E.command==="Q"&&(_=l+(l-E.points[0]),N=u+(u-E.points[1])),l=g.shift(),u=g.shift(),x="Q",w.push(_,N,l,u);break;case"t":_=l,N=u,E=o[o.length-1],E.command==="Q"&&(_=l+(l-E.points[0]),N=u+(u-E.points[1])),l+=g.shift(),u+=g.shift(),x="Q",w.push(_,N,l,u);break;case"A":M=g.shift(),P=g.shift(),L=g.shift(),U=g.shift(),B=g.shift(),K=l,X=u,l=g.shift(),u=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,X,l,u,U,B,M,P,L);break;case"a":M=g.shift(),P=g.shift(),L=g.shift(),U=g.shift(),B=g.shift(),K=l,X=u,l+=g.shift(),u+=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,X,l,u,U,B,M,P,L);break}o.push({command:x||f,points:w,start:{x:S,y:C},pathLength:this.calcLength(S,C,x||f,w)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,a){var i,o,s,l,u=Ur;switch(r){case"L":return u.getLineLength(e,n,a[0],a[1]);case"C":return(0,gp.getCubicArcLength)([e,a[0],a[2],a[4]],[n,a[1],a[3],a[5]],1);case"Q":return(0,gp.getQuadraticArcLength)([e,a[0],a[2]],[n,a[1],a[3]],1);case"A":i=0;var c=a[4],d=a[5],p=a[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),o=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],c,0),d<0)for(l=c-f;l>p;l-=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(l=c+f;l<p;l+=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],p,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,a,i,o,s,l,u){var c=u*(Math.PI/180),d=Math.cos(c)*(e-r)/2+Math.sin(c)*(n-a)/2,p=-1*Math.sin(c)*(e-r)/2+Math.cos(c)*(n-a)/2,f=d*d/(s*s)+p*p/(l*l);f>1&&(s*=Math.sqrt(f),l*=Math.sqrt(f));var g=Math.sqrt((s*s*(l*l)-s*s*(p*p)-l*l*(d*d))/(s*s*(p*p)+l*l*(d*d)));i===o&&(g*=-1),isNaN(g)&&(g=0);var y=g*s*p/l,v=g*-l*d/s,b=(e+r)/2+Math.cos(c)*y-Math.sin(c)*v,x=(n+a)/2+Math.sin(c)*y+Math.cos(c)*v,w=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},S=function(P,L){return(P[0]*L[0]+P[1]*L[1])/(w(P)*w(L))},C=function(P,L){return(P[0]*L[1]<P[1]*L[0]?-1:1)*Math.acos(S(P,L))},E=C([1,0],[(d-y)/s,(p-v)/l]),_=[(d-y)/s,(p-v)/l],N=[(-1*d-y)/s,(-1*p-v)/l],M=C(_,N);return S(_,N)<=-1&&(M=Math.PI),S(_,N)>=1&&(M=0),o===0&&M>0&&(M=M-2*Math.PI),o===1&&M<0&&(M=M+2*Math.PI),[b,x,s,l,E,M,c,o]}}mp.Path=Ur,Ur.prototype.className="Path",Ur.prototype._attrsAffectingSize=["data"],(0,rte._registerNode)(Ur),tte.Factory.addGetterSetter(Ur,"data"),Object.defineProperty(ab,"__esModule",{value:!0}),ab.Arrow=void 0;const ob=Lt,ate=Kf,NP=Qe,ite=Dt,_P=mp;class bc extends ate.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),a=r,i=this.tension()!==0&&r.length>4;i&&(a=this.getTensionPoints());var o=this.pointerLength(),s=r.length,l,u;if(i){const p=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],r[s-2],r[s-1]],f=_P.Path.calcLength(a[a.length-4],a[a.length-3],"C",p),g=_P.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),p[0],p[1],p[2],p[3],p[4],p[5]);l=r[s-2]-g.x,u=r[s-1]-g.y}else l=r[s-2]-r[s-4],u=r[s-1]-r[s-3];var c=(Math.atan2(u,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[s-2],r[s-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(l=(a[0]+a[2])/2-r[0],u=(a[1]+a[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}ab.Arrow=bc,bc.prototype.className="Arrow",(0,ite._registerNode)(bc),ob.Factory.addGetterSetter(bc,"pointerLength",10,(0,NP.getNumberValidator)()),ob.Factory.addGetterSetter(bc,"pointerWidth",10,(0,NP.getNumberValidator)()),ob.Factory.addGetterSetter(bc,"pointerAtBeginning",!1),ob.Factory.addGetterSetter(bc,"pointerAtEnding",!0);var sb={};Object.defineProperty(sb,"__esModule",{value:!0}),sb.Circle=void 0;const ote=Lt,ste=Ar,lte=Qe,ute=Dt;class yp extends ste.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}sb.Circle=yp,yp.prototype._centroid=!0,yp.prototype.className="Circle",yp.prototype._attrsAffectingSize=["radius"],(0,ute._registerNode)(yp),ote.Factory.addGetterSetter(yp,"radius",0,(0,lte.getNumberValidator)());var lb={};Object.defineProperty(lb,"__esModule",{value:!0}),lb.Ellipse=void 0;const BE=Lt,cte=Ar,RP=Qe,dte=Dt;class iu extends cte.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}lb.Ellipse=iu,iu.prototype.className="Ellipse",iu.prototype._centroid=!0,iu.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,dte._registerNode)(iu),BE.Factory.addComponentsGetterSetter(iu,"radius",["x","y"]),BE.Factory.addGetterSetter(iu,"radiusX",0,(0,RP.getNumberValidator)()),BE.Factory.addGetterSetter(iu,"radiusY",0,(0,RP.getNumberValidator)());var ub={};Object.defineProperty(ub,"__esModule",{value:!0}),ub.Image=void 0;const zE=nr,vc=Lt,pte=Ar,hte=Dt,Xf=Qe;let ls=class YU extends pte.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),a=this.cornerRadius(),i=this.attrs.image;let o;if(i){const s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||a)&&(e.beginPath(),a?zE.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(a&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var n=this.width(),r=this.height(),a=this.cornerRadius();e.beginPath(),a?zE.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var a=zE.Util.createImageElement();a.onload=function(){var i=new YU({image:a});n(i)},a.onerror=r,a.crossOrigin="Anonymous",a.src=e}};ub.Image=ls,ls.prototype.className="Image",(0,hte._registerNode)(ls),vc.Factory.addGetterSetter(ls,"cornerRadius",0,(0,Xf.getNumberOrArrayOfNumbersValidator)(4)),vc.Factory.addGetterSetter(ls,"image"),vc.Factory.addComponentsGetterSetter(ls,"crop",["x","y","width","height"]),vc.Factory.addGetterSetter(ls,"cropX",0,(0,Xf.getNumberValidator)()),vc.Factory.addGetterSetter(ls,"cropY",0,(0,Xf.getNumberValidator)()),vc.Factory.addGetterSetter(ls,"cropWidth",0,(0,Xf.getNumberValidator)()),vc.Factory.addGetterSetter(ls,"cropHeight",0,(0,Xf.getNumberValidator)());var bp={};Object.defineProperty(bp,"__esModule",{value:!0}),bp.Tag=bp.Label=void 0;const cb=Lt,fte=Ar,mte=hp,UE=Qe,$P=Dt;var OP=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],gte="Change.konva",yte="none",jE="up",VE="right",WE="down",GE="left",bte=OP.length;class HE extends mte.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,a=function(){n._sync()};for(r=0;r<bte;r++)e.on(OP[r]+gte,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,a,i,o,s,l,u;if(e&&n){switch(r=e.width(),a=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),s=0,l=0,i){case jE:s=r/2,l=-1*u;break;case VE:s=r+o,l=a/2;break;case WE:s=r/2,l=a+u;break;case GE:s=-1*o,l=a/2;break}n.setAttrs({x:-1*s,y:-1*l,width:r,height:a}),e.setAttrs({x:-1*s,y:-1*l})}}}bp.Label=HE,HE.prototype.className="Label",(0,$P._registerNode)(HE);class xc extends fte.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),a=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius();let l=0,u=0,c=0,d=0;typeof s=="number"?l=u=c=d=Math.min(s,n/2,r/2):(l=Math.min(s[0]||0,n/2,r/2),u=Math.min(s[1]||0,n/2,r/2),d=Math.min(s[2]||0,n/2,r/2),c=Math.min(s[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),a===jE&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),a===VE&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),a===WE&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(c,r),e.arc(c,r-c,c,Math.PI/2,Math.PI,!1),a===GE&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),a=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),s=this.height();return i===jE?(n-=a,s+=a):i===WE?s+=a:i===GE?(e-=r*1.5,o+=r):i===VE&&(o+=r*1.5),{x:e,y:n,width:o,height:s}}}bp.Tag=xc,xc.prototype.className="Tag",(0,$P._registerNode)(xc),cb.Factory.addGetterSetter(xc,"pointerDirection",yte),cb.Factory.addGetterSetter(xc,"pointerWidth",0,(0,UE.getNumberValidator)()),cb.Factory.addGetterSetter(xc,"pointerHeight",0,(0,UE.getNumberValidator)()),cb.Factory.addGetterSetter(xc,"cornerRadius",0,(0,UE.getNumberOrArrayOfNumbersValidator)(4));var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.Rect=void 0;const vte=Lt,xte=Ar,wte=Dt,kte=nr,Ste=Qe;class db extends xte.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),a=this.height();e.beginPath(),n?kte.Util.drawRoundedRectPath(e,r,a,n):e.rect(0,0,r,a),e.closePath(),e.fillStrokeShape(this)}}Yf.Rect=db,db.prototype.className="Rect",(0,wte._registerNode)(db),vte.Factory.addGetterSetter(db,"cornerRadius",0,(0,Ste.getNumberOrArrayOfNumbersValidator)(4));var pb={};Object.defineProperty(pb,"__esModule",{value:!0}),pb.RegularPolygon=void 0;const MP=Lt,Cte=Ar,PP=Qe,Ite=Dt;class wc extends Cte.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var a=0;a<e;a++)r.push({x:n*Math.sin(a*2*Math.PI/e),y:-1*n*Math.cos(a*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,a=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),a=Math.min(a,o.y),i=Math.max(i,o.y)}),{x:n,y:a,width:r-n,height:i-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}pb.RegularPolygon=wc,wc.prototype.className="RegularPolygon",wc.prototype._centroid=!0,wc.prototype._attrsAffectingSize=["radius"],(0,Ite._registerNode)(wc),MP.Factory.addGetterSetter(wc,"radius",0,(0,PP.getNumberValidator)()),MP.Factory.addGetterSetter(wc,"sides",0,(0,PP.getNumberValidator)());var hb={};Object.defineProperty(hb,"__esModule",{value:!0}),hb.Ring=void 0;const AP=Lt,Ete=Ar,DP=Qe,Tte=Dt;var LP=Math.PI*2;class kc extends Ete.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,LP,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),LP,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}hb.Ring=kc,kc.prototype.className="Ring",kc.prototype._centroid=!0,kc.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Tte._registerNode)(kc),AP.Factory.addGetterSetter(kc,"innerRadius",0,(0,DP.getNumberValidator)()),AP.Factory.addGetterSetter(kc,"outerRadius",0,(0,DP.getNumberValidator)());var fb={};Object.defineProperty(fb,"__esModule",{value:!0}),fb.Sprite=void 0;const Sc=Lt,Nte=Ar,_te=fp,FP=Qe,Rte=Dt;class us extends Nte.Shape{constructor(e){super(e),this._updated=!0,this.anim=new _te.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+0],l=i[a+1],u=i[a+2],c=i[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,c),e.closePath(),e.fillStrokeShape(this)),d)if(o){var p=o[n],f=r*2;e.drawImage(d,s,l,u,c,p[f+0],p[f+1],u,c)}else e.drawImage(d,s,l,u,c,0,0,u,c)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+2],l=i[a+3];if(e.beginPath(),o){var u=o[n],c=r*2;e.rect(u[c+0],u[c+1],s,l)}else e.rect(0,0,s,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),a=r[n],i=a.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}fb.Sprite=us,us.prototype.className="Sprite",(0,Rte._registerNode)(us),Sc.Factory.addGetterSetter(us,"animation"),Sc.Factory.addGetterSetter(us,"animations"),Sc.Factory.addGetterSetter(us,"frameOffsets"),Sc.Factory.addGetterSetter(us,"image"),Sc.Factory.addGetterSetter(us,"frameIndex",0,(0,FP.getNumberValidator)()),Sc.Factory.addGetterSetter(us,"frameRate",17,(0,FP.getNumberValidator)()),Sc.Factory.backCompat(us,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var mb={};Object.defineProperty(mb,"__esModule",{value:!0}),mb.Star=void 0;const qE=Lt,$te=Ar,KE=Qe,Ote=Dt;class ou extends $te.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var i=1;i<a*2;i++){var o=i%2===0?r:n,s=o*Math.sin(i*Math.PI/a),l=-1*o*Math.cos(i*Math.PI/a);e.lineTo(s,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}mb.Star=ou,ou.prototype.className="Star",ou.prototype._centroid=!0,ou.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Ote._registerNode)(ou),qE.Factory.addGetterSetter(ou,"numPoints",5,(0,KE.getNumberValidator)()),qE.Factory.addGetterSetter(ou,"innerRadius",0,(0,KE.getNumberValidator)()),qE.Factory.addGetterSetter(ou,"outerRadius",0,(0,KE.getNumberValidator)());var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Text=Cc.stringToArray=void 0;const XE=nr,Ra=Lt,Mte=Ar,su=Qe,Pte=Dt;function BP(t){return Array.from(t)}Cc.stringToArray=BP;var vp="auto",Ate="center",zP="inherit",Qf="justify",Dte="Change.konva",Lte="2d",UP="-",jP="left",Fte="text",Bte="Text",zte="top",Ute="bottom",VP="middle",WP="normal",jte="px ",gb=" ",Vte="right",GP="rtl",Wte="word",Gte="char",HP="none",YE="\u2026",qP=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Hte=qP.length;function qte(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var QE;function ZE(){return QE||(QE=XE.Util.createCanvasElement().getContext(Lte),QE)}function Kte(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Xte(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Yte(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class cr extends Mte.Shape{constructor(e){super(Yte(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<Hte;n++)this.on(qP[n]+Dte,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var a=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,s=this.verticalAlign(),l=this.direction(),u=0,c=this.align(),d=this.getWidth(),p=this.letterSpacing(),f=this.fill(),g=this.textDecoration(),y=g.indexOf("underline")!==-1,v=g.indexOf("line-through")!==-1,b;l=l===zP?e.direction:l;var x=0,x=o/2,w=0,S=0;for(l===GP&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",VP),e.setAttr("textAlign",jP),s===VP?u=(this.getHeight()-r*o-a*2)/2:s===Ute&&(u=this.getHeight()-r*o-a*2),e.translate(a,u+a),b=0;b<r;b++){var w=0,S=0,C=n[b],E=C.text,_=C.width,N=C.lastInParagraph,M,P,L;if(e.save(),c===Vte?w+=d-_-a*2:c===Ate&&(w+=(d-_-a*2)/2),y){e.save(),e.beginPath(),e.moveTo(w,x+S+Math.round(i/2)),M=E.split(" ").length-1,P=M===0,L=c===Qf&&!N?d-a*2:_,e.lineTo(w+Math.round(L),x+S+Math.round(i/2)),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(v){e.save(),e.beginPath(),e.moveTo(w,x+S),M=E.split(" ").length-1,P=M===0,L=c===Qf&&N&&!P?d-a*2:_,e.lineTo(w+Math.round(L),x+S),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(l!==GP&&(p!==0||c===Qf)){M=E.split(" ").length-1;for(var U=BP(E),B=0;B<U.length;B++){var K=U[B];K===" "&&!N&&c===Qf&&(w+=(d-a*2-_)/M),this._partialTextX=w,this._partialTextY=x+S,this._partialText=K,e.fillStrokeShape(this),w+=this.measureSize(K).width+p}}else p!==0&&e.setAttr("letterSpacing",`${p}px`),this._partialTextX=w,this._partialTextY=x+S,this._partialText=E,e.fillStrokeShape(this);e.restore(),r>1&&(x+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=XE.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Fte,n),this}getWidth(){var e=this.attrs.width===vp||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===vp||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return XE.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=ZE(),r=this.fontSize(),a;return n.save(),n.font=this._getContextFont(),a=n.measureText(e),n.restore(),{width:a.width,height:r}}_getContextFont(){return this.fontStyle()+gb+this.fontVariant()+gb+(this.fontSize()+jte)+qte(this.fontFamily())}_addTextLine(e){this.align()===Qf&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return ZE().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,a=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,s=i!==vp&&i!==void 0,l=o!==vp&&o!==void 0,u=this.padding(),c=i-u*2,d=o-u*2,p=0,f=this.wrap(),g=f!==HP,y=f!==Gte&&g,v=this.ellipsis();this.textArr=[],ZE().font=this._getContextFont();for(var b=v?this._getTextWidth(YE):0,x=0,w=e.length;x<w;++x){var S=e[x],C=this._getTextWidth(S);if(s&&C>c)for(;S.length>0;){for(var E=0,_=S.length,N="",M=0;E<_;){var P=E+_>>>1,L=S.slice(0,P+1),U=this._getTextWidth(L)+b;U<=c?(E=P+1,N=L,M=U):_=P}if(N){if(y){var B,K=S[N.length],X=K===gb||K===UP;X&&M<=c?B=N.length:B=Math.max(N.lastIndexOf(gb),N.lastIndexOf(UP))+1,B>0&&(E=B,N=N.slice(0,E),M=this._getTextWidth(N))}N=N.trimRight(),this._addTextLine(N),r=Math.max(r,M),p+=a;var Z=this._shouldHandleEllipsis(p);if(Z){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(E),S=S.trimLeft(),S.length>0&&(C=this._getTextWidth(S),C<=c)){this._addTextLine(S),p+=a,r=Math.max(r,C);break}}else break}else this._addTextLine(S),p+=a,r=Math.max(r,C),this._shouldHandleEllipsis(p)&&x<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&p+a>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,a=this.attrs.height,i=a!==vp&&a!==void 0,o=this.padding(),s=a-o*2,l=this.wrap(),u=l!==HP;return!u||i&&e+r>s}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==vp&&e!==void 0,r=this.padding(),a=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!i)){if(n){var s=this._getTextWidth(o.text+YE)<a;s||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+YE)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}Cc.Text=cr,cr.prototype._fillFunc=Kte,cr.prototype._strokeFunc=Xte,cr.prototype.className=Bte,cr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,Pte._registerNode)(cr),Ra.Factory.overWriteSetter(cr,"width",(0,su.getNumberOrAutoValidator)()),Ra.Factory.overWriteSetter(cr,"height",(0,su.getNumberOrAutoValidator)()),Ra.Factory.addGetterSetter(cr,"direction",zP),Ra.Factory.addGetterSetter(cr,"fontFamily","Arial"),Ra.Factory.addGetterSetter(cr,"fontSize",12,(0,su.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"fontStyle",WP),Ra.Factory.addGetterSetter(cr,"fontVariant",WP),Ra.Factory.addGetterSetter(cr,"padding",0,(0,su.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"align",jP),Ra.Factory.addGetterSetter(cr,"verticalAlign",zte),Ra.Factory.addGetterSetter(cr,"lineHeight",1,(0,su.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"wrap",Wte),Ra.Factory.addGetterSetter(cr,"ellipsis",!1,(0,su.getBooleanValidator)()),Ra.Factory.addGetterSetter(cr,"letterSpacing",0,(0,su.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"text","",(0,su.getStringValidator)()),Ra.Factory.addGetterSetter(cr,"textDecoration","");var yb={};Object.defineProperty(yb,"__esModule",{value:!0}),yb.TextPath=void 0;const JE=nr,Ao=Lt,Qte=Ar,Zf=mp,e3=Cc,KP=Qe,Zte=Dt;var Jte="",XP="normal";function YP(t){t.fillText(this.partialText,0,0)}function QP(t){t.strokeText(this.partialText,0,0)}class Dr extends Qte.Shape{constructor(e){super(e),this.dummyCanvas=JE.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Zf.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:Zf.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Zf.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),a=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<i.length;o++){e.save();var s=i[o].p0;e.translate(s.x,s.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,a/2+1),e.lineTo(a,a/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=a/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var a=0;a<n.length;a++){var i=n[a].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return JE.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return e3.Text.prototype.setText.call(this,e)}_getContextFont(){return e3.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var a=r.measureText(e);return r.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),a=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let s=0;a==="center"&&(s=Math.max(0,this.pathLength/2-o/2)),a==="right"&&(s=Math.max(0,this.pathLength-o));const l=(0,e3.stringToArray)(this.text());let u=s;for(var c=0;c<l.length;c++){const d=this._getPointAtLength(u);if(!d)return;let p=this._getTextSize(l[c]).width+r;if(l[c]===" "&&a==="justify"){const x=this.text().split(" ").length-1;p+=(this.pathLength-o)/x}const f=this._getPointAtLength(u+p);if(!f)return;const g=Zf.Path.getLineLength(d.x,d.y,f.x,f.y);let y=0;if(i)try{y=i(l[c-1],l[c])*this.fontSize()}catch{y=0}d.x+=y,f.x+=y,this.textWidth+=y;const v=Zf.Path.getPointOnLine(y+g/2,d.x,d.y,f.x,f.y),b=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[c],rotation:b,p0:d,p1:f}),u+=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});for(var n=e[0]||0,r=e[0]||0,a=e[1]||0,i=e[1]||0,o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);var u=this.fontSize();return{x:n-u/2,y:a-u/2,width:r-n+u,height:i-a+u}}destroy(){return JE.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}yb.TextPath=Dr,Dr.prototype._fillFunc=YP,Dr.prototype._strokeFunc=QP,Dr.prototype._fillFuncHit=YP,Dr.prototype._strokeFuncHit=QP,Dr.prototype.className="TextPath",Dr.prototype._attrsAffectingSize=["text","fontSize","data"],(0,Zte._registerNode)(Dr),Ao.Factory.addGetterSetter(Dr,"data"),Ao.Factory.addGetterSetter(Dr,"fontFamily","Arial"),Ao.Factory.addGetterSetter(Dr,"fontSize",12,(0,KP.getNumberValidator)()),Ao.Factory.addGetterSetter(Dr,"fontStyle",XP),Ao.Factory.addGetterSetter(Dr,"align","left"),Ao.Factory.addGetterSetter(Dr,"letterSpacing",0,(0,KP.getNumberValidator)()),Ao.Factory.addGetterSetter(Dr,"textBaseline","middle"),Ao.Factory.addGetterSetter(Dr,"fontVariant",XP),Ao.Factory.addGetterSetter(Dr,"text",Jte),Ao.Factory.addGetterSetter(Dr,"textDecoration",null),Ao.Factory.addGetterSetter(Dr,"kerningFunc",null);var bb={};Object.defineProperty(bb,"__esModule",{value:!0}),bb.Transformer=void 0;const bn=nr,sn=Lt,ZP=Gn,ene=Ar,tne=Yf,JP=hp,Do=Dt,lu=Qe,nne=Dt;var eA="tr-konva",rne=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${eA}`).join(" "),tA="nodesRect",ane=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],ine={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const one="ontouchstart"in Do.Konva._global;function sne(t,e,n){if(t==="rotater")return n;e+=bn.Util.degToRad(ine[t]||0);var r=(bn.Util.radToDeg(e)%360+360)%360;return bn.Util._inRange(r,315+22.5,360)||bn.Util._inRange(r,0,22.5)?"ns-resize":bn.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":bn.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":bn.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":bn.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":bn.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":bn.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":bn.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(bn.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var vb=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],nA=1e8;function lne(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function rA(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),a=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:a}}function une(t,e){const n=lne(t);return rA(t,e,n)}function cne(t,e,n){let r=e;for(let a=0;a<t.length;a++){const i=Do.Konva.getAngle(t[a]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let Kt=class extends JP.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(rne,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return bn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return eA+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(r=>r.isAncestorOf(this)?(bn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},i=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(i,a),r.on(ane.map(o=>o+`.${this._getEventNamespace()}`).join(" "),a),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,n=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!e)return;const r=t.getAbsolutePosition(),a=r.x-e.x,i=r.y-e.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const s=o.getAbsolutePosition();o.setAbsolutePosition({x:s.x+a,y:s.y+i}),o.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(tA),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(tA,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(n),i=t.getAbsolutePosition(n),o=r.x*a.x-t.offsetX()*a.x,s=r.y*a.y-t.offsetY()*a.y;const l=(Do.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:i.x+o*Math.cos(l)+s*Math.sin(-l),y:i.y+s*Math.cos(l)+o*Math.sin(l),width:r.width*a.x,height:r.height*a.y,rotation:l};return rA(u,-Do.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-nA,y:-nA,width:0,height:0,rotation:0};const e=[];this.nodes().map(l=>{const u=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var c=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],d=l.getAbsoluteTransform();c.forEach(function(p){var f=d.point(p);e.push(f)})});const n=new bn.Transform;n.rotate(-Do.Konva.getAngle(this.rotation()));var r=1/0,a=1/0,i=-1/0,o=-1/0;e.forEach(function(l){var u=n.point(l);r===void 0&&(r=i=u.x,a=o=u.y),r=Math.min(r,u.x),a=Math.min(a,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}),n.invert();const s=n.point({x:r,y:a});return{x:s.x,y:s.y,width:i-r,height:o-a,rotation:Do.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),vb.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new tne.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:one?10:"auto"}),n=this;e.on("mousedown touchstart",function(r){n._handleMouseDown(r)}),e.on("dragstart",r=>{e.stopDrag(),r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),e.on("mouseenter",()=>{var r=Do.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),i=sne(t,r,a);e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new ene.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,n){var r=n.getParent(),a=r.padding();e.beginPath(),e.rect(-a,-a,n.width()+a*2,n.height()+a*2),e.moveTo(n.width()/2,-a),r.rotateEnabled()&&r.rotateLineVisible()&&e.lineTo(n.width()/2,-r.rotateAnchorOffset()*bn.Util._sign(n.height())-a),e.fillStrokeShape(n)},hitFunc:(e,n)=>{if(this.shouldOverdrawWholeArea()){var r=this.padding();e.beginPath(),e.rect(-r,-r,n.width()+r*2,n.height()+r*2),e.fillStrokeShape(n)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/a),this.cos=Math.abs(n/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var i=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-i.x,y:o.y-i.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(s=>{s._fire("transformstart",{evt:t.evt,target:s})})}_handleMouseMove(t){var e,n,r,a=this.findOne("."+this._movingAnchorName),i=a.getStage();i.setPointersPositions(t);const o=i.getPointerPosition();let s={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,t)),a.setAbsolutePosition(s);const u=a.getAbsolutePosition();if(!(l.x===u.x&&l.y===u.y)){if(this._movingAnchorName==="rotater"){var c=this._getNodeRect();e=a.x()-c.width/2,n=-a.y()+c.height/2;let U=Math.atan2(-n,e)+Math.PI/2;c.height<0&&(U-=Math.PI);var d=Do.Konva.getAngle(this.rotation());const B=d+U,K=Do.Konva.getAngle(this.rotationSnapTolerance()),X=cne(this.rotationSnaps(),B,K)-c.rotation,Z=une(c,X);this._fitNodesInto(Z,t);return}var p=this.shiftBehavior(),f;p==="inverted"?f=this.keepRatio()&&!t.shiftKey:p==="none"?f=this.keepRatio():f=this.keepRatio()||t.shiftKey;var x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-left").x()>g.x?-1:1,v=this.findOne(".top-left").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-left").x(g.x-e),this.findOne(".top-left").y(g.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-right").x()<g.x?-1:1,v=this.findOne(".top-right").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-right").x(g.x+e),this.findOne(".top-right").y(g.y-n)}var b=a.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(a.y()-g.y,2));var y=g.x<a.x()?-1:1,v=a.y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,a.x(g.x-e),a.y(g.y+n)}b=a.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(a.y()-g.y,2));var y=this.findOne(".bottom-right").x()<g.x?-1:1,v=this.findOne(".bottom-right").y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".bottom-right").x(g.x+e),this.findOne(".bottom-right").y(g.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var x=this.centeredScaling()||t.altKey;if(x){var w=this.findOne(".top-left"),S=this.findOne(".bottom-right"),C=w.x(),E=w.y(),_=this.getWidth()-S.x(),N=this.getHeight()-S.y();S.move({x:-C,y:-E}),w.move({x:_,y:N})}var M=this.findOne(".top-left").getAbsolutePosition();e=M.x,n=M.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),L=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:P,height:L,rotation:Do.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(n=>{n._fire("transformend",{evt:t,target:n})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();const r=1;if(bn.Util._inRange(t.width,-this.padding()*2-r,r)){this.update();return}if(bn.Util._inRange(t.height,-this.padding()*2-r,r)){this.update();return}var a=new bn.Transform;if(a.rotate(Do.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=a.point({x:-this.padding()*2,y:0});t.x+=d.x,t.y+=d.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=a.point({x:0,y:-this.padding()*2});t.x+=d.x,t.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(n,t);d?t=d:bn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const i=1e7,o=new bn.Transform;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/i,n.height/i);const s=new bn.Transform,l=t.width/i,u=t.height/i;this.flipEnabled()===!1?(s.translate(t.x,t.y),s.rotate(t.rotation),s.translate(t.width<0?t.width:0,t.height<0?t.height:0),s.scale(Math.abs(l),Math.abs(u))):(s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(l,u));const c=s.multiply(o.invert());this._nodes.forEach(d=>{var p;const f=d.getParent().getAbsoluteTransform(),g=d.getTransform().copy();g.translate(d.offsetX(),d.offsetY());const y=new bn.Transform;y.multiply(f.copy().invert()).multiply(c).multiply(f).multiply(g);const v=y.decompose();d.setAttrs(v),this._fire("transform",{evt:e,target:d}),d._fire("transform",{evt:e,target:d}),(p=d.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(bn.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(bn.Util._getRotation(e.rotation));var n=e.width,r=e.height,a=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();const l=this.find("._anchor");l.forEach(c=>{c.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:i&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:i&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:i&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:i&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:i&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:i&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*bn.Util._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const u=this.anchorStyleFunc();u&&l.forEach(c=>{u(c)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),JP.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return ZP.Node.prototype.toObject.call(this)}clone(t){var e=ZP.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};bb.Transformer=Kt;function dne(t){return t instanceof Array||bn.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){vb.indexOf(e)===-1&&bn.Util.warn("Unknown anchor name: "+e+". Available names are: "+vb.join(", "))}),t||[]}Kt.prototype.className="Transformer",(0,nne._registerNode)(Kt),sn.Factory.addGetterSetter(Kt,"enabledAnchors",vb,dne),sn.Factory.addGetterSetter(Kt,"flipEnabled",!0,(0,lu.getBooleanValidator)()),sn.Factory.addGetterSetter(Kt,"resizeEnabled",!0),sn.Factory.addGetterSetter(Kt,"anchorSize",10,(0,lu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"rotateEnabled",!0),sn.Factory.addGetterSetter(Kt,"rotateLineVisible",!0),sn.Factory.addGetterSetter(Kt,"rotationSnaps",[]),sn.Factory.addGetterSetter(Kt,"rotateAnchorOffset",50,(0,lu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"rotateAnchorCursor","crosshair"),sn.Factory.addGetterSetter(Kt,"rotationSnapTolerance",5,(0,lu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"borderEnabled",!0),sn.Factory.addGetterSetter(Kt,"anchorStroke","rgb(0, 161, 255)"),sn.Factory.addGetterSetter(Kt,"anchorStrokeWidth",1,(0,lu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"anchorFill","white"),sn.Factory.addGetterSetter(Kt,"anchorCornerRadius",0,(0,lu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"borderStroke","rgb(0, 161, 255)"),sn.Factory.addGetterSetter(Kt,"borderStrokeWidth",1,(0,lu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"borderDash"),sn.Factory.addGetterSetter(Kt,"keepRatio",!0),sn.Factory.addGetterSetter(Kt,"shiftBehavior","default"),sn.Factory.addGetterSetter(Kt,"centeredScaling",!1),sn.Factory.addGetterSetter(Kt,"ignoreStroke",!1),sn.Factory.addGetterSetter(Kt,"padding",0,(0,lu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"node"),sn.Factory.addGetterSetter(Kt,"nodes"),sn.Factory.addGetterSetter(Kt,"boundBoxFunc"),sn.Factory.addGetterSetter(Kt,"anchorDragBoundFunc"),sn.Factory.addGetterSetter(Kt,"anchorStyleFunc"),sn.Factory.addGetterSetter(Kt,"shouldOverdrawWholeArea",!1),sn.Factory.addGetterSetter(Kt,"useSingleNodeRotation",!0),sn.Factory.backCompat(Kt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var xb={};Object.defineProperty(xb,"__esModule",{value:!0}),xb.Wedge=void 0;const wb=Lt,pne=Ar,hne=Dt,aA=Qe,fne=Dt;class tl extends pne.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,hne.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}xb.Wedge=tl,tl.prototype.className="Wedge",tl.prototype._centroid=!0,tl.prototype._attrsAffectingSize=["radius"],(0,fne._registerNode)(tl),wb.Factory.addGetterSetter(tl,"radius",0,(0,aA.getNumberValidator)()),wb.Factory.addGetterSetter(tl,"angle",0,(0,aA.getNumberValidator)()),wb.Factory.addGetterSetter(tl,"clockwise",!1),wb.Factory.backCompat(tl,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var kb={};Object.defineProperty(kb,"__esModule",{value:!0}),kb.Blur=void 0;const iA=Lt,mne=Gn,gne=Qe;function oA(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var yne=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],bne=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function vne(t,e){var n=t.data,r=t.width,a=t.height,i,o,s,l,u,c,d,p,f,g,y,v,b,x,w,S,C,E,_,N,M,P,L,U,B=e+e+1,K=r-1,X=a-1,Z=e+1,H=Z*(Z+1)/2,F=new oA,Y=null,Q=F,ne=null,se=null,pe=yne[e],de=bne[e];for(s=1;s<B;s++)Q=Q.next=new oA,s===Z&&(Y=Q);for(Q.next=F,d=c=0,o=0;o<a;o++){for(S=C=E=_=p=f=g=y=0,v=Z*(N=n[c]),b=Z*(M=n[c+1]),x=Z*(P=n[c+2]),w=Z*(L=n[c+3]),p+=H*N,f+=H*M,g+=H*P,y+=H*L,Q=F,s=0;s<Z;s++)Q.r=N,Q.g=M,Q.b=P,Q.a=L,Q=Q.next;for(s=1;s<Z;s++)l=c+((K<s?K:s)<<2),p+=(Q.r=N=n[l])*(U=Z-s),f+=(Q.g=M=n[l+1])*U,g+=(Q.b=P=n[l+2])*U,y+=(Q.a=L=n[l+3])*U,S+=N,C+=M,E+=P,_+=L,Q=Q.next;for(ne=F,se=Y,i=0;i<r;i++)n[c+3]=L=y*pe>>de,L!==0?(L=255/L,n[c]=(p*pe>>de)*L,n[c+1]=(f*pe>>de)*L,n[c+2]=(g*pe>>de)*L):n[c]=n[c+1]=n[c+2]=0,p-=v,f-=b,g-=x,y-=w,v-=ne.r,b-=ne.g,x-=ne.b,w-=ne.a,l=d+((l=i+e+1)<K?l:K)<<2,S+=ne.r=n[l],C+=ne.g=n[l+1],E+=ne.b=n[l+2],_+=ne.a=n[l+3],p+=S,f+=C,g+=E,y+=_,ne=ne.next,v+=N=se.r,b+=M=se.g,x+=P=se.b,w+=L=se.a,S-=N,C-=M,E-=P,_-=L,se=se.next,c+=4;d+=r}for(i=0;i<r;i++){for(C=E=_=S=f=g=y=p=0,c=i<<2,v=Z*(N=n[c]),b=Z*(M=n[c+1]),x=Z*(P=n[c+2]),w=Z*(L=n[c+3]),p+=H*N,f+=H*M,g+=H*P,y+=H*L,Q=F,s=0;s<Z;s++)Q.r=N,Q.g=M,Q.b=P,Q.a=L,Q=Q.next;for(u=r,s=1;s<=e;s++)c=u+i<<2,p+=(Q.r=N=n[c])*(U=Z-s),f+=(Q.g=M=n[c+1])*U,g+=(Q.b=P=n[c+2])*U,y+=(Q.a=L=n[c+3])*U,S+=N,C+=M,E+=P,_+=L,Q=Q.next,s<X&&(u+=r);for(c=i,ne=F,se=Y,o=0;o<a;o++)l=c<<2,n[l+3]=L=y*pe>>de,L>0?(L=255/L,n[l]=(p*pe>>de)*L,n[l+1]=(f*pe>>de)*L,n[l+2]=(g*pe>>de)*L):n[l]=n[l+1]=n[l+2]=0,p-=v,f-=b,g-=x,y-=w,v-=ne.r,b-=ne.g,x-=ne.b,w-=ne.a,l=i+((l=o+Z)<X?l:X)*r<<2,p+=S+=ne.r=n[l],f+=C+=ne.g=n[l+1],g+=E+=ne.b=n[l+2],y+=_+=ne.a=n[l+3],ne=ne.next,v+=N=se.r,b+=M=se.g,x+=P=se.b,w+=L=se.a,S-=N,C-=M,E-=P,_-=L,se=se.next,c+=r}}const xne=function(t){var e=Math.round(this.blurRadius());e>0&&vne(t,e)};kb.Blur=xne,iA.Factory.addGetterSetter(mne.Node,"blurRadius",0,(0,gne.getNumberValidator)(),iA.Factory.afterSetFilter);var Sb={};Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.Brighten=void 0;const sA=Lt,wne=Gn,kne=Qe,Sne=function(t){var e=this.brightness()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=4)n[a]+=e,n[a+1]+=e,n[a+2]+=e};Sb.Brighten=Sne,sA.Factory.addGetterSetter(wne.Node,"brightness",0,(0,kne.getNumberValidator)(),sA.Factory.afterSetFilter);var Cb={};Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.Contrast=void 0;const lA=Lt,Cne=Gn,Ine=Qe,Ene=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,a=150,i=150,o=150,s;for(s=0;s<r;s+=4)a=n[s],i=n[s+1],o=n[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[s]=a,n[s+1]=i,n[s+2]=o};Cb.Contrast=Ene,lA.Factory.addGetterSetter(Cne.Node,"contrast",0,(0,Ine.getNumberValidator)(),lA.Factory.afterSetFilter);var Ib={};Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.Emboss=void 0;const uu=Lt,Eb=Gn,Tne=nr,uA=Qe,Nne=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=t.data,l=t.width,u=t.height,c=l*4,d=u;switch(r){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:Tne.Util.error("Unknown emboss direction: "+r)}do{var p=(d-1)*c,f=i;d+f<1&&(f=0),d+f>u&&(f=0);var g=(d-1+f)*l*4,y=l;do{var v=p+(y-1)*4,b=o;y+b<1&&(b=0),y+b>l&&(b=0);var x=g+(y-1+b)*4,w=s[v]-s[x],S=s[v+1]-s[x+1],C=s[v+2]-s[x+2],E=w,_=E>0?E:-E,N=S>0?S:-S,M=C>0?C:-C;if(N>_&&(E=S),M>_&&(E=C),E*=e,a){var P=s[v]+E,L=s[v+1]+E,U=s[v+2]+E;s[v]=P>255?255:P<0?0:P,s[v+1]=L>255?255:L<0?0:L,s[v+2]=U>255?255:U<0?0:U}else{var B=n-E;B<0?B=0:B>255&&(B=255),s[v]=s[v+1]=s[v+2]=B}}while(--y)}while(--d)};Ib.Emboss=Nne,uu.Factory.addGetterSetter(Eb.Node,"embossStrength",.5,(0,uA.getNumberValidator)(),uu.Factory.afterSetFilter),uu.Factory.addGetterSetter(Eb.Node,"embossWhiteLevel",.5,(0,uA.getNumberValidator)(),uu.Factory.afterSetFilter),uu.Factory.addGetterSetter(Eb.Node,"embossDirection","top-left",null,uu.Factory.afterSetFilter),uu.Factory.addGetterSetter(Eb.Node,"embossBlend",!1,null,uu.Factory.afterSetFilter);var Tb={};Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.Enhance=void 0;const cA=Lt,_ne=Gn,Rne=Qe;function t3(t,e,n,r,a){var i=n-e,o=a-r,s;return i===0?r+o/2:o===0?r:(s=(t-e)/i,s=o*s+r,s)}const $ne=function(t){var e=t.data,n=e.length,r=e[0],a=r,i,o=e[1],s=o,l,u=e[2],c=u,d,p,f=this.enhance();if(f!==0){for(p=0;p<n;p+=4)i=e[p+0],i<r?r=i:i>a&&(a=i),l=e[p+1],l<o?o=l:l>s&&(s=l),d=e[p+2],d<u?u=d:d>c&&(c=d);a===r&&(a=255,r=0),s===o&&(s=255,o=0),c===u&&(c=255,u=0);var g,y,v,b,x,w,S,C,E;for(f>0?(y=a+f*(255-a),v=r-f*(r-0),x=s+f*(255-s),w=o-f*(o-0),C=c+f*(255-c),E=u-f*(u-0)):(g=(a+r)*.5,y=a+f*(a-g),v=r+f*(r-g),b=(s+o)*.5,x=s+f*(s-b),w=o+f*(o-b),S=(c+u)*.5,C=c+f*(c-S),E=u+f*(u-S)),p=0;p<n;p+=4)e[p+0]=t3(e[p+0],r,a,v,y),e[p+1]=t3(e[p+1],o,s,w,x),e[p+2]=t3(e[p+2],u,c,E,C)}};Tb.Enhance=$ne,cA.Factory.addGetterSetter(_ne.Node,"enhance",0,(0,Rne.getNumberValidator)(),cA.Factory.afterSetFilter);var Nb={};Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.Grayscale=void 0;const One=function(t){var e=t.data,n=e.length,r,a;for(r=0;r<n;r+=4)a=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=a,e[r+1]=a,e[r+2]=a};Nb.Grayscale=One;var _b={};Object.defineProperty(_b,"__esModule",{value:!0}),_b.HSL=void 0;const xp=Lt,n3=Gn,r3=Qe;xp.Factory.addGetterSetter(n3.Node,"hue",0,(0,r3.getNumberValidator)(),xp.Factory.afterSetFilter),xp.Factory.addGetterSetter(n3.Node,"saturation",0,(0,r3.getNumberValidator)(),xp.Factory.afterSetFilter),xp.Factory.addGetterSetter(n3.Node,"luminance",0,(0,r3.getNumberValidator)(),xp.Factory.afterSetFilter);const Mne=function(t){var e=t.data,n=e.length,r=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=r*a*Math.cos(i*Math.PI/180),u=r*a*Math.sin(i*Math.PI/180),c=.299*r+.701*l+.167*u,d=.587*r-.587*l+.33*u,p=.114*r-.114*l-.497*u,f=.299*r-.299*l-.328*u,g=.587*r+.413*l+.035*u,y=.114*r-.114*l+.293*u,v=.299*r-.3*l+1.25*u,b=.587*r-.586*l-1.05*u,x=.114*r+.886*l-.2*u,w,S,C,E;for(s=0;s<n;s+=4)w=e[s+0],S=e[s+1],C=e[s+2],E=e[s+3],e[s+0]=c*w+d*S+p*C+o,e[s+1]=f*w+g*S+y*C+o,e[s+2]=v*w+b*S+x*C+o,e[s+3]=E};_b.HSL=Mne;var Rb={};Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.HSV=void 0;const wp=Lt,a3=Gn,i3=Qe,Pne=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=r*a*Math.cos(i*Math.PI/180),l=r*a*Math.sin(i*Math.PI/180),u=.299*r+.701*s+.167*l,c=.587*r-.587*s+.33*l,d=.114*r-.114*s-.497*l,p=.299*r-.299*s-.328*l,f=.587*r+.413*s+.035*l,g=.114*r-.114*s+.293*l,y=.299*r-.3*s+1.25*l,v=.587*r-.586*s-1.05*l,b=.114*r+.886*s-.2*l,x,w,S,C;for(o=0;o<n;o+=4)x=e[o+0],w=e[o+1],S=e[o+2],C=e[o+3],e[o+0]=u*x+c*w+d*S,e[o+1]=p*x+f*w+g*S,e[o+2]=y*x+v*w+b*S,e[o+3]=C};Rb.HSV=Pne,wp.Factory.addGetterSetter(a3.Node,"hue",0,(0,i3.getNumberValidator)(),wp.Factory.afterSetFilter),wp.Factory.addGetterSetter(a3.Node,"saturation",0,(0,i3.getNumberValidator)(),wp.Factory.afterSetFilter),wp.Factory.addGetterSetter(a3.Node,"value",0,(0,i3.getNumberValidator)(),wp.Factory.afterSetFilter);var $b={};Object.defineProperty($b,"__esModule",{value:!0}),$b.Invert=void 0;const Ane=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};$b.Invert=Ane;var Ob={};Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.Kaleidoscope=void 0;const Mb=Lt,dA=Gn,pA=nr,hA=Qe;var Dne=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p=0,f=0,g=0,y=0,v,b=Math.sqrt(s*s+l*l);c=i-s,d=o-l,v=Math.sqrt(c*c+d*d),b=v>b?v:b;var x=o,w=i,S,C,E=360/w*Math.PI/180,_,N;for(C=0;C<w;C+=1)for(_=Math.sin(C*E),N=Math.cos(C*E),S=0;S<x;S+=1)c=Math.floor(s+b*S/x*N),d=Math.floor(l+b*S/x*_),u=(d*i+c)*4,p=r[u+0],f=r[u+1],g=r[u+2],y=r[u+3],u=(C+S*i)*4,a[u+0]=p,a[u+1]=f,a[u+2]=g,a[u+3]=y},Lne=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p,f,g=0,y=0,v=0,b=0,x,w=Math.sqrt(s*s+l*l);c=i-s,d=o-l,x=Math.sqrt(c*c+d*d),w=x>w?x:w;var S=o,C=i,E,_,N=n.polarRotation||0,M,P;for(c=0;c<i;c+=1)for(d=0;d<o;d+=1)p=c-s,f=d-l,E=Math.sqrt(p*p+f*f)*S/w,_=(Math.atan2(f,p)*180/Math.PI+360+N)%360,_=_*C/360,M=Math.floor(_),P=Math.floor(E),u=(P*i+M)*4,g=r[u+0],y=r[u+1],v=r[u+2],b=r[u+3],u=(d*i+c)*4,a[u+0]=g,a[u+1]=y,a[u+2]=v,a[u+3]=b};const Fne=function(t){var e=t.width,n=t.height,r,a,i,o,s,l,u,c,d,p,f=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),y=Math.floor(e*(g%360)/360);if(!(f<1)){var v=pA.Util.createCanvasElement();v.width=e,v.height=n;var b=v.getContext("2d").getImageData(0,0,e,n);pA.Util.releaseCanvas(v),Dne(t,b,{polarCenterX:e/2,polarCenterY:n/2});for(var x=e/Math.pow(2,f);x<=8;)x=x*2,f-=1;x=Math.ceil(x);var w=x,S=0,C=w,E=1;for(y+x>e&&(S=w,C=0,E=-1),a=0;a<n;a+=1)for(r=S;r!==C;r+=E)i=Math.round(r+y)%e,d=(e*a+i)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+r)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;for(a=0;a<n;a+=1)for(w=Math.floor(x),o=0;o<f;o+=1){for(r=0;r<w+1;r+=1)d=(e*a+r)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+w*2-r-1)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;w*=2}Lne(b,t,{polarRotation:0})}};Ob.Kaleidoscope=Fne,Mb.Factory.addGetterSetter(dA.Node,"kaleidoscopePower",2,(0,hA.getNumberValidator)(),Mb.Factory.afterSetFilter),Mb.Factory.addGetterSetter(dA.Node,"kaleidoscopeAngle",0,(0,hA.getNumberValidator)(),Mb.Factory.afterSetFilter);var Pb={};Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.Mask=void 0;const fA=Lt,Bne=Gn,zne=Qe;function Ab(t,e,n){var r=(n*t.width+e)*4,a=[];return a.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),a}function Jf(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function Une(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function jne(t,e){var n=Ab(t,0,0),r=Ab(t,t.width-1,0),a=Ab(t,0,t.height-1),i=Ab(t,t.width-1,t.height-1),o=e||10;if(Jf(n,r)<o&&Jf(r,i)<o&&Jf(i,a)<o&&Jf(a,n)<o){for(var s=Une([r,n,i,a]),l=[],u=0;u<t.width*t.height;u++){var c=Jf(s,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=c<o?0:255}return l}}function Vne(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function Wne(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c===255*8?255:0}return o}function Gne(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c>=255*4?255:0}return o}function Hne(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c}return o}const qne=function(t){var e=this.threshold(),n=jne(t,e);return n&&(n=Wne(n,t.width,t.height),n=Gne(n,t.width,t.height),n=Hne(n,t.width,t.height),Vne(t,n)),t};Pb.Mask=qne,fA.Factory.addGetterSetter(Bne.Node,"threshold",0,(0,zne.getNumberValidator)(),fA.Factory.afterSetFilter);var Db={};Object.defineProperty(Db,"__esModule",{value:!0}),Db.Noise=void 0;const mA=Lt,Kne=Gn,Xne=Qe,Yne=function(t){var e=this.noise()*255,n=t.data,r=n.length,a=e/2,i;for(i=0;i<r;i+=4)n[i+0]+=a-2*a*Math.random(),n[i+1]+=a-2*a*Math.random(),n[i+2]+=a-2*a*Math.random()};Db.Noise=Yne,mA.Factory.addGetterSetter(Kne.Node,"noise",.2,(0,Xne.getNumberValidator)(),mA.Factory.afterSetFilter);var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.Pixelate=void 0;const gA=Lt,Qne=nr,Zne=Gn,Jne=Qe,ere=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,a,i,o,s,l,u,c,d=Math.ceil(n/e),p=Math.ceil(r/e),f,g,y,v,b,x,w,S=t.data;if(e<=0){Qne.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<d;b+=1)for(x=0;x<p;x+=1){for(s=0,l=0,u=0,c=0,f=b*e,g=f+e,y=x*e,v=y+e,w=0,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,s+=S[o+0],l+=S[o+1],u+=S[o+2],c+=S[o+3],w+=1);for(s=s/w,l=l/w,u=u/w,c=c/w,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,S[o+0]=s,S[o+1]=l,S[o+2]=u,S[o+3]=c)}};Lb.Pixelate=ere,gA.Factory.addGetterSetter(Zne.Node,"pixelSize",8,(0,Jne.getNumberValidator)(),gA.Factory.afterSetFilter);var Fb={};Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.Posterize=void 0;const yA=Lt,tre=Gn,nre=Qe,rre=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,a=255/e,i;for(i=0;i<r;i+=1)n[i]=Math.floor(n[i]/a)*a};Fb.Posterize=rre,yA.Factory.addGetterSetter(tre.Node,"levels",.5,(0,nre.getNumberValidator)(),yA.Factory.afterSetFilter);var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.RGB=void 0;const zb=Lt,o3=Gn,are=Qe,ire=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<n;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*r,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};Bb.RGB=ire,zb.Factory.addGetterSetter(o3.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),zb.Factory.addGetterSetter(o3.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),zb.Factory.addGetterSetter(o3.Node,"blue",0,are.RGBComponent,zb.Factory.afterSetFilter);var Ub={};Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.RGBA=void 0;const em=Lt,jb=Gn,ore=Qe,sre=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<n;s+=4)l=1-o,e[s]=r*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};Ub.RGBA=sre,em.Factory.addGetterSetter(jb.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),em.Factory.addGetterSetter(jb.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),em.Factory.addGetterSetter(jb.Node,"blue",0,ore.RGBComponent,em.Factory.afterSetFilter),em.Factory.addGetterSetter(jb.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var Vb={};Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.Sepia=void 0;const lre=function(t){var e=t.data,n=e.length,r,a,i,o;for(r=0;r<n;r+=4)a=e[r+0],i=e[r+1],o=e[r+2],e[r+0]=Math.min(255,a*.393+i*.769+o*.189),e[r+1]=Math.min(255,a*.349+i*.686+o*.168),e[r+2]=Math.min(255,a*.272+i*.534+o*.131)};Vb.Sepia=lre;var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.Solarize=void 0;const ure=function(t){var e=t.data,n=t.width,r=t.height,a=n*4,i=r;do{var o=(i-1)*a,s=n;do{var l=o+(s-1)*4,u=e[l],c=e[l+1],d=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),d>127&&(d=255-d),e[l]=u,e[l+1]=c,e[l+2]=d}while(--s)}while(--i)};Wb.Solarize=ure;var Gb={};Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.Threshold=void 0;const bA=Lt,cre=Gn,dre=Qe,pre=function(t){var e=this.threshold()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=1)n[a]=n[a]<e?0:255};Gb.Threshold=pre,bA.Factory.addGetterSetter(cre.Node,"threshold",.5,(0,dre.getNumberValidator)(),bA.Factory.afterSetFilter),Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.Konva=void 0;const vA=Wy,hre=tb,fre=ab,mre=sb,gre=lb,yre=ub,xA=bp,bre=Kf,vre=mp,xre=Yf,wre=pb,kre=hb,Sre=fb,Cre=mb,Ire=Cc,Ere=yb,Tre=bb,Nre=xb,_re=kb,Rre=Sb,$re=Cb,Ore=Ib,Mre=Tb,Pre=Nb,Are=_b,Dre=Rb,Lre=$b,Fre=Ob,Bre=Pb,zre=Db,Ure=Lb,jre=Fb,Vre=Bb,Wre=Ub,Gre=Vb,Hre=Wb,qre=Gb;Vy.Konva=vA.Konva.Util._assign(vA.Konva,{Arc:hre.Arc,Arrow:fre.Arrow,Circle:mre.Circle,Ellipse:gre.Ellipse,Image:yre.Image,Label:xA.Label,Tag:xA.Tag,Line:bre.Line,Path:vre.Path,Rect:xre.Rect,RegularPolygon:wre.RegularPolygon,Ring:kre.Ring,Sprite:Sre.Sprite,Star:Cre.Star,Text:Ire.Text,TextPath:Ere.TextPath,Transformer:Tre.Transformer,Wedge:Nre.Wedge,Filters:{Blur:_re.Blur,Brighten:Rre.Brighten,Contrast:$re.Contrast,Emboss:Ore.Emboss,Enhance:Mre.Enhance,Grayscale:Pre.Grayscale,HSL:Are.HSL,HSV:Dre.HSV,Invert:Lre.Invert,Kaleidoscope:Fre.Kaleidoscope,Mask:Bre.Mask,Noise:zre.Noise,Pixelate:Ure.Pixelate,Posterize:jre.Posterize,RGB:Vre.RGB,RGBA:Wre.RGBA,Sepia:Gre.Sepia,Solarize:Hre.Solarize,Threshold:qre.Threshold}});var Kre=TE.exports;Object.defineProperty(Kre,"__esModule",{value:!0});const Xre=Vy;TE.exports=Xre.Konva;var Yre=TE.exports;const wA=Wi(Yre);var s3={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=Wy;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=Wy;t.exports=r.Konva})(s3,s3.exports);var Qre=s3.exports;const tm=Wi(Qre);var kA={exports:{}};/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Zre=function(t){var e={},n=$,r=zh,a=Object.assign;function i(h){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)m+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=S&&h[S]||h["@@iterator"],typeof h=="function"?h:null)}function E(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case c:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case f:return(h.displayName||"Context")+".Consumer";case p:return(h._context.displayName||"Context")+".Provider";case g:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case b:return m=h.displayName||null,m!==null?m:E(h.type)||"Memo";case x:m=h._payload,h=h._init;try{return E(h(m))}catch{}}return null}function _(h){var m=h.type;switch(h.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=m.render,h=h.displayName||h.name||"",m.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(m);case 8:return m===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function N(h){var m=h,k=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,m.flags&4098&&(k=m.return),h=m.return;while(h)}return m.tag===3?k:null}function M(h){if(N(h)!==h)throw Error(i(188))}function P(h){var m=h.alternate;if(!m){if(m=N(h),m===null)throw Error(i(188));return m!==h?null:h}for(var k=h,I=m;;){var T=k.return;if(T===null)break;var O=T.alternate;if(O===null){if(I=T.return,I!==null){k=I;continue}break}if(T.child===O.child){for(O=T.child;O;){if(O===k)return M(T),h;if(O===I)return M(T),m;O=O.sibling}throw Error(i(188))}if(k.return!==I.return)k=T,I=O;else{for(var W=!1,le=T.child;le;){if(le===k){W=!0,k=T,I=O;break}if(le===I){W=!0,I=T,k=O;break}le=le.sibling}if(!W){for(le=O.child;le;){if(le===k){W=!0,k=O,I=T;break}if(le===I){W=!0,I=O,k=T;break}le=le.sibling}if(!W)throw Error(i(189))}}if(k.alternate!==I)throw Error(i(190))}if(k.tag!==3)throw Error(i(188));return k.stateNode.current===k?h:m}function L(h){return h=P(h),h!==null?U(h):null}function U(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var m=U(h);if(m!==null)return m;h=h.sibling}return null}function B(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var m=B(h);if(m!==null)return m}h=h.sibling}return null}var K=Array.isArray,X=t.getPublicInstance,Z=t.getRootHostContext,H=t.getChildHostContext,F=t.prepareForCommit,Y=t.resetAfterCommit,Q=t.createInstance,ne=t.appendInitialChild,se=t.finalizeInitialChildren,pe=t.prepareUpdate,de=t.shouldSetTextContent,ie=t.createTextInstance,xe=t.scheduleTimeout,q=t.cancelTimeout,oe=t.noTimeout,he=t.isPrimaryRenderer,Ie=t.supportsMutation,Ee=t.supportsPersistence,_e=t.supportsHydration,Fe=t.getInstanceFromNode,Xe=t.preparePortalMount,Oe=t.getCurrentEventPriority,lt=t.detachDeletedInstance,Je=t.supportsMicrotasks,nt=t.scheduleMicrotask,et=t.supportsTestSelectors,on=t.findFiberRoot,Ut=t.getBoundingRect,Yt=t.getTextContent,Qt=t.isHiddenSubtree,$t=t.matchAccessibilityRole,Ct=t.setFocusIfFocusable,zn=t.setupIntersectionObserver,Xn=t.appendChild,za=t.appendChildToContainer,_n=t.commitTextUpdate,Qa=t.commitMount,mo=t.commitUpdate,bi=t.insertBefore,hn=t.insertInContainerBefore,Za=t.removeChild,vi=t.removeChildFromContainer,xi=t.resetTextContent,Cs=t.hideInstance,ma=t.hideTextInstance,vl=t.unhideInstance,ld=t.unhideTextInstance,Go=t.clearContainer,jt=t.cloneInstance,ue=t.createContainerChildSet,me=t.appendChildToContainerChildSet,ke=t.finalizeContainerChildren,Me=t.replaceContainerChildren,Ge=t.cloneHiddenInstance,yt=t.cloneHiddenTextInstance,ut=t.canHydrateInstance,ot=t.canHydrateTextInstance,tt=t.canHydrateSuspenseInstance,Ot=t.isSuspenseInstancePending,Pn=t.isSuspenseInstanceFallback,vt=t.getSuspenseInstanceFallbackErrorDetails,un=t.registerSuspenseInstanceRetry,fn=t.getNextHydratableSibling,Rr=t.getFirstHydratableChild,rr=t.getFirstHydratableChildWithinContainer,hr=t.getFirstHydratableChildWithinSuspenseInstance,Ho=t.hydrateInstance,Di=t.hydrateTextInstance,ga=t.hydrateSuspenseInstance,go=t.getNextHydratableInstanceAfterSuspenseInstance,Du=t.commitHydratedContainer,Lu=t.commitHydratedSuspenseInstance,xl=t.clearSuspenseBoundary,qo=t.clearSuspenseBoundaryFromContainer,yo=t.shouldDeleteUnhydratedTailInstances,tn=t.didNotMatchHydratedContainerTextInstance,cn=t.didNotMatchHydratedTextInstance,xr;function At(h){if(xr===void 0)try{throw Error()}catch(k){var m=k.stack.trim().match(/\n( *(at )?)/);xr=m&&m[1]||""}return`
`+xr+h}var wl=!1;function gh(h,m){if(!h||wl)return"";wl=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Re){var I=Re}Reflect.construct(h,[],m)}else{try{m.call()}catch(Re){I=Re}h.call(m.prototype)}else{try{throw Error()}catch(Re){I=Re}h()}}catch(Re){if(Re&&I&&typeof Re.stack=="string"){for(var T=Re.stack.split(`
`),O=I.stack.split(`
`),W=T.length-1,le=O.length-1;1<=W&&0<=le&&T[W]!==O[le];)le--;for(;1<=W&&0<=le;W--,le--)if(T[W]!==O[le]){if(W!==1||le!==1)do if(W--,le--,0>le||T[W]!==O[le]){var ye=`
`+T[W].replace(" at new "," at ");return h.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",h.displayName)),ye}while(1<=W&&0<=le);break}}}finally{wl=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?At(h):""}var Cw=Object.prototype.hasOwnProperty,Fu=[],kl=-1;function Li(h){return{current:h}}function wn(h){0>kl||(h.current=Fu[kl],Fu[kl]=null,kl--)}function mn(h,m){kl++,Fu[kl]=h.current,h.current=m}var Fi={},jr=Li(Fi),ya=Li(!1),Is=Fi;function Sl(h,m){var k=h.type.contextTypes;if(!k)return Fi;var I=h.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===m)return I.__reactInternalMemoizedMaskedChildContext;var T={},O;for(O in k)T[O]=m[O];return I&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=m,h.__reactInternalMemoizedMaskedChildContext=T),T}function ba(h){return h=h.childContextTypes,h!=null}function ud(){wn(ya),wn(jr)}function p0(h,m,k){if(jr.current!==Fi)throw Error(i(168));mn(jr,m),mn(ya,k)}function Un(h,m,k){var I=h.stateNode;if(m=m.childContextTypes,typeof I.getChildContext!="function")return k;I=I.getChildContext();for(var T in I)if(!(T in m))throw Error(i(108,_(h)||"Unknown",T));return a({},k,I)}function Ko(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Fi,Is=jr.current,mn(jr,h),mn(ya,ya.current),!0}function Bu(h,m,k){var I=h.stateNode;if(!I)throw Error(i(169));k?(h=Un(h,m,Is),I.__reactInternalMemoizedMergedChildContext=h,wn(ya),wn(jr),mn(jr,h)):wn(ya),mn(ya,k)}var wi=Math.clz32?Math.clz32:Iw,h0=Math.log,yh=Math.LN2;function Iw(h){return h>>>=0,h===0?32:31-(h0(h)/yh|0)|0}var cd=64,Es=4194304;function zu(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ts(h,m){var k=h.pendingLanes;if(k===0)return 0;var I=0,T=h.suspendedLanes,O=h.pingedLanes,W=k&268435455;if(W!==0){var le=W&~T;le!==0?I=zu(le):(O&=W,O!==0&&(I=zu(O)))}else W=k&~T,W!==0?I=zu(W):O!==0&&(I=zu(O));if(I===0)return 0;if(m!==0&&m!==I&&!(m&T)&&(T=I&-I,O=m&-m,T>=O||T===16&&(O&4194240)!==0))return m;if(I&4&&(I|=k&16),m=h.entangledLanes,m!==0)for(h=h.entanglements,m&=I;0<m;)k=31-wi(m),T=1<<k,I|=h[k],m&=~T;return I}function D(h,m){switch(h){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(h,m){for(var k=h.suspendedLanes,I=h.pingedLanes,T=h.expirationTimes,O=h.pendingLanes;0<O;){var W=31-wi(O),le=1<<W,ye=T[W];ye===-1?(!(le&k)||le&I)&&(T[W]=D(le,m)):ye<=m&&(h.expiredLanes|=le),O&=~le}}function J(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function re(){var h=cd;return cd<<=1,!(cd&4194240)&&(cd=64),h}function ve(h){for(var m=[],k=0;31>k;k++)m.push(h);return m}function Ce(h,m,k){h.pendingLanes|=m,m!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,m=31-wi(m),h[m]=k}function Ae(h,m){var k=h.pendingLanes&~m;h.pendingLanes=m,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=m,h.mutableReadLanes&=m,h.entangledLanes&=m,m=h.entanglements;var I=h.eventTimes;for(h=h.expirationTimes;0<k;){var T=31-wi(k),O=1<<T;m[T]=0,I[T]=-1,h[T]=-1,k&=~O}}function $e(h,m){var k=h.entangledLanes|=m;for(h=h.entanglements;k;){var I=31-wi(k),T=1<<I;T&m|h[I]&m&&(h[I]|=m),k&=~T}}var Ne=0;function Ue(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var mt=r.unstable_scheduleCallback,rt=r.unstable_cancelCallback,Rt=r.unstable_shouldYield,xt=r.unstable_requestPaint,Ke=r.unstable_now,ct=r.unstable_ImmediatePriority,pt=r.unstable_UserBlockingPriority,at=r.unstable_NormalPriority,wt=r.unstable_IdlePriority,st=null,bt=null;function ar(h){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(st,h,void 0,(h.current.flags&128)===128)}catch{}}function Ja(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var Vt=typeof Object.is=="function"?Object.is:Ja,jn=null,An=!1,va=!1;function Ua(h){jn===null?jn=[h]:jn.push(h)}function bo(h){An=!0,Ua(h)}function wr(){if(!va&&jn!==null){va=!0;var h=0,m=Ne;try{var k=jn;for(Ne=1;h<k.length;h++){var I=k[h];do I=I(!0);while(I!==null)}jn=null,An=!1}catch(T){throw jn!==null&&(jn=jn.slice(h+1)),mt(ct,wr),T}finally{Ne=m,va=!1}}return null}var ht=[],_t=0,kr=null,Sr=0,dn=[],Rn=0,ea=null,vo=1,ta="";function Ns(h,m){ht[_t++]=Sr,ht[_t++]=kr,kr=h,Sr=m}function bh(h,m,k){dn[Rn++]=vo,dn[Rn++]=ta,dn[Rn++]=ea,ea=h;var I=vo;h=ta;var T=32-wi(I)-1;I&=~(1<<T),k+=1;var O=32-wi(m)+T;if(30<O){var W=T-T%5;O=(I&(1<<W)-1).toString(32),I>>=W,T-=W,vo=1<<32-wi(m)+T|k<<T|I,ta=O+h}else vo=1<<O|k<<T|I,ta=h}function ja(h){h.return!==null&&(Ns(h,1),bh(h,1,0))}function _s(h){for(;h===kr;)kr=ht[--_t],ht[_t]=null,Sr=ht[--_t],ht[_t]=null;for(;h===ea;)ea=dn[--Rn],dn[Rn]=null,ta=dn[--Rn],dn[Rn]=null,vo=dn[--Rn],dn[Rn]=null}var ir=null,na=null,nn=!1,Rs=!1,xo=null;function h_(h,m){var k=Vi(5,null,null,0);k.elementType="DELETED",k.stateNode=m,k.return=h,m=h.deletions,m===null?(h.deletions=[k],h.flags|=16):m.push(k)}function f_(h,m){switch(h.tag){case 5:return m=ut(m,h.type,h.pendingProps),m!==null?(h.stateNode=m,ir=h,na=Rr(m),!0):!1;case 6:return m=ot(m,h.pendingProps),m!==null?(h.stateNode=m,ir=h,na=null,!0):!1;case 13:if(m=tt(m),m!==null){var k=ea!==null?{id:vo,overflow:ta}:null;return h.memoizedState={dehydrated:m,treeContext:k,retryLane:1073741824},k=Vi(18,null,null,0),k.stateNode=m,k.return=h,h.child=k,ir=h,na=null,!0}return!1;default:return!1}}function Ew(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Tw(h){if(nn){var m=na;if(m){var k=m;if(!f_(h,m)){if(Ew(h))throw Error(i(418));m=fn(k);var I=ir;m&&f_(h,m)?h_(I,k):(h.flags=h.flags&-4097|2,nn=!1,ir=h)}}else{if(Ew(h))throw Error(i(418));h.flags=h.flags&-4097|2,nn=!1,ir=h}}}function m_(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ir=h}function f0(h){if(!_e||h!==ir)return!1;if(!nn)return m_(h),nn=!0,!1;if(h.tag!==3&&(h.tag!==5||yo(h.type)&&!de(h.type,h.memoizedProps))){var m=na;if(m){if(Ew(h))throw g_(),Error(i(418));for(;m;)h_(h,m),m=fn(m)}}if(m_(h),h.tag===13){if(!_e)throw Error(i(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));na=go(h)}else na=ir?fn(h.stateNode):null;return!0}function g_(){for(var h=na;h;)h=fn(h)}function dd(){_e&&(na=ir=null,Rs=nn=!1)}function Nw(h){xo===null?xo=[h]:xo.push(h)}var QU=o.ReactCurrentBatchConfig;function m0(h,m){if(Vt(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var k=Object.keys(h),I=Object.keys(m);if(k.length!==I.length)return!1;for(I=0;I<k.length;I++){var T=k[I];if(!Cw.call(m,T)||!Vt(h[T],m[T]))return!1}return!0}function ZU(h){switch(h.tag){case 5:return At(h.type);case 16:return At("Lazy");case 13:return At("Suspense");case 19:return At("SuspenseList");case 0:case 2:case 15:return h=gh(h.type,!1),h;case 11:return h=gh(h.type.render,!1),h;case 1:return h=gh(h.type,!0),h;default:return""}}function wo(h,m){if(h&&h.defaultProps){m=a({},m),h=h.defaultProps;for(var k in h)m[k]===void 0&&(m[k]=h[k]);return m}return m}var g0=Li(null),y0=null,pd=null,_w=null;function Rw(){_w=pd=y0=null}function y_(h,m,k){he?(mn(g0,m._currentValue),m._currentValue=k):(mn(g0,m._currentValue2),m._currentValue2=k)}function $w(h){var m=g0.current;wn(g0),he?h._currentValue=m:h._currentValue2=m}function Ow(h,m,k){for(;h!==null;){var I=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,I!==null&&(I.childLanes|=m)):I!==null&&(I.childLanes&m)!==m&&(I.childLanes|=m),h===k)break;h=h.return}}function hd(h,m){y0=h,_w=pd=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&m&&(ei=!0),h.firstContext=null)}function Bi(h){var m=he?h._currentValue:h._currentValue2;if(_w!==h)if(h={context:h,memoizedValue:m,next:null},pd===null){if(y0===null)throw Error(i(308));pd=h,y0.dependencies={lanes:0,firstContext:h}}else pd=pd.next=h;return m}var Uu=null;function Mw(h){Uu===null?Uu=[h]:Uu.push(h)}function b_(h,m,k,I){var T=m.interleaved;return T===null?(k.next=k,Mw(m)):(k.next=T.next,T.next=k),m.interleaved=k,Xo(h,I)}function Xo(h,m){h.lanes|=m;var k=h.alternate;for(k!==null&&(k.lanes|=m),k=h,h=h.return;h!==null;)h.childLanes|=m,k=h.alternate,k!==null&&(k.childLanes|=m),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Cl=!1;function Pw(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v_(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function $s(h,m){return{eventTime:h,lane:m,tag:0,payload:null,callback:null,next:null}}function Il(h,m,k){var I=h.updateQueue;if(I===null)return null;if(I=I.shared,Bt&2){var T=I.pending;return T===null?m.next=m:(m.next=T.next,T.next=m),I.pending=m,Xo(h,k)}return T=I.interleaved,T===null?(m.next=m,Mw(I)):(m.next=T.next,T.next=m),I.interleaved=m,Xo(h,k)}function b0(h,m,k){if(m=m.updateQueue,m!==null&&(m=m.shared,(k&4194240)!==0)){var I=m.lanes;I&=h.pendingLanes,k|=I,m.lanes=k,$e(h,k)}}function x_(h,m){var k=h.updateQueue,I=h.alternate;if(I!==null&&(I=I.updateQueue,k===I)){var T=null,O=null;if(k=k.firstBaseUpdate,k!==null){do{var W={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};O===null?T=O=W:O=O.next=W,k=k.next}while(k!==null);O===null?T=O=m:O=O.next=m}else T=O=m;k={baseState:I.baseState,firstBaseUpdate:T,lastBaseUpdate:O,shared:I.shared,effects:I.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=m:h.next=m,k.lastBaseUpdate=m}function v0(h,m,k,I){var T=h.updateQueue;Cl=!1;var O=T.firstBaseUpdate,W=T.lastBaseUpdate,le=T.shared.pending;if(le!==null){T.shared.pending=null;var ye=le,Re=ye.next;ye.next=null,W===null?O=Re:W.next=Re,W=ye;var qe=h.alternate;qe!==null&&(qe=qe.updateQueue,le=qe.lastBaseUpdate,le!==W&&(le===null?qe.firstBaseUpdate=Re:le.next=Re,qe.lastBaseUpdate=ye))}if(O!==null){var It=T.baseState;W=0,qe=Re=ye=null,le=O;do{var Be=le.lane,Dn=le.eventTime;if((I&Be)===Be){qe!==null&&(qe=qe.next={eventTime:Dn,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var kn=h,ri=le;switch(Be=m,Dn=k,ri.tag){case 1:if(kn=ri.payload,typeof kn=="function"){It=kn.call(Dn,It,Be);break e}It=kn;break e;case 3:kn.flags=kn.flags&-65537|128;case 0:if(kn=ri.payload,Be=typeof kn=="function"?kn.call(Dn,It,Be):kn,Be==null)break e;It=a({},It,Be);break e;case 2:Cl=!0}}le.callback!==null&&le.lane!==0&&(h.flags|=64,Be=T.effects,Be===null?T.effects=[le]:Be.push(le))}else Dn={eventTime:Dn,lane:Be,tag:le.tag,payload:le.payload,callback:le.callback,next:null},qe===null?(Re=qe=Dn,ye=It):qe=qe.next=Dn,W|=Be;if(le=le.next,le===null){if(le=T.shared.pending,le===null)break;Be=le,le=Be.next,Be.next=null,T.lastBaseUpdate=Be,T.shared.pending=null}}while(!0);if(qe===null&&(ye=It),T.baseState=ye,T.firstBaseUpdate=Re,T.lastBaseUpdate=qe,m=T.shared.interleaved,m!==null){T=m;do W|=T.lane,T=T.next;while(T!==m)}else O===null&&(T.shared.lanes=0);Vu|=W,h.lanes=W,h.memoizedState=It}}function w_(h,m,k){if(h=m.effects,m.effects=null,h!==null)for(m=0;m<h.length;m++){var I=h[m],T=I.callback;if(T!==null){if(I.callback=null,I=k,typeof T!="function")throw Error(i(191,T));T.call(I)}}}var k_=new n.Component().refs;function Aw(h,m,k,I){m=h.memoizedState,k=k(I,m),k=k==null?m:a({},m,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var x0={isMounted:function(h){return(h=h._reactInternals)?N(h)===h:!1},enqueueSetState:function(h,m,k){h=h._reactInternals;var I=Sa(),T=Nl(h),O=$s(I,T);O.payload=m,k!=null&&(O.callback=k),m=Il(h,O,T),m!==null&&(ji(m,h,T,I),b0(m,h,T))},enqueueReplaceState:function(h,m,k){h=h._reactInternals;var I=Sa(),T=Nl(h),O=$s(I,T);O.tag=1,O.payload=m,k!=null&&(O.callback=k),m=Il(h,O,T),m!==null&&(ji(m,h,T,I),b0(m,h,T))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var k=Sa(),I=Nl(h),T=$s(k,I);T.tag=2,m!=null&&(T.callback=m),m=Il(h,T,I),m!==null&&(ji(m,h,I,k),b0(m,h,I))}};function S_(h,m,k,I,T,O,W){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(I,O,W):m.prototype&&m.prototype.isPureReactComponent?!m0(k,I)||!m0(T,O):!0}function C_(h,m,k){var I=!1,T=Fi,O=m.contextType;return typeof O=="object"&&O!==null?O=Bi(O):(T=ba(m)?Is:jr.current,I=m.contextTypes,O=(I=I!=null)?Sl(h,T):Fi),m=new m(k,O),h.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=x0,h.stateNode=m,m._reactInternals=h,I&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=T,h.__reactInternalMemoizedMaskedChildContext=O),m}function I_(h,m,k,I){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(k,I),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(k,I),m.state!==h&&x0.enqueueReplaceState(m,m.state,null)}function Dw(h,m,k,I){var T=h.stateNode;T.props=k,T.state=h.memoizedState,T.refs=k_,Pw(h);var O=m.contextType;typeof O=="object"&&O!==null?T.context=Bi(O):(O=ba(m)?Is:jr.current,T.context=Sl(h,O)),T.state=h.memoizedState,O=m.getDerivedStateFromProps,typeof O=="function"&&(Aw(h,m,O,k),T.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(m=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),m!==T.state&&x0.enqueueReplaceState(T,T.state,null),v0(h,k,T,I),T.state=h.memoizedState),typeof T.componentDidMount=="function"&&(h.flags|=4194308)}function vh(h,m,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(i(309));var I=k.stateNode}if(!I)throw Error(i(147,h));var T=I,O=""+h;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===O?m.ref:(m=function(W){var le=T.refs;le===k_&&(le=T.refs={}),W===null?delete le[O]:le[O]=W},m._stringRef=O,m)}if(typeof h!="string")throw Error(i(284));if(!k._owner)throw Error(i(290,h))}return h}function w0(h,m){throw h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h))}function E_(h){var m=h._init;return m(h._payload)}function T_(h){function m(ge,ce){if(h){var we=ge.deletions;we===null?(ge.deletions=[ce],ge.flags|=16):we.push(ce)}}function k(ge,ce){if(!h)return null;for(;ce!==null;)m(ge,ce),ce=ce.sibling;return null}function I(ge,ce){for(ge=new Map;ce!==null;)ce.key!==null?ge.set(ce.key,ce):ge.set(ce.index,ce),ce=ce.sibling;return ge}function T(ge,ce){return ge=Rl(ge,ce),ge.index=0,ge.sibling=null,ge}function O(ge,ce,we){return ge.index=we,h?(we=ge.alternate,we!==null?(we=we.index,we<ce?(ge.flags|=2,ce):we):(ge.flags|=2,ce)):(ge.flags|=1048576,ce)}function W(ge){return h&&ge.alternate===null&&(ge.flags|=2),ge}function le(ge,ce,we,ze){return ce===null||ce.tag!==6?(ce=kk(we,ge.mode,ze),ce.return=ge,ce):(ce=T(ce,we),ce.return=ge,ce)}function ye(ge,ce,we,ze){var dt=we.type;return dt===u?qe(ge,ce,we.props.children,ze,we.key):ce!==null&&(ce.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&E_(dt)===ce.type)?(ze=T(ce,we.props),ze.ref=vh(ge,ce,we),ze.return=ge,ze):(ze=q0(we.type,we.key,we.props,null,ge.mode,ze),ze.ref=vh(ge,ce,we),ze.return=ge,ze)}function Re(ge,ce,we,ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==we.containerInfo||ce.stateNode.implementation!==we.implementation?(ce=Sk(we,ge.mode,ze),ce.return=ge,ce):(ce=T(ce,we.children||[]),ce.return=ge,ce)}function qe(ge,ce,we,ze,dt){return ce===null||ce.tag!==7?(ce=qu(we,ge.mode,ze,dt),ce.return=ge,ce):(ce=T(ce,we),ce.return=ge,ce)}function It(ge,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=kk(""+ce,ge.mode,we),ce.return=ge,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case s:return we=q0(ce.type,ce.key,ce.props,null,ge.mode,we),we.ref=vh(ge,null,ce),we.return=ge,we;case l:return ce=Sk(ce,ge.mode,we),ce.return=ge,ce;case x:var ze=ce._init;return It(ge,ze(ce._payload),we)}if(K(ce)||C(ce))return ce=qu(ce,ge.mode,we,null),ce.return=ge,ce;w0(ge,ce)}return null}function Be(ge,ce,we,ze){var dt=ce!==null?ce.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return dt!==null?null:le(ge,ce,""+we,ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case s:return we.key===dt?ye(ge,ce,we,ze):null;case l:return we.key===dt?Re(ge,ce,we,ze):null;case x:return dt=we._init,Be(ge,ce,dt(we._payload),ze)}if(K(we)||C(we))return dt!==null?null:qe(ge,ce,we,ze,null);w0(ge,we)}return null}function Dn(ge,ce,we,ze,dt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ge=ge.get(we)||null,le(ce,ge,""+ze,dt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case s:return ge=ge.get(ze.key===null?we:ze.key)||null,ye(ce,ge,ze,dt);case l:return ge=ge.get(ze.key===null?we:ze.key)||null,Re(ce,ge,ze,dt);case x:var Mt=ze._init;return Dn(ge,ce,we,Mt(ze._payload),dt)}if(K(ze)||C(ze))return ge=ge.get(we)||null,qe(ce,ge,ze,dt,null);w0(ce,ze)}return null}function kn(ge,ce,we,ze){for(var dt=null,Mt=null,Et=ce,rn=ce=0,Gr=null;Et!==null&&rn<we.length;rn++){Et.index>rn?(Gr=Et,Et=null):Gr=Et.sibling;var an=Be(ge,Et,we[rn],ze);if(an===null){Et===null&&(Et=Gr);break}h&&Et&&an.alternate===null&&m(ge,Et),ce=O(an,ce,rn),Mt===null?dt=an:Mt.sibling=an,Mt=an,Et=Gr}if(rn===we.length)return k(ge,Et),nn&&Ns(ge,rn),dt;if(Et===null){for(;rn<we.length;rn++)Et=It(ge,we[rn],ze),Et!==null&&(ce=O(Et,ce,rn),Mt===null?dt=Et:Mt.sibling=Et,Mt=Et);return nn&&Ns(ge,rn),dt}for(Et=I(ge,Et);rn<we.length;rn++)Gr=Dn(Et,ge,rn,we[rn],ze),Gr!==null&&(h&&Gr.alternate!==null&&Et.delete(Gr.key===null?rn:Gr.key),ce=O(Gr,ce,rn),Mt===null?dt=Gr:Mt.sibling=Gr,Mt=Gr);return h&&Et.forEach(function($l){return m(ge,$l)}),nn&&Ns(ge,rn),dt}function ri(ge,ce,we,ze){var dt=C(we);if(typeof dt!="function")throw Error(i(150));if(we=dt.call(we),we==null)throw Error(i(151));for(var Mt=dt=null,Et=ce,rn=ce=0,Gr=null,an=we.next();Et!==null&&!an.done;rn++,an=we.next()){Et.index>rn?(Gr=Et,Et=null):Gr=Et.sibling;var $l=Be(ge,Et,an.value,ze);if($l===null){Et===null&&(Et=Gr);break}h&&Et&&$l.alternate===null&&m(ge,Et),ce=O($l,ce,rn),Mt===null?dt=$l:Mt.sibling=$l,Mt=$l,Et=Gr}if(an.done)return k(ge,Et),nn&&Ns(ge,rn),dt;if(Et===null){for(;!an.done;rn++,an=we.next())an=It(ge,an.value,ze),an!==null&&(ce=O(an,ce,rn),Mt===null?dt=an:Mt.sibling=an,Mt=an);return nn&&Ns(ge,rn),dt}for(Et=I(ge,Et);!an.done;rn++,an=we.next())an=Dn(Et,ge,rn,an.value,ze),an!==null&&(h&&an.alternate!==null&&Et.delete(an.key===null?rn:an.key),ce=O(an,ce,rn),Mt===null?dt=an:Mt.sibling=an,Mt=an);return h&&Et.forEach(function(Nj){return m(ge,Nj)}),nn&&Ns(ge,rn),dt}function Ps(ge,ce,we,ze){if(typeof we=="object"&&we!==null&&we.type===u&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case s:e:{for(var dt=we.key,Mt=ce;Mt!==null;){if(Mt.key===dt){if(dt=we.type,dt===u){if(Mt.tag===7){k(ge,Mt.sibling),ce=T(Mt,we.props.children),ce.return=ge,ge=ce;break e}}else if(Mt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&E_(dt)===Mt.type){k(ge,Mt.sibling),ce=T(Mt,we.props),ce.ref=vh(ge,Mt,we),ce.return=ge,ge=ce;break e}k(ge,Mt);break}else m(ge,Mt);Mt=Mt.sibling}we.type===u?(ce=qu(we.props.children,ge.mode,ze,we.key),ce.return=ge,ge=ce):(ze=q0(we.type,we.key,we.props,null,ge.mode,ze),ze.ref=vh(ge,ce,we),ze.return=ge,ge=ze)}return W(ge);case l:e:{for(Mt=we.key;ce!==null;){if(ce.key===Mt)if(ce.tag===4&&ce.stateNode.containerInfo===we.containerInfo&&ce.stateNode.implementation===we.implementation){k(ge,ce.sibling),ce=T(ce,we.children||[]),ce.return=ge,ge=ce;break e}else{k(ge,ce);break}else m(ge,ce);ce=ce.sibling}ce=Sk(we,ge.mode,ze),ce.return=ge,ge=ce}return W(ge);case x:return Mt=we._init,Ps(ge,ce,Mt(we._payload),ze)}if(K(we))return kn(ge,ce,we,ze);if(C(we))return ri(ge,ce,we,ze);w0(ge,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ce!==null&&ce.tag===6?(k(ge,ce.sibling),ce=T(ce,we),ce.return=ge,ge=ce):(k(ge,ce),ce=kk(we,ge.mode,ze),ce.return=ge,ge=ce),W(ge)):k(ge,ce)}return Ps}var fd=T_(!0),N_=T_(!1),xh={},zi=Li(xh),wh=Li(xh),md=Li(xh);function Yo(h){if(h===xh)throw Error(i(174));return h}function Lw(h,m){mn(md,m),mn(wh,h),mn(zi,xh),h=Z(m),wn(zi),mn(zi,h)}function gd(){wn(zi),wn(wh),wn(md)}function __(h){var m=Yo(md.current),k=Yo(zi.current);m=H(k,h.type,m),k!==m&&(mn(wh,h),mn(zi,m))}function Fw(h){wh.current===h&&(wn(zi),wn(wh))}var Yn=Li(0);function k0(h){for(var m=h;m!==null;){if(m.tag===13){var k=m.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||Ot(k)||Pn(k)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Bw=[];function zw(){for(var h=0;h<Bw.length;h++){var m=Bw[h];he?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}Bw.length=0}var S0=o.ReactCurrentDispatcher,Uw=o.ReactCurrentBatchConfig,ju=0,Qn=null,$r=null,Vr=null,C0=!1,kh=!1,Sh=0,JU=0;function xa(){throw Error(i(321))}function jw(h,m){if(m===null)return!1;for(var k=0;k<m.length&&k<h.length;k++)if(!Vt(h[k],m[k]))return!1;return!0}function Vw(h,m,k,I,T,O){if(ju=O,Qn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,S0.current=h===null||h.memoizedState===null?rj:aj,h=k(I,T),kh){O=0;do{if(kh=!1,Sh=0,25<=O)throw Error(i(301));O+=1,Vr=$r=null,m.updateQueue=null,S0.current=ij,h=k(I,T)}while(kh)}if(S0.current=T0,m=$r!==null&&$r.next!==null,ju=0,Vr=$r=Qn=null,C0=!1,m)throw Error(i(300));return h}function Ww(){var h=Sh!==0;return Sh=0,h}function Qo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Qn.memoizedState=Vr=h:Vr=Vr.next=h,Vr}function Ui(){if($r===null){var h=Qn.alternate;h=h!==null?h.memoizedState:null}else h=$r.next;var m=Vr===null?Qn.memoizedState:Vr.next;if(m!==null)Vr=m,$r=h;else{if(h===null)throw Error(i(310));$r=h,h={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Vr===null?Qn.memoizedState=Vr=h:Vr=Vr.next=h}return Vr}function Ch(h,m){return typeof m=="function"?m(h):m}function Gw(h){var m=Ui(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var I=$r,T=I.baseQueue,O=k.pending;if(O!==null){if(T!==null){var W=T.next;T.next=O.next,O.next=W}I.baseQueue=T=O,k.pending=null}if(T!==null){O=T.next,I=I.baseState;var le=W=null,ye=null,Re=O;do{var qe=Re.lane;if((ju&qe)===qe)ye!==null&&(ye=ye.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),I=Re.hasEagerState?Re.eagerState:h(I,Re.action);else{var It={lane:qe,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ye===null?(le=ye=It,W=I):ye=ye.next=It,Qn.lanes|=qe,Vu|=qe}Re=Re.next}while(Re!==null&&Re!==O);ye===null?W=I:ye.next=le,Vt(I,m.memoizedState)||(ei=!0),m.memoizedState=I,m.baseState=W,m.baseQueue=ye,k.lastRenderedState=I}if(h=k.interleaved,h!==null){T=h;do O=T.lane,Qn.lanes|=O,Vu|=O,T=T.next;while(T!==h)}else T===null&&(k.lanes=0);return[m.memoizedState,k.dispatch]}function Hw(h){var m=Ui(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var I=k.dispatch,T=k.pending,O=m.memoizedState;if(T!==null){k.pending=null;var W=T=T.next;do O=h(O,W.action),W=W.next;while(W!==T);Vt(O,m.memoizedState)||(ei=!0),m.memoizedState=O,m.baseQueue===null&&(m.baseState=O),k.lastRenderedState=O}return[O,I]}function R_(){}function $_(h,m){var k=Qn,I=Ui(),T=m(),O=!Vt(I.memoizedState,T);if(O&&(I.memoizedState=T,ei=!0),I=I.queue,qw(P_.bind(null,k,I,h),[h]),I.getSnapshot!==m||O||Vr!==null&&Vr.memoizedState.tag&1){if(k.flags|=2048,Ih(9,M_.bind(null,k,I,T,m),void 0,null),Wr===null)throw Error(i(349));ju&30||O_(k,m,T)}return T}function O_(h,m,k){h.flags|=16384,h={getSnapshot:m,value:k},m=Qn.updateQueue,m===null?(m={lastEffect:null,stores:null},Qn.updateQueue=m,m.stores=[h]):(k=m.stores,k===null?m.stores=[h]:k.push(h))}function M_(h,m,k,I){m.value=k,m.getSnapshot=I,A_(m)&&D_(h)}function P_(h,m,k){return k(function(){A_(m)&&D_(h)})}function A_(h){var m=h.getSnapshot;h=h.value;try{var k=m();return!Vt(h,k)}catch{return!0}}function D_(h){var m=Xo(h,1);m!==null&&ji(m,h,1,-1)}function L_(h){var m=Qo();return typeof h=="function"&&(h=h()),m.memoizedState=m.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ch,lastRenderedState:h},m.queue=h,h=h.dispatch=nj.bind(null,Qn,h),[m.memoizedState,h]}function Ih(h,m,k,I){return h={tag:h,create:m,destroy:k,deps:I,next:null},m=Qn.updateQueue,m===null?(m={lastEffect:null,stores:null},Qn.updateQueue=m,m.lastEffect=h.next=h):(k=m.lastEffect,k===null?m.lastEffect=h.next=h:(I=k.next,k.next=h,h.next=I,m.lastEffect=h)),h}function F_(){return Ui().memoizedState}function I0(h,m,k,I){var T=Qo();Qn.flags|=h,T.memoizedState=Ih(1|m,k,void 0,I===void 0?null:I)}function E0(h,m,k,I){var T=Ui();I=I===void 0?null:I;var O=void 0;if($r!==null){var W=$r.memoizedState;if(O=W.destroy,I!==null&&jw(I,W.deps)){T.memoizedState=Ih(m,k,O,I);return}}Qn.flags|=h,T.memoizedState=Ih(1|m,k,O,I)}function B_(h,m){return I0(8390656,8,h,m)}function qw(h,m){return E0(2048,8,h,m)}function z_(h,m){return E0(4,2,h,m)}function U_(h,m){return E0(4,4,h,m)}function j_(h,m){if(typeof m=="function")return h=h(),m(h),function(){m(null)};if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function V_(h,m,k){return k=k!=null?k.concat([h]):null,E0(4,4,j_.bind(null,m,h),k)}function Kw(){}function W_(h,m){var k=Ui();m=m===void 0?null:m;var I=k.memoizedState;return I!==null&&m!==null&&jw(m,I[1])?I[0]:(k.memoizedState=[h,m],h)}function G_(h,m){var k=Ui();m=m===void 0?null:m;var I=k.memoizedState;return I!==null&&m!==null&&jw(m,I[1])?I[0]:(h=h(),k.memoizedState=[h,m],h)}function H_(h,m,k){return ju&21?(Vt(k,m)||(k=re(),Qn.lanes|=k,Vu|=k,h.baseState=!0),m):(h.baseState&&(h.baseState=!1,ei=!0),h.memoizedState=k)}function ej(h,m){var k=Ne;Ne=k!==0&&4>k?k:4,h(!0);var I=Uw.transition;Uw.transition={};try{h(!1),m()}finally{Ne=k,Uw.transition=I}}function q_(){return Ui().memoizedState}function tj(h,m,k){var I=Nl(h);if(k={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null},K_(h))X_(m,k);else if(k=b_(h,m,k,I),k!==null){var T=Sa();ji(k,h,I,T),Y_(k,m,I)}}function nj(h,m,k){var I=Nl(h),T={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null};if(K_(h))X_(m,T);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=m.lastRenderedReducer,O!==null))try{var W=m.lastRenderedState,le=O(W,k);if(T.hasEagerState=!0,T.eagerState=le,Vt(le,W)){var ye=m.interleaved;ye===null?(T.next=T,Mw(m)):(T.next=ye.next,ye.next=T),m.interleaved=T;return}}catch{}finally{}k=b_(h,m,T,I),k!==null&&(T=Sa(),ji(k,h,I,T),Y_(k,m,I))}}function K_(h){var m=h.alternate;return h===Qn||m!==null&&m===Qn}function X_(h,m){kh=C0=!0;var k=h.pending;k===null?m.next=m:(m.next=k.next,k.next=m),h.pending=m}function Y_(h,m,k){if(k&4194240){var I=m.lanes;I&=h.pendingLanes,k|=I,m.lanes=k,$e(h,k)}}var T0={readContext:Bi,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useInsertionEffect:xa,useLayoutEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useMutableSource:xa,useSyncExternalStore:xa,useId:xa,unstable_isNewReconciler:!1},rj={readContext:Bi,useCallback:function(h,m){return Qo().memoizedState=[h,m===void 0?null:m],h},useContext:Bi,useEffect:B_,useImperativeHandle:function(h,m,k){return k=k!=null?k.concat([h]):null,I0(4194308,4,j_.bind(null,m,h),k)},useLayoutEffect:function(h,m){return I0(4194308,4,h,m)},useInsertionEffect:function(h,m){return I0(4,2,h,m)},useMemo:function(h,m){var k=Qo();return m=m===void 0?null:m,h=h(),k.memoizedState=[h,m],h},useReducer:function(h,m,k){var I=Qo();return m=k!==void 0?k(m):m,I.memoizedState=I.baseState=m,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:m},I.queue=h,h=h.dispatch=tj.bind(null,Qn,h),[I.memoizedState,h]},useRef:function(h){var m=Qo();return h={current:h},m.memoizedState=h},useState:L_,useDebugValue:Kw,useDeferredValue:function(h){return Qo().memoizedState=h},useTransition:function(){var h=L_(!1),m=h[0];return h=ej.bind(null,h[1]),Qo().memoizedState=h,[m,h]},useMutableSource:function(){},useSyncExternalStore:function(h,m,k){var I=Qn,T=Qo();if(nn){if(k===void 0)throw Error(i(407));k=k()}else{if(k=m(),Wr===null)throw Error(i(349));ju&30||O_(I,m,k)}T.memoizedState=k;var O={value:k,getSnapshot:m};return T.queue=O,B_(P_.bind(null,I,O,h),[h]),I.flags|=2048,Ih(9,M_.bind(null,I,O,k,m),void 0,null),k},useId:function(){var h=Qo(),m=Wr.identifierPrefix;if(nn){var k=ta,I=vo;k=(I&~(1<<32-wi(I)-1)).toString(32)+k,m=":"+m+"R"+k,k=Sh++,0<k&&(m+="H"+k.toString(32)),m+=":"}else k=JU++,m=":"+m+"r"+k.toString(32)+":";return h.memoizedState=m},unstable_isNewReconciler:!1},aj={readContext:Bi,useCallback:W_,useContext:Bi,useEffect:qw,useImperativeHandle:V_,useInsertionEffect:z_,useLayoutEffect:U_,useMemo:G_,useReducer:Gw,useRef:F_,useState:function(){return Gw(Ch)},useDebugValue:Kw,useDeferredValue:function(h){var m=Ui();return H_(m,$r.memoizedState,h)},useTransition:function(){var h=Gw(Ch)[0],m=Ui().memoizedState;return[h,m]},useMutableSource:R_,useSyncExternalStore:$_,useId:q_,unstable_isNewReconciler:!1},ij={readContext:Bi,useCallback:W_,useContext:Bi,useEffect:qw,useImperativeHandle:V_,useInsertionEffect:z_,useLayoutEffect:U_,useMemo:G_,useReducer:Hw,useRef:F_,useState:function(){return Hw(Ch)},useDebugValue:Kw,useDeferredValue:function(h){var m=Ui();return $r===null?m.memoizedState=h:H_(m,$r.memoizedState,h)},useTransition:function(){var h=Hw(Ch)[0],m=Ui().memoizedState;return[h,m]},useMutableSource:R_,useSyncExternalStore:$_,useId:q_,unstable_isNewReconciler:!1};function yd(h,m){try{var k="",I=m;do k+=ZU(I),I=I.return;while(I);var T=k}catch(O){T=`
Error generating stack: `+O.message+`
`+O.stack}return{value:h,source:m,stack:T,digest:null}}function Xw(h,m,k){return{value:h,source:null,stack:k??null,digest:m??null}}function Yw(h,m){try{console.error(m.value)}catch(k){setTimeout(function(){throw k})}}var oj=typeof WeakMap=="function"?WeakMap:Map;function Q_(h,m,k){k=$s(-1,k),k.tag=3,k.payload={element:null};var I=m.value;return k.callback=function(){U0||(U0=!0,mk=I),Yw(h,m)},k}function Z_(h,m,k){k=$s(-1,k),k.tag=3;var I=h.type.getDerivedStateFromError;if(typeof I=="function"){var T=m.value;k.payload=function(){return I(T)},k.callback=function(){Yw(h,m)}}var O=h.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(k.callback=function(){Yw(h,m),typeof I!="function"&&(El===null?El=new Set([this]):El.add(this));var W=m.stack;this.componentDidCatch(m.value,{componentStack:W!==null?W:""})}),k}function J_(h,m,k){var I=h.pingCache;if(I===null){I=h.pingCache=new oj;var T=new Set;I.set(m,T)}else T=I.get(m),T===void 0&&(T=new Set,I.set(m,T));T.has(k)||(T.add(k),h=xj.bind(null,h,m,k),m.then(h,h))}function e5(h){do{var m;if((m=h.tag===13)&&(m=h.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return h;h=h.return}while(h!==null);return null}function t5(h,m,k,I,T){return h.mode&1?(h.flags|=65536,h.lanes=T,h):(h===m?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(m=$s(-1,1),m.tag=2,Il(k,m,1))),k.lanes|=1),h)}var sj=o.ReactCurrentOwner,ei=!1;function Va(h,m,k,I){m.child=h===null?N_(m,null,k,I):fd(m,h.child,k,I)}function n5(h,m,k,I,T){k=k.render;var O=m.ref;return hd(m,T),I=Vw(h,m,k,I,O,T),k=Ww(),h!==null&&!ei?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~T,Os(h,m,T)):(nn&&k&&ja(m),m.flags|=1,Va(h,m,I,T),m.child)}function r5(h,m,k,I,T){if(h===null){var O=k.type;return typeof O=="function"&&!wk(O)&&O.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(m.tag=15,m.type=O,a5(h,m,O,I,T)):(h=q0(k.type,null,I,m,m.mode,T),h.ref=m.ref,h.return=m,m.child=h)}if(O=h.child,!(h.lanes&T)){var W=O.memoizedProps;if(k=k.compare,k=k!==null?k:m0,k(W,I)&&h.ref===m.ref)return Os(h,m,T)}return m.flags|=1,h=Rl(O,I),h.ref=m.ref,h.return=m,m.child=h}function a5(h,m,k,I,T){if(h!==null){var O=h.memoizedProps;if(m0(O,I)&&h.ref===m.ref)if(ei=!1,m.pendingProps=I=O,(h.lanes&T)!==0)h.flags&131072&&(ei=!0);else return m.lanes=h.lanes,Os(h,m,T)}return Qw(h,m,k,I,T)}function i5(h,m,k){var I=m.pendingProps,T=I.children,O=h!==null?h.memoizedState:null;if(I.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(vd,ki),ki|=k;else{if(!(k&1073741824))return h=O!==null?O.baseLanes|k:k,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:h,cachePool:null,transitions:null},m.updateQueue=null,mn(vd,ki),ki|=h,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=O!==null?O.baseLanes:k,mn(vd,ki),ki|=I}else O!==null?(I=O.baseLanes|k,m.memoizedState=null):I=k,mn(vd,ki),ki|=I;return Va(h,m,T,k),m.child}function o5(h,m){var k=m.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(m.flags|=512,m.flags|=2097152)}function Qw(h,m,k,I,T){var O=ba(k)?Is:jr.current;return O=Sl(m,O),hd(m,T),k=Vw(h,m,k,I,O,T),I=Ww(),h!==null&&!ei?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~T,Os(h,m,T)):(nn&&I&&ja(m),m.flags|=1,Va(h,m,k,T),m.child)}function s5(h,m,k,I,T){if(ba(k)){var O=!0;Ko(m)}else O=!1;if(hd(m,T),m.stateNode===null)_0(h,m),C_(m,k,I),Dw(m,k,I,T),I=!0;else if(h===null){var W=m.stateNode,le=m.memoizedProps;W.props=le;var ye=W.context,Re=k.contextType;typeof Re=="object"&&Re!==null?Re=Bi(Re):(Re=ba(k)?Is:jr.current,Re=Sl(m,Re));var qe=k.getDerivedStateFromProps,It=typeof qe=="function"||typeof W.getSnapshotBeforeUpdate=="function";It||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==I||ye!==Re)&&I_(m,W,I,Re),Cl=!1;var Be=m.memoizedState;W.state=Be,v0(m,I,W,T),ye=m.memoizedState,le!==I||Be!==ye||ya.current||Cl?(typeof qe=="function"&&(Aw(m,k,qe,I),ye=m.memoizedState),(le=Cl||S_(m,k,le,I,Be,ye,Re))?(It||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(m.flags|=4194308)):(typeof W.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=I,m.memoizedState=ye),W.props=I,W.state=ye,W.context=Re,I=le):(typeof W.componentDidMount=="function"&&(m.flags|=4194308),I=!1)}else{W=m.stateNode,v_(h,m),le=m.memoizedProps,Re=m.type===m.elementType?le:wo(m.type,le),W.props=Re,It=m.pendingProps,Be=W.context,ye=k.contextType,typeof ye=="object"&&ye!==null?ye=Bi(ye):(ye=ba(k)?Is:jr.current,ye=Sl(m,ye));var Dn=k.getDerivedStateFromProps;(qe=typeof Dn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==It||Be!==ye)&&I_(m,W,I,ye),Cl=!1,Be=m.memoizedState,W.state=Be,v0(m,I,W,T);var kn=m.memoizedState;le!==It||Be!==kn||ya.current||Cl?(typeof Dn=="function"&&(Aw(m,k,Dn,I),kn=m.memoizedState),(Re=Cl||S_(m,k,Re,I,Be,kn,ye)||!1)?(qe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(I,kn,ye),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(I,kn,ye)),typeof W.componentDidUpdate=="function"&&(m.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof W.componentDidUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),m.memoizedProps=I,m.memoizedState=kn),W.props=I,W.state=kn,W.context=ye,I=Re):(typeof W.componentDidUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),I=!1)}return Zw(h,m,k,I,O,T)}function Zw(h,m,k,I,T,O){o5(h,m);var W=(m.flags&128)!==0;if(!I&&!W)return T&&Bu(m,k,!1),Os(h,m,O);I=m.stateNode,sj.current=m;var le=W&&typeof k.getDerivedStateFromError!="function"?null:I.render();return m.flags|=1,h!==null&&W?(m.child=fd(m,h.child,null,O),m.child=fd(m,null,le,O)):Va(h,m,le,O),m.memoizedState=I.state,T&&Bu(m,k,!0),m.child}function l5(h){var m=h.stateNode;m.pendingContext?p0(h,m.pendingContext,m.pendingContext!==m.context):m.context&&p0(h,m.context,!1),Lw(h,m.containerInfo)}function u5(h,m,k,I,T){return dd(),Nw(T),m.flags|=256,Va(h,m,k,I),m.child}var Jw={dehydrated:null,treeContext:null,retryLane:0};function ek(h){return{baseLanes:h,cachePool:null,transitions:null}}function c5(h,m,k){var I=m.pendingProps,T=Yn.current,O=!1,W=(m.flags&128)!==0,le;if((le=W)||(le=h!==null&&h.memoizedState===null?!1:(T&2)!==0),le?(O=!0,m.flags&=-129):(h===null||h.memoizedState!==null)&&(T|=1),mn(Yn,T&1),h===null)return Tw(m),h=m.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(m.mode&1?Pn(h)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(W=I.children,h=I.fallback,O?(I=m.mode,O=m.child,W={mode:"hidden",children:W},!(I&1)&&O!==null?(O.childLanes=0,O.pendingProps=W):O=K0(W,I,0,null),h=qu(h,I,k,null),O.return=m,h.return=m,O.sibling=h,m.child=O,m.child.memoizedState=ek(k),m.memoizedState=Jw,h):tk(m,W));if(T=h.memoizedState,T!==null&&(le=T.dehydrated,le!==null))return lj(h,m,W,I,le,T,k);if(O){O=I.fallback,W=m.mode,T=h.child,le=T.sibling;var ye={mode:"hidden",children:I.children};return!(W&1)&&m.child!==T?(I=m.child,I.childLanes=0,I.pendingProps=ye,m.deletions=null):(I=Rl(T,ye),I.subtreeFlags=T.subtreeFlags&14680064),le!==null?O=Rl(le,O):(O=qu(O,W,k,null),O.flags|=2),O.return=m,I.return=m,I.sibling=O,m.child=I,I=O,O=m.child,W=h.child.memoizedState,W=W===null?ek(k):{baseLanes:W.baseLanes|k,cachePool:null,transitions:W.transitions},O.memoizedState=W,O.childLanes=h.childLanes&~k,m.memoizedState=Jw,I}return O=h.child,h=O.sibling,I=Rl(O,{mode:"visible",children:I.children}),!(m.mode&1)&&(I.lanes=k),I.return=m,I.sibling=null,h!==null&&(k=m.deletions,k===null?(m.deletions=[h],m.flags|=16):k.push(h)),m.child=I,m.memoizedState=null,I}function tk(h,m){return m=K0({mode:"visible",children:m},h.mode,0,null),m.return=h,h.child=m}function N0(h,m,k,I){return I!==null&&Nw(I),fd(m,h.child,null,k),h=tk(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function lj(h,m,k,I,T,O,W){if(k)return m.flags&256?(m.flags&=-257,I=Xw(Error(i(422))),N0(h,m,W,I)):m.memoizedState!==null?(m.child=h.child,m.flags|=128,null):(O=I.fallback,T=m.mode,I=K0({mode:"visible",children:I.children},T,0,null),O=qu(O,T,W,null),O.flags|=2,I.return=m,O.return=m,I.sibling=O,m.child=I,m.mode&1&&fd(m,h.child,null,W),m.child.memoizedState=ek(W),m.memoizedState=Jw,O);if(!(m.mode&1))return N0(h,m,W,null);if(Pn(T))return I=vt(T).digest,O=Error(i(419)),I=Xw(O,I,void 0),N0(h,m,W,I);if(k=(W&h.childLanes)!==0,ei||k){if(I=Wr,I!==null){switch(W&-W){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=T&(I.suspendedLanes|W)?0:T,T!==0&&T!==O.retryLane&&(O.retryLane=T,Xo(h,T),ji(I,h,T,-1))}return xk(),I=Xw(Error(i(421))),N0(h,m,W,I)}return Ot(T)?(m.flags|=128,m.child=h.child,m=wj.bind(null,h),un(T,m),null):(h=O.treeContext,_e&&(na=hr(T),ir=m,nn=!0,xo=null,Rs=!1,h!==null&&(dn[Rn++]=vo,dn[Rn++]=ta,dn[Rn++]=ea,vo=h.id,ta=h.overflow,ea=m)),m=tk(m,I.children),m.flags|=4096,m)}function d5(h,m,k){h.lanes|=m;var I=h.alternate;I!==null&&(I.lanes|=m),Ow(h.return,m,k)}function nk(h,m,k,I,T){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:I,tail:k,tailMode:T}:(O.isBackwards=m,O.rendering=null,O.renderingStartTime=0,O.last=I,O.tail=k,O.tailMode=T)}function p5(h,m,k){var I=m.pendingProps,T=I.revealOrder,O=I.tail;if(Va(h,m,I.children,k),I=Yn.current,I&2)I=I&1|2,m.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&d5(h,k,m);else if(h.tag===19)d5(h,k,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}I&=1}if(mn(Yn,I),!(m.mode&1))m.memoizedState=null;else switch(T){case"forwards":for(k=m.child,T=null;k!==null;)h=k.alternate,h!==null&&k0(h)===null&&(T=k),k=k.sibling;k=T,k===null?(T=m.child,m.child=null):(T=k.sibling,k.sibling=null),nk(m,!1,T,k,O);break;case"backwards":for(k=null,T=m.child,m.child=null;T!==null;){if(h=T.alternate,h!==null&&k0(h)===null){m.child=T;break}h=T.sibling,T.sibling=k,k=T,T=h}nk(m,!0,k,null,O);break;case"together":nk(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function _0(h,m){!(m.mode&1)&&h!==null&&(h.alternate=null,m.alternate=null,m.flags|=2)}function Os(h,m,k){if(h!==null&&(m.dependencies=h.dependencies),Vu|=m.lanes,!(k&m.childLanes))return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,k=Rl(h,h.pendingProps),m.child=k,k.return=m;h.sibling!==null;)h=h.sibling,k=k.sibling=Rl(h,h.pendingProps),k.return=m;k.sibling=null}return m.child}function uj(h,m,k){switch(m.tag){case 3:l5(m),dd();break;case 5:__(m);break;case 1:ba(m.type)&&Ko(m);break;case 4:Lw(m,m.stateNode.containerInfo);break;case 10:y_(m,m.type._context,m.memoizedProps.value);break;case 13:var I=m.memoizedState;if(I!==null)return I.dehydrated!==null?(mn(Yn,Yn.current&1),m.flags|=128,null):k&m.child.childLanes?c5(h,m,k):(mn(Yn,Yn.current&1),h=Os(h,m,k),h!==null?h.sibling:null);mn(Yn,Yn.current&1);break;case 19:if(I=(k&m.childLanes)!==0,h.flags&128){if(I)return p5(h,m,k);m.flags|=128}var T=m.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),mn(Yn,Yn.current),I)break;return null;case 22:case 23:return m.lanes=0,i5(h,m,k)}return Os(h,m,k)}function Zo(h){h.flags|=4}function h5(h,m){if(h!==null&&h.child===m.child)return!0;if(m.flags&16)return!1;for(h=m.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Eh,Th,R0,$0;if(Ie)Eh=function(h,m){for(var k=m.child;k!==null;){if(k.tag===5||k.tag===6)ne(h,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===m)break;for(;k.sibling===null;){if(k.return===null||k.return===m)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Th=function(){},R0=function(h,m,k,I,T){if(h=h.memoizedProps,h!==I){var O=m.stateNode,W=Yo(zi.current);k=pe(O,k,h,I,T,W),(m.updateQueue=k)&&Zo(m)}},$0=function(h,m,k,I){k!==I&&Zo(m)};else if(Ee){Eh=function(h,m,k,I){for(var T=m.child;T!==null;){if(T.tag===5){var O=T.stateNode;k&&I&&(O=Ge(O,T.type,T.memoizedProps,T)),ne(h,O)}else if(T.tag===6)O=T.stateNode,k&&I&&(O=yt(O,T.memoizedProps,T)),ne(h,O);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)O=T.child,O!==null&&(O.return=T),Eh(h,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===m)break;for(;T.sibling===null;){if(T.return===null||T.return===m)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var f5=function(h,m,k,I){for(var T=m.child;T!==null;){if(T.tag===5){var O=T.stateNode;k&&I&&(O=Ge(O,T.type,T.memoizedProps,T)),me(h,O)}else if(T.tag===6)O=T.stateNode,k&&I&&(O=yt(O,T.memoizedProps,T)),me(h,O);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)O=T.child,O!==null&&(O.return=T),f5(h,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===m)break;for(;T.sibling===null;){if(T.return===null||T.return===m)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Th=function(h,m){var k=m.stateNode;if(!h5(h,m)){h=k.containerInfo;var I=ue(h);f5(I,m,!1,!1),k.pendingChildren=I,Zo(m),ke(h,I)}},R0=function(h,m,k,I,T){var O=h.stateNode,W=h.memoizedProps;if((h=h5(h,m))&&W===I)m.stateNode=O;else{var le=m.stateNode,ye=Yo(zi.current),Re=null;W!==I&&(Re=pe(le,k,W,I,T,ye)),h&&Re===null?m.stateNode=O:(O=jt(O,Re,k,W,I,m,h,le),se(O,k,I,T,ye)&&Zo(m),m.stateNode=O,h?Zo(m):Eh(O,m,!1,!1))}},$0=function(h,m,k,I){k!==I?(h=Yo(md.current),k=Yo(zi.current),m.stateNode=ie(I,h,k,m),Zo(m)):m.stateNode=h.stateNode}}else Th=function(){},R0=function(){},$0=function(){};function Nh(h,m){if(!nn)switch(h.tailMode){case"hidden":m=h.tail;for(var k=null;m!==null;)m.alternate!==null&&(k=m),m=m.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var I=null;k!==null;)k.alternate!==null&&(I=k),k=k.sibling;I===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:I.sibling=null}}function wa(h){var m=h.alternate!==null&&h.alternate.child===h.child,k=0,I=0;if(m)for(var T=h.child;T!==null;)k|=T.lanes|T.childLanes,I|=T.subtreeFlags&14680064,I|=T.flags&14680064,T.return=h,T=T.sibling;else for(T=h.child;T!==null;)k|=T.lanes|T.childLanes,I|=T.subtreeFlags,I|=T.flags,T.return=h,T=T.sibling;return h.subtreeFlags|=I,h.childLanes=k,m}function cj(h,m,k){var I=m.pendingProps;switch(_s(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(m),null;case 1:return ba(m.type)&&ud(),wa(m),null;case 3:return k=m.stateNode,gd(),wn(ya),wn(jr),zw(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(f0(m)?Zo(m):h===null||h.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,xo!==null&&(bk(xo),xo=null))),Th(h,m),wa(m),null;case 5:Fw(m),k=Yo(md.current);var T=m.type;if(h!==null&&m.stateNode!=null)R0(h,m,T,I,k),h.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!I){if(m.stateNode===null)throw Error(i(166));return wa(m),null}if(h=Yo(zi.current),f0(m)){if(!_e)throw Error(i(175));h=Ho(m.stateNode,m.type,m.memoizedProps,k,h,m,!Rs),m.updateQueue=h,h!==null&&Zo(m)}else{var O=Q(T,I,k,h,m);Eh(O,m,!1,!1),m.stateNode=O,se(O,T,I,k,h)&&Zo(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return wa(m),null;case 6:if(h&&m.stateNode!=null)$0(h,m,h.memoizedProps,I);else{if(typeof I!="string"&&m.stateNode===null)throw Error(i(166));if(h=Yo(md.current),k=Yo(zi.current),f0(m)){if(!_e)throw Error(i(176));if(h=m.stateNode,k=m.memoizedProps,(I=Di(h,k,m,!Rs))&&(T=ir,T!==null))switch(T.tag){case 3:tn(T.stateNode.containerInfo,h,k,(T.mode&1)!==0);break;case 5:cn(T.type,T.memoizedProps,T.stateNode,h,k,(T.mode&1)!==0)}I&&Zo(m)}else m.stateNode=ie(I,h,k,m)}return wa(m),null;case 13:if(wn(Yn),I=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(nn&&na!==null&&m.mode&1&&!(m.flags&128))g_(),dd(),m.flags|=98560,T=!1;else if(T=f0(m),I!==null&&I.dehydrated!==null){if(h===null){if(!T)throw Error(i(318));if(!_e)throw Error(i(344));if(T=m.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));ga(T,m)}else dd(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;wa(m),T=!1}else xo!==null&&(bk(xo),xo=null),T=!0;if(!T)return m.flags&65536?m:null}return m.flags&128?(m.lanes=k,m):(k=I!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(m.child.flags|=8192,m.mode&1&&(h===null||Yn.current&1?Or===0&&(Or=3):xk())),m.updateQueue!==null&&(m.flags|=4),wa(m),null);case 4:return gd(),Th(h,m),h===null&&Xe(m.stateNode.containerInfo),wa(m),null;case 10:return $w(m.type._context),wa(m),null;case 17:return ba(m.type)&&ud(),wa(m),null;case 19:if(wn(Yn),T=m.memoizedState,T===null)return wa(m),null;if(I=(m.flags&128)!==0,O=T.rendering,O===null)if(I)Nh(T,!1);else{if(Or!==0||h!==null&&h.flags&128)for(h=m.child;h!==null;){if(O=k0(h),O!==null){for(m.flags|=128,Nh(T,!1),h=O.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),m.subtreeFlags=0,h=k,k=m.child;k!==null;)I=k,T=h,I.flags&=14680066,O=I.alternate,O===null?(I.childLanes=0,I.lanes=T,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=O.childLanes,I.lanes=O.lanes,I.child=O.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=O.memoizedProps,I.memoizedState=O.memoizedState,I.updateQueue=O.updateQueue,I.type=O.type,T=O.dependencies,I.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),k=k.sibling;return mn(Yn,Yn.current&1|2),m.child}h=h.sibling}T.tail!==null&&Ke()>fk&&(m.flags|=128,I=!0,Nh(T,!1),m.lanes=4194304)}else{if(!I)if(h=k0(O),h!==null){if(m.flags|=128,I=!0,h=h.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),Nh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!nn)return wa(m),null}else 2*Ke()-T.renderingStartTime>fk&&k!==1073741824&&(m.flags|=128,I=!0,Nh(T,!1),m.lanes=4194304);T.isBackwards?(O.sibling=m.child,m.child=O):(h=T.last,h!==null?h.sibling=O:m.child=O,T.last=O)}return T.tail!==null?(m=T.tail,T.rendering=m,T.tail=m.sibling,T.renderingStartTime=Ke(),m.sibling=null,h=Yn.current,mn(Yn,I?h&1|2:h&1),m):(wa(m),null);case 22:case 23:return vk(),k=m.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(m.flags|=8192),k&&m.mode&1?ki&1073741824&&(wa(m),Ie&&m.subtreeFlags&6&&(m.flags|=8192)):wa(m),null;case 24:return null;case 25:return null}throw Error(i(156,m.tag))}function dj(h,m){switch(_s(m),m.tag){case 1:return ba(m.type)&&ud(),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return gd(),wn(ya),wn(jr),zw(),h=m.flags,h&65536&&!(h&128)?(m.flags=h&-65537|128,m):null;case 5:return Fw(m),null;case 13:if(wn(Yn),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));dd()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return wn(Yn),null;case 4:return gd(),null;case 10:return $w(m.type._context),null;case 22:case 23:return vk(),null;case 24:return null;default:return null}}var O0=!1,ka=!1,pj=typeof WeakSet=="function"?WeakSet:Set,je=null;function bd(h,m){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(I){Vn(h,m,I)}else k.current=null}function m5(h,m,k){try{k()}catch(I){Vn(h,m,I)}}var g5=!1;function hj(h,m){for(F(h.containerInfo),je=m;je!==null;)if(h=je,m=h.child,(h.subtreeFlags&1028)!==0&&m!==null)m.return=h,je=m;else for(;je!==null;){h=je;try{var k=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var I=k.memoizedProps,T=k.memoizedState,O=h.stateNode,W=O.getSnapshotBeforeUpdate(h.elementType===h.type?I:wo(h.type,I),T);O.__reactInternalSnapshotBeforeUpdate=W}break;case 3:Ie&&Go(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(le){Vn(h,h.return,le)}if(m=h.sibling,m!==null){m.return=h.return,je=m;break}je=h.return}return k=g5,g5=!1,k}function _h(h,m,k){var I=m.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var T=I=I.next;do{if((T.tag&h)===h){var O=T.destroy;T.destroy=void 0,O!==void 0&&m5(m,k,O)}T=T.next}while(T!==I)}}function M0(h,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var k=m=m.next;do{if((k.tag&h)===h){var I=k.create;k.destroy=I()}k=k.next}while(k!==m)}}function rk(h){var m=h.ref;if(m!==null){var k=h.stateNode;switch(h.tag){case 5:h=X(k);break;default:h=k}typeof m=="function"?m(h):m.current=h}}function y5(h){var m=h.alternate;m!==null&&(h.alternate=null,y5(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&lt(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function b5(h){return h.tag===5||h.tag===3||h.tag===4}function v5(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||b5(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function ak(h,m,k){var I=h.tag;if(I===5||I===6)h=h.stateNode,m?hn(k,h,m):za(k,h);else if(I!==4&&(h=h.child,h!==null))for(ak(h,m,k),h=h.sibling;h!==null;)ak(h,m,k),h=h.sibling}function ik(h,m,k){var I=h.tag;if(I===5||I===6)h=h.stateNode,m?bi(k,h,m):Xn(k,h);else if(I!==4&&(h=h.child,h!==null))for(ik(h,m,k),h=h.sibling;h!==null;)ik(h,m,k),h=h.sibling}var ra=null,ko=!1;function Jo(h,m,k){for(k=k.child;k!==null;)ok(h,m,k),k=k.sibling}function ok(h,m,k){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(st,k)}catch{}switch(k.tag){case 5:ka||bd(k,m);case 6:if(Ie){var I=ra,T=ko;ra=null,Jo(h,m,k),ra=I,ko=T,ra!==null&&(ko?vi(ra,k.stateNode):Za(ra,k.stateNode))}else Jo(h,m,k);break;case 18:Ie&&ra!==null&&(ko?qo(ra,k.stateNode):xl(ra,k.stateNode));break;case 4:Ie?(I=ra,T=ko,ra=k.stateNode.containerInfo,ko=!0,Jo(h,m,k),ra=I,ko=T):(Ee&&(I=k.stateNode.containerInfo,T=ue(I),Me(I,T)),Jo(h,m,k));break;case 0:case 11:case 14:case 15:if(!ka&&(I=k.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){T=I=I.next;do{var O=T,W=O.destroy;O=O.tag,W!==void 0&&(O&2||O&4)&&m5(k,m,W),T=T.next}while(T!==I)}Jo(h,m,k);break;case 1:if(!ka&&(bd(k,m),I=k.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=k.memoizedProps,I.state=k.memoizedState,I.componentWillUnmount()}catch(le){Vn(k,m,le)}Jo(h,m,k);break;case 21:Jo(h,m,k);break;case 22:k.mode&1?(ka=(I=ka)||k.memoizedState!==null,Jo(h,m,k),ka=I):Jo(h,m,k);break;default:Jo(h,m,k)}}function x5(h){var m=h.updateQueue;if(m!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new pj),m.forEach(function(I){var T=kj.bind(null,h,I);k.has(I)||(k.add(I),I.then(T,T))})}}function So(h,m){var k=m.deletions;if(k!==null)for(var I=0;I<k.length;I++){var T=k[I];try{var O=h,W=m;if(Ie){var le=W;e:for(;le!==null;){switch(le.tag){case 5:ra=le.stateNode,ko=!1;break e;case 3:ra=le.stateNode.containerInfo,ko=!0;break e;case 4:ra=le.stateNode.containerInfo,ko=!0;break e}le=le.return}if(ra===null)throw Error(i(160));ok(O,W,T),ra=null,ko=!1}else ok(O,W,T);var ye=T.alternate;ye!==null&&(ye.return=null),T.return=null}catch(Re){Vn(T,m,Re)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)w5(m,h),m=m.sibling}function w5(h,m){var k=h.alternate,I=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(So(m,h),es(h),I&4){try{_h(3,h,h.return),M0(3,h)}catch(Be){Vn(h,h.return,Be)}try{_h(5,h,h.return)}catch(Be){Vn(h,h.return,Be)}}break;case 1:So(m,h),es(h),I&512&&k!==null&&bd(k,k.return);break;case 5:if(So(m,h),es(h),I&512&&k!==null&&bd(k,k.return),Ie){if(h.flags&32){var T=h.stateNode;try{xi(T)}catch(Be){Vn(h,h.return,Be)}}if(I&4&&(T=h.stateNode,T!=null)){var O=h.memoizedProps;if(k=k!==null?k.memoizedProps:O,I=h.type,m=h.updateQueue,h.updateQueue=null,m!==null)try{mo(T,m,I,k,O,h)}catch(Be){Vn(h,h.return,Be)}}}break;case 6:if(So(m,h),es(h),I&4&&Ie){if(h.stateNode===null)throw Error(i(162));T=h.stateNode,O=h.memoizedProps,k=k!==null?k.memoizedProps:O;try{_n(T,k,O)}catch(Be){Vn(h,h.return,Be)}}break;case 3:if(So(m,h),es(h),I&4){if(Ie&&_e&&k!==null&&k.memoizedState.isDehydrated)try{Du(m.containerInfo)}catch(Be){Vn(h,h.return,Be)}if(Ee){T=m.containerInfo,O=m.pendingChildren;try{Me(T,O)}catch(Be){Vn(h,h.return,Be)}}}break;case 4:if(So(m,h),es(h),I&4&&Ee){O=h.stateNode,T=O.containerInfo,O=O.pendingChildren;try{Me(T,O)}catch(Be){Vn(h,h.return,Be)}}break;case 13:So(m,h),es(h),T=h.child,T.flags&8192&&(O=T.memoizedState!==null,T.stateNode.isHidden=O,!O||T.alternate!==null&&T.alternate.memoizedState!==null||(hk=Ke())),I&4&&x5(h);break;case 22:var W=k!==null&&k.memoizedState!==null;if(h.mode&1?(ka=(k=ka)||W,So(m,h),ka=k):So(m,h),es(h),I&8192){if(k=h.memoizedState!==null,(h.stateNode.isHidden=k)&&!W&&h.mode&1)for(je=h,I=h.child;I!==null;){for(m=je=I;je!==null;){W=je;var le=W.child;switch(W.tag){case 0:case 11:case 14:case 15:_h(4,W,W.return);break;case 1:bd(W,W.return);var ye=W.stateNode;if(typeof ye.componentWillUnmount=="function"){var Re=W,qe=W.return;try{var It=Re;ye.props=It.memoizedProps,ye.state=It.memoizedState,ye.componentWillUnmount()}catch(Be){Vn(Re,qe,Be)}}break;case 5:bd(W,W.return);break;case 22:if(W.memoizedState!==null){C5(m);continue}}le!==null?(le.return=W,je=le):C5(m)}I=I.sibling}if(Ie){e:if(I=null,Ie)for(m=h;;){if(m.tag===5){if(I===null){I=m;try{T=m.stateNode,k?Cs(T):vl(m.stateNode,m.memoizedProps)}catch(Be){Vn(h,h.return,Be)}}}else if(m.tag===6){if(I===null)try{O=m.stateNode,k?ma(O):ld(O,m.memoizedProps)}catch(Be){Vn(h,h.return,Be)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;I===m&&(I=null),m=m.return}I===m&&(I=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:So(m,h),es(h),I&4&&x5(h);break;case 21:break;default:So(m,h),es(h)}}function es(h){var m=h.flags;if(m&2){try{if(Ie){e:{for(var k=h.return;k!==null;){if(b5(k)){var I=k;break e}k=k.return}throw Error(i(160))}switch(I.tag){case 5:var T=I.stateNode;I.flags&32&&(xi(T),I.flags&=-33);var O=v5(h);ik(h,O,T);break;case 3:case 4:var W=I.stateNode.containerInfo,le=v5(h);ak(h,le,W);break;default:throw Error(i(161))}}}catch(ye){Vn(h,h.return,ye)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function fj(h,m,k){je=h,k5(h)}function k5(h,m,k){for(var I=(h.mode&1)!==0;je!==null;){var T=je,O=T.child;if(T.tag===22&&I){var W=T.memoizedState!==null||O0;if(!W){var le=T.alternate,ye=le!==null&&le.memoizedState!==null||ka;le=O0;var Re=ka;if(O0=W,(ka=ye)&&!Re)for(je=T;je!==null;)W=je,ye=W.child,W.tag===22&&W.memoizedState!==null?I5(T):ye!==null?(ye.return=W,je=ye):I5(T);for(;O!==null;)je=O,k5(O),O=O.sibling;je=T,O0=le,ka=Re}S5(h)}else T.subtreeFlags&8772&&O!==null?(O.return=T,je=O):S5(h)}}function S5(h){for(;je!==null;){var m=je;if(m.flags&8772){var k=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:ka||M0(5,m);break;case 1:var I=m.stateNode;if(m.flags&4&&!ka)if(k===null)I.componentDidMount();else{var T=m.elementType===m.type?k.memoizedProps:wo(m.type,k.memoizedProps);I.componentDidUpdate(T,k.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var O=m.updateQueue;O!==null&&w_(m,O,I);break;case 3:var W=m.updateQueue;if(W!==null){if(k=null,m.child!==null)switch(m.child.tag){case 5:k=X(m.child.stateNode);break;case 1:k=m.child.stateNode}w_(m,W,k)}break;case 5:var le=m.stateNode;k===null&&m.flags&4&&Qa(le,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&m.memoizedState===null){var ye=m.alternate;if(ye!==null){var Re=ye.memoizedState;if(Re!==null){var qe=Re.dehydrated;qe!==null&&Lu(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}ka||m.flags&512&&rk(m)}catch(It){Vn(m,m.return,It)}}if(m===h){je=null;break}if(k=m.sibling,k!==null){k.return=m.return,je=k;break}je=m.return}}function C5(h){for(;je!==null;){var m=je;if(m===h){je=null;break}var k=m.sibling;if(k!==null){k.return=m.return,je=k;break}je=m.return}}function I5(h){for(;je!==null;){var m=je;try{switch(m.tag){case 0:case 11:case 15:var k=m.return;try{M0(4,m)}catch(ye){Vn(m,k,ye)}break;case 1:var I=m.stateNode;if(typeof I.componentDidMount=="function"){var T=m.return;try{I.componentDidMount()}catch(ye){Vn(m,T,ye)}}var O=m.return;try{rk(m)}catch(ye){Vn(m,O,ye)}break;case 5:var W=m.return;try{rk(m)}catch(ye){Vn(m,W,ye)}}}catch(ye){Vn(m,m.return,ye)}if(m===h){je=null;break}var le=m.sibling;if(le!==null){le.return=m.return,je=le;break}je=m.return}}var P0=0,A0=1,D0=2,L0=3,F0=4;if(typeof Symbol=="function"&&Symbol.for){var Rh=Symbol.for;P0=Rh("selector.component"),A0=Rh("selector.has_pseudo_class"),D0=Rh("selector.role"),L0=Rh("selector.test_id"),F0=Rh("selector.text")}function sk(h){var m=Fe(h);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(i(364));return m}if(h=on(h),h===null)throw Error(i(362));return h.stateNode.current}function lk(h,m){switch(m.$$typeof){case P0:if(h.type===m.value)return!0;break;case A0:e:{m=m.value,h=[h,0];for(var k=0;k<h.length;){var I=h[k++],T=h[k++],O=m[T];if(I.tag!==5||!Qt(I)){for(;O!=null&&lk(I,O);)T++,O=m[T];if(T===m.length){m=!0;break e}else for(I=I.child;I!==null;)h.push(I,T),I=I.sibling}}m=!1}return m;case D0:if(h.tag===5&&$t(h.stateNode,m.value))return!0;break;case F0:if((h.tag===5||h.tag===6)&&(h=Yt(h),h!==null&&0<=h.indexOf(m.value)))return!0;break;case L0:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function uk(h){switch(h.$$typeof){case P0:return"<"+(E(h.value)||"Unknown")+">";case A0:return":has("+(uk(h)||"")+")";case D0:return'[role="'+h.value+'"]';case F0:return'"'+h.value+'"';case L0:return'[data-testname="'+h.value+'"]';default:throw Error(i(365))}}function E5(h,m){var k=[];h=[h,0];for(var I=0;I<h.length;){var T=h[I++],O=h[I++],W=m[O];if(T.tag!==5||!Qt(T)){for(;W!=null&&lk(T,W);)O++,W=m[O];if(O===m.length)k.push(T);else for(T=T.child;T!==null;)h.push(T,O),T=T.sibling}}return k}function ck(h,m){if(!et)throw Error(i(363));h=sk(h),h=E5(h,m),m=[],h=Array.from(h);for(var k=0;k<h.length;){var I=h[k++];if(I.tag===5)Qt(I)||m.push(I.stateNode);else for(I=I.child;I!==null;)h.push(I),I=I.sibling}return m}var mj=Math.ceil,B0=o.ReactCurrentDispatcher,dk=o.ReactCurrentOwner,fr=o.ReactCurrentBatchConfig,Bt=0,Wr=null,Cr=null,aa=0,ki=0,vd=Li(0),Or=0,$h=null,Vu=0,z0=0,pk=0,Oh=null,ti=null,hk=0,fk=1/0,Ms=null;function xd(){fk=Ke()+500}var U0=!1,mk=null,El=null,j0=!1,Tl=null,V0=0,Mh=0,gk=null,W0=-1,G0=0;function Sa(){return Bt&6?Ke():W0!==-1?W0:W0=Ke()}function Nl(h){return h.mode&1?Bt&2&&aa!==0?aa&-aa:QU.transition!==null?(G0===0&&(G0=re()),G0):(h=Ne,h!==0?h:Oe()):1}function ji(h,m,k,I){if(50<Mh)throw Mh=0,gk=null,Error(i(185));Ce(h,k,I),(!(Bt&2)||h!==Wr)&&(h===Wr&&(!(Bt&2)&&(z0|=k),Or===4&&_l(h,aa)),ni(h,I),k===1&&Bt===0&&!(m.mode&1)&&(xd(),An&&wr()))}function ni(h,m){var k=h.callbackNode;V(h,m);var I=Ts(h,h===Wr?aa:0);if(I===0)k!==null&&rt(k),h.callbackNode=null,h.callbackPriority=0;else if(m=I&-I,h.callbackPriority!==m){if(k!=null&&rt(k),m===1)h.tag===0?bo(N5.bind(null,h)):Ua(N5.bind(null,h)),Je?nt(function(){!(Bt&6)&&wr()}):mt(ct,wr),k=null;else{switch(Ue(I)){case 1:k=ct;break;case 4:k=pt;break;case 16:k=at;break;case 536870912:k=wt;break;default:k=at}k=L5(k,T5.bind(null,h))}h.callbackPriority=m,h.callbackNode=k}}function T5(h,m){if(W0=-1,G0=0,Bt&6)throw Error(i(327));var k=h.callbackNode;if(Hu()&&h.callbackNode!==k)return null;var I=Ts(h,h===Wr?aa:0);if(I===0)return null;if(I&30||I&h.expiredLanes||m)m=H0(h,I);else{m=I;var T=Bt;Bt|=2;var O=$5();(Wr!==h||aa!==m)&&(Ms=null,xd(),Wu(h,m));do try{bj();break}catch(le){R5(h,le)}while(!0);Rw(),B0.current=O,Bt=T,Cr!==null?m=0:(Wr=null,aa=0,m=Or)}if(m!==0){if(m===2&&(T=J(h),T!==0&&(I=T,m=yk(h,T))),m===1)throw k=$h,Wu(h,0),_l(h,I),ni(h,Ke()),k;if(m===6)_l(h,I);else{if(T=h.current.alternate,!(I&30)&&!gj(T)&&(m=H0(h,I),m===2&&(O=J(h),O!==0&&(I=O,m=yk(h,O))),m===1))throw k=$h,Wu(h,0),_l(h,I),ni(h,Ke()),k;switch(h.finishedWork=T,h.finishedLanes=I,m){case 0:case 1:throw Error(i(345));case 2:Gu(h,ti,Ms);break;case 3:if(_l(h,I),(I&130023424)===I&&(m=hk+500-Ke(),10<m)){if(Ts(h,0)!==0)break;if(T=h.suspendedLanes,(T&I)!==I){Sa(),h.pingedLanes|=h.suspendedLanes&T;break}h.timeoutHandle=xe(Gu.bind(null,h,ti,Ms),m);break}Gu(h,ti,Ms);break;case 4:if(_l(h,I),(I&4194240)===I)break;for(m=h.eventTimes,T=-1;0<I;){var W=31-wi(I);O=1<<W,W=m[W],W>T&&(T=W),I&=~O}if(I=T,I=Ke()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*mj(I/1960))-I,10<I){h.timeoutHandle=xe(Gu.bind(null,h,ti,Ms),I);break}Gu(h,ti,Ms);break;case 5:Gu(h,ti,Ms);break;default:throw Error(i(329))}}}return ni(h,Ke()),h.callbackNode===k?T5.bind(null,h):null}function yk(h,m){var k=Oh;return h.current.memoizedState.isDehydrated&&(Wu(h,m).flags|=256),h=H0(h,m),h!==2&&(m=ti,ti=k,m!==null&&bk(m)),h}function bk(h){ti===null?ti=h:ti.push.apply(ti,h)}function gj(h){for(var m=h;;){if(m.flags&16384){var k=m.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var I=0;I<k.length;I++){var T=k[I],O=T.getSnapshot;T=T.value;try{if(!Vt(O(),T))return!1}catch{return!1}}}if(k=m.child,m.subtreeFlags&16384&&k!==null)k.return=m,m=k;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function _l(h,m){for(m&=~pk,m&=~z0,h.suspendedLanes|=m,h.pingedLanes&=~m,h=h.expirationTimes;0<m;){var k=31-wi(m),I=1<<k;h[k]=-1,m&=~I}}function N5(h){if(Bt&6)throw Error(i(327));Hu();var m=Ts(h,0);if(!(m&1))return ni(h,Ke()),null;var k=H0(h,m);if(h.tag!==0&&k===2){var I=J(h);I!==0&&(m=I,k=yk(h,I))}if(k===1)throw k=$h,Wu(h,0),_l(h,m),ni(h,Ke()),k;if(k===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=m,Gu(h,ti,Ms),ni(h,Ke()),null}function _5(h){Tl!==null&&Tl.tag===0&&!(Bt&6)&&Hu();var m=Bt;Bt|=1;var k=fr.transition,I=Ne;try{if(fr.transition=null,Ne=1,h)return h()}finally{Ne=I,fr.transition=k,Bt=m,!(Bt&6)&&wr()}}function vk(){ki=vd.current,wn(vd)}function Wu(h,m){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==oe&&(h.timeoutHandle=oe,q(k)),Cr!==null)for(k=Cr.return;k!==null;){var I=k;switch(_s(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&ud();break;case 3:gd(),wn(ya),wn(jr),zw();break;case 5:Fw(I);break;case 4:gd();break;case 13:wn(Yn);break;case 19:wn(Yn);break;case 10:$w(I.type._context);break;case 22:case 23:vk()}k=k.return}if(Wr=h,Cr=h=Rl(h.current,null),aa=ki=m,Or=0,$h=null,pk=z0=Vu=0,ti=Oh=null,Uu!==null){for(m=0;m<Uu.length;m++)if(k=Uu[m],I=k.interleaved,I!==null){k.interleaved=null;var T=I.next,O=k.pending;if(O!==null){var W=O.next;O.next=T,I.next=W}k.pending=I}Uu=null}return h}function R5(h,m){do{var k=Cr;try{if(Rw(),S0.current=T0,C0){for(var I=Qn.memoizedState;I!==null;){var T=I.queue;T!==null&&(T.pending=null),I=I.next}C0=!1}if(ju=0,Vr=$r=Qn=null,kh=!1,Sh=0,dk.current=null,k===null||k.return===null){Or=1,$h=m,Cr=null;break}e:{var O=h,W=k.return,le=k,ye=m;if(m=aa,le.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Re=ye,qe=le,It=qe.tag;if(!(qe.mode&1)&&(It===0||It===11||It===15)){var Be=qe.alternate;Be?(qe.updateQueue=Be.updateQueue,qe.memoizedState=Be.memoizedState,qe.lanes=Be.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Dn=e5(W);if(Dn!==null){Dn.flags&=-257,t5(Dn,W,le,O,m),Dn.mode&1&&J_(O,Re,m),m=Dn,ye=Re;var kn=m.updateQueue;if(kn===null){var ri=new Set;ri.add(ye),m.updateQueue=ri}else kn.add(ye);break e}else{if(!(m&1)){J_(O,Re,m),xk();break e}ye=Error(i(426))}}else if(nn&&le.mode&1){var Ps=e5(W);if(Ps!==null){!(Ps.flags&65536)&&(Ps.flags|=256),t5(Ps,W,le,O,m),Nw(yd(ye,le));break e}}O=ye=yd(ye,le),Or!==4&&(Or=2),Oh===null?Oh=[O]:Oh.push(O),O=W;do{switch(O.tag){case 3:O.flags|=65536,m&=-m,O.lanes|=m;var ge=Q_(O,ye,m);x_(O,ge);break e;case 1:le=ye;var ce=O.type,we=O.stateNode;if(!(O.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(El===null||!El.has(we)))){O.flags|=65536,m&=-m,O.lanes|=m;var ze=Z_(O,le,m);x_(O,ze);break e}}O=O.return}while(O!==null)}M5(k)}catch(dt){m=dt,Cr===k&&k!==null&&(Cr=k=k.return);continue}break}while(!0)}function $5(){var h=B0.current;return B0.current=T0,h===null?T0:h}function xk(){(Or===0||Or===3||Or===2)&&(Or=4),Wr===null||!(Vu&268435455)&&!(z0&268435455)||_l(Wr,aa)}function H0(h,m){var k=Bt;Bt|=2;var I=$5();(Wr!==h||aa!==m)&&(Ms=null,Wu(h,m));do try{yj();break}catch(T){R5(h,T)}while(!0);if(Rw(),Bt=k,B0.current=I,Cr!==null)throw Error(i(261));return Wr=null,aa=0,Or}function yj(){for(;Cr!==null;)O5(Cr)}function bj(){for(;Cr!==null&&!Rt();)O5(Cr)}function O5(h){var m=D5(h.alternate,h,ki);h.memoizedProps=h.pendingProps,m===null?M5(h):Cr=m,dk.current=null}function M5(h){var m=h;do{var k=m.alternate;if(h=m.return,m.flags&32768){if(k=dj(k,m),k!==null){k.flags&=32767,Cr=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Or=6,Cr=null;return}}else if(k=cj(k,m,ki),k!==null){Cr=k;return}if(m=m.sibling,m!==null){Cr=m;return}Cr=m=h}while(m!==null);Or===0&&(Or=5)}function Gu(h,m,k){var I=Ne,T=fr.transition;try{fr.transition=null,Ne=1,vj(h,m,k,I)}finally{fr.transition=T,Ne=I}return null}function vj(h,m,k,I){do Hu();while(Tl!==null);if(Bt&6)throw Error(i(327));k=h.finishedWork;var T=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var O=k.lanes|k.childLanes;if(Ae(h,O),h===Wr&&(Cr=Wr=null,aa=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||j0||(j0=!0,L5(at,function(){return Hu(),null})),O=(k.flags&15990)!==0,k.subtreeFlags&15990||O){O=fr.transition,fr.transition=null;var W=Ne;Ne=1;var le=Bt;Bt|=4,dk.current=null,hj(h,k),w5(k,h),Y(h.containerInfo),h.current=k,fj(k),xt(),Bt=le,Ne=W,fr.transition=O}else h.current=k;if(j0&&(j0=!1,Tl=h,V0=T),O=h.pendingLanes,O===0&&(El=null),ar(k.stateNode),ni(h,Ke()),m!==null)for(I=h.onRecoverableError,k=0;k<m.length;k++)T=m[k],I(T.value,{componentStack:T.stack,digest:T.digest});if(U0)throw U0=!1,h=mk,mk=null,h;return V0&1&&h.tag!==0&&Hu(),O=h.pendingLanes,O&1?h===gk?Mh++:(Mh=0,gk=h):Mh=0,wr(),null}function Hu(){if(Tl!==null){var h=Ue(V0),m=fr.transition,k=Ne;try{if(fr.transition=null,Ne=16>h?16:h,Tl===null)var I=!1;else{if(h=Tl,Tl=null,V0=0,Bt&6)throw Error(i(331));var T=Bt;for(Bt|=4,je=h.current;je!==null;){var O=je,W=O.child;if(je.flags&16){var le=O.deletions;if(le!==null){for(var ye=0;ye<le.length;ye++){var Re=le[ye];for(je=Re;je!==null;){var qe=je;switch(qe.tag){case 0:case 11:case 15:_h(8,qe,O)}var It=qe.child;if(It!==null)It.return=qe,je=It;else for(;je!==null;){qe=je;var Be=qe.sibling,Dn=qe.return;if(y5(qe),qe===Re){je=null;break}if(Be!==null){Be.return=Dn,je=Be;break}je=Dn}}}var kn=O.alternate;if(kn!==null){var ri=kn.child;if(ri!==null){kn.child=null;do{var Ps=ri.sibling;ri.sibling=null,ri=Ps}while(ri!==null)}}je=O}}if(O.subtreeFlags&2064&&W!==null)W.return=O,je=W;else e:for(;je!==null;){if(O=je,O.flags&2048)switch(O.tag){case 0:case 11:case 15:_h(9,O,O.return)}var ge=O.sibling;if(ge!==null){ge.return=O.return,je=ge;break e}je=O.return}}var ce=h.current;for(je=ce;je!==null;){W=je;var we=W.child;if(W.subtreeFlags&2064&&we!==null)we.return=W,je=we;else e:for(W=ce;je!==null;){if(le=je,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:M0(9,le)}}catch(dt){Vn(le,le.return,dt)}if(le===W){je=null;break e}var ze=le.sibling;if(ze!==null){ze.return=le.return,je=ze;break e}je=le.return}}if(Bt=T,wr(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(st,h)}catch{}I=!0}return I}finally{Ne=k,fr.transition=m}}return!1}function P5(h,m,k){m=yd(k,m),m=Q_(h,m,1),h=Il(h,m,1),m=Sa(),h!==null&&(Ce(h,1,m),ni(h,m))}function Vn(h,m,k){if(h.tag===3)P5(h,h,k);else for(;m!==null;){if(m.tag===3){P5(m,h,k);break}else if(m.tag===1){var I=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(El===null||!El.has(I))){h=yd(k,h),h=Z_(m,h,1),m=Il(m,h,1),h=Sa(),m!==null&&(Ce(m,1,h),ni(m,h));break}}m=m.return}}function xj(h,m,k){var I=h.pingCache;I!==null&&I.delete(m),m=Sa(),h.pingedLanes|=h.suspendedLanes&k,Wr===h&&(aa&k)===k&&(Or===4||Or===3&&(aa&130023424)===aa&&500>Ke()-hk?Wu(h,0):pk|=k),ni(h,m)}function A5(h,m){m===0&&(h.mode&1?(m=Es,Es<<=1,!(Es&130023424)&&(Es=4194304)):m=1);var k=Sa();h=Xo(h,m),h!==null&&(Ce(h,m,k),ni(h,k))}function wj(h){var m=h.memoizedState,k=0;m!==null&&(k=m.retryLane),A5(h,k)}function kj(h,m){var k=0;switch(h.tag){case 13:var I=h.stateNode,T=h.memoizedState;T!==null&&(k=T.retryLane);break;case 19:I=h.stateNode;break;default:throw Error(i(314))}I!==null&&I.delete(m),A5(h,k)}var D5;D5=function(h,m,k){if(h!==null)if(h.memoizedProps!==m.pendingProps||ya.current)ei=!0;else{if(!(h.lanes&k)&&!(m.flags&128))return ei=!1,uj(h,m,k);ei=!!(h.flags&131072)}else ei=!1,nn&&m.flags&1048576&&bh(m,Sr,m.index);switch(m.lanes=0,m.tag){case 2:var I=m.type;_0(h,m),h=m.pendingProps;var T=Sl(m,jr.current);hd(m,k),T=Vw(null,m,I,h,T,k);var O=Ww();return m.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ba(I)?(O=!0,Ko(m)):O=!1,m.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Pw(m),T.updater=x0,m.stateNode=T,T._reactInternals=m,Dw(m,I,h,k),m=Zw(null,m,I,!0,O,k)):(m.tag=0,nn&&O&&ja(m),Va(null,m,T,k),m=m.child),m;case 16:I=m.elementType;e:{switch(_0(h,m),h=m.pendingProps,T=I._init,I=T(I._payload),m.type=I,T=m.tag=Cj(I),h=wo(I,h),T){case 0:m=Qw(null,m,I,h,k);break e;case 1:m=s5(null,m,I,h,k);break e;case 11:m=n5(null,m,I,h,k);break e;case 14:m=r5(null,m,I,wo(I.type,h),k);break e}throw Error(i(306,I,""))}return m;case 0:return I=m.type,T=m.pendingProps,T=m.elementType===I?T:wo(I,T),Qw(h,m,I,T,k);case 1:return I=m.type,T=m.pendingProps,T=m.elementType===I?T:wo(I,T),s5(h,m,I,T,k);case 3:e:{if(l5(m),h===null)throw Error(i(387));I=m.pendingProps,O=m.memoizedState,T=O.element,v_(h,m),v0(m,I,null,k);var W=m.memoizedState;if(I=W.element,_e&&O.isDehydrated)if(O={element:I,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},m.updateQueue.baseState=O,m.memoizedState=O,m.flags&256){T=yd(Error(i(423)),m),m=u5(h,m,I,k,T);break e}else if(I!==T){T=yd(Error(i(424)),m),m=u5(h,m,I,k,T);break e}else for(_e&&(na=rr(m.stateNode.containerInfo),ir=m,nn=!0,xo=null,Rs=!1),k=N_(m,null,I,k),m.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(dd(),I===T){m=Os(h,m,k);break e}Va(h,m,I,k)}m=m.child}return m;case 5:return __(m),h===null&&Tw(m),I=m.type,T=m.pendingProps,O=h!==null?h.memoizedProps:null,W=T.children,de(I,T)?W=null:O!==null&&de(I,O)&&(m.flags|=32),o5(h,m),Va(h,m,W,k),m.child;case 6:return h===null&&Tw(m),null;case 13:return c5(h,m,k);case 4:return Lw(m,m.stateNode.containerInfo),I=m.pendingProps,h===null?m.child=fd(m,null,I,k):Va(h,m,I,k),m.child;case 11:return I=m.type,T=m.pendingProps,T=m.elementType===I?T:wo(I,T),n5(h,m,I,T,k);case 7:return Va(h,m,m.pendingProps,k),m.child;case 8:return Va(h,m,m.pendingProps.children,k),m.child;case 12:return Va(h,m,m.pendingProps.children,k),m.child;case 10:e:{if(I=m.type._context,T=m.pendingProps,O=m.memoizedProps,W=T.value,y_(m,I,W),O!==null)if(Vt(O.value,W)){if(O.children===T.children&&!ya.current){m=Os(h,m,k);break e}}else for(O=m.child,O!==null&&(O.return=m);O!==null;){var le=O.dependencies;if(le!==null){W=O.child;for(var ye=le.firstContext;ye!==null;){if(ye.context===I){if(O.tag===1){ye=$s(-1,k&-k),ye.tag=2;var Re=O.updateQueue;if(Re!==null){Re=Re.shared;var qe=Re.pending;qe===null?ye.next=ye:(ye.next=qe.next,qe.next=ye),Re.pending=ye}}O.lanes|=k,ye=O.alternate,ye!==null&&(ye.lanes|=k),Ow(O.return,k,m),le.lanes|=k;break}ye=ye.next}}else if(O.tag===10)W=O.type===m.type?null:O.child;else if(O.tag===18){if(W=O.return,W===null)throw Error(i(341));W.lanes|=k,le=W.alternate,le!==null&&(le.lanes|=k),Ow(W,k,m),W=O.sibling}else W=O.child;if(W!==null)W.return=O;else for(W=O;W!==null;){if(W===m){W=null;break}if(O=W.sibling,O!==null){O.return=W.return,W=O;break}W=W.return}O=W}Va(h,m,T.children,k),m=m.child}return m;case 9:return T=m.type,I=m.pendingProps.children,hd(m,k),T=Bi(T),I=I(T),m.flags|=1,Va(h,m,I,k),m.child;case 14:return I=m.type,T=wo(I,m.pendingProps),T=wo(I.type,T),r5(h,m,I,T,k);case 15:return a5(h,m,m.type,m.pendingProps,k);case 17:return I=m.type,T=m.pendingProps,T=m.elementType===I?T:wo(I,T),_0(h,m),m.tag=1,ba(I)?(h=!0,Ko(m)):h=!1,hd(m,k),C_(m,I,T),Dw(m,I,T,k),Zw(null,m,I,!0,h,k);case 19:return p5(h,m,k);case 22:return i5(h,m,k)}throw Error(i(156,m.tag))};function L5(h,m){return mt(h,m)}function Sj(h,m,k,I){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(h,m,k,I){return new Sj(h,m,k,I)}function wk(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Cj(h){if(typeof h=="function")return wk(h)?1:0;if(h!=null){if(h=h.$$typeof,h===g)return 11;if(h===b)return 14}return 2}function Rl(h,m){var k=h.alternate;return k===null?(k=Vi(h.tag,m,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=m,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,m=h.dependencies,k.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function q0(h,m,k,I,T,O){var W=2;if(I=h,typeof h=="function")wk(h)&&(W=1);else if(typeof h=="string")W=5;else e:switch(h){case u:return qu(k.children,T,O,m);case c:W=8,T|=8;break;case d:return h=Vi(12,k,m,T|2),h.elementType=d,h.lanes=O,h;case y:return h=Vi(13,k,m,T),h.elementType=y,h.lanes=O,h;case v:return h=Vi(19,k,m,T),h.elementType=v,h.lanes=O,h;case w:return K0(k,T,O,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case p:W=10;break e;case f:W=9;break e;case g:W=11;break e;case b:W=14;break e;case x:W=16,I=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return m=Vi(W,k,m,T),m.elementType=h,m.type=I,m.lanes=O,m}function qu(h,m,k,I){return h=Vi(7,h,I,m),h.lanes=k,h}function K0(h,m,k,I){return h=Vi(22,h,I,m),h.elementType=w,h.lanes=k,h.stateNode={isHidden:!1},h}function kk(h,m,k){return h=Vi(6,h,null,m),h.lanes=k,h}function Sk(h,m,k){return m=Vi(4,h.children!==null?h.children:[],h.key,m),m.lanes=k,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function Ij(h,m,k,I,T){this.tag=m,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=I,this.onRecoverableError=T,_e&&(this.mutableSourceEagerHydrationData=null)}function F5(h,m,k,I,T,O,W,le,ye){return h=new Ij(h,m,k,le,ye),m===1?(m=1,O===!0&&(m|=8)):m=0,O=Vi(3,null,null,m),h.current=O,O.stateNode=h,O.memoizedState={element:I,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pw(O),h}function B5(h){if(!h)return Fi;h=h._reactInternals;e:{if(N(h)!==h||h.tag!==1)throw Error(i(170));var m=h;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ba(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(i(171))}if(h.tag===1){var k=h.type;if(ba(k))return Un(h,k,m)}return m}function z5(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=L(m),h===null?null:h.stateNode}function U5(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<m?k:m}}function X0(h,m){U5(h,m),(h=h.alternate)&&U5(h,m)}function Ej(h){return h=L(h),h===null?null:h.stateNode}function Tj(){return null}return e.attemptContinuousHydration=function(h){if(h.tag===13){var m=Xo(h,134217728);if(m!==null){var k=Sa();ji(m,h,134217728,k)}X0(h,134217728)}},e.attemptDiscreteHydration=function(h){if(h.tag===13){var m=Xo(h,1);if(m!==null){var k=Sa();ji(m,h,1,k)}X0(h,1)}},e.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var m=Nl(h),k=Xo(h,m);if(k!==null){var I=Sa();ji(k,h,m,I)}X0(h,m)}},e.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var m=h.stateNode;if(m.current.memoizedState.isDehydrated){var k=zu(m.pendingLanes);k!==0&&($e(m,k|1),ni(m,Ke()),!(Bt&6)&&(xd(),wr()))}break;case 13:_5(function(){var I=Xo(h,1);if(I!==null){var T=Sa();ji(I,h,1,T)}}),X0(h,1)}},e.batchedUpdates=function(h,m){var k=Bt;Bt|=1;try{return h(m)}finally{Bt=k,Bt===0&&(xd(),An&&wr())}},e.createComponentSelector=function(h){return{$$typeof:P0,value:h}},e.createContainer=function(h,m,k,I,T,O,W){return F5(h,m,!1,null,k,I,T,O,W)},e.createHasPseudoClassSelector=function(h){return{$$typeof:A0,value:h}},e.createHydrationContainer=function(h,m,k,I,T,O,W,le,ye){return h=F5(k,I,!0,h,T,O,W,le,ye),h.context=B5(null),k=h.current,I=Sa(),T=Nl(k),O=$s(I,T),O.callback=m??null,Il(k,O,T),h.current.lanes=T,Ce(h,T,I),ni(h,I),h},e.createPortal=function(h,m,k){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:h,containerInfo:m,implementation:k}},e.createRoleSelector=function(h){return{$$typeof:D0,value:h}},e.createTestNameSelector=function(h){return{$$typeof:L0,value:h}},e.createTextSelector=function(h){return{$$typeof:F0,value:h}},e.deferredUpdates=function(h){var m=Ne,k=fr.transition;try{return fr.transition=null,Ne=16,h()}finally{Ne=m,fr.transition=k}},e.discreteUpdates=function(h,m,k,I,T){var O=Ne,W=fr.transition;try{return fr.transition=null,Ne=1,h(m,k,I,T)}finally{Ne=O,fr.transition=W,Bt===0&&xd()}},e.findAllNodes=ck,e.findBoundingRects=function(h,m){if(!et)throw Error(i(363));m=ck(h,m),h=[];for(var k=0;k<m.length;k++)h.push(Ut(m[k]));for(m=h.length-1;0<m;m--){k=h[m];for(var I=k.x,T=I+k.width,O=k.y,W=O+k.height,le=m-1;0<=le;le--)if(m!==le){var ye=h[le],Re=ye.x,qe=Re+ye.width,It=ye.y,Be=It+ye.height;if(I>=Re&&O>=It&&T<=qe&&W<=Be){h.splice(m,1);break}else if(I!==Re||k.width!==ye.width||Be<O||It>W){if(!(O!==It||k.height!==ye.height||qe<I||Re>T)){Re>I&&(ye.width+=Re-I,ye.x=I),qe<T&&(ye.width=T-Re),h.splice(m,1);break}}else{It>O&&(ye.height+=It-O,ye.y=O),Be<W&&(ye.height=W-It),h.splice(m,1);break}}}return h},e.findHostInstance=z5,e.findHostInstanceWithNoPortals=function(h){return h=P(h),h=h!==null?B(h):null,h===null?null:h.stateNode},e.findHostInstanceWithWarning=function(h){return z5(h)},e.flushControlled=function(h){var m=Bt;Bt|=1;var k=fr.transition,I=Ne;try{fr.transition=null,Ne=1,h()}finally{Ne=I,fr.transition=k,Bt=m,Bt===0&&(xd(),wr())}},e.flushPassiveEffects=Hu,e.flushSync=_5,e.focusWithin=function(h,m){if(!et)throw Error(i(363));for(h=sk(h),m=E5(h,m),m=Array.from(m),h=0;h<m.length;){var k=m[h++];if(!Qt(k)){if(k.tag===5&&Ct(k.stateNode))return!0;for(k=k.child;k!==null;)m.push(k),k=k.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ne},e.getFindAllNodesFailureDescription=function(h,m){if(!et)throw Error(i(363));var k=0,I=[];h=[sk(h),0];for(var T=0;T<h.length;){var O=h[T++],W=h[T++],le=m[W];if((O.tag!==5||!Qt(O))&&(lk(O,le)&&(I.push(uk(le)),W++,W>k&&(k=W)),W<m.length))for(O=O.child;O!==null;)h.push(O,W),O=O.sibling}if(k<m.length){for(h=[];k<m.length;k++)h.push(uk(m[k]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},e.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return X(h.child.stateNode);default:return h.child.stateNode}},e.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Ej,findFiberByHostInstance:h.findFiberByHostInstance||Tj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)h=!0;else{try{st=m.inject(h),bt=m}catch{}h=!!m.checkDCE}}return h},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(h,m,k,I){if(!et)throw Error(i(363));h=ck(h,m);var T=zn(h,k,I).disconnect;return{disconnect:function(){T()}}},e.registerMutableSourceForHydration=function(h,m){var k=m._getVersion;k=k(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,k]:h.mutableSourceEagerHydrationData.push(m,k)},e.runWithPriority=function(h,m){var k=Ne;try{return Ne=h,m()}finally{Ne=k}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(h,m,k,I){var T=m.current,O=Sa(),W=Nl(T);return k=B5(k),m.context===null?m.context=k:m.pendingContext=k,m=$s(O,W),m.payload={element:h},I=I===void 0?null:I,I!==null&&(m.callback=I),h=Il(T,m,W),h!==null&&(ji(h,T,W,O),b0(h,T,W)),W},e};kA.exports=Zre;var Jre=kA.exports;const eae=Wi(Jre);var SA={exports:{}},Ic={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/Ic.ConcurrentRoot=1,Ic.ContinuousEventPriority=4,Ic.DefaultEventPriority=16,Ic.DiscreteEventPriority=1,Ic.IdleEventPriority=536870912,Ic.LegacyRoot=0,SA.exports=Ic;var CA=SA.exports;const IA={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let EA=!1,TA=!1;const l3=".react-konva-event",tae=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,nae=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,rae={};function Hb(t,e,n=rae){if(!EA&&"zIndex"in e&&(console.warn(nae),EA=!0),!TA&&e.draggable){var r=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;r&&!a&&(console.warn(tae),TA=!0)}for(var i in n)if(!IA[i]){var o=i.slice(0,2)==="on",s=n[i]!==e[i];if(o&&s){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[i])}var u=!e.hasOwnProperty(i);u&&t.setAttr(i,void 0)}var c=e._useStrictMode,d={},p=!1;const f={};for(var i in e)if(!IA[i]){var o=i.slice(0,2)==="on",g=n[i]!==e[i];if(o&&g){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[i]&&(f[l]=e[i])}!o&&(e[i]!==n[i]||c&&e[i]!==t.getAttr(i))&&(p=!0,d[i]=e[i])}p&&(t.setAttrs(d),cu(t));for(var l in f)t.on(l+l3,f[l])}function cu(t){if(!Dt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const NA={},aae={};tm.Node.prototype._applyProps=Hb;function iae(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),cu(t)}function oae(t,e,n){let r=tm[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=tm.Group);const a={},i={};for(var o in e){var s=o.slice(0,2)==="on";s?i[o]=e[o]:a[o]=e[o]}const l=new r(a);return Hb(l,i),l}function sae(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function lae(t,e,n){return!1}function uae(t){return t}function cae(){return null}function dae(){return null}function pae(t,e,n,r){return aae}function hae(){}function fae(t){}function mae(t,e){return!1}function gae(){return NA}function yae(){return NA}const bae=setTimeout,vae=clearTimeout,xae=-1;function wae(t,e){return!1}const kae=!1,Sae=!0,Cae=!0;function Iae(t,e){e.parent===t?e.moveToTop():t.add(e),cu(t)}function Eae(t,e){e.parent===t?e.moveToTop():t.add(e),cu(t)}function _A(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),cu(t)}function Tae(t,e,n){_A(t,e,n)}function Nae(t,e){e.destroy(),e.off(l3),cu(t)}function _ae(t,e){e.destroy(),e.off(l3),cu(t)}function Rae(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function $ae(t,e,n){}function Oae(t,e,n,r,a){Hb(t,a,r)}function Mae(t){t.hide(),cu(t)}function Pae(t){}function Aae(t,e){(e.visible==null||e.visible)&&t.show()}function Dae(t,e){}function Lae(t){}function Fae(){}const Bae=()=>CA.DefaultEventPriority,zae=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Iae,appendChildToContainer:Eae,appendInitialChild:iae,cancelTimeout:vae,clearContainer:Lae,commitMount:$ae,commitTextUpdate:Rae,commitUpdate:Oae,createInstance:oae,createTextInstance:sae,detachDeletedInstance:Fae,finalizeInitialChildren:lae,getChildHostContext:yae,getCurrentEventPriority:Bae,getPublicInstance:uae,getRootHostContext:gae,hideInstance:Mae,hideTextInstance:Pae,idlePriority:zh.unstable_IdlePriority,insertBefore:_A,insertInContainerBefore:Tae,isPrimaryRenderer:kae,noTimeout:xae,now:zh.unstable_now,prepareForCommit:cae,preparePortalMount:dae,prepareUpdate:pae,removeChild:Nae,removeChildFromContainer:_ae,resetAfterCommit:hae,resetTextContent:fae,run:zh.unstable_runWithPriority,scheduleTimeout:bae,shouldDeprioritizeSubtree:mae,shouldSetTextContent:wae,supportsMutation:Cae,unhideInstance:Aae,unhideTextInstance:Dae,warnsIfNotActing:Sae},Symbol.toStringTag,{value:"Module"}));var Uae=Object.defineProperty,jae=Object.defineProperties,Vae=Object.getOwnPropertyDescriptors,RA=Object.getOwnPropertySymbols,Wae=Object.prototype.hasOwnProperty,Gae=Object.prototype.propertyIsEnumerable,$A=(t,e,n)=>e in t?Uae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OA=(t,e)=>{for(var n in e||(e={}))Wae.call(e,n)&&$A(t,n,e[n]);if(RA)for(var n of RA(e))Gae.call(e,n)&&$A(t,n,e[n]);return t},Hae=(t,e)=>jae(t,Vae(e));function MA(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const a=MA(r,e,n);if(a)return a;r=e?null:r.sibling}}function PA(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const u3=PA($.createContext(null));class AA extends $.Component{render(){return $.createElement(u3.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:DA,ReactCurrentDispatcher:LA}=$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function qae(){const t=$.useContext(u3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=$.useId();return $.useMemo(()=>{for(const n of[DA?.current,t,t?.alternate]){if(!n)continue;const r=MA(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===e)return!0;i=i.next}});if(r)return r}},[t,e])}function Kae(){var t,e;const n=qae(),[r]=$.useState(()=>new Map);r.clear();let a=n;for(;a;){const i=(t=a.type)==null?void 0:t._context;i&&i!==u3&&!r.has(i)&&r.set(i,(e=LA?.current)==null?void 0:e.readContext(PA(i))),a=a.return}return r}function Xae(){const t=Kae();return $.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>$.createElement(e,null,$.createElement(n.Provider,Hae(OA({},r),{value:t.get(n)}))),e=>$.createElement(AA,OA({},e))),[t])}function Yae(t){const e=G.useRef({});return G.useLayoutEffect(()=>{e.current=t}),G.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Qae=t=>{const e=G.useRef(),n=G.useRef(),r=G.useRef(),a=Yae(t),i=Xae(),o=s=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(s):l.current=s)};return G.useLayoutEffect(()=>(n.current=new tm.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=nm.createContainer(n.current,CA.LegacyRoot,!1,null),nm.updateContainer(G.createElement(i,{},t.children),r.current),()=>{tm.isBrowser&&(o(null),nm.updateContainer(null,r.current,null),n.current.destroy())}),[]),G.useLayoutEffect(()=>{o(n.current),Hb(n.current,t,a),nm.updateContainer(G.createElement(i,{},t.children),r.current,null)}),G.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},c3="Layer",FA="Image",Zae="Transformer",nm=eae(zae);nm.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:G.version,rendererPackageName:"react-konva"});const Jae=G.forwardRef((t,e)=>G.createElement(AA,{},G.createElement(Qae,{...t,forwardedRef:e})));var Ec=$,eie=function(t,e,n){const r=Ec.useRef("loading"),a=Ec.useRef(),[i,o]=Ec.useState(0),s=Ec.useRef(),l=Ec.useRef(),u=Ec.useRef();return(s.current!==t||l.current!==e||u.current!==n)&&(r.current="loading",a.current=void 0,s.current=t,l.current=e,u.current=n),Ec.useLayoutEffect(function(){if(!t)return;var c=document.createElement("img");function d(){r.current="loaded",a.current=c,o(Math.random())}function p(){r.current="failed",a.current=void 0,o(Math.random())}return c.addEventListener("load",d),c.addEventListener("error",p),e&&(c.crossOrigin=e),n&&(c.referrerPolicy=n),c.src=t,function(){c.removeEventListener("load",d),c.removeEventListener("error",p)}},[t,e,n]),[a.current,r.current]};const BA=Wi(eie),zA=({front:t})=>{const{frame:e}=Ks(),[n]=BA(t?e.front:e.image,"anonymous");return ae.jsx(FA,{image:n,draggable:!1})},tie=({canvasImage:t,isSelected:e,onSelect:n})=>{const r=$.useRef(),a=$.useRef(),[i]=BA(t.image,"anonymous"),o=Ks(c=>c.transformCanvasImage);$.useEffect(()=>{var c;e&&(a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw())},[e]),$.useEffect(()=>{i&&r.current.cache()},[i]);const s=()=>{o({...t,isDragging:!0})},l=c=>{o({...t,isDragging:!1,x:c.target.x(),y:c.target.y()})},u=()=>{var c;const d=r.current,p=d.scaleX(),f=d.scaleY(),g=Math.max(5,d.width()*p),y=Math.max(d.height()*f);o({...t,x:d.x(),y:d.y(),width:g,height:y}),a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw()};return ae.jsxs(ae.Fragment,{children:[ae.jsx(FA,{brightness:t.brightness,contrast:t.contrast,draggable:!0,filters:[wA.Filters.Brighten,wA.Filters.Contrast],id:t.id,image:i,onClick:n,onDragEnd:l,onDragStart:s,onTap:n,onTransformEnd:u,opacity:t.opacity||1,ref:r,scaleX:.5,scaleY:.5,x:t.x,y:t.y},t.id),e&&ae.jsx(Zae,{ref:a,flipEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],borderStroke:"#BC13FE"})]})},nie=()=>{const{addToCanvas:t,artworkList:e,canvasList:n,frame:r,moveCanvasImage:a,removeFromCanvas:i,setFrame:o,transformCanvasImage:s}=Ks(),{t:l}=Jl(),u=$.useRef(null),[c,d]=$.useState(null),[p,f]=$.useState(0),[g,y]=$.useState(0),[v,b]=$.useState(1),[x,w]=$.useState(!1),[S,C]=$.useState(!1),[E,_]=$.useState(!1),N=1080,M=1080;$.useEffect(()=>{const ie=()=>{const xe=(window.innerWidth*.9||0)/N;u.current&&(u.current.width(N*xe),u.current.height(M*xe),u.current.scale({x:xe,y:xe}))};return ie(),window.addEventListener("resize",ie),()=>{window.removeEventListener("resize",ie)}},[]);const P=ie=>{ie.target===ie.target.getStage()&&d(null)},L=ie=>{d(ie),f(ie.brightness),y(ie.contrast),b(ie.opacity)},U=ie=>{c&&a(c.id,ie)},B=(ie,xe)=>{if(!c)return;const q={...c,[xe]:ie};switch(s(q),xe){case"brightness":f(ie);break;case"contrast":y(ie);break;case"opacity":b(ie);break}},K=()=>{c&&(i(c.id),d(null))},X=async()=>{if(navigator.share)try{const ie=u.current;if(!ie){console.error("Canvas element not found");return}const xe=await fetch(ie.toDataURL()).then(q=>q.blob());if(!xe){console.error("Failed to create blob from canvas");return}await navigator.share({files:[new File([xe],"canvas.png",{type:"image/png"})],title:"GLAMorous Europe",text:"Check out my GLAMorous Europe artwork!"}),console.log("Share successful")}catch(ie){console.error("Error sharing:",ie)}else console.log("Web Share API not supported")},Z=()=>{var ie;const xe=(ie=u.current)==null?void 0:ie.toDataURL();xe&&ZJ.saveAs(xe,"GLAMorousEurope.png")},H=()=>{w(!x),_(!1),C(!1)},F=()=>{C(!S),_(!1),w(!1)},Y=()=>{_(!E),C(!1),w(!1)},[{canDrop:Q,isOver:ne},se]=kG(()=>({accept:"artwork",drop:(ie,xe)=>{const q=xe.getClientOffset();if(ie&&q){const oe=e.find(he=>he.id===ie.id);if(oe){const he=u.current;if(he){const Ie=q.x-he.container().getBoundingClientRect().left,Ee=q.y-he.container().getBoundingClientRect().top;t(oe.image,Ie,Ee)}}}},collect:ie=>({isOver:ie.isOver(),canDrop:ie.canDrop()})})),pe=Q&&ne;let de="transparent";return pe&&(de="#ebb2ff"),ae.jsxs(ae.Fragment,{children:[ae.jsxs(Mo,{margin:"my-0",className:"flex flex-wrap gap-1 container justify-center content-center text-center mx-auto",children:[ae.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:X,children:ae.jsx(_a,{material:ae.jsx(AJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:Z,children:ae.jsx(_a,{material:ae.jsx(nJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-4 text-xl text-black",rounded:!0,inline:!0,onClick:()=>o(Math.max(1,r.id-1)),children:ae.jsx(_a,{material:ae.jsx(fJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-4 text-xl text-black",rounded:!0,inline:!0,onClick:()=>o(Math.min(5,r.id+1)),children:ae.jsx(_a,{material:ae.jsx(yJ,{className:"w-6 h-6"})})}),c&&ae.jsxs(ae.Fragment,{children:[ae.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:()=>U(!0),children:ae.jsx(_a,{material:ae.jsx(lJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:()=>U(!1),children:ae.jsx(_a,{material:ae.jsx(iJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:K,children:ae.jsx(_a,{material:ae.jsx(WJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-2 text-black",style:{backgroundColor:E&&"#BC13FE"},rounded:!0,inline:!0,onClick:Y,children:ae.jsx(_a,{material:ae.jsx(XJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-2 text-black",style:{backgroundColor:x&&"#BC13FE"},rounded:!0,inline:!0,onClick:H,children:ae.jsx(_a,{material:ae.jsx(UJ,{className:"w-6 h-6"})})}),ae.jsx(yr,{className:"p-2 text-black",style:{backgroundColor:S&&"#BC13FE"},rounded:!0,inline:!0,onClick:F,children:ae.jsx(_a,{material:ae.jsx(QJ,{className:"w-6 h-6"})})}),E&&ae.jsx(sp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:ae.jsx(lp,{innerClassName:"flex space-x-4 w-6",innerChildren:ae.jsxs(ae.Fragment,{children:[ae.jsx("p",{children:l("artworkCanvasOpacity")}),ae.jsx(Fy,{value:v,min:0,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"opacity")})]})})}),x&&ae.jsx(sp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:ae.jsx(lp,{innerClassName:"flex space-x-4 w-6",innerChildren:ae.jsxs(ae.Fragment,{children:[ae.jsx("p",{children:l("artworkCanvasBrightness")}),ae.jsx(Fy,{value:p,min:-1,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"brightness")})]})})}),S&&ae.jsx(sp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:ae.jsx(lp,{innerClassName:"flex space-x-4 w-6",innerChildren:ae.jsxs(ae.Fragment,{children:[ae.jsx("p",{children:l("artworkCanvasContrast")}),ae.jsx(Fy,{value:g,min:-100,max:100,step:1,onChange:ie=>B(parseFloat(ie.target.value),"contrast")})]})})})]})]}),ae.jsx("div",{className:"mx-auto flex items-center",ref:se,children:ae.jsxs(Jae,{style:{border:"4px solid",borderColor:de},width:N,height:M,ref:u,onMouseDown:P,onTouchStart:P,children:[ae.jsx(c3,{listening:!1,children:ae.jsx(zA,{front:!1})}),ae.jsx(c3,{children:n.map(ie=>ae.jsx(tie,{canvasImage:ie,isSelected:c?.id===ie.id,onSelect:()=>L(ie)},ie.id))}),ae.jsx(c3,{listening:!1,children:ae.jsx(zA,{front:!0})})]})})]})};function rie({id:t,image:e}){const[{opacity:n},r,a]=fG(()=>({type:"artwork",item:{id:t},collect:i=>({opacity:i.isDragging()?.4:1})}));return ae.jsxs(ae.Fragment,{children:[ae.jsx(HW,{connect:a,src:e}),ae.jsx("img",{src:e,alt:t,role:"presentation",style:{cursor:"move",marginRight:"10px",maxHeight:"100px",opacity:n,scrollSnapAlign:"start",width:"auto"},ref:r})]})}function aie(){const{t}=Jl(),{artworkList:e}=Ks();return ae.jsxs(Mo,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[ae.jsx("div",{className:"p-2",children:ae.jsx("h1",{className:"text-xl",children:t("artworkTitle")})}),ae.jsx(Mo,{margin:"my-4",className:"flex mx-auto overflow-x-auto",style:{maxHeight:"100px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:e.map((n,r)=>ae.jsx(rie,{...n},n.id+r))}),ae.jsx(nie,{})]})}const iie="modulepreload",oie=function(t){return"/"+t},UA={},sie=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link");r=Promise.all(e.map(i=>{if(i=oie(i),i in UA)return;UA[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(n)for(let u=a.length-1;u>=0;u--){const c=a[u];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":iie,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,c)=>{l.addEventListener("load",u),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})}))}return r.then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})};var jA={exports:{}},lie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",uie=lie,cie=uie;function VA(){}function WA(){}WA.resetWarningCache=VA;var die=function(){function t(r,a,i,o,s,l){if(l!==cie){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:WA,resetWarningCache:VA};return n.PropTypes=n,n};jA.exports=die();var pie=jA.exports;const ua=Wi(pie);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d3=function(t,e){return d3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},d3(t,e)};function GA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");d3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Lo=function(){return Lo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Lo.apply(this,arguments)};function HA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Tc(t,e){for(var n=0,r=e.length,a=t.length;n<r;n++,a++)t[a]=e[n];return t}var hie=function(t){return Object.keys(t).filter(function(e){return t[e]}).join(" ")},qb=function(t,e){return t.x===e.x&&t.y===e.y},Kb=function(t,e){return!t&&e||t&&!e||t.length!==e.length?!1:t.every(function(n,r){return qb(n,e[r])})},Nc=function(t,e){var n=t.x,r=t.y;return e===void 0&&(e=1),{x:Math.round((n+Number.EPSILON)*e)/e,y:Math.round((r+Number.EPSILON)*e)/e}},fie=function(t,e,n){n===void 0&&(n=0);var r=t.findIndex(function(a){return Math.max(Math.abs(a.x-e.x),Math.abs(a.y-e.y))<=n});return{point:Lo({},t[r]||{x:NaN,y:NaN}),index:r}},qA=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},KA=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},mie=function(t,e,n){var r=qA(t,e),a=KA(t,e),i=Math.round(a/n)*n;return{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i)}},gie=function(t,e,n){var r=qA(t,e),a=KA(t,e),i=n.reduce(function(o,s){return Math.abs(s-a)<Math.abs(o-a)?s:o},1/0);return i!==1/0&&(e.x=t.x+r*Math.cos(i),e.y=t.y+r*Math.sin(i)),e},yie=function(t){for(var e=[],n=1;n<t.length;n++){var r=Math.atan2(t[n].y-t[n-1].y,t[n].x-t[n-1].x),a=r+Math.PI;e.push(r,a>Math.PI?a-2*Math.PI:a)}return e.filter(function(i,o,s){return s.indexOf(i)===o})};function bie(t,e,n,r){r===void 0&&(r=!0);var a=new Image;a.crossOrigin="Anonymous";var i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return n(new Error("CTX is null"),i);a.onerror=function(){n(new Error("Failed to load image"),i)},a.onload=function(){try{if(i.width=a.naturalWidth+2,i.height=a.naturalHeight+2,o.drawImage(a,0,0),e.length<3){n(null,i);return}if(o.beginPath(),o.moveTo(0,0),o.lineTo(i.width,0),o.lineTo(i.width,i.height),o.lineTo(0,i.height),o.lineTo(0,0),o.lineTo(e[0].x+1,e[0].y+1),e.slice(1).forEach(function(w){var S=w.x,C=w.y;return o.lineTo(S+1,C+1)}),o.lineTo(e[0].x+1,e[0].y+1),o.lineTo(0,0),o.closePath(),o.clip("evenodd"),o.globalCompositeOperation="destination-out",o.fill(),r){var s=e.map(function(w){var S=w.x;return S+1}),l=e.map(function(w){var S=w.y;return S+1}),u=[Math.min.apply(null,s),Math.min.apply(null,l)],c=u[0],d=u[1],p=[Math.max.apply(null,s),Math.max.apply(null,l)],f=p[0],g=p[1],y=[f-c,g-d],v=y[0],b=y[1],x=o.getImageData(c,d,v,b);i.width=v,i.height=b,o.putImageData(x,0,0)}n(null,i)}catch(w){n(w instanceof Error?w:new Error(String(w)),i)}},a.src=t}var XA=function(){function t(e){this.getSvgElement=e}return t.prototype.getSvg=function(){var e=this.getSvgElement();if(!e)throw new Error("SVG is null");return e},t.prototype.getCTM=function(){var e=this.getSvg(),n=e.getCTM();if(n===null){var r=e.querySelector('rect[visibility="hidden"]');n=r.getCTM()}if(!n)throw new Error("CTM is null");return n},t.prototype.getViewboxSize=function(){return this.getSvg().viewBox.baseVal},t.prototype.getRealSize=function(){var e=this.getSvg();return{width:e.clientWidth,height:e.clientHeight}},t.prototype.getViewboxOffset=function(){var e=this.getSvg(),n=this.getRealSize(),r=n.width,a=n.height,i=this.getViewboxSize(),o=i.width,s=i.height,l=Object.assign(e.createSVGPoint(),{x:r,y:a}),u=this.getCTM(),c=l.matrixTransform(u.inverse()),d=c.x,p=c.y;return{x:d-o,y:p-s}},t.prototype.convertViewboxPointsToReal=function(e){var n=this.getSvg(),r=this.getCTM();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Nc(s)})},t.prototype.convertRealPointsToViewbox=function(e){var n=this.getSvg(),r=this.getCTM().inverse();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Nc(s,1e3)})},t.prototype.getBorderPoints=function(e){e===void 0&&(e=!0);var n=this.getViewboxSize(),r=n.width,a=n.height,i=this.getViewboxOffset(),o=i.x,s=i.y,l=[{x:-o,y:-s},{x:r+o,y:-s},{x:r+o,y:a+s},{x:-o,y:a+s}];return e&&l.push({x:-o,y:-s}),l},t.prototype.isAboveTheBorder=function(e){var n=e.x,r=e.y,a=this.getViewboxSize(),i=a.width,o=a.height,s=this.getViewboxOffset(),l=s.x,u=s.y;return n<-l||n>i+l||r<-u||r>o+u},t.prototype.getMouseCoordinates=function(e){var n=e,r=n.changedTouches&&n.touches?n.changedTouches[0]||n.touches[0]:n,a=r.clientX,i=r.clientY,o=this.getSvg(),s=o.getScreenCTM();if(!s)throw new Error("ScreenCTM is null");var l=o.createSVGPoint();l.x=a,l.y=i;var u=l.matrixTransform(s.inverse()),c=u.x,d=u.y;return{x:c,y:d}},t}(),YA=function(t){return function(e){GA(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.ref=G.createRef(),r.svg=new XA(function(){var a,i;return(i=(a=r.ref)===null||a===void 0?void 0:a.current)===null||i===void 0?void 0:i.ownerSVGElement}),r.dragLastPosition=null,r.wasMoved=!1,r.onMouseTouchDown=function(a){if(a.target===r.ref.current&&r.props.draggable){a.stopImmediatePropagation(),a.preventDefault();var i=a.target;r.dragLastPosition=r.getMousePosition(a),i.ownerSVGElement&&i.ownerSVGElement.focus({preventScroll:!0})}},r.onMouseTouchMove=function(a){if(r.dragLastPosition){a.stopImmediatePropagation(),a.preventDefault();var i=r.getMousePosition(a),o=i.x,s=i.y,l=o-r.dragLastPosition.x,u=s-r.dragLastPosition.y;!r.wasMoved&&r.props.onDragStart&&r.props.onDragStart({x:r.dragLastPosition.x,y:r.dragLastPosition.y,dx:l,dy:u}),r.props.onDrag&&r.props.onDrag({dx:l,dy:u}),r.dragLastPosition={x:o,y:s},r.wasMoved=!0}},r.onMouseTouchUp=function(a){r.dragLastPosition&&r.wasMoved&&(a.stopImmediatePropagation(),a.preventDefault(),(a instanceof MouseEvent||!a.touches)&&window.addEventListener("click",function(i){return i.stopPropagation()},{capture:!0,once:!0}),r.props.onDragEnd&&r.props.onDragEnd({x:r.dragLastPosition.x,y:r.dragLastPosition.y})),r.dragLastPosition=null,r.wasMoved=!1},r}return n.prototype.render=function(){var r=this.props,a=r.draggable;r.onDrag,r.onDragStart,r.onDragEnd;var i=HA(r,["draggable","onDrag","onDragStart","onDragEnd"]);return G.createElement(t,Lo({ref:this.ref},i,{draggable:a}))},n.prototype.componentDidUpdate=function(r){r.draggable&&!this.props.draggable&&this.dragLastPosition&&this.wasMoved&&(this.props.onDragEnd&&this.props.onDragEnd({x:this.dragLastPosition.x,y:this.dragLastPosition.y}),this.dragLastPosition=null,this.wasMoved=!1)},n.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onMouseTouchDown,!0),window.addEventListener("mousemove",this.onMouseTouchMove,!0),window.addEventListener("mouseup",this.onMouseTouchUp,!0),window.addEventListener("touchstart",this.onMouseTouchDown,!0),window.addEventListener("touchmove",this.onMouseTouchMove,!0),window.addEventListener("touchend",this.onMouseTouchUp,!0)},n.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onMouseTouchDown),window.removeEventListener("mousemove",this.onMouseTouchMove),window.removeEventListener("mouseup",this.onMouseTouchUp),window.removeEventListener("touchstart",this.onMouseTouchDown),window.removeEventListener("touchmove",this.onMouseTouchMove),window.removeEventListener("touchend",this.onMouseTouchUp)},n.prototype.getMousePosition=function(r){var a=r;return this.svg.getMouseCoordinates(a)},n}(G.Component)},vie=YA(G.forwardRef(function(t,e){var n=t.path,r=t.animate,a=t.draggable;return G.createElement("polyline",{ref:e,style:{cursor:a?"move":""},points:n.map(function(i){var o=i.x,s=i.y;return o+","+s}).join(" "),fill:"rgba(0,0,0,0)",stroke:"white",strokeWidth:"1.5",shapeRendering:"geometricPrecision",strokeDasharray:"3",strokeDashoffset:"0",vectorEffect:"non-scaling-stroke"},r&&G.createElement("animate",{attributeName:"stroke-dashoffset",values:"0;1000;0",dur:"100s",repeatCount:"indefinite"}))}));function xie(t){var e=t.path;return G.createElement("polygon",{style:{pointerEvents:"none",transform:"translate(-1px, -1px)"},points:e.map(function(n){var r=n.x,a=n.y;return r+","+a}).join(" "),fill:"rgba(0, 0, 0, 0.5)",fillRule:"evenodd",stroke:"null",shapeRendering:"geometricPrecision"})}var wie=YA(G.forwardRef(function(t,e){var n=t.x,r=t.y,a=t.onClickTouchEvent,i=t.draggable,o=t.style,s=o.cursor,l=s===void 0?i?"move":"default":s,u=HA(o,["cursor"]);return G.createElement("rect",{style:Lo({cursor:l},u),ref:e,x:n-10,y:r-10,onClick:function(c){c.stopPropagation(),c.preventDefault(),a(c)},onTouchEnd:function(c){c.stopPropagation(),c.preventDefault(),a(c)},width:"20px",height:"20",fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:"1.25",vectorEffect:"non-scaling-stroke"})})),Lr;(function(t){t.ADD="ADD",t.DELETE="DELETE",t.MODIFY="MODIFY",t.MOVE="MOVE",t.RESET="RESET",t.CHANGE="CHANGE"})(Lr||(Lr={}));function kie(t,e){var n=t.points.length;switch(e.type){case Lr.ADD:{if(t.closed)return[t,!1];if(n>0&&qb(t.points[n-1],e.payload)||n>1&&qb(t.points[n-2],e.payload))return[t,!1];var r=n>2&&qb(t.points[0],e.payload);return r?[{points:Tc([],t.points),closed:!0},!0]:[{points:Tc(Tc([],t.points,!0),[e.payload]),closed:!1},!0]}case Lr.DELETE:return[{points:Tc([],t.points.filter(function(u,c){return e.payload!==c})),closed:n>4&&t.closed},!0];case Lr.MODIFY:{var a=t.points[e.payload.index],i=a.x,o=a.y,s=t.points.map(function(u){var c=u.x,d=u.y;return c===i&&d===o?{x:e.payload.x,y:e.payload.y}:{x:c,y:d}});return[{points:s,closed:t.closed},!!(e.payload.x||e.payload.y)]}case Lr.MOVE:return[{points:t.points.map(function(u){var c=u.x,d=u.y;return{x:c+e.payload.x,y:d+e.payload.y}}),closed:t.closed},!!(e.payload.x||e.payload.y)];case Lr.CHANGE:{var l=!Kb(e.payload,t.points);return[{points:e.payload,closed:l?e.payload.length>2:t.closed},l]}case Lr.RESET:return[{points:[],closed:!1},!!t.points.length];default:return[t,!1]}}var Sie=function(t){GA(e,t);function e(n){var r=t.call(this,n)||this;return r.imageRef=G.createRef(),r.svgRef=G.createRef(),r.svg=new XA(function(){var a;return(a=r.svgRef)===null||a===void 0?void 0:a.current}),r.angles=[],r.path={points:[],closed:!1},r.lastEmittedPoints=[],r.lastUpdatedPoints=[],r.imgError=!1,r.setPathFromPropsOnMediaLoad=!0,r.hidePointer=function(){var a=r.path.points[r.path.points.length-1]||{x:0,y:0};r.setPointer(Lo({},a),!0)},r.onShapeDrag=function(a){var i=a.dx,o=a.dy,s=r.path.points.map(function(l){var u=l.x,c=l.y;return{x:u+i,y:c+o}});s.some(function(l){return r.svg.isAboveTheBorder(l)})||r.dispatchPathAction({type:Lr.MOVE,payload:{x:i,y:o}})},r.onPointDrag=function(a,i){var o=i.dx,s=i.dy,l=Lo({},r.path.points[a]);l.x+=o,l.y+=s,r.svg.isAboveTheBorder(l)||r.dispatchPathAction({type:Lr.MODIFY,payload:Lo(Lo({},l),{index:a})})},r.onPointClick=function(a){r.isLoaded()&&!r.props.disabled&&!r.path.closed&&r.dispatchPathAction({type:Lr.ADD,payload:r.path.points[a]})},r.onDragEnd=function(){r.checkIfPathUpdated(!1)},r.onMediaLoaded=function(a){r.setPathFromPropsOnMediaLoad&&(r.setPathStateFromProps(),r.setPathFromPropsOnMediaLoad=!1),r.imgError=!1,r.props.onImageLoad(a)},r.onMediaError=function(a){r.dispatchPathAction({type:Lr.RESET}),r.imgError=!0,r.props.onImageError(a)},r.onClickTouchEvent=function(a){if(r.isLoaded()&&!r.props.disabled){if(r.path.closed){a.target===r.svgRef.current&&r.dispatchPathAction({type:Lr.RESET});return}var i=r.getMousePosition(a)[0];r.svg.isAboveTheBorder(i)?r.hidePointer():r.dispatchPathAction({type:Lr.ADD,payload:Nc(i,1e3),pointer:i})}},r.onClick=function(a){r.onClickTouchEvent(a)},r.onTouchEnd=function(a){a.cancelable&&(a.preventDefault(),r.onClickTouchEvent(a)),r.hidePointer()},r.onMouseTouchMove=function(a){if(r.isLoaded()){var i=r.getMousePosition(a)[0];r.setPointer(i)}},r.onContextMenu=function(a){if(r.isLoaded()&&(a.preventDefault(),!r.props.disabled&&!r.path.closed)){var i=r.getMousePosition(a),o=i[0],s=i[1].index;s>-1?r.dispatchPathAction({type:Lr.DELETE,payload:s,pointer:o}):r.setPointer(o)}},r.state={path:{points:[],closed:!1},pointer:{x:n.viewBox.width/2,y:n.viewBox.width/2}},r}return e.prototype.render=function(){var n=this;return G.createElement("div",{className:hie({ReactFreeSelect__Component:!0,ReactFreeSelect__Closed:this.state.path.closed,ReactFreeSelect__Disabled:this.props.disabled}),style:Lo({display:"inline-block",position:"relative",margin:"0",padding:"0",fontSize:"0",cursor:this.props.disabled?"not-allowed":"default"},this.props.style)},G.createElement("img",{ref:this.imageRef,src:this.props.src,alt:this.props.imageAlt,crossOrigin:this.props.crossOrigin,style:this.props.imageStyle,onLoad:this.onMediaLoaded,onError:this.onMediaError}),G.createElement("svg",{ref:this.svgRef,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",userSelect:"none",touchAction:"none"},viewBox:"0 0 "+this.props.viewBox.width+" "+this.props.viewBox.height,onMouseMove:this.onMouseTouchMove,onTouchMove:this.onMouseTouchMove,onClick:this.onClick,onTouchEnd:this.onTouchEnd,onContextMenu:this.onContextMenu,onMouseLeave:this.hidePointer},G.createElement("rect",{visibility:"hidden"}),!!this.state.path.points.length&&G.createElement(xie,{path:this.getPolygonPoints()}),G.createElement(vie,{draggable:this.state.path.closed&&!this.props.disabled,onDrag:this.onShapeDrag,onDragEnd:this.onDragEnd,animate:!this.props.disabled,path:this.getPolylinePoints()}),this.getRoundedPoints().map(function(r,a){var i=r.x,o=r.y;return G.createElement(wie,{key:a,x:i,y:o,draggable:!n.props.disabled,style:{cursor:!a&&n.state.path.points.length>2&&!n.state.path.closed?"pointer":void 0},onDrag:function(s){var l=s.dx,u=s.dy;return n.onPointDrag(a,{dx:l,dy:u})},onDragEnd:n.onDragEnd,onClickTouchEvent:function(){return n.onPointClick(a)}})})))},e.prototype.componentDidUpdate=function(n){!n.disabled&&this.props.disabled&&!this.path.closed&&this.hidePointer(),n.src&&n.src!==this.props.src?this.dispatchPathAction({type:Lr.RESET}):Kb(n.value,this.props.value)||(this.isLoaded()?this.setPathStateFromProps():this.setPathFromPropsOnMediaLoad=!0)},e.prototype.convertPoints=function(n){var r=this.getAspectRatio();return this.svg.convertViewboxPointsToReal(n).map(function(a){var i=a.x,o=a.y;return{x:Math.round(i/r.x),y:Math.round(o/r.y)}})},e.prototype.checkIfPathUpdated=function(n){if(this.path.closed||n){var r=this.convertPoints(this.path.points);Kb(r,this.lastUpdatedPoints)||(this.emitOnComplete(r),this.lastUpdatedPoints=r.map(function(a){var i=a.x,o=a.y;return{x:i,y:o}}))}},e.prototype.emitOnChange=function(n){var r=n.points;if(this.props.onChange){var a=this.convertPoints(r);this.lastEmittedPoints=a,this.props.onChange(a)}},e.prototype.emitOnComplete=function(n){this.props.onComplete&&this.props.onComplete(n)},e.prototype.setPointer=function(n,r){var a=n.x,i=n.y;r===void 0&&(r=!1),(r||!this.props.disabled)&&this.setState({path:this.path,pointer:{x:a,y:i}})},e.prototype.dispatchPathAction=function(n){var r=this.path.closed,a=kie(this.path,n),i=a[0],o=a[1];i.points=i.points.map(function(s){return Nc(s,1e3)}),o&&(this.path=i,this.setState({pointer:n.pointer||this.path.points[this.path.points.length-1]||{x:0,y:0},path:i}),this.angles=yie(i.points),this.emitOnChange(i),[Lr.MODIFY,Lr.MOVE].includes(n.type)||this.checkIfPathUpdated(r))},e.prototype.isLoaded=function(){if(this.imgError||!this.svgRef.current)return!1;var n=this.svgRef.current;return!!(n.width.baseVal.value&&n.height.baseVal.value)},e.prototype.getAspectRatio=function(){return this.imageRef.current?{x:this.imageRef.current.clientWidth/this.imageRef.current.naturalWidth,y:this.imageRef.current.clientHeight/this.imageRef.current.naturalHeight}:{x:NaN,y:NaN}},e.prototype.setPathStateFromProps=function(){if(!Kb(this.lastEmittedPoints,this.props.value)){var n=this.getAspectRatio(),r=this.svg.convertRealPointsToViewbox(this.props.value.map(function(a){var i=a.x,o=a.y;return{x:i*n.x,y:o*n.y}}));this.dispatchPathAction({type:Lr.CHANGE,payload:r})}},e.prototype.getRoundedPoints=function(){return this.state.path.points.map(function(n){return Nc(n)})},e.prototype.getBorder=function(){return this.svg.getBorderPoints().map(function(n){return Nc(n)}).map(function(n){var r=n.x,a=n.y;return{x:r-1,y:a+1}})},e.prototype.getPolygonPoints=function(){var n=this.getRoundedPoints(),r=this.getBorder();return this.state.path.closed?Tc(Tc(Tc([],r,!0),n,!0),[n[0],r[0]]):r},e.prototype.getPolylinePoints=function(){var n=this.getRoundedPoints();return n.concat(this.state.path.closed?n[0]:Nc(this.state.pointer))},e.prototype.getMousePosition=function(n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!0);var i=this.svg.getMouseCoordinates(n);if(a){var o=navigator.platform.includes("Mac")?n.metaKey:n.ctrlKey,s=this.path.points[this.path.points.length-1];o&&s&&(n.shiftKey?i=gie(s,i,this.angles):i=mie(s,i,Math.PI/12))}var l=fie(this.path.points,i,10),u=l.point,c=l.index;return r&&c>-1&&(i=Lo({},u)),[i,{point:u,index:c}]},e.propTypes={value:ua.arrayOf(ua.exact({x:ua.number.isRequired,y:ua.number.isRequired})),style:ua.shape({}),viewBox:ua.exact({width:ua.number.isRequired,height:ua.number.isRequired}),disabled:ua.bool,onChange:ua.func,onComplete:ua.func,src:ua.string.isRequired,imageAlt:ua.string,crossOrigin:ua.string,imageStyle:ua.shape({}),onImageLoad:ua.func,onImageError:ua.func},e.defaultProps={value:[],style:{},imageStyle:{},viewBox:{width:1e3,height:1e3},disabled:!1,onImageError:Function.prototype,onImageLoad:Function.prototype},e}(G.Component);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cie=1e-7,Iie=1e-4;class p3{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Xb{refCount(e){return Ri("refCount")}incRef(e){return Ri("incRef")}timerAvailable(){return!0}time(e){return Ri("time")}read(e){return Ri("read")}readSync(e){return Ri("readSync")}readToGPU(e,n){return Ri("readToGPU")}numDataIds(){return Ri("numDataIds")}disposeData(e,n){return Ri("disposeData")}write(e,n,r){return Ri("write")}move(e,n,r,a,i){return Ri("move")}memory(){return Ri("memory")}floatPrecision(){return Ri("floatPrecision")}epsilon(){return this.floatPrecision()===32?Cie:Iie}dispose(){return Ri("dispose")}}function Ri(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QA(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,nl(t,e,n)}function Eie(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,nl(t,n,r),nl(e,n,r)}function du(t,e,n){return Math.max(t,Math.min(e,n))}function Yb(t){return t%2===0?t:t+1}function nl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ZA(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Tie(t,e){const n=Math.random();return e*n+(1-n)*t}function Nie(t,e){let n=0;for(let r=0;r<t.length;r++){const a=Number(t[r])-Number(e[r]);n+=a*a}return n}function j(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Kr(t,e,n=""){j(vn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function _c(t){j(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function rl(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||ca(t)&&!n)for(let r=0;r<t.length;++r)rl(t[r],e,n);else e.push(t);return e}function be(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function _ie(t){return t.length===0}function vn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Rc(t){return t%1===0}function Rie(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function Qb(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function $ie(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return QA(e),e}function $c(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function h3(t,e=a=>0,n,r=setTimeout){return new Promise((a,i)=>{let o=0;const s=()=>{if(t()){a();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r(s,l)};s()})}function f3(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function Xt(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),j(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),j(t.every(r=>Rc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function al(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:Xt(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(i!=null){if(i[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(i[o]==null||i[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Er(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Tr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function JA(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function eD(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function m3(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function ca(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function Zb(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function tD(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function cs(t){return typeof t=="string"||t instanceof String}function nD(t){return typeof t=="boolean"}function rD(t){return typeof t=="number"}function kp(t){return Array.isArray(t)?kp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":rD(t)?"float32":cs(t)?"string":nD(t)?"bool":"float32"}function pu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Jb(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ze(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function aD(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)a[o]=n[t+o]}else{const i=e[0],o=e.slice(1),s=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)a[l]=aD(t+l*s,o,n,r)}return a}function $i(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return aD(0,t,e,n)}function ev(t,e){const n=Xr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Xr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function g3(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return $i(t,new Float32Array(n));if(e==="int32")return $i(t,new Int32Array(n));if(e==="bool")return $i(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function y3(t){t.forEach(e=>{j(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Fo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Oc(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Mc(t){return t&&t.then&&typeof t.then=="function"}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iD="tfjsflags";class oD{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Oie,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Mc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);iD in e&&e[iD].split(",").forEach(n=>{const[r,a]=n.split(":");this.urlFlags[r]=Pie(r,a)})}}function Oie(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Mie(e,r[0],r[1]),r.join("="))),e}function Mie(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Pie(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function fe(){return b3}let b3=null;function Aie(t){b3=t}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let v3;function sD(){if(v3==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");v3=t}return v3}function Die(){const t=sD();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function x3(t,e){const n=Die();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const tv="Abs",rm="Acos",am="Acosh",Sp="Add",nv="AddN",rv="All",av="Any",iv="ArgMax",ov="ArgMin",im="Asin",om="Asinh",sm="Atan",lm="Atanh",um="Atan2",sv="AvgPool",w3="AvgPoolGrad",lv="AvgPool3D",k3="AvgPool3DGrad",uv="BatchMatMul",cv="BatchToSpaceND",dv="Bincount",Lie="BroadcastTo",pv="BroadcastArgs",cm="Cast",dm="Ceil",pm="ClipByValue",hv="Complex",fv="ComplexAbs",mv="Concat",gv="Conv2D",yv="Conv2DBackpropFilter",bv="Conv2DBackpropInput",vv="Conv3D",S3="Conv3DBackpropFilterV2",xv="Conv3DBackpropInputV2",hm="Cos",fm="Cosh",wv="Cumprod",kv="Cumsum",Sv="CropAndResize",Cv="DenseBincount",Iv="DepthToSpace",Ev="DepthwiseConv2dNative",Tv="DepthwiseConv2dNativeBackpropFilter",Nv="DepthwiseConv2dNativeBackpropInput",_v="Diag",Rv="Dilation2D",C3="Dilation2DBackpropInput",I3="Dilation2DBackpropFilter",mm="RealDiv",$v="Einsum",gm="Elu",E3="EluGrad",ym="Erf",bm="Equal",vm="Exp",Ov="ExpandDims",xm="Expm1",Mv="FFT",Pv="Fill",Av="FlipLeftRight",wm="Floor",km="FloorDiv",Dv="FusedBatchNorm",Lv="GatherV2",Fv="GatherNd",Sm="Greater",Cm="GreaterEqual",Im="Identity",Bv="IFFT",zv="Imag",Em="IsFinite",Tm="IsInf",Nm="IsNan",Uv="LeakyRelu",_m="Less",Rm="LessEqual",jv="LinSpace",$m="Log",Om="Log1p",Mm="LogicalAnd",Pm="LogicalNot",Am="LogicalOr",Fie="LogicalXor",Bie="LogSoftmax",zie="LowerBound",Vv="LRN",T3="LRNGrad",Wv="Max",Dm="Maximum",Gv="MaxPool",N3="MaxPoolGrad",Hv="MaxPool3D",_3="MaxPool3DGrad",qv="MaxPoolWithArgmax",Kv="Mean",Xv="Min",Lm="Minimum",Yv="MirrorPad",Fm="Mod",Qv="Multinomial",Bm="Multiply",Zv="Neg",zm="NotEqual",Jv="NonMaxSuppressionV3",ex="NonMaxSuppressionV4",tx="NonMaxSuppressionV5",nx="OnesLike",rx="OneHot",ax="Pack",ix="PadV2",Uie="Pool",Um="Pow",ox="Prelu",sx="Prod",lx="RaggedGather",ux="RaggedTensorToTensor",cx="Range",dx="Real",jm="Reciprocal",Vm="Relu",px="Reshape",hx="ResizeNearestNeighbor",R3="ResizeNearestNeighborGrad",fx="ResizeBilinear",$3="ResizeBilinearGrad",Wm="Relu6",mx="Reverse",Gm="Round",Hm="Rsqrt",gx="ScatterNd",yx="SearchSorted",bx="Select",qm="Selu",vx="Slice",Km="Sin",Xm="Sinh",Ym="Sign",Qm="Sigmoid",Zm="Softplus",Jm="Sqrt",xx="Sum",wx="SpaceToBatchND",kx="SplitV",Sx="Softmax",Cx="SparseFillEmptyRows",Ix="SparseReshape",Ex="SparseSegmentMean",Tx="SparseSegmentSum",Nx="SparseToDense",eg="SquaredDifference",O3="Square",_x="StridedSlice",Rx="StringNGrams",$x="StringSplit",Ox="StringToHashBucketFast",tg="Sub",ng="Tan",rg="Tanh",ag="Tile",Mx="TopK",Px="Transform",Cp="Transpose",Ax="Unique",Dx="Unpack",Lx="UnsortedSegmentSum",jie="UpperBound",Fx="ZerosLike",ig="Step",Bx="FromPixels",zx="RotateWithOffset",og="_FusedMatMul",sg="FusedConv2D",lg="FusedDepthwiseConv2D";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oi(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function Vie(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ip=x3("kernelRegistry",()=>new Map),ug=x3("gradRegistry",()=>new Map);function Ux(t,e){const n=P3(t,e);return Ip.get(n)}function M3(t){return ug.get(t)}function jx(t){const e=Ip.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,o]=a,[s]=i.split("_");s===t&&n.push(o)}return n}function Vx(t){const{kernelName:e,backendName:n}=t,r=P3(e,n);Ip.has(r)&&Oi(`The kernel '${e}' for backend '${n}' is already registered`),Ip.set(r,t)}function Wie(t){const{kernelName:e}=t;ug.has(e)&&fe().getBool("DEBUG")&&Oi(`Overriding the gradient for '${e}'`),ug.set(e,t)}function Gie(t,e){const n=P3(t,e);if(!Ip.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Ip.delete(n)}function Hie(t){if(!ug.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);ug.delete(t)}function qie(t,e){jx(t).forEach(n=>{const r=Object.assign({},n,{backendName:e});Vx(r)})}function P3(t,e){return`${e}_${t}`}var lD=On,to=null;try{to=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function On(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}On.prototype.__isLong__,Object.defineProperty(On.prototype,"__isLong__",{value:!0});function ui(t){return(t&&t.__isLong__)===!0}On.isLong=ui;var uD={},cD={};function Pc(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=cD[t],r)?r:(n=Mn(t,(t|0)<0?-1:0,!0),a&&(cD[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=uD[t],r)?r:(n=Mn(t,t<0?-1:0,!1),a&&(uD[t]=n),n))}On.fromInt=Pc;function no(t,e){if(isNaN(t))return e?Ac:ro;if(e){if(t<0)return Ac;if(t>=pD)return yD}else{if(t<=-hD)return ci;if(t+1>=hD)return gD}return t<0?no(-t,e).neg():Mn(t%Ep|0,t/Ep|0,e)}On.fromNumber=no;function Mn(t,e,n){return new On(t,e,n)}On.fromBits=Mn;var Wx=Math.pow;function A3(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ro;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return A3(t.substring(1),e,n).neg();for(var a=no(Wx(n,8)),i=ro,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var u=no(Wx(n,s));i=i.mul(u).add(no(l))}else i=i.mul(a),i=i.add(no(l))}return i.unsigned=e,i}On.fromString=A3;function Bo(t,e){return typeof t=="number"?no(t,e):typeof t=="string"?A3(t,e):Mn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}On.fromValue=Bo;var dD=65536,Kie=1<<24,Ep=dD*dD,pD=Ep*Ep,hD=pD/2,fD=Pc(Kie),ro=Pc(0);On.ZERO=ro;var Ac=Pc(0,!0);On.UZERO=Ac;var Tp=Pc(1);On.ONE=Tp;var mD=Pc(1,!0);On.UONE=mD;var D3=Pc(-1);On.NEG_ONE=D3;var gD=Mn(-1,2147483647,!1);On.MAX_VALUE=gD;var yD=Mn(-1,-1,!0);On.MAX_UNSIGNED_VALUE=yD;var ci=Mn(0,-2147483648,!1);On.MIN_VALUE=ci;var Pe=On.prototype;Pe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Pe.toNumber=function(){return this.unsigned?(this.high>>>0)*Ep+(this.low>>>0):this.high*Ep+(this.low>>>0)},Pe.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ci)){var e=no(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=no(Wx(t,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=i.sub(s.mul(a)).toInt()>>>0,u=l.toString(t);if(i=s,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},Pe.getHighBits=function(){return this.high},Pe.getHighBitsUnsigned=function(){return this.high>>>0},Pe.getLowBits=function(){return this.low},Pe.getLowBitsUnsigned=function(){return this.low>>>0},Pe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ci)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},Pe.isZero=function(){return this.high===0&&this.low===0},Pe.eqz=Pe.isZero,Pe.isNegative=function(){return!this.unsigned&&this.high<0},Pe.isPositive=function(){return this.unsigned||this.high>=0},Pe.isOdd=function(){return(this.low&1)===1},Pe.isEven=function(){return(this.low&1)===0},Pe.equals=function(t){return ui(t)||(t=Bo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},Pe.eq=Pe.equals,Pe.notEquals=function(t){return!this.eq(t)},Pe.neq=Pe.notEquals,Pe.ne=Pe.notEquals,Pe.lessThan=function(t){return this.comp(t)<0},Pe.lt=Pe.lessThan,Pe.lessThanOrEqual=function(t){return this.comp(t)<=0},Pe.lte=Pe.lessThanOrEqual,Pe.le=Pe.lessThanOrEqual,Pe.greaterThan=function(t){return this.comp(t)>0},Pe.gt=Pe.greaterThan,Pe.greaterThanOrEqual=function(t){return this.comp(t)>=0},Pe.gte=Pe.greaterThanOrEqual,Pe.ge=Pe.greaterThanOrEqual,Pe.compare=function(t){if(ui(t)||(t=Bo(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Pe.comp=Pe.compare,Pe.negate=function(){return!this.unsigned&&this.eq(ci)?ci:this.not().add(Tp)},Pe.neg=Pe.negate,Pe.add=function(t){ui(t)||(t=Bo(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,o=t.high&65535,s=t.low>>>16,l=t.low&65535,u=0,c=0,d=0,p=0;return p+=a+l,d+=p>>>16,p&=65535,d+=r+s,c+=d>>>16,d&=65535,c+=n+o,u+=c>>>16,c&=65535,u+=e+i,u&=65535,Mn(d<<16|p,u<<16|c,this.unsigned)},Pe.subtract=function(t){return ui(t)||(t=Bo(t)),this.add(t.neg())},Pe.sub=Pe.subtract,Pe.multiply=function(t){if(this.isZero())return ro;if(ui(t)||(t=Bo(t)),to){var e=to.mul(this.low,this.high,t.low,t.high);return Mn(e,to.get_high(),this.unsigned)}if(t.isZero())return ro;if(this.eq(ci))return t.isOdd()?ci:ro;if(t.eq(ci))return this.isOdd()?ci:ro;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(fD)&&t.lt(fD))return no(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,p=0,f=0;return f+=i*u,p+=f>>>16,f&=65535,p+=a*u,d+=p>>>16,p&=65535,p+=i*l,d+=p>>>16,p&=65535,d+=r*u,c+=d>>>16,d&=65535,d+=a*l,c+=d>>>16,d&=65535,d+=i*s,c+=d>>>16,d&=65535,c+=n*u+r*l+a*s+i*o,c&=65535,Mn(p<<16|f,c<<16|d,this.unsigned)},Pe.mul=Pe.multiply,Pe.divide=function(t){if(ui(t)||(t=Bo(t)),t.isZero())throw Error("division by zero");if(to){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?to.div_u:to.div_s)(this.low,this.high,t.low,t.high);return Mn(e,to.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ac:ro;var n,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Ac;if(t.gt(this.shru(1)))return mD;a=Ac}else{if(this.eq(ci)){if(t.eq(Tp)||t.eq(D3))return ci;if(t.eq(ci))return Tp;var i=this.shr(1);return n=i.div(t).shl(1),n.eq(ro)?t.isNegative()?Tp:D3:(r=this.sub(t.mul(n)),a=n.add(r.div(t)),a)}else if(t.eq(ci))return this.unsigned?Ac:ro;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=ro}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),s=o<=48?1:Wx(2,o-48),l=no(n),u=l.mul(t);u.isNegative()||u.gt(r);)n-=s,l=no(n,this.unsigned),u=l.mul(t);l.isZero()&&(l=Tp),a=a.add(l),r=r.sub(u)}return a},Pe.div=Pe.divide,Pe.modulo=function(t){if(ui(t)||(t=Bo(t)),to){var e=(this.unsigned?to.rem_u:to.rem_s)(this.low,this.high,t.low,t.high);return Mn(e,to.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},Pe.mod=Pe.modulo,Pe.rem=Pe.modulo,Pe.not=function(){return Mn(~this.low,~this.high,this.unsigned)},Pe.and=function(t){return ui(t)||(t=Bo(t)),Mn(this.low&t.low,this.high&t.high,this.unsigned)},Pe.or=function(t){return ui(t)||(t=Bo(t)),Mn(this.low|t.low,this.high|t.high,this.unsigned)},Pe.xor=function(t){return ui(t)||(t=Bo(t)),Mn(this.low^t.low,this.high^t.high,this.unsigned)},Pe.shiftLeft=function(t){return ui(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Mn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Mn(0,this.low<<t-32,this.unsigned)},Pe.shl=Pe.shiftLeft,Pe.shiftRight=function(t){return ui(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Mn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Mn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Pe.shr=Pe.shiftRight,Pe.shiftRightUnsigned=function(t){if(ui(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var n=this.low;return Mn(n>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?Mn(e,0,this.unsigned):Mn(e>>>t-32,0,this.unsigned)},Pe.shru=Pe.shiftRightUnsigned,Pe.shr_u=Pe.shiftRightUnsigned,Pe.toSigned=function(){return this.unsigned?Mn(this.low,this.high,!1):this},Pe.toUnsigned=function(){return this.unsigned?this:Mn(this.low,this.high,!0)},Pe.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Pe.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},Pe.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},On.fromBytes=function(t,e,n){return n?On.fromBytesLE(t,e):On.fromBytesBE(t,e)},On.fromBytesLE=function(t,e){return new On(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},On.fromBytesBE=function(t,e){return new On(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const bD=Wi(lD),Xie=Ck({__proto__:null,default:bD},[lD]);/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dc=bD||Xie;function cg(t){return Dc.fromString(t,!0,16)}const vD=cg("c3a5c85c97cb3127"),Lc=cg("b492b66fbe98f273"),$a=cg("9ae16a3b2f90404f");function L3(t){return t.xor(t.shru(47))}function xD(t,e,n){const r=t.slice(e,e+n);return Dc.fromBytes(Array.from(r),!0,!0)}function Cn(t,e){return xD(t,e,8)}function wD(t,e){return xD(t,e,4)}function Fr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function hu(t,e,n=cg("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function Yie(t,e,n,r,a,i){a=a.add(t),i=Fr(i.add(a).add(r),21);const o=a;return a=a.add(e),a=a.add(n),i=i.add(Fr(a,44)),[a.add(r),i.add(o)]}function Gx(t,e,n,r){return Yie(Cn(t,e),Cn(t,e+8),Cn(t,e+16),Cn(t,e+24),n,r)}function Qie(t,e=t.length){if(e>=8){const n=$a.add(e*2),r=Cn(t,0).add($a),a=Cn(t,e-8),i=Fr(a,37).mul(n).add(r),o=Fr(r,25).add(a).mul(n);return hu(i,o,n)}if(e>=4){const n=$a.add(e*2),r=wD(t,0);return hu(r.shl(3).add(e),wD(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),o=e+(a<<2);return L3($a.mul(i).xor(vD.mul(o))).mul($a)}return $a}function Zie(t,e=t.length){const n=$a.add(e*2),r=Cn(t,0).mul(Lc),a=Cn(t,8),i=Cn(t,e-8).mul(n),o=Cn(t,e-16).mul($a);return hu(Fr(r.add(a),43).add(Fr(i,30)).add(o),r.add(Fr(a.add($a),18)).add(i),n)}function Jie(t,e=t.length){const n=$a.add(e*2),r=Cn(t,0).mul($a),a=Cn(t,8),i=Cn(t,e-8).mul(n),o=Cn(t,e-16).mul($a),s=Fr(r.add(a),43).add(Fr(i,30)).add(o),l=hu(s,r.add(Fr(a.add($a),18)).add(i),n),u=Cn(t,16).mul(n),c=Cn(t,24),d=s.add(Cn(t,e-32)).mul(n),p=l.add(Cn(t,e-24)).mul(n);return hu(Fr(u.add(c),43).add(Fr(d,30)).add(p),u.add(Fr(c.add(r),18)).add(d),n)}function kD(t,e=t.length){const n=Dc.fromNumber(81,!0);if(e<=32)return e<=16?Qie(t,e):Zie(t,e);if(e<=64)return Jie(t,e);let r=n,a=n.mul(Lc).add(113),i=L3(a.mul($a).add(113)).mul($a),o=[Dc.UZERO,Dc.UZERO],s=[Dc.UZERO,Dc.UZERO];r=r.mul($a).add(Cn(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Fr(r.add(a).add(o[0]).add(Cn(t,l+8)),37).mul(Lc),a=Fr(a.add(o[1]).add(Cn(t,l+48)),42).mul(Lc),r=r.xor(s[1]),a=a.add(o[0]).add(Cn(t,l+40)),i=Fr(i.add(s[0]),33).mul(Lc),o=Gx(t,l,o[1].mul(Lc),r.add(s[0])),s=Gx(t,l+32,i.add(s[1]),a.add(Cn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=Lc.add(i.and(255).shl(1));return l=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Fr(r.add(a).add(o[0]).add(Cn(t,l+8)),37).mul(d),a=Fr(a.add(o[1]).add(Cn(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(Cn(t,l+40))),i=Fr(i.add(s[0]),33).mul(d),o=Gx(t,l,o[1].mul(d),r.add(s[0])),s=Gx(t,l+32,i.add(s[1]),a.add(Cn(t,l+16))),[i,r]=[r,i],hu(hu(o[0],s[0],d).add(L3(a).mul(vD)).add(i),hu(o[1],s[1],d).add(r),d)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function il(t,e){return e==="string"?ds(t):fu([t],e)}function eoe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function fu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=rl(t)),fe().getBool("DEBUG")&&JA(t,e),eoe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function di(){return fe().platform.now()}function toe(t,e){return fe().platform.fetch(t,e)}function ds(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function ol(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}const noe=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:vn,assert:j,assertNonNegativeIntegerDimensions:y3,assertNonNull:_c,assertShapesMatch:Kr,bytesFromStringArray:tD,bytesPerElement:Zb,checkConversionForErrors:JA,clamp:du,computeStrides:Ze,createScalarValue:il,createShuffledIndices:$ie,decodeString:ol,distSquared:Nie,encodeString:ds,fetch:toe,fingerPrint64:kD,flatten:rl,getArrayFromDType:Tr,getTypedArrayFromDType:Er,hasEncodingLoss:m3,hexToLong:cg,indexToLoc:Oc,inferDtype:kp,inferFromImplicitShape:f3,isBoolean:nD,isFunction:pu,isInt:Rc,isNumber:rD,isPromise:Mc,isScalarShape:_ie,isString:cs,isTypedArray:ca,isValidDtype:eD,locToIndex:Fo,makeOnesTypedArray:ev,makeZerosNestedTypedArray:g3,makeZerosTypedArray:Xr,nearestDivisor:Jb,nearestLargerEven:Yb,now:di,parseAxisParam:Xt,randUniform:Tie,repeatedTry:h3,rightPad:$c,shuffle:QA,shuffleCombo:Eie,sizeFromShape:be,sizeToSquarishShape:Qb,squeezeShape:al,sum:ZA,swap:nl,tanh:Rie,toNestedArray:$i,toTypedArray:fu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class roe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new ioe)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let o;const s=di();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();o=Promise.resolve({kernelMs:di()-s})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const u=a[l];u.data().then(c=>{aoe(c,u.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),a,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],i,l[2])})})}}function aoe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class ioe{logKernelProfile(e,n,r,a,i,o){const s=typeof a=="number"?$c(`${a}ms`,9):a.error,l=$c(e,25),u=n.rank,c=n.size,d=$c(n.shape.toString(),14);let p="";for(const f in i){const g=i[f];if(g!=null){const y=g.shape||n.shape,v=y.length;p+=`${f}: ${v}D ${v>0?y:""} `}}console.log(`%c${l}	%c${s}	%c${u}D ${d}	%c${c}	%c${p}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ooe(t,e,n){const r={},a={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const p=c[d];let f=!1;for(let g=0;g<e.length;g++)if(r[p.id]){u.outputs.forEach(y=>r[y.id]=!0),f=!0,a[u.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const p in c)i[c[p].id]=!0,o[u.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const u=t[l];if(a[u.id]&&o[u.id]){const c={};for(const p in u.inputs){const f=u.inputs[p];r[f.id]&&(c[p]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,s.push(d)}}return s}function soe(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const s=i.gradient(o);for(const l in i.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const u=n(()=>s[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!vn(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const SD=20,dg=3,F3=7;function loe(t,e,n,r){const a=Ze(e),i=uoe(t,e,n,a),o=e.length,s=Hx(t,e,n,a,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(u=>"    "+u).join(`
`)),l.join(`
`)}function uoe(t,e,n,r){const a=be(e),i=r[r.length-1],o=new Array(i).fill(0),s=e.length,l=n==="complex64"?hg(t):t;if(s>1)for(let u=0;u<a/i;u++){const c=u*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],pg(l[c+d],0,n).length)}return o}function pg(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(F3))} + ${parseFloat(t[1].toFixed(F3))}j`:cs(t)?r=`'${t}'`:n==="bool"?r=CD(t):r=parseFloat(t.toFixed(F3)).toString(),$c(r,e)}function CD(t){return t===0?"false":"true"}function Hx(t,e,n,r,a,i=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=hg(t);return[pg(y[0],0,n)]}return n==="bool"?[CD(t[0])]:[t[0].toString()]}if(l===1){if(s>SD){const y=dg*o;let v=Array.from(t.slice(0,y)),b=Array.from(t.slice((s-dg)*o,s*o));return n==="complex64"&&(v=hg(v),b=hg(b)),["["+v.map((x,w)=>pg(x,a[w],n)).join(", ")+", ..., "+b.map((x,w)=>pg(x,a[s-dg+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?hg(t):Array.from(t)).map((y,v)=>pg(y,a[v],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*o,p=[];if(s>SD){for(let y=0;y<dg;y++){const v=y*d,b=v+d;p.push(...Hx(t.slice(v,b),u,n,c,a,!1))}p.push("...");for(let y=s-dg;y<s;y++){const v=y*d,b=v+d;p.push(...Hx(t.slice(v,b),u,n,c,a,y===s-1))}}else for(let y=0;y<s;y++){const v=y*d,b=v+d;p.push(...Hx(t.slice(v,b),u,n,c,a,y===s-1))}const f=l===2?",":"";p[0]="["+p[0]+f;for(let y=1;y<p.length-1;y++)p[y]=" "+p[y]+f;let g=`,
`;for(let y=2;y<l;y++)g+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":g),p}function hg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Nr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=be(e),r!=null){const a=r.length;j(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Tr(n,this.size),this.strides=Ze(e)}set(e,...n){n.length===0&&(n=[0]),j(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return zo().makeTensor(this.values,this.shape,this.dtype)}}let zo=null,Np=null;function coe(t){zo=t}function doe(t){Np=t}class Hn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=be(e),this.strides=Ze(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Np.buffer(this.shape,this.dtype,e)}bufferSync(){return Np.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return $i(this.shape,e,this.dtype==="complex64")}arraySync(){return $i(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=zo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>ol(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),zo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=zo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>ol(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await zo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(zo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Np.print(this,e)}clone(){return this.throwIfDisposed(),Np.clone(this)}toString(e=!1){const n=this.dataSync();return loe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Np.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),zo().makeVariable(this,e,n,r)}}Object.defineProperty(Hn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function poe(){return x3("Tensor",()=>Hn)}poe();class fg extends Hn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!vn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);zo().disposeTensor(this),this.dataId=e.dataId,zo().incRef(this,null)}dispose(){zo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(fg,Symbol.hasInstance,{value:t=>t instanceof Hn&&t.assign!=null&&t.assign instanceof Function});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var B3;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(B3||(B3={}));var z3;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(z3||(z3={}));var U3;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(U3||(U3={}));var j3;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(j3||(j3={}));var V3;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(V3||(V3={}));const hoe={float32:j3,int32:z3,bool:U3,complex64:V3};function Xa(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return hoe[t][e]}function qx(t){return Xa(t,"int32")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Xa(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function ID(t,e){j(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function foe(t,e){return e.some(n=>n.id===t.id)}function W3(t){const e=[];return ED(t,e,new Set),e}function ED(t,e,n){if(t==null)return;if(t instanceof Hn){e.push(t);return}if(!moe(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),ED(i,e,n))}}function moe(t){return Array.isArray(t)||typeof t=="object"}const goe=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:ID,getTensorsInContainer:W3,isTensorInList:foe,makeTypesMatch:qn},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G3(t){return t.kernelName!=null}class TD{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class mh{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new TD}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Oi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new roe(this.backendInstance),!0}setupRegisteredKernels(){jx(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){jx(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof Xb)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Oi(`Initialization of backend ${e} failed`),Oi(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Oi(`Initialization of backend ${e} failed`),Oi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return mh.nextTensorId++}nextVariableId(){return mh.nextVariableId++}clone(e){const n=te.runKernel(Im,{x:e}),r={x:e},a=o=>({x:()=>{const s="float32",l={x:o},u={dtype:s};return te.runKernel(cm,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,Ux(e,this.backendName)==null)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const u=G3(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(G3(e)){const{kernelName:g,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const b=Ux(g,this.backendName);j(b!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),s=()=>{const x=this.backend.numDataIds();l=b.kernelFunc({inputs:y,attrs:v,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,x,w);const S=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(g,y,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:g}=e,y=v=>{a&&(r=v.map(b=>this.keep(this.clone(b))))};s=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,y));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,b),b}}const{inputs:c,attrs:d}=e,p=G3(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(f=this.profiler.profileKernel(u,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),a&&this.addTapeNode(u,c,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(g=>c[g]!=null?c[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,n,r){const a=M3(e);if(a!=null){const i=a.inputsToSave||[],o=a.outputsToSave||[];let s;a.saveAllInputs?(j(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(u=>n[u])):s=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return s.concat(l)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&cs(e[0])&&(i=e.map(l=>ds(l)));const o=a.write(i,n,r),s=new Hn(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){const l=this.state.tensorInfo.get(o),u=tD(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,o=new Hn(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new fg(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Zb(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof fg||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Zb(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=M3(e);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=u=>(u=u.map((c,d)=>{if(c==null){const p=r[d],f=Xr(p.size,p.dtype);return this.makeTensor(f,p.shape,p.dtype)}return c}),a(u.length>1?u:u[0],i,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=W3(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(j(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));j(i instanceof Hn,()=>"The result y returned by f() must be a tensor.");const o=ooe(this.state.activeTape,n,i);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[i.id]=r??yoe(i.shape),soe(s,o,u=>this.tidy(u),boe);const l=n.map(u=>s[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return j(pu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{j(n.every(s=>s instanceof Hn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((s,l)=>{a[l]=s});const i=(s,l)=>(r=e(...n,l),j(r.value instanceof Hn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),j(pu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];j(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),j(c.every(p=>p instanceof Hn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((p,f)=>{d[f]=()=>p}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=di(),r=await this.backend.time(e);return r.wallMs=di()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new TD;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}mh.nextTensorId=0,mh.nextVariableId=0;function yoe(t){const e=ev(be(t),"float32");return te.makeTensor(e,t,"float32")}function ND(){const t=sD();if(t._tfengine==null){const e=new oD(t);t._tfengine=new mh(e)}return Aie(t._tfengine.ENV),coe(()=>t._tfengine),t._tfengine}const te=ND();function boe(t,e){const n={a:t,b:e};return te.runKernel(Sp,n)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function voe(){return typeof navigator<"u"&&navigator!=null}let H3;function xoe(t){H3=t}function q3(t){if(H3!==void 0)return H3;if(t||voe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function K3(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const woe=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:K3,isMobile:q3,mockIsMobile:xoe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pi=fe();pi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),pi.registerFlag("IS_BROWSER",()=>K3()),pi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),pi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),pi.registerFlag("PROD",()=>!1),pi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>pi.getBool("DEBUG")),pi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),pi.registerFlag("IS_TEST",()=>!1),pi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),pi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),pi.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),pi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),pi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ps(t,e){let n=t;if(ca(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||ca(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&_D(t,r,[]),r}function _D(t,e,n){if(n=n||[],!Array.isArray(t)&&!ca(t)){j(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}j(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),j(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)_D(t[a],r,n.concat(a))}function RD(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function z(t,e,n,r="numeric"){if(t instanceof Hn)return RD(r,t.dtype,e,n),t;let a=kp(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),RD(r,a,e,n),t==null||!ca(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const s=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${s}'`)}const i=ps(t,a);!ca(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?fu(t,a):rl(t,[],!0);return te.makeTensor(o,i,a)}function mg(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>z(a,`${e}[${i}]`,n,r))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const X3="__op";function ee(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+X3;const a=(...i)=>{te.startScope(n);try{const o=r(...i);return Mc(o)&&console.error("Cannot return a Promise inside of tidy."),te.endScope(o),o}catch(o){throw te.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function koe(t,e){const n=z(t,"real","complex"),r=z(e,"imag","complex");Kr(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return te.runKernel(hv,a)}const sl=ee({complex_:koe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mu(t,e,n,r){if(r==null&&(r=kp(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ca(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){y3(e);const a=be(e),i=be(n);j(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==be(e.slice(o)):!0;j(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!ca(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?fu(t,r):rl(t,[],!0),te.makeTensor(t,e,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uo(t,e,n){const r=ps(t,n);return mu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y3={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Kx=4;async function Soe(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<a.length;++o){const s=a[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const u={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const p=await l.bytes(),f=p.reduce((v,b)=>v+b.length,0)+Kx*p.length,g=new Uint8Array(f);let y=0;for(let v=0;v<p.length;v++){const b=p[v],x=new Uint8Array(new Uint32Array([b.length]).buffer);g.set(x,y),y+=Kx,g.set(b,y),y+=b.length}d(g)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:Coe(i),specs:n}}function $D(t,e){const n={};let r,a=0;for(const i of e){const o=i.name,s=i.dtype,l=i.shape,u=be(l);let c;if("quantization"in i){const d=i.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${i.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${i.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const p=Y3[d.dtype],f=t.slice(a,a+u*p),g=d.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(s==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){c=new Float32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=v*d.scale+d.min}}else if(d.dtype==="float16")r===void 0&&(r=Roe()),c=r(g);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(s==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);c=new Int32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=Math.round(v*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*p}else if(s==="string"){const d=be(i.shape);c=[];for(let p=0;p<d;p++){const f=new Uint32Array(t.slice(a,a+Kx))[0];a+=Kx;const g=new Uint8Array(t.slice(a,a+f));c.push(g),a+=f}}else{const d=Y3[s],p=t.slice(a,a+u*d);if(s==="float32")c=new Float32Array(p);else if(s==="int32")c=new Int32Array(p);else if(s==="bool")c=new Uint8Array(p);else if(s==="complex64"){c=new Float32Array(p);const f=new Float32Array(c.length/2),g=new Float32Array(c.length/2);for(let b=0;b<f.length;b++)f[b]=c[b*2],g[b]=c[b*2+1];const y=Uo(f,l,"float32"),v=Uo(g,l,"float32");n[o]=sl(y,v),y.dispose(),v.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*d}s!=="complex64"&&(n[o]=Uo(c,l,s))}return n}function Coe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const Q3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function OD(t){return Q3?Buffer.byteLength(t):new Blob([t]).size}function Ioe(t){if(Q3)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Eoe(t){if(Q3){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Z3(t){if(t.length===1)return t[0];let e=0;t.forEach(a=>{e+=a.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(a=>{n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function MD(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function PD(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function AD(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}async function J3(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),AD(t,n,r)}function gg(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:OD(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:OD(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function DD(t){const e=[];for(const n of t)e.push(...n.weights);return e}function Toe(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Noe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function _oe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Roe(){const t=Toe(),e=Noe(),n=_oe();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];i[o]=l}return new Float32Array(a)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Kn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Kn.instance==null&&(Kn.instance=new Kn),Kn.instance}static registerSaveRouter(e){Kn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Kn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Kn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Kn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Kn.getInstance().loadRouters:Kn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&a.push(o)}),a}}const $oe=t=>Kn.registerSaveRouter(t),Ooe=t=>Kn.registerLoadRouter(t),Moe=t=>Kn.getSaveHandlers(t),Poe=(t,e)=>Kn.getLoadHandlers(t,e);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const e4="tensorflowjs",t4=1,Fc="models_store",gu="model_info_store";function LD(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function n4(t){const e=t.result;e.createObjectStore(Fc,{keyPath:"modelPath"}),e.createObjectStore(gu,{keyPath:"modelPath"})}class Bc{constructor(e){if(this.indexedDB=LD(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(e4,t4);i.onupgradeneeded=()=>n4(i),i.onsuccess=()=>{const o=i.result;if(n==null){const s=o.transaction(Fc,"readonly"),l=s.objectStore(Fc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=u=>(o.close(),a(l.error)),s.oncomplete=()=>o.close()}else{const s=gg(n),l=o.transaction(gu,"readwrite");let u=l.objectStore(gu);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:s});let d;c.onsuccess=()=>{d=o.transaction(Fc,"readwrite");const p=d.objectStore(Fc).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s});p.onsuccess=()=>r({modelArtifactsInfo:s}),p.onerror=f=>{u=l.objectStore(gu);const g=u.delete(this.modelPath);g.onsuccess=()=>(o.close(),a(p.error)),g.onerror=y=>(o.close(),a(p.error))}},c.onerror=p=>(o.close(),a(c.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>a(i.error)})}}Bc.URL_SCHEME="indexeddb://";const FD=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Bc.URL_SCHEME)?Aoe(t.slice(Bc.URL_SCHEME.length)):null;Kn.registerSaveRouter(FD),Kn.registerLoadRouter(FD);function Aoe(t){return new Bc(t)}function Doe(t){return t.startsWith(Bc.URL_SCHEME)?t.slice(Bc.URL_SCHEME.length):t}class Loe{constructor(){this.indexedDB=LD()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(e4,t4);r.onupgradeneeded=()=>n4(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(gu,"readonly"),o=i.objectStore(gu).getAll();o.onsuccess=()=>{const s={};for(const l of o.result)s[l.modelPath]=l.modelArtifactsInfo;e(s)},o.onerror=s=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=Doe(e),new Promise((n,r)=>{const a=this.indexedDB.open(e4,t4);a.onupgradeneeded=()=>n4(a),a.onsuccess=()=>{const i=a.result,o=i.transaction(gu,"readwrite"),s=o.objectStore(gu),l=s.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),d=()=>{u=i.transaction(Fc,"readwrite");const p=u.objectStore(Fc).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=f=>r(l.error)};c.onsuccess=d,c.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ll="/",_p="tensorflowjs_models",BD="info",Foe="model_topology",Boe="weight_specs",zoe="weight_data",Uoe="model_metadata";function zD(t){return{info:[_p,t,BD].join(ll),topology:[_p,t,Foe].join(ll),weightSpecs:[_p,t,Boe].join(ll),weightData:[_p,t,zoe].join(ll),modelMetadata:[_p,t,Uoe].join(ll)}}function UD(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function joe(t){const e=t.split(ll);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ll)}function Voe(t){return t.startsWith(zc.URL_SCHEME)?t.slice(zc.URL_SCHEME.length):t}class zc{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=zD(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=gg(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Ioe(e.weightData));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch{throw UD(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const s=JSON.parse(i);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Eoe(o),n}}zc.URL_SCHEME="localstorage://";const jD=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(zc.URL_SCHEME)?Woe(t.slice(zc.URL_SCHEME.length)):null;Kn.registerSaveRouter(jD),Kn.registerLoadRouter(jD);function Woe(t){return new zc(t)}class Goe{constructor(){j(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),j(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=_p+ll,r=ll+BD;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const o=joe(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=Voe(e);const n=zD(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return UD(n),r}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rp="://";class Ba{constructor(){this.managers={}}static getInstance(){return Ba.instance==null&&(Ba.instance=new Ba),Ba.instance}static registerManager(e,n){j(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Rp)&&(e=e.slice(0,e.indexOf(Rp))),j(e.length>0,()=>"scheme must not be an empty string.");const r=Ba.getInstance();j(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ba.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ba.getInstance().managers)}}function Xx(t){if(t.indexOf(Rp)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ba.getSchemes().join(",")}`);return{scheme:t.split(Rp)[0],path:t.split(Rp)[1]}}async function VD(t,e,n=!1){j(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Kn.getLoadHandlers(t);j(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),j(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Kn.getSaveHandlers(e);j(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),j(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],s=Xx(t).scheme,l=Xx(t).path,u=s===Xx(t).scheme,c=await a.load();n&&u&&await Ba.getManager(s).removeModel(l);const d=await o.save(c);return n&&!u&&await Ba.getManager(s).removeModel(l),d.modelArtifactsInfo}async function Hoe(){const t=Ba.getSchemes(),e={};for(const n of t){const r=await Ba.getManager(n).listModels();for(const a in r){const i=n+Rp+a;e[i]=r[a]}}return e}async function qoe(t){const e=Xx(t);return Ba.getManager(e.scheme).removeModel(e.path)}async function Koe(t,e){return VD(t,e,!1)}async function Xoe(t,e){return VD(t,e,!0)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yoe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(!window||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new Yoe);try{Ba.registerManager(zc.URL_SCHEME,new Goe)}catch{}try{Ba.registerManager(Bc.URL_SCHEME,new Loe)}catch{}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qoe={importFetch:()=>require("node-fetch")};let r4;class Zoe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(r4==null&&(r4=Qoe.importFetch()),r4(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new Zoe);/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function St(t,e="float32",n){return e=e||"float32",y3(t),new Nr(t,e,n)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Joe(t,e){const n=z(t,"x","cast");if(!eD(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return te.runKernel(cm,r,a)}const Bn=ee({cast_:Joe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ese(t){const e={x:z(t,"x","clone","string_or_numeric")};return te.runKernel(Im,e)}const ul=ee({clone_:ese});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a4(t,e=!1){console.log(t.toString(e))}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/ND();const tse={buffer:St,cast:Bn,clone:ul,print:a4};doe(tse);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nse="model",rse=".json",ase=".weights.bin";function WD(t){return new Promise(e=>setTimeout(e)).then(t)}class od{constructor(e){if(!fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(od.URL_SCHEME)&&(e=e.slice(od.URL_SCHEME.length)),(e==null||e.length===0)&&(e=nse),this.modelJsonFileName=e+rse,this.weightDataFileName=e+ase}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=PD(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await WD(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=n,await WD(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:gg(e)}}}}od.URL_SCHEME="downloads://";class ise{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const s=J3(i,l=>this.loadWeights(l));e(s)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,a[o]));return Promise.all(i).then(o=>[n,Z3(o)])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=o=>{const s=o.target.result;r(s)},i.onerror=o=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>MD(i.name)),a={};for(const i of e)i.paths.forEach(o=>{const s=MD(o);if(n.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);a[o]=this.weightsFiles[r.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const ose=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(od.URL_SCHEME)?sse(t.slice(od.URL_SCHEME.length)):null;Kn.registerSaveRouter(ose);function sse(t="model"){return new od(t)}function lse(t){return new ise(t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GD(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let a=0;const i=l=>(l.then(u=>{const c=n+ ++a/t.length*(r-n);return e(c),u}),l);function o(l){j(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,u){j(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),j(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),j(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function HD(t,e){e==null&&(e={});const n=e.fetchFunc==null?fe().platform.fetch:e.fetchFunc,r=t.map(u=>n(u,e.requestInit,{isBinary:!0})),a=0,i=.5,o=(e.onProgress==null?await Promise.all(r):await GD(r,e.onProgress,a,i)).map(u=>u.arrayBuffer());return e.onProgress==null?await Promise.all(o):await GD(o,e.onProgress,.5,1)}async function use(t,e="",n,r){return qD(a=>HD(a,{requestInit:r}))(t,e,n)}function qD(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((f,g)=>{let y=0;f.weights.forEach(v=>{const b="quantization"in v?v.quantization.dtype:v.dtype,x=Y3[b]*be(v.shape),w=()=>{a[g]=!0,i[g]==null&&(i[g]=[]),i[g].push({manifestEntry:v,groupOffset:y,sizeBytes:x})};r!=null?r.forEach((S,C)=>{S===v.name&&(w(),o[C]=!0)}):w(),s.push(v.name),y+=x})}),!o.every(f=>f)){const f=r.filter((g,y)=>!o[y]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const l=a.reduce((f,g,y)=>(g&&f.push(y),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(g=>{const y=n+(n.endsWith("/")?"":"/")+g;u.push(y)})});const c=await t(u),d={};let p=0;return l.forEach(f=>{const g=e[f].paths.length;let y=0;for(let w=0;w<g;w++)y+=c[p+w].byteLength;const v=new ArrayBuffer(y),b=new Uint8Array(v);let x=0;for(let w=0;w<g;w++){const S=new Uint8Array(c[p+w]);b.set(S,x),x+=S.byteLength}i[f].forEach(w=>{const S=v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),C=$D(S,[w.manifestEntry]);for(const E in C)d[E]=C[E]}),p+=g}),d}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cse="application/octet-stream",dse="application/json";class i4{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(j(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=fe().platform.fetch,j(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&j(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=PD(e,r);n.body.append("model.json",new Blob([JSON.stringify(a)],{type:dse}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:cse}),"model.weights.bin");const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:gg(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return J3(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=pse(n),i=this.weightPathPrefix||r,o=DD(e),s=[],l=[];for(const c of e)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):s.push(i+d+a);this.weightUrlConverter&&s.push(...await Promise.all(l));const u=await HD(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,Z3(u)]}}i4.URL_SCHEME_REGEX=/^https?:\/\//;function pse(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function o4(t){return t.match(i4.URL_SCHEME_REGEX)!=null}const KD=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>o4(r)):n=o4(t),n)return s4(t,e)}return null};Kn.registerSaveRouter(KD),Kn.registerLoadRouter(KD);function s4(t,e){return new i4(t,e)}function hse(t,e){return s4(t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class l4{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class XD{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class fse{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function mse(t,e,n,r){const a=arguments;return new fse(YD(...a))}function YD(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new l4(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new l4({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new l4({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function gse(t){return new XD(t)}function yse(t){return new XD(t)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const u4=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:lse,browserHTTPRequest:hse,concatenateArrayBuffers:Z3,copyModel:Koe,decodeWeights:$D,encodeWeights:Soe,fromMemory:mse,fromMemorySync:YD,getLoadHandlers:Poe,getModelArtifactsForJSON:J3,getModelArtifactsForJSONSync:AD,getModelArtifactsInfoForJSON:gg,getSaveHandlers:Moe,getWeightSpecs:DD,http:s4,isHTTPScheme:o4,listModels:Hoe,loadWeights:use,moveModel:Xoe,registerLoadRouter:Ooe,registerSaveRouter:$oe,removeModel:qoe,weightsLoaderFactory:qD,withSaveHandler:gse,withSaveHandlerSync:yse},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bse(t,e,n=!1,r=!1){let a=z(t,"a","matMul"),i=z(e,"b","matMul");[a,i]=qn(a,i);const o={a,b:i},s={transposeA:n,transposeB:r};return te.runKernel(uv,o,s)}const ln=ee({matMul_:bse});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vse(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:z(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return te.runKernel(rx,i,o)}const Yx=ee({oneHot_:vse});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xse(){fe().set("PROD",!0)}function wse(){fe().set("DEBUG",!0)}function kse(){fe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Sse(t){fe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Cse(){te.disposeVariables()}function cl(){return te}function Ise(){return te.memory()}function Ese(t){return te.profile(t)}function Ht(t,e){return te.tidy(t,e)}function da(t){W3(t).forEach(e=>e.dispose())}function hs(t){return te.keep(t)}function Tse(t){return te.time(t)}function Nse(t){return te.setBackend(t)}function _se(){return te.ready()}function Rse(){return te.backendName}function $se(t){te.removeBackend(t)}function Ose(t){return te.findBackend(t)}function Mse(t){return te.findBackendFactory(t)}function c4(t,e,n=1){return te.registerBackend(t,e,n)}function Pse(){return te.backend}function Ase(t,e){fe().setPlatform(t,e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dse(t){const e={input:z(t,"input","imag")};return te.runKernel(zv,e)}const yg=ee({imag_:Dse});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lse(t){const e={x:z(t,"x","neg")};return te.runKernel(Zv,e)}const fs=ee({neg_:Lse});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fse(t){const e={input:z(t,"input","real")};return te.runKernel(dx,e)}const $p=ee({real_:Fse});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bse(t,e,n){const r=z(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),j(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{j(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?Ht(()=>{let o=$p(r),s=yg(r);return o=te.runKernel(Cp,{x:o},i),s=te.runKernel(Cp,{x:s},i),n&&(s=fs(s)),sl(o,s)}):te.runKernel(Cp,a,i)}const bg=ee({transpose_:Bse});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zse(t,e,n){const r=z(t,"labels","confusionMatrix"),a=z(e,"predictions","confusionMatrix");j(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),j(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),j(a.rank===1,()=>`Expected the rank of predictions to be 1, but got ${a.rank}`),j(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),j(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=Yx(Bn(r,"int32"),n),o=Yx(Bn(a,"int32"),n),s=bg(i),l=ln(s,o);return Bn(l,"int32")}const Use=ee({confusionMatrix_:zse});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jse=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:Use},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uc(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function d4(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function zt(t,e){const n=[],r=Math.max(t.length,e.length);for(let a=0;a<r;a++){let i=t[t.length-a-1];i==null&&(i=1);let o=e[e.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else if(i!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else n.unshift(i)}return n}const Vse=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:zt,getBroadcastDims:Uc,getReductionAxes:d4},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p4(t,e,n){if(_c(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=ps(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return mu(t,e,r,n)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let jc;function QD(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Ux(Bx,te.backendName)!=null){const p={pixels:t},f={numChannels:e};return te.runKernel(Bx,p,f)}const[l,u]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let c;if(o)c=t.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=t.data;else if(i||a||s){if(jc==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")jc=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else jc=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});jc.canvas.width=l,jc.canvas.height=u,jc.drawImage(t,0,0,l,u),c=jc.getImageData(0,0,l,u).data}let d;if(e===4)d=new Int32Array(c);else{const p=l*u;d=new Int32Array(p*e);for(let f=0;f<p;f++)for(let g=0;g<e;++g)d[f*e+g]=c[f*4+g]}return p4(d,[u,l,e],"int32")}function Wse(t){return t!=null&&t.data instanceof Uint8Array}function Gse(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function Hse(t){return t!=null&&t.width!==0&&t.height!==0}function qse(t){return Gse()&&!(t instanceof ImageBitmap)&&Hse(t)&&!Wse(t)}async function Kse(t,e=3){let n=null;if(fe().getBool("WRAP_TO_IMAGEBITMAP")&&qse(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return QD(n,e)}async function ZD(t,e){let n=z(t,"img","toPixels");if(!(t instanceof Hn)){const u=n;n=Bn(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),s=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const c=[0,0,0,255];for(let p=0;p<i;p++){const f=o[u*i+p];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*s,c[1]=f*s,c[2]=f*s):c[p]=f*s}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){e.width=a,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,a,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const JD=ee({fromPixels_:QD}),Xse=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:JD,fromPixelsAsync:Kse,toPixels:ZD},Symbol.toStringTag,{value:"Module"}));function Qx(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(be(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let o=1;for(let d=0;d<a.length-1;++d)o*=a[d];const s=t.shape,l=a.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=s[d],l.push(s[d]);const c=[...Ze(t.shape).map(d=>d/u),1].slice(0,i);return[l,o,u,c]}const Yse=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:Qx},Symbol.toStringTag,{value:"Module"}));function h4(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==t[o+r])throw new Error(i+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function f4(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}h4(n,e,t)}function Op(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=a;d<i;++d)o*=n[d];const s=a<1?1:a,l=be(e.shape)/s,u=[...Ze(n.slice(0,a)),1],c=be(n);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const Qse=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Op,validateInput:f4,validateUpdateShape:h4},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const m4=-2,Zse=-1;function g4(t,e,n){const r=t.shape.length;j(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),j(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)j(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function Jse(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function y4(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function e8(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function t8(t,e,n){return n<=t?n:n-(e-1)}function n8(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function ele(t,e,n,r,a,i,o,s,l){const u=t.length;let c=new Array(u),d=new Array(u),p=new Array(u);if(e.length&&n>0){const f=e[0],g=n+1;c=r8(o,f,g,r,t),d=a8(s,f,g,a,t),p=e8(i,f,g,t)}else for(let f=0;f<u;f++)c[f]=o8(o,r,i,t,f,l),d[f]=s8(s,a,i,t,f,l),p[f]=i8(i,f,l);return{begin:c,end:d,strides:p}}function r8(t,e,n,r,a){const i=[...a],o=n8(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{const l=t8(e,n,s);let u=r[l];t&1<<l&&(u=0),i[s]=u}return i}function a8(t,e,n,r,a){const i=[...a],o=n8(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const l=t8(e,n,s);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[s]=u}for(let s=0;s<i.length;s++){const l=a[s];i[s]<0&&(i[s]+=l),i[s]=du(0,i[s],a[s])}return i}function i8(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function o8(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=du(0,o,l-1),o}function s8(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),s>0?o=du(0,o,l):o=du(-1,o,l-1),o}function b4(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function v4(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function x4(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(o=>{j(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((o,s)=>o>=0?o:(j(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,i]}function w4(t,e,n,r,a,i,o,s,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)c&&1<<x&s&&d.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};tle(d,p);let f=!0,g=!0,y=!0;const v=[],b=[];for(let x=0;x<t.length;++x){if(p.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(p.shrinkAxisMask&1<<x),S=t[x];if(S===-1){v.push(w?1:-1);continue}const C=[p.beginMask&1<<x,p.endMask&1<<x],E=[p.strides[x]>0?0:-1,p.strides[x]>0?S:S-1];if(w&&p.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&p.strides[x]===1;const _=!!(p.beginMask&1<<x&&p.endMask&1<<x);if(p.beginValid&&p.endValid){if(w){const L=p.begin[x]<0?S+p.begin[x]:p.begin[x];if(p.begin[x]=L,p.end[x]=p.begin[x]+1,L<0||L>=S)throw Error(`slice index ${p.begin[x]} of dimension ${x} out of bounds.`)}else p.begin[x]=l8(p.begin[x],0,p.strides[x],S,C,E),p.end[x]=l8(p.end[x],1,p.strides[x],S,C,E);const P=p.strides[x]===1&&p.begin[x]===0&&p.end[x]===S;f=f&&P,g=g&&(x===0&&p.strides[x]===1||P)}else f=f&&p.strides[x]===1&&_,g=g&&(x===0&&p.strides[x]===1||_);let N,M=!1;if(p.beginValid&&p.endValid?(N=p.end[x]-p.begin[x],M=!0):w?(N=1,M=!0):_&&S>=0&&(p.strides[x]<0?N=-S:N=S,M=!0),M){let P;N===0||N<0!=p.strides[x]<0?P=0:P=Math.trunc(N/p.strides[x])+(N%p.strides[x]!==0?1:0),v.push(P)}else v.push(-1)}for(let x=0;x<p.finalShapeGatherIndices.length;++x){const w=p.finalShapeGatherIndices[x];w>=0?b.push(v[w]):w===m4&&b.push(1)}return{finalShapeSparse:b.filter((x,w)=>p.finalShapeGatherIndices[w]!==m4),finalShape:b,isIdentity:f,sliceDim0:g,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}function tle(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(m4),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Zse),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function l8(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const u8=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:g4,computeFlatOffset:v4,computeOutShape:y4,getNormalizedAxes:ele,isSliceContinous:b4,maskToAxes:Jse,parseSliceParams:x4,sliceInfo:w4,startForAxis:o8,startIndicesWithElidedDims:r8,stopForAxis:s8,stopIndicesWithElidedDims:a8,stridesForAxis:i8,stridesWithElidedDims:e8},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class c8{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Au{constructor(){this.classNameMap={}}static getMap(){return Au.instance==null&&(Au.instance=new Au),Au.instance}static register(e){Au.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function yu(t){j(t.className!=null,()=>"Class being registered does not have the static className property defined."),j(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),j(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Au.register(t)}const nle=Object.freeze(Object.defineProperty({__proto__:null,Serializable:c8,SerializationMap:Au,registerClass:yu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rle=.001,d8=.1;function ale(t,e,n){return n==null&&(n=k4()),S4(t,e,(r,a)=>C4(r,a,n))}function k4(){return te.backend.floatPrecision()===32?rle:d8}function S4(t,e,n){let r=!0;if((ca(t)||ca(e))&&(r=!1),ca(t)&&ca(e)&&(r=!0),r){const o=t.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=ps(t),s=ps(e);if(!vn(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const a=ca(t)?t:rl(t),i=ca(e)?e:rl(e);if(a.length!==i.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${i.length}.
Actual:   ${a}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const s=a[o],l=i[o];if(!n(s,l))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${l}.
Actual:   ${a}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function ile(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function ole(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return cs(t)||cs(t[0])||cs(e)||cs(e[0])?S4(t,n,(r,a)=>r==a):S4(t,e,(r,a)=>C4(r,a,0))}function sle(t,e,n){if(n==null&&(n=k4()),!C4(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function C4(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function lle(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function ule(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error(`Expected ArrayBuffer value at ${a} to be ${r[a]} but got ${n[a]} instead`)}function p8(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?p8(n):t[e]=ds(n)}return t}function cle(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function dle(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const ple=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:d8,createVideoElement:cle,encodeStrings:p8,expectArrayBuffersEqual:ule,expectArraysClose:ale,expectArraysEqual:ole,expectNumbersClose:sle,expectPromiseToFail:ile,expectValuesInRange:lle,play:dle,testEpsilon:k4},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const hle="3.21.0";/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fle(t,e){let n=z(t,"a","add"),r=z(e,"b","add");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(Sp,a)}const ft=ee({add_:fle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mle(t,e){let n=z(t,"a","floorDiv"),r=z(e,"b","floorDiv");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(km,a)}const I4=ee({floorDiv_:mle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gle(t,e){let n=z(t,"a","div"),r=z(e,"b","div");if([n,r]=qn(n,r),n.dtype==="int32"&&r.dtype==="int32")return I4(n,r);const a={a:n,b:r},i={};return te.runKernel(mm,a,i)}const In=ee({div_:gle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yle(t,e){let n=z(t,"a","mul"),r=z(e,"b","mul");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(Bm,a)}const De=ee({mul_:yle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ble(t){const e=z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return te.runKernel(fv,n)}else{const n={x:e};return te.runKernel(tv,n)}}const hi=ee({abs_:ble});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vle(t){const e={x:z(t,"x","acos")};return te.runKernel(rm,e)}const h8=ee({acos_:vle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xle(t){const e={x:z(t,"x","acosh")};return te.runKernel(am,e)}const f8=ee({acosh_:xle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wle(t){j(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),j(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>z(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!vn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return te.runKernel(nv,r)}const m8=ee({addN_:wle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kle(t,e=null,n=!1){const r={x:z(t,"x","all","bool")},a={axis:e,keepDims:n};return te.runKernel(rv,r,a)}const g8=ee({all_:kle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sle(t,e=null,n=!1){const r={x:z(t,"x","any","bool")},a={axis:e,keepDims:n};return te.runKernel(av,r,a)}const y8=ee({any_:Sle});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cle(t,e=0){const n={x:z(t,"x","argMax")},r={axis:e};return te.runKernel(iv,n,r)}const b8=ee({argMax_:Cle});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ile(t,e=0){const n={x:z(t,"x","argMin")},r={axis:e};return te.runKernel(ov,n,r)}const v8=ee({argMin_:Ile});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ele(t){const e={x:z(t,"x","asin")};return te.runKernel(im,e)}const x8=ee({asin_:Ele});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tle(t){const e={x:z(t,"x","asinh")};return te.runKernel(om,e)}const w8=ee({asinh_:Tle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nle(t){const e={x:z(t,"x","atan")};return te.runKernel(sm,e)}const k8=ee({atan_:Nle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _le(t,e){let n=z(t,"a","atan2"),r=z(e,"b","atan2");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(um,a)}const S8=ee({atan2_:_le});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rle(t){const e={x:z(t,"x","atanh")};return te.runKernel(lm,e)}const C8=ee({atanh_:Rle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vg(t,e,n,r,a="NHWC",i){const o=t[3],s=[...e,o],l=pl(a);return Br(t,s,n,i,r,null,null,l)}function ao(t,e,n,r,a,i,o="channelsLast"){const[s,l]=Zx(e);let u;if(o==="channelsLast")u=[s,l,t[3],t[3]];else if(o==="channelsFirst")u=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Br(t,u,n,r,a,i,!1,o)}function dl(t,e,n,r,a,i,o="NDHWC"){const[s,l,u]=T4(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[s,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[s,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return bu(t,c,n,r,a,!1,d,i)}function Br(t,e,n,r,a,i,o=!1,s="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d]=t;else if(s==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[p,f,,g]=e,[y,v]=Zx(n),[b,x]=Zx(r),w=Mp(p,b),S=Mp(f,x),{padInfo:C,outHeight:E,outWidth:_}=Mle(a,u,c,y,v,w,S,i,s),N=o?g*d:g;let M;return s==="channelsFirst"?M=[l,N,E,_]:s==="channelsLast"&&(M=[l,E,_,N]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:E,outWidth:_,outChannels:N,padInfo:C,strideHeight:y,strideWidth:v,filterHeight:p,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:x,inShape:t,outShape:M,filterShape:e}}function bu(t,e,n,r,a,i=!1,o="channelsLast",s){let[l,u,c,d,p]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d,p]=t;else if(o==="channelsFirst")[l,p,u,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,g,y,,v]=e,[b,x,w]=T4(n),[S,C,E]=T4(r),_=Mp(f,S),N=Mp(g,C),M=Mp(y,E),{padInfo:P,outDepth:L,outHeight:U,outWidth:B}=Ple(a,u,c,d,b,x,w,_,N,M,s),K=i?v*p:v;let X;return o==="channelsFirst"?X=[l,K,L,U,B]:o==="channelsLast"&&(X=[l,L,U,B,K]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:L,outHeight:U,outWidth:B,outChannels:K,padInfo:P,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:f,filterHeight:g,filterWidth:y,effectiveFilterDepth:_,effectiveFilterHeight:N,effectiveFilterWidth:M,dilationDepth:S,dilationHeight:C,dilationWidth:E,inShape:t,outShape:X,filterShape:e}}function $le(t,e,n,r,a){r==null&&(r=E4(t,e,n));const i=t[0],o=t[1],s=Vc((i-e+2*r)/n+1,a),l=Vc((o-e+2*r)/n+1,a);return[s,l]}function Ole(t,e,n,r,a,i){a==null&&(a=E4(t,e,r));const o=t[0],s=t[1],l=t[2],u=Vc((o-e+2*a)/r+1,i),c=Vc((s-e+2*a)/r+1,i),d=Vc((l-e+2*a)/r+1,i);return[u,c,d,n]}function E4(t,e,n,r=1){const a=Mp(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function Zx(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function T4(t){return typeof t=="number"?[t,t,t]:t}function Mp(t,e){return e<=1?t:t+(t-1)*(e-1)}function Mle(t,e,n,r,a,i,o,s,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=$le([e,n],i,r,t,s);c=p[0],d=p[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/a);const p=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(d-1)*a+o-n),g=Math.floor(p/2),y=p-g,v=Math.floor(f/2),b=f-v;u={top:g,bottom:y,left:v,right:b,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/a);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];u={top:p,bottom:f,left:g,right:y,type:p===0&&f===0&&g===0&&y===0?"VALID":"EXPLICIT"},c=Vc((e-i+p+f)/r+1,s),d=Vc((n-o+g+y)/a+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function Ple(t,e,n,r,a,i,o,s,l,u,c){let d,p,f,g;if(typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=Ole([e,n,r,1],s,1,a,t,c);p=y[0],f=y[1],g=y[2]}else if(t==="same"){p=Math.ceil(e/a),f=Math.ceil(n/i),g=Math.ceil(r/o);const y=(p-1)*a+s-e,v=(f-1)*i+l-n,b=(g-1)*o+u-r,x=Math.floor(y/2),w=y-x,S=Math.floor(v/2),C=v-S,E=Math.floor(b/2),_=b-E;d={top:S,bottom:C,left:E,right:_,front:x,back:w,type:"SAME"}}else if(t==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/a),f=Math.ceil((n-l+1)/i),g=Math.ceil((r-u+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:f,outWidth:g}}function Vc(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function xg(t){const[e,n,r]=Zx(t);return e===1&&n===1&&r===1}function pa(t,e){return xg(t)||xg(e)}function pl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function io(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")j(Rc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{j(Rc(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ale(t,e){const n={x:z(t,"x","reshape","string_or_numeric")},r={shape:e};return te.runKernel(px,n,r)}const Se=ee({reshape_:Ale});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dle(t,e,n,r,a){const i=z(t,"x","avgPool","float32"),o=1;j(pa(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),j(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),io("avgPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let d=te.runKernel(sv,u,c);return d=Bn(d,i.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const N4=ee({avgPool_:Dle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lle(t,e,n,r,a,i="NDHWC"){const o=z(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),j(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),io("avgPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let d=te.runKernel(lv,u,c);return d=Bn(d,s.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const I8=ee({avgPool3d_:Lle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fle(t,e=0){j(t.length>=1,()=>"Pass at least one tensor to concat");const n=mg(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return ul(n[0]);const r=n,a={axis:e};return te.runKernel(mv,r,a)}const ha=ee({concat_:Fle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ble(t){const e={x:z(t,"x","sigmoid","float32")};return te.runKernel(Qm,e)}const Wc=ee({sigmoid_:Ble});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zle(t,e,n){const r=z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return te.runKernel(vx,a,i)}const xn=ee({slice_:zle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ule(t){const e={x:z(t,"x","tanh","float32")};return te.runKernel(rg,e)}const Jx=ee({tanh_:Ule});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jle(t,e,n,r,a,i){const o=z(t,"forgetBias","basicLSTMCell"),s=z(e,"lstmKernel","basicLSTMCell"),l=z(n,"lstmBias","basicLSTMCell"),u=z(r,"data","basicLSTMCell"),c=z(a,"c","basicLSTMCell"),d=z(i,"h","basicLSTMCell"),p=ha([u,d],1),f=ln(p,s),g=ft(f,l),y=g.shape[0],v=g.shape[1]/4,b=[y,v],x=xn(g,[0,0],b),w=xn(g,[0,v],b),S=xn(g,[0,v*2],b),C=xn(g,[0,v*3],b),E=ft(De(Wc(x),Jx(w)),De(c,Wc(ft(o,S)))),_=De(Jx(E),Wc(C));return[E,_]}const E8=ee({basicLSTMCell_:jle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vle(t,e,n){const r=z(t,"x","batchToSpaceND"),a=e.reduce((s,l)=>s*l);j(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),j(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),j(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},o={blockShape:e,crops:n};return te.runKernel(cv,i,o)}const _4=ee({batchToSpaceND_:Vle});function Wle(t){let e;return t.rank===0||t.rank===1?e=Se(t,[1,1,1,t.size]):t.rank===2?e=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gle(t,e,n,r,a,i){i==null&&(i=.001);const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;r!=null&&(c=z(r,"offset","batchNorm")),j(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:Wle(o),scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:i},f=te.runKernel(Dv,d,p);return Se(f,o.shape)}const wg=ee({batchNorm_:Gle});function Hle(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),j(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),j(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),j(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&j(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&j(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),wg(o,s,l,c,u,i)}const T8=ee({batchNorm2d_:Hle});function qle(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),j(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),j(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),j(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&j(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&j(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),wg(o,s,l,c,u,i)}const N8=ee({batchNorm3d_:qle});function Kle(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),j(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),j(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),j(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&j(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&j(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),wg(o,s,l,c,u,i)}const _8=ee({batchNorm4d_:Kle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xle(t,e,n){const r=z(t,"x","bincount"),a=z(e,"weights","bincount");j(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),j(n>=0,()=>`size must be non-negative, but got ${n}.`),j(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},o={size:n};return te.runKernel(dv,i,o)}const R4=ee({bincount_:Xle});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yle(t,e){const n=z(t,"s0","broadcastArgs","int32"),r=z(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return te.runKernel(pv,a)}const R8=ee({broadcastArgs_:Yle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qle(t,e){let n=z(t,"broadcastTo","x");const r=n.shape;if(e.some(l=>!(l>0)||l%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=Se(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return ul(n);const o={x:n},s={reps:i};return te.runKernel(ag,o,s)}const Pp=ee({broadcastTo_:Qle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zle(t){const e={x:z(t,"x","ceil","float32")};return te.runKernel(dm,e)}const $8=ee({ceil_:Zle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ap(t,e,n){const r={shape:t,value:e,dtype:n};return te.runKernel(Pv,{},r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jle(t,e,n){const r=z(t,"x","clipByValue");if(j(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Ap(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return te.runKernel(pm,a,i)}const O8=ee({clipByValue_:Jle});function eue(t){return ha(t,0)}const M8=ee({concat1d_:eue});function tue(t,e){return ha(t,e)}const P8=ee({concat2d_:tue});function nue(t,e){return ha(t,e)}const A8=ee({concat3d_:nue});function rue(t,e){return ha(t,e)}const D8=ee({concat4d_:rue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aue(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","conv2d","float32"),l=z(e,"filter","conv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),j(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),io("conv2d",r,o);const d=a==="NHWC"?u.shape[3]:u.shape[1];j(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),j(pa(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=te.runKernel(gv,p,f);return c?Se(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const kg=ee({conv2d_:aue});function iue(t,e,n,r,a="NWC",i=1,o){const s=z(t,"x","conv1d"),l=z(e,"filter","conv1d");let u=s,c=!1;s.rank===2&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1]])),j(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),j(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),io("conv1d",r,o),j(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),j(pa(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),j(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const d=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=Se(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=kg(p,d,[1,n],r,"NHWC",[1,i],o);return c?Se(f,[f.shape[2],f.shape[3]]):Se(f,[f.shape[0],f.shape[2],f.shape[3]])}const L8=ee({conv1d_:iue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oue(t,e,n,r,a,i="NHWC",o){j(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,u=!1;e.rank===3&&(u=!0,l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),j(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),j(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),j(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];j(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),j(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),io("conv2dDerInput",a,o);const p={dy:l,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},g=te.runKernel(bv,p,f);return u?Se(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const F8=ee({conv2DBackpropInput_:oue});function sue(t,e,n,r,a,i){const o=z(t,"x","conv2dTranspose"),s=z(e,"filter","conv2dTranspose");return F8(n,o,s,r,a,"NHWC",i)}const B8=ee({conv2dTranspose_:sue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lue(t,e,n,r,a="NDHWC",i=[1,1,1]){const o=z(t,"x","conv3d"),s=z(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),j(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),j(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),j(pa(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),j(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},p=te.runKernel(vv,c,d);return u?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const z8=ee({conv3d_:lue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uue(t,e,n,r,a){j(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,s=!1;e.rank===4&&(s=!0,o=Se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];j(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),j(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),j(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),j(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),j(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},p=te.runKernel(xv,c,d);return s?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const cue=ee({conv3DBackpropInput_:uue});function due(t,e,n,r,a){const i=z(t,"x","conv3dTranspose"),o=z(e,"filter","conv3dTranspose");return cue(n,i,o,r,a)}const U8=ee({conv3dTranspose_:due});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pue(t){const e={x:z(t,"x","cos","float32")};return te.runKernel(hm,e)}const j8=ee({cos_:pue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hue(t){const e={x:z(t,"x","cosh","float32")};return te.runKernel(fm,e)}const V8=ee({cosh_:hue});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fue(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(wv,a,i)}const W8=ee({cumprod_:fue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mue(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(kv,a,i)}const G8=ee({cumsum_:mue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gue(t,e,n,r=!1){const a=z(t,"x","denseBincount"),i=z(e,"weights","denseBincount");j(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),j(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),j(n>=0,()=>`size must be non-negative, but got ${n}.`),j(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const o={x:a,weights:i},s={size:n,binaryOutput:r};return te.runKernel(Cv,o,s)}const H8=ee({denseBincount_:gue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yue(t,e,n="NHWC"){const r=z(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];j(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),j(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),j(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),j(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return te.runKernel(Iv,s,l)}const q8=ee({depthToSpace_:yue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bue(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","depthwiseConv2d","float32"),l=z(e,"filter","depthwiseConv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),j(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=a==="NHWC"?u.shape[3]:u.shape[1];j(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),io("depthwiseConv2d",r,o);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=te.runKernel(Ev,p,f);return c?Se(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const e2=ee({depthwiseConv2d_:bue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vue(t){const e={x:z(t,"x","diag")};return te.runKernel(_v,e)}const K8=ee({diag_:vue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xue(t,e,n,r,a=[1,1],i="NHWC"){const o=z(t,"x","dilation2d"),s=z(e,"filter","dilation2d");j(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),j(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),j(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:s},d={strides:n,pad:r,dilations:a},p=te.runKernel(Rv,c,d);return u?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const X8=ee({dilation2d_:xue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wue(t,e){let n=z(t,"a","equal","string_or_numeric"),r=z(e,"b","equal","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(bm,a)}const $4=ee({equal_:wue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kue(t,e,n){const r=z(e,"a","where"),a=z(n,"b","where"),i=z(t,"condition","where","bool"),o=zt(zt(i.shape,r.shape),a.shape),s=Pp(i,o),l=Pp(r,o),u=Pp(a,o),c={condition:s,t:l,e:u};return te.runKernel(bx,c)}const Gc=ee({where_:kue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sue(t){const e={x:z(t,"x","zerosLike")};return te.runKernel(Fx,e)}const fi=ee({zerosLike_:Sue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cue(t,e){let n=z(t,"a","div"),r=z(e,"b","div");[n,r]=qn(n,r);const a=In(n,r),i=fi(a),o=$4(r,i);return Gc(o,i,a)}const Y8=ee({divNoNan_:Cue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iue(t,e){const n=z(t,"t1","dot"),r=z(e,"t2","dot");j((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(j(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const o=Se(n,[1,-1]),s=Se(r,[-1,1]),l=ln(o,s);return Se(l,[])}else if(n.rank===1&&r.rank===2){const o=Se(n,[1,-1]),s=Se(r,[r.shape[0],r.shape[1]]),l=ln(o,s);return Se(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Se(r,[-1,1]),s=ln(n,o);return Se(s,[s.size])}else{const o=Se(r,[r.shape[0],r.shape[1]]);return ln(n,o)}}const Q8=ee({dot_:Iue});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Eue(t,...e){const n=e.map((a,i)=>z(a,`tensors${i}`,"einsum")),r={equation:t};return te.runKernel($v,n,r)}const Z8=ee({einsum_:Eue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tue(t){const e={x:z(t,"x","elu","float32")};return te.runKernel(gm,e)}const O4=ee({elu_:Tue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nue(t){let e=z(t,"x","erf");j(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Bn(e,"float32"));const n={x:e};return te.runKernel(ym,n)}const J8=ee({erf_:Nue});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M4(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function eL(t,e,n){const r=t.length+e.length,a=[];let i=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?a.push(t[i++]):a.push(e[o++]);return a}function Yr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function _r(t,e){const n=e.map(r=>1);return eL(t,n,e)}function Qr(t,e,n){j(M4(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function dr(t,e){if(M4(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Sg(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function pr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _ue(t,e=null,n=!1){const r={x:z(t,"x","max")},a={reductionIndices:e,keepDims:n};return te.runKernel(Wv,r,a)}const Hc=ee({max_:_ue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rue(t,e=null,n=!1){const r={x:z(t,"x","min")},a={axis:e,keepDims:n};return te.runKernel(Xv,r,a)}const t2=ee({min_:Rue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ue(t,e){let n=z(t,"base","pow"),r=z(e,"exp","pow");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(Um,a)}const Dp=ee({pow_:$ue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ft(t,e){if((ca(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ca(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return mu(t,[],[],e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oue(t){const e={x:z(t,"x","sqrt","float32")};return te.runKernel(Jm,e)}const ms=ee({sqrt_:Oue});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mue(t){const e=z(t,"x","square"),n={};return te.runKernel("Square",{x:e},n)}const oo=ee({square_:Mue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pue(t,e=null,n=!1){let r=z(t,"x","sum");r.dtype==="bool"&&(r=Bn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(xx,a,i)}const En=ee({sum_:Pue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Aue(t,e="euclidean",n=null,r=!1){t=z(t,"x","norm");const a=tL(t,e,n);let i=a.shape;if(r){const o=Xt(n,t.shape);i=_r(a.shape,o)}return Se(a,i)}function tL(t,e,n=null){if(t.rank===0)return hi(t);if(t.rank!==1&&n===null)return tL(Se(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return En(hi(t),n);if(e===1/0)return Hc(hi(t),n);if(e===-1/0)return t2(hi(t),n);if(e==="euclidean"||e===2)return ms(En(Dp(hi(t),Ft(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Hc(En(hi(t),n[0]),n[1]-1);if(e===1/0)return Hc(En(hi(t),n[1]),n[0]);if(e===-1/0)return t2(En(hi(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ms(En(oo(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Cg=ee({norm_:Aue});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Due(t,e=null,n=!1){return Cg(t,"euclidean",e,n)}const nL=ee({euclideanNorm_:Due});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lue(t){const e={x:z(t,"x","exp")};return te.runKernel(vm,e)}const vu=ee({exp_:Lue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fue(t,e=0){const n=z(t,"x","expandDims","string_or_numeric");j(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return te.runKernel(Ov,r,a)}const hl=ee({expandDims_:Fue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bue(t){const e={x:z(t,"x","expm1")};return te.runKernel(xm,e)}const rL=ee({expm1_:Bue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zue(t,e){const n=z(t,"x","tile","string_or_numeric");j(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return te.runKernel(ag,r,a)}const Lp=ee({tile_:zue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uue(t,e,n,r="float32"){e==null&&(e=t);const a=St([t,e],r),i=t<=e?t:e;for(let s=0;s<i;++s)a.set(1,s,s);const o=Se(a.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Lp(hl(o,0),[n[0],1,1]);if(n.length===2)return Lp(hl(hl(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Lp(hl(hl(hl(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const P4=ee({eye_:Uue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jue(t){const e={x:z(t,"x","floor","float32")};return te.runKernel(wm,e)}const A4=ee({floor_:jue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vue(t,e,n=0,r=0){const a=z(t,"x","gather"),i=z(e,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return te.runKernel(Lv,o,s)}const D4=ee({gather_:Vue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wue(t,e){let n=z(t,"a","greater","string_or_numeric"),r=z(e,"b","greater","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Sm,a)}const Ig=ee({greater_:Wue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gue(t,e){let n=z(t,"a","greaterEqual","string_or_numeric"),r=z(e,"b","greaterEqual","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Cm,a)}const L4=ee({greaterEqual_:Gue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hue(t){const e={x:z(t,"x","isFinite")};return te.runKernel(Em,e)}const aL=ee({isFinite_:Hue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function que(t){const e={x:z(t,"x","isInf")};return te.runKernel(Tm,e)}const iL=ee({isInf_:que});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kue(t){const e={x:z(t,"x","isNaN")};return te.runKernel(Nm,e)}const oL=ee({isNaN_:Kue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xue(t,e=.2){const n={x:z(t,"x","leakyRelu")},r={alpha:e};return te.runKernel(Uv,n,r)}const F4=ee({leakyRelu_:Xue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yue(t,e){let n=z(t,"a","less","string_or_numeric"),r=z(e,"b","less","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(_m,a)}const sL=ee({less_:Yue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Que(t,e){let n=z(t,"a","lessEqual","string_or_numeric"),r=z(e,"b","lessEqual","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Rm,a)}const n2=ee({lessEqual_:Que});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lL(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return te.runKernel(jv,{},r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zue(t,e=5,n=1,r=1,a=.5){const i=z(t,"x","localResponseNormalization");j(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),j(Rc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,s=!1;i.rank===3&&(s=!0,o=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:a},c=te.runKernel(Vv,l,u);return s?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const uL=ee({localResponseNormalization_:Zue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jue(t){const e={x:z(t,"x","log","float32")};return te.runKernel($m,e)}const Fp=ee({log_:Jue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ece(t){const e={x:z(t,"x","log1p")};return te.runKernel(Om,e)}const B4=ee({log1p_:ece});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tce(t){return j(pu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=z(e,"x","tf.grad","string_or_numeric"),a=n!=null?z(n,"dy","tf.grad"):null;return te.tidy(()=>{const{value:i,grads:o}=te.gradients(()=>t(r),[r],a);return a!=null&&Kr(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),r2(o),o[0]})}}function nce(t){return j(pu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{j(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=mg(e,"args","tf.grads","string_or_numeric"),a=n!=null?z(n,"dy","tf.grads"):null;return te.tidy(()=>{const{value:i,grads:o}=te.gradients(()=>t(...r),r,a);return a!=null&&Kr(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),r2(o),o})}}function rce(t){return j(pu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{j(e instanceof Hn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),j(n==null||n instanceof Hn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:a}=te.gradients(()=>t(e),[e],n);return r2(r),{grad:r[0],value:a}}}function ace(t){return j(pu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{j(Array.isArray(e)&&e.every(a=>a instanceof Hn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),j(n==null||n instanceof Hn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=te.gradients(()=>t(...e),e,n);return n!=null&&Kr(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),r2(r.grads),r}}function cL(t,e){j(pu(t),()=>"The f passed in variableGrads(f) must be a function"),j(e==null||Array.isArray(e)&&e.every(u=>u instanceof fg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in te.registeredVariables)e.push(te.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,a=e.length;e=e.filter(u=>u.trainable),j(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:o,grads:s}=te.gradients(t,e,null,i);j(s.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),j(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{s[c]!=null&&(l[u.name]=s[c])}),r?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function gs(t){return te.customGrad(t)}function r2(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ice(t){const e={x:z(t,"x","softplus")};return te.runKernel(Zm,e)}const z4=ee({softplus_:ice});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oce(t){const e=z(t,"x","logSigmoid");return gs(n=>({value:fs(z4(fs(n))),gradFunc:r=>De(r,Wc(fs(n)))}))(e)}const dL=ee({logSigmoid_:oce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sce(t,e){let n=z(t,"a","sub"),r=z(e,"b","sub");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(tg,a)}const Pt=ee({sub_:sce});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lce(t,e=-1){const n=z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return gs((r,a)=>{const i=Hc(r,e,!0),o=Pt(r,i),s=Pt(Bn(o,"float32"),Fp(En(vu(o),e,!0)));return a([s]),{value:s,gradFunc:(l,u)=>{const[c]=u,d=!0,p=vu(c);return Pt(l,De(En(l,e,d),p))}}})(n)}const pL=ee({logSoftmax_:lce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uce(t,e=null,n=!1){const r=z(t,"x","logSumExp"),a=Xt(e,r.shape),i=Hc(r,a,!0),o=Pt(r,i),s=vu(o),l=En(s,a),u=Fp(l),c=ft(Se(i,u.shape),u);if(n){const d=_r(c.shape,a);return Se(c,d)}return c}const U4=ee({logSumExp_:uce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cce(t,e){const n=z(t,"a","logicalAnd","bool"),r=z(e,"b","logicalAnd","bool");zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Mm,a)}const Eg=ee({logicalAnd_:cce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dce(t){const e={x:z(t,"x","logicalNot","bool")};return te.runKernel(Pm,e)}const j4=ee({logicalNot_:dce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pce(t,e){const n=z(t,"a","logicalOr","bool"),r=z(e,"b","logicalOr","bool");zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Am,a)}const V4=ee({logicalOr_:pce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hce(t,e){const n=z(t,"a","logicalXor","bool"),r=z(e,"b","logicalXor","bool");return zt(n.shape,r.shape),Eg(V4(t,e),j4(Eg(t,e)))}const hL=ee({logicalXor_:hce});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const a2=2147483648;function fce(t,e,n="left"){const r=z(t,"sortedSequence","searchSorted"),a=z(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Se(r,[-1,i]),l=Se(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(be(l.shape)>=a2)throw new Error(`values tensor size must less than ${a2}`);if(s.shape[1]>=a2)throw new Error(`trailing dim_size must less than ${a2} for int32 output type, was ${s.shape[1]}`);const u={sortedSequence:s,values:l},c={side:n};return te.runKernel(yx,u,c)}const i2=ee({searchSorted_:fce});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fL(t,e){return i2(t,e,"left")}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mce(t,e,n,r,a){const i=z(t,"x","maxPool"),o=1;let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),j(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),j(pa(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),io("maxPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},d=te.runKernel(Gv,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const W4=ee({maxPool_:mce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gce(t,e=[1,1,1],n,r,a,i="NDHWC"){const o=z(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),j(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),io("maxPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=te.runKernel(Hv,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const mL=ee({maxPool3d_:gce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yce(t,e,n,r,a=!1){const i={x:z(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},s=te.runKernel(qv,i,o);return{result:s[0],indexes:s[1]}}const gL=ee({maxPoolWithArgmax_:yce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bce(t,e){let n=z(t,"a","maximum"),r=z(e,"b","maximum");[n,r]=qn(n,r),n.dtype==="bool"&&(n=Bn(n,"int32"),r=Bn(r,"int32")),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Dm,a)}const G4=ee({maximum_:bce});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vce(t,e=null,n=!1){const r={x:z(t,"x","mean")},a={axis:e,keepDims:n};return te.runKernel(Kv,r,a)}const Tg=ee({mean_:vce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xu(t,e="float32"){if(e==="complex64"){const r=xu(t,"float32"),a=xu(t,"float32");return sl(r,a)}const n=Xr(be(t),e);return te.makeTensor(n,t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wu(t,e="float32"){if(e==="complex64"){const r=wu(t,"float32"),a=xu(t,"float32");return sl(r,a)}const n=ev(be(t),e);return te.makeTensor(n,t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yL(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=z(t,"x","meshgrid",t instanceof Hn?t.dtype:"float32");if(e===void 0)return[r];let a=z(e,"y","meshgrid",e instanceof Hn?e.dtype:"float32");const i=be(r.shape),o=be(a.shape);return n==="xy"?(r=Se(r,[1,-1]),a=Se(a,[-1,1]),[ln(wu([o,1],r.dtype),r),ln(a,wu([1,i],a.dtype))]):(r=Se(r,[-1,1]),a=Se(a,[1,-1]),[ln(r,wu([1,o],r.dtype)),ln(wu([i,1],a.dtype),a)])}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xce(t,e){let n=z(t,"a","minimum"),r=z(e,"b","minimum");[n,r]=qn(n,r),n.dtype==="bool"&&(n=Bn(n,"int32"),r=Bn(r,"int32")),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Lm,a)}const H4=ee({minimum_:xce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wce(t,e,n){j(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");j(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)j(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),j(e[s][0]>=0&&e[s][0]<=r.shape[s]-a&&e[s][1]>=0&&e[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return te.runKernel(Yv,o,i)}const bL=ee({mirrorPad_:wce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kce(t,e){let n=z(t,"a","mod"),r=z(e,"b","mod");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(Fm,a)}const vL=ee({mod_:kce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sce(t,e=null,n=!1){t=z(t,"x","moments");const r=Xt(e,t.shape),a=Tg(t,r,n);let i=a.shape;n||(i=_r(a.shape,r));const o=oo(Pt(Bn(t,"float32"),Se(a,i))),s=Tg(o,r,n);return{mean:a,variance:s}}const xL=ee({moments_:Sce});function Cce(t,e,n,r){const a=z(e,"data","multiRNNCell"),i=mg(n,"c","multiRNNCell"),o=mg(r,"h","multiRNNCell");let s=a;const l=[];for(let d=0;d<t.length;d++){const p=t[d](s,i[d],o[d]);l.push(p[0]),l.push(p[1]),s=p[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const wL=ee({multiRNNCell_:Cce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ice(t,e,n,r=!1){const a=z(t,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const s={logits:o===1?Se(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},u=te.runKernel(Qv,s,l);return o===1?Se(u,[u.size]):u}const kL=ee({multinomial_:Ice});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ece(t,e){let n=z(t,"a","notEqual","string_or_numeric"),r=z(e,"b","notEqual","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(zm,a)}const q4=ee({notEqual_:Ece});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tce(t){const e={x:z(t,"x","onesLike")};return te.runKernel(nx,e)}const SL=ee({onesLike_:Tce});function Nce(t,e){const n=z(t,"v1","outerProduct"),r=z(e,"v2","outerProduct");j(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=Se(n,[-1,1]),i=Se(r,[1,-1]);return ln(a,i)}const CL=ee({outerProduct_:Nce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _ce(t,e,n=0){const r=z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return te.runKernel(ix,i,a)}const Bp=ee({pad_:_ce});function Rce(t,e,n=0){return j(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Bp(t,[e],n)}const IL=ee({pad1d_:Rce});function $ce(t,e,n=0){return j(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Bp(t,e,n)}const EL=ee({pad2d_:$ce});function Oce(t,e,n=0){return j(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Bp(t,e,n)}const TL=ee({pad3d_:Oce});function Mce(t,e,n=0){return j(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Bp(t,e,n)}const NL=ee({pad4d_:Mce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pce(t,e,n){const r=z(t,"x","spaceToBatchND");j(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),j(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),j(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return te.runKernel(wx,a,i)}const K4=ee({spaceToBatchND_:Pce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ace(t,e,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const s=z(t,"x","maxPool");let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(pa(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=ao(l.shape,e,i,a,r),d=[c.dilationHeight,c.dilationWidth];let p;r==="same"?p=Lce([c.filterHeight,c.filterWidth],d):p=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[g,y]=Dce([c.inHeight,c.inWidth],d,p),v=f?r:"valid",b=f?l:K4(l,d,g),x=(n==="avg"?()=>N4(b,e,i,v,o):()=>W4(b,e,i,v,o))(),w=f?x:_4(x,d,y);return u?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function Dce(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),o=e.map((c,d)=>(c-i[d]%c)%c),s=a.map((c,d)=>c+o[d]),l=e.map((c,d)=>[r[d],s[d]]),u=e.map((c,d)=>[0,o[d]]);return[l,u]}function Lce(t,e){const n=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,o)=>i-r[o]);return n.map((i,o)=>[r[o],a[o]])}const _L=ee({pool_:Ace});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fce(t,e){const n=z(t,"x","prelu"),r=z(e,"alpha","prelu"),a={x:n,alpha:r};return te.runKernel(ox,a)}const X4=ee({prelu_:Fce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bce(t,e=null,n=!1){let r=z(t,"x","prod");r.dtype==="bool"&&(r=Bn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(sx,a,i)}const RL=ee({prod_:Bce});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zce(t,e,n,r){const a=t.map((c,d)=>z(c,`tensors${d}`,"raggedGather","int32")),i=z(e,"paramsDenseValues","raggedGather"),o=z(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=te.runKernel(lx,s,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const $L=ee({raggedGather_:zce});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uce(t,e,n,r,a){const i=z(t,"shape","raggedTensorToTensor","int32"),o=z(e,"values","raggedTensorToTensor"),s=z(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,p)=>z(d,`tensors${p}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:s,rowPartitionTensors:l},c={rowPartitionTypes:a};return te.runKernel(ux,u,c)}const OL=ee({raggedTensorToTensor_:Uce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jce(t,e,n){const r=be(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return te.makeTensor(a,t,n)}const ML=ee({rand_:jce});var Y4={exports:{}};Y4.exports,function(t){(function(e,n,r){function a(l){var u=this,c=s();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new a(l),d=u&&u.state,p=c.next;return p.int32=function(){return c.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&i(d,c),p.state=function(){return i(c,{})}),p}function s(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Wa,t,!1)}(Y4);var Vce=Y4.exports,Q4={exports:{}};Q4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Wa,t,!1)}(Q4);var Wce=Q4.exports,Z4={exports:{}};Z4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Wa,t,!1)}(Z4);var Gce=Z4.exports,J4={exports:{}};J4.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.x,d=l.i,p,f;return p=c[d],p^=p>>>7,f=p^p<<24,p=c[d+1&7],f^=p^p>>>10,p=c[d+3&7],f^=p^p>>>3,p=c[d+4&7],f^=p^p<<7,p=c[d+7&7],p=p^p<<13,f^=p^p<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var p,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,p=0;p<d.length;++p)f[p&7]=f[p&7]<<15^d.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],c.x=f,c.i=0,p=256;p>0;--p)c.next()}u(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Wa,t,!1)}(J4);var Hce=J4.exports,eT={exports:{}};eT.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.w,d=l.X,p=l.i,f,g;return l.w=c=c+1640531527|0,g=d[p+34&127],f=d[p=p+1&127],g^=g<<13,f^=f<<17,g^=g>>>15,f^=f>>>12,g=d[p]=g^f,l.i=p,g+(c^c>>>16)|0};function u(c,d){var p,f,g,y,v,b=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),g=0,y=-32;y<x;++y)d&&(f^=d.charCodeAt((y+32)%d.length)),y===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,y>=0&&(v=v+1640531527|0,p=b[y&127]^=f+v,g=p==0?g+1:0);for(g>=128&&(b[(d&&d.length||0)&127]=-1),g=127,y=4*128;y>0;--y)f=b[g+34&127],p=b[g=g+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,b[g]=f^p;c.w=v,c.X=b,c.i=g}u(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Wa,t,!1)}(eT);var qce=eT.exports,tT={exports:{}};tT.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.b,p=l.c,f=l.d,g=l.a;return d=d<<25^d>>>7^p,p=p-f|0,f=f<<24^f>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-f|0,l.d=f<<16^p>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Wa,t,!1)}(tT);var Kce=tT.exports,PL={exports:{}};const Xce={},Yce=Object.freeze(Object.defineProperty({__proto__:null,default:Xce},Symbol.toStringTag,{value:"Module"})),AL=_j(Yce);(function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",l=r.pow(a,i),u=r.pow(2,o),c=u*2,d=a-1,p;function f(S,C,E){var _=[];C=C==!0?{entropy:!0}:C||{};var N=b(v(C.entropy?[S,w(n)]:S??x(),3),_),M=new g(_),P=function(){for(var L=M.g(i),U=l,B=0;L<u;)L=(L+B)*a,U*=a,B=M.g(1);for(;L>=c;)L/=2,U/=2,B>>>=1;return(L+B)/U};return P.int32=function(){return M.g(4)|0},P.quick=function(){return M.g(4)/4294967296},P.double=P,b(w(M.S),n),(C.pass||E||function(L,U,B,K){return K&&(K.S&&y(K,M),L.state=function(){return y(M,{})}),B?(r[s]=L,U):L})(P,N,"global"in C?C.global:this==r,C.state)}function g(S){var C,E=S.length,_=this,N=0,M=_.i=_.j=0,P=_.S=[];for(E||(S=[E++]);N<a;)P[N]=N++;for(N=0;N<a;N++)P[N]=P[M=d&M+S[N%E]+(C=P[N])],P[M]=C;(_.g=function(L){for(var U,B=0,K=_.i,X=_.j,Z=_.S;L--;)U=Z[K=d&K+1],B=B*a+Z[d&(Z[K]=Z[X=d&X+U])+(Z[X]=U)];return _.i=K,_.j=X,B})(a)}function y(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function v(S,C){var E=[],_=typeof S,N;if(C&&_=="object")for(N in S)try{E.push(v(S[N],C-1))}catch{}return E.length?E:_=="string"?S:S+"\0"}function b(S,C){for(var E=S+"",_,N=0;N<E.length;)C[d&N]=d&(_^=C[d&N]*19)+E.charCodeAt(N++);return w(C)}function x(){try{var S;return p&&(S=p.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=f;try{p=AL}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:Wa,[],Math)})(PL);var Qce=PL.exports,Zce=Vce,Jce=Wce,ede=Gce,tde=Hce,nde=qce,rde=Kce,qc=Qce;qc.alea=Zce,qc.xor128=Jce,qc.xorwow=ede,qc.xorshift7=tde,qc.xor4096=nde,qc.tychei=rde;var o2=qc;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nT{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=o2.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,o;do a=2*this.random()-1,i=2*this.random()-1,o=a*a+i*i;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class ade{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=o2.alea(i.toString()),this.randn=new nT(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,o;for(;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class ide{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=o2.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ode(t,e,n=1,r="float32",a){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new ade(e,n,r,a),o=St(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const DL=ee({randomGamma_:ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sde(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new nT(e,n,r,!1,a),o=St(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const rT=ee({randomNormal_:sde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lde(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return rT(t,0,1,e,n)}const LL=ee({randomStandardNormal_:lde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ude(t,e=0,n=1,r="float32",a){const i=St(t,r),o=new ide(e,n,null,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}const aT=ee({randomUniform_:ude});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return te.runKernel(cx,{},a)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cde(t){const e={x:z(t,"x","reciprocal")};return te.runKernel(jm,e)}const FL=ee({reciprocal_:cde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dde(t){const e={x:z(t,"x","relu")};return te.runKernel(Vm,e)}const Ng=ee({relu_:dde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pde(t){const e={x:z(t,"x","relu6")};return te.runKernel(Wm,e)}const iT=ee({relu6_:pde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hde(t,e){const n={x:z(t,"x","reverse")},r={dims:e};return te.runKernel(mx,n,r)}const ku=ee({reverse_:hde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fde(t){const e=z(t,"x","reverse");return j(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),ku(e,0)}const BL=ee({reverse1d_:fde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mde(t,e){const n=z(t,"x","reverse");return j(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),ku(n,e)}const zL=ee({reverse2d_:mde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gde(t,e){const n=z(t,"x","reverse");return j(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),ku(n,e)}const UL=ee({reverse3d_:gde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yde(t,e){const n=z(t,"x","reverse");return j(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),ku(n,e)}const jL=ee({reverse4d_:yde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bde(t){const e={x:z(t,"x","round")};return te.runKernel(Gm,e)}const oT=ee({round_:bde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vde(t){const e={x:z(t,"x","rsqrt","float32")};return te.runKernel(Hm,e)}const VL=ee({rsqrt_:vde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xde(t){const e={x:z(t,"x","selu")};return te.runKernel(qm,e)}const WL=ee({selu_:xde});function wde(t,e,n,r,a,i=[1,1],o="NHWC"){const s=z(t,"x","separableConv2d"),l=z(e,"depthwiseFilter","separableConv2d"),u=z(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(s.rank===3&&(d=!0,c=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");j(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),j(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),j(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),j(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),j(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const p=l.shape[2],f=l.shape[3];j(u.shape[2]===p*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*f}, but got ${u.shape[2]}.`);const g=e2(c,l,r,a,o,i),y=kg(g,u,1,"valid",o);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const GL=ee({separableConv2d_:wde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function kde(t,e){const n=z(t,"x","setdiff1d"),r=z(e,"y","setdiff1d");j(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),j(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),j(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),o=new Set(i);let s=0;for(let c=0;c<a.length;c++)o.has(a[c])||s++;const l=new Nr([s],n.dtype),u=new Nr([s],"int32");for(let c=0,d=0;c<a.length;c++)o.has(a[c])||(l.values[d]=a[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const HL=kde;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sde(t){const e={x:z(t,"x","sign")};return te.runKernel(Ym,e)}const qL=ee({sign_:Sde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cde(t){const e={x:z(t,"x","sin","float32")};return te.runKernel(Km,e)}const KL=ee({sin_:Cde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ide(t){const e={x:z(t,"x","sinh")};return te.runKernel(Xm,e)}const XL=ee({sinh_:Ide});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ede(t,e,n){const r=z(t,"x","slice1d");return j(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),xn(r,[e],[n])}const YL=ee({slice1d_:Ede});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tde(t,e,n){const r=z(t,"x","slice2d");return j(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),xn(r,e,n)}const QL=ee({slice2d_:Tde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nde(t,e,n){const r=z(t,"x","slice3d");return j(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),xn(r,e,n)}const ZL=ee({slice3d_:Nde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _de(t,e,n){const r=z(t,"x","slice4d");return j(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),xn(r,e,n)}const JL=ee({slice4d_:_de});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rde(t,e=-1){const n=z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return te.runKernel(Sx,r,a)}const eF=ee({softmax_:Rde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $de(t){j(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(Mv,e)}const s2=ee({fft_:$de});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ode(t){j(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(Bv,e)}const _g=ee({ifft_:Ode});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mde(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=Se(t,[n,e]);r=_g(a)}else{const a=[n,2*(e-1)],i=Se($p(t),[n,e]),o=Se(yg(t),[n,e]),s=ku(xn(i,[0,1],[n,e-2]),1),l=De(ku(xn(o,[0,1],[n,e-2]),1),Ft(-1)),u=ha([i,s],1),c=ha([o,l],1),d=Se(sl(u,c),[a[0],a[1]]);r=_g(d)}if(r=$p(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=Se(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const sT=ee({irfft_:Mde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pde(t,e,n=0){const r={x:z(t,"x","split")},a={numOrSizeSplits:e,axis:n};return te.runKernel(kx,r,a)}const Up=ee({split_:Pde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ade(t,e){j(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const g=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,a=xn(t,g,y),n=e}else if(e!=null&&e>n){const g=t.shape.map(y=>y);g[t.shape.length-1]=e-n,a=ha([t,xu(g)],t.shape.length-1),n=e}else a=t;const i=fi(a),o=Se(sl(a,i),[r,n]),s=s2(o),l=Math.floor(n/2)+1,u=$p(s),c=yg(s),d=Up(u,[l,n-l],u.shape.length-1),p=Up(c,[l,n-l],c.shape.length-1),f=a.shape.slice();return f[a.shape.length-1]=l,Se(sl(d[0],p[0]),f)}const l2=ee({rfft_:Ade});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dde(t,e){let n=z(t,"a","squaredDifference"),r=z(e,"b","squaredDifference");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r},i={};return te.runKernel(eg,a,i)}const lT=ee({squaredDifference_:Dde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lde(t,e){const n=z(t,"x","squeeze","string_or_numeric");return Se(n,al(n.shape,e).newShape)}const Rg=ee({squeeze_:Lde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fde(t,e=0){const n=mg(t,"tensors","stack","string_or_numeric");j(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&j(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return te.runKernel(ax,r,a)}const ys=ee({stack_:Fde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bde(t,e=0){const n={x:z(t,"x","step")},r={alpha:e};return te.runKernel(ig,n,r)}const uT=ee({step_:Bde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zde(t,e,n,r,a=0,i=0,o=0,s=0,l=0){const u={x:z(t,"x","stridedSlice","string_or_numeric")},c={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return te.runKernel(_x,u,c)}const tF=ee({stridedSlice_:zde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ude(t){const e={x:z(t,"x","tan","float32")};return te.runKernel(ng,e)}const nF=ee({tan_:Ude});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function so(t,e){_c(t);const n=ps(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return mu(t,null,n,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jp(t,e,n){if(_c(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=ps(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return mu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rF(t,e,n){if(_c(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=ps(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return mu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aF(t,e,n){if(_c(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=ps(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return mu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iF(t,e,n){if(_c(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=ps(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,mu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jde(t,e=1,n=!0){const r=z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[s,l]=te.runKernel(Mx,i,o);return{values:s,indices:l}}const oF=ee({topk_:jde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vde(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new nT(e,n,r,!0,a),o=St(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const sF=ee({truncatedNormal_:Vde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wde(t,e=0){const n=z(t,"x","unique","string_or_numeric");j(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,o]=te.runKernel(Ax,r,a);return{values:i,indices:o}}const lF=ee({unique_:Wde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gde(t,e,n){const r=z(t,"x","unsortedSegmentSum"),a=z(e,"segmentIds","unsortedSegmentSum","int32");j(Rc(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},o={numSegments:n};return te.runKernel(Lx,i,o)}const uF=ee({unsortedSegmentSum_:Gde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hde(t,e=0){const n=z(t,"x","unstack","string_or_numeric");j(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return te.runKernel(Dx,r,a)}const Su=ee({unstack_:Hde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cF(t,e){return i2(t,e,"right")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dF(t,e=!0,n,r){return te.makeVariable(t,e,n,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u2(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=St(t,"int32"),a=St([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),s=i*t.length;a.values.set(o,s)}return a.toTensor()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function qde(t){const e=z(t,"condition","whereAsync","bool"),n=await e.data(),r=u2(e.shape,n);return t!==e&&e.dispose(),r}const cT=qde;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Kde(t,e,n){const r=z(t,"tensor","boolMask"),a=z(e,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape;j(o>0,()=>"mask cannot be scalar"),Kr(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=i;y<i+o;y++)l*=s[y];const u=s.slice(0,i).concat([l],s.slice(i+o)),c=Se(r,u),d=Se(a,[-1]),p=await cT(d),f=Rg(p,[1]),g=D4(c,f,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),f.dispose(),c.dispose(),d.dispose(),p.dispose(),g}const pF=Kde;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xde(t,e,n,r,a=!0){const i=z(t,"v","movingAverage"),o=z(e,"x","movingAverage"),s=z(n,"decay","movingAverage");ID(i,o),j(vn(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=Ft(1),u=Pt(l,s);let c=De(Pt(o,i),u);if(a){j(r!=null,()=>"When using zeroDebias: true, step is required.");const d=z(r,"step","movingAverage");c=In(c,Pt(l,Dp(s,d)))}return ft(i,c)}const hF=ee({movingAverage_:Xde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yde(t,e,n){const r=z(t,"indices","scatterND","int32"),a=z(e,"updates","scatterND");f4(a,r,n);const i={indices:r,updates:a},o={shape:n};return te.runKernel(gx,i,o)}const fF=ee({scatterND_:Yde});function Qde(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zde(t,e,n,r=0){const a=z(t,"sparseIndices","sparseToDense","int32"),i=z(e,"sparseValues","sparseToDense","string_or_numeric"),o=z(r,"defaultValue","sparseToDense",i.dtype);Qde(a,i,n,o);const s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return te.runKernel(Nx,s,l)}const mF=ee({sparseToDense_:Zde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jde(t,e){const n=z(e,"indices","gatherND","int32"),r={params:z(t,"x","gatherND","string_or_numeric"),indices:n};return te.runKernel(Fv,r)}const gF=ee({gatherND_:Jde});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function epe(t,e){if(e==null)return t.shape.slice();if(vn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tpe(t,e,n,r){const a=z(t,"x","dropout");if(j(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),j(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Hn?a.clone():a;const i=epe(a,n),o=1-e,s=In(A4(ft(aT(i,0,1,"float32",r),o)),o);return De(a,s)}const yF=ee({dropout_:tpe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dT(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function c2(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(o)}return so(a,"float32")}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function npe(t,e,n=1){const r=z(t,"predictions","inTopK"),a=z(e,"targets","inTopK");j(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),j(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),Kr(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];j(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),s=await a.data(),[l,u]=[o.length/i,i],c=Er("bool",l);for(let d=0;d<l;d++){const p=d*u,f=o.subarray(p,p+u),g=[];for(let y=0;y<f.length;y++)g.push({value:f[y],index:y});g.sort((y,v)=>v.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(g[y].index===s[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),Uo(c,a.shape,"bool")}const bF=npe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rpe(t,e,n,r,a,i="NHWC",o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]])),j(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),j(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),j(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];j(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),j(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),io("conv2dDerFilter",a,o);const d={x:s,dy:l},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return te.runKernel(yv,d,p)}const ape=ee({conv2DBackpropFilter_:rpe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return De(t,uT(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function p2(t,e){let n=e;const r=d4(t.shape,e.shape);return r.length>0&&(n=En(n,r)),Se(n,t.shape)}function h2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Ng(t);if(e==="elu")return O4(t);if(e==="relu6")return iT(t);if(e==="prelu")return X4(t,n);if(e==="leakyrelu")return F4(t,r);if(e==="sigmoid")return Wc(t);throw new Error(`Unknown fused activation ${e}.`)}const f2=(t,e)=>!(t>0)||e==="linear";/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ipe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",f2(te.state.gradientDepth,l)===!1){j(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=kg(t,e,n,r,a,i,o);return s!=null&&(E=ft(E,s)),h2(E,l,u,c)}const d=z(t,"x","conv2d","float32"),p=z(e,"filter","conv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),j(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),j(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),io("fused conv2d",r,o);const y=a==="NHWC"?f.shape[3]:f.shape[1];j(p.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${p.shape[2]}.`),j(pa(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=Br(f.shape,p.shape,n,i,r,o);let b;s!=null&&(b=z(s,"bias","fused conv2d"),[b]=qn(b,d),a==="NHWC"?zt(v.outShape,b.shape):(j(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),j(b.shape.length===0||b.shape[0]===v.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let x;if(u!=null){const E=u.shape;if(j(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)j(E[0]===1||E[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${v.outChannels}).`);else if(E.length===3)try{zt(E,v.outShape)}catch{const _=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(_)}x=z(u,"prelu weights","fused conv2d")}const w=(E,_)=>{j(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[N,M,P,L]=_,U=d2(E,P,l);j(xg(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const B=F8(M.shape,U,N,n,r),K=ape(M,U,N.shape,n,r),X=[B,K];if(L!=null){const Z=p2(L,U);X.push(Z)}return X},S={x:f,filter:p,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?gs((E,_,N)=>{let M=te.runKernel(sg,S,C);return N([_,E,M]),g&&(M=Se(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:w}})(f,p):gs((E,_,N,M)=>{let P=te.runKernel(sg,S,C);return M([_,E,P,N]),g&&(P=Se(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(f,p,b)}const ope=ee({fusedConv2d_:ipe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function spe(t,e,n,r,a,i=[1,1],o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return te.runKernel(Tv,u,c)}const lpe=ee({depthwiseConv2dNativeBackpropFilter_:spe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function upe(t,e,n,r,a,i=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:t},d=te.runKernel(Nv,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const cpe=ee({depthwiseConv2dNativeBackpropInput_:upe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dpe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(f2(te.state.gradientDepth,l)===!1){let C=e2(t,e,n,r,a,i,o);return s!=null&&(C=ft(C,s)),h2(C,l,u,c)}const d=z(t,"x","depthwiseConv2d","float32"),p=z(e,"filter","depthwiseConv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),j(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),j(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),j(f.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),j(pa(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),io("fused depthwiseConv2d",r,o);const y=Br(f.shape,p.shape,n,i,r,o,!0);let v;s!=null&&(v=z(s,"bias","fused conv2d"),[v]=qn(v,d),zt(y.outShape,v.shape));let b;u!=null&&(b=z(u,"prelu weights","fused depthwiseConv2d"));const x=(C,E)=>{j(xg(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[_,N,M,P]=E,L=d2(C,M,l),U=cpe(N.shape,L,_,n,r,i,o),B=lpe(N,L,_.shape,n,r,i,o);if(P!=null){const K=p2(v,L);return[U,B,K]}return[U,B]},w={x:f,filter:p,bias:v,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?gs((C,E,_)=>{let N=te.runKernel(lg,w,S);return _([E,C,N]),g&&(N=Se(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(f,p):gs((C,E,_,N)=>{let M=te.runKernel(lg,w,S);return N([E,C,M,_]),g&&(M=Se(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:x}})(f,p,v)}const ppe=ee({fusedDepthwiseConv2d_:dpe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hpe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(f2(te.state.gradientDepth,i)===!1){let P=ln(t,e,n,r);return a!=null&&(P=ft(P,a)),h2(P,i,o,s)}let l=z(t,"a","fused matMul"),u=z(e,"b","fused matMul");[l,u]=qn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),y=u.shape.slice(0,-2),v=be(g),b=be(y);j(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=zt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),w=n?Se(l,[v,c,p]):Se(l,[v,p,c]),S=r?Se(u,[b,f,d]):Se(u,[b,d,f]);let C;a!=null&&(C=z(a,"bias","fused matMul"),[C]=qn(C,l),zt(x,C.shape));let E;o!=null&&(E=z(o,"prelu weights","fused matMul"));const _=(P,L)=>{const[U,B,K,X]=L,Z=d2(Se(P,K.shape),K,i);let H,F;if(!n&&!r?(H=ln(Z,B,!1,!0),F=ln(U,Z,!0,!1)):!n&&r?(H=ln(Z,B,!1,!1),F=ln(Z,U,!0,!1)):n&&!r?(H=ln(B,Z,!1,!0),F=ln(U,Z,!1,!1)):(H=ln(B,Z,!0,!0),F=ln(Z,U,!0,!0)),a!=null){const Y=p2(X,Z);return[H,F,Y]}else return[H,F]},N={a:w,b:S,bias:C,preluActivationWeights:E},M={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:s};return a==null?gs((P,L,U)=>{const B=te.runKernel(og,N,M);return U([P,L,B]),{value:Se(B,x),gradFunc:_}})(w,S):gs((P,L,U,B)=>{const K=te.runKernel(og,N,M);return B([P,L,K,U]),{value:Se(K,x),gradFunc:_}})(w,S,C)}const fpe=ee({fusedMatMul_:hpe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vF=Object.freeze(Object.defineProperty({__proto__:null,conv2d:ope,depthwiseConv2d:ppe,matMul:fpe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mpe(t){return c2(t,.54,.46)}const gpe=ee({hammingWindow_:mpe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ype(t){return c2(t,.5,.5)}const xF=ee({hannWindow_:ype});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bpe(t,e,n,r=!1,a=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(xn(t,i,e)),i+=n;if(r)for(;i<t.size;){const s=i+e-t.size,l=ha([xn(t,i,e-s),Ap([s],a)]);o.push(l),i+=n}return o.length===0?jp([],[0,e]):Se(ha(o),[o.length,e])}const wF=ee({frame_:bpe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vpe(t,e,n,r,a=xF){r==null&&(r=dT(e));const i=wF(t,e,n),o=De(i,a(e));return l2(o,r)}const xpe=ee({stft_:vpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wpe(t,e,n,r,a="bilinear",i=0){const o=z(t,"image","cropAndResize"),s=z(e,"boxes","cropAndResize","float32"),l=z(n,"boxInd","cropAndResize","int32"),u=s.shape[0];j(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),j(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),j(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),j(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),j(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),j(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:o,boxes:s,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return te.runKernel(Sv,c,d)}const kpe=ee({cropAndResize_:wpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Spe(t){const e=z(t,"image","flipLeftRight","float32");j(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return te.runKernel(Av,n,{})}const Cpe=ee({flipLeftRight_:Spe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ipe(t){const e=z(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];j(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),j(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,Lp(e,a)}const Epe=ee({grayscaleToRGB_:Ipe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tpe(t,e,n=0,r=.5){const a=z(t,"image","rotateWithOffset","float32");j(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},o={radians:e,fillValue:n,center:r};return te.runKernel(zx,i,o)}const Npe=ee({rotateWithOffset_:Tpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vp(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),j(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),j(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),j(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),j(e.rank===1,()=>"scores must be a 1D tensor"),j(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),j(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _pe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppression","float32"),o=z(e,"scores","nonMaxSuppression","float32"),s=Vp(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return te.runKernel(Jv,{boxes:i,scores:o},l)}const Rpe=ee({nonMaxSuppression_:_pe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $pe(t,e,n){const r=Ope(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function Ope(t,e,n){return Ppe(t,e,n||Mpe)}function Mpe(t,e){return t>e?1:t<e?-1:0}function Ppe(t,e,n){let r=0,a=t.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);const s=n(e,t[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m2(t,e,n,r,a){return pT(t,e,n,r,a,0)}function g2(t,e,n,r,a,i){return pT(t,e,n,r,a,0,!1,i,!0)}function y2(t,e,n,r,a,i){return pT(t,e,n,r,a,i,!0)}function pT(t,e,n,r,a,i,o=!1,s=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>a&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(kF);const c=i>0?-.5/i:0,d=[],p=[];for(;d.length<n&&u.length>0;){const v=u.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=v;if(b<a)break;let S=!1;for(let C=d.length-1;C>=w;--C){const E=Ape(t,x,d[C]);if(E>=r){S=!0;break}if(v.score=v.score*Dpe(r,c,E),v.score<=a)break}v.suppressBeginIndex=d.length,S||(v.score===b?(d.push(x),p.push(v.score)):v.score>a&&$pe(u,v,kF))}const f=d.length,g=n-f;s&&g>0&&(d.push(...new Array(g).fill(0)),p.push(...new Array(g).fill(0)));const y={selectedIndices:d};return o&&(y.selectedScores=p),l&&(y.validOutputs=f),y}function Ape(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-i)*(l-o),g=(d-u)*(p-c);if(f<=0||g<=0)return 0;const y=Math.max(i,u),v=Math.max(o,c),b=Math.min(s,d),x=Math.min(l,p),w=Math.max(b-y,0)*Math.max(x-v,0);return w/(f+g-w)}function Dpe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function kF(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Lpe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppressionAsync"),o=z(e,"scores","nonMaxSuppressionAsync"),s=Vp(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:d}=m2(u,c,n,r,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),so(d,"int32")}const Fpe=Lpe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bpe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=Vp(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=te.runKernel(tx,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const zpe=ee({nonMaxSuppressionWithScore_:Bpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Upe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=Vp(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=y2(c,d,n,r,a,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:so(p,"int32"),selectedScores:so(f)}}const jpe=Upe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vpe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=Vp(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p={boxes:o,scores:s},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},g=te.runKernel(ex,p,f);return{selectedIndices:g[0],validOutputs:g[1]}}const Wpe=ee({nonMaxSuppressionPadded_:Vpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Gpe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=Vp(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:g,validOutputs:y}=g2(p,f,u,c,d,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:so(g,"int32"),validOutputs:Ft(y,"int32")}}const Hpe=Gpe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qpe(t,e,n=!1,r=!1){const a=z(t,"images","resizeBilinear");j(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),j(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),j(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=te.runKernel(fx,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Kpe=ee({resizeBilinear_:qpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xpe(t,e,n=!1,r=!1){const a=z(t,"images","resizeNearestNeighbor");j(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),j(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),j(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),j(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=te.runKernel(hx,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Ype=ee({resizeNearestNeighbor_:Xpe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* https://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qpe(t,e="binary",n=!1,r=.5){const a=z(t,"image","threshold"),i=.2989,o=.587,s=.114,l=a.shape[0]*a.shape[1];let u=De(so([r]),255),c,d,p,f;if(j(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),j(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),j(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),j(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,d,p]=Up(a,[1,1,1],-1);const y=De(c,i),v=De(d,o),b=De(p,s);f=ft(ft(y,v),b)}else f=t;if(e==="otsu"){const y=R4(Bn(oT(f),"int32"),Uo([]),256);u=Zpe(y,l)}const g=n?n2(f,u):Ig(f,u);return Bn(De(g,255),"int32")}function Zpe(t,e){let n=so([-1]),r=so([0]),a=so([0]),i,o,s,l,u,c;for(let d=0;d<t.size-1;d++){i=xn(t,0,d+1),o=xn(t,d+1),u=In(En(i),e),c=In(En(o),e);const p=En(De(i,zp(0,i.size)));s=In(p,En(i));const f=Ap(o.shape,i.size),g=ft(zp(0,o.size),f),y=De(o,g);l=In(En(y),En(o));const v=Pt(s,l),b=Pt(s,l),x=De(u,c);a=De(De(x,v),b);const w=Ig(a,r);r=Gc(w,a,r),n=Gc(w,so([d]),n)}return n}const Jpe=ee({threshold_:Qpe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ehe(t,e,n="nearest",r="constant",a=0,i){const o=z(t,"image","transform","float32"),s=z(e,"transforms","transform","float32");j(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),j(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),j(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return te.runKernel(Px,l,u)}const the=ee({transform_:ehe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nhe(t,e,n){j(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),j(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=z(t,"a","bandPart");j(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const s=Se(zp(0,i,1,"int32"),[-1,1]),l=zp(0,o,1,"int32"),u=Pt(s,l),c=Eg(n2(u,Ft(+e,"int32")),L4(u,Ft(-n,"int32"))),d=xu([i,o],r.dtype);return Se(ys(Su(Se(r,[-1,i,o])).map(p=>Gc(c,p,d))),a)}const rhe=ee({bandPart_:nhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ahe(t){let e;if(Array.isArray(t)){e=!1,j(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)j(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=Up(t,t.shape[0],0).map(a=>Rg(a,[0]));j(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(te.tidy(()=>{let i=r[a];if(a>0)for(let o=0;o<a;++o){const s=De(En(De(n[o],i)),n[o]);i=Pt(i,s)}return In(i,Cg(i,"euclidean"))}));return e?ys(n,0):n}const ihe=ee({gramSchmidt_:ahe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ohe(t,e=!1){if(j(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return SF(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Su(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{const[u,c]=SF(l,e);a.push(u),i.push(c)});const o=Se(ys(a,0),t.shape),s=Se(ys(i,0),t.shape);return[o,s]}}function SF(t,e=!1){return te.tidy(()=>{j(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=P4(n),i=ul(t);const o=jp([[1]],[1,1]);let s=ul(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=s,p=a;[s,i,a]=te.tidy(()=>{const f=xn(i,[u,u],[n-u,1]),g=Cg(f),y=xn(i,[u,u],[1,1]),v=Gc(Ig(y,0),jp([[-1]]),jp([[1]])),b=Pt(y,De(v,g)),x=In(f,b);x.shape[0]===1?s=ul(o):s=ha([o,xn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=fs(In(ln(v,b),g)),S=xn(i,[u,0],[n-u,r]),C=De(w,s),E=bg(s);if(u===0)i=Pt(S,ln(C,ln(E,S)));else{const M=Pt(S,ln(C,ln(E,S)));i=ha([xn(i,[0,0],[u,r]),M],0)}const _=bg(C),N=xn(a,[0,u],[n,a.shape[1]-u]);if(u===0)a=Pt(N,ln(ln(N,s),_));else{const M=Pt(N,ln(ln(N,s),_));a=ha([xn(a,[0,0],[n,u]),M],1)}return[s,i,a]}),da([c,d,p])}return!e&&n>r&&(a=xn(a,[0,0],[n,r]),i=xn(i,[0,0],[r,r])),[a,i]})}const she=ee({qr_:ohe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Oa;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Oa||(Oa={}));function lhe(t,e,n=Oa.SUM_BY_NONZERO_WEIGHTS){const r=z(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=z(e,"weights","computeWeightedLoss"));const i=a==null?r:De(r,a);if(n===Oa.NONE)return i;if(n===Oa.SUM)return En(i);if(n===Oa.MEAN){if(a==null)return Tg(i);{const o=r.size/a.size,s=In(En(i),En(a));return o>1?In(s,Ft(o)):s}}if(n===Oa.SUM_BY_NONZERO_WEIGHTS){if(a==null)return In(En(i),Ft(r.size));{const o=De(a,wu(r.shape)),s=Bn(En(q4(o,Ft(0))),"float32");return In(En(i),s)}}throw Error(`Unknown reduction: ${n}`)}const fl=ee({computeWeightedLoss_:lhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uhe(t,e,n,r=Oa.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","absoluteDifference"),i=z(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=z(n,"weights","absoluteDifference")),Kr(a.shape,i.shape,"Error in absoluteDifference: ");const s=hi(Pt(a,i));return fl(s,o,r)}const che=ee({absoluteDifference_:uhe});function dhe(t,e,n,r,a=Oa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","cosineDistance"),o=z(e,"predictions","cosineDistance");let s=null;r!=null&&(s=z(r,"weights","cosineDistance")),Kr(i.shape,o.shape,"Error in cosineDistance: ");const l=Ft(1),u=Pt(l,En(De(i,o),n,!0));return fl(u,s,a)}const phe=ee({cosineDistance_:dhe});function hhe(t,e,n,r=Oa.SUM_BY_NONZERO_WEIGHTS){let a=z(t,"labels","hingeLoss");const i=z(e,"predictions","hingeLoss");let o=null;n!=null&&(o=z(n,"weights","hingeLoss")),Kr(a.shape,i.shape,"Error in hingeLoss: ");const s=Ft(1);a=Pt(De(Ft(2),a),s);const l=Ng(Pt(s,De(a,i)));return fl(l,o,r)}const fhe=ee({hingeLoss_:hhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mhe(t,e,n,r=1,a=Oa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","huberLoss"),o=z(e,"predictions","huberLoss");let s=null;n!=null&&(s=z(n,"weights","huberLoss")),Kr(i.shape,o.shape,"Error in huberLoss: ");const l=Ft(r),u=hi(Pt(o,i)),c=H4(u,l),d=Pt(u,c),p=ft(De(Ft(.5),oo(c)),De(l,d));return fl(p,s,a)}const ghe=ee({huberLoss_:mhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yhe(t,e,n,r=1e-7,a=Oa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","logLoss"),o=z(e,"predictions","logLoss");let s=null;n!=null&&(s=z(n,"weights","logLoss")),Kr(i.shape,o.shape,"Error in logLoss: ");const l=Ft(1),u=Ft(r),c=fs(De(i,Fp(ft(o,u)))),d=De(Pt(l,i),Fp(ft(Pt(l,o),u))),p=Pt(c,d);return fl(p,s,a)}const bhe=ee({logLoss_:yhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vhe(t,e,n,r=Oa.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","meanSquaredError"),i=z(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=z(n,"weights","meanSquaredError")),Kr(a.shape,i.shape,"Error in meanSquaredError: ");const s=lT(a,i);return fl(s,o,r)}const xhe=ee({meanSquaredError_:vhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function whe(t,e){const n=z(t,"labels","sigmoidCrossEntropyWithLogits"),r=z(e,"logits","sigmoidCrossEntropyWithLogits");Kr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Ng(r),i=De(r,n),o=B4(vu(fs(hi(r))));return ft(Pt(a,i),o)}function khe(t,e,n,r=0,a=Oa.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"multiClassLabels","sigmoidCrossEntropy");const o=z(e,"logits","sigmoidCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","sigmoidCrossEntropy")),Kr(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Ft(r),c=Ft(1),d=Ft(.5);i=ft(De(i,Pt(c,u)),De(d,u))}const l=whe(i,o);return fl(l,s,a)}const She=ee({sigmoidCrossEntropy_:khe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Che(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return gs((r,a,i)=>{const o=U4(a,[n],!0),s=Pt(Bn(a,"float32"),o);i([r,s]);const l=fs(De(s,r));return{value:En(l,[n]),gradFunc:(u,c)=>{const[d,p]=c,f=_r(u.shape,[n]);return[De(Se(u,f),Pt(Bn(d,"float32"),vu(p))),De(Se(u,f),Pt(vu(p),Bn(d,"float32")))]}}})(t,e)}function Ihe(t,e,n,r=0,a=Oa.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"onehotLabels","softmaxCrossEntropy");const o=z(e,"logits","softmaxCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","softmaxCrossEntropy")),Kr(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Ft(r),c=Ft(1),d=Ft(i.shape[1]);i=ft(De(i,Pt(c,u)),In(u,d))}const l=Che(i,o);return fl(l,s,a)}const Ehe=ee({softmaxCrossEntropy_:Ihe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function The(t,e,n,r){const a=z(t,"indices","sparseFillEmptyRows","int32"),i=z(e,"values","sparseFillEmptyRows"),o=z(n,"denseShape","sparseFillEmptyRows","int32"),s=z(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:a,values:i,denseShape:o,defaultValue:s},u=te.runKernel(Cx,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Nhe=ee({sparseFillEmptyRows_:The});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _he(t,e,n){const r=z(t,"inputIndices","sparseReshape","int32"),a=z(e,"inputShape","sparseReshape","int32"),i=z(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:a,newShape:i},s=te.runKernel(Ix,o);return{outputIndices:s[0],outputShape:s[1]}}const Rhe=ee({sparseReshape_:_he});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $he(t,e,n){const r=z(t,"data","sparseSegmentMean"),a=z(e,"indices","sparseSegmentMean","int32"),i=z(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return te.runKernel(Ex,o)}const Ohe=ee({sparseSegmentMean_:$he});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mhe(t,e,n){const r=z(t,"data","sparseSegmentSum"),a=z(e,"indices","sparseSegmentSum","int32"),i=z(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return te.runKernel(Tx,o)}const Phe=ee({sparseSegmentSum_:Mhe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ahe(t,e,n,r,a,i,o,s){const l=z(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=z(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:u},p=te.runKernel(Rx,d,c);return{nGrams:p[0],nGramsSplits:p[1]}}const Dhe=ee({stringNGrams_:Ahe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lhe(t,e,n=!0){const r=z(t,"input","stringSplit","string"),a=z(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},o={input:r,delimiter:a},s=te.runKernel($x,o,i);return{indices:s[0],values:s[1],shape:s[2]}}const Fhe=ee({stringSplit_:Lhe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bhe(t,e){const n=z(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return te.runKernel(Ox,a,r)}const zhe=ee({stringToHashBucketFast_:Bhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const CF={fft:s2,ifft:_g,rfft:l2,irfft:sT},IF={hammingWindow:gpe,hannWindow:xF,frame:wF,stft:xpe},hT={flipLeftRight:Cpe,grayscaleToRGB:Epe,resizeNearestNeighbor:Ype,resizeBilinear:Kpe,rotateWithOffset:Npe,cropAndResize:kpe,nonMaxSuppression:Rpe,nonMaxSuppressionAsync:Fpe,nonMaxSuppressionWithScore:zpe,nonMaxSuppressionWithScoreAsync:jpe,nonMaxSuppressionPadded:Wpe,nonMaxSuppressionPaddedAsync:Hpe,threshold:Jpe,transform:the},EF={bandPart:rhe,gramSchmidt:ihe,qr:she},TF={absoluteDifference:che,computeWeightedLoss:fl,cosineDistance:phe,hingeLoss:fhe,huberLoss:ghe,logLoss:bhe,meanSquaredError:xhe,sigmoidCrossEntropy:She,softmaxCrossEntropy:Ehe},NF={sparseFillEmptyRows:Nhe,sparseReshape:Rhe,sparseSegmentMean:Ohe,sparseSegmentSum:Phe},_F={stringNGrams:Dhe,stringSplit:Fhe,stringToHashBucketFast:zhe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Cu extends c8{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(o)}else this.applyGradients(i);return da(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return cL(e,n)}dispose(){this.iterations_!=null&&da(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ft(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Cu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class b2 extends Cu{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accum_grad`,variable:Ht(()=>fi(a).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${n}/accum_var`,variable:Ht(()=>fi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedGrads[r].variable,l=this.accumulatedUpdates[r].variable;Ht(()=>{const u=ft(De(s,this.rho),De(oo(o),1-this.rho)),c=De(In(ms(ft(l,this.epsilon)),ms(ft(s,this.epsilon))),o),d=ft(De(l,this.rho),De(oo(c),1-this.rho));s.assign(u),l.assign(d);const p=ft(De(c,-this.learningRate),a);a.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(da(this.accumulatedGrads.map(e=>e.variable)),da(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}b2.className="Adadelta",yu(b2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class v2 extends Cu{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accumulator`,variable:Ht(()=>Ap(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[n];if(i==null)return;const o=this.accumulatedGrads[r].variable;Ht(()=>{const s=ft(o,oo(i));o.assign(s);const l=ft(De(In(i,ms(ft(s,te.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&da(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}v2.className="Adagrad",yu(v2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class x2 extends Cu{constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ht(()=>{this.accBeta1=Ft(n).variable(),this.accBeta2=Ft(r).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ht(()=>{const r=Pt(1,this.accBeta1),a=Pt(1,this.accBeta2);n.forEach((i,o)=>{const s=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Ht(()=>fi(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:Ht(()=>fi(s).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,p=ft(De(c,this.beta1),De(u,1-this.beta1)),f=ft(De(d,this.beta2),De(oo(u),1-this.beta2)),g=In(p,r),y=In(f,a);c.assign(p),d.assign(f);const v=ft(De(In(g,ft(ms(y),this.epsilon)),-this.learningRate),s);s.assign(v)}),this.accBeta1.assign(De(this.accBeta1,this.beta1)),this.accBeta2.assign(De(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&da(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&da(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Ht(()=>{this.accBeta1.assign(Dp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Dp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}x2.className="Adam",yu(x2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class w2 extends Cu{constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ht(()=>{this.iteration=Ft(0).variable(),this.accBeta1=Ft(n).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ht(()=>{const r=Pt(1,this.accBeta1),a=In(-this.learningRate,ft(De(this.iteration,this.decay),1));n.forEach((i,o)=>{const s=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:fi(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:fi(s).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,p=ft(De(c,this.beta1),De(u,1-this.beta1)),f=De(d,this.beta2),g=hi(u),y=G4(f,g);c.assign(p),d.assign(y);const v=ft(De(In(a,r),In(p,ft(y,this.epsilon))),s);s.assign(v)}),this.iteration.assign(ft(this.iteration,1)),this.accBeta1.assign(De(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&da(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&da(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}w2.className="Adamax",yu(w2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $g extends Cu{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=Array.isArray(e)?e[r].tensor:e[n];if(a==null)return;const i=te.registeredVariables[n];Ht(()=>{const o=ft(De(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=hs(Ft(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}$g.className="SGD",yu($g);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class k2 extends $g{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ft(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${n}/momentum`,variable:Ht(()=>fi(a).variable(!1))});const i=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];o!=null&&Ht(()=>{let s;const l=ft(De(this.m,i),o);this.useNesterov?s=ft(De(this.c,ft(o,De(l,this.m))),a):s=ft(De(this.c,l),a),i.assign(l),a.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&da(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}k2.className="Momentum",yu(k2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class S2 extends Cu{constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=te.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${n}/rms`,variable:Ht(()=>fi(a).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${n}/momentum`,variable:Ht(()=>fi(a).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${n}/mg`,variable:Ht(()=>fi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedMeanSquares[r].variable,l=this.accumulatedMoments[r].variable;Ht(()=>{const u=ft(De(s,this.decay),De(oo(o),1-this.decay));if(this.centered){const c=this.accumulatedMeanGrads[r].variable,d=ft(De(c,this.decay),De(o,1-this.decay)),p=In(De(o,this.learningRate),ms(Pt(u,ft(oo(d),this.epsilon)))),f=ft(De(l,this.momentum),p);s.assign(u),c.assign(d),l.assign(f);const g=Pt(a,f);a.assign(g)}else{const c=ft(De(s,this.decay),De(oo(o),1-this.decay)),d=ft(De(l,this.momentum),In(De(o,this.learningRate),ms(ft(c,this.epsilon))));s.assign(c),l.assign(d);const p=Pt(a,d);a.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&da(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&da(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&da(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}S2.className="RMSProp",yu(S2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Iu{static sgd(e){return new $g(e)}static momentum(e,n,r=!1){return new k2(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new S2(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new x2(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new b2(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new w2(e,n,r,a,i)}static adagrad(e,n=.1){return new v2(e,n)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Uhe={sgd:Iu.sgd,momentum:Iu.momentum,adadelta:Iu.adadelta,adagrad:Iu.adagrad,rmsprop:Iu.rmsprop,adamax:Iu.adamax,adam:Iu.adam};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jhe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function RF(){return new Promise(t=>jhe(()=>t()))}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fT(t,e){const n=t[0].length;t.forEach((a,i)=>{j(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),j(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let o=0;o<n;o++)j(o===e||a[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function bs(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var jo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(jo||(jo={}));function $F(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${s}`)}else r[o]=i}return r}function OF(t){const e={FIRST_DIM_SIZE:jo.FIRST_DIM_SIZE,VALUE_ROWIDS:jo.VALUE_ROWIDS,ROW_LENGTHS:jo.ROW_LENGTHS,ROW_SPLITS:jo.ROW_SPLITS,ROW_LIMITS:jo.ROW_LIMITS,ROW_STARTS:jo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function MF(t){return t.length===0?0:t[0]===jo.FIRST_DIM_SIZE?t.length-1:t.length}function PF(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],o=e[a+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${o}`)}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mT=30;function C2(t){return t<=mT?t:Jb(t,Math.floor(Math.sqrt(t)))}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gT(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Og(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(i+1))}return a}function Mg(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):a.push(o);r.push(...a),r.push(0),r.push(...i)}return r}function Pg(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function yT(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function bT(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vT=1.7580993408473768,xT=1.0507009873554805;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wT=.3275911,kT=.254829592,ST=-.284496736,CT=1.421413741,IT=-1.453152027,ET=1.061405429;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ml(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function AF(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function DF(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function LF(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function TT(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function FF(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function BF(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function zF(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const NT="->",Vhe=/->/g,UF=",",jF="...";function _T(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Vhe,"").length)/NT.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${NT}").`);const[r,a]=t.split(NT);j(r.indexOf(jF)===-1,()=>`The ellipsis notation ("${jF}") is not supported yet.`);const i=r.split(UF),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let p=0;p<a.length;++p){const f=a[p];if(!i.some(g=>g.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);s.indexOf(f)===-1&&s.push(f)}for(let p=0;p<r.length;++p){const f=r[p];s.indexOf(f)===-1&&f!==UF&&s.push(f)}const l=new Array(i.length);for(let p=0;p<o;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let f=0;f<i[p].length;++f)l[p].push(s.indexOf(i[p][f]))}const u=s.length,c=a.length,d=[];for(let p=c;p<u;++p)d.push(p);return{allDims:s,summedDims:d,idDims:l}}function RT(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function $T(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let o=0;o<e[a].length;++o)r[e[a][o]]===void 0?r[e[a][o]]=i[o]:j(r[e[a][o]]===i[o],()=>`Expected dimension ${r[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function OT(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let o=0;o<a;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const s=n[o],l=Whe(e,s);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function MT(t){return t.every((e,n)=>e===n)}function Whe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function PT(t,e,n=0){let r=[];if(typeof e=="number")j(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);j(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[i]=t.shape[n]-o}j(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VF(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function WF(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function GF(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function HF(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function qF(t,e){return`size ${t} must be non-negative, not ${e}`}function KF(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function XF(t,e){const n=be(t),r=be(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function YF(t,e){const n=be(t),r=be(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function AT(){return"segment ids must be >= 0"}function QF(){return"segment ids are not increasing"}function ZF(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function JF(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e9(t,e){let n=!1,r;for(t<=mT?(r=t,n=!0):r=Jb(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Jb(t,r+1);return r}function t9(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function DT(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<a;d++)s.push(e.shape[d]);for(let d=n+1;d<i;d++)s.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}const Ghe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:DT,computeOutShape:t9,segOpComputeOptimalWindowSize:e9},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kc(t){try{return t.map(e=>ol(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function n9(t){return t.map(e=>ds(e))}const r9=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:kT,ERF_A2:ST,ERF_A3:CT,ERF_A4:IT,ERF_A5:ET,ERF_P:wT,PARALLELIZE_THRESHOLD:mT,get RowPartitionType(){return jo},SELU_SCALE:xT,SELU_SCALEALPHA:vT,applyActivation:h2,assertAndGetBroadcastShape:zt,assertAxesAreInnerMostDims:Qr,assertParamsConsistent:fT,assignToTypedArray:FF,axesAreInnerMostDims:M4,calculateShapes:Op,checkEinsumDimSizes:$T,checkPadOnDimRoundingMode:io,combineLocations:eL,combineRaggedTensorToTensorShapes:$F,complexWithEvenIndex:DF,complexWithOddIndex:LF,computeConv2DInfo:Br,computeConv3DInfo:bu,computeDefaultPad:E4,computeDilation2DInfo:vg,computeOptimalWindowSize:C2,computeOutAndReduceShapes:Yr,computeOutShape:bs,computePool2DInfo:ao,computePool3DInfo:dl,convertConv2DDataFormat:pl,decodeEinsumEquation:_T,eitherStridesOrDilationsAreOne:pa,expandShapeToKeepDim:_r,exponent:zF,exponents:BF,fromStringArrayToUint8:n9,fromUint8ToStringArray:Kc,getAxesPermutation:dr,getBroadcastDims:Uc,getComplexWithIndex:TT,getEinsumComputePath:OT,getEinsumPermutation:RT,getFusedBiasGradient:p2,getFusedDyActivation:d2,getImageCenter:gT,getInnerMostAxes:pr,getPermuted:Mg,getRaggedRank:MF,getReductionAxes:d4,getReshaped:Og,getReshapedPermuted:Pg,getRowPartitionTypesHelper:OF,getSliceBeginCoords:yT,getSliceSize:bT,getSparseFillEmptyRowsIndicesDenseShapeMismatch:VF,getSparseFillEmptyRowsNegativeIndexErrorMessage:WF,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:GF,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:KF,getSparseReshapeInputOutputMismatchErrorMessage:YF,getSparseReshapeInputOutputMultipleErrorMessage:XF,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:HF,getSparseReshapeNegativeOutputDimErrorMessage:qF,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:JF,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:AT,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:QF,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:ZF,getUndoAxesPermutation:Sg,isIdentityPermutation:MT,log:Vie,mergeRealAndImagArrays:ml,prepareAndValidate:Qx,prepareSplitSize:PT,segment_util:Ghe,shouldFuse:f2,slice_util:u8,splitRealAndImagArrays:AF,tupleValuesAreOne:xg,upcastType:Xa,validateDefaultValueShape:PF,validateInput:f4,validateUpdateShape:h4,warn:Oi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hhe=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:m2,nonMaxSuppressionV4Impl:g2,nonMaxSuppressionV5Impl:y2,whereImpl:u2},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qhe=Object.freeze(Object.defineProperty({__proto__:null,Abs:tv,Acos:rm,Acosh:am,AdadeltaOptimizer:b2,AdagradOptimizer:v2,AdamOptimizer:x2,AdamaxOptimizer:w2,Add:Sp,AddN:nv,All:rv,Any:av,ArgMax:iv,ArgMin:ov,Asin:im,Asinh:om,Atan:sm,Atan2:um,Atanh:lm,AvgPool:sv,AvgPool3D:lv,AvgPool3DGrad:k3,AvgPoolGrad:w3,BatchMatMul:uv,BatchToSpaceND:cv,Bincount:dv,BroadcastArgs:pv,BroadcastTo:Lie,Cast:cm,Ceil:dm,ClipByValue:pm,Complex:hv,ComplexAbs:fv,Concat:mv,Conv2D:gv,Conv2DBackpropFilter:yv,Conv2DBackpropInput:bv,Conv3D:vv,Conv3DBackpropFilterV2:S3,Conv3DBackpropInputV2:xv,Cos:hm,Cosh:fm,CropAndResize:Sv,Cumprod:wv,Cumsum:kv,DataStorage:p3,DenseBincount:Cv,DepthToSpace:Iv,DepthwiseConv2dNative:Ev,DepthwiseConv2dNativeBackpropFilter:Tv,DepthwiseConv2dNativeBackpropInput:Nv,Diag:_v,Dilation2D:Rv,Dilation2DBackpropFilter:I3,Dilation2DBackpropInput:C3,get ENV(){return b3},Einsum:$v,Elu:gm,EluGrad:E3,Environment:oD,Equal:bm,Erf:ym,Exp:vm,ExpandDims:Ov,Expm1:xm,FFT:Mv,Fill:Pv,FlipLeftRight:Av,Floor:wm,FloorDiv:km,FromPixels:Bx,FusedBatchNorm:Dv,FusedConv2D:sg,FusedDepthwiseConv2D:lg,GatherNd:Fv,GatherV2:Lv,Greater:Sm,GreaterEqual:Cm,IFFT:Bv,Identity:Im,Imag:zv,IsFinite:Em,IsInf:Tm,IsNan:Nm,KernelBackend:Xb,LRN:Vv,LRNGrad:T3,LeakyRelu:Uv,Less:_m,LessEqual:Rm,LinSpace:jv,Log:$m,Log1p:Om,LogSoftmax:Bie,LogicalAnd:Mm,LogicalNot:Pm,LogicalOr:Am,LogicalXor:Fie,LowerBound:zie,Max:Wv,MaxPool:Gv,MaxPool3D:Hv,MaxPool3DGrad:_3,MaxPoolGrad:N3,MaxPoolWithArgmax:qv,Maximum:Dm,Mean:Kv,Min:Xv,Minimum:Lm,MirrorPad:Yv,Mod:Fm,MomentumOptimizer:k2,Multinomial:Qv,Multiply:Bm,Neg:Zv,NonMaxSuppressionV3:Jv,NonMaxSuppressionV4:ex,NonMaxSuppressionV5:tx,NotEqual:zm,OP_SCOPE_SUFFIX:X3,OneHot:rx,OnesLike:nx,Optimizer:Cu,OptimizerConstructors:Iu,Pack:ax,PadV2:ix,Pool:Uie,Pow:Um,Prelu:ox,Prod:sx,RMSPropOptimizer:S2,RaggedGather:lx,RaggedTensorToTensor:ux,Range:cx,get Rank(){return B3},Real:dx,RealDiv:mm,Reciprocal:jm,get Reduction(){return Oa},Relu:Vm,Relu6:Wm,Reshape:px,ResizeBilinear:fx,ResizeBilinearGrad:$3,ResizeNearestNeighbor:hx,ResizeNearestNeighborGrad:R3,Reverse:mx,RotateWithOffset:zx,Round:Gm,Rsqrt:Hm,SGDOptimizer:$g,ScatterNd:gx,SearchSorted:yx,Select:bx,Selu:qm,Sigmoid:Qm,Sign:Ym,Sin:Km,Sinh:Xm,Slice:vx,Softmax:Sx,Softplus:Zm,SpaceToBatchND:wx,SparseFillEmptyRows:Cx,SparseReshape:Ix,SparseSegmentMean:Ex,SparseSegmentSum:Tx,SparseToDense:Nx,SplitV:kx,Sqrt:Jm,Square:O3,SquaredDifference:eg,Step:ig,StridedSlice:_x,StringNGrams:Rx,StringSplit:$x,StringToHashBucketFast:Ox,Sub:tg,Sum:xx,Tan:ng,Tanh:rg,Tensor:Hn,TensorBuffer:Nr,Tile:ag,TopK:Mx,Transform:Px,Transpose:Cp,Unique:Ax,Unpack:Dx,UnsortedSegmentSum:Lx,UpperBound:jie,Variable:fg,ZerosLike:Fx,_FusedMatMul:og,abs:hi,acos:h8,acosh:f8,add:ft,addN:m8,all:g8,any:y8,argMax:b8,argMin:v8,asin:x8,asinh:w8,atan:k8,atan2:S8,atanh:C8,avgPool:N4,avgPool3d:I8,backend:Pse,backend_util:r9,basicLSTMCell:E8,batchNorm:wg,batchNorm2d:T8,batchNorm3d:N8,batchNorm4d:_8,batchToSpaceND:_4,bincount:R4,booleanMaskAsync:pF,broadcastArgs:R8,broadcastTo:Pp,broadcast_util:Vse,browser:Xse,buffer:St,cast:Bn,ceil:$8,clipByValue:O8,clone:ul,complex:sl,concat:ha,concat1d:M8,concat2d:P8,concat3d:A8,concat4d:D8,conv1d:L8,conv2d:kg,conv2dTranspose:B8,conv3d:z8,conv3dTranspose:U8,copyRegisteredKernels:qie,cos:j8,cosh:V8,cosineWindow:c2,cumprod:W8,cumsum:G8,customGrad:gs,denseBincount:H8,deprecationWarn:Sse,depthToSpace:q8,depthwiseConv2d:e2,device_util:woe,diag:K8,dilation2d:X8,disableDeprecationWarnings:kse,dispose:da,disposeVariables:Cse,div:In,divNoNan:Y8,dot:Q8,dropout:yF,einsum:Z8,elu:O4,enableDebugMode:wse,enableProdMode:xse,enclosingPowerOfTwo:dT,engine:cl,env:fe,equal:$4,erf:J8,euclideanNorm:nL,exp:vu,expandDims:hl,expm1:rL,eye:P4,fft:s2,fill:Ap,findBackend:Ose,findBackendFactory:Mse,floor:A4,floorDiv:I4,fused:vF,gather:D4,gatherND:gF,gather_util:Yse,getBackend:Rse,getGradient:M3,getKernel:Ux,getKernelsForBackend:jx,grad:tce,grads:nce,greater:Ig,greaterEqual:L4,ifft:_g,imag:yg,image:hT,inTopKAsync:bF,io:u4,irfft:sT,isFinite:aL,isInf:iL,isNaN:oL,keep:hs,kernel_impls:Hhe,leakyRelu:F4,less:sL,lessEqual:n2,linalg:EF,linspace:lL,localResponseNormalization:uL,log:Fp,log1p:B4,logSigmoid:dL,logSoftmax:pL,logSumExp:U4,logicalAnd:Eg,logicalNot:j4,logicalOr:V4,logicalXor:hL,losses:TF,lowerBound:fL,matMul:ln,math:jse,max:Hc,maxPool:W4,maxPool3d:mL,maxPoolWithArgmax:gL,maximum:G4,mean:Tg,memory:Ise,meshgrid:yL,min:t2,minimum:H4,mirrorPad:bL,mod:vL,moments:xL,movingAverage:hF,mul:De,multiRNNCell:wL,multinomial:kL,neg:fs,nextFrame:RF,norm:Cg,notEqual:q4,oneHot:Yx,ones:wu,onesLike:SL,op:ee,outerProduct:CL,pad:Bp,pad1d:IL,pad2d:EL,pad3d:TL,pad4d:NL,pool:_L,pow:Dp,prelu:X4,print:a4,prod:RL,profile:Ese,raggedGather:$L,raggedTensorToTensor:OL,rand:ML,randomGamma:DL,randomNormal:rT,randomStandardNormal:LL,randomUniform:aT,range:zp,ready:_se,real:$p,reciprocal:FL,registerBackend:c4,registerGradient:Wie,registerKernel:Vx,relu:Ng,relu6:iT,removeBackend:$se,reshape:Se,reverse:ku,reverse1d:BL,reverse2d:zL,reverse3d:UL,reverse4d:jL,rfft:l2,round:oT,rsqrt:VL,scalar:Ft,scatterND:fF,scatter_util:Qse,searchSorted:i2,selu:WL,separableConv2d:GL,serialization:nle,setBackend:Nse,setPlatform:Ase,setdiff1dAsync:HL,sigmoid:Wc,sign:qL,signal:IF,sin:KL,sinh:XL,slice:xn,slice1d:YL,slice2d:QL,slice3d:ZL,slice4d:JL,slice_util:u8,softmax:eF,softplus:z4,spaceToBatchND:K4,sparse:NF,sparseToDense:mF,spectral:CF,split:Up,sqrt:ms,square:oo,squaredDifference:lT,squeeze:Rg,stack:ys,step:uT,stridedSlice:tF,string:_F,sub:Pt,sum:En,sumOutType:qx,tan:nF,tanh:Jx,tensor:Uo,tensor1d:so,tensor2d:jp,tensor3d:p4,tensor4d:rF,tensor5d:aF,tensor6d:iF,tensor_util:goe,test_util:ple,tidy:Ht,tile:Lp,time:Tse,topk:oF,train:Uhe,transpose:bg,truncatedNormal:sF,unique:lF,unregisterGradient:Hie,unregisterKernel:Gie,unsortedSegmentSum:uF,unstack:Su,upcastType:Xa,upperBound:cF,util:noe,valueAndGrad:rce,valueAndGrads:ace,variable:dF,variableGrads:cL,version_core:hle,where:Gc,whereAsync:cT,zeros:xu,zerosLike:fi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Khe=fe();Khe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
* =============================================================================
*/var lo;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(lo||(lo={}));var a9;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(a9||(a9={}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xhe={};function i9(t){return Xhe[t]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const s=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?s+1:i.inputIndexEnd;if(i.type==="tensor")return Ma(e.inputNames[i.inputIndexStart],n,r,a);if(i.type==="tensors")return e.inputNames.slice(s,l).map(d=>Ma(d,n,r,a));const u=Ma(e.inputNames.slice(s)[0],n,r,a),c=u.dataSync();return i.type==="number"?c[0]:$i(u.shape,c)}const o=e.attrParams[t];return o&&o.value}function Ma(t,e,n,r){const[a,i]=mi(t);if(r!=null){const s=r.getHashTableHandleByName(a);if(s!=null)return s}const o=n.currentContextIds.find(s=>!!e[I2(a,s)]);return o!==void 0?e[I2(a,o)][i]:void 0}function Yhe(t,e,n){return e[I2(t,n.currentContextId)]}function vs(t,e){const[n,r,a]=mi(t);return[I2(n,e&&e.currentContextId),r,a]}function I2(t,e){return e?`${t}-${e}`:t}function mi(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,a=Number(e[e.length-1]);return[n,a,r]}function E2(t,e,n){let r=R("pad",t,e,n);if(r==="explicit"){r=R("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function gl(t){return t.kept?t:ul(t)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qhe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Zhe=Object.freeze(Object.defineProperty({__proto__:null,json:Qhe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jhe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],efe=Object.freeze(Object.defineProperty({__proto__:null,json:Jhe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tfe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],nfe=Object.freeze(Object.defineProperty({__proto__:null,json:tfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rfe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],afe=Object.freeze(Object.defineProperty({__proto__:null,json:rfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ife=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],ofe=Object.freeze(Object.defineProperty({__proto__:null,json:ife},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sfe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],lfe=Object.freeze(Object.defineProperty({__proto__:null,json:sfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ufe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],cfe=Object.freeze(Object.defineProperty({__proto__:null,json:ufe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dfe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],pfe=Object.freeze(Object.defineProperty({__proto__:null,json:dfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hfe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],ffe=Object.freeze(Object.defineProperty({__proto__:null,json:hfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mfe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],gfe=Object.freeze(Object.defineProperty({__proto__:null,json:mfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yfe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bfe=Object.freeze(Object.defineProperty({__proto__:null,json:yfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vfe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],xfe=Object.freeze(Object.defineProperty({__proto__:null,json:vfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wfe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],kfe=Object.freeze(Object.defineProperty({__proto__:null,json:wfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sfe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Cfe=Object.freeze(Object.defineProperty({__proto__:null,json:Sfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ife=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Efe=Object.freeze(Object.defineProperty({__proto__:null,json:Ife},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tfe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Nfe=Object.freeze(Object.defineProperty({__proto__:null,json:Tfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _fe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Rfe=Object.freeze(Object.defineProperty({__proto__:null,json:_fe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $fe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Ofe=Object.freeze(Object.defineProperty({__proto__:null,json:$fe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mfe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Pfe=Object.freeze(Object.defineProperty({__proto__:null,json:Mfe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class o9{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[Zhe,efe,nfe,afe,ofe,lfe,cfe,pfe,ffe,gfe,bfe,xfe,kfe,Cfe,Efe,Nfe,Rfe,Ofe,Pfe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],o=[],s=r.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?a.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&o.push(y[v.name]),y),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const p=Object.keys(s);p.forEach(y=>{const v=s[y];v.inputNames.forEach((b,x)=>{const[w,,S]=vs(b),C=s[w];if(C.outputs!=null){const E=C.outputs.indexOf(S);if(E!==-1){const _=`${w}:${E}`;v.inputNames[x]=_}}v.inputs.push(C),C.children.push(v)})}),Object.keys(d).length===0?p.forEach(y=>{const v=s[y];v.children.length===0&&u.push(v)}):Object.keys(d).forEach(y=>{const[v]=vs(y),b=s[v];b!=null&&(b.signatureKey=d[y],u.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[v]=vs(y),b=s[v];b&&(b.signatureKey=c[y],l.push(b))}):l=a;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const g={nodes:s,inputs:l,outputs:u,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(g.initNodes=o),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=i9(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const o=i.type;let s;switch(i.type){case"string":s=LT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=LT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=GT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=GT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=BT(e.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=BT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=WT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=WT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=FT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=FT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=qT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=qT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=VT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=VT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=HT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=HT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=UT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=UT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=jT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=jT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=l9(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=l9(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:s,type:o},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((c,d)=>(c[d.name]=this.mapNode(d),d.op==="Const"&&a.push(c[d.name]),c),{}));const o=[],s=[];e.signature.inputArg.forEach(c=>{const[d]=vs(c.name),p={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:zT(c.type),type:"dtype"}},children:[]};p.signatureKey=c.name,o.push(p),i[d]=p}),Object.keys(i).forEach(c=>{const d=i[c];d.inputNames.forEach((p,f)=>{const[g,,y]=vs(p),v=i[g];if(v.outputs!=null){const b=v.outputs.indexOf(y);if(b!==-1){const x=`${g}:${b}`;d.inputNames[f]=x}}d.inputs.push(v),v.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(c=>{const[d,p]=vs(l[c.name]),f=i[d];f!=null&&(f.defaultOutput=p,s.push(f))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function Afe(t){const e=fe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function s9(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):Afe(t);return e?n:n.toLowerCase()}function LT(t,e,n,r=!1){const a=t[e];return a!=null?s9(a.s,r):n}function FT(t,e,n){const r=t[e];return r?r.b:n}function BT(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function zT(t){switch(typeof t=="string"&&(t=lo[t]),t){case lo.DT_FLOAT:case lo.DT_HALF:return"float32";case lo.DT_INT32:case lo.DT_INT64:case lo.DT_INT8:case lo.DT_UINT8:return"int32";case lo.DT_BOOL:return"bool";case lo.DT_DOUBLE:return"float32";case lo.DT_STRING:return"string";default:return null}}function l9(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function UT(t,e,n){const r=t[e];return r&&r.type?zT(r.type):n}function jT(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>zT(a)):n}function u9(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function VT(t,e,n){const r=t[e];return r&&r.shape?u9(r.shape):n}function WT(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function GT(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>s9(i,r)):n}function HT(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>u9(a)):n}function qT(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Dfe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return Ma(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Ma(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return BT(this.node.rawAttrs,e,n);if(r.s!=null)return LT(this.node.rawAttrs,e,n);if(r.b!=null)return FT(this.node.rawAttrs,e,n);if(r.shape!=null)return VT(this.node.rawAttrs,e,n);if(r.type!=null)return UT(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return WT(this.node.rawAttrs,e,n);if(r.list.s!=null)return GT(this.node.rawAttrs,e,n);if(r.list.shape!=null)return HT(this.node.rawAttrs,e,n);if(r.list.b!=null)return qT(this.node.rawAttrs,e,n);if(r.list.type!=null)return jT(this.node.rawAttrs,e,n)}return n}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fa=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:X3,abs:hi,acos:h8,acosh:f8,add:ft,addN:m8,all:g8,any:y8,argMax:b8,argMin:v8,asin:x8,asinh:w8,atan:k8,atan2:S8,atanh:C8,avgPool:N4,avgPool3d:I8,basicLSTMCell:E8,batchNorm:wg,batchNorm2d:T8,batchNorm3d:N8,batchNorm4d:_8,batchToSpaceND:_4,bincount:R4,booleanMaskAsync:pF,broadcastArgs:R8,broadcastTo:Pp,buffer:St,cast:Bn,ceil:$8,clipByValue:O8,clone:ul,complex:sl,concat:ha,concat1d:M8,concat2d:P8,concat3d:A8,concat4d:D8,conv1d:L8,conv2d:kg,conv2dTranspose:B8,conv3d:z8,conv3dTranspose:U8,cos:j8,cosh:V8,cosineWindow:c2,cumprod:W8,cumsum:G8,denseBincount:H8,depthToSpace:q8,depthwiseConv2d:e2,diag:K8,dilation2d:X8,div:In,divNoNan:Y8,dot:Q8,dropout:yF,einsum:Z8,elu:O4,enclosingPowerOfTwo:dT,equal:$4,erf:J8,euclideanNorm:nL,exp:vu,expandDims:hl,expm1:rL,eye:P4,fft:s2,fill:Ap,floor:A4,floorDiv:I4,fused:vF,gather:D4,gatherND:gF,greater:Ig,greaterEqual:L4,ifft:_g,imag:yg,image:hT,inTopKAsync:bF,irfft:sT,isFinite:aL,isInf:iL,isNaN:oL,leakyRelu:F4,less:sL,lessEqual:n2,linalg:EF,linspace:lL,localResponseNormalization:uL,log:Fp,log1p:B4,logSigmoid:dL,logSoftmax:pL,logSumExp:U4,logicalAnd:Eg,logicalNot:j4,logicalOr:V4,logicalXor:hL,losses:TF,lowerBound:fL,matMul:ln,max:Hc,maxPool:W4,maxPool3d:mL,maxPoolWithArgmax:gL,maximum:G4,mean:Tg,meshgrid:yL,min:t2,minimum:H4,mirrorPad:bL,mod:vL,moments:xL,movingAverage:hF,mul:De,multiRNNCell:wL,multinomial:kL,neg:fs,norm:Cg,notEqual:q4,oneHot:Yx,ones:wu,onesLike:SL,op:ee,outerProduct:CL,pad:Bp,pad1d:IL,pad2d:EL,pad3d:TL,pad4d:NL,pool:_L,pow:Dp,prelu:X4,print:a4,prod:RL,raggedGather:$L,raggedTensorToTensor:OL,rand:ML,randomGamma:DL,randomNormal:rT,randomStandardNormal:LL,randomUniform:aT,range:zp,real:$p,reciprocal:FL,relu:Ng,relu6:iT,reshape:Se,reverse:ku,reverse1d:BL,reverse2d:zL,reverse3d:UL,reverse4d:jL,rfft:l2,round:oT,rsqrt:VL,scalar:Ft,scatterND:fF,searchSorted:i2,selu:WL,separableConv2d:GL,setdiff1dAsync:HL,sigmoid:Wc,sign:qL,signal:IF,sin:KL,sinh:XL,slice:xn,slice1d:YL,slice2d:QL,slice3d:ZL,slice4d:JL,softmax:eF,softplus:z4,spaceToBatchND:K4,sparse:NF,sparseToDense:mF,spectral:CF,split:Up,sqrt:ms,square:oo,squaredDifference:lT,squeeze:Rg,stack:ys,step:uT,stridedSlice:tF,string:_F,sub:Pt,sum:En,tan:nF,tanh:Jx,tensor:Uo,tensor1d:so,tensor2d:jp,tensor3d:p4,tensor4d:rF,tensor5d:aF,tensor6d:iF,tile:Lp,topk:oF,transpose:bg,truncatedNormal:sF,unique:lF,unsortedSegmentSum:uF,unstack:Su,upperBound:cF,variable:dF,where:Gc,whereAsync:cT,zeros:xu,zerosLike:fi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lfe=(t,e,n,r=fa)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(R("a",t,e,n),R("b",t,e,n))];case"AddN":return[r.addN(R("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(R("a",t,e,n),R("b",t,e,n))];case"Mul":return[r.mul(R("a",t,e,n),R("b",t,e,n))];case"RealDiv":case"Div":return[r.div(R("a",t,e,n),R("b",t,e,n))];case"DivNoNan":return[r.divNoNan(R("a",t,e,n),R("b",t,e,n))];case"FloorDiv":return[r.floorDiv(R("a",t,e,n),R("b",t,e,n))];case"Sub":return[r.sub(R("a",t,e,n),R("b",t,e,n))];case"Minimum":return[r.minimum(R("a",t,e,n),R("b",t,e,n))];case"Maximum":return[r.maximum(R("a",t,e,n),R("b",t,e,n))];case"Pow":return[r.pow(R("a",t,e,n),R("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(R("a",t,e,n),R("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ffe=(t,e,n,r=fa)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(R("x",t,e,n))];case"Acos":return[r.acos(R("x",t,e,n))];case"Acosh":return[r.acosh(R("x",t,e,n))];case"Asin":return[r.asin(R("x",t,e,n))];case"Asinh":return[r.asinh(R("x",t,e,n))];case"Atan":return[r.atan(R("x",t,e,n))];case"Atan2":return[r.atan2(R("x",t,e,n),R("y",t,e,n))];case"Atanh":return[r.atanh(R("x",t,e,n))];case"Ceil":return[r.ceil(R("x",t,e,n))];case"Complex":return[r.complex(R("real",t,e,n),R("imag",t,e,n))];case"Cos":return[r.cos(R("x",t,e,n))];case"Cosh":return[r.cosh(R("x",t,e,n))];case"Elu":return[r.elu(R("x",t,e,n))];case"Erf":return[r.erf(R("x",t,e,n))];case"Exp":return[r.exp(R("x",t,e,n))];case"Expm1":return[r.expm1(R("x",t,e,n))];case"Floor":return[r.floor(R("x",t,e,n))];case"Log":return[r.log(R("x",t,e,n))];case"Log1p":return[r.log1p(R("x",t,e,n))];case"Imag":return[r.imag(R("x",t,e,n))];case"Neg":return[r.neg(R("x",t,e,n))];case"Reciprocal":return[r.reciprocal(R("x",t,e,n))];case"Real":return[r.real(R("x",t,e,n))];case"Relu":return[r.relu(R("x",t,e,n))];case"Round":return[r.round(R("x",t,e,n))];case"Selu":return[r.selu(R("x",t,e,n))];case"Sigmoid":return[r.sigmoid(R("x",t,e,n))];case"Sin":return[r.sin(R("x",t,e,n))];case"Sign":return[r.sign(R("x",t,e,n))];case"Sinh":return[r.sinh(R("x",t,e,n))];case"Softplus":return[r.softplus(R("x",t,e,n))];case"Sqrt":return[r.sqrt(R("x",t,e,n))];case"Square":return[r.square(R("x",t,e,n))];case"Tanh":return[r.tanh(R("x",t,e,n))];case"Tan":return[r.tan(R("x",t,e,n))];case"ClipByValue":return[r.clipByValue(R("x",t,e,n),R("clipValueMin",t,e,n),R("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(R("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Ma(t.inputNames[0],e,n))];case"Prod":return[r.prod(R("x",t,e,n),R("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu(R("x",t,e,n),R("alpha",t,e,n))];case"Prelu":return[r.prelu(R("x",t,e,n),R("alpha",t,e,n))];case"IsNan":return[r.isNaN(Ma(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){j(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];j(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function c9(t){return!(typeof t=="number"||t.some(e=>e<0))}function Ag(t,e,n){let r=KT(t,n);const a=!c9(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=KT(i.shape,r)}),!c9(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function KT(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Bfe{constructor(e,n,r,a,i,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Ft(0),hs(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),uo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,hs(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return Uo([],[0].concat(this.elementShape));const r=this.readMany(e);return uo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ys(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Uo([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return uo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),ha(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Su(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];Ht(()=>{n=Se(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:a[l-1],0],c=[1,e[l],i];o[l]=Se(xn(n,u,c),this.elementShape)}return o});const s=[];for(let l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sd{constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);uo(n,i.shape,"TensorList shape mismatch: "),hs(i)}),this.idTensor=Ft(0),this.maxNumElements=a,hs(this.idTensor)}get id(){return this.idTensor.id}copy(){return new sd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);uo(e,this.elementShape,"TensorList shape mismatch: ");const a=Ag(this.elementShape,this.tensors,e);return Ht(()=>{const i=this.tensors.map(o=>Se(o,a));return ys(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Ag(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,uo(a.shape,e,"TensorList shape mismatch: "),Se(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(uo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");hs(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new sd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);uo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=Ag(this.elementShape,this.tensors,n);return Se(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);uo(this.elementShape,n.shape,"TensorList shape mismatch: "),hs(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);uo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=Ag(this.elementShape,this.tensors,r);return e.length===0?Uo([],[0].concat(a)):Ht(()=>{const i=e.map(o=>Se(this.tensors[o],a));return ys(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);uo(this.elementShape,n,"TensorList shape mismatch: ");const r=Ag(this.elementShape,this.tensors,n);return this.size()===0?Uo([],[0].concat(r)):Ht(()=>{const a=this.tensors.map(i=>Se(i,r));return ha(a,0)})}}function zfe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);uo(a,e,"TensorList shape mismatch: ");const i=Su(t);return new sd(i,e,r)}function Ufe(t,e,n,r){return new sd([],t,e,r)}function jfe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new sd([],n,t.dtype,r),o=Su(t,0);return e.forEach((s,l)=>{i.setItem(s,o[l])}),i}function Vfe(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=KT(i,n),s=r===0?0:t.size/r,l=Ht(()=>{const c=[];t=Se(t,[1,r,s]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:a[d-1],0],f=[1,e[d],s];c[d]=Se(xn(t,p,f),o)}return t.dispose(),c}),u=new sd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Wfe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=R("thenBranch",t,e,n),a=R("elseBranch",t,e,n),i=R("cond",t,e,n),o=R("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=R("body",t,e,n),a=R("cond",t,e,n),i=R("args",t,e,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&s.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const p=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const r=R("pred",t,e,n);return[gl(r)]}case"Switch":{const r=R("pred",t,e,n);let a=R("data",t,e,n);return a.kept||(a=gl(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Ma(a,e,n)!==void 0);if(r){const a=Ma(r,e,n);return[gl(a)]}return}case"Enter":{const r=R("frameName",t,e,n),a=R("tensor",t,e,n);return n.enterFrame(r),[gl(a)]}case"Exit":{const r=R("tensor",t,e,n);return n.exitFrame(),[gl(r)]}case"NextIteration":{const r=R("tensor",t,e,n);return n.nextIteration(),[gl(r)]}case"TensorArrayV3":{const r=R("size",t,e,n),a=R("dtype",t,e,n),i=R("elementShape",t,e,n),o=R("dynamicSize",t,e,n),s=R("clearAfterRead",t,e,n),l=R("identicalElementShapes",t,e,n),u=R("name",t,e,n),c=new Bfe(u,a,r,i,l,o,s);return n.addTensorArray(c),[c.idTensor,Ft(1)]}case"TensorArrayWriteV3":{const r=R("tensorArrayId",t,e,n),a=R("index",t,e,n),i=R("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{const r=R("tensorArrayId",t,e,n),a=R("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=R("tensorArrayId",t,e,n),a=R("indices",t,e,n),i=R("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=R("tensorArrayId",t,e,n),a=R("indices",t,e,n),i=R("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=R("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=R("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=R("tensorArrayId",t,e,n),a=R("tensor",t,e,n),i=R("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{const r=R("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[Ft(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=R("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=R("tensorListId",t,e,n),a=R("index",t,e,n),i=R("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{const r=R("tensorListId",t,e,n),a=R("index",t,e,n),i=R("elementShape",t,e,n),o=R("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=R("indices",t,e,n),a=R("tensor",t,e,n),i=R("elementShape",t,e,n),o=R("numElements",t,e,n),s=jfe(a,r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=R("elementShape",t,e,n),a=R("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=R(i,t,e,n),s=t.op==="TensorListReserve"?-1:o,l=Ufe(r,a,o,s);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=R("tensorListId",t,e,n),a=R("indices",t,e,n),i=R("elementShape",t,e,n),o=R("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,o,i)]}case"TensorListStack":{const r=R("tensorListId",t,e,n),a=R("elementShape",t,e,n),i=R("elementDType",t,e,n),o=R("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,o)]}case"TensorListFromTensor":{const r=R("tensor",t,e,n),a=R("elementShape",t,e,n),i=R("elementDType",t,e,n),o=zfe(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=R("tensorListId",t,e,n),a=n.getTensorList(r.id),i=R("dtype",t,e,n),o=R("elementShape",t,e,n);return[a.concat(i,o)]}case"TensorListPushBack":{const r=R("tensorListId",t,e,n),a=R("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=R("tensorListId",t,e,n),a=R("elementShape",t,e,n),i=R("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=R("tensor",t,e,n),a=R("elementShape",t,e,n),i=R("lengths",t,e,n),o=Vfe(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=R("tensorListId",t,e,n),a=n.getTensorList(r.id);return[Ft(a.size(),"int32")]}case"TensorListResize":{const r=R("tensorListId",t,e,n),a=R("size",t,e,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d9(t,e,n){const[r,a]=R("fusedOps",t,e,n),i=r==="biasadd",o=!i,s=a==="prelu",l=r==="fusedbatchnorm",u=R("numArgs",t,e,n);if(i){if(s&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=R("strides",t,e,n),d=E2(t,e,n),p=R("dataFormat",t,e,n).toUpperCase(),f=R("dilations",t,e,n);let[g,y]=R("args",t,e,n);o&&(y=g,g=void 0);const v=R("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:p,dilations:f,biasArg:g,preluArg:y,activationFunc:a,leakyreluAlpha:v}}const Gfe=(t,e,n,r=fa)=>{switch(t.op){case"Conv1D":{const a=R("stride",t,e,n),i=R("pad",t,e,n),o=R("dataFormat",t,e,n).toUpperCase(),s=R("dilation",t,e,n);return[r.conv1d(R("x",t,e,n),R("filter",t,e,n),a,i,o,s)]}case"Conv2D":{const a=R("strides",t,e,n),i=E2(t,e,n),o=R("dataFormat",t,e,n).toUpperCase(),s=R("dilations",t,e,n);return[r.conv2d(R("x",t,e,n),R("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=d9(t,e,n);return[r.fused.conv2d({x:R("x",t,e,n),filter:R("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=d9(t,e,n);return[r.fused.depthwiseConv2d({x:R("x",t,e,n),filter:R("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=R("outputShape",t,e,n),i=R("strides",t,e,n),o=E2(t,e,n);return[r.conv2dTranspose(R("x",t,e,n),R("filter",t,e,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=R("strides",t,e,n),i=E2(t,e,n),o=R("dilations",t,e,n),s=R("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(R("input",t,e,n),R("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("dataFormat",t,e,n).toUpperCase(),s=R("dilations",t,e,n);return[r.conv3d(R("x",t,e,n),R("filter",t,e,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.avgPool(R("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.maxPool(R("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n),s=R("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(R("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i,s);return[l,u]}case"AvgPool3D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.avgPool3d(R("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.maxPool3d(R("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("dilations",t,e,n),s=a[1],l=a[2],u=o[1],c=o[2];return[r.dilation2d(R("x",t,e,n),R("filter",t,e,n),[s,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hfe=(t,e,n,r=fa)=>{switch(t.op){case"Fill":{const a=R("shape",t,e,n),i=R("dtype",t,e,n),o=R("value",t,e,n);return[r.fill(a,o,i)]}case"LinSpace":{const a=R("start",t,e,n),i=R("stop",t,e,n),o=R("num",t,e,n);return[r.linspace(a,i,o)]}case"Multinomial":{const a=R("logits",t,e,n),i=R("numSamples",t,e,n),o=R("seed",t,e,n);return[r.multinomial(a,i,o)]}case"OneHot":{const a=R("indices",t,e,n),i=R("depth",t,e,n),o=R("onValue",t,e,n),s=R("offValue",t,e,n),l=R("dtype",t,e,n);return[r.oneHot(a,i,o,s,l)]}case"Ones":return[r.ones(R("shape",t,e,n),R("dtype",t,e,n))];case"OnesLike":return[r.onesLike(R("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(R("shape",t,e,n),R("dtype",t,e,n),R("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(R("shape",t,e,n),R("minval",t,e,n),R("maxval",t,e,n),R("dtype",t,e,n))];case"Range":{const a=R("start",t,e,n),i=R("stop",t,e,n),o=R("step",t,e,n);return[r.range(a,i,o,R("dtype",t,e,n))]}case"TruncatedNormal":{const a=R("shape",t,e,n),i=R("mean",t,e,n),o=R("stdDev",t,e,n),s=R("seed",t,e,n);return[r.truncatedNormal(a,i,o,R("dtype",t,e,n),s)]}case"Zeros":return[r.zeros(R("shape",t,e,n),R("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(R("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XT(t,e,n){const r=R("boxes",t,e,n),a=R("scores",t,e,n),i=R("maxOutputSize",t,e,n),o=R("iouThreshold",t,e,n),s=R("scoreThreshold",t,e,n),l=R("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:l}}const qfe=async(t,e,n,r,a=fa)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=XT(t,e,n),d=await a.image.nonMaxSuppressionWithScoreAsync(i,o,s,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=XT(t,e,n),c=R("padToMaxOutputSize",t,e,n),d=await a.image.nonMaxSuppressionPaddedAsync(i,o,s,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=XT(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,o,s,l,u)]}case"Where":{const i=a.cast(R("condition",t,e,n),"bool"),o=[await a.whereAsync(i)];return i.dispose(),o}case"ListDiff":return a.setdiff1dAsync(R("x",t,e,n),R("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Kfe=(t,e,n,r=fa)=>{switch(t.op){case"LowerBound":{const a=R("sortedSequence",t,e,n),i=R("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=R("x",t,e,n),i=R("k",t,e,n),o=R("sorted",t,e,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{const a=R("sortedSequence",t,e,n),i=R("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=R("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=R("x",t,e,n),i=R("axis",t,e,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xfe=(t,e,n,r=fa)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=R("default",t,e,n);return[Ma(t.name,e,n)||a];case"Placeholder":return[Ma(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=R("x",t,e,n);return[gl(c)]}case"IdentityN":return R("x",t,e,n).map(c=>gl(c));case"Snapshot":const i=R("x",t,e,n);return[gl(i)];case"Shape":return[r.tensor1d(R("x",t,e,n).shape,"int32")];case"ShapeN":return R("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(R("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(R("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=R("x",t,e,n),s=R("data",t,e,n),l=R("message",t,e,n),u=R("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<s.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yfe{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Ft(0),this.tensorMap=new Map,hs(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ft(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Ht(()=>{const a=Su(n),i=r.length,o=a.length;j(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let s=0;s<i;s++){const l=r[s],u=a[s];hs(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Ht(()=>{const a=[];for(let i=0;i<r.length;i++){const o=r[i],s=this.findWithDefault(o,n);a.push(s)}return ys(a)})}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qfe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=R("keyDType",t,e,n),i=R("valueDType",t,e,n),o=new Yfe(a,i);return r.addHashTable(t.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=R("tableHandle",t,e,n,r),i=R("keys",t,e,n),o=R("values",t,e,n);return[await r.getHashTableById(a.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=R("tableHandle",t,e,n,r),i=R("keys",t,e,n),o=R("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=R("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Zfe=(t,e,n,r=fa)=>{switch(t.op){case"ResizeBilinear":{const a=R("images",t,e,n),i=R("size",t,e,n),o=R("alignCorners",t,e,n),s=R("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{const a=R("images",t,e,n),i=R("size",t,e,n),o=R("alignCorners",t,e,n),s=R("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{const a=R("image",t,e,n),i=R("boxes",t,e,n),o=R("boxInd",t,e,n),s=R("cropSize",t,e,n),l=R("method",t,e,n),u=R("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,o,s,l,u)]}case"ImageProjectiveTransformV3":{const a=R("images",t,e,n),i=R("transforms",t,e,n),o=R("outputShape",t,e,n),s=R("fillValue",t,e,n),l=R("interpolation",t,e,n),u=R("fillMode",t,e,n);return[r.image.transform(a,i,l.toLowerCase(),u.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jfe=(t,e,n,r=fa)=>{switch(t.op){case"Equal":return[r.equal(R("a",t,e,n),R("b",t,e,n))];case"NotEqual":return[r.notEqual(R("a",t,e,n),R("b",t,e,n))];case"Greater":return[r.greater(R("a",t,e,n),R("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(R("a",t,e,n),R("b",t,e,n))];case"Less":return[r.less(R("a",t,e,n),R("b",t,e,n))];case"LessEqual":return[r.lessEqual(R("a",t,e,n),R("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(R("a",t,e,n),R("b",t,e,n))];case"LogicalNot":return[r.logicalNot(R("a",t,e,n))];case"LogicalOr":return[r.logicalOr(R("a",t,e,n),R("b",t,e,n))];case"Select":case"SelectV2":return[r.where(R("condition",t,e,n),R("a",t,e,n),R("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eme=(t,e,n,r=fa)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(R("a",t,e,n),R("b",t,e,n),R("transposeA",t,e,n),R("transposeB",t,e,n))];case"Einsum":return[r.einsum(R("equation",t,e,n),...R("tensors",t,e,n))];case"Transpose":return[r.transpose(R("x",t,e,n),R("perm",t,e,n))];case"_FusedMatMul":const[a,i]=R("fusedOps",t,e,n),o=a==="biasadd",s=i==="prelu",l=R("numArgs",t,e,n),u=R("leakyreluAlpha",t,e,n);if(o){if(s&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=R("args",t,e,n);return[r.fused.matMul({a:R("a",t,e,n),b:R("b",t,e,n),transposeA:R("transposeA",t,e,n),transposeB:R("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tme=(t,e,n,r=fa)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(R("x",t,e,n),R("axis",t,e,n),R("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(R("x",t,e,n),R("mean",t,e,n),R("variance",t,e,n),R("offset",t,e,n),R("scale",t,e,n),R("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(R("x",t,e,n),R("mean",t,e,n),R("variance",t,e,n),R("offset",t,e,n),R("scale",t,e,n),R("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(R("x",t,e,n),R("radius",t,e,n),R("bias",t,e,n),R("alpha",t,e,n),R("beta",t,e,n))];case"Softmax":return[r.softmax(R("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(R("x",t,e,n))];case"SparseToDense":return[r.sparseToDense(R("sparseIndices",t,e,n),R("outputShape",t,e,n),R("sparseValues",t,e,n),R("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nme=(t,e,n,r=fa)=>{switch(t.op){case"Max":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.max(R("x",t,e,n),s,l)]}case"Mean":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.mean(R("x",t,e,n),s,l)]}case"Min":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.min(R("x",t,e,n),s,l)]}case"Sum":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.sum(R("x",t,e,n),s,l)]}case"All":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.all(R("x",t,e,n),s,l)]}case"Any":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.any(R("x",t,e,n),s,l)]}case"ArgMax":{const s=R("axis",t,e,n);return[r.argMax(R("x",t,e,n),s)]}case"ArgMin":{const s=R("axis",t,e,n);return[r.argMin(R("x",t,e,n),s)]}case"Prod":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.prod(R("x",t,e,n),s,l)]}case"Cumprod":{const s=R("axis",t,e,n),l=R("exclusive",t,e,n),u=R("reverse",t,e,n);return[r.cumprod(R("x",t,e,n),s,l,u)]}case"Cumsum":{const s=R("axis",t,e,n),l=R("exclusive",t,e,n),u=R("reverse",t,e,n);return[r.cumsum(R("x",t,e,n),s,l,u)]}case"Bincount":const a=R("x",t,e,n),i=R("weights",t,e,n),o=R("size",t,e,n);return[r.bincount(a,i,o)];case"DenseBincount":{const s=R("x",t,e,n),l=R("weights",t,e,n),u=R("size",t,e,n),c=R("binaryOutput",t,e,n);return[r.denseBincount(s,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rme=(t,e,n,r=fa)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=R("n",t,e,n),i=R("axis",t,e,n);let o=R("tensors",t,e,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{const a=R("x",t,e,n),i=R("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=R("axis",t,e,n),i=R("batchDims",t,e,n),o=R("x",t,e,n),s=R("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{const a=R("dims",t,e,n),i=[];for(let s=0;s<a.length;s++)a[s]&&i.push(s);const o=R("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const a=R("axis",t,e,n),i=R("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=R("begin",t,e,n),i=R("size",t,e,n);return[r.slice(R("x",t,e,n),a,i)]}case"StridedSlice":{const a=R("begin",t,e,n),i=R("end",t,e,n),o=R("strides",t,e,n),s=R("beginMask",t,e,n),l=R("endMask",t,e,n),u=R("ellipsisMask",t,e,n),c=R("newAxisMask",t,e,n),d=R("shrinkAxisMask",t,e,n),p=R("x",t,e,n);return[r.stridedSlice(p,a,i,o,s,l,u,c,d)]}case"Pack":return Ht(()=>{const a=R("axis",t,e,n),i=R("tensors",t,e,n),o=i[0].shape,s=r.squeeze(i[0]).shape,l=i.map(u=>{const c=vn(u.shape,o);if(!c&&!vn(r.squeeze(u).shape,s))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,a)]});case"Unpack":{const a=R("axis",t,e,n),i=R("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=R("reps",t,e,n);return[r.tile(R("x",t,e,n),a)]}case"Split":case"SplitV":{const a=R("axis",t,e,n),i=R("numOrSizeSplits",t,e,n),o=R("x",t,e,n);return r.split(o,i,a)}case"ScatterNd":{const a=R("indices",t,e,n),i=R("values",t,e,n),o=R("shape",t,e,n);return[r.scatterND(a,i,o)]}case"GatherNd":{const a=R("x",t,e,n),i=R("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=R("sparseIndices",t,e,n),i=R("outputShape",t,e,n),o=R("sparseValues",t,e,n),s=R("defaultValue",t,e,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ame=(t,e,n,r=fa)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(R("indices",t,e,n),R("values",t,e,n),R("denseShape",t,e,n),R("defaultValue",t,e,n));return[a,i,o,s]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(R("inputIndices",t,e,n),R("inputShape",t,e,n),R("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(R("data",t,e,n),R("indices",t,e,n),R("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(R("data",t,e,n),R("indices",t,e,n),R("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ime=(t,e,n,r=fa)=>{switch(t.op){case"FFT":return[r.fft(R("x",t,e,n))];case"IFFT":return[r.ifft(R("x",t,e,n))];case"RFFT":return[r.rfft(R("x",t,e,n))];case"IRFFT":return[r.irfft(R("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ome=(t,e,n,r=fa)=>{switch(t.op){case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(R("data",t,e,n),R("dataSplits",t,e,n),R("separator",t,e,n),R("nGramWidths",t,e,n),R("leftPad",t,e,n),R("rightPad",t,e,n),R("padWidth",t,e,n),R("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:o}=r.string.stringSplit(R("input",t,e,n),R("delimiter",t,e,n),R("skipEmpty",t,e,n));return[a,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(R("input",t,e,n),R("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sme=(t,e,n,r=fa)=>{switch(t.op){case"Cast":return[r.cast(R("x",t,e,n),R("dtype",t,e,n))];case"ExpandDims":{const a=R("axis",t,e,n);return[r.expandDims(R("x",t,e,n),a)]}case"Squeeze":{const a=R("axis",t,e,n);return[r.squeeze(R("x",t,e,n),a)]}case"Reshape":return[r.reshape(R("x",t,e,n),R("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(R("x",t,e,n),R("padding",t,e,n),R("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(R("x",t,e,n),R("padding",t,e,n),R("constantValue",t,e,n))];case"SpaceToBatchND":{const a=R("blockShape",t,e,n),i=R("paddings",t,e,n);return[r.spaceToBatchND(R("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=R("blockShape",t,e,n),i=R("crops",t,e,n);return[r.batchToSpaceND(R("x",t,e,n),a,i)]}case"DepthToSpace":{const a=R("blockSize",t,e,n),i=R("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(R("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(R("x",t,e,n),R("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(R("s0",t,e,n),R("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p9(t,e,n,r,a=Ht){const i=((o,s,l)=>{switch(o.category){case"arithmetic":return a(()=>Lfe(o,s,l));case"basic_math":return a(()=>Ffe(o,s,l));case"control":return Wfe(o,s,l);case"convolution":return a(()=>Gfe(o,s,l));case"creation":return a(()=>Hfe(o,s,l));case"dynamic":return qfe(o,s,l);case"evaluation":return a(()=>Kfe(o,s,l));case"image":return a(()=>Zfe(o,s,l));case"graph":return a(()=>Xfe(o,s,l));case"logical":return a(()=>Jfe(o,s,l));case"matrices":return a(()=>eme(o,s,l));case"normalization":return a(()=>tme(o,s,l));case"reduction":return a(()=>nme(o,s,l));case"slice_join":return a(()=>rme(o,s,l));case"sparse":return a(()=>ame(o,s,l));case"spectral":return a(()=>ime(o,s,l));case"string":return a(()=>ome(o,s,l));case"transformation":return a(()=>sme(o,s,l));case"hash_table":return Qfe(o,s,l,r);case"custom":const u=i9(o.op);if(u&&u.customExecutor)return u.customExecutor(new Dfe(o,s,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Mc(i)?i.then(o=>[].concat(o)):[].concat(i)}class h9{constructor(e={},n={},r={},a={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f9(t,e,n,r){const a=new Set,i=[];let o=null,s=null;const l=new Set,u=Object.keys(t).map(p=>mi(p)[0]);let c=[];r!=null&&(c=r.map(p=>mi(p.name)[0]));const d=[...e];for(;d.length>0;){const p=d.pop();if((m9(p)||pme(p)||hme(p))&&o==null&&(o=p,s=o.children.map(f=>f.name).filter(f=>a.has(f))),a.add(p.name),n[p.name]==null&&u.indexOf(p.name)===-1&&c.indexOf(p.name)===-1){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function lme(t,e,n){const{usedNodes:r,inputs:a}=n,i=[],o=Object.keys(a).map(c=>mi(c)[0]).map(c=>t.nodes[c]),s=t.initNodes;o.forEach(c=>{r.has(c.name)&&i.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&i.push(c)}),s?.forEach(c=>{r.has(c.name)&&i.push(c)});const l=new Set,u=[];for(;i.length>0;){const c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(d=>{!l.has(d.name)&&r.has(d.name)&&d.inputs.every(p=>l.has(p.name))&&i.push(d)})}return u}const ume=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],cme=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],dme=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function m9(t){return ume.indexOf(t.op)>=0}function pme(t){return cme.indexOf(t.op)>=0}function hme(t){return dme.indexOf(t.op)>=0}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xw{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new xw(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,n){const r=f9(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(a.length>0){const s=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${a}]`)}return lme(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[mi(d)[0]]),i=n.map(d=>mi(d)[0]);let o=i.map(d=>this.graph.nodes[d]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const s=this.getCompilationKey(a,o);let l=this.compiledMap.get(s);l==null&&(l=this.compile(e,o),this.compiledMap.set(s,l));const u={},c={};return Ht(()=>{const d=new h9(this.weightMap,u,c,this.functionExecutorMap),p=Object.assign({},this.weightMap);Object.keys(e).forEach(y=>{const[v,b]=mi(y),x=[];x[b]=e[y],p[v]=x});const f=this.getFrozenTensorIds(p),g={};for(let y=0;y<l.length;y++){const v=l[y];if(!p[v.name]){const b=p9(v,p,d,this._resourceManager);if(Mc(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);p[v.name]=b,this.checkTensorForDisposal(v.name,v,p,d,f,i,g)}}return this.parent==null&&d.dispose(f),n.map(y=>Ma(y,p,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,o,s){n.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(s[l.id]=(s[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=Yhe(l.name,r,a);u?.forEach(c=>{if(c&&!c.kept&&!i.has(c.id)){const d=s[c.id];if(d===1){if(!this.keepTensorForDebug)c.dispose();else{const[p,f]=vs(n.name,a);this.intermediateTensors[p]?this.intermediateTensors[p][f]=c:(this.intermediateTensors[p]=[],this.intermediateTensors[p][f]=c)}delete s[c.id]}else d!=null&&s[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(n=>{n&&!n.kept&&!n.isDisposed&&!this.keepIds.has(n.id)&&n.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,a={},i={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new h9(this.weightMap,a,i,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,n,r);const s=n.map(c=>Ma(c,this.tensorsMap,o)),l=s.map(c=>c.id),u=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...l,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,n,r){const a=e.reduce((i,o,s)=>(i[this.inputs[s].name]=o,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[mi(w)[0]]),s=r.map(w=>mi(w)[0]);let l=s.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:p}=f9(e,l,this.weightMap,this._initNodes),f=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[S,C]=mi(w),E=[];E[C]=e[w],g[S]=E});const y={},v=this.getFrozenTensorIds(g),b={};for(;f.length>0;){const w=this.processStack(o,f,n,g,b,v,s,y,u);await Promise.all(w)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const x=l.filter(w=>!m9(w)&&!Ma(w.name,g,n)).map(w=>w.name);if(x.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${x}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${w}`)}return g}processStack(e,n,r,a,i,o,s,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&R("isConstant",d.node,a,r)&&([p]=vs(d.node.name,r)),a[d.node.name]==null){const f=p9(d.node,a,r,this._resourceManager);p||([p]=vs(d.node.name,r));const g=r.currentContext;Mc(f)?c.push(f.then(y=>(a[p]=y,r.currentContext=g,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u),y))):(a[p]=f,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u))}else this.processChildNodes(d.node,n,r,a,i,u)}return c}processChildNodes(e,n,r,a,i,o){e.children.forEach(s=>{const[l]=vs(s.name,r);i[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(u=>!!Ma(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(u=>!!Ma(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=mi(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);j(s,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&j(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const a=this._signature.inputs[r];n[a.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=mi(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=mi(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class fme{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mme="?tfjs-format=file",gme="model.json";class yme{constructor(e,n={},r=u4){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new fme}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Mc(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new xw(o9.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=o9.Instance.transformGraph(e.modelInitializer);this.initializer=new xw(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const a=r instanceof Hn?[r]:r,i={};return a.forEach((o,s)=>i[this.structuredOutputKeys[s]]=o),i}return r}normalizeInputs(e){if(!(e instanceof Hn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,a)=>(n[r]=e[a],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function bme(t,e={},n=u4){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=vme(t));const r=new yme(t,e,n);return await r.load(),r}function vme(t){return t.endsWith("/")||(t=t+"/"),`${t}${gme}${mme}`}/**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function T2(t,e,n,r){return new(n||(n=Promise))(function(a,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?a(u.value):new n(function(c){c(u.value)}).then(o,s)}l((r=r.apply(t,e||[])).next())})}function N2(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(c[0]===6&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var xme="https://tfhub.dev/tensorflow/tfjs-model/deeplab",wme=513,YT={ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},QT={PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kme(t,e){return""+xme+"/"+(e===4?t+"/1/default/1/model.json":t+"/1/quantized/"+e+"/1/model.json")+"?tfjs-format=file"}function Sme(t){if(t==="pascal")return YT.PASCAL;if(t==="ade20k")return YT.ADE20K;if(t==="cityscapes")return YT.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Cme(t){if(t==="pascal")return QT.PASCAL;if(t==="ade20k")return QT.ADE20K;if(t==="cityscapes")return QT.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Ime(t,e,n,r){return T2(this,void 0,void 0,function(){var a,i,o,s,l,u,c,d,p,f,g,y,v,b;return N2(this,function(x){switch(x.label){case 0:if(t.length<e.length)throw new Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+t.length+", but there are "+e.length+" labels.");return a=n.shape,i=a[0],o=a[1],s=St([i,o,3],"int32"),[4,n.array()];case 1:for(l=x.sent(),u=new Set,c=0;c<i;++c)for(d=0;d<o;++d)b=l[c][d],u.add(b),s.set(t[b][0],c,d,0),s.set(t[b][1],c,d,1),s.set(t[b][2],c,d,2);return p=s.toTensor(),[4,ZD(p,r)];case 2:for(f=x.sent(),da(p),g={},y=0,v=Array.from(u);y<v.length;y++)b=v[y],g[e[b]]=t[b];return[2,{legend:g,segmentationMap:f}]}})})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Eme(t){return t===void 0&&(t={base:"pascal",quantizationBytes:2}),T2(this,void 0,void 0,function(){var e;return N2(this,function(n){switch(n.label){case 0:if(qhe==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t.base){if(["pascal","cityscapes","ade20k"].indexOf(t.base)===-1)throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if([1,2,4].indexOf(t.quantizationBytes)===-1)throw new Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!t.modelUrl)throw new Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,bme(t.modelUrl||kme(t.base,t.quantizationBytes))];case 1:return e=n.sent(),[2,new Tme(e,t.base)]}})})}var Tme=function(){function t(e,n){this.model=e,this.base=n}return t.prototype.predict=function(e){var n=this;return Ht(function(){var r=Bn(function(a){return Ht(function(){var i=a instanceof Hn?a:JD(a),o=i.shape,s=o[0],l=o[1],u=wme/Math.max(l,s),c=Math.round(s*u),d=Math.round(l*u);return hl(hT.resizeBilinear(i,[c,d]))})}(e),"int32");return Rg(n.model.execute(r))})},t.prototype.segment=function(e,n){return n===void 0&&(n={}),T2(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,d,p,f=this;return N2(this,function(g){switch(g.label){case 0:if(!(n.colormap&&n.labels||this.base))throw new Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return n.colormap&&n.labels||(n.colormap=Sme(this.base),n.labels=Cme(this.base)),r=n.colormap,a=n.labels,i=n.canvas,o=Ht(function(){return f.predict(e)}),s=o.shape,l=s[0],u=s[1],[4,Ime(r,a,o,i)];case 1:return c=g.sent(),d=c.legend,p=c.segmentationMap,da(o),[2,{legend:d,height:l,width:u,segmentationMap:p}]}})})},t.prototype.dispose=function(){return T2(this,void 0,void 0,function(){return N2(this,function(e){return this.model&&this.model.dispose(),[2]})})},t}();/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function We(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nme=u2;class ww extends Xb{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new p3(this,cl())}nextDataId(){return ww.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&Oi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&cs(r[0])){const i=r.map(o=>ds(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return ml(a,i)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>ol(a));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}makeOutput(e,n,r){return cl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=di();return e(),{kernelMs:di()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){We([e],"where");const n=this.readSync(e.dataId);return Nme(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}ww.nextDataId=0;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g9(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const _me=t=>{const{x:e}=t.inputs,n=t.backend;We(e,"abs");let r=new Float32Array(be(e.shape));const a=n.data.get(e.dataId).values;return r=g9(a),n.makeOutput(r,e.shape,e.dtype)},Rme={kernelName:tv,backendName:"cpu",kernelFunc:_me};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vr(t){return(e,n,r,a,i)=>{const o=zt(e,n),s=o.length,l=Ze(o),u=be(o),c=Er(i,u),d=e.length,p=n.length,f=Ze(e),g=Ze(n),y=Uc(e,o),v=Uc(n,o);if(y.length+v.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=Oc(b,s,l),w=x.slice(-d);y.forEach(_=>w[_]=0);const S=Fo(w,d,f),C=x.slice(-p);v.forEach(_=>C[_]=0);const E=Fo(C,p,g);c[b]=t(r[S],a[E])}return[c,o]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gi(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}const $me={kernelName:hv,backendName:"cpu",kernelFunc:gi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _2(t,e,n="float32"){if(n==="complex64"){const a=_2(t,e,"float32"),i=_2(t,e,"float32");return gi({inputs:{real:a,imag:i},backend:t})}const r=Xr(be(e),n);return t.makeTensorInfo(e,n,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xs(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Ome={kernelName:Im,backendName:"cpu",kernelFunc:xs};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xc(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const Mme={kernelName:dx,backendName:"cpu",kernelFunc:Xc};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y9(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=fu([0],n),[i,o]=vr((s,l)=>s!==l?1:0)(e,[],t,a,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Eu(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return xs({inputs:{x:a},backend:n});const c=_2(n,a.shape,a.dtype),d=Eu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),p=gi({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),p}if(a.dtype==="complex64"){const c=Xc({inputs:{input:a},backend:n}),d=Eu({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!m3(a.dtype,i)){const c=xs({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const o=n.data.get(a.dataId).values,[s,l,u]=y9(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}const Pme={kernelName:cm,backendName:"cpu",kernelFunc:Eu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zr(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;We([o,s],t);const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=o.dtype==="string"?Kc(u):u,p=o.dtype==="string"?Kc(c):c,f=r||o.dtype,[g,y]=e(o.shape,s.shape,d,p,f);return l.makeTensorInfo(y,f,g)}:({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;if(o.dtype==="complex64"||s.dtype==="complex64"){const u=Eu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,p=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,g=l.data.get(p.dataId).values,y=Eu({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(y.dataId),b=v.complexTensorInfos.real,x=v.complexTensorInfos.imag,w=l.data.get(b.dataId).values,S=l.data.get(x.dataId).values,[C,E,_]=n(o.shape,s.shape,f,g,w,S),N=l.makeTensorInfo(_,"float32",C),M=l.makeTensorInfo(_,"float32",E),P=gi({inputs:{real:N,imag:M},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(M),P}else{const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=r||o.dtype,[p,f]=e(o.shape,s.shape,u,c,d);return l.makeTensorInfo(f,d,p)}}}function ZT(t){return(e,n,r,a,i,o)=>{const s=zt(e,n),l=be(s),u=s.length,c=Ze(s),d=Er("float32",l),p=Er("float32",l),f=Uc(e,s),g=Uc(n,s),y=ml(r,a),v=ml(i,o),b=e.length,x=Ze(e),w=n.length,S=Ze(n);if(f.length+g.length===0)for(let C=0;C<d.length;C++){const E=C%y.length,_=C%v.length,N=t(y[E*2],y[E*2+1],v[_*2],v[_*2+1]);d[C]=N.real,p[C]=N.imag}else for(let C=0;C<d.length;C++){const E=Oc(C,u,c),_=E.slice(-b);f.forEach(U=>_[U]=0);const N=Fo(_,b,x),M=E.slice(-w);g.forEach(U=>M[U]=0);const P=Fo(M,w,S),L=t(y[N*2],y[N*2+1],v[P*2],v[P*2+1]);d[C]=L.real,p[C]=L.imag}return[d,p,s]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const b9=vr((t,e)=>t+e),Ame=ZT((t,e,n,r)=>({real:t+n,imag:e+r})),Wp=zr(Sp,b9,Ame),Dme={kernelName:Sp,backendName:"cpu",kernelFunc:Wp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function JT(t,e,n,r,a){const i=be(r),o=Xr(a,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?o[l]+=e[s]:o[l]+=1)}return o}function v9(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],o=St([a,n],e.dtype);for(let s=0;s<a;s++)for(let l=0;l<i;l++){const u=t.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):e.size>0?o.set(o.get(s,u)+e.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tu(t){return(e,n,r)=>{const a=Er(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pn(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(We(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=be(o.shape),c=n||o.dtype,d=Tr(c,u);for(let p=0;p<u;++p)d[p]=e(l[p],a);return s.makeTensorInfo(o.shape,c,d)}}function Gp(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(We(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,a);return s.makeTensorInfo(o.shape,u,c)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const x9=Tu(t=>Math.ceil(t)),Lme=Gp(dm,x9),Fme={kernelName:dm,backendName:"cpu",kernelFunc:Lme};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w9(t,e,n,r){const a=Tr(n,be(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const s=be(o.shape);a.set(o.vals,i),i+=s})}else{let i=0;t.forEach(o=>{const s=n==="string"?Kc(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<o.shape[1];++d)a[c+d]=s[l++]}i+=o.shape[1]})}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const k9=vr((t,e)=>t===e?1:0),S9=zr(bm,k9,null,"bool"),Bme={kernelName:bm,backendName:"cpu",kernelFunc:S9};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const C9=Tu(t=>Math.exp(t)),I9=Gp(vm,C9,"float32"),zme={kernelName:vm,backendName:"cpu",kernelFunc:I9};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E9=Tu(t=>Math.expm1(t)),Ume=Gp(xm,E9),jme={kernelName:xm,backendName:"cpu",kernelFunc:Ume};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T9=Tu(t=>Math.floor(t)),Vme=Gp(wm,T9),Wme={kernelName:wm,backendName:"cpu",kernelFunc:Vme};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N9(t,e,n,r,a,i,o,s,l){const u=St([r,i],n);for(let c=0;c<r;c++){const d=[];let p=0;for(let f=0;f<a;f++){const g=t[c*a+f];p+=g*o[f],d.push(g)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let f=0;f<i;f++)u.values[c*i+f]=e.get(...e.indexToLoc(p*i+f))}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _9(t,e,n){const r=St(n,t.dtype);for(let a=0;a<r.size;++a){const i=r.indexToLoc(a).slice(),o=i[0],s=i[2],l=e.locToIndex([o,s]);i[2]=e.values[l];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[a]=t.values[u])}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const R9=vr((t,e)=>t>e?1:0),Gme=zr(Sm,R9,null,"bool"),Hme={kernelName:Sm,backendName:"cpu",kernelFunc:Gme};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $9=vr((t,e)=>t>=e?1:0),qme=zr(Cm,$9,null,"bool"),Kme={kernelName:Cm,backendName:"cpu",kernelFunc:qme};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O9=vr((t,e)=>t<e?1:0),Xme=zr(_m,O9,null,"bool"),Yme={kernelName:_m,backendName:"cpu",kernelFunc:Xme};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M9=vr((t,e)=>t<=e?1:0),Qme=zr(Rm,M9,null,"bool"),Zme={kernelName:Rm,backendName:"cpu",kernelFunc:Qme};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P9(t,e,n){const r=(e-t)/(n-1),a=Xr(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A9=Tu(t=>Math.log(t)),Jme=Gp($m,A9),ege={kernelName:$m,backendName:"cpu",kernelFunc:Jme};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D9(t,e,n,r){const a=Er(r,be(n));for(let i=0;i<a.length;++i){const o=i*e;let s=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>s)&&(s=u)}a[i]=s}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const L9=vr((t,e)=>Math.max(t,e)),tge=zr(Dm,L9),nge={kernelName:Dm,backendName:"cpu",kernelFunc:tge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F9=vr((t,e)=>Math.min(t,e)),rge=zr(Lm,F9),age={kernelName:Lm,backendName:"cpu",kernelFunc:rge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eN=vr((t,e)=>t*e),ige=ZT((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),R2=zr(Bm,eN,ige),oge={kernelName:Bm,backendName:"cpu",kernelFunc:R2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B9(t,e,n){const r=il(-1,n);return eN([],e,r,t,n)}function sge(t){const{inputs:e,backend:n}=t,{x:r}=e;We(r,"neg");const a=n.data.get(r.dataId).values,[i,o]=B9(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const lge={kernelName:Zv,backendName:"cpu",kernelFunc:sge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z9=vr((t,e)=>t!==e?1:0),uge=zr(zm,z9,null,"bool"),cge={kernelName:zm,backendName:"cpu",kernelFunc:uge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tN(t,e,n,r,a){const i=e.length,o=be(e),s=Ze(e),l=Ze(a),u=Er(n,be(a));for(let c=0;c<o;++c){const d=Oc(c,i,s),p=new Array(d.length);for(let g=0;g<p.length;g++)p[g]=d[r[g]];const f=Fo(p,i,l);u[f]=t[c]}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ya(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;We(a,"transpose");const o=a.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=a.shape[i[c]];const l=r.data.get(a.dataId).values,u=tN(l,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}const dge={kernelName:Cp,backendName:"cpu",kernelFunc:Ya};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U9(t,e,n,r){const[a,i]=Yr(t,r),o=Xa(e,"int32"),s=Xr(be(a),o),l=be(i);for(let u=0;u<s.length;++u){const c=u*l;let d=1;for(let p=0;p<l;++p)d*=n[c+p];s[u]=d}return{outVals:s,outShape:a,outDtype:o}}function pge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"prod");const s=a.shape.length,l=Xt(i,a.shape),u=dr(l,s);let c=l,d=a;const p=[];u!=null&&(d=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),p.push(d),c=pr(c.length,s));const f=n.data.get(d.dataId).values,{outVals:g,outShape:y,outDtype:v}=U9(d.shape,d.dtype,f,c);let b=y;return o&&(b=_r(y,l)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,v,g)}const hge={kernelName:sx,backendName:"cpu",kernelFunc:pge};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fge(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=Oc(a,e.length,Ze(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function mge(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function gge(t,e,n,r){const a=[];let i=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);mge(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)s[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let p=0;p<n.length;++p){const f=n[p],g=p+e.length-1;if(g>=0){const y=s[g],v=y[y.length-1]-f[c];for(let b=c;b<d;++b)s[g].push(f[b+1]+v)}c=f[c],d=f[d]}d!==c&&(a.push([c,d]),i+=d-c)}return{outSplits:s,valueSlices:a,numValues:i}}function yge(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=Tr("int32",r);e.push(a),t[n].forEach((i,o)=>a[o]=i)}return e}function j9(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function bge(t,e,n,r,a,i){const o=j9(e,2)[1],s=j9(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)a[l*s+d]=t[c*o+d];++l}}function vge(t,e,n,r,a){const i=e.slice();i[0]=a;const o=Tr(n,be(i)),s=t.length,l=s===0?0:s/e[0];return bge(t,e,r,l,o,i),[o,i]}function V9(t,e,n,r,a,i,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(fge(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:p}=gge(i,o,t,u),f=yge(c),g=vge(n,r,a,d,p);return[f,g[0],g[1]]}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var co=jo;class kw{constructor(e,n,r,a,i,o,s,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=OF(c),this.raggedRank=MF(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===co.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===co.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case co.VALUE_ROWIDS:return kw.getMaxWidthValueRowID(n);case co.ROW_SPLITS:return kw.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${co[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let o=1;o<n;++o){const s=e[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return G9(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;PF(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=$F(this.raggedRank,a,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let o=0;for(let s=0;s<a;++s,o+=n)i.push(o);for(let s=a;s<e;++s)i.push(-1);return j(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,o=[];for(let s=0;s<i-1;++s){const l=e[s+1]-e[s];let u=Math.min(a,l),c=n[s];c===-1&&(u=0);for(let d=0;d<u;++d)o.push(c),c+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,o=[];if(i===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++s,s<a?u+=r:u=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case co.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case co.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${co[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case co.FIRST_DIM_SIZE:return e[0];case co.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case co.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${co[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),n=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let o=r.length-2;o>=0;--o)r[o]=r[o+1]*n[o+1];const a=G9(n,!1),i=Tr(this.valuesDType,be(a));if(r[0]*n[0]>0){let o=this.calculateFirstParentOutputIndex(e,r[0],n[0]);for(let s=1;s<=this.raggedRank;++s)o=this.calculateOutputIndex(s-1,o,r[s],n[s]);this.setOutput(this.raggedRank,o,i,a)}return[a,i]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,o=r;let s=a.slice();s=s.slice(e+1);const l=be(s),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const g=this.defaultValueShape;Ht(()=>{const y=Se(c,g);c=Pp(y,s).dataSync()})}let d=0,p=0,f=0;for(let g=0;g<=u;++g){let y=g<u?n[g]:-1;if(y===f){++f;continue}if(p<f){const v=i.subarray(d*l),b=o.subarray(p*l),x=(f-p)*l;W9(b,v,x)}if(g>=u){const v=r.length;y=Math.floor(v/l)}if(y>f)if(this.defaultValue.length===1)o.subarray(f*l,y*l).fill(this.defaultValue[0]),f=y;else for(;y>f;){const v=o.slice(f*l);W9(v,c,l),++f}y<0?(d=g+1,p=f):(d=g,p=f,f=p+1)}}}function W9(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function G9(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function H9(t,e,n,r,a,i,o,s,l,u){return new kw(t,e,n,r,a,i,o,s,l,u).compute()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function q9(t,e,n,r){const a=t===e,i=t<e&&n<0,o=e<t&&n>1;if(a||i||o)return Xr(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=Xr(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const K9=Tu(t=>1/Math.sqrt(t)),xge=Gp(Hm,K9),wge={kernelName:Hm,backendName:"cpu",kernelFunc:xge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hp(t,e,n,r,a,i,o,s,l,u){const c=[r/a,a],d=t.values,p=e.values;if(r===0)return St(n,e.dtype);const f=St(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let g=0;g<i;g++){const y=[];let v=0;for(let b=0;b<o;b++){const x=d[g*o+b];y.push(x),v+=x*s[b]}if(v<0||v>=r/a)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let b=0;b<a;b++)u?f.values[v*a+b]+=p[g*a+b]:f.values[v*a+b]=e.rank===0?p[0]:p[g*a+b]}return f}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kge=Tu(t=>1/(1+Math.exp(-t))),X9=pn(Qm,t=>1/(1+Math.exp(-t))),Sge={kernelName:Qm,backendName:"cpu",kernelFunc:X9};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y9(t,e,n,r,a){const i=b4(r,e,n),o=be(n),s=Ze(r);if(i){const d=v4(e,s);return a==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=a==="string"?Kc(t):t,u=St(r,a,l),c=St(n,a);for(let d=0;d<c.size;++d){const p=c.indexToLoc(d),f=p.map((g,y)=>g+e[y]);c.set(u.get(...f),...p)}return a==="string"?n9(c.values):c.values}function Yc(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r;We(a,"slice");const[s,l]=x4(a,i,o);g4(a,s,l);const u=n.data.get(a.dataId).values,c=Y9(u,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const Cge={kernelName:vx,backendName:"cpu",kernelFunc:Yc};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Q9(t,e,n,r,a,i,o){const s=e[0],l=i[0],u=new Array(l),c=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(VF(s));const v=Tr(n,0),b=Tr(a,0);return[v,[0,d],b,u,c]}let p=!0,f=0;const g=new Array(l).fill(0);for(let v=0;v<s;++v){const b=t[v*d];if(b<0)throw new Error(WF(v,b));if(b>=l)throw new Error(GF(v,b,l));++g[b],p=p&&b>=f,f=b}let y=!0;for(let v=0;v<l;++v){const b=g[v]===0;u[v]=b,y=y&&!b,g[v]=Math.max(g[v],1),v>0&&(g[v]+=g[v-1])}if(y&&p){const v=t,b=r;for(let x=0;x<s;++x)c[x]=x;return[v,[s,d],b,u,c]}else{const v=g[l-1],b=Tr(n,v*d),x=Tr(a,v),w=new Array(l).fill(0);for(let S=0;S<s;++S){const C=t[S*d],E=w[C],_=(C===0?0:g[C-1])+E;w[C]++;for(let N=0;N<d;++N)b[_*d+N]=t[S*d+N];x[_]=r[S],c[S]=_}for(let S=0;S<l;++S)if(w[S]===0){const C=S===0?0:g[S-1];b[C*d+0]=S;for(let E=1;E<d;++E)b[C*d+E]=0;x[C]=o}return[b,[v,d],x,u,c]}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z9(t,e,n,r,a){const i=be(r),o=e[0],s=a.length,l=[];let u=1,c=-1;for(let y=0;y<s;++y){const v=a[y];if(v===-1){if(c!==-1)throw new Error(HF(c,y));c=y,l.push(1)}else{if(v<0)throw new Error(qF(y,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(KF());const y=Math.trunc(i/u);if(u*y!==i)throw new Error(XF(r,l));l[c]=y}if(be(l)!==i)throw new Error(YF(r,l));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let y=d-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const f=[];if(s>0){f[s-1]=1;for(let y=s-2;y>=0;--y)f[y]=f[y+1]*l[y+1]}const g=Tr(n,o*s);for(let y=0;y<o;++y){let v=0;for(let b=0;b<d;++b)v+=t[y*d+b]*p[b];for(let b=0;b<s;++b)g[y*s+b]=Math.trunc(v/f[b]),v%=f[b]}return[g,[o,s],l]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nN(t,e,n,r,a,i=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error(AT());const d=e.slice();d[0]=c;const p=d.reduce((x,w)=>x*w,1),f=Tr(n,p);if(s===0)return c>0&&f.fill(o),[f,d];if(c<=0)throw new Error(AT());let g=0,y=1,v=0,b=a[g];for(;;){let x=0;if(y<s){if(x=a[y],b===x){++y;continue}if(b>=x)throw new Error(QF())}if(b<0||b>=c)throw new Error(ZF(b,c));b>v&&f.fill(o,v*u,b*u);for(let w=g;w<y;++w){const S=r[w];if(S<0||S>=l[0])throw new Error(JF(w,r[w],l[0]));for(let C=0;C<u;C++)f[b*u+C]+=t[S*u+C]}if(i)for(let w=0;w<u;w++)f[b*u+w]/=y-g;if(g=y,++y,v=b+1,b=x,y>s)break}return v<c&&f.fill(o,v*u,c*u),[f,d]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ige=Tu(t=>Math.sqrt(t)),Ege=pn(Jm,t=>Math.sqrt(t)),Tge={kernelName:Jm,backendName:"cpu",kernelFunc:Ege};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const J9=vr((t,e)=>{const n=t-e;return n*n}),Nge=zr(eg,J9),_ge={kernelName:eg,backendName:"cpu",kernelFunc:Nge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e7(t,e,n,r){const a=St(t,e.dtype);for(let i=0;i<a.size;i++){const o=a.indexToLoc(i),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];a.set(e.get(...s),...o)}return a}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Rge{constructor(e,n,r,a,i,o){this.separator=ds(e),this.nGramWidths=n,this.leftPad=ds(r),this.rightPad=ds(a),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,o){for(let s=0;s<i;++s){const l=this.getPadWidth(o),u=Math.max(0,l-s),c=Math.max(0,l-(i-(s+1))),d=o-(u+c),p=n+(u>0?0:s-l);let f=0;f+=u*this.leftPad.length;for(let x=0;x<d;++x)f+=e[p+x].length;f+=c*this.rightPad.length;const g=u+c+d-1;f+=g*this.separator.length,r[a+s]=new Uint8Array(f);const y=r[a+s];let v=0;const b=x=>x.forEach(w=>y[v++]=w);for(let x=0;x<u;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(e[p+x]),b(this.separator);if(d>0){b(e[p+d-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<a;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=a-1,o=Tr("int32",a);if(r===0||a===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const s=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],f=this.getNumNGrams(p,d);this.createNGrams(e,u,s,c,f,d),c+=f}),this.preserveShort&&c===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,u,s,c,1,p)}}return[s,o]}}function t7(t,e,n,r,a,i,o,s){return new Rge(n,r,a,i,o,s).compute(t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ge(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(a,i);(!n||o.length!==0)&&r.push(o),a=i+1}}function n7(t,e,n){const r=t.length,a=[];let i=0,o=0;const s=new Array(r);for(let p=0;p<r;++p){const f=a.length;$ge(t[p],e,n,a);const g=a.length-f;s[p]=g,i+=g,o=Math.max(o,g)}const l=Tr("int32",i*2),u=new Array(i),c=[r,o];let d=0;for(let p=0;p<r;++p)for(let f=0;f<s[p];++f)l[d*2]=p,l[d*2+1]=f,u[d]=a[d],++d;return[l,u,c]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r7(t,e){const n=Tr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=kD(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const a7=vr((t,e)=>t-e),Oge=ZT((t,e,n,r)=>({real:t-n,imag:e-r})),rN=zr(tg,a7,Oge),Mge={kernelName:tg,backendName:"cpu",kernelFunc:rN};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i7(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=St(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const s=t.locToIndex(o);r.values[a]=t.values[s]}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dg=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function o7(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(s-c)/s)*Math.sign(l-s/2),p=Math.max(n,Math.floor(e-l*c/s+d)),f=Math.min(r,Math.floor(e+(s-l)*c/s+d));o7(t,e,p,f)}const a=t[e];let i=n,o=r;for(nl(t,n,e),Dg(t[r],a)>0&&nl(t,n,r);i<o;){for(nl(t,i,o),i++,o--;Dg(t[i],a)<0;)i=i+1;for(;Dg(t[o],a)>0;)o=o-1}Dg(t[n],a)===0?nl(t,n,o):(o=o+1,nl(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function s7(t,e,n,r,a){const i=e[e.length-1],[o,s]=[t.length/i,i],l=Er(n,o*r),u=Er("int32",o*r);for(let d=0;d<o;d++){const p=d*s,f=t.subarray(p,p+s);let g=new Array(f.length);f.forEach((x,w)=>g[w]={value:x,index:w}),r<g.length&&(o7(g,r),g=g.slice(0,r)),a&&g.sort(Dg);const y=d*r,v=l.subarray(y,y+r),b=u.subarray(y,y+r);for(let x=0;x<r;x++)v[x]=g[x].value,b[x]=g[x].index}const c=e.slice();return c[c.length-1]=r,[St(c,n,l),St(c,"int32",u)]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l7(t,e,n,r){const a=Xt(e,n)[0],i=[1,n[0],1];for(let g=0;g<a;g++)i[0]*=n[g];i[1]=n[a];for(let g=a+1;g<n.length;g++)i[2]*=n[g];const o={},s=new Int32Array(n[a]),l=new Nr(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let g=0;g<n[a];g++){let y;if(c)y=t[g].toString();else{const v=[];for(let b=0;b<i[0];b++)for(let x=0;x<i[2];x++)v.push(l.get(b,g,x));y=v.join(",")}if(o[y]!==void 0)s[g]=o[y];else{const v=Object.keys(o).length;o[y]=v,s[g]=v,u.push(g)}}const d=i.slice();d[1]=Object.keys(o).length;const p=new Nr(d,r);u.forEach((g,y)=>{for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)p.set(l.get(v,g,b),v,y,b)});const f=n.slice();return f[a]=d[1],{outputValues:p.values,outputShape:f,indices:s}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pge=Object.freeze(Object.defineProperty({__proto__:null,addImpl:b9,bincountImpl:JT,bincountReduceImpl:v9,castImpl:y9,ceilImpl:x9,concatImpl:w9,equalImpl:k9,expImpl:C9,expm1Impl:E9,floorImpl:T9,gatherNdImpl:N9,gatherV2Impl:_9,greaterEqualImpl:$9,greaterImpl:R9,lessEqualImpl:M9,lessImpl:O9,linSpaceImpl:P9,logImpl:A9,maxImpl:D9,maximumImpl:L9,minimumImpl:F9,multiplyImpl:eN,negImpl:B9,notEqualImpl:z9,prodImpl:U9,raggedGatherImpl:V9,raggedTensorToTensorImpl:H9,rangeImpl:q9,rsqrtImpl:K9,scatterImpl:Hp,sigmoidImpl:kge,simpleAbsImpl:g9,sliceImpl:Y9,sparseFillEmptyRowsImpl:Q9,sparseReshapeImpl:Z9,sparseSegmentReductionImpl:nN,sqrtImpl:Ige,squaredDifferenceImpl:J9,stridedSliceImpl:e7,stringNGramsImpl:t7,stringSplitImpl:n7,stringToHashBucketFastImpl:r7,subImpl:a7,tileImpl:i7,topKImpl:s7,transposeImpl:tN,uniqueImpl:l7},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/c4("cpu",()=>new ww,1);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const u7=pn(gm,t=>t>=0?t:Math.exp(t)-1),Age={kernelName:gm,backendName:"cpu",kernelFunc:u7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;We([a],"leakyRelu");const o=be(a.shape),s=n.data.get(a.dataId).values,l=Er("float32",o);for(let u=0;u<s.length;u++)l[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",l)}const Dge={kernelName:Uv,backendName:"cpu",kernelFunc:c7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lge=vr((t,e)=>t<0?e*t:t);function d7(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;We([r,a],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,l]=Lge(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",s)}const Fge={kernelName:ox,backendName:"cpu",kernelFunc:d7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p7=pn(Vm,t=>Math.max(0,t)),Bge={kernelName:Vm,backendName:"cpu",kernelFunc:p7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const h7=pn(Wm,t=>Math.min(Math.max(0,t),6)),zge={kernelName:Wm,backendName:"cpu",kernelFunc:h7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $2(t,e,n,r,a){if(n==="linear")return xs({inputs:{x:e},backend:t});if(n==="relu")return p7({inputs:{x:e},backend:t});if(n==="elu")return u7({inputs:{x:e},backend:t});if(n==="relu6")return h7({inputs:{x:e},backend:t});if(n==="prelu")return d7({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return c7({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return X9({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tn(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=be(a.shape),s=f3(i,o),l=be(s);j(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const Uge={kernelName:px,backendName:"cpu",kernelFunc:Tn};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f7(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;We([a,i],"matMul");const l=a.shape.length,u=i.shape.length,c=o?a.shape[l-2]:a.shape[l-1],d=s?i.shape[u-1]:i.shape[u-2],p=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[u-2]:i.shape[u-1],g=a.shape.slice(0,-2),y=i.shape.slice(0,-2),v=be(g),b=be(y),x=zt(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);j(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[v,c,p]:[v,p,c],S=s?[b,f,d]:[b,d,f],C=Tn({inputs:{x:a},backend:n,attrs:{shape:w}}),E=Tn({inputs:{x:i},backend:n,attrs:{shape:S}}),_=o?C.shape[1]:C.shape[2],N=o?C.shape[2]:C.shape[1],M=s?E.shape[1]:E.shape[2],P=Math.max(v,b),L=n.data.get(C.dataId).values,U=n.data.get(E.dataId).values,B=Ze(C.shape),K=Ze(E.shape),[X,Z,H]=o?[B[0],1,B[1]]:[B[0],B[1],1],[F,Y,Q]=s?[1,K[1],K[0]]:[K[1],1,K[0]],ne=N*M,se=St([P,N,M],C.dtype),pe=se.values,de=n.blockSize;for(let ie=0;ie<P;ie++)for(let xe=0;xe<N;xe+=de)for(let q=0;q<M;q+=de)for(let oe=0;oe<_;oe+=de){const he=Math.min(xe+de,N),Ie=Math.min(q+de,M),Ee=Math.min(oe+de,_);for(let _e=xe;_e<he;_e++)for(let Fe=q;Fe<Ie;Fe++){let Xe=0;for(let Oe=oe;Oe<Ee;Oe++){const lt=Math.min(ie,v-1)*X,Je=Math.min(ie,b-1)*Q,nt=L[lt+_e*Z+Oe*H],et=U[Oe*F+Fe*Y+Je];Xe+=nt*et}pe[ie*ne+(_e*M+Fe)]+=Xe}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(x,se.dtype,se.values)}const jge={kernelName:uv,backendName:"cpu",kernelFunc:f7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vge(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let p,f,g;const y=[];p=f7({inputs:{a,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(f=Wp({inputs:{a:p,b:o},backend:n}),y.push(p),p=f),c&&(g=$2(n,p,c,s,d),y.push(p),p=g);for(const v of y)n.disposeIntermediateTensorInfo(v);return p}const Wge={kernelName:og,backendName:"cpu",kernelFunc:Vge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gge=pn(rm,t=>Math.acos(t)),Hge={kernelName:rm,backendName:"cpu",kernelFunc:Gge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qge=pn(am,t=>Math.acosh(t)),Kge={kernelName:am,backendName:"cpu",kernelFunc:qge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xge(t){const{inputs:e,backend:n}=t,r=e;We(e,"addN");const a=r.map(s=>n.data.get(s.dataId).values),i=St(r[0].shape,r[0].dtype),o=i.values;for(let s=0;s<r.length;s++){const l=a[s];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const Yge={kernelName:nv,backendName:"cpu",kernelFunc:Xge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"all");const s=Xt(i,a.shape);let l=s;const u=dr(l,a.shape.length);let c=a;u!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),l=pr(l.length,a.shape.length)),Qr("all",l,c.shape.length);const[d,p]=Yr(c.shape,l),f=be(p),g=Xr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w&&C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=_r(d,s),x=Tn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const Zge={kernelName:rv,backendName:"cpu",kernelFunc:Qge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"any");const s=Xt(i,a.shape);let l=s;const u=dr(l,a.shape.length);let c=a;u!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),l=pr(l.length,a.shape.length)),Qr("any",l,c.shape.length);const[d,p]=Yr(c.shape,l),f=be(p),g=Xr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w||C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=_r(d,s),x=Tn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const e0e={kernelName:av,backendName:"cpu",kernelFunc:Jge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;We(a,"argMax");let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),o=[o[0]],Qr("argMax",o,l.shape.length);const[c,d]=Yr(l.shape,o),p=be(c),f=Xr(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C>x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const n0e={kernelName:iv,backendName:"cpu",kernelFunc:t0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;We(a,"argMin");let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),o=[o[0]],Qr("argMin",o,l.shape.length);const[c,d]=Yr(l.shape,o),p=be(c),f=Xr(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C<x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const a0e={kernelName:ov,backendName:"cpu",kernelFunc:r0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i0e=pn(im,t=>Math.asin(t)),o0e={kernelName:im,backendName:"cpu",kernelFunc:i0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const s0e=pn(om,t=>Math.asinh(t)),l0e={kernelName:om,backendName:"cpu",kernelFunc:s0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const u0e=pn(sm,t=>Math.atan(t)),c0e={kernelName:sm,backendName:"cpu",kernelFunc:u0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const d0e=vr((t,e)=>Math.atan2(t,e)),p0e=zr(um,d0e),h0e={kernelName:um,backendName:"cpu",kernelFunc:p0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const f0e=pn(lm,t=>Math.atanh(t)),m0e={kernelName:lm,backendName:"cpu",kernelFunc:f0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aN(t,e,n,r,a,i){const o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=St(a.outShape,n),v=y.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,E=S*r[0];for(let _=0;_<a.inChannels;++_)for(let N=0;N<a.outHeight;++N){const M=N*o-p,P=Math.max(0,M),L=Math.min(a.inHeight,c+M),U=C+N*x;for(let B=0;B<a.outWidth;++B){const K=B*s-f,X=Math.max(0,K),Z=Math.min(a.inWidth,d+K);let H=g,F=0,Y=0;for(let ne=P;ne<L;ne+=l){const se=E+ne*r[1];for(let pe=X;pe<Z;pe+=u){const de=se+pe*r[2],ie=t[de+_];i==="max"&&ie>H?H=ie:i==="avg"&&(F+=ie,Y++)}if(isNaN(H))break}const Q=U+B*w+_;v[Q]=i==="avg"?F/Y:H}}}return y}function m7(t,e,n,r,a=!1,i=!1){const o=St(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,g=r.padInfo.left,y=St(e,n,t);for(let v=0;v<r.batchSize;++v)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*s-f;let S=w;for(;S<0;)S+=u;const C=Math.min(r.inHeight,d+w);for(let E=0;E<r.outWidth;++E){const _=E*l-g;let N=_;for(;N<0;)N+=c;const M=Math.min(r.inWidth,p+_);let P=Number.NEGATIVE_INFINITY,L=-1;for(let U=S;U<C;U+=u){const B=U-w;for(let K=N;K<M;K+=c){const X=K-_,Z=y.get(v,U,K,b);Z>P&&(P=Z,a?L=i?((v*r.inHeight+U)*r.inWidth+K)*r.inChannels+b:(U*r.inWidth+K)*r.inChannels+b:L=B*p+X)}}o.set(L,v,x,E,b)}}return o}function g7(t,e,n,r,a,i){const o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,g=a.effectiveFilterWidth,y=a.padInfo.front,v=a.padInfo.top,b=a.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=St(a.outShape,n),S=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],_=a.outShape[3]*a.outShape[4],N=a.outShape[4];for(let M=0;M<a.batchSize;++M){const P=M*C,L=M*r[0];for(let U=0;U<a.inChannels;++U)for(let B=0;B<a.outDepth;++B){const K=B*o-y;let X=K;for(;X<0;)X+=u;const Z=Math.min(a.inDepth,p+K),H=P+B*E;for(let F=0;F<a.outHeight;++F){const Y=F*s-v;let Q=Y;for(;Q<0;)Q+=c;const ne=Math.min(a.inHeight,f+Y),se=H+F*_;for(let pe=0;pe<a.outWidth;++pe){const de=pe*l-b;let ie=de;for(;ie<0;)ie+=d;const xe=Math.min(a.inWidth,g+de),q=se+pe*N;let oe=x,he=0,Ie=0;for(let _e=X;_e<Z;_e+=u){const Fe=L+_e*r[1];for(let Xe=Q;Xe<ne;Xe+=c){const Oe=Fe+Xe*r[2];for(let lt=ie;lt<xe;lt+=d){const Je=Oe+lt*r[3],nt=t[Je+U];if(i==="max"&&nt>oe?oe=nt:i==="avg"&&(he+=nt,Ie++),isNaN(oe))break}if(isNaN(oe))break}if(isNaN(oe))break}const Ee=q+U;S[Ee]=i==="avg"?he/Ie:oe}}}}return w}function g0e(t,e){const n=St(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,g=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let b=0;b<e.outDepth;++b){const x=b*r-p;let w=x;for(;w<0;)w+=o;const S=Math.min(e.inDepth,u+x);for(let C=0;C<e.outHeight;++C){const E=C*a-f;let _=E;for(;_<0;)_+=s;const N=Math.min(e.inHeight,c+E);for(let M=0;M<e.outWidth;++M){const P=M*i-g;let L=P;for(;L<0;)L+=l;const U=Math.min(e.inWidth,d+P);let B=Number.NEGATIVE_INFINITY,K=-1;for(let X=w;X<S;X+=o){const Z=X-x;for(let H=_;H<N;H+=s){const F=H-E;for(let Y=L;Y<U;Y+=l){const Q=Y-P,ne=t.get(y,X,H,Y,v);ne>=B&&(B=ne,K=Z*c*d+F*c+Q)}}}n.set(K,y,b,C,M,v)}}}return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;We(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;j(pa(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ao(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))d=xs({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=Ze(a.shape),g=aN(p,a.shape,a.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const b0e={kernelName:sv,backendName:"cpu",kernelFunc:y0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;We(a,"avgPool3d");const c=dl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=g7(d,a.shape,a.dtype,Ze(a.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const x0e={kernelName:lv,backendName:"cpu",kernelFunc:v0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w0e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;We([a,i],"avgPool3DGrad");const c=dl(i.shape,o,s,1,l,u),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,g=c.filterDepth,y=c.filterHeight,v=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,_=S-1-c.padInfo.front,N=E-1-c.padInfo.left,M=C-1-c.padInfo.top,P=St(i.shape,"float32"),L=1/(g*y*v),U=n.bufferSync(a);for(let B=0;B<c.batchSize;++B)for(let K=0;K<c.inChannels;++K)for(let X=0;X<c.inDepth;++X)for(let Z=0;Z<c.inHeight;++Z)for(let H=0;H<c.inWidth;++H){const F=X-_,Y=Z-M,Q=H-N;let ne=0;for(let se=0;se<S;se+=b){const pe=(F+se)/d;if(!(pe<0||pe>=c.outDepth||Math.floor(pe)!==pe))for(let de=0;de<C;de+=x){const ie=(Y+de)/p;if(!(ie<0||ie>=c.outHeight||Math.floor(ie)!==ie))for(let xe=0;xe<E;xe+=w){const q=(Q+xe)/f;if(q<0||q>=c.outWidth||Math.floor(q)!==q)continue;const oe=U.get(B,pe,ie,q,K);ne+=oe}}}P.set(ne*L,B,X,Z,H,K)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const k0e={kernelName:k3,backendName:"cpu",kernelFunc:w0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S0e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;We([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=ao(o.shape,s,l,1,u),d=c.strideHeight,p=c.strideWidth,f=c.filterHeight,g=c.filterWidth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=St(o.shape,"float32"),E=1/(f*g),_=n.data.get(a.dataId).values,N=St(a.shape,"float32",_);for(let M=0;M<c.batchSize;++M)for(let P=0;P<c.inChannels;++P)for(let L=0;L<c.inHeight;++L)for(let U=0;U<c.inWidth;++U){const B=L-S,K=U-w;let X=0;for(let Z=0;Z<b;Z+=y){const H=(B+Z)/d;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let F=0;F<x;F+=v){const Y=(K+F)/p;if(Y<0||Y>=c.outWidth||Math.floor(Y)!==Y)continue;const Q=N.get(M,H,Y,P);X+=Q}}C.set(X*E,M,L,U,P)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const C0e={kernelName:w3,backendName:"cpu",kernelFunc:S0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function I0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:o,mean:s,variance:l}=e;j(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),We([a,s,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),g=o?n.data.get(o.dataId).values:new Float32Array([0]),y=new Float32Array(c.length),v=g.length,b=f.length,x=p.length,w=d.length;let S=0,C=0,E=0,_=0;for(let N=0;N<c.length;++N)y[N]=g[S++]+(c[N]-d[C++])*f[E++]/Math.sqrt(p[_++]+u),S>=v&&(S=0),C>=w&&(C=0),E>=b&&(E=0),_>=x&&(_=0);return n.makeTensorInfo(a.shape,a.dtype,y)}const E0e={kernelName:Dv,backendName:"cpu",kernelFunc:I0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;We([a],"batchToSpaceND");const s=i.reduce((b,x)=>b*x),l=Og(a.shape,i,s),u=Mg(l.length,i.length),c=Pg(a.shape,i,s),d=yT(o,i.length),p=bT(c,o,i.length),f=Tn({inputs:{x:a},backend:n,attrs:{shape:l}}),g=Ya({inputs:{x:f},backend:n,attrs:{perm:u}}),y=Tn({inputs:{x:g},backend:n,attrs:{shape:c}}),v=Yc({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const N0e={kernelName:cv,backendName:"cpu",kernelFunc:T0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=JT(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const R0e={kernelName:dv,backendName:"cpu",kernelFunc:_0e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $0e(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=zt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const O0e={kernelName:pv,backendName:"cpu",kernelFunc:$0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M0e=pn(pm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),P0e={kernelName:pm,backendName:"cpu",kernelFunc:M0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A0e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(be(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<s.length;u++){const c=s[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},D0e={kernelName:fv,backendName:"cpu",kernelFunc:A0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qp(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const L0e={kernelName:zv,backendName:"cpu",kernelFunc:qp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Xt(a,e[0].shape)[0],o=e.map(y=>y.shape);fT(o,i);let s=bs(e.map(y=>y.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(y=>be(y.shape)>0);if(l.length===1)return xs({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(S=>Xc({inputs:{input:S},backend:n})),v=l.map(S=>qp({inputs:{input:S},backend:n})),b=Kp({inputs:y,backend:n,attrs:{axis:i}}),x=Kp({inputs:v,backend:n,attrs:{axis:i}}),w=gi({inputs:{real:b,imag:x},backend:n});return y.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const u=l.map(y=>{const v=[-1,be(y.shape.slice(i))];return Tn({inputs:{x:y},backend:n,attrs:{shape:v}})}),c=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));s=bs(u.map(y=>y.shape),1);const d=u[0].shape[0]===1,p=w9(c,s,e[0].dtype,d),f=bs(l.map(y=>y.shape),i),g=n.makeTensorInfo(f,e[0].dtype,p);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const F0e={kernelName:mv,backendName:"cpu",kernelFunc:Kp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;We([a,i],"conv2d");const d=pl(l),p=Br(a.shape,i.shape,o,u,s,c,!1,d),f=p.filterHeight,g=p.filterWidth,y=p.dilationHeight,v=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,w=p.dataFormat==="channelsLast",S=new Nr(p.outShape,a.dtype),C=Ze(a.shape),E=Ze(i.shape),_=C[0],N=w?C[1]:C[2],M=w?C[2]:1,P=w?1:C[1],L=S.strides[0],U=w?S.strides[1]:S.strides[2],B=w?S.strides[2]:1,K=w?1:S.strides[1],X=n.data.get(a.dataId).values,Z=n.data.get(i.dataId).values,H=S.values;for(let F=0;F<p.batchSize;++F){const Y=F*_,Q=F*L;for(let ne=0;ne<p.outHeight;++ne){const se=Q+ne*U,pe=ne*p.strideHeight-x;for(let de=0;de<f;++de){const ie=pe+de*y;if(ie<0||ie>=p.inHeight)continue;const xe=de*E[0],q=Y+ie*N;for(let oe=0;oe<p.outWidth;++oe){const he=se+oe*B,Ie=oe*p.strideWidth-b;for(let Ee=0;Ee<g;++Ee){const _e=Ie+Ee*v;if(_e<0||_e>=p.inWidth)continue;const Fe=xe+Ee*E[1],Xe=q+_e*M;let Oe=Fe;for(let lt=0;lt<p.inChannels;++lt){const Je=X[Xe+lt*P];for(let nt=0;nt<p.outChannels;++nt)H[he+nt*K]+=Je*Z[Oe+nt];Oe+=p.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,H)}const B0e={kernelName:gv,backendName:"cpu",kernelFunc:y7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function z0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;We([a,i],"conv2dBackpropFilter");const d=pl(l),p=Br(a.shape,c,o,1,s,u,!1,d),{strideHeight:f,strideWidth:g,filterHeight:y,filterWidth:v}=p,b=p.dataFormat==="channelsLast",x=new Nr(p.filterShape,"float32"),w=p.padInfo.left,S=p.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,_=new Nr(a.shape,a.dtype,C),N=new Nr(i.shape,i.dtype,E);for(let M=0;M<y;++M){const P=Math.max(0,Math.ceil((S-M)/f)),L=Math.min(p.outHeight,(p.inHeight+S-M)/f);for(let U=0;U<v;++U){const B=Math.max(0,Math.ceil((w-U)/g)),K=Math.min(p.outWidth,(p.inWidth+w-U)/g);for(let X=0;X<p.inChannels;++X)for(let Z=0;Z<p.outChannels;++Z){let H=0;for(let F=0;F<p.batchSize;++F)for(let Y=P;Y<L;++Y){const Q=M+Y*f-S;for(let ne=B;ne<K;++ne){const se=U+ne*g-w;b?H+=_.get(F,Q,se,X)*N.get(F,Y,ne,Z):H+=_.get(F,X,Q,se)*N.get(F,Z,Y,ne)}}x.set(H,M,U,X,Z)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const U0e={kernelName:yv,backendName:"cpu",kernelFunc:z0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j0e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;We([a,i],"conv2dBackpropInput");const d=Ze(i.shape),p=Ze(a.shape);let f=pl(u);const g=Br(o,i.shape,s,1,l,c,!1,f),y=new Nr(g.inShape,"float32"),v=y.values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,[w,S,C]=d,{batchSize:E,filterHeight:_,filterWidth:N,inChannels:M,inHeight:P,inWidth:L,outChannels:U,outHeight:B,outWidth:K,strideHeight:X,strideWidth:Z}=g;f=g.dataFormat;const H=_-1-g.padInfo.top,F=N-1-g.padInfo.left,Y=f==="channelsLast",Q=y.strides[0],ne=Y?y.strides[1]:y.strides[2],se=Y?y.strides[2]:1,pe=Y?1:y.strides[1],de=p[0],ie=Y?p[1]:p[2],xe=Y?p[2]:1,q=Y?1:p[1];for(let oe=0;oe<E;++oe)for(let he=0;he<M;++he)for(let Ie=0;Ie<P;++Ie){const Ee=Ie-H,_e=Math.max(0,Math.ceil(Ee/X)),Fe=Math.min(B,(_+Ee)/X);for(let Xe=0;Xe<L;++Xe){const Oe=Xe-F,lt=Math.max(0,Math.ceil(Oe/Z)),Je=Math.min(K,(N+Oe)/Z);let nt=0;for(let on=_e;on<Fe;++on){const Ut=on*X-Ee;for(let Yt=lt;Yt<Je;++Yt){const Qt=Yt*Z-Oe,$t=de*oe+ie*on+xe*Yt,Ct=w*(_-1-Ut)+S*(N-1-Qt)+C*he;for(let zn=0;zn<U;++zn){const Xn=b[$t+q*zn],za=x[Ct+zn];nt+=Xn*za}}}const et=Q*oe+ne*Ie+se*Xe+pe*he;v[et]=nt}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const V0e={kernelName:bv,backendName:"cpu",kernelFunc:j0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r;We([a,i],"conv3d");const u=bu(a.shape,i.shape,o,l,s),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:g,dilationWidth:y,padInfo:v}=u,b=v.front,x=v.left,w=v.top,S=new Nr(u.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,_=S.values,N=Ze(a.shape),M=Ze(i.shape);for(let P=0;P<u.batchSize;++P){const L=P*N[0],U=P*S.strides[0];for(let B=0;B<u.outDepth;++B){const K=U+B*S.strides[1],X=B*u.strideDepth-b;for(let Z=0;Z<c;++Z){const H=X+Z*f;if(H<0||H>=u.inDepth)continue;const F=Z*M[0],Y=L+H*N[1];for(let Q=0;Q<u.outHeight;++Q){const ne=K+Q*S.strides[2],se=Q*u.strideHeight-w;for(let pe=0;pe<d;++pe){const de=se+pe*g;if(de<0||de>=u.inHeight)continue;const ie=F+pe*M[1],xe=Y+de*N[2];for(let q=0;q<u.outWidth;++q){const oe=ne+q*u.outChannels,he=q*u.strideWidth-x;for(let Ie=0;Ie<p;++Ie){const Ee=he+Ie*y;if(Ee<0||Ee>=u.inWidth)continue;const _e=ie+Ie*M[2],Fe=xe+Ee*u.inChannels;let Xe=_e;for(let Oe=0;Oe<u.inChannels;++Oe){const lt=C[Fe+Oe];for(let Je=0;Je<u.outChannels;++Je)_[oe+Je]+=lt*E[Xe+Je];Xe+=u.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const G0e={kernelName:vv,backendName:"cpu",kernelFunc:W0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r;We([a,i],"conv3dBackpropFilterV2");const u=Ze(a.shape),c=Ze(i.shape),d=bu(a.shape,l,o,1,s),p=d.strideDepth,f=d.strideHeight,g=d.strideWidth,y=d.filterDepth,v=d.filterHeight,b=d.filterWidth,x=new Nr(d.filterShape,"float32"),w=x.values,[S,C,E,_]=x.strides,N=n.data.get(i.dataId).values,[M,P,L,U]=c,B=n.data.get(a.dataId).values,[K,X,Z,H]=u,F=d.padInfo.front,Y=d.padInfo.left,Q=d.padInfo.top;for(let ne=0;ne<y;++ne){const se=Math.max(0,Math.ceil((F-ne)/p)),pe=Math.min(d.outDepth,(d.inDepth+F-ne)/p),de=ne*S;for(let ie=0;ie<v;++ie){const xe=Math.max(0,Math.ceil((Q-ie)/f)),q=Math.min(d.outHeight,(d.inHeight+Q-ie)/f),oe=ie*C+de;for(let he=0;he<b;++he){const Ie=Math.max(0,Math.ceil((Y-he)/g)),Ee=Math.min(d.outWidth,(d.inWidth+Y-he)/g),_e=he*E+oe;for(let Fe=0;Fe<d.inChannels;++Fe){const Xe=Fe*_+_e;for(let Oe=0;Oe<d.outChannels;++Oe){let lt=0;for(let Je=0;Je<d.batchSize;++Je){const nt=Je*K,et=Je*M;for(let on=se;on<pe;++on){const Ut=(ne+on*p-F)*X+nt,Yt=on*P+et;for(let Qt=xe;Qt<q;++Qt){const $t=(ie+Qt*f-Q)*Z+Ut,Ct=Qt*L+Yt;for(let zn=Ie;zn<Ee;++zn){const Xn=(he+zn*g-Y)*H+$t,za=zn*U+Ct;lt+=B[Xn+Fe]*N[za+Oe]}}}}w[Xe+Oe]=lt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const q0e={kernelName:S3,backendName:"cpu",kernelFunc:H0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K0e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r;We([a],"conv3dBackpropInputV2");const u=Ze(a.shape),c=Ze(i.shape),d=bu(l,i.shape,s,1,o),p=new Nr(d.inShape,"float32"),f=p.values,[g,y,v,b]=p.strides,x=n.data.get(a.dataId).values,[w,S,C,E]=u,_=n.data.get(i.dataId).values,[N,M,P,L]=c,{batchSize:U,filterDepth:B,filterHeight:K,filterWidth:X,inChannels:Z,inDepth:H,inHeight:F,inWidth:Y,outChannels:Q,outDepth:ne,outHeight:se,outWidth:pe,strideDepth:de,strideHeight:ie,strideWidth:xe}=d,q=B-1-d.padInfo.front,oe=K-1-d.padInfo.top,he=X-1-d.padInfo.left;for(let Ie=0;Ie<U;++Ie)for(let Ee=0;Ee<Z;++Ee)for(let _e=0;_e<H;++_e){const Fe=_e-q,Xe=Math.max(0,Math.ceil(Fe/de)),Oe=Math.min(ne,(B+Fe)/de);for(let lt=0;lt<F;++lt){const Je=lt-oe,nt=Math.max(0,Math.ceil(Je/ie)),et=Math.min(se,(K+Je)/ie);for(let on=0;on<Y;++on){const Ut=on-he,Yt=Math.max(0,Math.ceil(Ut/xe)),Qt=Math.min(pe,(X+Ut)/xe);let $t=0;for(let Ct=Xe;Ct<Oe;++Ct){const zn=Ct*de-Fe;for(let Xn=nt;Xn<et;++Xn){const za=Xn*ie-Je;for(let _n=Yt;_n<Qt;++_n){const Qa=_n*xe-Ut,mo=w*Ie+S*Ct+C*Xn+E*_n,bi=N*(B-1-zn)+M*(K-1-za)+P*(X-1-Qa)+L*Ee;for(let hn=0;hn<Q;++hn){const Za=x[mo+hn],vi=_[bi+hn];$t+=Za*vi}}}}f[g*Ie+y*_e+v*lt+b*on+Ee]=$t}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const X0e={kernelName:xv,backendName:"cpu",kernelFunc:K0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y0e=pn(hm,t=>Math.cos(t)),Q0e={kernelName:hm,backendName:"cpu",kernelFunc:Y0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Z0e=pn(fm,t=>Math.cosh(t)),J0e={kernelName:fm,backendName:"cpu",kernelFunc:Z0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e1e(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,p,f]=a.shape,g=i.shape[0],[y,v]=s,b=St([g,y,v,f],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,C=Ze(a.shape),E=Ze(b.shape);for(let _=0;_<g;_++){const N=_*4,M=x[N],P=x[N+1],L=x[N+2],U=x[N+3],B=w[_];if(B>=c)continue;const K=y>1?(L-M)*(d-1)/(y-1):0,X=v>1?(U-P)*(p-1)/(v-1):0;for(let Z=0;Z<y;Z++){const H=y>1?M*(d-1)+Z*K:.5*(M+L)*(d-1);if(H<0||H>d-1){for(let F=0;F<v;F++)for(let Y=0;Y<f;Y++){const Q=Y+F*E[2]+Z*E[1]+_*E[0];b.values[Q]=u}continue}if(l==="bilinear"){const F=Math.floor(H),Y=Math.ceil(H),Q=H-F;for(let ne=0;ne<v;ne++){const se=v>1?P*(p-1)+ne*X:.5*(P+U)*(p-1);if(se<0||se>p-1){for(let xe=0;xe<f;xe++){const q=xe+ne*E[2]+Z*E[1]+_*E[0];b.values[q]=u}continue}const pe=Math.floor(se),de=Math.ceil(se),ie=se-pe;for(let xe=0;xe<f;xe++){let q=xe+pe*C[2]+F*C[1]+B*C[0];const oe=S[q];q=xe+de*C[2]+F*C[1]+B*C[0];const he=S[q];q=xe+pe*C[2]+Y*C[1]+B*C[0];const Ie=S[q];q=xe+de*C[2]+Y*C[1]+B*C[0];const Ee=S[q],_e=oe+(he-oe)*ie,Fe=Ie+(Ee-Ie)*ie;q=xe+ne*E[2]+Z*E[1]+_*E[0],b.values[q]=_e+(Fe-_e)*Q}}}else for(let F=0;F<v;++F){const Y=v>1?P*(p-1)+F*X:.5*(P+U)*(p-1);if(Y<0||Y>p-1){for(let se=0;se<f;se++){const pe=se+F*E[2]+Z*E[1]+_*E[0];b.values[pe]=u}continue}const Q=Math.round(Y),ne=Math.round(H);for(let se=0;se<f;se++){const pe=se+Q*C[2]+ne*C[1]+B*C[0],de=se+F*E[2]+Z*E[1]+_*E[0];b.values[de]=S[pe]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const t1e={kernelName:Sv,backendName:"cpu",kernelFunc:e1e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function n1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;We(a,"cumprod");const l=dr([i],a.shape.length);let u=a;l!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=pr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Xa(u.dtype,"int32"),p=ev(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?1:f[w];else{const S=y(b,x-1);p[w]=o?f[S]*p[S]:f[w]*p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Sg(l),x=Ya({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const r1e={kernelName:wv,backendName:"cpu",kernelFunc:n1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;We(a,"cumsum");const l=dr([i],a.shape.length);let u=a;l!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=pr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Xa(u.dtype,"int32"),p=Xr(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?0:f[w];else{const S=y(b,x-1);p[w]=o?f[S]+p[S]:f[w]+p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Sg(l),x=Ya({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const i1e={kernelName:kv,backendName:"cpu",kernelFunc:a1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=JT(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=v9(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const s1e={kernelName:Cv,backendName:"cpu",kernelFunc:o1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r;j(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*i,p=u*i,f=c/(i*i),g=n.data.get(a.dataId).values,y=new Float32Array(s*d*p*f);let v=0;for(let b=0;b<s;++b)for(let x=0;x<d;++x){const w=Math.floor(x/i),S=x%i;for(let C=0;C<p;++C){const E=Math.floor(C/i),_=C%i,N=(S*i+_)*f;for(let M=0;M<f;++M){const P=M+N+c*(E+u*(w+l*b));y[v++]=g[P]}}}return n.makeTensorInfo([s,d,p,f],a.dtype,y)}const u1e={kernelName:Iv,backendName:"cpu",kernelFunc:l1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;We([a,i],"depthwiseConv2DNative");const c=Ze(a.shape),d=Ze(i.shape);let p=l;p==null&&(p=[1,1]),j(pa(o,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`);const f=Br(a.shape,i.shape,o,p,s,u,!0),{filterHeight:g,filterWidth:y,dilationHeight:v,dilationWidth:b,padInfo:x}=f,w=x.left,S=x.top,C=f.outChannels/f.inChannels,E=new Nr(f.outShape,a.dtype),_=n.data.get(a.dataId).values,N=n.data.get(i.dataId).values,M=E.values;for(let P=0;P<f.batchSize;++P){const L=P*c[0],U=P*E.strides[0];for(let B=0;B<f.outHeight;++B){const K=U+B*E.strides[1],X=B*f.strideHeight-S;for(let Z=0;Z<g;++Z){const H=X+Z*v;if(H<0||H>=f.inHeight)continue;const F=Z*d[0],Y=L+H*c[1];for(let Q=0;Q<f.outWidth;++Q){const ne=K+Q*E.strides[2],se=Q*f.strideWidth-w;for(let pe=0;pe<y;++pe){const de=se+pe*b;if(de<0||de>=f.inWidth)continue;const ie=F+pe*d[1],xe=Y+de*f.inChannels;let q=ne,oe=ie;for(let he=0;he<f.inChannels;++he){const Ie=_[xe+he];for(let Ee=0;Ee<C;++Ee)M[q+Ee]+=Ie*N[oe+Ee];q+=C,oe+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const c1e={kernelName:Ev,backendName:"cpu",kernelFunc:b7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;We([a,i],"depthwiseConv2dNativeBackpropFilter");const d=Br(a.shape,c,o,s,l,u,!0),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:y}=d,v=new Nr(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(a.dataId).values,C=new Nr(a.shape,a.dtype,S),E=n.data.get(i.dataId).values,_=new Nr(i.shape,i.dtype,E);for(let N=0;N<g;++N){const M=Math.max(0,Math.ceil((x-N)/p)),P=Math.min(d.outHeight,(d.inHeight+x-N)/p);for(let L=0;L<y;++L){const U=Math.max(0,Math.ceil((b-L)/f)),B=Math.min(d.outWidth,(d.inWidth+b-L)/f);for(let K=0;K<d.outChannels;++K){const X=Math.trunc(K/w),Z=K%w;let H=0;for(let F=0;F<d.batchSize;++F)for(let Y=M;Y<P;++Y){const Q=N+Y*p-x;for(let ne=U;ne<B;++ne){const se=L+ne*f-b;H+=C.get(F,Q,se,X)*_.get(F,Y,ne,K)}}v.set(H,N,L,X,Z)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const p1e={kernelName:Tv,backendName:"cpu",kernelFunc:d1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;We([a,i],"depthwiseConv2DNativeBackpropInput");const d=Ze(a.shape),p=Ze(i.shape),f=Br(c,i.shape,o,s,l,u,!0),g=new Nr(f.inShape,"float32"),y=g.values,[v,b,x]=g.strides,w=n.data.get(a.dataId).values,[S,C,E]=d,_=n.data.get(i.dataId).values,[N,M,P]=p,{batchSize:L,filterHeight:U,filterWidth:B,inChannels:K,inHeight:X,inWidth:Z,outChannels:H,outHeight:F,outWidth:Y,strideHeight:Q,strideWidth:ne}=f,se=U-1-f.padInfo.top,pe=B-1-f.padInfo.left,de=H/K;for(let ie=0;ie<L;++ie)for(let xe=0;xe<K;++xe)for(let q=0;q<X;++q){const oe=q-se,he=Math.max(0,Math.ceil(oe/Q)),Ie=Math.min(F,(U+oe)/Q);for(let Ee=0;Ee<Z;++Ee){const _e=Ee-pe,Fe=Math.max(0,Math.ceil(_e/ne)),Xe=Math.min(Y,(B+_e)/ne);let Oe=0;for(let lt=he;lt<Ie;++lt){const Je=lt*Q-oe;for(let nt=Fe;nt<Xe;++nt){const et=nt*ne-_e,on=S*ie+C*lt+E*nt,Ut=N*(U-1-Je)+M*(B-1-et)+P*xe;for(let Yt=0;Yt<de;++Yt){const Qt=xe*de+Yt,$t=w[on+Qt],Ct=_[Ut+Yt];Oe+=$t*Ct}}}y[v*ie+b*q+x*Ee+xe]=Oe}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const f1e={kernelName:Nv,backendName:"cpu",kernelFunc:h1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m1e(t){const{inputs:e,backend:n}=t,{x:r}=e,a=be(r.shape),i=n.data.get(r.dataId).values,o=St([a,a],r.dtype),s=o.values;for(let u=0;u<i.length;u++)s[u*a+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const g1e={kernelName:_v,backendName:"cpu",kernelFunc:m1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y1e={kernelName:Rv,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:o,dilations:s}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(a.dataId).values,p=a.shape.length,{batchSize:f,inHeight:g,inWidth:y,inChannels:v,outHeight:b,outWidth:x,padInfo:w,strideHeight:S,strideWidth:C,filterHeight:E,filterWidth:_,dilationHeight:N,dilationWidth:M,outShape:P}=vg(r.shape,a.shape,i,o,"NHWC",s),L=be(P),U=P.length,B=Tr(r.dtype,L);for(let K=0;K<f;++K)for(let X=0;X<b;++X){const Z=X*S-w.top;for(let H=0;H<x;++H){const F=H*C-w.left;for(let Y=0;Y<v;++Y){let Q=Number.MIN_SAFE_INTEGER;for(let se=0;se<E;++se){const pe=Z+se*N;if(pe>=0&&pe<g)for(let de=0;de<_;++de){const ie=F+de*M;if(ie>=0&&ie<y){const xe=Fo([K,pe,ie,Y],c,Ze(r.shape)),q=Fo([se,de,Y],p,Ze(a.shape)),oe=u[xe]+d[q];oe>Q&&(Q=oe)}}}const ne=Fo([K,X,H,Y],U,Ze(P));B[ne]=Q}}}return{dataId:l.write(fu(B,r.dtype),P,r.dtype),shape:P,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const b1e={kernelName:I3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=$i(r.shape,u.data.get(r.dataId).values),d=$i(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:_,dilationWidth:N,outShape:M}=vg(r.shape,a.shape,o,s,"NHWC",l);j(i.rank===M.length,()=>`Error in ${I3}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=$i(M,u.data.get(i.dataId).values),L=g3(a.shape,a.dtype);for(let U=0;U<p;++U)for(let B=0;B<v;++B){const K=B*w-x.top;for(let X=0;X<b;++X){const Z=X*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Y=0,Q=0;for(let ne=0;ne<C;++ne){const se=K+ne*_;if(se>=0&&se<f)for(let pe=0;pe<E;++pe){const de=Z+pe*N;if(de>=0&&de<g){const ie=c[U][se][de][H]+d[ne][pe][H];ie>F&&(F=ie,Y=ne,Q=pe)}}}L[Y][Q][H]+=P[U][B][X][H]}}}return{dataId:u.write(fu(L,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const v1e={kernelName:C3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=$i(r.shape,u.data.get(r.dataId).values),d=$i(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:_,dilationWidth:N,outShape:M}=vg(r.shape,a.shape,o,s,"NHWC",l);j(i.rank===M.length,()=>`Error in ${C3}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=$i(M,u.data.get(i.dataId).values),L=g3(r.shape,r.dtype);for(let U=0;U<p;++U)for(let B=0;B<v;++B){const K=B*w-x.top;for(let X=0;X<b;++X){const Z=X*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Y=K<0?0:K,Q=Z<0?0:Z;for(let ne=0;ne<C;++ne){const se=K+ne*_;if(se>=0&&se<f)for(let pe=0;pe<E;++pe){const de=Z+pe*N;if(de>=0&&de<g){const ie=c[U][se][de][H]+d[ne][pe][H];ie>F&&(F=ie,Y=se,Q=de)}}}L[U][Y][Q][H]+=P[U][B][X][H]}}}return{dataId:u.write(fu(L,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lg(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"sum");let s;a.dtype==="bool"?s=Eu({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):s=xs({inputs:{x:a},backend:n});const l=s.shape.length,u=Xt(i,s.shape),c=dr(u,l);let d=u,p=s;c!=null&&(p=Ya({inputs:{x:s},backend:n,attrs:{perm:c}}),d=pr(d.length,l)),Qr("sum",d,p.shape.length);const[f,g]=Yr(p.shape,d),y=Xa(p.dtype,"int32");let v=_2(n,f,y);const b=be(g),x=n.data.get(v.dataId).values,w=n.data.get(p.dataId).values;for(let S=0;S<x.length;++S){const C=S*b;let E=0;for(let _=0;_<b;++_)E+=w[C+_];x[S]=E}if(o){const S=_r(v.shape,u),C=v;v=Tn({inputs:{x:v},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(p),v}const x1e={kernelName:xx,backendName:"cpu",kernelFunc:Lg};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w1e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=_T(a,i.length);$T(o.length,l,i);const{path:u,steps:c}=OT(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=RT(f,l[v]);let w;MT(b)?w=i[v]:(w=Ya({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);vn(w.shape,S)||(w=Tn({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=R2({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=Lg({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const k1e={kernelName:$v,backendName:"cpu",kernelFunc:w1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S1e(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;We([r,a],"eluGrad");const i=new Float32Array(be(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=1?i[l]=s[l]:i[l]=s[l]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}const C1e={kernelName:E3,backendName:"cpu",kernelFunc:S1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I1e=wT,E1e=kT,T1e=ST,N1e=CT,_1e=IT,R1e=ET,$1e=pn(ym,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+I1e*n);return e*(1-((((R1e*r+_1e)*r+N1e)*r+T1e)*r+E1e)*r*Math.exp(-n*n))}),O1e={kernelName:ym,backendName:"cpu",kernelFunc:$1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O2(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(j(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),Tn({inputs:{x:a},backend:n,attrs:{shape:s}})}const M1e={kernelName:Ov,backendName:"cpu",kernelFunc:O2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P1e=vr((t,e)=>t/e),iN=zr(mm,P1e),oN={kernelName:mm,backendName:"cpu",kernelFunc:iN};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v7(t,e,n){const r=t.shape,a=r[0],i=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,i],c=be(u),d=Er("float32",c),p=Er("float32",c);for(let v=0;v<a;v++){const b=Yc({inputs:{x:s},backend:n,attrs:{begin:[v,0],size:[1,i]}}),x=Yc({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),w=gi({inputs:{real:b,imag:x},backend:n}),{real:S,imag:C}=A1e(w,e,n),E=ml(S,C);for(let _=0;_<i;_++){const N=TT(E,_);d[v*i+_]=N.real,p[v*i+_]=N.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const f=n.makeTensorInfo(u,"float32",d),g=n.makeTensorInfo(u,"float32",p),y=gi({inputs:{real:f,imag:g},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}function A1e(t,e,n){const r=be(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(D1e(r)){const s=sN(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",il(r,"float32")),p=xs({inputs:{x:d},backend:n}),f=oN.kernelFunc({inputs:{a:u,b:d},backend:n}),g=oN.kernelFunc({inputs:{a:c,b:p},backend:n}),y=n.data.get(f.dataId).values,v=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),{real:y,imag:v}}return s}else{const s=ml(i,o),l=L1e(s,r,e);return AF(l)}}function D1e(t){return(t&t-1)===0}function sN(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=ml(t,e),o=n/2,s=DF(i),l=s.real,u=s.imag,c=[l.length],d=a.makeTensorInfo(c,"float32",l),p=a.makeTensorInfo(c,"float32",u),f=gi({inputs:{real:d,imag:p},backend:a}),g=LF(i),y=g.real,v=g.imag,b=[y.length],x=a.makeTensorInfo(b,"float32",y),w=a.makeTensorInfo(b,"float32",v),S=gi({inputs:{real:x,imag:w},backend:a}),C=sN(l,u,o,r,a),E=C.real,_=C.imag,N=[E.length],M=a.makeTensorInfo(N,"float32",E),P=a.makeTensorInfo(N,"float32",_),L=gi({inputs:{real:M,imag:P},backend:a}),U=sN(y,v,o,r,a),B=U.real,K=U.imag,X=[B.length],Z=a.makeTensorInfo(X,"float32",B),H=a.makeTensorInfo(X,"float32",K),F=gi({inputs:{real:Z,imag:H},backend:a}),Y=BF(n,r),Q=[Y.real.length],ne=a.makeTensorInfo(Q,"float32",Y.real),se=a.makeTensorInfo(Q,"float32",Y.imag),pe=gi({inputs:{real:ne,imag:se},backend:a}),de=R2({inputs:{a:pe,b:F},backend:a}),ie=Wp({inputs:{a:L,b:de},backend:a}),xe=rN({inputs:{a:L,b:de},backend:a}),q=Xc({inputs:{input:ie},backend:a}),oe=Xc({inputs:{input:xe},backend:a}),he=qp({inputs:{input:ie},backend:a}),Ie=qp({inputs:{input:xe},backend:a}),Ee=Kp({inputs:[q,oe],backend:a,attrs:{axis:0}}),_e=Kp({inputs:[he,Ie],backend:a,attrs:{axis:0}}),Fe=a.data.get(Ee.dataId).values,Xe=a.data.get(_e.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(xe),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(oe),a.disposeIntermediateTensorInfo(Ie),a.disposeIntermediateTensorInfo(Ee),a.disposeIntermediateTensorInfo(_e),{real:Fe,imag:Xe}}function L1e(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,o=0;for(let s=0;s<e;s++){const l=zF(a*s,e,n),u=TT(t,s);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),FF(r,i,o,a)}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F1e(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=Tn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=v7(s,!1,n),u=Tn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const B1e={kernelName:Mv,backendName:"cpu",kernelFunc:F1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lN(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,o=i||kp(a),s=Tr(o,be(r));return U1e(s,a,o),e.makeTensorInfo(r,o,s)}const z1e={kernelName:Pv,backendName:"cpu",kernelFunc:lN};function U1e(t,e,n){t.fill(e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j1e={kernelName:Av,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=Er(r.dtype,be(r.shape)),[o,s,l,u]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<o;d++){const p=d*l*s*u;for(let f=0;f<s;f++){const g=f*(l*u);for(let y=0;y<l;y++){const v=y*u;for(let b=0;b<u;b++){const x=Math.round(l-y-1),w=p+g+v+b;let S=c[w];if(x>=0&&x<l){const C=x*u,E=p+g+C+b;S=c[E]}i[w]=S}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const V1e=vr((t,e)=>Math.floor(t/e)),W1e=zr(km,V1e,null,"int32"),G1e={kernelName:km,backendName:"cpu",kernelFunc:W1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=y7({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const b=Tn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=Wp({inputs:{a:y,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else y=Wp({inputs:{a:y,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=y;if(c==="NCHW"&&f==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const b=Tn({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});y=$2(n,y,f,b,g),n.disposeIntermediateTensorInfo(b)}else y=$2(n,y,f,s,g);n.disposeIntermediateTensorInfo(v)}return y}const q1e={kernelName:sg,backendName:"cpu",kernelFunc:H1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=b7({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;y=Wp({inputs:{a:y,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=y;y=$2(n,y,f,s,g),n.disposeIntermediateTensorInfo(v)}return y}const X1e={kernelName:lg,backendName:"cpu",kernelFunc:K1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y1e(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=be(r.shape),o=a.shape,s=o[o.length-1],[l,u,c,d]=Qx(r,a);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(a.dataId).values,f=n.bufferSync(r),g=N9(p,f,r.dtype,u,s,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,g.values)}const Q1e={kernelName:Fv,backendName:"cpu",kernelFunc:Y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r;We([a,i],"gatherV2");const l=Xt(o,a.shape)[0],u=n.data.get(i.dataId).values,c=a.shape[l];for(let S=0;S<u.length;++S){const C=u[S];j(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let d=s;s==null&&(d=0);const p=be(i.shape),f=DT(a,i,l,d),g=Tn({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),y=Tn({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,p/f.batchSize]}}),v=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize],b=n.bufferSync(y),x=n.bufferSync(g),w=_9(x,b,v);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}const J1e={kernelName:Lv,backendName:"cpu",kernelFunc:Z1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eye(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=Tn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=v7(s,!0,n),u=Tn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const tye={kernelName:Bv,backendName:"cpu",kernelFunc:eye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nye=pn(Em,t=>Number.isFinite(t)?1:0,"bool"),rye={kernelName:Em,backendName:"cpu",kernelFunc:nye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aye=pn(Tm,t=>Math.abs(t)===1/0?1:0,"bool"),iye={kernelName:Tm,backendName:"cpu",kernelFunc:aye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oye=pn(Nm,t=>Number.isNaN(t)?1:0,"bool"),sye={kernelName:Nm,backendName:"cpu",kernelFunc:oye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lye(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=P9(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const uye={kernelName:jv,backendName:"cpu",kernelFunc:lye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cye=pn(Om,t=>Math.log1p(t)),dye={kernelName:Om,backendName:"cpu",kernelFunc:cye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pye=vr((t,e)=>t&&e),hye=zr(Mm,pye,null,"bool"),fye={kernelName:Mm,backendName:"cpu",kernelFunc:hye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mye=pn(Pm,t=>t?0:1,"bool"),gye={kernelName:Pm,backendName:"cpu",kernelFunc:mye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yye=vr((t,e)=>t||e),bye=zr(Am,yye,null,"bool"),vye={kernelName:Am,backendName:"cpu",kernelFunc:bye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r;We(a,"LRN");const u=a.shape[3],c=u-1,d=n.data.get(a.dataId).values,p=be(a.shape),f=new Float32Array(p);function g(y){const v=y%u;let b=y-v+Math.max(0,v-i);const x=y-v+Math.min(v+i,c);let w=0;for(;b<=x;b++){const S=d[b];w+=S*S}return w}for(let y=0;y<p;y++){const v=g(y),b=d[y]*Math.pow(o+s*v,-l);f[y]=b}return n.makeTensorInfo(a.shape,a.dtype,f)}const wye={kernelName:Vv,backendName:"cpu",kernelFunc:xye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r;We(o,"LRNGrad");const d=be(o.shape),p=o.shape[3],f=n.data.get(o.dataId).values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(d),b=d;for(let x=0;x<b;x++){const w=x%p,S=x-w+Math.max(0,w-s),C=x-w+Math.min(p,w+s+1);let E=0;for(let _=S;_<C;_++)E+=Math.pow(g[_],2);E=u*E+l;for(let _=S;_<C;_++){let N=-2*u*c*g[_]*y[x]/E;x===_&&(N+=Math.pow(E,-c)),N*=f[x],v[_]+=N}}return n.makeTensorInfo(o.shape,a.dtype,v)}const Sye={kernelName:T3,backendName:"cpu",kernelFunc:kye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=n;let l=a.shape;const u=l.length,c=Xt(i,l);let d=c;const p=dr(d,u);let f=s.data.get(a.dataId).values;if(p!=null){const S=new Array(u);for(let C=0;C<S.length;C++)S[C]=l[p[C]];f=tN(f,l,a.dtype,p,S),d=pr(d.length,u),l=S}We(a,"max"),Qr("max",d,u);const[g,y]=Yr(l,d),v=be(y),b=D9(f,v,g,a.dtype),x=s.write(b,g,a.dtype);let w=g;return o&&(w=_r(g,c)),{dataId:x,shape:w,dtype:a.dtype}}const Cye={kernelName:Wv,backendName:"cpu",kernelFunc:x7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;We(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;j(pa(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ao(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))d=xs({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=Ze(a.shape),g=aN(p,a.shape,a.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const Eye={kernelName:Gv,backendName:"cpu",kernelFunc:Iye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;We(a,"maxPool3d");const c=dl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=g7(d,a.shape,a.dtype,Ze(a.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const Nye={kernelName:Hv,backendName:"cpu",kernelFunc:Tye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _ye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;We([a,i],"maxPool3DGrad");const c=dl(i.shape,o,s,1,l,u),d=n.bufferSync(i),p=g0e(d,c),f=c.strideDepth,g=c.strideHeight,y=c.strideWidth,v=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=w-1-c.padInfo.front,_=C-1-c.padInfo.left,N=S-1-c.padInfo.top,M=St(i.shape,"float32"),P=n.bufferSync(a);for(let L=0;L<c.batchSize;++L)for(let U=0;U<c.inChannels;++U)for(let B=0;B<c.inDepth;++B)for(let K=0;K<c.inHeight;++K)for(let X=0;X<c.inWidth;++X){const Z=B-E,H=K-N,F=X-_;let Y=0;for(let Q=0;Q<w;Q+=v){const ne=(Z+Q)/f;if(!(ne<0||ne>=c.outDepth||Math.floor(ne)!==ne))for(let se=0;se<S;se+=b){const pe=(H+se)/g;if(!(pe<0||pe>=c.outHeight||Math.floor(pe)!==pe))for(let de=0;de<C;de+=x){const ie=(F+de)/y;if(ie<0||ie>=c.outWidth||Math.floor(ie)!==ie)continue;const xe=w*S*C-1-p.get(L,ne,pe,ie,U),q=Q*S*C+se*C+de,oe=xe===q?1:0;if(oe===0)continue;const he=P.get(L,ne,pe,ie,U);Y+=he*oe}}}M.set(Y,L,B,K,X,U)}return n.makeTensorInfo(M.shape,M.dtype,M.values)}const Rye={kernelName:_3,backendName:"cpu",kernelFunc:_ye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;We([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=ao(s.shape,l,u,1,c,d),f=n.data.get(s.dataId).values,g=St(p.outShape,s.dtype,m7(f,s.shape,s.dtype,p).values),y=p.strideHeight,v=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,w=p.effectiveFilterHeight,S=p.effectiveFilterWidth,C=S-1-p.padInfo.left,E=w-1-p.padInfo.top,_=St(s.shape,"float32"),N=n.data.get(a.dataId).values,M=St(a.shape,"float32",N);for(let P=0;P<p.batchSize;++P)for(let L=0;L<p.inChannels;++L)for(let U=0;U<p.inHeight;++U)for(let B=0;B<p.inWidth;++B){const K=U-E,X=B-C;let Z=0;for(let H=0;H<w;H+=b){const F=(K+H)/y;if(!(F<0||F>=p.outHeight||Math.floor(F)!==F))for(let Y=0;Y<S;Y+=x){const Q=(X+Y)/v;if(Q<0||Q>=p.outWidth||Math.floor(Q)!==Q)continue;const ne=w*S-1-g.get(P,F,Q,L),se=H*S+Y,pe=ne===se?1:0;if(pe===0)continue;const de=M.get(P,F,Q,L);Z+=de*pe}}_.set(Z,P,U,B,L)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const Oye={kernelName:N3,backendName:"cpu",kernelFunc:$ye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mye(t,e,n,r,a){const i=Ze(e),o=aN(t,e,n,i,a,"max"),s=m7(t,e,n,a,!0,r);return[o.values,s.values]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pye={kernelName:qv,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;We(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=ao(r.shape,a,i,[1,1],o),[d,p]=Mye(u,r.shape,r.dtype,s,c),f=l.write(d,c.outShape,r.dtype),g=l.write(p,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:g,shape:c.outShape,dtype:"int32"}]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Aye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=Xt(i,a.shape),l=Yr(a.shape,s)[1],u=be(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);const p=Eu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(p);const f=iN({inputs:{a:p,b:d},backend:n});c.push(f);const g=Lg({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const Dye={kernelName:Kv,backendName:"cpu",kernelFunc:Aye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"min");const s=Xt(i,a.shape);let l=s;const u=dr(l,a.shape.length);let c=a;u!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),l=pr(l.length,a.shape.length)),Qr("min",l,c.shape.length);const[d,p]=Yr(c.shape,l),f=be(p),g=Xr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];(Number.isNaN(C)||C<w)&&(w=C)}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=_r(d,s),x=Tn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const Fye={kernelName:Xv,backendName:"cpu",kernelFunc:Lye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:o}=r;We(a,"mirrorPad");const s=i.map((x,w)=>x[0]+a.shape[w]+x[1]),l=i.map(x=>x[0]),u=i.map((x,w)=>x[0]+a.shape[w]),c=o==="reflect"?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=Ze(a.shape),g=be(s),y=s.length,v=Ze(s),b=Er(a.dtype,g);for(let x=0;x<g;x++){let w=Oc(x,y,v);for(let C=0;C<y;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,E)=>C-l[E]);const S=Fo(w,p,f);b[x]=d[S]}return{dataId:n.write(b,s,a.dtype),shape:s,dtype:a.dtype}}const zye={kernelName:Yv,backendName:"cpu",kernelFunc:Bye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Uye=vr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),jye=zr(Fm,Uye),Vye={kernelName:Fm,backendName:"cpu",kernelFunc:jye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w7(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=a.shape.length;let s=i;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=Xt([s],a.shape),u=x7({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=_r(u.shape,l),d=Tn({inputs:{x:u},backend:n,attrs:{shape:c}}),p=rN({inputs:{a,b:d},backend:n}),f=I9({inputs:{x:p},backend:n}),g=Lg({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=Tn({inputs:{x:g},backend:n,attrs:{shape:c}}),v=iN({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const Wye={kernelName:Sx,backendName:"cpu",kernelFunc:w7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gye(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r;We(a,"multinomial");const l=s?a:w7({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,p=[u,i],f=Xr(be(p),"int32");for(let g=0;g<u;++g){const y=g*c,v=new Float32Array(c-1);v[0]=d[y];for(let w=1;w<v.length;++w)v[w]=v[w-1]+d[y+w];const b=o2.alea(o.toString()),x=g*i;for(let w=0;w<i;++w){const S=b();f[x+w]=v.length;for(let C=0;C<v.length;C++)if(S<v[C]){f[x+w]=C;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",f)}const Hye={kernelName:Qv,backendName:"cpu",kernelFunc:Gye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qye=m2;function Kye(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;We(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=qye(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Xye={kernelName:Jv,backendName:"cpu",kernelFunc:Kye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Yye=g2;function Qye(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;We(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:f}=Yye(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Zye={kernelName:ex,backendName:"cpu",kernelFunc:Qye};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jye=y2;function ebe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;We(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=Jye(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const tbe={kernelName:tx,backendName:"cpu",kernelFunc:ebe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nbe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r;We(a,"oneHot");const u=be(a.shape),c=new Float32Array(u*o);c.fill(l);const d=n.data.get(a.dataId).values;for(let p=0;p<u;++p)d[p]>=0&&d[p]<o&&(c[p*o+d[p]]=s);return n.makeTensorInfo([...a.shape,o],i,c)}const rbe={kernelName:rx,backendName:"cpu",kernelFunc:nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Xc({inputs:{input:r},backend:n}),i=M2({inputs:{x:a},backend:n}),o=qp({inputs:{input:r},backend:n}),s=M2({inputs:{x:o},backend:n}),l=gi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return lN({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const abe={kernelName:Fx,backendName:"cpu",kernelFunc:M2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k7(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Xc({inputs:{input:r},backend:n}),i=k7({inputs:{x:a},backend:n}),o=qp({inputs:{input:r},backend:n}),s=M2({inputs:{x:o},backend:n}),l=gi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return lN({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const ibe={kernelName:nx,backendName:"cpu",kernelFunc:k7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S7(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return O2({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Kr(i,c.shape,"All tensors passed to stack must have matching shapes"),j(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=O2({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=Kp({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const obe={kernelName:ax,backendName:"cpu",kernelFunc:S7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;We(a,"pad");const s=i.map((b,x)=>b[0]+a.shape[x]+b[1]),l=i.map(b=>b[0]),u=n.data.get(a.dataId).values,c=be(a.shape),d=a.shape.length,p=Ze(a.shape),f=be(s),g=s.length,y=Ze(s),v=Er(a.dtype,f);o!==0&&v.fill(o);for(let b=0;b<c;b++){const x=Oc(b,d,p).map((S,C)=>S+l[C]),w=Fo(x,g,y);v[w]=u[b]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}const C7={kernelName:ix,backendName:"cpu",kernelFunc:sbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lbe=vr((t,e)=>Math.pow(t,e)),ube=zr(Um,lbe),cbe={kernelName:Um,backendName:"cpu",kernelFunc:ube};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dbe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,s=a.map(v=>n.data.get(v.dataId).values),l=a.map(v=>v.shape),u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,[d,p,f]=V9(s,l,u,i.shape,i.dtype,c,o.shape),g=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(f,i.dtype,p);return g.concat([y])}const pbe={kernelName:lx,backendName:"cpu",kernelFunc:dbe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hbe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=s.map(v=>n.data.get(v.dataId).values),f=s.map(v=>v.shape),[g,y]=H9(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const fbe={kernelName:ux,backendName:"cpu",kernelFunc:hbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mbe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:o}=n,s=q9(r,a,o,i);return e.makeTensorInfo([s.length],i,s)}const gbe={kernelName:cx,backendName:"cpu",kernelFunc:mbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ybe=pn(jm,t=>1/t),bbe={kernelName:jm,backendName:"cpu",kernelFunc:ybe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vbe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;We(a,"resizeBilinear");const l=Ze(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(be([d,u,c,g])),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c];let w=0;const S=b[0]/x[0],C=b[1]/x[1];for(let E=0;E<d;E++)for(let _=0;_<u;_++){let N;o?N=S*(_+.5)-.5:N=S*_;const M=Math.max(0,Math.floor(N)),P=N-M,L=Math.min(p-1,Math.ceil(N)),U=E*l[0]+M*l[1],B=E*l[0]+L*l[1];for(let K=0;K<c;K++){let X;o?X=C*(K+.5)-.5:X=C*K;const Z=Math.max(0,Math.floor(X)),H=X-Z,F=Math.min(f-1,Math.ceil(X)),Y=U+Z*l[2],Q=B+Z*l[2],ne=U+F*l[2],se=B+F*l[2];for(let pe=0;pe<g;pe++){const de=y[Y+pe],ie=y[Q+pe],xe=y[ne+pe],q=y[se+pe],oe=de+(xe-de)*H,he=ie+(q-ie)*H,Ie=oe+(he-oe)*P;v[w++]=Ie}}}return n.makeTensorInfo([d,u,c,g],"float32",v)}const xbe={kernelName:fx,backendName:"cpu",kernelFunc:vbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wbe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;We([i,a],"resizeBilinearGrad");const s=Ze(a.shape),[l,u,c,d]=a.shape,[,p,f]=i.shape,g=new Float32Array(l*u*c*d),y=[o&&p>1?u-1:u,o&&f>1?c-1:c],v=[o&&p>1?p-1:p,o&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=n.data.get(i.dataId).values;let S=0;for(let C=0;C<l;C++){const E=C*s[0];for(let _=0;_<p;_++){const N=_*b,M=Math.floor(N),P=Math.min(Math.ceil(N),u-1),L=E+M*s[1],U=E+P*s[1],B=N-M,K=1-B;for(let X=0;X<f;X++){const Z=X*x,H=Math.floor(Z),F=Math.min(Math.ceil(Z),c-1),Y=Z-H,Q=1-Y,ne=L+H*s[2],se=L+F*s[2],pe=U+H*s[2],de=U+F*s[2],ie=K*Q,xe=K*Y,q=B*Q,oe=B*Y;for(let he=0;he<d;he++){const Ie=w[S++];g[ne+he]+=Ie*ie,g[se+he]+=Ie*xe,g[pe+he]+=Ie*q,g[de+he]+=Ie*oe}}}}return n.makeTensorInfo([l,c,u,d],"float32",g)}const kbe={kernelName:$3,backendName:"cpu",kernelFunc:wbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sbe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;We(a,"resizeNearestNeighbor");const l=Ze(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(d*u*c*g),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c],w=b[0]/x[0],S=b[1]/x[1];let C=0;for(let E=0;E<d;E++){const _=E*l[0];for(let N=0;N<u;N++){const M=o?w*(N+.5):w*N;let P=Math.min(p-1,i?Math.round(M):Math.floor(M));o&&(P=Math.max(0,P));const L=_+P*l[1];for(let U=0;U<c;U++){const B=o?S*(U+.5):S*U;let K=Math.min(f-1,i?Math.round(B):Math.floor(B));o&&(K=Math.max(0,K));const X=L+K*l[2];for(let Z=0;Z<g;Z++){const H=y[X+Z];v[C++]=H}}}}return n.makeTensorInfo([d,u,c,g],a.dtype,v)}const Cbe={kernelName:hx,backendName:"cpu",kernelFunc:Sbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ibe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;We([i,a],"resizeNearestNeighborGrad");const s=Ze(a.shape),l=Ze(i.shape),[u,c,d,p]=a.shape,[,f,g]=i.shape,y=new Float32Array(u*c*d*p),v=n.data.get(i.dataId).values,b=[o&&f>1?c-1:c,o&&g>1?d-1:d],x=[o&&f>1?f-1:f,o&&g>1?g-1:g],w=b[0]/x[0],S=b[1]/x[1],C=1/w,E=1/S,_=Math.ceil(C)*2+2,N=Math.ceil(E)*2+2;for(let M=0;M<u;M++){const P=M*s[0];for(let L=0;L<c;L++){const U=P+L*s[1],B=Math.floor(L*C),K=Math.floor(B-_/2);for(let X=0;X<d;X++){const Z=U+X*s[2],H=Math.floor(X*E),F=Math.floor(H-N/2);for(let Y=0;Y<p;Y++){let Q=0;for(let ne=0;ne<_;ne++){const se=ne+K;if(se<0||se>=f)continue;const pe=P+se*l[1],de=se*w,ie=Math.min(c-1,o?Math.round(de):Math.floor(de));if(L===ie)for(let xe=0;xe<N;xe++){const q=xe+F;if(q<0||q>=g)continue;const oe=pe+q*l[2],he=q*S,Ie=Math.min(d-1,o?Math.round(he):Math.floor(he));X===Ie&&(Q+=v[oe+Y])}}y[Z+Y]=Q}}}}return n.makeTensorInfo(a.shape,a.dtype,y)}const Ebe={kernelName:R3,backendName:"cpu",kernelFunc:Ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;We(a,"reverse");const o=a.shape.length,s=Xt(i,a.shape);if(o===0)return xs({inputs:{x:a},backend:n});const l=new Nr(a.shape,a.dtype),u=n.bufferSync(a);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),p=d.slice();s.forEach(f=>p[f]=a.shape[f]-1-p[f]),l.set(u.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const Nbe={kernelName:mx,backendName:"cpu",kernelFunc:Tbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _be={kernelName:zx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=Er(r.dtype,be(r.shape)),[u,c,d,p]=r.shape,[f,g]=gT(o,c,d),y=255,v=Math.sin(a),b=Math.cos(a),x=s.data.get(r.dataId).values;for(let w=0;w<u;w++){const S=w*d*c*p;for(let C=0;C<c;C++){const E=C*(d*p);for(let _=0;_<d;_++){const N=_*p;for(let M=0;M<p;M++){const P=[u,C,_,M],L=P[2],U=P[1];let B=(L-f)*b-(U-g)*v,K=(L-f)*v+(U-g)*b;B=Math.round(B+f),K=Math.round(K+g);let X=i;if(typeof i!="number"&&(M===3?X=y:X=i[M]),B>=0&&B<d&&K>=0&&K<c){const H=K*(d*p),F=B*p,Y=S+H+F+M;X=x[Y]}const Z=S+E+N+M;l[Z]=X}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rbe=pn(Gm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),$be={kernelName:Gm,backendName:"cpu",kernelFunc:Rbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Obe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Op(i,a,o),p=!0,f=n.bufferSync(a),g=n.bufferSync(i),y=Hp(f,g,o,d,u,l,s,c,0,p);return n.makeTensorInfo(o,y.dtype,y.values)}const Mbe={kernelName:gx,backendName:"cpu",kernelFunc:Obe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pbe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function Abe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function Dbe(t,e,n,r,a,i){const o=Tr("int32",n*a);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),u=s*a;for(let c=0;c<a;++c)o[u+c]=i==="left"?Pbe(l,e[c+u]):Abe(l,e[c+u])}return o}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lbe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=Dbe(s,l,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const Fbe={kernelName:yx,backendName:"cpu",kernelFunc:Lbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bbe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;We([r,a,i],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Xa(a.dtype,i.dtype),d=Xr(be(a.shape),c);let p=0;const f=o===0||o>1||a.shape.length===1?1:be(a.shape.slice(1));for(let g=0;g<s.length;g++)for(let y=0;y<f;y++)s[g]===1?d[p++]=l[g]:d[p++]=u[g];return n.makeTensorInfo(a.shape,c,d)}const zbe={kernelName:bx,backendName:"cpu",kernelFunc:Bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ube=vT,jbe=xT,Vbe=pn(qm,t=>t>=0?jbe*t:Ube*(Math.exp(t)-1)),Wbe={kernelName:qm,backendName:"cpu",kernelFunc:Vbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gbe=pn(Ym,t=>t<0?-1:t>0?1:0),Hbe={kernelName:Ym,backendName:"cpu",kernelFunc:Gbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qbe=pn(Km,t=>Math.sin(t)),Kbe={kernelName:Km,backendName:"cpu",kernelFunc:qbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xbe=pn(Xm,t=>Math.sinh(t)),Ybe={kernelName:Xm,backendName:"cpu",kernelFunc:Xbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qbe=11920928955078125e-23,I7=Math.log(Qbe)+2,Zbe=pn(Zm,t=>{const e=t>-I7,n=t<I7,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),Jbe={kernelName:Zm,backendName:"cpu",kernelFunc:Zbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;We([a],"spaceToBatchND");const s=be(i),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<a.shape.length;++v)l.push([0,0]);const u=C7.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Og(u.shape,i,s,!1),d=Mg(c.length,i.length,!1),p=Pg(u.shape,i,s,!1),f=Tn({inputs:{x:u},backend:n,attrs:{shape:c}}),g=Ya({inputs:{x:f},backend:n,attrs:{perm:d}}),y=Tn({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}const tve={kernelName:wx,backendName:"cpu",kernelFunc:eve};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nve(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[d,p,f,g,y]=Q9(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const rve={kernelName:Cx,backendName:"cpu",kernelFunc:nve};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ave(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=Z9(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const ive={kernelName:Ix,backendName:"cpu",kernelFunc:ave};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ove(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=nN(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const sve={kernelName:Ex,backendName:"cpu",kernelFunc:ove};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lve(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=nN(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const uve={kernelName:Tx,backendName:"cpu",kernelFunc:lve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cve(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Op(i,a,s),f=!1,g=n.bufferSync(a);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),b=!!n.data.get(o.dataId).values[0];y=Hp(g,v,s,p,c,u,l,d,b,f);break}case"float32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=Hp(g,v,s,p,c,u,l,d,b,f);break}case"int32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=Hp(g,v,s,p,c,u,l,d,b,f);break}case"string":{const v=n.bufferSync(i),b=ol(n.data.get(o.dataId).values[0]);y=Hp(g,v,s,p,c,u,l,d,b,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(s,y.dtype,y.values)}const dve={kernelName:Nx,backendName:"cpu",kernelFunc:cve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Xt(o,a.shape)[0],l=PT(a,i,s),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(d=>{const p=[...c];p[s]=d;const f=Yc({inputs:{x:a},backend:n,attrs:{begin:u,size:p}});return u[s]+=d,f})}const hve={kernelName:kx,backendName:"cpu",kernelFunc:pve};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fve={kernelName:O3,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;We(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const s=a[o];i[o]=s*s}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mve=pn(ig,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),gve={kernelName:ig,backendName:"cpu",kernelFunc:mve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r;We(a,"stridedSlice");const{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=w4(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Tn({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){j(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=y4(x,w,S),_=Yc({inputs:{x:a},backend:n,attrs:{begin:x,size:E}});C=Tn({inputs:{x:_},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(_)}else{const E=n.bufferSync(a),_=e7(f,E,S,x);C=n.makeTensorInfo(g,_.dtype,_.values)}return C}const bve={kernelName:_x,backendName:"cpu",kernelFunc:yve};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vve(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[g,y]=t7(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const xve={kernelName:Rx,backendName:"cpu",kernelFunc:vve};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wve(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=n7(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const kve={kernelName:$x,backendName:"cpu",kernelFunc:wve};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sve(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,s=r7(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const Cve={kernelName:Ox,backendName:"cpu",kernelFunc:Sve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ive=pn(ng,t=>Math.tan(t)),Eve={kernelName:ng,backendName:"cpu",kernelFunc:Ive};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tve=pn(rg,t=>Math.tanh(t)),Nve={kernelName:rg,backendName:"cpu",kernelFunc:Tve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;We(a,"tile");const o=i7(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const Rve={kernelName:ag,backendName:"cpu",kernelFunc:_ve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r;We(a,"topk");const s=n.data.get(a.dataId).values,[l,u]=s7(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Ove={kernelName:Mx,backendName:"cpu",kernelFunc:$ve};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mve(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=Ze(a.shape),x=b[0],w=b[1],S=b[2],C=Ze(v),E=C[0],_=C[1],N=C[2],M=Er(a.dtype,be(v));M.fill(l);const P=r.data.get(a.dataId).values,L=r.data.get(i.dataId).values;for(let U=0;U<c;++U){const B=i.shape[0]===1?L:L.subarray(U*8,U*8+8);for(let K=0;K<g;++K)for(let X=0;X<y;++X)for(let Z=0;Z<f;++Z){let H;const F=B[6]*X+B[7]*K+1;if(F===0)continue;const Y=(B[0]*X+B[1]*K+B[2])/F,Q=(B[3]*X+B[4]*K+B[5])/F,ne=E7(Y,p,s),se=E7(Q,d,s);switch(o){case"nearest":H=Bve(P,d,p,x,w,S,U,se,ne,Z,l);break;case"bilinear":H=zve(P,d,p,x,w,S,U,se,ne,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const pe=U*E+K*_+X*N+Z;M[pe]=H}return r.makeTensorInfo(v,a.dtype,M)}return{dataId:r.write(M,v,a.dtype),shape:a.shape,dtype:a.dtype}}const Pve={kernelName:Px,backendName:"cpu",kernelFunc:Mve};function E7(t,e,n){switch(n){case"reflect":return Ave(t,e);case"wrap":return Dve(t,e);case"nearest":return Fve(t,e);case"constant":default:return Lve(t)}}function Ave(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return du(0,n,e-1)}function Dve(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return du(0,n,e-1)}function Lve(t,e){return t}function Fve(t,e){return du(0,t,e-1)}function Fg(t,e,n,r,a,i,o,s,l,u,c){const d=o*r+s*a+l*i+u;return 0<=s&&s<e&&0<=l&&l<n?t[d]:c}function Bve(t,e,n,r,a,i,o,s,l,u,c){const d=Math.round(s),p=Math.round(l);return Fg(t,e,n,r,a,i,o,d,p,u,c)}function zve(t,e,n,r,a,i,o,s,l,u,c){const d=Math.floor(s),p=Math.floor(l),f=d+1,g=p+1,y=(g-l)*Fg(t,e,n,r,a,i,o,d,p,u,c)+(l-p)*Fg(t,e,n,r,a,i,o,d,g,u,c),v=(g-l)*Fg(t,e,n,r,a,i,o,f,p,u,c)+(l-p)*Fg(t,e,n,r,a,i,o,f,g,u,c);return(f-s)*y+(s-d)*v}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uve(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;We(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:u}=l7(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const jve={kernelName:Ax,backendName:"cpu",kernelFunc:Uve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vve(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a.shape.length,s=a.shape[i],l=new Array(o-1);let u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=a.shape[f]);const c=new Array(o).fill(0),d=a.shape.slice();d[i]=1;const p=new Array(s);for(let f=0;f<p.length;f++){c[i]=f;const g=Yc({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});p[f]=Tn({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return p}const Wve={kernelName:Dx,backendName:"cpu",kernelFunc:Vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r;We(a,"unsortedSegmentSum");const s=a.shape.length,l=i.shape.length,u=[],c=[],d=s-l;let p=i;for(let g=0;g<d;++g){const y=O2({inputs:{input:p},backend:n,attrs:{dim:g+1}});p=y,c.push(y)}for(let g=0;g<o;++g){const y=il(g,"int32"),v=n.makeTensorInfo([],"int32",y),b=S9({inputs:{a:v,b:p},backend:n}),x=Eu({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=R2({inputs:{a:x,b:a},backend:n}),S=Lg({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});u.push(S),c.push(v),c.push(b),c.push(x),c.push(w),c.push(S)}const f=S7({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const Hve={kernelName:Lx,backendName:"cpu",kernelFunc:Gve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qve=[Wge,Rme,Hge,Kge,Dme,Yge,Zge,e0e,n0e,a0e,o0e,l0e,c0e,h0e,m0e,b0e,x0e,k0e,C0e,jge,E0e,N0e,R0e,O0e,Pme,Fme,P0e,$me,D0e,F0e,B0e,U0e,V0e,G0e,q0e,X0e,Q0e,J0e,t1e,r1e,i1e,s1e,u1e,c1e,p1e,f1e,g1e,y1e,b1e,v1e,k1e,Age,C1e,Bme,O1e,zme,M1e,jme,B1e,z1e,j1e,Wme,G1e,q1e,X1e,Q1e,J1e,Hme,Kme,Ome,tye,L0e,rye,iye,sye,Dge,Yme,Zme,uye,ege,dye,fye,gye,vye,wye,Sye,Cye,nge,Eye,Nye,Rye,Oye,Pye,Dye,Fye,age,zye,Vye,Hye,oge,lge,Xye,Zye,tbe,cge,rbe,ibe,obe,C7,cbe,Fge,hge,pbe,fbe,gbe,Mme,oN,bbe,Bge,zge,Uge,xbe,kbe,Cbe,Ebe,Nbe,_be,$be,wge,Mbe,Fbe,zbe,Wbe,Sge,Hbe,Kbe,Ybe,Cge,Wye,Jbe,tve,rve,ive,sve,uve,dve,hve,Tge,fve,_ge,gve,bve,xve,kve,Cve,Mge,x1e,Eve,Nve,Rve,Ove,Pve,dge,jve,Wve,Hve,abe];for(const t of qve)Vx(t);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qc={},P2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Kve(t,e){Qc[t]=e}function Vo(t,e){if(!(t in Qc)||e!=null){const r=Yve(t,e);if(r!==null)Qc[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Qc[t];return n==null||n.isContextLost()?(delete Qc[t],Vo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Qc[t])}function Xve(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Yve(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Xve(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Qc[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(P2.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",P2)||n.getContext("experimental-webgl",P2):n.getContext("webgl2",P2)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Bg;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Bg||(Bg={}));var Mi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Mi||(Mi={}));var Zr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Zr||(Zr={}));function zg(t,e){return[e,t]}function Qve(t,e){return t*e}function A2(t){const e=be(t),n=Math.ceil(e/4);return Qb(n)}function Xp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Zve(t,e){const[n,r]=Xp(t,e);return n*r*4}function uN(t,e){const n=t;let r,a,i,o,s,l,u,c,d,p;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,c=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,o=n.RGBA,s=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function He(t,e){const n=e();return fe().getBool("DEBUG")&&Jve(t),n}function Jve(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+rxe(t,e))}const exe=596e-10,txe=65504;function nxe(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||exe<Math.abs(t)&&Math.abs(t)<txe)}function rxe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function D2(t,e){return yl(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function axe(t,e){const n=yl(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function ixe(t,e){const n=yl(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw T7(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const oxe=/ERROR: [0-9]+:([0-9]+):/g;function T7(t,e){const n=oxe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,o=a.map((d,p)=>$c((p+1).toString(),i)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${$c(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function sxe(t){return yl(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function lxe(t,e){if(He(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function cN(t,e){if(He(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function uxe(t,e){const n=yl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function cxe(t,e){const n=yl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function dxe(t){return yl(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function pxe(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function hxe(t){return yl(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function N7(t,e,n,r,a,i,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),He(t,()=>t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)),He(t,()=>t.enableVertexAttribArray(s)),!0)}function fxe(t,e,n){vxe(t,n),He(t,()=>t.activeTexture(t.TEXTURE0+n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function mxe(t,e,n){return yl(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function gxe(t,e,n){return t.getUniformLocation(e,n)}function yxe(t,e,n,r){He(t,()=>fxe(t,e,r)),He(t,()=>t.uniform1i(n,r))}function dN(t,e,n){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function _7(t,e){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function L2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+bxe(t,e))}function bxe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function yl(t,e,n){const r=He(t,()=>e());if(r==null)throw new Error(n);return r}function vxe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function Yp(t,e=2){return be(t.slice(0,t.length-e))}function Qp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function pN(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Yp(t),...Qp(t)]),e}function xxe(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?Yb(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=al(t).newShape);let a=be(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const s=Yp(t);let l=2,u=2;t.length&&([l,u]=Qp(t)),a=s*(l/2)*(u/2),i=Qb(a).map(c=>c*2)}else i=Qb(a);return i}function F2(t){return t%2===0}function B2(t,e){if(t=t.slice(-2),e=e.slice(-2),vn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||F2(n)&&F2(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&F2(t[0])&&F2(e[0])}let hN,fN;function wxe(t){if(hN==null){const e=Vo(t);hN=e.getParameter(e.MAX_TEXTURE_SIZE)}return hN}function kxe(t){if(fN==null){const e=Vo(t);fN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,fN)}function Sxe(t){if(t===0)return 0;let e;const n=Vo(t);return po(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:po(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function po(t,e){return t.getExtension(e)!=null}function R7(t){try{if(Vo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Cxe(t){if(t===0)return!1;const e=Vo(t);if(t===1){if(!po(e,"OES_texture_float"))return!1}else if(!po(e,"EXT_color_buffer_float"))return!1;return mN(e)}function Ixe(t){if(t===0)return!1;const e=Vo(t);if(t===1){if(!po(e,"OES_texture_float")||!po(e,"WEBGL_color_buffer_float"))return!1}else{if(po(e,"EXT_color_buffer_float"))return mN(e);const n="EXT_color_buffer_half_float";if(po(e,n)){const r=e.getExtension(n);return Exe(e,r)}return!1}return mN(e)}function mN(t){const e=uN(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function Exe(t,e){const n=uN(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function Txe(t){return t!==2?!1:Vo(t).fenceSync!=null}function Ug(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ye=fe();Ye.registerFlag("HAS_WEBGL",()=>Ye.getNumber("WEBGL_VERSION")>0),Ye.registerFlag("WEBGL_VERSION",()=>R7(2)?2:R7(1)?1:0),Ye.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ye.get("WEBGL_VERSION")===2),Ye.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Ye.registerFlag("WEBGL_PACK",()=>Ye.getBool("HAS_WEBGL")),Ye.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_CLIP",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_REDUCE",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_CONV_IM2COL",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>wxe(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>kxe(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ye.getNumber("WEBGL_VERSION");return t===0?0:Sxe(t)}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!q3()),Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Cxe(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ye.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Ixe(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Txe(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Ye.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),Ye.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>q3()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),Ye.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Ye.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Ye.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_EXP_CONV",()=>!1),Ye.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ye.getBool("IS_TEST")),Ye.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Ye.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Ye.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pa(){let t,e,n,r,a,i,o,s,l,u;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zc(t,e,n="index"){const r=Ze(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${a}`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${o}; ${s};`}).join("")}function z2(t,e,n="index"){const r=Ze(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${s};`}).join("")}function Nxe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function _xe(t,e,n="index"){const r=t.map((i,o)=>o),a=Nxe(r,e);return a.map((i,o)=>{const s=`int ${t[o]} = ${n} / ${a[o]}`,l=o===a.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${a[o]}`:`index -= ${t[o]} * ${a[o]}`;return`${s}; ${l};`}).join("")}function gN(t){const e=Ze(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function yN(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const $7=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{getBroadcastDims:O7}=r9;function Rxe(t,e,n){const r=[];if(t.forEach(p=>{const f=be(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:g}=bN(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(p=>$xe(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Pa(),l=Pxe(s);let u,c,d=Lxe(s);return e.isPacked?(u=Oxe(e.logicalShape,o,n.enableShapeUniforms),c=Dxe(s)):(u=Mxe(e.logicalShape,o,n.enableShapeUniforms),c=Axe(s)),n.packedInputs&&(d+=Uxe),[d,l,c,a,u,i,n.userCode].join(`
`)}function Zp(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Jxe(t,e);case 1:return t2e(t,e);case 2:return r2e(t,e);case 3:return i2e(t,e);case 4:return s2e(t,e);case 5:return l2e(t);case 6:return u2e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function M7(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Zxe(t);case 1:return e2e(t,e);case 2:return n2e(t,e);case 3:return a2e(t,e);default:return o2e(t,e)}}function $xe(t,e,n=!1,r){let a="";n?a+=M7(t,r):a+=Zp(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?a+=c2e(t,e):a+=d2e(t,e)),a}function Oxe(t,e,n){switch(t.length){case 0:return P7();case 1:return jxe(t,e,n);case 2:return Yxe(t,e,n);case 3:return Wxe(t,e,n);default:return Hxe(t,e,n)}}function Mxe(t,e,n){switch(t.length){case 0:return P7();case 1:return Vxe(t,e,n);case 2:return Qxe(t,e,n);case 3:return Gxe(t,e,n);case 4:return qxe(t,e,n);case 5:return Kxe(t,e);case 6:return Xxe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Pxe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Axe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Dxe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Lxe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Fxe}
    ${Bxe}
    ${zxe}
  `}const Fxe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Bxe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,zxe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Uxe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function P7(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function jxe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Vxe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Wxe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function Gxe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${z2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Zc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Hxe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let o=i,s="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],s=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+s,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${l});
    }
  `}function qxe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${z2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Zc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Kxe(t,e){const n=Zc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Xxe(t,e){const n=Zc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Yxe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(vn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function Qxe(t,e,n){return vn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Jc(t){return`offset${t}`}function Zxe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Pa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Jxe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Jc(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function e2e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=Pa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function t2e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Jp(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],o=a[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=Jc(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function n2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],s=i[1],l=Pa();if(i!=null&&vn(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function r2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&vn(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=i[0],f=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=al(n),l=o;if(l.length<n.length){const p=eh(t,l),f=["row","col"];return`
      ${Zp(p,e)}
      float ${a}(int row, int col) {
        return ${a}(${th(f,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Jp(t)}
      }
    `;const u=i[0],c=i[1],d=Jc(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function a2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),f=[1,2],g=eh(t,p),y=["b","row","col"];return`
        ${M7(g,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${th(y,f)});
        }
      `}const s=Pa();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function i2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=al(n),u=s;if(u.length<n.length){const y=eh(t,u),v=["row","col","depth"];return`
        ${Zp(y,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${th(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${Jp(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],p=c[1],f=t.shapeInfo.flatOffset;if(p===i&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===o&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=Jc(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function o2e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Pa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2);let p=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",g=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<o-1;y++)f=`int b${y}, `+f,p*=i[o-y-1],g=`b${y} * ${p} + `+g;return`
    vec4 ${r}(${f}) {
      int index = ${g};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${a.texture2D}(${n}, uv);
    }
  `}function s2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,{newShape:l,keptDims:u}=al(n);if(l.length<n.length){const x=eh(t,l),w=["row","col","depth","depth2"];return`
      ${Zp(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${th(w,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${i}, 1)));
        ${Jp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1],g=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(f===s&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${g}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=Jc(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${f}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function l2e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,o=e[2]*i,s=e[1]*o,{newShape:l,keptDims:u}=al(e);if(l.length<e.length){const y=eh(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${Zp(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${th(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${i}, ${a})) +
          depth3;
        ${Jp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=Jc(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${i} +
          depth2 * ${a} + depth3 + ${g};
      vec2 uv = uvFromFlat(${p}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function u2e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=al(e);if(a.length<e.length){const v=eh(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${Zp(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${th(b,i)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Jp(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],g=p[1];if(g===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=Jc(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${y};
      vec2 uv = uvFromFlat(${f}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Jp(t){const e=t.name,n=be(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function c2e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=O7(t.shapeInfo.logicalShape,e.logicalShape),l=Nn(o),u=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let p="";o<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let f="return outputValue;";const g=be(t.shapeInfo.logicalShape)===1,y=be(e.logicalShape)===1;if(i===1&&!g&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(s.length){const v=i-2,b=i-1;s.indexOf(v)>-1&&s.indexOf(b)>-1?f="return vec4(outputValue.x);":s.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(b)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${p});
      ${f}
    }
  `}function d2e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&vn(o,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Nn(l),c=O7(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let p;const f=["x","y","z","w","u","v"];s===0?p="":l<2&&c.length>=1?p="coords = 0;":p=c.map(y=>`coords.${f[y+d]} = 0;`).join(`
`);let g="";return l<2&&s>0?g="coords":g=t.shapeInfo.logicalShape.map((y,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${a}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${r}(${g});
    }
  `}function Nn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function bN(t,e,n){const{newShape:r,keptDims:a}=al(e),i=e.length,o=t&&i===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&i>1&&!vn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:a}}function eh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function th(t,e){return e.map(n=>t[n]).join(", ")}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p2e(t,e,n,r){const a=n.map((c,d)=>{const p={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(p.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),i=a.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Rxe(a,o,e),l=ixe(t.gl,s),u=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},A7(t,e,u))}function A7(t,e,n){const r={},a={},i={},o=[];let s,l,u,c=null,d=null;d=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const p=!1;for(let f=0;f<e.variableNames.length;f++){const g=e.variableNames[f];r[g]=t.getUniformLocation(n,g,p),r[`offset${g}`]=t.getUniformLocation(n,`offset${g}`,p),e.enableShapeUniforms&&(a[`${g}Shape`]=t.getUniformLocation(n,`${g}Shape`,p),i[`${g}TexShape`]=t.getUniformLocation(n,`${g}TexShape`,p))}return e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",p),u=t.getUniformLocation(n,"outShapeStrides",p),l=t.getUniformLocation(n,"outTexShape",p)),e.customUniforms&&e.customUniforms.forEach((f,g)=>{o[g]=t.getUniformLocation(n,f.name,p)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:d,inShapesLocations:a,inTexShapesLocations:i,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}}function D7(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],o=i.shape;if(!vn(a,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!vn(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function h2e(t,e,n,r,a){e.program.enableShapeUniforms||(D7(e.inShapeInfos,n),D7([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,u)=>{const c=e.program.variableNames[u],d=e.uniformLocations[c],p=e.uniformLocations[`offset${c}`],f=e.inShapesLocations[`${c}Shape`],g=e.inTexShapesLocations[`${c}TexShape`];if(f){const{uniformShape:y}=bN(e.program.packedInputs,l.shape,l.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(f,new Int32Array(y));break;case 2:t.gl.uniform2iv(f,new Int32Array(y));break;case 3:t.gl.uniform3iv(f,new Int32Array(y));break;case 4:t.gl.uniform4iv(f,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(be(l.shape)<2)t.gl.uniform1f(d,l.uniformValues[0]);else{let y=l.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(d,y)}return}l.texData.slice!=null&&p!=null&&t.gl.uniform1i(p,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ze(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a&&e.program.customUniforms.forEach((l,u)=>{const c=e.customUniformLocations[u],d=a[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function f2e(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=bN(t.packedInputs,o.shape,l);let p="",f="",g="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=Ze(c);g=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const y=o.shape.length,v=c.length===2&&vn(o.shape,l),b=be(o.shape)===1,x=Uc(o.shape,n.shape),w=!t.packedInputs&&y===n.shape.length&&vn(l,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${w}_${u?d:""}_${c.length}_${b}_${x}_${v}_${p}_${f}_${g}_${S}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${fe().getNumber("WEBGL_VERSION")}`,i}function Aa(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class m2e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Bg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?z2(["r","c","d"],e):Zc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class g2e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Bg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?z2(["r","c","d"],e):Zc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class y2e{constructor(e){this.variableNames=["A"],this.outTexUsage=Mi.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${$7}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class b2e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Mi.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${$7}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class v2e{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?yN():gN(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class x2e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?yN():gN(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w2e(t){const e=Pa(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return axe(t,n)}function k2e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return uxe(t,e)}function S2e(t){const e=new Uint16Array([0,1,2,2,1,3]);return cxe(t,e)}function jg(t,e,n,r,a,i){pxe(e,n);const o=dxe(t),s=t.TEXTURE_2D;return He(t,()=>t.bindTexture(s,o)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),He(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?He(t,()=>t.texImage2D(s,0,r,e,n,0,a,i,null)):He(t,()=>t.texStorage2D(s,1,r,e,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function L7(t){return t.internalFormatFloat}function C2e(t,e,n,r){const[a,i]=zg(e,n);return jg(t,a,i,L7(r),r.textureFormatFloat,t.FLOAT)}function F7(t){return t.internalFormatHalfFloat}function I2e(t,e,n,r){const[a,i]=zg(e,n);return jg(t,a,i,F7(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function B7(t){return t.downloadTextureFormat}function E2e(t,e,n,r){const[a,i]=zg(e,n);return jg(t,a,i,B7(r),t.RGBA,t.UNSIGNED_BYTE)}function z7(t){return t.internalFormatPackedFloat}function T2e(t,e,n,r){const[a,i]=Xp(e,n);return jg(t,a,i,z7(r),t.RGBA,t.FLOAT)}function U7(t){return t.internalFormatPackedHalfFloat}function N2e(t,e,n,r){const[a,i]=Xp(e,n);return jg(t,a,i,U7(r),t.RGBA,r.textureTypeHalfFloat)}function _2e(t,e,n){return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),N7(t,e,"clipSpacePos",n,3,20,0)&&N7(t,e,"uv",n,2,20,12)}function R2e(t,e,n,r,a,i){He(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=i.internalFormatPackedFloat),o.set(a),fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function $2e(t,e,n){He(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function O2e(t,e,n,r){const a=t.createBuffer();He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const i=4*4*e*n;return He(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)),He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function M2e(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function P2e(t,e,n,r){const[a,i]=zg(e,n),o=4,s=new Uint8Array(Qve(e*n,o));return He(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function A2e(t,e,n,r,a,i,o,s){const l=t,u=new Float32Array(Zve(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function D2e(t,e,n){const r=new Float32Array(e*n*4);return He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class vN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,Kve(n,e)):this.gl=Vo(n);let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=D2(this.gl,i),po(this.gl,o))this.textureHalfFloatExtension=D2(this.gl,o);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),po(this.gl,a))this.colorBufferHalfFloatExtension=D2(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",po(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(po(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=k2e(this.gl),this.indexBuffer=S2e(this.gl),this.framebuffer=hxe(this.gl),this.textureConfig=uN(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;He(e,()=>e.finish()),He(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),He(e,()=>e.deleteFramebuffer(this.framebuffer)),He(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),He(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),He(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),C2e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),I2e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),E2e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),$2e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),R2e(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),N2e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),T2e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(_7(this.gl,this.framebuffer),this.outputTexture=null),He(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>P2e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,o){return A2e(this.gl,e,n,r,a,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return M2e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=O2e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=a.clientWaitSync(i,0,0);return o===a.ALREADY_SIGNALED||o===a.CONDITION_SATISFIED},n=i}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>D2e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=w2e(n));const r=sxe(n);return He(n,()=>n.attachShader(r,this.vertexShader)),He(n,()=>n.attachShader(r,e)),lxe(n,r),this.debug&&cN(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=_2e(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&He(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&cN(this.gl,this.program),He(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?mxe(this.gl,e,n):gxe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),He(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),yxe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=Xp(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&cN(this.gl,this.program),L2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),He(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),He(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=D2(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await h3(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=L2e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),h3(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),dN(this.gl,e,this.framebuffer),this.debug&&L2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(dN(this.gl,this.outputTexture,this.framebuffer),this.debug&&L2(this.gl)):_7(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;dN(a,e,this.framebuffer),this.debug&&L2(a),this.outputTexture=e,He(a,()=>a.viewport(0,0,n,r)),He(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),He(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function L2e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{addImpl:F2e,bincountImpl:j7,bincountReduceImpl:B2e,castImpl:z2e,ceilImpl:U2e,concatImpl:j2e,equalImpl:V2e,expImpl:W2e,expm1Impl:G2e,floorImpl:H2e,gatherNdImpl:q2e,gatherV2Impl:K2e,greaterImpl:X2e,greaterEqualImpl:Y2e,lessImpl:Q2e,lessEqualImpl:Z2e,linSpaceImpl:J2e,logImpl:ewe,maxImpl:twe,maximumImpl:nwe,minimumImpl:rwe,multiplyImpl:awe,negImpl:iwe,notEqualImpl:owe,prodImpl:swe,raggedGatherImpl:lwe,raggedTensorToTensorImpl:uwe,rangeImpl:cwe,rsqrtImpl:dwe,scatterImpl:pwe,sigmoidImpl:hwe,simpleAbsImpl:V7,sliceImpl:fwe,sparseFillEmptyRowsImpl:mwe,sparseReshapeImpl:gwe,sparseSegmentReductionImpl:W7,sqrtImpl:ywe,stridedSliceImpl:bwe,stringNGramsImpl:vwe,stringSplitImpl:xwe,stringToHashBucketFastImpl:wwe,subImpl:kwe,tileImpl:Swe,topKImpl:Cwe,transposeImpl:xN,uniqueImpl:Iwe}=Pge;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G7(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Da(t,e){return e===1?[t]:G7(t,e)}function Ewe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Twe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Aa(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Da("rc",this.rank),r=Nn(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class H7{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${Nwe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?yN():gN(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Nwe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?_xe(["r","c","d"],"inputShape"):Zc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _we{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const a=K7(n,r),i=X7(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=q7(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let s;return a===Zr.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Zr.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Zr.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Zr.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Zr.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=K7(r,a),o=X7(n,i,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=q7(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),l=fe().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Rwe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F||e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function q7(t,e,n,r,a){const i=$we(e,r);let o;if(a){const[l,u]=Xp(t[0],t[1]);o=l*u}else{const[l,u]=zg(t[0],t[1]);o=l*u}const s=Rwe(n,i);return o*s}function $we(t,e){switch(t){case Zr.PACKED_2X2_FLOAT32:return z7(e);case Zr.PACKED_2X2_FLOAT16:return U7(e);case Zr.UNPACKED_FLOAT32:return L7(e);case Zr.UNPACKED_FLOAT16:return F7(e);case Zr.PACKED_4X1_UNSIGNED_BYTE:return B7(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Owe(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Zr.PACKED_2X2_FLOAT32:Zr.UNPACKED_FLOAT32:t?Zr.PACKED_2X2_FLOAT16:Zr.UNPACKED_FLOAT16}function K7(t,e){if(t===Mi.UPLOAD)return Zr.PACKED_2X2_FLOAT32;if(t===Mi.RENDER||t==null)return Owe(e);if(t===Mi.DOWNLOAD||t===Mi.PIXELS)return Zr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function X7(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class bl{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ho="if (isnan(x)) return x;",Mwe="return x;",Y7="return abs(x);",Pwe="return (x >= 0.0) ? x : (exp(x) - 1.0);",Awe=ho+`
  return (x < 0.0) ? 0.0 : x;
`,Dwe=ho+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,nh="return x;",Lwe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fwe="return x;",Bwe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,zwe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Uwe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jwe="return 1.0 / (1.0 + exp(-1.0 * x));";class ed{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Vwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);const n=e.length,r=Da("rc",n),a=Nn(n),i=Ewe(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Wwe=u2,Gwe=1e-7,Hwe=1e-4,wN={};function qwe(t){return t in wN||(wN[t]={}),wN[t]}const Kwe=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Xwe=600;function Ywe(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*Xwe/1024/1024}class Sw extends Xb{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof vN)n=e;else{const r=Vo(fe().getNumber("WEBGL_VERSION"),e);n=new vN(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Vo(fe().getNumber("WEBGL_VERSION"));n=new vN(r),this.binaryCache=qwe(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new _we(this.gpgpu),this.numMBBeforeWarning=Ywe(),this.texData=new p3(this,cl())}nextDataId(){return Sw.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Mi.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Mi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:o,shape:s,isPacked:l}=n;if(o!=null){let p;l?p=new ed(s,nh):p=new bl(s,nh);const f=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),g=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=di());let d;if(a==="complex64"){const p=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=ml(p,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=di()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(y=>g.push(y))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(i!=null){let g;l?g=new ed(a,nh):g=new bl(a,nh);const y=this.runWebGLProgram(g,[{dataId:e,shape:a,dtype:o}],o),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const g=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...A2(a))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const g=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),y=g[0],v=g[1];d=ml(y,v)}else if(u==null)d=this.getValuesFromTexture(e);else{const g=be(a);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const g=this.gpgpu.gl;He(g,()=>g.deleteBuffer(u))}const p=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(g=>g(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&cl().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:o,dtype:s,isPacked:l,texture:u}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new ed(i,nh):f=new bl(i,nh);const g=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:s}],s),y=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),y}if(u==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=cl().makeTensorFromTensorInfo(c),p=this.texData.get(c.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>ol(a));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!nxe(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=be(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),f=this.texData.get(p.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...A2(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),g}const o=fe().getBool("WEBGL_PACK")&&a===!0,s=o?pN(n):n,l=o?new b2e(s):new y2e(s),u=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=rl(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=rl(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);s.kernelMs=ZA(l),s.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:di(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=di(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Kwe){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&be(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Oi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Wwe(e.shape,n)}packedUnaryOp(e,n,r){const a=new ed(e.shape,n),i=this.compileAndRun(a,[e],r);return cl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=V7(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Y7,e.dtype);const n=new bl(e.shape,Y7),r=this.compileAndRun(n,[e]);return cl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&cs(r[0])){const i=r.map(o=>ds(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return cl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Vwe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new Twe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Yp(e.shape),...Qp(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Yp(n),...Qp(n)],o=new H7(i,r),s=!0,l=[r],u=this.runWebGLProgram(o,[a],e.dtype,l,s);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:o}=r;if(n!=null){const p=be(i),f=n[0]*n[1]*4;j(p<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=pN(i);let l;a?l=new g2e(s):l=new m2e(s);const u=!0,c=[n??A2(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,a,i=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Bg.DENSE){const b=o??A2(e.outputShape);l.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),be(s.shape)===0)return l.values=Er(s.dtype,0),s;const u=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&be(b.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!B2(x.shape,b.shape)){const w=b,S=b.shape;b.shape=x.shape,b=this.packedReshape(b,S),u.push(b),x=this.texData.get(b.dataId),w.shape=S}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},p=f2e(e,c,d),f=this.getAndSaveBinary(p,()=>p2e(this.gpgpu,e,c,d)),g=this.activeTimers!=null;let y;g&&(y=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||h2e(this.gpgpu,f,c,d,a),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=fe().get("WEBGL_FLUSH_THRESHOLD");if(v>0){const b=di();b-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ht(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(Ft(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Gwe:Hwe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=di());let d=n.texShape;if(d==null&&(d=xxe(r,l),n.texShape=d),i!=null){const p=pN(r);let f,g=d[1],y=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([g,y]=Xp(d[0],d[1])),l?f=new x2e(p,v):f=new v2e(p,v);const b=v?[y,g]:d,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);v?w.usage=Mi.PIXELS:w.usage=Mi.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),g,y,i);const S=[[y,g]],C=!0,E=this.runWebGLProgram(f,[x],a,S,C),_=this.texData.get(E.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=di()-c)}else{const p=this.acquireTexture(d,s,a,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return this.releaseGPUData(e),n!=null&&(r.values=Qwe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*Zb(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await RF(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(T7(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=A7(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=l,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}}Sw.nextDataId=0;function Qwe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/K3()&&c4("webgl",()=>new Sw,2);/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kN=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class rh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=zt(n,r),this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vg=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Wg{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=zt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Aa(i);let o="";if(a)if(i===0||be(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Nn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const s=Da("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Zwe={kernelName:Im,backendName:"webgl",kernelFunc:yi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nu(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=yi({inputs:{x:r},backend:n}),l=yi({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}const Jwe={kernelName:hv,backendName:"webgl",kernelFunc:Nu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Q7="return (a < 0.) ? b * a : a;",Z7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function eke(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",il(i,"float32")),s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wg(Z7,a.shape,o.shape):new rh(Q7,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const tke={kernelName:Uv,backendName:"webgl",kernelFunc:eke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const J7="return (a < 0.) ? b * a : a;",eB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function nke(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wg(eB,r.shape,a.shape):new rh(J7,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const rke={kernelName:ox,backendName:"webgl",kernelFunc:nke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ah="if (isnan(x)) return x;";function qt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:o}=a,s=i,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),p=n(d.values,l);return s.makeTensorInfo(o.shape,l,p)}const u=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new ed(o.shape,e):c=new bl(o.shape,t),s.runWebGLProgram(c,[o],l)}}function Jr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:o,backend:s})=>{const{a:l,b:u}=o,c=s;if(r&&l.dtype==="complex64"){const g=c.texData.get(l.dataId),y=c.texData.get(u.dataId),[v,b]=[[g.complexTensorInfos.real,y.complexTensorInfos.real],[g.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(w=>{const[S,C]=w,E={dataId:S.dataId,dtype:S.dtype,shape:l.shape},_={dataId:C.dataId,dtype:C.dtype,shape:u.shape},N=new rh(t,l.shape,u.shape);return c.runWebGLProgram(N,[E,_],Xa(S.dtype,C.dtype))}),x=Nu({inputs:{real:v,imag:b},backend:c});return c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(b),x}const d=i||Xa(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&a!=null){const g=c.texData.get(l.dataId).values,y=c.texData.get(u.dataId).values,v=l.dtype==="string"?Kc(g):g,b=l.dtype==="string"?Kc(y):y,[x,w]=a(l.shape,u.shape,v,b,d),S=c.makeTensorInfo(w,d),C=c.texData.get(S.dataId);return C.values=x,S}const p=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return p?f=new Wg(e,l.shape,u.shape,n):f=new rh(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function Gg(t,e=!1){if(t==="linear")return e?Fwe:Mwe;if(t==="relu")return e?zwe:Awe;if(t==="elu")return e?Bwe:Pwe;if(t==="relu6")return e?Uwe:Dwe;if(t==="prelu")return e?eB:J7;if(t==="leakyrelu")return e?Z7:Q7;if(t==="sigmoid")return e?jwe:Lwe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tB{constructor(e,n,r,a=!1,i=!1,o=!1,s=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Aa(this.outputShape.length);const c=a?e[1]:e[2],d=Math.ceil(c/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",g=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",b="";s&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:v=`vec4 activation(vec4 x) {
          ${s}
        }`,b="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(S=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${S};
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${y[0]});
          result += (${g[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class rB{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=zt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aB="return a * b;";function SN(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=Xa(r.dtype,a.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),u=new rB(nB.REAL,r.shape,a.shape),c=new rB(nB.IMAG,r.shape,a.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=Nu({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}if(n.shouldExecuteOnCPU([r,a])){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[u,c]=awe(r.shape,a.shape,s.values,l.values,i),d=n.makeTensorInfo(c,i),p=n.texData.get(d.dataId);return p.values=u,d}let o;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Wg(aB,r.shape,a.shape):o=new rh(aB,r.shape,a.shape),n.runWebGLProgram(o,[r,a],i)}const ake={kernelName:Bm,backendName:"webgl",kernelFunc:SN};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ike(t,e,n){const r=[Yp(t.shape),...Qp(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Yp(e),...Qp(e)],o=new H7(i,r),s=!0,l=[r],u=n.runWebGLProgram(o,[a],t.dtype,l,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=n,s=be(a.shape),l=f3(i,s),u=be(l);j(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(a.dataId);return c.isPacked&&!B2(a.shape,l)&&!(c.texture!==null&&B2(c.shape,l))?ike(a,l,o):(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}const oke={kernelName:px,backendName:"webgl",kernelFunc:Le};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class iB{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];const s=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Rc(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ske{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lke(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=C2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function td(t,e,n,r){const a=lke(t.shape);let i=t;for(let o=0;o<a.length;o++){const{inSize:s,windowSize:l,outSize:u}=a[o];let c,d;n==="mean"?c=o===0?new iB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},s):new iB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u}):c=new ske({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class uke{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const a=Nn(this.rank),i=cke(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function cke(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class dke{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=Nn(this.rank),i=G7("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const s=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U2(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dke(t.shape,e):new uke(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pke(t,e,n,r){const a=e,i=t.shape.length,o=Xt(a,t.shape);let s=o;const l=dr(s,i),u=l!=null;let c=t;u&&(c=U2(t,l,r),s=pr(s.length,i)),Qr("sum",s,i);const[d,p]=Yr(c.shape,s);let f=d;n&&(f=_r(d,o));const g=be(p),y=be(t.shape)/g,v=Le({inputs:{x:c},attrs:{shape:[y,g]},backend:r}),b=qx(t.dtype),x=td(v,b,"sum",r),w=Le({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),w}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j2(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;return pke(a,i,o,n)}const hke={kernelName:xx,backendName:"webgl",kernelFunc:j2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function La(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,o=n,s=a.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=a.shape[i[c]];let u;if(o.shouldExecuteOnCPU([a])){const c=o.texData.get(a.dataId).values,d=xN(c,a.shape,a.dtype,i,l);u=o.makeTensorInfo(l,a.dtype);const p=o.texData.get(u.dataId);p.values=d}else u=U2(a,i,o);return u}const fke={kernelName:Cp,backendName:"webgl",kernelFunc:La};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oB=1e3;function V2({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],p=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),b=be(y),x=be(v),w=zt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,g]);j(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[b,d,f]:[b,f,d],C=r?[x,g,p]:[x,p,g],E=Le({inputs:{x:t},backend:a,attrs:{shape:S}}),_=Le({inputs:{x:e},backend:a,attrs:{shape:C}}),N=[E,_],M=Math.max(b,x),P=n?E.shape[1]:E.shape[2],L=i!=null,U=o!=null,B=l==="leakyrelu",K=l!=null?Gg(l,!0):null,X=L||U||B||K!=null;let Z;if((f===1||g===1)&&P>oB&&X===!1){let F=E,Y=_;n&&(F=La({inputs:{x:E},backend:a,attrs:{perm:[0,2,1]}}),N.push(F)),r&&(Y=La({inputs:{x:_},backend:a,attrs:{perm:[0,2,1]}}),N.push(Y));const Q=g!==1,ne=g===1;let se=F;Q&&(se=Le({inputs:{x:F},backend:a,attrs:{shape:[M,P,1]}}),N.push(se));const pe=g===1?2:1;let de=Y;ne&&(de=Le({inputs:{x:Y},backend:a,attrs:{shape:[M,1,P]}}),N.push(de));const ie=SN({inputs:{a:se,b:de},backend:a});Z=j2({inputs:{x:ie},backend:a,attrs:{axis:pe,keepDims:!0}}),N.push(ie)}else{const F=Xa(t.dtype,e.dtype),Y=new tB(S,C,[M,f,g],n,r,L,K,U,B),Q=[E,_];if(i!=null&&Q.push(i),U&&Q.push(o),B){const ne=a.makeTensorInfo([],"float32",il(s,"float32"));Q.push(ne),N.push(ne)}Z=a.runWebGLProgram(Y,Q,F)}const H=Le({inputs:{x:Z},backend:a,attrs:{shape:w}});N.push(Z);for(const F of N)a.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mke(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return V2({a,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}const gke={kernelName:og,backendName:"webgl",kernelFunc:mke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sB="return abs(x);";function yke(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=V7(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new ed(r.shape,sB):a=new bl(r.shape,sB),n.runWebGLProgram(a,[r],r.dtype)}const bke={kernelName:tv,backendName:"webgl",kernelFunc:yke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vke=ho+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,xke=qt({opSnippet:vke}),wke={kernelName:rm,backendName:"webgl",kernelFunc:xke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kke=ho+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Ske=qt({opSnippet:kke}),Cke={kernelName:am,backendName:"webgl",kernelFunc:Ske};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lB="return a + b;",Ike=Jr({opSnippet:lB,packedOpSnippet:lB,supportsComplex:!0,cpuKernelImpl:F2e}),Eke={kernelName:Sp,backendName:"webgl",kernelFunc:Ike};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Tke{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Nke{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W2(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return yi({inputs:{x:r[0]},backend:n});if(r.length>fe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const s=Math.floor(r.length/2),l=W2({inputs:r.slice(0,s),backend:n}),u=W2({inputs:r.slice(s),backend:n});return W2({inputs:[l,u],backend:n})}const a=r.map(s=>s.dtype).reduce((s,l)=>Xa(s,l)),i=r.map(s=>s.shape),o=fe().getBool("WEBGL_PACK")?new Nke(r[0].shape,i):new Tke(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const _ke={kernelName:nv,backendName:"webgl",kernelFunc:W2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rke(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pr(u.length,s)),Qr("all",u,s);const[p,f]=Yr(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=td(y,y.dtype,"all",n);let b;if(o){const x=_r(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const $ke={kernelName:rv,backendName:"webgl",kernelFunc:Rke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oke(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pr(u.length,s)),Qr("any",u,s);const[p,f]=Yr(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=td(y,y.dtype,"any",n);let b;if(o){const x=_r(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const Mke={kernelName:av,backendName:"webgl",kernelFunc:Oke};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Pke{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Ake{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,j(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,u=Nn(l),c=Da("coords",l);let d,p;if(o===1){p=l+1;const N=Nn(p);d=`
        ${N} sourceLocR = ${N}(${c.join()}, 0);
        ++${c[l-1]};
        ${N} sourceLocG = ${N}(${c.join()}, 0);
        ++${c[l-2]};
        ${N} sourceLocA = ${N}(${c.join()}, 0);
        --${c[l-1]};
        ${N} sourceLocB = ${N}(${c.join()}, 0);
        --${c[l-2]};`}else p=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,p),g="."+f[p-1],y=f.map(N=>"int "+N),v=Da("sourceLocR",p-1).concat("inIdx.r"),b=Da("sourceLocG",p-1).concat("inIdx.g"),x=Da("sourceLocB",p-1).concat("inIdx.b"),w=Da("sourceLocA",p-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,E=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,_=a?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uB(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const o=C2(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new Pke(s,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=uB(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function cB(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],o=C2(i),s=new Ake(a,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(s,l,"int32");if(u.shape.length===e.shape.length){const c=cB(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function dB(t,e,n,r){const a=[n];if(Qr("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Yr(l.shape,a),d=be(c),p=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);const f=uB(t,p,r);i.push(f);const g=Le({inputs:{x:f},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}return cB(t,e,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dke(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=La({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),Qr("argMax",[o[0]],l.shape.length);const c=dB(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const Lke={kernelName:iv,backendName:"webgl",kernelFunc:Dke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fke(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=La({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),Qr("argMin",[o[0]],l.shape.length);const c=dB(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const Bke={kernelName:ov,backendName:"webgl",kernelFunc:Fke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zke=ho+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Uke=qt({opSnippet:zke}),jke={kernelName:im,backendName:"webgl",kernelFunc:Uke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vke=ho+"return log(x + sqrt(x * x + 1.0));",Wke=qt({opSnippet:Vke}),Gke={kernelName:om,backendName:"webgl",kernelFunc:Wke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hke=ho+`
  return atan(x);
`,qke=qt({opSnippet:Hke}),Kke={kernelName:sm,backendName:"webgl",kernelFunc:qke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xke=kN+`
  return atan(a, b);
`,Yke=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vg+`
  return result;
`,Qke=Jr({opSnippet:Xke,packedOpSnippet:Yke}),Zke={kernelName:um,backendName:"webgl",kernelFunc:Qke};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jke=ho+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,eSe=qt({opSnippet:Jke}),tSe={kernelName:lm,backendName:"webgl",kernelFunc:eSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Hg{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(y||(x="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${f}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?v:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const C=Math.floor(o/4)*4,E=o%4,_=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${f}, ${g});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${S});
      }
    `}}class CN{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,f=e.effectiveFilterDepth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),r){const P=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${P} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / count");const _=Math.floor(o/4)*4,N=o%4,M=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${b}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${M}
            }

            int xC = xCCorner + ${_};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${M}
            }
          }
          setOutput(${E});
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Ug(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;j(pa(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ao(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))return yi({inputs:{x:a},backend:n});const d=new Hg(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const rSe={kernelName:sv,backendName:"webgl",kernelFunc:nSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=dl(a.shape,i,o,c,s,l,u),p=new CN(d,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}const iSe={kernelName:lv,backendName:"webgl",kernelFunc:aSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class oSe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class sSe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,g=d-1-e.padInfo.front,y=p-1-e.padInfo.top,v=f-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=dl(o.shape,s,l,d,u,c),f=new sSe(p);return n.runWebGLProgram(f,[a],o.dtype)}const uSe={kernelName:k3,backendName:"webgl",kernelFunc:lSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;Ug([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=ao(o.shape,s,l,1,u),d=new oSe(c);return n.runWebGLProgram(d,[a],o.dtype)}const dSe={kernelName:w3,backendName:"webgl",kernelFunc:cSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pSe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;return V2({a,b:i,transposeA:o,transposeB:s,backend:n})}const hSe={kernelName:uv,backendName:"webgl",kernelFunc:pSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class fSe{constructor(e,n,r,a,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],zt(e,n),zt(e,r);let s="0.0";a!=null&&(zt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";i!=null&&(zt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class mSe{constructor(e,n,r,a,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],zt(e,n),zt(e,r);let s="vec4(0.0)";a!=null&&(zt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(zt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gSe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:o,scale:s}=t;j(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,a,i];let c=null;o!=null&&(c=o.shape,u.push(o));let d=null;s!=null&&(d=s.shape,u.push(s));const p=fe().getBool("WEBGL_PACK_NORMALIZATION")?new mSe(r.shape,a.shape,i.shape,c,d,l):new fSe(r.shape,a.shape,i.shape,c,d,l);return e.runWebGLProgram(p,u,u[0].dtype)},ySe={kernelName:Dv,backendName:"webgl",kernelFunc:gSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class bSe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Nn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=vSe(this.rank);let a;const i=e.map((o,s)=>`sourceLoc.${IN[s]} = start[${s}] + coords.${IN[s]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const IN=["x","y","z","w","u","v"];function vSe(t){if(t===1)return"sourceLoc";if(t<=6)return IN.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xSe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Nn(this.rank),r=Da("coords",this.rank),a=Da("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${o};
        --${a[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${a[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wSe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=v4(e,Ze(t.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function ih(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r,[s,l]=x4(a,i,o);if(g4(a,s,l),be(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const d=n.texData.get(a.dataId),p=fwe(d.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}const{isPacked:u}=n.texData.get(a.dataId),c=b4(a.shape,s,l);if(u||!c){const d=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xSe(l):new bSe(l),p=[s];return n.runWebGLProgram(d,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),wSe(a,s,l,n)}const kSe={kernelName:vx,backendName:"webgl",kernelFunc:ih};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const SSe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;j(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((x,w)=>x*w),l=Og(a.shape,i,s),u=Mg(l.length,i.length),c=Pg(a.shape,i,s),d=yT(o,i.length),p=bT(c,o,i.length),f=[],g=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),y=La({inputs:{x:g},backend:n,attrs:{perm:u}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:c}}),b=ih({inputs:{x:v},backend:n,attrs:{begin:d,size:p}});return f.push(g),f.push(y),f.push(v),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},CSe={kernelName:cv,backendName:"webgl",kernelFunc:SSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ISe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=j7(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const ESe={kernelName:dv,backendName:"webgl",kernelFunc:ISe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TSe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=zt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const NSe={kernelName:pv,backendName:"webgl",kernelFunc:TSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _Se="return float(a != b);",pB=Jr({opSnippet:_Se,cpuKernelImpl:owe,dtype:"bool"}),RSe={kernelName:zm,backendName:"webgl",kernelFunc:pB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qg(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return yi({inputs:{x:a.complexTensorInfos.real},backend:n})}const $Se={kernelName:dx,backendName:"webgl",kernelFunc:qg};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const OSe="return float(int(x));";function MSe(t,e){const n=new bl(t.shape,OSe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function EN(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return yi({inputs:{x:a},backend:n});const o=xu(a.shape),s=EN({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=Nu({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(a.dtype==="complex64"){const o=qg({inputs:{input:a},backend:n}),s=EN({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),s}if(!m3(a.dtype,i)){const o=yi({inputs:{x:a},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const o=n.texData.get(a.dataId).values,[s,l,u]=z2e(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}if(i==="int32")return MSe(a,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Er("bool",1)),s=pB({inputs:{a,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),s}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const PSe={kernelName:cm,backendName:"webgl",kernelFunc:EN};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hB="return ceil(x);",ASe=qt({opSnippet:hB,packedOpSnippet:hB,cpuKernelImpl:U2e}),DSe={kernelName:dm,backendName:"webgl",kernelFunc:ASe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LSe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class FSe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:o}=r;let s;fe().getBool("WEBGL_PACK_CLIP")?s=new FSe(a.shape):s=new LSe(a.shape);const l=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,l)}const zSe={kernelName:pm,backendName:"webgl",kernelFunc:BSe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class USe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function jSe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new USe(r.shape),o=[fB(r,a.complexTensorInfos.real),fB(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const VSe={kernelName:fv,backendName:"webgl",kernelFunc:jSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class WSe{constructor(e){this.outputShape=[],this.outputShape=bs(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class GSe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=bs(e,n);const r=this.outputShape,a=r.length,i=Nn(a),o=Da("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((y,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const u=s[n],c=s.slice(-2),d=s.join();let p=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<l.length;y++){const v=l[y-1];p+=`
        if (${u} < ${l[y]}  && ${u} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${G2(s,u,v)}),
            vec2(${G2(c,u,v)}));
        }`}const f=l.length,g=l[l.length-1];p+=`
        return getChannel(
          getT${f}(${G2(s,u,g)}),
          vec2(${G2(c,u,g)}));`,this.userCode=`
      float getValue(${s.map(y=>"int "+y)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[a-1]} = ${o[a-1]} + 1;
        if (${o[a-1]} < ${r[a-1]}) {
          result.g = getValue(${o});
        }

        ${o[a-2]} = ${o[a-2]} + 1;
        if (${o[a-2]} < ${r[a-2]}) {
          result.a = getValue(${o});
        }

        ${o[a-1]} = ${o[a-1]} - 1;
        if (${o[a-2]} < ${r[a-2]} &&
            ${o[a-1]} < ${r[a-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function G2(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H2(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return yi({inputs:{x:a.complexTensorInfos.imag},backend:n})}const HSe={kernelName:zv,backendName:"webgl",kernelFunc:H2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kg(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(v=>qg({inputs:{input:v},backend:n})),p=t.map(v=>H2({inputs:{input:v},backend:n})),f=Kg(d,e,n),g=Kg(p,e,n),y=Nu({inputs:{real:f,imag:g},backend:n});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const d=t.map(x=>{const w=[-1,be(x.shape.slice(e))];return Le({inputs:{x},backend:n,attrs:{shape:w}})}),p=d.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),f=bs(d.map(x=>x.shape),1),g=d[0].shape[0]===1,y=j2e(p,f,r,g),v=bs(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>i){const d=[];for(let f=0;f<t.length;f+=i){const g=t.slice(f,f+i);d.push(Kg(g,e,n))}const p=Kg(d,e,n);for(const f of d)n.disposeIntermediateTensorInfo(f);return p}if(fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const d=new GSe(t.map(p=>p.shape),e);return n.runWebGLProgram(d,t,r)}const{tensors2D:o,outShape:s}=qSe(t,e,n),l=new WSe(o.map(d=>d.shape)),u=n.runWebGLProgram(l,o,r);o.forEach(d=>n.disposeIntermediateTensorInfo(d));const c=Le({inputs:{x:u},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(u),c}function qSe(t,e,n){const r=bs(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Le({inputs:{x:a},attrs:{shape:[-1,be(a.shape.slice(e))]},backend:n})),outShape:r}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mB(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Xt(a,e[0].shape)[0],o=e.map(u=>u.shape);fT(o,i);const s=bs(e.map(u=>u.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(u=>be(u.shape)>0);return l.length===1?yi({inputs:{x:l[0]},backend:n}):Kg(l,i,n)}const KSe={kernelName:mv,backendName:"webgl",kernelFunc:mB};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",b=v?1:2,x=v?2:3,w=v?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class XSe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class yB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Aa(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<c;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<c;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const b=v*2;if(p+=`
           xC = xCCorner + ${b*l};
           `,s===1){if(b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=o%2===0?Yb(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let f="",g="";r&&(a?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${g}
         setOutput(result);
       }
     `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class YSe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);const{dataFormat:r}=n,a=Pa(),i=r==="channelsLast",o=i?1:2,s=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${a.output} = result;
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function q2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function bB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,f=n.dataFormat==="channelsLast",g=!1,y=!1;let v;const b=[];if(i!=null){const x=q2(i.shape,f);x!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:x}}),b.push(i))}if(a!=null){const x=q2(a.shape,f);x!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:x}}),b.push(a))}if(!((d===1||p===1)&&c>oB)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&vn(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,j(B2(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);const E=V2({a:w,b:C,backend:r,transposeA:g,transposeB:y,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o}),_=r.texData.get(E.dataId);j(_.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,_.shape=n.outShape,v=yi({inputs:{x:E},backend:r}),v.shape=n.outShape,b.push(E)}else{const x=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=V2({a:f?w:S,b:f?S:w,transposeA:!f,transposeB:y,backend:r,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o});v=Le({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),b.push(w),b.push(S),b.push(C)}for(const x of b)r.disposeIntermediateTensorInfo(x);return v}function vB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:p,dataFormat:f}=n,g=f==="channelsLast",y=l*u*c,v=p*d,b=[n.batchSize,y,v],x=!0,w=!1,S=[];if(i!=null){const F=q2(i.shape,g);F!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:F}}),S.push(i))}if(a!=null){const F=q2(a.shape,g);F!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:F}}),S.push(a))}const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,y,be(e.shape)/y]}});S.push(C);const E=new YSe(b,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(E,[t],"float32",_),M=Le({inputs:{x:N},backend:r,attrs:{shape:b}});S.push(N),S.push(M);const P=a!=null,L=i!=null,U=s==="leakyrelu",B=s?Gg(s,!0):null,K=new tB(g?M.shape:C.shape,g?C.shape:M.shape,g?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],x,w,P,B,L,U),X=g?[M,C]:[C,M];if(a&&X.push(a),L&&X.push(i),U){const F=r.makeTensorInfo([],"float32",il(o,"float32"));X.push(F),S.push(F)}const Z=r.runWebGLProgram(K,X,"float32"),H=Le({inputs:{x:Z},backend:r,attrs:{shape:n.outShape}});S.push(Z);for(const F of S)r.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=pl(l),p=Br(a.shape,i.shape,o,u,s,c,!1,d);let f;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))f=bB({x:a,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const y=new yB(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];f=n.runWebGLProgram(y,[a,i],"float32",v)}else if(fe().getBool("WEBGL_CONV_IM2COL"))f=vB({x:a,filter:i,convInfo:p,backend:n});else{const y=new gB(p);f=n.runWebGLProgram(y,[a,i],"float32")}const g=Le({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),g}const ZSe={kernelName:gv,backendName:"webgl",kernelFunc:QSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JSe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eCe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class tCe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nCe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=pl(l),p=Br(a.shape,c,o,1,s,u,!1,d),f=new JSe(p);return n.runWebGLProgram(f,[a,i],"float32")}const aCe={kernelName:yv,backendName:"webgl",kernelFunc:rCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=pl(u),p=Br(o,i.shape,s,1,l,c,!1,d),f=new eCe(p);return n.runWebGLProgram(f,[a,i],"float32")}const oCe={kernelName:bv,backendName:"webgl",kernelFunc:iCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=bu(a.shape,i.shape,o,l,s),c=new XSe(u);return n.runWebGLProgram(c,[a,i],"float32")}const lCe={kernelName:vv,backendName:"webgl",kernelFunc:sCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r,u=bu(a.shape,l,o,1,s),c=new tCe(u);return n.runWebGLProgram(c,[a,i],"float32")}const cCe={kernelName:S3,backendName:"webgl",kernelFunc:uCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r,u=bu(l,i.shape,s,1,o),c=new nCe(u);return n.runWebGLProgram(c,[a,i],"float32")}const pCe={kernelName:xv,backendName:"webgl",kernelFunc:dCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hCe=ah+`
  return cos(x);
`,fCe=qt({opSnippet:hCe}),mCe={kernelName:hm,backendName:"webgl",kernelFunc:fCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gCe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,yCe=qt({opSnippet:gCe}),bCe={kernelName:fm,backendName:"webgl",kernelFunc:yCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class vCe{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,u]=e,[c]=n,[d,p]=r;this.outputShape=[c,d,p,u];const f=a==="bilinear"?1:0,[g,y]=[`${s-1}.0`,`${l-1}.0`],[v,b,x]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[w,S,C]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,c=new vCe(a.shape,i.shape,s,l,u);return n.runWebGLProgram(c,[a,i,o],"float32")},wCe={kernelName:Sv,backendName:"webgl",kernelFunc:xCe};var Xg;(function(t){t.Prod="*",t.Sum="+"})(Xg||(Xg={}));class xB{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Xg.Prod?"1.0":"0.0",s=r?o:`getX(${wB(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=a?`end != ${l-1}`:"end != 0",c=a?"end + 1":"end - 1"):(u=a?`end + pow2 < ${l}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Nn(i)} coords = getOutputCoords();
        int end = ${kB(i,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${kB(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${wB(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function wB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function kB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function SB(t,e,n,r,a,i){const o=e.shape.length,s=dr([r],o);let l=e;s!=null&&(l=La({inputs:{x:e},backend:n,attrs:{perm:s}}));const u=pr(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=yi({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(c))-1;p++){const f=new xB(t,l.shape,!1,i),g=[[p]],y=d;d=n.runWebGLProgram(f,[d],d.dtype,g),n.disposeIntermediateTensorInfo(y)}if(a){const p=new xB(t,l.shape,a,i),f=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(s!=null){const p=Sg(s),f=La({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return SB(Xg.Prod,a,n,i,o,s)}const SCe={kernelName:wv,backendName:"webgl",kernelFunc:kCe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return SB(Xg.Sum,a,n,i,o,s)}const ICe={kernelName:kv,backendName:"webgl",kernelFunc:CCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ECe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=j7(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=B2e(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const TCe={kernelName:Cv,backendName:"webgl",kernelFunc:ECe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class NCe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _Ce(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r,s=a.shape[0],l=o==="NHWC"?a.shape[1]:a.shape[2],u=o==="NHWC"?a.shape[2]:a.shape[3],c=o==="NHWC"?a.shape[3]:a.shape[1],d=l*i,p=u*i,f=c/(i*i),g=o==="NHWC"?[s,d,p,f]:[s,f,d,p],y=new NCe(g,i,o);return n.runWebGLProgram(y,[a],a.dtype)}const RCe={kernelName:Iv,backendName:"webgl",kernelFunc:_Ce};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class CB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Aa(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(a?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class IB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Aa(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)f+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<d;b++)f+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){const x=b*2;if(f+=`
          xC = xCCorner + ${x*u};
          `,l===1){if(x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,u===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const w=s%2===0?Yb(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let g="",y="";r&&(a?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $Ce(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),j(pa(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=Br(a.shape,i.shape,o,c,s,u,!0);let p;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new IB(d):p=new CB(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[a,i],"float32",f)}const OCe={kernelName:Ev,backendName:"webgl",kernelFunc:$Ce};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class MCe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class PCe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ACe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=Br(a.shape,c,o,s,l,u,!0),p=new MCe(d);return n.runWebGLProgram(p,[a,i],"float32")}const DCe={kernelName:Tv,backendName:"webgl",kernelFunc:ACe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=Br(c,i.shape,o,s,l,u,!0),p=new PCe(d);return n.runWebGLProgram(p,[a,i],"float32")}const FCe={kernelName:Nv,backendName:"webgl",kernelFunc:LCe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BCe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zCe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=be(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new BCe(i),l=n.runWebGLProgram(s,[o],o.dtype),u=Le({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const UCe={kernelName:_v,backendName:"webgl",kernelFunc:zCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class jCe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:p}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=vg(a.shape,i.shape,o,s,"NHWC",l);let c;const d=new jCe(u);c=n.runWebGLProgram(d,[a,i],"float32");const p=Le({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),p}const WCe={kernelName:Rv,backendName:"webgl",kernelFunc:VCe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GCe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=_T(a,i.length);$T(o.length,l,i);const{path:u,steps:c}=OT(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=RT(f,l[v]);let w;MT(b)?w=i[v]:(w=La({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);vn(w.shape,S)||(w=Le({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=SN({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=j2({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const HCe={kernelName:$v,backendName:"webgl",kernelFunc:GCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qCe="return (x >= 0.0) ? x : (exp(x) - 1.0);",KCe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,XCe=qt({opSnippet:qCe,packedOpSnippet:KCe}),YCe={kernelName:gm,backendName:"webgl",kernelFunc:XCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const QCe="return (b >= 1.0) ? a : a * (b + 1.0);",ZCe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,JCe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wg(ZCe,r.shape,a.shape):new rh(QCe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},eIe={kernelName:E3,backendName:"webgl",kernelFunc:JCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tIe=`
  return vec4(equal(a, b));
`,nIe="return float(a == b);",rIe=Jr({opSnippet:nIe,packedOpSnippet:tIe,dtype:"bool",cpuKernelImpl:V2e}),aIe={kernelName:bm,backendName:"webgl",kernelFunc:rIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iIe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${wT};
  float a1 = ${kT};
  float a2 = ${ST};
  float a3 = ${CT};
  float a4 = ${IT};
  float a5 = ${ET};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,oIe=qt({opSnippet:iIe}),sIe={kernelName:ym,backendName:"webgl",kernelFunc:oIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lIe=ah+`
  return exp(x);
`,uIe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EB=qt({opSnippet:lIe,packedOpSnippet:uIe,cpuKernelImpl:W2e,dtype:"float32"}),cIe={kernelName:vm,backendName:"webgl",kernelFunc:EB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TN(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(j(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:s}})}const dIe={kernelName:Ov,backendName:"webgl",kernelFunc:TN};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TB="return exp(x) - 1.0;",pIe=qt({opSnippet:TB,packedOpSnippet:TB,cpuKernelImpl:G2e}),hIe={kernelName:xm,backendName:"webgl",kernelFunc:pIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class NB{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${a}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _B(t,e,n){const r=n.texData.get(t.dataId),a=be(t.shape),i=t.shape[t.shape.length-1],o=a/i,s=Le({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=s.shape,u=new NB("real",l,e),c=new NB("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=Nu({inputs:{real:p,imag:f},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f);const y=Le({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(g),y}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fIe(t){const{inputs:e,backend:n}=t,{input:r}=e;return _B(r,!1,n)}const mIe={kernelName:Mv,backendName:"webgl",kernelFunc:fIe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gIe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yg(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||kp(a),i==="string"){const o=Tr(i,be(r));return o.fill(a),e.makeTensorInfo(r,i,o)}else{const o=new gIe(r,a),s=[[a]];return e.runWebGLProgram(o,[],i,s)}}const yIe={kernelName:Pv,backendName:"webgl",kernelFunc:Yg};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class bIe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vIe={kernelName:Av,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new bIe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const RB="return floor(x);",xIe=qt({opSnippet:RB,packedOpSnippet:RB,cpuKernelImpl:H2e}),wIe={kernelName:wm,backendName:"webgl",kernelFunc:xIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kIe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,SIe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,CIe=Jr({opSnippet:kIe,packedOpSnippet:SIe,dtype:"int32"}),IIe={kernelName:km,backendName:"webgl",kernelFunc:CIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class EIe{constructor(e){this.variableNames=["A"];const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class TIe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const NIe={kernelName:Bx,backendName:"webgl",kernelFunc:_Ie};let oh,NN=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function _Ie(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,u]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[u,l],d=[u,l,i];if(s||o){const y=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(oh==null||y!==NN)&&(NN=y,oh=document.createElement("canvas").getContext("2d",{willReadFrequently:NN})),oh.canvas.width=l,oh.canvas.height=u,oh.drawImage(a,0,0,l,u),a=oh.canvas}const p=n.makeTensorInfo(c,"int32");n.texData.get(p.dataId).usage=Mi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);const f=fe().getBool("WEBGL_PACK")?new TIe(d):new EIe(d),g=n.runWebGLProgram(f,[p],"int32");return n.disposeData(p.dataId),g}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r,y=pl(c),v=Br(a.shape,i.shape,l,d,u,p,!1,y);let b;const x=[],w=o!=null,S=s!=null,C=f==="leakyrelu",E=()=>{const N=[a,i],M=(P,L)=>{if(L==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){const U=Le({inputs:{x:P},backend:n,attrs:{shape:[P.shape[0],1,1]}});return x.push(U),U}return P};if(w&&N.push(M(o,c)),S&&N.push(M(s,c)),C){const P=n.makeTensorInfo([],"float32",il(g,"float32"));N.push(P),x.push(P)}return N};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))b=bB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else if(v.strideWidth<=2&&y==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const N=f?Gg(f,!0):null,M=new yB(v,w,N,S,C),P=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],L=E();b=n.runWebGLProgram(M,L,"float32",P)}else if(fe().getBool("WEBGL_CONV_IM2COL"))b=vB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else{const N=f?Gg(f,!1):null,M=new gB(v,w,N,S,C),P=E();b=n.runWebGLProgram(M,P,"float32")}const _=Le({inputs:{x:b},backend:n,attrs:{shape:v.outShape}});return x.push(b),x.forEach(N=>n.disposeIntermediateTensorInfo(N)),_}const $Ie={kernelName:sg,backendName:"webgl",kernelFunc:RIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,g=[];let y=c;y==null&&(y=[1,1]),j(pa(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const v=Br(a.shape,i.shape,l,y,u,d,!0),b=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,x=p?Gg(p,b):null,w=[a,i],S=o!=null,C=s!=null,E=p==="leakyrelu";if(S&&w.push(o),C&&w.push(s),E){const P=n.makeTensorInfo([],"float32",il(f,"float32"));w.push(P),g.push(P)}let _;b?_=new IB(v,S,x,C,E):_=new CB(v,S,x,C,E);const N=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],M=n.runWebGLProgram(_,w,"float32",N);return g.forEach(P=>n.disposeIntermediateTensorInfo(P)),M}const MIe={kernelName:lg,backendName:"webgl",kernelFunc:OIe};class PIe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=Nn(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function AIe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,o=i[i.length-1],s=be(r.shape),[l,u,c,d]=Qx(r,a),p=Le({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[be(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=q2e(b,x,r.dtype,u,o,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,w.values)}const g=new PIe(o,d,[u,c],r.shape),y=n.runWebGLProgram(g,[f,p],f.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),v}const DIe={kernelName:Fv,backendName:"webgl",kernelFunc:AIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LIe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Nn(this.rank),a=FIe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function FIe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $B(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r,l=Xt(o,a.shape)[0];if(fe().get("DEBUG")){const x=n.readSync(i.dataId),w=a.shape[l];for(let S=0;S<x.length;++S){const C=x[S];j(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const u=DT(a,i,l,s),c=be(i.shape),d=[],p=Le({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Le({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(p),d.push(f);const g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const x=n.bufferSync(f),w=n.bufferSync(p),S=K2e(w,x,g);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(u.outputShape,S.dtype,S.values)}const y=new LIe(p.shape,g),v=n.runWebGLProgram(y,[p,f],p.dtype);d.push(v);const b=Le({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const BIe={kernelName:Lv,backendName:"webgl",kernelFunc:$B};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zIe="return float(a > b);",UIe=`
  return vec4(greaterThan(a, b));
`,jIe=Jr({opSnippet:zIe,packedOpSnippet:UIe,cpuKernelImpl:X2e,dtype:"bool"}),VIe={kernelName:Sm,backendName:"webgl",kernelFunc:jIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const WIe="return float(a >= b);",GIe=`
  return vec4(greaterThanEqual(a, b));
`,HIe=Jr({opSnippet:WIe,packedOpSnippet:GIe,dtype:"bool",cpuKernelImpl:Y2e}),qIe={kernelName:Cm,backendName:"webgl",kernelFunc:HIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KIe(t){const{inputs:e,backend:n}=t,{input:r}=e;return _B(r,!0,n)}const XIe={kernelName:Bv,backendName:"webgl",kernelFunc:KIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const YIe="return float(!isnan(x) && !isinf(x));",QIe=qt({opSnippet:YIe,dtype:"bool"}),ZIe={kernelName:Em,backendName:"webgl",kernelFunc:QIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const JIe="return float(isinf(x));",eEe=qt({opSnippet:JIe,dtype:"bool"}),tEe={kernelName:Tm,backendName:"webgl",kernelFunc:eEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nEe="return float(isnan(x));",rEe=qt({opSnippet:nEe,dtype:"bool"}),aEe={kernelName:Nm,backendName:"webgl",kernelFunc:rEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iEe="return float(a < b);",oEe=`
  return vec4(lessThan(a, b));
`,sEe=Jr({opSnippet:iEe,packedOpSnippet:oEe,cpuKernelImpl:Q2e,dtype:"bool"}),lEe={kernelName:_m,backendName:"webgl",kernelFunc:sEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uEe="return float(a <= b);",cEe=`
  return vec4(lessThanEqual(a, b));
`,dEe=Jr({opSnippet:uEe,packedOpSnippet:cEe,cpuKernelImpl:Z2e,dtype:"bool"}),pEe={kernelName:Rm,backendName:"webgl",kernelFunc:dEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hEe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=J2e(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const fEe={kernelName:jv,backendName:"webgl",kernelFunc:hEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mEe=ah+`
  return x < 0.0 ? 0./0. : log(x);
`,gEe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,yEe=qt({opSnippet:mEe,packedOpSnippet:gEe,cpuKernelImpl:ewe}),bEe={kernelName:$m,backendName:"webgl",kernelFunc:yEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vEe=ah+`
  return log(1.0 + x);
`,xEe=qt({opSnippet:vEe}),wEe={kernelName:Om,backendName:"webgl",kernelFunc:xEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kEe="return float(a >= 1.0 && b >= 1.0);",SEe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,CEe=Jr({opSnippet:kEe,packedOpSnippet:SEe,dtype:"bool"}),IEe={kernelName:Mm,backendName:"webgl",kernelFunc:CEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const EEe="return float(!(x >= 1.0));",TEe=qt({opSnippet:EEe}),NEe={kernelName:Pm,backendName:"webgl",kernelFunc:TEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _Ee="return float(a >= 1.0 || b >= 1.0);",REe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,$Ee=Jr({opSnippet:_Ee,packedOpSnippet:REe,dtype:"bool"}),OEe={kernelName:Am,backendName:"webgl",kernelFunc:$Ee};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class MEe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class PEe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const AEe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r,u=fe().getBool("WEBGL_PACK_NORMALIZATION")?new PEe(a.shape,i,o,s,l):new MEe(a.shape,i,o,s,l);return n.runWebGLProgram(u,[a],a.dtype)},DEe={kernelName:Vv,backendName:"webgl",kernelFunc:AEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LEe{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FEe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new LEe(a.shape,s,l,u,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)},BEe={kernelName:T3,backendName:"webgl",kernelFunc:FEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zEe(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=td(o,t.dtype,"max",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s),d=c!=null,p=n.shouldExecuteOnCPU([a]);let f=a;if(d){if(p){const x=n.texData.get(f.dataId).values,w=new Array(s);for(let E=0;E<w.length;E++)w[E]=a.shape[c[E]];const S=xN(x,a.shape,a.dtype,c,w);f=n.makeTensorInfo(w,a.dtype);const C=n.texData.get(f.dataId);C.values=S}else f=U2(a,c,n);u=pr(u.length,s)}Qr("max",u,s);const[g,y]=Yr(f.shape,u);let v=g;o&&(v=_r(g,l));let b;if(p){const x=n.texData.get(f.dataId).values,w=twe(x,be(y),v,a.dtype);b=n.makeTensorInfo(v,a.dtype);const S=n.texData.get(b.dataId);S.values=w}else b=zEe(f,y,v,n);return d&&n.disposeIntermediateTensorInfo(f),b}const UEe={kernelName:Wv,backendName:"webgl",kernelFunc:OB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jEe=kN+`
  return max(a, b);
`,VEe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vg+`
  return result;
`,WEe=Jr({opSnippet:jEe,packedOpSnippet:VEe,cpuKernelImpl:nwe}),GEe={kernelName:Dm,backendName:"webgl",kernelFunc:WEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function HEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Ug(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;j(pa(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ao(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))return yi({inputs:{x:a},backend:n});const d=new Hg(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const qEe={kernelName:Gv,backendName:"webgl",kernelFunc:HEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=dl(a.shape,i,o,c,s,u,l),p=new CN(d,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}const XEe={kernelName:Hv,backendName:"webgl",kernelFunc:KEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class YEe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class QEe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=u-1-e.padInfo.top,f=c-1-e.padInfo.left,g=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=dl(o.shape,s,l,d,u,c),f=new CN(p,"max",!0),g=n.runWebGLProgram(f,[o],o.dtype),y=new QEe(p),v=n.runWebGLProgram(y,[a,g],o.dtype);return n.disposeIntermediateTensorInfo(g),v}const JEe={kernelName:_3,backendName:"webgl",kernelFunc:ZEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;Ug([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=ao(s.shape,l,u,1,c,d),f=!0,g=new Hg(p,"max",f),y=n.runWebGLProgram(g,[s],s.dtype),v=new YEe(p),b=n.runWebGLProgram(v,[a,y],s.dtype);return n.disposeIntermediateTensorInfo(y),b}const t3e={kernelName:N3,backendName:"webgl",kernelFunc:e3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function n3e(t,e,n,r){let a=new Hg(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new Hg(n,"max",!0,!0,e);const o=r.runWebGLProgram(a,[t],"float32");return[i,o]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r3e={kernelName:qv,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;j(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];j(pa(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ao(r.shape,a,i,u,o),[d,p]=n3e(r,s,c,l);return[d,p]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a3e(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=td(o,"float32","mean",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i3e={kernelName:Kv,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,o=n,s=r.shape.length,l=Xt(i,r.shape);let u=l;const c=dr(u,s),d=c!=null,p=o.shouldExecuteOnCPU([r]),f=[];let g=r;if(d){if(p){const w=o.texData.get(g.dataId).values,S=new Array(s);for(let _=0;_<S.length;_++)S[_]=r.shape[c[_]];const C=xN(w,r.shape,r.dtype,c,S);g=o.makeTensorInfo(S,r.dtype);const E=o.texData.get(g.dataId);E.values=C}else g=U2(r,c,o);f.push(g),u=pr(u.length,s)}Qr("sum",u,s);const[y,v]=Yr(g.shape,u);let b=y;a&&(b=_r(y,l));const x=a3e(g,v,b,o);for(const w of f)o.disposeIntermediateTensorInfo(w);return x}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pr(u.length,a.shape.length)),Qr("min",u,s);const[p,f]=Yr(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=td(y,y.dtype,"min",n);let b;if(o){const x=_r(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const s3e={kernelName:Xv,backendName:"webgl",kernelFunc:o3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l3e=kN+`
  return min(a, b);
`,u3e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vg+`
  return result;
`,c3e=Jr({opSnippet:l3e,packedOpSnippet:u3e,cpuKernelImpl:rwe}),d3e={kernelName:Lm,backendName:"webgl",kernelFunc:c3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class p3e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const a=e.length,i=Nn(a),o=n.map(c=>c[0]).join(","),s=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class h3e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const a=e.length,i=Nn(a),o=n.map(g=>g[0]).join(","),s=n.map((g,y)=>g[0]+e[y]).join(","),l=Da("rc",a),u=Da("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=r==="reflect"?0:1;let f="";if(a===1){const g=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const g=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[a-2]} += 1;
        if(${l[a-2]} < ${this.outputShape[a-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[a-1]} += 1;
          if(${c}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const f3e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new h3e(r.shape,a,i):new p3e(r.shape,a,i);return e.runWebGLProgram(o,[r],r.dtype)},m3e={kernelName:Yv,backendName:"webgl",kernelFunc:f3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const g3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,y3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Vg+`
  return result;
`,b3e=Jr({opSnippet:g3e,packedOpSnippet:y3e}),v3e={kernelName:Fm,backendName:"webgl",kernelFunc:b3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class x3e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w3e=`
if (a == b) {
  return 1.0;
};
return a / b;`,k3e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,MB=Jr({opSnippet:w3e,packedOpSnippet:k3e,checkOutOfBounds:!0}),S3e={kernelName:mm,backendName:"webgl",kernelFunc:MB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PB="return a - b;",AB=Jr({opSnippet:PB,packedOpSnippet:PB,supportsComplex:!0,cpuKernelImpl:kwe}),C3e={kernelName:tg,backendName:"webgl",kernelFunc:AB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DB(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=Xt([i],a.shape),s=OB({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=_r(s.shape,o),u=Le({inputs:{x:s},backend:n,attrs:{shape:l}}),c=AB({inputs:{a,b:u},backend:n}),d=EB({inputs:{x:c},backend:n}),p=j2({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:p},backend:n,attrs:{shape:l}}),g=MB({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}const I3e={kernelName:Sx,backendName:"webgl",kernelFunc:DB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r,l=s?a:DB({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new x3e(u,c,i),p=[[o]],f=n.runWebGLProgram(d,[l],"int32",p);return s||n.disposeIntermediateTensorInfo(l),f}const T3e={kernelName:Qv,backendName:"webgl",kernelFunc:E3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const N3e=ho+`
  return -x;
`,_3e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function R3e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,s]=iwe(i.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new ed(r.shape,_3e):a=new bl(r.shape,N3e),n.runWebGLProgram(a,[r],r.dtype)}const $3e={kernelName:Zv,backendName:"webgl",kernelFunc:R3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O3e=m2;function M3e(t){Oi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=O3e(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const P3e={kernelName:Jv,backendName:"webgl",kernelFunc:M3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A3e=g2;function D3e(t){Oi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:p,validOutputs:f}=A3e(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const L3e={kernelName:ex,backendName:"webgl",kernelFunc:D3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F3e=y2;function B3e(t){Oi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=F3e(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const z3e={kernelName:tx,backendName:"webgl",kernelFunc:B3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class U3e{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r,u=be(a.shape),c=new U3e(u,o,s,l),d=Le({inputs:{x:a},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...a.shape,o],g=Le({inputs:{x:p},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),g},V3e={kernelName:rx,backendName:"webgl",kernelFunc:j3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=qg({inputs:{input:r},backend:n}),i=K2({inputs:{x:a},backend:n}),o=H2({inputs:{input:r},backend:n}),s=K2({inputs:{x:o},backend:n}),l=Nu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return Yg({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const W3e={kernelName:Fx,backendName:"webgl",kernelFunc:K2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LB(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=qg({inputs:{input:r},backend:n}),i=LB({inputs:{x:a},backend:n}),o=H2({inputs:{input:r},backend:n}),s=K2({inputs:{x:o},backend:n}),l=Nu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return Yg({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const G3e={kernelName:nx,backendName:"webgl",kernelFunc:LB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H3e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return TN({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Kr(i,c.shape,"All tensors passed to stack must have matching shapes"),j(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=TN({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=mB({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const q3e={kernelName:ax,backendName:"webgl",kernelFunc:H3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class K3e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const a=e.length,i=Nn(a),o=n.map(u=>u[0]).join(","),s=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class X3e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const a=e.length,i=Nn(a),o=n.map(y=>y[0]).join(","),s=n.map((y,v)=>y[0]+e[v]).join(","),l=Da("rc",a),u=Da("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${l[a-2]} += 1;
       if(${l[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${l[a-1]} += 1;
         if(${c}) {`],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let y=0,v=a===1?2:4;y<v;y++)g+=`
        ${p[y]}
        if (${f}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${d});
        }
      `;g+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FB=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;if(be(a.shape)===0){const u=i.map((c,d)=>c[0]+a.shape[d]+c[1]);return Yg({backend:n,attrs:{shape:u,value:o,dtype:a.dtype}})}const s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new X3e(a.shape,i,o):new K3e(a.shape,i,o),l=[[o]];return n.runWebGLProgram(s,[a],a.dtype,l)},Y3e={kernelName:ix,backendName:"webgl",kernelFunc:FB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Q3e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Z3e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Vg+`
  return result;
`,J3e=Jr({opSnippet:Q3e,packedOpSnippet:Z3e}),e4e={kernelName:Um,backendName:"webgl",kernelFunc:J3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=[],u=Xt(i,a.shape);let c=u;const d=dr(c,s);let p=a;d!=null&&(p=La({inputs:{x:a},backend:n,attrs:{perm:d}}),c=pr(c.length,s),l.push(p)),Qr("prod",c,s);let f;if(n.shouldExecuteOnCPU([p])){const g=n.texData.get(p.dataId).values,{outVals:y,outShape:v,outDtype:b}=swe(p.shape,p.dtype,g,c);f=n.makeTensorInfo(v,b,y)}else{const[g,y]=Yr(p.shape,c),v=be(y),b=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),x=qx(a.dtype),w=td(b,x,"prod",n);f=Le({inputs:{x:w},backend:n,attrs:{shape:g}}),l.push(b),l.push(w)}if(o){l.push(f);const g=_r(f.shape,u);f=Le({inputs:{x:f},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const n4e={kernelName:sx,backendName:"webgl",kernelFunc:t4e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r4e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:s}=r,l=a.map(b=>n.readSync(b.dataId)),u=a.map(b=>b.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[p,f,g]=lwe(l,u,c,i.shape,i.dtype,d,o.shape,s),y=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),v=n.makeTensorInfo(g,i.dtype,f);return y.concat([v])}const a4e={kernelName:lx,backendName:"webgl",kernelFunc:r4e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i4e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),p=s.map(v=>n.readSync(v.dataId)),f=s.map(v=>v.shape),[g,y]=uwe(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const o4e={kernelName:ux,backendName:"webgl",kernelFunc:i4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const BB=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:o}=n,s=cwe(r,a,i,o);return e.makeTensorInfo([s.length],o,s)},s4e={kernelName:cx,backendName:"webgl",kernelFunc:BB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l4e="return 1.0 / x;",u4e=qt({opSnippet:l4e}),c4e={kernelName:jm,backendName:"webgl",kernelFunc:u4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const d4e=ho+`
  return (x < 0.0) ? 0.0 : x;
`,p4e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,h4e=qt({opSnippet:d4e,packedOpSnippet:p4e}),f4e={kernelName:Vm,backendName:"webgl",kernelFunc:h4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const m4e=ho+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,g4e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,y4e=qt({opSnippet:m4e,packedOpSnippet:g4e}),b4e={kernelName:Wm,backendName:"webgl",kernelFunc:y4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class v4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class x4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new x4e(a.shape,l,u,i,o):new v4e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],"float32")}const k4e={kernelName:fx,backendName:"webgl",kernelFunc:w4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class S4e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new S4e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const I4e={kernelName:$3,backendName:"webgl",kernelFunc:C4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class E4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class T4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new T4e(a.shape,l,u,i,o):new E4e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],a.dtype)}const _4e={kernelName:hx,backendName:"webgl",kernelFunc:N4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class R4e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new R4e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const O4e={kernelName:R3,backendName:"webgl",kernelFunc:$4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class M4e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,i=e.map((s,l)=>a(l)).join(","),o=Nn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class P4e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=Da("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,s=Nn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(a.slice())};
          if(${i}){
            result.g = ${u(a.slice())};
          }
          if(${o}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${d(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return p(g)}function u(g){return g[r-1]="("+g[r-1]+" + 1)",p(g)}function c(g){return g[r-2]="("+g[r-2]+" + 1)",p(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",p(g)}function p(g){const y=e.map((x,w)=>f(w,g)),v=y.join(","),b=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${b}))`}function f(g,y){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${y[g]} - 1`:`${y[g]}`}}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function A4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,o=a.shape.length,s=Xt(i,a.shape);if(o===0)return yi({inputs:{x:a},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new P4e(a.shape,s):new M4e(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}const D4e={kernelName:mx,backendName:"webgl",kernelFunc:A4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class L4e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F4e={kernelName:zx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=new L4e(r.shape,i),[u,c]=gT(o,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(a),Math.cos(a)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B4e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,z4e=qt({opSnippet:B4e}),U4e={kernelName:Gm,backendName:"webgl",kernelFunc:z4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j4e="return inversesqrt(x);",V4e=qt({opSnippet:j4e,cpuKernelImpl:dwe}),W4e={kernelName:Hm,backendName:"webgl",kernelFunc:V4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class zB{constructor(e,n,r,a,i,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=Nn(i.length),u=Nn(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const d=`getIndices(${c})`;let p="";a===1?p="i":a===2&&(p="i, coords[1]");const f=`getUpdates(${p})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G4e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Op(i,a,o),p=[d/u,u];if(d===0)return n.makeTensorInfo(o,a.dtype);const f=Le({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),g=Le({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new zB(l,s,f.shape.length,g.shape.length,c,p),b=n.runWebGLProgram(v,[g,f,y],g.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),x}const H4e={kernelName:gx,backendName:"webgl",kernelFunc:G4e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class q4e{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=fe().getNumber("WEBGL_VERSION")===2?i:o,l=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K4e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=new q4e(a.shape[0],a.shape[1],i.shape[1],o),l=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",l)}const X4e={kernelName:yx,backendName:"webgl",kernelFunc:K4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Y4e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${s[c]}`),c<e&&l.push(`${s[c]}`);a=l.join(),i=u.join()}const o=Nn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Q4e(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,o=new Y4e(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Xa(a.dtype,i.dtype))}const Z4e={kernelName:bx,backendName:"webgl",kernelFunc:Q4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const J4e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${vT};
  float scale = ${xT};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,eTe=qt({opSnippet:J4e}),tTe={kernelName:qm,backendName:"webgl",kernelFunc:eTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nTe=ah+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,rTe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aTe=qt({opSnippet:nTe,packedOpSnippet:rTe,cpuKernelImpl:hwe}),iTe={kernelName:Qm,backendName:"webgl",kernelFunc:aTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oTe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sTe=qt({opSnippet:oTe}),lTe={kernelName:Ym,backendName:"webgl",kernelFunc:sTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uTe=ah+`
  return sin(x);
`,cTe=qt({opSnippet:uTe}),dTe={kernelName:Km,backendName:"webgl",kernelFunc:cTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pTe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,hTe=qt({opSnippet:pTe}),fTe={kernelName:Xm,backendName:"webgl",kernelFunc:hTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mTe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,gTe=qt({opSnippet:mTe}),yTe={kernelName:Zm,backendName:"webgl",kernelFunc:gTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bTe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;j(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((b,x)=>b*x),l=[[0,0]];l.push(...o);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);const u=[],c=FB({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=Og(c.shape,i,s,!1),p=Mg(d.length,i.length,!1),f=Pg(c.shape,i,s,!1),g=Le({inputs:{x:c},backend:n,attrs:{shape:d}}),y=La({inputs:{x:g},backend:n,attrs:{perm:p}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:f}});return u.push(c),u.push(g),u.push(y),u.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},vTe={kernelName:wx,backendName:"webgl",kernelFunc:bTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xTe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,p,f,g,y]=mwe(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const wTe={kernelName:Cx,backendName:"webgl",kernelFunc:xTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kTe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=gwe(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const STe={kernelName:Ix,backendName:"webgl",kernelFunc:kTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CTe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=W7(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const ITe={kernelName:Ex,backendName:"webgl",kernelFunc:CTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ETe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=W7(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const TTe={kernelName:Tx,backendName:"webgl",kernelFunc:ETe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function NTe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Op(i,a,s),f=!1;if(i.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(i),w=ol(n.readSync(o.dataId)[0]),S=pwe(b,x,s,p,c,u,l,d,w,f);return n.makeTensorInfo(s,S.dtype,S.values)}const g=new zB(u,l,a.shape.length,i.shape.length,d,[p,1],f),y=n.runWebGLProgram(g,[i,a,o],i.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(y),v}const _Te={kernelName:Nx,backendName:"webgl",kernelFunc:NTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Xt(o,a.shape)[0],l=PT(a,i,s),u=a.shape.length,c=new Array(u).fill(0),d=a.shape.slice();return l.map(p=>{const f=[...d];f[s]=p;const g=ih({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});return c[s]+=p,g})}const $Te={kernelName:kx,backendName:"webgl",kernelFunc:RTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const UB="return sqrt(x);",OTe=qt({opSnippet:UB,packedOpSnippet:UB,cpuKernelImpl:ywe}),MTe={kernelName:Jm,backendName:"webgl",kernelFunc:OTe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PTe="return x * x;",ATe=qt({opSnippet:PTe}),DTe={kernelName:O3,backendName:"webgl",kernelFunc:ATe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jB="return (a - b) * (a - b);",LTe=Jr({opSnippet:jB,packedOpSnippet:jB}),FTe={kernelName:eg,backendName:"webgl",kernelFunc:LTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BTe({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=ho+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new bl(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const zTe={kernelName:ig,backendName:"webgl",kernelFunc:BTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class UTe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=Nn(r.length),o=Nn(r.length);let s="";if(a===1)s="coords * strides + begin";else{let l=0;s=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=w4(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Le({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){j(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const _=y4(x,w,S),N=ih({inputs:{x:a},backend:n,attrs:{begin:x,size:_}});C=Le({inputs:{x:N},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([a])){const _=n.readSync(a.dataId),N=St(a.shape,a.dtype,_),M=bwe(f,N,S,x);C=n.makeTensorInfo(g,a.dtype,M.values)}else{const _=new UTe(x,S,f);C=n.runWebGLProgram(_,[a],a.dtype)}const E=Le({inputs:{x:C},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(C),E}const VTe={kernelName:_x,backendName:"webgl",kernelFunc:jTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function WTe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.readSync(c.dataId),f=n.readSync(d.dataId),[g,y]=vwe(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const GTe={kernelName:Rx,backendName:"webgl",kernelFunc:WTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function HTe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=xwe(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const qTe={kernelName:$x,backendName:"webgl",kernelFunc:HTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KTe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),s=wwe(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const XTe={kernelName:Ox,backendName:"webgl",kernelFunc:KTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const YTe="return tan(x);",QTe=qt({opSnippet:YTe}),ZTe={kernelName:ng,backendName:"webgl",kernelFunc:QTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const JTe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,eNe=qt({opSnippet:JTe}),tNe={kernelName:rg,backendName:"webgl",kernelFunc:eNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nNe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const a=Nn(this.rank),i=rNe(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function rNe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const s=n.readSync(a.dataId),l=a.dtype==="string"?s.map(d=>ol(d)):s,u=St(a.shape,a.dtype,l),c=Swe(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}const o=new nNe(a.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const aNe={kernelName:ag,backendName:"webgl",kernelFunc:VB};class iNe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class oNe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nd(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function WB(t){let e=1;for(;e<t;)e*=2;return e}function sNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r,s=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>l){const M=n.readSync(a.dataId),[P,L]=Cwe(M,u,a.dtype,i,o);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(L.shape,L.dtype,L.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[a,Yg({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),p=d!==null&&d.isPacked,f=p?n.unpackTensor(a):a,g=be(u)/c,y=Le({inputs:{x:f},attrs:{shape:[g,c]},backend:n});p&&nd(n,f);const v=WB(i),b=WB(c);let x=null;const w=()=>x===null?[y,y]:[y,x],S=(M,P,L)=>{const U=w(),B=new iNe(L),K=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[M],[P]],X=x;x=n.runWebGLProgram(B,U,"int32",K),nd(n,X)};for(let M=1;M<v;M*=2){const P=M*2;for(let L=M;L>=1;L/=2)S(P,L,[g,b])}for(let M=b;M>v;M/=2){const P=w(),L=new oNe([g,M/2]),U=[[c],[x===null?1:0],[v]],B=x;x=n.runWebGLProgram(L,P,"int32",U),nd(n,B);const K=v/2,X=K*2;for(let Z=K;Z>=1;Z/=2)S(X,Z,x.shape)}let C=x;x=ih({inputs:{x},backend:n,attrs:{begin:0,size:[g,i]}}),nd(n,C);let E=$B({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});nd(n,y);const _=u.slice(0,-1);_.push(i),C=x,x=Le({inputs:{x},attrs:{shape:_},backend:n}),nd(n,C);const N=E;return E=Le({inputs:{x:E},attrs:{shape:_},backend:n}),nd(n,N),[E,x]}const lNe={kernelName:Mx,backendName:"webgl",kernelFunc:sNe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class uNe{constructor(e,n,r,a,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(a){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cNe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=new uNe(d,p,o,s,l,v);return n.runWebGLProgram(b,[a,i],"float32")}const dNe={kernelName:Px,backendName:"webgl",kernelFunc:cNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pNe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;Ug(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:u}=Iwe(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const hNe={kernelName:Ax,backendName:"webgl",kernelFunc:pNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fNe(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a,s=o.shape.length,l=a.shape[i],u=new Array(s-1);let c=0;for(let y=0;y<s;y++)y!==i&&(u[c++]=o.shape[y]);const d=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;const g=new Array(l);for(let y=0;y<g.length;y++){p[i]=y;const v=ih({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),b=Le({inputs:{x:v},backend:n,attrs:{shape:u}});g[y]=b,d.push(v)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const mNe={kernelName:Dx,backendName:"webgl",kernelFunc:fNe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gNe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r,s=a.shape.length,l=[];let u=0;const c=dr([u],s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(d),u=pr(1,s)[0]);const p=t9(d.shape,u,o),f=be([d.shape[u]]),g=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(g);const y=qx(a.dtype),v=(S,C,E,_,N)=>{const M=S.shape[0],P=S.shape[1],L=e9(P,N),U={windowSize:L,inSize:P,batchSize:M,numSegments:N},B=new gNe(U,C),K=n.compileAndRun(B,[S,E],_);if(l.push(K),K.shape[1]===N)return K;const X=BB({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),Z=VB({inputs:{x:X},backend:n,attrs:{reps:[P/L]}});return l.push(X),l.push(Z),v(K,C,Z,_,N)},b=v(g,"unsortedSegmentSum",i,y,o),x=Le({inputs:{x:b},backend:n,attrs:{shape:p}});let w=x;if(c!=null){l.push(x);const S=Sg(c);w=La({inputs:{x:w},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const bNe={kernelName:Lx,backendName:"webgl",kernelFunc:yNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vNe=[gke,bke,wke,Cke,Eke,_ke,$ke,Mke,Lke,Bke,jke,Gke,Kke,Zke,tSe,rSe,iSe,uSe,dSe,hSe,ySe,CSe,ESe,NSe,PSe,DSe,zSe,Jwe,VSe,KSe,ZSe,aCe,oCe,lCe,cCe,pCe,mCe,bCe,wCe,SCe,ICe,TCe,RCe,OCe,DCe,FCe,UCe,WCe,HCe,YCe,eIe,aIe,sIe,cIe,dIe,hIe,mIe,yIe,vIe,wIe,IIe,NIe,$Ie,MIe,DIe,BIe,VIe,qIe,Zwe,XIe,HSe,ZIe,tEe,aEe,tke,lEe,pEe,fEe,bEe,wEe,IEe,NEe,OEe,DEe,BEe,UEe,GEe,qEe,XEe,JEe,t3e,r3e,i3e,s3e,d3e,m3e,v3e,T3e,ake,$3e,P3e,L3e,z3e,RSe,V3e,G3e,q3e,Y3e,e4e,rke,n4e,a4e,o4e,s4e,$Se,S3e,c4e,f4e,b4e,oke,k4e,I4e,_4e,O4e,D4e,F4e,U4e,W4e,H4e,X4e,Z4e,tTe,iTe,lTe,dTe,fTe,kSe,I3e,yTe,vTe,wTe,STe,ITe,TTe,_Te,$Te,MTe,DTe,FTe,zTe,VTe,GTe,qTe,XTe,C3e,hke,ZTe,tNe,aNe,lNe,dNe,fke,hNe,mNe,bNe,W3e];for(const t of vNe)Vx(t);async function xNe(){return await Eme({base:"pascal",quantizationBytes:2})}async function wNe(t,e){const n=await t.segment(e);return SNe(e,n)}function kNe(t,e,n,r,a){const i=document.createElement("canvas"),o=document.createElement("canvas"),s=i.getContext("2d"),l=o.getContext("2d");i.width=r,i.height=a,o.width=r,o.height=a,s.drawImage(e,0,0,r,a),l.putImageData(n,0,0);const u=s.getImageData(0,0,r,a),c=u.data,d=l.getImageData(0,0,r,a).data;for(let p=0,f=d.length;p<f;p+=4)d[p]===t[0]&&d[p+1]===t[1]&&d[p+2]===t[2]&&(c[p+3]=0);return s.putImageData(u,0,0),i.toDataURL()}function SNe(t,e){const{height:n,width:r,segmentationMap:a}=e,i=new ImageData(a,r,n);return kNe([0,0,0],t,i,r,n)}const CNe=()=>{const t=$.useRef(),e=async n=>await wNe(t.current,n);return $.useEffect(()=>{xNe().then(n=>{t.current=n})}),{autoRemoveBackground:e}};async function INe(t){try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);const n=await e.json();return"@type"in n?n["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+n["@type"]),null):TNe(n):"type"in n?n.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+n.type),null):NNe(n):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(e){return console.log("I was unable to get the Manifest you supplied due to: "+e),null}}function ENe(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function TNe(t){var e,n,r;if("sequences"in t){let a=t.sequences;ENe(a)&&(a=[a]);let i=!1;for(const o of a)if("canvases"in o){i=!0;for(const s of o.canvases){const l=(r=(n=(e=s.images[0])==null?void 0:e.resource)==null?void 0:n.service)==null?void 0:r["@id"];if(l)return l}}else i||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function NNe(t){if("items"in t){const e=t.items;for(const n of e){const r=n.items[0].items[0].body.service[0]["@id"];if(r)return r}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function GB(t,e){const n=window.getComputedStyle(t);return parseInt(n.getPropertyValue(e),10)}function _Ne(t,e){const{width:n,height:r}=e,a=1080,i="0",o="default",s=".jpg",l=document.querySelector(".displayregioncontainer"),u=document.querySelector(".displayregion");if(!l||!u)throw new Error("Canvas or selection element not found");const{clientWidth:c,clientHeight:d}=l,p=n*d/r,f=(c-p)/2,g=n/p,y=9,v=GB(u,"left"),b=GB(u,"top"),x=Math.round(u.clientWidth+y),w=Math.round(u.clientHeight+y),S=Math.max(Math.round((v-f)*g),0),C=Math.max(Math.round(b*g),0),E=Math.min(Math.round(x*g),n),_=Math.min(Math.round(w*g),r),N=`${S},${C},${E},${_}`;return console.log(`Calculated selection region (x, y, width, height): ${N}`),`${t}/${N}/${a},/${i}/${o}${s}`}const HB={fetchIIIFIdentifier:async t=>{try{return await INe(t)}catch(e){return console.error(e),null}},getCroppedImagePath:async t=>{try{const e=t+"/info.json",n=await fetch(e);if(!n.ok)throw new Error(n.statusText);const r=await n.json();return _Ne(t,r)}catch(e){console.error(e)}}};function RNe({imageList:t,handleImageClick:e}){return ae.jsx(Mo,{margin:"my-4",className:"flex overflow-x-auto",style:{maxHeight:"200px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:t.map(n=>ae.jsx("img",{src:n.thumbnail,alt:n.name,onClick:()=>e(n),style:{cursor:"pointer",marginRight:"10px",scrollSnapAlign:"start"},role:"presentation"},n.id))})}const $Ne=$.lazy(()=>sie(()=>import("./index-cJ8K4Fsj.js"),bw([]))),ONe={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1,showHomeControl:!1,showFullPageControl:!1,showRotationControl:!1,showFlipControl:!1},showTitle:!1,showIIIFBadge:!1,showZoomControl:!1},MNe={colors:{primary:"#BC13FE",accent:"#BC13FE",secondary:"#EDECEA"}};function PNe(){const{t}=Jl(),{imageLikeList:e}=Ks(),n=Ks(x=>x.addToArtwork),[r,a]=$.useState(e[0]||null),[i,o]=$.useState(""),[s,l]=$.useState("");$.useEffect(()=>{i&&setTimeout(()=>{l(document.querySelectorAll("canvas")[0].toDataURL())},1e3)},[i]);const u=x=>{a(x)},[c,d]=$.useState([]),[p,f]=$.useState(),{autoRemoveBackground:g}=CNe(),y=x=>{const w=new Image;w.src=x,g(w).then(S=>{console.log(S),f(S)})},v=async(x,w)=>{try{const S=await HB.getCroppedImagePath(w);console.log("Cropped image path: ",S),S&&n(x,S)}catch(S){console.error("Error:",S)}},b=x=>{x&&o(x)};return ae.jsxs(Mo,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[ae.jsx("div",{className:"p-2",children:ae.jsx("h1",{className:"text-xl",children:t("collectionTitle")})}),ae.jsx(RNe,{imageList:e,handleImageClick:u}),r&&ae.jsxs(Mo,{className:"space-y-4",children:[ae.jsx(Sie,{value:c,src:s,onChange:x=>{d(x)},onComplete:x=>{x.length&&bie(s,x,(w,S)=>{w||f(S.toDataURL())})}}),ae.jsx("div",{children:ae.jsx("img",{src:p,alt:""})}),p&&ae.jsx(yr,{onClick:()=>y(p),children:"Remove Background"}),ae.jsx($.Suspense,{fallback:ae.jsxs("h2",{children:["\u{1F300} ",t("collectionLoading")]}),children:ae.jsx($Ne,{iiifContent:r.url,options:ONe,customTheme:MNe,canvasIdCallback:b})}),ae.jsx(yr,{className:"p-4 text-xl text-black w-2/3 mx-auto h-16",rounded:!0,inline:!0,onClick:()=>v(r?.id,r?.identifier),children:t("collectionAddText")})]})]})}function ANe(){const{t}=Jl();return ae.jsxs(q6,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed k-color-brand-primary text-center",innerClassName:"tabbar-inner",children:[ae.jsx(jf,{active:nu({path:Ji("/").pathname,end:!0}),to:"/",component:Ey,icon:ae.jsx(_a,{material:ae.jsx(_J,{className:"w-10 h-10"}),className:`transition duration-300 ${nu({path:Ji("/").pathname,end:!0})&&"animate-pulse"}`}),label:t("start"),touchRipple:!1}),ae.jsx(jf,{active:nu({path:Ji("/selection").pathname,end:!0}),to:"/selection",component:Ey,icon:ae.jsx(_a,{material:ae.jsx(EJ,{className:"w-10 h-10"}),className:`transition duration-300 ${nu({path:Ji("/selection").pathname,end:!0})&&"animate-pulse"}`}),label:t("selection"),touchRipple:!1}),ae.jsx(jf,{active:nu({path:Ji("/collection").pathname,end:!0}),to:"/collection",component:Ey,icon:ae.jsx(_a,{material:ae.jsx(FJ,{className:"w-10 h-10"}),className:`transition duration-300 ${nu({path:Ji("/collection").pathname,end:!0})&&"animate-pulse"}`}),label:t("collection"),touchRipple:!1}),ae.jsx(jf,{active:nu({path:Ji("/creation").pathname,end:!0}),to:"/creation",component:Ey,icon:ae.jsx(_a,{material:ae.jsx(OJ,{className:"w-10 h-10"}),className:`transition duration-300 ${nu({path:Ji("/creation").pathname,end:!0})&&"animate-pulse"}`}),label:t("artwork"),touchRipple:!1})]})}const DNe="/logos/bmbf_logo_de.jpg",LNe="/logos/bmbf_logo_en.jpg",FNe="/logos/digitalwarenkombinat.png",BNe="/logos/prototype_fund_logo.png",zNe=()=>ae.jsx(op,{href:"https://prototypefund.de/",target:"_blank",children:ae.jsx("img",{src:BNe,alt:"Logo Protype Fund",className:"w-64 m-auto"})}),UNe=()=>{const{i18n:t}=Jl();return ae.jsx(op,{href:"https://www.bmbf.de/",target:"_blank",children:ae.jsx("img",{src:t.resolvedLanguage==="en"?LNe:DNe,alt:"Logo Bundesministerium f\xFCr Bildung und Forschung",className:"w-64 m-auto"})})},jNe=()=>ae.jsx(op,{href:"https://digitalwarenkombinat.de/",target:"_blank",children:ae.jsx("img",{src:FNe,alt:"Logo Digitalwarenkombinat",className:"w-64 m-auto"})});function VNe(t,e){const{t:n,i18n:r}=Jl();return ae.jsx(G6,{side:"right",opened:t,onBackdropClick:()=>e(!1),children:ae.jsxs(Ly,{children:[ae.jsx(Py,{right:ae.jsx(qJ,{onClick:()=>e(!1),className:"mr-4 w-10 h-10"})}),ae.jsxs(Mo,{className:"space-y-4",children:[ae.jsx("p",{className:"text-xl",children:n("sidebarChooseLanguage")}),ae.jsx(yr,{onClick:()=>r.changeLanguage("de"),className:"p-4 text-xl text-black w-10 mr-2 h-10",rounded:!0,inline:!0,children:"DE"}),ae.jsx(yr,{onClick:()=>r.changeLanguage("en"),className:"p-4 text-xl text-black w-10 h-10",rounded:!0,inline:!0,children:"EN"}),ae.jsx("p",{children:n("sidebarAbout")}),ae.jsx("p",{children:n("sidebarLegal")}),ae.jsx(zNe,{}),ae.jsx(UNe,{}),ae.jsx(jNe,{})]})]})})}function WNe(){const[t,e]=$.useState(!1);return ae.jsxs(ae.Fragment,{children:[ae.jsx(L6,{theme:"material",children:ae.jsxs(Ly,{children:[ae.jsx(Py,{className:"top-0 sticky",transparent:!0,right:ae.jsx(dJ,{onClick:()=>e(!0),className:"mr-4 w-10 h-10"})}),ae.jsx("main",{className:"h-[calc(100%_-_192px)] overflow-auto",children:ae.jsx(rX,{})}),ae.jsx(ANe,{}),VNe(t,e)]})}),ae.jsx(SX,{})]})}var qB={exports:{}},KB={exports:{}},XB={exports:{}},YB={exports:{}},QB={exports:{}},_N=Object.defineProperty,GNe=Object.getOwnPropertyDescriptor,HNe=Object.getOwnPropertyNames,qNe=Object.prototype.hasOwnProperty,ZB=(t,e)=>{for(var n in e)_N(t,n,{get:e[n],enumerable:!0})},KNe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of HNe(e))!qNe.call(t,a)&&a!==n&&_N(t,a,{get:()=>e[a],enumerable:!(r=GNe(e,a))||r.enumerable});return t},XNe=t=>KNe(_N({},"__esModule",{value:!0}),t),JB={};ZB(JB,{FluidValue:()=>f_e,Globals:()=>ez,addFluidObserver:()=>m_e,callFluidObserver:()=>$z,callFluidObservers:()=>h_e,clamp:()=>mz,colorToRgba:()=>UN,colors:()=>i_e,createInterpolator:()=>jN,createStringInterpolator:()=>w_e,defineHidden:()=>ZNe,deprecateDirectCall:()=>I_e,deprecateInterpolate:()=>S_e,each:()=>sz,eachProp:()=>e_e,easings:()=>c_e,flush:()=>lz,flushCalls:()=>n_e,frameLoop:()=>pz,getFluidObservers:()=>p_e,getFluidValue:()=>Rz,hasFluidValue:()=>d_e,hex3:()=>xz,hex4:()=>wz,hex6:()=>kz,hex8:()=>Sz,hsl:()=>bz,hsla:()=>vz,is:()=>ws,isAnimatedString:()=>E_e,isEqual:()=>JNe,isSSR:()=>Y2,noop:()=>oz,onResize:()=>Dz,onScroll:()=>P_e,once:()=>WN,prefix:()=>ow,raf:()=>Jt,removeFluidObserver:()=>g_e,rgb:()=>gz,rgba:()=>yz,setFluidGetter:()=>Oz,toArray:()=>t_e,useConstant:()=>D_e,useForceUpdate:()=>z_e,useIsomorphicLayoutEffect:()=>HN,useMemoOne:()=>U_e,useOnce:()=>W_e,usePrev:()=>H_e,useReducedMotion:()=>K_e});var YNe=XNe(JB),ez={};ZB(ez,{assign:()=>dz,colors:()=>$u,createStringInterpolator:()=>DN,skipAnimation:()=>cz,to:()=>uz,willAdvance:()=>LN});var RN=Zg(),Jt=t=>Qg(t,RN),$N=Zg();Jt.write=t=>Qg(t,$N);var X2=Zg();Jt.onStart=t=>Qg(t,X2);var ON=Zg();Jt.onFrame=t=>Qg(t,ON);var MN=Zg();Jt.onFinish=t=>Qg(t,MN);var sh=[];Jt.setTimeout=(t,e)=>{let n=Jt.now()+e,r=()=>{let i=sh.findIndex(o=>o.cancel==r);~i&&sh.splice(i,1),Ru-=~i?1:0},a={time:n,handler:t,cancel:r};return sh.splice(tz(n),0,a),Ru+=1,nz(),a};var tz=t=>~(~sh.findIndex(e=>e.time>t)||~sh.length);Jt.cancel=t=>{X2.delete(t),ON.delete(t),MN.delete(t),RN.delete(t),$N.delete(t)},Jt.sync=t=>{AN=!0,Jt.batchedUpdates(t),AN=!1},Jt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...a){e=a,Jt.onStart(n)}return r.handler=t,r.cancel=()=>{X2.delete(n),e=null},r};var PN=typeof window<"u"?window.requestAnimationFrame:()=>{};Jt.use=t=>PN=t,Jt.now=typeof performance<"u"?()=>performance.now():Date.now,Jt.batchedUpdates=t=>t(),Jt.catch=console.error,Jt.frameLoop="always",Jt.advance=()=>{Jt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):az()};var _u=-1,Ru=0,AN=!1;function Qg(t,e){AN?(e.delete(t),t(0)):(e.add(t),nz())}function nz(){_u<0&&(_u=0,Jt.frameLoop!=="demand"&&PN(rz))}function QNe(){_u=-1}function rz(){~_u&&(PN(rz),Jt.batchedUpdates(az))}function az(){let t=_u;_u=Jt.now();let e=tz(_u);if(e&&(iz(sh.splice(0,e),n=>n.handler()),Ru-=e),!Ru){QNe();return}X2.flush(),RN.flush(t?Math.min(64,_u-t):16.667),ON.flush(),$N.flush(),MN.flush()}function Zg(){let t=new Set,e=t;return{add(n){Ru+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ru-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ru-=e.size,iz(e,r=>r(n)&&t.add(r)),Ru+=t.size,e=t)}}}function iz(t,e){t.forEach(n=>{try{e(n)}catch(r){Jt.catch(r)}})}function oz(){}var ZNe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),ws={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function JNe(t,e){if(ws.arr(t)){if(!ws.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var sz=(t,e)=>t.forEach(e);function e_e(t,e,n){if(ws.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var t_e=t=>ws.und(t)?[]:ws.arr(t)?t:[t];function lz(t,e){if(t.size){let n=Array.from(t);t.clear(),sz(n,e)}}var n_e=(t,...e)=>lz(t,n=>n(...e)),Y2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),DN,uz,$u=null,cz=!1,LN=oz,dz=t=>{t.to&&(uz=t.to),t.now&&(Jt.now=t.now),t.colors!==void 0&&($u=t.colors),t.skipAnimation!=null&&(cz=t.skipAnimation),t.createStringInterpolator&&(DN=t.createStringInterpolator),t.requestAnimationFrame&&Jt.use(t.requestAnimationFrame),t.batchedUpdates&&(Jt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(LN=t.willAdvance),t.frameLoop&&(Jt.frameLoop=t.frameLoop)},Jg=new Set,fo=[],FN=[],Q2=0,pz={get idle(){return!Jg.size&&!fo.length},start(t){Q2>t.priority?(Jg.add(t),Jt.onStart(r_e)):(hz(t),Jt(BN))},advance:BN,sort(t){if(Q2)Jt.onFrame(()=>pz.sort(t));else{let e=fo.indexOf(t);~e&&(fo.splice(e,1),fz(t))}},clear(){fo=[],Jg.clear()}};function r_e(){Jg.forEach(hz),Jg.clear(),Jt(BN)}function hz(t){fo.includes(t)||fz(t)}function fz(t){fo.splice(a_e(fo,e=>e.priority>t.priority),0,t)}function BN(t){let e=FN;for(let n=0;n<fo.length;n++){let r=fo[n];Q2=r.priority,r.idle||(LN(r),r.advance(t),r.idle||e.push(r))}return Q2=0,FN=fo,FN.length=0,fo=e,fo.length>0}function a_e(t,e){let n=t.findIndex(e);return n<0?t.length:n}var mz=(t,e,n)=>Math.min(Math.max(n,t),e),i_e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Wo="[-+]?\\d*\\.?\\d+",Z2=Wo+"%";function J2(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var gz=new RegExp("rgb"+J2(Wo,Wo,Wo)),yz=new RegExp("rgba"+J2(Wo,Wo,Wo,Wo)),bz=new RegExp("hsl"+J2(Wo,Z2,Z2)),vz=new RegExp("hsla"+J2(Wo,Z2,Z2,Wo)),xz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,kz=/^#([0-9a-fA-F]{6})$/,Sz=/^#([0-9a-fA-F]{8})$/;function o_e(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=kz.exec(t))?parseInt(e[1]+"ff",16)>>>0:$u&&$u[t]!==void 0?$u[t]:(e=gz.exec(t))?(lh(e[1])<<24|lh(e[2])<<16|lh(e[3])<<8|255)>>>0:(e=yz.exec(t))?(lh(e[1])<<24|lh(e[2])<<16|lh(e[3])<<8|Ez(e[4]))>>>0:(e=xz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Sz.exec(t))?parseInt(e[1],16)>>>0:(e=wz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=bz.exec(t))?(Cz(Iz(e[1]),ew(e[2]),ew(e[3]))|255)>>>0:(e=vz.exec(t))?(Cz(Iz(e[1]),ew(e[2]),ew(e[3]))|Ez(e[4]))>>>0:null}function zN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Cz(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,i=zN(a,r,t+1/3),o=zN(a,r,t),s=zN(a,r,t-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function lh(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function Iz(t){return(parseFloat(t)%360+360)%360/360}function Ez(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ew(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function UN(t){let e=o_e(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,a=(e&65280)>>>8,i=(e&255)/255;return`rgba(${n}, ${r}, ${a}, ${i})`}var jN=(t,e,n)=>{if(ws.fun(t))return t;if(ws.arr(t))return jN({range:t,output:e,extrapolate:n});if(ws.str(t.output[0]))return DN(t);let r=t,a=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{let c=l_e(u,i);return s_e(u,i[c],i[c+1],a[c],a[c+1],l,o,s,r.map)}};function s_e(t,e,n,r,a,i,o,s,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(s==="identity")return u;s==="clamp"&&(u=n)}return r===a?r:e===n?t<=e?r:a:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=i(u),r===-1/0?u=-u:a===1/0?u=u+r:u=u*(a-r)+r,u)}function l_e(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var u_e=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,a=e==="end"?Math.floor(r):Math.ceil(r);return mz(0,1,a/t)},tw=1.70158,nw=tw*1.525,Tz=tw+1,Nz=2*Math.PI/3,_z=2*Math.PI/4.5,rw=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,c_e={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Tz*t*t*t-tw*t*t,easeOutBack:t=>1+Tz*Math.pow(t-1,3)+tw*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((nw+1)*2*t-nw)/2:(Math.pow(2*t-2,2)*((nw+1)*(t*2-2)+nw)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Nz),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Nz)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*_z))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*_z)/2+1,easeInBounce:t=>1-rw(1-t),easeOutBounce:rw,easeInOutBounce:t=>t<.5?(1-rw(1-2*t))/2:(1+rw(2*t-1))/2,steps:u_e},e0=Symbol.for("FluidValue.get"),uh=Symbol.for("FluidValue.observers"),d_e=t=>!!(t&&t[e0]),Rz=t=>t&&t[e0]?t[e0]():t,p_e=t=>t[uh]||null;function $z(t,e){t.eventObserved?t.eventObserved(e):t(e)}function h_e(t,e){let n=t[uh];n&&n.forEach(r=>{$z(r,e)})}var f_e=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Oz(this,t)}},Oz=(t,e)=>Mz(t,e0,e);function m_e(t,e){if(t[e0]){let n=t[uh];n||Mz(t,uh,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function g_e(t,e){let n=t[uh];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[uh]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Mz=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),aw=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y_e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Pz=new RegExp(`(${aw.source})(%|[a-z]+)`,"i"),b_e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,iw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Az=t=>{let[e,n]=v_e(t);if(!e||Y2())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&iw.test(n)?Az(n):n||t},v_e=t=>{let e=iw.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},VN,x_e=(t,e,n,r,a)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`,w_e=t=>{VN||(VN=$u?new RegExp(`(${Object.keys($u).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(a=>Rz(a).replace(iw,Az).replace(y_e,UN).replace(VN,UN)),n=e.map(a=>a.match(aw).map(Number)),r=n[0].map((a,i)=>n.map(o=>{if(!(i in o))throw Error('The arity of each "output" value must be equal');return o[i]})).map(a=>jN({...t,output:a}));return a=>{var i;let o=!Pz.test(e[0])&&((i=e.find(l=>Pz.test(l)))==null?void 0:i.replace(aw,"")),s=0;return e[0].replace(aw,()=>`${r[s++](a)}${o||""}`).replace(b_e,x_e)}},ow="react-spring: ",WN=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${ow}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},k_e=WN(console.warn);function S_e(){k_e(`${ow}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var C_e=WN(console.warn);function I_e(){C_e(`${ow}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function E_e(t){return ws.str(t)&&(t[0]=="#"||/\d/.test(t)||!Y2()&&iw.test(t)||t in($u||{}))}var ch,sw=new WeakMap,T_e=t=>t.forEach(({target:e,contentRect:n})=>{var r;return(r=sw.get(e))==null?void 0:r.forEach(a=>a(n))});function N_e(t,e){ch||typeof ResizeObserver<"u"&&(ch=new ResizeObserver(T_e));let n=sw.get(e);return n||(n=new Set,sw.set(e,n)),n.add(t),ch&&ch.observe(e),()=>{let r=sw.get(e);r&&(r.delete(t),!r.size&&ch&&ch.unobserve(e))}}var lw=new Set,t0,__e=()=>{let t=()=>{lw.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},R_e=t=>(lw.add(t),t0||(t0=__e()),()=>{lw.delete(t),!lw.size&&t0&&(t0(),t0=void 0)}),Dz=(t,{container:e=document.documentElement}={})=>e===document.documentElement?R_e(t):N_e(t,e),$_e=(t,e,n)=>e-t===0?1:(n-t)/(e-t),O_e={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},M_e=class{constructor(t,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=n=>{let r=this.info[n],{length:a,position:i}=O_e[n];r.current=this.container[`scroll${i}`],r.scrollLength=this.container["scroll"+a]-this.container["client"+a],r.progress=$_e(0,r.scrollLength,r.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},n0=new WeakMap,Lz=new WeakMap,GN=new WeakMap,Fz=t=>t===document.documentElement?window:t,P_e=(t,{container:e=document.documentElement}={})=>{let n=GN.get(e);n||(n=new Set,GN.set(e,n));let r=new M_e(t,e);if(n.add(r),!n0.has(e)){let i=()=>(n?.forEach(s=>s.advance()),!0);n0.set(e,i);let o=Fz(e);window.addEventListener("resize",i,{passive:!0}),e!==document.documentElement&&Lz.set(e,Dz(i,{container:e})),o.addEventListener("scroll",i,{passive:!0})}let a=n0.get(e);return Jt(a),()=>{var i;Jt.cancel(a);let o=GN.get(e);if(!o||(o.delete(r),o.size))return;let s=n0.get(e);n0.delete(e),s&&(Fz(e).removeEventListener("scroll",s),window.removeEventListener("resize",s),(i=Lz.get(e))==null||i())}},A_e=$;function D_e(t){let e=(0,A_e.useRef)(null);return e.current===null&&(e.current=t()),e.current}var L_e=$,F_e=$,Bz=$,HN=Y2()?Bz.useEffect:Bz.useLayoutEffect,B_e=()=>{let t=(0,F_e.useRef)(!1);return HN(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function z_e(){let t=(0,L_e.useState)()[1],e=B_e();return()=>{e.current&&t(Math.random())}}var qN=$;function U_e(t,e){let[n]=(0,qN.useState)(()=>({inputs:e,result:t()})),r=(0,qN.useRef)(),a=r.current,i=a;return i?e&&i.inputs&&j_e(e,i.inputs)||(i={inputs:e,result:t()}):i=n,(0,qN.useEffect)(()=>{r.current=i,a==n&&(n.inputs=n.result=void 0)},[i]),i.result}function j_e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var V_e=$,W_e=t=>(0,V_e.useEffect)(t,G_e),G_e=[],zz=$;function H_e(t){let e=(0,zz.useRef)();return(0,zz.useEffect)(()=>{e.current=t}),e.current}var q_e=$,K_e=()=>{let[t,e]=(0,q_e.useState)(null);return HN(()=>{let n=window.matchMedia("(prefers-reduced-motion)"),r=a=>{e(a.matches),dz({skipAnimation:a.matches})};return r(n),n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),t};QB.exports=YNe;var en=QB.exports,Uz={exports:{}},X_e=Object.create,uw=Object.defineProperty,Y_e=Object.getOwnPropertyDescriptor,Q_e=Object.getOwnPropertyNames,Z_e=Object.getPrototypeOf,J_e=Object.prototype.hasOwnProperty,e5e=(t,e)=>{for(var n in e)uw(t,n,{get:e[n],enumerable:!0})},jz=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Q_e(e))!J_e.call(t,a)&&a!==n&&uw(t,a,{get:()=>e[a],enumerable:!(r=Y_e(e,a))||r.enumerable});return t},t5e=(t,e,n)=>(n=t!=null?X_e(Z_e(t)):{},jz(e||!t||!t.__esModule?uw(n,"default",{value:t,enumerable:!0}):n,t)),n5e=t=>jz(uw({},"__esModule",{value:!0}),t),Vz={};e5e(Vz,{Animated:()=>KN,AnimatedArray:()=>QN,AnimatedObject:()=>pw,AnimatedString:()=>cw,AnimatedValue:()=>a0,createHost:()=>p5e,getAnimated:()=>Gz,getAnimatedType:()=>s5e,getPayload:()=>qz,isAnimated:()=>Wz,setAnimated:()=>Hz});var r5e=n5e(Vz),a5e=en,r0=Symbol.for("Animated:node"),Wz=t=>!!t&&t[r0]===t,Gz=t=>t&&t[r0],Hz=(t,e)=>(0,a5e.defineHidden)(t,r0,e),qz=t=>t&&t[r0]&&t[r0].getPayload(),KN=class{constructor(){Hz(this,this)}getPayload(){return this.payload||[]}},XN=en,a0=class extends KN{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,XN.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new a0(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return XN.is.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){let{done:t}=this;this.done=!1,XN.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},YN=en,cw=class extends a0{constructor(t){super(0),this._string=null,this._toString=(0,YN.createInterpolator)({output:[t,t]})}static create(t){return new cw(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(YN.is.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=(0,YN.createInterpolator)({output:[this.getValue(),t]})),this._value=0,super.reset()}},i5e=en,rd=en,dw={dependencies:null},pw=class extends KN{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){let e={};return(0,rd.eachProp)(this.source,(n,r)=>{Wz(n)?e[r]=n.getValue(t):(0,rd.hasFluidValue)(n)?e[r]=(0,rd.getFluidValue)(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&(0,rd.each)(this.payload,t=>t.reset())}_makePayload(t){if(t){let e=new Set;return(0,rd.eachProp)(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){dw.dependencies&&(0,rd.hasFluidValue)(t)&&dw.dependencies.add(t);let e=qz(t);e&&(0,rd.each)(e,n=>this.add(n))}},QN=class extends pw{constructor(t){super(t)}static create(t){return new QN(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){let e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(o5e)),!0)}};function o5e(t){return((0,i5e.isAnimatedString)(t)?cw:a0).create(t)}var Kz=en;function s5e(t){let e=Gz(t);return e?e.constructor:Kz.is.arr(t)?QN:(0,Kz.isAnimatedString)(t)?cw:a0}var dh=en,l5e=t5e($),i0=$,Pi=en,Xz=(t,e)=>{let n=!Pi.is.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,i0.forwardRef)((r,a)=>{let i=(0,i0.useRef)(null),o=n&&(0,i0.useCallback)(g=>{i.current=d5e(a,g)},[a]),[s,l]=c5e(r,e),u=(0,Pi.useForceUpdate)(),c=()=>{let g=i.current;n&&!g||(g?e.applyAnimatedValues(g,s.getValue(!0)):!1)===!1&&u()},d=new u5e(c,l),p=(0,i0.useRef)();(0,Pi.useIsomorphicLayoutEffect)(()=>(p.current=d,(0,Pi.each)(l,g=>(0,Pi.addFluidObserver)(g,d)),()=>{p.current&&((0,Pi.each)(p.current.deps,g=>(0,Pi.removeFluidObserver)(g,p.current)),Pi.raf.cancel(p.current.update))})),(0,i0.useEffect)(c,[]),(0,Pi.useOnce)(()=>()=>{let g=p.current;(0,Pi.each)(g.deps,y=>(0,Pi.removeFluidObserver)(y,g))});let f=e.getComponentProps(s.getValue());return l5e.createElement(t,{...f,ref:o})})},u5e=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Pi.raf.write(this.update)}};function c5e(t,e){let n=new Set;return dw.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new pw(t),dw.dependencies=null,[t,n]}function d5e(t,e){return t&&(Pi.is.fun(t)?t(e):t.current=e),e}var Yz=Symbol.for("AnimatedComponent"),p5e=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=a=>new pw(a),getComponentProps:r=a=>a}={})=>{let a={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},i=o=>{let s=Qz(o)||"Anonymous";return dh.is.str(o)?o=i[o]||(i[o]=Xz(o,a)):o=o[Yz]||(o[Yz]=Xz(o,a)),o.displayName=`Animated(${s})`,o};return(0,dh.eachProp)(t,(o,s)=>{dh.is.arr(t)&&(s=Qz(o)),i[s]=i(o)}),{animated:i}},Qz=t=>dh.is.str(t)?t:t&&dh.is.str(t.displayName)?t.displayName:dh.is.fun(t)&&t.name||null;Uz.exports=r5e;var o0=Uz.exports,Zz={exports:{}},ZN,Jz;function h5e(){if(Jz)return ZN;Jz=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,a=(u,c)=>{for(var d in c)t(u,d,{get:c[d],enumerable:!0})},i=(u,c,d,p)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of n(c))!r.call(u,f)&&f!==d&&t(u,f,{get:()=>c[f],enumerable:!(p=e(c,f))||p.enumerable});return u},o=u=>i(t({},"__esModule",{value:!0}),u),s={};a(s,{Any:()=>l}),ZN=o(s);var l=class{};return ZN}var eU;function f5e(){return eU||(eU=1,Zz.exports=h5e()),Zz.exports}(function(t){var e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(D,V)=>{for(var J in V)n(D,J,{get:V[J],enumerable:!0})},l=(D,V,J,re)=>{if(V&&typeof V=="object"||typeof V=="function")for(let ve of a(V))!o.call(D,ve)&&ve!==J&&n(D,ve,{get:()=>V[ve],enumerable:!(re=r(V,ve))||re.enumerable});return D},u=(D,V,J)=>(l(D,V,"default"),J&&l(J,V,"default")),c=(D,V,J)=>(J=D!=null?e(i(D)):{},l(V||!D||!D.__esModule?n(J,"default",{value:D,enumerable:!0}):J,D)),d=D=>l(n({},"__esModule",{value:!0}),D),p={};s(p,{BailSignal:()=>Je,Controller:()=>ke,FrameValue:()=>Qt,Globals:()=>Es.Globals,Interpolation:()=>Bu,Spring:()=>Is,SpringContext:()=>fn,SpringRef:()=>Ho,SpringValue:()=>hn,Trail:()=>ba,Transition:()=>ud,config:()=>ne,createInterpolator:()=>Ts.createInterpolator,easings:()=>Ts.easings,inferTo:()=>N,interpolate:()=>cd,to:()=>Iw,update:()=>zu,useChain:()=>K,useInView:()=>ya,useIsomorphicLayoutEffect:()=>Ts.useIsomorphicLayoutEffect,useReducedMotion:()=>Ts.useReducedMotion,useResize:()=>wn,useScroll:()=>kl,useSpring:()=>ga,useSpringRef:()=>Lu,useSpringValue:()=>qo,useSprings:()=>Di,useTrail:()=>tn,useTransition:()=>wl}),t.exports=d(p);var f=en,g=en;function y(D,...V){return g.is.fun(D)?D(...V):D}var v=(D,V)=>D===!0||!!(V&&D&&(g.is.fun(D)?D(V):(0,g.toArray)(D).includes(V))),b=(D,V)=>g.is.obj(D)?V&&D[V]:D,x=(D,V)=>D.default===!0?D[V]:D.default?D.default[V]:void 0,w=D=>D,S=(D,V=w)=>{let J=C;D.default&&D.default!==!0&&(D=D.default,J=Object.keys(D));let re={};for(let ve of J){let Ce=V(D[ve],ve);g.is.und(Ce)||(re[ve]=Ce)}return re},C=["config","onProps","onStart","onChange","onPause","onResume","onRest"],E={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function _(D){let V={},J=0;if((0,g.eachProp)(D,(re,ve)=>{E[ve]||(V[ve]=re,J++)}),J)return V}function N(D){let V=_(D);if(V){let J={to:V};return(0,g.eachProp)(D,(re,ve)=>ve in V||(J[ve]=re)),J}return{...D}}function M(D){return D=(0,g.getFluidValue)(D),g.is.arr(D)?D.map(M):(0,g.isAnimatedString)(D)?g.Globals.createStringInterpolator({range:[0,1],output:[D,D]})(1):D}function P(D){for(let V in D)return!0;return!1}function L(D){return g.is.fun(D)||g.is.arr(D)&&g.is.obj(D[0])}function U(D,V){var J;(J=D.ref)==null||J.delete(D),V?.delete(D)}function B(D,V){var J;V&&D.ref!==V&&((J=D.ref)==null||J.delete(D),V.add(D),D.ref=V)}function K(D,V,J=1e3){(0,f.useIsomorphicLayoutEffect)(()=>{if(V){let re=0;(0,f.each)(D,(ve,Ce)=>{let Ae=ve.current;if(Ae.length){let $e=J*V[Ce];isNaN($e)?$e=re:re=$e,(0,f.each)(Ae,Ne=>{(0,f.each)(Ne.queue,Ue=>{let mt=Ue.delay;Ue.delay=rt=>$e+y(mt||0,rt)})}),ve.start()}})}else{let re=Promise.resolve();(0,f.each)(D,ve=>{let Ce=ve.current;if(Ce.length){let Ae=Ce.map($e=>{let Ne=$e.queue;return $e.queue=[],Ne});re=re.then(()=>((0,f.each)(Ce,($e,Ne)=>(0,f.each)(Ae[Ne]||[],Ue=>$e.queue.push(Ue))),Promise.all(ve.start())))}})}})}var X=en,Z=$,H=en,F=en,Y=o0,Q=en,ne={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},se={...ne.default,mass:1,damping:1,easing:Q.easings.linear,clamp:!1},pe=class{constructor(){this.velocity=0,Object.assign(this,se)}};function de(D,V,J){J&&(J={...J},ie(J,V),V={...J,...V}),ie(D,V),Object.assign(D,V);for(let Ae in se)D[Ae]==null&&(D[Ae]=se[Ae]);let{frequency:re,damping:ve}=D,{mass:Ce}=D;return Q.is.und(re)||(re<.01&&(re=.01),ve<0&&(ve=0),D.tension=Math.pow(2*Math.PI/re,2)*Ce,D.friction=4*Math.PI*ve*Ce/re),D}function ie(D,V){if(!Q.is.und(V.decay))D.duration=void 0;else{let J=!Q.is.und(V.tension)||!Q.is.und(V.friction);(J||!Q.is.und(V.frequency)||!Q.is.und(V.damping)||!Q.is.und(V.mass))&&(D.duration=void 0,D.decay=void 0),J&&(D.frequency=void 0)}}var xe=[],q=class{constructor(){this.changed=!1,this.values=xe,this.toValues=null,this.fromValues=xe,this.config=new pe,this.immediate=!1}},oe=en;function he(D,{key:V,props:J,defaultProps:re,state:ve,actions:Ce}){return new Promise((Ae,$e)=>{let Ne,Ue,mt=v(J.cancel??re?.cancel,V);if(mt)xt();else{oe.is.und(J.pause)||(ve.paused=v(J.pause,V));let Ke=re?.pause;Ke!==!0&&(Ke=ve.paused||v(Ke,V)),Ne=y(J.delay||0,V),Ke?(ve.resumeQueue.add(Rt),Ce.pause()):(Ce.resume(),Rt())}function rt(){ve.resumeQueue.add(Rt),ve.timeouts.delete(Ue),Ue.cancel(),Ne=Ue.time-oe.raf.now()}function Rt(){Ne>0&&!oe.Globals.skipAnimation?(ve.delayed=!0,Ue=oe.raf.setTimeout(xt,Ne),ve.pauseQueue.add(rt),ve.timeouts.add(Ue)):xt()}function xt(){ve.delayed&&(ve.delayed=!1),ve.pauseQueue.delete(rt),ve.timeouts.delete(Ue),D<=(ve.cancelId||0)&&(mt=!0);try{Ce.start({...J,callId:D,cancel:mt},Ae)}catch(Ke){$e(Ke)}}})}var Ie=en,Ee=(D,V)=>V.length==1?V[0]:V.some(J=>J.cancelled)?Xe(D.get()):V.every(J=>J.noop)?_e(D.get()):Fe(D.get(),V.every(J=>J.finished)),_e=D=>({value:D,noop:!0,finished:!0,cancelled:!1}),Fe=(D,V,J=!1)=>({value:D,finished:V,cancelled:J}),Xe=D=>({value:D,cancelled:!0,finished:!1});function Oe(D,V,J,re){let{callId:ve,parentId:Ce,onRest:Ae}=V,{asyncTo:$e,promise:Ne}=J;return!Ce&&D===$e&&!V.reset?Ne:J.promise=(async()=>{J.asyncId=ve,J.asyncTo=D;let Ue=S(V,(pt,at)=>at==="onRest"?void 0:pt),mt,rt,Rt=new Promise((pt,at)=>(mt=pt,rt=at)),xt=pt=>{let at=ve<=(J.cancelId||0)&&Xe(re)||ve!==J.asyncId&&Fe(re,!1);if(at)throw pt.result=at,rt(pt),pt},Ke=(pt,at)=>{let wt=new Je,st=new nt;return(async()=>{if(Ie.Globals.skipAnimation)throw lt(J),st.result=Fe(re,!1),rt(st),st;xt(wt);let bt=Ie.is.obj(pt)?{...pt}:{...at,to:pt};bt.parentId=ve,(0,Ie.eachProp)(Ue,(Ja,Vt)=>{Ie.is.und(bt[Vt])&&(bt[Vt]=Ja)});let ar=await re.start(bt);return xt(wt),J.paused&&await new Promise(Ja=>{J.resumeQueue.add(Ja)}),ar})()},ct;if(Ie.Globals.skipAnimation)return lt(J),Fe(re,!1);try{let pt;Ie.is.arr(D)?pt=(async at=>{for(let wt of at)await Ke(wt)})(D):pt=Promise.resolve(D(Ke,re.stop.bind(re))),await Promise.all([pt.then(mt),Rt]),ct=Fe(re.get(),!0,!1)}catch(pt){if(pt instanceof Je)ct=pt.result;else if(pt instanceof nt)ct=pt.result;else throw pt}finally{ve==J.asyncId&&(J.asyncId=Ce,J.asyncTo=Ce?$e:void 0,J.promise=Ce?Ne:void 0)}return Ie.is.fun(Ae)&&Ie.raf.batchedUpdates(()=>{Ae(ct,re,re.item)}),ct})()}function lt(D,V){(0,Ie.flush)(D.timeouts,J=>J.cancel()),D.pauseQueue.clear(),D.resumeQueue.clear(),D.asyncId=D.asyncTo=D.promise=void 0,V&&(D.cancelId=V)}var Je=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},nt=class extends Error{constructor(){super("SkipAnimationSignal")}},et=en,on=o0,Ut=D=>D instanceof Qt,Yt=1,Qt=class extends et.FluidValue{constructor(){super(...arguments),this.id=Yt++,this._priority=0}get priority(){return this._priority}set priority(D){this._priority!=D&&(this._priority=D,this._onPriorityChange(D))}get(){let D=(0,on.getAnimated)(this);return D&&D.getValue()}to(...D){return et.Globals.to(this,D)}interpolate(...D){return(0,et.deprecateInterpolate)(),et.Globals.to(this,D)}toJSON(){return this.get()}observerAdded(D){D==1&&this._attach()}observerRemoved(D){D==0&&this._detach()}_attach(){}_detach(){}_onChange(D,V=!1){(0,et.callFluidObservers)(this,{type:"change",parent:this,value:D,idle:V})}_onPriorityChange(D){this.idle||et.frameLoop.sort(this),(0,et.callFluidObservers)(this,{type:"priority",parent:this,priority:D})}},$t=Symbol.for("SpringPhase"),Ct=1,zn=2,Xn=4,za=D=>(D[$t]&Ct)>0,_n=D=>(D[$t]&zn)>0,Qa=D=>(D[$t]&Xn)>0,mo=(D,V)=>V?D[$t]|=zn|Ct:D[$t]&=~zn,bi=(D,V)=>V?D[$t]|=Xn:D[$t]&=~Xn,hn=class extends Qt{constructor(D,V){if(super(),this.animation=new q,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!F.is.und(D)||!F.is.und(V)){let J=F.is.obj(D)?{...D}:{...V,from:D};F.is.und(J.default)&&(J.default=!0),this.start(J)}}get idle(){return!(_n(this)||this._state.asyncTo)||Qa(this)}get goal(){return(0,F.getFluidValue)(this.animation.to)}get velocity(){let D=(0,Y.getAnimated)(this);return D instanceof Y.AnimatedValue?D.lastVelocity||0:D.getPayload().map(V=>V.lastVelocity||0)}get hasAnimated(){return za(this)}get isAnimating(){return _n(this)}get isPaused(){return Qa(this)}get isDelayed(){return this._state.delayed}advance(D){let V=!0,J=!1,re=this.animation,{toValues:ve}=re,{config:Ce}=re,Ae=(0,Y.getPayload)(re.to);!Ae&&(0,F.hasFluidValue)(re.to)&&(ve=(0,F.toArray)((0,F.getFluidValue)(re.to))),re.values.forEach((Ue,mt)=>{if(Ue.done)return;let rt=Ue.constructor==Y.AnimatedString?1:Ae?Ae[mt].lastPosition:ve[mt],Rt=re.immediate,xt=rt;if(!Rt){if(xt=Ue.lastPosition,Ce.tension<=0){Ue.done=!0;return}let Ke=Ue.elapsedTime+=D,ct=re.fromValues[mt],pt=Ue.v0!=null?Ue.v0:Ue.v0=F.is.arr(Ce.velocity)?Ce.velocity[mt]:Ce.velocity,at,wt=Ce.precision||(ct==rt?.005:Math.min(1,Math.abs(rt-ct)*.001));if(F.is.und(Ce.duration))if(Ce.decay){let st=Ce.decay===!0?.998:Ce.decay,bt=Math.exp(-(1-st)*Ke);xt=ct+pt/(1-st)*(1-bt),Rt=Math.abs(Ue.lastPosition-xt)<=wt,at=pt*bt}else{at=Ue.lastVelocity==null?pt:Ue.lastVelocity;let st=Ce.restVelocity||wt/10,bt=Ce.clamp?0:Ce.bounce,ar=!F.is.und(bt),Ja=ct==rt?Ue.v0>0:ct<rt,Vt,jn=!1,An=1,va=Math.ceil(D/An);for(let Ua=0;Ua<va&&(Vt=Math.abs(at)>st,!(!Vt&&(Rt=Math.abs(rt-xt)<=wt,Rt)));++Ua){ar&&(jn=xt==rt||xt>rt==Ja,jn&&(at=-at*bt,xt=rt));let bo=-Ce.tension*1e-6*(xt-rt),wr=-Ce.friction*.001*at,ht=(bo+wr)/Ce.mass;at=at+ht*An,xt=xt+at*An}}else{let st=1;Ce.duration>0&&(this._memoizedDuration!==Ce.duration&&(this._memoizedDuration=Ce.duration,Ue.durationProgress>0&&(Ue.elapsedTime=Ce.duration*Ue.durationProgress,Ke=Ue.elapsedTime+=D)),st=(Ce.progress||0)+Ke/this._memoizedDuration,st=st>1?1:st<0?0:st,Ue.durationProgress=st),xt=ct+Ce.easing(st)*(rt-ct),at=(xt-Ue.lastPosition)/D,Rt=st==1}Ue.lastVelocity=at,Number.isNaN(xt)&&(console.warn("Got NaN while animating:",this),Rt=!0)}Ae&&!Ae[mt].done&&(Rt=!1),Rt?Ue.done=!0:V=!1,Ue.setValue(xt,Ce.round)&&(J=!0)});let $e=(0,Y.getAnimated)(this),Ne=$e.getValue();if(V){let Ue=(0,F.getFluidValue)(re.to);(Ne!==Ue||J)&&!Ce.decay?($e.setValue(Ue),this._onChange(Ue)):J&&Ce.decay&&this._onChange(Ne),this._stop()}else J&&this._onChange(Ne)}set(D){return F.raf.batchedUpdates(()=>{this._stop(),this._focus(D),this._set(D)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(_n(this)){let{to:D,config:V}=this.animation;F.raf.batchedUpdates(()=>{this._onStart(),V.decay||this._set(D,!1),this._stop()})}return this}update(D){return(this.queue||(this.queue=[])).push(D),this}start(D,V){let J;return F.is.und(D)?(J=this.queue||[],this.queue=[]):J=[F.is.obj(D)?D:{...V,to:D}],Promise.all(J.map(re=>this._update(re))).then(re=>Ee(this,re))}stop(D){let{to:V}=this.animation;return this._focus(this.get()),lt(this._state,D&&this._lastCallId),F.raf.batchedUpdates(()=>this._stop(V,D)),this}reset(){this._update({reset:!0})}eventObserved(D){D.type=="change"?this._start():D.type=="priority"&&(this.priority=D.priority+1)}_prepareNode(D){let V=this.key||"",{to:J,from:re}=D;J=F.is.obj(J)?J[V]:J,(J==null||L(J))&&(J=void 0),re=F.is.obj(re)?re[V]:re,re==null&&(re=void 0);let ve={to:J,from:re};return za(this)||(D.reverse&&([J,re]=[re,J]),re=(0,F.getFluidValue)(re),F.is.und(re)?(0,Y.getAnimated)(this)||this._set(J):this._set(re)),ve}_update({...D},V){let{key:J,defaultProps:re}=this;D.default&&Object.assign(re,S(D,(Ae,$e)=>/^on/.test($e)?b(Ae,J):Ae)),ld(this,D,"onProps"),Go(this,"onProps",D,this);let ve=this._prepareNode(D);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ce=this._state;return he(++this._lastCallId,{key:J,props:D,defaultProps:re,state:Ce,actions:{pause:()=>{Qa(this)||(bi(this,!0),(0,F.flushCalls)(Ce.pauseQueue),Go(this,"onPause",Fe(this,Za(this,this.animation.to)),this))},resume:()=>{Qa(this)&&(bi(this,!1),_n(this)&&this._resume(),(0,F.flushCalls)(Ce.resumeQueue),Go(this,"onResume",Fe(this,Za(this,this.animation.to)),this))},start:this._merge.bind(this,ve)}}).then(Ae=>{if(D.loop&&Ae.finished&&!(V&&Ae.noop)){let $e=vi(D);if($e)return this._update($e,!0)}return Ae})}_merge(D,V,J){if(V.cancel)return this.stop(!0),J(Xe(this));let re=!F.is.und(D.to),ve=!F.is.und(D.from);if(re||ve)if(V.callId>this._lastToId)this._lastToId=V.callId;else return J(Xe(this));let{key:Ce,defaultProps:Ae,animation:$e}=this,{to:Ne,from:Ue}=$e,{to:mt=Ne,from:rt=Ue}=D;ve&&!re&&(!V.default||F.is.und(mt))&&(mt=rt),V.reverse&&([mt,rt]=[rt,mt]);let Rt=!(0,F.isEqual)(rt,Ue);Rt&&($e.from=rt),rt=(0,F.getFluidValue)(rt);let xt=!(0,F.isEqual)(mt,Ne);xt&&this._focus(mt);let Ke=L(V.to),{config:ct}=$e,{decay:pt,velocity:at}=ct;(re||ve)&&(ct.velocity=0),V.config&&!Ke&&de(ct,y(V.config,Ce),V.config!==Ae.config?y(Ae.config,Ce):void 0);let wt=(0,Y.getAnimated)(this);if(!wt||F.is.und(mt))return J(Fe(this,!0));let st=F.is.und(V.reset)?ve&&!V.default:!F.is.und(rt)&&v(V.reset,Ce),bt=st?rt:this.get(),ar=M(mt),Ja=F.is.num(ar)||F.is.arr(ar)||(0,F.isAnimatedString)(ar),Vt=!Ke&&(!Ja||v(Ae.immediate||V.immediate,Ce));if(xt){let Ua=(0,Y.getAnimatedType)(mt);if(Ua!==wt.constructor)if(Vt)wt=this._set(ar);else throw Error(`Cannot animate between ${wt.constructor.name} and ${Ua.name}, as the "to" prop suggests`)}let jn=wt.constructor,An=(0,F.hasFluidValue)(mt),va=!1;if(!An){let Ua=st||!za(this)&&Rt;(xt||Ua)&&(va=(0,F.isEqual)(M(bt),ar),An=!va),(!(0,F.isEqual)($e.immediate,Vt)&&!Vt||!(0,F.isEqual)(ct.decay,pt)||!(0,F.isEqual)(ct.velocity,at))&&(An=!0)}if(va&&_n(this)&&($e.changed&&!st?An=!0:An||this._stop(Ne)),!Ke&&((An||(0,F.hasFluidValue)(Ne))&&($e.values=wt.getPayload(),$e.toValues=(0,F.hasFluidValue)(mt)?null:jn==Y.AnimatedString?[1]:(0,F.toArray)(ar)),$e.immediate!=Vt&&($e.immediate=Vt,!Vt&&!st&&this._set(Ne)),An)){let{onRest:Ua}=$e;(0,F.each)(vl,wr=>ld(this,V,wr));let bo=Fe(this,Za(this,Ne));(0,F.flushCalls)(this._pendingCalls,bo),this._pendingCalls.add(J),$e.changed&&F.raf.batchedUpdates(()=>{var wr;$e.changed=!st,Ua?.(bo,this),st?y(Ae.onRest,bo):(wr=$e.onStart)==null||wr.call($e,bo,this)})}st&&this._set(bt),Ke?J(Oe(V.to,V,this._state,this)):An?this._start():_n(this)&&!xt?this._pendingCalls.add(J):J(_e(bt))}_focus(D){let V=this.animation;D!==V.to&&((0,F.getFluidObservers)(this)&&this._detach(),V.to=D,(0,F.getFluidObservers)(this)&&this._attach())}_attach(){let D=0,{to:V}=this.animation;(0,F.hasFluidValue)(V)&&((0,F.addFluidObserver)(V,this),Ut(V)&&(D=V.priority+1)),this.priority=D}_detach(){let{to:D}=this.animation;(0,F.hasFluidValue)(D)&&(0,F.removeFluidObserver)(D,this)}_set(D,V=!0){let J=(0,F.getFluidValue)(D);if(!F.is.und(J)){let re=(0,Y.getAnimated)(this);if(!re||!(0,F.isEqual)(J,re.getValue())){let ve=(0,Y.getAnimatedType)(J);!re||re.constructor!=ve?(0,Y.setAnimated)(this,ve.create(J)):re.setValue(J),re&&F.raf.batchedUpdates(()=>{this._onChange(J,V)})}}return(0,Y.getAnimated)(this)}_onStart(){let D=this.animation;D.changed||(D.changed=!0,Go(this,"onStart",Fe(this,Za(this,D.to)),this))}_onChange(D,V){V||(this._onStart(),y(this.animation.onChange,D,this)),y(this.defaultProps.onChange,D,this),super._onChange(D,V)}_start(){let D=this.animation;(0,Y.getAnimated)(this).reset((0,F.getFluidValue)(D.to)),D.immediate||(D.fromValues=D.values.map(V=>V.lastPosition)),_n(this)||(mo(this,!0),Qa(this)||this._resume())}_resume(){F.Globals.skipAnimation?this.finish():F.frameLoop.start(this)}_stop(D,V){if(_n(this)){mo(this,!1);let J=this.animation;(0,F.each)(J.values,ve=>{ve.done=!0}),J.toValues&&(J.onChange=J.onPause=J.onResume=void 0),(0,F.callFluidObservers)(this,{type:"idle",parent:this});let re=V?Xe(this.get()):Fe(this.get(),Za(this,D??J.to));(0,F.flushCalls)(this._pendingCalls,re),J.changed&&(J.changed=!1,Go(this,"onRest",re,this))}}};function Za(D,V){let J=M(V),re=M(D.get());return(0,F.isEqual)(re,J)}function vi(D,V=D.loop,J=D.to){let re=y(V);if(re){let ve=re!==!0&&N(re),Ce=(ve||D).reverse,Ae=!ve||ve.reset;return xi({...D,loop:V,default:!1,pause:void 0,to:!Ce||L(J)?J:void 0,from:Ae?D.from:void 0,reset:Ae,...ve})}}function xi(D){let{to:V,from:J}=D=N(D),re=new Set;return F.is.obj(V)&&ma(V,re),F.is.obj(J)&&ma(J,re),D.keys=re.size?Array.from(re):null,D}function Cs(D){let V=xi(D);return F.is.und(V.default)&&(V.default=S(V)),V}function ma(D,V){(0,F.eachProp)(D,(J,re)=>J!=null&&V.add(re))}var vl=["onStart","onRest","onChange","onPause","onResume"];function ld(D,V,J){D.animation[J]=V[J]!==x(V,J)?b(V[J],D.key):void 0}function Go(D,V,...J){var re,ve,Ce,Ae;(ve=(re=D.animation)[V])==null||ve.call(re,...J),(Ae=(Ce=D.defaultProps)[V])==null||Ae.call(Ce,...J)}var jt=en,ue=["onStart","onChange","onRest"],me=1,ke=class{constructor(D,V){this.id=me++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),V&&(this._flush=V),D&&this.start({default:!0,...D})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(D=>D.idle&&!D.isDelayed&&!D.isPaused)}get item(){return this._item}set item(D){this._item=D}get(){let D={};return this.each((V,J)=>D[J]=V.get()),D}set(D){for(let V in D){let J=D[V];jt.is.und(J)||this.springs[V].set(J)}}update(D){return D&&this.queue.push(xi(D)),this}start(D){let{queue:V}=this;return D?V=(0,jt.toArray)(D).map(xi):this.queue=[],this._flush?this._flush(this,V):(Ot(this,V),Me(this,V))}stop(D,V){if(D!==!!D&&(V=D),V){let J=this.springs;(0,jt.each)((0,jt.toArray)(V),re=>J[re].stop(!!D))}else lt(this._state,this._lastAsyncId),this.each(J=>J.stop(!!D));return this}pause(D){if(jt.is.und(D))this.start({pause:!0});else{let V=this.springs;(0,jt.each)((0,jt.toArray)(D),J=>V[J].pause())}return this}resume(D){if(jt.is.und(D))this.start({pause:!1});else{let V=this.springs;(0,jt.each)((0,jt.toArray)(D),J=>V[J].resume())}return this}each(D){(0,jt.eachProp)(this.springs,D)}_onFrame(){let{onStart:D,onChange:V,onRest:J}=this._events,re=this._active.size>0,ve=this._changed.size>0;(re&&!this._started||ve&&!this._started)&&(this._started=!0,(0,jt.flush)(D,([$e,Ne])=>{Ne.value=this.get(),$e(Ne,this,this._item)}));let Ce=!re&&this._started,Ae=ve||Ce&&J.size?this.get():null;ve&&V.size&&(0,jt.flush)(V,([$e,Ne])=>{Ne.value=Ae,$e(Ne,this,this._item)}),Ce&&(this._started=!1,(0,jt.flush)(J,([$e,Ne])=>{Ne.value=Ae,$e(Ne,this,this._item)}))}eventObserved(D){if(D.type=="change")this._changed.add(D.parent),D.idle||this._active.add(D.parent);else if(D.type=="idle")this._active.delete(D.parent);else return;jt.raf.onFrame(this._onFrame)}};function Me(D,V){return Promise.all(V.map(J=>Ge(D,J))).then(J=>Ee(D,J))}async function Ge(D,V,J){let{keys:re,to:ve,from:Ce,loop:Ae,onRest:$e,onResolve:Ne}=V,Ue=jt.is.obj(V.default)&&V.default;Ae&&(V.loop=!1),ve===!1&&(V.to=null),Ce===!1&&(V.from=null);let mt=jt.is.arr(ve)||jt.is.fun(ve)?ve:void 0;mt?(V.to=void 0,V.onRest=void 0,Ue&&(Ue.onRest=void 0)):(0,jt.each)(ue,ct=>{let pt=V[ct];if(jt.is.fun(pt)){let at=D._events[ct];V[ct]=({finished:wt,cancelled:st})=>{let bt=at.get(pt);bt?(wt||(bt.finished=!1),st&&(bt.cancelled=!0)):at.set(pt,{value:null,finished:wt||!1,cancelled:st||!1})},Ue&&(Ue[ct]=V[ct])}});let rt=D._state;V.pause===!rt.paused?(rt.paused=V.pause,(0,jt.flushCalls)(V.pause?rt.pauseQueue:rt.resumeQueue)):rt.paused&&(V.pause=!0);let Rt=(re||Object.keys(D.springs)).map(ct=>D.springs[ct].start(V)),xt=V.cancel===!0||x(V,"cancel")===!0;(mt||xt&&rt.asyncId)&&Rt.push(he(++D._lastAsyncId,{props:V,state:rt,actions:{pause:jt.noop,resume:jt.noop,start(ct,pt){xt?(lt(rt,D._lastAsyncId),pt(Xe(D))):(ct.onRest=$e,pt(Oe(mt,ct,rt,D)))}}})),rt.paused&&await new Promise(ct=>{rt.resumeQueue.add(ct)});let Ke=Ee(D,await Promise.all(Rt));if(Ae&&Ke.finished&&!(J&&Ke.noop)){let ct=vi(V,Ae,ve);if(ct)return Ot(D,[ct]),Ge(D,ct,!0)}return Ne&&jt.raf.batchedUpdates(()=>Ne(Ke,D,D.item)),Ke}function yt(D,V){let J={...D.springs};return V&&(0,jt.each)((0,jt.toArray)(V),re=>{jt.is.und(re.keys)&&(re=xi(re)),jt.is.obj(re.to)||(re={...re,to:void 0}),tt(J,re,ve=>ot(ve))}),ut(D,J),J}function ut(D,V){(0,jt.eachProp)(V,(J,re)=>{D.springs[re]||(D.springs[re]=J,(0,jt.addFluidObserver)(J,D))})}function ot(D,V){let J=new hn;return J.key=D,V&&(0,jt.addFluidObserver)(J,V),J}function tt(D,V,J){V.keys&&(0,jt.each)(V.keys,re=>{(D[re]||(D[re]=J(re)))._prepareNode(V)})}function Ot(D,V){(0,jt.each)(V,J=>{tt(D.springs,J,re=>ot(re,D))})}var Pn=c($),vt=$,un=en,fn=({children:D,...V})=>{let J=(0,vt.useContext)(Rr),re=V.pause||!!J.pause,ve=V.immediate||!!J.immediate;V=(0,un.useMemoOne)(()=>({pause:re,immediate:ve}),[re,ve]);let{Provider:Ce}=Rr;return Pn.createElement(Ce,{value:V},D)},Rr=rr(fn,{});fn.Provider=Rr.Provider,fn.Consumer=Rr.Consumer;function rr(D,V){return Object.assign(D,Pn.createContext(V)),D.Provider._context=D,D.Consumer._context=D,D}var hr=en,Ho=()=>{let D=[],V=function(re){(0,hr.deprecateDirectCall)();let ve=[];return(0,hr.each)(D,(Ce,Ae)=>{if(hr.is.und(re))ve.push(Ce.start());else{let $e=J(re,Ce,Ae);$e&&ve.push(Ce.start($e))}}),ve};V.current=D,V.add=function(re){D.includes(re)||D.push(re)},V.delete=function(re){let ve=D.indexOf(re);~ve&&D.splice(ve,1)},V.pause=function(){return(0,hr.each)(D,re=>re.pause(...arguments)),this},V.resume=function(){return(0,hr.each)(D,re=>re.resume(...arguments)),this},V.set=function(re){(0,hr.each)(D,(ve,Ce)=>{let Ae=hr.is.fun(re)?re(Ce,ve):re;Ae&&ve.set(Ae)})},V.start=function(re){let ve=[];return(0,hr.each)(D,(Ce,Ae)=>{if(hr.is.und(re))ve.push(Ce.start());else{let $e=this._getProps(re,Ce,Ae);$e&&ve.push(Ce.start($e))}}),ve},V.stop=function(){return(0,hr.each)(D,re=>re.stop(...arguments)),this},V.update=function(re){return(0,hr.each)(D,(ve,Ce)=>ve.update(this._getProps(re,ve,Ce))),this};let J=function(re,ve,Ce){return hr.is.fun(re)?re(Ce,ve):re};return V._getProps=J,V};function Di(D,V,J){let re=H.is.fun(V)&&V;re&&!J&&(J=[]);let ve=(0,Z.useMemo)(()=>re||arguments.length==3?Ho():void 0,[]),Ce=(0,Z.useRef)(0),Ae=(0,H.useForceUpdate)(),$e=(0,Z.useMemo)(()=>({ctrls:[],queue:[],flush(at,wt){let st=yt(at,wt);return Ce.current>0&&!$e.queue.length&&!Object.keys(st).some(bt=>!at.springs[bt])?Me(at,wt):new Promise(bt=>{ut(at,st),$e.queue.push(()=>{bt(Me(at,wt))}),Ae()})}}),[]),Ne=(0,Z.useRef)([...$e.ctrls]),Ue=[],mt=(0,H.usePrev)(D)||0;(0,Z.useMemo)(()=>{(0,H.each)(Ne.current.slice(D,mt),at=>{U(at,ve),at.stop(!0)}),Ne.current.length=D,rt(mt,D)},[D]),(0,Z.useMemo)(()=>{rt(0,Math.min(mt,D))},J);function rt(at,wt){for(let st=at;st<wt;st++){let bt=Ne.current[st]||(Ne.current[st]=new ke(null,$e.flush)),ar=re?re(st,bt):V[st];ar&&(Ue[st]=Cs(ar))}}let Rt=Ne.current.map((at,wt)=>yt(at,Ue[wt])),xt=(0,Z.useContext)(fn),Ke=(0,H.usePrev)(xt),ct=xt!==Ke&&P(xt);(0,H.useIsomorphicLayoutEffect)(()=>{Ce.current++,$e.ctrls=Ne.current;let{queue:at}=$e;at.length&&($e.queue=[],(0,H.each)(at,wt=>wt())),(0,H.each)(Ne.current,(wt,st)=>{ve?.add(wt),ct&&wt.start({default:xt});let bt=Ue[st];bt&&(B(wt,bt.ref),wt.ref?wt.queue.push(bt):wt.start(bt))})}),(0,H.useOnce)(()=>()=>{(0,H.each)($e.ctrls,at=>at.stop(!0))});let pt=Rt.map(at=>({...at}));return ve?[pt,ve]:pt}function ga(D,V){let J=X.is.fun(D),[[re],ve]=Di(1,J?D:[D],J?V||[]:V);return J||arguments.length==2?[re,ve]:re}var go=$,Du=()=>Ho(),Lu=()=>(0,go.useState)(Du)[0],xl=en,qo=(D,V)=>{let J=(0,xl.useConstant)(()=>new hn(D,V));return(0,xl.useOnce)(()=>()=>{J.stop()}),J},yo=en;function tn(D,V,J){let re=yo.is.fun(V)&&V;re&&!J&&(J=[]);let ve=!0,Ce,Ae=Di(D,($e,Ne)=>{let Ue=re?re($e,Ne):V;return Ce=Ue.ref,ve=ve&&Ue.reverse,Ue},J||[{}]);if((0,yo.useIsomorphicLayoutEffect)(()=>{(0,yo.each)(Ae[1].current,($e,Ne)=>{let Ue=Ae[1].current[Ne+(ve?1:-1)];if(B($e,Ce),$e.ref){Ue&&$e.update({to:Ue.springs});return}Ue?$e.start({to:Ue.springs}):$e.start()})},J),re||arguments.length==3){let $e=Ce??Ae[1];return $e._getProps=(Ne,Ue,mt)=>{let rt=yo.is.fun(Ne)?Ne(mt,Ue):Ne;if(rt){let Rt=$e.current[mt+(rt.reverse?1:-1)];return Rt&&(rt.to=Rt.springs),rt}},Ae}return Ae[0]}var cn=c($),xr=$,At=en;function wl(D,V,J){let re=At.is.fun(V)&&V,{reset:ve,sort:Ce,trail:Ae=0,expires:$e=!0,exitBeforeEnter:Ne=!1,onDestroyed:Ue,ref:mt,config:rt}=re?re():V,Rt=(0,xr.useMemo)(()=>re||arguments.length==3?Ho():void 0,[]),xt=(0,At.toArray)(D),Ke=[],ct=(0,xr.useRef)(null),pt=ve?null:ct.current;(0,At.useIsomorphicLayoutEffect)(()=>{ct.current=Ke}),(0,At.useOnce)(()=>((0,At.each)(Ke,ht=>{Rt?.add(ht.ctrl),ht.ctrl.ref=Rt}),()=>{(0,At.each)(ct.current,ht=>{ht.expired&&clearTimeout(ht.expirationId),U(ht.ctrl,Rt),ht.ctrl.stop(!0)})}));let at=Cw(xt,re?re():V,pt),wt=ve&&ct.current||[];(0,At.useIsomorphicLayoutEffect)(()=>(0,At.each)(wt,({ctrl:ht,item:_t,key:kr})=>{U(ht,Rt),y(Ue,_t,kr)}));let st=[];if(pt&&(0,At.each)(pt,(ht,_t)=>{ht.expired?(clearTimeout(ht.expirationId),wt.push(ht)):(_t=st[_t]=at.indexOf(ht.key),~_t&&(Ke[_t]=ht))}),(0,At.each)(xt,(ht,_t)=>{Ke[_t]||(Ke[_t]={key:at[_t],item:ht,phase:"mount",ctrl:new ke},Ke[_t].ctrl.item=ht)}),st.length){let ht=-1,{leave:_t}=re?re():V;(0,At.each)(st,(kr,Sr)=>{let dn=pt[Sr];~kr?(ht=Ke.indexOf(dn),Ke[ht]={...dn,item:xt[kr]}):_t&&Ke.splice(++ht,0,dn)})}At.is.fun(Ce)&&Ke.sort((ht,_t)=>Ce(ht.item,_t.item));let bt=-Ae,ar=(0,At.useForceUpdate)(),Ja=S(V),Vt=new Map,jn=(0,xr.useRef)(new Map),An=(0,xr.useRef)(!1);(0,At.each)(Ke,(ht,_t)=>{let kr=ht.key,Sr=ht.phase,dn=re?re():V,Rn,ea,vo=y(dn.delay||0,kr);if(Sr=="mount")Rn=dn.enter,ea="enter";else{let ja=at.indexOf(kr)<0;if(Sr!="leave")if(ja)Rn=dn.leave,ea="leave";else if(Rn=dn.update)ea="update";else return;else if(!ja)Rn=dn.enter,ea="enter";else return}if(Rn=y(Rn,ht.item,_t),Rn=At.is.obj(Rn)?N(Rn):{to:Rn},!Rn.config){let ja=rt||Ja.config;Rn.config=y(ja,ht.item,_t,ea)}bt+=Ae;let ta={...Ja,delay:vo+bt,ref:mt,immediate:dn.immediate,reset:!1,...Rn};if(ea=="enter"&&At.is.und(ta.from)){let ja=re?re():V,_s=At.is.und(ja.initial)||pt?ja.from:ja.initial;ta.from=y(_s,ht.item,_t)}let{onResolve:Ns}=ta;ta.onResolve=ja=>{y(Ns,ja);let _s=ct.current,ir=_s.find(na=>na.key===kr);if(ir&&!(ja.cancelled&&ir.phase!="update")&&ir.ctrl.idle){let na=_s.every(nn=>nn.ctrl.idle);if(ir.phase=="leave"){let nn=y($e,ir.item);if(nn!==!1){let Rs=nn===!0?0:nn;if(ir.expired=!0,!na&&Rs>0){Rs<=2147483647&&(ir.expirationId=setTimeout(ar,Rs));return}}}na&&_s.some(nn=>nn.expired)&&(jn.current.delete(ir),Ne&&(An.current=!0),ar())}};let bh=yt(ht.ctrl,ta);ea==="leave"&&Ne?jn.current.set(ht,{phase:ea,springs:bh,payload:ta}):Vt.set(ht,{phase:ea,springs:bh,payload:ta})});let va=(0,xr.useContext)(fn),Ua=(0,At.usePrev)(va),bo=va!==Ua&&P(va);(0,At.useIsomorphicLayoutEffect)(()=>{bo&&(0,At.each)(Ke,ht=>{ht.ctrl.start({default:va})})},[va]),(0,At.each)(Vt,(ht,_t)=>{if(jn.current.size){let kr=Ke.findIndex(Sr=>Sr.key===_t.key);Ke.splice(kr,1)}}),(0,At.useIsomorphicLayoutEffect)(()=>{(0,At.each)(jn.current.size?jn.current:Vt,({phase:ht,payload:_t},kr)=>{let{ctrl:Sr}=kr;kr.phase=ht,Rt?.add(Sr),bo&&ht=="enter"&&Sr.start({default:va}),_t&&(B(Sr,_t.ref),(Sr.ref||Rt)&&!An.current?Sr.update(_t):(Sr.start(_t),An.current&&(An.current=!1)))})},ve?void 0:J);let wr=ht=>cn.createElement(cn.Fragment,null,Ke.map((_t,kr)=>{let{springs:Sr}=Vt.get(_t)||_t.ctrl,dn=ht({...Sr},_t.item,_t,kr);return dn&&dn.type?cn.createElement(dn.type,{...dn.props,key:At.is.str(_t.key)||At.is.num(_t.key)?_t.key:_t.ctrl.id,ref:dn.ref}):dn}));return Rt?[wr,Rt]:wr}var gh=1;function Cw(D,{key:V,keys:J=V},re){if(J===null){let ve=new Set;return D.map(Ce=>{let Ae=re&&re.find($e=>$e.item===Ce&&$e.phase!=="leave"&&!ve.has($e));return Ae?(ve.add(Ae),Ae.key):gh++})}return At.is.und(J)?D:At.is.fun(J)?D.map(J):(0,At.toArray)(J)}var Fu=en,kl=({container:D,...V}={})=>{let[J,re]=ga(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...V}),[]);return(0,Fu.useIsomorphicLayoutEffect)(()=>{let ve=(0,Fu.onScroll)(({x:Ce,y:Ae})=>{re.start({scrollX:Ce.current,scrollXProgress:Ce.progress,scrollY:Ae.current,scrollYProgress:Ae.progress})},{container:D?.current||void 0});return()=>{(0,Fu.each)(Object.values(J),Ce=>Ce.stop()),ve()}},[]),J},Li=en,wn=({container:D,...V})=>{let[J,re]=ga(()=>({width:0,height:0,...V}),[]);return(0,Li.useIsomorphicLayoutEffect)(()=>{let ve=(0,Li.onResize)(({width:Ce,height:Ae})=>{re.start({width:Ce,height:Ae,immediate:J.width.get()===0||J.height.get()===0})},{container:D?.current||void 0});return()=>{(0,Li.each)(Object.values(J),Ce=>Ce.stop()),ve()}},[]),J},mn=$,Fi=en,jr={any:0,all:1};function ya(D,V){let[J,re]=(0,mn.useState)(!1),ve=(0,mn.useRef)(),Ce=Fi.is.fun(D)&&D,Ae=Ce?Ce():{},{to:$e={},from:Ne={},...Ue}=Ae,mt=Ce?V:D,[rt,Rt]=ga(()=>({from:Ne,...Ue}),[]);return(0,Fi.useIsomorphicLayoutEffect)(()=>{let xt=ve.current,{root:Ke,once:ct,amount:pt="any",...at}=mt??{};if(!xt||ct&&J||typeof IntersectionObserver>"u")return;let wt=new WeakMap,st=()=>($e&&Rt.start($e),re(!0),ct?void 0:()=>{Ne&&Rt.start(Ne),re(!1)}),bt=Ja=>{Ja.forEach(Vt=>{let jn=wt.get(Vt.target);if(Vt.isIntersecting!==!!jn)if(Vt.isIntersecting){let An=st();Fi.is.fun(An)?wt.set(Vt.target,An):ar.unobserve(Vt.target)}else jn&&(jn(),wt.delete(Vt.target))})},ar=new IntersectionObserver(bt,{root:Ke&&Ke.current||void 0,threshold:typeof pt=="number"||Array.isArray(pt)?pt:jr[pt],...at});return ar.observe(xt),()=>ar.unobserve(xt)},[mt]),Ce?[ve,rt]:[ve,J]}function Is({children:D,...V}){return D(ga(V))}var Sl=en;function ba({items:D,children:V,...J}){let re=tn(D.length,J);return D.map((ve,Ce)=>{let Ae=V(ve,Ce);return Sl.is.fun(Ae)?Ae(re[Ce]):Ae})}function ud({items:D,children:V,...J}){return wl(D,J)(V)}var p0=en,Un=en,Ko=o0,Bu=class extends Qt{constructor(D,V){super(),this.source=D,this.idle=!0,this._active=new Set,this.calc=(0,Un.createInterpolator)(...V);let J=this._get(),re=(0,Ko.getAnimatedType)(J);(0,Ko.setAnimated)(this,re.create(J))}advance(D){let V=this._get(),J=this.get();(0,Un.isEqual)(V,J)||((0,Ko.getAnimated)(this).setValue(V),this._onChange(V,this.idle)),!this.idle&&h0(this._active)&&yh(this)}_get(){let D=Un.is.arr(this.source)?this.source.map(Un.getFluidValue):(0,Un.toArray)((0,Un.getFluidValue)(this.source));return this.calc(...D)}_start(){this.idle&&!h0(this._active)&&(this.idle=!1,(0,Un.each)((0,Ko.getPayload)(this),D=>{D.done=!1}),Un.Globals.skipAnimation?(Un.raf.batchedUpdates(()=>this.advance()),yh(this)):Un.frameLoop.start(this))}_attach(){let D=1;(0,Un.each)((0,Un.toArray)(this.source),V=>{(0,Un.hasFluidValue)(V)&&(0,Un.addFluidObserver)(V,this),Ut(V)&&(V.idle||this._active.add(V),D=Math.max(D,V.priority+1))}),this.priority=D,this._start()}_detach(){(0,Un.each)((0,Un.toArray)(this.source),D=>{(0,Un.hasFluidValue)(D)&&(0,Un.removeFluidObserver)(D,this)}),this._active.clear(),yh(this)}eventObserved(D){D.type=="change"?D.idle?this.advance():(this._active.add(D.parent),this._start()):D.type=="idle"?this._active.delete(D.parent):D.type=="priority"&&(this.priority=(0,Un.toArray)(this.source).reduce((V,J)=>Math.max(V,(Ut(J)?J.priority:0)+1),0))}};function wi(D){return D.idle!==!1}function h0(D){return!D.size||Array.from(D).every(wi)}function yh(D){D.idle||(D.idle=!0,(0,Un.each)((0,Ko.getPayload)(D),V=>{V.done=!0}),(0,Un.callFluidObservers)(D,{type:"idle",parent:D}))}var Iw=(D,...V)=>new Bu(D,V),cd=(D,...V)=>((0,p0.deprecateInterpolate)(),new Bu(D,V)),Es=en;Es.Globals.assign({createStringInterpolator:Es.createStringInterpolator,to:(D,V)=>new Bu(D,V)});var zu=Es.frameLoop.advance,Ts=en;u(p,f5e(),t.exports)})(YB);var m5e=YB.exports;XB.exports=m5e;var tU=XB.exports;(function(t){var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i=(H,F)=>{for(var Y in F)e(H,Y,{get:F[Y],enumerable:!0})},o=(H,F,Y,Q)=>{if(F&&typeof F=="object"||typeof F=="function")for(let ne of r(F))!a.call(H,ne)&&ne!==Y&&e(H,ne,{get:()=>F[ne],enumerable:!(Q=n(F,ne))||Q.enumerable});return H},s=(H,F,Y)=>(o(H,F,"default"),Y&&o(Y,F,"default")),l=H=>o(e({},"__esModule",{value:!0}),H),u={};i(u,{a:()=>Z,animated:()=>Z}),t.exports=l(u);var c=tU,d=Rf,p=en,f=o0,g=/^--/;function y(H,F){return F==null||typeof F=="boolean"||F===""?"":typeof F=="number"&&F!==0&&!g.test(H)&&!(x.hasOwnProperty(H)&&x[H])?F+"px":(""+F).trim()}var v={};function b(H,F){if(!H.nodeType||!H.setAttribute)return!1;let Y=H.nodeName==="filter"||H.parentNode&&H.parentNode.nodeName==="filter",{style:Q,children:ne,scrollTop:se,scrollLeft:pe,viewBox:de,...ie}=F,xe=Object.values(ie),q=Object.keys(ie).map(oe=>Y||H.hasAttribute(oe)?oe:v[oe]||(v[oe]=oe.replace(/([A-Z])/g,he=>"-"+he.toLowerCase())));ne!==void 0&&(H.textContent=ne);for(let oe in Q)if(Q.hasOwnProperty(oe)){let he=y(oe,Q[oe]);g.test(oe)?H.style.setProperty(oe,he):H.style[oe]=he}q.forEach((oe,he)=>{H.setAttribute(oe,xe[he])}),se!==void 0&&(H.scrollTop=se),pe!==void 0&&(H.scrollLeft=pe),de!==void 0&&H.setAttribute("viewBox",de)}var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=(H,F)=>H+F.charAt(0).toUpperCase()+F.substring(1),S=["Webkit","Ms","Moz","O"];x=Object.keys(x).reduce((H,F)=>(S.forEach(Y=>H[w(Y,F)]=H[F]),H),x);var C=o0,E=en,_=/^(matrix|translate|scale|rotate|skew)/,N=/^(translate)/,M=/^(rotate|skew)/,P=(H,F)=>E.is.num(H)&&H!==0?H+F:H,L=(H,F)=>E.is.arr(H)?H.every(Y=>L(Y,F)):E.is.num(H)?H===F:parseFloat(H)===F,U=class extends C.AnimatedObject{constructor({x:H,y:F,z:Y,...Q}){let ne=[],se=[];(H||F||Y)&&(ne.push([H||0,F||0,Y||0]),se.push(pe=>[`translate3d(${pe.map(de=>P(de,"px")).join(",")})`,L(pe,0)])),(0,E.eachProp)(Q,(pe,de)=>{if(de==="transform")ne.push([pe||""]),se.push(ie=>[ie,ie===""]);else if(_.test(de)){if(delete Q[de],E.is.und(pe))return;let ie=N.test(de)?"px":M.test(de)?"deg":"";ne.push((0,E.toArray)(pe)),se.push(de==="rotate3d"?([xe,q,oe,he])=>[`rotate3d(${xe},${q},${oe},${P(he,ie)})`,L(he,0)]:xe=>[`${de}(${xe.map(q=>P(q,ie)).join(",")})`,L(xe,de.startsWith("scale")?1:0)])}}),ne.length&&(Q.transform=new B(ne,se)),super(Q)}},B=class extends E.FluidValue{constructor(H,F){super(),this.inputs=H,this.transforms=F,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let H="",F=!0;return(0,E.each)(this.inputs,(Y,Q)=>{let ne=(0,E.getFluidValue)(Y[0]),[se,pe]=this.transforms[Q](E.is.arr(ne)?ne:Y.map(E.getFluidValue));H+=" "+se,F=F&&pe}),F?"none":H}observerAdded(H){H==1&&(0,E.each)(this.inputs,F=>(0,E.each)(F,Y=>(0,E.hasFluidValue)(Y)&&(0,E.addFluidObserver)(Y,this)))}observerRemoved(H){H==0&&(0,E.each)(this.inputs,F=>(0,E.each)(F,Y=>(0,E.hasFluidValue)(Y)&&(0,E.removeFluidObserver)(Y,this)))}eventObserved(H){H.type=="change"&&(this._value=null),(0,E.callFluidObservers)(this,H)}},K=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];s(u,tU,t.exports),c.Globals.assign({batchedUpdates:d.unstable_batchedUpdates,createStringInterpolator:p.createStringInterpolator,colors:p.colors});var X=(0,f.createHost)(K,{applyAnimatedValues:b,createAnimatedStyle:H=>new U(H),getComponentProps:({scrollTop:H,scrollLeft:F,...Y})=>Y}),Z=X.animated})(KB);var g5e=KB.exports;qB.exports=g5e;var y5e=qB.exports;const{useState:b5e,useEffect:v5e}=$;function x5e(){const[t,e]=b5e({width:void 0,height:void 0});return v5e(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}var w5e=x5e;const ph=$,{useSpring:k5e,animated:S5e}=y5e,C5e=w5e,Ou={maxTilt:25,rotationPower:50,swipeThreshold:.5},JN={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},nU=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),I5e=t=>{const e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}},s0=async(t,e,n,r)=>{const a=nU(n,r),i=nU(t.x,t.y),o=a*t.x,s=a*t.y,l=t.x*45,u=a/i;return e.start({xyrot:[o,s,l],config:{duration:u}}),await new Promise(c=>setTimeout(()=>{c()},u))},rU=t=>new Promise(e=>{t.start({xyrot:[0,0,0],config:JN.animateBack,onRest:e})}),aU=t=>{if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>Ou.swipeThreshold)return"right";if(t.x<-Ou.swipeThreshold)return"left"}else{if(t.y>Ou.swipeThreshold)return"down";if(t.y<-Ou.swipeThreshold)return"up"}return"none"},E5e=S5e.div,T5e=ph.forwardRef(({flickOnSwipe:t=!0,children:e,onSwipe:n,onCardLeftScreen:r,className:a,preventSwipe:i=[],swipeRequirementType:o="velocity",swipeThreshold:s=Ou.swipeThreshold,onSwipeRequirementFulfilled:l,onSwipeRequirementUnfulfilled:u},c)=>{const{width:d,height:p}=C5e(),[{xyrot:f},g]=k5e(()=>({xyrot:[0,0,0],config:JN.touchResponsive}));Ou.swipeThreshold=s,ph.useImperativeHandle(c,()=>({async swipe(w="right"){n&&n(w);const S=1.3,C=(Math.random()-.5)/2;w==="right"?await s0({x:S,y:C},g,d,p):w==="left"?await s0({x:-S,y:C},g,d,p):w==="up"?await s0({x:C,y:-S},g,d,p):w==="down"&&await s0({x:C,y:S},g,d,p),r&&r(w)},async restoreCard(){await rU(g)}}));const y=ph.useCallback(async(w,S)=>{const C=aU({x:o==="velocity"?S.vx:S.dx,y:o==="velocity"?S.vy:S.dy});if(C!=="none"&&t&&!i.includes(C)){n&&n(C),await s0(o==="velocity"?{x:S.vx,y:S.vy}:I5e({x:S.dx,y:S.dy}),w,d,p),r&&r(C);return}rU(w)},[o,t,i,n,r,d,p]);let v="none";const b=(w,S,C,E)=>{let _=E?w.touches[0].clientX-S.x:w.clientX-S.x,N=E?w.touches[0].clientY-S.y:w.clientY-S.y;S.x===0&&S.y===0&&(_=0,N=0);const M=-(_-C.dx)/(C.timeStamp-Date.now()),P=-(N-C.dy)/(C.timeStamp-Date.now());return{dx:_,dy:N,vx:M,vy:P,timeStamp:Date.now()}};ph.useLayoutEffect(()=>{let w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},C=!1;const E=B=>{!B.srcElement.className.includes("pressable")&&B.cancelable&&B.preventDefault(),S=b(B,w,S,!0),w={x:B.touches[0].clientX,y:B.touches[0].clientY}};x.current.addEventListener("touchstart",E);const _=B=>{C=!0,S=b(B,w,S,!1),w={x:B.clientX,y:B.clientY}};x.current.addEventListener("mousedown",_);const N=B=>{if(l||u){const X=aU({x:o==="velocity"?B.vx:B.dx,y:o==="velocity"?B.vy:B.dy});X!==v&&(v=X,v==="none"?u&&u():l&&l(X))}let K=B.vx*15;isNaN(K)&&(K=0),K=Math.max(Math.min(K,Ou.maxTilt),-Ou.maxTilt),g.start({xyrot:[B.dx,B.dy,K],config:JN.touchResponsive})},M=B=>{if(!C)return;const K=b(B,w,S,!1);S=K,N(K)};window.addEventListener("mousemove",M);const P=B=>{C&&(C=!1,y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})};window.addEventListener("mouseup",P);const L=B=>{const K=b(B,w,S,!0);S=K,N(K)};x.current.addEventListener("touchmove",L);const U=B=>{y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}};return x.current.addEventListener("touchend",U),()=>{x.current.removeEventListener("touchstart",E),x.current.removeEventListener("touchmove",L),x.current.removeEventListener("touchend",U),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",P),x.current.removeEventListener("mousedown",_)}},[y,g,l,u]);const x=ph.useRef();return ph.createElement(E5e,{ref:x,className:a,style:{transform:f.to((w,S,C)=>`translate3d(${w}px, ${S}px, 0px) rotate(${C}deg)`)},children:e})});var N5e=T5e;const _5e=Wi(N5e);function Ai(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const R5e=Ai(/^[1-9][0-9]*$/),e_=Ai(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),$5e=Ai(/^E[1-9][0-9]*$/),hw=Ai(/^Q[1-9][0-9]*$/),fw=Ai(/^P[1-9][0-9]*$/),iU=Ai(/^L[1-9][0-9]*$/),oU=Ai(/^L[1-9][0-9]*-F[1-9][0-9]*$/),sU=Ai(/^L[1-9][0-9]*-S[1-9][0-9]*$/),O5e=Ai(/^M[1-9][0-9]*$/),M5e=Ai(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),P5e=Ai(/^[0-9a-f]{40}$/),lU=Ai(/^\d+$/),uU=Ai(/^(Q|P|L|M)[1-9][0-9]*$/);function A5e(t){if(typeof t!="string")return!1;const[e,n]=t.split("#");return e_(e)&&fw(n)}function cU(t){return typeof t!="string"?!1:t.startsWith("Item:")?hw(t.substring(5)):t.startsWith("Lexeme:")?iU(t.substring(7)):t.startsWith("Property:")?fw(t.substring(9)):hw(t)}function D5e(t){if(!uU(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function L5e(t,e){let n=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(n+=`?width=${e}`),n}function F5e(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const B5e=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:F5e,getImageUrl:L5e,getNumericId:D5e,isEntityId:e_,isEntityPageTitle:cU,isEntitySchemaId:$5e,isFormId:oU,isGuid:M5e,isHash:P5e,isItemId:hw,isLexemeId:iU,isMediaInfoId:O5e,isNonNestedEntityId:uU,isNumericId:R5e,isPropertyClaimsId:A5e,isPropertyId:fw,isRevisionId:lU,isSenseId:sU},Symbol.toStringTag,{value:"Module"}));function ks(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function dU(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const pU=t=>encodeURIComponent(t).replace(/[!'()*]/g,j5e),z5e=t=>t.replace(/\s/g,"_");function U5e(t){return Array.from(new Set(t))}const j5e=t=>"%"+t.charCodeAt(0).toString(16);function Mu(t){if(t.length!==1||!dU(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function l0(t,e){return typeof e=="string"&&t.includes(e)}function t_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n_(t){return Object.entries(t)}function r_(t){typeof t=="object"&&(t=t.time);const e=t[0];let[n,r]=t.slice(1).split("T");n=n.replace(/-00/g,"-01");const a=`${n}T${r}`;return V5e(e,a)}const V5e=(t,e)=>{const n=e.split("-")[0];return t==="-"||n.length>4?W5e(t,e,n):new Date(e)},W5e=(t,e,n)=>{let r;return n.length===4?r=`${t}00${e}`:n.length===5?r=`${t}0${e}`:r=t+e,new Date(r)};function a_(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[r,a]=e.slice(1).split("T");if(!n||!r||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return r=r.replace(/-00/g,"-01"),`${n}${r}T${a}`}}}const G5e=t=>r_(t).getTime(),H5e=t=>r_(t).toISOString(),q5e=t=>{if(typeof t=="object"){const{time:e,precision:n}=t;n===9?t=e.replace("-01-01T","-00-00T"):n===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},hU=a_(G5e),fU=a_(H5e),mU=a_(q5e),K5e=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:r_,wikibaseTimeToEpochTime:hU,wikibaseTimeToISOString:fU,wikibaseTimeToSimpleDay:mU},Symbol.toStringTag,{value:"Module"})),Pu=t=>t.value,X5e=(t,e)=>e.keepRichValues?t.value:t.value.text,hh=(t,e)=>Q5e(t,e.entityPrefix),Y5e={item:"Q",lexeme:"L",property:"P"},Q5e=(t,e)=>{const{value:n}=t,r=n.id||Y5e[n["entity-type"]]+n["numeric-id"];return typeof e=="string"?`${e}:${r}`:r},Z5e=(t,e)=>{const{value:n}=t,r=parseFloat(n.amount);if(e.keepRichValues){const a={amount:parseFloat(n.amount),unit:n.unit.replace(/^https?:\/\/.*\/entity\//,"")};return n.upperBound!=null&&(a.upperBound=parseFloat(n.upperBound)),n.lowerBound!=null&&(a.lowerBound=parseFloat(n.lowerBound)),a}else return r},J5e=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],eRe=(t,e)=>{let n;if(typeof e.timeConverter=="function"?n=e.timeConverter(t.value):n=tRe(e.timeConverter)(t.value),e.keepRichValues){const{timezone:r,before:a,after:i,precision:o,calendarmodel:s}=t.value;return{time:n,timezone:r,before:a,after:i,precision:o,calendarmodel:s}}else return n},tRe=(t="iso")=>{const e=nRe[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},nRe={iso:fU,epoch:hU,"simple-day":mU,none:t=>typeof t=="string"?t:t.time},rRe={commonsMedia:Pu,"external-id":Pu,"geo-shape":Pu,"globe-coordinate":J5e,math:Pu,monolingualtext:X5e,"musical-notation":Pu,quantity:Z5e,string:Pu,"tabular-data":Pu,time:eRe,url:Pu,"wikibase-entityid":hh,"wikibase-form":hh,"wikibase-item":hh,"wikibase-lexeme":hh,"wikibase-property":hh,"wikibase-sense":hh},gU=t=>t.toLowerCase().replace(/[\s-]/g,""),yU={};for(const[t,e]of Object.entries(rRe))yU[gU(t)]=e;function aRe(t,e,n,r){t=t||e.type;try{const a=yU[gU(t)];return a(e,n)}catch(a){throw a.message==="parsers[datatype] is not a function"&&(a.message=`${t} claim parser isn't implemented
      Claim id: ${r}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),a}}function i_(t){const e={};for(const n of t){const{rank:r}=n;e[r]=e[r]||[],e[r].push(n)}return e.preferred||e.normal||[]}function bU(t){return t.filter(e=>e.rank!=="deprecated")}function iRe(t){const e={};for(const[n,r]of n_(t))e[n]=i_(r);return e}const oRe=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:bU,truthyClaims:iRe,truthyPropertyClaims:i_},Symbol.toStringTag,{value:"Module"}));function o_(t,e){const{propertyPrefix:n}=e,r={};for(let a in t){const i=t[a];n&&(a=n+":"+a),r[a]=s_(i,e)}return r}function s_(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:n,keepNonDeprecated:r,areSubSnaks:a}=SU(e);return r?t=bU(t):n||a||(t=i_(t)),t=t.map(i=>l_(i,e)).filter(i=>i!==void 0),t[0]&&typeof t[0]!="object"?U5e(t):t}function vU(t,e){const{keepQualifiers:n,keepReferences:r,keepIds:a,keepHashes:i,keepTypes:o,keepSnaktypes:s,keepRanks:l}=SU(e),{mainsnak:u,rank:c}=t;let d,p,f,g,y,v;if(u?(p=u.datatype,f=u.datavalue,g=u.snaktype):(f=t.datavalue,p=t.datatype,g=t.snaktype,t.hash?y=!0:v=!0),f)d=aRe(p,f,e,t.id);else if(g==="somevalue")d=e.somevalueValue;else if(g==="novalue")d=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(y){if(!(i||o||s))return d;const w={value:d};return i&&(w.hash=t.hash),o&&(w.type=p),s&&(w.snaktype=g),w}if(v)return o?{type:p,value:d}:d;if(!(n||r||a||o||s||l))return d;const b={value:d};o&&(b.type=p),s&&(b.snaktype=g),l&&(b.rank=c);const x=mw(e);return x.keepHashes=i,n&&(b.qualifiers=wU(t.qualifiers,x)),r&&(t.references=t.references||[],b.references=kU(t.references,x)),a&&(b.id=t.id),b}function fh(t,e={}){return o_(t,e)}function xU(t,e={}){return s_(t,e)}function l_(t,e={}){return vU(t,e)}function wU(t,e={}){return o_(t,mw(e))}function sRe(t,e={}){return s_(t,mw(e))}function lRe(t,e={}){return vU(t,e)}function kU(t,e={}){return t.map(n=>uRe(n,e))}function uRe(t,e={}){const n=mw(e),r=o_(t.snaks,n);return n.keepHashes?{snaks:r,hash:t.hash}:r}const mw=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),cRe=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],SU=(t={})=>(t.keepAll&&cRe.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function u0(t){const e={};for(const[n,r]of n_(t))e[n]=r!=null?r.value:null;return e}function dRe(t){const e={};for(const[n,r]of n_(t))e[n]=r!=null?r.map(a=>a.value):[];return e}function CU(t){return u0(t)}function IU(t){return u0(t)}function EU(t){return dRe(t)}function TU(t){return u0(t)}function NU(t){return u0(t)}function _U(t){return u0(t)}const RU=(t,e={})=>{const{id:n,representations:r,grammaticalFeatures:a,claims:i}=t;if(!oU(n))throw new Error("invalid form object");return{id:n,representations:NU(r),grammaticalFeatures:a,claims:fh(i,e)}},$U=(t,e={})=>t.map(n=>RU(n,e)),OU=(t,e={})=>{const{id:n,glosses:r,claims:a}=t;if(!sU(n))throw new Error("invalid sense object");return{id:n,glosses:_U(r),claims:fh(a,e)}};function MU(t,e={}){return t.map(n=>OU(n,e))}const u_={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},c_=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],pRe="https://www.wikidata.org/wiki/";function PU({site:t,title:e}){if(Mu(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(t_(gw,t))return gw[t](e);const n=t.replace(/wiki$/,"");if(t_(gw,n))return gw[n](e);const{lang:r,project:a}=AU(t);return e=pU(z5e(e)),`https://${r}.${a}.org/wiki/${e}`}const ad=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,gw={commons:ad("commons"),foundation:ad("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:ad("meta"),outreach:ad("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:ad("species"),wikidata:t=>{const e=hRe[t[0]];let n=e?`${e}:${t}`:t;return n=n.replace("-","#"),`${pRe}${n}`},wikifunctions:ad("wikifunctions"),wikimania:ad("wikimania")},hRe={E:"EntitySchema",L:"Lexeme",P:"Property"},fRe=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function AU(t){if(t.startsWith("http")){const e=t,n=e.match(fRe);if(!n)throw new Error(`invalid sitelink url: ${e}`);let[r,a,i]=n.slice(1);if(i=decodeURIComponent(i),r==="commons")return{lang:"en",project:"commons",key:"commons",title:i,url:e};if(!l0(gRe,a))throw new Error(`project is unknown: ${a}`);if(r==="www")return{lang:"en",project:a,key:a,title:i,url:e};const o=`${r.replace(/-/g,"_")}${a}`.replace("wikipedia","wiki");return{lang:r,project:a,key:o,title:i,url:e}}else{if(t_(u_,t))return{lang:"en",project:u_[t],key:t};if(!l0(c_,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,n,r]=t.split("wik");if(r!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const a=LU[n];if(!a)throw new Error(`sitelink project not found: ${a}`);return{lang:e,project:a,key:t}}}const DU=t=>l0(c_,t),mRe=DU,LU={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},gRe=[...Object.values(LU),...Object.values(u_)],yRe=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:AU,getSitelinkUrl:PU,isSite:DU,isSitelinkKey:mRe},Symbol.toStringTag,{value:"Module"}));function FU(t,e={}){let{addUrl:n,keepBadges:r,keepAll:a}=e;return r=r||a,Object.keys(t).reduce(bRe({sitelinks:t,addUrl:n,keepBadges:r}),{})}const bRe=({sitelinks:t,addUrl:e,keepBadges:n})=>(r,a)=>{if(t[a]==null)return r[a]=t[a],r;const{title:i,badges:o}=t[a];return e||n?(r[a]={title:i},e&&(r[a].url=PU({site:a,title:i})),n&&(r[a].badges=o)):r[a]=i,r},vRe={labels:CU,descriptions:IU,aliases:EU,claims:fh,statements:fh,sitelinks:FU,lemmas:TU,forms:$U,senses:MU},BU=(t,e={})=>{const{type:n}=t,r={id:t.id,type:n,modified:t.modified};return n==="item"?(Fa(t,r,"labels"),Fa(t,r,"descriptions"),Fa(t,r,"aliases"),Fa(t,r,"claims",e),Fa(t,r,"sitelinks",e)):n==="property"?(r.datatype=t.datatype,Fa(t,r,"labels"),Fa(t,r,"descriptions"),Fa(t,r,"aliases"),Fa(t,r,"claims",e)):n==="lexeme"?(Fa(t,r,"lemmas"),r.lexicalCategory=t.lexicalCategory,r.language=t.language,Fa(t,r,"claims",e),Fa(t,r,"forms",e),Fa(t,r,"senses",e)):n==="mediainfo"&&(Fa(t,r,"labels"),Fa(t,r,"descriptions"),Fa(t,r,"statements",e)),r},Fa=(t,e,n,r)=>{t[n]!=null&&(e[n]=vRe[n](t[n],r))},zU=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:n}=e,r={};for(const[a,i]of Object.entries(t)){const o=n?`${n}:${a}`:a;r[o]=BU(i,e)}return r};function xRe(t){t=t.body||t;const{entities:e}=t;return zU(e)}function wRe(t){return t=t.body||t,t.query.search.map(e=>e.title)}const kRe=Object.freeze(Object.defineProperty({__proto__:null,entities:xRe,pagesTitles:wRe},Symbol.toStringTag,{value:"Module"}));function SRe(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:n}=t.head,r=t.results.bindings;if(n.length===1&&e.minimize){const s=n[0];return r.map(l=>d_(l[s])).filter(l=>l!=null)}const{richVars:a,associatedVars:i,standaloneVars:o}=ERe(n);return r.map(s=>TRe(a,i,o,s))}function d_(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return CRe(e);const n=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return n==="decimal"||n==="integer"||n==="float"||n==="double"?parseFloat(e):n==="boolean"?e==="true":e}function CRe(t){return t.match(/http.*\/entity\/statement\//)?IRe(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function IRe(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function ERe(t){let e=t.filter(i=>{const o=new RegExp(`^${i}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(i=>!e.some(o=>i!==o&&i.startsWith(o)));const n=new RegExp(`^(${e.join("|")})[A-Z]`),r=t.filter(i=>n.test(i)),a=t.filter(i=>!e.includes(i)&&!n.test(i));return{richVars:e,associatedVars:r,standaloneVars:a}}function TRe(t,e,n,r){const a={};for(const i of t){const o={},s=d_(r[i]);s!=null&&(o.value=s);for(const l of e)l.startsWith(i)&&NRe(r,i,l,o);Object.keys(o).length>0&&(a[i]=o)}for(const i of n){const o=d_(r[i]);o!=null&&(a[i]=o)}return a}function NRe(t,e,n,r){let a=n.split(e)[1];a=a[0].toLowerCase()+a.slice(1),a=a==="altLabel"?"aliases":a;const i=t[n];i!=null&&(r[a]=i.value)}const _Re=Object.freeze(Object.defineProperty({__proto__:null,aliases:EU,claim:l_,claims:fh,descriptions:IU,entities:zU,entity:BU,form:RU,forms:$U,glosses:_U,labels:CU,lemmas:TU,propertyClaims:xU,propertyQualifiers:sRe,propertySnaks:xU,qualifier:lRe,qualifiers:wU,references:kU,representations:NU,sense:OU,senses:MU,sitelinks:FU,snak:l_,snaks:fh,sparqlResults:SRe},Symbol.toStringTag,{value:"Module"})),RRe=/^\d+[|\d]*$/;function $Re(t){return function(e){Mu(arguments);for(const[f,g]of Object.entries(e))if(f.startsWith("sr")){const y=f.replace(/^sr/,"");if(e[y]!=null)throw new Error(`${y} and ${f} are the same`);e[y]=g}const{search:n,haswbstatement:r,format:a="json",limit:i,offset:o,profile:s,sort:l}=e;let{namespace:u,prop:c}=e;if(!(n||r))throw new Error('missing "search" or "haswbstatement" parameter');let d="";if(n&&(d+=n),r){const f=r instanceof Array?r:[r];for(const g of f)g[0]==="-"?d+=` -haswbstatement:${g.slice(1)}`:d+=` haswbstatement:${g}`}if(i!=null&&(typeof i!="number"||i<1))throw new Error(`invalid limit: ${i}`);if(o!=null&&(typeof o!="number"||o<0))throw new Error(`invalid offset: ${o}`);if(u instanceof Array?u=u.join("|"):typeof u=="number"&&(u=u.toString()),u&&!RRe.test(u))throw new Error(`invalid namespace: ${u}`);if(s!=null&&typeof s!="string")throw new Error(`invalid profile: ${s} (${typeof s}, expected string)`);if(l!=null&&typeof l!="string")throw new Error(`invalid sort: ${l} (${typeof l}, expected string)`);let p;if(c!=null){if(c instanceof Array&&(c=c.join("|")),typeof c!="string")throw new Error(`invalid prop: ${c} (${typeof c}, expected string)`);p=c.toString()}return t({action:"query",list:"search",srsearch:d.trim(),format:a,srnamespace:u,srlimit:i,sroffset:o,srqiprofile:s,srsort:l,srprop:p})}}function yw(t,e){return function(n){if(!e(n))throw new Error(`invalid ${t}: ${n} (type: ${ARe(n)})`)}}const UU=yw("entity id",e_),ORe=yw("property id",fw),MRe=yw("entity page title",cU),PRe=yw("revision id",lU);function ARe(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function jU(t){return function({ids:e,languages:n,props:r,format:a="json",redirects:i}){if(Mu(arguments),!(e&&e.length>0))throw new Error("no id provided");e=ks(e),e.forEach(s=>UU(s)),e.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const o={action:"wbgetentities",ids:e.join("|"),format:a};return i===!1&&(o.redirects="no"),n&&(n=ks(n),o.languages=n.join("|")),r&&r.length>0&&(o.props=ks(r).join("|")),t(o)}}function DRe(t){return function({titles:e,sites:n,languages:r,props:a,format:i="json",redirects:o}){if(Mu(arguments),!(e&&e.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),e=ks(e),n=ks(n).map(LRe),a=ks(a);const s={action:"wbgetentities",titles:e.join("|"),sites:n.join("|"),format:i};return n.length===1&&e.length===1&&(s.normalize=!0),r&&(r=ks(r),s.languages=r.join("|")),a.length>0&&(s.props=a.join("|")),o===!1&&(s.redirects="no"),t(s)}}function LRe(t){return l0(c_,t)?t:t.replace(/-/g,"_")+"wiki"}function FRe(t,e){return function({id:n,revision:r}){return Mu(arguments),UU(n),PRe(r),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${r}`}}function BRe(t){const e=jU(t);return function({ids:n,languages:r,props:a,format:i,redirects:o}){if(Mu(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return zRe(n).map(s=>e({ids:s,languages:r,props:a,format:i,redirects:o}))}}function zRe(t){const e=[];for(;t.length>0;){const n=t.slice(0,50);t=t.slice(50),e.push(n)}return e}function VU(t){return function(e){const n=pU(e);return`${t}?format=json&query=${n}`}}const URe="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",jRe=t=>{const e=VU(t);return function(n){let{properties:r}=n;const{values:a,limit:i,caseInsensitive:o,keepProperties:s}=n,l=o?GRe:WRe,u=s?"":URe;r=ks(r),r.forEach(d=>ORe(d));let c=`SELECT DISTINCT ?subject WHERE { ${VRe(a,l,r,u)} }`;return i&&(c+=` LIMIT ${i}`),e(c)}},VRe=(t,e,n,r)=>(n=n.map(HRe).join("|"),t instanceof Array?"{ "+t.map(WU).map(a=>e(n,a,r)).join("} UNION {")+" }":e(n,WU(t),r)),WU=t=>(hw(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),WRe=(t,e,n)=>`?subject ${t} ${e} .
    ${n}`,GRe=(t,e,n)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${n}`,HRe=t=>"wdt:"+t;function qRe(t){return function({ids:e,format:n,limit:r,start:a,end:i,prop:o,user:s,excludeuser:l,tag:u}){Mu(arguments),e=ks(e),e.forEach(p=>MRe(p));const c=e.length===1,d={action:"query",prop:"revisions"};return d.titles=e.join("|"),d.format=n||"json",c&&(d.rvlimit=r||"max"),c&&a&&(d.rvstart=GU(a)),c&&i&&(d.rvend=GU(i)),o?d.rvprop=ks(o).join("|"):d.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",d.rvslots="*",s&&(d.rvuser=s),l&&(d.rvexcludeuser=l),u&&(d.rvtag=u),t(d)}}const GU=t=>typeof t=="number"&&t<KRe?t:Math.trunc(new Date(t).getTime()/1e3),KRe=new Date("2000-01-01").getTime(),XRe=["item","property","lexeme","form","sense"],YRe=t=>function({search:e,language:n="en",uselang:r,limit:a="20",continue:i="0",format:o="json",type:s="item"}){if(Mu(arguments),r=r||n,!(e&&e.length>0))throw new Error("search can't be empty");if(!l0(XRe,s))throw new Error(`invalid type: ${s}`);return t({action:"wbsearchentities",search:e,language:n,limit:a,continue:i,format:o,uselang:r,type:s})},QRe=typeof location<"u"&&typeof document<"u";function ZRe(t){return e=>{QRe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const n=Object.entries(e).filter(([,a])=>a!=null).map(([a,i])=>[a,String(i)]),r=new URLSearchParams(n).toString();return t+"?"+r}}const JRe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,e$e=Object.assign(Object.assign(Object.assign(Object.assign({simplify:_Re,parse:kRe},B5e),yRe),oRe),K5e);function t$e(t){if(!dU(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:n}=t;let{wgScriptPath:r="w"}=t;if(r=r.replace(/^\//,""),!(e||n))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${JRe}`);let a,i,o;if(e){HU("instance",e),i=e.replace(/\/$/,"").replace(`/${r}/api.php`,""),o=`${i}/${r}/api.php`;const l=ZRe(o);a={searchEntities:YRe(l),cirrusSearchPages:$Re(l),getEntities:jU(l),getManyEntities:BRe(l),getRevisions:qRe(l),getEntityRevision:FRe(e,r),getEntitiesFromSitelinks:DRe(l)}}else a={searchEntities:id("searchEntities"),cirrusSearchPages:id("cirrusSearchPages"),getEntities:id("getEntities"),getManyEntities:id("getManyEntities"),getRevisions:id("getRevisions"),getEntityRevision:id("getEntityRevision"),getEntitiesFromSitelinks:id("getEntitiesFromSitelinks")};let s;return n?(HU("sparqlEndpoint",n),s={sparqlQuery:VU(n),getReverseClaims:jRe(n)}):s={sparqlQuery:KU("sparqlQuery"),getReverseClaims:KU("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:i,apiEndpoint:o}},e$e),a),s)}const HU=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},qU=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},KU=qU("a sparqlEndpoint"),id=qU("an instance"),n$e={sparqlQuery:(t="")=>{const e=t$e({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),n=`
      SELECT ?item ?itemLabel ?artworkLabel ?countryLabel ?genreLabel ?year ?locationLabel ?creatorLabel ?materialLabel ?depictsLabel ?collectionLabel ?iiifManifest (MD5(CONCAT(str(?item),str(RAND()))) as ?random)
      WITH {    
        SELECT ?item (SAMPLE(?artwork) as ?artwork) (SAMPLE(?country) as ?country) (SAMPLE(?genre) as ?genre) (SAMPLE(YEAR(?inception)) as ?year) (SAMPLE(?location) as ?location) (SAMPLE(?creator) as ?creator) (SAMPLE(?material) as ?material) (SAMPLE(?depicts) as ?depicts) (SAMPLE(?collection) as ?collection) (SAMPLE(?iiifManifest) as ?iiifManifest)
        WHERE {
          ?item wdt:P6108 ?iiifManifest ;
                wdt:P195 ?collection ;
                wdt:P31 ?artwork .
                FILTER ( ?artwork = wd:Q3305213 || ?artwork = wd:Q93184 || ?artwork = wd:Q11060274 || ?artwork = wd:Q860861 || ?artwork = wd:Q125191 )
                ${t!==""?`FILTER ( ?material = ${t} )`:""}
                OPTIONAL {
                  ?item wdt:P495 ?countryOfOrigin.
                  FILTER(?countryOfOrigin = wd:Q31 || ?countryOfOrigin = wd:Q213 || ?countryOfOrigin = wd:Q35 || ?countryOfOrigin = wd:Q142 || ?countryOfOrigin = wd:Q36 || ?countryOfOrigin = wd:Q39 || ?countryOfOrigin = wd:Q32 || ?countryOfOrigin = wd:Q40 || ?countryOfOrigin = wd:Q55 || ?countryOfOrigin = wd:Q183 )
                }
                OPTIONAL {
                  ?collection wdt:P17 ?country.
                  FILTER(?country = wd:Q31 || ?country = wd:Q213 || ?country = wd:Q35 || ?country = wd:Q142 || ?country = wd:Q36 || ?country = wd:Q39 || ?country = wd:Q32 || ?country = wd:Q40 || ?country = wd:Q55 || ?country = wd:Q183 )
                }
                BIND(COALESCE(?countryOfOrigin, ?country) AS ?country)
                FILTER(BOUND(?country))

                OPTIONAL { ?item wdt:P136 ?genre. }
                OPTIONAL { ?item wdt:P571 ?inception. }
                OPTIONAL { ?item wdt:P276 ?location. }
                OPTIONAL { ?item wdt:P170 ?creator. }
                OPTIONAL { ?item wdt:P186 ?material. }
                OPTIONAL { ?item wdt:P180 ?depicts. }
        }
        GROUP BY ?item
        LIMIT 100
      } AS %result
      WHERE {
        INCLUDE %result.
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
      } ORDER BY ?random
    `;return e.sparqlQuery(n)}},r$e=()=>{const[t,e]=$.useState([]),[n,r]=$.useState(!0),[a,i]=$.useState(null);return $.useEffect(()=>{(async()=>{try{const o=await fetch(n$e.sparqlQuery());if(!o.ok)throw new Error(`Error: ${o.status} - ${o.statusText}`);const s=await o.json();e(s.results.bindings)}catch(o){i(o.message)}finally{r(!1)}})()},[]),{data:t,loading:n,error:a}},XU=({onClick:t,materialIcon:e})=>ae.jsx(yr,{className:"p-4 text-xl text-black",onClick:t,rounded:!0,inline:!0,children:ae.jsx(_a,{material:e})});function a$e(){const{t}=Jl(),[e,n]=$.useState(0),{addToImageList:r,imageList:a,removeFromImageList:i}=Ks(),{data:o}=r$e(),s=Ks(b=>b.likeImage),l=$.useRef(e),u=$.useRef(null),c=$.useCallback(async b=>{if(!b)return;const x=async S=>{try{return await HB.fetchIIIFIdentifier(S)}catch(C){return console.error("Error:",C),null}},w=(await Promise.all(b.map(async S=>{var C,E,_,N,M;try{const P=await x(S.iiifManifest.value);return P!==null?{id:S.item.value,name:S.itemLabel.value||"",year:((C=S.year)==null?void 0:C.value)||"",country:(E=S.countryLabel)==null?void 0:E.value,location:((_=S?.locationLabel)==null?void 0:_.value)||"",creator:((N=S.creatorLabel)==null?void 0:N.value)||"",url:(M=S.iiifManifest)==null?void 0:M.value,identifier:P,image:`${P}/full/400,/0/default.jpg`,thumbnail:`${P}/full/100,100/0/default.jpg`}:null}catch(P){return console.error("Error processing image:",P),null}}))).filter(S=>S!==null);r(w)},[r]);$.useEffect(()=>{o.length>0&&c(o)},[o]);const d=b=>{n(b),l.current=b},p=e>=0,f=(b,x)=>{b==="right"&&s(v),i(v.id),d(x+1)},g=b=>{var x;l.current>=b&&((x=u.current)==null||x.restoreCard())},y=async b=>{var x;p&&e<a.length&&await((x=u.current)==null?void 0:x.swipe(b))},v=a[e];return ae.jsxs(Mo,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[ae.jsx("div",{className:"p-2",children:ae.jsx("h1",{className:"text-xl",children:t("selectionTitle")})}),ae.jsx("div",{className:"mx-auto h-2/3",children:ae.jsx(z6,{className:"flex shadow-md shadow-[#BC13FE]/90",children:v&&ae.jsxs(ae.Fragment,{children:[ae.jsx(_5e,{ref:u,className:"mb-4",onSwipe:b=>f(b,e),onCardLeftScreen:()=>g(e),preventSwipe:["up","down"],children:ae.jsx("img",{alt:v.name,src:v.image})},v.id),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx(XU,{onClick:()=>y("left"),materialIcon:ae.jsx(xJ,{className:"w-6 h-6"})}),ae.jsx(XU,{onClick:()=>y("right"),materialIcon:ae.jsx(SJ,{className:"w-6 h-6"})})]})]})})}),ae.jsxs("div",{className:"mb-8 p-4 bg-white rounded h-1/3 opacity-90 max-w-lg w-3/4 text-center mx-auto shadow-md shadow-[#BC13FE]/90",children:[ae.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:v?.name}),ae.jsxs("p",{className:"text-gray-600",children:[t("selectionYear")," ",v?.year!==""?v?.year:t("selectionUnknown")]}),ae.jsxs("p",{className:"text-gray-600",children:[t("selectionCreator")," ",v?.creator!==""?v?.creator:t("selectionUnknown")]}),ae.jsxs("p",{className:"text-gray-600",children:[t("selectionLocation")," ",v?.location!==""?v?.location:t("selectionUnknown")]})]})]})}const i$e="/collage.webp",o$e="/logo_animated.svg",s$e=()=>ae.jsx("img",{src:o$e,alt:"Logo GLAMorous Europe",className:"w-96 m-auto"}),l$e=()=>ae.jsx("img",{src:i$e,alt:"Collage GLAMorous Europe",className:"w-96 m-auto",decoding:"async"});function u$e(){const{t}=Jl(),{imageLikeList:e,resetState:n}=Ks(),[r,a]=$.useState(!1),i=()=>{e.length>0?a(!0):window.location.href="/selection"},o=()=>{a(!1)},s=()=>{a(!1),n()};return ae.jsxs(Mo,{margin:"mb-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[ae.jsx(s$e,{}),ae.jsx("h1",{className:"text-xl",children:t("startTitle")}),ae.jsx(l$e,{}),ae.jsx("p",{className:"text-xl",children:t("startSubtitle")}),ae.jsx("p",{className:"text-xl",children:t("startText")}),ae.jsx(yr,{large:!0,className:"text-xl w-1/2 mx-auto h-16",rounded:!0,inline:!0,onClick:i,children:t("startButtonText")}),r&&ae.jsx(H6,{opened:r,onBackdropClick:()=>a(!1),children:ae.jsxs(Ly,{children:[ae.jsx(Py,{title:t("discardModalTitle"),right:ae.jsx(fI,{preventScrollReset:!0,to:"/",onClick:o,children:t("discardModalCancel")})}),ae.jsxs(Mo,{className:"space-y-4",children:[ae.jsx("p",{children:t("discardModalMessage")}),ae.jsx(yr,{className:"p-4 rounded-full text-xl bg-red-500 text-white",children:ae.jsx(fI,{preventScrollReset:!0,to:"/selection",onClick:s,children:t("discardModalConfirm")})}),ae.jsx(yr,{className:"p-4 rounded-full text-xl bg-red-500 text-white",onClick:o,children:t("discardModalNotConfirm")})]})]})})]})}const c$e=dX(hI(ae.jsxs(ip,{path:"/",element:ae.jsx(WNe,{}),children:[ae.jsx(ip,{index:!0,element:ae.jsx(u$e,{})}),ae.jsx(ip,{path:"selection",element:ae.jsx(a$e,{})}),ae.jsx(ip,{path:"collection",element:ae.jsx(PNe,{})}),ae.jsx(ip,{path:"creation",element:ae.jsx(aie,{})})]})));function d$e(){return ae.jsx(vX,{router:c$e})}const p$e={artwork:"Meine Leinwand",artworkCanvasBrightness:"Helligkeit",artworkCanvasContrast:"Kontrast",artworkCanvasOpacity:"Deckkraft",artworkEmpty:"F\xFCge deine eigenen Bildausschnitte hinzu",artworkTitle:"Ziehe die Ausschnitte oder vorbereiteten Sticker in die Leinwand. Du kannst sie ver\xE4ndern und die Leinwand austauschen. Gestalte dein eigenes Kunstwerk und teile es mit deinen Freund:innen!",chooseLanguage:"Sprache w\xE4hlen:",collection:"Meine Sammlung",collectionAddText:"Ausschnitt hinzuf\xFCgen",collectionClose:"Schlie\xDFen",collectionLoading:"Lade...",collectionTitle:"W\xE4hle Bildausschnitte aus deinen Lieblingsobjekten aus, um sie deiner Leinwand hinzuzuf\xFCgen.",discardModalCancel:"Abbrechen",discardModalConfirm:"Ja",discardModalMessage:"M\xF6chtest du deine bisherige Auswahl verwerfen?",discardModalNotConfirm:"Nein",discardModalTitle:"Bisherige Auswahl",selection:"Meine Auswahl",selectionCreator:"K\xFCnstler:in:",selectionLocation:"Sammlungsort:",selectionTitle:"W\xE4hle deine Lieblingsobjekte per Swipe oder Klick. F\xFCge sie somit zu deiner Sammlung hinzu.",selectionUnknown:"Unbekannt",selectionYear:"Entstehungsjahr:",sidebarAbout:"\xDCber uns",sidebarChooseLanguage:"Sprache",sidebarLegal:"Impressum",start:"Start",startButtonText:"Los geht's!",startSubtitle:"Durchst\xF6bere Kunstwerke aus Museen, Galerien, Bibliotheken und Archiven.",startText:"Sammle deine Lieblingsobjekte, w\xE4hle daraus Motive aus und gestalte dein ganz pers\xF6nliches Kunstwerk.",startTitle:"Entdecke mit GLAMorous Europe europ\xE4isches Kulturerbe!"},h$e={translation:p$e},f$e={artwork:"My Canvas",artworkCanvasBrightness:"Helligkeit",artworkCanvasContrast:"Kontrast",artworkCanvasOpacity:"Deckkraft",artworkEmpty:"Add your image details.",artworkTitle:"Drag the image details or prepared stickers onto the canvas. You can change them and replace the canvas. Create your own work of art and share it with your friends!",chooseLanguage:"Choose Language:",collection:"My Collection",collectionAddText:"Add choosen detail",collectionClose:"Close",collectionLoading:"Loading...",collectionTitle:"Select image details from your favorites to add them to your canvas.",discardModalCancel:"Close",discardModalConfirm:"Yes",discardModalMessage:"Would you like to discard your previous selection?",discardModalNotConfirm:"No",discardModalTitle:"Current selection",selection:"My Selection",selectionCreator:"Artist:",selectionLocation:"Location:",selectionTitle:"Select your favorites by swiping or clicking. This will add them to your collection.",selectionUnknown:"Unknown",selectionYear:"Year of creation:",sidebarAbout:"About",sidebarChooseLanguage:"Language",sidebarLegal:"Legal",start:"Start",startButtonText:"Let's go!",startSubtitle:"Explore works of art from museums, galleries, libraries and archives.",startText:"Collect your favorite objects, select details from them and create your very own work of art.",startTitle:"Dating European cultural heritage with GLAMorous Europe!"},m$e={translation:f$e};ia.init({interpolation:{escapeValue:!1},lng:"auto",fallbackLng:"de",resources:{de:{...h$e},en:{...m$e}}});const g$e={scrollAngleRanges:[{start:300},{end:60},{start:120,end:240}],ignoreContextMenu:!0};HM(document.getElementById("root")).render(ae.jsx(G.StrictMode,{children:ae.jsx(Yq,{i18n:ia,children:ae.jsx(VW,{backend:OG,options:g$e,children:ae.jsx(d$e,{})})})}));export{eR as $,Mk as a,TV as b,EV as c,yR as d,Rf as e,G as f,Wa as g,AL as h,Wi as i,GM as j,$ as r};function bw(t){return bw.viteFileDeps||(bw.viteFileDeps=[]),t.map(e=>bw.viteFileDeps[e])}
