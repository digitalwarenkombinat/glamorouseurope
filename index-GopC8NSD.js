function eS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ii(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function HU(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var MO={exports:{}},m1={},PO={exports:{}},Ht={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Qp=Symbol.for("react.element"),qU=Symbol.for("react.portal"),KU=Symbol.for("react.fragment"),XU=Symbol.for("react.strict_mode"),YU=Symbol.for("react.profiler"),QU=Symbol.for("react.provider"),JU=Symbol.for("react.context"),ZU=Symbol.for("react.forward_ref"),eW=Symbol.for("react.suspense"),tW=Symbol.for("react.memo"),nW=Symbol.for("react.lazy"),AO=Symbol.iterator;function rW(t){return t===null||typeof t!="object"?null:(t=AO&&t[AO]||t["@@iterator"],typeof t=="function"?t:null)}var LO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DO=Object.assign,FO={};function Fd(t,e,n){this.props=t,this.context=e,this.refs=FO,this.updater=n||LO}Fd.prototype.isReactComponent={},Fd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Fd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BO(){}BO.prototype=Fd.prototype;function tS(t,e,n){this.props=t,this.context=e,this.refs=FO,this.updater=n||LO}var nS=tS.prototype=new BO;nS.constructor=tS,DO(nS,Fd.prototype),nS.isPureReactComponent=!0;var zO=Array.isArray,jO=Object.prototype.hasOwnProperty,rS={current:null},VO={key:!0,ref:!0,__self:!0,__source:!0};function UO(t,e,n){var r,a={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jO.call(e,r)&&!VO.hasOwnProperty(r)&&(a[r]=e[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Qp,type:t,key:i,ref:o,props:a,_owner:rS.current}}function aW(t,e){return{$$typeof:Qp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qp}function iW(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var WO=/\/+/g;function iS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iW(""+t.key):e.toString(36)}function y1(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qp:case qU:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+iS(o,0):r,zO(a)?(n="",t!=null&&(n=t.replace(WO,"$&/")+"/"),y1(a,e,n,"",function(u){return u})):a!=null&&(aS(a)&&(a=aW(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(WO,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",zO(t))for(var s=0;s<t.length;s++){i=t[s];var l=r+iS(i,s);o+=y1(i,e,n,l,a)}else if(l=rW(t),typeof l=="function")for(t=l.call(t),s=0;!(i=t.next()).done;)i=i.value,l=r+iS(i,s++),o+=y1(i,e,n,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function b1(t,e,n){if(t==null)return t;var r=[],a=0;return y1(t,r,"","",function(i){return e.call(n,i,a++)}),r}function oW(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ka={current:null},v1={transition:null},sW={ReactCurrentDispatcher:Ka,ReactCurrentBatchConfig:v1,ReactCurrentOwner:rS};Ht.Children={map:b1,forEach:function(t,e,n){b1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return b1(t,function(){e++}),e},toArray:function(t){return b1(t,function(e){return e})||[]},only:function(t){if(!aS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},Ht.Component=Fd,Ht.Fragment=KU,Ht.Profiler=YU,Ht.PureComponent=tS,Ht.StrictMode=XU,Ht.Suspense=eW,Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sW,Ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=DO({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rS.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)jO.call(e,l)&&!VO.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Qp,type:t.type,key:a,ref:i,props:r,_owner:o}},Ht.createContext=function(t){return t={$$typeof:JU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QU,_context:t},t.Consumer=t},Ht.createElement=UO,Ht.createFactory=function(t){var e=UO.bind(null,t);return e.type=t,e},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(t){return{$$typeof:ZU,render:t}},Ht.isValidElement=aS,Ht.lazy=function(t){return{$$typeof:nW,_payload:{_status:-1,_result:t},_init:oW}},Ht.memo=function(t,e){return{$$typeof:tW,type:t,compare:e===void 0?null:e}},Ht.startTransition=function(t){var e=v1.transition;v1.transition={};try{t()}finally{v1.transition=e}},Ht.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ht.useCallback=function(t,e){return Ka.current.useCallback(t,e)},Ht.useContext=function(t){return Ka.current.useContext(t)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(t){return Ka.current.useDeferredValue(t)},Ht.useEffect=function(t,e){return Ka.current.useEffect(t,e)},Ht.useId=function(){return Ka.current.useId()},Ht.useImperativeHandle=function(t,e,n){return Ka.current.useImperativeHandle(t,e,n)},Ht.useInsertionEffect=function(t,e){return Ka.current.useInsertionEffect(t,e)},Ht.useLayoutEffect=function(t,e){return Ka.current.useLayoutEffect(t,e)},Ht.useMemo=function(t,e){return Ka.current.useMemo(t,e)},Ht.useReducer=function(t,e,n){return Ka.current.useReducer(t,e,n)},Ht.useRef=function(t){return Ka.current.useRef(t)},Ht.useState=function(t){return Ka.current.useState(t)},Ht.useSyncExternalStore=function(t,e,n){return Ka.current.useSyncExternalStore(t,e,n)},Ht.useTransition=function(){return Ka.current.useTransition()},Ht.version="18.2.0",PO.exports=Ht;var O=PO.exports;const G=Ii(O),GO=eS({__proto__:null,default:G},[O]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var lW=O,uW=Symbol.for("react.element"),cW=Symbol.for("react.fragment"),dW=Object.prototype.hasOwnProperty,hW=lW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pW={key:!0,ref:!0,__self:!0,__source:!0};function HO(t,e,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dW.call(e,r)&&!pW.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:uW,type:t,key:i,ref:o,props:a,_owner:hW.current}}m1.Fragment=cW,m1.jsx=HO,m1.jsxs=HO,MO.exports=m1;var X=MO.exports;const fW={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let gW=class r5{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||fW,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new r5(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new r5(this.logger,e)}};var ss=new gW;class x1{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(n)||0;this.observers[r].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o.apply(o,[e,...r])})}}function Jp(){let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n}function qO(t){return t==null?"":""+t}function mW(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const yW=/###/g;function Zp(t,e,n){function r(s){return s&&s.indexOf("###")>-1?s.replace(yW,"."):s}function a(){return!t||typeof t=="string"}const i=typeof e!="string"?e:e.split(".");let o=0;for(;o<i.length-1;){if(a())return{};const s=r(i[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return a()?{}:{obj:t,k:r(i[o])}}function KO(t,e,n){const{obj:r,k:a}=Zp(t,e,Object);if(r!==void 0||e.length===1){r[a]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),s=Zp(t,o,Object);for(;s.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),s=Zp(t,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${i}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${i}`]=n}function bW(t,e,n,r){const{obj:a,k:i}=Zp(t,e,Object);a[i]=a[i]||[],r&&(a[i]=a[i].concat(n)),r||a[i].push(n)}function w1(t,e){const{obj:n,k:r}=Zp(t,e);if(n)return n[r]}function vW(t,e,n){const r=w1(t,n);return r!==void 0?r:w1(e,n)}function XO(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):XO(t[r],e[r],n):t[r]=e[r]);return t}function Bd(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var xW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function wW(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>xW[e]):t}class kW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const SW=[" ",",","?","!",";"],CW=new kW(20);function EW(t,e,n){e=e||"",n=n||"";const r=SW.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const a=CW.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(n);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i}function oS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,s="";for(let l=i;l<r.length;++l)if(l!==i&&(s+=n),s+=r[l],o=a[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}a=o}return a}function k1(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class YO extends x1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):typeof r=="string"&&i?s.push(...r.split(i)):s.push(r)));const l=w1(this.data,s);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||typeof r!="string"?l:oS(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),a=n,n=s[1]),this.addNamespaces(n),KO(this.data,s,a),i.silent||this.emit("added",e,n,r,a)}addResources(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(typeof r[i]=="string"||Object.prototype.toString.apply(r[i])==="[object Array]")&&this.addResource(e,n,i,r[i],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),a=r,r=n,n=s[1]),this.addNamespaces(n);let l=w1(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?XO(l,r,i):l={...l,...r},KO(this.data,s,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var QO={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,a){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,a))}),e}};const JO={};class X2 extends x1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),mW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ss.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!EW(e,r,a);if(o&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(a)}return typeof i=="string"&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],n),l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const w=n.nsSeparator||this.options.nsSeparator;return a?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let h=d&&d.res;const f=d&&d.usedKey||o,m=d&&d.exactUsedKey||o,y=Object.prototype.toString.apply(h),v=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&h&&typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"&&v.indexOf(y)<0&&!(typeof b=="string"&&y==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...n,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(d.res=w,d.usedParams=this.getUsedParamsDetails(n),d):w}if(i){const w=y==="[object Array]",S=w?[]:{},C=w?m:f;for(const E in h)if(Object.prototype.hasOwnProperty.call(h,E)){const _=`${C}${i}${E}`;S[E]=this.translate(_,{...n,joinArrays:!1,ns:s}),S[E]===_&&(S[E]=h[E])}h=S}}else if(x&&typeof b=="string"&&y==="[object Array]")h=h.join(b),h&&(h=this.extendTranslation(h,e,n,r));else{let w=!1,S=!1;const C=n.count!==void 0&&typeof n.count!="string",E=X2.hasDefaultValue(n),_=C?this.pluralResolver.getSuffix(u,n.count,n):"",N=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",$=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),P=$&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${N}`]||n.defaultValue;!this.isValidLookup(h)&&E&&(w=!0,h=P),this.isValidLookup(h)||(S=!0,h=o);const D=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:h,j=E&&P!==h&&this.options.updateMissing;if(S||w||j){if(this.logger.log(j?"updateKey":"missingKey",u,l,o,j?P:h),i){const Z=this.resolve(o,{...n,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let B=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let Z=0;Z<K.length;Z++)B.push(K[Z]);else this.options.saveMissingTo==="all"?B=this.languageUtils.toResolveHierarchy(n.lng||this.language):B.push(n.lng||this.language);const Y=(Z,H,F)=>{const Q=E&&F!==h?F:D;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,l,H,Q,j,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Z,l,H,Q,j,n),this.emit("missingKey",Z,l,H,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?B.forEach(Z=>{const H=this.pluralResolver.getSuffixes(Z,n);$&&n[`defaultValue${this.options.pluralSeparator}zero`]&&H.indexOf(`${this.options.pluralSeparator}zero`)<0&&H.push(`${this.options.pluralSeparator}zero`),H.forEach(F=>{Y([Z],o+F,n[`defaultValue${F}`]||P)})}):Y(B,o,P))}h=this.extendTranslation(h,e,n,d,r),S&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${o}`),(S||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?h:void 0):h=this.options.parseMissingKeyHandler(h))}return a?(d.res=h,d.usedParams=this.getUsedParamsDetails(n),d):h}extendTranslation(e,n,r,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const h=e.match(this.interpolator.nestingRegexp);c=h&&h.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),u){const h=e.match(this.interpolator.nestingRegexp),f=h&&h.length;c<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];return i&&i[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=QO.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,s;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;a=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=n.count!==void 0&&typeof n.count!="string",f=h&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),m=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(v=>{this.isValidLookup(r)||(s=v,!JO[`${y[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(JO[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${y.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(r))return;o=b;const x=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,b,v,n);else{let S;h&&(S=this.pluralResolver.getSuffix(b,n.count,n));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(x.push(c+S),n.ordinal&&S.indexOf(E)===0&&x.push(c+S.replace(E,this.options.pluralSeparator)),f&&x.push(c+C)),m){const _=`${c}${this.options.contextSeparator}${n.context}`;x.push(_),h&&(x.push(_+S),n.ordinal&&S.indexOf(E)===0&&x.push(_+S.replace(E,this.options.pluralSeparator)),f&&x.push(_+C))}}let w;for(;w=x.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(b,v,w,n))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,a):this.resourceStore.getResource(e,n,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function sS(t){return t.charAt(0).toUpperCase()+t.slice(1)}class ZO{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ss.create("languageUtils")}getScriptPartFromCode(e){if(e=k1(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=k1(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=sS(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=sS(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=sS(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(i=>{if(i===a||!(i.indexOf("-")<0&&a.indexOf("-")<0)&&i.indexOf(a)===0)return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):typeof e=="string"&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}let IW=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],TW={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const NW=["v1","v2","v3"],_W=["v4"],eR={zero:0,one:1,two:2,few:3,many:4,other:5};function OW(){const t={};return IW.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:TW[e.fc]}})}),t}class RW{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ss.create("pluralResolver"),(!this.options.compatibilityJSON||_W.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=OW()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(k1(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${n}${a}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,i)=>eR[a]-eR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(e,a,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let a=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const i=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!NW.includes(this.options.compatibilityJSON)}}function tR(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=vW(t,e,n);return!i&&a&&typeof n=="string"&&(i=oS(t,n,r),i===void 0&&(i=oS(e,n,r))),i}class $W{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ss.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:wW,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Bd(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Bd(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Bd(n.nestingPrefix):n.nestingPrefixEscaped||Bd("$t("),this.nestingSuffix=n.nestingSuffix?Bd(n.nestingSuffix):n.nestingSuffixEscaped||Bd(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,a){let i,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(f){return f.replace(/\$/g,"$$$$")}const c=f=>{if(f.indexOf(this.formatSeparator)<0){const b=tR(n,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...a,...n,interpolationkey:f}):b}const m=f.split(this.formatSeparator),y=m.shift().trim(),v=m.join(this.formatSeparator).trim();return this.format(tR(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...a,...n,interpolationkey:y})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,h=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>u(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?u(this.escape(f)):u(f)}].forEach(f=>{for(s=0;i=f.regex.exec(e);){const m=i[1].trim();if(o=c(m),o===void 0)if(typeof d=="function"){const v=d(e,i,a);o=typeof v=="string"?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,m))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=qO(o));const y=f.safeValue(o);if(e=e.replace(i[0],y),h?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;function s(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let h=`{${d[1]}`;l=d[0],h=this.interpolate(h,o);const f=h.match(/'/g),m=h.match(/"/g);(f&&f.length%2===0&&!m||m.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),u&&(o={...u,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${h}`}return delete o.defaultValue,l}for(;a=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const c=a[1].split(this.formatSeparator).map(d=>d.trim());a[1]=c.shift(),l=c,u=!0}if(i=n(s.call(this,a[1].trim(),o),o),i&&a[0]===e&&typeof i!="string")return i;typeof i!="string"&&(i=qO(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((c,d)=>this.format(c,d,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}function MW(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(i=>{if(!i)return;const[o,...s]=i.split(":"),l=s.join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=l),l==="false"&&(n[o.trim()]=!1),l==="true"&&(n[o.trim()]=!0),isNaN(l)||(n[o.trim()]=parseInt(l,10))})}return{formatName:e,formatOptions:n}}function zd(t){const e={};return function(n,r,a){const i=r+JSON.stringify(a);let o=e[i];return o||(o=t(k1(r),a),e[i]=o),o(n)}}class PW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ss.create("formatter"),this.options=e,this.formats={number:zd((n,r)=>{const a=new Intl.NumberFormat(n,{...r});return i=>a.format(i)}),currency:zd((n,r)=>{const a=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>a.format(i)}),datetime:zd((n,r)=>{const a=new Intl.DateTimeFormat(n,{...r});return i=>a.format(i)}),relativetime:zd((n,r)=>{const a=new Intl.RelativeTimeFormat(n,{...r});return i=>a.format(i,r.range||"day")}),list:zd((n,r)=>{const a=new Intl.ListFormat(n,{...r});return i=>a.format(i)})},this.init(e)}init(e){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=zd(n)}format(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((i,o)=>{const{formatName:s,formatOptions:l}=MW(o);if(this.formats[s]){let u=i;try{const c=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},d=c.locale||c.lng||a.locale||a.lng||r;u=this.formats[s](i,d,{...l,...a,...c})}catch(c){this.logger.warn(c)}return u}else this.logger.warn(`there was no format function for ${s}`);return i},e)}}function AW(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class LW extends x1{constructor(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=ss.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(e,n,r,a){const i={},o={},s={},l={};return e.forEach(u=>{let c=!0;n.forEach(d=>{const h=`${u}|${d}`;!r.reload&&this.store.hasResourceBundle(u,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,c=!1,o[h]===void 0&&(o[h]=!0),i[h]===void 0&&(i[h]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const a=e.split("|"),i=a[0],o=a[1];n&&this.emit("failedLoading",i,o,n),r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const s={};this.queue.forEach(l=>{bW(l.loaded,[i],o),AW(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,a+1,i*2,o)},i);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const i=this.queueLoad(e,n,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,o),!o&&s&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,s),this.loaded(e,o,s)})}saveMissing(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,n,r,a,l):c=u(e,n,r,a),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(e,n,r,a,s,l)}!e||!e[0]||this.store.addResource(e[0],n,r,a)}}}function nR(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function rR(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function S1(){}function DW(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{typeof t[e]=="function"&&(t[e]=t[e].bind(t))})}class R0 extends x1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=rR(e),this.services={},this.logger=ss,this.modules={external:[]},DW(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=nR();this.options={...a,...this.options,...rR(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function i(l){return l?typeof l=="function"?new l:l:null}if(!this.options.isClone){this.modules.logger?ss.init(i(this.modules.logger),this.options):ss.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=PW);const u=new ZO(this.options);this.store=new YO(this.options.resources,this.options);const c=this.services;c.logger=ss,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new RW(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=i(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new $W(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new LW(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var h=arguments.length,f=new Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];e.emit(d,...f)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new X2(this.services,this.options),this.translator.on("*",function(d){for(var h=arguments.length,f=new Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];e.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=S1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const o=Jp(),s=()=>{const l=(u,c)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(c),r(u,c)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;const r=typeof e=="string"?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],i=o=>{!o||o==="cimode"||this.services.languageUtils.toResolveHierarchy(o).forEach(s=>{s!=="cimode"&&a.indexOf(s)<0&&a.push(s)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>i(o)),this.options.preload&&this.options.preload.forEach(o=>i(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,n,r){const a=Jp();return e||(e=this.languages),n||(n=this.options.ns),r||(r=S1),this.services.backendConnector.reload(e,n,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&QO.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const a=Jp();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),a}getFixedT(e,n,r){var a=this;const i=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=a.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix=l.keyPrefix||r||i.keyPrefix;const h=a.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(m=>`${l.keyPrefix}${h}${m}`):f=l.keyPrefix?`${l.keyPrefix}${h}${o}`:o,a.t(f,l)};return typeof e=="string"?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,n){const r=Jp();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Jp();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0);return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new ZO(nR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new R0(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new R0(a);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new YO(this.store.data,a),i.services.resourceStore=i.store),i.translator=new X2(i.services,a),i.translator.on("*",function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];i.emit(o,...l)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const sa=R0.createInstance();sa.createInstance=R0.createInstance,sa.createInstance,sa.dir,sa.init,sa.loadResources,sa.reloadResources,sa.use,sa.changeLanguage,sa.getFixedT,sa.t,sa.exists,sa.setDefaultNamespace,sa.hasLoadedNamespace,sa.loadNamespaces,sa.loadLanguages;function aR(t){let e=null;return()=>(e==null&&(e=t()),e)}function FW(t,e){return t.filter(n=>n!==e)}function BW(t,e){const n=new Set,r=i=>n.add(i);t.forEach(r),e.forEach(r);const a=[];return n.forEach(i=>a.push(i)),a}class zW{enter(e){const n=this.entered.length,r=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=BW(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=FW(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class jW{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const a=this.config.exposeProperties[r];a!=null&&(n[r]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const iR="__NATIVE_FILE__",oR="__NATIVE_URL__",sR="__NATIVE_TEXT__",lR="__NATIVE_HTML__",uR=Object.freeze(Object.defineProperty({__proto__:null,FILE:iR,HTML:lR,TEXT:sR,URL:oR},Symbol.toStringTag,{value:"Module"}));function lS(t,e,n){return e.reduce((a,i)=>a||t.getData(i),"")??n}const uS={[iR]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[lR]:{exposeProperties:{html:(t,e)=>lS(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[oR]:{exposeProperties:{urls:(t,e)=>lS(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[sR]:{exposeProperties:{text:(t,e)=>lS(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function VW(t,e){const n=uS[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new jW(n);return r.loadDataTransfer(e),r}function cS(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(uS).filter(n=>{const r=uS[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const UW=aR(()=>/firefox/i.test(navigator.userAgent)),cR=aR(()=>!!window.safari);class dR{interpolate(e){const{xs:n,ys:r,c1s:a,c2s:i,c3s:o}=this;let s=n.length-1;if(e===n[s])return r[s];let l=0,u=o.length-1,c;for(;l<=u;){c=Math.floor(.5*(l+u));const f=n[c];if(f<e)l=c+1;else if(f>e)u=c-1;else return r[c]}s=Math.max(0,u);const d=e-n[s],h=d*d;return r[s]+a[s]*d+i[s]*h+o[s]*d*h}constructor(e,n){const{length:r}=e,a=[];for(let f=0;f<r;f++)a.push(f);a.sort((f,m)=>e[f]<e[m]?-1:1);const i=[],o=[];let s,l;for(let f=0;f<r-1;f++)s=e[f+1]-e[f],l=n[f+1]-n[f],i.push(s),o.push(l/s);const u=[o[0]];for(let f=0;f<i.length-1;f++){const m=o[f],y=o[f+1];if(m*y<=0)u.push(0);else{s=i[f];const v=i[f+1],b=s+v;u.push(3*b/((b+v)/m+(b+s)/y))}}u.push(o[o.length-1]);const c=[],d=[];let h;for(let f=0;f<u.length-1;f++){h=o[f];const m=u[f],y=1/i[f],v=m+u[f+1]-h-h;c.push((h-m-v)*y),d.push(v*y*y)}this.xs=e,this.ys=n,this.c1s=u,this.c2s=c,this.c3s=d}}const WW=1;function hR(t){const e=t.nodeType===WW?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function C1(t){return{x:t.clientX,y:t.clientY}}function GW(t){var e;return t.nodeName==="IMG"&&(UW()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function HW(t,e,n,r){let a=t?e.width:n,i=t?e.height:r;return cR()&&t&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function qW(t,e,n,r,a){const i=GW(e),o=hR(i?t:e),s={x:n.x-o.x,y:n.y-o.y},{offsetWidth:l,offsetHeight:u}=t,{anchorX:c,anchorY:d}=r,{dragPreviewWidth:h,dragPreviewHeight:f}=HW(i,e,l,u),m=()=>{let S=new dR([0,.5,1],[s.y,s.y/u*f,s.y+f-u]).interpolate(d);return cR()&&i&&(S+=(window.devicePixelRatio-1)*f),S},y=()=>new dR([0,.5,1],[s.x,s.x/l*h,s.x+h-l]).interpolate(c),{offsetX:v,offsetY:b}=a,x=v===0||v,w=b===0||b;return{x:x?v:y(),y:w?b:m()}}let KW=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,e){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=e}};function XW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){XW(t,a,n[a])})}return t}class YW{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const a=o=>this.handleDragStart(o,e),i=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",i),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),a=o=>this.handleDragOver(o,e),i=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",a),n.addEventListener("drop",i),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",a),n.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return pR({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return pR({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(uR).some(n=>uR[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=VW(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&hR(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=C1(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,l=cS(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const c=this.monitor.getSourceId(),d=this.sourceNodes.get(c),h=this.sourcePreviewNodes.get(c)||d;if(h){const{anchorX:f,anchorY:m,offsetX:y,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),b=qW(d,h,o,{anchorX:f,anchorY:m},{offsetX:y,offsetY:v});s.setDragImage(h,b.x,b.y)}}try{s?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:o}=a,s=cS(o);s&&this.beginDragNativeItem(s,o)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:C1(a)}),i.some(o=>this.monitor.canDropOnTarget(o))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=C1(a),this.scheduleHover(i),(i||[]).some(o=>this.monitor.canDropOnTarget(o))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else cS(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:C1(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new KW(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new zW(this.isNodeInDocument)}}const QW=function(t,e,n){return new YW(t,e,n)};var fR=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},mt=(t,e,n)=>(fR(t,e,"read from private field"),n?n.call(t):e.get(t)),Qi=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},oc=(t,e,n,r)=>(fR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),sc,JW=class{constructor(){Qi(this,sc,void 0),this.register=t=>{mt(this,sc).push(t)},this.unregister=t=>{let e;for(;(e=mt(this,sc).indexOf(t))!==-1;)mt(this,sc).splice(e,1)},this.backendChanged=t=>{for(let e of mt(this,sc))e.backendChanged(t)},oc(this,sc,[])}};sc=new WeakMap;var Ti,ef,Ni,Vs,jl,dS,hS,pS,E1,I1,tf,gR=class K2{constructor(e,n,r){if(Qi(this,Ti,void 0),Qi(this,ef,void 0),Qi(this,Ni,void 0),Qi(this,Vs,void 0),Qi(this,jl,void 0),Qi(this,dS,(a,i,o)=>{if(!o.backend)throw new Error(`You must specify a 'backend' property in your Backend entry: ${JSON.stringify(o)}`);let s=o.backend(a,i,o.options),l=o.id,u=!o.id&&s&&s.constructor;if(u&&(l=s.constructor.name),l)u&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error(`You must specify an 'id' property in your Backend entry: ${JSON.stringify(o)}
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`);if(mt(this,Ni)[l])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        ${JSON.stringify(o)} (conflicts with: ${JSON.stringify(mt(this,Ni)[l])})`);return{id:l,instance:s,preview:o.preview??!1,transition:o.transition,skipDispatchOnTransition:o.skipDispatchOnTransition??!1}}),this.setup=()=>{if(!(typeof window>"u")){if(K2.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");K2.isSetUp=!0,mt(this,hS).call(this,window),mt(this,Ni)[mt(this,Ti)].instance.setup()}},this.teardown=()=>{typeof window>"u"||(K2.isSetUp=!1,mt(this,pS).call(this,window),mt(this,Ni)[mt(this,Ti)].instance.teardown())},this.connectDragSource=(a,i,o)=>mt(this,tf).call(this,"connectDragSource",a,i,o),this.connectDragPreview=(a,i,o)=>mt(this,tf).call(this,"connectDragPreview",a,i,o),this.connectDropTarget=(a,i,o)=>mt(this,tf).call(this,"connectDropTarget",a,i,o),this.profile=()=>mt(this,Ni)[mt(this,Ti)].instance.profile(),this.previewEnabled=()=>mt(this,Ni)[mt(this,Ti)].preview,this.previewsList=()=>mt(this,ef),this.backendsList=()=>mt(this,Vs),Qi(this,hS,a=>{mt(this,Vs).forEach(i=>{i.transition&&a.addEventListener(i.transition.event,mt(this,E1))})}),Qi(this,pS,a=>{mt(this,Vs).forEach(i=>{i.transition&&a.removeEventListener(i.transition.event,mt(this,E1))})}),Qi(this,E1,a=>{var i;let o=mt(this,Ti);if(mt(this,Vs).some(s=>s.id!==mt(this,Ti)&&s.transition&&s.transition.check(a)?(oc(this,Ti,s.id),!0):!1),mt(this,Ti)!==o){mt(this,Ni)[o].instance.teardown(),Object.keys(mt(this,jl)).forEach(c=>{let d=mt(this,jl)[c];d.unsubscribe(),d.unsubscribe=mt(this,I1).call(this,d.func,...d.args)}),mt(this,ef).backendChanged(this);let s=mt(this,Ni)[mt(this,Ti)];if(s.instance.setup(),s.skipDispatchOnTransition)return;let l=a.constructor,u=new l(a.type,a);(i=a.target)==null||i.dispatchEvent(u)}}),Qi(this,I1,(a,i,o,s)=>mt(this,Ni)[mt(this,Ti)].instance[a](i,o,s)),Qi(this,tf,(a,i,o,s)=>{let l=`${a}_${i}`,u=mt(this,I1).call(this,a,i,o,s);return mt(this,jl)[l]={func:a,args:[i,o,s],unsubscribe:u},()=>{mt(this,jl)[l].unsubscribe(),delete mt(this,jl)[l]}}),!r||!r.backends||r.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);oc(this,ef,new JW),oc(this,Ni,{}),oc(this,Vs,[]),r.backends.forEach(a=>{let i=mt(this,dS).call(this,e,n,a);mt(this,Ni)[i.id]=i,mt(this,Vs).push(i)}),oc(this,Ti,mt(this,Vs)[0].id),oc(this,jl,{})}};Ti=new WeakMap,ef=new WeakMap,Ni=new WeakMap,Vs=new WeakMap,jl=new WeakMap,dS=new WeakMap,hS=new WeakMap,pS=new WeakMap,E1=new WeakMap,I1=new WeakMap,tf=new WeakMap,gR.isSetUp=!1;var ZW=gR,eG=(t,e,n)=>new ZW(t,e,n),mR=(t,e)=>({event:t,check:e}),tG=mR("touchstart",t=>{let e=t;return e.touches!==null&&e.touches!==void 0}),nG=mR("mousedown",t=>t.type.indexOf("touch")===-1&&t.type.indexOf("mouse")!==-1);const fS=O.createContext({dragDropManager:void 0});function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function rG(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aG(t){var e=rG(t,"string");return nf(e)=="symbol"?e:String(e)}function iG(t,e,n){return e=aG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yR(Object(n),!0).forEach(function(r){iG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ta(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var vR=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),gS=function(){return Math.random().toString(36).substring(7).split("").join(".")},T1={INIT:"@@redux/INIT"+gS(),REPLACE:"@@redux/REPLACE"+gS(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+gS()}};function oG(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function mS(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ta(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ta(1));return n(mS)(t,e)}if(typeof t!="function")throw new Error(Ta(2));var a=t,i=e,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(Ta(3));return i}function d(y){if(typeof y!="function")throw new Error(Ta(4));if(l)throw new Error(Ta(5));var v=!0;return u(),s.push(y),function(){if(v){if(l)throw new Error(Ta(6));v=!1,u();var b=s.indexOf(y);s.splice(b,1),o=null}}}function h(y){if(!oG(y))throw new Error(Ta(7));if(typeof y.type>"u")throw new Error(Ta(8));if(l)throw new Error(Ta(9));try{l=!0,i=a(i,y)}finally{l=!1}for(var v=o=s,b=0;b<v.length;b++){var x=v[b];x()}return y}function f(y){if(typeof y!="function")throw new Error(Ta(10));a=y,h({type:T1.REPLACE})}function m(){var y,v=d;return y={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ta(11));function x(){b.next&&b.next(c())}x();var w=v(x);return{unsubscribe:w}}},y[vR]=function(){return this},y}return h({type:T1.INIT}),r={dispatch:h,subscribe:d,getState:c,replaceReducer:f},r[vR]=m,r}function sG(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:T1.INIT});if(typeof r>"u")throw new Error(Ta(12));if(typeof n(void 0,{type:T1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ta(13))})}function lG(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];typeof t[a]=="function"&&(n[a]=t[a])}var i=Object.keys(n),o;try{sG(n)}catch(s){o=s}return function(s,l){if(s===void 0&&(s={}),o)throw o;for(var u=!1,c={},d=0;d<i.length;d++){var h=i[d],f=n[h],m=s[h],y=f(m,l);if(typeof y>"u")throw l&&l.type,new Error(Ta(14));c[h]=y,u=u||y!==m}return u=u||i.length!==Object.keys(s).length,u?c:s}}function xR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,a){return function(){return r(a.apply(void 0,arguments))}})}function uG(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var a=r.apply(void 0,arguments),i=function(){throw new Error(Ta(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map(function(l){return l(o)});return i=xR.apply(void 0,s)(a.dispatch),bR(bR({},a),{},{dispatch:i})}}}function _t(t,e,...n){if(cG()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;r=new Error(e.replace(/%s/g,function(){return n[a++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function cG(){return typeof process<"u"&&!0}function dG(t,e,n){return e.split(".").reduce((r,a)=>r&&r[a]?r[a]:n||null,t)}function hG(t,e){return t.filter(n=>n!==e)}function wR(t){return typeof t=="object"}function pG(t,e){const n=new Map,r=i=>{n.set(i,n.has(i)?n.get(i)+1:1)};t.forEach(r),e.forEach(r);const a=[];return n.forEach((i,o)=>{i===1&&a.push(o)}),a}function fG(t,e){return t.filter(n=>e.indexOf(n)>-1)}const yS="dnd-core/INIT_COORDS",N1="dnd-core/BEGIN_DRAG",bS="dnd-core/PUBLISH_DRAG_SOURCE",_1="dnd-core/HOVER",O1="dnd-core/DROP",R1="dnd-core/END_DRAG";function kR(t,e){return{type:yS,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const gG={type:yS,payload:{clientOffset:null,sourceClientOffset:null}};function mG(t){return function(e=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:a,getSourceClientOffset:i}=n,o=t.getMonitor(),s=t.getRegistry();t.dispatch(kR(a)),yG(e,o,s);const l=xG(e,o);if(l==null){t.dispatch(gG);return}let u=null;if(a){if(!i)throw new Error("getSourceClientOffset must be defined");bG(i),u=i(l)}t.dispatch(kR(a,u));const c=s.getSource(l).beginDrag(o,l);if(c==null)return;vG(c),s.pinSource(l);const d=s.getSourceType(l);return{type:N1,payload:{itemType:d,item:c,sourceId:l,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!r}}}}function yG(t,e,n){_t(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){_t(n.getSource(r),"Expected sourceIds to be registered.")})}function bG(t){_t(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function vG(t){_t(wR(t),"Item must be an object.")}function xG(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function wG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){wG(t,a,n[a])})}return t}function SG(t){return function(e={}){const n=t.getMonitor(),r=t.getRegistry();CG(n),TG(n).forEach((a,i)=>{const o=EG(a,i,r,n),s={type:O1,payload:{dropResult:kG({},e,o)}};t.dispatch(s)})}}function CG(t){_t(t.isDragging(),"Cannot call drop while not dragging."),_t(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function EG(t,e,n,r){const a=n.getTarget(t);let i=a?a.drop(r,t):void 0;return IG(i),typeof i>"u"&&(i=e===0?{}:r.getDropResult()),i}function IG(t){_t(typeof t>"u"||wR(t),"Drop result must either be an object or undefined.")}function TG(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function NG(t){return function(){const e=t.getMonitor(),n=t.getRegistry();_G(e);const r=e.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(e,r),n.unpinSource()),{type:R1}}}function _G(t){_t(t.isDragging(),"Cannot call endDrag while not dragging.")}function vS(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function OG(t){return function(e,{clientOffset:n}={}){RG(e);const r=e.slice(0),a=t.getMonitor(),i=t.getRegistry(),o=a.getItemType();return MG(r,i,o),$G(r,a,i),PG(r,a,i),{type:_1,payload:{targetIds:r,clientOffset:n||null}}}}function RG(t){_t(Array.isArray(t),"Expected targetIds to be an array.")}function $G(t,e,n){_t(e.isDragging(),"Cannot call hover while not dragging."),_t(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const a=t[r];_t(t.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array.");const i=n.getTarget(a);_t(i,"Expected targetIds to be registered.")}}function MG(t,e,n){for(let r=t.length-1;r>=0;r--){const a=t[r],i=e.getTargetType(a);vS(i,n)||t.splice(r,1)}}function PG(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function AG(t){return function(){if(t.getMonitor().isDragging())return{type:bS}}}function LG(t){return{beginDrag:mG(t),publishDragSource:AG(t),hover:OG(t),drop:SG(t),endDrag:NG(t)}}class DG{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(i){return(...o)=>{const s=i.apply(e,o);typeof s<"u"&&n(s)}}const a=LG(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=r(s),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function FG(t,e){return{x:t.x+e.x,y:t.y+e.y}}function SR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function BG(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:SR(FG(e,r),n)}function zG(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:SR(e,n)}const rf=[],xS=[];rf.__IS_NONE__=!0,xS.__IS_ALL__=!0;function jG(t,e){return t===rf?!1:t===xS||typeof e>"u"?!0:fG(e,t).length>0}class VG{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;_t(typeof e=="function","listener must be a function."),_t(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!jG(o.dirtyHandlerIds,r)||e()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(e){_t(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const a=this.store.getState().dragOffset;a!==n&&(n=a,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return _t(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(_t(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),a=this.getItemType();return vS(r,a)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(_t(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),a=this.getItemType();return r!==a?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),i=this.getItemType();if(i&&!vS(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return BG(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return zG(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const CR=typeof global<"u"?global:self,ER=CR.MutationObserver||CR.WebKitMutationObserver;function IR(t){return function(){const e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}function UG(t){let e=1;const n=new ER(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const WG=typeof ER=="function"?UG:IR;class GG{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,a=e.length-this.index;r<a;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=WG(this.flush),this.requestErrorThrow=IR(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class HG{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class qG{create(e){const n=this.freeTasks,r=n.length?n.pop():new HG(this.onError,a=>n[n.length]=a);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const TR=new GG,KG=new qG(TR.registerPendingError);function XG(t){TR.enqueueTask(KG.create(t))}const wS="dnd-core/ADD_SOURCE",kS="dnd-core/ADD_TARGET",SS="dnd-core/REMOVE_SOURCE",$1="dnd-core/REMOVE_TARGET";function YG(t){return{type:wS,payload:{sourceId:t}}}function QG(t){return{type:kS,payload:{targetId:t}}}function JG(t){return{type:SS,payload:{sourceId:t}}}function ZG(t){return{type:$1,payload:{targetId:t}}}function eH(t){_t(typeof t.canDrag=="function","Expected canDrag to be a function."),_t(typeof t.beginDrag=="function","Expected beginDrag to be a function."),_t(typeof t.endDrag=="function","Expected endDrag to be a function.")}function tH(t){_t(typeof t.canDrop=="function","Expected canDrop to be a function."),_t(typeof t.hover=="function","Expected hover to be a function."),_t(typeof t.drop=="function","Expected beginDrag to be a function.")}function CS(t,e){if(e&&Array.isArray(t)){t.forEach(n=>CS(n,!1));return}_t(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Ji;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Ji||(Ji={}));let nH=0;function rH(){return nH++}function aH(t){const e=rH().toString();switch(t){case Ji.SOURCE:return`S${e}`;case Ji.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function NR(t){switch(t[0]){case"S":return Ji.SOURCE;case"T":return Ji.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function _R(t,e){const n=t.entries();let r=!1;do{const{done:a,value:[,i]}=n.next();if(i===e)return!0;r=!!a}while(!r);return!1}class iH{addSource(e,n){CS(e),eH(n);const r=this.addHandler(Ji.SOURCE,e,n);return this.store.dispatch(YG(r)),r}addTarget(e,n){CS(e,!0),tH(n);const r=this.addHandler(Ji.TARGET,e,n);return this.store.dispatch(QG(r)),r}containsHandler(e){return _R(this.dragSources,e)||_R(this.dropTargets,e)}getSource(e,n=!1){return _t(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return _t(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return _t(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return _t(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return NR(e)===Ji.SOURCE}isTargetId(e){return NR(e)===Ji.TARGET}removeSource(e){_t(this.getSource(e),"Expected an existing source."),this.store.dispatch(JG(e)),XG(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){_t(this.getTarget(e),"Expected an existing target."),this.store.dispatch(ZG(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);_t(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){_t(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const a=aH(e);return this.types.set(a,n),e===Ji.SOURCE?this.dragSources.set(a,r):e===Ji.TARGET&&this.dropTargets.set(a,r),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const oH=(t,e)=>t===e;function sH(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function lH(t,e,n=oH){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function uH(t=rf,e){switch(e.type){case _1:break;case wS:case kS:case $1:case SS:return rf;case N1:case bS:case R1:case O1:default:return xS}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,a=pG(n,r);if(!(a.length>0||!lH(n,r)))return rf;const i=r[r.length-1],o=n[n.length-1];return i!==o&&(i&&a.push(i),o&&a.push(o)),a}function cH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){cH(t,a,n[a])})}return t}const OR={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function hH(t=OR,e){const{payload:n}=e;switch(e.type){case yS:case N1:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case _1:return sH(t.clientOffset,n.clientOffset)?t:dH({},t,{clientOffset:n.clientOffset});case R1:case O1:return OR;default:return t}}function pH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){pH(t,a,n[a])})}return t}const fH={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function gH(t=fH,e){const{payload:n}=e;switch(e.type){case N1:return jd({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case bS:return jd({},t,{isSourcePublic:!0});case _1:return jd({},t,{targetIds:n.targetIds});case $1:return t.targetIds.indexOf(n.targetId)===-1?t:jd({},t,{targetIds:hG(t.targetIds,n.targetId)});case O1:return jd({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case R1:return jd({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function mH(t=0,e){switch(e.type){case wS:case kS:return t+1;case SS:case $1:return t-1;default:return t}}function yH(t=0){return t+1}function bH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){bH(t,a,n[a])})}return t}function xH(t={},e){return{dirtyHandlerIds:uH(t.dirtyHandlerIds,{type:e.type,payload:vH({},e.payload,{prevTargetIds:dG(t,"dragOperation.targetIds",[])})}),dragOffset:hH(t.dragOffset,e),refCount:mH(t.refCount,e),dragOperation:gH(t.dragOperation,e),stateId:yH(t.stateId)}}function wH(t,e=void 0,n={},r=!1){const a=kH(r),i=new VG(a,new iH(a)),o=new DG(a,i),s=t(o,e,n);return o.receiveBackend(s),o}function kH(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return mS(xH,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function SH(t,e){if(t==null)return{};var n=CH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}let RR=0;const M1=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var EH=O.memo(function(t){var{children:e}=t,n=SH(t,["children"]);const[r,a]=IH(n);return O.useEffect(()=>{if(a){const i=$R();return++RR,()=>{--RR===0&&(i[M1]=null)}}},[]),X.jsx(fS.Provider,{value:r,children:e})});function IH(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=TH(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function TH(t,e=$R(),n,r){const a=e;return a[M1]||(a[M1]={dragDropManager:wH(t,e,n,r)}),a[M1]}function $R(){return typeof global<"u"?global:window}var NH=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!==0;){var o=i[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const _H=Ii(NH),lc=typeof window<"u"?O.useLayoutEffect:O.useEffect;function MR(t,e,n){const[r,a]=O.useState(()=>e(t)),i=O.useCallback(()=>{const o=e(t);_H(r,o)||(a(o),n&&n())},[r,t,n]);return lc(i),[r,i]}function OH(t,e,n){const[r,a]=MR(t,e,n);return lc(function(){const i=t.getHandlerId();if(i!=null)return t.subscribeToStateChange(a,{handlerIds:[i]})},[t,a]),r}function PR(t,e,n){return OH(e,t||(()=>({})),()=>n.reconnect())}function AR(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),O.useMemo(()=>typeof t=="function"?t():t,n)}function RH(t){return O.useMemo(()=>t.hooks.dragSource(),[t])}function $H(t){return O.useMemo(()=>t.hooks.dragPreview(),[t])}let ES=!1,IS=!1;class MH{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){_t(!ES,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ES=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ES=!1}}isDragging(){if(!this.sourceId)return!1;_t(!IS,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return IS=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{IS=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let TS=!1;class PH{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;_t(!TS,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return TS=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{TS=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function AH(t,e,n){const r=n.getRegistry(),a=r.addTarget(t,e);return[a,()=>r.removeTarget(a)]}function LH(t,e,n){const r=n.getRegistry(),a=r.addSource(t,e);return[a,()=>r.removeSource(a)]}function NS(t,e,n,r){let a=n?n.call(r,t,e):void 0;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<i.length;l++){const u=i[l];if(!s(u))return!1;const c=t[u],d=e[u];if(a=n?n.call(r,c,d,u):void 0,a===!1||a===void 0&&c!==d)return!1}return!0}function _S(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function DH(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function FH(t){return(e=null,n=null)=>{if(!O.isValidElement(e)){const a=e;return t(a,n),a}const r=e;return DH(r),BH(r,n?a=>t(a,n):t)}}function LR(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const a=FH(r);e[n]=()=>a}}),e}function DR(t,e){typeof t=="function"?t(e):t.current=e}function BH(t,e){const n=t.ref;return _t(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?O.cloneElement(t,{ref:r=>{DR(n,r),DR(e,r)}}):O.cloneElement(t,{ref:e})}class zH{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!NS(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!NS(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=LR({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,_S(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,_S(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class jH{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!NS(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=LR({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,_S(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function uc(){const{dragDropManager:t}=O.useContext(fS);return _t(t!=null,"Expected drag drop context"),t}function VH(t,e){const n=uc(),r=O.useMemo(()=>new zH(n.getBackend()),[n]);return lc(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),lc(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function UH(){const t=uc();return O.useMemo(()=>new MH(t),[t])}class WH{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,a=this.monitor,{isDragging:i}=r;return i?i(a):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:a}=e;a&&a(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function GH(t,e,n){const r=O.useMemo(()=>new WH(t,e,n),[e,n]);return O.useEffect(()=>{r.spec=t},[t]),r}function HH(t){return O.useMemo(()=>{const e=t.type;return _t(e!=null,"spec.type must be defined"),e},[t])}function qH(t,e,n){const r=uc(),a=GH(t,e,n),i=HH(t);lc(function(){if(i!=null){const[o,s]=LH(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s}},[r,e,n,a,i])}function KH(t,e){const n=AR(t,e);_t(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=UH(),a=VH(n.options,n.previewOptions);return qH(n,r,a),[PR(n.collect,r,a),RH(a),$H(a)]}function XH(t){const e=uc().getMonitor(),[n,r]=MR(e,t);return O.useEffect(()=>e.subscribeToOffsetChange(r)),O.useEffect(()=>e.subscribeToStateChange(r)),n}function YH(t){return O.useMemo(()=>t.hooks.dropTarget(),[t])}function QH(t){const e=uc(),n=O.useMemo(()=>new jH(e.getBackend()),[e]);return lc(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function JH(){const t=uc();return O.useMemo(()=>new PH(t),[t])}function ZH(t){const{accept:e}=t;return O.useMemo(()=>(_t(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class eq{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function tq(t,e){const n=O.useMemo(()=>new eq(t,e),[e]);return O.useEffect(()=>{n.spec=t},[t]),n}function nq(t,e,n){const r=uc(),a=tq(t,e),i=ZH(t);lc(function(){const[o,s]=AH(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s},[r,e,a,n,i.map(o=>o.toString()).join("|")])}function rq(t,e){const n=AR(t,e),r=JH(),a=QH(n.options);return nq(n,r,a),[PR(n.collect,r,a),YH(a)]}var FR={exports:{}},_i={},BR={exports:{}},zR={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(F,Q){var J=F.length;F.push(Q);e:for(;0<J;){var re=J-1>>>1,se=F[re];if(0<a(se,Q))F[re]=Q,F[J]=se,J=re;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Q=F[0],J=F.pop();if(J!==Q){F[0]=J;e:for(var re=0,se=F.length,he=se>>>1;re<he;){var de=2*(re+1)-1,ie=F[de],xe=de+1,q=F[xe];if(0>a(ie,J))xe<se&&0>a(q,ie)?(F[re]=q,F[xe]=J,re=xe):(F[re]=ie,F[de]=J,re=de);else if(xe<se&&0>a(q,J))F[re]=q,F[xe]=J,re=xe;else break e}}return Q}function a(F,Q){var J=F.sortIndex-Q.sortIndex;return J!==0?J:F.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,h=3,f=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=F)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function S(F){if(y=!1,w(F),!m)if(n(l)!==null)m=!0,Z(C);else{var Q=n(u);Q!==null&&H(S,Q.startTime-F)}}function C(F,Q){m=!1,y&&(y=!1,b(N),N=-1),f=!0;var J=h;try{for(w(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||F&&!D());){var re=d.callback;if(typeof re=="function"){d.callback=null,h=d.priorityLevel;var se=re(d.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),w(Q)}else r(l);d=n(l)}if(d!==null)var he=!0;else{var de=n(u);de!==null&&H(S,de.startTime-Q),he=!1}return he}finally{d=null,h=J,f=!1}}var E=!1,_=null,N=-1,$=5,P=-1;function D(){return!(t.unstable_now()-P<$)}function j(){if(_!==null){var F=t.unstable_now();P=F;var Q=!0;try{Q=_(!0,F)}finally{Q?B():(E=!1,_=null)}}else E=!1}var B;if(typeof x=="function")B=function(){x(j)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=j,B=function(){Y.postMessage(null)}}else B=function(){v(j,0)};function Z(F){_=F,E||(E=!0,B())}function H(F,Q){N=v(function(){F(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,Z(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var J=h;h=Q;try{return F()}finally{h=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var J=h;h=F;try{return Q()}finally{h=J}},t.unstable_scheduleCallback=function(F,Q,J){var re=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?re+J:re):J=re,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,F={id:c++,callback:Q,priorityLevel:F,startTime:J,expirationTime:se,sortIndex:-1},J>re?(F.sortIndex=J,e(u,F),n(l)===null&&F===n(u)&&(y?(b(N),N=-1):y=!0,H(S,J-re))):(F.sortIndex=se,e(l,F),m||f||(m=!0,Z(C))),F},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(F){var Q=h;return function(){var J=h;h=Q;try{return F.apply(this,arguments)}finally{h=J}}}})(zR),BR.exports=zR;var af=BR.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var jR=O,Oi=af;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VR=new Set,of={};function cc(t,e){Vd(t,e),Vd(t+"Capture",e)}function Vd(t,e){for(of[t]=e,t=0;t<e.length;t++)VR.add(e[t])}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OS=Object.prototype.hasOwnProperty,aq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UR={},WR={};function iq(t){return OS.call(WR,t)?!0:OS.call(UR,t)?!1:aq.test(t)?WR[t]=!0:(UR[t]=!0,!1)}function oq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sq(t,e,n,r){if(e===null||typeof e>"u"||oq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xa(t,e,n,r,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var la={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){la[t]=new Xa(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];la[e]=new Xa(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){la[t]=new Xa(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){la[t]=new Xa(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){la[t]=new Xa(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){la[t]=new Xa(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){la[t]=new Xa(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){la[t]=new Xa(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){la[t]=new Xa(t,5,!1,t.toLowerCase(),null,!1,!1)});var RS=/[\-:]([a-z])/g;function $S(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RS,$S);la[e]=new Xa(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RS,$S);la[e]=new Xa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RS,$S);la[e]=new Xa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){la[t]=new Xa(t,1,!1,t.toLowerCase(),null,!1,!1)}),la.xlinkHref=new Xa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){la[t]=new Xa(t,1,!1,t.toLowerCase(),null,!0,!0)});function MS(t,e,n,r){var a=la.hasOwnProperty(e)?la[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sq(e,n,a,r)&&(n=null),r||a===null?iq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ws=jR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P1=Symbol.for("react.element"),Ud=Symbol.for("react.portal"),Wd=Symbol.for("react.fragment"),PS=Symbol.for("react.strict_mode"),AS=Symbol.for("react.profiler"),GR=Symbol.for("react.provider"),HR=Symbol.for("react.context"),LS=Symbol.for("react.forward_ref"),DS=Symbol.for("react.suspense"),FS=Symbol.for("react.suspense_list"),BS=Symbol.for("react.memo"),Vl=Symbol.for("react.lazy"),qR=Symbol.for("react.offscreen"),KR=Symbol.iterator;function sf(t){return t===null||typeof t!="object"?null:(t=KR&&t[KR]||t["@@iterator"],typeof t=="function"?t:null)}var er=Object.assign,zS;function lf(t){if(zS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zS=e&&e[1]||""}return`
`+zS+t}var jS=!1;function VS(t,e){if(!t||jS)return"";jS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{jS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lf(t):""}function lq(t){switch(t.tag){case 5:return lf(t.type);case 16:return lf("Lazy");case 13:return lf("Suspense");case 19:return lf("SuspenseList");case 0:case 2:case 15:return t=VS(t.type,!1),t;case 11:return t=VS(t.type.render,!1),t;case 1:return t=VS(t.type,!0),t;default:return""}}function US(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wd:return"Fragment";case Ud:return"Portal";case AS:return"Profiler";case PS:return"StrictMode";case DS:return"Suspense";case FS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HR:return(t.displayName||"Context")+".Consumer";case GR:return(t._context.displayName||"Context")+".Provider";case LS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case BS:return e=t.displayName||null,e!==null?e:US(t.type)||"Memo";case Vl:e=t._payload,t=t._init;try{return US(t(e))}catch{}}return null}function uq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return US(e);case 8:return e===PS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ul(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function XR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cq(t){var e=XR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function A1(t){t._valueTracker||(t._valueTracker=cq(t))}function YR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=XR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function L1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function WS(t,e){var n=e.checked;return er({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function QR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ul(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JR(t,e){e=e.checked,e!=null&&MS(t,"checked",e,!1)}function GS(t,e){JR(t,e);var n=Ul(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?HS(t,e.type,n):e.hasOwnProperty("defaultValue")&&HS(t,e.type,Ul(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ZR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function HS(t,e,n){(e!=="number"||L1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var uf=Array.isArray;function Gd(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ul(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function qS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return er({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(uf(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ul(n)}}function t$(t,e){var n=Ul(e.value),r=Ul(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function n$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function KS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var D1,a$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(D1=D1||document.createElement("div"),D1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=D1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var df={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dq=["Webkit","ms","Moz","O"];Object.keys(df).forEach(function(t){dq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),df[e]=df[t]})});function i$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||df.hasOwnProperty(t)&&df[t]?(""+e).trim():e+"px"}function o$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=i$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var hq=er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XS(t,e){if(e){if(hq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function YS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QS=null;function JS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ZS=null,Hd=null,qd=null;function s$(t){if(t=Mf(t)){if(typeof ZS!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=oy(e),ZS(t.stateNode,t.type,e))}}function l$(t){Hd?qd?qd.push(t):qd=[t]:Hd=t}function u$(){if(Hd){var t=Hd,e=qd;if(qd=Hd=null,s$(t),e)for(t=0;t<e.length;t++)s$(e[t])}}function c$(t,e){return t(e)}function d$(){}var eC=!1;function h$(t,e,n){if(eC)return t(e,n);eC=!0;try{return c$(t,e,n)}finally{eC=!1,(Hd!==null||qd!==null)&&(d$(),u$())}}function hf(t,e){var n=t.stateNode;if(n===null)return null;var r=oy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var tC=!1;if(Us)try{var pf={};Object.defineProperty(pf,"passive",{get:function(){tC=!0}}),window.addEventListener("test",pf,pf),window.removeEventListener("test",pf,pf)}catch{tC=!1}function pq(t,e,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ff=!1,F1=null,B1=!1,nC=null,fq={onError:function(t){ff=!0,F1=t}};function gq(t,e,n,r,a,i,o,s,l){ff=!1,F1=null,pq.apply(fq,arguments)}function mq(t,e,n,r,a,i,o,s,l){if(gq.apply(this,arguments),ff){if(ff){var u=F1;ff=!1,F1=null}else throw Error(Te(198));B1||(B1=!0,nC=u)}}function dc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function p$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f$(t){if(dc(t)!==t)throw Error(Te(188))}function yq(t){var e=t.alternate;if(!e){if(e=dc(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return f$(a),t;if(i===r)return f$(a),e;i=i.sibling}throw Error(Te(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(Te(189))}}if(n.alternate!==r)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function g$(t){return t=yq(t),t!==null?m$(t):null}function m$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=m$(t);if(e!==null)return e;t=t.sibling}return null}var y$=Oi.unstable_scheduleCallback,b$=Oi.unstable_cancelCallback,bq=Oi.unstable_shouldYield,vq=Oi.unstable_requestPaint,yr=Oi.unstable_now,xq=Oi.unstable_getCurrentPriorityLevel,rC=Oi.unstable_ImmediatePriority,v$=Oi.unstable_UserBlockingPriority,z1=Oi.unstable_NormalPriority,wq=Oi.unstable_LowPriority,x$=Oi.unstable_IdlePriority,j1=null,ls=null;function kq(t){if(ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(j1,t,void 0,(t.current.flags&128)===128)}catch{}}var Ro=Math.clz32?Math.clz32:Eq,Sq=Math.log,Cq=Math.LN2;function Eq(t){return t>>>=0,t===0?32:31-(Sq(t)/Cq|0)|0}var V1=64,U1=4194304;function gf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function W1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=gf(s):(i&=o,i!==0&&(r=gf(i)))}else o=n&~a,o!==0?r=gf(o):i!==0&&(r=gf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ro(e),a=1<<n,r|=t[n],e&=~a;return r}function Iq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ro(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=Iq(s,e)):l<=e&&(t.expiredLanes|=s),i&=~s}}function aC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w$(){var t=V1;return V1<<=1,!(V1&4194240)&&(V1=64),t}function iC(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ro(e),t[e]=n}function Nq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Ro(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function oC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ro(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var bn=0;function k$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S$,sC,C$,E$,I$,lC=!1,G1=[],Wl=null,Gl=null,Hl=null,yf=new Map,bf=new Map,ql=[],_q="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T$(t,e){switch(t){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Gl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":yf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bf.delete(e.pointerId)}}function vf(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Mf(e),e!==null&&sC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Oq(t,e,n,r,a){switch(e){case"focusin":return Wl=vf(Wl,t,e,n,r,a),!0;case"dragenter":return Gl=vf(Gl,t,e,n,r,a),!0;case"mouseover":return Hl=vf(Hl,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return yf.set(i,vf(yf.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,bf.set(i,vf(bf.get(i)||null,t,e,n,r,a)),!0}return!1}function N$(t){var e=hc(t.target);if(e!==null){var n=dc(e);if(n!==null){if(e=n.tag,e===13){if(e=p$(n),e!==null){t.blockedOn=e,I$(t.priority,function(){C$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function H1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);QS=r,n.target.dispatchEvent(r),QS=null}else return e=Mf(n),e!==null&&sC(e),t.blockedOn=n,!1;e.shift()}return!0}function _$(t,e,n){H1(t)&&n.delete(e)}function Rq(){lC=!1,Wl!==null&&H1(Wl)&&(Wl=null),Gl!==null&&H1(Gl)&&(Gl=null),Hl!==null&&H1(Hl)&&(Hl=null),yf.forEach(_$),bf.forEach(_$)}function xf(t,e){t.blockedOn===e&&(t.blockedOn=null,lC||(lC=!0,Oi.unstable_scheduleCallback(Oi.unstable_NormalPriority,Rq)))}function wf(t){function e(a){return xf(a,t)}if(0<G1.length){xf(G1[0],t);for(var n=1;n<G1.length;n++){var r=G1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wl!==null&&xf(Wl,t),Gl!==null&&xf(Gl,t),Hl!==null&&xf(Hl,t),yf.forEach(e),bf.forEach(e),n=0;n<ql.length;n++)r=ql[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ql.length&&(n=ql[0],n.blockedOn===null);)N$(n),n.blockedOn===null&&ql.shift()}var Kd=Ws.ReactCurrentBatchConfig,q1=!0;function $q(t,e,n,r){var a=bn,i=Kd.transition;Kd.transition=null;try{bn=1,uC(t,e,n,r)}finally{bn=a,Kd.transition=i}}function Mq(t,e,n,r){var a=bn,i=Kd.transition;Kd.transition=null;try{bn=4,uC(t,e,n,r)}finally{bn=a,Kd.transition=i}}function uC(t,e,n,r){if(q1){var a=cC(t,e,n,r);if(a===null)TC(t,e,r,K1,n),T$(t,r);else if(Oq(a,t,e,n,r))r.stopPropagation();else if(T$(t,r),e&4&&-1<_q.indexOf(t)){for(;a!==null;){var i=Mf(a);if(i!==null&&S$(i),i=cC(t,e,n,r),i===null&&TC(t,e,r,K1,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else TC(t,e,r,null,n)}}var K1=null;function cC(t,e,n,r){if(K1=null,t=JS(r),t=hc(t),t!==null)if(e=dc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=p$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return K1=t,null}function O$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xq()){case rC:return 1;case v$:return 4;case z1:case wq:return 16;case x$:return 536870912;default:return 16}default:return 16}}var Kl=null,dC=null,X1=null;function R$(){if(X1)return X1;var t,e=dC,n=e.length,r,a="value"in Kl?Kl.value:Kl.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[i-r];r++);return X1=a.slice(t,1<r?1-r:void 0)}function Y1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Q1(){return!0}function $$(){return!1}function Ri(t){function e(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Q1:$$,this.isPropagationStopped=$$,this}return er(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Q1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Q1)},persist:function(){},isPersistent:Q1}),e}var Xd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hC=Ri(Xd),kf=er({},Xd,{view:0,detail:0}),Pq=Ri(kf),pC,fC,Sf,J1=er({},kf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sf&&(Sf&&t.type==="mousemove"?(pC=t.screenX-Sf.screenX,fC=t.screenY-Sf.screenY):fC=pC=0,Sf=t),pC)},movementY:function(t){return"movementY"in t?t.movementY:fC}}),M$=Ri(J1),Aq=er({},J1,{dataTransfer:0}),Lq=Ri(Aq),Dq=er({},kf,{relatedTarget:0}),gC=Ri(Dq),Fq=er({},Xd,{animationName:0,elapsedTime:0,pseudoElement:0}),Bq=Ri(Fq),zq=er({},Xd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jq=Ri(zq),Vq=er({},Xd,{data:0}),P$=Ri(Vq),Uq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gq[t])?!!e[t]:!1}function mC(){return Hq}var qq=er({},kf,{key:function(t){if(t.key){var e=Uq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Y1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mC,charCode:function(t){return t.type==="keypress"?Y1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Y1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kq=Ri(qq),Xq=er({},J1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A$=Ri(Xq),Yq=er({},kf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mC}),Qq=Ri(Yq),Jq=er({},Xd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zq=Ri(Jq),eK=er({},J1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tK=Ri(eK),nK=[9,13,27,32],yC=Us&&"CompositionEvent"in window,Cf=null;Us&&"documentMode"in document&&(Cf=document.documentMode);var rK=Us&&"TextEvent"in window&&!Cf,L$=Us&&(!yC||Cf&&8<Cf&&11>=Cf),D$=" ",F$=!1;function B$(t,e){switch(t){case"keyup":return nK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z$(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yd=!1;function aK(t,e){switch(t){case"compositionend":return z$(e);case"keypress":return e.which!==32?null:(F$=!0,D$);case"textInput":return t=e.data,t===D$&&F$?null:t;default:return null}}function iK(t,e){if(Yd)return t==="compositionend"||!yC&&B$(t,e)?(t=R$(),X1=dC=Kl=null,Yd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L$&&e.locale!=="ko"?null:e.data;default:return null}}var oK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oK[t.type]:e==="textarea"}function V$(t,e,n,r){l$(r),e=ry(e,"onChange"),0<e.length&&(n=new hC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ef=null,If=null;function sK(t){oM(t,0)}function Z1(t){var e=th(t);if(YR(e))return t}function lK(t,e){if(t==="change")return e}var U$=!1;if(Us){var bC;if(Us){var vC="oninput"in document;if(!vC){var W$=document.createElement("div");W$.setAttribute("oninput","return;"),vC=typeof W$.oninput=="function"}bC=vC}else bC=!1;U$=bC&&(!document.documentMode||9<document.documentMode)}function G$(){Ef&&(Ef.detachEvent("onpropertychange",H$),If=Ef=null)}function H$(t){if(t.propertyName==="value"&&Z1(If)){var e=[];V$(e,If,t,JS(t)),h$(sK,e)}}function uK(t,e,n){t==="focusin"?(G$(),Ef=e,If=n,Ef.attachEvent("onpropertychange",H$)):t==="focusout"&&G$()}function cK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Z1(If)}function dK(t,e){if(t==="click")return Z1(e)}function hK(t,e){if(t==="input"||t==="change")return Z1(e)}function pK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $o=typeof Object.is=="function"?Object.is:pK;function Tf(t,e){if($o(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!OS.call(e,a)||!$o(t[a],e[a]))return!1}return!0}function q$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function K$(t,e){var n=q$(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=q$(n)}}function X$(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X$(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y$(){for(var t=window,e=L1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=L1(t.document)}return e}function xC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fK(t){var e=Y$(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&X$(n.ownerDocument.documentElement,n)){if(r!==null&&xC(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=K$(n,i);var o=K$(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gK=Us&&"documentMode"in document&&11>=document.documentMode,Qd=null,wC=null,Nf=null,kC=!1;function Q$(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kC||Qd==null||Qd!==L1(r)||(r=Qd,"selectionStart"in r&&xC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nf&&Tf(Nf,r)||(Nf=r,r=ry(wC,"onSelect"),0<r.length&&(e=new hC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qd)))}function ey(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jd={animationend:ey("Animation","AnimationEnd"),animationiteration:ey("Animation","AnimationIteration"),animationstart:ey("Animation","AnimationStart"),transitionend:ey("Transition","TransitionEnd")},SC={},J$={};Us&&(J$=document.createElement("div").style,"AnimationEvent"in window||(delete Jd.animationend.animation,delete Jd.animationiteration.animation,delete Jd.animationstart.animation),"TransitionEvent"in window||delete Jd.transitionend.transition);function ty(t){if(SC[t])return SC[t];if(!Jd[t])return t;var e=Jd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J$)return SC[t]=e[n];return t}var Z$=ty("animationend"),eM=ty("animationiteration"),tM=ty("animationstart"),nM=ty("transitionend"),rM=new Map,aM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xl(t,e){rM.set(t,e),cc(e,[t])}for(var CC=0;CC<aM.length;CC++){var EC=aM[CC],mK=EC.toLowerCase(),yK=EC[0].toUpperCase()+EC.slice(1);Xl(mK,"on"+yK)}Xl(Z$,"onAnimationEnd"),Xl(eM,"onAnimationIteration"),Xl(tM,"onAnimationStart"),Xl("dblclick","onDoubleClick"),Xl("focusin","onFocus"),Xl("focusout","onBlur"),Xl(nM,"onTransitionEnd"),Vd("onMouseEnter",["mouseout","mouseover"]),Vd("onMouseLeave",["mouseout","mouseover"]),Vd("onPointerEnter",["pointerout","pointerover"]),Vd("onPointerLeave",["pointerout","pointerover"]),cc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cc("onBeforeInput",["compositionend","keypress","textInput","paste"]),cc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _f="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bK=new Set("cancel close invalid load scroll toggle".split(" ").concat(_f));function iM(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mq(r,e,void 0,t),t.currentTarget=null}function oM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;iM(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;iM(a,s,u),i=l}}}if(B1)throw t=nC,B1=!1,nC=null,t}function Bn(t,e){var n=e[MC];n===void 0&&(n=e[MC]=new Set);var r=t+"__bubble";n.has(r)||(sM(e,t,2,!1),n.add(r))}function IC(t,e,n){var r=0;e&&(r|=4),sM(n,t,r,e)}var ny="_reactListening"+Math.random().toString(36).slice(2);function Of(t){if(!t[ny]){t[ny]=!0,VR.forEach(function(n){n!=="selectionchange"&&(bK.has(n)||IC(n,!1,t),IC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ny]||(e[ny]=!0,IC("selectionchange",!1,e))}}function sM(t,e,n,r){switch(O$(e)){case 1:var a=$q;break;case 4:a=Mq;break;default:a=uC}n=a.bind(null,e,n,t),a=void 0,!tC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function TC(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=hc(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}h$(function(){var u=i,c=JS(n),d=[];e:{var h=rM.get(t);if(h!==void 0){var f=hC,m=t;switch(t){case"keypress":if(Y1(n)===0)break e;case"keydown":case"keyup":f=Kq;break;case"focusin":m="focus",f=gC;break;case"focusout":m="blur",f=gC;break;case"beforeblur":case"afterblur":f=gC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=M$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Lq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Qq;break;case Z$:case eM:case tM:f=Bq;break;case nM:f=Zq;break;case"scroll":f=Pq;break;case"wheel":f=tK;break;case"copy":case"cut":case"paste":f=jq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=A$}var y=(e&4)!==0,v=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var x=u,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=hf(x,b),S!=null&&y.push(Rf(x,S,w)))),v)break;x=x.return}0<y.length&&(h=new f(h,m,null,n,c),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==QS&&(m=n.relatedTarget||n.fromElement)&&(hc(m)||m[Gs]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=u,m=m?hc(m):null,m!==null&&(v=dc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(y=M$,S="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=A$,S="onPointerLeave",b="onPointerEnter",x="pointer"),v=f==null?h:th(f),w=m==null?h:th(m),h=new y(S,x+"leave",f,n,c),h.target=v,h.relatedTarget=w,S=null,hc(c)===u&&(y=new y(b,x+"enter",m,n,c),y.target=w,y.relatedTarget=v,S=y),v=S,f&&m)t:{for(y=f,b=m,x=0,w=y;w;w=Zd(w))x++;for(w=0,S=b;S;S=Zd(S))w++;for(;0<x-w;)y=Zd(y),x--;for(;0<w-x;)b=Zd(b),w--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=Zd(y),b=Zd(b)}y=null}else y=null;f!==null&&lM(d,h,f,y,!1),m!==null&&v!==null&&lM(d,v,m,y,!0)}}e:{if(h=u?th(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=lK;else if(j$(h))if(U$)C=hK;else{C=cK;var E=uK}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=dK);if(C&&(C=C(t,u))){V$(d,C,n,c);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&HS(h,"number",h.value)}switch(E=u?th(u):window,t){case"focusin":(j$(E)||E.contentEditable==="true")&&(Qd=E,wC=u,Nf=null);break;case"focusout":Nf=wC=Qd=null;break;case"mousedown":kC=!0;break;case"contextmenu":case"mouseup":case"dragend":kC=!1,Q$(d,n,c);break;case"selectionchange":if(gK)break;case"keydown":case"keyup":Q$(d,n,c)}var _;if(yC)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Yd?B$(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(L$&&n.locale!=="ko"&&(Yd||N!=="onCompositionStart"?N==="onCompositionEnd"&&Yd&&(_=R$()):(Kl=c,dC="value"in Kl?Kl.value:Kl.textContent,Yd=!0)),E=ry(u,N),0<E.length&&(N=new P$(N,t,null,n,c),d.push({event:N,listeners:E}),_?N.data=_:(_=z$(n),_!==null&&(N.data=_)))),(_=rK?aK(t,n):iK(t,n))&&(u=ry(u,"onBeforeInput"),0<u.length&&(c=new P$("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=_))}oM(d,e)})}function Rf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ry(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=hf(t,n),i!=null&&r.unshift(Rf(t,i,a)),i=hf(t,e),i!=null&&r.push(Rf(t,i,a))),t=t.return}return r}function Zd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lM(t,e,n,r,a){for(var i=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=hf(n,i),l!=null&&o.unshift(Rf(n,l,s))):a||(l=hf(n,i),l!=null&&o.push(Rf(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vK=/\r\n?/g,xK=/\u0000|\uFFFD/g;function uM(t){return(typeof t=="string"?t:""+t).replace(vK,`
`).replace(xK,"")}function ay(t,e,n){if(e=uM(e),uM(t)!==e&&n)throw Error(Te(425))}function iy(){}var NC=null,_C=null;function OC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var RC=typeof setTimeout=="function"?setTimeout:void 0,wK=typeof clearTimeout=="function"?clearTimeout:void 0,cM=typeof Promise=="function"?Promise:void 0,kK=typeof queueMicrotask=="function"?queueMicrotask:typeof cM<"u"?function(t){return cM.resolve(null).then(t).catch(SK)}:RC;function SK(t){setTimeout(function(){throw t})}function $C(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),wf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);wf(e)}function Yl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eh=Math.random().toString(36).slice(2),us="__reactFiber$"+eh,$f="__reactProps$"+eh,Gs="__reactContainer$"+eh,MC="__reactEvents$"+eh,CK="__reactListeners$"+eh,EK="__reactHandles$"+eh;function hc(t){var e=t[us];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gs]||n[us]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dM(t);t!==null;){if(n=t[us])return n;t=dM(t)}return e}t=n,n=t.parentNode}return null}function Mf(t){return t=t[us]||t[Gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function th(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function oy(t){return t[$f]||null}var PC=[],nh=-1;function Ql(t){return{current:t}}function zn(t){0>nh||(t.current=PC[nh],PC[nh]=null,nh--)}function Mn(t,e){nh++,PC[nh]=t.current,t.current=e}var Jl={},Na=Ql(Jl),si=Ql(!1),pc=Jl;function rh(t,e){var n=t.type.contextTypes;if(!n)return Jl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function li(t){return t=t.childContextTypes,t!=null}function sy(){zn(si),zn(Na)}function hM(t,e,n){if(Na.current!==Jl)throw Error(Te(168));Mn(Na,e),Mn(si,n)}function pM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(Te(108,uq(t)||"Unknown",a));return er({},n,r)}function ly(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jl,pc=Na.current,Mn(Na,t),Mn(si,si.current),!0}function fM(t,e,n){var r=t.stateNode;if(!r)throw Error(Te(169));n?(t=pM(t,e,pc),r.__reactInternalMemoizedMergedChildContext=t,zn(si),zn(Na),Mn(Na,t)):zn(si),Mn(si,n)}var Hs=null,uy=!1,AC=!1;function gM(t){Hs===null?Hs=[t]:Hs.push(t)}function IK(t){uy=!0,gM(t)}function Zl(){if(!AC&&Hs!==null){AC=!0;var t=0,e=bn;try{var n=Hs;for(bn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hs=null,uy=!1}catch(a){throw Hs!==null&&(Hs=Hs.slice(t+1)),y$(rC,Zl),a}finally{bn=e,AC=!1}}return null}var ah=[],ih=0,cy=null,dy=0,Zi=[],eo=0,fc=null,qs=1,Ks="";function gc(t,e){ah[ih++]=dy,ah[ih++]=cy,cy=t,dy=e}function mM(t,e,n){Zi[eo++]=qs,Zi[eo++]=Ks,Zi[eo++]=fc,fc=t;var r=qs;t=Ks;var a=32-Ro(r)-1;r&=~(1<<a),n+=1;var i=32-Ro(e)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,qs=1<<32-Ro(e)+a|n<<a|r,Ks=i+t}else qs=1<<i|n<<a|r,Ks=t}function LC(t){t.return!==null&&(gc(t,1),mM(t,1,0))}function DC(t){for(;t===cy;)cy=ah[--ih],ah[ih]=null,dy=ah[--ih],ah[ih]=null;for(;t===fc;)fc=Zi[--eo],Zi[eo]=null,Ks=Zi[--eo],Zi[eo]=null,qs=Zi[--eo],Zi[eo]=null}var $i=null,Mi=null,Hn=!1,Mo=null;function yM(t,e){var n=ao(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bM(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$i=t,Mi=Yl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$i=t,Mi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fc!==null?{id:qs,overflow:Ks}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ao(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$i=t,Mi=null,!0):!1;default:return!1}}function FC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function BC(t){if(Hn){var e=Mi;if(e){var n=e;if(!bM(t,e)){if(FC(t))throw Error(Te(418));e=Yl(n.nextSibling);var r=$i;e&&bM(t,e)?yM(r,n):(t.flags=t.flags&-4097|2,Hn=!1,$i=t)}}else{if(FC(t))throw Error(Te(418));t.flags=t.flags&-4097|2,Hn=!1,$i=t}}}function vM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$i=t}function hy(t){if(t!==$i)return!1;if(!Hn)return vM(t),Hn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!OC(t.type,t.memoizedProps)),e&&(e=Mi)){if(FC(t))throw xM(),Error(Te(418));for(;e;)yM(t,e),e=Yl(e.nextSibling)}if(vM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mi=Yl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mi=null}}else Mi=$i?Yl(t.stateNode.nextSibling):null;return!0}function xM(){for(var t=Mi;t;)t=Yl(t.nextSibling)}function oh(){Mi=$i=null,Hn=!1}function zC(t){Mo===null?Mo=[t]:Mo.push(t)}var TK=Ws.ReactCurrentBatchConfig;function Po(t,e){if(t&&t.defaultProps){e=er({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var py=Ql(null),fy=null,sh=null,jC=null;function VC(){jC=sh=fy=null}function UC(t){var e=py.current;zn(py),t._currentValue=e}function WC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lh(t,e){fy=t,jC=sh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ui=!0),t.firstContext=null)}function to(t){var e=t._currentValue;if(jC!==t)if(t={context:t,memoizedValue:e,next:null},sh===null){if(fy===null)throw Error(Te(308));sh=t,fy.dependencies={lanes:0,firstContext:t}}else sh=sh.next=t;return e}var mc=null;function GC(t){mc===null?mc=[t]:mc.push(t)}function wM(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,GC(e)):(n.next=a.next,a.next=n),e.interleaved=n,Xs(t,r)}function Xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var eu=!1;function HC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,Xs(t,n)}return a=r.interleaved,a===null?(e.next=e,GC(r)):(e.next=a.next,a.next=e),r.interleaved=e,Xs(t,n)}function gy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oC(t,n)}}function SM(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function my(t,e,n,r){var a=t.updateQueue;eu=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,c=u=l=null,s=i;do{var h=s.lane,f=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=t,y=s;switch(h=e,f=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=er({},d,h);break e;case 2:eu=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;h=s,s=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(c===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);vc|=o,t.lanes=o,t.memoizedState=d}}function CM(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Te(191,a));a.call(r)}}}var EM=new jR.Component().refs;function qC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:er({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yy={isMounted:function(t){return(t=t._reactInternals)?dc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qa(),a=iu(t),i=Ys(r,a);i.payload=e,n!=null&&(i.callback=n),e=tu(t,i,a),e!==null&&(Do(e,t,a,r),gy(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qa(),a=iu(t),i=Ys(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=tu(t,i,a),e!==null&&(Do(e,t,a,r),gy(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qa(),r=iu(t),a=Ys(n,r);a.tag=2,e!=null&&(a.callback=e),e=tu(t,a,r),e!==null&&(Do(e,t,r,n),gy(e,t,r))}};function IM(t,e,n,r,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Tf(n,r)||!Tf(a,i):!0}function TM(t,e,n){var r=!1,a=Jl,i=e.contextType;return typeof i=="object"&&i!==null?i=to(i):(a=li(e)?pc:Na.current,r=e.contextTypes,i=(r=r!=null)?rh(t,a):Jl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function NM(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yy.enqueueReplaceState(e,e.state,null)}function KC(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=EM,HC(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=to(i):(i=li(e)?pc:Na.current,a.context=rh(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qC(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&yy.enqueueReplaceState(a,a.state,null),my(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Pf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var r=n.stateNode}if(!r)throw Error(Te(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=a.refs;s===EM&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function by(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _M(t){var e=t._init;return e(t._payload)}function OM(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=su(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,x,w,S){return x===null||x.tag!==6?(x=OE(w,b.mode,S),x.return=b,x):(x=a(x,w),x.return=b,x)}function l(b,x,w,S){var C=w.type;return C===Wd?c(b,x,w.props.children,S,w.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vl&&_M(C)===x.type)?(S=a(x,w.props),S.ref=Pf(b,x,w),S.return=b,S):(S=Dy(w.type,w.key,w.props,null,b.mode,S),S.ref=Pf(b,x,w),S.return=b,S)}function u(b,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=RE(w,b.mode,S),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function c(b,x,w,S,C){return x===null||x.tag!==7?(x=Sc(w,b.mode,S,C),x.return=b,x):(x=a(x,w),x.return=b,x)}function d(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=OE(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case P1:return w=Dy(x.type,x.key,x.props,null,b.mode,w),w.ref=Pf(b,null,x),w.return=b,w;case Ud:return x=RE(x,b.mode,w),x.return=b,x;case Vl:var S=x._init;return d(b,S(x._payload),w)}if(uf(x)||sf(x))return x=Sc(x,b.mode,w,null),x.return=b,x;by(b,x)}return null}function h(b,x,w,S){var C=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:s(b,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case P1:return w.key===C?l(b,x,w,S):null;case Ud:return w.key===C?u(b,x,w,S):null;case Vl:return C=w._init,h(b,x,C(w._payload),S)}if(uf(w)||sf(w))return C!==null?null:c(b,x,w,S,null);by(b,w)}return null}function f(b,x,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,s(x,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case P1:return b=b.get(S.key===null?w:S.key)||null,l(x,b,S,C);case Ud:return b=b.get(S.key===null?w:S.key)||null,u(x,b,S,C);case Vl:var E=S._init;return f(b,x,w,E(S._payload),C)}if(uf(S)||sf(S))return b=b.get(w)||null,c(x,b,S,C,null);by(x,S)}return null}function m(b,x,w,S){for(var C=null,E=null,_=x,N=x=0,$=null;_!==null&&N<w.length;N++){_.index>N?($=_,_=null):$=_.sibling;var P=h(b,_,w[N],S);if(P===null){_===null&&(_=$);break}t&&_&&P.alternate===null&&e(b,_),x=i(P,x,N),E===null?C=P:E.sibling=P,E=P,_=$}if(N===w.length)return n(b,_),Hn&&gc(b,N),C;if(_===null){for(;N<w.length;N++)_=d(b,w[N],S),_!==null&&(x=i(_,x,N),E===null?C=_:E.sibling=_,E=_);return Hn&&gc(b,N),C}for(_=r(b,_);N<w.length;N++)$=f(_,b,N,w[N],S),$!==null&&(t&&$.alternate!==null&&_.delete($.key===null?N:$.key),x=i($,x,N),E===null?C=$:E.sibling=$,E=$);return t&&_.forEach(function(D){return e(b,D)}),Hn&&gc(b,N),C}function y(b,x,w,S){var C=sf(w);if(typeof C!="function")throw Error(Te(150));if(w=C.call(w),w==null)throw Error(Te(151));for(var E=C=null,_=x,N=x=0,$=null,P=w.next();_!==null&&!P.done;N++,P=w.next()){_.index>N?($=_,_=null):$=_.sibling;var D=h(b,_,P.value,S);if(D===null){_===null&&(_=$);break}t&&_&&D.alternate===null&&e(b,_),x=i(D,x,N),E===null?C=D:E.sibling=D,E=D,_=$}if(P.done)return n(b,_),Hn&&gc(b,N),C;if(_===null){for(;!P.done;N++,P=w.next())P=d(b,P.value,S),P!==null&&(x=i(P,x,N),E===null?C=P:E.sibling=P,E=P);return Hn&&gc(b,N),C}for(_=r(b,_);!P.done;N++,P=w.next())P=f(_,b,N,P.value,S),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?N:P.key),x=i(P,x,N),E===null?C=P:E.sibling=P,E=P);return t&&_.forEach(function(j){return e(b,j)}),Hn&&gc(b,N),C}function v(b,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Wd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case P1:e:{for(var C=w.key,E=x;E!==null;){if(E.key===C){if(C=w.type,C===Wd){if(E.tag===7){n(b,E.sibling),x=a(E,w.props.children),x.return=b,b=x;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vl&&_M(C)===E.type){n(b,E.sibling),x=a(E,w.props),x.ref=Pf(b,E,w),x.return=b,b=x;break e}n(b,E);break}else e(b,E);E=E.sibling}w.type===Wd?(x=Sc(w.props.children,b.mode,S,w.key),x.return=b,b=x):(S=Dy(w.type,w.key,w.props,null,b.mode,S),S.ref=Pf(b,x,w),S.return=b,b=S)}return o(b);case Ud:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=RE(w,b.mode,S),x.return=b,b=x}return o(b);case Vl:return E=w._init,v(b,x,E(w._payload),S)}if(uf(w))return m(b,x,w,S);if(sf(w))return y(b,x,w,S);by(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=a(x,w),x.return=b,b=x):(n(b,x),x=OE(w,b.mode,S),x.return=b,b=x),o(b)):n(b,x)}return v}var uh=OM(!0),RM=OM(!1),Af={},cs=Ql(Af),Lf=Ql(Af),Df=Ql(Af);function yc(t){if(t===Af)throw Error(Te(174));return t}function XC(t,e){switch(Mn(Df,e),Mn(Lf,t),Mn(cs,Af),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:KS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=KS(e,t)}zn(cs),Mn(cs,e)}function ch(){zn(cs),zn(Lf),zn(Df)}function $M(t){yc(Df.current);var e=yc(cs.current),n=KS(e,t.type);e!==n&&(Mn(Lf,t),Mn(cs,n))}function YC(t){Lf.current===t&&(zn(cs),zn(Lf))}var tr=Ql(0);function vy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var QC=[];function JC(){for(var t=0;t<QC.length;t++)QC[t]._workInProgressVersionPrimary=null;QC.length=0}var xy=Ws.ReactCurrentDispatcher,ZC=Ws.ReactCurrentBatchConfig,bc=0,nr=null,Ar=null,Kr=null,wy=!1,Ff=!1,Bf=0,NK=0;function _a(){throw Error(Te(321))}function eE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$o(t[n],e[n]))return!1;return!0}function tE(t,e,n,r,a,i){if(bc=i,nr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xy.current=t===null||t.memoizedState===null?$K:MK,t=n(r,a),Ff){i=0;do{if(Ff=!1,Bf=0,25<=i)throw Error(Te(301));i+=1,Kr=Ar=null,e.updateQueue=null,xy.current=PK,t=n(r,a)}while(Ff)}if(xy.current=Cy,e=Ar!==null&&Ar.next!==null,bc=0,Kr=Ar=nr=null,wy=!1,e)throw Error(Te(300));return t}function nE(){var t=Bf!==0;return Bf=0,t}function ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?nr.memoizedState=Kr=t:Kr=Kr.next=t,Kr}function no(){if(Ar===null){var t=nr.alternate;t=t!==null?t.memoizedState:null}else t=Ar.next;var e=Kr===null?nr.memoizedState:Kr.next;if(e!==null)Kr=e,Ar=t;else{if(t===null)throw Error(Te(310));Ar=t,t={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Kr===null?nr.memoizedState=Kr=t:Kr=Kr.next=t}return Kr}function zf(t,e){return typeof e=="function"?e(t):e}function rE(t){var e=no(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=Ar,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((bc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,nr.lanes|=c,vc|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,$o(r,e.memoizedState)||(ui=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,nr.lanes|=i,vc|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function aE(t){var e=no(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);$o(i,e.memoizedState)||(ui=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function MM(){}function PM(t,e){var n=nr,r=no(),a=e(),i=!$o(r.memoizedState,a);if(i&&(r.memoizedState=a,ui=!0),r=r.queue,iE(DM.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Kr!==null&&Kr.memoizedState.tag&1){if(n.flags|=2048,jf(9,LM.bind(null,n,r,a,e),void 0,null),Xr===null)throw Error(Te(349));bc&30||AM(n,e,a)}return a}function AM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LM(t,e,n,r){e.value=n,e.getSnapshot=r,FM(e)&&BM(t)}function DM(t,e,n){return n(function(){FM(e)&&BM(t)})}function FM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$o(t,n)}catch{return!0}}function BM(t){var e=Xs(t,1);e!==null&&Do(e,t,1,-1)}function zM(t){var e=ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zf,lastRenderedState:t},e.queue=t,t=t.dispatch=RK.bind(null,nr,t),[e.memoizedState,t]}function jf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jM(){return no().memoizedState}function ky(t,e,n,r){var a=ds();nr.flags|=t,a.memoizedState=jf(1|e,n,void 0,r===void 0?null:r)}function Sy(t,e,n,r){var a=no();r=r===void 0?null:r;var i=void 0;if(Ar!==null){var o=Ar.memoizedState;if(i=o.destroy,r!==null&&eE(r,o.deps)){a.memoizedState=jf(e,n,i,r);return}}nr.flags|=t,a.memoizedState=jf(1|e,n,i,r)}function VM(t,e){return ky(8390656,8,t,e)}function iE(t,e){return Sy(2048,8,t,e)}function UM(t,e){return Sy(4,2,t,e)}function WM(t,e){return Sy(4,4,t,e)}function GM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HM(t,e,n){return n=n!=null?n.concat([t]):null,Sy(4,4,GM.bind(null,e,t),n)}function oE(){}function qM(t,e){var n=no();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KM(t,e){var n=no();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XM(t,e,n){return bc&21?($o(n,e)||(n=w$(),nr.lanes|=n,vc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ui=!0),t.memoizedState=n)}function _K(t,e){var n=bn;bn=n!==0&&4>n?n:4,t(!0);var r=ZC.transition;ZC.transition={};try{t(!1),e()}finally{bn=n,ZC.transition=r}}function YM(){return no().memoizedState}function OK(t,e,n){var r=iu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},QM(t))JM(e,n);else if(n=wM(t,e,n,r),n!==null){var a=Qa();Do(n,t,r,a),ZM(n,e,r)}}function RK(t,e,n){var r=iu(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(QM(t))JM(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,$o(s,o)){var l=e.interleaved;l===null?(a.next=a,GC(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}n=wM(t,e,a,r),n!==null&&(a=Qa(),Do(n,t,r,a),ZM(n,e,r))}}function QM(t){var e=t.alternate;return t===nr||e!==null&&e===nr}function JM(t,e){Ff=wy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oC(t,n)}}var Cy={readContext:to,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},$K={readContext:to,useCallback:function(t,e){return ds().memoizedState=[t,e===void 0?null:e],t},useContext:to,useEffect:VM,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ky(4194308,4,GM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ky(4194308,4,t,e)},useInsertionEffect:function(t,e){return ky(4,2,t,e)},useMemo:function(t,e){var n=ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ds();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OK.bind(null,nr,t),[r.memoizedState,t]},useRef:function(t){var e=ds();return t={current:t},e.memoizedState=t},useState:zM,useDebugValue:oE,useDeferredValue:function(t){return ds().memoizedState=t},useTransition:function(){var t=zM(!1),e=t[0];return t=_K.bind(null,t[1]),ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nr,a=ds();if(Hn){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),Xr===null)throw Error(Te(349));bc&30||AM(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,VM(DM.bind(null,r,i,t),[t]),r.flags|=2048,jf(9,LM.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ds(),e=Xr.identifierPrefix;if(Hn){var n=Ks,r=qs;n=(r&~(1<<32-Ro(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NK++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MK={readContext:to,useCallback:qM,useContext:to,useEffect:iE,useImperativeHandle:HM,useInsertionEffect:UM,useLayoutEffect:WM,useMemo:KM,useReducer:rE,useRef:jM,useState:function(){return rE(zf)},useDebugValue:oE,useDeferredValue:function(t){var e=no();return XM(e,Ar.memoizedState,t)},useTransition:function(){var t=rE(zf)[0],e=no().memoizedState;return[t,e]},useMutableSource:MM,useSyncExternalStore:PM,useId:YM,unstable_isNewReconciler:!1},PK={readContext:to,useCallback:qM,useContext:to,useEffect:iE,useImperativeHandle:HM,useInsertionEffect:UM,useLayoutEffect:WM,useMemo:KM,useReducer:aE,useRef:jM,useState:function(){return aE(zf)},useDebugValue:oE,useDeferredValue:function(t){var e=no();return Ar===null?e.memoizedState=t:XM(e,Ar.memoizedState,t)},useTransition:function(){var t=aE(zf)[0],e=no().memoizedState;return[t,e]},useMutableSource:MM,useSyncExternalStore:PM,useId:YM,unstable_isNewReconciler:!1};function dh(t,e){try{var n="",r=e;do n+=lq(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function sE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AK=typeof WeakMap=="function"?WeakMap:Map;function e6(t,e,n){n=Ys(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ry||(Ry=!0,kE=r),lE(t,e)},n}function t6(t,e,n){n=Ys(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){lE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lE(t,e),typeof r!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function n6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new AK;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=XK.bind(null,t,e,n),e.then(t,t))}function r6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function a6(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ys(-1,1),e.tag=2,tu(n,e,1))),n.lanes|=1),t)}var LK=Ws.ReactCurrentOwner,ui=!1;function Ya(t,e,n,r){e.child=t===null?RM(e,null,n,r):uh(e,t.child,n,r)}function i6(t,e,n,r,a){n=n.render;var i=e.ref;return lh(e,a),r=tE(t,e,n,r,i,a),n=nE(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Qs(t,e,a)):(Hn&&n&&LC(e),e.flags|=1,Ya(t,e,r,a),e.child)}function o6(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!_E(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,s6(t,e,i,r,a)):(t=Dy(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Tf,n(o,r)&&t.ref===e.ref)return Qs(t,e,a)}return e.flags|=1,t=su(i,r),t.ref=e.ref,t.return=e,e.child=t}function s6(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(Tf(i,r)&&t.ref===e.ref)if(ui=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(ui=!0);else return e.lanes=t.lanes,Qs(t,e,a)}return uE(t,e,n,r,a)}function l6(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(ph,Pi),Pi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mn(ph,Pi),Pi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Mn(ph,Pi),Pi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Mn(ph,Pi),Pi|=r;return Ya(t,e,a,n),e.child}function u6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uE(t,e,n,r,a){var i=li(n)?pc:Na.current;return i=rh(e,i),lh(e,a),n=tE(t,e,n,r,i,a),r=nE(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Qs(t,e,a)):(Hn&&r&&LC(e),e.flags|=1,Ya(t,e,n,a),e.child)}function c6(t,e,n,r,a){if(li(n)){var i=!0;ly(e)}else i=!1;if(lh(e,a),e.stateNode===null)Iy(t,e),TM(e,n,r),KC(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=to(u):(u=li(n)?pc:Na.current,u=rh(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&NM(e,o,r,u),eu=!1;var h=e.memoizedState;o.state=h,my(e,r,o,a),l=e.memoizedState,s!==r||h!==l||si.current||eu?(typeof c=="function"&&(qC(e,n,c,r),l=e.memoizedState),(s=eu||IM(e,n,s,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kM(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Po(e.type,s),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=to(l):(l=li(n)?pc:Na.current,l=rh(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||h!==l)&&NM(e,o,r,l),eu=!1,h=e.memoizedState,o.state=h,my(e,r,o,a);var m=e.memoizedState;s!==d||h!==m||si.current||eu?(typeof f=="function"&&(qC(e,n,f,r),m=e.memoizedState),(u=eu||IM(e,n,u,r,h,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return cE(t,e,n,r,i,a)}function cE(t,e,n,r,a,i){u6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&fM(e,n,!1),Qs(t,e,i);r=e.stateNode,LK.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=uh(e,t.child,null,i),e.child=uh(e,null,s,i)):Ya(t,e,s,i),e.memoizedState=r.state,a&&fM(e,n,!0),e.child}function d6(t){var e=t.stateNode;e.pendingContext?hM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hM(t,e.context,!1),XC(t,e.containerInfo)}function h6(t,e,n,r,a){return oh(),zC(a),e.flags|=256,Ya(t,e,n,r),e.child}var dE={dehydrated:null,treeContext:null,retryLane:0};function hE(t){return{baseLanes:t,cachePool:null,transitions:null}}function p6(t,e,n){var r=e.pendingProps,a=tr.current,i=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(a&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Mn(tr,a&1),t===null)return BC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fy(o,r,0,null),t=Sc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hE(n),e.memoizedState=dE,t):pE(e,o));if(a=t.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return DK(t,e,o,r,s,a,n);if(i){i=r.fallback,o=e.mode,a=t.child,s=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=su(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=su(s,i):(i=Sc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dE,r}return i=t.child,t=i.sibling,r=su(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pE(t,e){return e=Fy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ey(t,e,n,r){return r!==null&&zC(r),uh(e,t.child,null,n),t=pE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DK(t,e,n,r,a,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sE(Error(Te(422))),Ey(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=Fy({mode:"visible",children:r.children},a,0,null),i=Sc(i,a,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&uh(e,t.child,null,o),e.child.memoizedState=hE(o),e.memoizedState=dE,i);if(!(e.mode&1))return Ey(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(Te(419)),r=sE(i,r,void 0),Ey(t,e,o,r)}if(s=(o&t.childLanes)!==0,ui||s){if(r=Xr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Xs(t,a),Do(r,t,a,-1))}return NE(),r=sE(Error(Te(421))),Ey(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=YK.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Mi=Yl(a.nextSibling),$i=e,Hn=!0,Mo=null,t!==null&&(Zi[eo++]=qs,Zi[eo++]=Ks,Zi[eo++]=fc,qs=t.id,Ks=t.overflow,fc=e),e=pE(e,r.children),e.flags|=4096,e)}function f6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),WC(t.return,e,n)}function fE(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function g6(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(Ya(t,e,r.children,n),r=tr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f6(t,n,e);else if(t.tag===19)f6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Mn(tr,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&vy(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),fE(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&vy(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}fE(e,!0,n,null,i);break;case"together":fE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Iy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=su(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=su(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FK(t,e,n){switch(e.tag){case 3:d6(e),oh();break;case 5:$M(e);break;case 1:li(e.type)&&ly(e);break;case 4:XC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;Mn(py,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Mn(tr,tr.current&1),e.flags|=128,null):n&e.child.childLanes?p6(t,e,n):(Mn(tr,tr.current&1),t=Qs(t,e,n),t!==null?t.sibling:null);Mn(tr,tr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return g6(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Mn(tr,tr.current),r)break;return null;case 22:case 23:return e.lanes=0,l6(t,e,n)}return Qs(t,e,n)}var m6,gE,y6,b6;m6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},gE=function(){},y6=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,yc(cs.current);var i=null;switch(n){case"input":a=WS(t,a),r=WS(t,r),i=[];break;case"select":a=er({},a,{value:void 0}),r=er({},r,{value:void 0}),i=[];break;case"textarea":a=qS(t,a),r=qS(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=iy)}XS(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(of.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a?.[u],r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(of.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Bn("scroll",t),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}},b6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vf(t,e){if(!Hn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Oa(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BK(t,e,n){var r=e.pendingProps;switch(DC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oa(e),null;case 1:return li(e.type)&&sy(),Oa(e),null;case 3:return r=e.stateNode,ch(),zn(si),zn(Na),JC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mo!==null&&(EE(Mo),Mo=null))),gE(t,e),Oa(e),null;case 5:YC(e);var a=yc(Df.current);if(n=e.type,t!==null&&e.stateNode!=null)y6(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return Oa(e),null}if(t=yc(cs.current),hy(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[us]=e,r[$f]=i,t=(e.mode&1)!==0,n){case"dialog":Bn("cancel",r),Bn("close",r);break;case"iframe":case"object":case"embed":Bn("load",r);break;case"video":case"audio":for(a=0;a<_f.length;a++)Bn(_f[a],r);break;case"source":Bn("error",r);break;case"img":case"image":case"link":Bn("error",r),Bn("load",r);break;case"details":Bn("toggle",r);break;case"input":QR(r,i),Bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Bn("invalid",r);break;case"textarea":e$(r,i),Bn("invalid",r)}XS(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&ay(r.textContent,s,t),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&ay(r.textContent,s,t),a=["children",""+s]):of.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Bn("scroll",r)}switch(n){case"input":A1(r),ZR(r,i,!0);break;case"textarea":A1(r),n$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=iy)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[us]=e,t[$f]=r,m6(t,e,!1,!1),e.stateNode=t;e:{switch(o=YS(n,r),n){case"dialog":Bn("cancel",t),Bn("close",t),a=r;break;case"iframe":case"object":case"embed":Bn("load",t),a=r;break;case"video":case"audio":for(a=0;a<_f.length;a++)Bn(_f[a],t);a=r;break;case"source":Bn("error",t),a=r;break;case"img":case"image":case"link":Bn("error",t),Bn("load",t),a=r;break;case"details":Bn("toggle",t),a=r;break;case"input":QR(t,r),a=WS(t,r),Bn("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=er({},r,{value:void 0}),Bn("invalid",t);break;case"textarea":e$(t,r),a=qS(t,r),Bn("invalid",t);break;default:a=r}XS(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?o$(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&a$(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cf(t,l):typeof l=="number"&&cf(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(of.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Bn("scroll",t):l!=null&&MS(t,i,l,o))}switch(n){case"input":A1(t),ZR(t,r,!1);break;case"textarea":A1(t),n$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ul(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Gd(t,!!r.multiple,i,!1):r.defaultValue!=null&&Gd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=iy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Oa(e),null;case 6:if(t&&e.stateNode!=null)b6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(n=yc(Df.current),yc(cs.current),hy(e)){if(r=e.stateNode,n=e.memoizedProps,r[us]=e,(i=r.nodeValue!==n)&&(t=$i,t!==null))switch(t.tag){case 3:ay(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ay(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[us]=e,e.stateNode=r}return Oa(e),null;case 13:if(zn(tr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hn&&Mi!==null&&e.mode&1&&!(e.flags&128))xM(),oh(),e.flags|=98560,i=!1;else if(i=hy(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Te(317));i[us]=e}else oh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Oa(e),i=!1}else Mo!==null&&(EE(Mo),Mo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tr.current&1?Lr===0&&(Lr=3):NE())),e.updateQueue!==null&&(e.flags|=4),Oa(e),null);case 4:return ch(),gE(t,e),t===null&&Of(e.stateNode.containerInfo),Oa(e),null;case 10:return UC(e.type._context),Oa(e),null;case 17:return li(e.type)&&sy(),Oa(e),null;case 19:if(zn(tr),i=e.memoizedState,i===null)return Oa(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vf(i,!1);else{if(Lr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vy(t),o!==null){for(e.flags|=128,Vf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mn(tr,tr.current&1|2),e.child}t=t.sibling}i.tail!==null&&yr()>fh&&(e.flags|=128,r=!0,Vf(i,!1),e.lanes=4194304)}else{if(!r)if(t=vy(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Hn)return Oa(e),null}else 2*yr()-i.renderingStartTime>fh&&n!==1073741824&&(e.flags|=128,r=!0,Vf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yr(),e.sibling=null,n=tr.current,Mn(tr,r?n&1|2:n&1),e):(Oa(e),null);case 22:case 23:return TE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pi&1073741824&&(Oa(e),e.subtreeFlags&6&&(e.flags|=8192)):Oa(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function zK(t,e){switch(DC(e),e.tag){case 1:return li(e.type)&&sy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ch(),zn(si),zn(Na),JC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return YC(e),null;case 13:if(zn(tr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));oh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zn(tr),null;case 4:return ch(),null;case 10:return UC(e.type._context),null;case 22:case 23:return TE(),null;case 24:return null;default:return null}}var Ty=!1,Ra=!1,jK=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function hh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lr(t,e,r)}else n.current=null}function v6(t,e,n){try{n()}catch(r){lr(t,e,r)}}var x6=!1;function VK(t,e){if(NC=q1,t=Y$(),xC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||a!==0&&d.nodeType!==3||(s=o+a),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===a&&(s=o),h===i&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_C={focusedElem:t,selectionRange:n},q1=!1,Ue=e;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Po(e.type,y),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(S){lr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return m=x6,x6=!1,m}function Uf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&v6(e,n,i)}a=a.next}while(a!==r)}}function Ny(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function w6(t){var e=t.alternate;e!==null&&(t.alternate=null,w6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[us],delete e[$f],delete e[MC],delete e[CK],delete e[EK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k6(t){return t.tag===5||t.tag===3||t.tag===4}function S6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=iy));else if(r!==4&&(t=t.child,t!==null))for(yE(t,e,n),t=t.sibling;t!==null;)yE(t,e,n),t=t.sibling}function bE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bE(t,e,n),t=t.sibling;t!==null;)bE(t,e,n),t=t.sibling}var ua=null,Ao=!1;function nu(t,e,n){for(n=n.child;n!==null;)C6(t,e,n),n=n.sibling}function C6(t,e,n){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(j1,n)}catch{}switch(n.tag){case 5:Ra||hh(n,e);case 6:var r=ua,a=Ao;ua=null,nu(t,e,n),ua=r,Ao=a,ua!==null&&(Ao?(t=ua,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ua.removeChild(n.stateNode));break;case 18:ua!==null&&(Ao?(t=ua,n=n.stateNode,t.nodeType===8?$C(t.parentNode,n):t.nodeType===1&&$C(t,n),wf(t)):$C(ua,n.stateNode));break;case 4:r=ua,a=Ao,ua=n.stateNode.containerInfo,Ao=!0,nu(t,e,n),ua=r,Ao=a;break;case 0:case 11:case 14:case 15:if(!Ra&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&v6(n,e,o),a=a.next}while(a!==r)}nu(t,e,n);break;case 1:if(!Ra&&(hh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){lr(n,e,s)}nu(t,e,n);break;case 21:nu(t,e,n);break;case 22:n.mode&1?(Ra=(r=Ra)||n.memoizedState!==null,nu(t,e,n),Ra=r):nu(t,e,n);break;default:nu(t,e,n)}}function E6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jK),e.forEach(function(r){var a=QK.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Lo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:ua=s.stateNode,Ao=!1;break e;case 3:ua=s.stateNode.containerInfo,Ao=!0;break e;case 4:ua=s.stateNode.containerInfo,Ao=!0;break e}s=s.return}if(ua===null)throw Error(Te(160));C6(i,o,a),ua=null,Ao=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){lr(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)I6(e,t),e=e.sibling}function I6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lo(e,t),hs(t),r&4){try{Uf(3,t,t.return),Ny(3,t)}catch(y){lr(t,t.return,y)}try{Uf(5,t,t.return)}catch(y){lr(t,t.return,y)}}break;case 1:Lo(e,t),hs(t),r&512&&n!==null&&hh(n,n.return);break;case 5:if(Lo(e,t),hs(t),r&512&&n!==null&&hh(n,n.return),t.flags&32){var a=t.stateNode;try{cf(a,"")}catch(y){lr(t,t.return,y)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&JR(a,i),YS(s,o);var u=YS(s,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?o$(a,d):c==="dangerouslySetInnerHTML"?a$(a,d):c==="children"?cf(a,d):MS(a,c,d,u)}switch(s){case"input":GS(a,i);break;case"textarea":t$(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Gd(a,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Gd(a,!!i.multiple,i.defaultValue,!0):Gd(a,!!i.multiple,i.multiple?[]:"",!1))}a[$f]=i}catch(y){lr(t,t.return,y)}}break;case 6:if(Lo(e,t),hs(t),r&4){if(t.stateNode===null)throw Error(Te(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(y){lr(t,t.return,y)}}break;case 3:if(Lo(e,t),hs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wf(e.containerInfo)}catch(y){lr(t,t.return,y)}break;case 4:Lo(e,t),hs(t);break;case 13:Lo(e,t),hs(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(wE=yr())),r&4&&E6(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ra=(u=Ra)||c,Lo(e,t),Ra=u):Lo(e,t),hs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ue=t,c=t.child;c!==null;){for(d=Ue=c;Ue!==null;){switch(h=Ue,f=h.child,h.tag){case 0:case 11:case 14:case 15:Uf(4,h,h.return);break;case 1:hh(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){lr(r,n,y)}}break;case 5:hh(h,h.return);break;case 22:if(h.memoizedState!==null){_6(d);continue}}f!==null?(f.return=h,Ue=f):_6(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=i$("display",o))}catch(y){lr(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){lr(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lo(e,t),hs(t),r&4&&E6(t);break;case 21:break;default:Lo(e,t),hs(t)}}function hs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(k6(n)){var r=n;break e}n=n.return}throw Error(Te(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(cf(a,""),r.flags&=-33);var i=S6(t);bE(t,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=S6(t);yE(t,s,o);break;default:throw Error(Te(161))}}catch(l){lr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UK(t,e,n){Ue=t,T6(t)}function T6(t,e,n){for(var r=(t.mode&1)!==0;Ue!==null;){var a=Ue,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Ty;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||Ra;s=Ty;var u=Ra;if(Ty=o,(Ra=l)&&!u)for(Ue=a;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?O6(a):l!==null?(l.return=o,Ue=l):O6(a);for(;i!==null;)Ue=i,T6(i),i=i.sibling;Ue=a,Ty=s,Ra=u}N6(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ue=i):N6(t)}}function N6(t){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ra||Ny(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ra)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Po(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&CM(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}CM(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&wf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Ra||e.flags&512&&mE(e)}catch(h){lr(e,e.return,h)}}if(e===t){Ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function _6(t){for(;Ue!==null;){var e=Ue;if(e===t){Ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function O6(t){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ny(4,e)}catch(l){lr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(l){lr(e,a,l)}}var i=e.return;try{mE(e)}catch(l){lr(e,i,l)}break;case 5:var o=e.return;try{mE(e)}catch(l){lr(e,o,l)}}}catch(l){lr(e,e.return,l)}if(e===t){Ue=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ue=s;break}Ue=e.return}}var WK=Math.ceil,_y=Ws.ReactCurrentDispatcher,vE=Ws.ReactCurrentOwner,ro=Ws.ReactCurrentBatchConfig,en=0,Xr=null,Tr=null,ca=0,Pi=0,ph=Ql(0),Lr=0,Wf=null,vc=0,Oy=0,xE=0,Gf=null,ci=null,wE=0,fh=1/0,Js=null,Ry=!1,kE=null,ru=null,$y=!1,au=null,My=0,Hf=0,SE=null,Py=-1,Ay=0;function Qa(){return en&6?yr():Py!==-1?Py:Py=yr()}function iu(t){return t.mode&1?en&2&&ca!==0?ca&-ca:TK.transition!==null?(Ay===0&&(Ay=w$()),Ay):(t=bn,t!==0||(t=window.event,t=t===void 0?16:O$(t.type)),t):1}function Do(t,e,n,r){if(50<Hf)throw Hf=0,SE=null,Error(Te(185));mf(t,n,r),(!(en&2)||t!==Xr)&&(t===Xr&&(!(en&2)&&(Oy|=n),Lr===4&&ou(t,ca)),di(t,r),n===1&&en===0&&!(e.mode&1)&&(fh=yr()+500,uy&&Zl()))}function di(t,e){var n=t.callbackNode;Tq(t,e);var r=W1(t,t===Xr?ca:0);if(r===0)n!==null&&b$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&b$(n),e===1)t.tag===0?IK($6.bind(null,t)):gM($6.bind(null,t)),kK(function(){!(en&6)&&Zl()}),n=null;else{switch(k$(r)){case 1:n=rC;break;case 4:n=v$;break;case 16:n=z1;break;case 536870912:n=x$;break;default:n=z1}n=z6(n,R6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R6(t,e){if(Py=-1,Ay=0,en&6)throw Error(Te(327));var n=t.callbackNode;if(gh()&&t.callbackNode!==n)return null;var r=W1(t,t===Xr?ca:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ly(t,r);else{e=r;var a=en;en|=2;var i=P6();(Xr!==t||ca!==e)&&(Js=null,fh=yr()+500,wc(t,e));do try{qK();break}catch(s){M6(t,s)}while(!0);VC(),_y.current=i,en=a,Tr!==null?e=0:(Xr=null,ca=0,e=Lr)}if(e!==0){if(e===2&&(a=aC(t),a!==0&&(r=a,e=CE(t,a))),e===1)throw n=Wf,wc(t,0),ou(t,r),di(t,yr()),n;if(e===6)ou(t,r);else{if(a=t.current.alternate,!(r&30)&&!GK(a)&&(e=Ly(t,r),e===2&&(i=aC(t),i!==0&&(r=i,e=CE(t,i))),e===1))throw n=Wf,wc(t,0),ou(t,r),di(t,yr()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:kc(t,ci,Js);break;case 3:if(ou(t,r),(r&130023424)===r&&(e=wE+500-yr(),10<e)){if(W1(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Qa(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=RC(kc.bind(null,t,ci,Js),e);break}kc(t,ci,Js);break;case 4:if(ou(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-Ro(r);i=1<<o,o=e[o],o>a&&(a=o),r&=~i}if(r=a,r=yr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WK(r/1960))-r,10<r){t.timeoutHandle=RC(kc.bind(null,t,ci,Js),r);break}kc(t,ci,Js);break;case 5:kc(t,ci,Js);break;default:throw Error(Te(329))}}}return di(t,yr()),t.callbackNode===n?R6.bind(null,t):null}function CE(t,e){var n=Gf;return t.current.memoizedState.isDehydrated&&(wc(t,e).flags|=256),t=Ly(t,e),t!==2&&(e=ci,ci=n,e!==null&&EE(e)),t}function EE(t){ci===null?ci=t:ci.push.apply(ci,t)}function GK(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!$o(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ou(t,e){for(e&=~xE,e&=~Oy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ro(e),r=1<<n;t[n]=-1,e&=~r}}function $6(t){if(en&6)throw Error(Te(327));gh();var e=W1(t,0);if(!(e&1))return di(t,yr()),null;var n=Ly(t,e);if(t.tag!==0&&n===2){var r=aC(t);r!==0&&(e=r,n=CE(t,r))}if(n===1)throw n=Wf,wc(t,0),ou(t,e),di(t,yr()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kc(t,ci,Js),di(t,yr()),null}function IE(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(fh=yr()+500,uy&&Zl())}}function xc(t){au!==null&&au.tag===0&&!(en&6)&&gh();var e=en;en|=1;var n=ro.transition,r=bn;try{if(ro.transition=null,bn=1,t)return t()}finally{bn=r,ro.transition=n,en=e,!(en&6)&&Zl()}}function TE(){Pi=ph.current,zn(ph)}function wc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wK(n)),Tr!==null)for(n=Tr.return;n!==null;){var r=n;switch(DC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sy();break;case 3:ch(),zn(si),zn(Na),JC();break;case 5:YC(r);break;case 4:ch();break;case 13:zn(tr);break;case 19:zn(tr);break;case 10:UC(r.type._context);break;case 22:case 23:TE()}n=n.return}if(Xr=t,Tr=t=su(t.current,null),ca=Pi=e,Lr=0,Wf=null,xE=Oy=vc=0,ci=Gf=null,mc!==null){for(e=0;e<mc.length;e++)if(n=mc[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}mc=null}return t}function M6(t,e){do{var n=Tr;try{if(VC(),xy.current=Cy,wy){for(var r=nr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}wy=!1}if(bc=0,Kr=Ar=nr=null,Ff=!1,Bf=0,vE.current=null,n===null||n.return===null){Lr=1,Wf=e,Tr=null;break}e:{var i=t,o=n.return,s=n,l=e;if(e=ca,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=r6(o);if(f!==null){f.flags&=-257,a6(f,o,s,i,e),f.mode&1&&n6(i,u,e),e=f,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){n6(i,u,e),NE();break e}l=Error(Te(426))}}else if(Hn&&s.mode&1){var v=r6(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),a6(v,o,s,i,e),zC(dh(l,s));break e}}i=l=dh(l,s),Lr!==4&&(Lr=2),Gf===null?Gf=[i]:Gf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=e6(i,l,e);SM(i,b);break e;case 1:s=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ru===null||!ru.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=t6(i,s,e);SM(i,S);break e}}i=i.return}while(i!==null)}L6(n)}catch(C){e=C,Tr===n&&n!==null&&(Tr=n=n.return);continue}break}while(!0)}function P6(){var t=_y.current;return _y.current=Cy,t===null?Cy:t}function NE(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),Xr===null||!(vc&268435455)&&!(Oy&268435455)||ou(Xr,ca)}function Ly(t,e){var n=en;en|=2;var r=P6();(Xr!==t||ca!==e)&&(Js=null,wc(t,e));do try{HK();break}catch(a){M6(t,a)}while(!0);if(VC(),en=n,_y.current=r,Tr!==null)throw Error(Te(261));return Xr=null,ca=0,Lr}function HK(){for(;Tr!==null;)A6(Tr)}function qK(){for(;Tr!==null&&!bq();)A6(Tr)}function A6(t){var e=B6(t.alternate,t,Pi);t.memoizedProps=t.pendingProps,e===null?L6(t):Tr=e,vE.current=null}function L6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zK(n,e),n!==null){n.flags&=32767,Tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lr=6,Tr=null;return}}else if(n=BK(n,e,Pi),n!==null){Tr=n;return}if(e=e.sibling,e!==null){Tr=e;return}Tr=e=t}while(e!==null);Lr===0&&(Lr=5)}function kc(t,e,n){var r=bn,a=ro.transition;try{ro.transition=null,bn=1,KK(t,e,n,r)}finally{ro.transition=a,bn=r}return null}function KK(t,e,n,r){do gh();while(au!==null);if(en&6)throw Error(Te(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Nq(t,i),t===Xr&&(Tr=Xr=null,ca=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$y||($y=!0,z6(z1,function(){return gh(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ro.transition,ro.transition=null;var o=bn;bn=1;var s=en;en|=4,vE.current=null,VK(t,n),I6(n,t),fK(_C),q1=!!NC,_C=NC=null,t.current=n,UK(n),vq(),en=s,bn=o,ro.transition=i}else t.current=n;if($y&&($y=!1,au=t,My=a),i=t.pendingLanes,i===0&&(ru=null),kq(n.stateNode),di(t,yr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ry)throw Ry=!1,t=kE,kE=null,t;return My&1&&t.tag!==0&&gh(),i=t.pendingLanes,i&1?t===SE?Hf++:(Hf=0,SE=t):Hf=0,Zl(),null}function gh(){if(au!==null){var t=k$(My),e=ro.transition,n=bn;try{if(ro.transition=null,bn=16>t?16:t,au===null)var r=!1;else{if(t=au,au=null,My=0,en&6)throw Error(Te(331));var a=en;for(en|=4,Ue=t.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ue=u;Ue!==null;){var c=Ue;switch(c.tag){case 0:case 11:case 15:Uf(8,c,i)}var d=c.child;if(d!==null)d.return=c,Ue=d;else for(;Ue!==null;){c=Ue;var h=c.sibling,f=c.return;if(w6(c),c===u){Ue=null;break}if(h!==null){h.return=f,Ue=h;break}Ue=f}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uf(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Ue=b;break e}Ue=i.return}}var x=t.current;for(Ue=x;Ue!==null;){o=Ue;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ue=w;else e:for(o=x;Ue!==null;){if(s=Ue,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ny(9,s)}}catch(C){lr(s,s.return,C)}if(s===o){Ue=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Ue=S;break e}Ue=s.return}}if(en=a,Zl(),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(j1,t)}catch{}r=!0}return r}finally{bn=n,ro.transition=e}}return!1}function D6(t,e,n){e=dh(n,e),e=e6(t,e,1),t=tu(t,e,1),e=Qa(),t!==null&&(mf(t,1,e),di(t,e))}function lr(t,e,n){if(t.tag===3)D6(t,t,n);else for(;e!==null;){if(e.tag===3){D6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ru===null||!ru.has(r))){t=dh(n,t),t=t6(e,t,1),e=tu(e,t,1),t=Qa(),e!==null&&(mf(e,1,t),di(e,t));break}}e=e.return}}function XK(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qa(),t.pingedLanes|=t.suspendedLanes&n,Xr===t&&(ca&n)===n&&(Lr===4||Lr===3&&(ca&130023424)===ca&&500>yr()-wE?wc(t,0):xE|=n),di(t,e)}function F6(t,e){e===0&&(t.mode&1?(e=U1,U1<<=1,!(U1&130023424)&&(U1=4194304)):e=1);var n=Qa();t=Xs(t,e),t!==null&&(mf(t,e,n),di(t,n))}function YK(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),F6(t,n)}function QK(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),F6(t,n)}var B6;B6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||si.current)ui=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ui=!1,FK(t,e,n);ui=!!(t.flags&131072)}else ui=!1,Hn&&e.flags&1048576&&mM(e,dy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Iy(t,e),t=e.pendingProps;var a=rh(e,Na.current);lh(e,n),a=tE(null,e,r,t,a,n);var i=nE();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,li(r)?(i=!0,ly(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,HC(e),a.updater=yy,e.stateNode=a,a._reactInternals=e,KC(e,r,t,n),e=cE(null,e,r,!0,i,n)):(e.tag=0,Hn&&i&&LC(e),Ya(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Iy(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=ZK(r),t=Po(r,t),a){case 0:e=uE(null,e,r,t,n);break e;case 1:e=c6(null,e,r,t,n);break e;case 11:e=i6(null,e,r,t,n);break e;case 14:e=o6(null,e,r,Po(r.type,t),n);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Po(r,a),uE(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Po(r,a),c6(t,e,r,a,n);case 3:e:{if(d6(e),t===null)throw Error(Te(387));r=e.pendingProps,i=e.memoizedState,a=i.element,kM(t,e),my(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=dh(Error(Te(423)),e),e=h6(t,e,r,n,a);break e}else if(r!==a){a=dh(Error(Te(424)),e),e=h6(t,e,r,n,a);break e}else for(Mi=Yl(e.stateNode.containerInfo.firstChild),$i=e,Hn=!0,Mo=null,n=RM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oh(),r===a){e=Qs(t,e,n);break e}Ya(t,e,r,n)}e=e.child}return e;case 5:return $M(e),t===null&&BC(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,OC(r,a)?o=null:i!==null&&OC(r,i)&&(e.flags|=32),u6(t,e),Ya(t,e,o,n),e.child;case 6:return t===null&&BC(e),null;case 13:return p6(t,e,n);case 4:return XC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uh(e,null,r,n):Ya(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Po(r,a),i6(t,e,r,a,n);case 7:return Ya(t,e,e.pendingProps,n),e.child;case 8:return Ya(t,e,e.pendingProps.children,n),e.child;case 12:return Ya(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,Mn(py,r._currentValue),r._currentValue=o,i!==null)if($o(i.value,o)){if(i.children===a.children&&!si.current){e=Qs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ys(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),WC(i.return,n,e),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Te(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),WC(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ya(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,lh(e,n),a=to(a),r=r(a),e.flags|=1,Ya(t,e,r,n),e.child;case 14:return r=e.type,a=Po(r,e.pendingProps),a=Po(r.type,a),o6(t,e,r,a,n);case 15:return s6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Po(r,a),Iy(t,e),e.tag=1,li(r)?(t=!0,ly(e)):t=!1,lh(e,n),TM(e,r,a),KC(e,r,a,n),cE(null,e,r,!0,t,n);case 19:return g6(t,e,n);case 22:return l6(t,e,n)}throw Error(Te(156,e.tag))};function z6(t,e){return y$(t,e)}function JK(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ao(t,e,n,r){return new JK(t,e,n,r)}function _E(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZK(t){if(typeof t=="function")return _E(t)?1:0;if(t!=null){if(t=t.$$typeof,t===LS)return 11;if(t===BS)return 14}return 2}function su(t,e){var n=t.alternate;return n===null?(n=ao(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dy(t,e,n,r,a,i){var o=2;if(r=t,typeof t=="function")_E(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wd:return Sc(n.children,a,i,e);case PS:o=8,a|=8;break;case AS:return t=ao(12,n,e,a|2),t.elementType=AS,t.lanes=i,t;case DS:return t=ao(13,n,e,a),t.elementType=DS,t.lanes=i,t;case FS:return t=ao(19,n,e,a),t.elementType=FS,t.lanes=i,t;case qR:return Fy(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case GR:o=10;break e;case HR:o=9;break e;case LS:o=11;break e;case BS:o=14;break e;case Vl:o=16,r=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=ao(o,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function Sc(t,e,n,r){return t=ao(7,t,r,e),t.lanes=n,t}function Fy(t,e,n,r){return t=ao(22,t,r,e),t.elementType=qR,t.lanes=n,t.stateNode={isHidden:!1},t}function OE(t,e,n){return t=ao(6,t,null,e),t.lanes=n,t}function RE(t,e,n){return e=ao(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eX(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iC(0),this.expirationTimes=iC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iC(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function $E(t,e,n,r,a,i,o,s,l){return t=new eX(t,e,n,s,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ao(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HC(i),t}function tX(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ud,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function j6(t){if(!t)return Jl;t=t._reactInternals;e:{if(dc(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(li(n))return pM(t,n,e)}return e}function V6(t,e,n,r,a,i,o,s,l){return t=$E(n,r,!0,t,a,i,o,s,l),t.context=j6(null),n=t.current,r=Qa(),a=iu(n),i=Ys(r,a),i.callback=e??null,tu(n,i,a),t.current.lanes=a,mf(t,a,r),di(t,r),t}function By(t,e,n,r){var a=e.current,i=Qa(),o=iu(a);return n=j6(n),e.context===null?e.context=n:e.pendingContext=n,e=Ys(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tu(a,e,o),t!==null&&(Do(t,a,o,i),gy(t,a,o)),o}function zy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function U6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ME(t,e){U6(t,e),(t=t.alternate)&&U6(t,e)}function nX(){return null}var W6=typeof reportError=="function"?reportError:function(t){console.error(t)};function PE(t){this._internalRoot=t}jy.prototype.render=PE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));By(t,e,null,null)},jy.prototype.unmount=PE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xc(function(){By(null,t,null,null)}),e[Gs]=null}};function jy(t){this._internalRoot=t}jy.prototype.unstable_scheduleHydration=function(t){if(t){var e=E$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ql.length&&e!==0&&e<ql[n].priority;n++);ql.splice(n,0,t),n===0&&N$(t)}};function AE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G6(){}function rX(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=zy(o);i.call(u)}}var o=V6(e,r,t,0,null,!1,!1,"",G6);return t._reactRootContainer=o,t[Gs]=o.current,Of(t.nodeType===8?t.parentNode:t),xc(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=zy(l);s.call(u)}}var l=$E(t,0,!1,null,null,!1,!1,"",G6);return t._reactRootContainer=l,t[Gs]=l.current,Of(t.nodeType===8?t.parentNode:t),xc(function(){By(e,l,n,r)}),l}function Uy(t,e,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=zy(o);s.call(l)}}By(e,o,t,a)}else o=rX(n,e,t,a,r);return zy(o)}S$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gf(e.pendingLanes);n!==0&&(oC(e,n|1),di(e,yr()),!(en&6)&&(fh=yr()+500,Zl()))}break;case 13:xc(function(){var r=Xs(t,1);if(r!==null){var a=Qa();Do(r,t,1,a)}}),ME(t,1)}},sC=function(t){if(t.tag===13){var e=Xs(t,134217728);if(e!==null){var n=Qa();Do(e,t,134217728,n)}ME(t,134217728)}},C$=function(t){if(t.tag===13){var e=iu(t),n=Xs(t,e);if(n!==null){var r=Qa();Do(n,t,e,r)}ME(t,e)}},E$=function(){return bn},I$=function(t,e){var n=bn;try{return bn=t,e()}finally{bn=n}},ZS=function(t,e,n){switch(e){case"input":if(GS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=oy(r);if(!a)throw Error(Te(90));YR(r),GS(r,a)}}}break;case"textarea":t$(t,n);break;case"select":e=n.value,e!=null&&Gd(t,!!n.multiple,e,!1)}},c$=IE,d$=xc;var aX={usingClientEntryPoint:!1,Events:[Mf,th,oy,l$,u$,IE]},qf={findFiberByHostInstance:hc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iX={bundleType:qf.bundleType,version:qf.version,rendererPackageName:qf.rendererPackageName,rendererConfig:qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g$(t),t===null?null:t.stateNode},findFiberByHostInstance:qf.findFiberByHostInstance||nX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wy.isDisabled&&Wy.supportsFiber)try{j1=Wy.inject(iX),ls=Wy}catch{}}_i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aX,_i.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AE(e))throw Error(Te(200));return tX(t,e,null,n)},_i.createRoot=function(t,e){if(!AE(t))throw Error(Te(299));var n=!1,r="",a=W6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=$E(t,1,!1,null,null,n,!1,r,a),t[Gs]=e.current,Of(t.nodeType===8?t.parentNode:t),new PE(e)},_i.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=g$(e),t=t===null?null:t.stateNode,t},_i.flushSync=function(t){return xc(t)},_i.hydrate=function(t,e,n){if(!Vy(e))throw Error(Te(200));return Uy(null,t,e,!0,n)},_i.hydrateRoot=function(t,e,n){if(!AE(t))throw Error(Te(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=W6;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=V6(e,null,t,1,n??null,a,!1,i,o),t[Gs]=e.current,Of(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new jy(e)},_i.render=function(t,e,n){if(!Vy(e))throw Error(Te(200));return Uy(null,t,e,!1,n)},_i.unmountComponentAtNode=function(t){if(!Vy(t))throw Error(Te(40));return t._reactRootContainer?(xc(function(){Uy(null,null,t,!1,function(){t._reactRootContainer=null,t[Gs]=null})}),!0):!1},_i.unstable_batchedUpdates=IE,_i.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vy(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return Uy(t,e,n,!1,r)},_i.version="18.2.0-next-9e3b772b8-20220608";function H6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H6)}catch(t){console.error(t)}}H6(),FR.exports=_i;var mh=FR.exports;const q6=Ii(mh),oX=eS({__proto__:null,default:q6},[mh]);var LE=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),sX=t=>{let e=t.getInitialClientOffset(),n=t.getInitialSourceClientOffset();return e===null||n===null?{x:0,y:0}:LE(e,n)},lX=(t,e)=>{let n=t.getClientOffset();if(n===null)return null;if(!e.current||!e.current.getBoundingClientRect)return LE(n,sX(t));let r=e.current.getBoundingClientRect(),a={x:r.width/2,y:r.height/2};return LE(n,a)},uX=t=>{let e=`translate(${t.x.toFixed(1)}px, ${t.y.toFixed(1)}px)`;return{pointerEvents:"none",position:"fixed",top:0,left:0,transform:e,WebkitTransform:e}},cX=()=>{let t=O.useRef(null),e=XH(n=>({currentOffset:lX(n,t),isDragging:n.isDragging(),itemType:n.getItemType(),item:n.getItem(),monitor:n}));return!e.isDragging||e.currentOffset===null?{display:!1}:{display:!0,itemType:e.itemType,item:e.item,style:uX(e.currentOffset),monitor:e.monitor,ref:t}},K6=O.createContext(void 0),dX=t=>{let e=cX();if(!e.display)return null;let{display:n,...r}=e,a;return"children"in t?typeof t.children=="function"?a=t.children(r):a=t.children:a=t.generator(r),G.createElement(K6.Provider,{value:r},a)},X6=O.createContext(null),hX=({portal:t,...e})=>{let[n,r]=O.useState(null);return G.createElement(X6.Provider,{value:t??n},G.createElement(EH,{backend:eG,...e}),t?null:G.createElement("div",{ref:r}))},pX=()=>{let[t,e]=O.useState(!1),n=O.useContext(fS);return O.useEffect(()=>{var r;let a=(r=n?.dragDropManager)==null?void 0:r.getBackend(),i={backendChanged:o=>{e(o.previewEnabled())}};return e(a.previewEnabled()),a.previewsList().register(i),()=>{a.previewsList().unregister(i)}},[n,n.dragDropManager]),t},Y6=t=>{let e=pX(),n=O.useContext(X6);if(!e)return null;let r=G.createElement(dX,{...t});return n!==null?mh.createPortal(r,n):r};Y6.Context=K6;var lu;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(lu||(lu={}));class fX{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get delayMouseStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function gX(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function mX(t,e,n,r,a){if(!a)return!1;const i=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<a.length;++o){const s=a[o];if(s&&(s.start==null||i>=s.start)&&(s.end==null||i<=s.end))return!0}return!1}const yX={Left:1,Right:2,Center:4},bX={Left:0,Center:1,Right:2};function DE(t){return t.button===void 0||t.button===bX.Left}function vX(t){return t.buttons===void 0||(t.buttons&yX.Left)===0}function Q6(t){return!!t.targetTouches}const xX=1;function wX(t){const e=t.nodeType===xX?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function kX(t,e){if(t.targetTouches.length===1)return Gy(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return Gy(t.touches[0])}function Gy(t,e){return Q6(t)?kX(t,e):{x:t.clientX,y:t.clientY}}const J6=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Kf={[lu.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[lu.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[lu.keyboard]:{keydown:"keydown"}};class O0{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(_t(!O0.isSetUp,"Cannot have two Touch backends at the same time."),O0.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(O0.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,a=!1){const i=J6?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Kf[o][n];s&&e.addEventListener(s,r,i)})}removeEventListener(e,n,r,a=!1){const i=J6?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Kf[o][n];s&&e.removeEventListener(s,r,i)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const a=i=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(i.type){case Kf.mouse.move:o={x:i.clientX,y:i.clientY};break;case Kf.touch.move:var s,l;o={x:((s=i.touches[0])===null||s===void 0?void 0:s.clientX)||0,y:((l=i.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,c=u&&n.contains(u);if(u===n||c)return this.handleMove(i,e)};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",a))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&wX(i)},this.handleTopMoveStartCapture=a=>{DE(a)&&(this.moveStartSourceIds=[])},this.handleMoveStart=a=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(a)},this.handleTopMoveStart=a=>{if(!DE(a))return;const i=Gy(a);i&&(Q6(a)&&(this.lastTargetTouchFallback=a.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=a=>{if(!DE(a))return;const i=a.type===Kf.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,a),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(a,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=a=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:i,dragOverTargetIds:o}=this,s=this.options.enableHoverOutsideTarget,l=Gy(a,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&mX(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&gX(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),a.cancelable&&a.preventDefault();const c=(o||[]).map(m=>this.targetNodes.get(m)).filter(m=>!!m),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,c):this.document.elementsFromPoint(l.x,l.y),h=[];for(const m in d){if(!d.hasOwnProperty(m))continue;let y=d[m];for(y!=null&&h.push(y);y;)y=y.parentElement,y&&h.indexOf(y)===-1&&h.push(y)}const f=h.filter(m=>c.indexOf(m)>-1).map(m=>this._getDropTargetId(m)).filter(m=>!!m).filter((m,y,v)=>v.indexOf(m)===y);if(s)for(const m in this.targetNodes){const y=this.targetNodes.get(m);if(u&&y&&y.contains(u)&&f.indexOf(m)===-1){f.unshift(m);break}}f.reverse(),this.actions.hover(f,{clientOffset:l})},this._getDropTargetId=a=>{const i=this.targetNodes.keys();let o=i.next();for(;o.done===!1;){const s=o.value;if(a===this.targetNodes.get(s))return s;o=i.next()}},this.handleTopMoveEndCapture=a=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!vX(a)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}a.cancelable&&a.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=a=>{a.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new fX(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(lu.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(lu.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(lu.keyboard)}}const SX=function(t,e={},n={}){return new O0(t,e,n)};var Z6,eP=mh;Z6=eP.createRoot,eP.hydrateRoot;var CX={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const EX=Ii(CX);var IX=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function tP(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],(EX[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=t.indexOf("-->");return{type:"comment",comment:r!==-1?t.slice(4,r):""}}for(var a=new RegExp(IX),i=null;(i=a.exec(t))!==null;)if(i[0].trim())if(i[1]){var o=i[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),e.attrs[s[0]]=s[1],a.lastIndex--}else i[2]&&(e.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return e}var TX=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,NX=/^\s*$/,_X=Object.create(null);function nP(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(n){var r=[];for(var a in n)r.push(a+'="'+n[a]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(nP,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var OX={parse:function(t,e){e||(e={}),e.components||(e.components=_X);var n,r=[],a=[],i=-1,o=!1;if(t.indexOf("<")!==0){var s=t.indexOf("<");r.push({type:"text",content:s===-1?t:t.substring(0,s)})}return t.replace(TX,function(l,u){if(o){if(l!=="</"+n.name+">")return;o=!1}var c,d=l.charAt(1)!=="/",h=l.startsWith("<!--"),f=u+l.length,m=t.charAt(f);if(h){var y=tP(l);return i<0?(r.push(y),r):((c=a[i]).children.push(y),r)}if(d&&(i++,(n=tP(l)).type==="tag"&&e.components[n.name]&&(n.type="component",o=!0),n.voidElement||o||!m||m==="<"||n.children.push({type:"text",content:t.slice(f,t.indexOf("<",f))}),i===0&&r.push(n),(c=a[i-1])&&c.children.push(n),a[i]=n),(!d||n.voidElement)&&(i>-1&&(n.voidElement||n.name===l.slice(2,-1))&&(i--,n=i===-1?r:a[i]),!o&&m!=="<"&&m)){c=i===-1?r:a[i].children;var v=t.indexOf("<",f),b=t.slice(f,v===-1?void 0:v);NX.test(b)&&(b=" "),(v>-1&&i+c.length>=0||b!==" ")&&c.push({type:"text",content:b})}}),r},stringify:function(t){return t.reduce(function(e,n){return e+nP("",n)},"")}};function Hy(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const rP={};function qy(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&rP[e[0]]||(typeof e[0]=="string"&&(rP[e[0]]=new Date),Hy(...e))}const aP=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function iP(t,e,n){t.loadNamespaces(e,aP(t,n))}function oP(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,aP(t,r))}function RX(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],a=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=e.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!a||o(i,t)))}function $X(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(qy("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,t))return!1}}):RX(t,e,n)}const MX=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,PX={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},AX=t=>PX[t],LX=t=>t.replace(MX,AX);let DX={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:LX};function sP(){return DX}let FX;function FE(){return FX}function BE(t,e){if(!t)return!1;const n=t.props?t.props.children:t.children;return e?n.length>0:!!n}function zE(t){if(!t)return[];const e=t.props?t.props.children:t.children;return t.props&&t.props.i18nIsDynamicList?yh(e):e}function BX(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(e=>O.isValidElement(e))}function yh(t){return Array.isArray(t)?t:[t]}function zX(t,e){const n={...e};return n.props=Object.assign(t.props,e.props),n}function lP(t,e){if(!t)return"";let n="";const r=yh(t),a=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return r.forEach((i,o)=>{if(typeof i=="string")n+=`${i}`;else if(O.isValidElement(i)){const s=Object.keys(i.props).length,l=a.indexOf(i.type)>-1,u=i.props.children;if(!u&&l&&s===0)n+=`<${i.type}/>`;else if(!u&&(!l||s!==0))n+=`<${o}></${o}>`;else if(i.props.i18nIsDynamicList)n+=`<${o}></${o}>`;else if(l&&s===1&&typeof u=="string")n+=`<${i.type}>${u}</${i.type}>`;else{const c=lP(u,e);n+=`<${o}>${c}</${o}>`}}else if(i===null)Hy("Trans: the passed in value is invalid - seems you passed in a null child.");else if(typeof i=="object"){const{format:s,...l}=i,u=Object.keys(l);if(u.length===1){const c=s?`${u[0]}, ${s}`:u[0];n+=`{{${c}}}`}else Hy("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else Hy("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n}function jX(t,e,n,r,a,i){if(e==="")return[];const o=r.transKeepBasicHtmlNodesFor||[],s=e&&new RegExp(o.map(v=>`<${v}`).join("|")).test(e);if(!t&&!s&&!i)return[e];const l={};function u(v){yh(v).forEach(b=>{typeof b!="string"&&(BE(b)?u(zE(b)):typeof b=="object"&&!O.isValidElement(b)&&Object.assign(l,b))})}u(t);const c=OX.parse(`<0>${e}</0>`),d={...l,...a};function h(v,b,x){const w=zE(v),S=m(w,b.children,x);return BX(w)&&S.length===0||v.props&&v.props.i18nIsDynamicList?w:S}function f(v,b,x,w,S){v.dummy?(v.children=b,x.push(O.cloneElement(v,{key:w},S?void 0:b))):x.push(...O.Children.map([v],C=>{const E={...C.props};return delete E.i18nIsDynamicList,O.createElement(C.type,{...E,key:w,ref:C.ref},S?null:b)}))}function m(v,b,x){const w=yh(v);return yh(b).reduce((S,C,E)=>{const _=C.children&&C.children[0]&&C.children[0].content&&n.services.interpolator.interpolate(C.children[0].content,d,n.language);if(C.type==="tag"){let N=w[parseInt(C.name,10)];x.length===1&&!N&&(N=x[0][C.name]),N||(N={});const $=Object.keys(C.attrs).length!==0?zX({props:C.attrs},N):N,P=O.isValidElement($),D=P&&BE(C,!0)&&!C.voidElement,j=s&&typeof $=="object"&&$.dummy&&!P,B=typeof t=="object"&&t!==null&&Object.hasOwnProperty.call(t,C.name);if(typeof $=="string"){const K=n.services.interpolator.interpolate($,d,n.language);S.push(K)}else if(BE($)||D){const K=h($,C,x);f($,K,S,E)}else if(j){const K=m(w,C.children,x);f($,K,S,E)}else if(Number.isNaN(parseFloat(C.name)))if(B){const K=h($,C,x);f($,K,S,E,C.voidElement)}else if(r.transSupportBasicHtmlNodes&&o.indexOf(C.name)>-1)if(C.voidElement)S.push(O.createElement(C.name,{key:`${C.name}-${E}`}));else{const K=m(w,C.children,x);S.push(O.createElement(C.name,{key:`${C.name}-${E}`},K))}else if(C.voidElement)S.push(`<${C.name} />`);else{const K=m(w,C.children,x);S.push(`<${C.name}>${K}</${C.name}>`)}else if(typeof $=="object"&&!P){const K=C.children[0]?_:null;K&&S.push(K)}else f($,_,S,E,C.children.length!==1||!_)}else if(C.type==="text"){const N=r.transWrapTextNodes,$=i?r.unescape(n.services.interpolator.interpolate(C.content,d,n.language)):n.services.interpolator.interpolate(C.content,d,n.language);N?S.push(O.createElement(N,{key:`${C.name}-${E}`},$)):S.push($)}return S},[])}const y=m([{dummy:!0,children:t||[]}],c,yh(t||[]));return zE(y[0])}function VX(t){let{children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o={},values:s,defaults:l,components:u,ns:c,i18n:d,t:h,shouldUnescape:f,...m}=t;const y=d||FE();if(!y)return qy("You will need to pass in an i18next instance by using i18nextReactModule"),e;const v=h||y.t.bind(y)||(j=>j);i&&(o.context=i);const b={...sP(),...y.options&&y.options.react};let x=c||v.ns||y.options&&y.options.defaultNS;x=typeof x=="string"?[x]:x||["translation"];const w=lP(e,b),S=l||w||b.transEmptyNodeValue||a,{hashTransKey:C}=b,E=a||(C?C(w||S):w||S);y.options&&y.options.interpolation&&y.options.interpolation.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const _=s||n!==void 0?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},N={...o,count:n,...s,..._,defaultValue:S,ns:x},$=E?v(E,N):S;u&&Object.keys(u).forEach(j=>{const B=u[j];if(typeof B.type=="function"||!B.props||!B.props.children||$.indexOf(`${j}/>`)<0&&$.indexOf(`${j} />`)<0)return;function K(){return O.createElement(O.Fragment,null,B)}u[j]=O.createElement(K)});const P=jX(u||e,$,y,b,N,f),D=r!==void 0?r:b.defaultTransParent;return D?O.createElement(D,m,P):P}const jE=O.createContext();class UX{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function VE(t){let{children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o={},values:s,defaults:l,components:u,ns:c,i18n:d,t:h,shouldUnescape:f,...m}=t;const{i18n:y,defaultNS:v}=O.useContext(jE)||{},b=d||y||FE(),x=h||b&&b.t.bind(b);return VX({children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o,values:s,defaults:l,components:u,ns:c||x&&x.ns||v||b&&b.options&&b.options.defaultNS,i18n:b,t:h,shouldUnescape:f,...m})}const WX=(t,e)=>{const n=O.useRef();return O.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function uP(t,e,n,r){return t.getFixedT(e,n,r)}function GX(t,e,n,r){return O.useCallback(uP(t,e,n,r),[t,e,n,r])}function ps(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:a}=O.useContext(jE)||{},i=n||r||FE();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new UX),!i){qy("You will need to pass in an i18next instance by using initReactI18next");const C=(_,N)=>typeof N=="string"?N:N&&typeof N=="object"&&typeof N.defaultValue=="string"?N.defaultValue:Array.isArray(_)?_[_.length-1]:_,E=[C,{},!1];return E.t=C,E.i18n={},E.ready=!1,E}i.options.react&&i.options.react.wait!==void 0&&qy("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...sP(),...i.options.react,...e},{useSuspense:s,keyPrefix:l}=o;let u=t||a||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(C=>$X(C,i,o)),d=GX(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),h=()=>d,f=()=>uP(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),[m,y]=O.useState(h);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const b=WX(v),x=O.useRef(!0);O.useEffect(()=>{const{bindI18n:C,bindI18nStore:E}=o;x.current=!0,!c&&!s&&(e.lng?oP(i,e.lng,u,()=>{x.current&&y(f)}):iP(i,u,()=>{x.current&&y(f)})),c&&b&&b!==v&&x.current&&y(f);function _(){x.current&&y(f)}return C&&i&&i.on(C,_),E&&i&&i.store.on(E,_),()=>{x.current=!1,C&&i&&C.split(" ").forEach(N=>i.off(N,_)),E&&i&&E.split(" ").forEach(N=>i.store.off(N,_))}},[i,v]);const w=O.useRef(!0);O.useEffect(()=>{x.current&&!w.current&&y(h),w.current=!1},[i,l]);const S=[m,i,c];if(S.t=m,S.i18n=i,S.ready=c,c||!c&&!s)return S;throw new Promise(C=>{e.lng?oP(i,e.lng,u,()=>C()):iP(i,u,()=>C())})}function HX(t){let{i18n:e,defaultNS:n,children:r}=t;const a=O.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return O.createElement(jE.Provider,{value:a},r)}/**
* @remix-run/router v1.15.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function ur(){return ur=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ur.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const cP="popstate";function qX(t){t===void 0&&(t={});function e(r,a){let{pathname:i,search:o,hash:s}=r.location;return Xf("",{pathname:i,search:o,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Cc(a)}return XX(e,n,null,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KX(){return Math.random().toString(36).substr(2,8)}function dP(t,e){return{usr:t.state,key:t.key,idx:e}}function Xf(t,e,n,r){return n===void 0&&(n=null),ur({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zs(e):e,{state:n,key:e&&e.key||r||KX()})}function Cc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function XX(t,e,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s=br.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(ur({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=br.Pop;let v=c(),b=v==null?null:v-u;u=v,l&&l({action:s,location:y.location,delta:b})}function h(v,b){s=br.Push;let x=Xf(y.location,v,b);n&&n(x,v),u=c()+1;let w=dP(x,u),S=y.createHref(x);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&l&&l({action:s,location:y.location,delta:1})}function f(v,b){s=br.Replace;let x=Xf(y.location,v,b);n&&n(x,v),u=c();let w=dP(x,u),S=y.createHref(x);o.replaceState(w,"",S),i&&l&&l({action:s,location:y.location,delta:0})}function m(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:Cc(v);return x=x.replace(/ $/,"%20"),St(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let y={get action(){return s},get location(){return t(a,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(cP,d),l=v,()=>{a.removeEventListener(cP,d),l=null}},createHref(v){return e(a,v)},createURL:m,encodeLocation(v){let b=m(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:f,go(v){return o.go(v)}};return y}var cr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cr||(cr={}));const YX=new Set(["lazy","caseSensitive","path","id","index","children"]);function QX(t){return t.index===!0}function UE(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((a,i)=>{let o=[...n,i],s=typeof a.id=="string"?a.id:o.join("-");if(St(a.index!==!0||!a.children,"Cannot specify children on an index route"),St(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),QX(a)){let l=ur({},a,e(a),{id:s});return r[s]=l,l}else{let l=ur({},a,e(a),{id:s,children:void 0});return r[s]=l,a.children&&(l.children=UE(a.children,e,o,r)),l}})}function vh(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Zs(e):e,a=fs(r.pathname||"/",n);if(a==null)return null;let i=pP(t);JX(i);let o=null;for(let s=0;o==null&&s<i.length;++s){let l=uY(a);o=sY(i[s],l)}return o}function hP(t,e){let{route:n,pathname:r,params:a}=t;return{id:n.id,pathname:r,params:a,data:e[n.id],handle:n.handle}}function pP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(St(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=el([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(St(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pP(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:iY(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of fP(i.path))a(i,o,l)}),e}function fP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=fP(r.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function JX(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oY(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZX=/^:[\w-]+$/,eY=3,tY=2,nY=1,rY=10,aY=-2,gP=t=>t==="*";function iY(t,e){let n=t.split("/"),r=n.length;return n.some(gP)&&(r+=aY),e&&(r+=tY),n.filter(a=>!gP(a)).reduce((a,i)=>a+(ZX.test(i)?eY:i===""?nY:rY),r)}function oY(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function sY(t,e){let{routesMeta:n}=t,r={},a="/",i=[];for(let o=0;o<n.length;++o){let s=n[o],l=o===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",c=Ky({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=s.route;i.push({params:r,pathname:el([a,c.pathname]),pathnameBase:hY(el([a,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(a=el([a,c.pathnameBase]))}return i}function Ky(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lY(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((l,u,c)=>{let{paramName:d,isOptional:h}=u;if(d==="*"){let m=s[c]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const f=s[c];return h&&!f?l[d]=void 0:l[d]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function lY(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,s)=>(r.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function uY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cY(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Zs(t):t;return{pathname:n?n.startsWith("/")?n:dY(n,e):e,search:pY(r),hash:fY(a)}}function dY(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function WE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function GE(t,e){let n=mP(t);return e?n.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function HE(t,e,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=Zs(t):(a=ur({},t),St(!a.pathname||!a.pathname.includes("?"),WE("?","pathname","search",a)),St(!a.pathname||!a.pathname.includes("#"),WE("#","pathname","hash",a)),St(!a.search||!a.search.includes("#"),WE("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;a.pathname=h.join("/")}s=d>=0?e[d]:"/"}let l=cY(a,s),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const el=t=>t.join("/").replace(/\/\/+/g,"/"),hY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class qE{constructor(e,n,r,a){a===void 0&&(a=!1),this.status=e,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function yP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bP=["post","put","patch","delete"],gY=new Set(bP),mY=["get",...bP],yY=new Set(mY),bY=new Set([301,302,303,307,308]),vY=new Set([307,308]),KE={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xY={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wY=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),xP="remix-router-transitions";function kY(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;St(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let ue=t.detectErrorBoundary;a=ge=>({hasErrorBoundary:ue(ge)})}else a=wY;let i={},o=UE(t.routes,a,void 0,i),s,l=t.basename||"/",u=ur({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,h=null,f=null,m=null,y=t.hydrationData!=null,v=vh(o,t.history.location,l),b=null;if(v==null){let ue=io(404,{pathname:t.history.location.pathname}),{matches:ge,route:ke}=_P(o);v=ge,b={[ke.id]:ue}}let x,w=v.some(ue=>ue.route.lazy),S=v.some(ue=>ue.route.loader);if(w)x=!1;else if(!S)x=!0;else if(u.v7_partialHydration){let ue=t.hydrationData?t.hydrationData.loaderData:null,ge=t.hydrationData?t.hydrationData.errors:null;x=v.every(ke=>ke.route.loader&&ke.route.loader.hydrate!==!0&&(ue&&ue[ke.route.id]!==void 0||ge&&ge[ke.route.id]!==void 0))}else x=t.hydrationData!=null;let C,E={historyAction:t.history.action,location:t.history.location,matches:v,initialized:x,navigation:KE,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},_=br.Pop,N=!1,$,P=!1,D=new Map,j=null,B=!1,K=!1,Y=[],Z=[],H=new Map,F=0,Q=-1,J=new Map,re=new Set,se=new Map,he=new Map,de=new Set,ie=new Map,xe=new Map,q=!1;function oe(){if(c=t.history.listen(ue=>{let{action:ge,location:ke,delta:Me}=ue;if(q){q=!1;return}bh(xe.size===0||Me!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ge=Si({currentLocation:E.location,nextLocation:ke,historyAction:ge});if(Ge&&Me!=null){q=!0,t.history.go(Me*-1),ki(Ge,{state:"blocked",location:ke,proceed(){ki(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:ke}),t.history.go(Me)},reset(){let bt=new Map(E.blockers);bt.set(Ge,Yf),Ie({blockers:bt})}});return}return $e(ge,ke)}),n){MY(e,D);let ue=()=>PY(e,D);e.addEventListener("pagehide",ue),j=()=>e.removeEventListener("pagehide",ue)}return E.initialized||$e(br.Pop,E.location,{initialHydration:!0}),C}function pe(){c&&c(),j&&j(),d.clear(),$&&$.abort(),E.fetchers.forEach((ue,ge)=>Qn(ge)),E.blockers.forEach((ue,ge)=>ti(ge))}function Ee(ue){return d.add(ue),()=>d.delete(ue)}function Ie(ue,ge){ge===void 0&&(ge={}),E=ur({},E,ue);let ke=[],Me=[];u.v7_fetcherPersist&&E.fetchers.forEach((Ge,bt)=>{Ge.state==="idle"&&(de.has(bt)?Me.push(bt):ke.push(bt))}),[...d].forEach(Ge=>Ge(E,{deletedFetchers:Me,unstable_viewTransitionOpts:ge.viewTransitionOpts,unstable_flushSync:ge.flushSync===!0})),u.v7_fetcherPersist&&(ke.forEach(Ge=>E.fetchers.delete(Ge)),Me.forEach(Ge=>Qn(Ge)))}function _e(ue,ge,ke){var Me,Ge;let{flushSync:bt}=ke===void 0?{}:ke,ut=E.actionData!=null&&E.navigation.formMethod!=null&&Fo(E.navigation.formMethod)&&E.navigation.state==="loading"&&((Me=ue.state)==null?void 0:Me._isRedirect)!==!0,ot;ge.actionData?Object.keys(ge.actionData).length>0?ot=ge.actionData:ot=null:ut?ot=E.actionData:ot=null;let tt=ge.loaderData?NP(E.loaderData,ge.loaderData,ge.matches||[],ge.errors):E.loaderData,Pt=E.blockers;Pt.size>0&&(Pt=new Map(Pt),Pt.forEach((dn,mn)=>Pt.set(mn,Yf)));let Ln=N===!0||E.navigation.formMethod!=null&&Fo(E.navigation.formMethod)&&((Ge=ue.state)==null?void 0:Ge._isRedirect)!==!0;s&&(o=s,s=void 0),B||_===br.Pop||(_===br.Push?t.history.push(ue,ue.state):_===br.Replace&&t.history.replace(ue,ue.state));let xt;if(_===br.Pop){let dn=D.get(E.location.pathname);dn&&dn.has(ue.pathname)?xt={currentLocation:E.location,nextLocation:ue}:D.has(ue.pathname)&&(xt={currentLocation:ue,nextLocation:E.location})}else if(P){let dn=D.get(E.location.pathname);dn?dn.add(ue.pathname):(dn=new Set([ue.pathname]),D.set(E.location.pathname,dn)),xt={currentLocation:E.location,nextLocation:ue}}Ie(ur({},ge,{actionData:ot,loaderData:tt,historyAction:_,location:ue,initialized:!0,navigation:KE,revalidation:"idle",restoreScrollPosition:Qo(ue,ge.matches||E.matches),preventScrollReset:Ln,blockers:Pt}),{viewTransitionOpts:xt,flushSync:bt===!0}),_=br.Pop,N=!1,P=!1,B=!1,K=!1,Y=[],Z=[]}async function Fe(ue,ge){if(typeof ue=="number"){t.history.go(ue);return}let ke=XE(E.location,E.matches,l,u.v7_prependBasename,ue,u.v7_relativeSplatPath,ge?.fromRouteId,ge?.relative),{path:Me,submission:Ge,error:bt}=wP(u.v7_normalizeFormMethod,!1,ke,ge),ut=E.location,ot=Xf(E.location,Me,ge&&ge.state);ot=ur({},ot,t.history.encodeLocation(ot));let tt=ge&&ge.replace!=null?ge.replace:void 0,Pt=br.Push;tt===!0?Pt=br.Replace:tt===!1||Ge!=null&&Fo(Ge.formMethod)&&Ge.formAction===E.location.pathname+E.location.search&&(Pt=br.Replace);let Ln=ge&&"preventScrollReset"in ge?ge.preventScrollReset===!0:void 0,xt=(ge&&ge.unstable_flushSync)===!0,dn=Si({currentLocation:ut,nextLocation:ot,historyAction:Pt});if(dn){ki(dn,{state:"blocked",location:ot,proceed(){ki(dn,{state:"proceeding",proceed:void 0,reset:void 0,location:ot}),Fe(ue,ge)},reset(){let mn=new Map(E.blockers);mn.set(dn,Yf),Ie({blockers:mn})}});return}return await $e(Pt,ot,{submission:Ge,pendingError:bt,preventScrollReset:Ln,replace:ge&&ge.replace,enableViewTransition:ge&&ge.unstable_viewTransition,flushSync:xt})}function Xe(){if(Zt(),Ie({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){$e(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}$e(_||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation})}}async function $e(ue,ge,ke){$&&$.abort(),$=null,_=ue,B=(ke&&ke.startUninterruptedRevalidation)===!0,Ed(E.location,E.matches),N=(ke&&ke.preventScrollReset)===!0,P=(ke&&ke.enableViewTransition)===!0;let Me=s||o,Ge=ke&&ke.overrideNavigation,bt=vh(Me,ge,l),ut=(ke&&ke.flushSync)===!0;if(!bt){let mn=io(404,{pathname:ge.pathname}),{matches:$r,route:ir}=_P(Me);Rs(),_e(ge,{matches:$r,loaderData:{},errors:{[ir.id]:mn}},{flushSync:ut});return}if(E.initialized&&!K&&TY(E.location,ge)&&!(ke&&ke.submission&&Fo(ke.submission.formMethod))){_e(ge,{matches:bt},{flushSync:ut});return}$=new AbortController;let ot=Jf(t.history,ge,$.signal,ke&&ke.submission),tt,Pt;if(ke&&ke.pendingError)Pt={[Zf(bt).route.id]:ke.pendingError};else if(ke&&ke.submission&&Fo(ke.submission.formMethod)){let mn=await lt(ot,ge,ke.submission,bt,{replace:ke.replace,flushSync:ut});if(mn.shortCircuited)return;tt=mn.pendingActionData,Pt=mn.pendingActionError,Ge=ZE(ge,ke.submission),ut=!1,ot=new Request(ot.url,{signal:ot.signal})}let{shortCircuited:Ln,loaderData:xt,errors:dn}=await Ze(ot,ge,bt,Ge,ke&&ke.submission,ke&&ke.fetcherSubmission,ke&&ke.replace,ke&&ke.initialHydration===!0,ut,tt,Pt);Ln||($=null,_e(ge,ur({matches:bt},tt?{actionData:tt}:{},{loaderData:xt,errors:dn})))}async function lt(ue,ge,ke,Me,Ge){Ge===void 0&&(Ge={}),Zt();let bt=RY(ge,ke);Ie({navigation:bt},{flushSync:Ge.flushSync===!0});let ut,ot=JE(Me,ge);if(!ot.route.action&&!ot.route.lazy)ut={type:cr.error,error:io(405,{method:ue.method,pathname:ge.pathname,routeId:ot.route.id})};else if(ut=await Qf("action",ue,ot,Me,i,a,l,u.v7_relativeSplatPath),ue.signal.aborted)return{shortCircuited:!0};if(Ic(ut)){let tt;return Ge&&Ge.replace!=null?tt=Ge.replace:tt=ut.location===E.location.pathname+E.location.search,await Ut(E,ut,{submission:ke,replace:tt}),{shortCircuited:!0}}if(xh(ut)){let tt=Zf(Me,ot.route.id);return(Ge&&Ge.replace)!==!0&&(_=br.Push),{pendingActionData:{},pendingActionError:{[tt.route.id]:ut.error}}}if(Ec(ut))throw io(400,{type:"defer-action"});return{pendingActionData:{[ot.route.id]:ut.data}}}async function Ze(ue,ge,ke,Me,Ge,bt,ut,ot,tt,Pt,Ln){let xt=Me||ZE(ge,Ge),dn=Ge||bt||PP(xt),mn=s||o,[$r,ir]=kP(t.history,E,ke,dn,ge,u.v7_partialHydration&&ot===!0,K,Y,Z,de,se,re,mn,l,Pt,Ln);if(Rs(rn=>!(ke&&ke.some(hn=>hn.route.id===rn))||$r&&$r.some(hn=>hn.route.id===rn)),Q=++F,$r.length===0&&ir.length===0){let rn=ko();return _e(ge,ur({matches:ke,loaderData:{},errors:Ln||null},Pt?{actionData:Pt}:{},rn?{fetchers:new Map(E.fetchers)}:{}),{flushSync:tt}),{shortCircuited:!0}}if(!B&&(!u.v7_partialHydration||!ot)){ir.forEach(hn=>{let kr=E.fetchers.get(hn.key),Dt=eg(void 0,kr?kr.data:void 0);E.fetchers.set(hn.key,Dt)});let rn=Pt||E.actionData;Ie(ur({navigation:xt},rn?Object.keys(rn).length===0?{actionData:null}:{actionData:rn}:{},ir.length>0?{fetchers:new Map(E.fetchers)}:{}),{flushSync:tt})}ir.forEach(rn=>{H.has(rn.key)&&Rn(rn.key),rn.controller&&H.set(rn.key,rn.controller)});let gr=()=>ir.forEach(rn=>Rn(rn.key));$&&$.signal.addEventListener("abort",gr);let{results:Jo,loaderResults:Ui,fetcherResults:va}=await Jt(E.matches,ke,$r,ir,ue);if(ue.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",gr),ir.forEach(rn=>H.delete(rn.key));let So=OP(Jo);if(So){if(So.idx>=$r.length){let rn=ir[So.idx-$r.length].key;re.add(rn)}return await Ut(E,So.result,{replace:ut}),{shortCircuited:!0}}let{loaderData:Ku,errors:Xu}=TP(E,ke,$r,Ui,Ln,ir,va,ie);ie.forEach((rn,hn)=>{rn.subscribe(kr=>{(kr||rn.done)&&ie.delete(hn)})});let _l=ko(),Zo=wi(Q),Co=_l||Zo||ir.length>0;return ur({loaderData:Ku,errors:Xu},Co?{fetchers:new Map(E.fetchers)}:{})}function nt(ue,ge,ke,Me){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(ue)&&Rn(ue);let Ge=(Me&&Me.unstable_flushSync)===!0,bt=s||o,ut=XE(E.location,E.matches,l,u.v7_prependBasename,ke,u.v7_relativeSplatPath,ge,Me?.relative),ot=vh(bt,ut,l);if(!ot){It(ue,ge,io(404,{pathname:ut}),{flushSync:Ge});return}let{path:tt,submission:Pt,error:Ln}=wP(u.v7_normalizeFormMethod,!0,ut,Me);if(Ln){It(ue,ge,Ln,{flushSync:Ge});return}let xt=JE(ot,tt);if(N=(Me&&Me.preventScrollReset)===!0,Pt&&Fo(Pt.formMethod)){et(ue,ge,tt,xt,ot,Ge,Pt);return}se.set(ue,{routeId:ge,path:tt}),ln(ue,ge,tt,xt,ot,Ge,Pt)}async function et(ue,ge,ke,Me,Ge,bt,ut){if(Zt(),se.delete(ue),!Me.route.action&&!Me.route.lazy){let hn=io(405,{method:ut.formMethod,pathname:ke,routeId:ge});It(ue,ge,hn,{flushSync:bt});return}let ot=E.fetchers.get(ue);Mt(ue,$Y(ut,ot),{flushSync:bt});let tt=new AbortController,Pt=Jf(t.history,ke,tt.signal,ut);H.set(ue,tt);let Ln=F,xt=await Qf("action",Pt,Me,Ge,i,a,l,u.v7_relativeSplatPath);if(Pt.signal.aborted){H.get(ue)===tt&&H.delete(ue);return}if(u.v7_fetcherPersist&&de.has(ue)){if(Ic(xt)||xh(xt)){Mt(ue,uu(void 0));return}}else{if(Ic(xt))if(H.delete(ue),Q>Ln){Mt(ue,uu(void 0));return}else return re.add(ue),Mt(ue,eg(ut)),Ut(E,xt,{fetcherSubmission:ut});if(xh(xt)){It(ue,ge,xt.error);return}}if(Ec(xt))throw io(400,{type:"defer-action"});let dn=E.navigation.location||E.location,mn=Jf(t.history,dn,tt.signal),$r=s||o,ir=E.navigation.state!=="idle"?vh($r,E.navigation.location,l):E.matches;St(ir,"Didn't find any matches after fetcher action");let gr=++F;J.set(ue,gr);let Jo=eg(ut,xt.data);E.fetchers.set(ue,Jo);let[Ui,va]=kP(t.history,E,ir,ut,dn,!1,K,Y,Z,de,se,re,$r,l,{[Me.route.id]:xt.data},void 0);va.filter(hn=>hn.key!==ue).forEach(hn=>{let kr=hn.key,Dt=E.fetchers.get(kr),Ol=eg(void 0,Dt?Dt.data:void 0);E.fetchers.set(kr,Ol),H.has(kr)&&Rn(kr),hn.controller&&H.set(kr,hn.controller)}),Ie({fetchers:new Map(E.fetchers)});let So=()=>va.forEach(hn=>Rn(hn.key));tt.signal.addEventListener("abort",So);let{results:Ku,loaderResults:Xu,fetcherResults:_l}=await Jt(E.matches,ir,Ui,va,mn);if(tt.signal.aborted)return;tt.signal.removeEventListener("abort",So),J.delete(ue),H.delete(ue),va.forEach(hn=>H.delete(hn.key));let Zo=OP(Ku);if(Zo){if(Zo.idx>=Ui.length){let hn=va[Zo.idx-Ui.length].key;re.add(hn)}return Ut(E,Zo.result)}let{loaderData:Co,errors:rn}=TP(E,E.matches,Ui,Xu,void 0,va,_l,ie);if(E.fetchers.has(ue)){let hn=uu(xt.data);E.fetchers.set(ue,hn)}wi(gr),E.navigation.state==="loading"&&gr>Q?(St(_,"Expected pending action"),$&&$.abort(),_e(E.navigation.location,{matches:ir,loaderData:Co,errors:rn,fetchers:new Map(E.fetchers)})):(Ie({errors:rn,loaderData:NP(E.loaderData,Co,ir,rn),fetchers:new Map(E.fetchers)}),K=!1)}async function ln(ue,ge,ke,Me,Ge,bt,ut){let ot=E.fetchers.get(ue);Mt(ue,eg(ut,ot?ot.data:void 0),{flushSync:bt});let tt=new AbortController,Pt=Jf(t.history,ke,tt.signal);H.set(ue,tt);let Ln=F,xt=await Qf("loader",Pt,Me,Ge,i,a,l,u.v7_relativeSplatPath);if(Ec(xt)&&(xt=await MP(xt,Pt.signal,!0)||xt),H.get(ue)===tt&&H.delete(ue),!Pt.signal.aborted){if(de.has(ue)){Mt(ue,uu(void 0));return}if(Ic(xt))if(Q>Ln){Mt(ue,uu(void 0));return}else{re.add(ue),await Ut(E,xt);return}if(xh(xt)){It(ue,ge,xt.error);return}St(!Ec(xt),"Unhandled fetcher deferred data"),Mt(ue,uu(xt.data))}}async function Ut(ue,ge,ke){let{submission:Me,fetcherSubmission:Ge,replace:bt}=ke===void 0?{}:ke;ge.revalidate&&(K=!0);let ut=Xf(ue.location,ge.location,{_isRedirect:!0});if(St(ut,"Expected a location on the redirect navigation"),n){let dn=!1;if(ge.reloadDocument)dn=!0;else if(vP.test(ge.location)){const mn=t.history.createURL(ge.location);dn=mn.origin!==e.location.origin||fs(mn.pathname,l)==null}if(dn){bt?e.location.replace(ge.location):e.location.assign(ge.location);return}}$=null;let ot=bt===!0?br.Replace:br.Push,{formMethod:tt,formAction:Pt,formEncType:Ln}=ue.navigation;!Me&&!Ge&&tt&&Pt&&Ln&&(Me=PP(ue.navigation));let xt=Me||Ge;if(vY.has(ge.status)&&xt&&Fo(xt.formMethod))await $e(ot,ut,{submission:ur({},xt,{formAction:ge.location}),preventScrollReset:N});else{let dn=ZE(ut,Me);await $e(ot,ut,{overrideNavigation:dn,fetcherSubmission:Ge,preventScrollReset:N})}}async function Jt(ue,ge,ke,Me,Ge){let bt=await Promise.all([...ke.map(tt=>Qf("loader",Ge,tt,ge,i,a,l,u.v7_relativeSplatPath)),...Me.map(tt=>tt.matches&&tt.match&&tt.controller?Qf("loader",Jf(t.history,tt.path,tt.controller.signal),tt.match,tt.matches,i,a,l,u.v7_relativeSplatPath):{type:cr.error,error:io(404,{pathname:tt.path})})]),ut=bt.slice(0,ke.length),ot=bt.slice(ke.length);return await Promise.all([$P(ue,ke,ut,ut.map(()=>Ge.signal),!1,E.loaderData),$P(ue,Me.map(tt=>tt.match),ot,Me.map(tt=>tt.controller?tt.controller.signal:null),!0)]),{results:bt,loaderResults:ut,fetcherResults:ot}}function Zt(){K=!0,Y.push(...Rs()),se.forEach((ue,ge)=>{H.has(ge)&&(Z.push(ge),Rn(ge))})}function Mt(ue,ge,ke){ke===void 0&&(ke={}),E.fetchers.set(ue,ge),Ie({fetchers:new Map(E.fetchers)},{flushSync:(ke&&ke.flushSync)===!0})}function It(ue,ge,ke,Me){Me===void 0&&(Me={});let Ge=Zf(E.matches,ge);Qn(ue),Ie({errors:{[Ge.route.id]:ke},fetchers:new Map(E.fetchers)},{flushSync:(Me&&Me.flushSync)===!0})}function Vn(ue){return u.v7_fetcherPersist&&(he.set(ue,(he.get(ue)||0)+1),de.has(ue)&&de.delete(ue)),E.fetchers.get(ue)||xY}function Qn(ue){let ge=E.fetchers.get(ue);H.has(ue)&&!(ge&&ge.state==="loading"&&J.has(ue))&&Rn(ue),se.delete(ue),J.delete(ue),re.delete(ue),de.delete(ue),E.fetchers.delete(ue)}function Ua(ue){if(u.v7_fetcherPersist){let ge=(he.get(ue)||0)-1;ge<=0?(he.delete(ue),de.add(ue)):he.set(ue,ge)}else Qn(ue);Ie({fetchers:new Map(E.fetchers)})}function Rn(ue){let ge=H.get(ue);St(ge,"Expected fetch controller: "+ue),ge.abort(),H.delete(ue)}function ei(ue){for(let ge of ue){let ke=Vn(ge),Me=uu(ke.data);E.fetchers.set(ge,Me)}}function ko(){let ue=[],ge=!1;for(let ke of re){let Me=E.fetchers.get(ke);St(Me,"Expected fetcher: "+ke),Me.state==="loading"&&(re.delete(ke),ue.push(ke),ge=!0)}return ei(ue),ge}function wi(ue){let ge=[];for(let[ke,Me]of J)if(Me<ue){let Ge=E.fetchers.get(ke);St(Ge,"Expected fetcher: "+ke),Ge.state==="loading"&&(Rn(ke),J.delete(ke),ge.push(ke))}return ei(ge),ge.length>0}function gn(ue,ge){let ke=E.blockers.get(ue)||Yf;return xe.get(ue)!==ge&&xe.set(ue,ge),ke}function ti(ue){E.blockers.delete(ue),xe.delete(ue)}function ki(ue,ge){let ke=E.blockers.get(ue)||Yf;St(ke.state==="unblocked"&&ge.state==="blocked"||ke.state==="blocked"&&ge.state==="blocked"||ke.state==="blocked"&&ge.state==="proceeding"||ke.state==="blocked"&&ge.state==="unblocked"||ke.state==="proceeding"&&ge.state==="unblocked","Invalid blocker state transition: "+ke.state+" -> "+ge.state);let Me=new Map(E.blockers);Me.set(ue,ge),Ie({blockers:Me})}function Si(ue){let{currentLocation:ge,nextLocation:ke,historyAction:Me}=ue;if(xe.size===0)return;xe.size>1&&bh(!1,"A router only supports one blocker at a time");let Ge=Array.from(xe.entries()),[bt,ut]=Ge[Ge.length-1],ot=E.blockers.get(bt);if(!(ot&&ot.state==="proceeding")&&ut({currentLocation:ge,nextLocation:ke,historyAction:Me}))return bt}function Rs(ue){let ge=[];return ie.forEach((ke,Me)=>{(!ue||ue(Me))&&(ke.cancel(),ge.push(Me),ie.delete(Me))}),ge}function ba(ue,ge,ke){if(h=ue,m=ge,f=ke||null,!y&&E.navigation===KE){y=!0;let Me=Qo(E.location,E.matches);Me!=null&&Ie({restoreScrollPosition:Me})}return()=>{h=null,m=null,f=null}}function Nl(ue,ge){return f&&f(ue,ge.map(ke=>hP(ke,E.loaderData)))||ue.key}function Ed(ue,ge){if(h&&m){let ke=Nl(ue,ge);h[ke]=m()}}function Qo(ue,ge){if(h){let ke=Nl(ue,ge),Me=h[ke];if(typeof Me=="number")return Me}return null}function Wt(ue){i={},s=UE(ue,a,void 0,i)}return C={get basename(){return l},get future(){return u},get state(){return E},get routes(){return o},get window(){return e},initialize:oe,subscribe:Ee,enableScrollRestoration:ba,navigate:Fe,fetch:nt,revalidate:Xe,createHref:ue=>t.history.createHref(ue),encodeLocation:ue=>t.history.encodeLocation(ue),getFetcher:Vn,deleteFetcher:Ua,dispose:pe,getBlocker:gn,deleteBlocker:ti,_internalFetchControllers:H,_internalActiveDeferreds:ie,_internalSetRoutes:Wt},C}function SY(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function XE(t,e,n,r,a,i,o,s){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let c=HE(a||".",GE(l,i),fs(t.pathname,n)||t.pathname,s==="path");return a==null&&(c.search=t.search,c.hash=t.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!QE(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:el([n,c.pathname])),Cc(c)}function wP(t,e,n,r){if(!r||!SY(r))return{path:n};if(r.formMethod&&!OY(r.formMethod))return{path:n,error:io(405,{method:r.formMethod})};let a=()=>({path:n,error:io(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),s=RP(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Fo(o))return a();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,m)=>{let[y,v]=m;return""+f+y+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!Fo(o))return a();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return a()}}}St(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=YE(r.formData),u=r.formData;else if(r.body instanceof FormData)l=YE(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=IP(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=IP(l)}catch{return a()}let c={formMethod:o,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Fo(c.formMethod))return{path:n,submission:c};let d=Zs(n);return e&&d.search&&QE(d.search)&&l.append("index",""),d.search="?"+l,{path:Cc(d),submission:c}}function CY(t,e){let n=t;if(e){let r=t.findIndex(a=>a.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function kP(t,e,n,r,a,i,o,s,l,u,c,d,h,f,m,y){let v=y?Object.values(y)[0]:m?Object.values(m)[0]:void 0,b=t.createURL(e.location),x=t.createURL(a),w=y?Object.keys(y)[0]:void 0,S=CY(n,w).filter((E,_)=>{let{route:N}=E;if(N.lazy)return!0;if(N.loader==null)return!1;if(i)return N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(EY(e.loaderData,e.matches[_],E)||s.some(D=>D===E.route.id))return!0;let $=e.matches[_],P=E;return CP(E,ur({currentUrl:b,currentParams:$.params,nextUrl:x,nextParams:P.params},r,{actionResult:v,defaultShouldRevalidate:o||b.pathname+b.search===x.pathname+x.search||b.search!==x.search||SP($,P)}))}),C=[];return c.forEach((E,_)=>{if(i||!n.some(j=>j.route.id===E.routeId)||u.has(_))return;let N=vh(h,E.path,f);if(!N){C.push({key:_,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let $=e.fetchers.get(_),P=JE(N,E.path),D=!1;d.has(_)?D=!1:l.includes(_)?D=!0:$&&$.state!=="idle"&&$.data===void 0?D=o:D=CP(P,ur({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})),D&&C.push({key:_,routeId:E.routeId,path:E.path,matches:N,match:P,controller:new AbortController})}),[S,C]}function EY(t,e,n){let r=!e||n.route.id!==e.route.id,a=t[n.route.id]===void 0;return r||a}function SP(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function CP(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function EP(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let a=n[t.id];St(a,"No route found in manifest");let i={};for(let o in r){let s=a[o]!==void 0&&o!=="hasErrorBoundary";bh(!s,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!s&&!YX.has(o)&&(i[o]=r[o])}Object.assign(a,i),Object.assign(a,ur({},e(a),{lazy:void 0}))}async function Qf(t,e,n,r,a,i,o,s,l){l===void 0&&(l={});let u,c,d,h=y=>{let v,b=new Promise((x,w)=>v=w);return d=()=>v(),e.signal.addEventListener("abort",d),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let v,b=await Promise.all([h(y).catch(x=>{v=x}),EP(n.route,i,a)]);if(v)throw v;c=b[0]}else if(await EP(n.route,i,a),y=n.route[t],y)c=await h(y);else if(t==="action"){let v=new URL(e.url),b=v.pathname+v.search;throw io(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:cr.data,data:void 0};else if(y)c=await h(y);else{let v=new URL(e.url),b=v.pathname+v.search;throw io(404,{pathname:b})}St(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){u=cr.error,c=y}finally{d&&e.signal.removeEventListener("abort",d)}if(_Y(c)){let y=c.status;if(bY.has(y)){let b=c.headers.get("Location");if(St(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!vP.test(b))b=XE(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,s);else if(!l.isStaticRequest){let x=new URL(e.url),w=b.startsWith("//")?new URL(x.protocol+b):new URL(b),S=fs(w.pathname,o)!=null;w.origin===x.origin&&S&&(b=w.pathname+w.search+w.hash)}if(l.isStaticRequest)throw c.headers.set("Location",b),c;return{type:cr.redirect,status:y,location:b,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===cr.error?cr.error:cr.data,response:c};let v;try{let b=c.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?c.body==null?v=null:v=await c.json():v=await c.text()}catch(b){return{type:cr.error,error:b}}return u===cr.error?{type:u,error:new qE(y,c.statusText,v),headers:c.headers}:{type:cr.data,data:v,statusCode:c.status,headers:c.headers}}if(u===cr.error)return{type:u,error:c};if(NY(c)){var f,m;return{type:cr.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((m=c.init)==null?void 0:m.headers)&&new Headers(c.init.headers)}}return{type:cr.data,data:c}}function Jf(t,e,n,r){let a=t.createURL(RP(e)).toString(),i={signal:n};if(r&&Fo(r.formMethod)){let{formMethod:o,formEncType:s}=r;i.method=o.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=YE(r.formData):i.body=r.formData}return new Request(a,i)}function YE(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function IP(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function IY(t,e,n,r,a){let i={},o=null,s,l=!1,u={};return n.forEach((c,d)=>{let h=e[d].route.id;if(St(!Ic(c),"Cannot handle redirect results in processLoaderData"),xh(c)){let f=Zf(t,h),m=c.error;r&&(m=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=m),i[h]=void 0,l||(l=!0,s=yP(c.error)?c.error.status:500),c.headers&&(u[h]=c.headers)}else Ec(c)?(a.set(h,c.deferredData),i[h]=c.deferredData.data):i[h]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(s=c.statusCode),c.headers&&(u[h]=c.headers)}),r&&(o=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:o,statusCode:s||200,loaderHeaders:u}}function TP(t,e,n,r,a,i,o,s){let{loaderData:l,errors:u}=IY(e,n,r,a,s);for(let c=0;c<i.length;c++){let{key:d,match:h,controller:f}=i[c];St(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let m=o[c];if(!(f&&f.signal.aborted))if(xh(m)){let y=Zf(t.matches,h?.route.id);u&&u[y.route.id]||(u=ur({},u,{[y.route.id]:m.error})),t.fetchers.delete(d)}else if(Ic(m))St(!1,"Unhandled fetcher revalidation redirect");else if(Ec(m))St(!1,"Unhandled fetcher deferred data");else{let y=uu(m.data);t.fetchers.set(d,y)}}return{loaderData:l,errors:u}}function NP(t,e,n,r){let a=ur({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(a[o]=e[o]):t[o]!==void 0&&i.route.loader&&(a[o]=t[o]),r&&r.hasOwnProperty(o))break}return a}function Zf(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function _P(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function io(t,e){let{pathname:n,routeId:r,method:a,type:i}=e===void 0?{}:e,o="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(o="Bad Request",a&&n&&r?s="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?s="defer() is not supported in actions":i==="invalid-body"&&(s="Unable to encode submission body")):t===403?(o="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",s='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",a&&n&&r?s="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new qE(t||500,o,new Error(s),!0)}function OP(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Ic(n))return{result:n,idx:e}}}function RP(t){let e=typeof t=="string"?Zs(t):t;return Cc(ur({},e,{hash:""}))}function TY(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Ec(t){return t.type===cr.deferred}function xh(t){return t.type===cr.error}function Ic(t){return(t&&t.type)===cr.redirect}function NY(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function _Y(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function OY(t){return yY.has(t.toLowerCase())}function Fo(t){return gY.has(t.toLowerCase())}async function $P(t,e,n,r,a,i){for(let o=0;o<n.length;o++){let s=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!SP(u,l)&&(i&&i[l.route.id])!==void 0;if(Ec(s)&&(a||c)){let d=r[o];St(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await MP(s,d,a).then(h=>{h&&(n[o]=h||n[o])})}}}async function MP(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:cr.data,data:t.deferredData.unwrappedData}}catch(r){return{type:cr.error,error:r}}return{type:cr.data,data:t.deferredData.data}}}function QE(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function JE(t,e){let n=typeof e=="string"?Zs(e).search:e.search;if(t[t.length-1].route.index&&QE(n||""))return t[t.length-1];let r=mP(t);return r[r.length-1]}function PP(t){let{formMethod:e,formAction:n,formEncType:r,text:a,formData:i,json:o}=t;if(!(!e||!n||!r)){if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function ZE(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function RY(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function eg(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function $Y(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function uu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function MY(t,e){try{let n=t.sessionStorage.getItem(xP);if(n){let r=JSON.parse(n);for(let[a,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(a,new Set(i||[]))}}catch{}}function PY(t,e){if(e.size>0){let n={};for(let[r,a]of e)n[r]=[...a];try{t.sessionStorage.setItem(xP,JSON.stringify(n))}catch(r){bh(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
* React Router v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function tg(){return tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tg.apply(this,arguments)}const ng=O.createContext(null),Xy=O.createContext(null),tl=O.createContext(null),Yy=O.createContext(null),cu=O.createContext({outlet:null,matches:[],isDataRoute:!1}),AP=O.createContext(null);function AY(t,e){let{relative:n}=e===void 0?{}:e;wh()||St(!1);let{basename:r,navigator:a}=O.useContext(tl),{hash:i,pathname:o,search:s}=oo(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:el([r,o])),a.createHref({pathname:l,search:s,hash:i})}function wh(){return O.useContext(Yy)!=null}function Tc(){return wh()||St(!1),O.useContext(Yy).location}function du(t){wh()||St(!1);let{pathname:e}=Tc();return O.useMemo(()=>Ky(t,e),[e,t])}function LP(t){O.useContext(tl).static||O.useLayoutEffect(t)}function LY(){let{isDataRoute:t}=O.useContext(cu);return t?QY():DY()}function DY(){wh()||St(!1);let t=O.useContext(ng),{basename:e,future:n,navigator:r}=O.useContext(tl),{matches:a}=O.useContext(cu),{pathname:i}=Tc(),o=JSON.stringify(GE(a,n.v7_relativeSplatPath)),s=O.useRef(!1);return LP(()=>{s.current=!0}),O.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let c=HE(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:el([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,o,i,t])}const FY=O.createContext(null);function BY(t){let e=O.useContext(cu).outlet;return e&&O.createElement(FY.Provider,{value:t},e)}function oo(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(tl),{matches:a}=O.useContext(cu),{pathname:i}=Tc(),o=JSON.stringify(GE(a,r.v7_relativeSplatPath));return O.useMemo(()=>HE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function zY(t,e,n,r){wh()||St(!1);let{navigator:a}=O.useContext(tl),{matches:i}=O.useContext(cu),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Tc(),c;if(e){var d;let v=typeof e=="string"?Zs(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||St(!1),c=v}else c=u;let h=c.pathname||"/",f=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=vh(t,{pathname:f}),y=GY(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:el([l,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:el([l,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?O.createElement(Yy.Provider,{value:{location:tg({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:br.Pop}},y):y}function jY(){let t=YY(),e=yP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const VY=O.createElement(jY,null);class UY extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(cu.Provider,{value:this.props.routeContext},O.createElement(AP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WY(t){let{routeContext:e,match:n,children:r}=t,a=O.useContext(ng);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(cu.Provider,{value:e},r)}function GY(t,e,n,r){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(a=n)==null?void 0:a.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&s?.[d.route.id]);c>=0||St(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:f}=n,m=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let f,m=!1,y=null,v=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||VY,l&&(u<0&&h===0?(JY("route-fallback",!1),m=!0,v=null):u===h&&(m=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,h+1)),x=()=>{let w;return f?w=y:m?w=v:d.route.Component?w=O.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,O.createElement(WY,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?O.createElement(UY,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var DP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DP||{}),kh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kh||{});function HY(t){let e=O.useContext(ng);return e||St(!1),e}function eI(t){let e=O.useContext(Xy);return e||St(!1),e}function qY(t){let e=O.useContext(cu);return e||St(!1),e}function FP(t){let e=qY(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function KY(){return eI(kh.UseNavigation).navigation}function XY(){let{matches:t,loaderData:e}=eI(kh.UseMatches);return O.useMemo(()=>t.map(n=>hP(n,e)),[t,e])}function YY(){var t;let e=O.useContext(AP),n=eI(kh.UseRouteError),r=FP(kh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QY(){let{router:t}=HY(DP.UseNavigateStable),e=FP(kh.UseNavigateStable),n=O.useRef(!1);return LP(()=>{n.current=!0}),O.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,tg({fromRouteId:e},a)))},[t,e])}const BP={};function JY(t,e,n){!e&&!BP[t]&&(BP[t]=!0)}function ZY(t){return BY(t.context)}function hu(t){St(!1)}function eQ(t){let{basename:e="/",children:n=null,location:r,navigationType:a=br.Pop,navigator:i,static:o=!1,future:s}=t;wh()&&St(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:i,static:o,future:tg({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof r=="string"&&(r=Zs(r));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:m="default"}=r,y=O.useMemo(()=>{let v=fs(c,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:m},navigationType:a}},[l,c,d,h,f,m,a]);return y==null?null:O.createElement(tl.Provider,{value:u},O.createElement(Yy.Provider,{children:n,value:y}))}new Promise(()=>{});function tI(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,a)=>{if(!O.isValidElement(r))return;let i=[...e,a];if(r.type===O.Fragment){n.push.apply(n,tI(r.props.children,i));return}r.type!==hu&&St(!1),!r.props.index||!r.props.children||St(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tI(r.props.children,i)),n.push(o)}),n}function tQ(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:O.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:O.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:O.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
* React Router DOM v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}function zP(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function nQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rQ(t,e){return t.button===0&&(!e||e==="_self")&&!nQ(t)}const aQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],iQ=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],oQ="6";try{window.__reactRouterVersion=oQ}catch{}function sQ(t,e){return kY({basename:e?.basename,future:Nc({},e?.future,{v7_prependBasename:!0}),history:qX({window:e?.window}),hydrationData:e?.hydrationData||lQ(),routes:t,mapRouteProperties:tQ,window:e?.window}).initialize()}function lQ(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Nc({},e,{errors:uQ(e.errors)})),e}function uQ(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,a]of e)if(a&&a.__type==="RouteErrorResponse")n[r]=new qE(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(a.message);i.stack="",n[r]=i}}else n[r]=a;return n}const jP=O.createContext({isTransitioning:!1}),cQ=O.createContext(new Map),dQ="startTransition",VP=GO[dQ],hQ="flushSync",UP=oX[hQ];function pQ(t){VP?VP(t):t()}function rg(t){UP?UP(t):t()}class fQ{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function gQ(t){let{fallbackElement:e,router:n,future:r}=t,[a,i]=O.useState(n.state),[o,s]=O.useState(),[l,u]=O.useState({isTransitioning:!1}),[c,d]=O.useState(),[h,f]=O.useState(),[m,y]=O.useState(),v=O.useRef(new Map),{v7_startTransition:b}=r||{},x=O.useCallback(_=>{b?pQ(_):_()},[b]),w=O.useCallback((_,N)=>{let{deletedFetchers:$,unstable_flushSync:P,unstable_viewTransitionOpts:D}=N;$.forEach(B=>v.current.delete(B)),_.fetchers.forEach((B,K)=>{B.data!==void 0&&v.current.set(K,B.data)});let j=n.window==null||typeof n.window.document.startViewTransition!="function";if(!D||j){P?rg(()=>i(_)):x(()=>i(_));return}if(P){rg(()=>{h&&(c&&c.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let B=n.window.document.startViewTransition(()=>{rg(()=>i(_))});B.finished.finally(()=>{rg(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})})}),rg(()=>f(B));return}h?(c&&c.resolve(),h.skipTransition(),y({state:_,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(s(_),u({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,h,c,v,x]);O.useLayoutEffect(()=>n.subscribe(w),[n,w]),O.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new fQ)},[l]),O.useEffect(()=>{if(c&&o&&n.window){let _=o,N=c.promise,$=n.window.document.startViewTransition(async()=>{x(()=>i(_)),await N});$.finished.finally(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})}),f($)}},[x,o,c,n.window]),O.useEffect(()=>{c&&o&&a.location.key===o.location.key&&c.resolve()},[c,h,a.location,o]),O.useEffect(()=>{!l.isTransitioning&&m&&(s(m.state),u({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),y(void 0))},[l.isTransitioning,m]),O.useEffect(()=>{},[]);let S=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:_=>n.navigate(_),push:(_,N,$)=>n.navigate(_,{state:N,preventScrollReset:$?.preventScrollReset}),replace:(_,N,$)=>n.navigate(_,{replace:!0,state:N,preventScrollReset:$?.preventScrollReset})}),[n]),C=n.basename||"/",E=O.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return O.createElement(O.Fragment,null,O.createElement(ng.Provider,{value:E},O.createElement(Xy.Provider,{value:a},O.createElement(cQ.Provider,{value:v.current},O.createElement(jP.Provider,{value:l},O.createElement(eQ,{basename:C,location:a.location,navigationType:a.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},a.initialized||n.future.v7_partialHydration?O.createElement(mQ,{routes:n.routes,future:n.future,state:a}):e))))),null)}function mQ(t){let{routes:e,future:n,state:r}=t;return zY(e,void 0,r,n)}const yQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nI=O.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:a,replace:i,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=t,d=zP(t,aQ),{basename:h}=O.useContext(tl),f,m=!1;if(typeof l=="string"&&bQ.test(l)&&(f=l,yQ))try{let x=new URL(window.location.href),w=l.startsWith("//")?new URL(x.protocol+l):new URL(l),S=fs(w.pathname,h);w.origin===x.origin&&S!=null?l=S+w.search+w.hash:m=!0}catch{}let y=AY(l,{relative:r}),v=wQ(l,{replace:i,state:o,target:s,preventScrollReset:u,relative:r,unstable_viewTransition:c});function b(x){n&&n(x),x.defaultPrevented||v(x)}return O.createElement("a",Nc({},d,{href:f||y,onClick:m||a?n:b,ref:e,target:s}))}),Sh=O.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:o,to:s,unstable_viewTransition:l,children:u}=t,c=zP(t,iQ),d=oo(s,{relative:c.relative}),h=Tc(),f=O.useContext(Xy),{navigator:m,basename:y}=O.useContext(tl),v=f!=null&&CQ(d)&&l===!0,b=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,x=h.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=fs(w,y)||w);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=x===b||!i&&x.startsWith(b)&&x.charAt(S)==="/",E=w!=null&&(w===b||!i&&w.startsWith(b)&&w.charAt(b.length)==="/"),_={isActive:C,isPending:E,isTransitioning:v},N=C?n:void 0,$;typeof a=="function"?$=a(_):$=[a,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(_):o;return O.createElement(nI,Nc({},c,{"aria-current":N,className:$,ref:e,style:P,to:s,unstable_viewTransition:l}),typeof u=="function"?u(_):u)});function vQ(t){let{getKey:e,storageKey:n}=t;return kQ({getKey:e,storageKey:n}),null}var Qy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qy||(Qy={}));var rI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rI||(rI={}));function WP(t){let e=O.useContext(ng);return e||St(!1),e}function xQ(t){let e=O.useContext(Xy);return e||St(!1),e}function wQ(t,e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=LY(),u=Tc(),c=oo(t,{relative:o});return O.useCallback(d=>{if(rQ(d,n)){d.preventDefault();let h=r!==void 0?r:Cc(u)===Cc(c);l(t,{replace:h,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s})}},[u,l,c,r,a,n,t,i,o,s])}const GP="react-router-scroll-positions";let Jy={};function kQ(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=WP(Qy.UseScrollRestoration),{restoreScrollPosition:a,preventScrollReset:i}=xQ(rI.UseScrollRestoration),{basename:o}=O.useContext(tl),s=Tc(),l=XY(),u=KY();O.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),SQ(O.useCallback(()=>{if(u.state==="idle"){let c=(e?e(s,l):null)||s.key;Jy[c]=window.scrollY}try{sessionStorage.setItem(n||GP,JSON.stringify(Jy))}catch{}window.history.scrollRestoration="auto"},[n,e,u.state,s,l])),typeof document<"u"&&(O.useLayoutEffect(()=>{try{let c=sessionStorage.getItem(n||GP);c&&(Jy=JSON.parse(c))}catch{}},[n]),O.useLayoutEffect(()=>{let c=e&&o!=="/"?(h,f)=>e(Nc({},h,{pathname:fs(h.pathname,o)||h.pathname}),f):e,d=r?.enableScrollRestoration(Jy,()=>window.scrollY,c);return()=>d&&d()},[r,o,e]),O.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(s.hash){let c=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(c){c.scrollIntoView();return}}i!==!0&&window.scrollTo(0,0)}},[s,a,i]))}function SQ(t,e){let{capture:n}=e||{};O.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function CQ(t,e){e===void 0&&(e={});let n=O.useContext(jP);n==null&&St(!1);let{basename:r}=WP(Qy.useViewTransitionState),a=oo(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=fs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=fs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ky(a.pathname,o)!=null||Ky(a.pathname,i)!=null}const EQ="modulepreload",IQ=function(t){return"/"+t},HP={},qP=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link");r=Promise.all(e.map(i=>{if(i=IQ(i),i in HP)return;HP[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(n)for(let u=a.length-1;u>=0;u--){const c=a[u];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":EQ,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,c)=>{l.addEventListener("load",u),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})}))}return r.then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})};function TQ(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:a,onRegisteredSW:i,onRegisterError:o}=t;let s,l;const u=async(d=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(s=await qP(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),_0([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o?.(d)}),!s)return;s.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),s.addEventListener("installed",d=>{d.isUpdate===!1&&r?.()}),s.register({immediate:e}).then(d=>{i?i("/sw.js",d):a?.(d)}).catch(d=>{o?.(d)})}}return l=c(),u}const ag=G.createContext({theme:"material",dark:!0,touchRipple:!0});function NQ(t,e){return typeof window>"u"?O.useEffect(t,e):O.useLayoutEffect(t,e)}const KP=function(t,e){e===void 0&&(e=!0);const[n,r]=O.useState(t);return NQ(()=>{if(e){if(t==="ios"||t==="material")n!==t&&r(t);else if(n==="parent"&&typeof window<"u"&&typeof document<"u"){const a=document.documentElement;a&&(a.classList.contains("ios")?r("ios"):(a.classList.contains("md")||a.classList.contains("material"))&&r("material"))}}},[t]),e?n:t},_Q=t=>{const{theme:e,dark:n,touchRipple:r=!0,autoThemeDetection:a=!0,children:i}=t,o=KP(e,a);return G.createElement(ag.Provider,{value:{theme:o,dark:n,touchRipple:r}},i)};function A(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>{typeof i=="object"&&i.constructor===Object?Object.keys(i).forEach(o=>{i[o]&&t.push(o)}):Array.isArray(i)?t.push(...i):typeof i=="function"?t.push(i()):i&&i.value?t.push(i.value):i&&t.push(i)});const a=[];return t.forEach(i=>{a.indexOf(i)<0&&a.push(i)}),a.filter(i=>!!i).join(" ")}const rr=function(t,e){return e===void 0&&(e=""),!e||typeof e!="string"?t:["static","relative","absolute","fixed","sticky"].filter(n=>e.indexOf(n)>=0).length>0?"":t},OQ=(t,e,n)=>{const{safeAreas:r}=t;return A(e==="ios"&&"k-ios",e==="material"&&"k-material","k-app w-full h-full min-h-screen",r&&"safe-areas",rr("relative",n),n)};function aI(){return aI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aI.apply(this,arguments)}const XP=O.forwardRef((t,e)=>{const{component:n="div",className:r,theme:a="material",dark:i=!0,touchRipple:o=!0,safeAreas:s=!0,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=n,h={...u},f=KP(a),m=OQ({...t,safeAreas:s},f,r);return G.createElement(_Q,{theme:f,dark:i,touchRipple:o,autoThemeDetection:!1},G.createElement(d,aI({ref:c,className:m},h),l))});XP.displayName="App";const iI=(t,e,n)=>{if(typeof t=="string")return t;const r=[t.common,t[e]];return n&&t[n]&&(typeof t[n]=="string"?r.push(t[n]):r.push(t[n].common,t[n][e])),r},RQ=(t,e,n)=>{const r={},a=["common","ios","material"];return Object.keys(t).forEach(i=>{const o=i==="base"?n:"";if(!(typeof t[i]!="string"&&Object.keys(t[i]).filter(l=>!a.includes(l)).length>0)){r[i]=A(iI(t[i],e),o);return}r[i]={};const s=iI(t[i],e);r[i].default=A(s,o),Object.keys(t[i]).filter(l=>!a.includes(l)).forEach(l=>{r[i][l]=A(s,iI(t[i],e,l),o)})}),r},it=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=O.useContext(ag).theme||"ios";return e&&(r="ios"),n&&(r="material"),(a,i)=>RQ(a,r,i)},$Q=(t,e)=>({base:{common:A("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",rr("fixed",e)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oI.apply(this,arguments)}const MQ=O.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,opened:o,backdrop:s=!0,onBackdropClick:l,children:u,...c}=t,d=O.useRef(null);O.useImperativeHandle(e,()=>({el:d.current}));const h=o?"opened":"closed",f=n,m={...c},y=it({ios:a,material:i})($Q(t,r),r);return G.createElement(G.Fragment,null,s&&G.createElement("div",{className:y.backdrop[h],onClick:l}),G.createElement(f,oI({ref:d,className:y.base[h]},m),u))});MQ.displayName="Actions";const PQ=t=>{const{dividers:e}=t;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:A(e&&"hairline-b")}}};function sI(){return sI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sI.apply(this,arguments)}const AQ=O.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,dividers:o=!0,children:s,...l}=t,u=O.useRef(null);O.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},h=it({ios:a,material:i})(PQ({dividers:o,...t}),r);return G.createElement(c,sI({ref:u,className:h.base},d),s)});AQ.displayName="ActionsGroup";const vn=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=O.useContext(ag).theme||"ios";return e&&(r="ios"),n&&(r="material"),r};class LQ{constructor(e,n,r){const a=this;if(!e)return;a.el=e;const{left:i,top:o,width:s,height:l}=e.getBoundingClientRect(),u={x:n-i,y:r-o};let c=Math.max((l**2+s**2)**.5,48);const d=e.classList.contains("k-touch-ripple-inset");d&&(c=Math.max(Math.min(s,l),48));const h=typeof window<"u"&&window.getComputedStyle(e,null).getPropertyValue("overflow")==="hidden";if(!d&&h){const m=((u.x-s/2)**2+(u.y-l/2)**2)**.5,y=(c/2+m)/(c/2);a.rippleTransform=`translate3d(0px, 0px, 0) scale(${y})`}else a.rippleTransform=`translate3d(${-u.x+s/2}px, ${-u.y+l/2}px, 0) scale(1)`;a.rippleWaveEl=document.createElement("span"),a.rippleWaveEl.classList.add("k-touch-ripple-wave"),a.rippleWaveEl.setAttribute("hidden",""),a.rippleWaveEl.style=`
      width: ${c}px;
      height: ${c}px;
      margin-top:-${c/2}px;
      margin-left:-${c/2}px;
      left:${u.x}px;
      top:${u.y}px; --k-ripple-transform: ${a.rippleTransform}`,e.insertAdjacentElement("afterbegin",a.rippleWaveEl);const f=()=>{a.rippleWaveEl.removeEventListener("animationend",f),a.rippleWaveEl&&(a.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(a.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),a.shouldBeRemoved&&a.out()))};return a.rippleWaveEl.addEventListener("animationend",f),a}destroy(){let e=this;e.rippleWaveEl&&e.el.removeChild(e.rippleWaveEl),Object.keys(e).forEach(n=>{e[n]=null,delete e[n]}),e=null}out(){const e=this,{rippleWaveEl:n}=this;clearTimeout(e.removeTimeout),n.classList.add("k-touch-ripple-wave-out"),e.removeTimeout=setTimeout(()=>{e.destroy()},300);const r=()=>{e.rippleWaveEl.removeEventListener("animationend",r),clearTimeout(e.removeTimeout),e.destroy()};e.rippleWaveEl.addEventListener("animationend",r)}remove(){const e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout(()=>{e.destroy()},400),e.shouldBeRemoved=!0,e.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&e.out())}}const Bo=(t,e,n)=>{const r=O.useContext(ag);n||(n=t);const a=O.useRef(null),i=()=>{a.current&&a.current.remove(),a.current=null},o=f=>{a.current=new LQ(t.current,f.pageX,f.pageY)},s=()=>{i()},l=()=>{i()},u=()=>{if(!r.touchRipple)return;const f=n.current;f.addEventListener("pointerdown",o),f.addEventListener("pointermove",s),f.addEventListener("pointerup",l),f.addEventListener("pointercancel",l),f.addEventListener("contextmenu",l)},c=()=>{const f=n.current;f.removeEventListener("pointerdown",o),f.removeEventListener("pointermove",s),f.removeEventListener("pointerup",l),f.removeEventListener("pointercancel",l),f.removeEventListener("contextmenu",l)},d=()=>{!n||!n.current||!e||u()},h=()=>{!n||!n.current||!e||c()};O.useEffect(()=>(d(),()=>h()))},Ot=()=>{const t=O.useContext(ag);return e=>t.dark?e:""},DQ=(t,e,n)=>{const{fontSizeIos:r,fontSizeMaterial:a,bold:i,dividers:o}=t;return{base:{common:A("flex items-center w-full px-4 relative z-10 overflow-hidden",o&&"hairline-b"),ios:A("h-14",e.textIos,e.bgIos,e.activeBgIos,r,"first:rounded-t-xl last:rounded-b-xl justify-center",i&&"font-semibold"),material:A("h-12",e.textMaterial,e.bgMaterial,e.activeBgMaterial,a,"justify-start",n("dark:touch-ripple-white"),i&&"font-medium")}}},FQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),activeBgIos:A("active:bg-neutral-200",e("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lI.apply(this,arguments)}const BQ=O.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,bold:s,boldIos:l=!1,boldMaterial:u=!1,fontSizeIos:c="text-xl",fontSizeMaterial:d="text-base",href:h,touchRipple:f=!0,dividers:m=void 0,children:y,...v}=t,b=O.useRef(null);O.useImperativeHandle(e,()=>({el:b.current}));let x=n;typeof t.component>"u"&&(h||h==="")&&(x="a");const w={href:h,...v},S=vn({ios:i,material:o}),C=it({ios:i,material:o}),E=Ot();Bo(b,S==="material"&&f);const _=FQ(a,E),N=C(DQ({fontSizeIos:c,fontSizeMaterial:d,bold:typeof s>"u"?S==="ios"?l:u:s,dividers:typeof m>"u"?S==="ios":m,...t},_,E),r);return G.createElement(x,lI({ref:b,role:"button",tabIndex:"0",className:N.base},w),y)});BQ.displayName="ActionsButton";const zQ=(t,e)=>{const{fontSizeIos:n,fontSizeMaterial:r,dividers:a}=t;return{base:{common:A(`flex items-center w-full px-4 relative z-10 overflow-hidden ${e.activeBg}`,a&&"hairline-b"),ios:A("h-14",e.bgIos,e.textIos,n,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:A("h-12",e.bgMaterial,e.textMaterial,r,"font-medium","justify-start")}}},jQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function uI(){return uI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uI.apply(this,arguments)}const VQ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,fontSizeIos:s="text-sm",fontSizeMaterial:l="text-sm",dividers:u=void 0,children:c,...d}=t,h=O.useRef(null);O.useImperativeHandle(e,()=>({el:h.current}));const f=n,m={...d},y=vn({ios:i,material:o}),v=it({ios:i,material:o}),b=Ot(),x=jQ(a,b),w=v(zQ({fontSizeIos:s,fontSizeMaterial:l,dividers:typeof u>"u"?y==="ios":u,...t},x),r);return G.createElement(f,uI({ref:h,className:w.base},m),c)});VQ.displayName="ActionsLabel";const UQ=(t,e)=>({base:{common:`${e.text} ${e.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),WQ=function(t){return t===void 0&&(t={}),{bg:"bg-primary",text:"text-white",...t}};function cI(){return cI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cI.apply(this,arguments)}const YP=O.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,small:i,ios:o,material:s,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=n,h={...u},f=it({ios:o,material:s}),m=WQ(a),y=i?"sm":"md",v=f(UQ(t,m),r);return G.createElement(d,cI({ref:c,className:v.base[y]},h),l)});YP.displayName="Badge";const GQ=(t,e,n)=>{const{inset:r,nested:a,margin:i,padding:o,strong:s,outline:l}=t;return{base:{common:A("text-sm z-10",rr("relative",n),!r&&!a&&l&&"hairline-t hairline-b",r&&l&&"border",r&&"px-4",!r&&"pl-4-safe pr-4-safe",!a&&i,(s||l)&&o),ios:A(e.textIos,s&&e.strongBgIos,r&&l&&e.outlineIos),material:A(e.textMaterial,s&&e.strongBgMaterial,r&&l&&e.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},HQ=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dI.apply(this,arguments)}const da=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",padding:o="py-4",inset:s,insetIos:l,insetMaterial:u,strong:c,strongIos:d,strongMaterial:h,outline:f,outlineIos:m,outlineMaterial:y,nested:v,ios:b,material:x,children:w,...S}=t,C=O.useRef(null);O.useImperativeHandle(e,()=>({el:C.current}));const E=n,_={...S},N=vn({ios:b,material:x}),$=it({ios:b,material:x}),P=Ot(),D=HQ(a,P),j=typeof c>"u"?N==="ios"?d:h:c,B=typeof f>"u"?N==="ios"?m:y:f,K=typeof s>"u"?N==="ios"?l:u:s,Y=$(GQ({...t,margin:i,padding:o,inset:K,strong:j,outline:B},D,r)),Z=A(Y.base,K&&Y.inset,r);return G.createElement(E,dI({ref:C,className:Z},_),w)});da.displayName="Block";const qQ=(t,e)=>{const{inset:n}=t;return{base:{common:A("mb-8 flex items-center -mt-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},KQ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-75",e("dark:text-white dark:text-opacity-75")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function hI(){return hI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hI.apply(this,arguments)}const XQ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,h=O.useRef(null);O.useImperativeHandle(e,()=>({el:h.current}));const f=vn(),m=typeof s>"u"?f==="ios"?l:u:s,y=n,v={...d},b=it({ios:i,material:o}),x=Ot(),w=KQ(a,x),S=b(qQ({...t,inset:m},w),r);return G.createElement(y,hI({ref:h,className:S.base},v),c)});XQ.displayName="BlockFooter";const YQ=(t,e)=>{const{inset:n}=t;return{base:{common:A("mt-8 flex items-center -mb-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},QQ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pI.apply(this,arguments)}const JQ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,h=O.useRef(null);O.useImperativeHandle(e,()=>({el:h.current}));const f=n,m={...d},y=vn(),v=typeof s>"u"?y==="ios"?l:u:s,b=it({ios:i,material:o}),x=Ot(),w=QQ(a,x),S=b(YQ({...t,inset:v},w),r);return G.createElement(f,pI({ref:h,className:S.base},m),c)});JQ.displayName="BlockHeader";const ZQ=(t,e)=>{const{withBlock:n,medium:r,large:a}=t;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${n?"-mb-6":"mb-2"}`,ios:A(`font-semibold ${e.textIos}`,a&&"text-[1.5rem]",r&&"text-[1.125rem]",!r&&!a&&"text-[1rem]"),material:A(`font-medium ${e.textMaterial}`,a&&"text-[1.375rem]",r&&"text-[1rem]",!r&&!a&&"text-[0.875rem]")}}},eJ=function(t,e){return t===void 0&&(t={}),{textIos:"",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function fI(){return fI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fI.apply(this,arguments)}const tJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,withBlock:i=!0,medium:o,large:s,ios:l,material:u,children:c,...d}=t,h=O.useRef(null);O.useImperativeHandle(e,()=>({el:h.current}));const f=n,m={...d},y=it({ios:l,material:u}),v=Ot(),b=eJ(a,v),x=y(ZQ({...t,withBlock:i},b),r);return G.createElement(f,fI({ref:h,className:x.base},m),c)});tJ.displayName="BlockTitle";const nJ=t=>{const{fontSizeIos:e,fontSizeMaterial:n}=t;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:e,material:n}}};function gI(){return gI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gI.apply(this,arguments)}const rJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,fontSizeIos:a="text-[17px]",fontSizeMaterial:i="text-[14px]",ios:o,material:s,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=n,h={...u},f=it({ios:o,material:s})(nJ({...t,fontSizeIos:a,fontSizeMaterial:i}),r);return G.createElement(d,gI({ref:c,className:f.base},h),l)});rJ.displayName="Breadcrumbs";const aJ=(t,e)=>{const{active:n}=t;return{base:{common:A("flex items-center overflow-hidden"),ios:A(e.textIos,e.bgIos,n?e.textActiveIos:e.textIos,n&&"font-semibold"),material:A("font-medium px-2 py-1 rounded-lg",e.bgMaterial,n?e.textActiveMaterial:e.textMaterial)}}},iJ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),textActiveIos:A("text-black",e("dark:text-white")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),...t}};function mI(){return mI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mI.apply(this,arguments)}const oJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,colors:o,active:s,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=n,h={...u},f=it({ios:a,material:i}),m=Ot(),y=iJ(o,m),v=f(aJ({...t},y),r);return G.createElement(d,mI({ref:c,className:v.base,role:"menuitem",tabIndex:"0"},h),l)});oJ.displayName="BreadcrumbsItem";const sJ=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function yI(){return yI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yI.apply(this,arguments)}const QP=t=>G.createElement("svg",yI({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},t),G.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function bI(){return bI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bI.apply(this,arguments)}const lJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,children:o,...s}=t,l=O.useRef(null);O.useImperativeHandle(e,()=>({el:l.current}));const u=n,c={...s},d=it({ios:a,material:i})(sJ({...t}),r);return G.createElement(u,bI({ref:l,className:d.base},c),G.createElement(QP,{className:d.icon}),o)});lJ.displayName="BreadcrumbsSeparator";const uJ=(t,e)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${e.bg}`,ios:A("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",e.bgIos),material:A("py-3 px-2 rounded-lg",e.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${e.dotBg}`,ios:e.dotBgIos,material:e.dotBgMaterial}}),cJ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-15",e("dark:bg-white dark:bg-opacity-15")),bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),dotBgIos:A("bg-black",e("dark:bg-white")),dotBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function vI(){return vI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vI.apply(this,arguments)}const dJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=O.useRef(null);O.useImperativeHandle(e,()=>({el:u.current}));const c=Ot(),d=cJ(a,c),h=n,f={...l},m=it({ios:i,material:o})(uJ({...t},d),r);return G.createElement(h,vI({ref:u,role:"button",tabIndex:"0",className:m.base},f),G.createElement("span",{className:m.dot}),G.createElement("span",{className:m.dot}),G.createElement("span",{className:m.dot}),s)});dJ.displayName="BreadcrumbsCollapsed";const hJ=(t,e,n,r)=>{const{inline:a,segmented:i,segmentedStrong:o,segmentedActive:s,disabled:l}=t;return{base:{common:A("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",a?"inline-flex":"w-full flex",rr("relative",n),l&&"pointer-events-none",o&&s&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:i&&!o?"first:rounded-s last:rounded-e":"rounded",material:i&&!o?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:i&&!o?"":"rounded-full"},style:{fill:{common:A(l&&A(e.disabledBg,e.disabledText)),ios:A(l?A(e.disabledBg,e.disabledText):`${e.fillTextIos} ${e.fillBgIos} ${e.fillActiveBgIos}`),material:A(l?A(e.disabledBg,e.disabledText):A(e.fillTextMaterial,e.fillBgMaterial,e.fillActiveBgMaterial,e.fillTouchRipple))},outline:{common:A(l?A(e.disabledText,e.disabledBorder):A("active:bg-opacity-15",e.touchRipple)),ios:A(!i&&"border-2",!l&&!i&&e.outlineBorderIos,!l&&A(e.textIos,e.activeBgIos)),material:A(!i&&"border",!l&&!i&&e.outlineBorderMaterial,!l&&A(e.textMaterial,e.activeBgMaterial))},clear:{common:A(l?e.disabledText:`active:bg-opacity-15 ${e.touchRipple}`),ios:!l&&A(e.textIos,e.activeBgIos),material:!l&&A(e.textMaterial,e.activeBgMaterial)},tonal:{common:l?A(e.disabledBg,e.disabledText):A(e.touchRipple),ios:!l&&A(e.tonalTextIos,e.tonalBgIos,e.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!l&&A(e.tonalTextMaterial,e.tonalBgMaterial,e.activeBgMaterial)},segmentedStrong:A("active:bg-black active:bg-opacity-10",r("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},pJ=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),disabledBg:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),disabledBorder:A("border-black border-opacity-10",e("dark:border-white dark:border-opacity-10")),...t}};function xI(){return xI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xI.apply(this,arguments)}const vr=O.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,href:l,outline:u,outlineIos:c,outlineMaterial:d,clear:h,clearIos:f,clearMaterial:m,tonal:y,tonalIos:v,tonalMaterial:b,rounded:x,roundedIos:w,roundedMaterial:S,small:C,smallIos:E,smallMaterial:_,large:N,largeIos:$,largeMaterial:P,raised:D,raisedIos:j,raisedMaterial:B,inline:K,segmented:Y,segmentedStrong:Z,segmentedActive:H,touchRipple:F=!0,children:Q,...J}=t,re=O.useRef(null);O.useImperativeHandle(e,()=>({el:re.current}));let se=n;typeof t.component>"u"&&(l||l==="")&&(se="a");const he={href:l,...J},de=vn({ios:i,material:o}),ie=it({ios:i,material:o}),xe=Ot();Bo(re,de==="material"&&F);const q=(Fe=>{const Xe={};return Object.keys(Fe).forEach($e=>{Xe[$e]=typeof Fe[$e]>"u"?de==="ios"?t[`${$e}Ios`]:t[`${$e}Material`]:Fe[$e]}),Xe})({outline:u,clear:h,tonal:y,rounded:x,small:C,large:N,raised:D}),oe=q.large?"large":q.small?"small":"medium";let pe=q.outline?"outline":q.clear||Y&&!H?"clear":q.tonal?"tonal":"fill";Z&&(pe="segmentedStrong"),Z&&H&&(pe="segmentedStrongActive");const Ee=pJ(a,xe),Ie=ie(hJ({...t,...q},Ee,r,xe)),_e=A(Ie.base[q.rounded?"rounded":"square"],Ie.style[pe],Ie.size[oe],q.raised&&Ie.raised,r);return G.createElement(se,xI({ref:re,className:_e,disabled:s,role:"button",tabIndex:"0"},he),Q)});vr.displayName="Button";const fJ=(t,e)=>{const{margin:n,headerDivider:r,footerDivider:a,contentWrapPadding:i}=t;return{base:{common:A(n,"overflow-hidden"),ios:A("rounded-lg",e.bgIos,e.textIos),material:A("rounded-2xl",e.bgMaterial,e.textMaterial),plain:"",raised:"shadow",outline:{common:A("border"),ios:e.outlineIos,material:e.outlineMaterial}},header:{common:A(r&&"border-b","p-4"),ios:A(r&&e.outlineIos,t.headerFontSizeIos),material:A(r&&e.outlineMaterial,t.headerFontSizeMaterial)},content:A(i,"text-sm"),footer:{common:A(r&&"border-t","text-sm p-4"),ios:A(e.footerTextIos,a&&e.outlineIos),material:A(e.footerTextMaterial,a&&e.outlineMaterial)}}},gJ=function(t,e){return t===void 0&&(t={}),{textIos:A(""),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),bgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),bgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),footerTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),footerTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function wI(){return wI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wI.apply(this,arguments)}const JP=O.forwardRef((t,e)=>{const{component:n="div",className:r,margin:a="m-4",colors:i,header:o,footer:s,ios:l,material:u,headerFontSizeIos:c="text-[17px]",headerFontSizeMaterial:d="text-[22px]",contentWrap:h=!0,contentWrapPadding:f="p-4",raised:m,raisedIos:y,raisedMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,headerDivider:S=!1,footerDivider:C=!1,children:E,..._}=t,N=O.useRef(null);O.useImperativeHandle(e,()=>({el:N.current}));const $=n,P={..._},D=vn(),j=it({ios:l,material:u}),B=Ot(),K=gJ(i,B),Y=typeof b>"u"?D==="ios"?x:w:b,Z=typeof m>"u"?D==="ios"?y:v:m,H=Y?"outline":Z?"raised":"plain",F=j(fJ({...t,margin:a,contentWrapPadding:f,headerDivider:S,footerDivider:C,headerFontSizeIos:c,headerFontSizeMaterial:d,outline:Y,raised:Z},K),r);return G.createElement($,wI({ref:N,className:F.base[H]},P),o&&G.createElement("div",{className:F.header},o),h?G.createElement("div",{className:F.content},E):E,s&&G.createElement("div",{className:F.footer},s))});JP.displayName="Card";const mJ=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",rr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:A("flex items-center justify-center text-white",r("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:`${e.bgCheckedIos} ${e.borderCheckedIos}`,material:`${e.bgCheckedMaterial} ${e.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:A("bg-white w-3/4",r("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),yJ=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zy.apply(this,arguments)}const ZP=t=>{const{ios:e,material:n,fill:r,...a}=t;return vn({ios:e,material:n})==="ios"?G.createElement("svg",Zy({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},a),G.createElement("path",{fill:r||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):G.createElement("svg",Zy({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},a),G.createElement("polygon",{fill:r,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kI.apply(this,arguments)}const bJ=O.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,indeterminate:s,name:l,value:u,disabled:c,readOnly:d,onChange:h,ios:f,material:m,touchRipple:y=!0,children:v,...b}=t,x=O.useRef(null),w=O.useRef(null);O.useImperativeHandle(e,()=>({el:w.current,inputEl:x.current}));const S=n,C={...b},E=vn({ios:f,material:m}),_=it({ios:f,material:m}),N=Ot();Bo(w,E==="material"&&y);const $=yJ(a,N),P=o||i&&!h||s?"checked":"notChecked",D=_(mJ(t,$,r,N),r);return O.useEffect(()=>{x.current&&(x.current.indeterminate=!!s)},[s]),G.createElement(S,kI({ref:w,className:D.base},C),G.createElement("input",{ref:x,type:"checkbox",name:l,value:u,disabled:c,readOnly:d,checked:o,defaultChecked:i,onChange:h,className:D.input}),G.createElement("i",{className:D.iconWrap[P]},s?G.createElement("span",{className:D.indeterminateIcon}):G.createElement(ZP,{ios:f,material:m,className:D.icon[P]})),v)});bJ.displayName="Checkbox";const vJ=(t,e)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:A(e.fillBg||e.fillBgIos,e.fillText||e.fillTextIos),material:A(e.fillBg||e.fillBgMaterial,e.fillText||e.fillTextMaterial)},outline:{common:"border",ios:A(e.outlineText||e.outlineTextIos,e.outlineBorder||e.outlineBorderIos),material:A(e.outlineText||e.outlineTextMaterial,e.outlineBorder||e.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),xJ=function(t,e){return t===void 0&&(t={}),{fillTextIos:"text-current",fillTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),fillBgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),outlineTextIos:A("text-current"),outlineTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),outlineBorderIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function eb(){return eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eb.apply(this,arguments)}const ig=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",eb({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},n),G.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):G.createElement("svg",eb({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function SI(){return SI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SI.apply(this,arguments)}const wJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,media:i,deleteButton:o,onDelete:s,ios:l,material:u,outline:c,children:d,...h}=t,f=O.useRef(null);O.useImperativeHandle(e,()=>({el:f.current}));const m=n,y={...h},v=it({ios:l,material:u}),b=vn({ios:l,material:u}),x=Ot(),w=c?"outline":"fill",S=xJ(a,x),C=v(vJ(t,S),r);return G.createElement(m,SI({ref:f,className:C.base[w]},y),i&&G.createElement("div",{className:C.media},i),d,o&&G.createElement("div",{className:C.deleteButton,role:"button",tabIndex:"0",onClick:s},G.createElement(ig,{theme:b,className:"h-4 w-4"})))});wJ.displayName="Chip";const kJ=(t,e,n,r)=>{let{hasButtons:a}=r;const{titleFontSizeMaterial:i,titleFontSizeIos:o,translucent:s,sizeIos:l,sizeMaterial:u}=t;return{base:{common:A("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",rr("fixed",n)),ios:A("rounded-xl max-w-full",l,e.bgIos,s&&"translucent"),material:A("rounded-[1.75rem] p-6 max-w-[90%]",u,e.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:A("p-4 space-y-1 relative",a&&"hairline-b")},title:{common:A("w-full"),ios:A(e.titleIos,o,"font-semibold text-center"),material:A(e.titleMaterial,i)},content:{common:A("text-sm w-full"),ios:A(e.contentTextIos,"text-center"),material:A(e.contentTextMaterial)},buttons:{common:"flex items-center",ios:A("justify-center last-child-hairline-r-none"),material:A("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},SJ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function CI(){return CI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CI.apply(this,arguments)}const CJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,translucent:l=!0,sizeIos:u="w-[16.875rem]",sizeMaterial:c="w-[19.5rem]",titleFontSizeIos:d="text-[18px]",titleFontSizeMaterial:h="text-[24px]",title:f,content:m,buttons:y,ios:v,material:b,children:x,...w}=t,S=O.useRef(null);O.useImperativeHandle(e,()=>({el:S.current}));const C=i?"opened":"closed",E=n,_={...w},N=it({ios:v,material:b}),$=Ot(),P=SJ(a,$),D=N(kJ({...t,titleFontSizeIos:d,titleFontSizeMaterial:h,translucent:l,sizeIos:u,sizeMaterial:c},P,r,{hasButtons:!!y}),r);return G.createElement(G.Fragment,null,o&&G.createElement("div",{className:D.backdrop[C],onClick:s}),G.createElement(E,CI({ref:S,className:D.base[C]},_),G.createElement("div",{className:D.contentWrap},f&&G.createElement("div",{className:D.title},f),(m||x)&&G.createElement("div",{className:D.content},m,x)),y&&G.createElement("div",{className:D.buttons},y)))});CJ.displayName="Dialog";const EJ=(t,e)=>{const{strong:n,disabled:r}=t;return{base:{ios:A("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",r?e.disabledTextIos:e.textIos,n&&"font-semibold",!r&&e.activeBgIos)}}},IJ=function(t,e){return t===void 0&&(t={}),{activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),...t}};function tb(){return tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tb.apply(this,arguments)}const TJ=O.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,strong:l,strongIos:u,strongMaterial:c,children:d,...h}=t,f=O.useRef(null);O.useImperativeHandle(e,()=>({el:f.current}));const m={...h},y=vn({ios:i,material:o}),v=it({ios:i,material:o}),b=Ot(),x=IJ(a,b),w=typeof l>"u"?y==="ios"?u:c:l,S=v(EJ({...t,strong:w},x),r),C=n;return y==="ios"?G.createElement(C,tb({className:S.base,disabled:s,role:"button",tabIndex:"0"},m),d):G.createElement(vr,tb({component:n,inline:!0,rounded:!0,disabled:s,clear:!w,className:r},m),d)});TJ.displayName="DialogButton";const NJ=(t,e)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${e.bgIos} ${e.activeBgIos} ${e.textIos}`,material:`duration-300 rounded-2xl shadow ${e.bgMaterial} ${e.activeBgMaterial} ${e.textMaterial} ${e.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),_J=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary-container",e("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:A("text-md-light-on-primary-container",e("dark:text-md-dark-on-primary-container")),touchRipple:A("touch-ripple-primary",e("dark:touch-ripple-white")),...t}};function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}const OJ=O.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,href:i,text:o,textPosition:s="after",icon:l,ios:u,material:c,touchRipple:d=!0,children:h,...f}=t,m=O.useRef(null);O.useImperativeHandle(e,()=>({el:m.current}));const y=n,v={...f},b=vn({ios:u,material:c}),x=it({ios:u,material:c}),w=Ot();Bo(m,b==="material"&&d);const S=_J(a,w),C=x(NJ(t,S),r);return G.createElement(y,EI({className:o?C.base.withText:C.base.iconOnly,href:i,ref:m,role:"button",tabIndex:"0"},v),o&&s==="before"&&G.createElement("span",{className:C.text},o),l&&G.createElement("span",{className:C.icon},l),o&&s==="after"&&G.createElement("span",{className:C.text},o),h)});OJ.displayName="Fab";const RJ=(t,e)=>({base:`${rr("relative",e)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function II(){return II=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},II.apply(this,arguments)}const $a=O.forwardRef((t,e)=>{const{component:n="i",className:r,ios:a,material:i,badge:o,badgeColors:s,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=n,h={...u},f=it(),m=vn(),y=f(RJ(t,r),r);return G.createElement(d,II({ref:c,className:y.base},h),m==="ios"?a:i,typeof o<"u"&&o!==null&&G.createElement(YP,{small:!0,className:y.badge,colors:s},o),l)});$a.displayName="Icon";const $J=(t,e,n)=>{let{textColor:r,needsTouchRipple:a}=e;const{iconOnly:i,tabbar:o}=t;return{base:{common:A(!o&&r,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",a&&`touch-ripple-primary ${rr("relative",n)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:a?"":"active:opacity-55"}},tabbar:{common:A(rr("relative",n),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3"}}},MJ=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",...t}};function TI(){return TI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TI.apply(this,arguments)}const Ct=O.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,navbar:i,toolbar:o,iconOnly:s,linkProps:l={},tabbar:u,tabbarActive:c,touchRipple:d=void 0,ios:h,material:f,onClick:m,children:y,...v}=t,b=O.useRef(null);O.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...l,...v},S=vn({ios:h,material:f}),C=it({ios:h,material:f}),E=Ot(),_=S==="material"&&(d||(o||u||i)&&typeof d>"u");Bo(b,_);const N=MJ(a,E),$=t.navbar?S==="material"?N.navbarTextMaterial:N.navbarTextIos:S==="material"?N.textMaterial:N.textIos,P=u&&!c?N.tabbarInactive:$,D=c?"active":"inactive",j=C($J(t,{textColor:P,needsTouchRipple:_},r)),B=A(j.base[u?"default":"notTabbar"],o&&j.toolbar,i&&j.navbar,u&&j.tabbar[D],r);return G.createElement(x,TI({ref:b,className:B},w,{role:"link",tabIndex:"0",onClick:m}),y)});Ct.displayName="Link";const PJ=(t,e,n)=>{const{nested:r,margin:a,inset:i,strong:o,outline:s}=t;return{base:{common:A(!r&&a,!i&&!r&&s&&"hairline-t hairline-b",i&&s&&"border",rr("relative",n),"z-10"),ios:A(o&&e.strongBgIos,i&&s&&e.outlineIos),material:A(o&&e.strongBgMaterial,i&&s&&e.outlineMaterial)},ul:{common:A(i&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},AJ=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),...t}},eA=G.createContext(!1);function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NI.apply(this,arguments)}const Ch=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",nested:o,menuList:s,dividers:l,dividersIos:u=!0,dividersMaterial:c=!1,inset:d,insetIos:h,insetMaterial:f,strong:m,strongIos:y,strongMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,ios:S,material:C,children:E,..._}=t,N=O.useRef(null);O.useImperativeHandle(e,()=>({el:N.current}));const $=n,P={..._},D=vn(),j=it({ios:S,material:C}),B=Ot(),K=typeof l>"u"?D==="ios"?u:c:l,Y=typeof m>"u"?D==="ios"?y:v:m,Z=typeof b>"u"?D==="ios"?x:w:b,H=typeof d>"u"?D==="ios"?h:f:d,F=AJ(a,B),Q=j(PJ({...t,margin:i,inset:H,strong:Y,outline:Z},F,r)),J=A(Q.base,H&&Q.inset,s&&Q.menuList,r);return G.createElement(eA.Provider,{value:K},G.createElement($,NI({ref:N,className:J},P),G.createElement("ul",{className:Q.ul},E)))});Ch.displayName="List";function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_I.apply(this,arguments)}const LJ=O.forwardRef((t,e)=>{const{children:n,...r}=t,a=O.useRef(null);O.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return G.createElement("li",{ref:a},G.createElement(Ch,_I({nested:!0},i),n))});LJ.displayName="ListGroup";const DJ=(t,e,n)=>{const{dividers:r}=t;return{base:"",button:{common:A(rr("relative",n),r&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${e.touchRipple} overflow-hidden select-none`),ios:A("h-11",e.textIos,e.activeBgIos,e.activeBgIos),material:A("h-12",e.textMaterial,e.activeBgMaterial)}}},FJ=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",...t}},tA=()=>O.useContext(eA);function nb(){return nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nb.apply(this,arguments)}const BJ=O.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,href:i,target:o,type:s,value:l,linkComponent:u="a",linkProps:c={},ios:d,material:h,touchRipple:f=!0,children:m,...y}=t,v=O.useRef(null),b=O.useRef(null),x=tA();O.useImperativeHandle(e,()=>({el:v.current}));const w=n,S={...y},C=vn({ios:d,material:h}),E=it({ios:d,material:h});Bo(b,C==="material"&&f);const _=Ot(),N=FJ(a,_),$=E(DJ({...t,dividers:x},N,r),r),P=!!i||i==="",D={href:!P||i===!0||i===!1?void 0:i||"",target:o,type:s,value:l,...c},j=P?u:"button";return G.createElement(w,nb({ref:v,className:$.base},S),G.createElement(j,nb({ref:b,className:$.button},D),m))});BJ.displayName="ListButton";const zJ=(t,e,n)=>{let{className:r,isMediaItem:a,theme:i,textColor:o,needsTouchRipple:s,isMenuListItemActive:l,autoStrongTitle:u}=n;const{menuListItem:c,dividers:d,mediaClassName:h="",mediaClass:f="",innerClassName:m="",innerClass:y="",contentClassName:v="",contentClass:b="",titleWrapClassName:x="",titleWrapClass:w="",titleFontSizeIos:S,titleFontSizeMaterial:C,strongTitle:E,contacts:_}=t;return{base:{common:c?`${o} py-1`:"",material:_&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:A(`flex items-center ${v||b}`),ios:A(!c&&A(e.primaryTextIos,"ps-4-safe"),c&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:A(!c&&A(e.primaryTextMaterial,a?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",_&&"ml-10"),c&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:A("duration-300 active:duration-0 cursor-pointer select-none",d&&i==="ios"&&"active:hairline-transparent",s&&A("relative overflow-hidden z-10",e.touchRipple),A(l?i==="ios"?e.menuListItemActiveBgIos:e.menuListItemActiveBgMaterial:c?i==="ios"?e.menuListItemBgIos:e.menuListItemBgMaterial:i==="ios"?e.activeBgIos:e.activeBgMaterial))},media:{common:`shrink-0 flex ${h||f}`,ios:"py-2 me-4",material:A("py-3",c?"me-3":"me-4")},inner:{common:A("w-full relative",!c&&d&&"hairline-b",m||y),ios:"py-2.5 pe-4-safe",material:A("py-3",a&&!c?"pe-2":"pe-4-safe")},titleWrap:{common:A(`flex justify-between items-center ${x||w}`),ios:A(!c&&S),material:A(!c&&C)},title:{common:"shrink",menuListItem:A("text-sm",E===!0||u?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:A("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:e.secondaryTextIos,material:A(e.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:A("text-sm line-clamp-2"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:e.secondaryTextIos,material:e.secondaryTextMaterial},footer:{common:A("text-xs mt-0.5"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},groupTitle:{common:A("pl-4-safe pr-4-safe py-1 flex items-center z-20",rr("relative",r)),ios:`h-8${d?" hairline-t":""} -mt-px ${S} ${e.secondaryTextIos} ${e.groupTitleBgIos} ${_&&A("font-semibold top-11-safe sticky",e.groupTitleContactsTextIos,e.groupTitleContactsBgIos)}`,material:`h-12 ${C} ${e.secondaryTextMaterial} ${e.groupTitleBgMaterial} ${_&&A("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",e.groupTitleContactsTextMaterial,e.groupTitleContactsBgMaterial)}`}}},jJ=function(t,e){return t===void 0&&(t={}),{primaryTextIos:A("text-black",e("dark:text-white")),primaryTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),secondaryTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:A("bg-ios-light-surface-variant",e("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),menuListItemTextIos:A("text-black",e("dark:text-white")),menuListItemTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:A("text-primary",e("dark:text-white")),menuListItemActiveTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:A("bg-primary bg-opacity-15",e("dark:bg-primary")),menuListItemActiveBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),touchRipple:A("touch-ripple-black",e("dark:touch-ripple-white")),groupTitleContactsTextIos:A("text-opacity-90",e("dark:text-opacity-90")),groupTitleContactsTextMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),groupTitleContactsBgIos:A(e("dark:bg-[#323234]")),groupTitleContactsBgMaterial:A("bg-transparent",e("dark:bg-transparent")),...t}};function rb(){return rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rb.apply(this,arguments)}const Eh=O.forwardRef((t,e)=>{const{component:n="li",colors:r,className:a,mediaClassName:i="",innerClassName:o="",innerChildren:s,contentClassName:l="",contentChildren:u,titleWrapClassName:c="",titleFontSizeIos:d="text-[17px]",titleFontSizeMaterial:h="text-[16px]",title:f,subtitle:m,text:y,after:v,media:b,header:x,footer:w,menuListItem:S,menuListItemActive:C,groupTitle:E,strongTitle:_="auto",label:N,chevron:$=void 0,chevronIos:P=!0,chevronMaterial:D=!0,chevronIcon:j,href:B,target:K,link:Y,linkComponent:Z="a",linkProps:H={},dividers:F,contacts:Q,ios:J,material:re,touchRipple:se=!0,children:he,...de}=t,ie=O.useRef(null),xe=O.useRef(null);O.useImperativeHandle(e,()=>({el:xe.current}));const q=n,oe={...de},pe=typeof F>"u"?tA():F,Ee=vn({ios:J,material:re}),Ie=it({ios:J,material:re}),_e=Ot(),Fe=typeof $>"u"?Ee==="ios"?P:D:$,Xe=jJ(r,_e),$e=S&&C,lt=Xe[`${$e?"menuListItemActiveText":S?"menuListItemText":"text"}${Ee==="ios"?"Ios":"Material"}`],Ze=!!B||B===""||S||Y,nt=!!N,et=Ee==="material"&&(nt||Ze)&&se;Bo(ie,et);const ln=B===!0||B===!1||typeof B>"u"?void 0:B||"",Ut=Ze?Z:nt?"label":"div",Jt=Ze?{href:ln,target:K,...H}:{},Zt=f&&(m||y),Mt=_==="auto"&&Zt,It=Ie(zJ({...t,titleFontSizeIos:d,titleFontSizeMaterial:h,dividers:pe,strongTitle:_,mediaClassName:i,innerClassName:o,contentClassName:l,titleWrapClassName:c},Xe,{isMediaItem:Zt,theme:Ee,textColor:lt,needsTouchRipple:et,isMenuListItemActive:$e,darkClasses:_e,autoStrongTitle:Mt,className:a}),a),Vn=Ze||nt?It.itemContent.link:It.itemContent.default,Qn=S?It.title.menuListItem:_===!0||Mt?It.title.strong:It.title.default;return E?G.createElement(q,{className:A(It.groupTitle,a)},f,he):G.createElement(q,rb({ref:xe,className:It.base},oe),G.createElement(Ut,rb({ref:ie,className:Vn},Jt),b&&G.createElement("div",{className:It.media},b),G.createElement("div",{className:It.inner},x&&G.createElement("div",{className:It.header},x),(f||v)&&G.createElement("div",{className:It.titleWrap},f&&G.createElement("div",{className:Qn},f),v&&G.createElement("div",{className:It.after},v),Ze&&Fe&&!S&&(j||G.createElement(QP,{className:It.chevron}))),m&&G.createElement("div",{className:It.subtitle},m),y&&G.createElement("div",{className:It.text},y),w&&G.createElement("div",{className:It.footer},w),s),u),he)});Eh.displayName="ListItem";function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OI.apply(this,arguments)}const VJ=t=>G.createElement("svg",OI({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},t),G.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),UJ=(t,e,n)=>{let{isFloatingTransformed:r,isFocused:a,darkClasses:i,getLabelColor:o,hasLabel:s}=n;const{error:l,type:u,outline:c,inputClassName:d="",inputClass:h=""}=t;return{base:{common:"",ios:A(c&&"my-4"),material:A("py-2")},itemContent:{common:"relative",ios:A(c&&"ml-4 mr-4 rounded-lg",!c&&e.bgIos),material:A("min-h-[56px] ml-4 mr-4",c?A("rounded"):A(e.bgMaterial,"rounded-t relative "))},inner:{common:"",material:A(c?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:A("duration-200 text-xs",o(),c&&"flex"),ios:A(c&&"-mt-4"),material:A(c&&"-mt-4"),stacked:"",floating:{common:A("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",r&&"scale-133"),ios:r?c?"translate-y-6":"translate-y-4":"",material:r?c?"translate-y-8":"translate-y-3":""}},labelText:{common:A(c&&"relative p-1 block -m-1"),ios:A(c&&A("-top-1",e.outlineLabelBgIos)),material:A(c&&A("-top-2",e.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:A((!s||c)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${o()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${d||h}`,ios:"h-10",material:"h-6",notFloating:{common:A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30")),material:A(u==="textarea"&&"py-1"),ios:A(u==="textarea"&&"py-2")},floating:r?"placeholder-transparent":A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:e.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:A("w-3.5 h-3.5 opacity-45 active:opacity-30",e.labelTextIos),material:A("w-6 h-6 active:opacity-55",e.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:c&&A(l?e.errorBorder:a?e.outlineBorderFocusIos:e.outlineBorderIos,"h-full border rounded-lg -z-10"),material:A(l?e.errorBorder:a?e.outlineBorderFocusMaterial:e.outlineBorderMaterial,c&&A("h-full border rounded -z-10",a&&"border-2"),!c&&A("border-b h-px origin-bottom",a&&"scale-y-[2]"))}}},WJ=function(t,e){return t===void 0&&(t={}),{bgIos:"",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),outlineBorderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:A("border-md-light-on-surface",e("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),outlineLabelBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",...t}};function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RI.apply(this,arguments)}const GJ=O.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,label:i,floatingLabel:o,outline:s,outlineIos:l,outlineMaterial:u,media:c,input:d,info:h,error:f,clearButton:m,dropdown:y,inputId:v,inputStyle:b,inputClassName:x="",name:w,value:S,defaultValue:C,type:E="text",inputMode:_,readOnly:N,required:$,disabled:P,placeholder:D,size:j,accept:B,autoComplete:K,autoCorrect:Y,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Q,max:J,min:re,step:se,maxLength:he,minLength:de,multiple:ie,pattern:xe,tabIndex:q,onInput:oe,onChange:pe,onFocus:Ee,onBlur:Ie,onClear:_e,ios:Fe,material:Xe,children:$e,...lt}=t,Ze=O.useRef(null),nt=O.useRef(null);O.useImperativeHandle(e,()=>({el:nt.current,inputEl:Ze.current}));const[et,ln]=O.useState(!1),Ut=vn({ios:Fe,material:Xe}),Jt=it({ios:Fe,material:Xe}),Zt=Ot(),Mt=WJ(a,Zt),It=i&&o?"floating":"stacked",Vn=It==="floating"?"floating":"notFloating",Qn=()=>{if(Ze.current)return Ze.current.value},Ua=i&&o&&!(()=>{const ba=Qn();return typeof S>"u"?ba||ba===0:S||S===0})()&&!et,Rn=()=>f?Mt.errorText:Ut==="material"?et?Mt.labelTextFocusMaterial:Mt.labelTextMaterial:Ut==="ios"?et?Mt.labelTextFocusIos:Mt.labelTextIos:"",ei=ba=>{ln(!0),Ee&&Ee(ba)},ko=ba=>{ln(!1),Ie&&Ie(ba)},wi=typeof s>"u"?Ut==="ios"?l:u:s,gn=Jt(UJ({...t,outline:wi},Mt,{isFloatingTransformed:Ua,isFocused:et,darkClasses:Zt,getLabelColor:Rn,inputClassName:x,hasLabel:!!i})),ti={...lt},ki=()=>{if(d)return d;const ba=E==="select"||E==="textarea"?E:"input",Nl=ba==="input";return G.createElement(ba,{id:v,ref:Ze,className:gn.input[Vn],style:b,name:w,type:Nl?E:void 0,placeholder:D,inputMode:_,size:j,accept:B,autoComplete:K,autoCorrect:Y,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Q,disabled:P,max:J,maxLength:he,min:re,minLength:de,step:se,multiple:ie,readOnly:N,required:$,pattern:xe,tabIndex:q,value:S,defaultValue:C,onInput:oe,onChange:pe,onFocus:ei,onBlur:ko},E==="select"?$e:null)},Si=G.createElement(G.Fragment,null,f&&f!==!0&&G.createElement("div",{className:A(gn.errorInfo,gn.error)},f),h&&!f&&G.createElement("div",{className:A(gn.errorInfo,gn.info)},h)),Rs=G.createElement(G.Fragment,null,i&&G.createElement("div",{className:gn.label[It]},G.createElement("div",{className:gn.labelText},i)),G.createElement("div",{className:gn.inputWrap[It]},ki(),m&&G.createElement(ig,{theme:Ut,onClick:_e,className:gn.clearButton}),y&&G.createElement(VJ,{className:gn.dropdown})),Si);return G.createElement(Eh,RI({ref:nt,component:n,media:c,className:gn.base,title:null,mediaClassName:gn.media,innerClassName:gn.inner[It],contentClassName:gn.itemContent,titleWrapClassName:gn.titleWrap,innerChildren:Rs,contentChildren:(wi||Ut==="material")&&G.createElement("span",{className:gn.border}),dividers:Ut==="material"||wi?!1:void 0},ti),E!=="select"?$e:null)});GJ.displayName="ListInput";function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}const HJ=O.forwardRef((t,e)=>{const{children:n,...r}=t,a=O.useRef(null);O.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return G.createElement(Ch,$I({ref:a,menuList:!0},i),n)});HJ.displayName="MenuList";function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}const qJ=O.forwardRef((t,e)=>{const{active:n,href:r,children:a,...i}=t,o=O.useRef(null);O.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return G.createElement(Eh,MI({ref:o,menuListItem:!0,menuListItemActive:n,href:r||!1},s),a)});qJ.displayName="MenuListItem";const KJ=(t,e)=>{const{type:n}=t;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:A("self-end",e.messageSent)},messageReceived:{common:e.messageReceived},messageName:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageHeader:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageFooter:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageAvatar:{common:A("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...n==="sent"&&{ios:A("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleSentIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",e.bubbleSentMd)},...n==="received"&&{ios:A("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleReceivedIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",e.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},XJ=function(t,e){return t===void 0&&(t={}),{messageSent:"text-white",messageReceived:"text-inherit",messageNameIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),messageNameMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),bubbleSentIos:A("bg-primary"),bubbleSentMd:A("bg-md-light-primary",e("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:A("bg-[#e5e5ea]",e("dark:bg-[#252525]")),bubbleReceivedMd:A(e("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),...t}};function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}const YJ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,text:o,name:s,type:l="sent",header:u,footer:c,textHeader:d,textFooter:h,avatar:f,ios:m,material:y,children:v,...b}=t,x=O.useRef(null);O.useImperativeHandle(e,()=>({el:x.current}));const w=it({ios:m,material:y}),S=Ot(),C=XJ(a,S),E=w(KJ({...t},C)),_=n,N={...b},$=A(r,E.message,{[E.messageSent]:l==="sent",[E.messageReceived]:l==="received"});return G.createElement(_,PI({id:i,ref:x,className:$},N),f&&G.createElement("div",{className:E.messageAvatar},f),G.createElement("div",{className:E.messageContent},s&&G.createElement("div",{className:E.messageName},s),u&&G.createElement("div",{className:E.messageHeader},u),G.createElement("div",{className:E.messageBubble},d&&G.createElement("div",{className:E.messageTextHeader},d),o&&G.createElement("div",{className:E.messageText},o),h&&G.createElement("div",{className:E.messageTextFooter},h)),c&&G.createElement("div",{className:E.messageFooter},c)))});YJ.displayName="Message";const QJ=(t,e,n)=>{let{isFocused:r}=n;const{rightClassName:a="",rightClass:i="",leftClassName:o="",leftClass:s=""}=t;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:e.bgMessage},left:{common:A("mt-1 -ms-2",o||s),ios:A("px-2",e.toolbarIconIos),material:A("",e.toolbarIconMd)},right:{common:A("mt-1 -me-2",a||i),ios:A("px-2",e.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:A("block w-full focus:outline-none resize-none",r&&"outline-offset-0"),ios:A("border h-8 rounded-3xl px-4 leading-4 py-1.5",e.inputBgIos,e.borderIos,e.placeholderIos),material:A("rounded-3xl h-12 px-4 py-4 leading-4 ",e.inputBgMd,e.placeholderMd)}}},JJ=function(t,e){return t===void 0&&(t={}),{toolbarIconIos:A("fill-primary",e("dark:fill-md-dark-primary")),toolbarIconMd:A("fill-black"),inputBgIos:A("bg-transparent"),borderIos:A("border-[#c8c8cd]",e("dark:border-white dark:border-opacity-30")),inputBgMd:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-variant")),placeholderIos:A(e("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}},ZJ=(t,e,n)=>{const{bgClassName:r="",bgClass:a="",outline:i,translucent:o,innerClassName:s="",innerClass:l="",tabbar:u,tabbarIcons:c,top:d}=t;return{base:{common:A("w-full z-20",rr("relative",n),!d&&"pb-safe")},bg:{common:A("absolute w-full h-full left-0 top-0",i&&(d?"hairline-b":"hairline-t"),r||a),ios:A(e.bgIos,o&&"translucent"),material:A(`${e.bgMaterial}`)},inner:{common:A("flex relative justify-between items-center w-full overflow-hidden",s||l),ios:A("pl-2-safe pr-2-safe",c?"h-12.5":"h-11"),material:A(u?"":"pl-2-safe pr-2-safe",c?"h-20":"h-14")},highlight:{common:A(d?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:e.tabbarHighlightBgIos,material:e.tabbarHighlightBgMaterial}}},eZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AI.apply(this,arguments)}const LI=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,bgClassName:o="",innerClassName:s="",outline:l,tabbar:u,tabbarIcons:c,tabbarLabels:d,top:h,ios:f,material:m,children:y,...v}=t,b=O.useRef(null),x=O.useRef(null);O.useImperativeHandle(e,()=>({el:x.current}));const w=n,[S,C]=O.useState({transform:"",width:""}),E=vn({ios:f,material:m}),_=it({ios:f,material:m}),N=Ot(),$={...v},P=eZ(a,N),D=_(ZJ({...t,outline:typeof l>"u"?E==="ios":l,translucent:i,bgClassName:o,innerClassName:s},P,r),r),j=E==="material"&&u&&!c;return O.useEffect(()=>{if(j&&b.current){const B=b.current.previousElementSibling,K=1/B.children.length*100,Y=[...B.children].indexOf(B.querySelector(".k-tabbar-link-active"));C({...S,width:`${K}%`,transform:`translateX(${Y*100}%)`})}},[y]),G.createElement(w,AI({ref:x,className:D.base},$),G.createElement("div",{className:D.bg}),G.createElement("div",{className:D.inner},y),j&&G.createElement("span",{className:D.highlight,style:S,ref:b}))});LI.displayName="Toolbar";function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DI.apply(this,arguments)}const tZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,style:o,name:s,placeholder:l="Message",value:u,outline:c=!1,leftClassName:d="",rightClassName:h="",textareaId:f,disabled:m,size:y,left:v,right:b,ios:x,material:w,onInput:S,onChange:C,onFocus:E,children:_,...N}=t,$=O.useRef(null),P=O.useRef(null);O.useImperativeHandle(e,()=>({el:$.current,areaElRef:P.current}));const[D,j]=O.useState(!1),B=it({ios:x,material:w}),K=Ot(),Y=JJ(a,K),Z=J=>{j(!0),E&&E(J)},H=B(QJ({...t},Y,{isFocused:D})),F=n,Q={...N};return G.createElement(F,DI({ref:$,id:i,style:o,className:H.base},Q),G.createElement(LI,{colors:Y,outline:c},v&&G.createElement("div",{className:H.left},v),G.createElement("div",{className:H.messagebarArea},G.createElement("textarea",{id:f,ref:P,type:"textarea",className:H.messagebarInput,placeholder:l,name:s,size:y,disabled:m,onInput:S,onChange:C,onFocus:Z,value:u})),b&&G.createElement("div",{className:H.right},b)))});tZ.displayName="Messagebar";const nZ=()=>({base:{common:A("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FI.apply(this,arguments)}const rZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,ios:o,material:s,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:o,material:s})(nZ({...t})),h=n,f={...u};return G.createElement(h,FI({id:i,className:d.base,ref:c},f),l)});rZ.displayName="Messages";const aZ=(t,e)=>({base:{common:A("text-center text-xs leading-none"),ios:A("w-full mt-2.5",e.titleIos),material:A("mt-4",e.titleMd)}}),iZ=function(t,e){return t===void 0&&(t={}),{titleIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),titleMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function BI(){return BI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BI.apply(this,arguments)}const oZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,id:s,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:i,material:o}),h=Ot(),f=iZ(a,h),m=d(aZ({...t},f)),y=n,v={...u};return G.createElement(y,BI({id:s,className:m.base,ref:c},v),l)});oZ.displayName="MessagesTitle";const sZ=(t,e,n)=>{const{outline:r,translucent:a,large:i,medium:o,transparent:s,left:l,right:u,fontSizeIos:c,fontSizeMaterial:d,titleFontSizeIos:h,titleFontSizeMaterial:f,titleLargeFontSizeIos:m,titleLargeFontSizeMaterial:y,titleMediumFontSizeIos:v,titleMediumFontSizeMaterial:b,bgClassName:x="",bgClass:w="",subnavbarClassName:S="",subnavbarClass:C="",innerClassName:E="",innerClass:_="",leftClassName:N="",leftClass:$="",titleClassName:P="",titleClass:D="",subtitleClassName:j="",subtitleClass:B="",rightClassName:K="",rightClass:Y="",centerTitle:Z}=t;return{base:{common:A("w-full z-20 top-0 pt-safe",(i||o)&&"pointer-events-none",rr("sticky",n)),ios:A(c,e.textIos),material:A(d,e.textMaterial)},bg:{common:A("absolute w-full h-full left-0 top-0",r&&"hairline-b",x||w),ios:A(e.bgIos,a&&"translucent"),material:`${e.bgMaterial}`},subnavbar:{common:A("relative flex items-center",S||C,(i||o)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:A("flex relative items-center w-full overflow-hidden",E||_,(i||o)&&"pointer-events-auto z-10"),ios:A("pl-2-safe pr-2-safe h-11",!l&&u?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:A("flex items-center px-4 relative",(i||o)&&"pointer-events-auto"),ios:A(o&&A(v,"h-11 font-semibold"),i&&A(m,"h-13 font-bold")),material:A(o&&A(b,"h-12 pb-4"),i&&A(y,"h-[5.5rem]"))},left:{common:A("flex justify-center items-center h-full",N||$),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:A("whitespace-nowrap leading-tight",P||D,(i||o||s)&&"opacity-0",Z?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:A(`${h} font-semibold`,!Z&&"first:mx-2"),material:A(`${f} font-normal`,!Z&&"first:mx-4")},subtitle:{common:A("font-normal leading-none",j||B),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:A("flex justify-center items-center h-full",K||Y),ios:A("transform transform-gpu",Z?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},lZ=(t,e)=>({bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t});function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}const ab=O.forwardRef((t,e)=>{const{component:n="div",className:r,bgClassName:a="",innerClassName:i="",leftClassName:o="",titleClassName:s="",subtitleClassName:l="",rightClassName:u="",subnavbarClassName:c="",centerTitle:d,colors:h,translucent:f=!0,outline:m,medium:y,large:v,transparent:b,fontSizeIos:x="text-[17px]",fontSizeMaterial:w="text-[16px]",titleFontSizeIos:S="text-[17px]",titleFontSizeMaterial:C="text-[22px]",titleMediumFontSizeIos:E="text-[24px]",titleMediumFontSizeMaterial:_="text-[24px]",titleLargeFontSizeIos:N="text-[34px]",titleLargeFontSizeMaterial:$="text-[28px]",scrollEl:P,left:D,title:j,subtitle:B,right:K,subnavbar:Y,ios:Z,material:H,children:F,...Q}=t,J=O.useRef(null),re=O.useRef(0),se=O.useRef(null),he=O.useRef(null),de=O.useRef(null),ie=O.useRef(null),xe=O.useRef(null),q=O.useRef(null);O.useImperativeHandle(e,()=>({el:J.current}));const oe=n,pe=vn({ios:Z,material:H}),Ee=it({ios:Z,material:H}),Ie=Ot(),_e={...Q},Fe=lZ(h,Ie),Xe=et=>{const{scrollTop:ln}=et.target;if(!b&&!v&&!y){q.current&&(ie.current&&(ie.current.style.opacity=""),se.current&&(se.current.style.opacity=""));return}const Ut=re.current,Jt=Math.max(Math.min(ln/Ut,1),0);se.current.style.opacity=b?-.5+Jt*1.5:"",(y||v)&&(se.current.style.transform=`translateY(-${Jt*Ut}px)`),de.current&&(de.current.style.transform=`translateY(-${Jt*Ut}px)`,de.current.style.opacity=1-Jt*2),ie.current&&(ie.current.style.opacity=-.5+Jt*1.5),(y||v)&&xe.current&&(xe.current.style.transform=`translateY(-${Jt*Ut}px)`)},$e=()=>typeof P>"u"?J.current&&J.current.parentNode:P.current||P,lt=()=>{if(!v&&!y&&!b){q.current&&(Xe({target:{scrollTop:0}}),q.current=!1);return}q.current=!0,de.current?re.current=de.current.offsetHeight:re.current=he.current.offsetHeight;const et=$e();et?(et.addEventListener("scroll",Xe),Xe({target:et})):Xe({target:{scrollTop:0}})},Ze=()=>{const et=$e();et&&et.removeEventListener("scroll",Xe)};O.useEffect(()=>(lt(),Ze));const nt=Ee(sZ({...t,centerTitle:typeof d>"u"?pe==="ios":d,translucent:f,outline:typeof m>"u"?pe==="ios":m,fontSizeIos:x,fontSizeMaterial:w,titleFontSizeIos:S,titleFontSizeMaterial:C,titleMediumFontSizeIos:E,titleMediumFontSizeMaterial:_,titleLargeFontSizeIos:N,titleLargeFontSizeMaterial:$,bgClassName:a,innerClassName:i,leftClassName:o,titleClassName:s,subtitleClassName:l,rightClassName:u,subnavbarClassName:c},Fe,r),r);return G.createElement(oe,zI({ref:J,className:nt.base},_e),G.createElement("div",{className:nt.bg,ref:se}),G.createElement("div",{className:nt.inner,ref:he},D&&G.createElement("div",{className:nt.left},D),(j||B)&&G.createElement("div",{className:nt.title,ref:ie},j,B&&G.createElement("div",{className:nt.subtitle},B)),K&&G.createElement("div",{className:nt.right},K),F),(v||y)&&G.createElement("div",{className:nt.titleContainer,ref:de},j),Y&&G.createElement("div",{className:nt.subnavbar,ref:xe},Y))});ab.displayName="Navbar";function ib(){return ib=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ib.apply(this,arguments)}const nA=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",ib({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},n),G.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):G.createElement("svg",ib({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},n),G.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},uZ=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function jI(){return jI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jI.apply(this,arguments)}const cZ=O.forwardRef((t,e)=>{const{component:n="a",className:r,text:a="Back",showText:i="auto",ios:o,material:s,onClick:l,children:u,...c}=t,d=O.useRef(null);O.useImperativeHandle(e,()=>({el:d.current}));const h={...c},f=vn({ios:o,material:s}),m=it({ios:o,material:s}),y=i==="auto"&&f==="ios"||i===!0,v=m(uZ(),r);return G.createElement(Ct,jI({ref:d,component:n,className:v.base,navbar:!0},h,{onClick:l}),G.createElement("span",{className:v.icon},G.createElement(nA,{theme:f})),y&&G.createElement("span",null,a),u)});cZ.displayName="NavbarBackLink";const dZ=(t,e,n)=>{const{opened:r,translucent:a}=t;return{base:{common:A(rr("absolute",n),"z-50 transform transition-transform-opacity box-border duration-500",!r&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:A("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",e.bgIos,a&&"translucent"),material:A("rounded-2xl py-5 px-4 start-4 end-4 top-4",e.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:A("mt-2")},header:{common:A("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:A("me-2"),material:"me-4"},contentTitle:{material:A("flex flex-row items-center")},title:{ios:A("tracking-wide text-[13px] uppercase",e.titleIos),material:A("font-medium")},titleRightText:{ios:A("me-1 ms-auto text-[13px]",e.titleRightIos),material:A("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",e.titleRightMd)},button:{ios:A("me-1 ms-auto cursor-pointer"),material:A("ms-auto cursor-pointer")},deleteIcon:{ios:A("w-5 h-5",e.deleteIconIos),material:A("w-6 h-6",e.deleteIconMd)},subtitle:{ios:A("text-[15px] font-semibold",e.subtitleIos),material:A("text-sm")},text:{ios:A("text-[15px]"),material:A("text-sm",e.textMaterial)}}},hZ=(t,e)=>({bgIos:A("bg-white",e("dark:bg-[#1e1e1e]")),bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),titleIos:A("text-black",e("dark:text-white")),titleRightIos:A("text-opacity-45 text-black",e("dark:text-white dark:text-opacity-45")),titleRightMd:A("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:A("text-black ",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant ")),deleteIconIos:A("fill-stone-400 active:fill-stone-200",e("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t});function ob(){return ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ob.apply(this,arguments)}const pZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,button:i,icon:o,title:s,titleRightText:l,subtitle:u,text:c,translucent:d=!0,opened:h,onClose:f,ios:m,material:y,children:v,...b}=t,x=O.useRef(null);O.useImperativeHandle(e,()=>({el:x.current}));const w=n,S={...b},C=vn({ios:m,material:y}),E=it({ios:m,material:y}),_=Ot(),N=hZ(a,_),$=E(dZ({...t,translucent:d},N,r),r);return C==="ios"?G.createElement(w,ob({ref:x,className:$.base},S),G.createElement("div",{className:$.header},o&&G.createElement("div",{className:$.icon},o),s&&G.createElement("div",{className:$.title},s),l&&G.createElement("div",{className:$.titleRightText},l),i&&G.createElement("div",{className:$.button,role:"button",tabIndex:"0",onClick:f},G.createElement(ig,{theme:C,className:$.deleteIcon}))),G.createElement("div",{className:$.content},u&&G.createElement("div",{className:$.subtitle},u),c&&G.createElement("div",{className:$.text},c),v)):G.createElement(w,ob({ref:x,className:$.base},S),G.createElement("div",{className:$.header},o&&G.createElement("div",{className:$.icon},o),G.createElement("div",{className:$.contentWrapper},G.createElement("div",{className:$.contentTitle},s&&G.createElement("div",{className:$.title},s),l&&G.createElement("div",{className:$.titleRightText},l)),G.createElement("div",{className:$.content},u&&G.createElement("div",{className:$.subtitle},u),c&&G.createElement("div",{className:$.text},c),v)),i&&G.createElement("div",{className:$.button,role:"button",tabIndex:"0",onClick:f},G.createElement(ig,{theme:C,className:$.deleteIcon}))))});pZ.displayName="Notification";const fZ=(t,e,n)=>({base:{common:A("h-full w-full left-0 top-0 overflow-auto",rr("absolute",n)),ios:e.bgIos,material:e.bgMaterial}}),gZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface",e("dark:bg-ios-dark-surface")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VI.apply(this,arguments)}const sb=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=O.useRef(null);O.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},h=it({ios:i,material:o}),f=Ot(),m=gZ(a,f),y=h(fZ(t,m,r),r);return G.createElement(c,VI({ref:u,className:y.base},d),s)});sb.displayName="Page";const mZ=(t,e,n)=>{const{size:r,floating:a}=t;return{base:{common:A("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",a?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",e.bg,rr("fixed",n),r),ios:"",material:"ease-material-in"},left:{common:A("no-safe-areas-right",a?"right-full -mr-2 rounded-2xl":"right-full"),material:A(!a&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:A("no-safe-areas-left",a?"left-full -ml-2 rounded-2xl":"left-full"),material:A(!a&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},yZ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}const rA=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-72 h-screen",side:o="left",opened:s,backdrop:l=!0,floating:u=!1,onBackdropClick:c,ios:d,material:h,children:f,...m}=t,y=O.useRef(null);O.useImperativeHandle(e,()=>({el:y.current}));const v=s?"opened":"closed",b=n,x={...m},w=it({ios:d,material:h}),S=Ot(),C=yZ(a,S),E=w(mZ({...t,size:i,floating:u},C,r),r),_=A(E.base,E[o][v]);return G.createElement(G.Fragment,null,l&&G.createElement("div",{className:E.backdrop[v],onClick:c}),G.createElement(b,UI({ref:y,className:_},x),f))});rA.displayName="Panel";const bZ=t=>{let{popoverEl:e,targetEl:n,angleEl:r,needsAngle:a,targetX:i,targetY:o,targetWidth:s=0,targetHeight:l=0,theme:u}=t;n.current?n=n.current:n.value?n=n.value:n.el?n=n.el:n.$el&&(n=n.$el),typeof n=="string"&&(n=document.querySelector(n));let c=document.body.offsetWidth,d=document.body.offsetHeight;c===0&&(c=window.innerWidth),d===0&&(d=window.innerHeight);const[h,f]=[e.offsetWidth,e.offsetHeight];let m=0,y,v,b="";a&&(m=r.offsetWidth/2);let x,w;const S=window.getComputedStyle(n);let C=parseInt(S.getPropertyValue("--k-safe-area-top"),10)||0,E=parseInt(S.getPropertyValue("--k-safe-area-left"),10)||0,_=parseInt(S.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(C)&&(C=0),Number.isNaN(E)&&(E=0),Number.isNaN(_)&&(_=0),n){s=n.offsetWidth,l=n.offsetHeight;const Y=n.getBoundingClientRect();x=Y.left,w=Y.top}else typeof i<"u"&&o!=="undefined"&&(x=i,w=o);let[N,$,P]=[0,0,0];const D=u==="ios"?13:23;let j="top";f+m<w-C?$=w-f-m:f+m<d-w-l?(j="bottom",$=w+l+m):(j="middle",$=l/2+w-f/2,P=$,$=Math.max(5,Math.min($,d-f-5)),P-=$),j==="top"||j==="bottom"?(N=s/2+x-h/2,P=N,N=Math.max(5,Math.min(N,c-h-5)),E&&(N=Math.max(N,E)),_&&N+h>c-5-_&&(N=c-5-_-h),j==="top"&&(b="bottom"),j==="bottom"&&(b="top"),P-=N,y=h/2-m+P,y=Math.max(Math.min(y,h-m*2-D),D)):j==="middle"&&(N=x-h-m,b="right",(N<5||N+h+_>c||N<E)&&(N<5&&(N=x+s+m),N+h+_>c&&(N=c-h-5-_),N<E&&(N=E),b="left"),v=f/2-m+P,v=Math.max(Math.min(v,f-m*2-D),D));const B=j,K=N<x?"left":"right";return{set:!0,angleTop:typeof v>"u"?void 0:`${v}px`,angleLeft:typeof y>"u"?void 0:`${y}px`,anglePosition:b,popoverTop:`${$}px`,popoverLeft:`${N}px`,popoverPosition:`${B}-${K}`}},vZ=(t,e,n)=>{const{size:r,translucent:a,angleClassName:i,angleClass:o}=t;return{base:{common:A("transition-transform-opacity z-40 no-safe-areas",rr("fixed",n),r),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:A("overflow-hidden relative"),ios:A("rounded-xl",a&&"translucent",e.bgIos),material:A("rounded-[1.75rem]",e.bgMaterial)},angleWrap:{common:A(i||o||"","pointer-events-none"),ios:A("absolute w-6.5 h-6.5 z-50 overflow-hidden",a&&"opacity-80"),material:A("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:A("absolute rounded w-full h-full transform rotate-45"),ios:e.bgIos,material:e.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},xZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-3",e("dark:bg-ios-dark-surface-3")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),...t}};function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WI.apply(this,arguments)}const wZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,angle:a=!0,angleClassName:i="",colors:o,size:s="w-64",opened:l,backdrop:u=!0,onBackdropClick:c,target:d,targetX:h,targetY:f,targetWidth:m,targetHeight:y,translucent:v=!0,ios:b,material:x,children:w,style:S={},...C}=t,E=O.useRef(null),_=O.useRef(null),[N,$]=O.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});O.useImperativeHandle(e,()=>({el:E.current}));const P=l?"opened":"closed",D=n,j={...C},B=vn({ios:b,material:x}),K=it({ios:b,material:x}),Y=Ot(),Z=xZ(o,Y),H=K(vZ({...t,size:s,angleClassName:i,translucent:v},Z,r),r),F=()=>{!d||!E.current||!l||$(bZ({popoverEl:E.current,targetEl:d,angleEl:_.current,needsAngle:a,targetX:h,targetY:f,targetHeight:y,targetWidth:m,theme:B}))},Q=()=>{typeof window>"u"||window.addEventListener("resize",F)},J=()=>{typeof window>"u"||window.removeEventListener("resize",F)};O.useEffect(()=>(Q(),()=>J())),O.useEffect(()=>{F()},[l]);const re=N.set?{...S||{},left:N.popoverLeft,top:N.popoverTop}:S,se=N.set?{left:N.angleLeft,top:N.angleTop}:void 0,he={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},de=A(H.base[P],B==="material"&&he[N.popoverPosition]);return G.createElement(G.Fragment,null,u&&G.createElement("div",{className:H.backdrop[P],onClick:c}),G.createElement(D,WI({ref:E,className:de,style:re},j),a&&G.createElement("div",{ref:_,style:se,className:H.angleWrap[N.anglePosition]},G.createElement("div",{className:H.angleArrow[N.anglePosition]})),G.createElement("div",{className:H.inner},w)))});wZ.displayName="Popover";const kZ=(t,e,n)=>{const{size:r}=t;return{base:{common:A("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",e.bg,rr("fixed",n),r),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:A("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},SZ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GI.apply(this,arguments)}const aA=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-screen h-screen md:w-160 md:h-160",opened:o,backdrop:s=!0,onBackdropClick:l,ios:u,material:c,children:d,...h}=t,f=O.useRef(null);O.useImperativeHandle(e,()=>({el:f.current}));const m=o?"opened":"closed",y=n,v={...h},b=it({ios:u,material:c}),x=Ot(),w=SZ(a,x),S=b(kZ({...t,size:i},w,r),r);return G.createElement(G.Fragment,null,s&&G.createElement("div",{className:S.backdrop[m],onClick:l}),G.createElement(y,GI({ref:f,className:S.base[m]},v),d))});aA.displayName="Popup";function HI(){return HI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HI.apply(this,arguments)}const CZ=t=>G.createElement("svg",HI({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},t),G.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),G.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),G.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),G.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),G.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),G.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),G.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),G.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function qI(){return qI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qI.apply(this,arguments)}const EZ=t=>G.createElement("svg",qI({viewBox:"0 0 36 36"},t,{fill:"none",stroke:"currentcolor"}),G.createElement("circle",{cx:"18",cy:"18",r:"16"})),IZ=(t,e,n)=>{const{size:r}=t;return{base:{common:A(n==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${r}`),ios:e.iconIos,material:`stroke-4 ${e.iconMaterial}`},inner:{common:"block w-full h-full"}}},TZ=function(t,e){return t===void 0&&(t={}),{iconIos:"text-primary",iconMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function KI(){return KI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KI.apply(this,arguments)}const NZ=O.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,size:i="w-8 h-8",ios:o,material:s,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=n,h={...u},f=vn({ios:o,material:s}),m=it({ios:o,material:s}),y=Ot(),v=TZ(a,y),b=f==="ios"?CZ:EZ,x=m(IZ({...t,size:i},v,f),r);return G.createElement(d,KI({ref:c,className:x.base},h),G.createElement("span",{className:x.inner},G.createElement(b,{className:"w-full h-full"})),l)});NZ.displayName="Preloader";const _Z=t=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:t.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:t.bgIos,material:t.bgMaterial}}),OZ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XI.apply(this,arguments)}const RZ=O.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,ios:i,material:o,progress:s=0,children:l,...u}=t,c=O.useRef(null);O.useImperativeHandle(e,()=>({el:c.current}));const d=n,h={...u},f=it({ios:i,material:o}),m=Ot(),y=OZ(a,m),v=f(_Z(y),r);return G.createElement(d,XI({ref:c,className:v.base},h),G.createElement("span",{className:v.inner,style:{transform:`translateX(-${100-s/1*100}%)`}}),l)});RZ.displayName="Progressbar";const $Z=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",rr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:e.borderCheckedIos,material:e.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${e.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),MZ=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YI.apply(this,arguments)}const PZ=O.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,ios:h,material:f,touchRipple:m=!0,children:y,...v}=t,b=O.useRef(null);O.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...v},S=vn({ios:h,material:f}),C=it({ios:h,material:f}),E=Ot();Bo(b,S==="material"&&m);const _=MZ(a,E),N=o||i&&!d?"checked":"notChecked",$=C($Z(t,_,r,E),r);return G.createElement(x,YI({ref:b,className:$.base},w),G.createElement("input",{type:"radio",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:$.input}),G.createElement("i",{className:$.iconWrap[N]},S==="ios"?G.createElement(ZP,{className:$.icon[N]}):G.createElement("span",{className:$.icon[N]})),y)});PZ.displayName="Radio";const AZ=(t,e,n)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:A("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",n("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${e.valueBgIos}`,material:`h-0.5 ${e.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${e.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${e.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),LZ=function(t,e){return t===void 0&&(t={}),{valueBgIos:"bg-primary",valueBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:A("range-thumb:bg-md-light-primary",e("dark:range-thumb:bg-md-dark-primary")),...t}};function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QI.apply(this,arguments)}const lb=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,inputId:l,name:u,value:c=void 0,defaultValue:d,readOnly:h,disabled:f,step:m=1,min:y=0,max:v=100,onInput:b,onChange:x,onFocus:w,onBlur:S,...C}=t,E=O.useRef(null);O.useImperativeHandle(e,()=>({el:E.current}));const _=n,N={...C},$=it({ios:i,material:o}),P=Ot(),D=LZ(a,P),j=$(AZ(t,D,P),r),B=((c||0)-y)/(v-y)*100;return G.createElement(_,QI({ref:E,className:j.base},N),G.createElement("span",{className:j.trackBg}),G.createElement("span",{className:j.trackValue,style:{width:`${B}%`}}),G.createElement("input",{className:A(j.input,j.inputThumb,j.inputTrack),type:"range",id:l,name:u,min:y,max:v,step:m,value:c,defaultValue:d,readOnly:h,disabled:f,onInput:b,onChange:x,onFocus:w,onBlur:S}))});lb.displayName="Range";const DZ=(t,e,n)=>{let{isEnabled:r,darkClasses:a}=n;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:A("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",a("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),e.placeholderIos,e.inputBgIos),material:A("h-12 ps-12 pe-4 rounded-full",e.placeholderMaterial,e.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:A("w-4 h-4 opacity-45"),material:A("w-5 h-5 z-30",r?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:A("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",r?"":"opacity-0"),material:A("absolute left-4 cursor-pointer",r?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},FZ=function(t,e){return t===void 0&&(t={}),{inputBgIos:"",inputBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),...t}};function ub(){return ub=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ub.apply(this,arguments)}const BZ=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",ub({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},n),G.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):G.createElement("svg",ub({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},n),G.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function JI(){return JI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JI.apply(this,arguments)}const zZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,placeholder:i="Search",value:o,inputId:s,inputStyle:l,disableButton:u=!1,disableButtonText:c="Cancel",clearButton:d=!0,onInput:h,onChange:f,onFocus:m,onBlur:y,onClear:v,onDisable:b,ios:x,material:w,...S}=t,C=O.useRef(null),E=O.useRef(null),_=O.useRef(null),[N,$]=O.useState(0),P=O.useRef(null),D=O.useRef(!1);O.useImperativeHandle(e,()=>({el:E.current,searchEl:C.current}));const[j,B]=O.useState(!1),K=vn({ios:x,material:w}),Y=it({ios:x,material:w}),Z=Ot(),H=FZ(a,Z),F=pe=>{h&&h(pe)},Q=pe=>{f&&f(pe)},J=pe=>{B(!0),m&&m(pe)},re=pe=>{y&&y(pe)},se=()=>{o||(P.current=setTimeout(()=>{B(!1)}))},he=()=>{clearTimeout(P.current)},de=pe=>{pe.preventDefault(),B(!1),C.current&&C.current.blur(),b&&b(),v&&v()};O.useEffect(()=>{_.current&&$(_.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{D.current=!0})})},[]);const ie=Y(DZ({...t},H,{isEnabled:j,darkClasses:Z})),xe=K==="ios"?G.createElement("button",{type:"button",ref:_,style:{marginRight:j?0:`-${N}px`,transitionDuration:D.current?"":"0ms"},className:ie.cancelButton,onClick:de,onPointerDown:pe=>pe.preventDefault()},c):G.createElement(nA,{theme:K,onClick:de,className:A(ie.cancelButton),onPointerDown:pe=>pe.preventDefault()}),q=n,oe={...S};return G.createElement(q,JI({ref:E,className:ie.base},oe,{onBlurCapture:se,onFocusCapture:he}),G.createElement("div",{className:ie.inner},G.createElement("span",{className:ie.searchIconWrap},G.createElement(BZ,{ios:x,material:w,className:ie.searchIcon})),G.createElement("input",{id:s,ref:C,className:A(ie.input),style:l,type:"text",name:"search",placeholder:i,value:o,onInput:F,onChange:Q,onFocus:J,onBlur:re}),o&&d&&G.createElement("button",{className:ie.clearButton,onClick:v,type:"button"},G.createElement(ig,{theme:K,className:ie.deleteIcon}))),u&&xe)});zZ.displayName="Searchbar";const jZ=(t,e,n)=>{const{outline:r,rounded:a}=t;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:r?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${e.borderIos} border-2`,material:`${e.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${e.divideIos}`,material:`divide-x ${e.divideMaterial}`},strong:{common:A("p-0.5 space-x-1 relative"),ios:e.strongBgIos,material:e.strongBgMaterial},strongHighlight:{common:A("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",a&&"rounded-full","bg-white shadow",n("dark:bg-opacity-15 dark:touch-ripple-white")),ios:A(!a&&"rounded"),material:A(!a&&"rounded-md")}}},VZ=function(t,e){return t===void 0&&(t={}),{strongBgIos:A("bg-black bg-opacity-5",e("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:A("divide-md-light-outline",e("dark:divide-md-dark-outline")),...t}};function ZI(){return ZI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZI.apply(this,arguments)}const UZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,raised:s,outline:l,strong:u,rounded:c,children:d,...h}=t,f=O.useRef(null),m=O.useRef(null);O.useImperativeHandle(e,()=>({el:f.current}));const[y,v]=O.useState({transform:"",width:""}),b=n,x={...h},w=it({ios:i,material:o}),S=Ot(),C=VZ(a,S),E=w(jZ(t,C,S)),_=A(c?E.base.rounded:E.base.square,s&&E.raised,l&&E.outline,u&&E.strong,r);return O.useEffect(()=>{if(u&&m.current){const N=m.current.parentElement,$=N.children.length-1,P=[...N.children].indexOf(N.querySelector(".k-segmented-strong-button-active")),D="4px";v({...y,width:`calc((100% - 2px * 2 - ${D} * (${$} - 1)) / ${$})`,transform:`translateX(calc((${P} * 100% + ${P} * ${D}) * var(--k-rtl-reverse)))`})}},[d]),G.createElement(b,ZI({ref:f,className:_},x),l?G.createElement("span",{className:E.outlineInner},d):d,u&&G.createElement("span",{ref:m,className:E.strongHighlight,style:y}))});UZ.displayName="Segmented";function e3(){return e3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e3.apply(this,arguments)}const WZ=O.forwardRef((t,e)=>{const{active:n,children:r,outline:a,strong:i,clear:o,rounded:s,...l}=t,u=O.useRef(null);return O.useImperativeHandle(e,()=>({el:u.current})),G.createElement(vr,e3({ref:u,segmented:!0,segmentedActive:n,segmentedStrong:i,rounded:s&&i},l),r)});WZ.displayName="SegmentedButton";const GZ=(t,e,n)=>({base:{common:A("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",rr("fixed",n)),ios:"",material:`rounded-t-2xl ease-material-in ${e.bgIos}`,opened:`-translate-y-full ${e.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),HZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function t3(){return t3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t3.apply(this,arguments)}const qZ=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,ios:l,material:u,children:c,...d}=t,h=O.useRef(null);O.useImperativeHandle(e,()=>({el:h.current}));const f=i?"opened":"closed",m=n,y={...d},v=it({ios:l,material:u}),b=Ot(),x=HZ(a,b),w=v(GZ(t,x,r),r);return G.createElement(G.Fragment,null,o&&G.createElement("div",{className:w.backdrop[f],onClick:s}),G.createElement(m,t3({ref:h,className:w.base[f]},y),c))});qZ.displayName="Sheet";const KZ=(t,e)=>{const{buttonsOnly:n}=t;return{base:`${e.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:A(e.fillTouchRipple,n&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:A(e.fillBgIos,e.fillTextIos,e.fillActiveBgIos),material:A(e.fillBgMaterial,e.fillTextMaterial,e.fillActiveBgMaterial)},outline:{common:A(e.touchRipple,"active:bg-opacity-15",n&&"first:border-r-0 rtl:last:border-r-0"),ios:A("border-2",e.textIos,e.activeBgIos,e.outlineBorderIos,n&&"rtl:first:border-r-2"),material:A("border",e.textMaterial,e.activeBgMaterial,e.outlineBorderMaterial,n&&"rtl:first:border-r")},clear:{common:`${e.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:A(e.textIos,e.activeBgIos),material:A(e.textMaterial,e.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${e.textIos}`,material:`text-sm ${e.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},XZ=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",...t}};function n3(){return n3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n3.apply(this,arguments)}const YZ=O.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,value:i=0,defaultValue:o,input:s=!1,inputType:l="text",inputPlaceholder:u,inputDisabled:c,inputReadOnly:d,buttonsOnly:h,rounded:f,roundedIos:m,roundedMaterial:y,small:v,smallIos:b,smallMaterial:x,large:w,largeIos:S,largeMaterial:C,raised:E,raisedIos:_,raisedMaterial:N,outline:$,outlineIos:P,outlineMaterial:D,onInput:j,onChange:B,onFocus:K,onBlur:Y,onMinus:Z,onPlus:H,ios:F,material:Q,touchRipple:J=!0,children:re,...se}=t,he=O.useRef(null),de=O.useRef(null),ie=O.useRef(null);O.useImperativeHandle(e,()=>({el:he.current}));const xe=n,q=vn({ios:F,material:Q}),oe=it({ios:F,material:Q});Bo(de,q==="material"&&J),Bo(ie,q==="material"&&J);const pe=typeof f>"u"?q==="ios"?m:y:f,Ee=typeof v>"u"?q==="ios"?b:x:v,Ie=typeof w>"u"?q==="ios"?S:C:w,_e=typeof E>"u"?q==="ios"?_:N:E,Fe=typeof $>"u"?q==="ios"?P:D:$,Xe=Ot(),$e=XZ(a,Xe),lt=Ie?"large":Ee?"small":"medium",Ze=Fe&&_e?"clear":Fe?"outline":"fill",nt=pe?"rounded":"square",et=oe(KZ({...t,rounded:pe,small:Ee,large:Ie,raised:_e,outline:Fe},$e)),ln={...se},Ut=A(et.base,_e&&et.raised,et.size[lt],et.shape[nt],r),Jt=A(et.button,et.buttonStyle[Ze],et.buttonLeftShape[nt]),Zt=A(et.button,et.buttonStyle[Ze],et.buttonRightShape[nt]),Mt=A(s&&et.input,et.value[Ze]);return G.createElement(xe,n3({ref:he,className:Ut},ln),G.createElement("span",{ref:de,className:Jt,role:"button",tabIndex:"0",onClick:Z},G.createElement("span",{className:et.hBar})),s&&!h&&G.createElement("input",{className:Mt,placeholder:u,type:l,value:i,defaultValue:o,disabled:c,readOnly:d,onInput:j,onChange:B,onFocus:K,onBlur:Y}),!s&&!h&&G.createElement("span",{className:Mt},i),G.createElement("span",{ref:ie,className:Zt,role:"button",tabIndex:"0",onClick:H},G.createElement("span",{className:et.hBar}),G.createElement("span",{className:et.vBar})))});YZ.displayName="Stepper";function r3(){return r3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r3.apply(this,arguments)}const iA=O.forwardRef((t,e)=>{const{labels:n,icons:r,children:a,...i}=t,o=O.useRef(null);O.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return G.createElement(LI,r3({ref:o,tabbar:!0,tabbarIcons:r,tabbarLabels:n},s),a)});iA.displayName="Tabbar";const QZ=function(t,e){let{hasIcon:n,hasLabel:r,active:a}=t===void 0?{}:t;return e===void 0&&(e={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:A("py-1",a?e.textActiveIos:e.textIos),material:A("py-2",n&&r&&"space-y-1",a?e.textActiveMaterial:e.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:A("w-7 h-7"),material:A("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:A(a?e.iconBgActiveIos:e.iconBgIos),material:A(a?e.iconBgActiveMaterial:e.iconBgMaterial,!a&&"scale-x-[0.5] opacity-0")},label:{ios:A(n?"text-xs font-medium":"",""),material:A(n?"text-xs":"text-sm","font-medium")}}},JZ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-40",e("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),...t}};function a3(){return a3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a3.apply(this,arguments)}const og=O.forwardRef((t,e)=>{const{className:n,active:r,ios:a,material:i,colors:o,linkProps:s={},icon:l,label:u,children:c,...d}=t,h=O.useRef(null);O.useImperativeHandle(e,()=>({el:h.current}));const f={...s,...d},m=Ot(),y=JZ(o,m),v=it({ios:a,material:i}),b=!!l,x=u||c&&c.length,w=v(QZ({hasLabel:x,hasIcon:b,active:r},y));return G.createElement(Ct,a3({ref:h,tabbar:!0,tabbarActive:r,className:n},f),G.createElement("span",{className:w.content},l&&G.createElement("span",{className:w.iconContainer},G.createElement("span",{className:w.iconBg}),l),(u||c&&c.length)&&G.createElement("span",{className:w.label},u,c)))});og.displayName="TabbarLink";const ZZ=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function i3(){return i3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i3.apply(this,arguments)}const eee=O.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=O.useRef(null);O.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(ZZ({...t})),u={...o};return G.createElement("table",i3({className:l.base,ref:s},u),i)});eee.displayName="Table";const tee=()=>({base:{common:"text-sm",ios:"",material:""}});function o3(){return o3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o3.apply(this,arguments)}const nee=O.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=O.useRef(null);O.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(tee({...t})),u={...o};return G.createElement("tbody",o3({className:l.base,ref:s},u),i)});nee.displayName="TableBody";const ree=(t,e,n)=>{const{header:r}=t;return{base:{common:A("align-middle",n),ios:A(r?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${e.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:A(r?`${e.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},aee=function(t,e){return t===void 0&&(t={}),{textHeaderIos:A("text-black/45",e("dark:text-white/55")),textHeaderMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function s3(){return s3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s3.apply(this,arguments)}const iee=O.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=O.useRef(null);O.useImperativeHandle(e,()=>({el:u.current}));const c=a?"th":"td",d=it({ios:i,material:o}),h=Ot(),f=aee(r,h),m=d(ree({...t},f,n)),y={...l};return G.createElement(c,s3({className:m.base,ref:u},y),s)});iee.displayName="TableCell";const oee=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function l3(){return l3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l3.apply(this,arguments)}const see=O.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=O.useRef(null);O.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(oee({...t})),u={...o};return G.createElement("thead",l3({className:l.base,ref:s},u),i)});see.displayName="TableHead";const lee=(t,e)=>{const{header:n}=t;return{base:{common:"align-middle relative",ios:n?"":A(e.bgIos,"hairline-b last:hairline-transparent"),material:n?"":A(e.bgMaterial,`border-t ${e.dividerMaterial}`)}}},uee=function(t,e){return t===void 0&&(t={}),{bgIos:A("hover:bg-black/5",e("dark:hover:bg-white/10")),bgMaterial:A("hover:bg-md-light-secondary-container",e("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function u3(){return u3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u3.apply(this,arguments)}const cee=O.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=O.useRef(null);O.useImperativeHandle(e,()=>({el:u.current}));const c=it({ios:i,material:o}),d=Ot(),h=uee(r,d),f=c(lee({...t},h)),m={...l};return G.createElement("tr",u3({className:f.base,ref:u},m),s)});cee.displayName="TableRow";const dee=(t,e,n)=>{const{translucent:r,opened:a}=t;return{base:{common:A(rr("fixed",n),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!a&&"translate-y-full opacity-0 pointer-events-none"),ios:A("sm:rounded-lg duration-300",e.textIos,e.bgIos,r&&"translucent"),material:A("sm:rounded-2xl duration-200",e.textMaterial,e.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},hee=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-black",bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function c3(){return c3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c3.apply(this,arguments)}const pee=O.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,button:o,position:s="left",opened:l,ios:u,material:c,children:d,...h}=t,f=O.useRef(null);O.useImperativeHandle(e,()=>({el:f.current}));const m=n,y={...h},v=it({ios:u,material:c}),b=Ot(),x=hee(a,b),w=v(dee({...t,translucent:i},x,r),r);return G.createElement(m,c3({ref:f,className:w.base[s]},y),G.createElement("div",{className:w.content},d,o&&G.createElement("div",{className:w.button},o)))});pee.displayName="Toast";const fee=(t,e,n,r)=>({base:{common:A(rr("relative",n),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",r("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:e.bgIos,material:A(e.bgMaterial,e.borderMaterial)},checked:{ios:`${e.checkedBgIos}`,material:A(e.checkedBgMaterial,e.checkedBorderMaterial)}},inner:{ios:A("w-full h-full bg-white rounded-full block duration-300 transform",r("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:A("translate-x-5 rtl:!-translate-x-5"),material:A("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:A(e.checkedThumbBgIos),material:A(e.checkedThumbBgMaterial)},notChecked:{ios:e.thumbBgIos,material:A("scale-[0.666]",e.thumbBgMaterial)}},input:{common:"hidden"}}),gee=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),checkedBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),checkedBorderMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),thumbBgMaterial:A("bg-md-light-outline",e("dark:bg-md-dark-outline")),checkedThumbBgMaterial:A("bg-md-light-on-primary",e("dark:bg-md-dark-on-primary")),...t}};function d3(){return d3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d3.apply(this,arguments)}const oA=O.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,touchRipple:h=!0,ios:f,material:m,children:y,...v}=t,b=O.useRef(null),x=O.useRef(null);O.useImperativeHandle(e,()=>({el:b.current}));const w=n,S={...v},C=vn({ios:f,material:m}),E=it({ios:f,material:m}),_=Ot();Bo(x,C==="material"&&h,b);const N=gee(a,_),$=o||i&&!d?"checked":"notChecked",P=E(fee(t,N,r,_),r);return G.createElement(w,d3({ref:b,className:P.base[$]},S),G.createElement("input",{type:"checkbox",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:P.input}),G.createElement("span",{className:P.inner[$]}),G.createElement("span",{ref:x,className:P.thumbWrap[$]},G.createElement("span",{className:P.thumb[$]})),y)});oA.displayName="Toggle";function mee(){const{t}=ps();return X.jsxs(X.Fragment,{children:[X.jsxs(da,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 md:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-5xl mb-8",children:t("about.title")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph3")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph4")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph5")})]}),X.jsxs(da,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h2",{className:"text-3xl",children:t("about.license")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.licenseparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.licenseparagraph2")})]}),X.jsxs(da,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h2",{className:"text-3xl",children:t("about.vision")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.visionparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.visionparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:X.jsxs(VE,{i18nKey:"about.visionparagraph3",children:[X.jsx("p",{children:t("about.visionparagraph3")}),X.jsx(Ct,{href:"mailto:info@digitalwarenkombinat.de",children:"info@digitalwarenkombinat.de"})]})}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:X.jsxs(VE,{i18nKey:"about.visionparagraph4",children:[X.jsx("p",{children:t("about.visionparagraph4")}),X.jsx(Ct,{href:"https://www.instagram.com/digitalwarenkombinat/",target:"_blank",children:"Instagram"}),X.jsx(Ct,{href:"https://www.instagram.com/digitalwarenkombinat/",target:"_blank",children:"LinkedIn"}),X.jsx(Ct,{href:"https://twitter.com/digiwako",target:"_blank",children:"X"})]})})]}),X.jsxs(da,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h2",{className:"text-3xl",children:t("about.usage")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.usageparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.usageparagraph2")}),X.jsx("h2",{className:"text-2xl",children:t("about.usagecollage")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q79712290",target:"_blank",children:t("about.usagecollage1")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q56763836",target:"_blank",children:t("about.usagecollage2")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q4289290",target:"_blank",children:t("about.usagecollage3")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q20496956",target:"_blank",children:t("about.usagecollage4")}),X.jsx(Ct,{href:"https://www.europeana.eu/item/401/item_4FRF3Y3P73JWEB3C3EQ3MVSGQNJEABL4",target:"_blank",children:t("about.usagecollage5")}),X.jsx(Ct,{href:"https://www.europeana.eu/item/2048429/item_QUMU4MBTZZCJBHK6YXBACA3PKV43JFX5",target:"_blank",children:t("about.usagecollage6")}),X.jsx(Ct,{href:"https://www.europeana.eu/item/90402/RP_F_F15156",target:"_blank",children:t("about.usagecollage7")}),X.jsx(Ct,{href:"https://www.europeana.eu/item/91625/nomu_photo_NMA0031751",target:"_blank",children:t("about.usagecollage8")}),X.jsx(Ct,{href:"https://polona.pl/item-view/5c91b4ce-75e9-41f1-a8cd-5eb409abd482?page=0",target:"_blank",children:t("about.usagecollage9")}),X.jsx(Ct,{href:"https://polona.pl/item-view/1ae2a6d2-946a-444b-a01b-cb579f2847c6?page=0",target:"_blank",children:t("about.usagecollage10")}),X.jsx(Ct,{href:"https://polona.pl/item-view/d26338c2-3997-49ab-988d-e5b754925a50?page=0",target:"_blank",children:t("about.usagecollage11")}),X.jsx(Ct,{href:"https://polona.pl/item-view/3b8154bd-ff84-4b2a-8752-8ca14a8e50a2?page=0",target:"_blank",children:t("about.usagecollage12")}),X.jsx("h2",{className:"text-2xl",children:t("about.usagesticker")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q20537703",target:"_blank",children:t("about.usagesticker1")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q3698180",target:"_blank",children:t("about.usagesticker2")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q103297971",target:"_blank",children:t("about.usagesticker3")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q18359104",target:"_blank",children:t("about.usagesticker4")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q15008032",target:"_blank",children:t("about.usagesticker5")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q56763848",target:"_blank",children:t("about.usagesticker6")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q103304534",target:"_blank",children:t("about.usagesticker7")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q21781576",target:"_blank",children:t("about.usagesticker8")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q4193020",target:"_blank",children:t("about.usagesticker9")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q102974237",target:"_blank",children:t("about.usagesticker10")}),X.jsx("h2",{className:"text-2xl",children:t("about.usageframes")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q79712290",target:"_blank",children:t("about.usageframes1")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q51185223",target:"_blank",children:t("about.usageframes2")}),X.jsx(Ct,{href:"https://www.wikidata.org/wiki/Q51184973",target:"_blank",children:t("about.usageframes3")}),X.jsx(Ct,{href:"https://www.kisscc0.com/clipart/picture-frames-line-angle-arvindeco-frame-2-sbi2yk/",target:"_blank",children:t("about.usageframes4")}),X.jsx(Ct,{href:"https://www.kisscc0.com/clipart/computer-icons-picture-frames-line-art-calligraphy-dml9j1/",target:"_blank",children:t("about.usageframes5")}),X.jsx(Ct,{href:"https://www.kisscc0.com/clipart/picture-frames-computer-icons-square-drawing-docum-em07vq/",target:"_blank",children:t("about.usageframes6")}),X.jsx("h2",{className:"text-2xl",children:t("about.usagefonts")}),X.jsx(Ct,{href:"https://www.1001fonts.com/average-sans-font.html",target:"_blank",children:t("about.usagefonts1")}),X.jsx(Ct,{href:"https://www.1001fonts.com/beautyschooldropout-font.html",target:"_blank",children:t("about.usagefonts2")}),X.jsx(Ct,{href:"https://www.1001fonts.com/neucha-font.html",target:"_blank",children:t("about.usagefonts3")})]})]})}var yee={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const sA=t=>{let e;const n=new Set,r=(s,l)=>{const u=typeof s=="function"?s(e):s;if(!Object.is(u,e)){const c=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(d=>d(e,c))}},a=()=>e,i={setState:r,getState:a,getInitialState:()=>o,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(yee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=e=t(r,a,i);return i},bee=t=>t?sA(t):sA;var lA={exports:{}},uA={},cA={exports:{}},dA={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ih=O;function vee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xee=typeof Object.is=="function"?Object.is:vee,wee=Ih.useState,kee=Ih.useEffect,See=Ih.useLayoutEffect,Cee=Ih.useDebugValue;function Eee(t,e){var n=e(),r=wee({inst:{value:n,getSnapshot:e}}),a=r[0].inst,i=r[1];return See(function(){a.value=n,a.getSnapshot=e,h3(a)&&i({inst:a})},[t,n,e]),kee(function(){return h3(a)&&i({inst:a}),t(function(){h3(a)&&i({inst:a})})},[t]),Cee(n),n}function h3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xee(t,n)}catch{return!0}}function Iee(t,e){return e()}var Tee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Iee:Eee;dA.useSyncExternalStore=Ih.useSyncExternalStore!==void 0?Ih.useSyncExternalStore:Tee,cA.exports=dA;var Nee=cA.exports;/**
* @license React
* use-sync-external-store-shim/with-selector.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var cb=O,_ee=Nee;function Oee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ree=typeof Object.is=="function"?Object.is:Oee,$ee=_ee.useSyncExternalStore,Mee=cb.useRef,Pee=cb.useEffect,Aee=cb.useMemo,Lee=cb.useDebugValue;uA.useSyncExternalStoreWithSelector=function(t,e,n,r,a){var i=Mee(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Aee(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),a!==void 0&&o.hasValue){var m=o.value;if(a(m,f))return d=m}return d=f}if(m=d,Ree(c,f))return m;var y=r(f);return a!==void 0&&a(m,y)?m:(c=f,d=y)}var u=!1,c,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,a]);var s=$ee(t,i[0],i[1]);return Pee(function(){o.hasValue=!0,o.value=s},[s]),Lee(s),s},lA.exports=uA;var Dee=lA.exports;const Fee=Ii(Dee);var hA={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Bee}=G,{useSyncExternalStoreWithSelector:zee}=Fee;let pA=!1;const jee=t=>t;function Vee(t,e=jee,n){(hA?"production":void 0)!=="production"&&n&&!pA&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),pA=!0);const r=zee(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Bee(r),r}const fA=t=>{(hA?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?bee(t):t,n=(r,a)=>Vee(e,r,a);return Object.assign(n,e),n},Uee=t=>t?fA(t):fA;var db={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const p3=new Map,hb=t=>{const e=p3.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},Wee=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=p3.get(n.name);if(r)return{type:"tracked",store:t,...r};const a={connection:e.connect(n),stores:{}};return p3.set(n.name,a),{type:"tracked",store:t,...a}},Gee=(t,e={})=>(n,r,a)=>{const{enabled:i,anonymousActionType:o,store:s,...l}=e;let u;try{u=(i??(db?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(db?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,a);const{connection:c,...d}=Wee(s,u,l);let h=!0;a.setState=(y,v,b)=>{const x=n(y,v);if(!h)return x;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return s===void 0?(c?.send(w,r()),x):(c?.send({...w,type:`${s}/${w.type}`},{...hb(l.name),[s]:a.getState()}),x)};const f=(...y)=>{const v=h;h=!1,n(...y),h=v},m=t(a.setState,r,a);if(d.type==="untracked"?c?.init(m):(d.stores[d.store]=a,c?.init(Object.fromEntries(Object.entries(d.stores).map(([y,v])=>[y,y===d.store?m:v.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let y=!1;const v=a.dispatch;a.dispatch=(...b)=>{(db?"production":void 0)!=="production"&&b[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),v(...b)}}return c.subscribe(y=>{var v;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return f3(y.payload,b=>{if(b.type==="__setState"){if(s===void 0){f(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=b.state[s];if(x==null)return;JSON.stringify(a.getState())!==JSON.stringify(x)&&f(x);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(b)});case"DISPATCH":switch(y.payload.type){case"RESET":return f(m),s===void 0?c?.init(a.getState()):c?.init(hb(l.name));case"COMMIT":if(s===void 0){c?.init(a.getState());return}return c?.init(hb(l.name));case"ROLLBACK":return f3(y.state,b=>{if(s===void 0){f(b),c?.init(a.getState());return}f(b[s]),c?.init(hb(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return f3(y.state,b=>{if(s===void 0){f(b);return}JSON.stringify(a.getState())!==JSON.stringify(b[s])&&f(b[s])});case"IMPORT_STATE":{const{nextLiftedState:b}=y.payload,x=(v=b.computedStates.slice(-1)[0])==null?void 0:v.state;if(!x)return;f(s===void 0?x:x[s]),c?.send(null,b);return}case"PAUSE_RECORDING":return h=!h}return}}),m},Hee=Gee,f3=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function qee(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const i=s=>s===null?null:JSON.parse(s,e?.reviver),o=(a=n.getItem(r))!=null?a:null;return o instanceof Promise?o.then(i):i(o)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,e?.replacer)),removeItem:r=>n.removeItem(r)}}const sg=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return sg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return sg(r)(n)}}}},Kee=(t,e)=>(n,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...e},o=!1;const s=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,a);const c=sg(i.serialize),d=()=>{const v=i.partialize({...r()});let b;const x=c({state:v,version:i.version}).then(w=>u.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return x},h=a.setState;a.setState=(v,b)=>{h(v,b),d()};const f=t((...v)=>{n(...v),d()},r,a);let m;const y=()=>{var v;if(!u)return;o=!1,s.forEach(x=>x(r()));const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return sg(u.getItem.bind(u))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return m=i.merge(x,(w=r())!=null?w:f),n(m,!0),d()}).then(()=>{b?.(m,void 0),o=!0,l.forEach(x=>x(m))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},y(),m||f},Xee=(t,e)=>(n,r,a)=>{let i={storage:qee(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...e},o=!1;const s=new Set,l=new Set;let u=i.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const c=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},d=a.setState;a.setState=(y,v)=>{d(y,v),c()};const h=t((...y)=>{n(...y),c()},r,a);a.getInitialState=()=>h;let f;const m=()=>{var y,v;if(!u)return;o=!1,s.forEach(x=>{var w;return x((w=r())!=null?w:h)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=r())!=null?y:h))||void 0;return sg(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return f=i.merge(x,(w=r())!=null?w:h),n(f,!0),c()}).then(()=>{b?.(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||m(),f||h},Yee=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((db?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Kee(t,e)):Xee(t,e),Qee=Yee,gA=[{id:1,image:"./frame/frame_1.png",front:"./frame/frame_1_front.png"},{id:2,image:"./frame/frame_2.png",front:"./frame/frame_2_front.png"},{id:3,image:"./frame/frame_3.png",front:"./frame/frame_3_front.png"},{id:4,image:"./frame/frame_4.png",front:"./frame/frame_4_front.png"},{id:5,image:"./frame/frame_5.png",front:"./frame/frame_5_front.png"}],Jee=[{id:"Betende_Frau_Maria",image:"./sticker/Betende_Frau_Maria.png"},{id:"Blumentopf",image:"./sticker/Blumentopf.png"},{id:"Blume",image:"./sticker/Blume.png"},{id:"Frau_in_gelbem_Kleid",image:"./sticker/Frau_in_gelbem_Kleid.png"},{id:"Magd",image:"./sticker/Magd.png"},{id:"Mann_liegend",image:"./sticker/Mann_liegend.png"},{id:"Mann",image:"./sticker/Mann.png"},{id:"Mucha_Dekor",image:"./sticker/Mucha_Dekor.png"},{id:"The_Hare",image:"./sticker/The_Hare.png"},{id:"Wasserspeier",image:"./sticker/Wasserspeier.png"}],Zee=[{id:"http://www.wikidata.org/entity/Q20355536",name:"A Street in Torello, Italy",year:"1890",country:"Denmark",location:"Statens Museum for Kunst",creator:"Peder Severin Kr\xF8yer",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS1435",identifier:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q20537703",name:"At the French Windows. The Artist's Wife",year:"1897",country:"Denmark",location:"Statens Museum for Kunst",creator:"Laurits Andersen Ring",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS3716",identifier:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297795",name:"Brot! (Bread!)",year:"1924",country:"Germany",location:"Vanderbilt University Fine Arts Gallery",creator:"K\xE4the Kollwitz",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1977/1977.011.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297971",name:"Business-Man, ffrom Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Belgium",location:"Vanderbilt University Fine Arts Gallery",creator:"Frans Masereel",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.032.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103300860",name:"Half-Figure Prophet",year:"1450",country:"France",location:"Vanderbilt University Fine Arts Gallery",creator:"http://www.wikidata.org/.well-known/genid/d7c4865c9fae865605be887d7277ab75",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1975/1975.005.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102967848",name:"Landscape with Shepherds",year:"",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Jan Both",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0195P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q106582838",name:"The Blacksmith Worker",year:"",country:"Switzerland",location:"Vanderbilt University Fine Arts Gallery",creator:"Antonello da Messina",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.036.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q104032628",name:"The Empty Jug",year:"1653",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Adriaen van Ostade",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0845P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102975484",name:"Trostung (Consolation), from Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Austria",location:"Vanderbilt University Fine Arts Gallery",creator:"Georg Ehrlich",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.031.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/100,100/0/default.jpg"}],mA={artworkList:Jee,frame:gA[1],imageList:Zee.sort(()=>Math.random()-.5),canvasList:[],imageLikeList:[]},_c=Uee()(Hee(Qee(t=>({...mA,addToArtwork:(e,n)=>t(r=>({artworkList:[{id:e,image:n},...r.artworkList]})),addToCanvas:(e,n,r)=>t(a=>({canvasList:[...a.canvasList,{brightness:0,contrast:0,height:400,id:`${a.canvasList.length+1}`,image:e,isDragging:!1,opacity:1,width:400,x:n,y:r}]})),addToImageList:e=>t(n=>({imageList:[...n.imageList,...e]})),removeFromImageList:e=>t(n=>({imageList:n.imageList.filter(r=>r.id!==e)})),likeImage:e=>t(n=>({imageLikeList:[...n.imageLikeList,e]})),resetState:()=>t(mA),removeFromCanvas:e=>t(n=>({canvasList:n.canvasList.filter(r=>r.id!==e)})),setFrame:e=>t(()=>({frame:gA.find(n=>n.id===e)})),transformCanvasImage:e=>t(n=>({canvasList:n.canvasList.map(r=>r.id!==e.id?r:{...r,height:e.height,width:e.width,x:e.x,y:e.y,brightness:e.brightness,contrast:e.contrast,opacity:e.opacity})})),moveCanvasImage:(e,n)=>t(r=>{const a=r.canvasList.findIndex(i=>i.id===e);if(a!==-1){const i=n?a+1:a-1;if(i>=0&&i<r.canvasList.length){const o=[...r.canvasList],[s]=o.splice(a,1);return o.splice(i,0,s),{canvasList:o}}}return{}})}),{name:"glamStore",version:1})));function ete({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const tte=O.forwardRef(ete),nte=tte;function rte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"}))}const ate=O.forwardRef(rte),ite=ate;function ote({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"}))}const ste=O.forwardRef(ote),lte=ste;function ute({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const cte=O.forwardRef(ute),dte=cte;function hte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const pte=O.forwardRef(hte),fte=pte;function gte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const mte=O.forwardRef(gte),yte=mte;function bte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const vte=O.forwardRef(bte),xte=vte;function wte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const kte=O.forwardRef(wte),Ste=kte;function Cte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const Ete=O.forwardRef(Cte),Ite=Ete;function Tte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Nte=O.forwardRef(Tte),_te=Nte;function Ote({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Rte=O.forwardRef(Ote),$te=Rte;function Mte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const Pte=O.forwardRef(Mte),Ate=Pte;function Lte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 8.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v8.25A2.25 2.25 0 0 0 6 16.5h2.25m8.25-8.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-7.5A2.25 2.25 0 0 1 8.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 0 0-2.25 2.25v6"}))}const Dte=O.forwardRef(Lte),Fte=Dte;function Bte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const zte=O.forwardRef(Bte),jte=zte;function Vte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ute=O.forwardRef(Vte),Wte=Ute;function Gte({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Hte=O.forwardRef(Gte),qte=Hte;function yA(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Kte=["color"],Xte=O.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=yA(t,Kte);return O.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),O.createElement("path",{d:"M3 9C3 6.5 4.5 4.25 7.5 1.5C10.5 4.25 12 6.5 12 9C12 11.4853 9.98528 13.5 7.5 13.5C5.01472 13.5 3 11.4853 3 9ZM10.9524 8.30307C9.67347 7.82121 8.2879 8.46208 6.98956 9.06259C5.9327 9.55142 4.93365 10.0135 4.09695 9.82153C4.03357 9.55804 4 9.28294 4 9C4 7.11203 5.02686 5.27195 7.5 2.87357C9.66837 4.97639 10.725 6.65004 10.9524 8.30307Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Yte=["color"],Qte=O.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=yA(t,Yte);return O.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),O.createElement("path",{d:"M7.85367 1.48956C7.65841 1.29429 7.34182 1.29429 7.14656 1.48956L1.48971 7.14641C1.29445 7.34167 1.29445 7.65825 1.48971 7.85352L7.14656 13.5104C7.34182 13.7056 7.65841 13.7056 7.85367 13.5104L13.5105 7.85352C13.7058 7.65825 13.7058 7.34167 13.5105 7.14641L7.85367 1.48956ZM7.5 2.55033L2.55037 7.49996L7.5 12.4496V2.55033Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bA={exports:{}};(function(t,e){(function(n,r){r()})(qa,function(){function n(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,d){var h=new XMLHttpRequest;h.open("GET",u),h.responseType="blob",h.onload=function(){l(h.response,c,d)},h.onerror=function(){console.error("could not download file")},h.send()}function a(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof qa=="object"&&qa.global===qa?qa:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,d){var h=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?i(f):a(f.href)?r(u,c,d):i(f,f.target="_blank")):(f.href=h.createObjectURL(u),setTimeout(function(){h.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,d){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,d),c);else if(a(u))r(u,c,d);else{var h=document.createElement("a");h.href=u,h.target="_blank",setTimeout(function(){i(h)})}}:function(u,c,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,d);var f=u.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&m||s)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var w=v.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=w:location=w,h=null},v.readAsDataURL(u)}else{var b=o.URL||o.webkitURL,x=b.createObjectURL(u);h?h.location=x:location.href=x,h=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(bA);var Jte=bA.exports,g3={exports:{}},pb={},fb={},Ft={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof qa<"u"?qa:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.3",isBrowser:n(),isUnminified:/param/.test(function(a){}.toString()),dblClickWindow:400,getAngle(a){return t.Konva.angleDeg?a*e:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(a){t.glob.Konva=a}};const r=a=>{t.Konva[a.prototype.getClassName()]=a};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Ft);var ar={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Ft;class n{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){var C=this.m;return{x:C[0]*S.x+C[2]*S.y+C[4],y:C[1]*S.x+C[3]*S.y+C[5]}}translate(S,C){return this.m[4]+=this.m[0]*S+this.m[2]*C,this.m[5]+=this.m[1]*S+this.m[3]*C,this}scale(S,C){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=C,this.m[3]*=C,this}rotate(S){var C=Math.cos(S),E=Math.sin(S),_=this.m[0]*C+this.m[2]*E,N=this.m[1]*C+this.m[3]*E,$=this.m[0]*-E+this.m[2]*C,P=this.m[1]*-E+this.m[3]*C;return this.m[0]=_,this.m[1]=N,this.m[2]=$,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,C){var E=this.m[0]+this.m[2]*C,_=this.m[1]+this.m[3]*C,N=this.m[2]+this.m[0]*S,$=this.m[3]+this.m[1]*S;return this.m[0]=E,this.m[1]=_,this.m[2]=N,this.m[3]=$,this}multiply(S){var C=this.m[0]*S.m[0]+this.m[2]*S.m[1],E=this.m[1]*S.m[0]+this.m[3]*S.m[1],_=this.m[0]*S.m[2]+this.m[2]*S.m[3],N=this.m[1]*S.m[2]+this.m[3]*S.m[3],$=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],P=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=C,this.m[1]=E,this.m[2]=_,this.m[3]=N,this.m[4]=$,this.m[5]=P,this}invert(){var S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*S,E=-this.m[1]*S,_=-this.m[2]*S,N=this.m[0]*S,$=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=E,this.m[2]=_,this.m[3]=N,this.m[4]=$,this.m[5]=P,this}getMatrix(){return this.m}decompose(){var S=this.m[0],C=this.m[1],E=this.m[2],_=this.m[3],N=this.m[4],$=this.m[5],P=S*_-C*E;let D={x:N,y:$,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||C!=0){var j=Math.sqrt(S*S+C*C);D.rotation=C>0?Math.acos(S/j):-Math.acos(S/j),D.scaleX=j,D.scaleY=P/j,D.skewX=(S*E+C*_)/P,D.skewY=0}else if(E!=0||_!=0){var B=Math.sqrt(E*E+_*_);D.rotation=Math.PI/2-(_>0?Math.acos(-E/B):-Math.acos(E/B)),D.scaleX=P/B,D.scaleY=B,D.skewX=0,D.skewY=(S*E+C*_)/P}return D.rotation=t.Util._getRotation(D.rotation),D}}t.Transform=n;var r="[object Array]",a="[object Number]",i="[object String]",o="[object Boolean]",s=Math.PI/180,l=180/Math.PI,u="#",c="",d="0",h="Konva warning: ",f="Konva error: ",m="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,b=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};t.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===r},_isNumber(w){return Object.prototype.toString.call(w)===a&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===i},_isBoolean(w){return Object.prototype.toString.call(w)===o},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;var S=w[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){b.push(w),b.length===1&&x(function(){const S=b;b=[],S.forEach(function(C){C()})})},createCanvasElement(){var w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,S){var C=t.Util.createImageElement();C.onload=function(){S(C)},C.src=w},_rgbToHex(w,S,C){return((1<<24)+(w<<16)+(S<<8)+C).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,c);var S=parseInt(w,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){for(var w=(Math.random()*16777215<<0).toString(16);w.length<6;)w=d+w;return u+w},getRGB(w){var S;return w in y?(S=y[w],{r:S[0],g:S[1],b:S[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===m?(S=v.exec(w.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",t.Util._namedColorToRBA(w)||t.Util._hex3ColorToRGBA(w)||t.Util._hex4ColorToRGBA(w)||t.Util._hex6ColorToRGBA(w)||t.Util._hex8ColorToRGBA(w)||t.Util._rgbColorToRGBA(w)||t.Util._rgbaColorToRGBA(w)||t.Util._hslColorToRGBA(w)},_namedColorToRBA(w){var S=y[w.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];var S=w.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];var S=w.split(/ *, */).map((C,E)=>C.slice(-1)==="%"?E===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[S,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),E=Number(C[0])/360,_=Number(C[1])/100,N=Number(C[2])/100;let $,P,D;if(_===0)return D=N*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};N<.5?$=N*(1+_):$=N+_-N*_;const j=2*N-$,B=[0,0,0];for(let K=0;K<3;K++)P=E+1/3*-(K-1),P<0&&P++,P>1&&P--,6*P<1?D=j+($-j)*6*P:2*P<1?D=$:3*P<2?D=j+($-j)*(2/3-P)*6:D=j,B[K]=D*255;return{r:Math.round(B[0]),g:Math.round(B[1]),b:Math.round(B[2]),a:1}}},haveIntersection(w,S){return!(S.x>w.x+w.width||S.x+S.width<w.x||S.y>w.y+w.height||S.y+S.height<w.y)},cloneObject(w){var S={};for(var C in w)this._isPlainObject(w[C])?S[C]=this.cloneObject(w[C]):this._isArray(w[C])?S[C]=this.cloneArray(w[C]):S[C]=w[C];return S},cloneArray(w){return w.slice(0)},degToRad(w){return w*s},radToDeg(w){return w*l},_degToRad(w){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(w)},_radToDeg(w){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(w)},_getRotation(w){return e.Konva.angleDeg?t.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(f+w)},error(w){console.error(f+w)},warn(w){e.Konva.showWarnings&&console.warn(h+w)},each(w,S){for(var C in w)S(C,w[C])},_inRange(w,S,C){return S<=w&&w<C},_getProjectionToSegment(w,S,C,E,_,N){var $,P,D,j=(w-C)*(w-C)+(S-E)*(S-E);if(j==0)$=w,P=S,D=(_-C)*(_-C)+(N-E)*(N-E);else{var B=((_-w)*(C-w)+(N-S)*(E-S))/j;B<0?($=w,P=S,D=(w-_)*(w-_)+(S-N)*(S-N)):B>1?($=C,P=E,D=(C-_)*(C-_)+(E-N)*(E-N)):($=w+B*(C-w),P=S+B*(E-S),D=($-_)*($-_)+(P-N)*(P-N))}return[$,P,D]},_getProjectionToLine(w,S,C){var E=t.Util.cloneObject(w),_=Number.MAX_VALUE;return S.forEach(function(N,$){if(!(!C&&$===S.length-1)){var P=S[($+1)%S.length],D=t.Util._getProjectionToSegment(N.x,N.y,P.x,P.y,w.x,w.y),j=D[0],B=D[1],K=D[2];K<_&&(E.x=j,E.y=B,_=K)}}),E},_prepareArrayForTween(w,S,C){var E,_=[],N=[];if(w.length>S.length){var $=S;S=w,w=$}for(E=0;E<w.length;E+=2)_.push({x:w[E],y:w[E+1]});for(E=0;E<S.length;E+=2)N.push({x:S[E],y:S[E+1]});var P=[];return N.forEach(function(D){var j=t.Util._getProjectionToLine(D,_,C);P.push(j.x),P.push(j.y)}),P},_prepareToStringify(w){var S;w.visitedByCircularReferenceRemoval=!0;for(var C in w)if(w.hasOwnProperty(C)&&w[C]&&typeof w[C]=="object"){if(S=Object.getOwnPropertyDescriptor(w,C),w[C].visitedByCircularReferenceRemoval||t.Util._isElement(w[C]))if(S.configurable)delete w[C];else return null;else if(t.Util._prepareToStringify(w[C])===null)if(S.configurable)delete w[C];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,S){for(var C in S)w[C]=S[C];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){e.Konva.releaseCanvasOnDestroy&&w.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(w,S,C,E){let _=0,N=0,$=0,P=0;typeof E=="number"?_=N=$=P=Math.min(E,S/2,C/2):(_=Math.min(E[0]||0,S/2,C/2),N=Math.min(E[1]||0,S/2,C/2),P=Math.min(E[2]||0,S/2,C/2),$=Math.min(E[3]||0,S/2,C/2)),w.moveTo(_,0),w.lineTo(S-N,0),w.arc(S-N,N,N,Math.PI*3/2,0,!1),w.lineTo(S,C-P),w.arc(S-P,C-P,P,0,Math.PI/2,!1),w.lineTo($,C),w.arc($,C-$,$,Math.PI/2,Math.PI,!1),w.lineTo(0,_),w.arc(_,_,_,Math.PI,Math.PI*3/2,!1)}}})(ar);var qn={},Bt={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.getComponentValidator=Qe.getBooleanValidator=Qe.getNumberArrayValidator=Qe.getFunctionValidator=Qe.getStringOrGradientValidator=Qe.getStringValidator=Qe.getNumberOrAutoValidator=Qe.getNumberOrArrayOfNumbersValidator=Qe.getNumberValidator=Qe.alphaComponent=Qe.RGBComponent=void 0;const nl=Ft,dr=ar;function rl(t){return dr.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||dr.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function Zte(t){return t>255?255:t<0?0:Math.round(t)}Qe.RGBComponent=Zte;function ene(t){return t>1?1:t<1e-4?1e-4:t}Qe.alphaComponent=ene;function tne(){if(nl.Konva.isUnminified)return function(t,e){return dr.Util._isNumber(t)||dr.Util.warn(rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}Qe.getNumberValidator=tne;function nne(t){if(nl.Konva.isUnminified)return function(e,n){let r=dr.Util._isNumber(e),a=dr.Util._isArray(e)&&e.length==t;return!r&&!a&&dr.Util.warn(rl(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}Qe.getNumberOrArrayOfNumbersValidator=nne;function rne(){if(nl.Konva.isUnminified)return function(t,e){var n=dr.Util._isNumber(t),r=t==="auto";return n||r||dr.Util.warn(rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}Qe.getNumberOrAutoValidator=rne;function ane(){if(nl.Konva.isUnminified)return function(t,e){return dr.Util._isString(t)||dr.Util.warn(rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}Qe.getStringValidator=ane;function ine(){if(nl.Konva.isUnminified)return function(t,e){const n=dr.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||dr.Util.warn(rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}Qe.getStringOrGradientValidator=ine;function one(){if(nl.Konva.isUnminified)return function(t,e){return dr.Util._isFunction(t)||dr.Util.warn(rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}Qe.getFunctionValidator=one;function sne(){if(nl.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(dr.Util._isArray(t)?t.forEach(function(r){dr.Util._isNumber(r)||dr.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):dr.Util.warn(rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}Qe.getNumberArrayValidator=sne;function lne(){if(nl.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||dr.Util.warn(rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}Qe.getBooleanValidator=lne;function une(t){if(nl.Konva.isUnminified)return function(e,n){return e==null||dr.Util.isObject(e)||dr.Util.warn(rl(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}Qe.getComponentValidator=une,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=ar,n=Qe;var r="get",a="set";t.Factory={addGetterSetter(i,o,s,l,u){t.Factory.addGetter(i,o,s),t.Factory.addSetter(i,o,l,u),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,s){var l=r+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||t.Factory.overWriteSetter(i,o,s,l)},overWriteSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(i,o,s,l,u){var c=s.length,d=e.Util._capitalize,h=r+d(o),f=a+d(o),m,y;i.prototype[h]=function(){var b={};for(m=0;m<c;m++)y=s[m],b[y]=this.getAttr(o+d(y));return b};var v=(0,n.getComponentValidator)(s);i.prototype[f]=function(b){var x=this.attrs[o],w;l&&(b=l.call(this,b)),v&&v.call(this,b,o);for(w in b)b.hasOwnProperty(w)&&this._setAttr(o+d(w),b[w]);return b||s.forEach(S=>{this._setAttr(o+d(S),void 0)}),this._fireChangeEvent(o,x,b),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){var s=e.Util._capitalize(o),l=a+s,u=r+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=r+e.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(c);var d=this.attrs[o];return d===void 0?s:d},t.Factory.addSetter(i,o,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],c=r+e.Util._capitalize(s),d=a+e.Util._capitalize(s);function h(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=h,i.prototype[c]=h,i.prototype[d]=h})},afterSetFilter(){this._filterUpToDate=!1}}}(Bt);var zo={},al={};Object.defineProperty(al,"__esModule",{value:!0}),al.HitContext=al.SceneContext=al.Context=void 0;const vA=ar,cne=Ft;function dne(t){var e=[],n=t.length,r=vA.Util,a,i;for(a=0;a<n;a++)i=t[a],r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i);return e}var xA=",",hne="(",pne=")",fne="([",gne="])",mne=";",yne="()",bne="=",wA=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],vne=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const xne=100;class gb{constructor(e){this.canvas=e,cne.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,a=r.length,i="",o,s,l,u;for(o=0;o<a;o++)s=r[o],l=s.method,l?(u=s.args,i+=l,e?i+=yne:vA.Util._isArray(u[0])?i+=fne+u.join(xA)+gne:(n&&(u=u.map(c=>typeof c=="number"?Math.floor(c):c)),i+=hne+u.join(xA)+pne)):(i+=s.property,e||(i+=bne+s.val)),i+=mne;return i}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=xne&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,a,i,o){this._context.arc(e,n,r,a,i,o)}arcTo(e,n,r,a,i){this._context.arcTo(e,n,r,a,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,a,i,o){this._context.bezierCurveTo(e,n,r,a,i,o)}clearRect(e,n,r,a){this._context.clearRect(e,n,r,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,a){return this._context.createLinearGradient(e,n,r,a)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,a,i,o){return this._context.createRadialGradient(e,n,r,a,i,o)}drawImage(e,n,r,a,i,o,s,l,u){var c=arguments,d=this._context;c.length===3?d.drawImage(e,n,r):c.length===5?d.drawImage(e,n,r,a,i):c.length===9&&d.drawImage(e,n,r,a,i,o,s,l,u)}ellipse(e,n,r,a,i,o,s,l){this._context.ellipse(e,n,r,a,i,o,s,l)}isPointInPath(e,n,r,a){return r?this._context.isPointInPath(r,e,n,a):this._context.isPointInPath(e,n,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,a){this._context.fillRect(e,n,r,a)}strokeRect(e,n,r,a){this._context.strokeRect(e,n,r,a)}fillText(e,n,r,a){a?this._context.fillText(e,n,r,a):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,a){return this._context.getImageData(e,n,r,a)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,a){this._context.rect(e,n,r,a)}roundRect(e,n,r,a,i){this._context.roundRect(e,n,r,a,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,a){this._context.quadraticCurveTo(e,n,r,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,a,i,o){this._context.setTransform(e,n,r,a,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,a){this._context.strokeText(e,n,r,a)}transform(e,n,r,a,i,o){this._context.transform(e,n,r,a,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=wA.length,r=this.setAttr,a,i,o=function(s){var l=e[s],u;e[s]=function(){return i=dne(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:s,args:i}),u}};for(a=0;a<n;a++)o(wA[a]);e.setAttr=function(){r.apply(e,arguments);var s=arguments[0],l=arguments[1];(s==="shadowOffsetX"||s==="shadowOffsetY"||s==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:s,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}al.Context=gb,vne.forEach(function(t){Object.defineProperty(gb.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class wne extends gb{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const a=e.getFillPatternImage();if(a&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):a?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(a){for(var o=0;o<a.length;o+=2)i.addColorStop(a[o],a[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var i=e.getStrokeLinearGradientColorStops();i?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,a,i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,s=(a=e.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),c=l.x*u,d=l.y*u;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*d)}}al.SceneContext=wne;class kne extends gb{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),a=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}al.HitContext=kne,Object.defineProperty(zo,"__esModule",{value:!0}),zo.HitCanvas=zo.SceneCanvas=zo.Canvas=void 0;const mb=ar,kA=al,SA=Ft,Sne=Bt,Cne=Qe;var yb;function Ene(){if(yb)return yb;var t=mb.Util.createCanvasElement(),e=t.getContext("2d");return yb=function(){var n=SA.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),mb.Util.releaseCanvas(t),yb}class bb{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||SA.Konva.pixelRatio||Ene();this.pixelRatio=r,this._canvas=mb.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return mb.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}zo.Canvas=bb,Sne.Factory.addGetterSetter(bb,"pixelRatio",void 0,(0,Cne.getNumberValidator)());class Ine extends bb{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new kA.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}zo.SceneCanvas=Ine;class Tne extends bb{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new kA.HitContext(this),this.setSize(e.width,e.height)}}zo.HitCanvas=Tne;var vb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Ft,n=ar;t.DD={get isDragging(){var r=!1;return t.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return t.DD._dragElements.forEach(a=>{r=a.node}),r},_dragElements:new Map,_drag(r){const a=[];t.DD._dragElements.forEach((i,o)=>{const{node:s}=i,l=s.getStage();l.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(h=>h.id===i.pointerId);if(u){if(i.dragStatus!=="dragging"){var c=s.dragDistance(),d=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(d<c||(s.startDrag({evt:r}),!s.isDragging()))return}s._setDragPosition(r,i),a.push(s)}}),a.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const a=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,s=o.getStage();if(r&&s.setPointersPositions(r),!s._changedPointerPositions.find(u=>u.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const l=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;l&&a.indexOf(l)===-1&&a.push(l)}),a.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((a,i)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:r},!0),a.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))})(vb),Object.defineProperty(qn,"__esModule",{value:!0}),qn.Node=void 0;const qt=ar,lg=Bt,ug=zo,Oc=Ft,so=vb,xr=Qe;var xb="absoluteOpacity",wb="allEventListeners",il="absoluteTransform",CA="absoluteScale",Rc="canvas",Nne="Change",_ne="children",One="konva",m3="listening",EA="mouseenter",IA="mouseleave",TA="set",NA="Shape",kb=" ",_A="stage",pu="transform",Rne="Stage",y3="visible",$ne=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(kb);let Mne=1;class yt{constructor(e){this._id=Mne++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===pu||e===il)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),a=e===pu||e===il,i=r===void 0||a&&r.dirty===!0;return i&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const a=n.map(i=>i+"Change.konva").join(kb);this.on(a,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Rc)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===il&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Rc)){const{scene:e,filter:n,hit:r}=this._cache.get(Rc);qt.Util.releaseCanvas(e,n,r),this._cache.delete(Rc)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,s=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,c=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!a||!i){qt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const h=Math.abs(Math.round(r.x)-s)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;a+=u*2+h,i+=u*2+f,s-=u,l-=u;var m=new ug.SceneCanvas({pixelRatio:o,width:a,height:i}),y=new ug.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new ug.HitCanvas({pixelRatio:d,width:a,height:i}),b=m.getContext(),x=v.getContext();return v.isCache=!0,m.isCache=!0,this._cache.delete(Rc),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(m.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),b.save(),x.save(),b.translate(-s,-l),x.translate(-s,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(xb),this._clearSelfAndDescendantCache(CA),this.drawScene(m,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),x.restore(),c&&(b.save(),b.beginPath(),b.rect(0,0,a,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(Rc,{scene:m,filter:y,hit:v,x:s,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Rc)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=1/0,i=1/0,o=-1/0,s=-1/0,l=this.getAbsoluteTransform(n);return r.forEach(function(u){var c=l.point(u);a===void 0&&(a=o=c.x,i=s=c.y),a=Math.min(a,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}),{x:a,y:i,width:o-a,height:s-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),a=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/a,r.height/a),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,a=n.filter,i=a.getContext(),o,s,l,u;if(e){if(!this._filterUpToDate){var c=r.pixelRatio;a.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),s=i.getImageData(0,0,a.getWidth(),a.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){qt.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,s),i.putImageData(s,0,0)}}catch(d){qt.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return a}return r}on(e,n){if(this._cache&&this._cache.delete(wb),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(kb),a=r.length,i,o,s,l,u;for(i=0;i<a;i++)o=r[i],s=o.split("."),l=s[0],u=s[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){var r=(e||"").split(kb),a=r.length,i,o,s,l,u,c;if(this._cache&&this._cache.delete(wb),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<a;i++)if(s=r[i],l=s.split("."),u=l[0],c=l[1],u)this.eventListeners[u]&&this._off(u,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var a=this;this.on(e,function(i){for(var o=i.target.findAncestors(n,!0,a),s=0;s<o.length;s++)i=qt.Util.cloneObject(i),i.currentTarget=o[s],r.call(o[s],i)})}remove(){return this.isDragging()&&this.stopDrag(),so.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(il),this._clearSelfAndDescendantCache(xb),this._clearSelfAndDescendantCache(CA),this._clearSelfAndDescendantCache(_A),this._clearSelfAndDescendantCache(y3),this._clearSelfAndDescendantCache(m3)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+qt.Util._capitalize(e);return qt.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==_ne&&(r=TA+qt.Util._capitalize(n),qt.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(m3,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(y3,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),a=!1;so.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(a=!0)});var i=!n&&!Oc.Konva.hitOnDragEnabled&&a;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,a,i,o,s;function l(c){for(a=[],i=c.length,o=0;o<i;o++)s=c[o],r++,s.nodeType!==NA&&(a=a.concat(s.getChildren().slice())),s._id===n._id&&(o=i);a.length>0&&a[0].getDepth()<=e&&l(a)}const u=this.getStage();return n.nodeType!==Rne&&u&&l(u.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(pu),this._clearSelfAndDescendantCache(il)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var a=this.getAbsoluteTransform(e).getMatrix(),i=new qt.Transform,o=this.offset();return i.m=a.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...a}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(pu);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(pu),this._clearSelfAndDescendantCache(il),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,a=this.x(),i=this.y();return n!==void 0&&(a+=n),r!==void 0&&(i+=r),this.setPosition({x:a,y:i}),this}_eachAncestorReverse(e,n){var r=[],a=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);a&&(!n||a._id!==n._id);)r.unshift(a),a=a.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return qt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return qt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return qt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return qt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return qt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&qt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(xb,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,r,a,i,o;const s={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=qt.Util.isObject(r)&&!qt.Util._isPlainObject(r)&&!qt.Util._isArray(r),!o&&(a=typeof this[n]=="function"&&this[n],delete e[n],i=a?a.call(this):null,e[n]=r,i!==r&&(s.attrs[n]=r));return qt.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var a=[];n&&this._isMatch(e)&&a.push(this);for(var i=this.parent;i;){if(i===r)return a;i._isMatch(e)&&a.push(i),i=i.parent}return a}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,a,i;for(a=0;a<r;a++)if(i=n[a],qt.Util.isValidSelector(i)||(qt.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),qt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),qt.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(_A,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(il,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new qt.Transform,this._eachAncestorReverse(function(a){var i=a.transformsEnabled();i==="all"?n.multiply(a.getTransform()):i==="position"&&n.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},e),n;n=this._cache.get(il)||new qt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const a=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,s=this.attrs.offsetY||0;n.translate(a-o,i-s)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(pu,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(pu)||new qt.Transform;r.reset();var a=this.x(),i=this.y(),o=Oc.Konva.getAngle(this.rotation()),s=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,h=this.attrs.offsetY||0;return(a!==0||i!==0)&&r.translate(a,i),o!==0&&r.rotate(o),(u!==0||c!==0)&&r.skew(u,c),(s!==1||l!==1)&&r.scale(s,l),(d!==0||h!==0)&&r.translate(-1*d,-1*h),r.dirty=!1,r}clone(e){var n=qt.Util.cloneObject(this.attrs),r,a,i,o,s;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(a=this.eventListeners[r],i=a.length,o=0;o<i;o++)s=a[o],s.name.indexOf(One)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(s));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),a=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,s=new ug.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=s.getContext();const u=new ug.SceneCanvas({width:s.width/s.pixelRatio+Math.abs(a),height:s.height/s.pixelRatio+Math.abs(i),pixelRatio:s.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(a||i)&&l.translate(-1*a,-1*i),this.drawScene(s,void 0,u),l.restore(),s}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(a),a}toImage(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,qt.Util._urlToImage(this.toDataURL(e),function(i){n(i),a?.(i)})}catch(a){r(a)}})}toBlob(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),a?.(i)},e?.mimeType,e?.quality)}catch(a){r(a)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Oc.Konva.dragDistance}_off(e,n,r){var a=this.eventListeners[e],i,o,s;for(i=0;i<a.length;i++)if(o=a[i].name,s=a[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===s)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+Nne,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[TA+qt.Util._capitalize(e)];return qt.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Oc.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!qt.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var a;r!==void 0&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,a,r))}_fireAndBubble(e,n,r){n&&this.nodeType===NA&&(n.target=this);var a=(e===EA||e===IA)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!a){this._fire(e,n);var i=(e===EA||e===IA)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,a;const i=(n=this._cache.get(wb))!==null&&n!==void 0?n:{};let o=i?.[e];if(o===void 0){o=[];let s=Object.getPrototypeOf(this);for(;s;){const l=(a=(r=s.eventListeners)===null||r===void 0?void 0:r[e])!==null&&a!==void 0?a:[];o.push(...l),s=Object.getPrototypeOf(s)}i[e]=o,this._cache.set(wb,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var a=0;a<r.length;a++)r[a].handler.call(this,n);const i=this.eventListeners[e];if(i)for(var a=0;a<i.length;a++)i[a].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),a=this.getAbsolutePosition();if(r){var i=r._getPointerById(n)||r._changedPointerPositions[0]||a;so.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-a.x,y:i.y-a.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){so.DD._dragElements.has(this._id)||this._createDragElement(e);const r=so.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var a={x:r.x-n.offset.x,y:r.y-n.offset.y},i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,a,e);o?a=o:qt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(e){const n=so.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),so.DD._endDragBefore(e),so.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=so.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||Oc.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var a=!1;so.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(a=!0)}),a||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=so.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",a=n&&n.dragStatus==="ready";r?this.stopDrag():a&&so.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return qt.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return qt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=yt.prototype.getClassName.call(e),a=e.children,i,o,s;n&&(e.attrs.container=n),Oc.Konva[r]||(qt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=Oc.Konva[r];if(i=new l(e.attrs),a)for(o=a.length,s=0;s<o;s++)i.add(yt._createNode(a[s]));return i}}qn.Node=yt,yt.prototype.nodeType="Node",yt.prototype._attrsAffectingSize=[],yt.prototype.eventListeners={},yt.prototype.on.call(yt.prototype,$ne,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(pu),this._clearSelfAndDescendantCache(il)}),yt.prototype.on.call(yt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(y3)}),yt.prototype.on.call(yt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(m3)}),yt.prototype.on.call(yt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(xb)});const En=lg.Factory.addGetterSetter;En(yt,"zIndex"),En(yt,"absolutePosition"),En(yt,"position"),En(yt,"x",0,(0,xr.getNumberValidator)()),En(yt,"y",0,(0,xr.getNumberValidator)()),En(yt,"globalCompositeOperation","source-over",(0,xr.getStringValidator)()),En(yt,"opacity",1,(0,xr.getNumberValidator)()),En(yt,"name","",(0,xr.getStringValidator)()),En(yt,"id","",(0,xr.getStringValidator)()),En(yt,"rotation",0,(0,xr.getNumberValidator)()),lg.Factory.addComponentsGetterSetter(yt,"scale",["x","y"]),En(yt,"scaleX",1,(0,xr.getNumberValidator)()),En(yt,"scaleY",1,(0,xr.getNumberValidator)()),lg.Factory.addComponentsGetterSetter(yt,"skew",["x","y"]),En(yt,"skewX",0,(0,xr.getNumberValidator)()),En(yt,"skewY",0,(0,xr.getNumberValidator)()),lg.Factory.addComponentsGetterSetter(yt,"offset",["x","y"]),En(yt,"offsetX",0,(0,xr.getNumberValidator)()),En(yt,"offsetY",0,(0,xr.getNumberValidator)()),En(yt,"dragDistance",null,(0,xr.getNumberValidator)()),En(yt,"width",0,(0,xr.getNumberValidator)()),En(yt,"height",0,(0,xr.getNumberValidator)()),En(yt,"listening",!0,(0,xr.getBooleanValidator)()),En(yt,"preventDefault",!0,(0,xr.getBooleanValidator)()),En(yt,"filters",null,function(t){return this._filterUpToDate=!1,t}),En(yt,"visible",!0,(0,xr.getBooleanValidator)()),En(yt,"transformsEnabled","all",(0,xr.getStringValidator)()),En(yt,"size"),En(yt,"dragBoundFunc"),En(yt,"draggable",!1,(0,xr.getBooleanValidator)()),lg.Factory.backCompat(yt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var $c={};Object.defineProperty($c,"__esModule",{value:!0}),$c.Container=void 0;const Th=Bt,b3=qn,Sb=Qe;class Mc extends b3.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(a){e(a)&&r.push(a)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(a=>{const i=a._isMatch(e);return i&&r.push(a),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const a of r)if(n=e(a),n||a.hasChildren()&&(n=a._descendants(e),n))return!0;return!1}toObject(){var e=b3.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=b3.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){var a=this.getLayer(),i=e||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),a=e||r&&r.hitCanvas,i=a&&a.getContext(),o=this._getCanvasCache(),s=o&&o.hit;if(s){i.save();var l=this.getAbsoluteTransform(n).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",a,n);return this}_drawChildren(e,n,r,a){var i,o=n&&n.getContext(),s=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),c=s&&l||u;const d=r===this;if(c){o.save();var h=this.getAbsoluteTransform(r),f=h.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let b;if(u)b=u.call(this,o,this);else{var m=this.clipX(),y=this.clipY();o.rect(m,y,s,l)}o.clip.apply(o,b),f=h.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var v=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(b){b[e](n,r,a)}),v&&o.restore(),c&&o.restore()}getClientRect(e={}){var n,r=e.skipTransform,a=e.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(y.visible()){var v=y.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});v.width===0&&v.height===0||(i===void 0?(i=v.x,o=v.y,s=v.x+v.width,l=v.y+v.height):(i=Math.min(i,v.x),o=Math.min(o,v.y),s=Math.max(s,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var d=this.find("Shape"),h=!1,f=0;f<d.length;f++){var m=d[f];if(m._isVisible(this)){h=!0;break}}return h&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,a)}}$c.Container=Mc,Th.Factory.addComponentsGetterSetter(Mc,"clip",["x","y","width","height"]),Th.Factory.addGetterSetter(Mc,"clipX",void 0,(0,Sb.getNumberValidator)()),Th.Factory.addGetterSetter(Mc,"clipY",void 0,(0,Sb.getNumberValidator)()),Th.Factory.addGetterSetter(Mc,"clipWidth",void 0,(0,Sb.getNumberValidator)()),Th.Factory.addGetterSetter(Mc,"clipHeight",void 0,(0,Sb.getNumberValidator)()),Th.Factory.addGetterSetter(Mc,"clipFunc");var OA={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.releaseCapture=Ai.setPointerCapture=Ai.hasPointerCapture=Ai.createEvent=Ai.getCapturedShape=void 0;const Pne=Ft,cg=new Map,RA=Pne.Konva._global.PointerEvent!==void 0;function Ane(t){return cg.get(t)}Ai.getCapturedShape=Ane;function v3(t){return{evt:t,pointerId:t.pointerId}}Ai.createEvent=v3;function Lne(t,e){return cg.get(t)===e}Ai.hasPointerCapture=Lne;function Dne(t,e){$A(t),e.getStage()&&(cg.set(t,e),RA&&e._fire("gotpointercapture",v3(new PointerEvent("gotpointercapture"))))}Ai.setPointerCapture=Dne;function $A(t,e){const n=cg.get(t);if(!n)return;const r=n.getStage();r&&r.content,cg.delete(t),RA&&n._fire("lostpointercapture",v3(new PointerEvent("lostpointercapture")))}Ai.releaseCapture=$A,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=ar,n=Bt,r=$c,a=Ft,i=zo,o=vb,s=Ft,l=Ai;var u="Stage",c="string",d="px",h="mouseout",f="mouseleave",m="mouseover",y="mouseenter",v="mousemove",b="mousedown",x="mouseup",w="pointermove",S="pointerdown",C="pointerup",E="pointercancel",_="lostpointercapture",N="pointerout",$="pointerleave",P="pointerover",D="pointerenter",j="contextmenu",B="touchstart",K="touchend",Y="touchmove",Z="touchcancel",H="wheel",F=5,Q=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[f,"_pointerleave"],[B,"_pointerdown"],[Y,"_pointermove"],[K,"_pointerup"],[Z,"_pointercancel"],[m,"_pointerover"],[H,"_wheel"],[j,"_contextmenu"],[S,"_pointerdown"],[w,"_pointermove"],[C,"_pointerup"],[E,"_pointercancel"],[_,"_lostpointercapture"]];const J={mouse:{[N]:h,[$]:f,[P]:m,[D]:y,[w]:v,[S]:b,[C]:x,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[N]:"touchout",[$]:"touchleave",[P]:"touchover",[D]:"touchenter",[w]:Y,[S]:B,[C]:K,[E]:Z,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[N]:N,[$]:$,[P]:P,[D]:D,[w]:w,[S]:S,[C]:C,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},re=xe=>xe.indexOf("pointer")>=0?"pointer":xe.indexOf("touch")>=0?"touch":"mouse",se=xe=>{const q=re(xe);if(q==="pointer")return a.Konva.pointerEventsEnabled&&J.pointer;if(q==="touch")return J.touch;if(q==="mouse")return J.mouse};function he(xe={}){return(xe.clipFunc||xe.clipWidth||xe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),xe}const de="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ie extends r.Container{constructor(q){super(he(q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{he(this.attrs)}),this._checkVisibility()}_validateAdd(q){const oe=q.getType()==="Layer",pe=q.getType()==="FastLayer";oe||pe||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const q=this.visible()?"":"none";this.content.style.display=q}setContainer(q){if(typeof q===c){if(q.charAt(0)==="."){var oe=q.slice(1);q=document.getElementsByClassName(oe)[0]}else{var pe;q.charAt(0)!=="#"?pe=q:pe=q.slice(1),q=document.getElementById(pe)}if(!q)throw"Can not find container in document with id "+pe}return this._setAttr("container",q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var q=this.children,oe=q.length,pe;for(pe=0;pe<oe;pe++)q[pe].clear();return this}clone(q){return q||(q={}),q.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,q)}destroy(){super.destroy();var q=this.content;q&&e.Util._isInDocument(q)&&this.container().removeChild(q);var oe=t.stages.indexOf(this);return oe>-1&&t.stages.splice(oe,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const q=this._pointerPositions[0]||this._changedPointerPositions[0];return q?{x:q.x,y:q.y}:(e.Util.warn(de),null)}_getPointerById(q){return this._pointerPositions.find(oe=>oe.id===q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(q){q=q||{},q.x=q.x||0,q.y=q.y||0,q.width=q.width||this.width(),q.height=q.height||this.height();var oe=new i.SceneCanvas({width:q.width,height:q.height,pixelRatio:q.pixelRatio||1}),pe=oe.getContext()._context,Ee=this.children;return(q.x||q.y)&&pe.translate(-1*q.x,-1*q.y),Ee.forEach(function(Ie){if(Ie.isVisible()){var _e=Ie._toKonvaCanvas(q);pe.drawImage(_e._canvas,q.x,q.y,_e.getWidth()/_e.getPixelRatio(),_e.getHeight()/_e.getPixelRatio())}}),oe}getIntersection(q){if(!q)return null;var oe=this.children,pe=oe.length,Ee=pe-1,Ie;for(Ie=Ee;Ie>=0;Ie--){const _e=oe[Ie].getIntersection(q);if(_e)return _e}return null}_resizeDOM(){var q=this.width(),oe=this.height();this.content&&(this.content.style.width=q+d,this.content.style.height=oe+d),this.bufferCanvas.setSize(q,oe),this.bufferHitCanvas.setSize(q,oe),this.children.forEach(pe=>{pe.setSize({width:q,height:oe}),pe.draw()})}add(q,...oe){if(arguments.length>1){for(var pe=0;pe<arguments.length;pe++)this.add(arguments[pe]);return this}super.add(q);var Ee=this.children.length;return Ee>F&&e.Util.warn("The stage has "+Ee+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),q.setSize({width:this.width(),height:this.height()}),q.draw(),a.Konva.isBrowser&&this.content.appendChild(q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(q){return l.hasPointerCapture(q,this)}setPointerCapture(q){l.setPointerCapture(q,this)}releaseCapture(q){l.releaseCapture(q,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&Q.forEach(([q,oe])=>{this.content.addEventListener(q,pe=>{this[oe](pe)},{passive:!1})})}_pointerenter(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerenter,{evt:q,target:this,currentTarget:this})}_pointerover(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this})}_getTargetShape(q){let oe=this[q+"targetShape"];return oe&&!oe.getStage()&&(oe=null),oe}_pointerleave(q){const oe=se(q.type),pe=re(q.type);if(oe){this.setPointersPositions(q);var Ee=this._getTargetShape(pe),Ie=!o.DD.isDragging||a.Konva.hitOnDragEnabled;Ee&&Ie?(Ee._fireAndBubble(oe.pointerout,{evt:q}),Ee._fireAndBubble(oe.pointerleave,{evt:q}),this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this[pe+"targetShape"]=null):Ie&&(this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this._fire(oe.pointerout,{evt:q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(q){const oe=se(q.type),pe=re(q.type);if(oe){this.setPointersPositions(q);var Ee=!1;this._changedPointerPositions.forEach(Ie=>{var _e=this.getIntersection(Ie);if(o.DD.justDragged=!1,a.Konva["_"+pe+"ListenClick"]=!0,!_e||!_e.isListening())return;a.Konva.capturePointerEventsEnabled&&_e.setPointerCapture(Ie.id),this[pe+"ClickStartShape"]=_e,_e._fireAndBubble(oe.pointerdown,{evt:q,pointerId:Ie.id}),Ee=!0;const Fe=q.type.indexOf("touch")>=0;_e.preventDefault()&&q.cancelable&&Fe&&q.preventDefault()}),Ee||this._fire(oe.pointerdown,{evt:q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(q){const oe=se(q.type),pe=re(q.type);if(!oe)return;o.DD.isDragging&&o.DD.node.preventDefault()&&q.cancelable&&q.preventDefault(),this.setPointersPositions(q);var Ee=!o.DD.isDragging||a.Konva.hitOnDragEnabled;if(!Ee)return;var Ie={};let _e=!1;var Fe=this._getTargetShape(pe);this._changedPointerPositions.forEach(Xe=>{const $e=l.getCapturedShape(Xe.id)||this.getIntersection(Xe),lt=Xe.id,Ze={evt:q,pointerId:lt};var nt=Fe!==$e;if(nt&&Fe&&(Fe._fireAndBubble(oe.pointerout,{...Ze},$e),Fe._fireAndBubble(oe.pointerleave,{...Ze},$e)),$e){if(Ie[$e._id])return;Ie[$e._id]=!0}$e&&$e.isListening()?(_e=!0,nt&&($e._fireAndBubble(oe.pointerover,{...Ze},Fe),$e._fireAndBubble(oe.pointerenter,{...Ze},Fe),this[pe+"targetShape"]=$e),$e._fireAndBubble(oe.pointermove,{...Ze})):Fe&&(this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this,pointerId:lt}),this[pe+"targetShape"]=null)}),_e||this._fire(oe.pointermove,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(q){const oe=se(q.type),pe=re(q.type);if(!oe)return;this.setPointersPositions(q);const Ee=this[pe+"ClickStartShape"],Ie=this[pe+"ClickEndShape"];var _e={};let Fe=!1;this._changedPointerPositions.forEach(Xe=>{const $e=l.getCapturedShape(Xe.id)||this.getIntersection(Xe);if($e){if($e.releaseCapture(Xe.id),_e[$e._id])return;_e[$e._id]=!0}const lt=Xe.id,Ze={evt:q,pointerId:lt};let nt=!1;a.Konva["_"+pe+"InDblClickWindow"]?(nt=!0,clearTimeout(this[pe+"DblTimeout"])):o.DD.justDragged||(a.Konva["_"+pe+"InDblClickWindow"]=!0,clearTimeout(this[pe+"DblTimeout"])),this[pe+"DblTimeout"]=setTimeout(function(){a.Konva["_"+pe+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),$e&&$e.isListening()?(Fe=!0,this[pe+"ClickEndShape"]=$e,$e._fireAndBubble(oe.pointerup,{...Ze}),a.Konva["_"+pe+"ListenClick"]&&Ee&&Ee===$e&&($e._fireAndBubble(oe.pointerclick,{...Ze}),nt&&Ie&&Ie===$e&&$e._fireAndBubble(oe.pointerdblclick,{...Ze}))):(this[pe+"ClickEndShape"]=null,a.Konva["_"+pe+"ListenClick"]&&this._fire(oe.pointerclick,{evt:q,target:this,currentTarget:this,pointerId:lt}),nt&&this._fire(oe.pointerdblclick,{evt:q,target:this,currentTarget:this,pointerId:lt}))}),Fe||this._fire(oe.pointerup,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+pe+"ListenClick"]=!1,q.cancelable&&pe!=="touch"&&q.preventDefault()}_contextmenu(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(j,{evt:q}):this._fire(j,{evt:q,target:this,currentTarget:this})}_wheel(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(H,{evt:q}):this._fire(H,{evt:q,target:this,currentTarget:this})}_pointercancel(q){this.setPointersPositions(q);const oe=l.getCapturedShape(q.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(C,l.createEvent(q)),l.releaseCapture(q.pointerId)}_lostpointercapture(q){l.releaseCapture(q.pointerId)}setPointersPositions(q){var oe=this._getContentPosition(),pe=null,Ee=null;q=q||window.event,q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(q.touches,Ie=>{this._pointerPositions.push({id:Ie.identifier,x:(Ie.clientX-oe.left)/oe.scaleX,y:(Ie.clientY-oe.top)/oe.scaleY})}),Array.prototype.forEach.call(q.changedTouches||q.touches,Ie=>{this._changedPointerPositions.push({id:Ie.identifier,x:(Ie.clientX-oe.left)/oe.scaleX,y:(Ie.clientY-oe.top)/oe.scaleY})})):(pe=(q.clientX-oe.left)/oe.scaleX,Ee=(q.clientY-oe.top)/oe.scaleY,this.pointerPos={x:pe,y:Ee},this._pointerPositions=[{x:pe,y:Ee,id:e.Util._getFirstPointerId(q)}],this._changedPointerPositions=[{x:pe,y:Ee,id:e.Util._getFirstPointerId(q)}])}_setPointerPosition(q){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var q=this.content.getBoundingClientRect();return{top:q.top,left:q.left,scaleX:q.width/this.content.clientWidth||1,scaleY:q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!a.Konva.isBrowser){var q=this.container();if(!q)throw"Stage has no container. A container is required.";q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),q.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(q){q.batchDraw()}),this}}t.Stage=ie,ie.prototype.nodeType=u,(0,s._registerNode)(ie),n.Factory.addGetterSetter(ie,"container")}(OA);var dg={},Dr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Ft,n=ar,r=Bt,a=qn,i=Qe,o=Ft,s=Ai;var l="hasShadow",u="shadowRGBA",c="patternImage",d="linearGradient",h="radialGradient";let f;function m(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y($){const P=this.attrs.fillRule;P?$.fill(P):$.fill()}function v($){$.stroke()}function b($){$.fill()}function x($){$.stroke()}function w(){this._clearCache(l)}function S(){this._clearCache(u)}function C(){this._clearCache(c)}function E(){this._clearCache(d)}function _(){this._clearCache(h)}class N extends a.Node{constructor(P){super(P);let D;for(;D=n.Util.getRandomColor(),!(D&&!(D in t.shapes)););this.colorKey=D,t.shapes[D]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var P=m();const D=P.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const j=new n.Transform;j.translate(this.fillPatternX(),this.fillPatternY()),j.rotate(e.Konva.getAngle(this.fillPatternRotation())),j.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),j.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const B=j.getMatrix(),K=typeof DOMMatrix>"u"?{a:B[0],b:B[1],c:B[2],d:B[3],e:B[4],f:B[5]}:new DOMMatrix(B);D.setTransform(K)}return D}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var P=this.fillLinearGradientColorStops();if(P){for(var D=m(),j=this.fillLinearGradientStartPoint(),B=this.fillLinearGradientEndPoint(),K=D.createLinearGradient(j.x,j.y,B.x,B.y),Y=0;Y<P.length;Y+=2)K.addColorStop(P[Y],P[Y+1]);return K}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){var P=this.fillRadialGradientColorStops();if(P){for(var D=m(),j=this.fillRadialGradientStartPoint(),B=this.fillRadialGradientEndPoint(),K=D.createRadialGradient(j.x,j.y,this.fillRadialGradientStartRadius(),B.x,B.y,this.fillRadialGradientEndRadius()),Y=0;Y<P.length;Y+=2)K.addColorStop(P[Y],P[Y+1]);return K}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){var D=this.getStage();if(!D)return!1;const j=D.bufferHitCanvas;return j.getContext().clear(),this.drawHit(j,void 0,!0),j.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var D;if(!(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0)||D))return!1;const j=P||this.hasFill(),B=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(j&&B&&K)return!0;const Y=this.hasShadow(),Z=this.shadowForStrokeEnabled();return!!(j&&B&&Y&&Z)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){const D=P.skipTransform,j=P.relativeTo,B=this.getSelfRect(),K=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=B.width+K,Z=B.height+K,H=!P.skipShadow&&this.hasShadow(),F=H?this.shadowOffsetX():0,Q=H?this.shadowOffsetY():0,J=Y+Math.abs(F),re=Z+Math.abs(Q),se=H&&this.shadowBlur()||0,he=J+se*2,de=re+se*2,ie={width:he,height:de,x:-(K/2+se)+Math.min(F,0)+B.x,y:-(K/2+se)+Math.min(Q,0)+B.y};return D?ie:this._transformedRect(ie,j)}drawScene(P,D,j){var B=this.getLayer(),K=P||B.getCanvas(),Y=K.getContext(),Z=this._getCanvasCache(),H=this.getSceneFunc(),F=this.hasShadow(),Q,J,re=K.isCache,se=D===this;if(!this.isVisible()&&!se)return this;if(Z){Y.save();var he=this.getAbsoluteTransform(D).getMatrix();return Y.transform(he[0],he[1],he[2],he[3],he[4],he[5]),this._drawCachedSceneCanvas(Y),Y.restore(),this}if(!H)return this;if(Y.save(),this._useBufferCanvas()&&!re){Q=this.getStage();const xe=j||Q.bufferCanvas;J=xe.getContext(),J.clear(),J.save(),J._applyLineJoin(this);var de=this.getAbsoluteTransform(D).getMatrix();J.transform(de[0],de[1],de[2],de[3],de[4],de[5]),H.call(this,J,this),J.restore();var ie=xe.pixelRatio;F&&Y._applyShadow(this),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this),Y.drawImage(xe._canvas,0,0,xe.width/ie,xe.height/ie)}else{if(Y._applyLineJoin(this),!se){var de=this.getAbsoluteTransform(D).getMatrix();Y.transform(de[0],de[1],de[2],de[3],de[4],de[5]),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this)}F&&Y._applyShadow(this),H.call(this,Y,this)}return Y.restore(),this}drawHit(P,D,j=!1){if(!this.shouldDrawHit(D,j))return this;var B=this.getLayer(),K=P||B.hitCanvas,Y=K&&K.getContext(),Z=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),F=H&&H.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),F){Y.save();var Q=this.getAbsoluteTransform(D).getMatrix();return Y.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedHitCanvas(Y),Y.restore(),this}if(!Z)return this;if(Y.save(),Y._applyLineJoin(this),this!==D){var J=this.getAbsoluteTransform(D).getMatrix();Y.transform(J[0],J[1],J[2],J[3],J[4],J[5])}return Z.call(this,Y,this),Y.restore(),this}drawHitFromCache(P=0){var D=this._getCanvasCache(),j=this._getCachedSceneCanvas(),B=D.hit,K=B.getContext(),Y=B.getWidth(),Z=B.getHeight(),H,F,Q,J,re,se;K.clear(),K.drawImage(j._canvas,0,0,Y,Z);try{for(H=K.getImageData(0,0,Y,Z),F=H.data,Q=F.length,J=n.Util._hexToRgb(this.colorKey),re=0;re<Q;re+=4)se=F[re+3],se>P?(F[re]=J.r,F[re+1]=J.g,F[re+2]=J.b,F[re+3]=255):F[re+3]=0;K.putImageData(H,0,0)}catch(he){n.Util.error("Unable to draw hit graph from cached scene canvas. "+he.message)}return this}hasPointerCapture(P){return s.hasPointerCapture(P,this)}setPointerCapture(P){s.setPointerCapture(P,this)}releaseCapture(P){s.releaseCapture(P,this)}}t.Shape=N,N.prototype._fillFunc=y,N.prototype._strokeFunc=v,N.prototype._fillFuncHit=b,N.prototype._strokeFuncHit=x,N.prototype._centroid=!1,N.prototype.nodeType="Shape",(0,o._registerNode)(N),N.prototype.eventListeners={},N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_),r.Factory.addGetterSetter(N,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(N,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(N,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(N,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"lineJoin"),r.Factory.addGetterSetter(N,"lineCap"),r.Factory.addGetterSetter(N,"sceneFunc"),r.Factory.addGetterSetter(N,"hitFunc"),r.Factory.addGetterSetter(N,"dash"),r.Factory.addGetterSetter(N,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(N,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(N,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternImage"),r.Factory.addGetterSetter(N,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(N,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(N,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(N,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(N,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(N,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(N,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(N,"fillEnabled",!0),r.Factory.addGetterSetter(N,"strokeEnabled",!0),r.Factory.addGetterSetter(N,"shadowEnabled",!0),r.Factory.addGetterSetter(N,"dashEnabled",!0),r.Factory.addGetterSetter(N,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(N,"fillPriority","color"),r.Factory.addComponentsGetterSetter(N,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(N,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(N,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(N,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(N,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(N,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(N,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(N,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(N,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(N,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(N,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(N,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(N,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(N,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(N,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(N,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(N,"fillPatternRotation",0),r.Factory.addGetterSetter(N,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(N,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Dr),Object.defineProperty(dg,"__esModule",{value:!0}),dg.Layer=void 0;const ol=ar,x3=$c,Nh=qn,w3=Bt,MA=zo,Fne=Qe,Bne=Dr,zne=Ft;var jne="#",Vne="beforeDraw",Une="draw",PA=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Wne=PA.length;let _h=class extends x3.Container{constructor(t){super(t),this.canvas=new MA.SceneCanvas,this.hitCanvas=new MA.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Nh.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Nh.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Nh.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Nh.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Nh.Node.prototype.remove.call(this),t&&t.parentNode&&ol.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&ol.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Nh.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ol.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ol.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ol.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let r=0;r<Wne;r++){const a=PA[r],i=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),o=i.shape;if(o)return o;if(n=!!i.antialiased,!i.antialiased)break}if(n)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(r===255){const a=ol.Util._rgbToHex(n[0],n[1],n[2]),i=Bne.shapes[jne+a];return i?{shape:i}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire(Vne,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),x3.Container.prototype.drawScene.call(this,r,e),this._fire(Une,{node:this}),this}drawHit(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),x3.Container.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){ol.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return ol.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return ol.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};dg.Layer=_h,_h.prototype.nodeType="Layer",(0,zne._registerNode)(_h),w3.Factory.addGetterSetter(_h,"imageSmoothingEnabled",!0),w3.Factory.addGetterSetter(_h,"clearBeforeDraw",!0),w3.Factory.addGetterSetter(_h,"hitGraphEnabled",!0,(0,Fne.getBooleanValidator)());var Cb={};Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.FastLayer=void 0;const Gne=ar,Hne=dg,qne=Ft;class k3 extends Hne.Layer{constructor(e){super(e),this.listening(!1),Gne.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Cb.FastLayer=k3,k3.prototype.nodeType="FastLayer",(0,qne._registerNode)(k3);var Oh={};Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.Group=void 0;const Kne=ar,Xne=$c,Yne=Ft;class S3 extends Xne.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Kne.Util.throw("You may only add groups and shapes to groups.")}}Oh.Group=S3,S3.prototype.nodeType="Group",(0,Yne._registerNode)(S3);var Rh={};Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.Animation=void 0;const C3=Ft,AA=ar,E3=function(){return C3.glob.performance&&C3.glob.performance.now?function(){return C3.glob.performance.now()}:function(){return new Date().getTime()}}();class Os{constructor(e,n){this.id=Os.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:E3(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let a=0;a<r;a++)if(n[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Os.animations,n=e.length;for(let r=0;r<n;r++)if(e[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=E3(),Os._addAnimation(this),this}stop(){return Os._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,a=r.length;for(let i=0;i<a;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const a=n[r],i=a.layers,o=a.func;a._updateFrameObject(E3());const s=i.length;let l;if(o?l=o.call(a,a.frame)!==!1:l=!0,!!l)for(let u=0;u<s;u++){const c=i[u];c._id!==void 0&&(e[c._id]=c)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Os;e.animations.length?(e._runFrames(),AA.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,AA.Util.requestAnimFrame(this._animationLoop))}}Rh.Animation=Os,Os.animations=[],Os.animIdCounter=0,Os.animRunning=!1;var LA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=ar,n=Rh,r=qn,a=Ft;var i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,c=["fill","stroke","shadowColor"];class d{constructor(m,y,v,b,x,w,S){this.prop=m,this.propFunc=y,this.begin=b,this._pos=b,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=x-this.begin,this.pause()}fire(m){var y=this[m];y&&y()}setTime(m){m>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():m<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=m,this.update())}getTime(){return this._time}setPosition(m){this.prevPos=this._pos,this.propFunc(m),this._pos=m}getPosition(m){return m===void 0&&(m=this._time),this.func(m,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(m){this.pause(),this._time=m,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var m=this.getTimer()-this._startTime;this.state===s?this.setTime(m):this.state===l&&this.setTime(this.duration-m)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(m){var y=this,v=m.node,b=v._id,x,w=m.easing||t.Easings.Linear,S=!!m.yoyo,C;typeof m.duration>"u"?x=.3:m.duration===0?x=.001:x=m.duration,this.node=v,this._id=u++;var E=v.getLayer()||(v instanceof a.Konva.Stage?v.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},E),this.tween=new d(C,function(_){y._tweenFunc(_)},w,0,1,x*1e3,S),this._addListeners(),h.attrs[b]||(h.attrs[b]={}),h.attrs[b][this._id]||(h.attrs[b][this._id]={}),h.tweens[b]||(h.tweens[b]={});for(C in m)i[C]===void 0&&this._addAttr(C,m[C]);this.reset(),this.onFinish=m.onFinish,this.onReset=m.onReset,this.onUpdate=m.onUpdate}_addAttr(m,y){var v=this.node,b=v._id,x,w,S,C,E,_,N,$;if(S=h.tweens[b][m],S&&delete h.attrs[b][S][m],x=v.getAttr(m),e.Util._isArray(y))if(w=[],E=Math.max(y.length,x.length),m==="points"&&y.length!==x.length&&(y.length>x.length?(N=x,x=e.Util._prepareArrayForTween(x,y,v.closed())):(_=y,y=e.Util._prepareArrayForTween(y,x,v.closed()))),m.indexOf("fill")===0)for(C=0;C<E;C++)if(C%2===0)w.push(y[C]-x[C]);else{var P=e.Util.colorToRGBA(x[C]);$=e.Util.colorToRGBA(y[C]),x[C]=P,w.push({r:$.r-P.r,g:$.g-P.g,b:$.b-P.b,a:$.a-P.a})}else for(C=0;C<E;C++)w.push(y[C]-x[C]);else c.indexOf(m)!==-1?(x=e.Util.colorToRGBA(x),$=e.Util.colorToRGBA(y),w={r:$.r-x.r,g:$.g-x.g,b:$.b-x.b,a:$.a-x.a}):w=y-x;h.attrs[b][this._id][m]={start:x,diff:w,end:y,trueEnd:_,trueStart:N},h.tweens[b][m]=this._id}_tweenFunc(m){var y=this.node,v=h.attrs[y._id][this._id],b,x,w,S,C,E,_,N;for(b in v){if(x=v[b],w=x.start,S=x.diff,N=x.end,e.Util._isArray(w))if(C=[],_=Math.max(w.length,N.length),b.indexOf("fill")===0)for(E=0;E<_;E++)E%2===0?C.push((w[E]||0)+S[E]*m):C.push("rgba("+Math.round(w[E].r+S[E].r*m)+","+Math.round(w[E].g+S[E].g*m)+","+Math.round(w[E].b+S[E].b*m)+","+(w[E].a+S[E].a*m)+")");else for(E=0;E<_;E++)C.push((w[E]||0)+S[E]*m);else c.indexOf(b)!==-1?C="rgba("+Math.round(w.r+S.r*m)+","+Math.round(w.g+S.g*m)+","+Math.round(w.b+S.b*m)+","+(w.a+S.a*m)+")":C=w+S*m;y.setAttr(b,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var m=this.node,y=h.attrs[m._id][this._id];y.points&&y.points.trueEnd&&m.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var m=this.node,y=h.attrs[m._id][this._id];y.points&&y.points.trueStart&&m.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(m){return this.tween.seek(m*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var m=this.node._id,y=this._id,v=h.tweens[m],b;this.pause();for(b in v)delete h.tweens[m][b];delete h.attrs[m][y]}}t.Tween=h,h.attrs={},h.tweens={},r.Node.prototype.to=function(f){var m=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),m&&m()};var y=new h(f);y.play()},t.Easings={BackEaseIn(f,m,y,v){var b=1.70158;return y*(f/=v)*f*((b+1)*f-b)+m},BackEaseOut(f,m,y,v){var b=1.70158;return y*((f=f/v-1)*f*((b+1)*f+b)+1)+m},BackEaseInOut(f,m,y,v){var b=1.70158;return(f/=v/2)<1?y/2*(f*f*(((b*=1.525)+1)*f-b))+m:y/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+m},ElasticEaseIn(f,m,y,v,b,x){var w=0;return f===0?m:(f/=v)===1?m+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+m)},ElasticEaseOut(f,m,y,v,b,x){var w=0;return f===0?m:(f/=v)===1?m+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),b*Math.pow(2,-10*f)*Math.sin((f*v-w)*(2*Math.PI)/x)+y+m)},ElasticEaseInOut(f,m,y,v,b,x){var w=0;return f===0?m:(f/=v/2)===2?m+y:(x||(x=v*(.3*1.5)),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+m:b*Math.pow(2,-10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x)*.5+y+m)},BounceEaseOut(f,m,y,v){return(f/=v)<1/2.75?y*(7.5625*f*f)+m:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+m:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+m:y*(7.5625*(f-=2.625/2.75)*f+.984375)+m},BounceEaseIn(f,m,y,v){return y-t.Easings.BounceEaseOut(v-f,0,y,v)+m},BounceEaseInOut(f,m,y,v){return f<v/2?t.Easings.BounceEaseIn(f*2,0,y,v)*.5+m:t.Easings.BounceEaseOut(f*2-v,0,y,v)*.5+y*.5+m},EaseIn(f,m,y,v){return y*(f/=v)*f+m},EaseOut(f,m,y,v){return-y*(f/=v)*(f-2)+m},EaseInOut(f,m,y,v){return(f/=v/2)<1?y/2*f*f+m:-y/2*(--f*(f-2)-1)+m},StrongEaseIn(f,m,y,v){return y*(f/=v)*f*f*f*f+m},StrongEaseOut(f,m,y,v){return y*((f=f/v-1)*f*f*f*f+1)+m},StrongEaseInOut(f,m,y,v){return(f/=v/2)<1?y/2*f*f*f*f*f+m:y/2*((f-=2)*f*f*f*f+2)+m},Linear(f,m,y,v){return y*f/v+m}}})(LA),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Ft,n=ar,r=qn,a=$c,i=OA,o=dg,s=Cb,l=Oh,u=vb,c=Dr,d=Rh,h=LA,f=al,m=zo;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:a.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:s.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:d.Animation,Tween:h.Tween,Easings:h.Easings,Context:f.Context,Canvas:m.Canvas}),t.default=t.Konva}(fb);var Eb={};Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.Arc=void 0;const Ib=Bt,Qne=Dr,DA=Ft,Tb=Qe,Jne=Ft;class sl extends Qne.Shape{_sceneFunc(e){var n=DA.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),a=DA.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(a,Math.PI)),o=1,s=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),l=Math.sin(Math.min(a,Math.PI/2)),u=i*(i>0?e:n),c=o*n,d=s*(s>0?e:n),h=l*(l>0?n:e);return{x:u,y:r?-1*h:d,width:c-u,height:h-d}}}Eb.Arc=sl,sl.prototype._centroid=!0,sl.prototype.className="Arc",sl.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Jne._registerNode)(sl),Ib.Factory.addGetterSetter(sl,"innerRadius",0,(0,Tb.getNumberValidator)()),Ib.Factory.addGetterSetter(sl,"outerRadius",0,(0,Tb.getNumberValidator)()),Ib.Factory.addGetterSetter(sl,"angle",0,(0,Tb.getNumberValidator)()),Ib.Factory.addGetterSetter(sl,"clockwise",!1,(0,Tb.getBooleanValidator)());var Nb={},hg={};Object.defineProperty(hg,"__esModule",{value:!0}),hg.Line=void 0;const _b=Bt,Zne=Dr,FA=Qe,ere=Ft;function I3(t,e,n,r,a,i,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(a-n,2)+Math.pow(i-r,2)),u=o*s/(s+l),c=o*l/(s+l),d=n-u*(a-t),h=r-u*(i-e),f=n+c*(a-t),m=r+c*(i-e);return[d,h,f,m]}function BA(t,e){var n=t.length,r=[],a,i;for(a=2;a<n-2;a+=2)i=I3(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],e),!isNaN(i[0])&&(r.push(i[0]),r.push(i[1]),r.push(t[a]),r.push(t[a+1]),r.push(i[2]),r.push(i[3]));return r}class fu extends Zne.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,a=this.tension(),i=this.closed(),o=this.bezier(),s,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),a!==0&&r>4){for(s=this.getTensionPoints(),l=s.length,u=i?0:4,i||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);u<l-2;)e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]);i||e.quadraticCurveTo(s[l-2],s[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():BA(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),a=I3(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=I3(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=BA(e,r),s=[a[2],a[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],a[0],a[1],e[0],e[1]]);return s}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);return{x:n,y:a,width:r-n,height:i-a}}}hg.Line=fu,fu.prototype.className="Line",fu.prototype._attrsAffectingSize=["points","bezier","tension"],(0,ere._registerNode)(fu),_b.Factory.addGetterSetter(fu,"closed",!1),_b.Factory.addGetterSetter(fu,"bezier",!1),_b.Factory.addGetterSetter(fu,"tension",0,(0,FA.getNumberValidator)()),_b.Factory.addGetterSetter(fu,"points",[],(0,FA.getNumberArrayValidator)());var $h={},zA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,s,l)=>{let u,c,d;u=l/2,c=0;for(let h=0;h<20;h++)d=u*t.tValues[20][h]+u,c+=t.cValues[20][h]*r(o,s,d);return u*c};t.getCubicArcLength=e;const n=(o,s,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],c=s[0]-2*s[1]+s[2],d=2*o[1]-2*o[0],h=2*s[1]-2*s[0],f=4*(u*u+c*c),m=4*(u*d+c*h),y=d*d+h*h;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(s[2]-s[0],2));const v=m/(2*f),b=y/f,x=l+v,w=b-v*v,S=x*x+w>0?Math.sqrt(x*x+w):0,C=v*v+w>0?Math.sqrt(v*v+w):0,E=v+Math.sqrt(v*v+w)!==0?w*Math.log(Math.abs((x+S)/(v+C))):0;return Math.sqrt(f)/2*(x*S-v*C+E)};t.getQuadraticArcLength=n;function r(o,s,l){const u=a(1,l,o),c=a(1,l,s),d=u*u+c*c;return Math.sqrt(d)}const a=(o,s,l)=>{const u=l.length-1;let c,d;if(u===0)return 0;if(o===0){d=0;for(let h=0;h<=u;h++)d+=t.binomialCoefficients[u][h]*Math.pow(1-s,u-h)*Math.pow(s,h)*l[h];return d}else{c=new Array(u);for(let h=0;h<u;h++)c[h]=u*(l[h+1]-l[h]);return a(o-1,s,c)}},i=(o,s,l)=>{let u=1,c=o/s,d=(o-l(c))/s,h=0;for(;u>.001;){const f=l(c+d),m=Math.abs(o-f)/s;if(m<u)u=m,c+=d;else{const y=l(c-d),v=Math.abs(o-y)/s;v<u?(u=v,c-=d):d/=2}if(h++,h>500)break}return c};t.t2length=i})(zA),Object.defineProperty($h,"__esModule",{value:!0}),$h.Path=void 0;const tre=Bt,nre=Dr,rre=Ft,Mh=zA;class Ur extends nre.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ur.parsePathData(this.data()),this.pathLength=Ur.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,a=0;a<n.length;a++){var i=n[a].command,o=n[a].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],l=o[1],u=o[2],c=o[3],d=o[4],h=o[5],f=o[6],m=o[7],y=u>c?u:c,v=u>c?1:u/c,b=u>c?c/u:1;e.translate(s,l),e.rotate(f),e.scale(v,b),e.arc(0,0,y,d,d+h,1-m),e.scale(1/v,1/b),e.rotate(-f),e.translate(-s,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(u){if(u.command==="A"){var c=u.points[4],d=u.points[5],h=u.points[4]+d,f=Math.PI/180;if(Math.abs(c-h)<f&&(f=Math.abs(c-h)),d<0)for(let m=c-f;m>h;m-=f){const y=Ur.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],m,0);e.push(y.x,y.y)}else for(let m=c+f;m<h;m+=f){const y=Ur.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],m,0);e.push(y.x,y.y)}}else if(u.command==="C")for(let m=0;m<=1;m+=.01){const y=Ur.getPointOnCubicBezier(m,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(y.x,y.y)}else e=e.concat(u.points)});for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(s)||(a=Math.min(a,s),i=Math.max(i,s));return{x:n,y:a,width:r-n,height:i-a}}getLength(){return this.pathLength}getPointAtLength(e){return Ur.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,a){return Math.sqrt((r-e)*(r-e)+(a-n)*(a-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,a=0,i=n.length;if(!i)return null;for(;a<i&&e>n[a].pathLength;)e-=n[a].pathLength,++a;if(a===i)return r=n[a-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[a].points.slice(0,2),{x:r[0],y:r[1]};var o=n[a],s=o.points;switch(o.command){case"L":return Ur.getPointOnLine(e,o.start.x,o.start.y,s[0],s[1]);case"C":return Ur.getPointOnCubicBezier((0,Mh.t2length)(e,Ur.getPathLength(n),y=>(0,Mh.getCubicArcLength)([o.start.x,s[0],s[2],s[4]],[o.start.y,s[1],s[3],s[5]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return Ur.getPointOnQuadraticBezier((0,Mh.t2length)(e,Ur.getPathLength(n),y=>(0,Mh.getQuadraticArcLength)([o.start.x,s[0],s[2]],[o.start.y,s[1],s[3]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],c=s[2],d=s[3],h=s[4],f=s[5],m=s[6];return h+=f*e/o.pathLength,Ur.getPointOnEllipticalArc(l,u,c,d,h,m)}return null}static getPointOnLine(e,n,r,a,i,o,s){o===void 0&&(o=n),s===void 0&&(s=r);var l=(i-r)/(a-n+1e-8),u=Math.sqrt(e*e/(1+l*l));a<n&&(u*=-1);var c=l*u,d;if(a===n)d={x:o,y:s+c};else if((s-r)/(o-n+1e-8)===l)d={x:o+u,y:s+c};else{var h,f,m=this.getLineLength(n,r,a,i),y=(o-n)*(a-n)+(s-r)*(i-r);y=y/(m*m),h=n+y*(a-n),f=r+y*(i-r);var v=this.getLineLength(o,s,h,f),b=Math.sqrt(e*e-v*v);u=Math.sqrt(b*b/(1+l*l)),a<n&&(u*=-1),c=l*u,d={x:h+u,y:f+c}}return d}static getPointOnCubicBezier(e,n,r,a,i,o,s,l,u){function c(v){return v*v*v}function d(v){return 3*v*v*(1-v)}function h(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}var m=l*c(e)+o*d(e)+a*h(e)+n*f(e),y=u*c(e)+s*d(e)+i*h(e)+r*f(e);return{x:m,y}}static getPointOnQuadraticBezier(e,n,r,a,i,o,s){function l(f){return f*f}function u(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}var d=o*l(e)+a*u(e)+n*c(e),h=s*l(e)+i*u(e)+r*c(e);return{x:d,y:h}}static getPointOnEllipticalArc(e,n,r,a,i,o){var s=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(i),y:a*Math.sin(i)};return{x:e+(u.x*s-u.y*l),y:n+(u.x*l+u.y*s)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var a=0;a<r.length;a++)n=n.replace(new RegExp(r[a],"g"),"|"+r[a]);var i=n.split("|"),o=[],s=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(a=1;a<i.length;a++){var h=i[a],f=h.charAt(0);for(h=h.slice(1),s.length=0;d=c.exec(h);)s.push(d[0]);for(var m=[],y=0,v=s.length;y<v;y++){if(s[y]==="00"){m.push(0,0);continue}var b=parseFloat(s[y]);isNaN(b)?m.push(0):m.push(b)}for(;m.length>0&&!isNaN(m[0]);){var x="",w=[],S=l,C=u,E,_,N,$,P,D,j,B,K,Y;switch(f){case"l":l+=m.shift(),u+=m.shift(),x="L",w.push(l,u);break;case"L":l=m.shift(),u=m.shift(),w.push(l,u);break;case"m":var Z=m.shift(),H=m.shift();if(l+=Z,u+=H,x="M",o.length>2&&o[o.length-1].command==="z"){for(var F=o.length-2;F>=0;F--)if(o[F].command==="M"){l=o[F].points[0]+Z,u=o[F].points[1]+H;break}}w.push(l,u),f="l";break;case"M":l=m.shift(),u=m.shift(),x="M",w.push(l,u),f="L";break;case"h":l+=m.shift(),x="L",w.push(l,u);break;case"H":l=m.shift(),x="L",w.push(l,u);break;case"v":u+=m.shift(),x="L",w.push(l,u);break;case"V":u=m.shift(),x="L",w.push(l,u);break;case"C":w.push(m.shift(),m.shift(),m.shift(),m.shift()),l=m.shift(),u=m.shift(),w.push(l,u);break;case"c":w.push(l+m.shift(),u+m.shift(),l+m.shift(),u+m.shift()),l+=m.shift(),u+=m.shift(),x="C",w.push(l,u);break;case"S":_=l,N=u,E=o[o.length-1],E.command==="C"&&(_=l+(l-E.points[2]),N=u+(u-E.points[3])),w.push(_,N,m.shift(),m.shift()),l=m.shift(),u=m.shift(),x="C",w.push(l,u);break;case"s":_=l,N=u,E=o[o.length-1],E.command==="C"&&(_=l+(l-E.points[2]),N=u+(u-E.points[3])),w.push(_,N,l+m.shift(),u+m.shift()),l+=m.shift(),u+=m.shift(),x="C",w.push(l,u);break;case"Q":w.push(m.shift(),m.shift()),l=m.shift(),u=m.shift(),w.push(l,u);break;case"q":w.push(l+m.shift(),u+m.shift()),l+=m.shift(),u+=m.shift(),x="Q",w.push(l,u);break;case"T":_=l,N=u,E=o[o.length-1],E.command==="Q"&&(_=l+(l-E.points[0]),N=u+(u-E.points[1])),l=m.shift(),u=m.shift(),x="Q",w.push(_,N,l,u);break;case"t":_=l,N=u,E=o[o.length-1],E.command==="Q"&&(_=l+(l-E.points[0]),N=u+(u-E.points[1])),l+=m.shift(),u+=m.shift(),x="Q",w.push(_,N,l,u);break;case"A":$=m.shift(),P=m.shift(),D=m.shift(),j=m.shift(),B=m.shift(),K=l,Y=u,l=m.shift(),u=m.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,Y,l,u,j,B,$,P,D);break;case"a":$=m.shift(),P=m.shift(),D=m.shift(),j=m.shift(),B=m.shift(),K=l,Y=u,l+=m.shift(),u+=m.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,Y,l,u,j,B,$,P,D);break}o.push({command:x||f,points:w,start:{x:S,y:C},pathLength:this.calcLength(S,C,x||f,w)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,a){var i,o,s,l,u=Ur;switch(r){case"L":return u.getLineLength(e,n,a[0],a[1]);case"C":return(0,Mh.getCubicArcLength)([e,a[0],a[2],a[4]],[n,a[1],a[3],a[5]],1);case"Q":return(0,Mh.getQuadraticArcLength)([e,a[0],a[2]],[n,a[1],a[3]],1);case"A":i=0;var c=a[4],d=a[5],h=a[4]+d,f=Math.PI/180;if(Math.abs(c-h)<f&&(f=Math.abs(c-h)),o=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],c,0),d<0)for(l=c-f;l>h;l-=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(l=c+f;l<h;l+=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],h,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,a,i,o,s,l,u){var c=u*(Math.PI/180),d=Math.cos(c)*(e-r)/2+Math.sin(c)*(n-a)/2,h=-1*Math.sin(c)*(e-r)/2+Math.cos(c)*(n-a)/2,f=d*d/(s*s)+h*h/(l*l);f>1&&(s*=Math.sqrt(f),l*=Math.sqrt(f));var m=Math.sqrt((s*s*(l*l)-s*s*(h*h)-l*l*(d*d))/(s*s*(h*h)+l*l*(d*d)));i===o&&(m*=-1),isNaN(m)&&(m=0);var y=m*s*h/l,v=m*-l*d/s,b=(e+r)/2+Math.cos(c)*y-Math.sin(c)*v,x=(n+a)/2+Math.sin(c)*y+Math.cos(c)*v,w=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},S=function(P,D){return(P[0]*D[0]+P[1]*D[1])/(w(P)*w(D))},C=function(P,D){return(P[0]*D[1]<P[1]*D[0]?-1:1)*Math.acos(S(P,D))},E=C([1,0],[(d-y)/s,(h-v)/l]),_=[(d-y)/s,(h-v)/l],N=[(-1*d-y)/s,(-1*h-v)/l],$=C(_,N);return S(_,N)<=-1&&($=Math.PI),S(_,N)>=1&&($=0),o===0&&$>0&&($=$-2*Math.PI),o===1&&$<0&&($=$+2*Math.PI),[b,x,s,l,E,$,c,o]}}$h.Path=Ur,Ur.prototype.className="Path",Ur.prototype._attrsAffectingSize=["data"],(0,rre._registerNode)(Ur),tre.Factory.addGetterSetter(Ur,"data"),Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.Arrow=void 0;const Ob=Bt,are=hg,jA=Qe,ire=Ft,VA=$h;class Pc extends are.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),a=r,i=this.tension()!==0&&r.length>4;i&&(a=this.getTensionPoints());var o=this.pointerLength(),s=r.length,l,u;if(i){const h=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],r[s-2],r[s-1]],f=VA.Path.calcLength(a[a.length-4],a[a.length-3],"C",h),m=VA.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),h[0],h[1],h[2],h[3],h[4],h[5]);l=r[s-2]-m.x,u=r[s-1]-m.y}else l=r[s-2]-r[s-4],u=r[s-1]-r[s-3];var c=(Math.atan2(u,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[s-2],r[s-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(l=(a[0]+a[2])/2-r[0],u=(a[1]+a[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Nb.Arrow=Pc,Pc.prototype.className="Arrow",(0,ire._registerNode)(Pc),Ob.Factory.addGetterSetter(Pc,"pointerLength",10,(0,jA.getNumberValidator)()),Ob.Factory.addGetterSetter(Pc,"pointerWidth",10,(0,jA.getNumberValidator)()),Ob.Factory.addGetterSetter(Pc,"pointerAtBeginning",!1),Ob.Factory.addGetterSetter(Pc,"pointerAtEnding",!0);var Rb={};Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.Circle=void 0;const ore=Bt,sre=Dr,lre=Qe,ure=Ft;class Ph extends sre.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Rb.Circle=Ph,Ph.prototype._centroid=!0,Ph.prototype.className="Circle",Ph.prototype._attrsAffectingSize=["radius"],(0,ure._registerNode)(Ph),ore.Factory.addGetterSetter(Ph,"radius",0,(0,lre.getNumberValidator)());var $b={};Object.defineProperty($b,"__esModule",{value:!0}),$b.Ellipse=void 0;const T3=Bt,cre=Dr,UA=Qe,dre=Ft;class gu extends cre.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}$b.Ellipse=gu,gu.prototype.className="Ellipse",gu.prototype._centroid=!0,gu.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,dre._registerNode)(gu),T3.Factory.addComponentsGetterSetter(gu,"radius",["x","y"]),T3.Factory.addGetterSetter(gu,"radiusX",0,(0,UA.getNumberValidator)()),T3.Factory.addGetterSetter(gu,"radiusY",0,(0,UA.getNumberValidator)());var Mb={};Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.Image=void 0;const N3=ar,Ac=Bt,hre=Dr,pre=Ft,pg=Qe;let gs=class pU extends hre.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),a=this.cornerRadius(),i=this.attrs.image;let o;if(i){const s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||a)&&(e.beginPath(),a?N3.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(a&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var n=this.width(),r=this.height(),a=this.cornerRadius();e.beginPath(),a?N3.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var a=N3.Util.createImageElement();a.onload=function(){var i=new pU({image:a});n(i)},a.onerror=r,a.crossOrigin="Anonymous",a.src=e}};Mb.Image=gs,gs.prototype.className="Image",(0,pre._registerNode)(gs),Ac.Factory.addGetterSetter(gs,"cornerRadius",0,(0,pg.getNumberOrArrayOfNumbersValidator)(4)),Ac.Factory.addGetterSetter(gs,"image"),Ac.Factory.addComponentsGetterSetter(gs,"crop",["x","y","width","height"]),Ac.Factory.addGetterSetter(gs,"cropX",0,(0,pg.getNumberValidator)()),Ac.Factory.addGetterSetter(gs,"cropY",0,(0,pg.getNumberValidator)()),Ac.Factory.addGetterSetter(gs,"cropWidth",0,(0,pg.getNumberValidator)()),Ac.Factory.addGetterSetter(gs,"cropHeight",0,(0,pg.getNumberValidator)());var Ah={};Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.Tag=Ah.Label=void 0;const Pb=Bt,fre=Dr,gre=Oh,_3=Qe,WA=Ft;var GA=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],mre="Change.konva",yre="none",O3="up",R3="right",$3="down",M3="left",bre=GA.length;class P3 extends gre.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,a=function(){n._sync()};for(r=0;r<bre;r++)e.on(GA[r]+mre,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,a,i,o,s,l,u;if(e&&n){switch(r=e.width(),a=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),s=0,l=0,i){case O3:s=r/2,l=-1*u;break;case R3:s=r+o,l=a/2;break;case $3:s=r/2,l=a+u;break;case M3:s=-1*o,l=a/2;break}n.setAttrs({x:-1*s,y:-1*l,width:r,height:a}),e.setAttrs({x:-1*s,y:-1*l})}}}Ah.Label=P3,P3.prototype.className="Label",(0,WA._registerNode)(P3);class Lc extends fre.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),a=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius();let l=0,u=0,c=0,d=0;typeof s=="number"?l=u=c=d=Math.min(s,n/2,r/2):(l=Math.min(s[0]||0,n/2,r/2),u=Math.min(s[1]||0,n/2,r/2),d=Math.min(s[2]||0,n/2,r/2),c=Math.min(s[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),a===O3&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),a===R3&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),a===$3&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(c,r),e.arc(c,r-c,c,Math.PI/2,Math.PI,!1),a===M3&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),a=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),s=this.height();return i===O3?(n-=a,s+=a):i===$3?s+=a:i===M3?(e-=r*1.5,o+=r):i===R3&&(o+=r*1.5),{x:e,y:n,width:o,height:s}}}Ah.Tag=Lc,Lc.prototype.className="Tag",(0,WA._registerNode)(Lc),Pb.Factory.addGetterSetter(Lc,"pointerDirection",yre),Pb.Factory.addGetterSetter(Lc,"pointerWidth",0,(0,_3.getNumberValidator)()),Pb.Factory.addGetterSetter(Lc,"pointerHeight",0,(0,_3.getNumberValidator)()),Pb.Factory.addGetterSetter(Lc,"cornerRadius",0,(0,_3.getNumberOrArrayOfNumbersValidator)(4));var fg={};Object.defineProperty(fg,"__esModule",{value:!0}),fg.Rect=void 0;const vre=Bt,xre=Dr,wre=Ft,kre=ar,Sre=Qe;class Ab extends xre.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),a=this.height();e.beginPath(),n?kre.Util.drawRoundedRectPath(e,r,a,n):e.rect(0,0,r,a),e.closePath(),e.fillStrokeShape(this)}}fg.Rect=Ab,Ab.prototype.className="Rect",(0,wre._registerNode)(Ab),vre.Factory.addGetterSetter(Ab,"cornerRadius",0,(0,Sre.getNumberOrArrayOfNumbersValidator)(4));var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.RegularPolygon=void 0;const HA=Bt,Cre=Dr,qA=Qe,Ere=Ft;class Dc extends Cre.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var a=0;a<e;a++)r.push({x:n*Math.sin(a*2*Math.PI/e),y:-1*n*Math.cos(a*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,a=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),a=Math.min(a,o.y),i=Math.max(i,o.y)}),{x:n,y:a,width:r-n,height:i-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Lb.RegularPolygon=Dc,Dc.prototype.className="RegularPolygon",Dc.prototype._centroid=!0,Dc.prototype._attrsAffectingSize=["radius"],(0,Ere._registerNode)(Dc),HA.Factory.addGetterSetter(Dc,"radius",0,(0,qA.getNumberValidator)()),HA.Factory.addGetterSetter(Dc,"sides",0,(0,qA.getNumberValidator)());var Db={};Object.defineProperty(Db,"__esModule",{value:!0}),Db.Ring=void 0;const KA=Bt,Ire=Dr,XA=Qe,Tre=Ft;var YA=Math.PI*2;class Fc extends Ire.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,YA,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),YA,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Db.Ring=Fc,Fc.prototype.className="Ring",Fc.prototype._centroid=!0,Fc.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Tre._registerNode)(Fc),KA.Factory.addGetterSetter(Fc,"innerRadius",0,(0,XA.getNumberValidator)()),KA.Factory.addGetterSetter(Fc,"outerRadius",0,(0,XA.getNumberValidator)());var Fb={};Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.Sprite=void 0;const Bc=Bt,Nre=Dr,_re=Rh,QA=Qe,Ore=Ft;class ms extends Nre.Shape{constructor(e){super(e),this._updated=!0,this.anim=new _re.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+0],l=i[a+1],u=i[a+2],c=i[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,c),e.closePath(),e.fillStrokeShape(this)),d)if(o){var h=o[n],f=r*2;e.drawImage(d,s,l,u,c,h[f+0],h[f+1],u,c)}else e.drawImage(d,s,l,u,c,0,0,u,c)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+2],l=i[a+3];if(e.beginPath(),o){var u=o[n],c=r*2;e.rect(u[c+0],u[c+1],s,l)}else e.rect(0,0,s,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),a=r[n],i=a.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}Fb.Sprite=ms,ms.prototype.className="Sprite",(0,Ore._registerNode)(ms),Bc.Factory.addGetterSetter(ms,"animation"),Bc.Factory.addGetterSetter(ms,"animations"),Bc.Factory.addGetterSetter(ms,"frameOffsets"),Bc.Factory.addGetterSetter(ms,"image"),Bc.Factory.addGetterSetter(ms,"frameIndex",0,(0,QA.getNumberValidator)()),Bc.Factory.addGetterSetter(ms,"frameRate",17,(0,QA.getNumberValidator)()),Bc.Factory.backCompat(ms,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.Star=void 0;const A3=Bt,Rre=Dr,L3=Qe,$re=Ft;class mu extends Rre.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var i=1;i<a*2;i++){var o=i%2===0?r:n,s=o*Math.sin(i*Math.PI/a),l=-1*o*Math.cos(i*Math.PI/a);e.lineTo(s,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Bb.Star=mu,mu.prototype.className="Star",mu.prototype._centroid=!0,mu.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,$re._registerNode)(mu),A3.Factory.addGetterSetter(mu,"numPoints",5,(0,L3.getNumberValidator)()),A3.Factory.addGetterSetter(mu,"innerRadius",0,(0,L3.getNumberValidator)()),A3.Factory.addGetterSetter(mu,"outerRadius",0,(0,L3.getNumberValidator)());var zc={};Object.defineProperty(zc,"__esModule",{value:!0}),zc.Text=zc.stringToArray=void 0;const D3=ar,Ma=Bt,Mre=Dr,yu=Qe,Pre=Ft;function JA(t){return Array.from(t)}zc.stringToArray=JA;var Lh="auto",Are="center",ZA="inherit",gg="justify",Lre="Change.konva",Dre="2d",e8="-",t8="left",Fre="text",Bre="Text",zre="top",jre="bottom",n8="middle",r8="normal",Vre="px ",zb=" ",Ure="right",a8="rtl",Wre="word",Gre="char",i8="none",F3="\u2026",o8=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Hre=o8.length;function qre(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var B3;function z3(){return B3||(B3=D3.Util.createCanvasElement().getContext(Dre),B3)}function Kre(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Xre(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Yre(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class hr extends Mre.Shape{constructor(e){super(Yre(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<Hre;n++)this.on(o8[n]+Lre,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var a=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,s=this.verticalAlign(),l=this.direction(),u=0,c=this.align(),d=this.getWidth(),h=this.letterSpacing(),f=this.fill(),m=this.textDecoration(),y=m.indexOf("underline")!==-1,v=m.indexOf("line-through")!==-1,b;l=l===ZA?e.direction:l;var x=0,x=o/2,w=0,S=0;for(l===a8&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",n8),e.setAttr("textAlign",t8),s===n8?u=(this.getHeight()-r*o-a*2)/2:s===jre&&(u=this.getHeight()-r*o-a*2),e.translate(a,u+a),b=0;b<r;b++){var w=0,S=0,C=n[b],E=C.text,_=C.width,N=C.lastInParagraph,$,P,D;if(e.save(),c===Ure?w+=d-_-a*2:c===Are&&(w+=(d-_-a*2)/2),y){e.save(),e.beginPath(),e.moveTo(w,x+S+Math.round(i/2)),$=E.split(" ").length-1,P=$===0,D=c===gg&&!N?d-a*2:_,e.lineTo(w+Math.round(D),x+S+Math.round(i/2)),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(v){e.save(),e.beginPath(),e.moveTo(w,x+S),$=E.split(" ").length-1,P=$===0,D=c===gg&&N&&!P?d-a*2:_,e.lineTo(w+Math.round(D),x+S),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(l!==a8&&(h!==0||c===gg)){$=E.split(" ").length-1;for(var j=JA(E),B=0;B<j.length;B++){var K=j[B];K===" "&&!N&&c===gg&&(w+=(d-a*2-_)/$),this._partialTextX=w,this._partialTextY=x+S,this._partialText=K,e.fillStrokeShape(this),w+=this.measureSize(K).width+h}}else h!==0&&e.setAttr("letterSpacing",`${h}px`),this._partialTextX=w,this._partialTextY=x+S,this._partialText=E,e.fillStrokeShape(this);e.restore(),r>1&&(x+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=D3.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Fre,n),this}getWidth(){var e=this.attrs.width===Lh||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Lh||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return D3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=z3(),r=this.fontSize(),a;return n.save(),n.font=this._getContextFont(),a=n.measureText(e),n.restore(),{width:a.width,height:r}}_getContextFont(){return this.fontStyle()+zb+this.fontVariant()+zb+(this.fontSize()+Vre)+qre(this.fontFamily())}_addTextLine(e){this.align()===gg&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return z3().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,a=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,s=i!==Lh&&i!==void 0,l=o!==Lh&&o!==void 0,u=this.padding(),c=i-u*2,d=o-u*2,h=0,f=this.wrap(),m=f!==i8,y=f!==Gre&&m,v=this.ellipsis();this.textArr=[],z3().font=this._getContextFont();for(var b=v?this._getTextWidth(F3):0,x=0,w=e.length;x<w;++x){var S=e[x],C=this._getTextWidth(S);if(s&&C>c)for(;S.length>0;){for(var E=0,_=S.length,N="",$=0;E<_;){var P=E+_>>>1,D=S.slice(0,P+1),j=this._getTextWidth(D)+b;j<=c?(E=P+1,N=D,$=j):_=P}if(N){if(y){var B,K=S[N.length],Y=K===zb||K===e8;Y&&$<=c?B=N.length:B=Math.max(N.lastIndexOf(zb),N.lastIndexOf(e8))+1,B>0&&(E=B,N=N.slice(0,E),$=this._getTextWidth(N))}N=N.trimRight(),this._addTextLine(N),r=Math.max(r,$),h+=a;var Z=this._shouldHandleEllipsis(h);if(Z){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(E),S=S.trimLeft(),S.length>0&&(C=this._getTextWidth(S),C<=c)){this._addTextLine(S),h+=a,r=Math.max(r,C);break}}else break}else this._addTextLine(S),h+=a,r=Math.max(r,C),this._shouldHandleEllipsis(h)&&x<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&h+a>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,a=this.attrs.height,i=a!==Lh&&a!==void 0,o=this.padding(),s=a-o*2,l=this.wrap(),u=l!==i8;return!u||i&&e+r>s}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Lh&&e!==void 0,r=this.padding(),a=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!i)){if(n){var s=this._getTextWidth(o.text+F3)<a;s||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+F3)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}zc.Text=hr,hr.prototype._fillFunc=Kre,hr.prototype._strokeFunc=Xre,hr.prototype.className=Bre,hr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,Pre._registerNode)(hr),Ma.Factory.overWriteSetter(hr,"width",(0,yu.getNumberOrAutoValidator)()),Ma.Factory.overWriteSetter(hr,"height",(0,yu.getNumberOrAutoValidator)()),Ma.Factory.addGetterSetter(hr,"direction",ZA),Ma.Factory.addGetterSetter(hr,"fontFamily","Arial"),Ma.Factory.addGetterSetter(hr,"fontSize",12,(0,yu.getNumberValidator)()),Ma.Factory.addGetterSetter(hr,"fontStyle",r8),Ma.Factory.addGetterSetter(hr,"fontVariant",r8),Ma.Factory.addGetterSetter(hr,"padding",0,(0,yu.getNumberValidator)()),Ma.Factory.addGetterSetter(hr,"align",t8),Ma.Factory.addGetterSetter(hr,"verticalAlign",zre),Ma.Factory.addGetterSetter(hr,"lineHeight",1,(0,yu.getNumberValidator)()),Ma.Factory.addGetterSetter(hr,"wrap",Wre),Ma.Factory.addGetterSetter(hr,"ellipsis",!1,(0,yu.getBooleanValidator)()),Ma.Factory.addGetterSetter(hr,"letterSpacing",0,(0,yu.getNumberValidator)()),Ma.Factory.addGetterSetter(hr,"text","",(0,yu.getStringValidator)()),Ma.Factory.addGetterSetter(hr,"textDecoration","");var jb={};Object.defineProperty(jb,"__esModule",{value:!0}),jb.TextPath=void 0;const j3=ar,jo=Bt,Qre=Dr,mg=$h,V3=zc,s8=Qe,Jre=Ft;var Zre="",l8="normal";function u8(t){t.fillText(this.partialText,0,0)}function c8(t){t.strokeText(this.partialText,0,0)}class Fr extends Qre.Shape{constructor(e){super(e),this.dummyCanvas=j3.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return mg.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:mg.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=mg.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),a=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<i.length;o++){e.save();var s=i[o].p0;e.translate(s.x,s.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,a/2+1),e.lineTo(a,a/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=a/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var a=0;a<n.length;a++){var i=n[a].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return j3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return V3.Text.prototype.setText.call(this,e)}_getContextFont(){return V3.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var a=r.measureText(e);return r.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),a=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let s=0;a==="center"&&(s=Math.max(0,this.pathLength/2-o/2)),a==="right"&&(s=Math.max(0,this.pathLength-o));const l=(0,V3.stringToArray)(this.text());let u=s;for(var c=0;c<l.length;c++){const d=this._getPointAtLength(u);if(!d)return;let h=this._getTextSize(l[c]).width+r;if(l[c]===" "&&a==="justify"){const x=this.text().split(" ").length-1;h+=(this.pathLength-o)/x}const f=this._getPointAtLength(u+h);if(!f)return;const m=mg.Path.getLineLength(d.x,d.y,f.x,f.y);let y=0;if(i)try{y=i(l[c-1],l[c])*this.fontSize()}catch{y=0}d.x+=y,f.x+=y,this.textWidth+=y;const v=mg.Path.getPointOnLine(y+m/2,d.x,d.y,f.x,f.y),b=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[c],rotation:b,p0:d,p1:f}),u+=h}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});for(var n=e[0]||0,r=e[0]||0,a=e[1]||0,i=e[1]||0,o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);var u=this.fontSize();return{x:n-u/2,y:a-u/2,width:r-n+u,height:i-a+u}}destroy(){return j3.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}jb.TextPath=Fr,Fr.prototype._fillFunc=u8,Fr.prototype._strokeFunc=c8,Fr.prototype._fillFuncHit=u8,Fr.prototype._strokeFuncHit=c8,Fr.prototype.className="TextPath",Fr.prototype._attrsAffectingSize=["text","fontSize","data"],(0,Jre._registerNode)(Fr),jo.Factory.addGetterSetter(Fr,"data"),jo.Factory.addGetterSetter(Fr,"fontFamily","Arial"),jo.Factory.addGetterSetter(Fr,"fontSize",12,(0,s8.getNumberValidator)()),jo.Factory.addGetterSetter(Fr,"fontStyle",l8),jo.Factory.addGetterSetter(Fr,"align","left"),jo.Factory.addGetterSetter(Fr,"letterSpacing",0,(0,s8.getNumberValidator)()),jo.Factory.addGetterSetter(Fr,"textBaseline","middle"),jo.Factory.addGetterSetter(Fr,"fontVariant",l8),jo.Factory.addGetterSetter(Fr,"text",Zre),jo.Factory.addGetterSetter(Fr,"textDecoration",null),jo.Factory.addGetterSetter(Fr,"kerningFunc",null);var Vb={};Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.Transformer=void 0;const xn=ar,un=Bt,d8=qn,eae=Dr,tae=fg,h8=Oh,Vo=Ft,bu=Qe,nae=Ft;var p8="tr-konva",rae=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${p8}`).join(" "),f8="nodesRect",aae=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],iae={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const oae="ontouchstart"in Vo.Konva._global;function sae(t,e,n){if(t==="rotater")return n;e+=xn.Util.degToRad(iae[t]||0);var r=(xn.Util.radToDeg(e)%360+360)%360;return xn.Util._inRange(r,315+22.5,360)||xn.Util._inRange(r,0,22.5)?"ns-resize":xn.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":xn.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":xn.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":xn.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":xn.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":xn.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":xn.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(xn.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Ub=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],g8=1e8;function lae(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function m8(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),a=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:a}}function uae(t,e){const n=lae(t);return m8(t,e,n)}function cae(t,e,n){let r=e;for(let a=0;a<t.length;a++){const i=Vo.Konva.getAngle(t[a]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let Yt=class extends h8.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(rae,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return xn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return p8+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(r=>r.isAncestorOf(this)?(xn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},i=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(i,a),r.on(aae.map(o=>o+`.${this._getEventNamespace()}`).join(" "),a),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,n=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!e)return;const r=t.getAbsolutePosition(),a=r.x-e.x,i=r.y-e.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const s=o.getAbsolutePosition();o.setAbsolutePosition({x:s.x+a,y:s.y+i}),o.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f8),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f8,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(n),i=t.getAbsolutePosition(n),o=r.x*a.x-t.offsetX()*a.x,s=r.y*a.y-t.offsetY()*a.y;const l=(Vo.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:i.x+o*Math.cos(l)+s*Math.sin(-l),y:i.y+s*Math.cos(l)+o*Math.sin(l),width:r.width*a.x,height:r.height*a.y,rotation:l};return m8(u,-Vo.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-g8,y:-g8,width:0,height:0,rotation:0};const e=[];this.nodes().map(l=>{const u=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var c=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],d=l.getAbsoluteTransform();c.forEach(function(h){var f=d.point(h);e.push(f)})});const n=new xn.Transform;n.rotate(-Vo.Konva.getAngle(this.rotation()));var r=1/0,a=1/0,i=-1/0,o=-1/0;e.forEach(function(l){var u=n.point(l);r===void 0&&(r=i=u.x,a=o=u.y),r=Math.min(r,u.x),a=Math.min(a,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}),n.invert();const s=n.point({x:r,y:a});return{x:s.x,y:s.y,width:i-r,height:o-a,rotation:Vo.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Ub.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new tae.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:oae?10:"auto"}),n=this;e.on("mousedown touchstart",function(r){n._handleMouseDown(r)}),e.on("dragstart",r=>{e.stopDrag(),r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),e.on("mouseenter",()=>{var r=Vo.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),i=sae(t,r,a);e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new eae.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,n){var r=n.getParent(),a=r.padding();e.beginPath(),e.rect(-a,-a,n.width()+a*2,n.height()+a*2),e.moveTo(n.width()/2,-a),r.rotateEnabled()&&r.rotateLineVisible()&&e.lineTo(n.width()/2,-r.rotateAnchorOffset()*xn.Util._sign(n.height())-a),e.fillStrokeShape(n)},hitFunc:(e,n)=>{if(this.shouldOverdrawWholeArea()){var r=this.padding();e.beginPath(),e.rect(-r,-r,n.width()+r*2,n.height()+r*2),e.fillStrokeShape(n)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/a),this.cos=Math.abs(n/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var i=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-i.x,y:o.y-i.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(s=>{s._fire("transformstart",{evt:t.evt,target:s})})}_handleMouseMove(t){var e,n,r,a=this.findOne("."+this._movingAnchorName),i=a.getStage();i.setPointersPositions(t);const o=i.getPointerPosition();let s={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,t)),a.setAbsolutePosition(s);const u=a.getAbsolutePosition();if(!(l.x===u.x&&l.y===u.y)){if(this._movingAnchorName==="rotater"){var c=this._getNodeRect();e=a.x()-c.width/2,n=-a.y()+c.height/2;let j=Math.atan2(-n,e)+Math.PI/2;c.height<0&&(j-=Math.PI);var d=Vo.Konva.getAngle(this.rotation());const B=d+j,K=Vo.Konva.getAngle(this.rotationSnapTolerance()),Y=cae(this.rotationSnaps(),B,K)-c.rotation,Z=uae(c,Y);this._fitNodesInto(Z,t);return}var h=this.shiftBehavior(),f;h==="inverted"?f=this.keepRatio()&&!t.shiftKey:h==="none"?f=this.keepRatio():f=this.keepRatio()||t.shiftKey;var x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(m.x-a.x(),2)+Math.pow(m.y-a.y(),2));var y=this.findOne(".top-left").x()>m.x?-1:1,v=this.findOne(".top-left").y()>m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-left").x(m.x-e),this.findOne(".top-left").y(m.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(a.x()-m.x,2)+Math.pow(m.y-a.y(),2));var y=this.findOne(".top-right").x()<m.x?-1:1,v=this.findOne(".top-right").y()>m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-right").x(m.x+e),this.findOne(".top-right").y(m.y-n)}var b=a.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(m.x-a.x(),2)+Math.pow(a.y()-m.y,2));var y=m.x<a.x()?-1:1,v=a.y()<m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,a.x(m.x-e),a.y(m.y+n)}b=a.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(a.x()-m.x,2)+Math.pow(a.y()-m.y,2));var y=this.findOne(".bottom-right").x()<m.x?-1:1,v=this.findOne(".bottom-right").y()<m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".bottom-right").x(m.x+e),this.findOne(".bottom-right").y(m.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var x=this.centeredScaling()||t.altKey;if(x){var w=this.findOne(".top-left"),S=this.findOne(".bottom-right"),C=w.x(),E=w.y(),_=this.getWidth()-S.x(),N=this.getHeight()-S.y();S.move({x:-C,y:-E}),w.move({x:_,y:N})}var $=this.findOne(".top-left").getAbsolutePosition();e=$.x,n=$.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),D=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:P,height:D,rotation:Vo.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(n=>{n._fire("transformend",{evt:t,target:n})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();const r=1;if(xn.Util._inRange(t.width,-this.padding()*2-r,r)){this.update();return}if(xn.Util._inRange(t.height,-this.padding()*2-r,r)){this.update();return}var a=new xn.Transform;if(a.rotate(Vo.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=a.point({x:-this.padding()*2,y:0});t.x+=d.x,t.y+=d.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=a.point({x:0,y:-this.padding()*2});t.x+=d.x,t.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(n,t);d?t=d:xn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const i=1e7,o=new xn.Transform;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/i,n.height/i);const s=new xn.Transform,l=t.width/i,u=t.height/i;this.flipEnabled()===!1?(s.translate(t.x,t.y),s.rotate(t.rotation),s.translate(t.width<0?t.width:0,t.height<0?t.height:0),s.scale(Math.abs(l),Math.abs(u))):(s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(l,u));const c=s.multiply(o.invert());this._nodes.forEach(d=>{var h;const f=d.getParent().getAbsoluteTransform(),m=d.getTransform().copy();m.translate(d.offsetX(),d.offsetY());const y=new xn.Transform;y.multiply(f.copy().invert()).multiply(c).multiply(f).multiply(m);const v=y.decompose();d.setAttrs(v),this._fire("transform",{evt:e,target:d}),d._fire("transform",{evt:e,target:d}),(h=d.getLayer())===null||h===void 0||h.batchDraw()}),this.rotation(xn.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(xn.Util._getRotation(e.rotation));var n=e.width,r=e.height,a=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();const l=this.find("._anchor");l.forEach(c=>{c.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:i&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:i&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:i&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:i&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:i&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:i&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*xn.Util._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const u=this.anchorStyleFunc();u&&l.forEach(c=>{u(c)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),h8.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return d8.Node.prototype.toObject.call(this)}clone(t){var e=d8.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Vb.Transformer=Yt;function dae(t){return t instanceof Array||xn.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Ub.indexOf(e)===-1&&xn.Util.warn("Unknown anchor name: "+e+". Available names are: "+Ub.join(", "))}),t||[]}Yt.prototype.className="Transformer",(0,nae._registerNode)(Yt),un.Factory.addGetterSetter(Yt,"enabledAnchors",Ub,dae),un.Factory.addGetterSetter(Yt,"flipEnabled",!0,(0,bu.getBooleanValidator)()),un.Factory.addGetterSetter(Yt,"resizeEnabled",!0),un.Factory.addGetterSetter(Yt,"anchorSize",10,(0,bu.getNumberValidator)()),un.Factory.addGetterSetter(Yt,"rotateEnabled",!0),un.Factory.addGetterSetter(Yt,"rotateLineVisible",!0),un.Factory.addGetterSetter(Yt,"rotationSnaps",[]),un.Factory.addGetterSetter(Yt,"rotateAnchorOffset",50,(0,bu.getNumberValidator)()),un.Factory.addGetterSetter(Yt,"rotateAnchorCursor","crosshair"),un.Factory.addGetterSetter(Yt,"rotationSnapTolerance",5,(0,bu.getNumberValidator)()),un.Factory.addGetterSetter(Yt,"borderEnabled",!0),un.Factory.addGetterSetter(Yt,"anchorStroke","rgb(0, 161, 255)"),un.Factory.addGetterSetter(Yt,"anchorStrokeWidth",1,(0,bu.getNumberValidator)()),un.Factory.addGetterSetter(Yt,"anchorFill","white"),un.Factory.addGetterSetter(Yt,"anchorCornerRadius",0,(0,bu.getNumberValidator)()),un.Factory.addGetterSetter(Yt,"borderStroke","rgb(0, 161, 255)"),un.Factory.addGetterSetter(Yt,"borderStrokeWidth",1,(0,bu.getNumberValidator)()),un.Factory.addGetterSetter(Yt,"borderDash"),un.Factory.addGetterSetter(Yt,"keepRatio",!0),un.Factory.addGetterSetter(Yt,"shiftBehavior","default"),un.Factory.addGetterSetter(Yt,"centeredScaling",!1),un.Factory.addGetterSetter(Yt,"ignoreStroke",!1),un.Factory.addGetterSetter(Yt,"padding",0,(0,bu.getNumberValidator)()),un.Factory.addGetterSetter(Yt,"node"),un.Factory.addGetterSetter(Yt,"nodes"),un.Factory.addGetterSetter(Yt,"boundBoxFunc"),un.Factory.addGetterSetter(Yt,"anchorDragBoundFunc"),un.Factory.addGetterSetter(Yt,"anchorStyleFunc"),un.Factory.addGetterSetter(Yt,"shouldOverdrawWholeArea",!1),un.Factory.addGetterSetter(Yt,"useSingleNodeRotation",!0),un.Factory.backCompat(Yt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.Wedge=void 0;const Gb=Bt,hae=Dr,pae=Ft,y8=Qe,fae=Ft;class ll extends hae.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,pae.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Wb.Wedge=ll,ll.prototype.className="Wedge",ll.prototype._centroid=!0,ll.prototype._attrsAffectingSize=["radius"],(0,fae._registerNode)(ll),Gb.Factory.addGetterSetter(ll,"radius",0,(0,y8.getNumberValidator)()),Gb.Factory.addGetterSetter(ll,"angle",0,(0,y8.getNumberValidator)()),Gb.Factory.addGetterSetter(ll,"clockwise",!1),Gb.Factory.backCompat(ll,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Hb={};Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.Blur=void 0;const b8=Bt,gae=qn,mae=Qe;function v8(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var yae=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],bae=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function vae(t,e){var n=t.data,r=t.width,a=t.height,i,o,s,l,u,c,d,h,f,m,y,v,b,x,w,S,C,E,_,N,$,P,D,j,B=e+e+1,K=r-1,Y=a-1,Z=e+1,H=Z*(Z+1)/2,F=new v8,Q=null,J=F,re=null,se=null,he=yae[e],de=bae[e];for(s=1;s<B;s++)J=J.next=new v8,s===Z&&(Q=J);for(J.next=F,d=c=0,o=0;o<a;o++){for(S=C=E=_=h=f=m=y=0,v=Z*(N=n[c]),b=Z*($=n[c+1]),x=Z*(P=n[c+2]),w=Z*(D=n[c+3]),h+=H*N,f+=H*$,m+=H*P,y+=H*D,J=F,s=0;s<Z;s++)J.r=N,J.g=$,J.b=P,J.a=D,J=J.next;for(s=1;s<Z;s++)l=c+((K<s?K:s)<<2),h+=(J.r=N=n[l])*(j=Z-s),f+=(J.g=$=n[l+1])*j,m+=(J.b=P=n[l+2])*j,y+=(J.a=D=n[l+3])*j,S+=N,C+=$,E+=P,_+=D,J=J.next;for(re=F,se=Q,i=0;i<r;i++)n[c+3]=D=y*he>>de,D!==0?(D=255/D,n[c]=(h*he>>de)*D,n[c+1]=(f*he>>de)*D,n[c+2]=(m*he>>de)*D):n[c]=n[c+1]=n[c+2]=0,h-=v,f-=b,m-=x,y-=w,v-=re.r,b-=re.g,x-=re.b,w-=re.a,l=d+((l=i+e+1)<K?l:K)<<2,S+=re.r=n[l],C+=re.g=n[l+1],E+=re.b=n[l+2],_+=re.a=n[l+3],h+=S,f+=C,m+=E,y+=_,re=re.next,v+=N=se.r,b+=$=se.g,x+=P=se.b,w+=D=se.a,S-=N,C-=$,E-=P,_-=D,se=se.next,c+=4;d+=r}for(i=0;i<r;i++){for(C=E=_=S=f=m=y=h=0,c=i<<2,v=Z*(N=n[c]),b=Z*($=n[c+1]),x=Z*(P=n[c+2]),w=Z*(D=n[c+3]),h+=H*N,f+=H*$,m+=H*P,y+=H*D,J=F,s=0;s<Z;s++)J.r=N,J.g=$,J.b=P,J.a=D,J=J.next;for(u=r,s=1;s<=e;s++)c=u+i<<2,h+=(J.r=N=n[c])*(j=Z-s),f+=(J.g=$=n[c+1])*j,m+=(J.b=P=n[c+2])*j,y+=(J.a=D=n[c+3])*j,S+=N,C+=$,E+=P,_+=D,J=J.next,s<Y&&(u+=r);for(c=i,re=F,se=Q,o=0;o<a;o++)l=c<<2,n[l+3]=D=y*he>>de,D>0?(D=255/D,n[l]=(h*he>>de)*D,n[l+1]=(f*he>>de)*D,n[l+2]=(m*he>>de)*D):n[l]=n[l+1]=n[l+2]=0,h-=v,f-=b,m-=x,y-=w,v-=re.r,b-=re.g,x-=re.b,w-=re.a,l=i+((l=o+Z)<Y?l:Y)*r<<2,h+=S+=re.r=n[l],f+=C+=re.g=n[l+1],m+=E+=re.b=n[l+2],y+=_+=re.a=n[l+3],re=re.next,v+=N=se.r,b+=$=se.g,x+=P=se.b,w+=D=se.a,S-=N,C-=$,E-=P,_-=D,se=se.next,c+=r}}const xae=function(t){var e=Math.round(this.blurRadius());e>0&&vae(t,e)};Hb.Blur=xae,b8.Factory.addGetterSetter(gae.Node,"blurRadius",0,(0,mae.getNumberValidator)(),b8.Factory.afterSetFilter);var qb={};Object.defineProperty(qb,"__esModule",{value:!0}),qb.Brighten=void 0;const x8=Bt,wae=qn,kae=Qe,Sae=function(t){var e=this.brightness()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=4)n[a]+=e,n[a+1]+=e,n[a+2]+=e};qb.Brighten=Sae,x8.Factory.addGetterSetter(wae.Node,"brightness",0,(0,kae.getNumberValidator)(),x8.Factory.afterSetFilter);var Kb={};Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.Contrast=void 0;const w8=Bt,Cae=qn,Eae=Qe,Iae=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,a=150,i=150,o=150,s;for(s=0;s<r;s+=4)a=n[s],i=n[s+1],o=n[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[s]=a,n[s+1]=i,n[s+2]=o};Kb.Contrast=Iae,w8.Factory.addGetterSetter(Cae.Node,"contrast",0,(0,Eae.getNumberValidator)(),w8.Factory.afterSetFilter);var Xb={};Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.Emboss=void 0;const vu=Bt,Yb=qn,Tae=ar,k8=Qe,Nae=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=t.data,l=t.width,u=t.height,c=l*4,d=u;switch(r){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:Tae.Util.error("Unknown emboss direction: "+r)}do{var h=(d-1)*c,f=i;d+f<1&&(f=0),d+f>u&&(f=0);var m=(d-1+f)*l*4,y=l;do{var v=h+(y-1)*4,b=o;y+b<1&&(b=0),y+b>l&&(b=0);var x=m+(y-1+b)*4,w=s[v]-s[x],S=s[v+1]-s[x+1],C=s[v+2]-s[x+2],E=w,_=E>0?E:-E,N=S>0?S:-S,$=C>0?C:-C;if(N>_&&(E=S),$>_&&(E=C),E*=e,a){var P=s[v]+E,D=s[v+1]+E,j=s[v+2]+E;s[v]=P>255?255:P<0?0:P,s[v+1]=D>255?255:D<0?0:D,s[v+2]=j>255?255:j<0?0:j}else{var B=n-E;B<0?B=0:B>255&&(B=255),s[v]=s[v+1]=s[v+2]=B}}while(--y)}while(--d)};Xb.Emboss=Nae,vu.Factory.addGetterSetter(Yb.Node,"embossStrength",.5,(0,k8.getNumberValidator)(),vu.Factory.afterSetFilter),vu.Factory.addGetterSetter(Yb.Node,"embossWhiteLevel",.5,(0,k8.getNumberValidator)(),vu.Factory.afterSetFilter),vu.Factory.addGetterSetter(Yb.Node,"embossDirection","top-left",null,vu.Factory.afterSetFilter),vu.Factory.addGetterSetter(Yb.Node,"embossBlend",!1,null,vu.Factory.afterSetFilter);var Qb={};Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.Enhance=void 0;const S8=Bt,_ae=qn,Oae=Qe;function U3(t,e,n,r,a){var i=n-e,o=a-r,s;return i===0?r+o/2:o===0?r:(s=(t-e)/i,s=o*s+r,s)}const Rae=function(t){var e=t.data,n=e.length,r=e[0],a=r,i,o=e[1],s=o,l,u=e[2],c=u,d,h,f=this.enhance();if(f!==0){for(h=0;h<n;h+=4)i=e[h+0],i<r?r=i:i>a&&(a=i),l=e[h+1],l<o?o=l:l>s&&(s=l),d=e[h+2],d<u?u=d:d>c&&(c=d);a===r&&(a=255,r=0),s===o&&(s=255,o=0),c===u&&(c=255,u=0);var m,y,v,b,x,w,S,C,E;for(f>0?(y=a+f*(255-a),v=r-f*(r-0),x=s+f*(255-s),w=o-f*(o-0),C=c+f*(255-c),E=u-f*(u-0)):(m=(a+r)*.5,y=a+f*(a-m),v=r+f*(r-m),b=(s+o)*.5,x=s+f*(s-b),w=o+f*(o-b),S=(c+u)*.5,C=c+f*(c-S),E=u+f*(u-S)),h=0;h<n;h+=4)e[h+0]=U3(e[h+0],r,a,v,y),e[h+1]=U3(e[h+1],o,s,w,x),e[h+2]=U3(e[h+2],u,c,E,C)}};Qb.Enhance=Rae,S8.Factory.addGetterSetter(_ae.Node,"enhance",0,(0,Oae.getNumberValidator)(),S8.Factory.afterSetFilter);var Jb={};Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.Grayscale=void 0;const $ae=function(t){var e=t.data,n=e.length,r,a;for(r=0;r<n;r+=4)a=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=a,e[r+1]=a,e[r+2]=a};Jb.Grayscale=$ae;var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.HSL=void 0;const Dh=Bt,W3=qn,G3=Qe;Dh.Factory.addGetterSetter(W3.Node,"hue",0,(0,G3.getNumberValidator)(),Dh.Factory.afterSetFilter),Dh.Factory.addGetterSetter(W3.Node,"saturation",0,(0,G3.getNumberValidator)(),Dh.Factory.afterSetFilter),Dh.Factory.addGetterSetter(W3.Node,"luminance",0,(0,G3.getNumberValidator)(),Dh.Factory.afterSetFilter);const Mae=function(t){var e=t.data,n=e.length,r=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=r*a*Math.cos(i*Math.PI/180),u=r*a*Math.sin(i*Math.PI/180),c=.299*r+.701*l+.167*u,d=.587*r-.587*l+.33*u,h=.114*r-.114*l-.497*u,f=.299*r-.299*l-.328*u,m=.587*r+.413*l+.035*u,y=.114*r-.114*l+.293*u,v=.299*r-.3*l+1.25*u,b=.587*r-.586*l-1.05*u,x=.114*r+.886*l-.2*u,w,S,C,E;for(s=0;s<n;s+=4)w=e[s+0],S=e[s+1],C=e[s+2],E=e[s+3],e[s+0]=c*w+d*S+h*C+o,e[s+1]=f*w+m*S+y*C+o,e[s+2]=v*w+b*S+x*C+o,e[s+3]=E};Zb.HSL=Mae;var ev={};Object.defineProperty(ev,"__esModule",{value:!0}),ev.HSV=void 0;const Fh=Bt,H3=qn,q3=Qe,Pae=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=r*a*Math.cos(i*Math.PI/180),l=r*a*Math.sin(i*Math.PI/180),u=.299*r+.701*s+.167*l,c=.587*r-.587*s+.33*l,d=.114*r-.114*s-.497*l,h=.299*r-.299*s-.328*l,f=.587*r+.413*s+.035*l,m=.114*r-.114*s+.293*l,y=.299*r-.3*s+1.25*l,v=.587*r-.586*s-1.05*l,b=.114*r+.886*s-.2*l,x,w,S,C;for(o=0;o<n;o+=4)x=e[o+0],w=e[o+1],S=e[o+2],C=e[o+3],e[o+0]=u*x+c*w+d*S,e[o+1]=h*x+f*w+m*S,e[o+2]=y*x+v*w+b*S,e[o+3]=C};ev.HSV=Pae,Fh.Factory.addGetterSetter(H3.Node,"hue",0,(0,q3.getNumberValidator)(),Fh.Factory.afterSetFilter),Fh.Factory.addGetterSetter(H3.Node,"saturation",0,(0,q3.getNumberValidator)(),Fh.Factory.afterSetFilter),Fh.Factory.addGetterSetter(H3.Node,"value",0,(0,q3.getNumberValidator)(),Fh.Factory.afterSetFilter);var tv={};Object.defineProperty(tv,"__esModule",{value:!0}),tv.Invert=void 0;const Aae=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};tv.Invert=Aae;var nv={};Object.defineProperty(nv,"__esModule",{value:!0}),nv.Kaleidoscope=void 0;const rv=Bt,C8=qn,E8=ar,I8=Qe;var Lae=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,h=0,f=0,m=0,y=0,v,b=Math.sqrt(s*s+l*l);c=i-s,d=o-l,v=Math.sqrt(c*c+d*d),b=v>b?v:b;var x=o,w=i,S,C,E=360/w*Math.PI/180,_,N;for(C=0;C<w;C+=1)for(_=Math.sin(C*E),N=Math.cos(C*E),S=0;S<x;S+=1)c=Math.floor(s+b*S/x*N),d=Math.floor(l+b*S/x*_),u=(d*i+c)*4,h=r[u+0],f=r[u+1],m=r[u+2],y=r[u+3],u=(C+S*i)*4,a[u+0]=h,a[u+1]=f,a[u+2]=m,a[u+3]=y},Dae=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,h,f,m=0,y=0,v=0,b=0,x,w=Math.sqrt(s*s+l*l);c=i-s,d=o-l,x=Math.sqrt(c*c+d*d),w=x>w?x:w;var S=o,C=i,E,_,N=n.polarRotation||0,$,P;for(c=0;c<i;c+=1)for(d=0;d<o;d+=1)h=c-s,f=d-l,E=Math.sqrt(h*h+f*f)*S/w,_=(Math.atan2(f,h)*180/Math.PI+360+N)%360,_=_*C/360,$=Math.floor(_),P=Math.floor(E),u=(P*i+$)*4,m=r[u+0],y=r[u+1],v=r[u+2],b=r[u+3],u=(d*i+c)*4,a[u+0]=m,a[u+1]=y,a[u+2]=v,a[u+3]=b};const Fae=function(t){var e=t.width,n=t.height,r,a,i,o,s,l,u,c,d,h,f=Math.round(this.kaleidoscopePower()),m=Math.round(this.kaleidoscopeAngle()),y=Math.floor(e*(m%360)/360);if(!(f<1)){var v=E8.Util.createCanvasElement();v.width=e,v.height=n;var b=v.getContext("2d").getImageData(0,0,e,n);E8.Util.releaseCanvas(v),Lae(t,b,{polarCenterX:e/2,polarCenterY:n/2});for(var x=e/Math.pow(2,f);x<=8;)x=x*2,f-=1;x=Math.ceil(x);var w=x,S=0,C=w,E=1;for(y+x>e&&(S=w,C=0,E=-1),a=0;a<n;a+=1)for(r=S;r!==C;r+=E)i=Math.round(r+y)%e,d=(e*a+i)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],h=(e*a+r)*4,b.data[h+0]=s,b.data[h+1]=l,b.data[h+2]=u,b.data[h+3]=c;for(a=0;a<n;a+=1)for(w=Math.floor(x),o=0;o<f;o+=1){for(r=0;r<w+1;r+=1)d=(e*a+r)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],h=(e*a+w*2-r-1)*4,b.data[h+0]=s,b.data[h+1]=l,b.data[h+2]=u,b.data[h+3]=c;w*=2}Dae(b,t,{polarRotation:0})}};nv.Kaleidoscope=Fae,rv.Factory.addGetterSetter(C8.Node,"kaleidoscopePower",2,(0,I8.getNumberValidator)(),rv.Factory.afterSetFilter),rv.Factory.addGetterSetter(C8.Node,"kaleidoscopeAngle",0,(0,I8.getNumberValidator)(),rv.Factory.afterSetFilter);var av={};Object.defineProperty(av,"__esModule",{value:!0}),av.Mask=void 0;const T8=Bt,Bae=qn,zae=Qe;function iv(t,e,n){var r=(n*t.width+e)*4,a=[];return a.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),a}function yg(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function jae(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function Vae(t,e){var n=iv(t,0,0),r=iv(t,t.width-1,0),a=iv(t,0,t.height-1),i=iv(t,t.width-1,t.height-1),o=e||10;if(yg(n,r)<o&&yg(r,i)<o&&yg(i,a)<o&&yg(a,n)<o){for(var s=jae([r,n,i,a]),l=[],u=0;u<t.width*t.height;u++){var c=yg(s,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=c<o?0:255}return l}}function Uae(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function Wae(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var h=0;h<a;h++){var f=s+d-i,m=l+h-i;if(f>=0&&f<n&&m>=0&&m<e){var y=f*e+m,v=r[d*a+h];c+=t[y]*v}}o[u]=c===255*8?255:0}return o}function Gae(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var h=0;h<a;h++){var f=s+d-i,m=l+h-i;if(f>=0&&f<n&&m>=0&&m<e){var y=f*e+m,v=r[d*a+h];c+=t[y]*v}}o[u]=c>=255*4?255:0}return o}function Hae(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var h=0;h<a;h++){var f=s+d-i,m=l+h-i;if(f>=0&&f<n&&m>=0&&m<e){var y=f*e+m,v=r[d*a+h];c+=t[y]*v}}o[u]=c}return o}const qae=function(t){var e=this.threshold(),n=Vae(t,e);return n&&(n=Wae(n,t.width,t.height),n=Gae(n,t.width,t.height),n=Hae(n,t.width,t.height),Uae(t,n)),t};av.Mask=qae,T8.Factory.addGetterSetter(Bae.Node,"threshold",0,(0,zae.getNumberValidator)(),T8.Factory.afterSetFilter);var ov={};Object.defineProperty(ov,"__esModule",{value:!0}),ov.Noise=void 0;const N8=Bt,Kae=qn,Xae=Qe,Yae=function(t){var e=this.noise()*255,n=t.data,r=n.length,a=e/2,i;for(i=0;i<r;i+=4)n[i+0]+=a-2*a*Math.random(),n[i+1]+=a-2*a*Math.random(),n[i+2]+=a-2*a*Math.random()};ov.Noise=Yae,N8.Factory.addGetterSetter(Kae.Node,"noise",.2,(0,Xae.getNumberValidator)(),N8.Factory.afterSetFilter);var sv={};Object.defineProperty(sv,"__esModule",{value:!0}),sv.Pixelate=void 0;const _8=Bt,Qae=ar,Jae=qn,Zae=Qe,eie=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,a,i,o,s,l,u,c,d=Math.ceil(n/e),h=Math.ceil(r/e),f,m,y,v,b,x,w,S=t.data;if(e<=0){Qae.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<d;b+=1)for(x=0;x<h;x+=1){for(s=0,l=0,u=0,c=0,f=b*e,m=f+e,y=x*e,v=y+e,w=0,a=f;a<m;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,s+=S[o+0],l+=S[o+1],u+=S[o+2],c+=S[o+3],w+=1);for(s=s/w,l=l/w,u=u/w,c=c/w,a=f;a<m;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,S[o+0]=s,S[o+1]=l,S[o+2]=u,S[o+3]=c)}};sv.Pixelate=eie,_8.Factory.addGetterSetter(Jae.Node,"pixelSize",8,(0,Zae.getNumberValidator)(),_8.Factory.afterSetFilter);var lv={};Object.defineProperty(lv,"__esModule",{value:!0}),lv.Posterize=void 0;const O8=Bt,tie=qn,nie=Qe,rie=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,a=255/e,i;for(i=0;i<r;i+=1)n[i]=Math.floor(n[i]/a)*a};lv.Posterize=rie,O8.Factory.addGetterSetter(tie.Node,"levels",.5,(0,nie.getNumberValidator)(),O8.Factory.afterSetFilter);var uv={};Object.defineProperty(uv,"__esModule",{value:!0}),uv.RGB=void 0;const cv=Bt,K3=qn,aie=Qe,iie=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<n;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*r,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};uv.RGB=iie,cv.Factory.addGetterSetter(K3.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),cv.Factory.addGetterSetter(K3.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),cv.Factory.addGetterSetter(K3.Node,"blue",0,aie.RGBComponent,cv.Factory.afterSetFilter);var dv={};Object.defineProperty(dv,"__esModule",{value:!0}),dv.RGBA=void 0;const bg=Bt,hv=qn,oie=Qe,sie=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<n;s+=4)l=1-o,e[s]=r*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};dv.RGBA=sie,bg.Factory.addGetterSetter(hv.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),bg.Factory.addGetterSetter(hv.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),bg.Factory.addGetterSetter(hv.Node,"blue",0,oie.RGBComponent,bg.Factory.afterSetFilter),bg.Factory.addGetterSetter(hv.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var pv={};Object.defineProperty(pv,"__esModule",{value:!0}),pv.Sepia=void 0;const lie=function(t){var e=t.data,n=e.length,r,a,i,o;for(r=0;r<n;r+=4)a=e[r+0],i=e[r+1],o=e[r+2],e[r+0]=Math.min(255,a*.393+i*.769+o*.189),e[r+1]=Math.min(255,a*.349+i*.686+o*.168),e[r+2]=Math.min(255,a*.272+i*.534+o*.131)};pv.Sepia=lie;var fv={};Object.defineProperty(fv,"__esModule",{value:!0}),fv.Solarize=void 0;const uie=function(t){var e=t.data,n=t.width,r=t.height,a=n*4,i=r;do{var o=(i-1)*a,s=n;do{var l=o+(s-1)*4,u=e[l],c=e[l+1],d=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),d>127&&(d=255-d),e[l]=u,e[l+1]=c,e[l+2]=d}while(--s)}while(--i)};fv.Solarize=uie;var gv={};Object.defineProperty(gv,"__esModule",{value:!0}),gv.Threshold=void 0;const R8=Bt,cie=qn,die=Qe,hie=function(t){var e=this.threshold()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=1)n[a]=n[a]<e?0:255};gv.Threshold=hie,R8.Factory.addGetterSetter(cie.Node,"threshold",.5,(0,die.getNumberValidator)(),R8.Factory.afterSetFilter),Object.defineProperty(pb,"__esModule",{value:!0}),pb.Konva=void 0;const $8=fb,pie=Eb,fie=Nb,gie=Rb,mie=$b,yie=Mb,M8=Ah,bie=hg,vie=$h,xie=fg,wie=Lb,kie=Db,Sie=Fb,Cie=Bb,Eie=zc,Iie=jb,Tie=Vb,Nie=Wb,_ie=Hb,Oie=qb,Rie=Kb,$ie=Xb,Mie=Qb,Pie=Jb,Aie=Zb,Lie=ev,Die=tv,Fie=nv,Bie=av,zie=ov,jie=sv,Vie=lv,Uie=uv,Wie=dv,Gie=pv,Hie=fv,qie=gv;pb.Konva=$8.Konva.Util._assign($8.Konva,{Arc:pie.Arc,Arrow:fie.Arrow,Circle:gie.Circle,Ellipse:mie.Ellipse,Image:yie.Image,Label:M8.Label,Tag:M8.Tag,Line:bie.Line,Path:vie.Path,Rect:xie.Rect,RegularPolygon:wie.RegularPolygon,Ring:kie.Ring,Sprite:Sie.Sprite,Star:Cie.Star,Text:Eie.Text,TextPath:Iie.TextPath,Transformer:Tie.Transformer,Wedge:Nie.Wedge,Filters:{Blur:_ie.Blur,Brighten:Oie.Brighten,Contrast:Rie.Contrast,Emboss:$ie.Emboss,Enhance:Mie.Enhance,Grayscale:Pie.Grayscale,HSL:Aie.HSL,HSV:Lie.HSV,Invert:Die.Invert,Kaleidoscope:Fie.Kaleidoscope,Mask:Bie.Mask,Noise:zie.Noise,Pixelate:jie.Pixelate,Posterize:Vie.Posterize,RGB:Uie.RGB,RGBA:Wie.RGBA,Sepia:Gie.Sepia,Solarize:Hie.Solarize,Threshold:qie.Threshold}});var Kie=g3.exports;Object.defineProperty(Kie,"__esModule",{value:!0});const Xie=pb;g3.exports=Xie.Konva;var Yie=g3.exports;const P8=Ii(Yie);var X3={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=fb;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=fb;t.exports=r.Konva})(X3,X3.exports);var Qie=X3.exports;const vg=Ii(Qie);var A8={exports:{}};/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Jie=function(t){var e={},n=O,r=af,a=Object.assign;function i(p){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+p,k=1;k<arguments.length;k++)g+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(p){return p===null||typeof p!="object"?null:(p=S&&p[S]||p["@@iterator"],typeof p=="function"?p:null)}function E(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case c:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case f:return(p.displayName||"Context")+".Consumer";case h:return(p._context.displayName||"Context")+".Provider";case m:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case b:return g=p.displayName||null,g!==null?g:E(p.type)||"Memo";case x:g=p._payload,p=p._init;try{return E(p(g))}catch{}}return null}function _(p){var g=p.type;switch(p.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=g.render,p=p.displayName||p.name||"",g.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(g);case 8:return g===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function N(p){var g=p,k=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,g.flags&4098&&(k=g.return),p=g.return;while(p)}return g.tag===3?k:null}function $(p){if(N(p)!==p)throw Error(i(188))}function P(p){var g=p.alternate;if(!g){if(g=N(p),g===null)throw Error(i(188));return g!==p?null:p}for(var k=p,I=g;;){var T=k.return;if(T===null)break;var M=T.alternate;if(M===null){if(I=T.return,I!==null){k=I;continue}break}if(T.child===M.child){for(M=T.child;M;){if(M===k)return $(T),p;if(M===I)return $(T),g;M=M.sibling}throw Error(i(188))}if(k.return!==I.return)k=T,I=M;else{for(var W=!1,le=T.child;le;){if(le===k){W=!0,k=T,I=M;break}if(le===I){W=!0,I=T,k=M;break}le=le.sibling}if(!W){for(le=M.child;le;){if(le===k){W=!0,k=M,I=T;break}if(le===I){W=!0,I=M,k=T;break}le=le.sibling}if(!W)throw Error(i(189))}}if(k.alternate!==I)throw Error(i(190))}if(k.tag!==3)throw Error(i(188));return k.stateNode.current===k?p:g}function D(p){return p=P(p),p!==null?j(p):null}function j(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var g=j(p);if(g!==null)return g;p=p.sibling}return null}function B(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var g=B(p);if(g!==null)return g}p=p.sibling}return null}var K=Array.isArray,Y=t.getPublicInstance,Z=t.getRootHostContext,H=t.getChildHostContext,F=t.prepareForCommit,Q=t.resetAfterCommit,J=t.createInstance,re=t.appendInitialChild,se=t.finalizeInitialChildren,he=t.prepareUpdate,de=t.shouldSetTextContent,ie=t.createTextInstance,xe=t.scheduleTimeout,q=t.cancelTimeout,oe=t.noTimeout,pe=t.isPrimaryRenderer,Ee=t.supportsMutation,Ie=t.supportsPersistence,_e=t.supportsHydration,Fe=t.getInstanceFromNode,Xe=t.preparePortalMount,$e=t.getCurrentEventPriority,lt=t.detachDeletedInstance,Ze=t.supportsMicrotasks,nt=t.scheduleMicrotask,et=t.supportsTestSelectors,ln=t.findFiberRoot,Ut=t.getBoundingRect,Jt=t.getTextContent,Zt=t.isHiddenSubtree,Mt=t.matchAccessibilityRole,It=t.setFocusIfFocusable,Vn=t.setupIntersectionObserver,Qn=t.appendChild,Ua=t.appendChildToContainer,Rn=t.commitTextUpdate,ei=t.commitMount,ko=t.commitUpdate,wi=t.insertBefore,gn=t.insertInContainerBefore,ti=t.removeChild,ki=t.removeChildFromContainer,Si=t.resetTextContent,Rs=t.hideInstance,ba=t.hideTextInstance,Nl=t.unhideInstance,Ed=t.unhideTextInstance,Qo=t.clearContainer,Wt=t.cloneInstance,ue=t.createContainerChildSet,ge=t.appendChildToContainerChildSet,ke=t.finalizeContainerChildren,Me=t.replaceContainerChildren,Ge=t.cloneHiddenInstance,bt=t.cloneHiddenTextInstance,ut=t.canHydrateInstance,ot=t.canHydrateTextInstance,tt=t.canHydrateSuspenseInstance,Pt=t.isSuspenseInstancePending,Ln=t.isSuspenseInstanceFallback,xt=t.getSuspenseInstanceFallbackErrorDetails,dn=t.registerSuspenseInstanceRetry,mn=t.getNextHydratableSibling,$r=t.getFirstHydratableChild,ir=t.getFirstHydratableChildWithinContainer,gr=t.getFirstHydratableChildWithinSuspenseInstance,Jo=t.hydrateInstance,Ui=t.hydrateTextInstance,va=t.hydrateSuspenseInstance,So=t.getNextHydratableInstanceAfterSuspenseInstance,Ku=t.commitHydratedContainer,Xu=t.commitHydratedSuspenseInstance,_l=t.clearSuspenseBoundary,Zo=t.clearSuspenseBoundaryFromContainer,Co=t.shouldDeleteUnhydratedTailInstances,rn=t.didNotMatchHydratedContainerTextInstance,hn=t.didNotMatchHydratedTextInstance,kr;function Dt(p){if(kr===void 0)try{throw Error()}catch(k){var g=k.stack.trim().match(/\n( *(at )?)/);kr=g&&g[1]||""}return`
`+kr+p}var Ol=!1;function Mp(p,g){if(!p||Ol)return"";Ol=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Oe){var I=Oe}Reflect.construct(p,[],g)}else{try{g.call()}catch(Oe){I=Oe}p.call(g.prototype)}else{try{throw Error()}catch(Oe){I=Oe}p()}}catch(Oe){if(Oe&&I&&typeof Oe.stack=="string"){for(var T=Oe.stack.split(`
`),M=I.stack.split(`
`),W=T.length-1,le=M.length-1;1<=W&&0<=le&&T[W]!==M[le];)le--;for(;1<=W&&0<=le;W--,le--)if(T[W]!==M[le]){if(W!==1||le!==1)do if(W--,le--,0>le||T[W]!==M[le]){var ye=`
`+T[W].replace(" at new "," at ");return p.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",p.displayName)),ye}while(1<=W&&0<=le);break}}}finally{Ol=!1,Error.prepareStackTrace=k}return(p=p?p.displayName||p.name:"")?Dt(p):""}var ek=Object.prototype.hasOwnProperty,Yu=[],Rl=-1;function Wi(p){return{current:p}}function Sn(p){0>Rl||(p.current=Yu[Rl],Yu[Rl]=null,Rl--)}function yn(p,g){Rl++,Yu[Rl]=p.current,p.current=g}var Gi={},Wr=Wi(Gi),xa=Wi(!1),$s=Gi;function $l(p,g){var k=p.type.contextTypes;if(!k)return Gi;var I=p.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===g)return I.__reactInternalMemoizedMaskedChildContext;var T={},M;for(M in k)T[M]=g[M];return I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=g,p.__reactInternalMemoizedMaskedChildContext=T),T}function wa(p){return p=p.childContextTypes,p!=null}function Id(){Sn(xa),Sn(Wr)}function $0(p,g,k){if(Wr.current!==Gi)throw Error(i(168));yn(Wr,g),yn(xa,k)}function Un(p,g,k){var I=p.stateNode;if(g=g.childContextTypes,typeof I.getChildContext!="function")return k;I=I.getChildContext();for(var T in I)if(!(T in g))throw Error(i(108,_(p)||"Unknown",T));return a({},k,I)}function es(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Gi,$s=Wr.current,yn(Wr,p),yn(xa,xa.current),!0}function Qu(p,g,k){var I=p.stateNode;if(!I)throw Error(i(169));k?(p=Un(p,g,$s),I.__reactInternalMemoizedMergedChildContext=p,Sn(xa),Sn(Wr),yn(Wr,p)):Sn(xa),yn(xa,k)}var Ci=Math.clz32?Math.clz32:tk,M0=Math.log,Pp=Math.LN2;function tk(p){return p>>>=0,p===0?32:31-(M0(p)/Pp|0)|0}var Td=64,Ms=4194304;function Ju(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Ps(p,g){var k=p.pendingLanes;if(k===0)return 0;var I=0,T=p.suspendedLanes,M=p.pingedLanes,W=k&268435455;if(W!==0){var le=W&~T;le!==0?I=Ju(le):(M&=W,M!==0&&(I=Ju(M)))}else W=k&~T,W!==0?I=Ju(W):M!==0&&(I=Ju(M));if(I===0)return 0;if(g!==0&&g!==I&&!(g&T)&&(T=I&-I,M=g&-g,T>=M||T===16&&(M&4194240)!==0))return g;if(I&4&&(I|=k&16),g=p.entangledLanes,g!==0)for(p=p.entanglements,g&=I;0<g;)k=31-Ci(g),T=1<<k,I|=p[k],g&=~T;return I}function L(p,g){switch(p){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(p,g){for(var k=p.suspendedLanes,I=p.pingedLanes,T=p.expirationTimes,M=p.pendingLanes;0<M;){var W=31-Ci(M),le=1<<W,ye=T[W];ye===-1?(!(le&k)||le&I)&&(T[W]=L(le,g)):ye<=g&&(p.expiredLanes|=le),M&=~le}}function ee(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function ae(){var p=Td;return Td<<=1,!(Td&4194240)&&(Td=64),p}function ve(p){for(var g=[],k=0;31>k;k++)g.push(p);return g}function Ce(p,g,k){p.pendingLanes|=g,g!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,g=31-Ci(g),p[g]=k}function Ae(p,g){var k=p.pendingLanes&~g;p.pendingLanes=g,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=g,p.mutableReadLanes&=g,p.entangledLanes&=g,g=p.entanglements;var I=p.eventTimes;for(p=p.expirationTimes;0<k;){var T=31-Ci(k),M=1<<T;g[T]=0,I[T]=-1,p[T]=-1,k&=~M}}function Re(p,g){var k=p.entangledLanes|=g;for(p=p.entanglements;k;){var I=31-Ci(k),T=1<<I;T&g|p[I]&g&&(p[I]|=g),k&=~T}}var Ne=0;function je(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var gt=r.unstable_scheduleCallback,rt=r.unstable_cancelCallback,$t=r.unstable_shouldYield,wt=r.unstable_requestPaint,Ke=r.unstable_now,ct=r.unstable_ImmediatePriority,ht=r.unstable_UserBlockingPriority,at=r.unstable_NormalPriority,kt=r.unstable_IdlePriority,st=null,vt=null;function or(p){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(st,p,void 0,(p.current.flags&128)===128)}catch{}}function ni(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var Gt=typeof Object.is=="function"?Object.is:ni,Wn=null,Dn=!1,ka=!1;function Wa(p){Wn===null?Wn=[p]:Wn.push(p)}function Eo(p){Dn=!0,Wa(p)}function Sr(){if(!ka&&Wn!==null){ka=!0;var p=0,g=Ne;try{var k=Wn;for(Ne=1;p<k.length;p++){var I=k[p];do I=I(!0);while(I!==null)}Wn=null,Dn=!1}catch(T){throw Wn!==null&&(Wn=Wn.slice(p+1)),gt(ct,Sr),T}finally{Ne=g,ka=!1}}return null}var pt=[],Rt=0,Cr=null,Er=0,pn=[],$n=0,na=null,Io=1,ra="";function As(p,g){pt[Rt++]=Er,pt[Rt++]=Cr,Cr=p,Er=g}function Ap(p,g,k){pn[$n++]=Io,pn[$n++]=ra,pn[$n++]=na,na=p;var I=Io;p=ra;var T=32-Ci(I)-1;I&=~(1<<T),k+=1;var M=32-Ci(g)+T;if(30<M){var W=T-T%5;M=(I&(1<<W)-1).toString(32),I>>=W,T-=W,Io=1<<32-Ci(g)+T|k<<T|I,ra=M+p}else Io=1<<M|k<<T|I,ra=p}function Ga(p){p.return!==null&&(As(p,1),Ap(p,1,0))}function Ls(p){for(;p===Cr;)Cr=pt[--Rt],pt[Rt]=null,Er=pt[--Rt],pt[Rt]=null;for(;p===na;)na=pn[--$n],pn[$n]=null,ra=pn[--$n],pn[$n]=null,Io=pn[--$n],pn[$n]=null}var sr=null,aa=null,an=!1,Ds=!1,To=null;function a5(p,g){var k=Yi(5,null,null,0);k.elementType="DELETED",k.stateNode=g,k.return=p,g=p.deletions,g===null?(p.deletions=[k],p.flags|=16):g.push(k)}function i5(p,g){switch(p.tag){case 5:return g=ut(g,p.type,p.pendingProps),g!==null?(p.stateNode=g,sr=p,aa=$r(g),!0):!1;case 6:return g=ot(g,p.pendingProps),g!==null?(p.stateNode=g,sr=p,aa=null,!0):!1;case 13:if(g=tt(g),g!==null){var k=na!==null?{id:Io,overflow:ra}:null;return p.memoizedState={dehydrated:g,treeContext:k,retryLane:1073741824},k=Yi(18,null,null,0),k.stateNode=g,k.return=p,p.child=k,sr=p,aa=null,!0}return!1;default:return!1}}function nk(p){return(p.mode&1)!==0&&(p.flags&128)===0}function rk(p){if(an){var g=aa;if(g){var k=g;if(!i5(p,g)){if(nk(p))throw Error(i(418));g=mn(k);var I=sr;g&&i5(p,g)?a5(I,k):(p.flags=p.flags&-4097|2,an=!1,sr=p)}}else{if(nk(p))throw Error(i(418));p.flags=p.flags&-4097|2,an=!1,sr=p}}}function o5(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;sr=p}function P0(p){if(!_e||p!==sr)return!1;if(!an)return o5(p),an=!0,!1;if(p.tag!==3&&(p.tag!==5||Co(p.type)&&!de(p.type,p.memoizedProps))){var g=aa;if(g){if(nk(p))throw s5(),Error(i(418));for(;g;)a5(p,g),g=mn(g)}}if(o5(p),p.tag===13){if(!_e)throw Error(i(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));aa=So(p)}else aa=sr?mn(p.stateNode):null;return!0}function s5(){for(var p=aa;p;)p=mn(p)}function Nd(){_e&&(aa=sr=null,Ds=an=!1)}function ak(p){To===null?To=[p]:To.push(p)}var fU=o.ReactCurrentBatchConfig;function A0(p,g){if(Gt(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var k=Object.keys(p),I=Object.keys(g);if(k.length!==I.length)return!1;for(I=0;I<k.length;I++){var T=k[I];if(!ek.call(g,T)||!Gt(p[T],g[T]))return!1}return!0}function gU(p){switch(p.tag){case 5:return Dt(p.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 2:case 15:return p=Mp(p.type,!1),p;case 11:return p=Mp(p.type.render,!1),p;case 1:return p=Mp(p.type,!0),p;default:return""}}function No(p,g){if(p&&p.defaultProps){g=a({},g),p=p.defaultProps;for(var k in p)g[k]===void 0&&(g[k]=p[k]);return g}return g}var L0=Wi(null),D0=null,_d=null,ik=null;function ok(){ik=_d=D0=null}function l5(p,g,k){pe?(yn(L0,g._currentValue),g._currentValue=k):(yn(L0,g._currentValue2),g._currentValue2=k)}function sk(p){var g=L0.current;Sn(L0),pe?p._currentValue=g:p._currentValue2=g}function lk(p,g,k){for(;p!==null;){var I=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),p===k)break;p=p.return}}function Od(p,g){D0=p,ik=_d=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&g&&(ri=!0),p.firstContext=null)}function Hi(p){var g=pe?p._currentValue:p._currentValue2;if(ik!==p)if(p={context:p,memoizedValue:g,next:null},_d===null){if(D0===null)throw Error(i(308));_d=p,D0.dependencies={lanes:0,firstContext:p}}else _d=_d.next=p;return g}var Zu=null;function uk(p){Zu===null?Zu=[p]:Zu.push(p)}function u5(p,g,k,I){var T=g.interleaved;return T===null?(k.next=k,uk(g)):(k.next=T.next,T.next=k),g.interleaved=k,ts(p,I)}function ts(p,g){p.lanes|=g;var k=p.alternate;for(k!==null&&(k.lanes|=g),k=p,p=p.return;p!==null;)p.childLanes|=g,k=p.alternate,k!==null&&(k.childLanes|=g),k=p,p=p.return;return k.tag===3?k.stateNode:null}var Ml=!1;function ck(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c5(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Fs(p,g){return{eventTime:p,lane:g,tag:0,payload:null,callback:null,next:null}}function Pl(p,g,k){var I=p.updateQueue;if(I===null)return null;if(I=I.shared,jt&2){var T=I.pending;return T===null?g.next=g:(g.next=T.next,T.next=g),I.pending=g,ts(p,k)}return T=I.interleaved,T===null?(g.next=g,uk(I)):(g.next=T.next,T.next=g),I.interleaved=g,ts(p,k)}function F0(p,g,k){if(g=g.updateQueue,g!==null&&(g=g.shared,(k&4194240)!==0)){var I=g.lanes;I&=p.pendingLanes,k|=I,g.lanes=k,Re(p,k)}}function d5(p,g){var k=p.updateQueue,I=p.alternate;if(I!==null&&(I=I.updateQueue,k===I)){var T=null,M=null;if(k=k.firstBaseUpdate,k!==null){do{var W={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};M===null?T=M=W:M=M.next=W,k=k.next}while(k!==null);M===null?T=M=g:M=M.next=g}else T=M=g;k={baseState:I.baseState,firstBaseUpdate:T,lastBaseUpdate:M,shared:I.shared,effects:I.effects},p.updateQueue=k;return}p=k.lastBaseUpdate,p===null?k.firstBaseUpdate=g:p.next=g,k.lastBaseUpdate=g}function B0(p,g,k,I){var T=p.updateQueue;Ml=!1;var M=T.firstBaseUpdate,W=T.lastBaseUpdate,le=T.shared.pending;if(le!==null){T.shared.pending=null;var ye=le,Oe=ye.next;ye.next=null,W===null?M=Oe:W.next=Oe,W=ye;var qe=p.alternate;qe!==null&&(qe=qe.updateQueue,le=qe.lastBaseUpdate,le!==W&&(le===null?qe.firstBaseUpdate=Oe:le.next=Oe,qe.lastBaseUpdate=ye))}if(M!==null){var Tt=T.baseState;W=0,qe=Oe=ye=null,le=M;do{var Be=le.lane,Fn=le.eventTime;if((I&Be)===Be){qe!==null&&(qe=qe.next={eventTime:Fn,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var Cn=p,oi=le;switch(Be=g,Fn=k,oi.tag){case 1:if(Cn=oi.payload,typeof Cn=="function"){Tt=Cn.call(Fn,Tt,Be);break e}Tt=Cn;break e;case 3:Cn.flags=Cn.flags&-65537|128;case 0:if(Cn=oi.payload,Be=typeof Cn=="function"?Cn.call(Fn,Tt,Be):Cn,Be==null)break e;Tt=a({},Tt,Be);break e;case 2:Ml=!0}}le.callback!==null&&le.lane!==0&&(p.flags|=64,Be=T.effects,Be===null?T.effects=[le]:Be.push(le))}else Fn={eventTime:Fn,lane:Be,tag:le.tag,payload:le.payload,callback:le.callback,next:null},qe===null?(Oe=qe=Fn,ye=Tt):qe=qe.next=Fn,W|=Be;if(le=le.next,le===null){if(le=T.shared.pending,le===null)break;Be=le,le=Be.next,Be.next=null,T.lastBaseUpdate=Be,T.shared.pending=null}}while(!0);if(qe===null&&(ye=Tt),T.baseState=ye,T.firstBaseUpdate=Oe,T.lastBaseUpdate=qe,g=T.shared.interleaved,g!==null){T=g;do W|=T.lane,T=T.next;while(T!==g)}else M===null&&(T.shared.lanes=0);tc|=W,p.lanes=W,p.memoizedState=Tt}}function h5(p,g,k){if(p=g.effects,g.effects=null,p!==null)for(g=0;g<p.length;g++){var I=p[g],T=I.callback;if(T!==null){if(I.callback=null,I=k,typeof T!="function")throw Error(i(191,T));T.call(I)}}}var p5=new n.Component().refs;function dk(p,g,k,I){g=p.memoizedState,k=k(I,g),k=k==null?g:a({},g,k),p.memoizedState=k,p.lanes===0&&(p.updateQueue.baseState=k)}var z0={isMounted:function(p){return(p=p._reactInternals)?N(p)===p:!1},enqueueSetState:function(p,g,k){p=p._reactInternals;var I=Ia(),T=Dl(p),M=Fs(I,T);M.payload=g,k!=null&&(M.callback=k),g=Pl(p,M,T),g!==null&&(Xi(g,p,T,I),F0(g,p,T))},enqueueReplaceState:function(p,g,k){p=p._reactInternals;var I=Ia(),T=Dl(p),M=Fs(I,T);M.tag=1,M.payload=g,k!=null&&(M.callback=k),g=Pl(p,M,T),g!==null&&(Xi(g,p,T,I),F0(g,p,T))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var k=Ia(),I=Dl(p),T=Fs(k,I);T.tag=2,g!=null&&(T.callback=g),g=Pl(p,T,I),g!==null&&(Xi(g,p,I,k),F0(g,p,I))}};function f5(p,g,k,I,T,M,W){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(I,M,W):g.prototype&&g.prototype.isPureReactComponent?!A0(k,I)||!A0(T,M):!0}function g5(p,g,k){var I=!1,T=Gi,M=g.contextType;return typeof M=="object"&&M!==null?M=Hi(M):(T=wa(g)?$s:Wr.current,I=g.contextTypes,M=(I=I!=null)?$l(p,T):Gi),g=new g(k,M),p.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=z0,p.stateNode=g,g._reactInternals=p,I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=T,p.__reactInternalMemoizedMaskedChildContext=M),g}function m5(p,g,k,I){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(k,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(k,I),g.state!==p&&z0.enqueueReplaceState(g,g.state,null)}function hk(p,g,k,I){var T=p.stateNode;T.props=k,T.state=p.memoizedState,T.refs=p5,ck(p);var M=g.contextType;typeof M=="object"&&M!==null?T.context=Hi(M):(M=wa(g)?$s:Wr.current,T.context=$l(p,M)),T.state=p.memoizedState,M=g.getDerivedStateFromProps,typeof M=="function"&&(dk(p,g,M,k),T.state=p.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(g=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),g!==T.state&&z0.enqueueReplaceState(T,T.state,null),B0(p,k,T,I),T.state=p.memoizedState),typeof T.componentDidMount=="function"&&(p.flags|=4194308)}function Lp(p,g,k){if(p=k.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(i(309));var I=k.stateNode}if(!I)throw Error(i(147,p));var T=I,M=""+p;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===M?g.ref:(g=function(W){var le=T.refs;le===p5&&(le=T.refs={}),W===null?delete le[M]:le[M]=W},g._stringRef=M,g)}if(typeof p!="string")throw Error(i(284));if(!k._owner)throw Error(i(290,p))}return p}function j0(p,g){throw p=Object.prototype.toString.call(g),Error(i(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p))}function y5(p){var g=p._init;return g(p._payload)}function b5(p){function g(me,ce){if(p){var we=me.deletions;we===null?(me.deletions=[ce],me.flags|=16):we.push(ce)}}function k(me,ce){if(!p)return null;for(;ce!==null;)g(me,ce),ce=ce.sibling;return null}function I(me,ce){for(me=new Map;ce!==null;)ce.key!==null?me.set(ce.key,ce):me.set(ce.index,ce),ce=ce.sibling;return me}function T(me,ce){return me=Bl(me,ce),me.index=0,me.sibling=null,me}function M(me,ce,we){return me.index=we,p?(we=me.alternate,we!==null?(we=we.index,we<ce?(me.flags|=2,ce):we):(me.flags|=2,ce)):(me.flags|=1048576,ce)}function W(me){return p&&me.alternate===null&&(me.flags|=2),me}function le(me,ce,we,ze){return ce===null||ce.tag!==6?(ce=Jk(we,me.mode,ze),ce.return=me,ce):(ce=T(ce,we),ce.return=me,ce)}function ye(me,ce,we,ze){var dt=we.type;return dt===u?qe(me,ce,we.props.children,ze,we.key):ce!==null&&(ce.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&y5(dt)===ce.type)?(ze=T(ce,we.props),ze.ref=Lp(me,ce,we),ze.return=me,ze):(ze=p1(we.type,we.key,we.props,null,me.mode,ze),ze.ref=Lp(me,ce,we),ze.return=me,ze)}function Oe(me,ce,we,ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==we.containerInfo||ce.stateNode.implementation!==we.implementation?(ce=Zk(we,me.mode,ze),ce.return=me,ce):(ce=T(ce,we.children||[]),ce.return=me,ce)}function qe(me,ce,we,ze,dt){return ce===null||ce.tag!==7?(ce=ic(we,me.mode,ze,dt),ce.return=me,ce):(ce=T(ce,we),ce.return=me,ce)}function Tt(me,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Jk(""+ce,me.mode,we),ce.return=me,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case s:return we=p1(ce.type,ce.key,ce.props,null,me.mode,we),we.ref=Lp(me,null,ce),we.return=me,we;case l:return ce=Zk(ce,me.mode,we),ce.return=me,ce;case x:var ze=ce._init;return Tt(me,ze(ce._payload),we)}if(K(ce)||C(ce))return ce=ic(ce,me.mode,we,null),ce.return=me,ce;j0(me,ce)}return null}function Be(me,ce,we,ze){var dt=ce!==null?ce.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return dt!==null?null:le(me,ce,""+we,ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case s:return we.key===dt?ye(me,ce,we,ze):null;case l:return we.key===dt?Oe(me,ce,we,ze):null;case x:return dt=we._init,Be(me,ce,dt(we._payload),ze)}if(K(we)||C(we))return dt!==null?null:qe(me,ce,we,ze,null);j0(me,we)}return null}function Fn(me,ce,we,ze,dt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return me=me.get(we)||null,le(ce,me,""+ze,dt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case s:return me=me.get(ze.key===null?we:ze.key)||null,ye(ce,me,ze,dt);case l:return me=me.get(ze.key===null?we:ze.key)||null,Oe(ce,me,ze,dt);case x:var At=ze._init;return Fn(me,ce,we,At(ze._payload),dt)}if(K(ze)||C(ze))return me=me.get(we)||null,qe(ce,me,ze,dt,null);j0(ce,ze)}return null}function Cn(me,ce,we,ze){for(var dt=null,At=null,Nt=ce,on=ce=0,qr=null;Nt!==null&&on<we.length;on++){Nt.index>on?(qr=Nt,Nt=null):qr=Nt.sibling;var sn=Be(me,Nt,we[on],ze);if(sn===null){Nt===null&&(Nt=qr);break}p&&Nt&&sn.alternate===null&&g(me,Nt),ce=M(sn,ce,on),At===null?dt=sn:At.sibling=sn,At=sn,Nt=qr}if(on===we.length)return k(me,Nt),an&&As(me,on),dt;if(Nt===null){for(;on<we.length;on++)Nt=Tt(me,we[on],ze),Nt!==null&&(ce=M(Nt,ce,on),At===null?dt=Nt:At.sibling=Nt,At=Nt);return an&&As(me,on),dt}for(Nt=I(me,Nt);on<we.length;on++)qr=Fn(Nt,me,on,we[on],ze),qr!==null&&(p&&qr.alternate!==null&&Nt.delete(qr.key===null?on:qr.key),ce=M(qr,ce,on),At===null?dt=qr:At.sibling=qr,At=qr);return p&&Nt.forEach(function(zl){return g(me,zl)}),an&&As(me,on),dt}function oi(me,ce,we,ze){var dt=C(we);if(typeof dt!="function")throw Error(i(150));if(we=dt.call(we),we==null)throw Error(i(151));for(var At=dt=null,Nt=ce,on=ce=0,qr=null,sn=we.next();Nt!==null&&!sn.done;on++,sn=we.next()){Nt.index>on?(qr=Nt,Nt=null):qr=Nt.sibling;var zl=Be(me,Nt,sn.value,ze);if(zl===null){Nt===null&&(Nt=qr);break}p&&Nt&&zl.alternate===null&&g(me,Nt),ce=M(zl,ce,on),At===null?dt=zl:At.sibling=zl,At=zl,Nt=qr}if(sn.done)return k(me,Nt),an&&As(me,on),dt;if(Nt===null){for(;!sn.done;on++,sn=we.next())sn=Tt(me,sn.value,ze),sn!==null&&(ce=M(sn,ce,on),At===null?dt=sn:At.sibling=sn,At=sn);return an&&As(me,on),dt}for(Nt=I(me,Nt);!sn.done;on++,sn=we.next())sn=Fn(Nt,me,on,sn.value,ze),sn!==null&&(p&&sn.alternate!==null&&Nt.delete(sn.key===null?on:sn.key),ce=M(sn,ce,on),At===null?dt=sn:At.sibling=sn,At=sn);return p&&Nt.forEach(function(GU){return g(me,GU)}),an&&As(me,on),dt}function js(me,ce,we,ze){if(typeof we=="object"&&we!==null&&we.type===u&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case s:e:{for(var dt=we.key,At=ce;At!==null;){if(At.key===dt){if(dt=we.type,dt===u){if(At.tag===7){k(me,At.sibling),ce=T(At,we.props.children),ce.return=me,me=ce;break e}}else if(At.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&y5(dt)===At.type){k(me,At.sibling),ce=T(At,we.props),ce.ref=Lp(me,At,we),ce.return=me,me=ce;break e}k(me,At);break}else g(me,At);At=At.sibling}we.type===u?(ce=ic(we.props.children,me.mode,ze,we.key),ce.return=me,me=ce):(ze=p1(we.type,we.key,we.props,null,me.mode,ze),ze.ref=Lp(me,ce,we),ze.return=me,me=ze)}return W(me);case l:e:{for(At=we.key;ce!==null;){if(ce.key===At)if(ce.tag===4&&ce.stateNode.containerInfo===we.containerInfo&&ce.stateNode.implementation===we.implementation){k(me,ce.sibling),ce=T(ce,we.children||[]),ce.return=me,me=ce;break e}else{k(me,ce);break}else g(me,ce);ce=ce.sibling}ce=Zk(we,me.mode,ze),ce.return=me,me=ce}return W(me);case x:return At=we._init,js(me,ce,At(we._payload),ze)}if(K(we))return Cn(me,ce,we,ze);if(C(we))return oi(me,ce,we,ze);j0(me,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ce!==null&&ce.tag===6?(k(me,ce.sibling),ce=T(ce,we),ce.return=me,me=ce):(k(me,ce),ce=Jk(we,me.mode,ze),ce.return=me,me=ce),W(me)):k(me,ce)}return js}var Rd=b5(!0),v5=b5(!1),Dp={},qi=Wi(Dp),Fp=Wi(Dp),$d=Wi(Dp);function ns(p){if(p===Dp)throw Error(i(174));return p}function pk(p,g){yn($d,g),yn(Fp,p),yn(qi,Dp),p=Z(g),Sn(qi),yn(qi,p)}function Md(){Sn(qi),Sn(Fp),Sn($d)}function x5(p){var g=ns($d.current),k=ns(qi.current);g=H(k,p.type,g),k!==g&&(yn(Fp,p),yn(qi,g))}function fk(p){Fp.current===p&&(Sn(qi),Sn(Fp))}var Jn=Wi(0);function V0(p){for(var g=p;g!==null;){if(g.tag===13){var k=g.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||Pt(k)||Ln(k)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var gk=[];function mk(){for(var p=0;p<gk.length;p++){var g=gk[p];pe?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}gk.length=0}var U0=o.ReactCurrentDispatcher,yk=o.ReactCurrentBatchConfig,ec=0,Zn=null,Mr=null,Gr=null,W0=!1,Bp=!1,zp=0,mU=0;function Sa(){throw Error(i(321))}function bk(p,g){if(g===null)return!1;for(var k=0;k<g.length&&k<p.length;k++)if(!Gt(p[k],g[k]))return!1;return!0}function vk(p,g,k,I,T,M){if(ec=M,Zn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,U0.current=p===null||p.memoizedState===null?xU:wU,p=k(I,T),Bp){M=0;do{if(Bp=!1,zp=0,25<=M)throw Error(i(301));M+=1,Gr=Mr=null,g.updateQueue=null,U0.current=kU,p=k(I,T)}while(Bp)}if(U0.current=q0,g=Mr!==null&&Mr.next!==null,ec=0,Gr=Mr=Zn=null,W0=!1,g)throw Error(i(300));return p}function xk(){var p=zp!==0;return zp=0,p}function rs(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?Zn.memoizedState=Gr=p:Gr=Gr.next=p,Gr}function Ki(){if(Mr===null){var p=Zn.alternate;p=p!==null?p.memoizedState:null}else p=Mr.next;var g=Gr===null?Zn.memoizedState:Gr.next;if(g!==null)Gr=g,Mr=p;else{if(p===null)throw Error(i(310));Mr=p,p={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Gr===null?Zn.memoizedState=Gr=p:Gr=Gr.next=p}return Gr}function jp(p,g){return typeof g=="function"?g(p):g}function wk(p){var g=Ki(),k=g.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=p;var I=Mr,T=I.baseQueue,M=k.pending;if(M!==null){if(T!==null){var W=T.next;T.next=M.next,M.next=W}I.baseQueue=T=M,k.pending=null}if(T!==null){M=T.next,I=I.baseState;var le=W=null,ye=null,Oe=M;do{var qe=Oe.lane;if((ec&qe)===qe)ye!==null&&(ye=ye.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),I=Oe.hasEagerState?Oe.eagerState:p(I,Oe.action);else{var Tt={lane:qe,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};ye===null?(le=ye=Tt,W=I):ye=ye.next=Tt,Zn.lanes|=qe,tc|=qe}Oe=Oe.next}while(Oe!==null&&Oe!==M);ye===null?W=I:ye.next=le,Gt(I,g.memoizedState)||(ri=!0),g.memoizedState=I,g.baseState=W,g.baseQueue=ye,k.lastRenderedState=I}if(p=k.interleaved,p!==null){T=p;do M=T.lane,Zn.lanes|=M,tc|=M,T=T.next;while(T!==p)}else T===null&&(k.lanes=0);return[g.memoizedState,k.dispatch]}function kk(p){var g=Ki(),k=g.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=p;var I=k.dispatch,T=k.pending,M=g.memoizedState;if(T!==null){k.pending=null;var W=T=T.next;do M=p(M,W.action),W=W.next;while(W!==T);Gt(M,g.memoizedState)||(ri=!0),g.memoizedState=M,g.baseQueue===null&&(g.baseState=M),k.lastRenderedState=M}return[M,I]}function w5(){}function k5(p,g){var k=Zn,I=Ki(),T=g(),M=!Gt(I.memoizedState,T);if(M&&(I.memoizedState=T,ri=!0),I=I.queue,Sk(E5.bind(null,k,I,p),[p]),I.getSnapshot!==g||M||Gr!==null&&Gr.memoizedState.tag&1){if(k.flags|=2048,Vp(9,C5.bind(null,k,I,T,g),void 0,null),Hr===null)throw Error(i(349));ec&30||S5(k,g,T)}return T}function S5(p,g,k){p.flags|=16384,p={getSnapshot:g,value:k},g=Zn.updateQueue,g===null?(g={lastEffect:null,stores:null},Zn.updateQueue=g,g.stores=[p]):(k=g.stores,k===null?g.stores=[p]:k.push(p))}function C5(p,g,k,I){g.value=k,g.getSnapshot=I,I5(g)&&T5(p)}function E5(p,g,k){return k(function(){I5(g)&&T5(p)})}function I5(p){var g=p.getSnapshot;p=p.value;try{var k=g();return!Gt(p,k)}catch{return!0}}function T5(p){var g=ts(p,1);g!==null&&Xi(g,p,1,-1)}function N5(p){var g=rs();return typeof p=="function"&&(p=p()),g.memoizedState=g.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jp,lastRenderedState:p},g.queue=p,p=p.dispatch=vU.bind(null,Zn,p),[g.memoizedState,p]}function Vp(p,g,k,I){return p={tag:p,create:g,destroy:k,deps:I,next:null},g=Zn.updateQueue,g===null?(g={lastEffect:null,stores:null},Zn.updateQueue=g,g.lastEffect=p.next=p):(k=g.lastEffect,k===null?g.lastEffect=p.next=p:(I=k.next,k.next=p,p.next=I,g.lastEffect=p)),p}function _5(){return Ki().memoizedState}function G0(p,g,k,I){var T=rs();Zn.flags|=p,T.memoizedState=Vp(1|g,k,void 0,I===void 0?null:I)}function H0(p,g,k,I){var T=Ki();I=I===void 0?null:I;var M=void 0;if(Mr!==null){var W=Mr.memoizedState;if(M=W.destroy,I!==null&&bk(I,W.deps)){T.memoizedState=Vp(g,k,M,I);return}}Zn.flags|=p,T.memoizedState=Vp(1|g,k,M,I)}function O5(p,g){return G0(8390656,8,p,g)}function Sk(p,g){return H0(2048,8,p,g)}function R5(p,g){return H0(4,2,p,g)}function $5(p,g){return H0(4,4,p,g)}function M5(p,g){if(typeof g=="function")return p=p(),g(p),function(){g(null)};if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function P5(p,g,k){return k=k!=null?k.concat([p]):null,H0(4,4,M5.bind(null,g,p),k)}function Ck(){}function A5(p,g){var k=Ki();g=g===void 0?null:g;var I=k.memoizedState;return I!==null&&g!==null&&bk(g,I[1])?I[0]:(k.memoizedState=[p,g],p)}function L5(p,g){var k=Ki();g=g===void 0?null:g;var I=k.memoizedState;return I!==null&&g!==null&&bk(g,I[1])?I[0]:(p=p(),k.memoizedState=[p,g],p)}function D5(p,g,k){return ec&21?(Gt(k,g)||(k=ae(),Zn.lanes|=k,tc|=k,p.baseState=!0),g):(p.baseState&&(p.baseState=!1,ri=!0),p.memoizedState=k)}function yU(p,g){var k=Ne;Ne=k!==0&&4>k?k:4,p(!0);var I=yk.transition;yk.transition={};try{p(!1),g()}finally{Ne=k,yk.transition=I}}function F5(){return Ki().memoizedState}function bU(p,g,k){var I=Dl(p);if(k={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null},B5(p))z5(g,k);else if(k=u5(p,g,k,I),k!==null){var T=Ia();Xi(k,p,I,T),j5(k,g,I)}}function vU(p,g,k){var I=Dl(p),T={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null};if(B5(p))z5(g,T);else{var M=p.alternate;if(p.lanes===0&&(M===null||M.lanes===0)&&(M=g.lastRenderedReducer,M!==null))try{var W=g.lastRenderedState,le=M(W,k);if(T.hasEagerState=!0,T.eagerState=le,Gt(le,W)){var ye=g.interleaved;ye===null?(T.next=T,uk(g)):(T.next=ye.next,ye.next=T),g.interleaved=T;return}}catch{}finally{}k=u5(p,g,T,I),k!==null&&(T=Ia(),Xi(k,p,I,T),j5(k,g,I))}}function B5(p){var g=p.alternate;return p===Zn||g!==null&&g===Zn}function z5(p,g){Bp=W0=!0;var k=p.pending;k===null?g.next=g:(g.next=k.next,k.next=g),p.pending=g}function j5(p,g,k){if(k&4194240){var I=g.lanes;I&=p.pendingLanes,k|=I,g.lanes=k,Re(p,k)}}var q0={readContext:Hi,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},xU={readContext:Hi,useCallback:function(p,g){return rs().memoizedState=[p,g===void 0?null:g],p},useContext:Hi,useEffect:O5,useImperativeHandle:function(p,g,k){return k=k!=null?k.concat([p]):null,G0(4194308,4,M5.bind(null,g,p),k)},useLayoutEffect:function(p,g){return G0(4194308,4,p,g)},useInsertionEffect:function(p,g){return G0(4,2,p,g)},useMemo:function(p,g){var k=rs();return g=g===void 0?null:g,p=p(),k.memoizedState=[p,g],p},useReducer:function(p,g,k){var I=rs();return g=k!==void 0?k(g):g,I.memoizedState=I.baseState=g,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:g},I.queue=p,p=p.dispatch=bU.bind(null,Zn,p),[I.memoizedState,p]},useRef:function(p){var g=rs();return p={current:p},g.memoizedState=p},useState:N5,useDebugValue:Ck,useDeferredValue:function(p){return rs().memoizedState=p},useTransition:function(){var p=N5(!1),g=p[0];return p=yU.bind(null,p[1]),rs().memoizedState=p,[g,p]},useMutableSource:function(){},useSyncExternalStore:function(p,g,k){var I=Zn,T=rs();if(an){if(k===void 0)throw Error(i(407));k=k()}else{if(k=g(),Hr===null)throw Error(i(349));ec&30||S5(I,g,k)}T.memoizedState=k;var M={value:k,getSnapshot:g};return T.queue=M,O5(E5.bind(null,I,M,p),[p]),I.flags|=2048,Vp(9,C5.bind(null,I,M,k,g),void 0,null),k},useId:function(){var p=rs(),g=Hr.identifierPrefix;if(an){var k=ra,I=Io;k=(I&~(1<<32-Ci(I)-1)).toString(32)+k,g=":"+g+"R"+k,k=zp++,0<k&&(g+="H"+k.toString(32)),g+=":"}else k=mU++,g=":"+g+"r"+k.toString(32)+":";return p.memoizedState=g},unstable_isNewReconciler:!1},wU={readContext:Hi,useCallback:A5,useContext:Hi,useEffect:Sk,useImperativeHandle:P5,useInsertionEffect:R5,useLayoutEffect:$5,useMemo:L5,useReducer:wk,useRef:_5,useState:function(){return wk(jp)},useDebugValue:Ck,useDeferredValue:function(p){var g=Ki();return D5(g,Mr.memoizedState,p)},useTransition:function(){var p=wk(jp)[0],g=Ki().memoizedState;return[p,g]},useMutableSource:w5,useSyncExternalStore:k5,useId:F5,unstable_isNewReconciler:!1},kU={readContext:Hi,useCallback:A5,useContext:Hi,useEffect:Sk,useImperativeHandle:P5,useInsertionEffect:R5,useLayoutEffect:$5,useMemo:L5,useReducer:kk,useRef:_5,useState:function(){return kk(jp)},useDebugValue:Ck,useDeferredValue:function(p){var g=Ki();return Mr===null?g.memoizedState=p:D5(g,Mr.memoizedState,p)},useTransition:function(){var p=kk(jp)[0],g=Ki().memoizedState;return[p,g]},useMutableSource:w5,useSyncExternalStore:k5,useId:F5,unstable_isNewReconciler:!1};function Pd(p,g){try{var k="",I=g;do k+=gU(I),I=I.return;while(I);var T=k}catch(M){T=`
Error generating stack: `+M.message+`
`+M.stack}return{value:p,source:g,stack:T,digest:null}}function Ek(p,g,k){return{value:p,source:null,stack:k??null,digest:g??null}}function Ik(p,g){try{console.error(g.value)}catch(k){setTimeout(function(){throw k})}}var SU=typeof WeakMap=="function"?WeakMap:Map;function V5(p,g,k){k=Fs(-1,k),k.tag=3,k.payload={element:null};var I=g.value;return k.callback=function(){s1||(s1=!0,Gk=I),Ik(p,g)},k}function U5(p,g,k){k=Fs(-1,k),k.tag=3;var I=p.type.getDerivedStateFromError;if(typeof I=="function"){var T=g.value;k.payload=function(){return I(T)},k.callback=function(){Ik(p,g)}}var M=p.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(k.callback=function(){Ik(p,g),typeof I!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var W=g.stack;this.componentDidCatch(g.value,{componentStack:W!==null?W:""})}),k}function W5(p,g,k){var I=p.pingCache;if(I===null){I=p.pingCache=new SU;var T=new Set;I.set(g,T)}else T=I.get(g),T===void 0&&(T=new Set,I.set(g,T));T.has(k)||(T.add(k),p=DU.bind(null,p,g,k),g.then(p,p))}function G5(p){do{var g;if((g=p.tag===13)&&(g=p.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return p;p=p.return}while(p!==null);return null}function H5(p,g,k,I,T){return p.mode&1?(p.flags|=65536,p.lanes=T,p):(p===g?p.flags|=65536:(p.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(g=Fs(-1,1),g.tag=2,Pl(k,g,1))),k.lanes|=1),p)}var CU=o.ReactCurrentOwner,ri=!1;function Ha(p,g,k,I){g.child=p===null?v5(g,null,k,I):Rd(g,p.child,k,I)}function q5(p,g,k,I,T){k=k.render;var M=g.ref;return Od(g,T),I=vk(p,g,k,I,M,T),k=xk(),p!==null&&!ri?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~T,Bs(p,g,T)):(an&&k&&Ga(g),g.flags|=1,Ha(p,g,I,T),g.child)}function K5(p,g,k,I,T){if(p===null){var M=k.type;return typeof M=="function"&&!Qk(M)&&M.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(g.tag=15,g.type=M,X5(p,g,M,I,T)):(p=p1(k.type,null,I,g,g.mode,T),p.ref=g.ref,p.return=g,g.child=p)}if(M=p.child,!(p.lanes&T)){var W=M.memoizedProps;if(k=k.compare,k=k!==null?k:A0,k(W,I)&&p.ref===g.ref)return Bs(p,g,T)}return g.flags|=1,p=Bl(M,I),p.ref=g.ref,p.return=g,g.child=p}function X5(p,g,k,I,T){if(p!==null){var M=p.memoizedProps;if(A0(M,I)&&p.ref===g.ref)if(ri=!1,g.pendingProps=I=M,(p.lanes&T)!==0)p.flags&131072&&(ri=!0);else return g.lanes=p.lanes,Bs(p,g,T)}return Tk(p,g,k,I,T)}function Y5(p,g,k){var I=g.pendingProps,T=I.children,M=p!==null?p.memoizedState:null;if(I.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Ld,Ei),Ei|=k;else{if(!(k&1073741824))return p=M!==null?M.baseLanes|k:k,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:p,cachePool:null,transitions:null},g.updateQueue=null,yn(Ld,Ei),Ei|=p,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=M!==null?M.baseLanes:k,yn(Ld,Ei),Ei|=I}else M!==null?(I=M.baseLanes|k,g.memoizedState=null):I=k,yn(Ld,Ei),Ei|=I;return Ha(p,g,T,k),g.child}function Q5(p,g){var k=g.ref;(p===null&&k!==null||p!==null&&p.ref!==k)&&(g.flags|=512,g.flags|=2097152)}function Tk(p,g,k,I,T){var M=wa(k)?$s:Wr.current;return M=$l(g,M),Od(g,T),k=vk(p,g,k,I,M,T),I=xk(),p!==null&&!ri?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~T,Bs(p,g,T)):(an&&I&&Ga(g),g.flags|=1,Ha(p,g,k,T),g.child)}function J5(p,g,k,I,T){if(wa(k)){var M=!0;es(g)}else M=!1;if(Od(g,T),g.stateNode===null)X0(p,g),g5(g,k,I),hk(g,k,I,T),I=!0;else if(p===null){var W=g.stateNode,le=g.memoizedProps;W.props=le;var ye=W.context,Oe=k.contextType;typeof Oe=="object"&&Oe!==null?Oe=Hi(Oe):(Oe=wa(k)?$s:Wr.current,Oe=$l(g,Oe));var qe=k.getDerivedStateFromProps,Tt=typeof qe=="function"||typeof W.getSnapshotBeforeUpdate=="function";Tt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==I||ye!==Oe)&&m5(g,W,I,Oe),Ml=!1;var Be=g.memoizedState;W.state=Be,B0(g,I,W,T),ye=g.memoizedState,le!==I||Be!==ye||xa.current||Ml?(typeof qe=="function"&&(dk(g,k,qe,I),ye=g.memoizedState),(le=Ml||f5(g,k,le,I,Be,ye,Oe))?(Tt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(g.flags|=4194308)):(typeof W.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=ye),W.props=I,W.state=ye,W.context=Oe,I=le):(typeof W.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{W=g.stateNode,c5(p,g),le=g.memoizedProps,Oe=g.type===g.elementType?le:No(g.type,le),W.props=Oe,Tt=g.pendingProps,Be=W.context,ye=k.contextType,typeof ye=="object"&&ye!==null?ye=Hi(ye):(ye=wa(k)?$s:Wr.current,ye=$l(g,ye));var Fn=k.getDerivedStateFromProps;(qe=typeof Fn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==Tt||Be!==ye)&&m5(g,W,I,ye),Ml=!1,Be=g.memoizedState,W.state=Be,B0(g,I,W,T);var Cn=g.memoizedState;le!==Tt||Be!==Cn||xa.current||Ml?(typeof Fn=="function"&&(dk(g,k,Fn,I),Cn=g.memoizedState),(Oe=Ml||f5(g,k,Oe,I,Be,Cn,ye)||!1)?(qe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(I,Cn,ye),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(I,Cn,ye)),typeof W.componentDidUpdate=="function"&&(g.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof W.componentDidUpdate!="function"||le===p.memoizedProps&&Be===p.memoizedState||(g.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Be===p.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=Cn),W.props=I,W.state=Cn,W.context=ye,I=Oe):(typeof W.componentDidUpdate!="function"||le===p.memoizedProps&&Be===p.memoizedState||(g.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Be===p.memoizedState||(g.flags|=1024),I=!1)}return Nk(p,g,k,I,M,T)}function Nk(p,g,k,I,T,M){Q5(p,g);var W=(g.flags&128)!==0;if(!I&&!W)return T&&Qu(g,k,!1),Bs(p,g,M);I=g.stateNode,CU.current=g;var le=W&&typeof k.getDerivedStateFromError!="function"?null:I.render();return g.flags|=1,p!==null&&W?(g.child=Rd(g,p.child,null,M),g.child=Rd(g,null,le,M)):Ha(p,g,le,M),g.memoizedState=I.state,T&&Qu(g,k,!0),g.child}function Z5(p){var g=p.stateNode;g.pendingContext?$0(p,g.pendingContext,g.pendingContext!==g.context):g.context&&$0(p,g.context,!1),pk(p,g.containerInfo)}function eO(p,g,k,I,T){return Nd(),ak(T),g.flags|=256,Ha(p,g,k,I),g.child}var _k={dehydrated:null,treeContext:null,retryLane:0};function Ok(p){return{baseLanes:p,cachePool:null,transitions:null}}function tO(p,g,k){var I=g.pendingProps,T=Jn.current,M=!1,W=(g.flags&128)!==0,le;if((le=W)||(le=p!==null&&p.memoizedState===null?!1:(T&2)!==0),le?(M=!0,g.flags&=-129):(p===null||p.memoizedState!==null)&&(T|=1),yn(Jn,T&1),p===null)return rk(g),p=g.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(g.mode&1?Ln(p)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(W=I.children,p=I.fallback,M?(I=g.mode,M=g.child,W={mode:"hidden",children:W},!(I&1)&&M!==null?(M.childLanes=0,M.pendingProps=W):M=f1(W,I,0,null),p=ic(p,I,k,null),M.return=g,p.return=g,M.sibling=p,g.child=M,g.child.memoizedState=Ok(k),g.memoizedState=_k,p):Rk(g,W));if(T=p.memoizedState,T!==null&&(le=T.dehydrated,le!==null))return EU(p,g,W,I,le,T,k);if(M){M=I.fallback,W=g.mode,T=p.child,le=T.sibling;var ye={mode:"hidden",children:I.children};return!(W&1)&&g.child!==T?(I=g.child,I.childLanes=0,I.pendingProps=ye,g.deletions=null):(I=Bl(T,ye),I.subtreeFlags=T.subtreeFlags&14680064),le!==null?M=Bl(le,M):(M=ic(M,W,k,null),M.flags|=2),M.return=g,I.return=g,I.sibling=M,g.child=I,I=M,M=g.child,W=p.child.memoizedState,W=W===null?Ok(k):{baseLanes:W.baseLanes|k,cachePool:null,transitions:W.transitions},M.memoizedState=W,M.childLanes=p.childLanes&~k,g.memoizedState=_k,I}return M=p.child,p=M.sibling,I=Bl(M,{mode:"visible",children:I.children}),!(g.mode&1)&&(I.lanes=k),I.return=g,I.sibling=null,p!==null&&(k=g.deletions,k===null?(g.deletions=[p],g.flags|=16):k.push(p)),g.child=I,g.memoizedState=null,I}function Rk(p,g){return g=f1({mode:"visible",children:g},p.mode,0,null),g.return=p,p.child=g}function K0(p,g,k,I){return I!==null&&ak(I),Rd(g,p.child,null,k),p=Rk(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function EU(p,g,k,I,T,M,W){if(k)return g.flags&256?(g.flags&=-257,I=Ek(Error(i(422))),K0(p,g,W,I)):g.memoizedState!==null?(g.child=p.child,g.flags|=128,null):(M=I.fallback,T=g.mode,I=f1({mode:"visible",children:I.children},T,0,null),M=ic(M,T,W,null),M.flags|=2,I.return=g,M.return=g,I.sibling=M,g.child=I,g.mode&1&&Rd(g,p.child,null,W),g.child.memoizedState=Ok(W),g.memoizedState=_k,M);if(!(g.mode&1))return K0(p,g,W,null);if(Ln(T))return I=xt(T).digest,M=Error(i(419)),I=Ek(M,I,void 0),K0(p,g,W,I);if(k=(W&p.childLanes)!==0,ri||k){if(I=Hr,I!==null){switch(W&-W){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=T&(I.suspendedLanes|W)?0:T,T!==0&&T!==M.retryLane&&(M.retryLane=T,ts(p,T),Xi(I,p,T,-1))}return Yk(),I=Ek(Error(i(421))),K0(p,g,W,I)}return Pt(T)?(g.flags|=128,g.child=p.child,g=FU.bind(null,p),dn(T,g),null):(p=M.treeContext,_e&&(aa=gr(T),sr=g,an=!0,To=null,Ds=!1,p!==null&&(pn[$n++]=Io,pn[$n++]=ra,pn[$n++]=na,Io=p.id,ra=p.overflow,na=g)),g=Rk(g,I.children),g.flags|=4096,g)}function nO(p,g,k){p.lanes|=g;var I=p.alternate;I!==null&&(I.lanes|=g),lk(p.return,g,k)}function $k(p,g,k,I,T){var M=p.memoizedState;M===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:k,tailMode:T}:(M.isBackwards=g,M.rendering=null,M.renderingStartTime=0,M.last=I,M.tail=k,M.tailMode=T)}function rO(p,g,k){var I=g.pendingProps,T=I.revealOrder,M=I.tail;if(Ha(p,g,I.children,k),I=Jn.current,I&2)I=I&1|2,g.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&nO(p,k,g);else if(p.tag===19)nO(p,k,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}I&=1}if(yn(Jn,I),!(g.mode&1))g.memoizedState=null;else switch(T){case"forwards":for(k=g.child,T=null;k!==null;)p=k.alternate,p!==null&&V0(p)===null&&(T=k),k=k.sibling;k=T,k===null?(T=g.child,g.child=null):(T=k.sibling,k.sibling=null),$k(g,!1,T,k,M);break;case"backwards":for(k=null,T=g.child,g.child=null;T!==null;){if(p=T.alternate,p!==null&&V0(p)===null){g.child=T;break}p=T.sibling,T.sibling=k,k=T,T=p}$k(g,!0,k,null,M);break;case"together":$k(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function X0(p,g){!(g.mode&1)&&p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2)}function Bs(p,g,k){if(p!==null&&(g.dependencies=p.dependencies),tc|=g.lanes,!(k&g.childLanes))return null;if(p!==null&&g.child!==p.child)throw Error(i(153));if(g.child!==null){for(p=g.child,k=Bl(p,p.pendingProps),g.child=k,k.return=g;p.sibling!==null;)p=p.sibling,k=k.sibling=Bl(p,p.pendingProps),k.return=g;k.sibling=null}return g.child}function IU(p,g,k){switch(g.tag){case 3:Z5(g),Nd();break;case 5:x5(g);break;case 1:wa(g.type)&&es(g);break;case 4:pk(g,g.stateNode.containerInfo);break;case 10:l5(g,g.type._context,g.memoizedProps.value);break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(yn(Jn,Jn.current&1),g.flags|=128,null):k&g.child.childLanes?tO(p,g,k):(yn(Jn,Jn.current&1),p=Bs(p,g,k),p!==null?p.sibling:null);yn(Jn,Jn.current&1);break;case 19:if(I=(k&g.childLanes)!==0,p.flags&128){if(I)return rO(p,g,k);g.flags|=128}var T=g.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),yn(Jn,Jn.current),I)break;return null;case 22:case 23:return g.lanes=0,Y5(p,g,k)}return Bs(p,g,k)}function as(p){p.flags|=4}function aO(p,g){if(p!==null&&p.child===g.child)return!0;if(g.flags&16)return!1;for(p=g.child;p!==null;){if(p.flags&12854||p.subtreeFlags&12854)return!1;p=p.sibling}return!0}var Up,Wp,Y0,Q0;if(Ee)Up=function(p,g){for(var k=g.child;k!==null;){if(k.tag===5||k.tag===6)re(p,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===g)break;for(;k.sibling===null;){if(k.return===null||k.return===g)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Wp=function(){},Y0=function(p,g,k,I,T){if(p=p.memoizedProps,p!==I){var M=g.stateNode,W=ns(qi.current);k=he(M,k,p,I,T,W),(g.updateQueue=k)&&as(g)}},Q0=function(p,g,k,I){k!==I&&as(g)};else if(Ie){Up=function(p,g,k,I){for(var T=g.child;T!==null;){if(T.tag===5){var M=T.stateNode;k&&I&&(M=Ge(M,T.type,T.memoizedProps,T)),re(p,M)}else if(T.tag===6)M=T.stateNode,k&&I&&(M=bt(M,T.memoizedProps,T)),re(p,M);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)M=T.child,M!==null&&(M.return=T),Up(p,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===g)break;for(;T.sibling===null;){if(T.return===null||T.return===g)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var iO=function(p,g,k,I){for(var T=g.child;T!==null;){if(T.tag===5){var M=T.stateNode;k&&I&&(M=Ge(M,T.type,T.memoizedProps,T)),ge(p,M)}else if(T.tag===6)M=T.stateNode,k&&I&&(M=bt(M,T.memoizedProps,T)),ge(p,M);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)M=T.child,M!==null&&(M.return=T),iO(p,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===g)break;for(;T.sibling===null;){if(T.return===null||T.return===g)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Wp=function(p,g){var k=g.stateNode;if(!aO(p,g)){p=k.containerInfo;var I=ue(p);iO(I,g,!1,!1),k.pendingChildren=I,as(g),ke(p,I)}},Y0=function(p,g,k,I,T){var M=p.stateNode,W=p.memoizedProps;if((p=aO(p,g))&&W===I)g.stateNode=M;else{var le=g.stateNode,ye=ns(qi.current),Oe=null;W!==I&&(Oe=he(le,k,W,I,T,ye)),p&&Oe===null?g.stateNode=M:(M=Wt(M,Oe,k,W,I,g,p,le),se(M,k,I,T,ye)&&as(g),g.stateNode=M,p?as(g):Up(M,g,!1,!1))}},Q0=function(p,g,k,I){k!==I?(p=ns($d.current),k=ns(qi.current),g.stateNode=ie(I,p,k,g),as(g)):g.stateNode=p.stateNode}}else Wp=function(){},Y0=function(){},Q0=function(){};function Gp(p,g){if(!an)switch(p.tailMode){case"hidden":g=p.tail;for(var k=null;g!==null;)g.alternate!==null&&(k=g),g=g.sibling;k===null?p.tail=null:k.sibling=null;break;case"collapsed":k=p.tail;for(var I=null;k!==null;)k.alternate!==null&&(I=k),k=k.sibling;I===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:I.sibling=null}}function Ca(p){var g=p.alternate!==null&&p.alternate.child===p.child,k=0,I=0;if(g)for(var T=p.child;T!==null;)k|=T.lanes|T.childLanes,I|=T.subtreeFlags&14680064,I|=T.flags&14680064,T.return=p,T=T.sibling;else for(T=p.child;T!==null;)k|=T.lanes|T.childLanes,I|=T.subtreeFlags,I|=T.flags,T.return=p,T=T.sibling;return p.subtreeFlags|=I,p.childLanes=k,g}function TU(p,g,k){var I=g.pendingProps;switch(Ls(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ca(g),null;case 1:return wa(g.type)&&Id(),Ca(g),null;case 3:return k=g.stateNode,Md(),Sn(xa),Sn(Wr),mk(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(p===null||p.child===null)&&(P0(g)?as(g):p===null||p.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,To!==null&&(Kk(To),To=null))),Wp(p,g),Ca(g),null;case 5:fk(g),k=ns($d.current);var T=g.type;if(p!==null&&g.stateNode!=null)Y0(p,g,T,I,k),p.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!I){if(g.stateNode===null)throw Error(i(166));return Ca(g),null}if(p=ns(qi.current),P0(g)){if(!_e)throw Error(i(175));p=Jo(g.stateNode,g.type,g.memoizedProps,k,p,g,!Ds),g.updateQueue=p,p!==null&&as(g)}else{var M=J(T,I,k,p,g);Up(M,g,!1,!1),g.stateNode=M,se(M,T,I,k,p)&&as(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Ca(g),null;case 6:if(p&&g.stateNode!=null)Q0(p,g,p.memoizedProps,I);else{if(typeof I!="string"&&g.stateNode===null)throw Error(i(166));if(p=ns($d.current),k=ns(qi.current),P0(g)){if(!_e)throw Error(i(176));if(p=g.stateNode,k=g.memoizedProps,(I=Ui(p,k,g,!Ds))&&(T=sr,T!==null))switch(T.tag){case 3:rn(T.stateNode.containerInfo,p,k,(T.mode&1)!==0);break;case 5:hn(T.type,T.memoizedProps,T.stateNode,p,k,(T.mode&1)!==0)}I&&as(g)}else g.stateNode=ie(I,p,k,g)}return Ca(g),null;case 13:if(Sn(Jn),I=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(an&&aa!==null&&g.mode&1&&!(g.flags&128))s5(),Nd(),g.flags|=98560,T=!1;else if(T=P0(g),I!==null&&I.dehydrated!==null){if(p===null){if(!T)throw Error(i(318));if(!_e)throw Error(i(344));if(T=g.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));va(T,g)}else Nd(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;Ca(g),T=!1}else To!==null&&(Kk(To),To=null),T=!0;if(!T)return g.flags&65536?g:null}return g.flags&128?(g.lanes=k,g):(k=I!==null,k!==(p!==null&&p.memoizedState!==null)&&k&&(g.child.flags|=8192,g.mode&1&&(p===null||Jn.current&1?Pr===0&&(Pr=3):Yk())),g.updateQueue!==null&&(g.flags|=4),Ca(g),null);case 4:return Md(),Wp(p,g),p===null&&Xe(g.stateNode.containerInfo),Ca(g),null;case 10:return sk(g.type._context),Ca(g),null;case 17:return wa(g.type)&&Id(),Ca(g),null;case 19:if(Sn(Jn),T=g.memoizedState,T===null)return Ca(g),null;if(I=(g.flags&128)!==0,M=T.rendering,M===null)if(I)Gp(T,!1);else{if(Pr!==0||p!==null&&p.flags&128)for(p=g.child;p!==null;){if(M=V0(p),M!==null){for(g.flags|=128,Gp(T,!1),p=M.updateQueue,p!==null&&(g.updateQueue=p,g.flags|=4),g.subtreeFlags=0,p=k,k=g.child;k!==null;)I=k,T=p,I.flags&=14680066,M=I.alternate,M===null?(I.childLanes=0,I.lanes=T,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=M.childLanes,I.lanes=M.lanes,I.child=M.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=M.memoizedProps,I.memoizedState=M.memoizedState,I.updateQueue=M.updateQueue,I.type=M.type,T=M.dependencies,I.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),k=k.sibling;return yn(Jn,Jn.current&1|2),g.child}p=p.sibling}T.tail!==null&&Ke()>Wk&&(g.flags|=128,I=!0,Gp(T,!1),g.lanes=4194304)}else{if(!I)if(p=V0(M),p!==null){if(g.flags|=128,I=!0,p=p.updateQueue,p!==null&&(g.updateQueue=p,g.flags|=4),Gp(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!an)return Ca(g),null}else 2*Ke()-T.renderingStartTime>Wk&&k!==1073741824&&(g.flags|=128,I=!0,Gp(T,!1),g.lanes=4194304);T.isBackwards?(M.sibling=g.child,g.child=M):(p=T.last,p!==null?p.sibling=M:g.child=M,T.last=M)}return T.tail!==null?(g=T.tail,T.rendering=g,T.tail=g.sibling,T.renderingStartTime=Ke(),g.sibling=null,p=Jn.current,yn(Jn,I?p&1|2:p&1),g):(Ca(g),null);case 22:case 23:return Xk(),k=g.memoizedState!==null,p!==null&&p.memoizedState!==null!==k&&(g.flags|=8192),k&&g.mode&1?Ei&1073741824&&(Ca(g),Ee&&g.subtreeFlags&6&&(g.flags|=8192)):Ca(g),null;case 24:return null;case 25:return null}throw Error(i(156,g.tag))}function NU(p,g){switch(Ls(g),g.tag){case 1:return wa(g.type)&&Id(),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return Md(),Sn(xa),Sn(Wr),mk(),p=g.flags,p&65536&&!(p&128)?(g.flags=p&-65537|128,g):null;case 5:return fk(g),null;case 13:if(Sn(Jn),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Nd()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return Sn(Jn),null;case 4:return Md(),null;case 10:return sk(g.type._context),null;case 22:case 23:return Xk(),null;case 24:return null;default:return null}}var J0=!1,Ea=!1,_U=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Ad(p,g){var k=p.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(I){Gn(p,g,I)}else k.current=null}function oO(p,g,k){try{k()}catch(I){Gn(p,g,I)}}var sO=!1;function OU(p,g){for(F(p.containerInfo),Ve=g;Ve!==null;)if(p=Ve,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,Ve=g;else for(;Ve!==null;){p=Ve;try{var k=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var I=k.memoizedProps,T=k.memoizedState,M=p.stateNode,W=M.getSnapshotBeforeUpdate(p.elementType===p.type?I:No(p.type,I),T);M.__reactInternalSnapshotBeforeUpdate=W}break;case 3:Ee&&Qo(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(le){Gn(p,p.return,le)}if(g=p.sibling,g!==null){g.return=p.return,Ve=g;break}Ve=p.return}return k=sO,sO=!1,k}function Hp(p,g,k){var I=g.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var T=I=I.next;do{if((T.tag&p)===p){var M=T.destroy;T.destroy=void 0,M!==void 0&&oO(g,k,M)}T=T.next}while(T!==I)}}function Z0(p,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var k=g=g.next;do{if((k.tag&p)===p){var I=k.create;k.destroy=I()}k=k.next}while(k!==g)}}function Mk(p){var g=p.ref;if(g!==null){var k=p.stateNode;switch(p.tag){case 5:p=Y(k);break;default:p=k}typeof g=="function"?g(p):g.current=p}}function lO(p){var g=p.alternate;g!==null&&(p.alternate=null,lO(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&lt(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function uO(p){return p.tag===5||p.tag===3||p.tag===4}function cO(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||uO(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Pk(p,g,k){var I=p.tag;if(I===5||I===6)p=p.stateNode,g?gn(k,p,g):Ua(k,p);else if(I!==4&&(p=p.child,p!==null))for(Pk(p,g,k),p=p.sibling;p!==null;)Pk(p,g,k),p=p.sibling}function Ak(p,g,k){var I=p.tag;if(I===5||I===6)p=p.stateNode,g?wi(k,p,g):Qn(k,p);else if(I!==4&&(p=p.child,p!==null))for(Ak(p,g,k),p=p.sibling;p!==null;)Ak(p,g,k),p=p.sibling}var ia=null,_o=!1;function is(p,g,k){for(k=k.child;k!==null;)Lk(p,g,k),k=k.sibling}function Lk(p,g,k){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(st,k)}catch{}switch(k.tag){case 5:Ea||Ad(k,g);case 6:if(Ee){var I=ia,T=_o;ia=null,is(p,g,k),ia=I,_o=T,ia!==null&&(_o?ki(ia,k.stateNode):ti(ia,k.stateNode))}else is(p,g,k);break;case 18:Ee&&ia!==null&&(_o?Zo(ia,k.stateNode):_l(ia,k.stateNode));break;case 4:Ee?(I=ia,T=_o,ia=k.stateNode.containerInfo,_o=!0,is(p,g,k),ia=I,_o=T):(Ie&&(I=k.stateNode.containerInfo,T=ue(I),Me(I,T)),is(p,g,k));break;case 0:case 11:case 14:case 15:if(!Ea&&(I=k.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){T=I=I.next;do{var M=T,W=M.destroy;M=M.tag,W!==void 0&&(M&2||M&4)&&oO(k,g,W),T=T.next}while(T!==I)}is(p,g,k);break;case 1:if(!Ea&&(Ad(k,g),I=k.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=k.memoizedProps,I.state=k.memoizedState,I.componentWillUnmount()}catch(le){Gn(k,g,le)}is(p,g,k);break;case 21:is(p,g,k);break;case 22:k.mode&1?(Ea=(I=Ea)||k.memoizedState!==null,is(p,g,k),Ea=I):is(p,g,k);break;default:is(p,g,k)}}function dO(p){var g=p.updateQueue;if(g!==null){p.updateQueue=null;var k=p.stateNode;k===null&&(k=p.stateNode=new _U),g.forEach(function(I){var T=BU.bind(null,p,I);k.has(I)||(k.add(I),I.then(T,T))})}}function Oo(p,g){var k=g.deletions;if(k!==null)for(var I=0;I<k.length;I++){var T=k[I];try{var M=p,W=g;if(Ee){var le=W;e:for(;le!==null;){switch(le.tag){case 5:ia=le.stateNode,_o=!1;break e;case 3:ia=le.stateNode.containerInfo,_o=!0;break e;case 4:ia=le.stateNode.containerInfo,_o=!0;break e}le=le.return}if(ia===null)throw Error(i(160));Lk(M,W,T),ia=null,_o=!1}else Lk(M,W,T);var ye=T.alternate;ye!==null&&(ye.return=null),T.return=null}catch(Oe){Gn(T,g,Oe)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)hO(g,p),g=g.sibling}function hO(p,g){var k=p.alternate,I=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Oo(g,p),os(p),I&4){try{Hp(3,p,p.return),Z0(3,p)}catch(Be){Gn(p,p.return,Be)}try{Hp(5,p,p.return)}catch(Be){Gn(p,p.return,Be)}}break;case 1:Oo(g,p),os(p),I&512&&k!==null&&Ad(k,k.return);break;case 5:if(Oo(g,p),os(p),I&512&&k!==null&&Ad(k,k.return),Ee){if(p.flags&32){var T=p.stateNode;try{Si(T)}catch(Be){Gn(p,p.return,Be)}}if(I&4&&(T=p.stateNode,T!=null)){var M=p.memoizedProps;if(k=k!==null?k.memoizedProps:M,I=p.type,g=p.updateQueue,p.updateQueue=null,g!==null)try{ko(T,g,I,k,M,p)}catch(Be){Gn(p,p.return,Be)}}}break;case 6:if(Oo(g,p),os(p),I&4&&Ee){if(p.stateNode===null)throw Error(i(162));T=p.stateNode,M=p.memoizedProps,k=k!==null?k.memoizedProps:M;try{Rn(T,k,M)}catch(Be){Gn(p,p.return,Be)}}break;case 3:if(Oo(g,p),os(p),I&4){if(Ee&&_e&&k!==null&&k.memoizedState.isDehydrated)try{Ku(g.containerInfo)}catch(Be){Gn(p,p.return,Be)}if(Ie){T=g.containerInfo,M=g.pendingChildren;try{Me(T,M)}catch(Be){Gn(p,p.return,Be)}}}break;case 4:if(Oo(g,p),os(p),I&4&&Ie){M=p.stateNode,T=M.containerInfo,M=M.pendingChildren;try{Me(T,M)}catch(Be){Gn(p,p.return,Be)}}break;case 13:Oo(g,p),os(p),T=p.child,T.flags&8192&&(M=T.memoizedState!==null,T.stateNode.isHidden=M,!M||T.alternate!==null&&T.alternate.memoizedState!==null||(Uk=Ke())),I&4&&dO(p);break;case 22:var W=k!==null&&k.memoizedState!==null;if(p.mode&1?(Ea=(k=Ea)||W,Oo(g,p),Ea=k):Oo(g,p),os(p),I&8192){if(k=p.memoizedState!==null,(p.stateNode.isHidden=k)&&!W&&p.mode&1)for(Ve=p,I=p.child;I!==null;){for(g=Ve=I;Ve!==null;){W=Ve;var le=W.child;switch(W.tag){case 0:case 11:case 14:case 15:Hp(4,W,W.return);break;case 1:Ad(W,W.return);var ye=W.stateNode;if(typeof ye.componentWillUnmount=="function"){var Oe=W,qe=W.return;try{var Tt=Oe;ye.props=Tt.memoizedProps,ye.state=Tt.memoizedState,ye.componentWillUnmount()}catch(Be){Gn(Oe,qe,Be)}}break;case 5:Ad(W,W.return);break;case 22:if(W.memoizedState!==null){gO(g);continue}}le!==null?(le.return=W,Ve=le):gO(g)}I=I.sibling}if(Ee){e:if(I=null,Ee)for(g=p;;){if(g.tag===5){if(I===null){I=g;try{T=g.stateNode,k?Rs(T):Nl(g.stateNode,g.memoizedProps)}catch(Be){Gn(p,p.return,Be)}}}else if(g.tag===6){if(I===null)try{M=g.stateNode,k?ba(M):Ed(M,g.memoizedProps)}catch(Be){Gn(p,p.return,Be)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;I===g&&(I=null),g=g.return}I===g&&(I=null),g.sibling.return=g.return,g=g.sibling}}}break;case 19:Oo(g,p),os(p),I&4&&dO(p);break;case 21:break;default:Oo(g,p),os(p)}}function os(p){var g=p.flags;if(g&2){try{if(Ee){e:{for(var k=p.return;k!==null;){if(uO(k)){var I=k;break e}k=k.return}throw Error(i(160))}switch(I.tag){case 5:var T=I.stateNode;I.flags&32&&(Si(T),I.flags&=-33);var M=cO(p);Ak(p,M,T);break;case 3:case 4:var W=I.stateNode.containerInfo,le=cO(p);Pk(p,le,W);break;default:throw Error(i(161))}}}catch(ye){Gn(p,p.return,ye)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function RU(p,g,k){Ve=p,pO(p)}function pO(p,g,k){for(var I=(p.mode&1)!==0;Ve!==null;){var T=Ve,M=T.child;if(T.tag===22&&I){var W=T.memoizedState!==null||J0;if(!W){var le=T.alternate,ye=le!==null&&le.memoizedState!==null||Ea;le=J0;var Oe=Ea;if(J0=W,(Ea=ye)&&!Oe)for(Ve=T;Ve!==null;)W=Ve,ye=W.child,W.tag===22&&W.memoizedState!==null?mO(T):ye!==null?(ye.return=W,Ve=ye):mO(T);for(;M!==null;)Ve=M,pO(M),M=M.sibling;Ve=T,J0=le,Ea=Oe}fO(p)}else T.subtreeFlags&8772&&M!==null?(M.return=T,Ve=M):fO(p)}}function fO(p){for(;Ve!==null;){var g=Ve;if(g.flags&8772){var k=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:Ea||Z0(5,g);break;case 1:var I=g.stateNode;if(g.flags&4&&!Ea)if(k===null)I.componentDidMount();else{var T=g.elementType===g.type?k.memoizedProps:No(g.type,k.memoizedProps);I.componentDidUpdate(T,k.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var M=g.updateQueue;M!==null&&h5(g,M,I);break;case 3:var W=g.updateQueue;if(W!==null){if(k=null,g.child!==null)switch(g.child.tag){case 5:k=Y(g.child.stateNode);break;case 1:k=g.child.stateNode}h5(g,W,k)}break;case 5:var le=g.stateNode;k===null&&g.flags&4&&ei(le,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&g.memoizedState===null){var ye=g.alternate;if(ye!==null){var Oe=ye.memoizedState;if(Oe!==null){var qe=Oe.dehydrated;qe!==null&&Xu(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Ea||g.flags&512&&Mk(g)}catch(Tt){Gn(g,g.return,Tt)}}if(g===p){Ve=null;break}if(k=g.sibling,k!==null){k.return=g.return,Ve=k;break}Ve=g.return}}function gO(p){for(;Ve!==null;){var g=Ve;if(g===p){Ve=null;break}var k=g.sibling;if(k!==null){k.return=g.return,Ve=k;break}Ve=g.return}}function mO(p){for(;Ve!==null;){var g=Ve;try{switch(g.tag){case 0:case 11:case 15:var k=g.return;try{Z0(4,g)}catch(ye){Gn(g,k,ye)}break;case 1:var I=g.stateNode;if(typeof I.componentDidMount=="function"){var T=g.return;try{I.componentDidMount()}catch(ye){Gn(g,T,ye)}}var M=g.return;try{Mk(g)}catch(ye){Gn(g,M,ye)}break;case 5:var W=g.return;try{Mk(g)}catch(ye){Gn(g,W,ye)}}}catch(ye){Gn(g,g.return,ye)}if(g===p){Ve=null;break}var le=g.sibling;if(le!==null){le.return=g.return,Ve=le;break}Ve=g.return}}var e1=0,t1=1,n1=2,r1=3,a1=4;if(typeof Symbol=="function"&&Symbol.for){var qp=Symbol.for;e1=qp("selector.component"),t1=qp("selector.has_pseudo_class"),n1=qp("selector.role"),r1=qp("selector.test_id"),a1=qp("selector.text")}function Dk(p){var g=Fe(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(i(364));return g}if(p=ln(p),p===null)throw Error(i(362));return p.stateNode.current}function Fk(p,g){switch(g.$$typeof){case e1:if(p.type===g.value)return!0;break;case t1:e:{g=g.value,p=[p,0];for(var k=0;k<p.length;){var I=p[k++],T=p[k++],M=g[T];if(I.tag!==5||!Zt(I)){for(;M!=null&&Fk(I,M);)T++,M=g[T];if(T===g.length){g=!0;break e}else for(I=I.child;I!==null;)p.push(I,T),I=I.sibling}}g=!1}return g;case n1:if(p.tag===5&&Mt(p.stateNode,g.value))return!0;break;case a1:if((p.tag===5||p.tag===6)&&(p=Jt(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case r1:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Bk(p){switch(p.$$typeof){case e1:return"<"+(E(p.value)||"Unknown")+">";case t1:return":has("+(Bk(p)||"")+")";case n1:return'[role="'+p.value+'"]';case a1:return'"'+p.value+'"';case r1:return'[data-testname="'+p.value+'"]';default:throw Error(i(365))}}function yO(p,g){var k=[];p=[p,0];for(var I=0;I<p.length;){var T=p[I++],M=p[I++],W=g[M];if(T.tag!==5||!Zt(T)){for(;W!=null&&Fk(T,W);)M++,W=g[M];if(M===g.length)k.push(T);else for(T=T.child;T!==null;)p.push(T,M),T=T.sibling}}return k}function zk(p,g){if(!et)throw Error(i(363));p=Dk(p),p=yO(p,g),g=[],p=Array.from(p);for(var k=0;k<p.length;){var I=p[k++];if(I.tag===5)Zt(I)||g.push(I.stateNode);else for(I=I.child;I!==null;)p.push(I),I=I.sibling}return g}var $U=Math.ceil,i1=o.ReactCurrentDispatcher,jk=o.ReactCurrentOwner,mr=o.ReactCurrentBatchConfig,jt=0,Hr=null,Ir=null,oa=0,Ei=0,Ld=Wi(0),Pr=0,Kp=null,tc=0,o1=0,Vk=0,Xp=null,ai=null,Uk=0,Wk=1/0,zs=null;function Dd(){Wk=Ke()+500}var s1=!1,Gk=null,Al=null,l1=!1,Ll=null,u1=0,Yp=0,Hk=null,c1=-1,d1=0;function Ia(){return jt&6?Ke():c1!==-1?c1:c1=Ke()}function Dl(p){return p.mode&1?jt&2&&oa!==0?oa&-oa:fU.transition!==null?(d1===0&&(d1=ae()),d1):(p=Ne,p!==0?p:$e()):1}function Xi(p,g,k,I){if(50<Yp)throw Yp=0,Hk=null,Error(i(185));Ce(p,k,I),(!(jt&2)||p!==Hr)&&(p===Hr&&(!(jt&2)&&(o1|=k),Pr===4&&Fl(p,oa)),ii(p,I),k===1&&jt===0&&!(g.mode&1)&&(Dd(),Dn&&Sr()))}function ii(p,g){var k=p.callbackNode;U(p,g);var I=Ps(p,p===Hr?oa:0);if(I===0)k!==null&&rt(k),p.callbackNode=null,p.callbackPriority=0;else if(g=I&-I,p.callbackPriority!==g){if(k!=null&&rt(k),g===1)p.tag===0?Eo(vO.bind(null,p)):Wa(vO.bind(null,p)),Ze?nt(function(){!(jt&6)&&Sr()}):gt(ct,Sr),k=null;else{switch(je(I)){case 1:k=ct;break;case 4:k=ht;break;case 16:k=at;break;case 536870912:k=kt;break;default:k=at}k=NO(k,bO.bind(null,p))}p.callbackPriority=g,p.callbackNode=k}}function bO(p,g){if(c1=-1,d1=0,jt&6)throw Error(i(327));var k=p.callbackNode;if(ac()&&p.callbackNode!==k)return null;var I=Ps(p,p===Hr?oa:0);if(I===0)return null;if(I&30||I&p.expiredLanes||g)g=h1(p,I);else{g=I;var T=jt;jt|=2;var M=kO();(Hr!==p||oa!==g)&&(zs=null,Dd(),nc(p,g));do try{AU();break}catch(le){wO(p,le)}while(!0);ok(),i1.current=M,jt=T,Ir!==null?g=0:(Hr=null,oa=0,g=Pr)}if(g!==0){if(g===2&&(T=ee(p),T!==0&&(I=T,g=qk(p,T))),g===1)throw k=Kp,nc(p,0),Fl(p,I),ii(p,Ke()),k;if(g===6)Fl(p,I);else{if(T=p.current.alternate,!(I&30)&&!MU(T)&&(g=h1(p,I),g===2&&(M=ee(p),M!==0&&(I=M,g=qk(p,M))),g===1))throw k=Kp,nc(p,0),Fl(p,I),ii(p,Ke()),k;switch(p.finishedWork=T,p.finishedLanes=I,g){case 0:case 1:throw Error(i(345));case 2:rc(p,ai,zs);break;case 3:if(Fl(p,I),(I&130023424)===I&&(g=Uk+500-Ke(),10<g)){if(Ps(p,0)!==0)break;if(T=p.suspendedLanes,(T&I)!==I){Ia(),p.pingedLanes|=p.suspendedLanes&T;break}p.timeoutHandle=xe(rc.bind(null,p,ai,zs),g);break}rc(p,ai,zs);break;case 4:if(Fl(p,I),(I&4194240)===I)break;for(g=p.eventTimes,T=-1;0<I;){var W=31-Ci(I);M=1<<W,W=g[W],W>T&&(T=W),I&=~M}if(I=T,I=Ke()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*$U(I/1960))-I,10<I){p.timeoutHandle=xe(rc.bind(null,p,ai,zs),I);break}rc(p,ai,zs);break;case 5:rc(p,ai,zs);break;default:throw Error(i(329))}}}return ii(p,Ke()),p.callbackNode===k?bO.bind(null,p):null}function qk(p,g){var k=Xp;return p.current.memoizedState.isDehydrated&&(nc(p,g).flags|=256),p=h1(p,g),p!==2&&(g=ai,ai=k,g!==null&&Kk(g)),p}function Kk(p){ai===null?ai=p:ai.push.apply(ai,p)}function MU(p){for(var g=p;;){if(g.flags&16384){var k=g.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var I=0;I<k.length;I++){var T=k[I],M=T.getSnapshot;T=T.value;try{if(!Gt(M(),T))return!1}catch{return!1}}}if(k=g.child,g.subtreeFlags&16384&&k!==null)k.return=g,g=k;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Fl(p,g){for(g&=~Vk,g&=~o1,p.suspendedLanes|=g,p.pingedLanes&=~g,p=p.expirationTimes;0<g;){var k=31-Ci(g),I=1<<k;p[k]=-1,g&=~I}}function vO(p){if(jt&6)throw Error(i(327));ac();var g=Ps(p,0);if(!(g&1))return ii(p,Ke()),null;var k=h1(p,g);if(p.tag!==0&&k===2){var I=ee(p);I!==0&&(g=I,k=qk(p,I))}if(k===1)throw k=Kp,nc(p,0),Fl(p,g),ii(p,Ke()),k;if(k===6)throw Error(i(345));return p.finishedWork=p.current.alternate,p.finishedLanes=g,rc(p,ai,zs),ii(p,Ke()),null}function xO(p){Ll!==null&&Ll.tag===0&&!(jt&6)&&ac();var g=jt;jt|=1;var k=mr.transition,I=Ne;try{if(mr.transition=null,Ne=1,p)return p()}finally{Ne=I,mr.transition=k,jt=g,!(jt&6)&&Sr()}}function Xk(){Ei=Ld.current,Sn(Ld)}function nc(p,g){p.finishedWork=null,p.finishedLanes=0;var k=p.timeoutHandle;if(k!==oe&&(p.timeoutHandle=oe,q(k)),Ir!==null)for(k=Ir.return;k!==null;){var I=k;switch(Ls(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Id();break;case 3:Md(),Sn(xa),Sn(Wr),mk();break;case 5:fk(I);break;case 4:Md();break;case 13:Sn(Jn);break;case 19:Sn(Jn);break;case 10:sk(I.type._context);break;case 22:case 23:Xk()}k=k.return}if(Hr=p,Ir=p=Bl(p.current,null),oa=Ei=g,Pr=0,Kp=null,Vk=o1=tc=0,ai=Xp=null,Zu!==null){for(g=0;g<Zu.length;g++)if(k=Zu[g],I=k.interleaved,I!==null){k.interleaved=null;var T=I.next,M=k.pending;if(M!==null){var W=M.next;M.next=T,I.next=W}k.pending=I}Zu=null}return p}function wO(p,g){do{var k=Ir;try{if(ok(),U0.current=q0,W0){for(var I=Zn.memoizedState;I!==null;){var T=I.queue;T!==null&&(T.pending=null),I=I.next}W0=!1}if(ec=0,Gr=Mr=Zn=null,Bp=!1,zp=0,jk.current=null,k===null||k.return===null){Pr=1,Kp=g,Ir=null;break}e:{var M=p,W=k.return,le=k,ye=g;if(g=oa,le.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Oe=ye,qe=le,Tt=qe.tag;if(!(qe.mode&1)&&(Tt===0||Tt===11||Tt===15)){var Be=qe.alternate;Be?(qe.updateQueue=Be.updateQueue,qe.memoizedState=Be.memoizedState,qe.lanes=Be.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Fn=G5(W);if(Fn!==null){Fn.flags&=-257,H5(Fn,W,le,M,g),Fn.mode&1&&W5(M,Oe,g),g=Fn,ye=Oe;var Cn=g.updateQueue;if(Cn===null){var oi=new Set;oi.add(ye),g.updateQueue=oi}else Cn.add(ye);break e}else{if(!(g&1)){W5(M,Oe,g),Yk();break e}ye=Error(i(426))}}else if(an&&le.mode&1){var js=G5(W);if(js!==null){!(js.flags&65536)&&(js.flags|=256),H5(js,W,le,M,g),ak(Pd(ye,le));break e}}M=ye=Pd(ye,le),Pr!==4&&(Pr=2),Xp===null?Xp=[M]:Xp.push(M),M=W;do{switch(M.tag){case 3:M.flags|=65536,g&=-g,M.lanes|=g;var me=V5(M,ye,g);d5(M,me);break e;case 1:le=ye;var ce=M.type,we=M.stateNode;if(!(M.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(Al===null||!Al.has(we)))){M.flags|=65536,g&=-g,M.lanes|=g;var ze=U5(M,le,g);d5(M,ze);break e}}M=M.return}while(M!==null)}CO(k)}catch(dt){g=dt,Ir===k&&k!==null&&(Ir=k=k.return);continue}break}while(!0)}function kO(){var p=i1.current;return i1.current=q0,p===null?q0:p}function Yk(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Hr===null||!(tc&268435455)&&!(o1&268435455)||Fl(Hr,oa)}function h1(p,g){var k=jt;jt|=2;var I=kO();(Hr!==p||oa!==g)&&(zs=null,nc(p,g));do try{PU();break}catch(T){wO(p,T)}while(!0);if(ok(),jt=k,i1.current=I,Ir!==null)throw Error(i(261));return Hr=null,oa=0,Pr}function PU(){for(;Ir!==null;)SO(Ir)}function AU(){for(;Ir!==null&&!$t();)SO(Ir)}function SO(p){var g=TO(p.alternate,p,Ei);p.memoizedProps=p.pendingProps,g===null?CO(p):Ir=g,jk.current=null}function CO(p){var g=p;do{var k=g.alternate;if(p=g.return,g.flags&32768){if(k=NU(k,g),k!==null){k.flags&=32767,Ir=k;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Pr=6,Ir=null;return}}else if(k=TU(k,g,Ei),k!==null){Ir=k;return}if(g=g.sibling,g!==null){Ir=g;return}Ir=g=p}while(g!==null);Pr===0&&(Pr=5)}function rc(p,g,k){var I=Ne,T=mr.transition;try{mr.transition=null,Ne=1,LU(p,g,k,I)}finally{mr.transition=T,Ne=I}return null}function LU(p,g,k,I){do ac();while(Ll!==null);if(jt&6)throw Error(i(327));k=p.finishedWork;var T=p.finishedLanes;if(k===null)return null;if(p.finishedWork=null,p.finishedLanes=0,k===p.current)throw Error(i(177));p.callbackNode=null,p.callbackPriority=0;var M=k.lanes|k.childLanes;if(Ae(p,M),p===Hr&&(Ir=Hr=null,oa=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||l1||(l1=!0,NO(at,function(){return ac(),null})),M=(k.flags&15990)!==0,k.subtreeFlags&15990||M){M=mr.transition,mr.transition=null;var W=Ne;Ne=1;var le=jt;jt|=4,jk.current=null,OU(p,k),hO(k,p),Q(p.containerInfo),p.current=k,RU(k),wt(),jt=le,Ne=W,mr.transition=M}else p.current=k;if(l1&&(l1=!1,Ll=p,u1=T),M=p.pendingLanes,M===0&&(Al=null),or(k.stateNode),ii(p,Ke()),g!==null)for(I=p.onRecoverableError,k=0;k<g.length;k++)T=g[k],I(T.value,{componentStack:T.stack,digest:T.digest});if(s1)throw s1=!1,p=Gk,Gk=null,p;return u1&1&&p.tag!==0&&ac(),M=p.pendingLanes,M&1?p===Hk?Yp++:(Yp=0,Hk=p):Yp=0,Sr(),null}function ac(){if(Ll!==null){var p=je(u1),g=mr.transition,k=Ne;try{if(mr.transition=null,Ne=16>p?16:p,Ll===null)var I=!1;else{if(p=Ll,Ll=null,u1=0,jt&6)throw Error(i(331));var T=jt;for(jt|=4,Ve=p.current;Ve!==null;){var M=Ve,W=M.child;if(Ve.flags&16){var le=M.deletions;if(le!==null){for(var ye=0;ye<le.length;ye++){var Oe=le[ye];for(Ve=Oe;Ve!==null;){var qe=Ve;switch(qe.tag){case 0:case 11:case 15:Hp(8,qe,M)}var Tt=qe.child;if(Tt!==null)Tt.return=qe,Ve=Tt;else for(;Ve!==null;){qe=Ve;var Be=qe.sibling,Fn=qe.return;if(lO(qe),qe===Oe){Ve=null;break}if(Be!==null){Be.return=Fn,Ve=Be;break}Ve=Fn}}}var Cn=M.alternate;if(Cn!==null){var oi=Cn.child;if(oi!==null){Cn.child=null;do{var js=oi.sibling;oi.sibling=null,oi=js}while(oi!==null)}}Ve=M}}if(M.subtreeFlags&2064&&W!==null)W.return=M,Ve=W;else e:for(;Ve!==null;){if(M=Ve,M.flags&2048)switch(M.tag){case 0:case 11:case 15:Hp(9,M,M.return)}var me=M.sibling;if(me!==null){me.return=M.return,Ve=me;break e}Ve=M.return}}var ce=p.current;for(Ve=ce;Ve!==null;){W=Ve;var we=W.child;if(W.subtreeFlags&2064&&we!==null)we.return=W,Ve=we;else e:for(W=ce;Ve!==null;){if(le=Ve,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:Z0(9,le)}}catch(dt){Gn(le,le.return,dt)}if(le===W){Ve=null;break e}var ze=le.sibling;if(ze!==null){ze.return=le.return,Ve=ze;break e}Ve=le.return}}if(jt=T,Sr(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(st,p)}catch{}I=!0}return I}finally{Ne=k,mr.transition=g}}return!1}function EO(p,g,k){g=Pd(k,g),g=V5(p,g,1),p=Pl(p,g,1),g=Ia(),p!==null&&(Ce(p,1,g),ii(p,g))}function Gn(p,g,k){if(p.tag===3)EO(p,p,k);else for(;g!==null;){if(g.tag===3){EO(g,p,k);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Al===null||!Al.has(I))){p=Pd(k,p),p=U5(g,p,1),g=Pl(g,p,1),p=Ia(),g!==null&&(Ce(g,1,p),ii(g,p));break}}g=g.return}}function DU(p,g,k){var I=p.pingCache;I!==null&&I.delete(g),g=Ia(),p.pingedLanes|=p.suspendedLanes&k,Hr===p&&(oa&k)===k&&(Pr===4||Pr===3&&(oa&130023424)===oa&&500>Ke()-Uk?nc(p,0):Vk|=k),ii(p,g)}function IO(p,g){g===0&&(p.mode&1?(g=Ms,Ms<<=1,!(Ms&130023424)&&(Ms=4194304)):g=1);var k=Ia();p=ts(p,g),p!==null&&(Ce(p,g,k),ii(p,k))}function FU(p){var g=p.memoizedState,k=0;g!==null&&(k=g.retryLane),IO(p,k)}function BU(p,g){var k=0;switch(p.tag){case 13:var I=p.stateNode,T=p.memoizedState;T!==null&&(k=T.retryLane);break;case 19:I=p.stateNode;break;default:throw Error(i(314))}I!==null&&I.delete(g),IO(p,k)}var TO;TO=function(p,g,k){if(p!==null)if(p.memoizedProps!==g.pendingProps||xa.current)ri=!0;else{if(!(p.lanes&k)&&!(g.flags&128))return ri=!1,IU(p,g,k);ri=!!(p.flags&131072)}else ri=!1,an&&g.flags&1048576&&Ap(g,Er,g.index);switch(g.lanes=0,g.tag){case 2:var I=g.type;X0(p,g),p=g.pendingProps;var T=$l(g,Wr.current);Od(g,k),T=vk(null,g,I,p,T,k);var M=xk();return g.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,wa(I)?(M=!0,es(g)):M=!1,g.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,ck(g),T.updater=z0,g.stateNode=T,T._reactInternals=g,hk(g,I,p,k),g=Nk(null,g,I,!0,M,k)):(g.tag=0,an&&M&&Ga(g),Ha(null,g,T,k),g=g.child),g;case 16:I=g.elementType;e:{switch(X0(p,g),p=g.pendingProps,T=I._init,I=T(I._payload),g.type=I,T=g.tag=jU(I),p=No(I,p),T){case 0:g=Tk(null,g,I,p,k);break e;case 1:g=J5(null,g,I,p,k);break e;case 11:g=q5(null,g,I,p,k);break e;case 14:g=K5(null,g,I,No(I.type,p),k);break e}throw Error(i(306,I,""))}return g;case 0:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:No(I,T),Tk(p,g,I,T,k);case 1:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:No(I,T),J5(p,g,I,T,k);case 3:e:{if(Z5(g),p===null)throw Error(i(387));I=g.pendingProps,M=g.memoizedState,T=M.element,c5(p,g),B0(g,I,null,k);var W=g.memoizedState;if(I=W.element,_e&&M.isDehydrated)if(M={element:I,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},g.updateQueue.baseState=M,g.memoizedState=M,g.flags&256){T=Pd(Error(i(423)),g),g=eO(p,g,I,k,T);break e}else if(I!==T){T=Pd(Error(i(424)),g),g=eO(p,g,I,k,T);break e}else for(_e&&(aa=ir(g.stateNode.containerInfo),sr=g,an=!0,To=null,Ds=!1),k=v5(g,null,I,k),g.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Nd(),I===T){g=Bs(p,g,k);break e}Ha(p,g,I,k)}g=g.child}return g;case 5:return x5(g),p===null&&rk(g),I=g.type,T=g.pendingProps,M=p!==null?p.memoizedProps:null,W=T.children,de(I,T)?W=null:M!==null&&de(I,M)&&(g.flags|=32),Q5(p,g),Ha(p,g,W,k),g.child;case 6:return p===null&&rk(g),null;case 13:return tO(p,g,k);case 4:return pk(g,g.stateNode.containerInfo),I=g.pendingProps,p===null?g.child=Rd(g,null,I,k):Ha(p,g,I,k),g.child;case 11:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:No(I,T),q5(p,g,I,T,k);case 7:return Ha(p,g,g.pendingProps,k),g.child;case 8:return Ha(p,g,g.pendingProps.children,k),g.child;case 12:return Ha(p,g,g.pendingProps.children,k),g.child;case 10:e:{if(I=g.type._context,T=g.pendingProps,M=g.memoizedProps,W=T.value,l5(g,I,W),M!==null)if(Gt(M.value,W)){if(M.children===T.children&&!xa.current){g=Bs(p,g,k);break e}}else for(M=g.child,M!==null&&(M.return=g);M!==null;){var le=M.dependencies;if(le!==null){W=M.child;for(var ye=le.firstContext;ye!==null;){if(ye.context===I){if(M.tag===1){ye=Fs(-1,k&-k),ye.tag=2;var Oe=M.updateQueue;if(Oe!==null){Oe=Oe.shared;var qe=Oe.pending;qe===null?ye.next=ye:(ye.next=qe.next,qe.next=ye),Oe.pending=ye}}M.lanes|=k,ye=M.alternate,ye!==null&&(ye.lanes|=k),lk(M.return,k,g),le.lanes|=k;break}ye=ye.next}}else if(M.tag===10)W=M.type===g.type?null:M.child;else if(M.tag===18){if(W=M.return,W===null)throw Error(i(341));W.lanes|=k,le=W.alternate,le!==null&&(le.lanes|=k),lk(W,k,g),W=M.sibling}else W=M.child;if(W!==null)W.return=M;else for(W=M;W!==null;){if(W===g){W=null;break}if(M=W.sibling,M!==null){M.return=W.return,W=M;break}W=W.return}M=W}Ha(p,g,T.children,k),g=g.child}return g;case 9:return T=g.type,I=g.pendingProps.children,Od(g,k),T=Hi(T),I=I(T),g.flags|=1,Ha(p,g,I,k),g.child;case 14:return I=g.type,T=No(I,g.pendingProps),T=No(I.type,T),K5(p,g,I,T,k);case 15:return X5(p,g,g.type,g.pendingProps,k);case 17:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:No(I,T),X0(p,g),g.tag=1,wa(I)?(p=!0,es(g)):p=!1,Od(g,k),g5(g,I,T),hk(g,I,T,k),Nk(null,g,I,!0,p,k);case 19:return rO(p,g,k);case 22:return Y5(p,g,k)}throw Error(i(156,g.tag))};function NO(p,g){return gt(p,g)}function zU(p,g,k,I){this.tag=p,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(p,g,k,I){return new zU(p,g,k,I)}function Qk(p){return p=p.prototype,!(!p||!p.isReactComponent)}function jU(p){if(typeof p=="function")return Qk(p)?1:0;if(p!=null){if(p=p.$$typeof,p===m)return 11;if(p===b)return 14}return 2}function Bl(p,g){var k=p.alternate;return k===null?(k=Yi(p.tag,g,p.key,p.mode),k.elementType=p.elementType,k.type=p.type,k.stateNode=p.stateNode,k.alternate=p,p.alternate=k):(k.pendingProps=g,k.type=p.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=p.flags&14680064,k.childLanes=p.childLanes,k.lanes=p.lanes,k.child=p.child,k.memoizedProps=p.memoizedProps,k.memoizedState=p.memoizedState,k.updateQueue=p.updateQueue,g=p.dependencies,k.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},k.sibling=p.sibling,k.index=p.index,k.ref=p.ref,k}function p1(p,g,k,I,T,M){var W=2;if(I=p,typeof p=="function")Qk(p)&&(W=1);else if(typeof p=="string")W=5;else e:switch(p){case u:return ic(k.children,T,M,g);case c:W=8,T|=8;break;case d:return p=Yi(12,k,g,T|2),p.elementType=d,p.lanes=M,p;case y:return p=Yi(13,k,g,T),p.elementType=y,p.lanes=M,p;case v:return p=Yi(19,k,g,T),p.elementType=v,p.lanes=M,p;case w:return f1(k,T,M,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case h:W=10;break e;case f:W=9;break e;case m:W=11;break e;case b:W=14;break e;case x:W=16,I=null;break e}throw Error(i(130,p==null?p:typeof p,""))}return g=Yi(W,k,g,T),g.elementType=p,g.type=I,g.lanes=M,g}function ic(p,g,k,I){return p=Yi(7,p,I,g),p.lanes=k,p}function f1(p,g,k,I){return p=Yi(22,p,I,g),p.elementType=w,p.lanes=k,p.stateNode={isHidden:!1},p}function Jk(p,g,k){return p=Yi(6,p,null,g),p.lanes=k,p}function Zk(p,g,k){return g=Yi(4,p.children!==null?p.children:[],p.key,g),g.lanes=k,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function VU(p,g,k,I,T){this.tag=g,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=I,this.onRecoverableError=T,_e&&(this.mutableSourceEagerHydrationData=null)}function _O(p,g,k,I,T,M,W,le,ye){return p=new VU(p,g,k,le,ye),g===1?(g=1,M===!0&&(g|=8)):g=0,M=Yi(3,null,null,g),p.current=M,M.stateNode=p,M.memoizedState={element:I,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},ck(M),p}function OO(p){if(!p)return Gi;p=p._reactInternals;e:{if(N(p)!==p||p.tag!==1)throw Error(i(170));var g=p;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(wa(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(i(171))}if(p.tag===1){var k=p.type;if(wa(k))return Un(p,k,g)}return g}function RO(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(i(188)):(p=Object.keys(p).join(","),Error(i(268,p)));return p=D(g),p===null?null:p.stateNode}function $O(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var k=p.retryLane;p.retryLane=k!==0&&k<g?k:g}}function g1(p,g){$O(p,g),(p=p.alternate)&&$O(p,g)}function UU(p){return p=D(p),p===null?null:p.stateNode}function WU(){return null}return e.attemptContinuousHydration=function(p){if(p.tag===13){var g=ts(p,134217728);if(g!==null){var k=Ia();Xi(g,p,134217728,k)}g1(p,134217728)}},e.attemptDiscreteHydration=function(p){if(p.tag===13){var g=ts(p,1);if(g!==null){var k=Ia();Xi(g,p,1,k)}g1(p,1)}},e.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var g=Dl(p),k=ts(p,g);if(k!==null){var I=Ia();Xi(k,p,g,I)}g1(p,g)}},e.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var g=p.stateNode;if(g.current.memoizedState.isDehydrated){var k=Ju(g.pendingLanes);k!==0&&(Re(g,k|1),ii(g,Ke()),!(jt&6)&&(Dd(),Sr()))}break;case 13:xO(function(){var I=ts(p,1);if(I!==null){var T=Ia();Xi(I,p,1,T)}}),g1(p,1)}},e.batchedUpdates=function(p,g){var k=jt;jt|=1;try{return p(g)}finally{jt=k,jt===0&&(Dd(),Dn&&Sr())}},e.createComponentSelector=function(p){return{$$typeof:e1,value:p}},e.createContainer=function(p,g,k,I,T,M,W){return _O(p,g,!1,null,k,I,T,M,W)},e.createHasPseudoClassSelector=function(p){return{$$typeof:t1,value:p}},e.createHydrationContainer=function(p,g,k,I,T,M,W,le,ye){return p=_O(k,I,!0,p,T,M,W,le,ye),p.context=OO(null),k=p.current,I=Ia(),T=Dl(k),M=Fs(I,T),M.callback=g??null,Pl(k,M,T),p.current.lanes=T,Ce(p,T,I),ii(p,I),p},e.createPortal=function(p,g,k){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:p,containerInfo:g,implementation:k}},e.createRoleSelector=function(p){return{$$typeof:n1,value:p}},e.createTestNameSelector=function(p){return{$$typeof:r1,value:p}},e.createTextSelector=function(p){return{$$typeof:a1,value:p}},e.deferredUpdates=function(p){var g=Ne,k=mr.transition;try{return mr.transition=null,Ne=16,p()}finally{Ne=g,mr.transition=k}},e.discreteUpdates=function(p,g,k,I,T){var M=Ne,W=mr.transition;try{return mr.transition=null,Ne=1,p(g,k,I,T)}finally{Ne=M,mr.transition=W,jt===0&&Dd()}},e.findAllNodes=zk,e.findBoundingRects=function(p,g){if(!et)throw Error(i(363));g=zk(p,g),p=[];for(var k=0;k<g.length;k++)p.push(Ut(g[k]));for(g=p.length-1;0<g;g--){k=p[g];for(var I=k.x,T=I+k.width,M=k.y,W=M+k.height,le=g-1;0<=le;le--)if(g!==le){var ye=p[le],Oe=ye.x,qe=Oe+ye.width,Tt=ye.y,Be=Tt+ye.height;if(I>=Oe&&M>=Tt&&T<=qe&&W<=Be){p.splice(g,1);break}else if(I!==Oe||k.width!==ye.width||Be<M||Tt>W){if(!(M!==Tt||k.height!==ye.height||qe<I||Oe>T)){Oe>I&&(ye.width+=Oe-I,ye.x=I),qe<T&&(ye.width=T-Oe),p.splice(g,1);break}}else{Tt>M&&(ye.height+=Tt-M,ye.y=M),Be<W&&(ye.height=W-Tt),p.splice(g,1);break}}}return p},e.findHostInstance=RO,e.findHostInstanceWithNoPortals=function(p){return p=P(p),p=p!==null?B(p):null,p===null?null:p.stateNode},e.findHostInstanceWithWarning=function(p){return RO(p)},e.flushControlled=function(p){var g=jt;jt|=1;var k=mr.transition,I=Ne;try{mr.transition=null,Ne=1,p()}finally{Ne=I,mr.transition=k,jt=g,jt===0&&(Dd(),Sr())}},e.flushPassiveEffects=ac,e.flushSync=xO,e.focusWithin=function(p,g){if(!et)throw Error(i(363));for(p=Dk(p),g=yO(p,g),g=Array.from(g),p=0;p<g.length;){var k=g[p++];if(!Zt(k)){if(k.tag===5&&It(k.stateNode))return!0;for(k=k.child;k!==null;)g.push(k),k=k.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ne},e.getFindAllNodesFailureDescription=function(p,g){if(!et)throw Error(i(363));var k=0,I=[];p=[Dk(p),0];for(var T=0;T<p.length;){var M=p[T++],W=p[T++],le=g[W];if((M.tag!==5||!Zt(M))&&(Fk(M,le)&&(I.push(Bk(le)),W++,W>k&&(k=W)),W<g.length))for(M=M.child;M!==null;)p.push(M,W),M=M.sibling}if(k<g.length){for(p=[];k<g.length;k++)p.push(Bk(g[k]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},e.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return Y(p.child.stateNode);default:return p.child.stateNode}},e.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:UU,findFiberByHostInstance:p.findFiberByHostInstance||WU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{st=g.inject(p),vt=g}catch{}p=!!g.checkDCE}}return p},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(p,g,k,I){if(!et)throw Error(i(363));p=zk(p,g);var T=Vn(p,k,I).disconnect;return{disconnect:function(){T()}}},e.registerMutableSourceForHydration=function(p,g){var k=g._getVersion;k=k(g._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[g,k]:p.mutableSourceEagerHydrationData.push(g,k)},e.runWithPriority=function(p,g){var k=Ne;try{return Ne=p,g()}finally{Ne=k}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(p,g,k,I){var T=g.current,M=Ia(),W=Dl(T);return k=OO(k),g.context===null?g.context=k:g.pendingContext=k,g=Fs(M,W),g.payload={element:p},I=I===void 0?null:I,I!==null&&(g.callback=I),p=Pl(T,g,W),p!==null&&(Xi(p,T,W,M),F0(p,T,W)),W},e};A8.exports=Jie;var Zie=A8.exports;const eoe=Ii(Zie);var L8={exports:{}},jc={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/jc.ConcurrentRoot=1,jc.ContinuousEventPriority=4,jc.DefaultEventPriority=16,jc.DiscreteEventPriority=1,jc.IdleEventPriority=536870912,jc.LegacyRoot=0,L8.exports=jc;var D8=L8.exports;const F8={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let B8=!1,z8=!1;const Y3=".react-konva-event",toe=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,noe=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,roe={};function mv(t,e,n=roe){if(!B8&&"zIndex"in e&&(console.warn(noe),B8=!0),!z8&&e.draggable){var r=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;r&&!a&&(console.warn(toe),z8=!0)}for(var i in n)if(!F8[i]){var o=i.slice(0,2)==="on",s=n[i]!==e[i];if(o&&s){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[i])}var u=!e.hasOwnProperty(i);u&&t.setAttr(i,void 0)}var c=e._useStrictMode,d={},h=!1;const f={};for(var i in e)if(!F8[i]){var o=i.slice(0,2)==="on",m=n[i]!==e[i];if(o&&m){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[i]&&(f[l]=e[i])}!o&&(e[i]!==n[i]||c&&e[i]!==t.getAttr(i))&&(h=!0,d[i]=e[i])}h&&(t.setAttrs(d),xu(t));for(var l in f)t.on(l+Y3,f[l])}function xu(t){if(!Ft.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const j8={},aoe={};vg.Node.prototype._applyProps=mv;function ioe(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),xu(t)}function ooe(t,e,n){let r=vg[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=vg.Group);const a={},i={};for(var o in e){var s=o.slice(0,2)==="on";s?i[o]=e[o]:a[o]=e[o]}const l=new r(a);return mv(l,i),l}function soe(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function loe(t,e,n){return!1}function uoe(t){return t}function coe(){return null}function doe(){return null}function hoe(t,e,n,r){return aoe}function poe(){}function foe(t){}function goe(t,e){return!1}function moe(){return j8}function yoe(){return j8}const boe=setTimeout,voe=clearTimeout,xoe=-1;function woe(t,e){return!1}const koe=!1,Soe=!0,Coe=!0;function Eoe(t,e){e.parent===t?e.moveToTop():t.add(e),xu(t)}function Ioe(t,e){e.parent===t?e.moveToTop():t.add(e),xu(t)}function V8(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),xu(t)}function Toe(t,e,n){V8(t,e,n)}function Noe(t,e){e.destroy(),e.off(Y3),xu(t)}function _oe(t,e){e.destroy(),e.off(Y3),xu(t)}function Ooe(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function Roe(t,e,n){}function $oe(t,e,n,r,a){mv(t,a,r)}function Moe(t){t.hide(),xu(t)}function Poe(t){}function Aoe(t,e){(e.visible==null||e.visible)&&t.show()}function Loe(t,e){}function Doe(t){}function Foe(){}const Boe=()=>D8.DefaultEventPriority,zoe=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Eoe,appendChildToContainer:Ioe,appendInitialChild:ioe,cancelTimeout:voe,clearContainer:Doe,commitMount:Roe,commitTextUpdate:Ooe,commitUpdate:$oe,createInstance:ooe,createTextInstance:soe,detachDeletedInstance:Foe,finalizeInitialChildren:loe,getChildHostContext:yoe,getCurrentEventPriority:Boe,getPublicInstance:uoe,getRootHostContext:moe,hideInstance:Moe,hideTextInstance:Poe,idlePriority:af.unstable_IdlePriority,insertBefore:V8,insertInContainerBefore:Toe,isPrimaryRenderer:koe,noTimeout:xoe,now:af.unstable_now,prepareForCommit:coe,preparePortalMount:doe,prepareUpdate:hoe,removeChild:Noe,removeChildFromContainer:_oe,resetAfterCommit:poe,resetTextContent:foe,run:af.unstable_runWithPriority,scheduleTimeout:boe,shouldDeprioritizeSubtree:goe,shouldSetTextContent:woe,supportsMutation:Coe,unhideInstance:Aoe,unhideTextInstance:Loe,warnsIfNotActing:Soe},Symbol.toStringTag,{value:"Module"}));var joe=Object.defineProperty,Voe=Object.defineProperties,Uoe=Object.getOwnPropertyDescriptors,U8=Object.getOwnPropertySymbols,Woe=Object.prototype.hasOwnProperty,Goe=Object.prototype.propertyIsEnumerable,W8=(t,e,n)=>e in t?joe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G8=(t,e)=>{for(var n in e||(e={}))Woe.call(e,n)&&W8(t,n,e[n]);if(U8)for(var n of U8(e))Goe.call(e,n)&&W8(t,n,e[n]);return t},Hoe=(t,e)=>Voe(t,Uoe(e));function H8(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const a=H8(r,e,n);if(a)return a;r=e?null:r.sibling}}function q8(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Q3=q8(O.createContext(null));class K8 extends O.Component{render(){return O.createElement(Q3.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:X8,ReactCurrentDispatcher:Y8}=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function qoe(){const t=O.useContext(Q3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=O.useId();return O.useMemo(()=>{for(const n of[X8?.current,t,t?.alternate]){if(!n)continue;const r=H8(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===e)return!0;i=i.next}});if(r)return r}},[t,e])}function Koe(){var t,e;const n=qoe(),[r]=O.useState(()=>new Map);r.clear();let a=n;for(;a;){const i=(t=a.type)==null?void 0:t._context;i&&i!==Q3&&!r.has(i)&&r.set(i,(e=Y8?.current)==null?void 0:e.readContext(q8(i))),a=a.return}return r}function Xoe(){const t=Koe();return O.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>O.createElement(e,null,O.createElement(n.Provider,Hoe(G8({},r),{value:t.get(n)}))),e=>O.createElement(K8,G8({},e))),[t])}function Yoe(t){const e=G.useRef({});return G.useLayoutEffect(()=>{e.current=t}),G.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Qoe=t=>{const e=G.useRef(),n=G.useRef(),r=G.useRef(),a=Yoe(t),i=Xoe(),o=s=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(s):l.current=s)};return G.useLayoutEffect(()=>(n.current=new vg.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=xg.createContainer(n.current,D8.LegacyRoot,!1,null),xg.updateContainer(G.createElement(i,{},t.children),r.current),()=>{vg.isBrowser&&(o(null),xg.updateContainer(null,r.current,null),n.current.destroy())}),[]),G.useLayoutEffect(()=>{o(n.current),mv(n.current,t,a),xg.updateContainer(G.createElement(i,{},t.children),r.current,null)}),G.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},J3="Layer",Q8="Image",Joe="Transformer",xg=eoe(zoe);xg.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:G.version,rendererPackageName:"react-konva"});const Zoe=G.forwardRef((t,e)=>G.createElement(K8,{},G.createElement(Qoe,{...t,forwardedRef:e})));var Vc=O,ese=function(t,e,n){const r=Vc.useRef("loading"),a=Vc.useRef(),[i,o]=Vc.useState(0),s=Vc.useRef(),l=Vc.useRef(),u=Vc.useRef();return(s.current!==t||l.current!==e||u.current!==n)&&(r.current="loading",a.current=void 0,s.current=t,l.current=e,u.current=n),Vc.useLayoutEffect(function(){if(!t)return;var c=document.createElement("img");function d(){r.current="loaded",a.current=c,o(Math.random())}function h(){r.current="failed",a.current=void 0,o(Math.random())}return c.addEventListener("load",d),c.addEventListener("error",h),e&&(c.crossOrigin=e),n&&(c.referrerPolicy=n),c.src=t,function(){c.removeEventListener("load",d),c.removeEventListener("error",h)}},[t,e,n]),[a.current,r.current]};const J8=Ii(ese),Z8=({front:t})=>{const{frame:e}=_c(),[n]=J8(t?e.front:e.image,"anonymous");return X.jsx(Q8,{image:n,draggable:!1})},tse=({canvasImage:t,isSelected:e,onSelect:n})=>{const r=O.useRef(),a=O.useRef(),[i]=J8(t.image,"anonymous"),o=_c(c=>c.transformCanvasImage);O.useEffect(()=>{var c;e&&(a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw())},[e]),O.useEffect(()=>{i&&r.current.cache()},[i]);const s=()=>{o({...t,isDragging:!0})},l=c=>{o({...t,isDragging:!1,x:c.target.x(),y:c.target.y()})},u=()=>{var c;const d=r.current,h=d.scaleX(),f=d.scaleY(),m=Math.max(5,d.width()*h),y=Math.max(d.height()*f);o({...t,x:d.x(),y:d.y(),width:m,height:y}),a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw()};return X.jsxs(X.Fragment,{children:[X.jsx(Q8,{brightness:t.brightness,contrast:t.contrast,draggable:!0,filters:[P8.Filters.Brighten,P8.Filters.Contrast],id:t.id,image:i,onClick:n,onDragEnd:l,onDragStart:s,onTap:n,onTransformEnd:u,opacity:t.opacity||1,perfectDrawEnabled:!1,ref:r,scaleX:.5,scaleY:.5,x:t.x,y:t.y},t.id),e&&X.jsx(Joe,{ref:a,flipEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],borderStroke:"#BC13FE"})]})},nse=()=>{const{addToCanvas:t,artworkList:e,canvasList:n,frame:r,moveCanvasImage:a,removeFromCanvas:i,setFrame:o,transformCanvasImage:s}=_c(),{t:l}=ps(),u=O.useRef(null),[c,d]=O.useState(null),[h,f]=O.useState(0),[m,y]=O.useState(0),[v,b]=O.useState(1),[x,w]=O.useState(!1),[S,C]=O.useState(!1),[E,_]=O.useState(!1),N=1080,$=1080;O.useEffect(()=>{const ie=()=>{const xe=(window.innerWidth*.9||0)/N;u.current&&(u.current.width(N*xe),u.current.height($*xe),u.current.scale({x:xe,y:xe}))};return ie(),window.addEventListener("resize",ie),()=>{window.removeEventListener("resize",ie)}},[]);const P=ie=>{ie.target===ie.target.getStage()&&d(null)},D=ie=>{d(ie),f(ie.brightness),y(ie.contrast),b(ie.opacity)},j=ie=>{c&&a(c.id,ie)},B=(ie,xe)=>{if(!c)return;const q={...c,[xe]:ie};switch(s(q),xe){case"brightness":f(ie);break;case"contrast":y(ie);break;case"opacity":b(ie);break}},K=()=>{c&&(i(c.id),d(null))},Y=async()=>{if(navigator.share)try{const ie=u.current;if(!ie){console.error("Canvas element not found");return}const xe=await fetch(ie.toDataURL()).then(q=>q.blob());if(!xe){console.error("Failed to create blob from canvas");return}await navigator.share({files:[new File([xe],"canvas.png",{type:"image/png"})],title:"GLAMorous Europe",text:"Check out my GLAMorous Europe artwork!"}),console.log("Share successful")}catch(ie){console.error("Error sharing:",ie)}else console.log("Web Share API not supported")},Z=()=>{var ie;const xe=(ie=u.current)==null?void 0:ie.toDataURL();xe&&Jte.saveAs(xe,"GLAMorousEurope.png")},H=()=>{w(!x),_(!1),C(!1)},F=()=>{C(!S),_(!1),w(!1)},Q=()=>{_(!E),C(!1),w(!1)},[{canDrop:J,isOver:re},se]=rq(()=>({accept:"artwork",drop:(ie,xe)=>{const q=xe.getClientOffset();if(ie&&q){const oe=e.find(pe=>pe.id===ie.id);if(oe){const pe=u.current;if(pe){const Ee=q.x-pe.container().getBoundingClientRect().left,Ie=q.y-pe.container().getBoundingClientRect().top;t(oe.image,Ee,Ie)}}}},collect:ie=>({isOver:ie.isOver(),canDrop:ie.canDrop()})})),he=J&&re;let de="transparent";return he&&(de="#ebb2ff"),X.jsxs(X.Fragment,{children:[X.jsxs(da,{margin:"my-0",className:"flex flex-wrap gap-1 container justify-center content-center text-center mx-auto",children:[X.jsx(vr,{rounded:!0,inline:!0,onClick:Y,children:X.jsx($a,{material:X.jsx(Ate,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{rounded:!0,inline:!0,onClick:Z,children:X.jsx($a,{material:X.jsx(nte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{rounded:!0,inline:!0,onClick:()=>o(Math.max(1,r.id-1)),children:X.jsx($a,{material:X.jsx(fte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{rounded:!0,inline:!0,onClick:()=>o(Math.min(5,r.id+1)),children:X.jsx($a,{material:X.jsx(yte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),c&&X.jsxs(X.Fragment,{children:[X.jsx(vr,{rounded:!0,inline:!0,onClick:()=>j(!0),children:X.jsx($a,{material:X.jsx(lte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{rounded:!0,inline:!0,onClick:()=>j(!1),children:X.jsx($a,{material:X.jsx(ite,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{rounded:!0,inline:!0,onClick:K,children:X.jsx($a,{material:X.jsx(Wte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{style:{backgroundColor:E&&"#BC13FE"},rounded:!0,inline:!0,onClick:Q,children:X.jsx($a,{material:X.jsx(Xte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{style:{backgroundColor:x&&"#BC13FE"},rounded:!0,inline:!0,onClick:H,children:X.jsx($a,{material:X.jsx(jte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(vr,{style:{backgroundColor:S&&"#BC13FE"},rounded:!0,inline:!0,onClick:F,children:X.jsx($a,{material:X.jsx(Qte,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),E&&X.jsx(Ch,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:X.jsx(Eh,{innerClassName:"flex space-x-4 w-6",innerChildren:X.jsxs(X.Fragment,{children:[X.jsx("p",{children:l("artworkCanvasOpacity")}),X.jsx(lb,{value:v,min:0,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"opacity")})]})})}),x&&X.jsx(Ch,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:X.jsx(Eh,{innerClassName:"flex space-x-4 w-6",innerChildren:X.jsxs(X.Fragment,{children:[X.jsx("p",{children:l("artworkCanvasBrightness")}),X.jsx(lb,{value:h,min:-1,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"brightness")})]})})}),S&&X.jsx(Ch,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:X.jsx(Eh,{innerClassName:"flex space-x-4 w-6",innerChildren:X.jsxs(X.Fragment,{children:[X.jsx("p",{children:l("artworkCanvasContrast")}),X.jsx(lb,{value:m,min:-100,max:100,step:1,onChange:ie=>B(parseFloat(ie.target.value),"contrast")})]})})})]})]}),X.jsx("div",{className:"mx-auto flex items-center",ref:se,children:X.jsxs(Zoe,{style:{border:"4px solid",borderColor:de},pixelRatio:1,width:N,height:$,ref:u,onMouseDown:P,onTouchStart:P,children:[X.jsx(J3,{listening:!1,children:X.jsx(Z8,{front:!1})}),X.jsx(J3,{children:n.map(ie=>X.jsx(tse,{canvasImage:ie,isSelected:c?.id===ie.id,onSelect:()=>D(ie)},ie.id))}),X.jsx(J3,{listening:!1,children:X.jsx(Z8,{front:!0})})]})})]})};function rse({id:t,image:e}){const[{opacity:n},r]=KH(()=>({type:"artwork",item:{id:t,image:e},collect:i=>({opacity:i.isDragging()?.4:1})})),a=({item:i,style:o})=>X.jsx("img",{src:i.image,alt:i.id,style:{...o,cursor:"move",maxHeight:"100px",width:"auto",zIndex:99}});return X.jsxs(X.Fragment,{children:[X.jsx(Y6,{children:a}),X.jsx("img",{src:e,alt:t,role:"presentation",style:{cursor:"move",paddingRight:"10px",maxHeight:"100px",opacity:n,scrollSnapAlign:"start",width:"auto"},ref:r})]})}function ase(){const{t}=ps(),{artworkList:e}=_c();return X.jsxs(da,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("artworkTitle")}),X.jsx(da,{margin:"my-4",className:"flex mx-auto overflow-x-auto",style:{maxHeight:"100px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:e.map((n,r)=>X.jsx(rse,{...n},n.id+r))}),X.jsx(nse,{})]})}let ise={data:""},ose=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||ise,sse=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lse=/\/\*[^]*?\*\/|  +/g,eL=/\n+/g,wu=(t,e)=>{let n="",r="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?wu(o,i):i+"{"+wu(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=wu(o,e?e.replace(/([^,])+/g,s=>i.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,s):s?s+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=wu.p?wu.p(i,o):i+":"+o+";")}return n+(e&&a?e+"{"+a+"}":a)+r},ul={},tL=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+tL(t[n]);return e}return t},use=(t,e,n,r,a)=>{let i=tL(t),o=ul[i]||(ul[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!ul[o]){let l=i!==t?t:(u=>{let c,d,h=[{}];for(;c=sse.exec(u.replace(lse,""));)c[4]?h.shift():c[3]?(d=c[3].replace(eL," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][c[1]]=c[2].replace(eL," ").trim();return h[0]})(t);ul[o]=wu(a?{["@keyframes "+o]:l}:l,n?"":"."+o)}let s=n&&ul.g?ul.g:null;return n&&(ul.g=ul[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(ul[o],e,r,s),o},cse=(t,e,n)=>t.reduce((r,a,i)=>{let o=e[i];if(o&&o.call){let s=o(n),l=s&&s.props&&s.props.className||/^go/.test(s)&&s;o=l?"."+l:s&&typeof s=="object"?s.props?"":wu(s,""):s===!1?"":s}return r+a+(o??"")},"");function yv(t){let e=this||{},n=t.call?t(e.p):t;return use(n.unshift?n.raw?cse(n,[].slice.call(arguments,1),e.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(e.p):a),{}):n,ose(e.target),e.g,e.o,e.k)}let nL,Z3,eT;yv.bind({g:1});let cl=yv.bind({k:1});function dse(t,e,n,r){wu.p=e,nL=t,Z3=n,eT=r}function ku(t,e){let n=this||{};return function(){let r=arguments;function a(i,o){let s=Object.assign({},i),l=s.className||a.className;n.p=Object.assign({theme:Z3&&Z3()},s),n.o=/ *go\d+/.test(l),s.className=yv.apply(n,r)+(l?" "+l:""),e&&(s.ref=o);let u=t;return t[0]&&(u=s.as||t,delete s.as),eT&&u[0]&&eT(s),nL(u,s)}return e?e(a):a}}var hse=t=>typeof t=="function",bv=(t,e)=>hse(t)?t(e):t,pse=(()=>{let t=0;return()=>(++t).toString()})(),rL=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),fse=20,vv=new Map,gse=1e3,aL=t=>{if(vv.has(t))return;let e=setTimeout(()=>{vv.delete(t),Uc({type:4,toastId:t})},gse);vv.set(t,e)},mse=t=>{let e=vv.get(t);e&&clearTimeout(e)},tT=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,fse)};case 1:return e.toast.id&&mse(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return t.toasts.find(i=>i.id===n.id)?tT(t,{type:1,toast:n}):tT(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?aL(r):t.toasts.forEach(i=>{aL(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},xv=[],wv={toasts:[],pausedAt:void 0},Uc=t=>{wv=tT(wv,t),xv.forEach(e=>{e(wv)})},yse={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bse=(t={})=>{let[e,n]=O.useState(wv);O.useEffect(()=>(xv.push(n),()=>{let a=xv.indexOf(n);a>-1&&xv.splice(a,1)}),[e]);let r=e.toasts.map(a=>{var i,o;return{...t,...t[a.type],...a,duration:a.duration||((i=t[a.type])==null?void 0:i.duration)||t?.duration||yse[a.type],style:{...t.style,...(o=t[a.type])==null?void 0:o.style,...a.style}}});return{...e,toasts:r}},vse=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||pse()}),wg=t=>(e,n)=>{let r=vse(e,t,n);return Uc({type:2,toast:r}),r.id},Li=(t,e)=>wg("blank")(t,e);Li.error=wg("error"),Li.success=wg("success"),Li.loading=wg("loading"),Li.custom=wg("custom"),Li.dismiss=t=>{Uc({type:3,toastId:t})},Li.remove=t=>Uc({type:4,toastId:t}),Li.promise=(t,e,n)=>{let r=Li.loading(e.loading,{...n,...n?.loading});return t.then(a=>(Li.success(bv(e.success,a),{id:r,...n,...n?.success}),a)).catch(a=>{Li.error(bv(e.error,a),{id:r,...n,...n?.error})}),t};var xse=(t,e)=>{Uc({type:1,toast:{id:t,height:e}})},wse=()=>{Uc({type:5,time:Date.now()})},kse=t=>{let{toasts:e,pausedAt:n}=bse(t);O.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(s=>{if(s.duration===1/0)return;let l=(s.duration||0)+s.pauseDuration-(i-s.createdAt);if(l<0){s.visible&&Li.dismiss(s.id);return}return setTimeout(()=>Li.dismiss(s.id),l)});return()=>{o.forEach(s=>s&&clearTimeout(s))}},[e,n]);let r=O.useCallback(()=>{n&&Uc({type:6,time:Date.now()})},[n]),a=O.useCallback((i,o)=>{let{reverseOrder:s=!1,gutter:l=8,defaultPosition:u}=o||{},c=e.filter(f=>(f.position||u)===(i.position||u)&&f.height),d=c.findIndex(f=>f.id===i.id),h=c.filter((f,m)=>m<d&&f.visible).length;return c.filter(f=>f.visible).slice(...s?[h+1]:[0,h]).reduce((f,m)=>f+(m.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:xse,startPause:wse,endPause:r,calculateOffset:a}}},Sse=cl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Cse=cl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ese=cl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ise=ku("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sse} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Cse} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ese} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Tse=cl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Nse=ku("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Tse} 1s linear infinite;
`,_se=cl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ose=cl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Rse=ku("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_se} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ose} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$se=ku("div")`
  position: absolute;
`,Mse=ku("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Pse=cl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ase=ku("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Pse} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lse=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?O.createElement(Ase,null,e):e:n==="blank"?null:O.createElement(Mse,null,O.createElement(Nse,{...r}),n!=="loading"&&O.createElement($se,null,n==="error"?O.createElement(Ise,{...r}):O.createElement(Rse,{...r})))},Dse=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Fse=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Bse="0%{opacity:0;} 100%{opacity:1;}",zse="0%{opacity:1;} 100%{opacity:0;}",jse=ku("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Vse=ku("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Use=(t,e)=>{let n=t.includes("top")?1:-1,[r,a]=rL()?[Bse,zse]:[Dse(n),Fse(n)];return{animation:e?`${cl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${cl(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Wse=O.memo(({toast:t,position:e,style:n,children:r})=>{let a=t.height?Use(t.position||e||"top-center",t.visible):{opacity:0},i=O.createElement(Lse,{toast:t}),o=O.createElement(Vse,{...t.ariaProps},bv(t.message,t));return O.createElement(jse,{className:t.className,style:{...a,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):O.createElement(O.Fragment,null,i,o))});dse(O.createElement);var Gse=({id:t,className:e,style:n,onHeightUpdate:r,children:a})=>{let i=O.useCallback(o=>{if(o){let s=()=>{let l=o.getBoundingClientRect().height;r(t,l)};s(),new MutationObserver(s).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return O.createElement("div",{ref:i,className:e,style:n},a)},Hse=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rL()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...a}},qse=yv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,kv=16,Kse=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:s,handlers:l}=kse(n);return O.createElement("div",{style:{position:"fixed",zIndex:9999,top:kv,left:kv,right:kv,bottom:kv,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},s.map(u=>{let c=u.position||e,d=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),h=Hse(c,d);return O.createElement(Gse,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?qse:"",style:h},u.type==="custom"?bv(u.message,u):a?a(u):O.createElement(Wse,{toast:u,position:c}))}))},Xse=Li,iL={exports:{}},Yse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qse=Yse,Jse=Qse;function oL(){}function sL(){}sL.resetWarningCache=oL;var Zse=function(){function t(r,a,i,o,s,l){if(l!==Jse){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sL,resetWarningCache:oL};return n.PropTypes=n,n};iL.exports=Zse();var ele=iL.exports;const ha=Ii(ele);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nT=function(t,e){return nT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},nT(t,e)};function lL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Uo=function(){return Uo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Uo.apply(this,arguments)};function uL(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Wc(t,e){for(var n=0,r=e.length,a=t.length;n<r;n++,a++)t[a]=e[n];return t}var tle=function(t){return Object.keys(t).filter(function(e){return t[e]}).join(" ")},Sv=function(t,e){return t.x===e.x&&t.y===e.y},Cv=function(t,e){return!t&&e||t&&!e||t.length!==e.length?!1:t.every(function(n,r){return Sv(n,e[r])})},Gc=function(t,e){var n=t.x,r=t.y;return e===void 0&&(e=1),{x:Math.round((n+Number.EPSILON)*e)/e,y:Math.round((r+Number.EPSILON)*e)/e}},nle=function(t,e,n){n===void 0&&(n=0);var r=t.findIndex(function(a){return Math.max(Math.abs(a.x-e.x),Math.abs(a.y-e.y))<=n});return{point:Uo({},t[r]||{x:NaN,y:NaN}),index:r}},cL=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},dL=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},rle=function(t,e,n){var r=cL(t,e),a=dL(t,e),i=Math.round(a/n)*n;return{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i)}},ale=function(t,e,n){var r=cL(t,e),a=dL(t,e),i=n.reduce(function(o,s){return Math.abs(s-a)<Math.abs(o-a)?s:o},1/0);return i!==1/0&&(e.x=t.x+r*Math.cos(i),e.y=t.y+r*Math.sin(i)),e},ile=function(t){for(var e=[],n=1;n<t.length;n++){var r=Math.atan2(t[n].y-t[n-1].y,t[n].x-t[n-1].x),a=r+Math.PI;e.push(r,a>Math.PI?a-2*Math.PI:a)}return e.filter(function(i,o,s){return s.indexOf(i)===o})};function ole(t,e,n,r){r===void 0&&(r=!0);var a=new Image;a.crossOrigin="Anonymous";var i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return n(new Error("CTX is null"),i);a.onerror=function(){n(new Error("Failed to load image"),i)},a.onload=function(){try{if(i.width=a.naturalWidth+2,i.height=a.naturalHeight+2,o.drawImage(a,0,0),e.length<3){n(null,i);return}if(o.beginPath(),o.moveTo(0,0),o.lineTo(i.width,0),o.lineTo(i.width,i.height),o.lineTo(0,i.height),o.lineTo(0,0),o.lineTo(e[0].x+1,e[0].y+1),e.slice(1).forEach(function(w){var S=w.x,C=w.y;return o.lineTo(S+1,C+1)}),o.lineTo(e[0].x+1,e[0].y+1),o.lineTo(0,0),o.closePath(),o.clip("evenodd"),o.globalCompositeOperation="destination-out",o.fill(),r){var s=e.map(function(w){var S=w.x;return S+1}),l=e.map(function(w){var S=w.y;return S+1}),u=[Math.min.apply(null,s),Math.min.apply(null,l)],c=u[0],d=u[1],h=[Math.max.apply(null,s),Math.max.apply(null,l)],f=h[0],m=h[1],y=[f-c,m-d],v=y[0],b=y[1],x=o.getImageData(c,d,v,b);i.width=v,i.height=b,o.putImageData(x,0,0)}n(null,i)}catch(w){n(w instanceof Error?w:new Error(String(w)),i)}},a.src=t}var hL=function(){function t(e){this.getSvgElement=e}return t.prototype.getSvg=function(){var e=this.getSvgElement();if(!e)throw new Error("SVG is null");return e},t.prototype.getCTM=function(){var e=this.getSvg(),n=e.getCTM();if(n===null){var r=e.querySelector('rect[visibility="hidden"]');n=r.getCTM()}if(!n)throw new Error("CTM is null");return n},t.prototype.getViewboxSize=function(){return this.getSvg().viewBox.baseVal},t.prototype.getRealSize=function(){var e=this.getSvg();return{width:e.clientWidth,height:e.clientHeight}},t.prototype.getViewboxOffset=function(){var e=this.getSvg(),n=this.getRealSize(),r=n.width,a=n.height,i=this.getViewboxSize(),o=i.width,s=i.height,l=Object.assign(e.createSVGPoint(),{x:r,y:a}),u=this.getCTM(),c=l.matrixTransform(u.inverse()),d=c.x,h=c.y;return{x:d-o,y:h-s}},t.prototype.convertViewboxPointsToReal=function(e){var n=this.getSvg(),r=this.getCTM();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Gc(s)})},t.prototype.convertRealPointsToViewbox=function(e){var n=this.getSvg(),r=this.getCTM().inverse();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Gc(s,1e3)})},t.prototype.getBorderPoints=function(e){e===void 0&&(e=!0);var n=this.getViewboxSize(),r=n.width,a=n.height,i=this.getViewboxOffset(),o=i.x,s=i.y,l=[{x:-o,y:-s},{x:r+o,y:-s},{x:r+o,y:a+s},{x:-o,y:a+s}];return e&&l.push({x:-o,y:-s}),l},t.prototype.isAboveTheBorder=function(e){var n=e.x,r=e.y,a=this.getViewboxSize(),i=a.width,o=a.height,s=this.getViewboxOffset(),l=s.x,u=s.y;return n<-l||n>i+l||r<-u||r>o+u},t.prototype.getMouseCoordinates=function(e){var n=e,r=n.changedTouches&&n.touches?n.changedTouches[0]||n.touches[0]:n,a=r.clientX,i=r.clientY,o=this.getSvg(),s=o.getScreenCTM();if(!s)throw new Error("ScreenCTM is null");var l=o.createSVGPoint();l.x=a,l.y=i;var u=l.matrixTransform(s.inverse()),c=u.x,d=u.y;return{x:c,y:d}},t}(),pL=function(t){return function(e){lL(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.ref=G.createRef(),r.svg=new hL(function(){var a,i;return(i=(a=r.ref)===null||a===void 0?void 0:a.current)===null||i===void 0?void 0:i.ownerSVGElement}),r.dragLastPosition=null,r.wasMoved=!1,r.onMouseTouchDown=function(a){if(a.target===r.ref.current&&r.props.draggable){a.stopImmediatePropagation(),a.preventDefault();var i=a.target;r.dragLastPosition=r.getMousePosition(a),i.ownerSVGElement&&i.ownerSVGElement.focus({preventScroll:!0})}},r.onMouseTouchMove=function(a){if(r.dragLastPosition){a.stopImmediatePropagation(),a.preventDefault();var i=r.getMousePosition(a),o=i.x,s=i.y,l=o-r.dragLastPosition.x,u=s-r.dragLastPosition.y;!r.wasMoved&&r.props.onDragStart&&r.props.onDragStart({x:r.dragLastPosition.x,y:r.dragLastPosition.y,dx:l,dy:u}),r.props.onDrag&&r.props.onDrag({dx:l,dy:u}),r.dragLastPosition={x:o,y:s},r.wasMoved=!0}},r.onMouseTouchUp=function(a){r.dragLastPosition&&r.wasMoved&&(a.stopImmediatePropagation(),a.preventDefault(),(a instanceof MouseEvent||!a.touches)&&window.addEventListener("click",function(i){return i.stopPropagation()},{capture:!0,once:!0}),r.props.onDragEnd&&r.props.onDragEnd({x:r.dragLastPosition.x,y:r.dragLastPosition.y})),r.dragLastPosition=null,r.wasMoved=!1},r}return n.prototype.render=function(){var r=this.props,a=r.draggable;r.onDrag,r.onDragStart,r.onDragEnd;var i=uL(r,["draggable","onDrag","onDragStart","onDragEnd"]);return G.createElement(t,Uo({ref:this.ref},i,{draggable:a}))},n.prototype.componentDidUpdate=function(r){r.draggable&&!this.props.draggable&&this.dragLastPosition&&this.wasMoved&&(this.props.onDragEnd&&this.props.onDragEnd({x:this.dragLastPosition.x,y:this.dragLastPosition.y}),this.dragLastPosition=null,this.wasMoved=!1)},n.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onMouseTouchDown,!0),window.addEventListener("mousemove",this.onMouseTouchMove,!0),window.addEventListener("mouseup",this.onMouseTouchUp,!0),window.addEventListener("touchstart",this.onMouseTouchDown,!0),window.addEventListener("touchmove",this.onMouseTouchMove,!0),window.addEventListener("touchend",this.onMouseTouchUp,!0)},n.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onMouseTouchDown),window.removeEventListener("mousemove",this.onMouseTouchMove),window.removeEventListener("mouseup",this.onMouseTouchUp),window.removeEventListener("touchstart",this.onMouseTouchDown),window.removeEventListener("touchmove",this.onMouseTouchMove),window.removeEventListener("touchend",this.onMouseTouchUp)},n.prototype.getMousePosition=function(r){var a=r;return this.svg.getMouseCoordinates(a)},n}(G.Component)},sle=pL(G.forwardRef(function(t,e){var n=t.path,r=t.animate,a=t.draggable;return G.createElement("polyline",{ref:e,style:{cursor:a?"move":""},points:n.map(function(i){var o=i.x,s=i.y;return o+","+s}).join(" "),fill:"rgba(0,0,0,0)",stroke:"white",strokeWidth:"1.5",shapeRendering:"geometricPrecision",strokeDasharray:"3",strokeDashoffset:"0",vectorEffect:"non-scaling-stroke"},r&&G.createElement("animate",{attributeName:"stroke-dashoffset",values:"0;1000;0",dur:"100s",repeatCount:"indefinite"}))}));function lle(t){var e=t.path;return G.createElement("polygon",{style:{pointerEvents:"none",transform:"translate(-1px, -1px)"},points:e.map(function(n){var r=n.x,a=n.y;return r+","+a}).join(" "),fill:"rgba(0, 0, 0, 0.5)",fillRule:"evenodd",stroke:"null",shapeRendering:"geometricPrecision"})}var ule=pL(G.forwardRef(function(t,e){var n=t.x,r=t.y,a=t.onClickTouchEvent,i=t.draggable,o=t.style,s=o.cursor,l=s===void 0?i?"move":"default":s,u=uL(o,["cursor"]);return G.createElement("rect",{style:Uo({cursor:l},u),ref:e,x:n-10,y:r-10,onClick:function(c){c.stopPropagation(),c.preventDefault(),a(c)},onTouchEnd:function(c){c.stopPropagation(),c.preventDefault(),a(c)},width:"20px",height:"20",fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:"1.25",vectorEffect:"non-scaling-stroke"})})),Br;(function(t){t.ADD="ADD",t.DELETE="DELETE",t.MODIFY="MODIFY",t.MOVE="MOVE",t.RESET="RESET",t.CHANGE="CHANGE"})(Br||(Br={}));function cle(t,e){var n=t.points.length;switch(e.type){case Br.ADD:{if(t.closed)return[t,!1];if(n>0&&Sv(t.points[n-1],e.payload)||n>1&&Sv(t.points[n-2],e.payload))return[t,!1];var r=n>2&&Sv(t.points[0],e.payload);return r?[{points:Wc([],t.points),closed:!0},!0]:[{points:Wc(Wc([],t.points,!0),[e.payload]),closed:!1},!0]}case Br.DELETE:return[{points:Wc([],t.points.filter(function(u,c){return e.payload!==c})),closed:n>4&&t.closed},!0];case Br.MODIFY:{var a=t.points[e.payload.index],i=a.x,o=a.y,s=t.points.map(function(u){var c=u.x,d=u.y;return c===i&&d===o?{x:e.payload.x,y:e.payload.y}:{x:c,y:d}});return[{points:s,closed:t.closed},!!(e.payload.x||e.payload.y)]}case Br.MOVE:return[{points:t.points.map(function(u){var c=u.x,d=u.y;return{x:c+e.payload.x,y:d+e.payload.y}}),closed:t.closed},!!(e.payload.x||e.payload.y)];case Br.CHANGE:{var l=!Cv(e.payload,t.points);return[{points:e.payload,closed:l?e.payload.length>2:t.closed},l]}case Br.RESET:return[{points:[],closed:!1},!!t.points.length];default:return[t,!1]}}var dle=function(t){lL(e,t);function e(n){var r=t.call(this,n)||this;return r.imageRef=G.createRef(),r.svgRef=G.createRef(),r.svg=new hL(function(){var a;return(a=r.svgRef)===null||a===void 0?void 0:a.current}),r.angles=[],r.path={points:[],closed:!1},r.lastEmittedPoints=[],r.lastUpdatedPoints=[],r.imgError=!1,r.setPathFromPropsOnMediaLoad=!0,r.hidePointer=function(){var a=r.path.points[r.path.points.length-1]||{x:0,y:0};r.setPointer(Uo({},a),!0)},r.onShapeDrag=function(a){var i=a.dx,o=a.dy,s=r.path.points.map(function(l){var u=l.x,c=l.y;return{x:u+i,y:c+o}});s.some(function(l){return r.svg.isAboveTheBorder(l)})||r.dispatchPathAction({type:Br.MOVE,payload:{x:i,y:o}})},r.onPointDrag=function(a,i){var o=i.dx,s=i.dy,l=Uo({},r.path.points[a]);l.x+=o,l.y+=s,r.svg.isAboveTheBorder(l)||r.dispatchPathAction({type:Br.MODIFY,payload:Uo(Uo({},l),{index:a})})},r.onPointClick=function(a){r.isLoaded()&&!r.props.disabled&&!r.path.closed&&r.dispatchPathAction({type:Br.ADD,payload:r.path.points[a]})},r.onDragEnd=function(){r.checkIfPathUpdated(!1)},r.onMediaLoaded=function(a){r.setPathFromPropsOnMediaLoad&&(r.setPathStateFromProps(),r.setPathFromPropsOnMediaLoad=!1),r.imgError=!1,r.props.onImageLoad(a)},r.onMediaError=function(a){r.dispatchPathAction({type:Br.RESET}),r.imgError=!0,r.props.onImageError(a)},r.onClickTouchEvent=function(a){if(r.isLoaded()&&!r.props.disabled){if(r.path.closed){a.target===r.svgRef.current&&r.dispatchPathAction({type:Br.RESET});return}var i=r.getMousePosition(a)[0];r.svg.isAboveTheBorder(i)?r.hidePointer():r.dispatchPathAction({type:Br.ADD,payload:Gc(i,1e3),pointer:i})}},r.onClick=function(a){r.onClickTouchEvent(a)},r.onTouchEnd=function(a){a.cancelable&&(a.preventDefault(),r.onClickTouchEvent(a)),r.hidePointer()},r.onMouseTouchMove=function(a){if(r.isLoaded()){var i=r.getMousePosition(a)[0];r.setPointer(i)}},r.onContextMenu=function(a){if(r.isLoaded()&&(a.preventDefault(),!r.props.disabled&&!r.path.closed)){var i=r.getMousePosition(a),o=i[0],s=i[1].index;s>-1?r.dispatchPathAction({type:Br.DELETE,payload:s,pointer:o}):r.setPointer(o)}},r.state={path:{points:[],closed:!1},pointer:{x:n.viewBox.width/2,y:n.viewBox.width/2}},r}return e.prototype.render=function(){var n=this;return G.createElement("div",{className:tle({ReactFreeSelect__Component:!0,ReactFreeSelect__Closed:this.state.path.closed,ReactFreeSelect__Disabled:this.props.disabled}),style:Uo({display:"inline-block",position:"relative",margin:"0",padding:"0",fontSize:"0",cursor:this.props.disabled?"not-allowed":"default"},this.props.style)},G.createElement("img",{ref:this.imageRef,src:this.props.src,alt:this.props.imageAlt,crossOrigin:this.props.crossOrigin,style:this.props.imageStyle,onLoad:this.onMediaLoaded,onError:this.onMediaError}),G.createElement("svg",{ref:this.svgRef,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",userSelect:"none",touchAction:"none"},viewBox:"0 0 "+this.props.viewBox.width+" "+this.props.viewBox.height,onMouseMove:this.onMouseTouchMove,onTouchMove:this.onMouseTouchMove,onClick:this.onClick,onTouchEnd:this.onTouchEnd,onContextMenu:this.onContextMenu,onMouseLeave:this.hidePointer},G.createElement("rect",{visibility:"hidden"}),!!this.state.path.points.length&&G.createElement(lle,{path:this.getPolygonPoints()}),G.createElement(sle,{draggable:this.state.path.closed&&!this.props.disabled,onDrag:this.onShapeDrag,onDragEnd:this.onDragEnd,animate:!this.props.disabled,path:this.getPolylinePoints()}),this.getRoundedPoints().map(function(r,a){var i=r.x,o=r.y;return G.createElement(ule,{key:a,x:i,y:o,draggable:!n.props.disabled,style:{cursor:!a&&n.state.path.points.length>2&&!n.state.path.closed?"pointer":void 0},onDrag:function(s){var l=s.dx,u=s.dy;return n.onPointDrag(a,{dx:l,dy:u})},onDragEnd:n.onDragEnd,onClickTouchEvent:function(){return n.onPointClick(a)}})})))},e.prototype.componentDidUpdate=function(n){!n.disabled&&this.props.disabled&&!this.path.closed&&this.hidePointer(),n.src&&n.src!==this.props.src?this.dispatchPathAction({type:Br.RESET}):Cv(n.value,this.props.value)||(this.isLoaded()?this.setPathStateFromProps():this.setPathFromPropsOnMediaLoad=!0)},e.prototype.convertPoints=function(n){var r=this.getAspectRatio();return this.svg.convertViewboxPointsToReal(n).map(function(a){var i=a.x,o=a.y;return{x:Math.round(i/r.x),y:Math.round(o/r.y)}})},e.prototype.checkIfPathUpdated=function(n){if(this.path.closed||n){var r=this.convertPoints(this.path.points);Cv(r,this.lastUpdatedPoints)||(this.emitOnComplete(r),this.lastUpdatedPoints=r.map(function(a){var i=a.x,o=a.y;return{x:i,y:o}}))}},e.prototype.emitOnChange=function(n){var r=n.points;if(this.props.onChange){var a=this.convertPoints(r);this.lastEmittedPoints=a,this.props.onChange(a)}},e.prototype.emitOnComplete=function(n){this.props.onComplete&&this.props.onComplete(n)},e.prototype.setPointer=function(n,r){var a=n.x,i=n.y;r===void 0&&(r=!1),(r||!this.props.disabled)&&this.setState({path:this.path,pointer:{x:a,y:i}})},e.prototype.dispatchPathAction=function(n){var r=this.path.closed,a=cle(this.path,n),i=a[0],o=a[1];i.points=i.points.map(function(s){return Gc(s,1e3)}),o&&(this.path=i,this.setState({pointer:n.pointer||this.path.points[this.path.points.length-1]||{x:0,y:0},path:i}),this.angles=ile(i.points),this.emitOnChange(i),[Br.MODIFY,Br.MOVE].includes(n.type)||this.checkIfPathUpdated(r))},e.prototype.isLoaded=function(){if(this.imgError||!this.svgRef.current)return!1;var n=this.svgRef.current;return!!(n.width.baseVal.value&&n.height.baseVal.value)},e.prototype.getAspectRatio=function(){return this.imageRef.current?{x:this.imageRef.current.clientWidth/this.imageRef.current.naturalWidth,y:this.imageRef.current.clientHeight/this.imageRef.current.naturalHeight}:{x:NaN,y:NaN}},e.prototype.setPathStateFromProps=function(){if(!Cv(this.lastEmittedPoints,this.props.value)){var n=this.getAspectRatio(),r=this.svg.convertRealPointsToViewbox(this.props.value.map(function(a){var i=a.x,o=a.y;return{x:i*n.x,y:o*n.y}}));this.dispatchPathAction({type:Br.CHANGE,payload:r})}},e.prototype.getRoundedPoints=function(){return this.state.path.points.map(function(n){return Gc(n)})},e.prototype.getBorder=function(){return this.svg.getBorderPoints().map(function(n){return Gc(n)}).map(function(n){var r=n.x,a=n.y;return{x:r-1,y:a+1}})},e.prototype.getPolygonPoints=function(){var n=this.getRoundedPoints(),r=this.getBorder();return this.state.path.closed?Wc(Wc(Wc([],r,!0),n,!0),[n[0],r[0]]):r},e.prototype.getPolylinePoints=function(){var n=this.getRoundedPoints();return n.concat(this.state.path.closed?n[0]:Gc(this.state.pointer))},e.prototype.getMousePosition=function(n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!0);var i=this.svg.getMouseCoordinates(n);if(a){var o=navigator.platform.includes("Mac")?n.metaKey:n.ctrlKey,s=this.path.points[this.path.points.length-1];o&&s&&(n.shiftKey?i=ale(s,i,this.angles):i=rle(s,i,Math.PI/12))}var l=nle(this.path.points,i,10),u=l.point,c=l.index;return r&&c>-1&&(i=Uo({},u)),[i,{point:u,index:c}]},e.propTypes={value:ha.arrayOf(ha.exact({x:ha.number.isRequired,y:ha.number.isRequired})),style:ha.shape({}),viewBox:ha.exact({width:ha.number.isRequired,height:ha.number.isRequired}),disabled:ha.bool,onChange:ha.func,onComplete:ha.func,src:ha.string.isRequired,imageAlt:ha.string,crossOrigin:ha.string,imageStyle:ha.shape({}),onImageLoad:ha.func,onImageError:ha.func},e.defaultProps={value:[],style:{},imageStyle:{},viewBox:{width:1e3,height:1e3},disabled:!1,onImageError:Function.prototype,onImageLoad:Function.prototype},e}(G.Component);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hle=1e-7,ple=1e-4;class rT{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Ev{refCount(e){return Di("refCount")}incRef(e){return Di("incRef")}timerAvailable(){return!0}time(e){return Di("time")}read(e){return Di("read")}readSync(e){return Di("readSync")}readToGPU(e,n){return Di("readToGPU")}numDataIds(){return Di("numDataIds")}disposeData(e,n){return Di("disposeData")}write(e,n,r){return Di("write")}move(e,n,r,a,i){return Di("move")}memory(){return Di("memory")}floatPrecision(){return Di("floatPrecision")}epsilon(){return this.floatPrecision()===32?hle:ple}dispose(){return Di("dispose")}}function Di(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fL(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,dl(t,e,n)}function fle(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,dl(t,n,r),dl(e,n,r)}function Su(t,e,n){return Math.max(t,Math.min(e,n))}function Iv(t){return t%2===0?t:t+1}function dl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function gL(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function gle(t,e){const n=Math.random();return e*n+(1-n)*t}function mle(t,e){let n=0;for(let r=0;r<t.length;r++){const a=Number(t[r])-Number(e[r]);n+=a*a}return n}function V(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Yr(t,e,n=""){V(wn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Hc(t){V(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function hl(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||pa(t)&&!n)for(let r=0;r<t.length;++r)hl(t[r],e,n);else e.push(t);return e}function be(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function yle(t){return t.length===0}function wn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function qc(t){return t%1===0}function ble(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function Tv(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function vle(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return fL(e),e}function Kc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function aT(t,e=a=>0,n,r=setTimeout){return new Promise((a,i)=>{let o=0;const s=()=>{if(t()){a();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r(s,l)};s()})}function iT(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function Qt(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),V(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),V(t.every(r=>qc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function pl(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:Qt(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(i!=null){if(i[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(i[o]==null||i[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Nr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function _r(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function mL(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function yL(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function oT(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function pa(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function Nv(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function bL(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ys(t){return typeof t=="string"||t instanceof String}function vL(t){return typeof t=="boolean"}function xL(t){return typeof t=="number"}function Bh(t){return Array.isArray(t)?Bh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":xL(t)?"float32":ys(t)?"string":vL(t)?"bool":"float32"}function Cu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function _v(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Je(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function wL(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)a[o]=n[t+o]}else{const i=e[0],o=e.slice(1),s=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)a[l]=wL(t+l*s,o,n,r)}return a}function Fi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return wL(0,t,e,n)}function Ov(t,e){const n=Qr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Qr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function sT(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return Fi(t,new Float32Array(n));if(e==="int32")return Fi(t,new Int32Array(n));if(e==="bool")return Fi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function lT(t){t.forEach(e=>{V(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Wo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Xc(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Yc(t){return t&&t.then&&typeof t.then=="function"}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kL="tfjsflags";class SL{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=xle,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Yc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);kL in e&&e[kL].split(",").forEach(n=>{const[r,a]=n.split(":");this.urlFlags[r]=kle(r,a)})}}function xle(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(wle(e,r[0],r[1]),r.join("="))),e}function wle(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function kle(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function fe(){return uT}let uT=null;function Sle(t){uT=t}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let cT;function CL(){if(cT==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");cT=t}return cT}function Cle(){const t=CL();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function dT(t,e){const n=Cle();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Rv="Abs",kg="Acos",Sg="Acosh",zh="Add",$v="AddN",Mv="All",Pv="Any",Av="ArgMax",Lv="ArgMin",Cg="Asin",Eg="Asinh",Ig="Atan",Tg="Atanh",Ng="Atan2",Dv="AvgPool",hT="AvgPoolGrad",Fv="AvgPool3D",pT="AvgPool3DGrad",Bv="BatchMatMul",zv="BatchToSpaceND",jv="Bincount",Ele="BroadcastTo",Vv="BroadcastArgs",_g="Cast",Og="Ceil",Rg="ClipByValue",Uv="Complex",Wv="ComplexAbs",Gv="Concat",Hv="Conv2D",qv="Conv2DBackpropFilter",Kv="Conv2DBackpropInput",Xv="Conv3D",fT="Conv3DBackpropFilterV2",Yv="Conv3DBackpropInputV2",$g="Cos",Mg="Cosh",Qv="Cumprod",Jv="Cumsum",Zv="CropAndResize",ex="DenseBincount",tx="DepthToSpace",nx="DepthwiseConv2dNative",rx="DepthwiseConv2dNativeBackpropFilter",ax="DepthwiseConv2dNativeBackpropInput",ix="Diag",ox="Dilation2D",gT="Dilation2DBackpropInput",mT="Dilation2DBackpropFilter",Pg="RealDiv",sx="Einsum",Ag="Elu",yT="EluGrad",Lg="Erf",Dg="Equal",Fg="Exp",lx="ExpandDims",Bg="Expm1",ux="FFT",cx="Fill",dx="FlipLeftRight",zg="Floor",jg="FloorDiv",hx="FusedBatchNorm",px="GatherV2",fx="GatherNd",Vg="Greater",Ug="GreaterEqual",Wg="Identity",gx="IFFT",mx="Imag",Gg="IsFinite",Hg="IsInf",qg="IsNan",yx="LeakyRelu",Kg="Less",Xg="LessEqual",bx="LinSpace",Yg="Log",Qg="Log1p",Jg="LogicalAnd",Zg="LogicalNot",em="LogicalOr",Ile="LogicalXor",Tle="LogSoftmax",Nle="LowerBound",vx="LRN",bT="LRNGrad",xx="Max",tm="Maximum",wx="MaxPool",vT="MaxPoolGrad",kx="MaxPool3D",xT="MaxPool3DGrad",Sx="MaxPoolWithArgmax",Cx="Mean",Ex="Min",nm="Minimum",Ix="MirrorPad",rm="Mod",Tx="Multinomial",am="Multiply",Nx="Neg",im="NotEqual",_x="NonMaxSuppressionV3",Ox="NonMaxSuppressionV4",Rx="NonMaxSuppressionV5",$x="OnesLike",Mx="OneHot",Px="Pack",Ax="PadV2",_le="Pool",om="Pow",Lx="Prelu",Dx="Prod",Fx="RaggedGather",Bx="RaggedTensorToTensor",zx="Range",jx="Real",sm="Reciprocal",lm="Relu",Vx="Reshape",Ux="ResizeNearestNeighbor",wT="ResizeNearestNeighborGrad",Wx="ResizeBilinear",kT="ResizeBilinearGrad",um="Relu6",Gx="Reverse",cm="Round",dm="Rsqrt",Hx="ScatterNd",qx="SearchSorted",Kx="Select",hm="Selu",Xx="Slice",pm="Sin",fm="Sinh",gm="Sign",mm="Sigmoid",ym="Softplus",bm="Sqrt",Yx="Sum",Qx="SpaceToBatchND",Jx="SplitV",Zx="Softmax",ew="SparseFillEmptyRows",tw="SparseReshape",nw="SparseSegmentMean",rw="SparseSegmentSum",aw="SparseToDense",vm="SquaredDifference",ST="Square",iw="StridedSlice",ow="StringNGrams",sw="StringSplit",lw="StringToHashBucketFast",xm="Sub",wm="Tan",km="Tanh",Sm="Tile",uw="TopK",cw="Transform",jh="Transpose",dw="Unique",hw="Unpack",pw="UnsortedSegmentSum",Ole="UpperBound",fw="ZerosLike",Cm="Step",gw="FromPixels",mw="RotateWithOffset",Em="_FusedMatMul",Im="FusedConv2D",Tm="FusedDepthwiseConv2D";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bi(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function Rle(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vh=dT("kernelRegistry",()=>new Map),Nm=dT("gradRegistry",()=>new Map);function yw(t,e){const n=ET(t,e);return Vh.get(n)}function CT(t){return Nm.get(t)}function bw(t){const e=Vh.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,o]=a,[s]=i.split("_");s===t&&n.push(o)}return n}function vw(t){const{kernelName:e,backendName:n}=t,r=ET(e,n);Vh.has(r)&&Bi(`The kernel '${e}' for backend '${n}' is already registered`),Vh.set(r,t)}function $le(t){const{kernelName:e}=t;Nm.has(e)&&fe().getBool("DEBUG")&&Bi(`Overriding the gradient for '${e}'`),Nm.set(e,t)}function Mle(t,e){const n=ET(t,e);if(!Vh.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Vh.delete(n)}function Ple(t){if(!Nm.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Nm.delete(t)}function Ale(t,e){bw(t).forEach(n=>{const r=Object.assign({},n,{backendName:e});vw(r)})}function ET(t,e){return`${e}_${t}`}var EL=Pn,lo=null;try{lo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Pn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Pn.prototype.__isLong__,Object.defineProperty(Pn.prototype,"__isLong__",{value:!0});function hi(t){return(t&&t.__isLong__)===!0}Pn.isLong=hi;var IL={},TL={};function Qc(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=TL[t],r)?r:(n=An(t,(t|0)<0?-1:0,!0),a&&(TL[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=IL[t],r)?r:(n=An(t,t<0?-1:0,!1),a&&(IL[t]=n),n))}Pn.fromInt=Qc;function uo(t,e){if(isNaN(t))return e?Jc:co;if(e){if(t<0)return Jc;if(t>=_L)return PL}else{if(t<=-OL)return pi;if(t+1>=OL)return ML}return t<0?uo(-t,e).neg():An(t%Uh|0,t/Uh|0,e)}Pn.fromNumber=uo;function An(t,e,n){return new Pn(t,e,n)}Pn.fromBits=An;var xw=Math.pow;function IT(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return co;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return IT(t.substring(1),e,n).neg();for(var a=uo(xw(n,8)),i=co,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var u=uo(xw(n,s));i=i.mul(u).add(uo(l))}else i=i.mul(a),i=i.add(uo(l))}return i.unsigned=e,i}Pn.fromString=IT;function Go(t,e){return typeof t=="number"?uo(t,e):typeof t=="string"?IT(t,e):An(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Pn.fromValue=Go;var NL=65536,Lle=1<<24,Uh=NL*NL,_L=Uh*Uh,OL=_L/2,RL=Qc(Lle),co=Qc(0);Pn.ZERO=co;var Jc=Qc(0,!0);Pn.UZERO=Jc;var Wh=Qc(1);Pn.ONE=Wh;var $L=Qc(1,!0);Pn.UONE=$L;var TT=Qc(-1);Pn.NEG_ONE=TT;var ML=An(-1,2147483647,!1);Pn.MAX_VALUE=ML;var PL=An(-1,-1,!0);Pn.MAX_UNSIGNED_VALUE=PL;var pi=An(0,-2147483648,!1);Pn.MIN_VALUE=pi;var Pe=Pn.prototype;Pe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Pe.toNumber=function(){return this.unsigned?(this.high>>>0)*Uh+(this.low>>>0):this.high*Uh+(this.low>>>0)},Pe.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(pi)){var e=uo(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=uo(xw(t,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=i.sub(s.mul(a)).toInt()>>>0,u=l.toString(t);if(i=s,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},Pe.getHighBits=function(){return this.high},Pe.getHighBitsUnsigned=function(){return this.high>>>0},Pe.getLowBits=function(){return this.low},Pe.getLowBitsUnsigned=function(){return this.low>>>0},Pe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(pi)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},Pe.isZero=function(){return this.high===0&&this.low===0},Pe.eqz=Pe.isZero,Pe.isNegative=function(){return!this.unsigned&&this.high<0},Pe.isPositive=function(){return this.unsigned||this.high>=0},Pe.isOdd=function(){return(this.low&1)===1},Pe.isEven=function(){return(this.low&1)===0},Pe.equals=function(t){return hi(t)||(t=Go(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},Pe.eq=Pe.equals,Pe.notEquals=function(t){return!this.eq(t)},Pe.neq=Pe.notEquals,Pe.ne=Pe.notEquals,Pe.lessThan=function(t){return this.comp(t)<0},Pe.lt=Pe.lessThan,Pe.lessThanOrEqual=function(t){return this.comp(t)<=0},Pe.lte=Pe.lessThanOrEqual,Pe.le=Pe.lessThanOrEqual,Pe.greaterThan=function(t){return this.comp(t)>0},Pe.gt=Pe.greaterThan,Pe.greaterThanOrEqual=function(t){return this.comp(t)>=0},Pe.gte=Pe.greaterThanOrEqual,Pe.ge=Pe.greaterThanOrEqual,Pe.compare=function(t){if(hi(t)||(t=Go(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Pe.comp=Pe.compare,Pe.negate=function(){return!this.unsigned&&this.eq(pi)?pi:this.not().add(Wh)},Pe.neg=Pe.negate,Pe.add=function(t){hi(t)||(t=Go(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,o=t.high&65535,s=t.low>>>16,l=t.low&65535,u=0,c=0,d=0,h=0;return h+=a+l,d+=h>>>16,h&=65535,d+=r+s,c+=d>>>16,d&=65535,c+=n+o,u+=c>>>16,c&=65535,u+=e+i,u&=65535,An(d<<16|h,u<<16|c,this.unsigned)},Pe.subtract=function(t){return hi(t)||(t=Go(t)),this.add(t.neg())},Pe.sub=Pe.subtract,Pe.multiply=function(t){if(this.isZero())return co;if(hi(t)||(t=Go(t)),lo){var e=lo.mul(this.low,this.high,t.low,t.high);return An(e,lo.get_high(),this.unsigned)}if(t.isZero())return co;if(this.eq(pi))return t.isOdd()?pi:co;if(t.eq(pi))return this.isOdd()?pi:co;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(RL)&&t.lt(RL))return uo(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,h=0,f=0;return f+=i*u,h+=f>>>16,f&=65535,h+=a*u,d+=h>>>16,h&=65535,h+=i*l,d+=h>>>16,h&=65535,d+=r*u,c+=d>>>16,d&=65535,d+=a*l,c+=d>>>16,d&=65535,d+=i*s,c+=d>>>16,d&=65535,c+=n*u+r*l+a*s+i*o,c&=65535,An(h<<16|f,c<<16|d,this.unsigned)},Pe.mul=Pe.multiply,Pe.divide=function(t){if(hi(t)||(t=Go(t)),t.isZero())throw Error("division by zero");if(lo){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?lo.div_u:lo.div_s)(this.low,this.high,t.low,t.high);return An(e,lo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Jc:co;var n,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Jc;if(t.gt(this.shru(1)))return $L;a=Jc}else{if(this.eq(pi)){if(t.eq(Wh)||t.eq(TT))return pi;if(t.eq(pi))return Wh;var i=this.shr(1);return n=i.div(t).shl(1),n.eq(co)?t.isNegative()?Wh:TT:(r=this.sub(t.mul(n)),a=n.add(r.div(t)),a)}else if(t.eq(pi))return this.unsigned?Jc:co;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=co}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),s=o<=48?1:xw(2,o-48),l=uo(n),u=l.mul(t);u.isNegative()||u.gt(r);)n-=s,l=uo(n,this.unsigned),u=l.mul(t);l.isZero()&&(l=Wh),a=a.add(l),r=r.sub(u)}return a},Pe.div=Pe.divide,Pe.modulo=function(t){if(hi(t)||(t=Go(t)),lo){var e=(this.unsigned?lo.rem_u:lo.rem_s)(this.low,this.high,t.low,t.high);return An(e,lo.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},Pe.mod=Pe.modulo,Pe.rem=Pe.modulo,Pe.not=function(){return An(~this.low,~this.high,this.unsigned)},Pe.and=function(t){return hi(t)||(t=Go(t)),An(this.low&t.low,this.high&t.high,this.unsigned)},Pe.or=function(t){return hi(t)||(t=Go(t)),An(this.low|t.low,this.high|t.high,this.unsigned)},Pe.xor=function(t){return hi(t)||(t=Go(t)),An(this.low^t.low,this.high^t.high,this.unsigned)},Pe.shiftLeft=function(t){return hi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?An(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):An(0,this.low<<t-32,this.unsigned)},Pe.shl=Pe.shiftLeft,Pe.shiftRight=function(t){return hi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?An(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):An(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Pe.shr=Pe.shiftRight,Pe.shiftRightUnsigned=function(t){if(hi(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var n=this.low;return An(n>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?An(e,0,this.unsigned):An(e>>>t-32,0,this.unsigned)},Pe.shru=Pe.shiftRightUnsigned,Pe.shr_u=Pe.shiftRightUnsigned,Pe.toSigned=function(){return this.unsigned?An(this.low,this.high,!1):this},Pe.toUnsigned=function(){return this.unsigned?this:An(this.low,this.high,!0)},Pe.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Pe.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},Pe.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},Pn.fromBytes=function(t,e,n){return n?Pn.fromBytesLE(t,e):Pn.fromBytesBE(t,e)},Pn.fromBytesLE=function(t,e){return new Pn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Pn.fromBytesBE=function(t,e){return new Pn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const AL=Ii(EL),Dle=eS({__proto__:null,default:AL},[EL]);/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Zc=AL||Dle;function _m(t){return Zc.fromString(t,!0,16)}const LL=_m("c3a5c85c97cb3127"),ed=_m("b492b66fbe98f273"),Pa=_m("9ae16a3b2f90404f");function NT(t){return t.xor(t.shru(47))}function DL(t,e,n){const r=t.slice(e,e+n);return Zc.fromBytes(Array.from(r),!0,!0)}function In(t,e){return DL(t,e,8)}function FL(t,e){return DL(t,e,4)}function zr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Eu(t,e,n=_m("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function Fle(t,e,n,r,a,i){a=a.add(t),i=zr(i.add(a).add(r),21);const o=a;return a=a.add(e),a=a.add(n),i=i.add(zr(a,44)),[a.add(r),i.add(o)]}function ww(t,e,n,r){return Fle(In(t,e),In(t,e+8),In(t,e+16),In(t,e+24),n,r)}function Ble(t,e=t.length){if(e>=8){const n=Pa.add(e*2),r=In(t,0).add(Pa),a=In(t,e-8),i=zr(a,37).mul(n).add(r),o=zr(r,25).add(a).mul(n);return Eu(i,o,n)}if(e>=4){const n=Pa.add(e*2),r=FL(t,0);return Eu(r.shl(3).add(e),FL(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),o=e+(a<<2);return NT(Pa.mul(i).xor(LL.mul(o))).mul(Pa)}return Pa}function zle(t,e=t.length){const n=Pa.add(e*2),r=In(t,0).mul(ed),a=In(t,8),i=In(t,e-8).mul(n),o=In(t,e-16).mul(Pa);return Eu(zr(r.add(a),43).add(zr(i,30)).add(o),r.add(zr(a.add(Pa),18)).add(i),n)}function jle(t,e=t.length){const n=Pa.add(e*2),r=In(t,0).mul(Pa),a=In(t,8),i=In(t,e-8).mul(n),o=In(t,e-16).mul(Pa),s=zr(r.add(a),43).add(zr(i,30)).add(o),l=Eu(s,r.add(zr(a.add(Pa),18)).add(i),n),u=In(t,16).mul(n),c=In(t,24),d=s.add(In(t,e-32)).mul(n),h=l.add(In(t,e-24)).mul(n);return Eu(zr(u.add(c),43).add(zr(d,30)).add(h),u.add(zr(c.add(r),18)).add(d),n)}function BL(t,e=t.length){const n=Zc.fromNumber(81,!0);if(e<=32)return e<=16?Ble(t,e):zle(t,e);if(e<=64)return jle(t,e);let r=n,a=n.mul(ed).add(113),i=NT(a.mul(Pa).add(113)).mul(Pa),o=[Zc.UZERO,Zc.UZERO],s=[Zc.UZERO,Zc.UZERO];r=r.mul(Pa).add(In(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=zr(r.add(a).add(o[0]).add(In(t,l+8)),37).mul(ed),a=zr(a.add(o[1]).add(In(t,l+48)),42).mul(ed),r=r.xor(s[1]),a=a.add(o[0]).add(In(t,l+40)),i=zr(i.add(s[0]),33).mul(ed),o=ww(t,l,o[1].mul(ed),r.add(s[0])),s=ww(t,l+32,i.add(s[1]),a.add(In(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=ed.add(i.and(255).shl(1));return l=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=zr(r.add(a).add(o[0]).add(In(t,l+8)),37).mul(d),a=zr(a.add(o[1]).add(In(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(In(t,l+40))),i=zr(i.add(s[0]),33).mul(d),o=ww(t,l,o[1].mul(d),r.add(s[0])),s=ww(t,l+32,i.add(s[1]),a.add(In(t,l+16))),[i,r]=[r,i],Eu(Eu(o[0],s[0],d).add(NT(a).mul(LL)).add(i),Eu(o[1],s[1],d).add(r),d)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fl(t,e){return e==="string"?bs(t):Iu([t],e)}function Vle(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Iu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=hl(t)),fe().getBool("DEBUG")&&mL(t,e),Vle(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function fi(){return fe().platform.now()}function Ule(t,e){return fe().platform.fetch(t,e)}function bs(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function gl(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}const Wle=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:wn,assert:V,assertNonNegativeIntegerDimensions:lT,assertNonNull:Hc,assertShapesMatch:Yr,bytesFromStringArray:bL,bytesPerElement:Nv,checkConversionForErrors:mL,clamp:Su,computeStrides:Je,createScalarValue:fl,createShuffledIndices:vle,decodeString:gl,distSquared:mle,encodeString:bs,fetch:Ule,fingerPrint64:BL,flatten:hl,getArrayFromDType:_r,getTypedArrayFromDType:Nr,hasEncodingLoss:oT,hexToLong:_m,indexToLoc:Xc,inferDtype:Bh,inferFromImplicitShape:iT,isBoolean:vL,isFunction:Cu,isInt:qc,isNumber:xL,isPromise:Yc,isScalarShape:yle,isString:ys,isTypedArray:pa,isValidDtype:yL,locToIndex:Wo,makeOnesTypedArray:Ov,makeZerosNestedTypedArray:sT,makeZerosTypedArray:Qr,nearestDivisor:_v,nearestLargerEven:Iv,now:fi,parseAxisParam:Qt,randUniform:gle,repeatedTry:aT,rightPad:Kc,shuffle:fL,shuffleCombo:fle,sizeFromShape:be,sizeToSquarishShape:Tv,squeezeShape:pl,sum:gL,swap:dl,tanh:ble,toNestedArray:Fi,toTypedArray:Iu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Gle{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new qle)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let o;const s=fi();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();o=Promise.resolve({kernelMs:fi()-s})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const u=a[l];u.data().then(c=>{Hle(c,u.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),a,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],i,l[2])})})}}function Hle(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class qle{logKernelProfile(e,n,r,a,i,o){const s=typeof a=="number"?Kc(`${a}ms`,9):a.error,l=Kc(e,25),u=n.rank,c=n.size,d=Kc(n.shape.toString(),14);let h="";for(const f in i){const m=i[f];if(m!=null){const y=m.shape||n.shape,v=y.length;h+=`${f}: ${v}D ${v>0?y:""} `}}console.log(`%c${l}	%c${s}	%c${u}D ${d}	%c${c}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kle(t,e,n){const r={},a={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const h=c[d];let f=!1;for(let m=0;m<e.length;m++)if(r[h.id]){u.outputs.forEach(y=>r[y.id]=!0),f=!0,a[u.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const h in c)i[c[h].id]=!0,o[u.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const u=t[l];if(a[u.id]&&o[u.id]){const c={};for(const h in u.inputs){const f=u.inputs[h];r[f.id]&&(c[h]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,s.push(d)}}return s}function Xle(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const s=i.gradient(o);for(const l in i.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const u=n(()=>s[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!wn(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zL=20,Om=3,_T=7;function Yle(t,e,n,r){const a=Je(e),i=Qle(t,e,n,a),o=e.length,s=kw(t,e,n,a,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(u=>"    "+u).join(`
`)),l.join(`
`)}function Qle(t,e,n,r){const a=be(e),i=r[r.length-1],o=new Array(i).fill(0),s=e.length,l=n==="complex64"?$m(t):t;if(s>1)for(let u=0;u<a/i;u++){const c=u*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],Rm(l[c+d],0,n).length)}return o}function Rm(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(_T))} + ${parseFloat(t[1].toFixed(_T))}j`:ys(t)?r=`'${t}'`:n==="bool"?r=jL(t):r=parseFloat(t.toFixed(_T)).toString(),Kc(r,e)}function jL(t){return t===0?"false":"true"}function kw(t,e,n,r,a,i=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=$m(t);return[Rm(y[0],0,n)]}return n==="bool"?[jL(t[0])]:[t[0].toString()]}if(l===1){if(s>zL){const y=Om*o;let v=Array.from(t.slice(0,y)),b=Array.from(t.slice((s-Om)*o,s*o));return n==="complex64"&&(v=$m(v),b=$m(b)),["["+v.map((x,w)=>Rm(x,a[w],n)).join(", ")+", ..., "+b.map((x,w)=>Rm(x,a[s-Om+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?$m(t):Array.from(t)).map((y,v)=>Rm(y,a[v],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*o,h=[];if(s>zL){for(let y=0;y<Om;y++){const v=y*d,b=v+d;h.push(...kw(t.slice(v,b),u,n,c,a,!1))}h.push("...");for(let y=s-Om;y<s;y++){const v=y*d,b=v+d;h.push(...kw(t.slice(v,b),u,n,c,a,y===s-1))}}else for(let y=0;y<s;y++){const v=y*d,b=v+d;h.push(...kw(t.slice(v,b),u,n,c,a,y===s-1))}const f=l===2?",":"";h[0]="["+h[0]+f;for(let y=1;y<h.length-1;y++)h[y]=" "+h[y]+f;let m=`,
`;for(let y=2;y<l;y++)m+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":m),h}function $m(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Or{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=be(e),r!=null){const a=r.length;V(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||_r(n,this.size),this.strides=Je(e)}set(e,...n){n.length===0&&(n=[0]),V(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ho().makeTensor(this.values,this.shape,this.dtype)}}let Ho=null,Gh=null;function Jle(t){Ho=t}function Zle(t){Gh=t}class Kn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=be(e),this.strides=Je(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Gh.buffer(this.shape,this.dtype,e)}bufferSync(){return Gh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Fi(this.shape,e,this.dtype==="complex64")}arraySync(){return Fi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ho().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>gl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ho().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ho().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>gl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ho().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Ho().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Gh.print(this,e)}clone(){return this.throwIfDisposed(),Gh.clone(this)}toString(e=!1){const n=this.dataSync();return Yle(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Gh.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ho().makeVariable(this,e,n,r)}}Object.defineProperty(Kn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function eue(){return dT("Tensor",()=>Kn)}eue();class Mm extends Kn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!wn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ho().disposeTensor(this),this.dataId=e.dataId,Ho().incRef(this,null)}dispose(){Ho().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Mm,Symbol.hasInstance,{value:t=>t instanceof Kn&&t.assign!=null&&t.assign instanceof Function});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var OT;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(OT||(OT={}));var RT;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(RT||(RT={}));var $T;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})($T||($T={}));var MT;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(MT||(MT={}));var PT;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(PT||(PT={}));const tue={float32:MT,int32:RT,bool:$T,complex64:PT};function Ja(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return tue[t][e]}function Sw(t){return Ja(t,"int32")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ja(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function VL(t,e){V(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function nue(t,e){return e.some(n=>n.id===t.id)}function AT(t){const e=[];return UL(t,e,new Set),e}function UL(t,e,n){if(t==null)return;if(t instanceof Kn){e.push(t);return}if(!rue(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),UL(i,e,n))}}function rue(t){return Array.isArray(t)||typeof t=="object"}const aue=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:VL,getTensorsInContainer:AT,isTensorInList:nue,makeTypesMatch:Xn},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LT(t){return t.kernelName!=null}class WL{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class $p{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new WL}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Bi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Gle(this.backendInstance),!0}setupRegisteredKernels(){bw(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){bw(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof Ev)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Bi(`Initialization of backend ${e} failed`),Bi(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Bi(`Initialization of backend ${e} failed`),Bi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return $p.nextTensorId++}nextVariableId(){return $p.nextVariableId++}clone(e){const n=ne.runKernel(Wg,{x:e}),r={x:e},a=o=>({x:()=>{const s="float32",l={x:o},u={dtype:s};return ne.runKernel(_g,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,yw(e,this.backendName)==null)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const u=LT(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(LT(e)){const{kernelName:m,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const b=yw(m,this.backendName);V(b!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),s=()=>{const x=this.backend.numDataIds();l=b.kernelFunc({inputs:y,attrs:v,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,x,w);const S=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(m,y,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:m}=e,y=v=>{a&&(r=v.map(b=>this.keep(this.clone(b))))};s=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,y));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,b),b}}const{inputs:c,attrs:d}=e,h=LT(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(f=this.profiler.profileKernel(u,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),a&&this.addTapeNode(u,c,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,n,r){const a=CT(e);if(a!=null){const i=a.inputsToSave||[],o=a.outputsToSave||[];let s;a.saveAllInputs?(V(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(u=>n[u])):s=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return s.concat(l)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&ys(e[0])&&(i=e.map(l=>bs(l)));const o=a.write(i,n,r),s=new Kn(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){const l=this.state.tensorInfo.get(o),u=bL(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,o=new Kn(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new Mm(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Nv(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Mm||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Nv(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=CT(e);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=u=>(u=u.map((c,d)=>{if(c==null){const h=r[d],f=Qr(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return c}),a(u.length>1?u:u[0],i,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=AT(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(V(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));V(i instanceof Kn,()=>"The result y returned by f() must be a tensor.");const o=Kle(this.state.activeTape,n,i);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[i.id]=r??iue(i.shape),Xle(s,o,u=>this.tidy(u),oue);const l=n.map(u=>s[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return V(Cu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{V(n.every(s=>s instanceof Kn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((s,l)=>{a[l]=s});const i=(s,l)=>(r=e(...n,l),V(r.value instanceof Kn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(Cu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];V(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(c.every(h=>h instanceof Kn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=fi(),r=await this.backend.time(e);return r.wallMs=fi()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new WL;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}$p.nextTensorId=0,$p.nextVariableId=0;function iue(t){const e=Ov(be(t),"float32");return ne.makeTensor(e,t,"float32")}function GL(){const t=CL();if(t._tfengine==null){const e=new SL(t);t._tfengine=new $p(e)}return Sle(t._tfengine.ENV),Jle(()=>t._tfengine),t._tfengine}const ne=GL();function oue(t,e){const n={a:t,b:e};return ne.runKernel(zh,n)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sue(){return typeof navigator<"u"&&navigator!=null}let DT;function lue(t){DT=t}function FT(t){if(DT!==void 0)return DT;if(t||sue()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function BT(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const uue=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:BT,isMobile:FT,mockIsMobile:lue},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gi=fe();gi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),gi.registerFlag("IS_BROWSER",()=>BT()),gi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),gi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),gi.registerFlag("PROD",()=>!1),gi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>gi.getBool("DEBUG")),gi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),gi.registerFlag("IS_TEST",()=>!1),gi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),gi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),gi.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),gi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),gi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vs(t,e){let n=t;if(pa(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||pa(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&HL(t,r,[]),r}function HL(t,e,n){if(n=n||[],!Array.isArray(t)&&!pa(t)){V(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}V(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),V(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)HL(t[a],r,n.concat(a))}function qL(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function z(t,e,n,r="numeric"){if(t instanceof Kn)return qL(r,t.dtype,e,n),t;let a=Bh(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),qL(r,a,e,n),t==null||!pa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const s=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${s}'`)}const i=vs(t,a);!pa(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?Iu(t,a):hl(t,[],!0);return ne.makeTensor(o,i,a)}function Pm(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>z(a,`${e}[${i}]`,n,r))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zT="__op";function te(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+zT;const a=(...i)=>{ne.startScope(n);try{const o=r(...i);return Yc(o)&&console.error("Cannot return a Promise inside of tidy."),ne.endScope(o),o}catch(o){throw ne.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cue(t,e){const n=z(t,"real","complex"),r=z(e,"imag","complex");Yr(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return ne.runKernel(Uv,a)}const ml=te({complex_:cue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tu(t,e,n,r){if(r==null&&(r=Bh(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!pa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){lT(e);const a=be(e),i=be(n);V(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==be(e.slice(o)):!0;V(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!pa(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Iu(t,r):hl(t,[],!0),ne.makeTensor(t,e,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qo(t,e,n){const r=vs(t,n);return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jT={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cw=4;async function due(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<a.length;++o){const s=a[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const u={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((v,b)=>v+b.length,0)+Cw*h.length,m=new Uint8Array(f);let y=0;for(let v=0;v<h.length;v++){const b=h[v],x=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(x,y),y+=Cw,m.set(b,y),y+=b.length}d(m)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:hue(i),specs:n}}function KL(t,e){const n={};let r,a=0;for(const i of e){const o=i.name,s=i.dtype,l=i.shape,u=be(l);let c;if("quantization"in i){const d=i.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${i.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${i.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const h=jT[d.dtype],f=t.slice(a,a+u*h),m=d.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(s==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){c=new Float32Array(m.length);for(let y=0;y<m.length;y++){const v=m[y];c[y]=v*d.scale+d.min}}else if(d.dtype==="float16")r===void 0&&(r=bue()),c=r(m);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(s==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);c=new Int32Array(m.length);for(let y=0;y<m.length;y++){const v=m[y];c[y]=Math.round(v*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*h}else if(s==="string"){const d=be(i.shape);c=[];for(let h=0;h<d;h++){const f=new Uint32Array(t.slice(a,a+Cw))[0];a+=Cw;const m=new Uint8Array(t.slice(a,a+f));c.push(m),a+=f}}else{const d=jT[s],h=t.slice(a,a+u*d);if(s==="float32")c=new Float32Array(h);else if(s==="int32")c=new Int32Array(h);else if(s==="bool")c=new Uint8Array(h);else if(s==="complex64"){c=new Float32Array(h);const f=new Float32Array(c.length/2),m=new Float32Array(c.length/2);for(let b=0;b<f.length;b++)f[b]=c[b*2],m[b]=c[b*2+1];const y=qo(f,l,"float32"),v=qo(m,l,"float32");n[o]=ml(y,v),y.dispose(),v.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*d}s!=="complex64"&&(n[o]=qo(c,l,s))}return n}function hue(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const VT=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function XL(t){return VT?Buffer.byteLength(t):new Blob([t]).size}function pue(t){if(VT)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function fue(t){if(VT){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function UT(t){if(t.length===1)return t[0];let e=0;t.forEach(a=>{e+=a.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(a=>{n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function YL(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function QL(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function JL(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}async function WT(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),JL(t,n,r)}function Am(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:XL(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:XL(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function ZL(t){const e=[];for(const n of t)e.push(...n.weights);return e}function gue(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function mue(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function yue(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function bue(){const t=gue(),e=mue(),n=yue();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];i[o]=l}return new Float32Array(a)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Yn.instance==null&&(Yn.instance=new Yn),Yn.instance}static registerSaveRouter(e){Yn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Yn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Yn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Yn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Yn.getInstance().loadRouters:Yn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&a.push(o)}),a}}const vue=t=>Yn.registerSaveRouter(t),xue=t=>Yn.registerLoadRouter(t),wue=t=>Yn.getSaveHandlers(t),kue=(t,e)=>Yn.getLoadHandlers(t,e);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const GT="tensorflowjs",HT=1,td="models_store",Nu="model_info_store";function eD(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function qT(t){const e=t.result;e.createObjectStore(td,{keyPath:"modelPath"}),e.createObjectStore(Nu,{keyPath:"modelPath"})}class nd{constructor(e){if(this.indexedDB=eD(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(GT,HT);i.onupgradeneeded=()=>qT(i),i.onsuccess=()=>{const o=i.result;if(n==null){const s=o.transaction(td,"readonly"),l=s.objectStore(td).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=u=>(o.close(),a(l.error)),s.oncomplete=()=>o.close()}else{const s=Am(n),l=o.transaction(Nu,"readwrite");let u=l.objectStore(Nu);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:s});let d;c.onsuccess=()=>{d=o.transaction(td,"readwrite");const h=d.objectStore(td).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s});h.onsuccess=()=>r({modelArtifactsInfo:s}),h.onerror=f=>{u=l.objectStore(Nu);const m=u.delete(this.modelPath);m.onsuccess=()=>(o.close(),a(h.error)),m.onerror=y=>(o.close(),a(h.error))}},c.onerror=h=>(o.close(),a(c.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>a(i.error)})}}nd.URL_SCHEME="indexeddb://";const tD=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(nd.URL_SCHEME)?Sue(t.slice(nd.URL_SCHEME.length)):null;Yn.registerSaveRouter(tD),Yn.registerLoadRouter(tD);function Sue(t){return new nd(t)}function Cue(t){return t.startsWith(nd.URL_SCHEME)?t.slice(nd.URL_SCHEME.length):t}class Eue{constructor(){this.indexedDB=eD()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(GT,HT);r.onupgradeneeded=()=>qT(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(Nu,"readonly"),o=i.objectStore(Nu).getAll();o.onsuccess=()=>{const s={};for(const l of o.result)s[l.modelPath]=l.modelArtifactsInfo;e(s)},o.onerror=s=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=Cue(e),new Promise((n,r)=>{const a=this.indexedDB.open(GT,HT);a.onupgradeneeded=()=>qT(a),a.onsuccess=()=>{const i=a.result,o=i.transaction(Nu,"readwrite"),s=o.objectStore(Nu),l=s.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),d=()=>{u=i.transaction(td,"readwrite");const h=u.objectStore(td).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=f=>r(l.error)};c.onsuccess=d,c.onerror=h=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yl="/",Hh="tensorflowjs_models",nD="info",Iue="model_topology",Tue="weight_specs",Nue="weight_data",_ue="model_metadata";function rD(t){return{info:[Hh,t,nD].join(yl),topology:[Hh,t,Iue].join(yl),weightSpecs:[Hh,t,Tue].join(yl),weightData:[Hh,t,Nue].join(yl),modelMetadata:[Hh,t,_ue].join(yl)}}function aD(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Oue(t){const e=t.split(yl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(yl)}function Rue(t){return t.startsWith(rd.URL_SCHEME)?t.slice(rd.URL_SCHEME.length):t}class rd{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=rD(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Am(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,pue(e.weightData));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch{throw aD(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const s=JSON.parse(i);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=fue(o),n}}rd.URL_SCHEME="localstorage://";const iD=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(rd.URL_SCHEME)?$ue(t.slice(rd.URL_SCHEME.length)):null;Yn.registerSaveRouter(iD),Yn.registerLoadRouter(iD);function $ue(t){return new rd(t)}class Mue{constructor(){V(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Hh+yl,r=yl+nD;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const o=Oue(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=Rue(e);const n=rD(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return aD(n),r}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qh="://";class Va{constructor(){this.managers={}}static getInstance(){return Va.instance==null&&(Va.instance=new Va),Va.instance}static registerManager(e,n){V(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(qh)&&(e=e.slice(0,e.indexOf(qh))),V(e.length>0,()=>"scheme must not be an empty string.");const r=Va.getInstance();V(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Va.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Va.getInstance().managers)}}function Ew(t){if(t.indexOf(qh)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Va.getSchemes().join(",")}`);return{scheme:t.split(qh)[0],path:t.split(qh)[1]}}async function oD(t,e,n=!1){V(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Yn.getLoadHandlers(t);V(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),V(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Yn.getSaveHandlers(e);V(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),V(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],s=Ew(t).scheme,l=Ew(t).path,u=s===Ew(t).scheme,c=await a.load();n&&u&&await Va.getManager(s).removeModel(l);const d=await o.save(c);return n&&!u&&await Va.getManager(s).removeModel(l),d.modelArtifactsInfo}async function Pue(){const t=Va.getSchemes(),e={};for(const n of t){const r=await Va.getManager(n).listModels();for(const a in r){const i=n+qh+a;e[i]=r[a]}}return e}async function Aue(t){const e=Ew(t);return Va.getManager(e.scheme).removeModel(e.path)}async function Lue(t,e){return oD(t,e,!1)}async function Due(t,e){return oD(t,e,!0)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Fue{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(!window||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new Fue);try{Va.registerManager(rd.URL_SCHEME,new Mue)}catch{}try{Va.registerManager(nd.URL_SCHEME,new Eue)}catch{}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bue={importFetch:()=>require("node-fetch")};let KT;class zue{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(KT==null&&(KT=Bue.importFetch()),KT(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new zue);/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Et(t,e="float32",n){return e=e||"float32",lT(t),new Or(t,e,n)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jue(t,e){const n=z(t,"x","cast");if(!yL(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return ne.runKernel(_g,r,a)}const jn=te({cast_:jue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vue(t){const e={x:z(t,"x","clone","string_or_numeric")};return ne.runKernel(Wg,e)}const bl=te({clone_:Vue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XT(t,e=!1){console.log(t.toString(e))}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/GL();const Uue={buffer:Et,cast:jn,clone:bl,print:XT};Zle(Uue);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Wue="model",Gue=".json",Hue=".weights.bin";function sD(t){return new Promise(e=>setTimeout(e)).then(t)}class Sd{constructor(e){if(!fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Sd.URL_SCHEME)&&(e=e.slice(Sd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Wue),this.modelJsonFileName=e+Gue,this.weightDataFileName=e+Hue}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=QL(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await sD(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=n,await sD(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Am(e)}}}}Sd.URL_SCHEME="downloads://";class que{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const s=WT(i,l=>this.loadWeights(l));e(s)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,a[o]));return Promise.all(i).then(o=>[n,UT(o)])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=o=>{const s=o.target.result;r(s)},i.onerror=o=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>YL(i.name)),a={};for(const i of e)i.paths.forEach(o=>{const s=YL(o);if(n.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);a[o]=this.weightsFiles[r.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const Kue=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Sd.URL_SCHEME)?Xue(t.slice(Sd.URL_SCHEME.length)):null;Yn.registerSaveRouter(Kue);function Xue(t="model"){return new Sd(t)}function Yue(t){return new que(t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lD(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let a=0;const i=l=>(l.then(u=>{const c=n+ ++a/t.length*(r-n);return e(c),u}),l);function o(l){V(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,u){V(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),V(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),V(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function uD(t,e){e==null&&(e={});const n=e.fetchFunc==null?fe().platform.fetch:e.fetchFunc,r=t.map(u=>n(u,e.requestInit,{isBinary:!0})),a=0,i=.5,o=(e.onProgress==null?await Promise.all(r):await lD(r,e.onProgress,a,i)).map(u=>u.arrayBuffer());return e.onProgress==null?await Promise.all(o):await lD(o,e.onProgress,.5,1)}async function Que(t,e="",n,r){return cD(a=>uD(a,{requestInit:r}))(t,e,n)}function cD(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((f,m)=>{let y=0;f.weights.forEach(v=>{const b="quantization"in v?v.quantization.dtype:v.dtype,x=jT[b]*be(v.shape),w=()=>{a[m]=!0,i[m]==null&&(i[m]=[]),i[m].push({manifestEntry:v,groupOffset:y,sizeBytes:x})};r!=null?r.forEach((S,C)=>{S===v.name&&(w(),o[C]=!0)}):w(),s.push(v.name),y+=x})}),!o.every(f=>f)){const f=r.filter((m,y)=>!o[y]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const l=a.reduce((f,m,y)=>(m&&f.push(y),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(m=>{const y=n+(n.endsWith("/")?"":"/")+m;u.push(y)})});const c=await t(u),d={};let h=0;return l.forEach(f=>{const m=e[f].paths.length;let y=0;for(let w=0;w<m;w++)y+=c[h+w].byteLength;const v=new ArrayBuffer(y),b=new Uint8Array(v);let x=0;for(let w=0;w<m;w++){const S=new Uint8Array(c[h+w]);b.set(S,x),x+=S.byteLength}i[f].forEach(w=>{const S=v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),C=KL(S,[w.manifestEntry]);for(const E in C)d[E]=C[E]}),h+=m}),d}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jue="application/octet-stream",Zue="application/json";class YT{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(V(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=fe().platform.fetch,V(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&V(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=QL(e,r);n.body.append("model.json",new Blob([JSON.stringify(a)],{type:Zue}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:Jue}),"model.weights.bin");const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Am(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return WT(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=ece(n),i=this.weightPathPrefix||r,o=ZL(e),s=[],l=[];for(const c of e)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):s.push(i+d+a);this.weightUrlConverter&&s.push(...await Promise.all(l));const u=await uD(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,UT(u)]}}YT.URL_SCHEME_REGEX=/^https?:\/\//;function ece(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function QT(t){return t.match(YT.URL_SCHEME_REGEX)!=null}const dD=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>QT(r)):n=QT(t),n)return JT(t,e)}return null};Yn.registerSaveRouter(dD),Yn.registerLoadRouter(dD);function JT(t,e){return new YT(t,e)}function tce(t,e){return JT(t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ZT{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class hD{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class nce{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function rce(t,e,n,r){const a=arguments;return new nce(pD(...a))}function pD(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new ZT(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ZT({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ZT({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function ace(t){return new hD(t)}function ice(t){return new hD(t)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const e4=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:Yue,browserHTTPRequest:tce,concatenateArrayBuffers:UT,copyModel:Lue,decodeWeights:KL,encodeWeights:due,fromMemory:rce,fromMemorySync:pD,getLoadHandlers:kue,getModelArtifactsForJSON:WT,getModelArtifactsForJSONSync:JL,getModelArtifactsInfoForJSON:Am,getSaveHandlers:wue,getWeightSpecs:ZL,http:JT,isHTTPScheme:QT,listModels:Pue,loadWeights:Que,moveModel:Due,registerLoadRouter:xue,registerSaveRouter:vue,removeModel:Aue,weightsLoaderFactory:cD,withSaveHandler:ace,withSaveHandlerSync:ice},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oce(t,e,n=!1,r=!1){let a=z(t,"a","matMul"),i=z(e,"b","matMul");[a,i]=Xn(a,i);const o={a,b:i},s={transposeA:n,transposeB:r};return ne.runKernel(Bv,o,s)}const cn=te({matMul_:oce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sce(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:z(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return ne.runKernel(Mx,i,o)}const Iw=te({oneHot_:sce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lce(){fe().set("PROD",!0)}function uce(){fe().set("DEBUG",!0)}function cce(){fe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function dce(t){fe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function hce(){ne.disposeVariables()}function vl(){return ne}function pce(){return ne.memory()}function fce(t){return ne.profile(t)}function Kt(t,e){return ne.tidy(t,e)}function fa(t){AT(t).forEach(e=>e.dispose())}function xs(t){return ne.keep(t)}function gce(t){return ne.time(t)}function mce(t){return ne.setBackend(t)}function yce(){return ne.ready()}function bce(){return ne.backendName}function vce(t){ne.removeBackend(t)}function xce(t){return ne.findBackend(t)}function wce(t){return ne.findBackendFactory(t)}function t4(t,e,n=1){return ne.registerBackend(t,e,n)}function kce(){return ne.backend}function Sce(t,e){fe().setPlatform(t,e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cce(t){const e={input:z(t,"input","imag")};return ne.runKernel(mx,e)}const Lm=te({imag_:Cce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ece(t){const e={x:z(t,"x","neg")};return ne.runKernel(Nx,e)}const ws=te({neg_:Ece});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ice(t){const e={input:z(t,"input","real")};return ne.runKernel(jx,e)}const Kh=te({real_:Ice});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tce(t,e,n){const r=z(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),V(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{V(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?Kt(()=>{let o=Kh(r),s=Lm(r);return o=ne.runKernel(jh,{x:o},i),s=ne.runKernel(jh,{x:s},i),n&&(s=ws(s)),ml(o,s)}):ne.runKernel(jh,a,i)}const Dm=te({transpose_:Tce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nce(t,e,n){const r=z(t,"labels","confusionMatrix"),a=z(e,"predictions","confusionMatrix");V(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),V(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),V(a.rank===1,()=>`Expected the rank of predictions to be 1, but got ${a.rank}`),V(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),V(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=Iw(jn(r,"int32"),n),o=Iw(jn(a,"int32"),n),s=Dm(i),l=cn(s,o);return jn(l,"int32")}const _ce=te({confusionMatrix_:Nce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Oce=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:_ce},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ad(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function n4(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function Vt(t,e){const n=[],r=Math.max(t.length,e.length);for(let a=0;a<r;a++){let i=t[t.length-a-1];i==null&&(i=1);let o=e[e.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else if(i!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else n.unshift(i)}return n}const Rce=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Vt,getBroadcastDims:ad,getReductionAxes:n4},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r4(t,e,n){if(Hc(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=vs(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Tu(t,e,r,n)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let id;function fD(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(yw(gw,ne.backendName)!=null){const h={pixels:t},f={numChannels:e};return ne.runKernel(gw,h,f)}const[l,u]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let c;if(o)c=t.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=t.data;else if(i||a||s){if(id==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")id=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else id=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});id.canvas.width=l,id.canvas.height=u,id.drawImage(t,0,0,l,u),c=id.getImageData(0,0,l,u).data}let d;if(e===4)d=new Int32Array(c);else{const h=l*u;d=new Int32Array(h*e);for(let f=0;f<h;f++)for(let m=0;m<e;++m)d[f*e+m]=c[f*4+m]}return r4(d,[u,l,e],"int32")}function $ce(t){return t!=null&&t.data instanceof Uint8Array}function Mce(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function Pce(t){return t!=null&&t.width!==0&&t.height!==0}function Ace(t){return Mce()&&!(t instanceof ImageBitmap)&&Pce(t)&&!$ce(t)}async function Lce(t,e=3){let n=null;if(fe().getBool("WRAP_TO_IMAGEBITMAP")&&Ace(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return fD(n,e)}async function gD(t,e){let n=z(t,"img","toPixels");if(!(t instanceof Kn)){const u=n;n=jn(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),s=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const c=[0,0,0,255];for(let h=0;h<i;h++){const f=o[u*i+h];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*s,c[1]=f*s,c[2]=f*s):c[h]=f*s}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){e.width=a,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,a,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const mD=te({fromPixels_:fD}),Dce=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:mD,fromPixelsAsync:Lce,toPixels:gD},Symbol.toStringTag,{value:"Module"}));function Tw(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(be(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let o=1;for(let d=0;d<a.length-1;++d)o*=a[d];const s=t.shape,l=a.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=s[d],l.push(s[d]);const c=[...Je(t.shape).map(d=>d/u),1].slice(0,i);return[l,o,u,c]}const Fce=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:Tw},Symbol.toStringTag,{value:"Module"}));function a4(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==t[o+r])throw new Error(i+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function i4(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}a4(n,e,t)}function Xh(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=a;d<i;++d)o*=n[d];const s=a<1?1:a,l=be(e.shape)/s,u=[...Je(n.slice(0,a)),1],c=be(n);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const Bce=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Xh,validateInput:i4,validateUpdateShape:a4},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const o4=-2,zce=-1;function s4(t,e,n){const r=t.shape.length;V(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),V(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)V(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function jce(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function l4(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function yD(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function bD(t,e,n){return n<=t?n:n-(e-1)}function vD(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Vce(t,e,n,r,a,i,o,s,l){const u=t.length;let c=new Array(u),d=new Array(u),h=new Array(u);if(e.length&&n>0){const f=e[0],m=n+1;c=xD(o,f,m,r,t),d=wD(s,f,m,a,t),h=yD(i,f,m,t)}else for(let f=0;f<u;f++)c[f]=SD(o,r,i,t,f,l),d[f]=CD(s,a,i,t,f,l),h[f]=kD(i,f,l);return{begin:c,end:d,strides:h}}function xD(t,e,n,r,a){const i=[...a],o=vD(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{const l=bD(e,n,s);let u=r[l];t&1<<l&&(u=0),i[s]=u}return i}function wD(t,e,n,r,a){const i=[...a],o=vD(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const l=bD(e,n,s);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[s]=u}for(let s=0;s<i.length;s++){const l=a[s];i[s]<0&&(i[s]+=l),i[s]=Su(0,i[s],a[s])}return i}function kD(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function SD(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=Su(0,o,l-1),o}function CD(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),s>0?o=Su(0,o,l):o=Su(-1,o,l-1),o}function u4(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function c4(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function d4(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(o=>{V(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((o,s)=>o>=0?o:(V(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,i]}function h4(t,e,n,r,a,i,o,s,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)c&&1<<x&s&&d.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Uce(d,h);let f=!0,m=!0,y=!0;const v=[],b=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(h.shrinkAxisMask&1<<x),S=t[x];if(S===-1){v.push(w?1:-1);continue}const C=[h.beginMask&1<<x,h.endMask&1<<x],E=[h.strides[x]>0?0:-1,h.strides[x]>0?S:S-1];if(w&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&h.strides[x]===1;const _=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(w){const D=h.begin[x]<0?S+h.begin[x]:h.begin[x];if(h.begin[x]=D,h.end[x]=h.begin[x]+1,D<0||D>=S)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=ED(h.begin[x],0,h.strides[x],S,C,E),h.end[x]=ED(h.end[x],1,h.strides[x],S,C,E);const P=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===S;f=f&&P,m=m&&(x===0&&h.strides[x]===1||P)}else f=f&&h.strides[x]===1&&_,m=m&&(x===0&&h.strides[x]===1||_);let N,$=!1;if(h.beginValid&&h.endValid?(N=h.end[x]-h.begin[x],$=!0):w?(N=1,$=!0):_&&S>=0&&(h.strides[x]<0?N=-S:N=S,$=!0),$){let P;N===0||N<0!=h.strides[x]<0?P=0:P=Math.trunc(N/h.strides[x])+(N%h.strides[x]!==0?1:0),v.push(P)}else v.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const w=h.finalShapeGatherIndices[x];w>=0?b.push(v[w]):w===o4&&b.push(1)}return{finalShapeSparse:b.filter((x,w)=>h.finalShapeGatherIndices[w]!==o4),finalShape:b,isIdentity:f,sliceDim0:m,isSimpleSlice:y,begin:h.begin,end:h.end,strides:h.strides}}function Uce(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(o4),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(zce),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function ED(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const ID=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:s4,computeFlatOffset:c4,computeOutShape:l4,getNormalizedAxes:Vce,isSliceContinous:u4,maskToAxes:jce,parseSliceParams:d4,sliceInfo:h4,startForAxis:SD,startIndicesWithElidedDims:xD,stopForAxis:CD,stopIndicesWithElidedDims:wD,stridesForAxis:kD,stridesWithElidedDims:yD},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class TD{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class qu{constructor(){this.classNameMap={}}static getMap(){return qu.instance==null&&(qu.instance=new qu),qu.instance}static register(e){qu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function _u(t){V(t.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),V(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),qu.register(t)}const Wce=Object.freeze(Object.defineProperty({__proto__:null,Serializable:TD,SerializationMap:qu,registerClass:_u},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gce=.001,ND=.1;function Hce(t,e,n){return n==null&&(n=p4()),f4(t,e,(r,a)=>g4(r,a,n))}function p4(){return ne.backend.floatPrecision()===32?Gce:ND}function f4(t,e,n){let r=!0;if((pa(t)||pa(e))&&(r=!1),pa(t)&&pa(e)&&(r=!0),r){const o=t.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=vs(t),s=vs(e);if(!wn(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const a=pa(t)?t:hl(t),i=pa(e)?e:hl(e);if(a.length!==i.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${i.length}.
Actual:   ${a}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const s=a[o],l=i[o];if(!n(s,l))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${l}.
Actual:   ${a}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function qce(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function Kce(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return ys(t)||ys(t[0])||ys(e)||ys(e[0])?f4(t,n,(r,a)=>r==a):f4(t,e,(r,a)=>g4(r,a,0))}function Xce(t,e,n){if(n==null&&(n=p4()),!g4(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function g4(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function Yce(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function Qce(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error(`Expected ArrayBuffer value at ${a} to be ${r[a]} but got ${n[a]} instead`)}function _D(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?_D(n):t[e]=bs(n)}return t}function Jce(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function Zce(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const ede=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:ND,createVideoElement:Jce,encodeStrings:_D,expectArrayBuffersEqual:Qce,expectArraysClose:Hce,expectArraysEqual:Kce,expectNumbersClose:Xce,expectPromiseToFail:qce,expectValuesInRange:Yce,play:Zce,testEpsilon:p4},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const tde="3.21.0";/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nde(t,e){let n=z(t,"a","add"),r=z(e,"b","add");[n,r]=Xn(n,r);const a={a:n,b:r};return ne.runKernel(zh,a)}const ft=te({add_:nde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rde(t,e){let n=z(t,"a","floorDiv"),r=z(e,"b","floorDiv");[n,r]=Xn(n,r);const a={a:n,b:r};return ne.runKernel(jg,a)}const m4=te({floorDiv_:rde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ade(t,e){let n=z(t,"a","div"),r=z(e,"b","div");if([n,r]=Xn(n,r),n.dtype==="int32"&&r.dtype==="int32")return m4(n,r);const a={a:n,b:r},i={};return ne.runKernel(Pg,a,i)}const Tn=te({div_:ade});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ide(t,e){let n=z(t,"a","mul"),r=z(e,"b","mul");[n,r]=Xn(n,r);const a={a:n,b:r};return ne.runKernel(am,a)}const Le=te({mul_:ide});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ode(t){const e=z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ne.runKernel(Wv,n)}else{const n={x:e};return ne.runKernel(Rv,n)}}const mi=te({abs_:ode});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sde(t){const e={x:z(t,"x","acos")};return ne.runKernel(kg,e)}const OD=te({acos_:sde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lde(t){const e={x:z(t,"x","acosh")};return ne.runKernel(Sg,e)}const RD=te({acosh_:lde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ude(t){V(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),V(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>z(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!wn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return ne.runKernel($v,r)}const $D=te({addN_:ude});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cde(t,e=null,n=!1){const r={x:z(t,"x","all","bool")},a={axis:e,keepDims:n};return ne.runKernel(Mv,r,a)}const MD=te({all_:cde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dde(t,e=null,n=!1){const r={x:z(t,"x","any","bool")},a={axis:e,keepDims:n};return ne.runKernel(Pv,r,a)}const PD=te({any_:dde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hde(t,e=0){const n={x:z(t,"x","argMax")},r={axis:e};return ne.runKernel(Av,n,r)}const AD=te({argMax_:hde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pde(t,e=0){const n={x:z(t,"x","argMin")},r={axis:e};return ne.runKernel(Lv,n,r)}const LD=te({argMin_:pde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fde(t){const e={x:z(t,"x","asin")};return ne.runKernel(Cg,e)}const DD=te({asin_:fde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gde(t){const e={x:z(t,"x","asinh")};return ne.runKernel(Eg,e)}const FD=te({asinh_:gde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mde(t){const e={x:z(t,"x","atan")};return ne.runKernel(Ig,e)}const BD=te({atan_:mde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yde(t,e){let n=z(t,"a","atan2"),r=z(e,"b","atan2");[n,r]=Xn(n,r);const a={a:n,b:r};return ne.runKernel(Ng,a)}const zD=te({atan2_:yde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bde(t){const e={x:z(t,"x","atanh")};return ne.runKernel(Tg,e)}const jD=te({atanh_:bde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fm(t,e,n,r,a="NHWC",i){const o=t[3],s=[...e,o],l=wl(a);return jr(t,s,n,i,r,null,null,l)}function ho(t,e,n,r,a,i,o="channelsLast"){const[s,l]=Nw(e);let u;if(o==="channelsLast")u=[s,l,t[3],t[3]];else if(o==="channelsFirst")u=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return jr(t,u,n,r,a,i,!1,o)}function xl(t,e,n,r,a,i,o="NDHWC"){const[s,l,u]=b4(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[s,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[s,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Ou(t,c,n,r,a,!1,d,i)}function jr(t,e,n,r,a,i,o=!1,s="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d]=t;else if(s==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[h,f,,m]=e,[y,v]=Nw(n),[b,x]=Nw(r),w=Yh(h,b),S=Yh(f,x),{padInfo:C,outHeight:E,outWidth:_}=wde(a,u,c,y,v,w,S,i,s),N=o?m*d:m;let $;return s==="channelsFirst"?$=[l,N,E,_]:s==="channelsLast"&&($=[l,E,_,N]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:E,outWidth:_,outChannels:N,padInfo:C,strideHeight:y,strideWidth:v,filterHeight:h,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:x,inShape:t,outShape:$,filterShape:e}}function Ou(t,e,n,r,a,i=!1,o="channelsLast",s){let[l,u,c,d,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d,h]=t;else if(o==="channelsFirst")[l,h,u,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,m,y,,v]=e,[b,x,w]=b4(n),[S,C,E]=b4(r),_=Yh(f,S),N=Yh(m,C),$=Yh(y,E),{padInfo:P,outDepth:D,outHeight:j,outWidth:B}=kde(a,u,c,d,b,x,w,_,N,$,s),K=i?v*h:v;let Y;return o==="channelsFirst"?Y=[l,K,D,j,B]:o==="channelsLast"&&(Y=[l,D,j,B,K]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:h,outDepth:D,outHeight:j,outWidth:B,outChannels:K,padInfo:P,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:f,filterHeight:m,filterWidth:y,effectiveFilterDepth:_,effectiveFilterHeight:N,effectiveFilterWidth:$,dilationDepth:S,dilationHeight:C,dilationWidth:E,inShape:t,outShape:Y,filterShape:e}}function vde(t,e,n,r,a){r==null&&(r=y4(t,e,n));const i=t[0],o=t[1],s=od((i-e+2*r)/n+1,a),l=od((o-e+2*r)/n+1,a);return[s,l]}function xde(t,e,n,r,a,i){a==null&&(a=y4(t,e,r));const o=t[0],s=t[1],l=t[2],u=od((o-e+2*a)/r+1,i),c=od((s-e+2*a)/r+1,i),d=od((l-e+2*a)/r+1,i);return[u,c,d,n]}function y4(t,e,n,r=1){const a=Yh(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function Nw(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function b4(t){return typeof t=="number"?[t,t,t]:t}function Yh(t,e){return e<=1?t:t+(t-1)*(e-1)}function wde(t,e,n,r,a,i,o,s,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=vde([e,n],i,r,t,s);c=h[0],d=h[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/a);const h=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(d-1)*a+o-n),m=Math.floor(h/2),y=h-m,v=Math.floor(f/2),b=f-v;u={top:m,bottom:y,left:v,right:b,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/a);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];u={top:h,bottom:f,left:m,right:y,type:h===0&&f===0&&m===0&&y===0?"VALID":"EXPLICIT"},c=od((e-i+h+f)/r+1,s),d=od((n-o+m+y)/a+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function kde(t,e,n,r,a,i,o,s,l,u,c){let d,h,f,m;if(typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=xde([e,n,r,1],s,1,a,t,c);h=y[0],f=y[1],m=y[2]}else if(t==="same"){h=Math.ceil(e/a),f=Math.ceil(n/i),m=Math.ceil(r/o);const y=(h-1)*a+s-e,v=(f-1)*i+l-n,b=(m-1)*o+u-r,x=Math.floor(y/2),w=y-x,S=Math.floor(v/2),C=v-S,E=Math.floor(b/2),_=b-E;d={top:S,bottom:C,left:E,right:_,front:x,back:w,type:"SAME"}}else if(t==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((e-s+1)/a),f=Math.ceil((n-l+1)/i),m=Math.ceil((r-u+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:m}}function od(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Bm(t){const[e,n,r]=Nw(t);return e===1&&n===1&&r===1}function ga(t,e){return Bm(t)||Bm(e)}function wl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function po(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")V(qc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{V(qc(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sde(t,e){const n={x:z(t,"x","reshape","string_or_numeric")},r={shape:e};return ne.runKernel(Vx,n,r)}const Se=te({reshape_:Sde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cde(t,e,n,r,a){const i=z(t,"x","avgPool","float32"),o=1;V(ga(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),po("avgPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let d=ne.runKernel(Dv,u,c);return d=jn(d,i.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const v4=te({avgPool_:Cde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ede(t,e,n,r,a,i="NDHWC"){const o=z(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),V(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),po("avgPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let d=ne.runKernel(Fv,u,c);return d=jn(d,s.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const VD=te({avgPool3d_:Ede});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ide(t,e=0){V(t.length>=1,()=>"Pass at least one tensor to concat");const n=Pm(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return bl(n[0]);const r=n,a={axis:e};return ne.runKernel(Gv,r,a)}const ma=te({concat_:Ide});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tde(t){const e={x:z(t,"x","sigmoid","float32")};return ne.runKernel(mm,e)}const sd=te({sigmoid_:Tde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nde(t,e,n){const r=z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return ne.runKernel(Xx,a,i)}const kn=te({slice_:Nde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _de(t){const e={x:z(t,"x","tanh","float32")};return ne.runKernel(km,e)}const _w=te({tanh_:_de});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ode(t,e,n,r,a,i){const o=z(t,"forgetBias","basicLSTMCell"),s=z(e,"lstmKernel","basicLSTMCell"),l=z(n,"lstmBias","basicLSTMCell"),u=z(r,"data","basicLSTMCell"),c=z(a,"c","basicLSTMCell"),d=z(i,"h","basicLSTMCell"),h=ma([u,d],1),f=cn(h,s),m=ft(f,l),y=m.shape[0],v=m.shape[1]/4,b=[y,v],x=kn(m,[0,0],b),w=kn(m,[0,v],b),S=kn(m,[0,v*2],b),C=kn(m,[0,v*3],b),E=ft(Le(sd(x),_w(w)),Le(c,sd(ft(o,S)))),_=Le(_w(E),sd(C));return[E,_]}const UD=te({basicLSTMCell_:Ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rde(t,e,n){const r=z(t,"x","batchToSpaceND"),a=e.reduce((s,l)=>s*l);V(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),V(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),V(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},o={blockShape:e,crops:n};return ne.runKernel(zv,i,o)}const x4=te({batchToSpaceND_:Rde});function $de(t){let e;return t.rank===0||t.rank===1?e=Se(t,[1,1,1,t.size]):t.rank===2?e=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mde(t,e,n,r,a,i){i==null&&(i=.001);const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;r!=null&&(c=z(r,"offset","batchNorm")),V(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:$de(o),scale:u,offset:c,mean:s,variance:l},h={varianceEpsilon:i},f=ne.runKernel(hx,d,h);return Se(f,o.shape)}const zm=te({batchNorm_:Mde});function Pde(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),V(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),zm(o,s,l,c,u,i)}const WD=te({batchNorm2d_:Pde});function Ade(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),V(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),zm(o,s,l,c,u,i)}const GD=te({batchNorm3d_:Ade});function Lde(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),V(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),zm(o,s,l,c,u,i)}const HD=te({batchNorm4d_:Lde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dde(t,e,n){const r=z(t,"x","bincount"),a=z(e,"weights","bincount");V(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},o={size:n};return ne.runKernel(jv,i,o)}const w4=te({bincount_:Dde});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fde(t,e){const n=z(t,"s0","broadcastArgs","int32"),r=z(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return ne.runKernel(Vv,a)}const qD=te({broadcastArgs_:Fde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bde(t,e){let n=z(t,"broadcastTo","x");const r=n.shape;if(e.some(l=>!(l>0)||l%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=Se(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return bl(n);const o={x:n},s={reps:i};return ne.runKernel(Sm,o,s)}const Qh=te({broadcastTo_:Bde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zde(t){const e={x:z(t,"x","ceil","float32")};return ne.runKernel(Og,e)}const KD=te({ceil_:zde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jh(t,e,n){const r={shape:t,value:e,dtype:n};return ne.runKernel(cx,{},r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jde(t,e,n){const r=z(t,"x","clipByValue");if(V(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Jh(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return ne.runKernel(Rg,a,i)}const XD=te({clipByValue_:jde});function Vde(t){return ma(t,0)}const YD=te({concat1d_:Vde});function Ude(t,e){return ma(t,e)}const QD=te({concat2d_:Ude});function Wde(t,e){return ma(t,e)}const JD=te({concat3d_:Wde});function Gde(t,e){return ma(t,e)}const ZD=te({concat4d_:Gde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hde(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","conv2d","float32"),l=z(e,"filter","conv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),po("conv2d",r,o);const d=a==="NHWC"?u.shape[3]:u.shape[1];V(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),V(ga(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const h={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},m=ne.runKernel(Hv,h,f);return c?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const jm=te({conv2d_:Hde});function qde(t,e,n,r,a="NWC",i=1,o){const s=z(t,"x","conv1d"),l=z(e,"filter","conv1d");let u=s,c=!1;s.rank===2&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1]])),V(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),po("conv1d",r,o),V(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(ga(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),V(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const d=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Se(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=jm(h,d,[1,n],r,"NHWC",[1,i],o);return c?Se(f,[f.shape[2],f.shape[3]]):Se(f,[f.shape[0],f.shape[2],f.shape[3]])}const eF=te({conv1d_:qde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kde(t,e,n,r,a,i="NHWC",o){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,u=!1;e.rank===3&&(u=!0,l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),V(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];V(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),V(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),po("conv2dDerInput",a,o);const h={dy:l,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},m=ne.runKernel(Kv,h,f);return u?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const tF=te({conv2DBackpropInput_:Kde});function Xde(t,e,n,r,a,i){const o=z(t,"x","conv2dTranspose"),s=z(e,"filter","conv2dTranspose");return tF(n,o,s,r,a,"NHWC",i)}const nF=te({conv2dTranspose_:Xde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yde(t,e,n,r,a="NDHWC",i=[1,1,1]){const o=z(t,"x","conv3d"),s=z(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),V(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),V(ga(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),V(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},h=ne.runKernel(Xv,c,d);return u?Se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const rF=te({conv3d_:Yde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qde(t,e,n,r,a){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,s=!1;e.rank===4&&(s=!0,o=Se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];V(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),V(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),V(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),V(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),V(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},h=ne.runKernel(Yv,c,d);return s?Se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Jde=te({conv3DBackpropInput_:Qde});function Zde(t,e,n,r,a){const i=z(t,"x","conv3dTranspose"),o=z(e,"filter","conv3dTranspose");return Jde(n,i,o,r,a)}const aF=te({conv3dTranspose_:Zde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ehe(t){const e={x:z(t,"x","cos","float32")};return ne.runKernel($g,e)}const iF=te({cos_:ehe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function the(t){const e={x:z(t,"x","cosh","float32")};return ne.runKernel(Mg,e)}const oF=te({cosh_:the});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nhe(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return ne.runKernel(Qv,a,i)}const sF=te({cumprod_:nhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rhe(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return ne.runKernel(Jv,a,i)}const lF=te({cumsum_:rhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ahe(t,e,n,r=!1){const a=z(t,"x","denseBincount"),i=z(e,"weights","denseBincount");V(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),V(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const o={x:a,weights:i},s={size:n,binaryOutput:r};return ne.runKernel(ex,o,s)}const uF=te({denseBincount_:ahe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ihe(t,e,n="NHWC"){const r=z(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];V(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),V(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),V(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),V(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return ne.runKernel(tx,s,l)}const cF=te({depthToSpace_:ihe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ohe(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","depthwiseConv2d","float32"),l=z(e,"filter","depthwiseConv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=a==="NHWC"?u.shape[3]:u.shape[1];V(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),po("depthwiseConv2d",r,o);const h={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},m=ne.runKernel(nx,h,f);return c?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Ow=te({depthwiseConv2d_:ohe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function she(t){const e={x:z(t,"x","diag")};return ne.runKernel(ix,e)}const dF=te({diag_:she});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lhe(t,e,n,r,a=[1,1],i="NHWC"){const o=z(t,"x","dilation2d"),s=z(e,"filter","dilation2d");V(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),V(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),V(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:s},d={strides:n,pad:r,dilations:a},h=ne.runKernel(ox,c,d);return u?Se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const hF=te({dilation2d_:lhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uhe(t,e){let n=z(t,"a","equal","string_or_numeric"),r=z(e,"b","equal","string_or_numeric");[n,r]=Xn(n,r),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(Dg,a)}const k4=te({equal_:uhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function che(t,e,n){const r=z(e,"a","where"),a=z(n,"b","where"),i=z(t,"condition","where","bool"),o=Vt(Vt(i.shape,r.shape),a.shape),s=Qh(i,o),l=Qh(r,o),u=Qh(a,o),c={condition:s,t:l,e:u};return ne.runKernel(Kx,c)}const ld=te({where_:che});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dhe(t){const e={x:z(t,"x","zerosLike")};return ne.runKernel(fw,e)}const yi=te({zerosLike_:dhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hhe(t,e){let n=z(t,"a","div"),r=z(e,"b","div");[n,r]=Xn(n,r);const a=Tn(n,r),i=yi(a),o=k4(r,i);return ld(o,i,a)}const pF=te({divNoNan_:hhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function phe(t,e){const n=z(t,"t1","dot"),r=z(e,"t2","dot");V((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(V(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const o=Se(n,[1,-1]),s=Se(r,[-1,1]),l=cn(o,s);return Se(l,[])}else if(n.rank===1&&r.rank===2){const o=Se(n,[1,-1]),s=Se(r,[r.shape[0],r.shape[1]]),l=cn(o,s);return Se(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Se(r,[-1,1]),s=cn(n,o);return Se(s,[s.size])}else{const o=Se(r,[r.shape[0],r.shape[1]]);return cn(n,o)}}const fF=te({dot_:phe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fhe(t,...e){const n=e.map((a,i)=>z(a,`tensors${i}`,"einsum")),r={equation:t};return ne.runKernel(sx,n,r)}const gF=te({einsum_:fhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ghe(t){const e={x:z(t,"x","elu","float32")};return ne.runKernel(Ag,e)}const S4=te({elu_:ghe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mhe(t){let e=z(t,"x","erf");V(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=jn(e,"float32"));const n={x:e};return ne.runKernel(Lg,n)}const mF=te({erf_:mhe});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C4(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function yF(t,e,n){const r=t.length+e.length,a=[];let i=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?a.push(t[i++]):a.push(e[o++]);return a}function Jr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function Rr(t,e){const n=e.map(r=>1);return yF(t,n,e)}function Zr(t,e,n){V(C4(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function pr(t,e){if(C4(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Vm(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function fr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yhe(t,e=null,n=!1){const r={x:z(t,"x","max")},a={reductionIndices:e,keepDims:n};return ne.runKernel(xx,r,a)}const ud=te({max_:yhe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bhe(t,e=null,n=!1){const r={x:z(t,"x","min")},a={axis:e,keepDims:n};return ne.runKernel(Ex,r,a)}const Rw=te({min_:bhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vhe(t,e){let n=z(t,"base","pow"),r=z(e,"exp","pow");[n,r]=Xn(n,r);const a={a:n,b:r};return ne.runKernel(om,a)}const Zh=te({pow_:vhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zt(t,e){if((pa(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&pa(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Tu(t,[],[],e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xhe(t){const e={x:z(t,"x","sqrt","float32")};return ne.runKernel(bm,e)}const ks=te({sqrt_:xhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function whe(t){const e=z(t,"x","square"),n={};return ne.runKernel("Square",{x:e},n)}const fo=te({square_:whe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function khe(t,e=null,n=!1){let r=z(t,"x","sum");r.dtype==="bool"&&(r=jn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return ne.runKernel(Yx,a,i)}const Nn=te({sum_:khe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function She(t,e="euclidean",n=null,r=!1){t=z(t,"x","norm");const a=bF(t,e,n);let i=a.shape;if(r){const o=Qt(n,t.shape);i=Rr(a.shape,o)}return Se(a,i)}function bF(t,e,n=null){if(t.rank===0)return mi(t);if(t.rank!==1&&n===null)return bF(Se(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Nn(mi(t),n);if(e===1/0)return ud(mi(t),n);if(e===-1/0)return Rw(mi(t),n);if(e==="euclidean"||e===2)return ks(Nn(Zh(mi(t),zt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ud(Nn(mi(t),n[0]),n[1]-1);if(e===1/0)return ud(Nn(mi(t),n[1]),n[0]);if(e===-1/0)return Rw(Nn(mi(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ks(Nn(fo(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Um=te({norm_:She});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Che(t,e=null,n=!1){return Um(t,"euclidean",e,n)}const vF=te({euclideanNorm_:Che});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ehe(t){const e={x:z(t,"x","exp")};return ne.runKernel(Fg,e)}const Ru=te({exp_:Ehe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ihe(t,e=0){const n=z(t,"x","expandDims","string_or_numeric");V(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return ne.runKernel(lx,r,a)}const kl=te({expandDims_:Ihe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function The(t){const e={x:z(t,"x","expm1")};return ne.runKernel(Bg,e)}const xF=te({expm1_:The});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nhe(t,e){const n=z(t,"x","tile","string_or_numeric");V(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return ne.runKernel(Sm,r,a)}const ep=te({tile_:Nhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _he(t,e,n,r="float32"){e==null&&(e=t);const a=Et([t,e],r),i=t<=e?t:e;for(let s=0;s<i;++s)a.set(1,s,s);const o=Se(a.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return ep(kl(o,0),[n[0],1,1]);if(n.length===2)return ep(kl(kl(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return ep(kl(kl(kl(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const E4=te({eye_:_he});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ohe(t){const e={x:z(t,"x","floor","float32")};return ne.runKernel(zg,e)}const I4=te({floor_:Ohe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rhe(t,e,n=0,r=0){const a=z(t,"x","gather"),i=z(e,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return ne.runKernel(px,o,s)}const T4=te({gather_:Rhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $he(t,e){let n=z(t,"a","greater","string_or_numeric"),r=z(e,"b","greater","string_or_numeric");[n,r]=Xn(n,r),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(Vg,a)}const Wm=te({greater_:$he});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mhe(t,e){let n=z(t,"a","greaterEqual","string_or_numeric"),r=z(e,"b","greaterEqual","string_or_numeric");[n,r]=Xn(n,r),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(Ug,a)}const N4=te({greaterEqual_:Mhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Phe(t){const e={x:z(t,"x","isFinite")};return ne.runKernel(Gg,e)}const wF=te({isFinite_:Phe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ahe(t){const e={x:z(t,"x","isInf")};return ne.runKernel(Hg,e)}const kF=te({isInf_:Ahe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lhe(t){const e={x:z(t,"x","isNaN")};return ne.runKernel(qg,e)}const SF=te({isNaN_:Lhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dhe(t,e=.2){const n={x:z(t,"x","leakyRelu")},r={alpha:e};return ne.runKernel(yx,n,r)}const _4=te({leakyRelu_:Dhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fhe(t,e){let n=z(t,"a","less","string_or_numeric"),r=z(e,"b","less","string_or_numeric");[n,r]=Xn(n,r),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(Kg,a)}const CF=te({less_:Fhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bhe(t,e){let n=z(t,"a","lessEqual","string_or_numeric"),r=z(e,"b","lessEqual","string_or_numeric");[n,r]=Xn(n,r),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(Xg,a)}const $w=te({lessEqual_:Bhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function EF(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return ne.runKernel(bx,{},r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zhe(t,e=5,n=1,r=1,a=.5){const i=z(t,"x","localResponseNormalization");V(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),V(qc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,s=!1;i.rank===3&&(s=!0,o=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:a},c=ne.runKernel(vx,l,u);return s?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const IF=te({localResponseNormalization_:zhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jhe(t){const e={x:z(t,"x","log","float32")};return ne.runKernel(Yg,e)}const tp=te({log_:jhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vhe(t){const e={x:z(t,"x","log1p")};return ne.runKernel(Qg,e)}const O4=te({log1p_:Vhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uhe(t){return V(Cu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=z(e,"x","tf.grad","string_or_numeric"),a=n!=null?z(n,"dy","tf.grad"):null;return ne.tidy(()=>{const{value:i,grads:o}=ne.gradients(()=>t(r),[r],a);return a!=null&&Yr(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Mw(o),o[0]})}}function Whe(t){return V(Cu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{V(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Pm(e,"args","tf.grads","string_or_numeric"),a=n!=null?z(n,"dy","tf.grads"):null;return ne.tidy(()=>{const{value:i,grads:o}=ne.gradients(()=>t(...r),r,a);return a!=null&&Yr(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Mw(o),o})}}function Ghe(t){return V(Cu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{V(e instanceof Kn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),V(n==null||n instanceof Kn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:a}=ne.gradients(()=>t(e),[e],n);return Mw(r),{grad:r[0],value:a}}}function Hhe(t){return V(Cu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{V(Array.isArray(e)&&e.every(a=>a instanceof Kn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),V(n==null||n instanceof Kn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=ne.gradients(()=>t(...e),e,n);return n!=null&&Yr(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Mw(r.grads),r}}function TF(t,e){V(Cu(t),()=>"The f passed in variableGrads(f) must be a function"),V(e==null||Array.isArray(e)&&e.every(u=>u instanceof Mm),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in ne.registeredVariables)e.push(ne.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,a=e.length;e=e.filter(u=>u.trainable),V(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:o,grads:s}=ne.gradients(t,e,null,i);V(s.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{s[c]!=null&&(l[u.name]=s[c])}),r?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Ss(t){return ne.customGrad(t)}function Mw(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qhe(t){const e={x:z(t,"x","softplus")};return ne.runKernel(ym,e)}const R4=te({softplus_:qhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Khe(t){const e=z(t,"x","logSigmoid");return Ss(n=>({value:ws(R4(ws(n))),gradFunc:r=>Le(r,sd(ws(n)))}))(e)}const NF=te({logSigmoid_:Khe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xhe(t,e){let n=z(t,"a","sub"),r=z(e,"b","sub");[n,r]=Xn(n,r);const a={a:n,b:r};return ne.runKernel(xm,a)}const Lt=te({sub_:Xhe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yhe(t,e=-1){const n=z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ss((r,a)=>{const i=ud(r,e,!0),o=Lt(r,i),s=Lt(jn(o,"float32"),tp(Nn(Ru(o),e,!0)));return a([s]),{value:s,gradFunc:(l,u)=>{const[c]=u,d=!0,h=Ru(c);return Lt(l,Le(Nn(l,e,d),h))}}})(n)}const _F=te({logSoftmax_:Yhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qhe(t,e=null,n=!1){const r=z(t,"x","logSumExp"),a=Qt(e,r.shape),i=ud(r,a,!0),o=Lt(r,i),s=Ru(o),l=Nn(s,a),u=tp(l),c=ft(Se(i,u.shape),u);if(n){const d=Rr(c.shape,a);return Se(c,d)}return c}const $4=te({logSumExp_:Qhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jhe(t,e){const n=z(t,"a","logicalAnd","bool"),r=z(e,"b","logicalAnd","bool");Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(Jg,a)}const Gm=te({logicalAnd_:Jhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zhe(t){const e={x:z(t,"x","logicalNot","bool")};return ne.runKernel(Zg,e)}const M4=te({logicalNot_:Zhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function epe(t,e){const n=z(t,"a","logicalOr","bool"),r=z(e,"b","logicalOr","bool");Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(em,a)}const P4=te({logicalOr_:epe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tpe(t,e){const n=z(t,"a","logicalXor","bool"),r=z(e,"b","logicalXor","bool");return Vt(n.shape,r.shape),Gm(P4(t,e),M4(Gm(t,e)))}const OF=te({logicalXor_:tpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pw=2147483648;function npe(t,e,n="left"){const r=z(t,"sortedSequence","searchSorted"),a=z(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Se(r,[-1,i]),l=Se(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(be(l.shape)>=Pw)throw new Error(`values tensor size must less than ${Pw}`);if(s.shape[1]>=Pw)throw new Error(`trailing dim_size must less than ${Pw} for int32 output type, was ${s.shape[1]}`);const u={sortedSequence:s,values:l},c={side:n};return ne.runKernel(qx,u,c)}const Aw=te({searchSorted_:npe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RF(t,e){return Aw(t,e,"left")}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rpe(t,e,n,r,a){const i=z(t,"x","maxPool"),o=1;let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),V(ga(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),po("maxPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},d=ne.runKernel(wx,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const A4=te({maxPool_:rpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ape(t,e=[1,1,1],n,r,a,i="NDHWC"){const o=z(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),V(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),po("maxPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=ne.runKernel(kx,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const $F=te({maxPool3d_:ape});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ipe(t,e,n,r,a=!1){const i={x:z(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},s=ne.runKernel(Sx,i,o);return{result:s[0],indexes:s[1]}}const MF=te({maxPoolWithArgmax_:ipe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ope(t,e){let n=z(t,"a","maximum"),r=z(e,"b","maximum");[n,r]=Xn(n,r),n.dtype==="bool"&&(n=jn(n,"int32"),r=jn(r,"int32")),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(tm,a)}const L4=te({maximum_:ope});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function spe(t,e=null,n=!1){const r={x:z(t,"x","mean")},a={axis:e,keepDims:n};return ne.runKernel(Cx,r,a)}const Hm=te({mean_:spe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $u(t,e="float32"){if(e==="complex64"){const r=$u(t,"float32"),a=$u(t,"float32");return ml(r,a)}const n=Qr(be(t),e);return ne.makeTensor(n,t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mu(t,e="float32"){if(e==="complex64"){const r=Mu(t,"float32"),a=$u(t,"float32");return ml(r,a)}const n=Ov(be(t),e);return ne.makeTensor(n,t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PF(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=z(t,"x","meshgrid",t instanceof Kn?t.dtype:"float32");if(e===void 0)return[r];let a=z(e,"y","meshgrid",e instanceof Kn?e.dtype:"float32");const i=be(r.shape),o=be(a.shape);return n==="xy"?(r=Se(r,[1,-1]),a=Se(a,[-1,1]),[cn(Mu([o,1],r.dtype),r),cn(a,Mu([1,i],a.dtype))]):(r=Se(r,[-1,1]),a=Se(a,[1,-1]),[cn(r,Mu([1,o],r.dtype)),cn(Mu([i,1],a.dtype),a)])}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lpe(t,e){let n=z(t,"a","minimum"),r=z(e,"b","minimum");[n,r]=Xn(n,r),n.dtype==="bool"&&(n=jn(n,"int32"),r=jn(r,"int32")),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(nm,a)}const D4=te({minimum_:lpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function upe(t,e,n){V(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)V(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(e[s][0]>=0&&e[s][0]<=r.shape[s]-a&&e[s][1]>=0&&e[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return ne.runKernel(Ix,o,i)}const AF=te({mirrorPad_:upe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cpe(t,e){let n=z(t,"a","mod"),r=z(e,"b","mod");[n,r]=Xn(n,r);const a={a:n,b:r};return ne.runKernel(rm,a)}const LF=te({mod_:cpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dpe(t,e=null,n=!1){t=z(t,"x","moments");const r=Qt(e,t.shape),a=Hm(t,r,n);let i=a.shape;n||(i=Rr(a.shape,r));const o=fo(Lt(jn(t,"float32"),Se(a,i))),s=Hm(o,r,n);return{mean:a,variance:s}}const DF=te({moments_:dpe});function hpe(t,e,n,r){const a=z(e,"data","multiRNNCell"),i=Pm(n,"c","multiRNNCell"),o=Pm(r,"h","multiRNNCell");let s=a;const l=[];for(let d=0;d<t.length;d++){const h=t[d](s,i[d],o[d]);l.push(h[0]),l.push(h[1]),s=h[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const FF=te({multiRNNCell_:hpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ppe(t,e,n,r=!1){const a=z(t,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const s={logits:o===1?Se(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},u=ne.runKernel(Tx,s,l);return o===1?Se(u,[u.size]):u}const BF=te({multinomial_:ppe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fpe(t,e){let n=z(t,"a","notEqual","string_or_numeric"),r=z(e,"b","notEqual","string_or_numeric");[n,r]=Xn(n,r),Vt(n.shape,r.shape);const a={a:n,b:r};return ne.runKernel(im,a)}const F4=te({notEqual_:fpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gpe(t){const e={x:z(t,"x","onesLike")};return ne.runKernel($x,e)}const zF=te({onesLike_:gpe});function mpe(t,e){const n=z(t,"v1","outerProduct"),r=z(e,"v2","outerProduct");V(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=Se(n,[-1,1]),i=Se(r,[1,-1]);return cn(a,i)}const jF=te({outerProduct_:mpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ype(t,e,n=0){const r=z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return ne.runKernel(Ax,i,a)}const np=te({pad_:ype});function bpe(t,e,n=0){return V(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),np(t,[e],n)}const VF=te({pad1d_:bpe});function vpe(t,e,n=0){return V(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),np(t,e,n)}const UF=te({pad2d_:vpe});function xpe(t,e,n=0){return V(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),np(t,e,n)}const WF=te({pad3d_:xpe});function wpe(t,e,n=0){return V(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),np(t,e,n)}const GF=te({pad4d_:wpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kpe(t,e,n){const r=z(t,"x","spaceToBatchND");V(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),V(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),V(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return ne.runKernel(Qx,a,i)}const B4=te({spaceToBatchND_:kpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Spe(t,e,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const s=z(t,"x","maxPool");let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(ga(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=ho(l.shape,e,i,a,r),d=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=Epe([c.filterHeight,c.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[m,y]=Cpe([c.inHeight,c.inWidth],d,h),v=f?r:"valid",b=f?l:B4(l,d,m),x=(n==="avg"?()=>v4(b,e,i,v,o):()=>A4(b,e,i,v,o))(),w=f?x:x4(x,d,y);return u?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function Cpe(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),o=e.map((c,d)=>(c-i[d]%c)%c),s=a.map((c,d)=>c+o[d]),l=e.map((c,d)=>[r[d],s[d]]),u=e.map((c,d)=>[0,o[d]]);return[l,u]}function Epe(t,e){const n=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,o)=>i-r[o]);return n.map((i,o)=>[r[o],a[o]])}const HF=te({pool_:Spe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ipe(t,e){const n=z(t,"x","prelu"),r=z(e,"alpha","prelu"),a={x:n,alpha:r};return ne.runKernel(Lx,a)}const z4=te({prelu_:Ipe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tpe(t,e=null,n=!1){let r=z(t,"x","prod");r.dtype==="bool"&&(r=jn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return ne.runKernel(Dx,a,i)}const qF=te({prod_:Tpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Npe(t,e,n,r){const a=t.map((c,d)=>z(c,`tensors${d}`,"raggedGather","int32")),i=z(e,"paramsDenseValues","raggedGather"),o=z(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=ne.runKernel(Fx,s,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const KF=te({raggedGather_:Npe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _pe(t,e,n,r,a){const i=z(t,"shape","raggedTensorToTensor","int32"),o=z(e,"values","raggedTensorToTensor"),s=z(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,h)=>z(d,`tensors${h}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:s,rowPartitionTensors:l},c={rowPartitionTypes:a};return ne.runKernel(Bx,u,c)}const XF=te({raggedTensorToTensor_:_pe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ope(t,e,n){const r=be(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return ne.makeTensor(a,t,n)}const YF=te({rand_:Ope});var j4={exports:{}};j4.exports,function(t){(function(e,n,r){function a(l){var u=this,c=s();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new a(l),d=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&i(d,c),h.state=function(){return i(c,{})}),h}function s(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(qa,t,!1)}(j4);var Rpe=j4.exports,V4={exports:{}};V4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(qa,t,!1)}(V4);var $pe=V4.exports,U4={exports:{}};U4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(qa,t,!1)}(U4);var Mpe=U4.exports,W4={exports:{}};W4.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.x,d=l.i,h,f;return h=c[d],h^=h>>>7,f=h^h<<24,h=c[d+1&7],f^=h^h>>>10,h=c[d+3&7],f^=h^h>>>3,h=c[d+4&7],f^=h^h<<7,h=c[d+7&7],h=h^h<<13,f^=h^h<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],c.x=f,c.i=0,h=256;h>0;--h)c.next()}u(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(qa,t,!1)}(W4);var Ppe=W4.exports,G4={exports:{}};G4.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.w,d=l.X,h=l.i,f,m;return l.w=c=c+1640531527|0,m=d[h+34&127],f=d[h=h+1&127],m^=m<<13,f^=f<<17,m^=m>>>15,f^=f>>>12,m=d[h]=m^f,l.i=h,m+(c^c>>>16)|0};function u(c,d){var h,f,m,y,v,b=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),m=0,y=-32;y<x;++y)d&&(f^=d.charCodeAt((y+32)%d.length)),y===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,y>=0&&(v=v+1640531527|0,h=b[y&127]^=f+v,m=h==0?m+1:0);for(m>=128&&(b[(d&&d.length||0)&127]=-1),m=127,y=4*128;y>0;--y)f=b[m+34&127],h=b[m=m+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,b[m]=f^h;c.w=v,c.X=b,c.i=m}u(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(qa,t,!1)}(G4);var Ape=G4.exports,H4={exports:{}};H4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.b,h=l.c,f=l.d,m=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^m,m=m-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^m,l.a=m-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(qa,t,!1)}(H4);var Lpe=H4.exports,QF={exports:{}};const Dpe={},Fpe=Object.freeze(Object.defineProperty({__proto__:null,default:Dpe},Symbol.toStringTag,{value:"Module"})),JF=HU(Fpe);(function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",l=r.pow(a,i),u=r.pow(2,o),c=u*2,d=a-1,h;function f(S,C,E){var _=[];C=C==!0?{entropy:!0}:C||{};var N=b(v(C.entropy?[S,w(n)]:S??x(),3),_),$=new m(_),P=function(){for(var D=$.g(i),j=l,B=0;D<u;)D=(D+B)*a,j*=a,B=$.g(1);for(;D>=c;)D/=2,j/=2,B>>>=1;return(D+B)/j};return P.int32=function(){return $.g(4)|0},P.quick=function(){return $.g(4)/4294967296},P.double=P,b(w($.S),n),(C.pass||E||function(D,j,B,K){return K&&(K.S&&y(K,$),D.state=function(){return y($,{})}),B?(r[s]=D,j):D})(P,N,"global"in C?C.global:this==r,C.state)}function m(S){var C,E=S.length,_=this,N=0,$=_.i=_.j=0,P=_.S=[];for(E||(S=[E++]);N<a;)P[N]=N++;for(N=0;N<a;N++)P[N]=P[$=d&$+S[N%E]+(C=P[N])],P[$]=C;(_.g=function(D){for(var j,B=0,K=_.i,Y=_.j,Z=_.S;D--;)j=Z[K=d&K+1],B=B*a+Z[d&(Z[K]=Z[Y=d&Y+j])+(Z[Y]=j)];return _.i=K,_.j=Y,B})(a)}function y(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function v(S,C){var E=[],_=typeof S,N;if(C&&_=="object")for(N in S)try{E.push(v(S[N],C-1))}catch{}return E.length?E:_=="string"?S:S+"\0"}function b(S,C){for(var E=S+"",_,N=0;N<E.length;)C[d&N]=d&(_^=C[d&N]*19)+E.charCodeAt(N++);return w(C)}function x(){try{var S;return h&&(S=h.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=f;try{h=JF}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:qa,[],Math)})(QF);var Bpe=QF.exports,zpe=Rpe,jpe=$pe,Vpe=Mpe,Upe=Ppe,Wpe=Ape,Gpe=Lpe,cd=Bpe;cd.alea=zpe,cd.xor128=jpe,cd.xorwow=Vpe,cd.xorshift7=Upe,cd.xor4096=Wpe,cd.tychei=Gpe;var Lw=cd;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class q4{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=Lw.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,o;do a=2*this.random()-1,i=2*this.random()-1,o=a*a+i*i;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Hpe{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=Lw.alea(i.toString()),this.randn=new q4(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,o;for(;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class qpe{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Lw.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kpe(t,e,n=1,r="float32",a){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new Hpe(e,n,r,a),o=Et(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const ZF=te({randomGamma_:Kpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xpe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new q4(e,n,r,!1,a),o=Et(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const K4=te({randomNormal_:Xpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ype(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return K4(t,0,1,e,n)}const e9=te({randomStandardNormal_:Ype});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qpe(t,e=0,n=1,r="float32",a){const i=Et(t,r),o=new qpe(e,n,null,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}const X4=te({randomUniform_:Qpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return ne.runKernel(zx,{},a)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jpe(t){const e={x:z(t,"x","reciprocal")};return ne.runKernel(sm,e)}const t9=te({reciprocal_:Jpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zpe(t){const e={x:z(t,"x","relu")};return ne.runKernel(lm,e)}const qm=te({relu_:Zpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function efe(t){const e={x:z(t,"x","relu6")};return ne.runKernel(um,e)}const Y4=te({relu6_:efe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tfe(t,e){const n={x:z(t,"x","reverse")},r={dims:e};return ne.runKernel(Gx,n,r)}const Pu=te({reverse_:tfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nfe(t){const e=z(t,"x","reverse");return V(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Pu(e,0)}const n9=te({reverse1d_:nfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rfe(t,e){const n=z(t,"x","reverse");return V(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Pu(n,e)}const r9=te({reverse2d_:rfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function afe(t,e){const n=z(t,"x","reverse");return V(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Pu(n,e)}const a9=te({reverse3d_:afe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ife(t,e){const n=z(t,"x","reverse");return V(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Pu(n,e)}const i9=te({reverse4d_:ife});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ofe(t){const e={x:z(t,"x","round")};return ne.runKernel(cm,e)}const Q4=te({round_:ofe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sfe(t){const e={x:z(t,"x","rsqrt","float32")};return ne.runKernel(dm,e)}const o9=te({rsqrt_:sfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lfe(t){const e={x:z(t,"x","selu")};return ne.runKernel(hm,e)}const s9=te({selu_:lfe});function ufe(t,e,n,r,a,i=[1,1],o="NHWC"){const s=z(t,"x","separableConv2d"),l=z(e,"depthwiseFilter","separableConv2d"),u=z(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(s.rank===3&&(d=!0,c=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),V(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const h=l.shape[2],f=l.shape[3];V(u.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${u.shape[2]}.`);const m=Ow(c,l,r,a,o,i),y=jm(m,u,1,"valid",o);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const l9=te({separableConv2d_:ufe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function cfe(t,e){const n=z(t,"x","setdiff1d"),r=z(e,"y","setdiff1d");V(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),V(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),V(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),o=new Set(i);let s=0;for(let c=0;c<a.length;c++)o.has(a[c])||s++;const l=new Or([s],n.dtype),u=new Or([s],"int32");for(let c=0,d=0;c<a.length;c++)o.has(a[c])||(l.values[d]=a[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const u9=cfe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dfe(t){const e={x:z(t,"x","sign")};return ne.runKernel(gm,e)}const c9=te({sign_:dfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hfe(t){const e={x:z(t,"x","sin","float32")};return ne.runKernel(pm,e)}const d9=te({sin_:hfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pfe(t){const e={x:z(t,"x","sinh")};return ne.runKernel(fm,e)}const h9=te({sinh_:pfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ffe(t,e,n){const r=z(t,"x","slice1d");return V(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),kn(r,[e],[n])}const p9=te({slice1d_:ffe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gfe(t,e,n){const r=z(t,"x","slice2d");return V(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),kn(r,e,n)}const f9=te({slice2d_:gfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mfe(t,e,n){const r=z(t,"x","slice3d");return V(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),kn(r,e,n)}const g9=te({slice3d_:mfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yfe(t,e,n){const r=z(t,"x","slice4d");return V(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),kn(r,e,n)}const m9=te({slice4d_:yfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bfe(t,e=-1){const n=z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return ne.runKernel(Zx,r,a)}const y9=te({softmax_:bfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vfe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ne.runKernel(ux,e)}const Dw=te({fft_:vfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xfe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ne.runKernel(gx,e)}const Km=te({ifft_:xfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wfe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=Se(t,[n,e]);r=Km(a)}else{const a=[n,2*(e-1)],i=Se(Kh(t),[n,e]),o=Se(Lm(t),[n,e]),s=Pu(kn(i,[0,1],[n,e-2]),1),l=Le(Pu(kn(o,[0,1],[n,e-2]),1),zt(-1)),u=ma([i,s],1),c=ma([o,l],1),d=Se(ml(u,c),[a[0],a[1]]);r=Km(d)}if(r=Kh(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=Se(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const J4=te({irfft_:wfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kfe(t,e,n=0){const r={x:z(t,"x","split")},a={numOrSizeSplits:e,axis:n};return ne.runKernel(Jx,r,a)}const ap=te({split_:kfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sfe(t,e){V(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const m=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,a=kn(t,m,y),n=e}else if(e!=null&&e>n){const m=t.shape.map(y=>y);m[t.shape.length-1]=e-n,a=ma([t,$u(m)],t.shape.length-1),n=e}else a=t;const i=yi(a),o=Se(ml(a,i),[r,n]),s=Dw(o),l=Math.floor(n/2)+1,u=Kh(s),c=Lm(s),d=ap(u,[l,n-l],u.shape.length-1),h=ap(c,[l,n-l],c.shape.length-1),f=a.shape.slice();return f[a.shape.length-1]=l,Se(ml(d[0],h[0]),f)}const Fw=te({rfft_:Sfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cfe(t,e){let n=z(t,"a","squaredDifference"),r=z(e,"b","squaredDifference");[n,r]=Xn(n,r),Vt(n.shape,r.shape);const a={a:n,b:r},i={};return ne.runKernel(vm,a,i)}const Z4=te({squaredDifference_:Cfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Efe(t,e){const n=z(t,"x","squeeze","string_or_numeric");return Se(n,pl(n.shape,e).newShape)}const Xm=te({squeeze_:Efe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ife(t,e=0){const n=Pm(t,"tensors","stack","string_or_numeric");V(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&V(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return ne.runKernel(Px,r,a)}const Cs=te({stack_:Ife});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tfe(t,e=0){const n={x:z(t,"x","step")},r={alpha:e};return ne.runKernel(Cm,n,r)}const eN=te({step_:Tfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nfe(t,e,n,r,a=0,i=0,o=0,s=0,l=0){const u={x:z(t,"x","stridedSlice","string_or_numeric")},c={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return ne.runKernel(iw,u,c)}const b9=te({stridedSlice_:Nfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _fe(t){const e={x:z(t,"x","tan","float32")};return ne.runKernel(wm,e)}const v9=te({tan_:_fe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function go(t,e){Hc(t);const n=vs(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Tu(t,null,n,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ip(t,e,n){if(Hc(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=vs(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x9(t,e,n){if(Hc(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=vs(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w9(t,e,n){if(Hc(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=vs(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k9(t,e,n){if(Hc(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=vs(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ofe(t,e=1,n=!0){const r=z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[s,l]=ne.runKernel(uw,i,o);return{values:s,indices:l}}const S9=te({topk_:Ofe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rfe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new q4(e,n,r,!0,a),o=Et(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const C9=te({truncatedNormal_:Rfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $fe(t,e=0){const n=z(t,"x","unique","string_or_numeric");V(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,o]=ne.runKernel(dw,r,a);return{values:i,indices:o}}const E9=te({unique_:$fe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mfe(t,e,n){const r=z(t,"x","unsortedSegmentSum"),a=z(e,"segmentIds","unsortedSegmentSum","int32");V(qc(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},o={numSegments:n};return ne.runKernel(pw,i,o)}const I9=te({unsortedSegmentSum_:Mfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pfe(t,e=0){const n=z(t,"x","unstack","string_or_numeric");V(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return ne.runKernel(hw,r,a)}const Au=te({unstack_:Pfe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T9(t,e){return Aw(t,e,"right")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N9(t,e=!0,n,r){return ne.makeVariable(t,e,n,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bw(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Et(t,"int32"),a=Et([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),s=i*t.length;a.values.set(o,s)}return a.toTensor()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Afe(t){const e=z(t,"condition","whereAsync","bool"),n=await e.data(),r=Bw(e.shape,n);return t!==e&&e.dispose(),r}const tN=Afe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Lfe(t,e,n){const r=z(t,"tensor","boolMask"),a=z(e,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape;V(o>0,()=>"mask cannot be scalar"),Yr(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=i;y<i+o;y++)l*=s[y];const u=s.slice(0,i).concat([l],s.slice(i+o)),c=Se(r,u),d=Se(a,[-1]),h=await tN(d),f=Xm(h,[1]),m=T4(c,f,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),f.dispose(),c.dispose(),d.dispose(),h.dispose(),m}const _9=Lfe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dfe(t,e,n,r,a=!0){const i=z(t,"v","movingAverage"),o=z(e,"x","movingAverage"),s=z(n,"decay","movingAverage");VL(i,o),V(wn(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=zt(1),u=Lt(l,s);let c=Le(Lt(o,i),u);if(a){V(r!=null,()=>"When using zeroDebias: true, step is required.");const d=z(r,"step","movingAverage");c=Tn(c,Lt(l,Zh(s,d)))}return ft(i,c)}const O9=te({movingAverage_:Dfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ffe(t,e,n){const r=z(t,"indices","scatterND","int32"),a=z(e,"updates","scatterND");i4(a,r,n);const i={indices:r,updates:a},o={shape:n};return ne.runKernel(Hx,i,o)}const R9=te({scatterND_:Ffe});function Bfe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zfe(t,e,n,r=0){const a=z(t,"sparseIndices","sparseToDense","int32"),i=z(e,"sparseValues","sparseToDense","string_or_numeric"),o=z(r,"defaultValue","sparseToDense",i.dtype);Bfe(a,i,n,o);const s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return ne.runKernel(aw,s,l)}const $9=te({sparseToDense_:zfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jfe(t,e){const n=z(e,"indices","gatherND","int32"),r={params:z(t,"x","gatherND","string_or_numeric"),indices:n};return ne.runKernel(fx,r)}const M9=te({gatherND_:jfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vfe(t,e){if(e==null)return t.shape.slice();if(wn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ufe(t,e,n,r){const a=z(t,"x","dropout");if(V(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),V(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Kn?a.clone():a;const i=Vfe(a,n),o=1-e,s=Tn(I4(ft(X4(i,0,1,"float32",r),o)),o);return Le(a,s)}const P9=te({dropout_:Ufe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nN(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function zw(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(o)}return go(a,"float32")}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Wfe(t,e,n=1){const r=z(t,"predictions","inTopK"),a=z(e,"targets","inTopK");V(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),V(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),Yr(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];V(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),s=await a.data(),[l,u]=[o.length/i,i],c=Nr("bool",l);for(let d=0;d<l;d++){const h=d*u,f=o.subarray(h,h+u),m=[];for(let y=0;y<f.length;y++)m.push({value:f[y],index:y});m.sort((y,v)=>v.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(m[y].index===s[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),qo(c,a.shape,"bool")}const A9=Wfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gfe(t,e,n,r,a,i="NHWC",o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]])),V(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];V(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),V(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),po("conv2dDerFilter",a,o);const d={x:s,dy:l},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return ne.runKernel(qv,d,h)}const Hfe=te({conv2DBackpropFilter_:Gfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jw(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Le(t,eN(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Vw(t,e){let n=e;const r=n4(t.shape,e.shape);return r.length>0&&(n=Nn(n,r)),Se(n,t.shape)}function Uw(t,e,n,r){if(e==="linear")return t;if(e==="relu")return qm(t);if(e==="elu")return S4(t);if(e==="relu6")return Y4(t);if(e==="prelu")return z4(t,n);if(e==="leakyrelu")return _4(t,r);if(e==="sigmoid")return sd(t);throw new Error(`Unknown fused activation ${e}.`)}const Ww=(t,e)=>!(t>0)||e==="linear";/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qfe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",Ww(ne.state.gradientDepth,l)===!1){V(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=jm(t,e,n,r,a,i,o);return s!=null&&(E=ft(E,s)),Uw(E,l,u,c)}const d=z(t,"x","conv2d","float32"),h=z(e,"filter","conv2d","float32");let f=d,m=!1;d.rank===3&&(m=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),V(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),V(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),po("fused conv2d",r,o);const y=a==="NHWC"?f.shape[3]:f.shape[1];V(h.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${h.shape[2]}.`),V(ga(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=jr(f.shape,h.shape,n,i,r,o);let b;s!=null&&(b=z(s,"bias","fused conv2d"),[b]=Xn(b,d),a==="NHWC"?Vt(v.outShape,b.shape):(V(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),V(b.shape.length===0||b.shape[0]===v.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let x;if(u!=null){const E=u.shape;if(V(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)V(E[0]===1||E[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${v.outChannels}).`);else if(E.length===3)try{Vt(E,v.outShape)}catch{const _=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(_)}x=z(u,"prelu weights","fused conv2d")}const w=(E,_)=>{V(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[N,$,P,D]=_,j=jw(E,P,l);V(Bm(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const B=tF($.shape,j,N,n,r),K=Hfe($,j,N.shape,n,r),Y=[B,K];if(D!=null){const Z=Vw(D,j);Y.push(Z)}return Y},S={x:f,filter:h,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?Ss((E,_,N)=>{let $=ne.runKernel(Im,S,C);return N([_,E,$]),m&&($=Se($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:w}})(f,h):Ss((E,_,N,$)=>{let P=ne.runKernel(Im,S,C);return $([_,E,P,N]),m&&(P=Se(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(f,h,b)}const Kfe=te({fusedConv2d_:qfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xfe(t,e,n,r,a,i=[1,1],o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return ne.runKernel(rx,u,c)}const Yfe=te({depthwiseConv2dNativeBackpropFilter_:Xfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qfe(t,e,n,r,a,i=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:t},d=ne.runKernel(ax,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Jfe=te({depthwiseConv2dNativeBackpropInput_:Qfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zfe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(Ww(ne.state.gradientDepth,l)===!1){let C=Ow(t,e,n,r,a,i,o);return s!=null&&(C=ft(C,s)),Uw(C,l,u,c)}const d=z(t,"x","depthwiseConv2d","float32"),h=z(e,"filter","depthwiseConv2d","float32");let f=d,m=!1;d.rank===3&&(m=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),V(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),V(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),V(f.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),i==null&&(i=[1,1]),V(ga(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),po("fused depthwiseConv2d",r,o);const y=jr(f.shape,h.shape,n,i,r,o,!0);let v;s!=null&&(v=z(s,"bias","fused conv2d"),[v]=Xn(v,d),Vt(y.outShape,v.shape));let b;u!=null&&(b=z(u,"prelu weights","fused depthwiseConv2d"));const x=(C,E)=>{V(Bm(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[_,N,$,P]=E,D=jw(C,$,l),j=Jfe(N.shape,D,_,n,r,i,o),B=Yfe(N,D,_.shape,n,r,i,o);if(P!=null){const K=Vw(v,D);return[j,B,K]}return[j,B]},w={x:f,filter:h,bias:v,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?Ss((C,E,_)=>{let N=ne.runKernel(Tm,w,S);return _([E,C,N]),m&&(N=Se(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(f,h):Ss((C,E,_,N)=>{let $=ne.runKernel(Tm,w,S);return N([E,C,$,_]),m&&($=Se($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:x}})(f,h,v)}const ege=te({fusedDepthwiseConv2d_:Zfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tge({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(Ww(ne.state.gradientDepth,i)===!1){let P=cn(t,e,n,r);return a!=null&&(P=ft(P,a)),Uw(P,i,o,s)}let l=z(t,"a","fused matMul"),u=z(e,"b","fused matMul");[l,u]=Xn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=l.shape.slice(0,-2),y=u.shape.slice(0,-2),v=be(m),b=be(y);V(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Vt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,f]),w=n?Se(l,[v,c,h]):Se(l,[v,h,c]),S=r?Se(u,[b,f,d]):Se(u,[b,d,f]);let C;a!=null&&(C=z(a,"bias","fused matMul"),[C]=Xn(C,l),Vt(x,C.shape));let E;o!=null&&(E=z(o,"prelu weights","fused matMul"));const _=(P,D)=>{const[j,B,K,Y]=D,Z=jw(Se(P,K.shape),K,i);let H,F;if(!n&&!r?(H=cn(Z,B,!1,!0),F=cn(j,Z,!0,!1)):!n&&r?(H=cn(Z,B,!1,!1),F=cn(Z,j,!0,!1)):n&&!r?(H=cn(B,Z,!1,!0),F=cn(j,Z,!1,!1)):(H=cn(B,Z,!0,!0),F=cn(Z,j,!0,!0)),a!=null){const Q=Vw(Y,Z);return[H,F,Q]}else return[H,F]},N={a:w,b:S,bias:C,preluActivationWeights:E},$={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:s};return a==null?Ss((P,D,j)=>{const B=ne.runKernel(Em,N,$);return j([P,D,B]),{value:Se(B,x),gradFunc:_}})(w,S):Ss((P,D,j,B)=>{const K=ne.runKernel(Em,N,$);return B([P,D,K,j]),{value:Se(K,x),gradFunc:_}})(w,S,C)}const nge=te({fusedMatMul_:tge});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const L9=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Kfe,depthwiseConv2d:ege,matMul:nge},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rge(t){return zw(t,.54,.46)}const age=te({hammingWindow_:rge});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ige(t){return zw(t,.5,.5)}const D9=te({hannWindow_:ige});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oge(t,e,n,r=!1,a=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(kn(t,i,e)),i+=n;if(r)for(;i<t.size;){const s=i+e-t.size,l=ma([kn(t,i,e-s),Jh([s],a)]);o.push(l),i+=n}return o.length===0?ip([],[0,e]):Se(ma(o),[o.length,e])}const F9=te({frame_:oge});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sge(t,e,n,r,a=D9){r==null&&(r=nN(e));const i=F9(t,e,n),o=Le(i,a(e));return Fw(o,r)}const lge=te({stft_:sge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uge(t,e,n,r,a="bilinear",i=0){const o=z(t,"image","cropAndResize"),s=z(e,"boxes","cropAndResize","float32"),l=z(n,"boxInd","cropAndResize","int32"),u=s.shape[0];V(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),V(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),V(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),V(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),V(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:o,boxes:s,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return ne.runKernel(Zv,c,d)}const cge=te({cropAndResize_:uge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dge(t){const e=z(t,"image","flipLeftRight","float32");V(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ne.runKernel(dx,n,{})}const hge=te({flipLeftRight_:dge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pge(t){const e=z(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];V(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),V(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,ep(e,a)}const fge=te({grayscaleToRGB_:pge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gge(t,e,n=0,r=.5){const a=z(t,"image","rotateWithOffset","float32");V(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},o={radians:e,fillValue:n,center:r};return ne.runKernel(mw,i,o)}const mge=te({rotateWithOffset_:gge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function op(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),V(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),V(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),V(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),V(e.rank===1,()=>"scores must be a 1D tensor"),V(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),V(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppression","float32"),o=z(e,"scores","nonMaxSuppression","float32"),s=op(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return ne.runKernel(_x,{boxes:i,scores:o},l)}const bge=te({nonMaxSuppression_:yge});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vge(t,e,n){const r=xge(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function xge(t,e,n){return kge(t,e,n||wge)}function wge(t,e){return t>e?1:t<e?-1:0}function kge(t,e,n){let r=0,a=t.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);const s=n(e,t[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gw(t,e,n,r,a){return rN(t,e,n,r,a,0)}function Hw(t,e,n,r,a,i){return rN(t,e,n,r,a,0,!1,i,!0)}function qw(t,e,n,r,a,i){return rN(t,e,n,r,a,i,!0)}function rN(t,e,n,r,a,i,o=!1,s=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>a&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(B9);const c=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&u.length>0;){const v=u.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=v;if(b<a)break;let S=!1;for(let C=d.length-1;C>=w;--C){const E=Sge(t,x,d[C]);if(E>=r){S=!0;break}if(v.score=v.score*Cge(r,c,E),v.score<=a)break}v.suppressBeginIndex=d.length,S||(v.score===b?(d.push(x),h.push(v.score)):v.score>a&&vge(u,v,B9))}const f=d.length,m=n-f;s&&m>0&&(d.push(...new Array(m).fill(0)),h.push(...new Array(m).fill(0)));const y={selectedIndices:d};return o&&(y.selectedScores=h),l&&(y.validOutputs=f),y}function Sge(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),f=(s-i)*(l-o),m=(d-u)*(h-c);if(f<=0||m<=0)return 0;const y=Math.max(i,u),v=Math.max(o,c),b=Math.min(s,d),x=Math.min(l,h),w=Math.max(b-y,0)*Math.max(x-v,0);return w/(f+m-w)}function Cge(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function B9(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Ege(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppressionAsync"),o=z(e,"scores","nonMaxSuppressionAsync"),s=op(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:d}=Gw(u,c,n,r,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),go(d,"int32")}const Ige=Ege;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=op(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=ne.runKernel(Rx,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const Nge=te({nonMaxSuppressionWithScore_:Tge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function _ge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=op(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:h,selectedScores:f}=qw(c,d,n,r,a,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:go(h,"int32"),selectedScores:go(f)}}const Oge=_ge;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=op(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,h={boxes:o,scores:s},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},m=ne.runKernel(Ox,h,f);return{selectedIndices:m[0],validOutputs:m[1]}}const $ge=te({nonMaxSuppressionPadded_:Rge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Mge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=op(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:m,validOutputs:y}=Hw(h,f,u,c,d,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:go(m,"int32"),validOutputs:zt(y,"int32")}}const Pge=Mge;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Age(t,e,n=!1,r=!1){const a=z(t,"images","resizeBilinear");V(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),V(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),V(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=ne.runKernel(Wx,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Lge=te({resizeBilinear_:Age});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dge(t,e,n=!1,r=!1){const a=z(t,"images","resizeNearestNeighbor");V(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),V(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),V(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=ne.runKernel(Ux,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Fge=te({resizeNearestNeighbor_:Dge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* https://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bge(t,e="binary",n=!1,r=.5){const a=z(t,"image","threshold"),i=.2989,o=.587,s=.114,l=a.shape[0]*a.shape[1];let u=Le(go([r]),255),c,d,h,f;if(V(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),V(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),V(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),V(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,d,h]=ap(a,[1,1,1],-1);const y=Le(c,i),v=Le(d,o),b=Le(h,s);f=ft(ft(y,v),b)}else f=t;if(e==="otsu"){const y=w4(jn(Q4(f),"int32"),qo([]),256);u=zge(y,l)}const m=n?$w(f,u):Wm(f,u);return jn(Le(m,255),"int32")}function zge(t,e){let n=go([-1]),r=go([0]),a=go([0]),i,o,s,l,u,c;for(let d=0;d<t.size-1;d++){i=kn(t,0,d+1),o=kn(t,d+1),u=Tn(Nn(i),e),c=Tn(Nn(o),e);const h=Nn(Le(i,rp(0,i.size)));s=Tn(h,Nn(i));const f=Jh(o.shape,i.size),m=ft(rp(0,o.size),f),y=Le(o,m);l=Tn(Nn(y),Nn(o));const v=Lt(s,l),b=Lt(s,l),x=Le(u,c);a=Le(Le(x,v),b);const w=Wm(a,r);r=ld(w,a,r),n=ld(w,go([d]),n)}return n}const jge=te({threshold_:Bge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vge(t,e,n="nearest",r="constant",a=0,i){const o=z(t,"image","transform","float32"),s=z(e,"transforms","transform","float32");V(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),V(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return ne.runKernel(cw,l,u)}const Uge=te({transform_:Vge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wge(t,e,n){V(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),V(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=z(t,"a","bandPart");V(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const s=Se(rp(0,i,1,"int32"),[-1,1]),l=rp(0,o,1,"int32"),u=Lt(s,l),c=Gm($w(u,zt(+e,"int32")),N4(u,zt(-n,"int32"))),d=$u([i,o],r.dtype);return Se(Cs(Au(Se(r,[-1,i,o])).map(h=>ld(c,h,d))),a)}const Gge=te({bandPart_:Wge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hge(t){let e;if(Array.isArray(t)){e=!1,V(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)V(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=ap(t,t.shape[0],0).map(a=>Xm(a,[0]));V(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(ne.tidy(()=>{let i=r[a];if(a>0)for(let o=0;o<a;++o){const s=Le(Nn(Le(n[o],i)),n[o]);i=Lt(i,s)}return Tn(i,Um(i,"euclidean"))}));return e?Cs(n,0):n}const qge=te({gramSchmidt_:Hge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kge(t,e=!1){if(V(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return z9(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Au(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{const[u,c]=z9(l,e);a.push(u),i.push(c)});const o=Se(Cs(a,0),t.shape),s=Se(Cs(i,0),t.shape);return[o,s]}}function z9(t,e=!1){return ne.tidy(()=>{V(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=E4(n),i=bl(t);const o=ip([[1]],[1,1]);let s=bl(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=s,h=a;[s,i,a]=ne.tidy(()=>{const f=kn(i,[u,u],[n-u,1]),m=Um(f),y=kn(i,[u,u],[1,1]),v=ld(Wm(y,0),ip([[-1]]),ip([[1]])),b=Lt(y,Le(v,m)),x=Tn(f,b);x.shape[0]===1?s=bl(o):s=ma([o,kn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=ws(Tn(cn(v,b),m)),S=kn(i,[u,0],[n-u,r]),C=Le(w,s),E=Dm(s);if(u===0)i=Lt(S,cn(C,cn(E,S)));else{const $=Lt(S,cn(C,cn(E,S)));i=ma([kn(i,[0,0],[u,r]),$],0)}const _=Dm(C),N=kn(a,[0,u],[n,a.shape[1]-u]);if(u===0)a=Lt(N,cn(cn(N,s),_));else{const $=Lt(N,cn(cn(N,s),_));a=ma([kn(a,[0,0],[n,u]),$],1)}return[s,i,a]}),fa([c,d,h])}return!e&&n>r&&(a=kn(a,[0,0],[n,r]),i=kn(i,[0,0],[r,r])),[a,i]})}const Xge=te({qr_:Kge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Aa;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Aa||(Aa={}));function Yge(t,e,n=Aa.SUM_BY_NONZERO_WEIGHTS){const r=z(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=z(e,"weights","computeWeightedLoss"));const i=a==null?r:Le(r,a);if(n===Aa.NONE)return i;if(n===Aa.SUM)return Nn(i);if(n===Aa.MEAN){if(a==null)return Hm(i);{const o=r.size/a.size,s=Tn(Nn(i),Nn(a));return o>1?Tn(s,zt(o)):s}}if(n===Aa.SUM_BY_NONZERO_WEIGHTS){if(a==null)return Tn(Nn(i),zt(r.size));{const o=Le(a,Mu(r.shape)),s=jn(Nn(F4(o,zt(0))),"float32");return Tn(Nn(i),s)}}throw Error(`Unknown reduction: ${n}`)}const Sl=te({computeWeightedLoss_:Yge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qge(t,e,n,r=Aa.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","absoluteDifference"),i=z(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=z(n,"weights","absoluteDifference")),Yr(a.shape,i.shape,"Error in absoluteDifference: ");const s=mi(Lt(a,i));return Sl(s,o,r)}const Jge=te({absoluteDifference_:Qge});function Zge(t,e,n,r,a=Aa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","cosineDistance"),o=z(e,"predictions","cosineDistance");let s=null;r!=null&&(s=z(r,"weights","cosineDistance")),Yr(i.shape,o.shape,"Error in cosineDistance: ");const l=zt(1),u=Lt(l,Nn(Le(i,o),n,!0));return Sl(u,s,a)}const eme=te({cosineDistance_:Zge});function tme(t,e,n,r=Aa.SUM_BY_NONZERO_WEIGHTS){let a=z(t,"labels","hingeLoss");const i=z(e,"predictions","hingeLoss");let o=null;n!=null&&(o=z(n,"weights","hingeLoss")),Yr(a.shape,i.shape,"Error in hingeLoss: ");const s=zt(1);a=Lt(Le(zt(2),a),s);const l=qm(Lt(s,Le(a,i)));return Sl(l,o,r)}const nme=te({hingeLoss_:tme});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rme(t,e,n,r=1,a=Aa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","huberLoss"),o=z(e,"predictions","huberLoss");let s=null;n!=null&&(s=z(n,"weights","huberLoss")),Yr(i.shape,o.shape,"Error in huberLoss: ");const l=zt(r),u=mi(Lt(o,i)),c=D4(u,l),d=Lt(u,c),h=ft(Le(zt(.5),fo(c)),Le(l,d));return Sl(h,s,a)}const ame=te({huberLoss_:rme});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ime(t,e,n,r=1e-7,a=Aa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","logLoss"),o=z(e,"predictions","logLoss");let s=null;n!=null&&(s=z(n,"weights","logLoss")),Yr(i.shape,o.shape,"Error in logLoss: ");const l=zt(1),u=zt(r),c=ws(Le(i,tp(ft(o,u)))),d=Le(Lt(l,i),tp(ft(Lt(l,o),u))),h=Lt(c,d);return Sl(h,s,a)}const ome=te({logLoss_:ime});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sme(t,e,n,r=Aa.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","meanSquaredError"),i=z(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=z(n,"weights","meanSquaredError")),Yr(a.shape,i.shape,"Error in meanSquaredError: ");const s=Z4(a,i);return Sl(s,o,r)}const lme=te({meanSquaredError_:sme});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ume(t,e){const n=z(t,"labels","sigmoidCrossEntropyWithLogits"),r=z(e,"logits","sigmoidCrossEntropyWithLogits");Yr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=qm(r),i=Le(r,n),o=O4(Ru(ws(mi(r))));return ft(Lt(a,i),o)}function cme(t,e,n,r=0,a=Aa.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"multiClassLabels","sigmoidCrossEntropy");const o=z(e,"logits","sigmoidCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","sigmoidCrossEntropy")),Yr(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=zt(r),c=zt(1),d=zt(.5);i=ft(Le(i,Lt(c,u)),Le(d,u))}const l=ume(i,o);return Sl(l,s,a)}const dme=te({sigmoidCrossEntropy_:cme});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hme(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Ss((r,a,i)=>{const o=$4(a,[n],!0),s=Lt(jn(a,"float32"),o);i([r,s]);const l=ws(Le(s,r));return{value:Nn(l,[n]),gradFunc:(u,c)=>{const[d,h]=c,f=Rr(u.shape,[n]);return[Le(Se(u,f),Lt(jn(d,"float32"),Ru(h))),Le(Se(u,f),Lt(Ru(h),jn(d,"float32")))]}}})(t,e)}function pme(t,e,n,r=0,a=Aa.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"onehotLabels","softmaxCrossEntropy");const o=z(e,"logits","softmaxCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","softmaxCrossEntropy")),Yr(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=zt(r),c=zt(1),d=zt(i.shape[1]);i=ft(Le(i,Lt(c,u)),Tn(u,d))}const l=hme(i,o);return Sl(l,s,a)}const fme=te({softmaxCrossEntropy_:pme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gme(t,e,n,r){const a=z(t,"indices","sparseFillEmptyRows","int32"),i=z(e,"values","sparseFillEmptyRows"),o=z(n,"denseShape","sparseFillEmptyRows","int32"),s=z(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:a,values:i,denseShape:o,defaultValue:s},u=ne.runKernel(ew,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const mme=te({sparseFillEmptyRows_:gme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yme(t,e,n){const r=z(t,"inputIndices","sparseReshape","int32"),a=z(e,"inputShape","sparseReshape","int32"),i=z(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:a,newShape:i},s=ne.runKernel(tw,o);return{outputIndices:s[0],outputShape:s[1]}}const bme=te({sparseReshape_:yme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vme(t,e,n){const r=z(t,"data","sparseSegmentMean"),a=z(e,"indices","sparseSegmentMean","int32"),i=z(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return ne.runKernel(nw,o)}const xme=te({sparseSegmentMean_:vme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wme(t,e,n){const r=z(t,"data","sparseSegmentSum"),a=z(e,"indices","sparseSegmentSum","int32"),i=z(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return ne.runKernel(rw,o)}const kme=te({sparseSegmentSum_:wme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sme(t,e,n,r,a,i,o,s){const l=z(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=z(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:u},h=ne.runKernel(ow,d,c);return{nGrams:h[0],nGramsSplits:h[1]}}const Cme=te({stringNGrams_:Sme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Eme(t,e,n=!0){const r=z(t,"input","stringSplit","string"),a=z(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},o={input:r,delimiter:a},s=ne.runKernel(sw,o,i);return{indices:s[0],values:s[1],shape:s[2]}}const Ime=te({stringSplit_:Eme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tme(t,e){const n=z(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return ne.runKernel(lw,a,r)}const Nme=te({stringToHashBucketFast_:Tme});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j9={fft:Dw,ifft:Km,rfft:Fw,irfft:J4},V9={hammingWindow:age,hannWindow:D9,frame:F9,stft:lge},aN={flipLeftRight:hge,grayscaleToRGB:fge,resizeNearestNeighbor:Fge,resizeBilinear:Lge,rotateWithOffset:mge,cropAndResize:cge,nonMaxSuppression:bge,nonMaxSuppressionAsync:Ige,nonMaxSuppressionWithScore:Nge,nonMaxSuppressionWithScoreAsync:Oge,nonMaxSuppressionPadded:$ge,nonMaxSuppressionPaddedAsync:Pge,threshold:jge,transform:Uge},U9={bandPart:Gge,gramSchmidt:qge,qr:Xge},W9={absoluteDifference:Jge,computeWeightedLoss:Sl,cosineDistance:eme,hingeLoss:nme,huberLoss:ame,logLoss:ome,meanSquaredError:lme,sigmoidCrossEntropy:dme,softmaxCrossEntropy:fme},G9={sparseFillEmptyRows:mme,sparseReshape:bme,sparseSegmentMean:xme,sparseSegmentSum:kme},H9={stringNGrams:Cme,stringSplit:Ime,stringToHashBucketFast:Nme};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Lu extends TD{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(o)}else this.applyGradients(i);return fa(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return TF(e,n)}dispose(){this.iterations_!=null&&fa(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:zt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Lu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Kw extends Lu{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=ne.registeredVariables[n],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accum_grad`,variable:Kt(()=>yi(a).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${n}/accum_var`,variable:Kt(()=>yi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedGrads[r].variable,l=this.accumulatedUpdates[r].variable;Kt(()=>{const u=ft(Le(s,this.rho),Le(fo(o),1-this.rho)),c=Le(Tn(ks(ft(l,this.epsilon)),ks(ft(s,this.epsilon))),o),d=ft(Le(l,this.rho),Le(fo(c),1-this.rho));s.assign(u),l.assign(d);const h=ft(Le(c,-this.learningRate),a);a.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(fa(this.accumulatedGrads.map(e=>e.variable)),fa(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}Kw.className="Adadelta",_u(Kw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Xw extends Lu{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=ne.registeredVariables[n];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accumulator`,variable:Kt(()=>Jh(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[n];if(i==null)return;const o=this.accumulatedGrads[r].variable;Kt(()=>{const s=ft(o,fo(i));o.assign(s);const l=ft(Le(Tn(i,ks(ft(s,ne.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&fa(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}Xw.className="Adagrad",_u(Xw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yw extends Lu{constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Kt(()=>{this.accBeta1=zt(n).variable(),this.accBeta2=zt(r).variable()}),a==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Kt(()=>{const r=Lt(1,this.accBeta1),a=Lt(1,this.accBeta2);n.forEach((i,o)=>{const s=ne.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Kt(()=>yi(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:Kt(()=>yi(s).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,h=ft(Le(c,this.beta1),Le(u,1-this.beta1)),f=ft(Le(d,this.beta2),Le(fo(u),1-this.beta2)),m=Tn(h,r),y=Tn(f,a);c.assign(h),d.assign(f);const v=ft(Le(Tn(m,ft(ks(y),this.epsilon)),-this.learningRate),s);s.assign(v)}),this.accBeta1.assign(Le(this.accBeta1,this.beta1)),this.accBeta2.assign(Le(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&fa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&fa(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Kt(()=>{this.accBeta1.assign(Zh(this.beta1,this.iterations_+1)),this.accBeta2.assign(Zh(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}Yw.className="Adam",_u(Yw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Qw extends Lu{constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Kt(()=>{this.iteration=zt(0).variable(),this.accBeta1=zt(n).variable()}),a==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Kt(()=>{const r=Lt(1,this.accBeta1),a=Tn(-this.learningRate,ft(Le(this.iteration,this.decay),1));n.forEach((i,o)=>{const s=ne.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:yi(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:yi(s).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,h=ft(Le(c,this.beta1),Le(u,1-this.beta1)),f=Le(d,this.beta2),m=mi(u),y=L4(f,m);c.assign(h),d.assign(y);const v=ft(Le(Tn(a,r),Tn(h,ft(y,this.epsilon))),s);s.assign(v)}),this.iteration.assign(ft(this.iteration,1)),this.accBeta1.assign(Le(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&fa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&fa(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}Qw.className="Adamax",_u(Qw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Ym extends Lu{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=Array.isArray(e)?e[r].tensor:e[n];if(a==null)return;const i=ne.registeredVariables[n];Kt(()=>{const o=ft(Le(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=xs(zt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}Ym.className="SGD",_u(Ym);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Jw extends Ym{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=zt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=ne.registeredVariables[n];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${n}/momentum`,variable:Kt(()=>yi(a).variable(!1))});const i=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];o!=null&&Kt(()=>{let s;const l=ft(Le(this.m,i),o);this.useNesterov?s=ft(Le(this.c,ft(o,Le(l,this.m))),a):s=ft(Le(this.c,l),a),i.assign(l),a.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&fa(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}Jw.className="Momentum",_u(Jw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Zw extends Lu{constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=ne.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=ne.registeredVariables[n],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${n}/rms`,variable:Kt(()=>yi(a).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${n}/momentum`,variable:Kt(()=>yi(a).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${n}/mg`,variable:Kt(()=>yi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedMeanSquares[r].variable,l=this.accumulatedMoments[r].variable;Kt(()=>{const u=ft(Le(s,this.decay),Le(fo(o),1-this.decay));if(this.centered){const c=this.accumulatedMeanGrads[r].variable,d=ft(Le(c,this.decay),Le(o,1-this.decay)),h=Tn(Le(o,this.learningRate),ks(Lt(u,ft(fo(d),this.epsilon)))),f=ft(Le(l,this.momentum),h);s.assign(u),c.assign(d),l.assign(f);const m=Lt(a,f);a.assign(m)}else{const c=ft(Le(s,this.decay),Le(fo(o),1-this.decay)),d=ft(Le(l,this.momentum),Tn(Le(o,this.learningRate),ks(ft(c,this.epsilon))));s.assign(c),l.assign(d);const h=Lt(a,d);a.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&fa(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&fa(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&fa(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}Zw.className="RMSProp",_u(Zw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Du{static sgd(e){return new Ym(e)}static momentum(e,n,r=!1){return new Jw(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new Zw(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new Yw(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new Kw(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new Qw(e,n,r,a,i)}static adagrad(e,n=.1){return new Xw(e,n)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _me={sgd:Du.sgd,momentum:Du.momentum,adadelta:Du.adadelta,adagrad:Du.adagrad,rmsprop:Du.rmsprop,adamax:Du.adamax,adam:Du.adam};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ome=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function q9(){return new Promise(t=>Ome(()=>t()))}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iN(t,e){const n=t[0].length;t.forEach((a,i)=>{V(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),V(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let o=0;o<n;o++)V(o===e||a[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Es(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Ko;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Ko||(Ko={}));function K9(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${s}`)}else r[o]=i}return r}function X9(t){const e={FIRST_DIM_SIZE:Ko.FIRST_DIM_SIZE,VALUE_ROWIDS:Ko.VALUE_ROWIDS,ROW_LENGTHS:Ko.ROW_LENGTHS,ROW_SPLITS:Ko.ROW_SPLITS,ROW_LIMITS:Ko.ROW_LIMITS,ROW_STARTS:Ko.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function Y9(t){return t.length===0?0:t[0]===Ko.FIRST_DIM_SIZE?t.length-1:t.length}function Q9(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],o=e[a+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${o}`)}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oN=30;function e2(t){return t<=oN?t:_v(t,Math.floor(Math.sqrt(t)))}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sN(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qm(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(i+1))}return a}function Jm(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):a.push(o);r.push(...a),r.push(0),r.push(...i)}return r}function Zm(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function lN(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function uN(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cN=1.7580993408473768,dN=1.0507009873554805;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hN=.3275911,pN=.254829592,fN=-.284496736,gN=1.421413741,mN=-1.453152027,yN=1.061405429;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function J9(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Z9(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function e7(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function bN(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function t7(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function n7(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function r7(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vN="->",Rme=/->/g,a7=",",i7="...";function xN(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Rme,"").length)/vN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${vN}").`);const[r,a]=t.split(vN);V(r.indexOf(i7)===-1,()=>`The ellipsis notation ("${i7}") is not supported yet.`);const i=r.split(a7),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<a.length;++h){const f=a[h];if(!i.some(m=>m.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);s.indexOf(f)===-1&&s.push(f)}for(let h=0;h<r.length;++h){const f=r[h];s.indexOf(f)===-1&&f!==a7&&s.push(f)}const l=new Array(i.length);for(let h=0;h<o;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<i[h].length;++f)l[h].push(s.indexOf(i[h][f]))}const u=s.length,c=a.length,d=[];for(let h=c;h<u;++h)d.push(h);return{allDims:s,summedDims:d,idDims:l}}function wN(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function kN(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let o=0;o<e[a].length;++o)r[e[a][o]]===void 0?r[e[a][o]]=i[o]:V(r[e[a][o]]===i[o],()=>`Expected dimension ${r[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function SN(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let o=0;o<a;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const s=n[o],l=$me(e,s);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function CN(t){return t.every((e,n)=>e===n)}function $me(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function EN(t,e,n=0){let r=[];if(typeof e=="number")V(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);V(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[i]=t.shape[n]-o}V(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o7(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function s7(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function l7(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u7(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function c7(t,e){return`size ${t} must be non-negative, not ${e}`}function d7(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function h7(t,e){const n=be(t),r=be(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function p7(t,e){const n=be(t),r=be(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function IN(){return"segment ids must be >= 0"}function f7(){return"segment ids are not increasing"}function g7(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function m7(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y7(t,e){let n=!1,r;for(t<=oN?(r=t,n=!0):r=_v(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=_v(t,r+1);return r}function b7(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function TN(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<a;d++)s.push(e.shape[d]);for(let d=n+1;d<i;d++)s.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}const Mme=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:TN,computeOutShape:b7,segOpComputeOptimalWindowSize:y7},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dd(t){try{return t.map(e=>gl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function v7(t){return t.map(e=>bs(e))}const x7=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:pN,ERF_A2:fN,ERF_A3:gN,ERF_A4:mN,ERF_A5:yN,ERF_P:hN,PARALLELIZE_THRESHOLD:oN,get RowPartitionType(){return Ko},SELU_SCALE:dN,SELU_SCALEALPHA:cN,applyActivation:Uw,assertAndGetBroadcastShape:Vt,assertAxesAreInnerMostDims:Zr,assertParamsConsistent:iN,assignToTypedArray:t7,axesAreInnerMostDims:C4,calculateShapes:Xh,checkEinsumDimSizes:kN,checkPadOnDimRoundingMode:po,combineLocations:yF,combineRaggedTensorToTensorShapes:K9,complexWithEvenIndex:Z9,complexWithOddIndex:e7,computeConv2DInfo:jr,computeConv3DInfo:Ou,computeDefaultPad:y4,computeDilation2DInfo:Fm,computeOptimalWindowSize:e2,computeOutAndReduceShapes:Jr,computeOutShape:Es,computePool2DInfo:ho,computePool3DInfo:xl,convertConv2DDataFormat:wl,decodeEinsumEquation:xN,eitherStridesOrDilationsAreOne:ga,expandShapeToKeepDim:Rr,exponent:r7,exponents:n7,fromStringArrayToUint8:v7,fromUint8ToStringArray:dd,getAxesPermutation:pr,getBroadcastDims:ad,getComplexWithIndex:bN,getEinsumComputePath:SN,getEinsumPermutation:wN,getFusedBiasGradient:Vw,getFusedDyActivation:jw,getImageCenter:sN,getInnerMostAxes:fr,getPermuted:Jm,getRaggedRank:Y9,getReductionAxes:n4,getReshaped:Qm,getReshapedPermuted:Zm,getRowPartitionTypesHelper:X9,getSliceBeginCoords:lN,getSliceSize:uN,getSparseFillEmptyRowsIndicesDenseShapeMismatch:o7,getSparseFillEmptyRowsNegativeIndexErrorMessage:s7,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:l7,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:d7,getSparseReshapeInputOutputMismatchErrorMessage:p7,getSparseReshapeInputOutputMultipleErrorMessage:h7,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:u7,getSparseReshapeNegativeOutputDimErrorMessage:c7,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:m7,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:IN,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:f7,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:g7,getUndoAxesPermutation:Vm,isIdentityPermutation:CN,log:Rle,mergeRealAndImagArrays:Cl,prepareAndValidate:Tw,prepareSplitSize:EN,segment_util:Mme,shouldFuse:Ww,slice_util:ID,splitRealAndImagArrays:J9,tupleValuesAreOne:Bm,upcastType:Ja,validateDefaultValueShape:Q9,validateInput:i4,validateUpdateShape:a4,warn:Bi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pme=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:Gw,nonMaxSuppressionV4Impl:Hw,nonMaxSuppressionV5Impl:qw,whereImpl:Bw},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ame=Object.freeze(Object.defineProperty({__proto__:null,Abs:Rv,Acos:kg,Acosh:Sg,AdadeltaOptimizer:Kw,AdagradOptimizer:Xw,AdamOptimizer:Yw,AdamaxOptimizer:Qw,Add:zh,AddN:$v,All:Mv,Any:Pv,ArgMax:Av,ArgMin:Lv,Asin:Cg,Asinh:Eg,Atan:Ig,Atan2:Ng,Atanh:Tg,AvgPool:Dv,AvgPool3D:Fv,AvgPool3DGrad:pT,AvgPoolGrad:hT,BatchMatMul:Bv,BatchToSpaceND:zv,Bincount:jv,BroadcastArgs:Vv,BroadcastTo:Ele,Cast:_g,Ceil:Og,ClipByValue:Rg,Complex:Uv,ComplexAbs:Wv,Concat:Gv,Conv2D:Hv,Conv2DBackpropFilter:qv,Conv2DBackpropInput:Kv,Conv3D:Xv,Conv3DBackpropFilterV2:fT,Conv3DBackpropInputV2:Yv,Cos:$g,Cosh:Mg,CropAndResize:Zv,Cumprod:Qv,Cumsum:Jv,DataStorage:rT,DenseBincount:ex,DepthToSpace:tx,DepthwiseConv2dNative:nx,DepthwiseConv2dNativeBackpropFilter:rx,DepthwiseConv2dNativeBackpropInput:ax,Diag:ix,Dilation2D:ox,Dilation2DBackpropFilter:mT,Dilation2DBackpropInput:gT,get ENV(){return uT},Einsum:sx,Elu:Ag,EluGrad:yT,Environment:SL,Equal:Dg,Erf:Lg,Exp:Fg,ExpandDims:lx,Expm1:Bg,FFT:ux,Fill:cx,FlipLeftRight:dx,Floor:zg,FloorDiv:jg,FromPixels:gw,FusedBatchNorm:hx,FusedConv2D:Im,FusedDepthwiseConv2D:Tm,GatherNd:fx,GatherV2:px,Greater:Vg,GreaterEqual:Ug,IFFT:gx,Identity:Wg,Imag:mx,IsFinite:Gg,IsInf:Hg,IsNan:qg,KernelBackend:Ev,LRN:vx,LRNGrad:bT,LeakyRelu:yx,Less:Kg,LessEqual:Xg,LinSpace:bx,Log:Yg,Log1p:Qg,LogSoftmax:Tle,LogicalAnd:Jg,LogicalNot:Zg,LogicalOr:em,LogicalXor:Ile,LowerBound:Nle,Max:xx,MaxPool:wx,MaxPool3D:kx,MaxPool3DGrad:xT,MaxPoolGrad:vT,MaxPoolWithArgmax:Sx,Maximum:tm,Mean:Cx,Min:Ex,Minimum:nm,MirrorPad:Ix,Mod:rm,MomentumOptimizer:Jw,Multinomial:Tx,Multiply:am,Neg:Nx,NonMaxSuppressionV3:_x,NonMaxSuppressionV4:Ox,NonMaxSuppressionV5:Rx,NotEqual:im,OP_SCOPE_SUFFIX:zT,OneHot:Mx,OnesLike:$x,Optimizer:Lu,OptimizerConstructors:Du,Pack:Px,PadV2:Ax,Pool:_le,Pow:om,Prelu:Lx,Prod:Dx,RMSPropOptimizer:Zw,RaggedGather:Fx,RaggedTensorToTensor:Bx,Range:zx,get Rank(){return OT},Real:jx,RealDiv:Pg,Reciprocal:sm,get Reduction(){return Aa},Relu:lm,Relu6:um,Reshape:Vx,ResizeBilinear:Wx,ResizeBilinearGrad:kT,ResizeNearestNeighbor:Ux,ResizeNearestNeighborGrad:wT,Reverse:Gx,RotateWithOffset:mw,Round:cm,Rsqrt:dm,SGDOptimizer:Ym,ScatterNd:Hx,SearchSorted:qx,Select:Kx,Selu:hm,Sigmoid:mm,Sign:gm,Sin:pm,Sinh:fm,Slice:Xx,Softmax:Zx,Softplus:ym,SpaceToBatchND:Qx,SparseFillEmptyRows:ew,SparseReshape:tw,SparseSegmentMean:nw,SparseSegmentSum:rw,SparseToDense:aw,SplitV:Jx,Sqrt:bm,Square:ST,SquaredDifference:vm,Step:Cm,StridedSlice:iw,StringNGrams:ow,StringSplit:sw,StringToHashBucketFast:lw,Sub:xm,Sum:Yx,Tan:wm,Tanh:km,Tensor:Kn,TensorBuffer:Or,Tile:Sm,TopK:uw,Transform:cw,Transpose:jh,Unique:dw,Unpack:hw,UnsortedSegmentSum:pw,UpperBound:Ole,Variable:Mm,ZerosLike:fw,_FusedMatMul:Em,abs:mi,acos:OD,acosh:RD,add:ft,addN:$D,all:MD,any:PD,argMax:AD,argMin:LD,asin:DD,asinh:FD,atan:BD,atan2:zD,atanh:jD,avgPool:v4,avgPool3d:VD,backend:kce,backend_util:x7,basicLSTMCell:UD,batchNorm:zm,batchNorm2d:WD,batchNorm3d:GD,batchNorm4d:HD,batchToSpaceND:x4,bincount:w4,booleanMaskAsync:_9,broadcastArgs:qD,broadcastTo:Qh,broadcast_util:Rce,browser:Dce,buffer:Et,cast:jn,ceil:KD,clipByValue:XD,clone:bl,complex:ml,concat:ma,concat1d:YD,concat2d:QD,concat3d:JD,concat4d:ZD,conv1d:eF,conv2d:jm,conv2dTranspose:nF,conv3d:rF,conv3dTranspose:aF,copyRegisteredKernels:Ale,cos:iF,cosh:oF,cosineWindow:zw,cumprod:sF,cumsum:lF,customGrad:Ss,denseBincount:uF,deprecationWarn:dce,depthToSpace:cF,depthwiseConv2d:Ow,device_util:uue,diag:dF,dilation2d:hF,disableDeprecationWarnings:cce,dispose:fa,disposeVariables:hce,div:Tn,divNoNan:pF,dot:fF,dropout:P9,einsum:gF,elu:S4,enableDebugMode:uce,enableProdMode:lce,enclosingPowerOfTwo:nN,engine:vl,env:fe,equal:k4,erf:mF,euclideanNorm:vF,exp:Ru,expandDims:kl,expm1:xF,eye:E4,fft:Dw,fill:Jh,findBackend:xce,findBackendFactory:wce,floor:I4,floorDiv:m4,fused:L9,gather:T4,gatherND:M9,gather_util:Fce,getBackend:bce,getGradient:CT,getKernel:yw,getKernelsForBackend:bw,grad:Uhe,grads:Whe,greater:Wm,greaterEqual:N4,ifft:Km,imag:Lm,image:aN,inTopKAsync:A9,io:e4,irfft:J4,isFinite:wF,isInf:kF,isNaN:SF,keep:xs,kernel_impls:Pme,leakyRelu:_4,less:CF,lessEqual:$w,linalg:U9,linspace:EF,localResponseNormalization:IF,log:tp,log1p:O4,logSigmoid:NF,logSoftmax:_F,logSumExp:$4,logicalAnd:Gm,logicalNot:M4,logicalOr:P4,logicalXor:OF,losses:W9,lowerBound:RF,matMul:cn,math:Oce,max:ud,maxPool:A4,maxPool3d:$F,maxPoolWithArgmax:MF,maximum:L4,mean:Hm,memory:pce,meshgrid:PF,min:Rw,minimum:D4,mirrorPad:AF,mod:LF,moments:DF,movingAverage:O9,mul:Le,multiRNNCell:FF,multinomial:BF,neg:ws,nextFrame:q9,norm:Um,notEqual:F4,oneHot:Iw,ones:Mu,onesLike:zF,op:te,outerProduct:jF,pad:np,pad1d:VF,pad2d:UF,pad3d:WF,pad4d:GF,pool:HF,pow:Zh,prelu:z4,print:XT,prod:qF,profile:fce,raggedGather:KF,raggedTensorToTensor:XF,rand:YF,randomGamma:ZF,randomNormal:K4,randomStandardNormal:e9,randomUniform:X4,range:rp,ready:yce,real:Kh,reciprocal:t9,registerBackend:t4,registerGradient:$le,registerKernel:vw,relu:qm,relu6:Y4,removeBackend:vce,reshape:Se,reverse:Pu,reverse1d:n9,reverse2d:r9,reverse3d:a9,reverse4d:i9,rfft:Fw,round:Q4,rsqrt:o9,scalar:zt,scatterND:R9,scatter_util:Bce,searchSorted:Aw,selu:s9,separableConv2d:l9,serialization:Wce,setBackend:mce,setPlatform:Sce,setdiff1dAsync:u9,sigmoid:sd,sign:c9,signal:V9,sin:d9,sinh:h9,slice:kn,slice1d:p9,slice2d:f9,slice3d:g9,slice4d:m9,slice_util:ID,softmax:y9,softplus:R4,spaceToBatchND:B4,sparse:G9,sparseToDense:$9,spectral:j9,split:ap,sqrt:ks,square:fo,squaredDifference:Z4,squeeze:Xm,stack:Cs,step:eN,stridedSlice:b9,string:H9,sub:Lt,sum:Nn,sumOutType:Sw,tan:v9,tanh:_w,tensor:qo,tensor1d:go,tensor2d:ip,tensor3d:r4,tensor4d:x9,tensor5d:w9,tensor6d:k9,tensor_util:aue,test_util:ede,tidy:Kt,tile:ep,time:gce,topk:S9,train:_me,transpose:Dm,truncatedNormal:C9,unique:E9,unregisterGradient:Ple,unregisterKernel:Mle,unsortedSegmentSum:I9,unstack:Au,upcastType:Ja,upperBound:T9,util:Wle,valueAndGrad:Ghe,valueAndGrads:Hhe,variable:N9,variableGrads:TF,version_core:tde,where:ld,whereAsync:tN,zeros:$u,zerosLike:yi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lme=fe();Lme.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
* =============================================================================
*/var mo;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(mo||(mo={}));var w7;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(w7||(w7={}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dme={};function k7(t){return Dme[t]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const s=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?s+1:i.inputIndexEnd;if(i.type==="tensor")return La(e.inputNames[i.inputIndexStart],n,r,a);if(i.type==="tensors")return e.inputNames.slice(s,l).map(d=>La(d,n,r,a));const u=La(e.inputNames.slice(s)[0],n,r,a),c=u.dataSync();return i.type==="number"?c[0]:Fi(u.shape,c)}const o=e.attrParams[t];return o&&o.value}function La(t,e,n,r){const[a,i]=bi(t);if(r!=null){const s=r.getHashTableHandleByName(a);if(s!=null)return s}const o=n.currentContextIds.find(s=>!!e[t2(a,s)]);return o!==void 0?e[t2(a,o)][i]:void 0}function Fme(t,e,n){return e[t2(t,n.currentContextId)]}function Is(t,e){const[n,r,a]=bi(t);return[t2(n,e&&e.currentContextId),r,a]}function t2(t,e){return e?`${t}-${e}`:t}function bi(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,a=Number(e[e.length-1]);return[n,a,r]}function n2(t,e,n){let r=R("pad",t,e,n);if(r==="explicit"){r=R("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function El(t){return t.kept?t:bl(t)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bme=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zme=Object.freeze(Object.defineProperty({__proto__:null,json:Bme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jme=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Vme=Object.freeze(Object.defineProperty({__proto__:null,json:jme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ume=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Wme=Object.freeze(Object.defineProperty({__proto__:null,json:Ume},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gme=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Hme=Object.freeze(Object.defineProperty({__proto__:null,json:Gme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qme=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Kme=Object.freeze(Object.defineProperty({__proto__:null,json:qme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xme=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Yme=Object.freeze(Object.defineProperty({__proto__:null,json:Xme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qme=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Jme=Object.freeze(Object.defineProperty({__proto__:null,json:Qme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Zme=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],e0e=Object.freeze(Object.defineProperty({__proto__:null,json:Zme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const t0e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],n0e=Object.freeze(Object.defineProperty({__proto__:null,json:t0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r0e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],a0e=Object.freeze(Object.defineProperty({__proto__:null,json:r0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i0e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],o0e=Object.freeze(Object.defineProperty({__proto__:null,json:i0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const s0e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],l0e=Object.freeze(Object.defineProperty({__proto__:null,json:s0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const u0e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],c0e=Object.freeze(Object.defineProperty({__proto__:null,json:u0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const d0e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],h0e=Object.freeze(Object.defineProperty({__proto__:null,json:d0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p0e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],f0e=Object.freeze(Object.defineProperty({__proto__:null,json:p0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const g0e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],m0e=Object.freeze(Object.defineProperty({__proto__:null,json:g0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y0e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],b0e=Object.freeze(Object.defineProperty({__proto__:null,json:y0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const v0e=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],x0e=Object.freeze(Object.defineProperty({__proto__:null,json:v0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w0e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],k0e=Object.freeze(Object.defineProperty({__proto__:null,json:w0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class S7{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[zme,Vme,Wme,Hme,Kme,Yme,Jme,e0e,n0e,a0e,o0e,l0e,c0e,h0e,f0e,m0e,b0e,x0e,k0e],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],o=[],s=r.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?a.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&o.push(y[v.name]),y),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const h=Object.keys(s);h.forEach(y=>{const v=s[y];v.inputNames.forEach((b,x)=>{const[w,,S]=Is(b),C=s[w];if(C.outputs!=null){const E=C.outputs.indexOf(S);if(E!==-1){const _=`${w}:${E}`;v.inputNames[x]=_}}v.inputs.push(C),C.children.push(v)})}),Object.keys(d).length===0?h.forEach(y=>{const v=s[y];v.children.length===0&&u.push(v)}):Object.keys(d).forEach(y=>{const[v]=Is(y),b=s[v];b!=null&&(b.signatureKey=d[y],u.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[v]=Is(y),b=s[v];b&&(b.signatureKey=c[y],l.push(b))}):l=a;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const m={nodes:s,inputs:l,outputs:u,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(m.initNodes=o),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=k7(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const o=i.type;let s;switch(i.type){case"string":s=NN(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=NN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=LN(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=LN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=ON(e.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=ON(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=AN(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=AN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=_N(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=_N(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=FN(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=FN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=PN(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=PN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=DN(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=DN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=$N(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=$N(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=MN(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=MN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=E7(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=E7(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:s,type:o},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((c,d)=>(c[d.name]=this.mapNode(d),d.op==="Const"&&a.push(c[d.name]),c),{}));const o=[],s=[];e.signature.inputArg.forEach(c=>{const[d]=Is(c.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:RN(c.type),type:"dtype"}},children:[]};h.signatureKey=c.name,o.push(h),i[d]=h}),Object.keys(i).forEach(c=>{const d=i[c];d.inputNames.forEach((h,f)=>{const[m,,y]=Is(h),v=i[m];if(v.outputs!=null){const b=v.outputs.indexOf(y);if(b!==-1){const x=`${m}:${b}`;d.inputNames[f]=x}}d.inputs.push(v),v.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(c=>{const[d,h]=Is(l[c.name]),f=i[d];f!=null&&(f.defaultOutput=h,s.push(f))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function S0e(t){const e=fe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function C7(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):S0e(t);return e?n:n.toLowerCase()}function NN(t,e,n,r=!1){const a=t[e];return a!=null?C7(a.s,r):n}function _N(t,e,n){const r=t[e];return r?r.b:n}function ON(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function RN(t){switch(typeof t=="string"&&(t=mo[t]),t){case mo.DT_FLOAT:case mo.DT_HALF:return"float32";case mo.DT_INT32:case mo.DT_INT64:case mo.DT_INT8:case mo.DT_UINT8:return"int32";case mo.DT_BOOL:return"bool";case mo.DT_DOUBLE:return"float32";case mo.DT_STRING:return"string";default:return null}}function E7(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function $N(t,e,n){const r=t[e];return r&&r.type?RN(r.type):n}function MN(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>RN(a)):n}function I7(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function PN(t,e,n){const r=t[e];return r&&r.shape?I7(r.shape):n}function AN(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function LN(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>C7(i,r)):n}function DN(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>I7(a)):n}function FN(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class C0e{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return La(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return La(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return ON(this.node.rawAttrs,e,n);if(r.s!=null)return NN(this.node.rawAttrs,e,n);if(r.b!=null)return _N(this.node.rawAttrs,e,n);if(r.shape!=null)return PN(this.node.rawAttrs,e,n);if(r.type!=null)return $N(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return AN(this.node.rawAttrs,e,n);if(r.list.s!=null)return LN(this.node.rawAttrs,e,n);if(r.list.shape!=null)return DN(this.node.rawAttrs,e,n);if(r.list.b!=null)return FN(this.node.rawAttrs,e,n);if(r.list.type!=null)return MN(this.node.rawAttrs,e,n)}return n}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ya=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:zT,abs:mi,acos:OD,acosh:RD,add:ft,addN:$D,all:MD,any:PD,argMax:AD,argMin:LD,asin:DD,asinh:FD,atan:BD,atan2:zD,atanh:jD,avgPool:v4,avgPool3d:VD,basicLSTMCell:UD,batchNorm:zm,batchNorm2d:WD,batchNorm3d:GD,batchNorm4d:HD,batchToSpaceND:x4,bincount:w4,booleanMaskAsync:_9,broadcastArgs:qD,broadcastTo:Qh,buffer:Et,cast:jn,ceil:KD,clipByValue:XD,clone:bl,complex:ml,concat:ma,concat1d:YD,concat2d:QD,concat3d:JD,concat4d:ZD,conv1d:eF,conv2d:jm,conv2dTranspose:nF,conv3d:rF,conv3dTranspose:aF,cos:iF,cosh:oF,cosineWindow:zw,cumprod:sF,cumsum:lF,denseBincount:uF,depthToSpace:cF,depthwiseConv2d:Ow,diag:dF,dilation2d:hF,div:Tn,divNoNan:pF,dot:fF,dropout:P9,einsum:gF,elu:S4,enclosingPowerOfTwo:nN,equal:k4,erf:mF,euclideanNorm:vF,exp:Ru,expandDims:kl,expm1:xF,eye:E4,fft:Dw,fill:Jh,floor:I4,floorDiv:m4,fused:L9,gather:T4,gatherND:M9,greater:Wm,greaterEqual:N4,ifft:Km,imag:Lm,image:aN,inTopKAsync:A9,irfft:J4,isFinite:wF,isInf:kF,isNaN:SF,leakyRelu:_4,less:CF,lessEqual:$w,linalg:U9,linspace:EF,localResponseNormalization:IF,log:tp,log1p:O4,logSigmoid:NF,logSoftmax:_F,logSumExp:$4,logicalAnd:Gm,logicalNot:M4,logicalOr:P4,logicalXor:OF,losses:W9,lowerBound:RF,matMul:cn,max:ud,maxPool:A4,maxPool3d:$F,maxPoolWithArgmax:MF,maximum:L4,mean:Hm,meshgrid:PF,min:Rw,minimum:D4,mirrorPad:AF,mod:LF,moments:DF,movingAverage:O9,mul:Le,multiRNNCell:FF,multinomial:BF,neg:ws,norm:Um,notEqual:F4,oneHot:Iw,ones:Mu,onesLike:zF,op:te,outerProduct:jF,pad:np,pad1d:VF,pad2d:UF,pad3d:WF,pad4d:GF,pool:HF,pow:Zh,prelu:z4,print:XT,prod:qF,raggedGather:KF,raggedTensorToTensor:XF,rand:YF,randomGamma:ZF,randomNormal:K4,randomStandardNormal:e9,randomUniform:X4,range:rp,real:Kh,reciprocal:t9,relu:qm,relu6:Y4,reshape:Se,reverse:Pu,reverse1d:n9,reverse2d:r9,reverse3d:a9,reverse4d:i9,rfft:Fw,round:Q4,rsqrt:o9,scalar:zt,scatterND:R9,searchSorted:Aw,selu:s9,separableConv2d:l9,setdiff1dAsync:u9,sigmoid:sd,sign:c9,signal:V9,sin:d9,sinh:h9,slice:kn,slice1d:p9,slice2d:f9,slice3d:g9,slice4d:m9,softmax:y9,softplus:R4,spaceToBatchND:B4,sparse:G9,sparseToDense:$9,spectral:j9,split:ap,sqrt:ks,square:fo,squaredDifference:Z4,squeeze:Xm,stack:Cs,step:eN,stridedSlice:b9,string:H9,sub:Lt,sum:Nn,tan:v9,tanh:_w,tensor:qo,tensor1d:go,tensor2d:ip,tensor3d:r4,tensor4d:x9,tensor5d:w9,tensor6d:k9,tile:ep,topk:S9,transpose:Dm,truncatedNormal:C9,unique:E9,unsortedSegmentSum:I9,unstack:Au,upperBound:T9,variable:N9,where:ld,whereAsync:tN,zeros:$u,zerosLike:yi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E0e=(t,e,n,r=ya)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(R("a",t,e,n),R("b",t,e,n))];case"AddN":return[r.addN(R("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(R("a",t,e,n),R("b",t,e,n))];case"Mul":return[r.mul(R("a",t,e,n),R("b",t,e,n))];case"RealDiv":case"Div":return[r.div(R("a",t,e,n),R("b",t,e,n))];case"DivNoNan":return[r.divNoNan(R("a",t,e,n),R("b",t,e,n))];case"FloorDiv":return[r.floorDiv(R("a",t,e,n),R("b",t,e,n))];case"Sub":return[r.sub(R("a",t,e,n),R("b",t,e,n))];case"Minimum":return[r.minimum(R("a",t,e,n),R("b",t,e,n))];case"Maximum":return[r.maximum(R("a",t,e,n),R("b",t,e,n))];case"Pow":return[r.pow(R("a",t,e,n),R("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(R("a",t,e,n),R("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I0e=(t,e,n,r=ya)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(R("x",t,e,n))];case"Acos":return[r.acos(R("x",t,e,n))];case"Acosh":return[r.acosh(R("x",t,e,n))];case"Asin":return[r.asin(R("x",t,e,n))];case"Asinh":return[r.asinh(R("x",t,e,n))];case"Atan":return[r.atan(R("x",t,e,n))];case"Atan2":return[r.atan2(R("x",t,e,n),R("y",t,e,n))];case"Atanh":return[r.atanh(R("x",t,e,n))];case"Ceil":return[r.ceil(R("x",t,e,n))];case"Complex":return[r.complex(R("real",t,e,n),R("imag",t,e,n))];case"Cos":return[r.cos(R("x",t,e,n))];case"Cosh":return[r.cosh(R("x",t,e,n))];case"Elu":return[r.elu(R("x",t,e,n))];case"Erf":return[r.erf(R("x",t,e,n))];case"Exp":return[r.exp(R("x",t,e,n))];case"Expm1":return[r.expm1(R("x",t,e,n))];case"Floor":return[r.floor(R("x",t,e,n))];case"Log":return[r.log(R("x",t,e,n))];case"Log1p":return[r.log1p(R("x",t,e,n))];case"Imag":return[r.imag(R("x",t,e,n))];case"Neg":return[r.neg(R("x",t,e,n))];case"Reciprocal":return[r.reciprocal(R("x",t,e,n))];case"Real":return[r.real(R("x",t,e,n))];case"Relu":return[r.relu(R("x",t,e,n))];case"Round":return[r.round(R("x",t,e,n))];case"Selu":return[r.selu(R("x",t,e,n))];case"Sigmoid":return[r.sigmoid(R("x",t,e,n))];case"Sin":return[r.sin(R("x",t,e,n))];case"Sign":return[r.sign(R("x",t,e,n))];case"Sinh":return[r.sinh(R("x",t,e,n))];case"Softplus":return[r.softplus(R("x",t,e,n))];case"Sqrt":return[r.sqrt(R("x",t,e,n))];case"Square":return[r.square(R("x",t,e,n))];case"Tanh":return[r.tanh(R("x",t,e,n))];case"Tan":return[r.tan(R("x",t,e,n))];case"ClipByValue":return[r.clipByValue(R("x",t,e,n),R("clipValueMin",t,e,n),R("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(R("x",t,e,n))];case"Rsqrt":return[r.rsqrt(La(t.inputNames[0],e,n))];case"Prod":return[r.prod(R("x",t,e,n),R("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu(R("x",t,e,n),R("alpha",t,e,n))];case"Prelu":return[r.prelu(R("x",t,e,n),R("alpha",t,e,n))];case"IsNan":return[r.isNaN(La(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){V(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];V(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function T7(t){return!(typeof t=="number"||t.some(e=>e<0))}function e0(t,e,n){let r=BN(t,n);const a=!T7(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=BN(i.shape,r)}),!T7(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function BN(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class T0e{constructor(e,n,r,a,i,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=zt(0),xs(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),yo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,xs(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return qo([],[0].concat(this.elementShape));const r=this.readMany(e);return yo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Cs(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return qo([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return yo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),ma(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Au(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];Kt(()=>{n=Se(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:a[l-1],0],c=[1,e[l],i];o[l]=Se(kn(n,u,c),this.elementShape)}return o});const s=[];for(let l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Cd{constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);yo(n,i.shape,"TensorList shape mismatch: "),xs(i)}),this.idTensor=zt(0),this.maxNumElements=a,xs(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Cd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);yo(e,this.elementShape,"TensorList shape mismatch: ");const a=e0(this.elementShape,this.tensors,e);return Kt(()=>{const i=this.tensors.map(o=>Se(o,a));return Cs(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=e0(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,yo(a.shape,e,"TensorList shape mismatch: "),Se(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(yo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");xs(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Cd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);yo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=e0(this.elementShape,this.tensors,n);return Se(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);yo(this.elementShape,n.shape,"TensorList shape mismatch: "),xs(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);yo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=e0(this.elementShape,this.tensors,r);return e.length===0?qo([],[0].concat(a)):Kt(()=>{const i=e.map(o=>Se(this.tensors[o],a));return Cs(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);yo(this.elementShape,n,"TensorList shape mismatch: ");const r=e0(this.elementShape,this.tensors,n);return this.size()===0?qo([],[0].concat(r)):Kt(()=>{const a=this.tensors.map(i=>Se(i,r));return ma(a,0)})}}function N0e(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);yo(a,e,"TensorList shape mismatch: ");const i=Au(t);return new Cd(i,e,r)}function _0e(t,e,n,r){return new Cd([],t,e,r)}function O0e(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new Cd([],n,t.dtype,r),o=Au(t,0);return e.forEach((s,l)=>{i.setItem(s,o[l])}),i}function R0e(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=BN(i,n),s=r===0?0:t.size/r,l=Kt(()=>{const c=[];t=Se(t,[1,r,s]);for(let d=0;d<e.length;++d){const h=[0,d===0?0:a[d-1],0],f=[1,e[d],s];c[d]=Se(kn(t,h,f),o)}return t.dispose(),c}),u=new Cd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $0e=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=R("thenBranch",t,e,n),a=R("elseBranch",t,e,n),i=R("cond",t,e,n),o=R("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=R("body",t,e,n),a=R("cond",t,e,n),i=R("args",t,e,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&s.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const h=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const r=R("pred",t,e,n);return[El(r)]}case"Switch":{const r=R("pred",t,e,n);let a=R("data",t,e,n);return a.kept||(a=El(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>La(a,e,n)!==void 0);if(r){const a=La(r,e,n);return[El(a)]}return}case"Enter":{const r=R("frameName",t,e,n),a=R("tensor",t,e,n);return n.enterFrame(r),[El(a)]}case"Exit":{const r=R("tensor",t,e,n);return n.exitFrame(),[El(r)]}case"NextIteration":{const r=R("tensor",t,e,n);return n.nextIteration(),[El(r)]}case"TensorArrayV3":{const r=R("size",t,e,n),a=R("dtype",t,e,n),i=R("elementShape",t,e,n),o=R("dynamicSize",t,e,n),s=R("clearAfterRead",t,e,n),l=R("identicalElementShapes",t,e,n),u=R("name",t,e,n),c=new T0e(u,a,r,i,l,o,s);return n.addTensorArray(c),[c.idTensor,zt(1)]}case"TensorArrayWriteV3":{const r=R("tensorArrayId",t,e,n),a=R("index",t,e,n),i=R("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{const r=R("tensorArrayId",t,e,n),a=R("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=R("tensorArrayId",t,e,n),a=R("indices",t,e,n),i=R("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=R("tensorArrayId",t,e,n),a=R("indices",t,e,n),i=R("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=R("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=R("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=R("tensorArrayId",t,e,n),a=R("tensor",t,e,n),i=R("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{const r=R("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[zt(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=R("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=R("tensorListId",t,e,n),a=R("index",t,e,n),i=R("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{const r=R("tensorListId",t,e,n),a=R("index",t,e,n),i=R("elementShape",t,e,n),o=R("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=R("indices",t,e,n),a=R("tensor",t,e,n),i=R("elementShape",t,e,n),o=R("numElements",t,e,n),s=O0e(a,r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=R("elementShape",t,e,n),a=R("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=R(i,t,e,n),s=t.op==="TensorListReserve"?-1:o,l=_0e(r,a,o,s);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=R("tensorListId",t,e,n),a=R("indices",t,e,n),i=R("elementShape",t,e,n),o=R("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,o,i)]}case"TensorListStack":{const r=R("tensorListId",t,e,n),a=R("elementShape",t,e,n),i=R("elementDType",t,e,n),o=R("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,o)]}case"TensorListFromTensor":{const r=R("tensor",t,e,n),a=R("elementShape",t,e,n),i=R("elementDType",t,e,n),o=N0e(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=R("tensorListId",t,e,n),a=n.getTensorList(r.id),i=R("dtype",t,e,n),o=R("elementShape",t,e,n);return[a.concat(i,o)]}case"TensorListPushBack":{const r=R("tensorListId",t,e,n),a=R("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=R("tensorListId",t,e,n),a=R("elementShape",t,e,n),i=R("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=R("tensor",t,e,n),a=R("elementShape",t,e,n),i=R("lengths",t,e,n),o=R0e(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=R("tensorListId",t,e,n),a=n.getTensorList(r.id);return[zt(a.size(),"int32")]}case"TensorListResize":{const r=R("tensorListId",t,e,n),a=R("size",t,e,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N7(t,e,n){const[r,a]=R("fusedOps",t,e,n),i=r==="biasadd",o=!i,s=a==="prelu",l=r==="fusedbatchnorm",u=R("numArgs",t,e,n);if(i){if(s&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=R("strides",t,e,n),d=n2(t,e,n),h=R("dataFormat",t,e,n).toUpperCase(),f=R("dilations",t,e,n);let[m,y]=R("args",t,e,n);o&&(y=m,m=void 0);const v=R("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:h,dilations:f,biasArg:m,preluArg:y,activationFunc:a,leakyreluAlpha:v}}const M0e=(t,e,n,r=ya)=>{switch(t.op){case"Conv1D":{const a=R("stride",t,e,n),i=R("pad",t,e,n),o=R("dataFormat",t,e,n).toUpperCase(),s=R("dilation",t,e,n);return[r.conv1d(R("x",t,e,n),R("filter",t,e,n),a,i,o,s)]}case"Conv2D":{const a=R("strides",t,e,n),i=n2(t,e,n),o=R("dataFormat",t,e,n).toUpperCase(),s=R("dilations",t,e,n);return[r.conv2d(R("x",t,e,n),R("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=N7(t,e,n);return[r.fused.conv2d({x:R("x",t,e,n),filter:R("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=N7(t,e,n);return[r.fused.depthwiseConv2d({x:R("x",t,e,n),filter:R("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=R("outputShape",t,e,n),i=R("strides",t,e,n),o=n2(t,e,n);return[r.conv2dTranspose(R("x",t,e,n),R("filter",t,e,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=R("strides",t,e,n),i=n2(t,e,n),o=R("dilations",t,e,n),s=R("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(R("input",t,e,n),R("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("dataFormat",t,e,n).toUpperCase(),s=R("dilations",t,e,n);return[r.conv3d(R("x",t,e,n),R("filter",t,e,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.avgPool(R("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.maxPool(R("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n),s=R("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(R("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i,s);return[l,u]}case"AvgPool3D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.avgPool3d(R("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("kernelSize",t,e,n);return[r.maxPool3d(R("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=R("strides",t,e,n),i=R("pad",t,e,n),o=R("dilations",t,e,n),s=a[1],l=a[2],u=o[1],c=o[2];return[r.dilation2d(R("x",t,e,n),R("filter",t,e,n),[s,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P0e=(t,e,n,r=ya)=>{switch(t.op){case"Fill":{const a=R("shape",t,e,n),i=R("dtype",t,e,n),o=R("value",t,e,n);return[r.fill(a,o,i)]}case"LinSpace":{const a=R("start",t,e,n),i=R("stop",t,e,n),o=R("num",t,e,n);return[r.linspace(a,i,o)]}case"Multinomial":{const a=R("logits",t,e,n),i=R("numSamples",t,e,n),o=R("seed",t,e,n);return[r.multinomial(a,i,o)]}case"OneHot":{const a=R("indices",t,e,n),i=R("depth",t,e,n),o=R("onValue",t,e,n),s=R("offValue",t,e,n),l=R("dtype",t,e,n);return[r.oneHot(a,i,o,s,l)]}case"Ones":return[r.ones(R("shape",t,e,n),R("dtype",t,e,n))];case"OnesLike":return[r.onesLike(R("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(R("shape",t,e,n),R("dtype",t,e,n),R("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(R("shape",t,e,n),R("minval",t,e,n),R("maxval",t,e,n),R("dtype",t,e,n))];case"Range":{const a=R("start",t,e,n),i=R("stop",t,e,n),o=R("step",t,e,n);return[r.range(a,i,o,R("dtype",t,e,n))]}case"TruncatedNormal":{const a=R("shape",t,e,n),i=R("mean",t,e,n),o=R("stdDev",t,e,n),s=R("seed",t,e,n);return[r.truncatedNormal(a,i,o,R("dtype",t,e,n),s)]}case"Zeros":return[r.zeros(R("shape",t,e,n),R("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(R("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zN(t,e,n){const r=R("boxes",t,e,n),a=R("scores",t,e,n),i=R("maxOutputSize",t,e,n),o=R("iouThreshold",t,e,n),s=R("scoreThreshold",t,e,n),l=R("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:l}}const A0e=async(t,e,n,r,a=ya)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=zN(t,e,n),d=await a.image.nonMaxSuppressionWithScoreAsync(i,o,s,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=zN(t,e,n),c=R("padToMaxOutputSize",t,e,n),d=await a.image.nonMaxSuppressionPaddedAsync(i,o,s,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=zN(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,o,s,l,u)]}case"Where":{const i=a.cast(R("condition",t,e,n),"bool"),o=[await a.whereAsync(i)];return i.dispose(),o}case"ListDiff":return a.setdiff1dAsync(R("x",t,e,n),R("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const L0e=(t,e,n,r=ya)=>{switch(t.op){case"LowerBound":{const a=R("sortedSequence",t,e,n),i=R("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=R("x",t,e,n),i=R("k",t,e,n),o=R("sorted",t,e,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{const a=R("sortedSequence",t,e,n),i=R("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=R("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=R("x",t,e,n),i=R("axis",t,e,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D0e=(t,e,n,r=ya)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=R("default",t,e,n);return[La(t.name,e,n)||a];case"Placeholder":return[La(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=R("x",t,e,n);return[El(c)]}case"IdentityN":return R("x",t,e,n).map(c=>El(c));case"Snapshot":const i=R("x",t,e,n);return[El(i)];case"Shape":return[r.tensor1d(R("x",t,e,n).shape,"int32")];case"ShapeN":return R("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(R("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(R("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=R("x",t,e,n),s=R("data",t,e,n),l=R("message",t,e,n),u=R("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<s.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class F0e{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=zt(0),this.tensorMap=new Map,xs(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return zt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Kt(()=>{const a=Au(n),i=r.length,o=a.length;V(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let s=0;s<i;s++){const l=r[s],u=a[s];xs(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Kt(()=>{const a=[];for(let i=0;i<r.length;i++){const o=r[i],s=this.findWithDefault(o,n);a.push(s)}return Cs(a)})}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B0e=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=R("keyDType",t,e,n),i=R("valueDType",t,e,n),o=new F0e(a,i);return r.addHashTable(t.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=R("tableHandle",t,e,n,r),i=R("keys",t,e,n),o=R("values",t,e,n);return[await r.getHashTableById(a.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=R("tableHandle",t,e,n,r),i=R("keys",t,e,n),o=R("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=R("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z0e=(t,e,n,r=ya)=>{switch(t.op){case"ResizeBilinear":{const a=R("images",t,e,n),i=R("size",t,e,n),o=R("alignCorners",t,e,n),s=R("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{const a=R("images",t,e,n),i=R("size",t,e,n),o=R("alignCorners",t,e,n),s=R("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{const a=R("image",t,e,n),i=R("boxes",t,e,n),o=R("boxInd",t,e,n),s=R("cropSize",t,e,n),l=R("method",t,e,n),u=R("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,o,s,l,u)]}case"ImageProjectiveTransformV3":{const a=R("images",t,e,n),i=R("transforms",t,e,n),o=R("outputShape",t,e,n),s=R("fillValue",t,e,n),l=R("interpolation",t,e,n),u=R("fillMode",t,e,n);return[r.image.transform(a,i,l.toLowerCase(),u.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j0e=(t,e,n,r=ya)=>{switch(t.op){case"Equal":return[r.equal(R("a",t,e,n),R("b",t,e,n))];case"NotEqual":return[r.notEqual(R("a",t,e,n),R("b",t,e,n))];case"Greater":return[r.greater(R("a",t,e,n),R("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(R("a",t,e,n),R("b",t,e,n))];case"Less":return[r.less(R("a",t,e,n),R("b",t,e,n))];case"LessEqual":return[r.lessEqual(R("a",t,e,n),R("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(R("a",t,e,n),R("b",t,e,n))];case"LogicalNot":return[r.logicalNot(R("a",t,e,n))];case"LogicalOr":return[r.logicalOr(R("a",t,e,n),R("b",t,e,n))];case"Select":case"SelectV2":return[r.where(R("condition",t,e,n),R("a",t,e,n),R("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const V0e=(t,e,n,r=ya)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(R("a",t,e,n),R("b",t,e,n),R("transposeA",t,e,n),R("transposeB",t,e,n))];case"Einsum":return[r.einsum(R("equation",t,e,n),...R("tensors",t,e,n))];case"Transpose":return[r.transpose(R("x",t,e,n),R("perm",t,e,n))];case"_FusedMatMul":const[a,i]=R("fusedOps",t,e,n),o=a==="biasadd",s=i==="prelu",l=R("numArgs",t,e,n),u=R("leakyreluAlpha",t,e,n);if(o){if(s&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=R("args",t,e,n);return[r.fused.matMul({a:R("a",t,e,n),b:R("b",t,e,n),transposeA:R("transposeA",t,e,n),transposeB:R("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U0e=(t,e,n,r=ya)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(R("x",t,e,n),R("axis",t,e,n),R("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(R("x",t,e,n),R("mean",t,e,n),R("variance",t,e,n),R("offset",t,e,n),R("scale",t,e,n),R("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(R("x",t,e,n),R("mean",t,e,n),R("variance",t,e,n),R("offset",t,e,n),R("scale",t,e,n),R("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(R("x",t,e,n),R("radius",t,e,n),R("bias",t,e,n),R("alpha",t,e,n),R("beta",t,e,n))];case"Softmax":return[r.softmax(R("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(R("x",t,e,n))];case"SparseToDense":return[r.sparseToDense(R("sparseIndices",t,e,n),R("outputShape",t,e,n),R("sparseValues",t,e,n),R("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W0e=(t,e,n,r=ya)=>{switch(t.op){case"Max":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.max(R("x",t,e,n),s,l)]}case"Mean":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.mean(R("x",t,e,n),s,l)]}case"Min":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.min(R("x",t,e,n),s,l)]}case"Sum":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.sum(R("x",t,e,n),s,l)]}case"All":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.all(R("x",t,e,n),s,l)]}case"Any":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.any(R("x",t,e,n),s,l)]}case"ArgMax":{const s=R("axis",t,e,n);return[r.argMax(R("x",t,e,n),s)]}case"ArgMin":{const s=R("axis",t,e,n);return[r.argMin(R("x",t,e,n),s)]}case"Prod":{const s=R("axis",t,e,n),l=R("keepDims",t,e,n);return[r.prod(R("x",t,e,n),s,l)]}case"Cumprod":{const s=R("axis",t,e,n),l=R("exclusive",t,e,n),u=R("reverse",t,e,n);return[r.cumprod(R("x",t,e,n),s,l,u)]}case"Cumsum":{const s=R("axis",t,e,n),l=R("exclusive",t,e,n),u=R("reverse",t,e,n);return[r.cumsum(R("x",t,e,n),s,l,u)]}case"Bincount":const a=R("x",t,e,n),i=R("weights",t,e,n),o=R("size",t,e,n);return[r.bincount(a,i,o)];case"DenseBincount":{const s=R("x",t,e,n),l=R("weights",t,e,n),u=R("size",t,e,n),c=R("binaryOutput",t,e,n);return[r.denseBincount(s,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const G0e=(t,e,n,r=ya)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=R("n",t,e,n),i=R("axis",t,e,n);let o=R("tensors",t,e,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{const a=R("x",t,e,n),i=R("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=R("axis",t,e,n),i=R("batchDims",t,e,n),o=R("x",t,e,n),s=R("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{const a=R("dims",t,e,n),i=[];for(let s=0;s<a.length;s++)a[s]&&i.push(s);const o=R("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const a=R("axis",t,e,n),i=R("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=R("begin",t,e,n),i=R("size",t,e,n);return[r.slice(R("x",t,e,n),a,i)]}case"StridedSlice":{const a=R("begin",t,e,n),i=R("end",t,e,n),o=R("strides",t,e,n),s=R("beginMask",t,e,n),l=R("endMask",t,e,n),u=R("ellipsisMask",t,e,n),c=R("newAxisMask",t,e,n),d=R("shrinkAxisMask",t,e,n),h=R("x",t,e,n);return[r.stridedSlice(h,a,i,o,s,l,u,c,d)]}case"Pack":return Kt(()=>{const a=R("axis",t,e,n),i=R("tensors",t,e,n),o=i[0].shape,s=r.squeeze(i[0]).shape,l=i.map(u=>{const c=wn(u.shape,o);if(!c&&!wn(r.squeeze(u).shape,s))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,a)]});case"Unpack":{const a=R("axis",t,e,n),i=R("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=R("reps",t,e,n);return[r.tile(R("x",t,e,n),a)]}case"Split":case"SplitV":{const a=R("axis",t,e,n),i=R("numOrSizeSplits",t,e,n),o=R("x",t,e,n);return r.split(o,i,a)}case"ScatterNd":{const a=R("indices",t,e,n),i=R("values",t,e,n),o=R("shape",t,e,n);return[r.scatterND(a,i,o)]}case"GatherNd":{const a=R("x",t,e,n),i=R("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=R("sparseIndices",t,e,n),i=R("outputShape",t,e,n),o=R("sparseValues",t,e,n),s=R("defaultValue",t,e,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const H0e=(t,e,n,r=ya)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(R("indices",t,e,n),R("values",t,e,n),R("denseShape",t,e,n),R("defaultValue",t,e,n));return[a,i,o,s]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(R("inputIndices",t,e,n),R("inputShape",t,e,n),R("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(R("data",t,e,n),R("indices",t,e,n),R("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(R("data",t,e,n),R("indices",t,e,n),R("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q0e=(t,e,n,r=ya)=>{switch(t.op){case"FFT":return[r.fft(R("x",t,e,n))];case"IFFT":return[r.ifft(R("x",t,e,n))];case"RFFT":return[r.rfft(R("x",t,e,n))];case"IRFFT":return[r.irfft(R("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const K0e=(t,e,n,r=ya)=>{switch(t.op){case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(R("data",t,e,n),R("dataSplits",t,e,n),R("separator",t,e,n),R("nGramWidths",t,e,n),R("leftPad",t,e,n),R("rightPad",t,e,n),R("padWidth",t,e,n),R("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:o}=r.string.stringSplit(R("input",t,e,n),R("delimiter",t,e,n),R("skipEmpty",t,e,n));return[a,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(R("input",t,e,n),R("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const X0e=(t,e,n,r=ya)=>{switch(t.op){case"Cast":return[r.cast(R("x",t,e,n),R("dtype",t,e,n))];case"ExpandDims":{const a=R("axis",t,e,n);return[r.expandDims(R("x",t,e,n),a)]}case"Squeeze":{const a=R("axis",t,e,n);return[r.squeeze(R("x",t,e,n),a)]}case"Reshape":return[r.reshape(R("x",t,e,n),R("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(R("x",t,e,n),R("padding",t,e,n),R("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(R("x",t,e,n),R("padding",t,e,n),R("constantValue",t,e,n))];case"SpaceToBatchND":{const a=R("blockShape",t,e,n),i=R("paddings",t,e,n);return[r.spaceToBatchND(R("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=R("blockShape",t,e,n),i=R("crops",t,e,n);return[r.batchToSpaceND(R("x",t,e,n),a,i)]}case"DepthToSpace":{const a=R("blockSize",t,e,n),i=R("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(R("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(R("x",t,e,n),R("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(R("s0",t,e,n),R("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _7(t,e,n,r,a=Kt){const i=((o,s,l)=>{switch(o.category){case"arithmetic":return a(()=>E0e(o,s,l));case"basic_math":return a(()=>I0e(o,s,l));case"control":return $0e(o,s,l);case"convolution":return a(()=>M0e(o,s,l));case"creation":return a(()=>P0e(o,s,l));case"dynamic":return A0e(o,s,l);case"evaluation":return a(()=>L0e(o,s,l));case"image":return a(()=>z0e(o,s,l));case"graph":return a(()=>D0e(o,s,l));case"logical":return a(()=>j0e(o,s,l));case"matrices":return a(()=>V0e(o,s,l));case"normalization":return a(()=>U0e(o,s,l));case"reduction":return a(()=>W0e(o,s,l));case"slice_join":return a(()=>G0e(o,s,l));case"sparse":return a(()=>H0e(o,s,l));case"spectral":return a(()=>q0e(o,s,l));case"string":return a(()=>K0e(o,s,l));case"transformation":return a(()=>X0e(o,s,l));case"hash_table":return B0e(o,s,l,r);case"custom":const u=k7(o.op);if(u&&u.customExecutor)return u.customExecutor(new C0e(o,s,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Yc(i)?i.then(o=>[].concat(o)):[].concat(i)}class O7{constructor(e={},n={},r={},a={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R7(t,e,n,r){const a=new Set,i=[];let o=null,s=null;const l=new Set,u=Object.keys(t).map(h=>bi(h)[0]);let c=[];r!=null&&(c=r.map(h=>bi(h.name)[0]));const d=[...e];for(;d.length>0;){const h=d.pop();if(($7(h)||e1e(h)||t1e(h))&&o==null&&(o=h,s=o.children.map(f=>f.name).filter(f=>a.has(f))),a.add(h.name),n[h.name]==null&&u.indexOf(h.name)===-1&&c.indexOf(h.name)===-1){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function Y0e(t,e,n){const{usedNodes:r,inputs:a}=n,i=[],o=Object.keys(a).map(c=>bi(c)[0]).map(c=>t.nodes[c]),s=t.initNodes;o.forEach(c=>{r.has(c.name)&&i.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&i.push(c)}),s?.forEach(c=>{r.has(c.name)&&i.push(c)});const l=new Set,u=[];for(;i.length>0;){const c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(d=>{!l.has(d.name)&&r.has(d.name)&&d.inputs.every(h=>l.has(h.name))&&i.push(d)})}return u}const Q0e=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],J0e=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],Z0e=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function $7(t){return Q0e.indexOf(t.op)>=0}function e1e(t){return J0e.indexOf(t.op)>=0}function t1e(t){return Z0e.indexOf(t.op)>=0}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Y2{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Y2(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,n){const r=R7(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(a.length>0){const s=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${a}]`)}return Y0e(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[bi(d)[0]]),i=n.map(d=>bi(d)[0]);let o=i.map(d=>this.graph.nodes[d]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const s=this.getCompilationKey(a,o);let l=this.compiledMap.get(s);l==null&&(l=this.compile(e,o),this.compiledMap.set(s,l));const u={},c={};return Kt(()=>{const d=new O7(this.weightMap,u,c,this.functionExecutorMap),h=Object.assign({},this.weightMap);Object.keys(e).forEach(y=>{const[v,b]=bi(y),x=[];x[b]=e[y],h[v]=x});const f=this.getFrozenTensorIds(h),m={};for(let y=0;y<l.length;y++){const v=l[y];if(!h[v.name]){const b=_7(v,h,d,this._resourceManager);if(Yc(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);h[v.name]=b,this.checkTensorForDisposal(v.name,v,h,d,f,i,m)}}return this.parent==null&&d.dispose(f),n.map(y=>La(y,h,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,o,s){n.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(s[l.id]=(s[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=Fme(l.name,r,a);u?.forEach(c=>{if(c&&!c.kept&&!i.has(c.id)){const d=s[c.id];if(d===1){if(!this.keepTensorForDebug)c.dispose();else{const[h,f]=Is(n.name,a);this.intermediateTensors[h]?this.intermediateTensors[h][f]=c:(this.intermediateTensors[h]=[],this.intermediateTensors[h][f]=c)}delete s[c.id]}else d!=null&&s[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(n=>{n&&!n.kept&&!n.isDisposed&&!this.keepIds.has(n.id)&&n.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,a={},i={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new O7(this.weightMap,a,i,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,n,r);const s=n.map(c=>La(c,this.tensorsMap,o)),l=s.map(c=>c.id),u=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...l,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,n,r){const a=e.reduce((i,o,s)=>(i[this.inputs[s].name]=o,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[bi(w)[0]]),s=r.map(w=>bi(w)[0]);let l=s.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:h}=R7(e,l,this.weightMap,this._initNodes),f=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[S,C]=bi(w),E=[];E[C]=e[w],m[S]=E});const y={},v=this.getFrozenTensorIds(m),b={};for(;f.length>0;){const w=this.processStack(o,f,n,m,b,v,s,y,u);await Promise.all(w)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const x=l.filter(w=>!$7(w)&&!La(w.name,m,n)).map(w=>w.name);if(x.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${x}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${w}`)}return m}processStack(e,n,r,a,i,o,s,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&R("isConstant",d.node,a,r)&&([h]=Is(d.node.name,r)),a[d.node.name]==null){const f=_7(d.node,a,r,this._resourceManager);h||([h]=Is(d.node.name,r));const m=r.currentContext;Yc(f)?c.push(f.then(y=>(a[h]=y,r.currentContext=m,this.checkTensorForDisposal(h,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u),y))):(a[h]=f,this.checkTensorForDisposal(h,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u))}else this.processChildNodes(d.node,n,r,a,i,u)}return c}processChildNodes(e,n,r,a,i,o){e.children.forEach(s=>{const[l]=Is(s.name,r);i[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(u=>!!La(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(u=>!!La(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=bi(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);V(s,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&V(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const a=this._signature.inputs[r];n[a.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=bi(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=bi(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class n1e{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r1e="?tfjs-format=file",a1e="model.json";class i1e{constructor(e,n={},r=e4){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new n1e}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Yc(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Y2(S7.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=S7.Instance.transformGraph(e.modelInitializer);this.initializer=new Y2(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const a=r instanceof Kn?[r]:r,i={};return a.forEach((o,s)=>i[this.structuredOutputKeys[s]]=o),i}return r}normalizeInputs(e){if(!(e instanceof Kn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,a)=>(n[r]=e[a],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function o1e(t,e={},n=e4){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=s1e(t));const r=new i1e(t,e,n);return await r.load(),r}function s1e(t){return t.endsWith("/")||(t=t+"/"),`${t}${a1e}${r1e}`}/**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function r2(t,e,n,r){return new(n||(n=Promise))(function(a,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?a(u.value):new n(function(c){c(u.value)}).then(o,s)}l((r=r.apply(t,e||[])).next())})}function a2(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(c[0]===6&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var l1e="https://tfhub.dev/tensorflow/tfjs-model/deeplab",u1e=513,jN={ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},VN={PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c1e(t,e){return""+l1e+"/"+(e===4?t+"/1/default/1/model.json":t+"/1/quantized/"+e+"/1/model.json")+"?tfjs-format=file"}function d1e(t){if(t==="pascal")return jN.PASCAL;if(t==="ade20k")return jN.ADE20K;if(t==="cityscapes")return jN.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function h1e(t){if(t==="pascal")return VN.PASCAL;if(t==="ade20k")return VN.ADE20K;if(t==="cityscapes")return VN.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function p1e(t,e,n,r){return r2(this,void 0,void 0,function(){var a,i,o,s,l,u,c,d,h,f,m,y,v,b;return a2(this,function(x){switch(x.label){case 0:if(t.length<e.length)throw new Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+t.length+", but there are "+e.length+" labels.");return a=n.shape,i=a[0],o=a[1],s=Et([i,o,3],"int32"),[4,n.array()];case 1:for(l=x.sent(),u=new Set,c=0;c<i;++c)for(d=0;d<o;++d)b=l[c][d],u.add(b),s.set(t[b][0],c,d,0),s.set(t[b][1],c,d,1),s.set(t[b][2],c,d,2);return h=s.toTensor(),[4,gD(h,r)];case 2:for(f=x.sent(),fa(h),m={},y=0,v=Array.from(u);y<v.length;y++)b=v[y],m[e[b]]=t[b];return[2,{legend:m,segmentationMap:f}]}})})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f1e(t){return t===void 0&&(t={base:"pascal",quantizationBytes:2}),r2(this,void 0,void 0,function(){var e;return a2(this,function(n){switch(n.label){case 0:if(Ame==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t.base){if(["pascal","cityscapes","ade20k"].indexOf(t.base)===-1)throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if([1,2,4].indexOf(t.quantizationBytes)===-1)throw new Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!t.modelUrl)throw new Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,o1e(t.modelUrl||c1e(t.base,t.quantizationBytes))];case 1:return e=n.sent(),[2,new g1e(e,t.base)]}})})}var g1e=function(){function t(e,n){this.model=e,this.base=n}return t.prototype.predict=function(e){var n=this;return Kt(function(){var r=jn(function(a){return Kt(function(){var i=a instanceof Kn?a:mD(a),o=i.shape,s=o[0],l=o[1],u=u1e/Math.max(l,s),c=Math.round(s*u),d=Math.round(l*u);return kl(aN.resizeBilinear(i,[c,d]))})}(e),"int32");return Xm(n.model.execute(r))})},t.prototype.segment=function(e,n){return n===void 0&&(n={}),r2(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,d,h,f=this;return a2(this,function(m){switch(m.label){case 0:if(!(n.colormap&&n.labels||this.base))throw new Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return n.colormap&&n.labels||(n.colormap=d1e(this.base),n.labels=h1e(this.base)),r=n.colormap,a=n.labels,i=n.canvas,o=Kt(function(){return f.predict(e)}),s=o.shape,l=s[0],u=s[1],[4,p1e(r,a,o,i)];case 1:return c=m.sent(),d=c.legend,h=c.segmentationMap,fa(o),[2,{legend:d,height:l,width:u,segmentationMap:h}]}})})},t.prototype.dispose=function(){return r2(this,void 0,void 0,function(){return a2(this,function(e){return this.model&&this.model.dispose(),[2]})})},t}();/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function We(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const m1e=Bw;class Q2 extends Ev{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new rT(this,vl())}nextDataId(){return Q2.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&Bi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ys(r[0])){const i=r.map(o=>bs(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Cl(a,i)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>gl(a));return Et(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Et(e.shape,e.dtype,n)}makeOutput(e,n,r){return vl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=fi();return e(),{kernelMs:fi()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){We([e],"where");const n=this.readSync(e.dataId);return m1e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Q2.nextDataId=0;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M7(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const y1e=t=>{const{x:e}=t.inputs,n=t.backend;We(e,"abs");let r=new Float32Array(be(e.shape));const a=n.data.get(e.dataId).values;return r=M7(a),n.makeOutput(r,e.shape,e.dtype)},b1e={kernelName:Rv,backendName:"cpu",kernelFunc:y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wr(t){return(e,n,r,a,i)=>{const o=Vt(e,n),s=o.length,l=Je(o),u=be(o),c=Nr(i,u),d=e.length,h=n.length,f=Je(e),m=Je(n),y=ad(e,o),v=ad(n,o);if(y.length+v.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=Xc(b,s,l),w=x.slice(-d);y.forEach(_=>w[_]=0);const S=Wo(w,d,f),C=x.slice(-h);v.forEach(_=>C[_]=0);const E=Wo(C,h,m);c[b]=t(r[S],a[E])}return[c,o]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vi(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}const v1e={kernelName:Uv,backendName:"cpu",kernelFunc:vi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i2(t,e,n="float32"){if(n==="complex64"){const a=i2(t,e,"float32"),i=i2(t,e,"float32");return vi({inputs:{real:a,imag:i},backend:t})}const r=Qr(be(e),n);return t.makeTensorInfo(e,n,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ts(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const x1e={kernelName:Wg,backendName:"cpu",kernelFunc:Ts};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hd(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const w1e={kernelName:jx,backendName:"cpu",kernelFunc:hd};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P7(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=Iu([0],n),[i,o]=wr((s,l)=>s!==l?1:0)(e,[],t,a,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Fu(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Ts({inputs:{x:a},backend:n});const c=i2(n,a.shape,a.dtype),d=Fu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),h=vi({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),h}if(a.dtype==="complex64"){const c=hd({inputs:{input:a},backend:n}),d=Fu({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!oT(a.dtype,i)){const c=Ts({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const o=n.data.get(a.dataId).values,[s,l,u]=P7(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}const k1e={kernelName:_g,backendName:"cpu",kernelFunc:Fu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vr(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;We([o,s],t);const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=o.dtype==="string"?dd(u):u,h=o.dtype==="string"?dd(c):c,f=r||o.dtype,[m,y]=e(o.shape,s.shape,d,h,f);return l.makeTensorInfo(y,f,m)}:({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;if(o.dtype==="complex64"||s.dtype==="complex64"){const u=Fu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,m=l.data.get(h.dataId).values,y=Fu({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(y.dataId),b=v.complexTensorInfos.real,x=v.complexTensorInfos.imag,w=l.data.get(b.dataId).values,S=l.data.get(x.dataId).values,[C,E,_]=n(o.shape,s.shape,f,m,w,S),N=l.makeTensorInfo(_,"float32",C),$=l.makeTensorInfo(_,"float32",E),P=vi({inputs:{real:N,imag:$},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo($),P}else{const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=r||o.dtype,[h,f]=e(o.shape,s.shape,u,c,d);return l.makeTensorInfo(f,d,h)}}}function UN(t){return(e,n,r,a,i,o)=>{const s=Vt(e,n),l=be(s),u=s.length,c=Je(s),d=Nr("float32",l),h=Nr("float32",l),f=ad(e,s),m=ad(n,s),y=Cl(r,a),v=Cl(i,o),b=e.length,x=Je(e),w=n.length,S=Je(n);if(f.length+m.length===0)for(let C=0;C<d.length;C++){const E=C%y.length,_=C%v.length,N=t(y[E*2],y[E*2+1],v[_*2],v[_*2+1]);d[C]=N.real,h[C]=N.imag}else for(let C=0;C<d.length;C++){const E=Xc(C,u,c),_=E.slice(-b);f.forEach(j=>_[j]=0);const N=Wo(_,b,x),$=E.slice(-w);m.forEach(j=>$[j]=0);const P=Wo($,w,S),D=t(y[N*2],y[N*2+1],v[P*2],v[P*2+1]);d[C]=D.real,h[C]=D.imag}return[d,h,s]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A7=wr((t,e)=>t+e),S1e=UN((t,e,n,r)=>({real:t+n,imag:e+r})),sp=Vr(zh,A7,S1e),C1e={kernelName:zh,backendName:"cpu",kernelFunc:sp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function WN(t,e,n,r,a){const i=be(r),o=Qr(a,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?o[l]+=e[s]:o[l]+=1)}return o}function L7(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],o=Et([a,n],e.dtype);for(let s=0;s<a;s++)for(let l=0;l<i;l++){const u=t.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):e.size>0?o.set(o.get(s,u)+e.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bu(t){return(e,n,r)=>{const a=Nr(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fn(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(We(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=be(o.shape),c=n||o.dtype,d=_r(c,u);for(let h=0;h<u;++h)d[h]=e(l[h],a);return s.makeTensorInfo(o.shape,c,d)}}function lp(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(We(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,a);return s.makeTensorInfo(o.shape,u,c)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D7=Bu(t=>Math.ceil(t)),E1e=lp(Og,D7),I1e={kernelName:Og,backendName:"cpu",kernelFunc:E1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F7(t,e,n,r){const a=_r(n,be(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const s=be(o.shape);a.set(o.vals,i),i+=s})}else{let i=0;t.forEach(o=>{const s=n==="string"?dd(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<o.shape[1];++d)a[c+d]=s[l++]}i+=o.shape[1]})}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B7=wr((t,e)=>t===e?1:0),z7=Vr(Dg,B7,null,"bool"),T1e={kernelName:Dg,backendName:"cpu",kernelFunc:z7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j7=Bu(t=>Math.exp(t)),V7=lp(Fg,j7,"float32"),N1e={kernelName:Fg,backendName:"cpu",kernelFunc:V7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U7=Bu(t=>Math.expm1(t)),_1e=lp(Bg,U7),O1e={kernelName:Bg,backendName:"cpu",kernelFunc:_1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W7=Bu(t=>Math.floor(t)),R1e=lp(zg,W7),$1e={kernelName:zg,backendName:"cpu",kernelFunc:R1e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G7(t,e,n,r,a,i,o,s,l){const u=Et([r,i],n);for(let c=0;c<r;c++){const d=[];let h=0;for(let f=0;f<a;f++){const m=t[c*a+f];h+=m*o[f],d.push(m)}if(h<0||h>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let f=0;f<i;f++)u.values[c*i+f]=e.get(...e.indexToLoc(h*i+f))}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H7(t,e,n){const r=Et(n,t.dtype);for(let a=0;a<r.size;++a){const i=r.indexToLoc(a).slice(),o=i[0],s=i[2],l=e.locToIndex([o,s]);i[2]=e.values[l];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[a]=t.values[u])}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q7=wr((t,e)=>t>e?1:0),M1e=Vr(Vg,q7,null,"bool"),P1e={kernelName:Vg,backendName:"cpu",kernelFunc:M1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const K7=wr((t,e)=>t>=e?1:0),A1e=Vr(Ug,K7,null,"bool"),L1e={kernelName:Ug,backendName:"cpu",kernelFunc:A1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const X7=wr((t,e)=>t<e?1:0),D1e=Vr(Kg,X7,null,"bool"),F1e={kernelName:Kg,backendName:"cpu",kernelFunc:D1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y7=wr((t,e)=>t<=e?1:0),B1e=Vr(Xg,Y7,null,"bool"),z1e={kernelName:Xg,backendName:"cpu",kernelFunc:B1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Q7(t,e,n){const r=(e-t)/(n-1),a=Qr(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const J7=Bu(t=>Math.log(t)),j1e=lp(Yg,J7),V1e={kernelName:Yg,backendName:"cpu",kernelFunc:j1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z7(t,e,n,r){const a=Nr(r,be(n));for(let i=0;i<a.length;++i){const o=i*e;let s=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>s)&&(s=u)}a[i]=s}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eB=wr((t,e)=>Math.max(t,e)),U1e=Vr(tm,eB),W1e={kernelName:tm,backendName:"cpu",kernelFunc:U1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tB=wr((t,e)=>Math.min(t,e)),G1e=Vr(nm,tB),H1e={kernelName:nm,backendName:"cpu",kernelFunc:G1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const GN=wr((t,e)=>t*e),q1e=UN((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),o2=Vr(am,GN,q1e),K1e={kernelName:am,backendName:"cpu",kernelFunc:o2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nB(t,e,n){const r=fl(-1,n);return GN([],e,r,t,n)}function X1e(t){const{inputs:e,backend:n}=t,{x:r}=e;We(r,"neg");const a=n.data.get(r.dataId).values,[i,o]=nB(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const Y1e={kernelName:Nx,backendName:"cpu",kernelFunc:X1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rB=wr((t,e)=>t!==e?1:0),Q1e=Vr(im,rB,null,"bool"),J1e={kernelName:im,backendName:"cpu",kernelFunc:Q1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function HN(t,e,n,r,a){const i=e.length,o=be(e),s=Je(e),l=Je(a),u=Nr(n,be(a));for(let c=0;c<o;++c){const d=Xc(c,i,s),h=new Array(d.length);for(let m=0;m<h.length;m++)h[m]=d[r[m]];const f=Wo(h,i,l);u[f]=t[c]}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Za(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;We(a,"transpose");const o=a.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=a.shape[i[c]];const l=r.data.get(a.dataId).values,u=HN(l,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}const Z1e={kernelName:jh,backendName:"cpu",kernelFunc:Za};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aB(t,e,n,r){const[a,i]=Jr(t,r),o=Ja(e,"int32"),s=Qr(be(a),o),l=be(i);for(let u=0;u<s.length;++u){const c=u*l;let d=1;for(let h=0;h<l;++h)d*=n[c+h];s[u]=d}return{outVals:s,outShape:a,outDtype:o}}function eye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"prod");const s=a.shape.length,l=Qt(i,a.shape),u=pr(l,s);let c=l,d=a;const h=[];u!=null&&(d=Za({inputs:{x:a},backend:n,attrs:{perm:u}}),h.push(d),c=fr(c.length,s));const f=n.data.get(d.dataId).values,{outVals:m,outShape:y,outDtype:v}=aB(d.shape,d.dtype,f,c);let b=y;return o&&(b=Rr(y,l)),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,v,m)}const tye={kernelName:Dx,backendName:"cpu",kernelFunc:eye};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nye(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=Xc(a,e.length,Je(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function rye(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function aye(t,e,n,r){const a=[];let i=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);rye(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)s[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let h=0;h<n.length;++h){const f=n[h],m=h+e.length-1;if(m>=0){const y=s[m],v=y[y.length-1]-f[c];for(let b=c;b<d;++b)s[m].push(f[b+1]+v)}c=f[c],d=f[d]}d!==c&&(a.push([c,d]),i+=d-c)}return{outSplits:s,valueSlices:a,numValues:i}}function iye(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=_r("int32",r);e.push(a),t[n].forEach((i,o)=>a[o]=i)}return e}function iB(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function oye(t,e,n,r,a,i){const o=iB(e,2)[1],s=iB(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)a[l*s+d]=t[c*o+d];++l}}function sye(t,e,n,r,a){const i=e.slice();i[0]=a;const o=_r(n,be(i)),s=t.length,l=s===0?0:s/e[0];return oye(t,e,r,l,o,i),[o,i]}function oB(t,e,n,r,a,i,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(nye(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:h}=aye(i,o,t,u),f=iye(c),m=sye(n,r,a,d,h);return[f,m[0],m[1]]}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var bo=Ko;class J2{constructor(e,n,r,a,i,o,s,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=X9(c),this.raggedRank=Y9(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===bo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===bo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case bo.VALUE_ROWIDS:return J2.getMaxWidthValueRowID(n);case bo.ROW_SPLITS:return J2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${bo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let o=1;o<n;++o){const s=e[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return lB(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;Q9(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=K9(this.raggedRank,a,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let o=0;for(let s=0;s<a;++s,o+=n)i.push(o);for(let s=a;s<e;++s)i.push(-1);return V(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,o=[];for(let s=0;s<i-1;++s){const l=e[s+1]-e[s];let u=Math.min(a,l),c=n[s];c===-1&&(u=0);for(let d=0;d<u;++d)o.push(c),c+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,o=[];if(i===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++s,s<a?u+=r:u=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case bo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case bo.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${bo[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case bo.FIRST_DIM_SIZE:return e[0];case bo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case bo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${bo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),n=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let o=r.length-2;o>=0;--o)r[o]=r[o+1]*n[o+1];const a=lB(n,!1),i=_r(this.valuesDType,be(a));if(r[0]*n[0]>0){let o=this.calculateFirstParentOutputIndex(e,r[0],n[0]);for(let s=1;s<=this.raggedRank;++s)o=this.calculateOutputIndex(s-1,o,r[s],n[s]);this.setOutput(this.raggedRank,o,i,a)}return[a,i]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,o=r;let s=a.slice();s=s.slice(e+1);const l=be(s),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const m=this.defaultValueShape;Kt(()=>{const y=Se(c,m);c=Qh(y,s).dataSync()})}let d=0,h=0,f=0;for(let m=0;m<=u;++m){let y=m<u?n[m]:-1;if(y===f){++f;continue}if(h<f){const v=i.subarray(d*l),b=o.subarray(h*l),x=(f-h)*l;sB(b,v,x)}if(m>=u){const v=r.length;y=Math.floor(v/l)}if(y>f)if(this.defaultValue.length===1)o.subarray(f*l,y*l).fill(this.defaultValue[0]),f=y;else for(;y>f;){const v=o.slice(f*l);sB(v,c,l),++f}y<0?(d=m+1,h=f):(d=m,h=f,f=h+1)}}}function sB(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function lB(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function uB(t,e,n,r,a,i,o,s,l,u){return new J2(t,e,n,r,a,i,o,s,l,u).compute()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cB(t,e,n,r){const a=t===e,i=t<e&&n<0,o=e<t&&n>1;if(a||i||o)return Qr(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=Qr(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dB=Bu(t=>1/Math.sqrt(t)),lye=lp(dm,dB),uye={kernelName:dm,backendName:"cpu",kernelFunc:lye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function up(t,e,n,r,a,i,o,s,l,u){const c=[r/a,a],d=t.values,h=e.values;if(r===0)return Et(n,e.dtype);const f=Et(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let m=0;m<i;m++){const y=[];let v=0;for(let b=0;b<o;b++){const x=d[m*o+b];y.push(x),v+=x*s[b]}if(v<0||v>=r/a)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let b=0;b<a;b++)u?f.values[v*a+b]+=h[m*a+b]:f.values[v*a+b]=e.rank===0?h[0]:h[m*a+b]}return f}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cye=Bu(t=>1/(1+Math.exp(-t))),hB=fn(mm,t=>1/(1+Math.exp(-t))),dye={kernelName:mm,backendName:"cpu",kernelFunc:hB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pB(t,e,n,r,a){const i=u4(r,e,n),o=be(n),s=Je(r);if(i){const d=c4(e,s);return a==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=a==="string"?dd(t):t,u=Et(r,a,l),c=Et(n,a);for(let d=0;d<c.size;++d){const h=c.indexToLoc(d),f=h.map((m,y)=>m+e[y]);c.set(u.get(...f),...h)}return a==="string"?v7(c.values):c.values}function pd(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r;We(a,"slice");const[s,l]=d4(a,i,o);s4(a,s,l);const u=n.data.get(a.dataId).values,c=pB(u,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const hye={kernelName:Xx,backendName:"cpu",kernelFunc:pd};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fB(t,e,n,r,a,i,o){const s=e[0],l=i[0],u=new Array(l),c=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(o7(s));const v=_r(n,0),b=_r(a,0);return[v,[0,d],b,u,c]}let h=!0,f=0;const m=new Array(l).fill(0);for(let v=0;v<s;++v){const b=t[v*d];if(b<0)throw new Error(s7(v,b));if(b>=l)throw new Error(l7(v,b,l));++m[b],h=h&&b>=f,f=b}let y=!0;for(let v=0;v<l;++v){const b=m[v]===0;u[v]=b,y=y&&!b,m[v]=Math.max(m[v],1),v>0&&(m[v]+=m[v-1])}if(y&&h){const v=t,b=r;for(let x=0;x<s;++x)c[x]=x;return[v,[s,d],b,u,c]}else{const v=m[l-1],b=_r(n,v*d),x=_r(a,v),w=new Array(l).fill(0);for(let S=0;S<s;++S){const C=t[S*d],E=w[C],_=(C===0?0:m[C-1])+E;w[C]++;for(let N=0;N<d;++N)b[_*d+N]=t[S*d+N];x[_]=r[S],c[S]=_}for(let S=0;S<l;++S)if(w[S]===0){const C=S===0?0:m[S-1];b[C*d+0]=S;for(let E=1;E<d;++E)b[C*d+E]=0;x[C]=o}return[b,[v,d],x,u,c]}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gB(t,e,n,r,a){const i=be(r),o=e[0],s=a.length,l=[];let u=1,c=-1;for(let y=0;y<s;++y){const v=a[y];if(v===-1){if(c!==-1)throw new Error(u7(c,y));c=y,l.push(1)}else{if(v<0)throw new Error(c7(y,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(d7());const y=Math.trunc(i/u);if(u*y!==i)throw new Error(h7(r,l));l[c]=y}if(be(l)!==i)throw new Error(p7(r,l));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let y=d-2;y>=0;--y)h[y]=h[y+1]*r[y+1]}const f=[];if(s>0){f[s-1]=1;for(let y=s-2;y>=0;--y)f[y]=f[y+1]*l[y+1]}const m=_r(n,o*s);for(let y=0;y<o;++y){let v=0;for(let b=0;b<d;++b)v+=t[y*d+b]*h[b];for(let b=0;b<s;++b)m[y*s+b]=Math.trunc(v/f[b]),v%=f[b]}return[m,[o,s],l]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qN(t,e,n,r,a,i=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error(IN());const d=e.slice();d[0]=c;const h=d.reduce((x,w)=>x*w,1),f=_r(n,h);if(s===0)return c>0&&f.fill(o),[f,d];if(c<=0)throw new Error(IN());let m=0,y=1,v=0,b=a[m];for(;;){let x=0;if(y<s){if(x=a[y],b===x){++y;continue}if(b>=x)throw new Error(f7())}if(b<0||b>=c)throw new Error(g7(b,c));b>v&&f.fill(o,v*u,b*u);for(let w=m;w<y;++w){const S=r[w];if(S<0||S>=l[0])throw new Error(m7(w,r[w],l[0]));for(let C=0;C<u;C++)f[b*u+C]+=t[S*u+C]}if(i)for(let w=0;w<u;w++)f[b*u+w]/=y-m;if(m=y,++y,v=b+1,b=x,y>s)break}return v<c&&f.fill(o,v*u,c*u),[f,d]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pye=Bu(t=>Math.sqrt(t)),fye=fn(bm,t=>Math.sqrt(t)),gye={kernelName:bm,backendName:"cpu",kernelFunc:fye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mB=wr((t,e)=>{const n=t-e;return n*n}),mye=Vr(vm,mB),yye={kernelName:vm,backendName:"cpu",kernelFunc:mye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yB(t,e,n,r){const a=Et(t,e.dtype);for(let i=0;i<a.size;i++){const o=a.indexToLoc(i),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];a.set(e.get(...s),...o)}return a}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class bye{constructor(e,n,r,a,i,o){this.separator=bs(e),this.nGramWidths=n,this.leftPad=bs(r),this.rightPad=bs(a),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,o){for(let s=0;s<i;++s){const l=this.getPadWidth(o),u=Math.max(0,l-s),c=Math.max(0,l-(i-(s+1))),d=o-(u+c),h=n+(u>0?0:s-l);let f=0;f+=u*this.leftPad.length;for(let x=0;x<d;++x)f+=e[h+x].length;f+=c*this.rightPad.length;const m=u+c+d-1;f+=m*this.separator.length,r[a+s]=new Uint8Array(f);const y=r[a+s];let v=0;const b=x=>x.forEach(w=>y[v++]=w);for(let x=0;x<u;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(e[h+x]),b(this.separator);if(d>0){b(e[h+d-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<a;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=a-1,o=_r("int32",a);if(r===0||a===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const s=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,u,s,c,f,d),c+=f}),this.preserveShort&&c===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,u,s,c,1,h)}}return[s,o]}}function bB(t,e,n,r,a,i,o,s){return new bye(n,r,a,i,o,s).compute(t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vye(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(a,i);(!n||o.length!==0)&&r.push(o),a=i+1}}function vB(t,e,n){const r=t.length,a=[];let i=0,o=0;const s=new Array(r);for(let h=0;h<r;++h){const f=a.length;vye(t[h],e,n,a);const m=a.length-f;s[h]=m,i+=m,o=Math.max(o,m)}const l=_r("int32",i*2),u=new Array(i),c=[r,o];let d=0;for(let h=0;h<r;++h)for(let f=0;f<s[h];++f)l[d*2]=h,l[d*2+1]=f,u[d]=a[d],++d;return[l,u,c]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xB(t,e){const n=_r("int32",t.length);for(let r=0;r<t.length;++r)n[r]=BL(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wB=wr((t,e)=>t-e),xye=UN((t,e,n,r)=>({real:t-n,imag:e-r})),KN=Vr(xm,wB,xye),wye={kernelName:xm,backendName:"cpu",kernelFunc:KN};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kB(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=Et(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const s=t.locToIndex(o);r.values[a]=t.values[s]}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const t0=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function SB(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(s-c)/s)*Math.sign(l-s/2),h=Math.max(n,Math.floor(e-l*c/s+d)),f=Math.min(r,Math.floor(e+(s-l)*c/s+d));SB(t,e,h,f)}const a=t[e];let i=n,o=r;for(dl(t,n,e),t0(t[r],a)>0&&dl(t,n,r);i<o;){for(dl(t,i,o),i++,o--;t0(t[i],a)<0;)i=i+1;for(;t0(t[o],a)>0;)o=o-1}t0(t[n],a)===0?dl(t,n,o):(o=o+1,dl(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function CB(t,e,n,r,a){const i=e[e.length-1],[o,s]=[t.length/i,i],l=Nr(n,o*r),u=Nr("int32",o*r);for(let d=0;d<o;d++){const h=d*s,f=t.subarray(h,h+s);let m=new Array(f.length);f.forEach((x,w)=>m[w]={value:x,index:w}),r<m.length&&(SB(m,r),m=m.slice(0,r)),a&&m.sort(t0);const y=d*r,v=l.subarray(y,y+r),b=u.subarray(y,y+r);for(let x=0;x<r;x++)v[x]=m[x].value,b[x]=m[x].index}const c=e.slice();return c[c.length-1]=r,[Et(c,n,l),Et(c,"int32",u)]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function EB(t,e,n,r){const a=Qt(e,n)[0],i=[1,n[0],1];for(let m=0;m<a;m++)i[0]*=n[m];i[1]=n[a];for(let m=a+1;m<n.length;m++)i[2]*=n[m];const o={},s=new Int32Array(n[a]),l=new Or(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let m=0;m<n[a];m++){let y;if(c)y=t[m].toString();else{const v=[];for(let b=0;b<i[0];b++)for(let x=0;x<i[2];x++)v.push(l.get(b,m,x));y=v.join(",")}if(o[y]!==void 0)s[m]=o[y];else{const v=Object.keys(o).length;o[y]=v,s[m]=v,u.push(m)}}const d=i.slice();d[1]=Object.keys(o).length;const h=new Or(d,r);u.forEach((m,y)=>{for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)h.set(l.get(v,m,b),v,y,b)});const f=n.slice();return f[a]=d[1],{outputValues:h.values,outputShape:f,indices:s}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kye=Object.freeze(Object.defineProperty({__proto__:null,addImpl:A7,bincountImpl:WN,bincountReduceImpl:L7,castImpl:P7,ceilImpl:D7,concatImpl:F7,equalImpl:B7,expImpl:j7,expm1Impl:U7,floorImpl:W7,gatherNdImpl:G7,gatherV2Impl:H7,greaterEqualImpl:K7,greaterImpl:q7,lessEqualImpl:Y7,lessImpl:X7,linSpaceImpl:Q7,logImpl:J7,maxImpl:Z7,maximumImpl:eB,minimumImpl:tB,multiplyImpl:GN,negImpl:nB,notEqualImpl:rB,prodImpl:aB,raggedGatherImpl:oB,raggedTensorToTensorImpl:uB,rangeImpl:cB,rsqrtImpl:dB,scatterImpl:up,sigmoidImpl:cye,simpleAbsImpl:M7,sliceImpl:pB,sparseFillEmptyRowsImpl:fB,sparseReshapeImpl:gB,sparseSegmentReductionImpl:qN,sqrtImpl:pye,squaredDifferenceImpl:mB,stridedSliceImpl:yB,stringNGramsImpl:bB,stringSplitImpl:vB,stringToHashBucketFastImpl:xB,subImpl:wB,tileImpl:kB,topKImpl:CB,transposeImpl:HN,uniqueImpl:EB},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/t4("cpu",()=>new Q2,1);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const IB=fn(Ag,t=>t>=0?t:Math.exp(t)-1),Sye={kernelName:Ag,backendName:"cpu",kernelFunc:IB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;We([a],"leakyRelu");const o=be(a.shape),s=n.data.get(a.dataId).values,l=Nr("float32",o);for(let u=0;u<s.length;u++)l[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",l)}const Cye={kernelName:yx,backendName:"cpu",kernelFunc:TB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Eye=wr((t,e)=>t<0?e*t:t);function NB(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;We([r,a],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,l]=Eye(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",s)}const Iye={kernelName:Lx,backendName:"cpu",kernelFunc:NB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _B=fn(lm,t=>Math.max(0,t)),Tye={kernelName:lm,backendName:"cpu",kernelFunc:_B};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const OB=fn(um,t=>Math.min(Math.max(0,t),6)),Nye={kernelName:um,backendName:"cpu",kernelFunc:OB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s2(t,e,n,r,a){if(n==="linear")return Ts({inputs:{x:e},backend:t});if(n==="relu")return _B({inputs:{x:e},backend:t});if(n==="elu")return IB({inputs:{x:e},backend:t});if(n==="relu6")return OB({inputs:{x:e},backend:t});if(n==="prelu")return NB({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return TB({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return hB({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _n(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=be(a.shape),s=iT(i,o),l=be(s);V(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const _ye={kernelName:Vx,backendName:"cpu",kernelFunc:_n};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RB(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;We([a,i],"matMul");const l=a.shape.length,u=i.shape.length,c=o?a.shape[l-2]:a.shape[l-1],d=s?i.shape[u-1]:i.shape[u-2],h=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[u-2]:i.shape[u-1],m=a.shape.slice(0,-2),y=i.shape.slice(0,-2),v=be(m),b=be(y),x=Vt(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,f]);V(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[v,c,h]:[v,h,c],S=s?[b,f,d]:[b,d,f],C=_n({inputs:{x:a},backend:n,attrs:{shape:w}}),E=_n({inputs:{x:i},backend:n,attrs:{shape:S}}),_=o?C.shape[1]:C.shape[2],N=o?C.shape[2]:C.shape[1],$=s?E.shape[1]:E.shape[2],P=Math.max(v,b),D=n.data.get(C.dataId).values,j=n.data.get(E.dataId).values,B=Je(C.shape),K=Je(E.shape),[Y,Z,H]=o?[B[0],1,B[1]]:[B[0],B[1],1],[F,Q,J]=s?[1,K[1],K[0]]:[K[1],1,K[0]],re=N*$,se=Et([P,N,$],C.dtype),he=se.values,de=n.blockSize;for(let ie=0;ie<P;ie++)for(let xe=0;xe<N;xe+=de)for(let q=0;q<$;q+=de)for(let oe=0;oe<_;oe+=de){const pe=Math.min(xe+de,N),Ee=Math.min(q+de,$),Ie=Math.min(oe+de,_);for(let _e=xe;_e<pe;_e++)for(let Fe=q;Fe<Ee;Fe++){let Xe=0;for(let $e=oe;$e<Ie;$e++){const lt=Math.min(ie,v-1)*Y,Ze=Math.min(ie,b-1)*J,nt=D[lt+_e*Z+$e*H],et=j[$e*F+Fe*Q+Ze];Xe+=nt*et}he[ie*re+(_e*$+Fe)]+=Xe}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(x,se.dtype,se.values)}const Oye={kernelName:Bv,backendName:"cpu",kernelFunc:RB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rye(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let h,f,m;const y=[];h=RB({inputs:{a,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(f=sp({inputs:{a:h,b:o},backend:n}),y.push(h),h=f),c&&(m=s2(n,h,c,s,d),y.push(h),h=m);for(const v of y)n.disposeIntermediateTensorInfo(v);return h}const $ye={kernelName:Em,backendName:"cpu",kernelFunc:Rye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mye=fn(kg,t=>Math.acos(t)),Pye={kernelName:kg,backendName:"cpu",kernelFunc:Mye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Aye=fn(Sg,t=>Math.acosh(t)),Lye={kernelName:Sg,backendName:"cpu",kernelFunc:Aye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dye(t){const{inputs:e,backend:n}=t,r=e;We(e,"addN");const a=r.map(s=>n.data.get(s.dataId).values),i=Et(r[0].shape,r[0].dtype),o=i.values;for(let s=0;s<r.length;s++){const l=a[s];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const Fye={kernelName:$v,backendName:"cpu",kernelFunc:Dye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"all");const s=Qt(i,a.shape);let l=s;const u=pr(l,a.shape.length);let c=a;u!=null&&(c=Za({inputs:{x:a},backend:n,attrs:{perm:u}}),l=fr(l.length,a.shape.length)),Zr("all",l,c.shape.length);const[d,h]=Jr(c.shape,l),f=be(h),m=Qr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w&&C}m[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,m);if(o){const b=Rr(d,s),x=_n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const zye={kernelName:Mv,backendName:"cpu",kernelFunc:Bye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"any");const s=Qt(i,a.shape);let l=s;const u=pr(l,a.shape.length);let c=a;u!=null&&(c=Za({inputs:{x:a},backend:n,attrs:{perm:u}}),l=fr(l.length,a.shape.length)),Zr("any",l,c.shape.length);const[d,h]=Jr(c.shape,l),f=be(h),m=Qr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w||C}m[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,m);if(o){const b=Rr(d,s),x=_n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const Vye={kernelName:Pv,backendName:"cpu",kernelFunc:jye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;We(a,"argMax");let o=Qt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Za({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=fr(o.length,l.shape.length)),o=[o[0]],Zr("argMax",o,l.shape.length);const[c,d]=Jr(l.shape,o),h=be(c),f=Qr(h,"int32"),m=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*m;let x=y[b],w=0;for(let S=0;S<m;++S){const C=y[b+S];C>x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const Wye={kernelName:Av,backendName:"cpu",kernelFunc:Uye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;We(a,"argMin");let o=Qt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Za({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=fr(o.length,l.shape.length)),o=[o[0]],Zr("argMin",o,l.shape.length);const[c,d]=Jr(l.shape,o),h=be(c),f=Qr(h,"int32"),m=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*m;let x=y[b],w=0;for(let S=0;S<m;++S){const C=y[b+S];C<x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const Hye={kernelName:Lv,backendName:"cpu",kernelFunc:Gye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qye=fn(Cg,t=>Math.asin(t)),Kye={kernelName:Cg,backendName:"cpu",kernelFunc:qye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xye=fn(Eg,t=>Math.asinh(t)),Yye={kernelName:Eg,backendName:"cpu",kernelFunc:Xye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qye=fn(Ig,t=>Math.atan(t)),Jye={kernelName:Ig,backendName:"cpu",kernelFunc:Qye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Zye=wr((t,e)=>Math.atan2(t,e)),ebe=Vr(Ng,Zye),tbe={kernelName:Ng,backendName:"cpu",kernelFunc:ebe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nbe=fn(Tg,t=>Math.atanh(t)),rbe={kernelName:Tg,backendName:"cpu",kernelFunc:nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XN(t,e,n,r,a,i){const o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,f=a.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Et(a.outShape,n),v=y.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,E=S*r[0];for(let _=0;_<a.inChannels;++_)for(let N=0;N<a.outHeight;++N){const $=N*o-h,P=Math.max(0,$),D=Math.min(a.inHeight,c+$),j=C+N*x;for(let B=0;B<a.outWidth;++B){const K=B*s-f,Y=Math.max(0,K),Z=Math.min(a.inWidth,d+K);let H=m,F=0,Q=0;for(let re=P;re<D;re+=l){const se=E+re*r[1];for(let he=Y;he<Z;he+=u){const de=se+he*r[2],ie=t[de+_];i==="max"&&ie>H?H=ie:i==="avg"&&(F+=ie,Q++)}if(isNaN(H))break}const J=j+B*w+_;v[J]=i==="avg"?F/Q:H}}}return y}function $B(t,e,n,r,a=!1,i=!1){const o=Et(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,m=r.padInfo.left,y=Et(e,n,t);for(let v=0;v<r.batchSize;++v)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*s-f;let S=w;for(;S<0;)S+=u;const C=Math.min(r.inHeight,d+w);for(let E=0;E<r.outWidth;++E){const _=E*l-m;let N=_;for(;N<0;)N+=c;const $=Math.min(r.inWidth,h+_);let P=Number.NEGATIVE_INFINITY,D=-1;for(let j=S;j<C;j+=u){const B=j-w;for(let K=N;K<$;K+=c){const Y=K-_,Z=y.get(v,j,K,b);Z>P&&(P=Z,a?D=i?((v*r.inHeight+j)*r.inWidth+K)*r.inChannels+b:(j*r.inWidth+K)*r.inChannels+b:D=B*h+Y)}}o.set(D,v,x,E,b)}}return o}function MB(t,e,n,r,a,i){const o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,f=a.effectiveFilterHeight,m=a.effectiveFilterWidth,y=a.padInfo.front,v=a.padInfo.top,b=a.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Et(a.outShape,n),S=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],_=a.outShape[3]*a.outShape[4],N=a.outShape[4];for(let $=0;$<a.batchSize;++$){const P=$*C,D=$*r[0];for(let j=0;j<a.inChannels;++j)for(let B=0;B<a.outDepth;++B){const K=B*o-y;let Y=K;for(;Y<0;)Y+=u;const Z=Math.min(a.inDepth,h+K),H=P+B*E;for(let F=0;F<a.outHeight;++F){const Q=F*s-v;let J=Q;for(;J<0;)J+=c;const re=Math.min(a.inHeight,f+Q),se=H+F*_;for(let he=0;he<a.outWidth;++he){const de=he*l-b;let ie=de;for(;ie<0;)ie+=d;const xe=Math.min(a.inWidth,m+de),q=se+he*N;let oe=x,pe=0,Ee=0;for(let _e=Y;_e<Z;_e+=u){const Fe=D+_e*r[1];for(let Xe=J;Xe<re;Xe+=c){const $e=Fe+Xe*r[2];for(let lt=ie;lt<xe;lt+=d){const Ze=$e+lt*r[3],nt=t[Ze+j];if(i==="max"&&nt>oe?oe=nt:i==="avg"&&(pe+=nt,Ee++),isNaN(oe))break}if(isNaN(oe))break}if(isNaN(oe))break}const Ie=q+j;S[Ie]=i==="avg"?pe/Ee:oe}}}}return w}function abe(t,e){const n=Et(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,m=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let b=0;b<e.outDepth;++b){const x=b*r-h;let w=x;for(;w<0;)w+=o;const S=Math.min(e.inDepth,u+x);for(let C=0;C<e.outHeight;++C){const E=C*a-f;let _=E;for(;_<0;)_+=s;const N=Math.min(e.inHeight,c+E);for(let $=0;$<e.outWidth;++$){const P=$*i-m;let D=P;for(;D<0;)D+=l;const j=Math.min(e.inWidth,d+P);let B=Number.NEGATIVE_INFINITY,K=-1;for(let Y=w;Y<S;Y+=o){const Z=Y-x;for(let H=_;H<N;H+=s){const F=H-E;for(let Q=D;Q<j;Q+=l){const J=Q-P,re=t.get(y,Y,H,Q,v);re>=B&&(B=re,K=Z*c*d+F*c+J)}}}n.set(K,y,b,C,$,v)}}}return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ibe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;We(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ga(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&wn(c.inShape,c.outShape))d=Ts({inputs:{x:a},backend:n});else{const h=n.data.get(a.dataId).values,f=Je(a.shape),m=XN(h,a.shape,a.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return d}const obe={kernelName:Dv,backendName:"cpu",kernelFunc:ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;We(a,"avgPool3d");const c=xl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,h=MB(d,a.shape,a.dtype,Je(a.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const lbe={kernelName:Fv,backendName:"cpu",kernelFunc:sbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ube(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;We([a,i],"avgPool3DGrad");const c=xl(i.shape,o,s,1,l,u),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,m=c.filterDepth,y=c.filterHeight,v=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,_=S-1-c.padInfo.front,N=E-1-c.padInfo.left,$=C-1-c.padInfo.top,P=Et(i.shape,"float32"),D=1/(m*y*v),j=n.bufferSync(a);for(let B=0;B<c.batchSize;++B)for(let K=0;K<c.inChannels;++K)for(let Y=0;Y<c.inDepth;++Y)for(let Z=0;Z<c.inHeight;++Z)for(let H=0;H<c.inWidth;++H){const F=Y-_,Q=Z-$,J=H-N;let re=0;for(let se=0;se<S;se+=b){const he=(F+se)/d;if(!(he<0||he>=c.outDepth||Math.floor(he)!==he))for(let de=0;de<C;de+=x){const ie=(Q+de)/h;if(!(ie<0||ie>=c.outHeight||Math.floor(ie)!==ie))for(let xe=0;xe<E;xe+=w){const q=(J+xe)/f;if(q<0||q>=c.outWidth||Math.floor(q)!==q)continue;const oe=j.get(B,he,ie,q,K);re+=oe}}}P.set(re*D,B,Y,Z,H,K)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const cbe={kernelName:pT,backendName:"cpu",kernelFunc:ube};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;We([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=ho(o.shape,s,l,1,u),d=c.strideHeight,h=c.strideWidth,f=c.filterHeight,m=c.filterWidth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=Et(o.shape,"float32"),E=1/(f*m),_=n.data.get(a.dataId).values,N=Et(a.shape,"float32",_);for(let $=0;$<c.batchSize;++$)for(let P=0;P<c.inChannels;++P)for(let D=0;D<c.inHeight;++D)for(let j=0;j<c.inWidth;++j){const B=D-S,K=j-w;let Y=0;for(let Z=0;Z<b;Z+=y){const H=(B+Z)/d;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let F=0;F<x;F+=v){const Q=(K+F)/h;if(Q<0||Q>=c.outWidth||Math.floor(Q)!==Q)continue;const J=N.get($,H,Q,P);Y+=J}}C.set(Y*E,$,D,j,P)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const hbe={kernelName:hT,backendName:"cpu",kernelFunc:dbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:o,mean:s,variance:l}=e;V(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),We([a,s,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),m=o?n.data.get(o.dataId).values:new Float32Array([0]),y=new Float32Array(c.length),v=m.length,b=f.length,x=h.length,w=d.length;let S=0,C=0,E=0,_=0;for(let N=0;N<c.length;++N)y[N]=m[S++]+(c[N]-d[C++])*f[E++]/Math.sqrt(h[_++]+u),S>=v&&(S=0),C>=w&&(C=0),E>=b&&(E=0),_>=x&&(_=0);return n.makeTensorInfo(a.shape,a.dtype,y)}const fbe={kernelName:hx,backendName:"cpu",kernelFunc:pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;We([a],"batchToSpaceND");const s=i.reduce((b,x)=>b*x),l=Qm(a.shape,i,s),u=Jm(l.length,i.length),c=Zm(a.shape,i,s),d=lN(o,i.length),h=uN(c,o,i.length),f=_n({inputs:{x:a},backend:n,attrs:{shape:l}}),m=Za({inputs:{x:f},backend:n,attrs:{perm:u}}),y=_n({inputs:{x:m},backend:n,attrs:{shape:c}}),v=pd({inputs:{x:y},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const mbe={kernelName:zv,backendName:"cpu",kernelFunc:gbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ybe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=WN(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const bbe={kernelName:jv,backendName:"cpu",kernelFunc:ybe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vbe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Vt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const xbe={kernelName:Vv,backendName:"cpu",kernelFunc:vbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wbe=fn(Rg,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),kbe={kernelName:Rg,backendName:"cpu",kernelFunc:wbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sbe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(be(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<s.length;u++){const c=s[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},Cbe={kernelName:Wv,backendName:"cpu",kernelFunc:Sbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cp(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const Ebe={kernelName:mx,backendName:"cpu",kernelFunc:cp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Qt(a,e[0].shape)[0],o=e.map(y=>y.shape);iN(o,i);let s=Es(e.map(y=>y.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(y=>be(y.shape)>0);if(l.length===1)return Ts({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(S=>hd({inputs:{input:S},backend:n})),v=l.map(S=>cp({inputs:{input:S},backend:n})),b=dp({inputs:y,backend:n,attrs:{axis:i}}),x=dp({inputs:v,backend:n,attrs:{axis:i}}),w=vi({inputs:{real:b,imag:x},backend:n});return y.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const u=l.map(y=>{const v=[-1,be(y.shape.slice(i))];return _n({inputs:{x:y},backend:n,attrs:{shape:v}})}),c=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));s=Es(u.map(y=>y.shape),1);const d=u[0].shape[0]===1,h=F7(c,s,e[0].dtype,d),f=Es(l.map(y=>y.shape),i),m=n.makeTensorInfo(f,e[0].dtype,h);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const Ibe={kernelName:Gv,backendName:"cpu",kernelFunc:dp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;We([a,i],"conv2d");const d=wl(l),h=jr(a.shape,i.shape,o,u,s,c,!1,d),f=h.filterHeight,m=h.filterWidth,y=h.dilationHeight,v=h.dilationWidth,b=h.padInfo.left,x=h.padInfo.top,w=h.dataFormat==="channelsLast",S=new Or(h.outShape,a.dtype),C=Je(a.shape),E=Je(i.shape),_=C[0],N=w?C[1]:C[2],$=w?C[2]:1,P=w?1:C[1],D=S.strides[0],j=w?S.strides[1]:S.strides[2],B=w?S.strides[2]:1,K=w?1:S.strides[1],Y=n.data.get(a.dataId).values,Z=n.data.get(i.dataId).values,H=S.values;for(let F=0;F<h.batchSize;++F){const Q=F*_,J=F*D;for(let re=0;re<h.outHeight;++re){const se=J+re*j,he=re*h.strideHeight-x;for(let de=0;de<f;++de){const ie=he+de*y;if(ie<0||ie>=h.inHeight)continue;const xe=de*E[0],q=Q+ie*N;for(let oe=0;oe<h.outWidth;++oe){const pe=se+oe*B,Ee=oe*h.strideWidth-b;for(let Ie=0;Ie<m;++Ie){const _e=Ee+Ie*v;if(_e<0||_e>=h.inWidth)continue;const Fe=xe+Ie*E[1],Xe=q+_e*$;let $e=Fe;for(let lt=0;lt<h.inChannels;++lt){const Ze=Y[Xe+lt*P];for(let nt=0;nt<h.outChannels;++nt)H[pe+nt*K]+=Ze*Z[$e+nt];$e+=h.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,H)}const Tbe={kernelName:Hv,backendName:"cpu",kernelFunc:PB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;We([a,i],"conv2dBackpropFilter");const d=wl(l),h=jr(a.shape,c,o,1,s,u,!1,d),{strideHeight:f,strideWidth:m,filterHeight:y,filterWidth:v}=h,b=h.dataFormat==="channelsLast",x=new Or(h.filterShape,"float32"),w=h.padInfo.left,S=h.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,_=new Or(a.shape,a.dtype,C),N=new Or(i.shape,i.dtype,E);for(let $=0;$<y;++$){const P=Math.max(0,Math.ceil((S-$)/f)),D=Math.min(h.outHeight,(h.inHeight+S-$)/f);for(let j=0;j<v;++j){const B=Math.max(0,Math.ceil((w-j)/m)),K=Math.min(h.outWidth,(h.inWidth+w-j)/m);for(let Y=0;Y<h.inChannels;++Y)for(let Z=0;Z<h.outChannels;++Z){let H=0;for(let F=0;F<h.batchSize;++F)for(let Q=P;Q<D;++Q){const J=$+Q*f-S;for(let re=B;re<K;++re){const se=j+re*m-w;b?H+=_.get(F,J,se,Y)*N.get(F,Q,re,Z):H+=_.get(F,Y,J,se)*N.get(F,Z,Q,re)}}x.set(H,$,j,Y,Z)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const _be={kernelName:qv,backendName:"cpu",kernelFunc:Nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Obe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;We([a,i],"conv2dBackpropInput");const d=Je(i.shape),h=Je(a.shape);let f=wl(u);const m=jr(o,i.shape,s,1,l,c,!1,f),y=new Or(m.inShape,"float32"),v=y.values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,[w,S,C]=d,{batchSize:E,filterHeight:_,filterWidth:N,inChannels:$,inHeight:P,inWidth:D,outChannels:j,outHeight:B,outWidth:K,strideHeight:Y,strideWidth:Z}=m;f=m.dataFormat;const H=_-1-m.padInfo.top,F=N-1-m.padInfo.left,Q=f==="channelsLast",J=y.strides[0],re=Q?y.strides[1]:y.strides[2],se=Q?y.strides[2]:1,he=Q?1:y.strides[1],de=h[0],ie=Q?h[1]:h[2],xe=Q?h[2]:1,q=Q?1:h[1];for(let oe=0;oe<E;++oe)for(let pe=0;pe<$;++pe)for(let Ee=0;Ee<P;++Ee){const Ie=Ee-H,_e=Math.max(0,Math.ceil(Ie/Y)),Fe=Math.min(B,(_+Ie)/Y);for(let Xe=0;Xe<D;++Xe){const $e=Xe-F,lt=Math.max(0,Math.ceil($e/Z)),Ze=Math.min(K,(N+$e)/Z);let nt=0;for(let ln=_e;ln<Fe;++ln){const Ut=ln*Y-Ie;for(let Jt=lt;Jt<Ze;++Jt){const Zt=Jt*Z-$e,Mt=de*oe+ie*ln+xe*Jt,It=w*(_-1-Ut)+S*(N-1-Zt)+C*pe;for(let Vn=0;Vn<j;++Vn){const Qn=b[Mt+q*Vn],Ua=x[It+Vn];nt+=Qn*Ua}}}const et=J*oe+re*Ee+se*Xe+he*pe;v[et]=nt}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Rbe={kernelName:Kv,backendName:"cpu",kernelFunc:Obe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $be(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r;We([a,i],"conv3d");const u=Ou(a.shape,i.shape,o,l,s),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:m,dilationWidth:y,padInfo:v}=u,b=v.front,x=v.left,w=v.top,S=new Or(u.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,_=S.values,N=Je(a.shape),$=Je(i.shape);for(let P=0;P<u.batchSize;++P){const D=P*N[0],j=P*S.strides[0];for(let B=0;B<u.outDepth;++B){const K=j+B*S.strides[1],Y=B*u.strideDepth-b;for(let Z=0;Z<c;++Z){const H=Y+Z*f;if(H<0||H>=u.inDepth)continue;const F=Z*$[0],Q=D+H*N[1];for(let J=0;J<u.outHeight;++J){const re=K+J*S.strides[2],se=J*u.strideHeight-w;for(let he=0;he<d;++he){const de=se+he*m;if(de<0||de>=u.inHeight)continue;const ie=F+he*$[1],xe=Q+de*N[2];for(let q=0;q<u.outWidth;++q){const oe=re+q*u.outChannels,pe=q*u.strideWidth-x;for(let Ee=0;Ee<h;++Ee){const Ie=pe+Ee*y;if(Ie<0||Ie>=u.inWidth)continue;const _e=ie+Ee*$[2],Fe=xe+Ie*u.inChannels;let Xe=_e;for(let $e=0;$e<u.inChannels;++$e){const lt=C[Fe+$e];for(let Ze=0;Ze<u.outChannels;++Ze)_[oe+Ze]+=lt*E[Xe+Ze];Xe+=u.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Mbe={kernelName:Xv,backendName:"cpu",kernelFunc:$be};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r;We([a,i],"conv3dBackpropFilterV2");const u=Je(a.shape),c=Je(i.shape),d=Ou(a.shape,l,o,1,s),h=d.strideDepth,f=d.strideHeight,m=d.strideWidth,y=d.filterDepth,v=d.filterHeight,b=d.filterWidth,x=new Or(d.filterShape,"float32"),w=x.values,[S,C,E,_]=x.strides,N=n.data.get(i.dataId).values,[$,P,D,j]=c,B=n.data.get(a.dataId).values,[K,Y,Z,H]=u,F=d.padInfo.front,Q=d.padInfo.left,J=d.padInfo.top;for(let re=0;re<y;++re){const se=Math.max(0,Math.ceil((F-re)/h)),he=Math.min(d.outDepth,(d.inDepth+F-re)/h),de=re*S;for(let ie=0;ie<v;++ie){const xe=Math.max(0,Math.ceil((J-ie)/f)),q=Math.min(d.outHeight,(d.inHeight+J-ie)/f),oe=ie*C+de;for(let pe=0;pe<b;++pe){const Ee=Math.max(0,Math.ceil((Q-pe)/m)),Ie=Math.min(d.outWidth,(d.inWidth+Q-pe)/m),_e=pe*E+oe;for(let Fe=0;Fe<d.inChannels;++Fe){const Xe=Fe*_+_e;for(let $e=0;$e<d.outChannels;++$e){let lt=0;for(let Ze=0;Ze<d.batchSize;++Ze){const nt=Ze*K,et=Ze*$;for(let ln=se;ln<he;++ln){const Ut=(re+ln*h-F)*Y+nt,Jt=ln*P+et;for(let Zt=xe;Zt<q;++Zt){const Mt=(ie+Zt*f-J)*Z+Ut,It=Zt*D+Jt;for(let Vn=Ee;Vn<Ie;++Vn){const Qn=(pe+Vn*m-Q)*H+Mt,Ua=Vn*j+It;lt+=B[Qn+Fe]*N[Ua+$e]}}}}w[Xe+$e]=lt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Abe={kernelName:fT,backendName:"cpu",kernelFunc:Pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r;We([a],"conv3dBackpropInputV2");const u=Je(a.shape),c=Je(i.shape),d=Ou(l,i.shape,s,1,o),h=new Or(d.inShape,"float32"),f=h.values,[m,y,v,b]=h.strides,x=n.data.get(a.dataId).values,[w,S,C,E]=u,_=n.data.get(i.dataId).values,[N,$,P,D]=c,{batchSize:j,filterDepth:B,filterHeight:K,filterWidth:Y,inChannels:Z,inDepth:H,inHeight:F,inWidth:Q,outChannels:J,outDepth:re,outHeight:se,outWidth:he,strideDepth:de,strideHeight:ie,strideWidth:xe}=d,q=B-1-d.padInfo.front,oe=K-1-d.padInfo.top,pe=Y-1-d.padInfo.left;for(let Ee=0;Ee<j;++Ee)for(let Ie=0;Ie<Z;++Ie)for(let _e=0;_e<H;++_e){const Fe=_e-q,Xe=Math.max(0,Math.ceil(Fe/de)),$e=Math.min(re,(B+Fe)/de);for(let lt=0;lt<F;++lt){const Ze=lt-oe,nt=Math.max(0,Math.ceil(Ze/ie)),et=Math.min(se,(K+Ze)/ie);for(let ln=0;ln<Q;++ln){const Ut=ln-pe,Jt=Math.max(0,Math.ceil(Ut/xe)),Zt=Math.min(he,(Y+Ut)/xe);let Mt=0;for(let It=Xe;It<$e;++It){const Vn=It*de-Fe;for(let Qn=nt;Qn<et;++Qn){const Ua=Qn*ie-Ze;for(let Rn=Jt;Rn<Zt;++Rn){const ei=Rn*xe-Ut,ko=w*Ee+S*It+C*Qn+E*Rn,wi=N*(B-1-Vn)+$*(K-1-Ua)+P*(Y-1-ei)+D*Ie;for(let gn=0;gn<J;++gn){const ti=x[ko+gn],ki=_[wi+gn];Mt+=ti*ki}}}}f[m*Ee+y*_e+v*lt+b*ln+Ie]=Mt}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const Dbe={kernelName:Yv,backendName:"cpu",kernelFunc:Lbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fbe=fn($g,t=>Math.cos(t)),Bbe={kernelName:$g,backendName:"cpu",kernelFunc:Fbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zbe=fn(Mg,t=>Math.cosh(t)),jbe={kernelName:Mg,backendName:"cpu",kernelFunc:zbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vbe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,h,f]=a.shape,m=i.shape[0],[y,v]=s,b=Et([m,y,v,f],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,C=Je(a.shape),E=Je(b.shape);for(let _=0;_<m;_++){const N=_*4,$=x[N],P=x[N+1],D=x[N+2],j=x[N+3],B=w[_];if(B>=c)continue;const K=y>1?(D-$)*(d-1)/(y-1):0,Y=v>1?(j-P)*(h-1)/(v-1):0;for(let Z=0;Z<y;Z++){const H=y>1?$*(d-1)+Z*K:.5*($+D)*(d-1);if(H<0||H>d-1){for(let F=0;F<v;F++)for(let Q=0;Q<f;Q++){const J=Q+F*E[2]+Z*E[1]+_*E[0];b.values[J]=u}continue}if(l==="bilinear"){const F=Math.floor(H),Q=Math.ceil(H),J=H-F;for(let re=0;re<v;re++){const se=v>1?P*(h-1)+re*Y:.5*(P+j)*(h-1);if(se<0||se>h-1){for(let xe=0;xe<f;xe++){const q=xe+re*E[2]+Z*E[1]+_*E[0];b.values[q]=u}continue}const he=Math.floor(se),de=Math.ceil(se),ie=se-he;for(let xe=0;xe<f;xe++){let q=xe+he*C[2]+F*C[1]+B*C[0];const oe=S[q];q=xe+de*C[2]+F*C[1]+B*C[0];const pe=S[q];q=xe+he*C[2]+Q*C[1]+B*C[0];const Ee=S[q];q=xe+de*C[2]+Q*C[1]+B*C[0];const Ie=S[q],_e=oe+(pe-oe)*ie,Fe=Ee+(Ie-Ee)*ie;q=xe+re*E[2]+Z*E[1]+_*E[0],b.values[q]=_e+(Fe-_e)*J}}}else for(let F=0;F<v;++F){const Q=v>1?P*(h-1)+F*Y:.5*(P+j)*(h-1);if(Q<0||Q>h-1){for(let se=0;se<f;se++){const he=se+F*E[2]+Z*E[1]+_*E[0];b.values[he]=u}continue}const J=Math.round(Q),re=Math.round(H);for(let se=0;se<f;se++){const he=se+J*C[2]+re*C[1]+B*C[0],de=se+F*E[2]+Z*E[1]+_*E[0];b.values[de]=S[he]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Ube={kernelName:Zv,backendName:"cpu",kernelFunc:Vbe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;We(a,"cumprod");const l=pr([i],a.shape.length);let u=a;l!=null&&(u=Za({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=fr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Ja(u.dtype,"int32"),h=Ov(be(u.shape),d),f=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],y=s?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=m)for(let x=0;x<m;x++){const w=y(b,x);if(x===0)h[w]=o?1:f[w];else{const S=y(b,x-1);h[w]=o?f[S]*h[S]:f[w]*h[S]}}const v=n.makeTensorInfo(u.shape,d,h);if(l!=null){const b=Vm(l),x=Za({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const Gbe={kernelName:Qv,backendName:"cpu",kernelFunc:Wbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;We(a,"cumsum");const l=pr([i],a.shape.length);let u=a;l!=null&&(u=Za({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=fr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Ja(u.dtype,"int32"),h=Qr(be(u.shape),d),f=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],y=s?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=m)for(let x=0;x<m;x++){const w=y(b,x);if(x===0)h[w]=o?0:f[w];else{const S=y(b,x-1);h[w]=o?f[S]+h[S]:f[w]+h[S]}}const v=n.makeTensorInfo(u.shape,d,h);if(l!=null){const b=Vm(l),x=Za({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const qbe={kernelName:Jv,backendName:"cpu",kernelFunc:Hbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=WN(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=L7(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const Xbe={kernelName:ex,backendName:"cpu",kernelFunc:Kbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ybe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r;V(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*i,h=u*i,f=c/(i*i),m=n.data.get(a.dataId).values,y=new Float32Array(s*d*h*f);let v=0;for(let b=0;b<s;++b)for(let x=0;x<d;++x){const w=Math.floor(x/i),S=x%i;for(let C=0;C<h;++C){const E=Math.floor(C/i),_=C%i,N=(S*i+_)*f;for(let $=0;$<f;++$){const P=$+N+c*(E+u*(w+l*b));y[v++]=m[P]}}}return n.makeTensorInfo([s,d,h,f],a.dtype,y)}const Qbe={kernelName:tx,backendName:"cpu",kernelFunc:Ybe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function AB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;We([a,i],"depthwiseConv2DNative");const c=Je(a.shape),d=Je(i.shape);let h=l;h==null&&(h=[1,1]),V(ga(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const f=jr(a.shape,i.shape,o,h,s,u,!0),{filterHeight:m,filterWidth:y,dilationHeight:v,dilationWidth:b,padInfo:x}=f,w=x.left,S=x.top,C=f.outChannels/f.inChannels,E=new Or(f.outShape,a.dtype),_=n.data.get(a.dataId).values,N=n.data.get(i.dataId).values,$=E.values;for(let P=0;P<f.batchSize;++P){const D=P*c[0],j=P*E.strides[0];for(let B=0;B<f.outHeight;++B){const K=j+B*E.strides[1],Y=B*f.strideHeight-S;for(let Z=0;Z<m;++Z){const H=Y+Z*v;if(H<0||H>=f.inHeight)continue;const F=Z*d[0],Q=D+H*c[1];for(let J=0;J<f.outWidth;++J){const re=K+J*E.strides[2],se=J*f.strideWidth-w;for(let he=0;he<y;++he){const de=se+he*b;if(de<0||de>=f.inWidth)continue;const ie=F+he*d[1],xe=Q+de*f.inChannels;let q=re,oe=ie;for(let pe=0;pe<f.inChannels;++pe){const Ee=_[xe+pe];for(let Ie=0;Ie<C;++Ie)$[q+Ie]+=Ee*N[oe+Ie];q+=C,oe+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Jbe={kernelName:nx,backendName:"cpu",kernelFunc:AB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;We([a,i],"depthwiseConv2dNativeBackpropFilter");const d=jr(a.shape,c,o,s,l,u,!0),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:y}=d,v=new Or(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(a.dataId).values,C=new Or(a.shape,a.dtype,S),E=n.data.get(i.dataId).values,_=new Or(i.shape,i.dtype,E);for(let N=0;N<m;++N){const $=Math.max(0,Math.ceil((x-N)/h)),P=Math.min(d.outHeight,(d.inHeight+x-N)/h);for(let D=0;D<y;++D){const j=Math.max(0,Math.ceil((b-D)/f)),B=Math.min(d.outWidth,(d.inWidth+b-D)/f);for(let K=0;K<d.outChannels;++K){const Y=Math.trunc(K/w),Z=K%w;let H=0;for(let F=0;F<d.batchSize;++F)for(let Q=$;Q<P;++Q){const J=N+Q*h-x;for(let re=j;re<B;++re){const se=D+re*f-b;H+=C.get(F,J,se,Y)*_.get(F,Q,re,K)}}v.set(H,N,D,Y,Z)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const eve={kernelName:rx,backendName:"cpu",kernelFunc:Zbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;We([a,i],"depthwiseConv2DNativeBackpropInput");const d=Je(a.shape),h=Je(i.shape),f=jr(c,i.shape,o,s,l,u,!0),m=new Or(f.inShape,"float32"),y=m.values,[v,b,x]=m.strides,w=n.data.get(a.dataId).values,[S,C,E]=d,_=n.data.get(i.dataId).values,[N,$,P]=h,{batchSize:D,filterHeight:j,filterWidth:B,inChannels:K,inHeight:Y,inWidth:Z,outChannels:H,outHeight:F,outWidth:Q,strideHeight:J,strideWidth:re}=f,se=j-1-f.padInfo.top,he=B-1-f.padInfo.left,de=H/K;for(let ie=0;ie<D;++ie)for(let xe=0;xe<K;++xe)for(let q=0;q<Y;++q){const oe=q-se,pe=Math.max(0,Math.ceil(oe/J)),Ee=Math.min(F,(j+oe)/J);for(let Ie=0;Ie<Z;++Ie){const _e=Ie-he,Fe=Math.max(0,Math.ceil(_e/re)),Xe=Math.min(Q,(B+_e)/re);let $e=0;for(let lt=pe;lt<Ee;++lt){const Ze=lt*J-oe;for(let nt=Fe;nt<Xe;++nt){const et=nt*re-_e,ln=S*ie+C*lt+E*nt,Ut=N*(j-1-Ze)+$*(B-1-et)+P*xe;for(let Jt=0;Jt<de;++Jt){const Zt=xe*de+Jt,Mt=w[ln+Zt],It=_[Ut+Jt];$e+=Mt*It}}}y[v*ie+b*q+x*Ie+xe]=$e}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const nve={kernelName:ax,backendName:"cpu",kernelFunc:tve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rve(t){const{inputs:e,backend:n}=t,{x:r}=e,a=be(r.shape),i=n.data.get(r.dataId).values,o=Et([a,a],r.dtype),s=o.values;for(let u=0;u<i.length;u++)s[u*a+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const ave={kernelName:ix,backendName:"cpu",kernelFunc:rve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ive={kernelName:ox,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:o,dilations:s}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(a.dataId).values,h=a.shape.length,{batchSize:f,inHeight:m,inWidth:y,inChannels:v,outHeight:b,outWidth:x,padInfo:w,strideHeight:S,strideWidth:C,filterHeight:E,filterWidth:_,dilationHeight:N,dilationWidth:$,outShape:P}=Fm(r.shape,a.shape,i,o,"NHWC",s),D=be(P),j=P.length,B=_r(r.dtype,D);for(let K=0;K<f;++K)for(let Y=0;Y<b;++Y){const Z=Y*S-w.top;for(let H=0;H<x;++H){const F=H*C-w.left;for(let Q=0;Q<v;++Q){let J=Number.MIN_SAFE_INTEGER;for(let se=0;se<E;++se){const he=Z+se*N;if(he>=0&&he<m)for(let de=0;de<_;++de){const ie=F+de*$;if(ie>=0&&ie<y){const xe=Wo([K,he,ie,Q],c,Je(r.shape)),q=Wo([se,de,Q],h,Je(a.shape)),oe=u[xe]+d[q];oe>J&&(J=oe)}}}const re=Wo([K,Y,H,Q],j,Je(P));B[re]=J}}}return{dataId:l.write(Iu(B,r.dtype),P,r.dtype),shape:P,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ove={kernelName:mT,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Fi(r.shape,u.data.get(r.dataId).values),d=Fi(a.shape,u.data.get(a.dataId).values),{batchSize:h,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:_,dilationWidth:N,outShape:$}=Fm(r.shape,a.shape,o,s,"NHWC",l);V(i.rank===$.length,()=>`Error in ${mT}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const P=Fi($,u.data.get(i.dataId).values),D=sT(a.shape,a.dtype);for(let j=0;j<h;++j)for(let B=0;B<v;++B){const K=B*w-x.top;for(let Y=0;Y<b;++Y){const Z=Y*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Q=0,J=0;for(let re=0;re<C;++re){const se=K+re*_;if(se>=0&&se<f)for(let he=0;he<E;++he){const de=Z+he*N;if(de>=0&&de<m){const ie=c[j][se][de][H]+d[re][he][H];ie>F&&(F=ie,Q=re,J=he)}}}D[Q][J][H]+=P[j][B][Y][H]}}}return{dataId:u.write(Iu(D,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sve={kernelName:gT,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Fi(r.shape,u.data.get(r.dataId).values),d=Fi(a.shape,u.data.get(a.dataId).values),{batchSize:h,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:_,dilationWidth:N,outShape:$}=Fm(r.shape,a.shape,o,s,"NHWC",l);V(i.rank===$.length,()=>`Error in ${gT}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const P=Fi($,u.data.get(i.dataId).values),D=sT(r.shape,r.dtype);for(let j=0;j<h;++j)for(let B=0;B<v;++B){const K=B*w-x.top;for(let Y=0;Y<b;++Y){const Z=Y*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Q=K<0?0:K,J=Z<0?0:Z;for(let re=0;re<C;++re){const se=K+re*_;if(se>=0&&se<f)for(let he=0;he<E;++he){const de=Z+he*N;if(de>=0&&de<m){const ie=c[j][se][de][H]+d[re][he][H];ie>F&&(F=ie,Q=se,J=de)}}}D[j][Q][J][H]+=P[j][B][Y][H]}}}return{dataId:u.write(Iu(D,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function n0(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"sum");let s;a.dtype==="bool"?s=Fu({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):s=Ts({inputs:{x:a},backend:n});const l=s.shape.length,u=Qt(i,s.shape),c=pr(u,l);let d=u,h=s;c!=null&&(h=Za({inputs:{x:s},backend:n,attrs:{perm:c}}),d=fr(d.length,l)),Zr("sum",d,h.shape.length);const[f,m]=Jr(h.shape,d),y=Ja(h.dtype,"int32");let v=i2(n,f,y);const b=be(m),x=n.data.get(v.dataId).values,w=n.data.get(h.dataId).values;for(let S=0;S<x.length;++S){const C=S*b;let E=0;for(let _=0;_<b;++_)E+=w[C+_];x[S]=E}if(o){const S=Rr(v.shape,u),C=v;v=_n({inputs:{x:v},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(h),v}const lve={kernelName:Yx,backendName:"cpu",kernelFunc:n0};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uve(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=xN(a,i.length);kN(o.length,l,i);const{path:u,steps:c}=SN(s,l),d=c.length;let h=null,f=o.length;const m=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=wN(f,l[v]);let w;CN(b)?w=i[v]:(w=Za({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),m.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);wn(w.shape,S)||(w=_n({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),h===null?h=w:(h=o2({inputs:{a:w,b:h},backend:n}),m.push(h))}y<d-1&&(u[y]>=0&&(h=n0({inputs:{x:h},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),m.push(h)),f--)}for(const y of m)y!==h&&n.disposeIntermediateTensorInfo(y);return h}const cve={kernelName:sx,backendName:"cpu",kernelFunc:uve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dve(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;We([r,a],"eluGrad");const i=new Float32Array(be(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=1?i[l]=s[l]:i[l]=s[l]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}const hve={kernelName:yT,backendName:"cpu",kernelFunc:dve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pve=hN,fve=pN,gve=fN,mve=gN,yve=mN,bve=yN,vve=fn(Lg,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+pve*n);return e*(1-((((bve*r+yve)*r+mve)*r+gve)*r+fve)*r*Math.exp(-n*n))}),xve={kernelName:Lg,backendName:"cpu",kernelFunc:vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l2(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(V(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),_n({inputs:{x:a},backend:n,attrs:{shape:s}})}const wve={kernelName:lx,backendName:"cpu",kernelFunc:l2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kve=wr((t,e)=>t/e),YN=Vr(Pg,kve),QN={kernelName:Pg,backendName:"cpu",kernelFunc:YN};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LB(t,e,n){const r=t.shape,a=r[0],i=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,i],c=be(u),d=Nr("float32",c),h=Nr("float32",c);for(let v=0;v<a;v++){const b=pd({inputs:{x:s},backend:n,attrs:{begin:[v,0],size:[1,i]}}),x=pd({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),w=vi({inputs:{real:b,imag:x},backend:n}),{real:S,imag:C}=Sve(w,e,n),E=Cl(S,C);for(let _=0;_<i;_++){const N=bN(E,_);d[v*i+_]=N.real,h[v*i+_]=N.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const f=n.makeTensorInfo(u,"float32",d),m=n.makeTensorInfo(u,"float32",h),y=vi({inputs:{real:f,imag:m},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}function Sve(t,e,n){const r=be(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(Cve(r)){const s=JN(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",fl(r,"float32")),h=Ts({inputs:{x:d},backend:n}),f=QN.kernelFunc({inputs:{a:u,b:d},backend:n}),m=QN.kernelFunc({inputs:{a:c,b:h},backend:n}),y=n.data.get(f.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),{real:y,imag:v}}return s}else{const s=Cl(i,o),l=Eve(s,r,e);return J9(l)}}function Cve(t){return(t&t-1)===0}function JN(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=Cl(t,e),o=n/2,s=Z9(i),l=s.real,u=s.imag,c=[l.length],d=a.makeTensorInfo(c,"float32",l),h=a.makeTensorInfo(c,"float32",u),f=vi({inputs:{real:d,imag:h},backend:a}),m=e7(i),y=m.real,v=m.imag,b=[y.length],x=a.makeTensorInfo(b,"float32",y),w=a.makeTensorInfo(b,"float32",v),S=vi({inputs:{real:x,imag:w},backend:a}),C=JN(l,u,o,r,a),E=C.real,_=C.imag,N=[E.length],$=a.makeTensorInfo(N,"float32",E),P=a.makeTensorInfo(N,"float32",_),D=vi({inputs:{real:$,imag:P},backend:a}),j=JN(y,v,o,r,a),B=j.real,K=j.imag,Y=[B.length],Z=a.makeTensorInfo(Y,"float32",B),H=a.makeTensorInfo(Y,"float32",K),F=vi({inputs:{real:Z,imag:H},backend:a}),Q=n7(n,r),J=[Q.real.length],re=a.makeTensorInfo(J,"float32",Q.real),se=a.makeTensorInfo(J,"float32",Q.imag),he=vi({inputs:{real:re,imag:se},backend:a}),de=o2({inputs:{a:he,b:F},backend:a}),ie=sp({inputs:{a:D,b:de},backend:a}),xe=KN({inputs:{a:D,b:de},backend:a}),q=hd({inputs:{input:ie},backend:a}),oe=hd({inputs:{input:xe},backend:a}),pe=cp({inputs:{input:ie},backend:a}),Ee=cp({inputs:{input:xe},backend:a}),Ie=dp({inputs:[q,oe],backend:a,attrs:{axis:0}}),_e=dp({inputs:[pe,Ee],backend:a,attrs:{axis:0}}),Fe=a.data.get(Ie.dataId).values,Xe=a.data.get(_e.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(re),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(xe),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(oe),a.disposeIntermediateTensorInfo(Ee),a.disposeIntermediateTensorInfo(Ie),a.disposeIntermediateTensorInfo(_e),{real:Fe,imag:Xe}}function Eve(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,o=0;for(let s=0;s<e;s++){const l=r7(a*s,e,n),u=bN(t,s);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),t7(r,i,o,a)}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ive(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=_n({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=LB(s,!1,n),u=_n({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const Tve={kernelName:ux,backendName:"cpu",kernelFunc:Ive};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZN(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,o=i||Bh(a),s=_r(o,be(r));return _ve(s,a,o),e.makeTensorInfo(r,o,s)}const Nve={kernelName:cx,backendName:"cpu",kernelFunc:ZN};function _ve(t,e,n){t.fill(e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ove={kernelName:dx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=Nr(r.dtype,be(r.shape)),[o,s,l,u]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<o;d++){const h=d*l*s*u;for(let f=0;f<s;f++){const m=f*(l*u);for(let y=0;y<l;y++){const v=y*u;for(let b=0;b<u;b++){const x=Math.round(l-y-1),w=h+m+v+b;let S=c[w];if(x>=0&&x<l){const C=x*u,E=h+m+C+b;S=c[E]}i[w]=S}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rve=wr((t,e)=>Math.floor(t/e)),$ve=Vr(jg,Rve,null,"int32"),Mve={kernelName:jg,backendName:"cpu",kernelFunc:$ve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r;let y=PB({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){const v=y;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const b=_n({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=sp({inputs:{a:y,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else y=sp({inputs:{a:y,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=y;if(c==="NCHW"&&f==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const b=_n({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});y=s2(n,y,f,b,m),n.disposeIntermediateTensorInfo(b)}else y=s2(n,y,f,s,m);n.disposeIntermediateTensorInfo(v)}return y}const Ave={kernelName:Im,backendName:"cpu",kernelFunc:Pve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r;let y=AB({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){const v=y;y=sp({inputs:{a:y,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=y;y=s2(n,y,f,s,m),n.disposeIntermediateTensorInfo(v)}return y}const Dve={kernelName:Tm,backendName:"cpu",kernelFunc:Lve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fve(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=be(r.shape),o=a.shape,s=o[o.length-1],[l,u,c,d]=Tw(r,a);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(a.dataId).values,f=n.bufferSync(r),m=G7(h,f,r.dtype,u,s,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,m.values)}const Bve={kernelName:fx,backendName:"cpu",kernelFunc:Fve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r;We([a,i],"gatherV2");const l=Qt(o,a.shape)[0],u=n.data.get(i.dataId).values,c=a.shape[l];for(let S=0;S<u.length;++S){const C=u[S];V(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let d=s;s==null&&(d=0);const h=be(i.shape),f=TN(a,i,l,d),m=_n({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),y=_n({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),v=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],b=n.bufferSync(y),x=n.bufferSync(m),w=H7(x,b,v);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}const jve={kernelName:px,backendName:"cpu",kernelFunc:zve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vve(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=_n({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=LB(s,!0,n),u=_n({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const Uve={kernelName:gx,backendName:"cpu",kernelFunc:Vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Wve=fn(Gg,t=>Number.isFinite(t)?1:0,"bool"),Gve={kernelName:Gg,backendName:"cpu",kernelFunc:Wve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hve=fn(Hg,t=>Math.abs(t)===1/0?1:0,"bool"),qve={kernelName:Hg,backendName:"cpu",kernelFunc:Hve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Kve=fn(qg,t=>Number.isNaN(t)?1:0,"bool"),Xve={kernelName:qg,backendName:"cpu",kernelFunc:Kve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yve(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=Q7(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const Qve={kernelName:bx,backendName:"cpu",kernelFunc:Yve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jve=fn(Qg,t=>Math.log1p(t)),Zve={kernelName:Qg,backendName:"cpu",kernelFunc:Jve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const exe=wr((t,e)=>t&&e),txe=Vr(Jg,exe,null,"bool"),nxe={kernelName:Jg,backendName:"cpu",kernelFunc:txe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rxe=fn(Zg,t=>t?0:1,"bool"),axe={kernelName:Zg,backendName:"cpu",kernelFunc:rxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ixe=wr((t,e)=>t||e),oxe=Vr(em,ixe,null,"bool"),sxe={kernelName:em,backendName:"cpu",kernelFunc:oxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r;We(a,"LRN");const u=a.shape[3],c=u-1,d=n.data.get(a.dataId).values,h=be(a.shape),f=new Float32Array(h);function m(y){const v=y%u;let b=y-v+Math.max(0,v-i);const x=y-v+Math.min(v+i,c);let w=0;for(;b<=x;b++){const S=d[b];w+=S*S}return w}for(let y=0;y<h;y++){const v=m(y),b=d[y]*Math.pow(o+s*v,-l);f[y]=b}return n.makeTensorInfo(a.shape,a.dtype,f)}const uxe={kernelName:vx,backendName:"cpu",kernelFunc:lxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r;We(o,"LRNGrad");const d=be(o.shape),h=o.shape[3],f=n.data.get(o.dataId).values,m=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(d),b=d;for(let x=0;x<b;x++){const w=x%h,S=x-w+Math.max(0,w-s),C=x-w+Math.min(h,w+s+1);let E=0;for(let _=S;_<C;_++)E+=Math.pow(m[_],2);E=u*E+l;for(let _=S;_<C;_++){let N=-2*u*c*m[_]*y[x]/E;x===_&&(N+=Math.pow(E,-c)),N*=f[x],v[_]+=N}}return n.makeTensorInfo(o.shape,a.dtype,v)}const dxe={kernelName:bT,backendName:"cpu",kernelFunc:cxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=n;let l=a.shape;const u=l.length,c=Qt(i,l);let d=c;const h=pr(d,u);let f=s.data.get(a.dataId).values;if(h!=null){const S=new Array(u);for(let C=0;C<S.length;C++)S[C]=l[h[C]];f=HN(f,l,a.dtype,h,S),d=fr(d.length,u),l=S}We(a,"max"),Zr("max",d,u);const[m,y]=Jr(l,d),v=be(y),b=Z7(f,v,m,a.dtype),x=s.write(b,m,a.dtype);let w=m;return o&&(w=Rr(m,c)),{dataId:x,shape:w,dtype:a.dtype}}const hxe={kernelName:xx,backendName:"cpu",kernelFunc:DB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;We(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ga(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&wn(c.inShape,c.outShape))d=Ts({inputs:{x:a},backend:n});else{const h=n.data.get(a.dataId).values,f=Je(a.shape),m=XN(h,a.shape,a.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return d}const fxe={kernelName:wx,backendName:"cpu",kernelFunc:pxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;We(a,"maxPool3d");const c=xl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,h=MB(d,a.shape,a.dtype,Je(a.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const mxe={kernelName:kx,backendName:"cpu",kernelFunc:gxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;We([a,i],"maxPool3DGrad");const c=xl(i.shape,o,s,1,l,u),d=n.bufferSync(i),h=abe(d,c),f=c.strideDepth,m=c.strideHeight,y=c.strideWidth,v=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=w-1-c.padInfo.front,_=C-1-c.padInfo.left,N=S-1-c.padInfo.top,$=Et(i.shape,"float32"),P=n.bufferSync(a);for(let D=0;D<c.batchSize;++D)for(let j=0;j<c.inChannels;++j)for(let B=0;B<c.inDepth;++B)for(let K=0;K<c.inHeight;++K)for(let Y=0;Y<c.inWidth;++Y){const Z=B-E,H=K-N,F=Y-_;let Q=0;for(let J=0;J<w;J+=v){const re=(Z+J)/f;if(!(re<0||re>=c.outDepth||Math.floor(re)!==re))for(let se=0;se<S;se+=b){const he=(H+se)/m;if(!(he<0||he>=c.outHeight||Math.floor(he)!==he))for(let de=0;de<C;de+=x){const ie=(F+de)/y;if(ie<0||ie>=c.outWidth||Math.floor(ie)!==ie)continue;const xe=w*S*C-1-h.get(D,re,he,ie,j),q=J*S*C+se*C+de,oe=xe===q?1:0;if(oe===0)continue;const pe=P.get(D,re,he,ie,j);Q+=pe*oe}}}$.set(Q,D,B,K,Y,j)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const bxe={kernelName:xT,backendName:"cpu",kernelFunc:yxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;We([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=ho(s.shape,l,u,1,c,d),f=n.data.get(s.dataId).values,m=Et(h.outShape,s.dtype,$B(f,s.shape,s.dtype,h).values),y=h.strideHeight,v=h.strideWidth,b=h.dilationHeight,x=h.dilationWidth,w=h.effectiveFilterHeight,S=h.effectiveFilterWidth,C=S-1-h.padInfo.left,E=w-1-h.padInfo.top,_=Et(s.shape,"float32"),N=n.data.get(a.dataId).values,$=Et(a.shape,"float32",N);for(let P=0;P<h.batchSize;++P)for(let D=0;D<h.inChannels;++D)for(let j=0;j<h.inHeight;++j)for(let B=0;B<h.inWidth;++B){const K=j-E,Y=B-C;let Z=0;for(let H=0;H<w;H+=b){const F=(K+H)/y;if(!(F<0||F>=h.outHeight||Math.floor(F)!==F))for(let Q=0;Q<S;Q+=x){const J=(Y+Q)/v;if(J<0||J>=h.outWidth||Math.floor(J)!==J)continue;const re=w*S-1-m.get(P,F,J,D),se=H*S+Q,he=re===se?1:0;if(he===0)continue;const de=$.get(P,F,J,D);Z+=de*he}}_.set(Z,P,j,B,D)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const xxe={kernelName:vT,backendName:"cpu",kernelFunc:vxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wxe(t,e,n,r,a){const i=Je(e),o=XN(t,e,n,i,a,"max"),s=$B(t,e,n,a,!0,r);return[o.values,s.values]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kxe={kernelName:Sx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;We(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=ho(r.shape,a,i,[1,1],o),[d,h]=wxe(u,r.shape,r.dtype,s,c),f=l.write(d,c.outShape,r.dtype),m=l.write(h,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=Qt(i,a.shape),l=Jr(a.shape,s)[1],u=be(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);const h=Fu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(h);const f=YN({inputs:{a:h,b:d},backend:n});c.push(f);const m=n0({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const Cxe={kernelName:Cx,backendName:"cpu",kernelFunc:Sxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Exe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"min");const s=Qt(i,a.shape);let l=s;const u=pr(l,a.shape.length);let c=a;u!=null&&(c=Za({inputs:{x:a},backend:n,attrs:{perm:u}}),l=fr(l.length,a.shape.length)),Zr("min",l,c.shape.length);const[d,h]=Jr(c.shape,l),f=be(h),m=Qr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];(Number.isNaN(C)||C<w)&&(w=C)}m[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,m);if(o){const b=Rr(d,s),x=_n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const Ixe={kernelName:Ex,backendName:"cpu",kernelFunc:Exe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Txe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:o}=r;We(a,"mirrorPad");const s=i.map((x,w)=>x[0]+a.shape[w]+x[1]),l=i.map(x=>x[0]),u=i.map((x,w)=>x[0]+a.shape[w]),c=o==="reflect"?0:1,d=n.data.get(a.dataId).values,h=a.shape.length,f=Je(a.shape),m=be(s),y=s.length,v=Je(s),b=Nr(a.dtype,m);for(let x=0;x<m;x++){let w=Xc(x,y,v);for(let C=0;C<y;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,E)=>C-l[E]);const S=Wo(w,h,f);b[x]=d[S]}return{dataId:n.write(b,s,a.dtype),shape:s,dtype:a.dtype}}const Nxe={kernelName:Ix,backendName:"cpu",kernelFunc:Txe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _xe=wr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),Oxe=Vr(rm,_xe),Rxe={kernelName:rm,backendName:"cpu",kernelFunc:Oxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FB(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=a.shape.length;let s=i;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=Qt([s],a.shape),u=DB({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Rr(u.shape,l),d=_n({inputs:{x:u},backend:n,attrs:{shape:c}}),h=KN({inputs:{a,b:d},backend:n}),f=V7({inputs:{x:h},backend:n}),m=n0({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=_n({inputs:{x:m},backend:n,attrs:{shape:c}}),v=YN({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const $xe={kernelName:Zx,backendName:"cpu",kernelFunc:FB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mxe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r;We(a,"multinomial");const l=s?a:FB({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,h=[u,i],f=Qr(be(h),"int32");for(let m=0;m<u;++m){const y=m*c,v=new Float32Array(c-1);v[0]=d[y];for(let w=1;w<v.length;++w)v[w]=v[w-1]+d[y+w];const b=Lw.alea(o.toString()),x=m*i;for(let w=0;w<i;++w){const S=b();f[x+w]=v.length;for(let C=0;C<v.length;C++)if(S<v[C]){f[x+w]=C;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const Pxe={kernelName:Tx,backendName:"cpu",kernelFunc:Mxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Axe=Gw;function Lxe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;We(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=Axe(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Dxe={kernelName:_x,backendName:"cpu",kernelFunc:Lxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fxe=Hw;function Bxe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;We(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:f}=Fxe(c,d,o,s,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const zxe={kernelName:Ox,backendName:"cpu",kernelFunc:Bxe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jxe=qw;function Vxe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;We(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=o,f=s,m=l,y=u,{selectedIndices:v,selectedScores:b}=jxe(c,d,h,f,m,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const Uxe={kernelName:Rx,backendName:"cpu",kernelFunc:Vxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wxe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r;We(a,"oneHot");const u=be(a.shape),c=new Float32Array(u*o);c.fill(l);const d=n.data.get(a.dataId).values;for(let h=0;h<u;++h)d[h]>=0&&d[h]<o&&(c[h*o+d[h]]=s);return n.makeTensorInfo([...a.shape,o],i,c)}const Gxe={kernelName:Mx,backendName:"cpu",kernelFunc:Wxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=hd({inputs:{input:r},backend:n}),i=u2({inputs:{x:a},backend:n}),o=cp({inputs:{input:r},backend:n}),s=u2({inputs:{x:o},backend:n}),l=vi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return ZN({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Hxe={kernelName:fw,backendName:"cpu",kernelFunc:u2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BB(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=hd({inputs:{input:r},backend:n}),i=BB({inputs:{x:a},backend:n}),o=cp({inputs:{input:r},backend:n}),s=u2({inputs:{x:o},backend:n}),l=vi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return ZN({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const qxe={kernelName:$x,backendName:"cpu",kernelFunc:BB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zB(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return l2({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Yr(i,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=l2({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=dp({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const Kxe={kernelName:Px,backendName:"cpu",kernelFunc:zB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;We(a,"pad");const s=i.map((b,x)=>b[0]+a.shape[x]+b[1]),l=i.map(b=>b[0]),u=n.data.get(a.dataId).values,c=be(a.shape),d=a.shape.length,h=Je(a.shape),f=be(s),m=s.length,y=Je(s),v=Nr(a.dtype,f);o!==0&&v.fill(o);for(let b=0;b<c;b++){const x=Xc(b,d,h).map((S,C)=>S+l[C]),w=Wo(x,m,y);v[w]=u[b]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}const jB={kernelName:Ax,backendName:"cpu",kernelFunc:Xxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Yxe=wr((t,e)=>Math.pow(t,e)),Qxe=Vr(om,Yxe),Jxe={kernelName:om,backendName:"cpu",kernelFunc:Qxe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zxe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,s=a.map(v=>n.data.get(v.dataId).values),l=a.map(v=>v.shape),u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,[d,h,f]=oB(s,l,u,i.shape,i.dtype,c,o.shape),m=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(f,i.dtype,h);return m.concat([y])}const ewe={kernelName:Fx,backendName:"cpu",kernelFunc:Zxe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function twe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,h=s.map(v=>n.data.get(v.dataId).values),f=s.map(v=>v.shape),[m,y]=uB(u,a.shape,c,i.shape,i.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(m,i.dtype,y)}const nwe={kernelName:Bx,backendName:"cpu",kernelFunc:twe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rwe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:o}=n,s=cB(r,a,o,i);return e.makeTensorInfo([s.length],i,s)}const awe={kernelName:zx,backendName:"cpu",kernelFunc:rwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iwe=fn(sm,t=>1/t),owe={kernelName:sm,backendName:"cpu",kernelFunc:iwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function swe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;We(a,"resizeBilinear");const l=Je(a.shape),[u,c]=s,[d,h,f,m]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(be([d,u,c,m])),b=[i&&u>1?h-1:h,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c];let w=0;const S=b[0]/x[0],C=b[1]/x[1];for(let E=0;E<d;E++)for(let _=0;_<u;_++){let N;o?N=S*(_+.5)-.5:N=S*_;const $=Math.max(0,Math.floor(N)),P=N-$,D=Math.min(h-1,Math.ceil(N)),j=E*l[0]+$*l[1],B=E*l[0]+D*l[1];for(let K=0;K<c;K++){let Y;o?Y=C*(K+.5)-.5:Y=C*K;const Z=Math.max(0,Math.floor(Y)),H=Y-Z,F=Math.min(f-1,Math.ceil(Y)),Q=j+Z*l[2],J=B+Z*l[2],re=j+F*l[2],se=B+F*l[2];for(let he=0;he<m;he++){const de=y[Q+he],ie=y[J+he],xe=y[re+he],q=y[se+he],oe=de+(xe-de)*H,pe=ie+(q-ie)*H,Ee=oe+(pe-oe)*P;v[w++]=Ee}}}return n.makeTensorInfo([d,u,c,m],"float32",v)}const lwe={kernelName:Wx,backendName:"cpu",kernelFunc:swe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uwe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;We([i,a],"resizeBilinearGrad");const s=Je(a.shape),[l,u,c,d]=a.shape,[,h,f]=i.shape,m=new Float32Array(l*u*c*d),y=[o&&h>1?u-1:u,o&&f>1?c-1:c],v=[o&&h>1?h-1:h,o&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=n.data.get(i.dataId).values;let S=0;for(let C=0;C<l;C++){const E=C*s[0];for(let _=0;_<h;_++){const N=_*b,$=Math.floor(N),P=Math.min(Math.ceil(N),u-1),D=E+$*s[1],j=E+P*s[1],B=N-$,K=1-B;for(let Y=0;Y<f;Y++){const Z=Y*x,H=Math.floor(Z),F=Math.min(Math.ceil(Z),c-1),Q=Z-H,J=1-Q,re=D+H*s[2],se=D+F*s[2],he=j+H*s[2],de=j+F*s[2],ie=K*J,xe=K*Q,q=B*J,oe=B*Q;for(let pe=0;pe<d;pe++){const Ee=w[S++];m[re+pe]+=Ee*ie,m[se+pe]+=Ee*xe,m[he+pe]+=Ee*q,m[de+pe]+=Ee*oe}}}}return n.makeTensorInfo([l,c,u,d],"float32",m)}const cwe={kernelName:kT,backendName:"cpu",kernelFunc:uwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dwe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;We(a,"resizeNearestNeighbor");const l=Je(a.shape),[u,c]=s,[d,h,f,m]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(d*u*c*m),b=[i&&u>1?h-1:h,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c],w=b[0]/x[0],S=b[1]/x[1];let C=0;for(let E=0;E<d;E++){const _=E*l[0];for(let N=0;N<u;N++){const $=o?w*(N+.5):w*N;let P=Math.min(h-1,i?Math.round($):Math.floor($));o&&(P=Math.max(0,P));const D=_+P*l[1];for(let j=0;j<c;j++){const B=o?S*(j+.5):S*j;let K=Math.min(f-1,i?Math.round(B):Math.floor(B));o&&(K=Math.max(0,K));const Y=D+K*l[2];for(let Z=0;Z<m;Z++){const H=y[Y+Z];v[C++]=H}}}}return n.makeTensorInfo([d,u,c,m],a.dtype,v)}const hwe={kernelName:Ux,backendName:"cpu",kernelFunc:dwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pwe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;We([i,a],"resizeNearestNeighborGrad");const s=Je(a.shape),l=Je(i.shape),[u,c,d,h]=a.shape,[,f,m]=i.shape,y=new Float32Array(u*c*d*h),v=n.data.get(i.dataId).values,b=[o&&f>1?c-1:c,o&&m>1?d-1:d],x=[o&&f>1?f-1:f,o&&m>1?m-1:m],w=b[0]/x[0],S=b[1]/x[1],C=1/w,E=1/S,_=Math.ceil(C)*2+2,N=Math.ceil(E)*2+2;for(let $=0;$<u;$++){const P=$*s[0];for(let D=0;D<c;D++){const j=P+D*s[1],B=Math.floor(D*C),K=Math.floor(B-_/2);for(let Y=0;Y<d;Y++){const Z=j+Y*s[2],H=Math.floor(Y*E),F=Math.floor(H-N/2);for(let Q=0;Q<h;Q++){let J=0;for(let re=0;re<_;re++){const se=re+K;if(se<0||se>=f)continue;const he=P+se*l[1],de=se*w,ie=Math.min(c-1,o?Math.round(de):Math.floor(de));if(D===ie)for(let xe=0;xe<N;xe++){const q=xe+F;if(q<0||q>=m)continue;const oe=he+q*l[2],pe=q*S,Ee=Math.min(d-1,o?Math.round(pe):Math.floor(pe));Y===Ee&&(J+=v[oe+Q])}}y[Z+Q]=J}}}}return n.makeTensorInfo(a.shape,a.dtype,y)}const fwe={kernelName:wT,backendName:"cpu",kernelFunc:pwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;We(a,"reverse");const o=a.shape.length,s=Qt(i,a.shape);if(o===0)return Ts({inputs:{x:a},backend:n});const l=new Or(a.shape,a.dtype),u=n.bufferSync(a);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),h=d.slice();s.forEach(f=>h[f]=a.shape[f]-1-h[f]),l.set(u.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const mwe={kernelName:Gx,backendName:"cpu",kernelFunc:gwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ywe={kernelName:mw,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=Nr(r.dtype,be(r.shape)),[u,c,d,h]=r.shape,[f,m]=sN(o,c,d),y=255,v=Math.sin(a),b=Math.cos(a),x=s.data.get(r.dataId).values;for(let w=0;w<u;w++){const S=w*d*c*h;for(let C=0;C<c;C++){const E=C*(d*h);for(let _=0;_<d;_++){const N=_*h;for(let $=0;$<h;$++){const P=[u,C,_,$],D=P[2],j=P[1];let B=(D-f)*b-(j-m)*v,K=(D-f)*v+(j-m)*b;B=Math.round(B+f),K=Math.round(K+m);let Y=i;if(typeof i!="number"&&($===3?Y=y:Y=i[$]),B>=0&&B<d&&K>=0&&K<c){const H=K*(d*h),F=B*h,Q=S+H+F+$;Y=x[Q]}const Z=S+E+N+$;l[Z]=Y}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bwe=fn(cm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),vwe={kernelName:cm,backendName:"cpu",kernelFunc:bwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xwe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Xh(i,a,o),h=!0,f=n.bufferSync(a),m=n.bufferSync(i),y=up(f,m,o,d,u,l,s,c,0,h);return n.makeTensorInfo(o,y.dtype,y.values)}const wwe={kernelName:Hx,backendName:"cpu",kernelFunc:xwe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kwe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function Swe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function Cwe(t,e,n,r,a,i){const o=_r("int32",n*a);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),u=s*a;for(let c=0;c<a;++c)o[u+c]=i==="left"?kwe(l,e[c+u]):Swe(l,e[c+u])}return o}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ewe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=Cwe(s,l,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const Iwe={kernelName:qx,backendName:"cpu",kernelFunc:Ewe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Twe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;We([r,a,i],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Ja(a.dtype,i.dtype),d=Qr(be(a.shape),c);let h=0;const f=o===0||o>1||a.shape.length===1?1:be(a.shape.slice(1));for(let m=0;m<s.length;m++)for(let y=0;y<f;y++)s[m]===1?d[h++]=l[m]:d[h++]=u[m];return n.makeTensorInfo(a.shape,c,d)}const Nwe={kernelName:Kx,backendName:"cpu",kernelFunc:Twe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _we=cN,Owe=dN,Rwe=fn(hm,t=>t>=0?Owe*t:_we*(Math.exp(t)-1)),$we={kernelName:hm,backendName:"cpu",kernelFunc:Rwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mwe=fn(gm,t=>t<0?-1:t>0?1:0),Pwe={kernelName:gm,backendName:"cpu",kernelFunc:Mwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Awe=fn(pm,t=>Math.sin(t)),Lwe={kernelName:pm,backendName:"cpu",kernelFunc:Awe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dwe=fn(fm,t=>Math.sinh(t)),Fwe={kernelName:fm,backendName:"cpu",kernelFunc:Dwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bwe=11920928955078125e-23,VB=Math.log(Bwe)+2,zwe=fn(ym,t=>{const e=t>-VB,n=t<VB,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),jwe={kernelName:ym,backendName:"cpu",kernelFunc:zwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;We([a],"spaceToBatchND");const s=be(i),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<a.shape.length;++v)l.push([0,0]);const u=jB.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Qm(u.shape,i,s,!1),d=Jm(c.length,i.length,!1),h=Zm(u.shape,i,s,!1),f=_n({inputs:{x:u},backend:n,attrs:{shape:c}}),m=Za({inputs:{x:f},backend:n,attrs:{perm:d}}),y=_n({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}const Uwe={kernelName:Qx,backendName:"cpu",kernelFunc:Vwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wwe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[d,h,f,m,y]=fB(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,f),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const Gwe={kernelName:ew,backendName:"cpu",kernelFunc:Wwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hwe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=gB(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const qwe={kernelName:tw,backendName:"cpu",kernelFunc:Hwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kwe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=qN(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const Xwe={kernelName:nw,backendName:"cpu",kernelFunc:Kwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ywe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=qN(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const Qwe={kernelName:rw,backendName:"cpu",kernelFunc:Ywe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jwe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=Xh(i,a,s),f=!1,m=n.bufferSync(a);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),b=!!n.data.get(o.dataId).values[0];y=up(m,v,s,h,c,u,l,d,b,f);break}case"float32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=up(m,v,s,h,c,u,l,d,b,f);break}case"int32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=up(m,v,s,h,c,u,l,d,b,f);break}case"string":{const v=n.bufferSync(i),b=gl(n.data.get(o.dataId).values[0]);y=up(m,v,s,h,c,u,l,d,b,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(s,y.dtype,y.values)}const Zwe={kernelName:aw,backendName:"cpu",kernelFunc:Jwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Qt(o,a.shape)[0],l=EN(a,i,s),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(d=>{const h=[...c];h[s]=d;const f=pd({inputs:{x:a},backend:n,attrs:{begin:u,size:h}});return u[s]+=d,f})}const t2e={kernelName:Jx,backendName:"cpu",kernelFunc:e2e};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const n2e={kernelName:ST,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;We(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const s=a[o];i[o]=s*s}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r2e=fn(Cm,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),a2e={kernelName:Cm,backendName:"cpu",kernelFunc:r2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r;We(a,"stridedSlice");const{finalShapeSparse:f,finalShape:m,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=h4(a.shape,i,o,s,l,u,c,d,h);let C;if(y)C=_n({inputs:{x:a},backend:n,attrs:{shape:m}});else if(v||b){V(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=l4(x,w,S),_=pd({inputs:{x:a},backend:n,attrs:{begin:x,size:E}});C=_n({inputs:{x:_},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(_)}else{const E=n.bufferSync(a),_=yB(f,E,S,x);C=n.makeTensorInfo(m,_.dtype,_.values)}return C}const o2e={kernelName:iw,backendName:"cpu",kernelFunc:i2e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s2e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,h=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[m,y]=bB(h,f,a,i,o,s,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",y)]}const l2e={kernelName:ow,backendName:"cpu",kernelFunc:s2e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u2e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=vB(s,l,a),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const c2e={kernelName:sw,backendName:"cpu",kernelFunc:u2e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d2e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,s=xB(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const h2e={kernelName:lw,backendName:"cpu",kernelFunc:d2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p2e=fn(wm,t=>Math.tan(t)),f2e={kernelName:wm,backendName:"cpu",kernelFunc:p2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const g2e=fn(km,t=>Math.tanh(t)),m2e={kernelName:km,backendName:"cpu",kernelFunc:g2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;We(a,"tile");const o=kB(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const b2e={kernelName:Sm,backendName:"cpu",kernelFunc:y2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r;We(a,"topk");const s=n.data.get(a.dataId).values,[l,u]=CB(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const x2e={kernelName:uw,backendName:"cpu",kernelFunc:v2e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w2e(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,h,f]=a.shape,[m,y]=u??[d,h],v=[c,m,y,f],b=Je(a.shape),x=b[0],w=b[1],S=b[2],C=Je(v),E=C[0],_=C[1],N=C[2],$=Nr(a.dtype,be(v));$.fill(l);const P=r.data.get(a.dataId).values,D=r.data.get(i.dataId).values;for(let j=0;j<c;++j){const B=i.shape[0]===1?D:D.subarray(j*8,j*8+8);for(let K=0;K<m;++K)for(let Y=0;Y<y;++Y)for(let Z=0;Z<f;++Z){let H;const F=B[6]*Y+B[7]*K+1;if(F===0)continue;const Q=(B[0]*Y+B[1]*K+B[2])/F,J=(B[3]*Y+B[4]*K+B[5])/F,re=UB(Q,h,s),se=UB(J,d,s);switch(o){case"nearest":H=T2e(P,d,h,x,w,S,j,se,re,Z,l);break;case"bilinear":H=N2e(P,d,h,x,w,S,j,se,re,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const he=j*E+K*_+Y*N+Z;$[he]=H}return r.makeTensorInfo(v,a.dtype,$)}return{dataId:r.write($,v,a.dtype),shape:a.shape,dtype:a.dtype}}const k2e={kernelName:cw,backendName:"cpu",kernelFunc:w2e};function UB(t,e,n){switch(n){case"reflect":return S2e(t,e);case"wrap":return C2e(t,e);case"nearest":return I2e(t,e);case"constant":default:return E2e(t)}}function S2e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Su(0,n,e-1)}function C2e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Su(0,n,e-1)}function E2e(t,e){return t}function I2e(t,e){return Su(0,t,e-1)}function r0(t,e,n,r,a,i,o,s,l,u,c){const d=o*r+s*a+l*i+u;return 0<=s&&s<e&&0<=l&&l<n?t[d]:c}function T2e(t,e,n,r,a,i,o,s,l,u,c){const d=Math.round(s),h=Math.round(l);return r0(t,e,n,r,a,i,o,d,h,u,c)}function N2e(t,e,n,r,a,i,o,s,l,u,c){const d=Math.floor(s),h=Math.floor(l),f=d+1,m=h+1,y=(m-l)*r0(t,e,n,r,a,i,o,d,h,u,c)+(l-h)*r0(t,e,n,r,a,i,o,d,m,u,c),v=(m-l)*r0(t,e,n,r,a,i,o,f,h,u,c)+(l-h)*r0(t,e,n,r,a,i,o,f,m,u,c);return(f-s)*y+(s-d)*v}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _2e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;We(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:u}=EB(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const O2e={kernelName:dw,backendName:"cpu",kernelFunc:_2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R2e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a.shape.length,s=a.shape[i],l=new Array(o-1);let u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=a.shape[f]);const c=new Array(o).fill(0),d=a.shape.slice();d[i]=1;const h=new Array(s);for(let f=0;f<h.length;f++){c[i]=f;const m=pd({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});h[f]=_n({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return h}const $2e={kernelName:hw,backendName:"cpu",kernelFunc:R2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r;We(a,"unsortedSegmentSum");const s=a.shape.length,l=i.shape.length,u=[],c=[],d=s-l;let h=i;for(let m=0;m<d;++m){const y=l2({inputs:{input:h},backend:n,attrs:{dim:m+1}});h=y,c.push(y)}for(let m=0;m<o;++m){const y=fl(m,"int32"),v=n.makeTensorInfo([],"int32",y),b=z7({inputs:{a:v,b:h},backend:n}),x=Fu({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=o2({inputs:{a:x,b:a},backend:n}),S=n0({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});u.push(S),c.push(v),c.push(b),c.push(x),c.push(w),c.push(S)}const f=zB({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}const P2e={kernelName:pw,backendName:"cpu",kernelFunc:M2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A2e=[$ye,b1e,Pye,Lye,C1e,Fye,zye,Vye,Wye,Hye,Kye,Yye,Jye,tbe,rbe,obe,lbe,cbe,hbe,Oye,fbe,mbe,bbe,xbe,k1e,I1e,kbe,v1e,Cbe,Ibe,Tbe,_be,Rbe,Mbe,Abe,Dbe,Bbe,jbe,Ube,Gbe,qbe,Xbe,Qbe,Jbe,eve,nve,ave,ive,ove,sve,cve,Sye,hve,T1e,xve,N1e,wve,O1e,Tve,Nve,Ove,$1e,Mve,Ave,Dve,Bve,jve,P1e,L1e,x1e,Uve,Ebe,Gve,qve,Xve,Cye,F1e,z1e,Qve,V1e,Zve,nxe,axe,sxe,uxe,dxe,hxe,W1e,fxe,mxe,bxe,xxe,kxe,Cxe,Ixe,H1e,Nxe,Rxe,Pxe,K1e,Y1e,Dxe,zxe,Uxe,J1e,Gxe,qxe,Kxe,jB,Jxe,Iye,tye,ewe,nwe,awe,w1e,QN,owe,Tye,Nye,_ye,lwe,cwe,hwe,fwe,mwe,ywe,vwe,uye,wwe,Iwe,Nwe,$we,dye,Pwe,Lwe,Fwe,hye,$xe,jwe,Uwe,Gwe,qwe,Xwe,Qwe,Zwe,t2e,gye,n2e,yye,a2e,o2e,l2e,c2e,h2e,wye,lve,f2e,m2e,b2e,x2e,k2e,Z1e,O2e,$2e,P2e,Hxe];for(const t of A2e)vw(t);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fd={},c2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function L2e(t,e){fd[t]=e}function Xo(t,e){if(!(t in fd)||e!=null){const r=F2e(t,e);if(r!==null)fd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=fd[t];return n==null||n.isContextLost()?(delete fd[t],Xo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),fd[t])}function D2e(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function F2e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??D2e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete fd[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(c2.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",c2)||n.getContext("experimental-webgl",c2):n.getContext("webgl2",c2)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var a0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(a0||(a0={}));var zi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(zi||(zi={}));var ea;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ea||(ea={}));function i0(t,e){return[e,t]}function B2e(t,e){return t*e}function d2(t){const e=be(t),n=Math.ceil(e/4);return Tv(n)}function hp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function z2e(t,e){const[n,r]=hp(t,e);return n*r*4}function e_(t,e){const n=t;let r,a,i,o,s,l,u,c,d,h;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,c=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,o=n.RGBA,s=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function He(t,e){const n=e();return fe().getBool("DEBUG")&&j2e(t),n}function j2e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+G2e(t,e))}const V2e=596e-10,U2e=65504;function W2e(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||V2e<Math.abs(t)&&Math.abs(t)<U2e)}function G2e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function h2(t,e){return Il(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function H2e(t,e){const n=Il(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function q2e(t,e){const n=Il(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw WB(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const K2e=/ERROR: [0-9]+:([0-9]+):/g;function WB(t,e){const n=K2e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,o=a.map((d,h)=>Kc((h+1).toString(),i)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Kc(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function X2e(t){return Il(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Y2e(t,e){if(He(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function t_(t,e){if(He(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Q2e(t,e){const n=Il(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function J2e(t,e){const n=Il(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Z2e(t){return Il(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function eke(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function tke(t){return Il(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function GB(t,e,n,r,a,i,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),He(t,()=>t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)),He(t,()=>t.enableVertexAttribArray(s)),!0)}function nke(t,e,n){ske(t,n),He(t,()=>t.activeTexture(t.TEXTURE0+n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function rke(t,e,n){return Il(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ake(t,e,n){return t.getUniformLocation(e,n)}function ike(t,e,n,r){He(t,()=>nke(t,e,r)),He(t,()=>t.uniform1i(n,r))}function n_(t,e,n){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function HB(t,e){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function p2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+oke(t,e))}function oke(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Il(t,e,n){const r=He(t,()=>e());if(r==null)throw new Error(n);return r}function ske(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function pp(t,e=2){return be(t.slice(0,t.length-e))}function fp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function r_(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[pp(t),...fp(t)]),e}function lke(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?Iv(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=pl(t).newShape);let a=be(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const s=pp(t);let l=2,u=2;t.length&&([l,u]=fp(t)),a=s*(l/2)*(u/2),i=Tv(a).map(c=>c*2)}else i=Tv(a);return i}function f2(t){return t%2===0}function g2(t,e){if(t=t.slice(-2),e=e.slice(-2),wn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||f2(n)&&f2(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&f2(t[0])&&f2(e[0])}let a_,i_;function uke(t){if(a_==null){const e=Xo(t);a_=e.getParameter(e.MAX_TEXTURE_SIZE)}return a_}function cke(t){if(i_==null){const e=Xo(t);i_=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,i_)}function dke(t){if(t===0)return 0;let e;const n=Xo(t);return vo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:vo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function vo(t,e){return t.getExtension(e)!=null}function qB(t){try{if(Xo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function hke(t){if(t===0)return!1;const e=Xo(t);if(t===1){if(!vo(e,"OES_texture_float"))return!1}else if(!vo(e,"EXT_color_buffer_float"))return!1;return o_(e)}function pke(t){if(t===0)return!1;const e=Xo(t);if(t===1){if(!vo(e,"OES_texture_float")||!vo(e,"WEBGL_color_buffer_float"))return!1}else{if(vo(e,"EXT_color_buffer_float"))return o_(e);const n="EXT_color_buffer_half_float";if(vo(e,n)){const r=e.getExtension(n);return fke(e,r)}return!1}return o_(e)}function o_(t){const e=e_(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function fke(t,e){const n=e_(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function gke(t){return t!==2?!1:Xo(t).fenceSync!=null}function o0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ye=fe();Ye.registerFlag("HAS_WEBGL",()=>Ye.getNumber("WEBGL_VERSION")>0),Ye.registerFlag("WEBGL_VERSION",()=>qB(2)?2:qB(1)?1:0),Ye.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ye.get("WEBGL_VERSION")===2),Ye.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Ye.registerFlag("WEBGL_PACK",()=>Ye.getBool("HAS_WEBGL")),Ye.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_CLIP",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_REDUCE",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_CONV_IM2COL",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>uke(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>cke(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ye.getNumber("WEBGL_VERSION");return t===0?0:dke(t)}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!FT()),Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>hke(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ye.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>pke(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_FENCE_API_ENABLED",()=>gke(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Ye.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),Ye.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>FT()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),Ye.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Ye.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Ye.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_EXP_CONV",()=>!1),Ye.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ye.getBool("IS_TEST")),Ye.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Ye.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Ye.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Da(){let t,e,n,r,a,i,o,s,l,u;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gd(t,e,n="index"){const r=Je(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${a}`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${o}; ${s};`}).join("")}function m2(t,e,n="index"){const r=Je(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${s};`}).join("")}function mke(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function yke(t,e,n="index"){const r=t.map((i,o)=>o),a=mke(r,e);return a.map((i,o)=>{const s=`int ${t[o]} = ${n} / ${a[o]}`,l=o===a.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${a[o]}`:`index -= ${t[o]} * ${a[o]}`;return`${s}; ${l};`}).join("")}function s_(t){const e=Je(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function l_(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const KB=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{getBroadcastDims:XB}=x7;function bke(t,e,n){const r=[];if(t.forEach(h=>{const f=be(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=u_(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(h=>vke(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Da(),l=kke(s);let u,c,d=Eke(s);return e.isPacked?(u=xke(e.logicalShape,o,n.enableShapeUniforms),c=Cke(s)):(u=wke(e.logicalShape,o,n.enableShapeUniforms),c=Ske(s)),n.packedInputs&&(d+=_ke),[d,l,c,a,u,i,n.userCode].join(`
`)}function gp(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return jke(t,e);case 1:return Uke(t,e);case 2:return Gke(t,e);case 3:return qke(t,e);case 4:return Xke(t,e);case 5:return Yke(t);case 6:return Qke(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function YB(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return zke(t);case 1:return Vke(t,e);case 2:return Wke(t,e);case 3:return Hke(t,e);default:return Kke(t,e)}}function vke(t,e,n=!1,r){let a="";n?a+=YB(t,r):a+=gp(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?a+=Jke(t,e):a+=Zke(t,e)),a}function xke(t,e,n){switch(t.length){case 0:return QB();case 1:return Oke(t,e,n);case 2:return Fke(t,e,n);case 3:return $ke(t,e,n);default:return Pke(t,e,n)}}function wke(t,e,n){switch(t.length){case 0:return QB();case 1:return Rke(t,e,n);case 2:return Bke(t,e,n);case 3:return Mke(t,e,n);case 4:return Ake(t,e,n);case 5:return Lke(t,e);case 6:return Dke(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function kke(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Ske(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Cke(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Eke(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Ike}
    ${Tke}
    ${Nke}
  `}const Ike=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Tke=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Nke=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_ke=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function QB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Oke(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Rke(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function $ke(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function Mke(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${m2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=gd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Pke(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let o=i,s="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],s=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+s,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Ake(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${m2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=gd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Lke(t,e){const n=gd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Dke(t,e){const n=gd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Fke(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(wn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function Bke(t,e,n){return wn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function md(t){return`offset${t}`}function zke(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Da();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function jke(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=md(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Vke(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=Da();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Uke(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${mp(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],o=a[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=md(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function Wke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],s=i[1],l=Da();if(i!=null&&wn(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Gke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&wn(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=i[0],f=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=pl(n),l=o;if(l.length<n.length){const h=yp(t,l),f=["row","col"];return`
      ${gp(h,e)}
      float ${a}(int row, int col) {
        return ${a}(${bp(f,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${mp(t)}
      }
    `;const u=i[0],c=i[1],d=md(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Hke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],m=yp(t,h),y=["b","row","col"];return`
        ${YB(m,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${bp(y,f)});
        }
      `}const s=Da();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function qke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=pl(n),u=s;if(u.length<n.length){const y=yp(t,u),v=["row","col","depth"];return`
        ${gp(y,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${bp(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${mp(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],h=c[1],f=t.shapeInfo.flatOffset;if(h===i&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=md(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Kke(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Da();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2);let h=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",m=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<o-1;y++)f=`int b${y}, `+f,h*=i[o-y-1],m=`b${y} * ${h} + `+m;return`
    vec4 ${r}(${f}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${a.texture2D}(${n}, uv);
    }
  `}function Xke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,{newShape:l,keptDims:u}=pl(n);if(l.length<n.length){const x=yp(t,l),w=["row","col","depth","depth2"];return`
      ${gp(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${bp(w,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${i}, 1)));
        ${mp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],m=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(f===s&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${m}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=md(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function Yke(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,o=e[2]*i,s=e[1]*o,{newShape:l,keptDims:u}=pl(e);if(l.length<e.length){const y=yp(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${gp(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${bp(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${i}, ${a})) +
          depth3;
        ${mp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=md(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${i} +
          depth2 * ${a} + depth3 + ${m};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Qke(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=pl(e);if(a.length<e.length){const v=yp(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${gp(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${bp(b,i)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${mp(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],m=h[1];if(m===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=md(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${y};
      vec2 uv = uvFromFlat(${f}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function mp(t){const e=t.name,n=be(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Jke(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=XB(t.shapeInfo.logicalShape,e.logicalShape),l=On(o),u=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let h="";o<2&&i>0?h="coords":h=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let f="return outputValue;";const m=be(t.shapeInfo.logicalShape)===1,y=be(e.logicalShape)===1;if(i===1&&!m&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(s.length){const v=i-2,b=i-1;s.indexOf(v)>-1&&s.indexOf(b)>-1?f="return vec4(outputValue.x);":s.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(b)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${f}
    }
  `}function Zke(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&wn(o,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=On(l),c=XB(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let h;const f=["x","y","z","w","u","v"];s===0?h="":l<2&&c.length>=1?h="coords = 0;":h=c.map(y=>`coords.${f[y+d]} = 0;`).join(`
`);let m="";return l<2&&s>0?m="coords":m=t.shapeInfo.logicalShape.map((y,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${a}() {
      ${u} coords = getOutputCoords();
      ${h}
      return get${r}(${m});
    }
  `}function On(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function u_(t,e,n){const{newShape:r,keptDims:a}=pl(e),i=e.length,o=t&&i===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&i>1&&!wn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:a}}function yp(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function bp(t,e){return e.map(n=>t[n]).join(", ")}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eSe(t,e,n,r){const a=n.map((c,d)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),i=a.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=bke(a,o,e),l=q2e(t.gl,s),u=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},JB(t,e,u))}function JB(t,e,n){const r={},a={},i={},o=[];let s,l,u,c=null,d=null;d=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const h=!1;for(let f=0;f<e.variableNames.length;f++){const m=e.variableNames[f];r[m]=t.getUniformLocation(n,m,h),r[`offset${m}`]=t.getUniformLocation(n,`offset${m}`,h),e.enableShapeUniforms&&(a[`${m}Shape`]=t.getUniformLocation(n,`${m}Shape`,h),i[`${m}TexShape`]=t.getUniformLocation(n,`${m}TexShape`,h))}return e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",h),u=t.getUniformLocation(n,"outShapeStrides",h),l=t.getUniformLocation(n,"outTexShape",h)),e.customUniforms&&e.customUniforms.forEach((f,m)=>{o[m]=t.getUniformLocation(n,f.name,h)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:d,inShapesLocations:a,inTexShapesLocations:i,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}}function ZB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],o=i.shape;if(!wn(a,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!wn(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function tSe(t,e,n,r,a){e.program.enableShapeUniforms||(ZB(e.inShapeInfos,n),ZB([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,u)=>{const c=e.program.variableNames[u],d=e.uniformLocations[c],h=e.uniformLocations[`offset${c}`],f=e.inShapesLocations[`${c}Shape`],m=e.inTexShapesLocations[`${c}TexShape`];if(f){const{uniformShape:y}=u_(e.program.packedInputs,l.shape,l.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(f,new Int32Array(y));break;case 2:t.gl.uniform2iv(f,new Int32Array(y));break;case 3:t.gl.uniform3iv(f,new Int32Array(y));break;case 4:t.gl.uniform4iv(f,new Int32Array(y));break}}if(m&&t.gl.uniform2i(m,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(be(l.shape)<2)t.gl.uniform1f(d,l.uniformValues[0]);else{let y=l.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(d,y)}return}l.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Je(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a&&e.program.customUniforms.forEach((l,u)=>{const c=e.customUniformLocations[u],d=a[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function nSe(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=u_(t.packedInputs,o.shape,l);let h="",f="",m="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=Je(c);m=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const y=o.shape.length,v=c.length===2&&wn(o.shape,l),b=be(o.shape)===1,x=ad(o.shape,n.shape),w=!t.packedInputs&&y===n.shape.length&&wn(l,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${w}_${u?d:""}_${c.length}_${b}_${x}_${v}_${h}_${f}_${m}_${S}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${fe().getNumber("WEBGL_VERSION")}`,i}function Fa(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rSe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=a0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Da();this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?m2(["r","c","d"],e):gd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class aSe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=a0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Da();this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?m2(["r","c","d"],e):gd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class iSe{constructor(e){this.variableNames=["A"],this.outTexUsage=zi.DOWNLOAD;const n=Da();this.outputShape=e,this.userCode=`
      ${KB}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class oSe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=zi.DOWNLOAD;const n=Da();this.outputShape=e,this.userCode=`
      ${KB}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sSe{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Da();this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?l_():s_(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lSe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Da();this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?l_():s_(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uSe(t){const e=Da(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return H2e(t,n)}function cSe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Q2e(t,e)}function dSe(t){const e=new Uint16Array([0,1,2,2,1,3]);return J2e(t,e)}function s0(t,e,n,r,a,i){eke(e,n);const o=Z2e(t),s=t.TEXTURE_2D;return He(t,()=>t.bindTexture(s,o)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),He(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?He(t,()=>t.texImage2D(s,0,r,e,n,0,a,i,null)):He(t,()=>t.texStorage2D(s,1,r,e,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function ez(t){return t.internalFormatFloat}function hSe(t,e,n,r){const[a,i]=i0(e,n);return s0(t,a,i,ez(r),r.textureFormatFloat,t.FLOAT)}function tz(t){return t.internalFormatHalfFloat}function pSe(t,e,n,r){const[a,i]=i0(e,n);return s0(t,a,i,tz(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function nz(t){return t.downloadTextureFormat}function fSe(t,e,n,r){const[a,i]=i0(e,n);return s0(t,a,i,nz(r),t.RGBA,t.UNSIGNED_BYTE)}function rz(t){return t.internalFormatPackedFloat}function gSe(t,e,n,r){const[a,i]=hp(e,n);return s0(t,a,i,rz(r),t.RGBA,t.FLOAT)}function az(t){return t.internalFormatPackedHalfFloat}function mSe(t,e,n,r){const[a,i]=hp(e,n);return s0(t,a,i,az(r),t.RGBA,r.textureTypeHalfFloat)}function ySe(t,e,n){return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),GB(t,e,"clipSpacePos",n,3,20,0)&&GB(t,e,"uv",n,2,20,12)}function bSe(t,e,n,r,a,i){He(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=i.internalFormatPackedFloat),o.set(a),fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function vSe(t,e,n){He(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function xSe(t,e,n,r){const a=t.createBuffer();He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const i=4*4*e*n;return He(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)),He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function wSe(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function kSe(t,e,n,r){const[a,i]=i0(e,n),o=4,s=new Uint8Array(B2e(e*n,o));return He(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function SSe(t,e,n,r,a,i,o,s){const l=t,u=new Float32Array(z2e(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function CSe(t,e,n){const r=new Float32Array(e*n*4);return He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class c_{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,L2e(n,e)):this.gl=Xo(n);let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=h2(this.gl,i),vo(this.gl,o))this.textureHalfFloatExtension=h2(this.gl,o);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),vo(this.gl,a))this.colorBufferHalfFloatExtension=h2(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",vo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(vo(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=cSe(this.gl),this.indexBuffer=dSe(this.gl),this.framebuffer=tke(this.gl),this.textureConfig=e_(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;He(e,()=>e.finish()),He(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),He(e,()=>e.deleteFramebuffer(this.framebuffer)),He(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),He(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),He(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),hSe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),pSe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),fSe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),vSe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),bSe(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),mSe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),gSe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(HB(this.gl,this.framebuffer),this.outputTexture=null),He(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>kSe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,o){return SSe(this.gl,e,n,r,a,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return wSe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=xSe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=a.clientWaitSync(i,0,0);return o===a.ALREADY_SIGNALED||o===a.CONDITION_SATISFIED},n=i}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>CSe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=uSe(n));const r=X2e(n);return He(n,()=>n.attachShader(r,this.vertexShader)),He(n,()=>n.attachShader(r,e)),Y2e(n,r),this.debug&&t_(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=ySe(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&He(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&t_(this.gl,this.program),He(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?rke(this.gl,e,n):ake(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),He(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),ike(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=hp(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&t_(this.gl,this.program),p2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),He(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),He(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=h2(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await aT(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=ESe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),aT(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),n_(this.gl,e,this.framebuffer),this.debug&&p2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(n_(this.gl,this.outputTexture,this.framebuffer),this.debug&&p2(this.gl)):HB(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;n_(a,e,this.framebuffer),this.debug&&p2(a),this.outputTexture=e,He(a,()=>a.viewport(0,0,n,r)),He(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),He(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function ESe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{addImpl:ISe,bincountImpl:iz,bincountReduceImpl:TSe,castImpl:NSe,ceilImpl:_Se,concatImpl:OSe,equalImpl:RSe,expImpl:$Se,expm1Impl:MSe,floorImpl:PSe,gatherNdImpl:ASe,gatherV2Impl:LSe,greaterImpl:DSe,greaterEqualImpl:FSe,lessImpl:BSe,lessEqualImpl:zSe,linSpaceImpl:jSe,logImpl:VSe,maxImpl:USe,maximumImpl:WSe,minimumImpl:GSe,multiplyImpl:HSe,negImpl:qSe,notEqualImpl:KSe,prodImpl:XSe,raggedGatherImpl:YSe,raggedTensorToTensorImpl:QSe,rangeImpl:JSe,rsqrtImpl:ZSe,scatterImpl:eCe,sigmoidImpl:tCe,simpleAbsImpl:oz,sliceImpl:nCe,sparseFillEmptyRowsImpl:rCe,sparseReshapeImpl:aCe,sparseSegmentReductionImpl:sz,sqrtImpl:iCe,stridedSliceImpl:oCe,stringNGramsImpl:sCe,stringSplitImpl:lCe,stringToHashBucketFastImpl:uCe,subImpl:cCe,tileImpl:dCe,topKImpl:hCe,transposeImpl:d_,uniqueImpl:pCe}=kye;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lz(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ba(t,e){return e===1?[t]:lz(t,e)}function fCe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gCe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Fa(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ba("rc",this.rank),r=On(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class uz{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${mCe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?l_():s_(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function mCe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?yke(["r","c","d"],"inputShape"):gd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class yCe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const a=dz(n,r),i=hz(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=cz(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let s;return a===ea.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===ea.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===ea.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===ea.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===ea.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=dz(r,a),o=hz(n,i,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=cz(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),l=fe().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function bCe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F||e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function cz(t,e,n,r,a){const i=vCe(e,r);let o;if(a){const[l,u]=hp(t[0],t[1]);o=l*u}else{const[l,u]=i0(t[0],t[1]);o=l*u}const s=bCe(n,i);return o*s}function vCe(t,e){switch(t){case ea.PACKED_2X2_FLOAT32:return rz(e);case ea.PACKED_2X2_FLOAT16:return az(e);case ea.UNPACKED_FLOAT32:return ez(e);case ea.UNPACKED_FLOAT16:return tz(e);case ea.PACKED_4X1_UNSIGNED_BYTE:return nz(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function xCe(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?ea.PACKED_2X2_FLOAT32:ea.UNPACKED_FLOAT32:t?ea.PACKED_2X2_FLOAT16:ea.UNPACKED_FLOAT16}function dz(t,e){if(t===zi.UPLOAD)return ea.PACKED_2X2_FLOAT32;if(t===zi.RENDER||t==null)return xCe(e);if(t===zi.DOWNLOAD||t===zi.PIXELS)return ea.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function hz(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Tl{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const xo="if (isnan(x)) return x;",wCe="return x;",pz="return abs(x);",kCe="return (x >= 0.0) ? x : (exp(x) - 1.0);",SCe=xo+`
  return (x < 0.0) ? 0.0 : x;
`,CCe=xo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,vp="return x;",ECe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ICe="return x;",TCe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,NCe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_Ce=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,OCe="return 1.0 / (1.0 + exp(-1.0 * x));";class yd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class RCe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length);const n=e.length,r=Ba("rc",n),a=On(n),i=fCe(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $Ce=Bw,MCe=1e-7,PCe=1e-4,h_={};function ACe(t){return t in h_||(h_[t]={}),h_[t]}const LCe=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),DCe=600;function FCe(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*DCe/1024/1024}class Z2 extends Ev{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof c_)n=e;else{const r=Xo(fe().getNumber("WEBGL_VERSION"),e);n=new c_(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Xo(fe().getNumber("WEBGL_VERSION"));n=new c_(r),this.binaryCache=ACe(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new yCe(this.gpgpu),this.numMBBeforeWarning=FCe(),this.texData=new rT(this,vl())}nextDataId(){return Z2.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:zi.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:zi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:o,shape:s,isPacked:l}=n;if(o!=null){let h;l?h=new yd(s,vp):h=new Tl(s,vp);const f=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:a}],a),m=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=fi());let d;if(a==="complex64"){const h=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=Cl(h,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=fi()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(y=>m.push(y))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(i!=null){let m;l?m=new yd(a,vp):m=new Tl(a,vp);const y=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:o}],o),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const m=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...d2(a))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const m=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),y=m[0],v=m[1];d=Cl(y,v)}else if(u==null)d=this.getValuesFromTexture(e);else{const m=be(a);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const m=this.gpgpu.gl;He(m,()=>m.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(m=>m(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&vl().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:o,dtype:s,isPacked:l,texture:u}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new yd(i,vp):f=new Tl(i,vp);const m=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:s}],s),y=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),y}if(u==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=vl().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>gl(a));return Et(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Et(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!W2e(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=be(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...d2(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(h),m}const o=fe().getBool("WEBGL_PACK")&&a===!0,s=o?r_(n):n,l=o?new oSe(s):new iSe(s),u=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=hl(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=hl(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);s.kernelMs=gL(l),s.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:fi(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=fi(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=LCe){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&be(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Bi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return $Ce(e.shape,n)}packedUnaryOp(e,n,r){const a=new yd(e.shape,n),i=this.compileAndRun(a,[e],r);return vl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=oz(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,pz,e.dtype);const n=new Tl(e.shape,pz),r=this.compileAndRun(n,[e]);return vl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ys(r[0])){const i=r.map(o=>bs(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return vl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new RCe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new gCe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[pp(e.shape),...fp(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[pp(n),...fp(n)],o=new uz(i,r),s=!0,l=[r],u=this.runWebGLProgram(o,[a],e.dtype,l,s);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:o}=r;if(n!=null){const h=be(i),f=n[0]*n[1]*4;V(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=r_(i);let l;a?l=new aSe(s):l=new rSe(s);const u=!0,c=[n??d2(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,a,i=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===a0.DENSE){const b=o??d2(e.outputShape);l.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),be(s.shape)===0)return l.values=Nr(s.dtype,0),s;const u=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&be(b.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!g2(x.shape,b.shape)){const w=b,S=b.shape;b.shape=x.shape,b=this.packedReshape(b,S),u.push(b),x=this.texData.get(b.dataId),w.shape=S}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},h=nSe(e,c,d),f=this.getAndSaveBinary(h,()=>eSe(this.gpgpu,e,c,d)),m=this.activeTimers!=null;let y;m&&(y=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||tSe(this.gpgpu,f,c,d,a),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),m&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=fe().get("WEBGL_FLUSH_THRESHOLD");if(v>0){const b=fi();b-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Kt(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(zt(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?MCe:PCe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=fi());let d=n.texShape;if(d==null&&(d=lke(r,l),n.texShape=d),i!=null){const h=r_(r);let f,m=d[1],y=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([m,y]=hp(d[0],d[1])),l?f=new lSe(h,v):f=new sSe(h,v);const b=v?[y,m]:d,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);v?w.usage=zi.PIXELS:w.usage=zi.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,y,i);const S=[[y,m]],C=!0,E=this.runWebGLProgram(f,[x],a,S,C),_=this.texData.get(E.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=fi()-c)}else{const h=this.acquireTexture(d,s,a,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return this.releaseGPUData(e),n!=null&&(r.values=BCe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*Nv(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await q9(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(WB(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=JB(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=l,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}}Z2.nextDataId=0;function BCe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/BT()&&t4("webgl",()=>new Z2,2);/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p_=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class xp{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Vt(n,r),this.enableShapeUniforms=Fa(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l0=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class u0{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Vt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Fa(i);let o="";if(a)if(i===0||be(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${On(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const s=Ba("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const zCe={kernelName:Wg,backendName:"webgl",kernelFunc:xi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zu(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=xi({inputs:{x:r},backend:n}),l=xi({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}const jCe={kernelName:Uv,backendName:"webgl",kernelFunc:zu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fz="return (a < 0.) ? b * a : a;",gz=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function VCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",fl(i,"float32")),s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new u0(gz,a.shape,o.shape):new xp(fz,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const UCe={kernelName:yx,backendName:"webgl",kernelFunc:VCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mz="return (a < 0.) ? b * a : a;",yz=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function WCe(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new u0(yz,r.shape,a.shape):new xp(mz,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const GCe={kernelName:Lx,backendName:"webgl",kernelFunc:WCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wp="if (isnan(x)) return x;";function Xt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:o}=a,s=i,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),h=n(d.values,l);return s.makeTensorInfo(o.shape,l,h)}const u=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new yd(o.shape,e):c=new Tl(o.shape,t),s.runWebGLProgram(c,[o],l)}}function ta({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:o,backend:s})=>{const{a:l,b:u}=o,c=s;if(r&&l.dtype==="complex64"){const m=c.texData.get(l.dataId),y=c.texData.get(u.dataId),[v,b]=[[m.complexTensorInfos.real,y.complexTensorInfos.real],[m.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(w=>{const[S,C]=w,E={dataId:S.dataId,dtype:S.dtype,shape:l.shape},_={dataId:C.dataId,dtype:C.dtype,shape:u.shape},N=new xp(t,l.shape,u.shape);return c.runWebGLProgram(N,[E,_],Ja(S.dtype,C.dtype))}),x=zu({inputs:{real:v,imag:b},backend:c});return c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(b),x}const d=i||Ja(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&a!=null){const m=c.texData.get(l.dataId).values,y=c.texData.get(u.dataId).values,v=l.dtype==="string"?dd(m):m,b=l.dtype==="string"?dd(y):y,[x,w]=a(l.shape,u.shape,v,b,d),S=c.makeTensorInfo(w,d),C=c.texData.get(S.dataId);return C.values=x,S}const h=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new u0(e,l.shape,u.shape,n):f=new xp(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function c0(t,e=!1){if(t==="linear")return e?ICe:wCe;if(t==="relu")return e?NCe:SCe;if(t==="elu")return e?TCe:kCe;if(t==="relu6")return e?_Ce:CCe;if(t==="prelu")return e?yz:mz;if(t==="leakyrelu")return e?gz:fz;if(t==="sigmoid")return e?OCe:ECe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class bz{constructor(e,n,r,a=!1,i=!1,o=!1,s=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Fa(this.outputShape.length);const c=a?e[1]:e[2],d=Math.ceil(c/2),h=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",b="";s&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:v=`vec4 activation(vec4 x) {
          ${s}
        }`,b="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(S=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${S};
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${y[0]});
          result += (${m[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vz={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class xz{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Vt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wz="return a * b;";function f_(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=Ja(r.dtype,a.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),u=new xz(vz.REAL,r.shape,a.shape),c=new xz(vz.IMAG,r.shape,a.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],h=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),m=zu({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}if(n.shouldExecuteOnCPU([r,a])){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[u,c]=HSe(r.shape,a.shape,s.values,l.values,i),d=n.makeTensorInfo(c,i),h=n.texData.get(d.dataId);return h.values=u,d}let o;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new u0(wz,r.shape,a.shape):o=new xp(wz,r.shape,a.shape),n.runWebGLProgram(o,[r,a],i)}const HCe={kernelName:am,backendName:"webgl",kernelFunc:f_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qCe(t,e,n){const r=[pp(t.shape),...fp(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[pp(e),...fp(e)],o=new uz(i,r),s=!0,l=[r],u=n.runWebGLProgram(o,[a],t.dtype,l,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function De(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=n,s=be(a.shape),l=iT(i,s),u=be(l);V(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(a.dataId);return c.isPacked&&!g2(a.shape,l)&&!(c.texture!==null&&g2(c.shape,l))?qCe(a,l,o):(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}const KCe={kernelName:Vx,backendName:"webgl",kernelFunc:De};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class kz{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];const s=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${qc(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class XCe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(s="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(s="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YCe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=e2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function bd(t,e,n,r){const a=YCe(t.shape);let i=t;for(let o=0;o<a.length;o++){const{inSize:s,windowSize:l,outSize:u}=a[o];let c,d;n==="mean"?c=o===0?new kz({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},s):new kz({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u}):c=new XCe({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class QCe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const a=On(this.rank),i=JCe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function JCe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ZCe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=On(this.rank),i=lz("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const s=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y2(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZCe(t.shape,e):new QCe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eEe(t,e,n,r){const a=e,i=t.shape.length,o=Qt(a,t.shape);let s=o;const l=pr(s,i),u=l!=null;let c=t;u&&(c=y2(t,l,r),s=fr(s.length,i)),Zr("sum",s,i);const[d,h]=Jr(c.shape,s);let f=d;n&&(f=Rr(d,o));const m=be(h),y=be(t.shape)/m,v=De({inputs:{x:c},attrs:{shape:[y,m]},backend:r}),b=Sw(t.dtype),x=bd(v,b,"sum",r),w=De({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),w}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b2(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;return eEe(a,i,o,n)}const tEe={kernelName:Yx,backendName:"webgl",kernelFunc:b2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function za(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,o=n,s=a.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=a.shape[i[c]];let u;if(o.shouldExecuteOnCPU([a])){const c=o.texData.get(a.dataId).values,d=d_(c,a.shape,a.dtype,i,l);u=o.makeTensorInfo(l,a.dtype);const h=o.texData.get(u.dataId);h.values=d}else u=y2(a,i,o);return u}const nEe={kernelName:jh,backendName:"webgl",kernelFunc:za};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sz=1e3;function v2({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],h=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],m=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),b=be(y),x=be(v),w=Vt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,m]);V(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[b,d,f]:[b,f,d],C=r?[x,m,h]:[x,h,m],E=De({inputs:{x:t},backend:a,attrs:{shape:S}}),_=De({inputs:{x:e},backend:a,attrs:{shape:C}}),N=[E,_],$=Math.max(b,x),P=n?E.shape[1]:E.shape[2],D=i!=null,j=o!=null,B=l==="leakyrelu",K=l!=null?c0(l,!0):null,Y=D||j||B||K!=null;let Z;if((f===1||m===1)&&P>Sz&&Y===!1){let F=E,Q=_;n&&(F=za({inputs:{x:E},backend:a,attrs:{perm:[0,2,1]}}),N.push(F)),r&&(Q=za({inputs:{x:_},backend:a,attrs:{perm:[0,2,1]}}),N.push(Q));const J=m!==1,re=m===1;let se=F;J&&(se=De({inputs:{x:F},backend:a,attrs:{shape:[$,P,1]}}),N.push(se));const he=m===1?2:1;let de=Q;re&&(de=De({inputs:{x:Q},backend:a,attrs:{shape:[$,1,P]}}),N.push(de));const ie=f_({inputs:{a:se,b:de},backend:a});Z=b2({inputs:{x:ie},backend:a,attrs:{axis:he,keepDims:!0}}),N.push(ie)}else{const F=Ja(t.dtype,e.dtype),Q=new bz(S,C,[$,f,m],n,r,D,K,j,B),J=[E,_];if(i!=null&&J.push(i),j&&J.push(o),B){const re=a.makeTensorInfo([],"float32",fl(s,"float32"));J.push(re),N.push(re)}Z=a.runWebGLProgram(Q,J,F)}const H=De({inputs:{x:Z},backend:a,attrs:{shape:w}});N.push(Z);for(const F of N)a.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rEe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return v2({a,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}const aEe={kernelName:Em,backendName:"webgl",kernelFunc:rEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cz="return abs(x);";function iEe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=oz(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new yd(r.shape,Cz):a=new Tl(r.shape,Cz),n.runWebGLProgram(a,[r],r.dtype)}const oEe={kernelName:Rv,backendName:"webgl",kernelFunc:iEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sEe=xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,lEe=Xt({opSnippet:sEe}),uEe={kernelName:kg,backendName:"webgl",kernelFunc:lEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cEe=xo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,dEe=Xt({opSnippet:cEe}),hEe={kernelName:Sg,backendName:"webgl",kernelFunc:dEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ez="return a + b;",pEe=ta({opSnippet:Ez,packedOpSnippet:Ez,supportsComplex:!0,cpuKernelImpl:ISe}),fEe={kernelName:zh,backendName:"webgl",kernelFunc:pEe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gEe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class mEe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x2(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return xi({inputs:{x:r[0]},backend:n});if(r.length>fe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const s=Math.floor(r.length/2),l=x2({inputs:r.slice(0,s),backend:n}),u=x2({inputs:r.slice(s),backend:n});return x2({inputs:[l,u],backend:n})}const a=r.map(s=>s.dtype).reduce((s,l)=>Ja(s,l)),i=r.map(s=>s.shape),o=fe().getBool("WEBGL_PACK")?new mEe(r[0].shape,i):new gEe(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const yEe={kernelName:$v,backendName:"webgl",kernelFunc:x2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Qt(i,a.shape);let u=l;const c=pr(u,s);let d=a;c!=null&&(d=za({inputs:{x:a},backend:n,attrs:{perm:c}}),u=fr(u.length,s)),Zr("all",u,s);const[h,f]=Jr(d.shape,u),m=be(f),y=De({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=bd(y,y.dtype,"all",n);let b;if(o){const x=Rr(h,l);b=De({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=De({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const vEe={kernelName:Mv,backendName:"webgl",kernelFunc:bEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Qt(i,a.shape);let u=l;const c=pr(u,s);let d=a;c!=null&&(d=za({inputs:{x:a},backend:n,attrs:{perm:c}}),u=fr(u.length,s)),Zr("any",u,s);const[h,f]=Jr(d.shape,u),m=be(f),y=De({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=bd(y,y.dtype,"any",n);let b;if(o){const x=Rr(h,l);b=De({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=De({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const wEe={kernelName:Pv,backendName:"webgl",kernelFunc:xEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class kEe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class SEe{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,u=On(l),c=Ba("coords",l);let d,h;if(o===1){h=l+1;const N=On(h);d=`
        ${N} sourceLocR = ${N}(${c.join()}, 0);
        ++${c[l-1]};
        ${N} sourceLocG = ${N}(${c.join()}, 0);
        ++${c[l-2]};
        ${N} sourceLocA = ${N}(${c.join()}, 0);
        --${c[l-1]};
        ${N} sourceLocB = ${N}(${c.join()}, 0);
        --${c[l-2]};`}else h=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),m="."+f[h-1],y=f.map(N=>"int "+N),v=Ba("sourceLocR",h-1).concat("inIdx.r"),b=Ba("sourceLocG",h-1).concat("inIdx.g"),x=Ba("sourceLocB",h-1).concat("inIdx.b"),w=Ba("sourceLocA",h-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,E=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,_=a?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iz(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const o=e2(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new kEe(s,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=Iz(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function Tz(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],o=e2(i),s=new SEe(a,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(s,l,"int32");if(u.shape.length===e.shape.length){const c=Tz(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function Nz(t,e,n,r){const a=[n];if(Zr("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Jr(l.shape,a),d=be(c),h=De({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(h);const f=Iz(t,h,r);i.push(f);const m=De({inputs:{x:f},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),m}return Tz(t,e,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Qt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=za({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=fr(o.length,l.shape.length)),Zr("argMax",[o[0]],l.shape.length);const c=Nz(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const EEe={kernelName:Av,backendName:"webgl",kernelFunc:CEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function IEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Qt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=za({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=fr(o.length,l.shape.length)),Zr("argMin",[o[0]],l.shape.length);const c=Nz(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const TEe={kernelName:Lv,backendName:"webgl",kernelFunc:IEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const NEe=xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,_Ee=Xt({opSnippet:NEe}),OEe={kernelName:Cg,backendName:"webgl",kernelFunc:_Ee};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const REe=xo+"return log(x + sqrt(x * x + 1.0));",$Ee=Xt({opSnippet:REe}),MEe={kernelName:Eg,backendName:"webgl",kernelFunc:$Ee};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PEe=xo+`
  return atan(x);
`,AEe=Xt({opSnippet:PEe}),LEe={kernelName:Ig,backendName:"webgl",kernelFunc:AEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const DEe=p_+`
  return atan(a, b);
`,FEe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+l0+`
  return result;
`,BEe=ta({opSnippet:DEe,packedOpSnippet:FEe}),zEe={kernelName:Ng,backendName:"webgl",kernelFunc:BEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jEe=xo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,VEe=Xt({opSnippet:jEe}),UEe={kernelName:Tg,backendName:"webgl",kernelFunc:VEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class d0{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(y||(x="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${f}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?v:b:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const C=Math.floor(o/4)*4,E=o%4,_=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${f}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${S});
      }
    `}}class g_{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,m=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),r){const P=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${P} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / count");const _=Math.floor(o/4)*4,N=o%4,$=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${b}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${$}
            }

            int xC = xCCorner + ${_};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${$}
            }
          }
          setOutput(${E});
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function WEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;o0(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ga(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&wn(c.inShape,c.outShape))return xi({inputs:{x:a},backend:n});const d=new d0(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const GEe={kernelName:Dv,backendName:"webgl",kernelFunc:WEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function HEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=xl(a.shape,i,o,c,s,l,u),h=new g_(d,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}const qEe={kernelName:Fv,backendName:"webgl",kernelFunc:HEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class KEe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class XEe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=d-1-e.padInfo.front,y=h-1-e.padInfo.top,v=f-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${y}, ${v});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],h=xl(o.shape,s,l,d,u,c),f=new XEe(h);return n.runWebGLProgram(f,[a],o.dtype)}const QEe={kernelName:pT,backendName:"webgl",kernelFunc:YEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function JEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;o0([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=ho(o.shape,s,l,1,u),d=new KEe(c);return n.runWebGLProgram(d,[a],o.dtype)}const ZEe={kernelName:hT,backendName:"webgl",kernelFunc:JEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eIe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;return v2({a,b:i,transposeA:o,transposeB:s,backend:n})}const tIe={kernelName:Bv,backendName:"webgl",kernelFunc:eIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nIe{constructor(e,n,r,a,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Vt(e,n),Vt(e,r);let s="0.0";a!=null&&(Vt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";i!=null&&(Vt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rIe{constructor(e,n,r,a,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Vt(e,n),Vt(e,r);let s="vec4(0.0)";a!=null&&(Vt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(Vt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aIe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:o,scale:s}=t;V(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,a,i];let c=null;o!=null&&(c=o.shape,u.push(o));let d=null;s!=null&&(d=s.shape,u.push(s));const h=fe().getBool("WEBGL_PACK_NORMALIZATION")?new rIe(r.shape,a.shape,i.shape,c,d,l):new nIe(r.shape,a.shape,i.shape,c,d,l);return e.runWebGLProgram(h,u,u[0].dtype)},iIe={kernelName:hx,backendName:"webgl",kernelFunc:aIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class oIe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=On(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=sIe(this.rank);let a;const i=e.map((o,s)=>`sourceLoc.${m_[s]} = start[${s}] + coords.${m_[s]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const m_=["x","y","z","w","u","v"];function sIe(t){if(t===1)return"sourceLoc";if(t<=6)return m_.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lIe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=On(this.rank),r=Ba("coords",this.rank),a=Ba("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${o};
        --${a[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${a[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uIe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=c4(e,Je(t.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function kp(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r,[s,l]=d4(a,i,o);if(s4(a,s,l),be(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const d=n.texData.get(a.dataId),h=nCe(d.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,h)}const{isPacked:u}=n.texData.get(a.dataId),c=u4(a.shape,s,l);if(u||!c){const d=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lIe(l):new oIe(l),h=[s];return n.runWebGLProgram(d,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),uIe(a,s,l,n)}const cIe={kernelName:Xx,backendName:"webgl",kernelFunc:kp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dIe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;V(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((x,w)=>x*w),l=Qm(a.shape,i,s),u=Jm(l.length,i.length),c=Zm(a.shape,i,s),d=lN(o,i.length),h=uN(c,o,i.length),f=[],m=De({inputs:{x:a},backend:n,attrs:{shape:l}}),y=za({inputs:{x:m},backend:n,attrs:{perm:u}}),v=De({inputs:{x:y},backend:n,attrs:{shape:c}}),b=kp({inputs:{x:v},backend:n,attrs:{begin:d,size:h}});return f.push(m),f.push(y),f.push(v),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},hIe={kernelName:zv,backendName:"webgl",kernelFunc:dIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=iz(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const fIe={kernelName:jv,backendName:"webgl",kernelFunc:pIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gIe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=Vt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const mIe={kernelName:Vv,backendName:"webgl",kernelFunc:gIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yIe="return float(a != b);",_z=ta({opSnippet:yIe,cpuKernelImpl:KSe,dtype:"bool"}),bIe={kernelName:im,backendName:"webgl",kernelFunc:_z};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h0(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return xi({inputs:{x:a.complexTensorInfos.real},backend:n})}const vIe={kernelName:jx,backendName:"webgl",kernelFunc:h0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xIe="return float(int(x));";function wIe(t,e){const n=new Tl(t.shape,xIe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y_(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return xi({inputs:{x:a},backend:n});const o=$u(a.shape),s=y_({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=zu({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(a.dtype==="complex64"){const o=h0({inputs:{input:a},backend:n}),s=y_({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),s}if(!oT(a.dtype,i)){const o=xi({inputs:{x:a},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const o=n.texData.get(a.dataId).values,[s,l,u]=NSe(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}if(i==="int32")return wIe(a,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Nr("bool",1)),s=_z({inputs:{a,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),s}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const kIe={kernelName:_g,backendName:"webgl",kernelFunc:y_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Oz="return ceil(x);",SIe=Xt({opSnippet:Oz,packedOpSnippet:Oz,cpuKernelImpl:_Se}),CIe={kernelName:Og,backendName:"webgl",kernelFunc:SIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class EIe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class IIe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:o}=r;let s;fe().getBool("WEBGL_PACK_CLIP")?s=new IIe(a.shape):s=new EIe(a.shape);const l=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,l)}const NIe={kernelName:Rg,backendName:"webgl",kernelFunc:TIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _Ie{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rz(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function OIe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new _Ie(r.shape),o=[Rz(r,a.complexTensorInfos.real),Rz(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const RIe={kernelName:Wv,backendName:"webgl",kernelFunc:OIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $Ie{constructor(e){this.outputShape=[],this.outputShape=Es(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class MIe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Es(e,n);const r=this.outputShape,a=r.length,i=On(a),o=Ba("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((y,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const u=s[n],c=s.slice(-2),d=s.join();let h=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<l.length;y++){const v=l[y-1];h+=`
        if (${u} < ${l[y]}  && ${u} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${w2(s,u,v)}),
            vec2(${w2(c,u,v)}));
        }`}const f=l.length,m=l[l.length-1];h+=`
        return getChannel(
          getT${f}(${w2(s,u,m)}),
          vec2(${w2(c,u,m)}));`,this.userCode=`
      float getValue(${s.map(y=>"int "+y)}) {
        ${h}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[a-1]} = ${o[a-1]} + 1;
        if (${o[a-1]} < ${r[a-1]}) {
          result.g = getValue(${o});
        }

        ${o[a-2]} = ${o[a-2]} + 1;
        if (${o[a-2]} < ${r[a-2]}) {
          result.a = getValue(${o});
        }

        ${o[a-1]} = ${o[a-1]} - 1;
        if (${o[a-2]} < ${r[a-2]} &&
            ${o[a-1]} < ${r[a-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function w2(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k2(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return xi({inputs:{x:a.complexTensorInfos.imag},backend:n})}const PIe={kernelName:mx,backendName:"webgl",kernelFunc:k2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p0(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(v=>h0({inputs:{input:v},backend:n})),h=t.map(v=>k2({inputs:{input:v},backend:n})),f=p0(d,e,n),m=p0(h,e,n),y=zu({inputs:{real:f,imag:m},backend:n});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const d=t.map(x=>{const w=[-1,be(x.shape.slice(e))];return De({inputs:{x},backend:n,attrs:{shape:w}})}),h=d.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),f=Es(d.map(x=>x.shape),1),m=d[0].shape[0]===1,y=OSe(h,f,r,m),v=Es(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>i){const d=[];for(let f=0;f<t.length;f+=i){const m=t.slice(f,f+i);d.push(p0(m,e,n))}const h=p0(d,e,n);for(const f of d)n.disposeIntermediateTensorInfo(f);return h}if(fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const d=new MIe(t.map(h=>h.shape),e);return n.runWebGLProgram(d,t,r)}const{tensors2D:o,outShape:s}=AIe(t,e,n),l=new $Ie(o.map(d=>d.shape)),u=n.runWebGLProgram(l,o,r);o.forEach(d=>n.disposeIntermediateTensorInfo(d));const c=De({inputs:{x:u},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(u),c}function AIe(t,e,n){const r=Es(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>De({inputs:{x:a},attrs:{shape:[-1,be(a.shape.slice(e))]},backend:n})),outShape:r}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $z(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Qt(a,e[0].shape)[0],o=e.map(u=>u.shape);iN(o,i);const s=Es(e.map(u=>u.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(u=>be(u.shape)>0);return l.length===1?xi({inputs:{x:l[0]},backend:n}):p0(l,i,n)}const LIe={kernelName:Gv,backendName:"webgl",kernelFunc:$z};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Mz{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,m=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",b=v?1:2,x=v?2:3,w=v?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class DIe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,m=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Pz{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Fa(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<c;v++)h+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;h+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<c;v++)h+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const b=v*2;if(h+=`
           xC = xCCorner + ${b*l};
           `,s===1){if(b<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?h+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=o%2===0?Iv(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:h+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?h+=`
                     xC${b+1} = xTexelC${b};
                     `:h+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(h+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(h+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(h+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",m="";r&&(a?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${m}
         setOutput(result);
       }
     `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class FIe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Fa(this.outputShape.length);const{dataFormat:r}=n,a=Da(),i=r==="channelsLast",o=i?1:2,s=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${a.output} = result;
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Az({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",m=!1,y=!1;let v;const b=[];if(i!=null){const x=S2(i.shape,f);x!=null&&(i=De({inputs:{x:i},backend:r,attrs:{shape:x}}),b.push(i))}if(a!=null){const x=S2(a.shape,f);x!=null&&(a=De({inputs:{x:a},backend:r,attrs:{shape:x}}),b.push(a))}if(!((d===1||h===1)&&c>Sz)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&wn(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,V(g2(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=De({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);const E=v2({a:w,b:C,backend:r,transposeA:m,transposeB:y,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o}),_=r.texData.get(E.dataId);V(_.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,_.shape=n.outShape,v=xi({inputs:{x:E},backend:r}),v.shape=n.outShape,b.push(E)}else{const x=n.outHeight*n.outWidth,w=De({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=De({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=v2({a:f?w:S,b:f?S:w,transposeA:!f,transposeB:y,backend:r,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o});v=De({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),b.push(w),b.push(S),b.push(C)}for(const x of b)r.disposeIntermediateTensorInfo(x);return v}function Lz({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:h,dataFormat:f}=n,m=f==="channelsLast",y=l*u*c,v=h*d,b=[n.batchSize,y,v],x=!0,w=!1,S=[];if(i!=null){const F=S2(i.shape,m);F!=null&&(i=De({inputs:{x:i},backend:r,attrs:{shape:F}}),S.push(i))}if(a!=null){const F=S2(a.shape,m);F!=null&&(a=De({inputs:{x:a},backend:r,attrs:{shape:F}}),S.push(a))}const C=De({inputs:{x:e},backend:r,attrs:{shape:[1,y,be(e.shape)/y]}});S.push(C);const E=new FIe(b,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(E,[t],"float32",_),$=De({inputs:{x:N},backend:r,attrs:{shape:b}});S.push(N),S.push($);const P=a!=null,D=i!=null,j=s==="leakyrelu",B=s?c0(s,!0):null,K=new bz(m?$.shape:C.shape,m?C.shape:$.shape,m?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],x,w,P,B,D,j),Y=m?[$,C]:[C,$];if(a&&Y.push(a),D&&Y.push(i),j){const F=r.makeTensorInfo([],"float32",fl(o,"float32"));Y.push(F),S.push(F)}const Z=r.runWebGLProgram(K,Y,"float32"),H=De({inputs:{x:Z},backend:r,attrs:{shape:n.outShape}});S.push(Z);for(const F of S)r.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=wl(l),h=jr(a.shape,i.shape,o,u,s,c,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=Az({x:a,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const y=new Pz(h),v=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(y,[a,i],"float32",v)}else if(fe().getBool("WEBGL_CONV_IM2COL"))f=Lz({x:a,filter:i,convInfo:h,backend:n});else{const y=new Mz(h);f=n.runWebGLProgram(y,[a,i],"float32")}const m=De({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),m}const zIe={kernelName:Hv,backendName:"webgl",kernelFunc:BIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class jIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class VIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class UIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class WIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=wl(l),h=jr(a.shape,c,o,1,s,u,!1,d),f=new jIe(h);return n.runWebGLProgram(f,[a,i],"float32")}const HIe={kernelName:qv,backendName:"webgl",kernelFunc:GIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=wl(u),h=jr(o,i.shape,s,1,l,c,!1,d),f=new VIe(h);return n.runWebGLProgram(f,[a,i],"float32")}const KIe={kernelName:Kv,backendName:"webgl",kernelFunc:qIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=Ou(a.shape,i.shape,o,l,s),c=new DIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const YIe={kernelName:Xv,backendName:"webgl",kernelFunc:XIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r,u=Ou(a.shape,l,o,1,s),c=new UIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const JIe={kernelName:fT,backendName:"webgl",kernelFunc:QIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r,u=Ou(l,i.shape,s,1,o),c=new WIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const e3e={kernelName:Yv,backendName:"webgl",kernelFunc:ZIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const t3e=wp+`
  return cos(x);
`,n3e=Xt({opSnippet:t3e}),r3e={kernelName:$g,backendName:"webgl",kernelFunc:n3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const a3e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,i3e=Xt({opSnippet:a3e}),o3e={kernelName:Mg,backendName:"webgl",kernelFunc:i3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class s3e{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,u]=e,[c]=n,[d,h]=r;this.outputShape=[c,d,h,u];const f=a==="bilinear"?1:0,[m,y]=[`${s-1}.0`,`${l-1}.0`],[v,b,x]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[w,S,C]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,c=new s3e(a.shape,i.shape,s,l,u);return n.runWebGLProgram(c,[a,i,o],"float32")},u3e={kernelName:Zv,backendName:"webgl",kernelFunc:l3e};var f0;(function(t){t.Prod="*",t.Sum="+"})(f0||(f0={}));class Dz{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===f0.Prod?"1.0":"0.0",s=r?o:`getX(${Fz(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=a?`end != ${l-1}`:"end != 0",c=a?"end + 1":"end - 1"):(u=a?`end + pow2 < ${l}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${On(i)} coords = getOutputCoords();
        int end = ${Bz(i,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${Bz(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${Fz(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Fz(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function Bz(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zz(t,e,n,r,a,i){const o=e.shape.length,s=pr([r],o);let l=e;s!=null&&(l=za({inputs:{x:e},backend:n,attrs:{perm:s}}));const u=fr(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=xi({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const f=new Dz(t,l.shape,!1,i),m=[[h]],y=d;d=n.runWebGLProgram(f,[d],d.dtype,m),n.disposeIntermediateTensorInfo(y)}if(a){const h=new Dz(t,l.shape,a,i),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(s!=null){const h=Vm(s),f=za({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return zz(f0.Prod,a,n,i,o,s)}const d3e={kernelName:Qv,backendName:"webgl",kernelFunc:c3e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return zz(f0.Sum,a,n,i,o,s)}const p3e={kernelName:Jv,backendName:"webgl",kernelFunc:h3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=iz(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=TSe(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const g3e={kernelName:ex,backendName:"webgl",kernelFunc:f3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class m3e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r,s=a.shape[0],l=o==="NHWC"?a.shape[1]:a.shape[2],u=o==="NHWC"?a.shape[2]:a.shape[3],c=o==="NHWC"?a.shape[3]:a.shape[1],d=l*i,h=u*i,f=c/(i*i),m=o==="NHWC"?[s,d,h,f]:[s,f,d,h],y=new m3e(m,i,o);return n.runWebGLProgram(y,[a],a.dtype)}const b3e={kernelName:tx,backendName:"webgl",kernelFunc:y3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class jz{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Fa(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(a?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Vz{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Fa(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)f+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<d;b++)f+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(h+1)/2;b++){const x=b*2;if(f+=`
          xC = xCCorner + ${x*u};
          `,l===1){if(x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,u===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const w=s%2===0?Iv(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let m="",y="";r&&(a?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),V(ga(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=jr(a.shape,i.shape,o,c,s,u,!0);let h;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new Vz(d):h=new jz(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[a,i],"float32",f)}const x3e={kernelName:nx,backendName:"webgl",kernelFunc:v3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class w3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class k3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=jr(a.shape,c,o,s,l,u,!0),h=new w3e(d);return n.runWebGLProgram(h,[a,i],"float32")}const C3e={kernelName:rx,backendName:"webgl",kernelFunc:S3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=jr(c,i.shape,o,s,l,u,!0),h=new k3e(d);return n.runWebGLProgram(h,[a,i],"float32")}const I3e={kernelName:ax,backendName:"webgl",kernelFunc:E3e};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class T3e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N3e(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=be(r.shape),o=De({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new T3e(i),l=n.runWebGLProgram(s,[o],o.dtype),u=De({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const _3e={kernelName:ix,backendName:"webgl",kernelFunc:N3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class O3e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:h}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=Fm(a.shape,i.shape,o,s,"NHWC",l);let c;const d=new O3e(u);c=n.runWebGLProgram(d,[a,i],"float32");const h=De({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),h}const $3e={kernelName:ox,backendName:"webgl",kernelFunc:R3e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M3e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=xN(a,i.length);kN(o.length,l,i);const{path:u,steps:c}=SN(s,l),d=c.length;let h=null,f=o.length;const m=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=wN(f,l[v]);let w;CN(b)?w=i[v]:(w=za({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),m.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);wn(w.shape,S)||(w=De({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),h===null?h=w:(h=f_({inputs:{a:w,b:h},backend:n}),m.push(h))}y<d-1&&(u[y]>=0&&(h=b2({inputs:{x:h},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),m.push(h)),f--)}for(const y of m)y!==h&&n.disposeIntermediateTensorInfo(y);return h}const P3e={kernelName:sx,backendName:"webgl",kernelFunc:M3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A3e="return (x >= 0.0) ? x : (exp(x) - 1.0);",L3e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,D3e=Xt({opSnippet:A3e,packedOpSnippet:L3e}),F3e={kernelName:Ag,backendName:"webgl",kernelFunc:D3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B3e="return (b >= 1.0) ? a : a * (b + 1.0);",z3e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,j3e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new u0(z3e,r.shape,a.shape):new xp(B3e,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},V3e={kernelName:yT,backendName:"webgl",kernelFunc:j3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U3e=`
  return vec4(equal(a, b));
`,W3e="return float(a == b);",G3e=ta({opSnippet:W3e,packedOpSnippet:U3e,dtype:"bool",cpuKernelImpl:RSe}),H3e={kernelName:Dg,backendName:"webgl",kernelFunc:G3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q3e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${hN};
  float a1 = ${pN};
  float a2 = ${fN};
  float a3 = ${gN};
  float a4 = ${mN};
  float a5 = ${yN};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,K3e=Xt({opSnippet:q3e}),X3e={kernelName:Lg,backendName:"webgl",kernelFunc:K3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y3e=wp+`
  return exp(x);
`,Q3e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Uz=Xt({opSnippet:Y3e,packedOpSnippet:Q3e,cpuKernelImpl:$Se,dtype:"float32"}),J3e={kernelName:Fg,backendName:"webgl",kernelFunc:Uz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b_(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(V(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),De({inputs:{x:i},backend:r,attrs:{shape:s}})}const Z3e={kernelName:lx,backendName:"webgl",kernelFunc:b_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Wz="return exp(x) - 1.0;",eTe=Xt({opSnippet:Wz,packedOpSnippet:Wz,cpuKernelImpl:MSe}),tTe={kernelName:Bg,backendName:"webgl",kernelFunc:eTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Gz{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${a}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hz(t,e,n){const r=n.texData.get(t.dataId),a=be(t.shape),i=t.shape[t.shape.length-1],o=a/i,s=De({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=s.shape,u=new Gz("real",l,e),c=new Gz("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),m=zu({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const y=De({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(m),y}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nTe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Hz(r,!1,n)}const rTe={kernelName:ux,backendName:"webgl",kernelFunc:nTe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class aTe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g0(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||Bh(a),i==="string"){const o=_r(i,be(r));return o.fill(a),e.makeTensorInfo(r,i,o)}else{const o=new aTe(r,a),s=[[a]];return e.runWebGLProgram(o,[],i,s)}}const iTe={kernelName:cx,backendName:"webgl",kernelFunc:g0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class oTe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sTe={kernelName:dx,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new oTe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qz="return floor(x);",lTe=Xt({opSnippet:qz,packedOpSnippet:qz,cpuKernelImpl:PSe}),uTe={kernelName:zg,backendName:"webgl",kernelFunc:lTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cTe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,dTe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,hTe=ta({opSnippet:cTe,packedOpSnippet:dTe,dtype:"int32"}),pTe={kernelName:jg,backendName:"webgl",kernelFunc:hTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class fTe{constructor(e){this.variableNames=["A"];const n=Da(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gTe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Da(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mTe={kernelName:gw,backendName:"webgl",kernelFunc:yTe};let Sp,v_=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function yTe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,u]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[u,l],d=[u,l,i];if(s||o){const y=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Sp==null||y!==v_)&&(v_=y,Sp=document.createElement("canvas").getContext("2d",{willReadFrequently:v_})),Sp.canvas.width=l,Sp.canvas.height=u,Sp.drawImage(a,0,0,l,u),a=Sp.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=zi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);const f=fe().getBool("WEBGL_PACK")?new gTe(d):new fTe(d),m=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),m}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r,y=wl(c),v=jr(a.shape,i.shape,l,d,u,h,!1,y);let b;const x=[],w=o!=null,S=s!=null,C=f==="leakyrelu",E=()=>{const N=[a,i],$=(P,D)=>{if(D==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){const j=De({inputs:{x:P},backend:n,attrs:{shape:[P.shape[0],1,1]}});return x.push(j),j}return P};if(w&&N.push($(o,c)),S&&N.push($(s,c)),C){const P=n.makeTensorInfo([],"float32",fl(m,"float32"));N.push(P),x.push(P)}return N};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))b=Az({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:m});else if(v.strideWidth<=2&&y==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const N=f?c0(f,!0):null,$=new Pz(v,w,N,S,C),P=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],D=E();b=n.runWebGLProgram($,D,"float32",P)}else if(fe().getBool("WEBGL_CONV_IM2COL"))b=Lz({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:m});else{const N=f?c0(f,!1):null,$=new Mz(v,w,N,S,C),P=E();b=n.runWebGLProgram($,P,"float32")}const _=De({inputs:{x:b},backend:n,attrs:{shape:v.outShape}});return x.push(b),x.forEach(N=>n.disposeIntermediateTensorInfo(N)),_}const vTe={kernelName:Im,backendName:"webgl",kernelFunc:bTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,m=[];let y=c;y==null&&(y=[1,1]),V(ga(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const v=jr(a.shape,i.shape,l,y,u,d,!0),b=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,x=h?c0(h,b):null,w=[a,i],S=o!=null,C=s!=null,E=h==="leakyrelu";if(S&&w.push(o),C&&w.push(s),E){const P=n.makeTensorInfo([],"float32",fl(f,"float32"));w.push(P),m.push(P)}let _;b?_=new Vz(v,S,x,C,E):_=new jz(v,S,x,C,E);const N=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],$=n.runWebGLProgram(_,w,"float32",N);return m.forEach(P=>n.disposeIntermediateTensorInfo(P)),$}const wTe={kernelName:Tm,backendName:"webgl",kernelFunc:xTe};class kTe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=On(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function STe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,o=i[i.length-1],s=be(r.shape),[l,u,c,d]=Tw(r,a),h=De({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),f=De({inputs:{x:r},backend:n,attrs:{shape:[be(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=ASe(b,x,r.dtype,u,o,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,w.values)}const m=new kTe(o,d,[u,c],r.shape),y=n.runWebGLProgram(m,[f,h],f.dtype),v=De({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),v}const CTe={kernelName:fx,backendName:"webgl",kernelFunc:STe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ETe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=On(this.rank),a=ITe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function ITe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r,l=Qt(o,a.shape)[0];if(fe().get("DEBUG")){const x=n.readSync(i.dataId),w=a.shape[l];for(let S=0;S<x.length;++S){const C=x[S];V(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const u=TN(a,i,l,s),c=be(i.shape),d=[],h=De({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=De({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(h),d.push(f);const m=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const x=n.bufferSync(f),w=n.bufferSync(h),S=LSe(w,x,m);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(u.outputShape,S.dtype,S.values)}const y=new ETe(h.shape,m),v=n.runWebGLProgram(y,[h,f],h.dtype);d.push(v);const b=De({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const TTe={kernelName:px,backendName:"webgl",kernelFunc:Kz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const NTe="return float(a > b);",_Te=`
  return vec4(greaterThan(a, b));
`,OTe=ta({opSnippet:NTe,packedOpSnippet:_Te,cpuKernelImpl:DSe,dtype:"bool"}),RTe={kernelName:Vg,backendName:"webgl",kernelFunc:OTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $Te="return float(a >= b);",MTe=`
  return vec4(greaterThanEqual(a, b));
`,PTe=ta({opSnippet:$Te,packedOpSnippet:MTe,dtype:"bool",cpuKernelImpl:FSe}),ATe={kernelName:Ug,backendName:"webgl",kernelFunc:PTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LTe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Hz(r,!0,n)}const DTe={kernelName:gx,backendName:"webgl",kernelFunc:LTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FTe="return float(!isnan(x) && !isinf(x));",BTe=Xt({opSnippet:FTe,dtype:"bool"}),zTe={kernelName:Gg,backendName:"webgl",kernelFunc:BTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jTe="return float(isinf(x));",VTe=Xt({opSnippet:jTe,dtype:"bool"}),UTe={kernelName:Hg,backendName:"webgl",kernelFunc:VTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const WTe="return float(isnan(x));",GTe=Xt({opSnippet:WTe,dtype:"bool"}),HTe={kernelName:qg,backendName:"webgl",kernelFunc:GTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qTe="return float(a < b);",KTe=`
  return vec4(lessThan(a, b));
`,XTe=ta({opSnippet:qTe,packedOpSnippet:KTe,cpuKernelImpl:BSe,dtype:"bool"}),YTe={kernelName:Kg,backendName:"webgl",kernelFunc:XTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const QTe="return float(a <= b);",JTe=`
  return vec4(lessThanEqual(a, b));
`,ZTe=ta({opSnippet:QTe,packedOpSnippet:JTe,cpuKernelImpl:zSe,dtype:"bool"}),e4e={kernelName:Xg,backendName:"webgl",kernelFunc:ZTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t4e(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=jSe(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const n4e={kernelName:bx,backendName:"webgl",kernelFunc:t4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r4e=wp+`
  return x < 0.0 ? 0./0. : log(x);
`,a4e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,i4e=Xt({opSnippet:r4e,packedOpSnippet:a4e,cpuKernelImpl:VSe}),o4e={kernelName:Yg,backendName:"webgl",kernelFunc:i4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const s4e=wp+`
  return log(1.0 + x);
`,l4e=Xt({opSnippet:s4e}),u4e={kernelName:Qg,backendName:"webgl",kernelFunc:l4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const c4e="return float(a >= 1.0 && b >= 1.0);",d4e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,h4e=ta({opSnippet:c4e,packedOpSnippet:d4e,dtype:"bool"}),p4e={kernelName:Jg,backendName:"webgl",kernelFunc:h4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const f4e="return float(!(x >= 1.0));",g4e=Xt({opSnippet:f4e}),m4e={kernelName:Zg,backendName:"webgl",kernelFunc:g4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y4e="return float(a >= 1.0 || b >= 1.0);",b4e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,v4e=ta({opSnippet:y4e,packedOpSnippet:b4e,dtype:"bool"}),x4e={kernelName:em,backendName:"webgl",kernelFunc:v4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class w4e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class k4e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r,u=fe().getBool("WEBGL_PACK_NORMALIZATION")?new k4e(a.shape,i,o,s,l):new w4e(a.shape,i,o,s,l);return n.runWebGLProgram(u,[a],a.dtype)},C4e={kernelName:vx,backendName:"webgl",kernelFunc:S4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class E4e{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new E4e(a.shape,s,l,u,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)},T4e={kernelName:bT,backendName:"webgl",kernelFunc:I4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N4e(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=De({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=bd(o,t.dtype,"max",r),l=De({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=a.shape.length,l=Qt(i,a.shape);let u=l;const c=pr(u,s),d=c!=null,h=n.shouldExecuteOnCPU([a]);let f=a;if(d){if(h){const x=n.texData.get(f.dataId).values,w=new Array(s);for(let E=0;E<w.length;E++)w[E]=a.shape[c[E]];const S=d_(x,a.shape,a.dtype,c,w);f=n.makeTensorInfo(w,a.dtype);const C=n.texData.get(f.dataId);C.values=S}else f=y2(a,c,n);u=fr(u.length,s)}Zr("max",u,s);const[m,y]=Jr(f.shape,u);let v=m;o&&(v=Rr(m,l));let b;if(h){const x=n.texData.get(f.dataId).values,w=USe(x,be(y),v,a.dtype);b=n.makeTensorInfo(v,a.dtype);const S=n.texData.get(b.dataId);S.values=w}else b=N4e(f,y,v,n);return d&&n.disposeIntermediateTensorInfo(f),b}const _4e={kernelName:xx,backendName:"webgl",kernelFunc:Xz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O4e=p_+`
  return max(a, b);
`,R4e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+l0+`
  return result;
`,$4e=ta({opSnippet:O4e,packedOpSnippet:R4e,cpuKernelImpl:WSe}),M4e={kernelName:tm,backendName:"webgl",kernelFunc:$4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;o0(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ga(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&wn(c.inShape,c.outShape))return xi({inputs:{x:a},backend:n});const d=new d0(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const A4e={kernelName:wx,backendName:"webgl",kernelFunc:P4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function L4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=xl(a.shape,i,o,c,s,u,l),h=new g_(d,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}const D4e={kernelName:kx,backendName:"webgl",kernelFunc:L4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class F4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class B4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=u-1-e.padInfo.top,f=c-1-e.padInfo.left,m=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function z4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],h=xl(o.shape,s,l,d,u,c),f=new g_(h,"max",!0),m=n.runWebGLProgram(f,[o],o.dtype),y=new B4e(h),v=n.runWebGLProgram(y,[a,m],o.dtype);return n.disposeIntermediateTensorInfo(m),v}const j4e={kernelName:xT,backendName:"webgl",kernelFunc:z4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function V4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;o0([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=ho(s.shape,l,u,1,c,d),f=!0,m=new d0(h,"max",f),y=n.runWebGLProgram(m,[s],s.dtype),v=new F4e(h),b=n.runWebGLProgram(v,[a,y],s.dtype);return n.disposeIntermediateTensorInfo(y),b}const U4e={kernelName:vT,backendName:"webgl",kernelFunc:V4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W4e(t,e,n,r){let a=new d0(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new d0(n,"max",!0,!0,e);const o=r.runWebGLProgram(a,[t],"float32");return[i,o]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const G4e={kernelName:Sx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;V(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];V(ga(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ho(r.shape,a,i,u,o),[d,h]=W4e(r,s,c,l);return[d,h]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H4e(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=De({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=bd(o,"float32","mean",r),l=De({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q4e={kernelName:Cx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,o=n,s=r.shape.length,l=Qt(i,r.shape);let u=l;const c=pr(u,s),d=c!=null,h=o.shouldExecuteOnCPU([r]),f=[];let m=r;if(d){if(h){const w=o.texData.get(m.dataId).values,S=new Array(s);for(let _=0;_<S.length;_++)S[_]=r.shape[c[_]];const C=d_(w,r.shape,r.dtype,c,S);m=o.makeTensorInfo(S,r.dtype);const E=o.texData.get(m.dataId);E.values=C}else m=y2(r,c,o);f.push(m),u=fr(u.length,s)}Zr("sum",u,s);const[y,v]=Jr(m.shape,u);let b=y;a&&(b=Rr(y,l));const x=H4e(m,v,b,o);for(const w of f)o.disposeIntermediateTensorInfo(w);return x}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Qt(i,a.shape);let u=l;const c=pr(u,s);let d=a;c!=null&&(d=za({inputs:{x:a},backend:n,attrs:{perm:c}}),u=fr(u.length,a.shape.length)),Zr("min",u,s);const[h,f]=Jr(d.shape,u),m=be(f),y=De({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=bd(y,y.dtype,"min",n);let b;if(o){const x=Rr(h,l);b=De({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=De({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const X4e={kernelName:Ex,backendName:"webgl",kernelFunc:K4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y4e=p_+`
  return min(a, b);
`,Q4e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+l0+`
  return result;
`,J4e=ta({opSnippet:Y4e,packedOpSnippet:Q4e,cpuKernelImpl:GSe}),Z4e={kernelName:nm,backendName:"webgl",kernelFunc:J4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class eNe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const a=e.length,i=On(a),o=n.map(c=>c[0]).join(","),s=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tNe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,y)=>m[0]+e[y]+m[1]);const a=e.length,i=On(a),o=n.map(m=>m[0]).join(","),s=n.map((m,y)=>m[0]+e[y]).join(","),l=Ba("rc",a),u=Ba("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,h=r==="reflect"?0:1;let f="";if(a===1){const m=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const m=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[a-2]} += 1;
        if(${l[a-2]} < ${this.outputShape[a-2]}) {
          ${m}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[a-1]} += 1;
          if(${c}) {
            ${m}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nNe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tNe(r.shape,a,i):new eNe(r.shape,a,i);return e.runWebGLProgram(o,[r],r.dtype)},rNe={kernelName:Ix,backendName:"webgl",kernelFunc:nNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aNe=`if (b == 0.0) return NAN;
  return mod(a, b);`,iNe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+l0+`
  return result;
`,oNe=ta({opSnippet:aNe,packedOpSnippet:iNe}),sNe={kernelName:rm,backendName:"webgl",kernelFunc:oNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lNe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uNe=`
if (a == b) {
  return 1.0;
};
return a / b;`,cNe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Yz=ta({opSnippet:uNe,packedOpSnippet:cNe,checkOutOfBounds:!0}),dNe={kernelName:Pg,backendName:"webgl",kernelFunc:Yz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qz="return a - b;",Jz=ta({opSnippet:Qz,packedOpSnippet:Qz,supportsComplex:!0,cpuKernelImpl:cCe}),hNe={kernelName:xm,backendName:"webgl",kernelFunc:Jz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zz(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=Qt([i],a.shape),s=Xz({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Rr(s.shape,o),u=De({inputs:{x:s},backend:n,attrs:{shape:l}}),c=Jz({inputs:{a,b:u},backend:n}),d=Uz({inputs:{x:c},backend:n}),h=b2({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=De({inputs:{x:h},backend:n,attrs:{shape:l}}),m=Yz({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}const pNe={kernelName:Zx,backendName:"webgl",kernelFunc:Zz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fNe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r,l=s?a:Zz({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new lNe(u,c,i),h=[[o]],f=n.runWebGLProgram(d,[l],"int32",h);return s||n.disposeIntermediateTensorInfo(l),f}const gNe={kernelName:Tx,backendName:"webgl",kernelFunc:fNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mNe=xo+`
  return -x;
`,yNe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function bNe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,s]=qSe(i.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new yd(r.shape,yNe):a=new Tl(r.shape,mNe),n.runWebGLProgram(a,[r],r.dtype)}const vNe={kernelName:Nx,backendName:"webgl",kernelFunc:bNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xNe=Gw;function wNe(t){Bi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=xNe(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const kNe={kernelName:_x,backendName:"webgl",kernelFunc:wNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const SNe=Hw;function CNe(t){Bi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:f}=SNe(c,d,o,s,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const ENe={kernelName:Ox,backendName:"webgl",kernelFunc:CNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const INe=qw;function TNe(t){Bi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=o,f=s,m=l,y=u,{selectedIndices:v,selectedScores:b}=INe(c,d,h,f,m,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const NNe={kernelName:Rx,backendName:"webgl",kernelFunc:TNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _Ne{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ONe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r,u=be(a.shape),c=new _Ne(u,o,s,l),d=De({inputs:{x:a},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...a.shape,o],m=De({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),m},RNe={kernelName:Mx,backendName:"webgl",kernelFunc:ONe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=h0({inputs:{input:r},backend:n}),i=C2({inputs:{x:a},backend:n}),o=k2({inputs:{input:r},backend:n}),s=C2({inputs:{x:o},backend:n}),l=zu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return g0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const $Ne={kernelName:fw,backendName:"webgl",kernelFunc:C2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ej(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=h0({inputs:{input:r},backend:n}),i=ej({inputs:{x:a},backend:n}),o=k2({inputs:{input:r},backend:n}),s=C2({inputs:{x:o},backend:n}),l=zu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return g0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const MNe={kernelName:$x,backendName:"webgl",kernelFunc:ej};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PNe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return b_({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Yr(i,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=b_({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=$z({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const ANe={kernelName:Px,backendName:"webgl",kernelFunc:PNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LNe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const a=e.length,i=On(a),o=n.map(u=>u[0]).join(","),s=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class DNe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const a=e.length,i=On(a),o=n.map(y=>y[0]).join(","),s=n.map((y,v)=>y[0]+e[v]).join(","),l=Ba("rc",a),u=Ba("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${l[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${l[a-2]} += 1;
       if(${l[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${l[a-1]} += 1;
         if(${c}) {`],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let y=0,v=a===1?2:4;y<v;y++)m+=`
        ${h[y]}
        if (${f}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${d});
        }
      `;m+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tj=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;if(be(a.shape)===0){const u=i.map((c,d)=>c[0]+a.shape[d]+c[1]);return g0({backend:n,attrs:{shape:u,value:o,dtype:a.dtype}})}const s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new DNe(a.shape,i,o):new LNe(a.shape,i,o),l=[[o]];return n.runWebGLProgram(s,[a],a.dtype,l)},FNe={kernelName:Ax,backendName:"webgl",kernelFunc:tj};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const BNe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,zNe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+l0+`
  return result;
`,jNe=ta({opSnippet:BNe,packedOpSnippet:zNe}),VNe={kernelName:om,backendName:"webgl",kernelFunc:jNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function UNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=[],u=Qt(i,a.shape);let c=u;const d=pr(c,s);let h=a;d!=null&&(h=za({inputs:{x:a},backend:n,attrs:{perm:d}}),c=fr(c.length,s),l.push(h)),Zr("prod",c,s);let f;if(n.shouldExecuteOnCPU([h])){const m=n.texData.get(h.dataId).values,{outVals:y,outShape:v,outDtype:b}=XSe(h.shape,h.dtype,m,c);f=n.makeTensorInfo(v,b,y)}else{const[m,y]=Jr(h.shape,c),v=be(y),b=De({inputs:{x:h},backend:n,attrs:{shape:[-1,v]}}),x=Sw(a.dtype),w=bd(b,x,"prod",n);f=De({inputs:{x:w},backend:n,attrs:{shape:m}}),l.push(b),l.push(w)}if(o){l.push(f);const m=Rr(f.shape,u);f=De({inputs:{x:f},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}const WNe={kernelName:Dx,backendName:"webgl",kernelFunc:UNe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GNe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:s}=r,l=a.map(b=>n.readSync(b.dataId)),u=a.map(b=>b.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[h,f,m]=YSe(l,u,c,i.shape,i.dtype,d,o.shape,s),y=h.map(b=>n.makeTensorInfo([b.length],"int32",b)),v=n.makeTensorInfo(m,i.dtype,f);return y.concat([v])}const HNe={kernelName:Fx,backendName:"webgl",kernelFunc:GNe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qNe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),h=s.map(v=>n.readSync(v.dataId)),f=s.map(v=>v.shape),[m,y]=QSe(u,a.shape,c,i.shape,i.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(m,i.dtype,y)}const KNe={kernelName:Bx,backendName:"webgl",kernelFunc:qNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nj=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:o}=n,s=JSe(r,a,i,o);return e.makeTensorInfo([s.length],o,s)},XNe={kernelName:zx,backendName:"webgl",kernelFunc:nj};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const YNe="return 1.0 / x;",QNe=Xt({opSnippet:YNe}),JNe={kernelName:sm,backendName:"webgl",kernelFunc:QNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ZNe=xo+`
  return (x < 0.0) ? 0.0 : x;
`,e_e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,t_e=Xt({opSnippet:ZNe,packedOpSnippet:e_e}),n_e={kernelName:lm,backendName:"webgl",kernelFunc:t_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r_e=xo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,a_e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,i_e=Xt({opSnippet:r_e,packedOpSnippet:a_e}),o_e={kernelName:um,backendName:"webgl",kernelFunc:i_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class s_e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let h;i?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class l_e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let h;i?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u_e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new l_e(a.shape,l,u,i,o):new s_e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],"float32")}const c_e={kernelName:Wx,backendName:"webgl",kernelFunc:u_e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class d_e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],h=1/c,f=1/d,m=Math.ceil(h)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${m});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h_e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new d_e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const p_e={kernelName:kT,backendName:"webgl",kernelFunc:h_e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class f_e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class g_e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m_e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new g_e(a.shape,l,u,i,o):new f_e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],a.dtype)}const y_e={kernelName:Ux,backendName:"webgl",kernelFunc:m_e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class b_e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],h=1/c,f=1/d,m=Math.ceil(h)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${m});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v_e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new b_e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const x_e={kernelName:wT,backendName:"webgl",kernelFunc:v_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class w_e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,i=e.map((s,l)=>a(l)).join(","),o=On(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class k_e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=Ba("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,s=On(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(a.slice())};
          if(${i}){
            result.g = ${u(a.slice())};
          }
          if(${o}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${d(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return h(m)}function u(m){return m[r-1]="("+m[r-1]+" + 1)",h(m)}function c(m){return m[r-2]="("+m[r-2]+" + 1)",h(m)}function d(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",h(m)}function h(m){const y=e.map((x,w)=>f(w,m)),v=y.join(","),b=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${b}))`}function f(m,y){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${y[m]} - 1`:`${y[m]}`}}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,o=a.shape.length,s=Qt(i,a.shape);if(o===0)return xi({inputs:{x:a},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new k_e(a.shape,s):new w_e(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}const C_e={kernelName:Gx,backendName:"webgl",kernelFunc:S_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class E_e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I_e={kernelName:mw,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=new E_e(r.shape,i),[u,c]=sN(o,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(a),Math.cos(a)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T_e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,N_e=Xt({opSnippet:T_e}),__e={kernelName:cm,backendName:"webgl",kernelFunc:N_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O_e="return inversesqrt(x);",R_e=Xt({opSnippet:O_e,cpuKernelImpl:ZSe}),$_e={kernelName:dm,backendName:"webgl",kernelFunc:R_e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rj{constructor(e,n,r,a,i,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=On(i.length),u=On(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const d=`getIndices(${c})`;let h="";a===1?h="i":a===2&&(h="i, coords[1]");const f=`getUpdates(${h})`,m=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${m};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M_e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Xh(i,a,o),h=[d/u,u];if(d===0)return n.makeTensorInfo(o,a.dtype);const f=De({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),m=De({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new rj(l,s,f.shape.length,m.shape.length,c,h),b=n.runWebGLProgram(v,[m,f,y],m.dtype),x=De({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),x}const P_e={kernelName:Hx,backendName:"webgl",kernelFunc:M_e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class A_e{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=fe().getNumber("WEBGL_VERSION")===2?i:o,l=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function L_e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=new A_e(a.shape[0],a.shape[1],i.shape[1],o),l=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",l)}const D_e={kernelName:qx,backendName:"webgl",kernelFunc:L_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class F_e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${s[c]}`),c<e&&l.push(`${s[c]}`);a=l.join(),i=u.join()}const o=On(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B_e(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,o=new F_e(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Ja(a.dtype,i.dtype))}const z_e={kernelName:Kx,backendName:"webgl",kernelFunc:B_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j_e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${cN};
  float scale = ${dN};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,V_e=Xt({opSnippet:j_e}),U_e={kernelName:hm,backendName:"webgl",kernelFunc:V_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W_e=wp+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,G_e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,H_e=Xt({opSnippet:W_e,packedOpSnippet:G_e,cpuKernelImpl:tCe}),q_e={kernelName:mm,backendName:"webgl",kernelFunc:H_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const K_e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,X_e=Xt({opSnippet:K_e}),Y_e={kernelName:gm,backendName:"webgl",kernelFunc:X_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Q_e=wp+`
  return sin(x);
`,J_e=Xt({opSnippet:Q_e}),Z_e={kernelName:pm,backendName:"webgl",kernelFunc:J_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const e5e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,t5e=Xt({opSnippet:e5e}),n5e={kernelName:fm,backendName:"webgl",kernelFunc:t5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r5e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,a5e=Xt({opSnippet:r5e}),i5e={kernelName:ym,backendName:"webgl",kernelFunc:a5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const o5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;V(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((b,x)=>b*x),l=[[0,0]];l.push(...o);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);const u=[],c=tj({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=Qm(c.shape,i,s,!1),h=Jm(d.length,i.length,!1),f=Zm(c.shape,i,s,!1),m=De({inputs:{x:c},backend:n,attrs:{shape:d}}),y=za({inputs:{x:m},backend:n,attrs:{perm:h}}),v=De({inputs:{x:y},backend:n,attrs:{shape:f}});return u.push(c),u.push(m),u.push(y),u.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},s5e={kernelName:Qx,backendName:"webgl",kernelFunc:o5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l5e(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,h,f,m,y]=rCe(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,f),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const u5e={kernelName:ew,backendName:"webgl",kernelFunc:l5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c5e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=aCe(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const d5e={kernelName:tw,backendName:"webgl",kernelFunc:c5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h5e(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=sz(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const p5e={kernelName:nw,backendName:"webgl",kernelFunc:h5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f5e(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=sz(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const g5e={kernelName:rw,backendName:"webgl",kernelFunc:f5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m5e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=Xh(i,a,s),f=!1;if(i.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(i),w=gl(n.readSync(o.dataId)[0]),S=eCe(b,x,s,h,c,u,l,d,w,f);return n.makeTensorInfo(s,S.dtype,S.values)}const m=new rj(u,l,a.shape.length,i.shape.length,d,[h,1],f),y=n.runWebGLProgram(m,[i,a,o],i.dtype),v=De({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(y),v}const y5e={kernelName:aw,backendName:"webgl",kernelFunc:m5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Qt(o,a.shape)[0],l=EN(a,i,s),u=a.shape.length,c=new Array(u).fill(0),d=a.shape.slice();return l.map(h=>{const f=[...d];f[s]=h;const m=kp({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});return c[s]+=h,m})}const v5e={kernelName:Jx,backendName:"webgl",kernelFunc:b5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aj="return sqrt(x);",x5e=Xt({opSnippet:aj,packedOpSnippet:aj,cpuKernelImpl:iCe}),w5e={kernelName:bm,backendName:"webgl",kernelFunc:x5e};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const k5e="return x * x;",S5e=Xt({opSnippet:k5e}),C5e={kernelName:ST,backendName:"webgl",kernelFunc:S5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ij="return (a - b) * (a - b);",E5e=ta({opSnippet:ij,packedOpSnippet:ij}),I5e={kernelName:vm,backendName:"webgl",kernelFunc:E5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T5e({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=xo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Tl(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const N5e={kernelName:Cm,backendName:"webgl",kernelFunc:T5e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _5e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=On(r.length),o=On(r.length);let s="";if(a===1)s="coords * strides + begin";else{let l=0;s=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:m,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=h4(a.shape,i,o,s,l,u,c,d,h);let C;if(y)C=De({inputs:{x:a},backend:n,attrs:{shape:m}});else if(v||b){V(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const _=l4(x,w,S),N=kp({inputs:{x:a},backend:n,attrs:{begin:x,size:_}});C=De({inputs:{x:N},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([a])){const _=n.readSync(a.dataId),N=Et(a.shape,a.dtype,_),$=oCe(f,N,S,x);C=n.makeTensorInfo(m,a.dtype,$.values)}else{const _=new _5e(x,S,f);C=n.runWebGLProgram(_,[a],a.dtype)}const E=De({inputs:{x:C},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(C),E}const R5e={kernelName:iw,backendName:"webgl",kernelFunc:O5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $5e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,h=n.readSync(c.dataId),f=n.readSync(d.dataId),[m,y]=sCe(h,f,a,i,o,s,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",y)]}const M5e={kernelName:ow,backendName:"webgl",kernelFunc:$5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P5e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=lCe(s,l,a),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const A5e={kernelName:sw,backendName:"webgl",kernelFunc:P5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function L5e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),s=uCe(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const D5e={kernelName:lw,backendName:"webgl",kernelFunc:L5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F5e="return tan(x);",B5e=Xt({opSnippet:F5e}),z5e={kernelName:wm,backendName:"webgl",kernelFunc:B5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,V5e=Xt({opSnippet:j5e}),U5e={kernelName:km,backendName:"webgl",kernelFunc:V5e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class W5e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const a=On(this.rank),i=G5e(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function G5e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const s=n.readSync(a.dataId),l=a.dtype==="string"?s.map(d=>gl(d)):s,u=Et(a.shape,a.dtype,l),c=dCe(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}const o=new W5e(a.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const H5e={kernelName:Sm,backendName:"webgl",kernelFunc:oj};class q5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class K5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vd(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function sj(t){let e=1;for(;e<t;)e*=2;return e}function X5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r,s=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>l){const $=n.readSync(a.dataId),[P,D]=hCe($,u,a.dtype,i,o);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(D.shape,D.dtype,D.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[a,g0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(a):a,m=be(u)/c,y=De({inputs:{x:f},attrs:{shape:[m,c]},backend:n});h&&vd(n,f);const v=sj(i),b=sj(c);let x=null;const w=()=>x===null?[y,y]:[y,x],S=($,P,D)=>{const j=w(),B=new q5e(D),K=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[$],[P]],Y=x;x=n.runWebGLProgram(B,j,"int32",K),vd(n,Y)};for(let $=1;$<v;$*=2){const P=$*2;for(let D=$;D>=1;D/=2)S(P,D,[m,b])}for(let $=b;$>v;$/=2){const P=w(),D=new K5e([m,$/2]),j=[[c],[x===null?1:0],[v]],B=x;x=n.runWebGLProgram(D,P,"int32",j),vd(n,B);const K=v/2,Y=K*2;for(let Z=K;Z>=1;Z/=2)S(Y,Z,x.shape)}let C=x;x=kp({inputs:{x},backend:n,attrs:{begin:0,size:[m,i]}}),vd(n,C);let E=Kz({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});vd(n,y);const _=u.slice(0,-1);_.push(i),C=x,x=De({inputs:{x},attrs:{shape:_},backend:n}),vd(n,C);const N=E;return E=De({inputs:{x:E},attrs:{shape:_},backend:n}),vd(n,N),[E,x]}const Y5e={kernelName:uw,backendName:"webgl",kernelFunc:X5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Q5e{constructor(e,n,r,a,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(a){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function J5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,h,f]=a.shape,[m,y]=u??[d,h],v=[c,m,y,f],b=new Q5e(d,h,o,s,l,v);return n.runWebGLProgram(b,[a,i],"float32")}const Z5e={kernelName:cw,backendName:"webgl",kernelFunc:J5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eOe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;o0(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:u}=pCe(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const tOe={kernelName:dw,backendName:"webgl",kernelFunc:eOe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nOe(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a,s=o.shape.length,l=a.shape[i],u=new Array(s-1);let c=0;for(let y=0;y<s;y++)y!==i&&(u[c++]=o.shape[y]);const d=[],h=new Array(s).fill(0),f=o.shape.slice();f[i]=1;const m=new Array(l);for(let y=0;y<m.length;y++){h[i]=y;const v=kp({inputs:{x:o},backend:n,attrs:{begin:h,size:f}}),b=De({inputs:{x:v},backend:n,attrs:{shape:u}});m[y]=b,d.push(v)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const rOe={kernelName:hw,backendName:"webgl",kernelFunc:nOe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class aOe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r,s=a.shape.length,l=[];let u=0;const c=pr([u],s);let d=a;c!=null&&(d=za({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(d),u=fr(1,s)[0]);const h=b7(d.shape,u,o),f=be([d.shape[u]]),m=De({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(m);const y=Sw(a.dtype),v=(S,C,E,_,N)=>{const $=S.shape[0],P=S.shape[1],D=y7(P,N),j={windowSize:D,inSize:P,batchSize:$,numSegments:N},B=new aOe(j,C),K=n.compileAndRun(B,[S,E],_);if(l.push(K),K.shape[1]===N)return K;const Y=nj({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),Z=oj({inputs:{x:Y},backend:n,attrs:{reps:[P/D]}});return l.push(Y),l.push(Z),v(K,C,Z,_,N)},b=v(m,"unsortedSegmentSum",i,y,o),x=De({inputs:{x:b},backend:n,attrs:{shape:h}});let w=x;if(c!=null){l.push(x);const S=Vm(c);w=za({inputs:{x:w},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const oOe={kernelName:pw,backendName:"webgl",kernelFunc:iOe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sOe=[aEe,oEe,uEe,hEe,fEe,yEe,vEe,wEe,EEe,TEe,OEe,MEe,LEe,zEe,UEe,GEe,qEe,QEe,ZEe,tIe,iIe,hIe,fIe,mIe,kIe,CIe,NIe,jCe,RIe,LIe,zIe,HIe,KIe,YIe,JIe,e3e,r3e,o3e,u3e,d3e,p3e,g3e,b3e,x3e,C3e,I3e,_3e,$3e,P3e,F3e,V3e,H3e,X3e,J3e,Z3e,tTe,rTe,iTe,sTe,uTe,pTe,mTe,vTe,wTe,CTe,TTe,RTe,ATe,zCe,DTe,PIe,zTe,UTe,HTe,UCe,YTe,e4e,n4e,o4e,u4e,p4e,m4e,x4e,C4e,T4e,_4e,M4e,A4e,D4e,j4e,U4e,G4e,q4e,X4e,Z4e,rNe,sNe,gNe,HCe,vNe,kNe,ENe,NNe,bIe,RNe,MNe,ANe,FNe,VNe,GCe,WNe,HNe,KNe,XNe,vIe,dNe,JNe,n_e,o_e,KCe,c_e,p_e,y_e,x_e,C_e,I_e,__e,$_e,P_e,D_e,z_e,U_e,q_e,Y_e,Z_e,n5e,cIe,pNe,i5e,s5e,u5e,d5e,p5e,g5e,y5e,v5e,w5e,C5e,I5e,N5e,R5e,M5e,A5e,D5e,hNe,tEe,z5e,U5e,H5e,Y5e,Z5e,nEe,tOe,rOe,oOe,$Ne];for(const t of sOe)vw(t);async function lOe(){return await f1e({base:"pascal",quantizationBytes:2})}async function uOe(t,e){const n=await t.segment(e);return dOe(e,n)}function cOe(t,e,n,r,a){const i=document.createElement("canvas"),o=document.createElement("canvas"),s=i.getContext("2d"),l=o.getContext("2d");i.width=r,i.height=a,o.width=r,o.height=a,s.drawImage(e,0,0,r,a),l.putImageData(n,0,0);const u=s.getImageData(0,0,r,a),c=u.data,d=l.getImageData(0,0,r,a).data;for(let h=0,f=d.length;h<f;h+=4)d[h]===t[0]&&d[h+1]===t[1]&&d[h+2]===t[2]&&(c[h+3]=0);return s.putImageData(u,0,0),i.toDataURL()}function dOe(t,e){const{height:n,width:r,segmentationMap:a}=e,i=new ImageData(a,r,n);return cOe([0,0,0],t,i,r,n)}const hOe=()=>{const t=O.useRef(null),e=async n=>(t.current||(t.current=await lOe()),await uOe(t.current,n));return O.useEffect(()=>()=>{t.current&&t.current.dispose()},[]),{autoRemoveBackground:e}};async function pOe(t){try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);const n=await e.json();return"@type"in n?n["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+n["@type"]),null):gOe(n):"type"in n?n.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+n.type),null):mOe(n):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(e){return console.log("I was unable to get the Manifest you supplied due to: "+e),null}}function fOe(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function gOe(t){var e,n,r;if("sequences"in t){let a=t.sequences;fOe(a)&&(a=[a]);let i=!1;for(const o of a)if("canvases"in o){i=!0;for(const s of o.canvases){const l=(r=(n=(e=s.images[0])==null?void 0:e.resource)==null?void 0:n.service)==null?void 0:r["@id"];if(l)return l}}else i||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function mOe(t){if("items"in t){const e=t.items;for(const n of e){const r=n.items[0].items[0].body.service[0]["@id"];if(r)return r}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function lj(t,e){const n=window.getComputedStyle(t);return parseInt(n.getPropertyValue(e),10)}function yOe(t,e){const{width:n,height:r}=e,a=1080,i="0",o="default",s=".jpg",l=document.querySelector(".displayregioncontainer"),u=document.querySelector(".displayregion");if(!l||!u)throw new Error("Canvas or selection element not found");const{clientWidth:c,clientHeight:d}=l,h=n*d/r,f=(c-h)/2,m=n/h,y=9,v=lj(u,"left"),b=lj(u,"top"),x=Math.round(u.clientWidth+y),w=Math.round(u.clientHeight+y),S=Math.max(Math.round((v-f)*m),0),C=Math.max(Math.round(b*m),0),E=Math.min(Math.round(x*m),n),_=Math.min(Math.round(w*m),r),N=`${S},${C},${E},${_}`;return`${t}/${N}/${a},/${i}/${o}${s}`}const uj={fetchIIIFIdentifier:async t=>{try{return await pOe(t)}catch(e){return console.error(e),null}},getCroppedImagePath:async t=>{try{const e=t+"/info.json",n=await fetch(e);if(!n.ok)throw new Error(n.statusText);const r=await n.json();return yOe(t,r)}catch(e){console.error(e)}}};function bOe({imageList:t,handleImageClick:e}){return X.jsx(da,{margin:"my-4",className:"flex overflow-x-auto",style:{maxHeight:"200px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:t.map(n=>X.jsx("img",{src:n.thumbnail,alt:n.name,onClick:()=>e(n),style:{cursor:"pointer",marginRight:"10px",scrollSnapAlign:"start"},role:"presentation"},n.id))})}const vOe=O.lazy(()=>qP(()=>import("./index-qub-P4p5.js"),_0([]))),xOe={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1,showHomeControl:!1,showFullPageControl:!1,showRotationControl:!1,showFlipControl:!1,showZoomControl:!1},showTitle:!1,showIIIFBadge:!1},wOe={colors:{primary:"#b990c1",accent:"#b990c1",secondary:"#EDECEA"}};function kOe(){const{t}=ps(),e=()=>Xse.success(t("collectionToastSuccess")),{addToArtwork:n,imageLikeList:r}=_c(),[a,i]=O.useState(r[0]||null),[o,s]=O.useState(""),[l,u]=O.useState(""),[c,d]=O.useState([]),[h,f]=O.useState(""),[m,y]=O.useState(!0),{autoRemoveBackground:v}=hOe();O.useEffect(()=>{o&&setTimeout(()=>{u(document.querySelectorAll("canvas")[0].toDataURL())},1e3)},[o]),O.useEffect(()=>{a&&u(a?.image)},[a]);const b=E=>{i(E)},x=E=>{const _=new Image;_.src=E,v(_).then(N=>{f(N)})},w=async(E,_)=>{try{if(e(),m){const N=await uj.getCroppedImagePath(_);N&&n(E,N)}else n(E,_)}catch(N){console.error("Error:",N)}},S=E=>{E&&s(E)},C=()=>X.jsxs("h2",{className:"mt-4 text-lg md:text-xl",children:["\u{1F300} ",t("collectionLoading")]});return X.jsxs(da,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("collectionTitle")}),X.jsx(Kse,{}),X.jsx(bOe,{imageList:r,handleImageClick:b}),a&&X.jsxs(da,{margin:"my-0",children:[X.jsxs(da,{margin:"m-0",className:"flex flex-wrap gap-4 justify-center text-center mx-auto no-safe-areas",children:[X.jsx("p",{className:"text-lg self-center md:text-xl",children:t("collectionSwitchLasso")}),X.jsx(oA,{checked:m,onChange:()=>y(!m)}),X.jsx("p",{className:"text-lg self-center md:text-xl",children:t("collectionSwitchViewer")}),X.jsx(vr,{className:"text-xl w-2/3 mx-auto h-12",rounded:!0,inline:!0,onClick:()=>m?w(a?.id,a?.identifier):w("1",h),children:t("collectionAddText")})]}),m?X.jsx(O.Suspense,{fallback:C(),children:X.jsx(vOe,{iiifContent:a.url,options:xOe,customTheme:wOe,canvasIdCallback:S})}):X.jsxs("div",{className:"mt-4",children:[X.jsx(dle,{value:c,src:l,onChange:E=>{d(E)},onComplete:E=>{E.length&&ole(l,E,(_,N)=>{_||f(N.toDataURL())})}}),X.jsxs("div",{children:[h&&X.jsx(vr,{className:"mt-4 text-xl w-2/3 mx-auto h-12",rounded:!0,inline:!0,onClick:()=>x(h),children:t("collectionRemoveText")}),X.jsx("img",{className:"my-4 mx-auto",src:h,alt:""})]})]})]})]})}function SOe(){const{t}=ps();return X.jsxs(iA,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed k-color-brand-primary text-center",innerClassName:"tabbar-inner",children:[X.jsx(og,{active:du({path:oo("/").pathname,end:!0}),to:"/",component:Sh,icon:X.jsx($a,{material:X.jsx(_te,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:oo("/").pathname,end:!0})&&"animate-pulse"}`}),label:t("start"),touchRipple:!1}),X.jsx(og,{active:du({path:oo("/selection").pathname,end:!0}),to:"/selection",component:Sh,icon:X.jsx($a,{material:X.jsx(Ite,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:oo("/selection").pathname,end:!0})&&"animate-pulse"}`}),label:t("selection"),touchRipple:!1}),X.jsx(og,{active:du({path:oo("/collection").pathname,end:!0}),to:"/collection",component:Sh,icon:X.jsx($a,{material:X.jsx(Fte,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:oo("/collection").pathname,end:!0})&&"animate-pulse"}`}),label:t("collection"),touchRipple:!1}),X.jsx(og,{active:du({path:oo("/creation").pathname,end:!0}),to:"/creation",component:Sh,icon:X.jsx($a,{material:X.jsx($te,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:oo("/creation").pathname,end:!0})&&"animate-pulse"}`}),label:t("artwork"),touchRipple:!1})]})}const COe="/logos/bmbf_logo_de.jpg",EOe="/logos/bmbf_logo_en.jpg",IOe="/logos/digitalwarenkombinat.png",TOe="/logos/prototype_fund_logo.png",NOe=()=>X.jsx(Ct,{href:"https://prototypefund.de/",target:"_blank",children:X.jsx("img",{src:TOe,alt:"Logo Protype Fund",className:"w-48 md:w-64 m-auto"})}),_Oe=()=>{const{i18n:t}=ps();return X.jsx(Ct,{href:"https://www.bmbf.de/",target:"_blank",children:X.jsx("img",{src:t.resolvedLanguage==="en"?EOe:COe,alt:"Logo Bundesministerium f\xFCr Bildung und Forschung",className:"w-48 md:w-64 m-auto"})})},OOe=()=>X.jsx(Ct,{href:"https://digitalwarenkombinat.de/",target:"_blank",children:X.jsx("img",{src:IOe,alt:"Logo Digitalwarenkombinat",className:"w-48 md:w-64 m-auto"})});function ROe(t,e){const{t:n,i18n:r}=ps();return X.jsx(rA,{side:"right",opened:t,onBackdropClick:()=>e(!1),children:X.jsxs(sb,{children:[X.jsx(ab,{right:X.jsx(qte,{onClick:()=>e(!1),className:"mr-4 w-10 h-10"})}),X.jsxs(da,{margin:"my-2 md:my-8",className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("p",{className:"text-xl",children:n("sidebarChooseLanguage")}),X.jsxs("div",{children:[X.jsx(vr,{onClick:()=>r.changeLanguage("de"),className:"p-4 text-xl text-black w-10 mr-2 h-10",rounded:!0,inline:!0,children:"DE"}),X.jsx(vr,{onClick:()=>r.changeLanguage("en"),className:"p-4 text-xl text-black w-10 h-10",rounded:!0,inline:!0,children:"EN"})]}),X.jsx(Ct,{className:"text-xl",to:"/about",component:Sh,onClick:()=>e(!1),children:n("sidebarAbout")}),X.jsx(Ct,{className:"text-xl",to:"/legal",component:Sh,onClick:()=>e(!1),children:n("sidebarLegal")}),X.jsx(NOe,{}),X.jsx(_Oe,{}),X.jsx(OOe,{})]})]})})}function $Oe(){const[t,e]=O.useState(!1);return X.jsxs(X.Fragment,{children:[X.jsx(XP,{theme:"material",children:X.jsxs(sb,{children:[X.jsx(ab,{className:"top-0 sticky",transparent:!0,right:X.jsx(dte,{onClick:()=>e(!0),className:"mr-4 w-10 h-10"})}),X.jsx("main",{className:"h-[calc(100%_-_192px)] overflow-auto",children:X.jsx(ZY,{})}),X.jsx(SOe,{}),ROe(t,e)]})}),X.jsx(vQ,{})]})}function MOe(){const{t}=ps();return X.jsx(X.Fragment,{children:X.jsxs(da,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-5xl mb-8",children:t("legal.title")}),X.jsx("h2",{className:"text-3xl",children:t("legal.informationtitle")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph3")}),X.jsx("h2",{className:"text-3xl",children:t("legal.representation")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.representationparagraph1")}),X.jsx("h2",{className:"text-3xl",children:t("legal.contact")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:X.jsxs(VE,{i18nKey:"legal.contactparagraph1",children:[X.jsx("p",{children:t("legal.contactparagraph1")}),X.jsx(Ct,{href:"mailto:info@digitalwarenkombinat.de",children:"info@digitalwarenkombinat.de"})]})}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.contactparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph3")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph4")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph5")})]})})}var cj={exports:{}},dj={exports:{}},hj={exports:{}},pj={exports:{}},fj={exports:{}},x_=Object.defineProperty,POe=Object.getOwnPropertyDescriptor,AOe=Object.getOwnPropertyNames,LOe=Object.prototype.hasOwnProperty,gj=(t,e)=>{for(var n in e)x_(t,n,{get:e[n],enumerable:!0})},DOe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of AOe(e))!LOe.call(t,a)&&a!==n&&x_(t,a,{get:()=>e[a],enumerable:!(r=POe(e,a))||r.enumerable});return t},FOe=t=>DOe(x_({},"__esModule",{value:!0}),t),mj={};gj(mj,{FluidValue:()=>rRe,Globals:()=>yj,addFluidObserver:()=>aRe,callFluidObserver:()=>Kj,callFluidObservers:()=>nRe,clamp:()=>$j,colorToRgba:()=>$_,colors:()=>KOe,createInterpolator:()=>M_,createStringInterpolator:()=>cRe,defineHidden:()=>jOe,deprecateDirectCall:()=>fRe,deprecateInterpolate:()=>hRe,each:()=>Cj,eachProp:()=>UOe,easings:()=>ZOe,flush:()=>Ej,flushCalls:()=>GOe,frameLoop:()=>_j,getFluidObservers:()=>tRe,getFluidValue:()=>qj,hasFluidValue:()=>eRe,hex3:()=>Dj,hex4:()=>Fj,hex6:()=>Bj,hex8:()=>zj,hsl:()=>Aj,hsla:()=>Lj,is:()=>Ns,isAnimatedString:()=>gRe,isEqual:()=>VOe,isSSR:()=>I2,noop:()=>Sj,onResize:()=>Zj,onScroll:()=>SRe,once:()=>A_,prefix:()=>L2,raf:()=>tn,removeFluidObserver:()=>iRe,rgb:()=>Mj,rgba:()=>Pj,setFluidGetter:()=>Xj,toArray:()=>WOe,useConstant:()=>ERe,useForceUpdate:()=>_Re,useIsomorphicLayoutEffect:()=>D_,useMemoOne:()=>ORe,useOnce:()=>MRe,usePrev:()=>ARe,useReducedMotion:()=>DRe});var BOe=FOe(mj),yj={};gj(yj,{assign:()=>Nj,colors:()=>Uu,createStringInterpolator:()=>T_,skipAnimation:()=>Tj,to:()=>Ij,willAdvance:()=>N_});var w_=y0(),tn=t=>m0(t,w_),k_=y0();tn.write=t=>m0(t,k_);var E2=y0();tn.onStart=t=>m0(t,E2);var S_=y0();tn.onFrame=t=>m0(t,S_);var C_=y0();tn.onFinish=t=>m0(t,C_);var Cp=[];tn.setTimeout=(t,e)=>{let n=tn.now()+e,r=()=>{let i=Cp.findIndex(o=>o.cancel==r);~i&&Cp.splice(i,1),Vu-=~i?1:0},a={time:n,handler:t,cancel:r};return Cp.splice(bj(n),0,a),Vu+=1,vj(),a};var bj=t=>~(~Cp.findIndex(e=>e.time>t)||~Cp.length);tn.cancel=t=>{E2.delete(t),S_.delete(t),C_.delete(t),w_.delete(t),k_.delete(t)},tn.sync=t=>{I_=!0,tn.batchedUpdates(t),I_=!1},tn.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...a){e=a,tn.onStart(n)}return r.handler=t,r.cancel=()=>{E2.delete(n),e=null},r};var E_=typeof window<"u"?window.requestAnimationFrame:()=>{};tn.use=t=>E_=t,tn.now=typeof performance<"u"?()=>performance.now():Date.now,tn.batchedUpdates=t=>t(),tn.catch=console.error,tn.frameLoop="always",tn.advance=()=>{tn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):wj()};var ju=-1,Vu=0,I_=!1;function m0(t,e){I_?(e.delete(t),t(0)):(e.add(t),vj())}function vj(){ju<0&&(ju=0,tn.frameLoop!=="demand"&&E_(xj))}function zOe(){ju=-1}function xj(){~ju&&(E_(xj),tn.batchedUpdates(wj))}function wj(){let t=ju;ju=tn.now();let e=bj(ju);if(e&&(kj(Cp.splice(0,e),n=>n.handler()),Vu-=e),!Vu){zOe();return}E2.flush(),w_.flush(t?Math.min(64,ju-t):16.667),S_.flush(),k_.flush(),C_.flush()}function y0(){let t=new Set,e=t;return{add(n){Vu+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Vu-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Vu-=e.size,kj(e,r=>r(n)&&t.add(r)),Vu+=t.size,e=t)}}}function kj(t,e){t.forEach(n=>{try{e(n)}catch(r){tn.catch(r)}})}function Sj(){}var jOe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Ns={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function VOe(t,e){if(Ns.arr(t)){if(!Ns.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Cj=(t,e)=>t.forEach(e);function UOe(t,e,n){if(Ns.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var WOe=t=>Ns.und(t)?[]:Ns.arr(t)?t:[t];function Ej(t,e){if(t.size){let n=Array.from(t);t.clear(),Cj(n,e)}}var GOe=(t,...e)=>Ej(t,n=>n(...e)),I2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),T_,Ij,Uu=null,Tj=!1,N_=Sj,Nj=t=>{t.to&&(Ij=t.to),t.now&&(tn.now=t.now),t.colors!==void 0&&(Uu=t.colors),t.skipAnimation!=null&&(Tj=t.skipAnimation),t.createStringInterpolator&&(T_=t.createStringInterpolator),t.requestAnimationFrame&&tn.use(t.requestAnimationFrame),t.batchedUpdates&&(tn.batchedUpdates=t.batchedUpdates),t.willAdvance&&(N_=t.willAdvance),t.frameLoop&&(tn.frameLoop=t.frameLoop)},b0=new Set,wo=[],__=[],T2=0,_j={get idle(){return!b0.size&&!wo.length},start(t){T2>t.priority?(b0.add(t),tn.onStart(HOe)):(Oj(t),tn(O_))},advance:O_,sort(t){if(T2)tn.onFrame(()=>_j.sort(t));else{let e=wo.indexOf(t);~e&&(wo.splice(e,1),Rj(t))}},clear(){wo=[],b0.clear()}};function HOe(){b0.forEach(Oj),b0.clear(),tn(O_)}function Oj(t){wo.includes(t)||Rj(t)}function Rj(t){wo.splice(qOe(wo,e=>e.priority>t.priority),0,t)}function O_(t){let e=__;for(let n=0;n<wo.length;n++){let r=wo[n];T2=r.priority,r.idle||(N_(r),r.advance(t),r.idle||e.push(r))}return T2=0,__=wo,__.length=0,wo=e,wo.length>0}function qOe(t,e){let n=t.findIndex(e);return n<0?t.length:n}var $j=(t,e,n)=>Math.min(Math.max(n,t),e),KOe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Yo="[-+]?\\d*\\.?\\d+",N2=Yo+"%";function _2(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Mj=new RegExp("rgb"+_2(Yo,Yo,Yo)),Pj=new RegExp("rgba"+_2(Yo,Yo,Yo,Yo)),Aj=new RegExp("hsl"+_2(Yo,N2,N2)),Lj=new RegExp("hsla"+_2(Yo,N2,N2,Yo)),Dj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Fj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Bj=/^#([0-9a-fA-F]{6})$/,zj=/^#([0-9a-fA-F]{8})$/;function XOe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Bj.exec(t))?parseInt(e[1]+"ff",16)>>>0:Uu&&Uu[t]!==void 0?Uu[t]:(e=Mj.exec(t))?(Ep(e[1])<<24|Ep(e[2])<<16|Ep(e[3])<<8|255)>>>0:(e=Pj.exec(t))?(Ep(e[1])<<24|Ep(e[2])<<16|Ep(e[3])<<8|Uj(e[4]))>>>0:(e=Dj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=zj.exec(t))?parseInt(e[1],16)>>>0:(e=Fj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Aj.exec(t))?(jj(Vj(e[1]),O2(e[2]),O2(e[3]))|255)>>>0:(e=Lj.exec(t))?(jj(Vj(e[1]),O2(e[2]),O2(e[3]))|Uj(e[4]))>>>0:null}function R_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jj(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,i=R_(a,r,t+1/3),o=R_(a,r,t),s=R_(a,r,t-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function Ep(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function Vj(t){return(parseFloat(t)%360+360)%360/360}function Uj(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function O2(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function $_(t){let e=XOe(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,a=(e&65280)>>>8,i=(e&255)/255;return`rgba(${n}, ${r}, ${a}, ${i})`}var M_=(t,e,n)=>{if(Ns.fun(t))return t;if(Ns.arr(t))return M_({range:t,output:e,extrapolate:n});if(Ns.str(t.output[0]))return T_(t);let r=t,a=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{let c=QOe(u,i);return YOe(u,i[c],i[c+1],a[c],a[c+1],l,o,s,r.map)}};function YOe(t,e,n,r,a,i,o,s,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(s==="identity")return u;s==="clamp"&&(u=n)}return r===a?r:e===n?t<=e?r:a:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=i(u),r===-1/0?u=-u:a===1/0?u=u+r:u=u*(a-r)+r,u)}function QOe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var JOe=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,a=e==="end"?Math.floor(r):Math.ceil(r);return $j(0,1,a/t)},R2=1.70158,$2=R2*1.525,Wj=R2+1,Gj=2*Math.PI/3,Hj=2*Math.PI/4.5,M2=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,ZOe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Wj*t*t*t-R2*t*t,easeOutBack:t=>1+Wj*Math.pow(t-1,3)+R2*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*(($2+1)*2*t-$2)/2:(Math.pow(2*t-2,2)*(($2+1)*(t*2-2)+$2)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Gj),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Gj)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Hj))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Hj)/2+1,easeInBounce:t=>1-M2(1-t),easeOutBounce:M2,easeInOutBounce:t=>t<.5?(1-M2(1-2*t))/2:(1+M2(2*t-1))/2,steps:JOe},v0=Symbol.for("FluidValue.get"),Ip=Symbol.for("FluidValue.observers"),eRe=t=>!!(t&&t[v0]),qj=t=>t&&t[v0]?t[v0]():t,tRe=t=>t[Ip]||null;function Kj(t,e){t.eventObserved?t.eventObserved(e):t(e)}function nRe(t,e){let n=t[Ip];n&&n.forEach(r=>{Kj(r,e)})}var rRe=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Xj(this,t)}},Xj=(t,e)=>Yj(t,v0,e);function aRe(t,e){if(t[v0]){let n=t[Ip];n||Yj(t,Ip,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function iRe(t,e){let n=t[Ip];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[Ip]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Yj=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),P2=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,oRe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Qj=new RegExp(`(${P2.source})(%|[a-z]+)`,"i"),sRe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,A2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Jj=t=>{let[e,n]=lRe(t);if(!e||I2())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&A2.test(n)?Jj(n):n||t},lRe=t=>{let e=A2.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},P_,uRe=(t,e,n,r,a)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`,cRe=t=>{P_||(P_=Uu?new RegExp(`(${Object.keys(Uu).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(a=>qj(a).replace(A2,Jj).replace(oRe,$_).replace(P_,$_)),n=e.map(a=>a.match(P2).map(Number)),r=n[0].map((a,i)=>n.map(o=>{if(!(i in o))throw Error('The arity of each "output" value must be equal');return o[i]})).map(a=>M_({...t,output:a}));return a=>{var i;let o=!Qj.test(e[0])&&((i=e.find(l=>Qj.test(l)))==null?void 0:i.replace(P2,"")),s=0;return e[0].replace(P2,()=>`${r[s++](a)}${o||""}`).replace(sRe,uRe)}},L2="react-spring: ",A_=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${L2}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},dRe=A_(console.warn);function hRe(){dRe(`${L2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var pRe=A_(console.warn);function fRe(){pRe(`${L2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function gRe(t){return Ns.str(t)&&(t[0]=="#"||/\d/.test(t)||!I2()&&A2.test(t)||t in(Uu||{}))}var Tp,D2=new WeakMap,mRe=t=>t.forEach(({target:e,contentRect:n})=>{var r;return(r=D2.get(e))==null?void 0:r.forEach(a=>a(n))});function yRe(t,e){Tp||typeof ResizeObserver<"u"&&(Tp=new ResizeObserver(mRe));let n=D2.get(e);return n||(n=new Set,D2.set(e,n)),n.add(t),Tp&&Tp.observe(e),()=>{let r=D2.get(e);r&&(r.delete(t),!r.size&&Tp&&Tp.unobserve(e))}}var F2=new Set,x0,bRe=()=>{let t=()=>{F2.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},vRe=t=>(F2.add(t),x0||(x0=bRe()),()=>{F2.delete(t),!F2.size&&x0&&(x0(),x0=void 0)}),Zj=(t,{container:e=document.documentElement}={})=>e===document.documentElement?vRe(t):yRe(t,e),xRe=(t,e,n)=>e-t===0?1:(n-t)/(e-t),wRe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},kRe=class{constructor(t,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=n=>{let r=this.info[n],{length:a,position:i}=wRe[n];r.current=this.container[`scroll${i}`],r.scrollLength=this.container["scroll"+a]-this.container["client"+a],r.progress=xRe(0,r.scrollLength,r.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},w0=new WeakMap,eV=new WeakMap,L_=new WeakMap,tV=t=>t===document.documentElement?window:t,SRe=(t,{container:e=document.documentElement}={})=>{let n=L_.get(e);n||(n=new Set,L_.set(e,n));let r=new kRe(t,e);if(n.add(r),!w0.has(e)){let i=()=>(n?.forEach(s=>s.advance()),!0);w0.set(e,i);let o=tV(e);window.addEventListener("resize",i,{passive:!0}),e!==document.documentElement&&eV.set(e,Zj(i,{container:e})),o.addEventListener("scroll",i,{passive:!0})}let a=w0.get(e);return tn(a),()=>{var i;tn.cancel(a);let o=L_.get(e);if(!o||(o.delete(r),o.size))return;let s=w0.get(e);w0.delete(e),s&&(tV(e).removeEventListener("scroll",s),window.removeEventListener("resize",s),(i=eV.get(e))==null||i())}},CRe=O;function ERe(t){let e=(0,CRe.useRef)(null);return e.current===null&&(e.current=t()),e.current}var IRe=O,TRe=O,nV=O,D_=I2()?nV.useEffect:nV.useLayoutEffect,NRe=()=>{let t=(0,TRe.useRef)(!1);return D_(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function _Re(){let t=(0,IRe.useState)()[1],e=NRe();return()=>{e.current&&t(Math.random())}}var F_=O;function ORe(t,e){let[n]=(0,F_.useState)(()=>({inputs:e,result:t()})),r=(0,F_.useRef)(),a=r.current,i=a;return i?e&&i.inputs&&RRe(e,i.inputs)||(i={inputs:e,result:t()}):i=n,(0,F_.useEffect)(()=>{r.current=i,a==n&&(n.inputs=n.result=void 0)},[i]),i.result}function RRe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var $Re=O,MRe=t=>(0,$Re.useEffect)(t,PRe),PRe=[],rV=O;function ARe(t){let e=(0,rV.useRef)();return(0,rV.useEffect)(()=>{e.current=t}),e.current}var LRe=O,DRe=()=>{let[t,e]=(0,LRe.useState)(null);return D_(()=>{let n=window.matchMedia("(prefers-reduced-motion)"),r=a=>{e(a.matches),Nj({skipAnimation:a.matches})};return r(n),n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),t};fj.exports=BOe;var nn=fj.exports,aV={exports:{}},FRe=Object.create,B2=Object.defineProperty,BRe=Object.getOwnPropertyDescriptor,zRe=Object.getOwnPropertyNames,jRe=Object.getPrototypeOf,VRe=Object.prototype.hasOwnProperty,URe=(t,e)=>{for(var n in e)B2(t,n,{get:e[n],enumerable:!0})},iV=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of zRe(e))!VRe.call(t,a)&&a!==n&&B2(t,a,{get:()=>e[a],enumerable:!(r=BRe(e,a))||r.enumerable});return t},WRe=(t,e,n)=>(n=t!=null?FRe(jRe(t)):{},iV(e||!t||!t.__esModule?B2(n,"default",{value:t,enumerable:!0}):n,t)),GRe=t=>iV(B2({},"__esModule",{value:!0}),t),oV={};URe(oV,{Animated:()=>B_,AnimatedArray:()=>V_,AnimatedObject:()=>V2,AnimatedString:()=>z2,AnimatedValue:()=>S0,createHost:()=>t$e,getAnimated:()=>lV,getAnimatedType:()=>YRe,getPayload:()=>cV,isAnimated:()=>sV,setAnimated:()=>uV});var HRe=GRe(oV),qRe=nn,k0=Symbol.for("Animated:node"),sV=t=>!!t&&t[k0]===t,lV=t=>t&&t[k0],uV=(t,e)=>(0,qRe.defineHidden)(t,k0,e),cV=t=>t&&t[k0]&&t[k0].getPayload(),B_=class{constructor(){uV(this,this)}getPayload(){return this.payload||[]}},z_=nn,S0=class extends B_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,z_.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new S0(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return z_.is.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){let{done:t}=this;this.done=!1,z_.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},j_=nn,z2=class extends S0{constructor(t){super(0),this._string=null,this._toString=(0,j_.createInterpolator)({output:[t,t]})}static create(t){return new z2(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(j_.is.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=(0,j_.createInterpolator)({output:[this.getValue(),t]})),this._value=0,super.reset()}},KRe=nn,xd=nn,j2={dependencies:null},V2=class extends B_{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){let e={};return(0,xd.eachProp)(this.source,(n,r)=>{sV(n)?e[r]=n.getValue(t):(0,xd.hasFluidValue)(n)?e[r]=(0,xd.getFluidValue)(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&(0,xd.each)(this.payload,t=>t.reset())}_makePayload(t){if(t){let e=new Set;return(0,xd.eachProp)(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){j2.dependencies&&(0,xd.hasFluidValue)(t)&&j2.dependencies.add(t);let e=cV(t);e&&(0,xd.each)(e,n=>this.add(n))}},V_=class extends V2{constructor(t){super(t)}static create(t){return new V_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){let e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(XRe)),!0)}};function XRe(t){return((0,KRe.isAnimatedString)(t)?z2:S0).create(t)}var dV=nn;function YRe(t){let e=lV(t);return e?e.constructor:dV.is.arr(t)?V_:(0,dV.isAnimatedString)(t)?z2:S0}var Np=nn,QRe=WRe(O),C0=O,ji=nn,hV=(t,e)=>{let n=!ji.is.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,C0.forwardRef)((r,a)=>{let i=(0,C0.useRef)(null),o=n&&(0,C0.useCallback)(m=>{i.current=e$e(a,m)},[a]),[s,l]=ZRe(r,e),u=(0,ji.useForceUpdate)(),c=()=>{let m=i.current;n&&!m||(m?e.applyAnimatedValues(m,s.getValue(!0)):!1)===!1&&u()},d=new JRe(c,l),h=(0,C0.useRef)();(0,ji.useIsomorphicLayoutEffect)(()=>(h.current=d,(0,ji.each)(l,m=>(0,ji.addFluidObserver)(m,d)),()=>{h.current&&((0,ji.each)(h.current.deps,m=>(0,ji.removeFluidObserver)(m,h.current)),ji.raf.cancel(h.current.update))})),(0,C0.useEffect)(c,[]),(0,ji.useOnce)(()=>()=>{let m=h.current;(0,ji.each)(m.deps,y=>(0,ji.removeFluidObserver)(y,m))});let f=e.getComponentProps(s.getValue());return QRe.createElement(t,{...f,ref:o})})},JRe=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ji.raf.write(this.update)}};function ZRe(t,e){let n=new Set;return j2.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new V2(t),j2.dependencies=null,[t,n]}function e$e(t,e){return t&&(ji.is.fun(t)?t(e):t.current=e),e}var pV=Symbol.for("AnimatedComponent"),t$e=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=a=>new V2(a),getComponentProps:r=a=>a}={})=>{let a={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},i=o=>{let s=fV(o)||"Anonymous";return Np.is.str(o)?o=i[o]||(i[o]=hV(o,a)):o=o[pV]||(o[pV]=hV(o,a)),o.displayName=`Animated(${s})`,o};return(0,Np.eachProp)(t,(o,s)=>{Np.is.arr(t)&&(s=fV(o)),i[s]=i(o)}),{animated:i}},fV=t=>Np.is.str(t)?t:t&&Np.is.str(t.displayName)?t.displayName:Np.is.fun(t)&&t.name||null;aV.exports=HRe;var E0=aV.exports,gV={exports:{}},U_,mV;function n$e(){if(mV)return U_;mV=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,a=(u,c)=>{for(var d in c)t(u,d,{get:c[d],enumerable:!0})},i=(u,c,d,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of n(c))!r.call(u,f)&&f!==d&&t(u,f,{get:()=>c[f],enumerable:!(h=e(c,f))||h.enumerable});return u},o=u=>i(t({},"__esModule",{value:!0}),u),s={};a(s,{Any:()=>l}),U_=o(s);var l=class{};return U_}var yV;function r$e(){return yV||(yV=1,gV.exports=n$e()),gV.exports}(function(t){var e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(L,U)=>{for(var ee in U)n(L,ee,{get:U[ee],enumerable:!0})},l=(L,U,ee,ae)=>{if(U&&typeof U=="object"||typeof U=="function")for(let ve of a(U))!o.call(L,ve)&&ve!==ee&&n(L,ve,{get:()=>U[ve],enumerable:!(ae=r(U,ve))||ae.enumerable});return L},u=(L,U,ee)=>(l(L,U,"default"),ee&&l(ee,U,"default")),c=(L,U,ee)=>(ee=L!=null?e(i(L)):{},l(U||!L||!L.__esModule?n(ee,"default",{value:L,enumerable:!0}):ee,L)),d=L=>l(n({},"__esModule",{value:!0}),L),h={};s(h,{BailSignal:()=>Ze,Controller:()=>ke,FrameValue:()=>Zt,Globals:()=>Ms.Globals,Interpolation:()=>Qu,Spring:()=>$s,SpringContext:()=>mn,SpringRef:()=>Jo,SpringValue:()=>gn,Trail:()=>wa,Transition:()=>Id,config:()=>re,createInterpolator:()=>Ps.createInterpolator,easings:()=>Ps.easings,inferTo:()=>N,interpolate:()=>Td,to:()=>tk,update:()=>Ju,useChain:()=>K,useInView:()=>xa,useIsomorphicLayoutEffect:()=>Ps.useIsomorphicLayoutEffect,useReducedMotion:()=>Ps.useReducedMotion,useResize:()=>Sn,useScroll:()=>Rl,useSpring:()=>va,useSpringRef:()=>Xu,useSpringValue:()=>Zo,useSprings:()=>Ui,useTrail:()=>rn,useTransition:()=>Ol}),t.exports=d(h);var f=nn,m=nn;function y(L,...U){return m.is.fun(L)?L(...U):L}var v=(L,U)=>L===!0||!!(U&&L&&(m.is.fun(L)?L(U):(0,m.toArray)(L).includes(U))),b=(L,U)=>m.is.obj(L)?U&&L[U]:L,x=(L,U)=>L.default===!0?L[U]:L.default?L.default[U]:void 0,w=L=>L,S=(L,U=w)=>{let ee=C;L.default&&L.default!==!0&&(L=L.default,ee=Object.keys(L));let ae={};for(let ve of ee){let Ce=U(L[ve],ve);m.is.und(Ce)||(ae[ve]=Ce)}return ae},C=["config","onProps","onStart","onChange","onPause","onResume","onRest"],E={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function _(L){let U={},ee=0;if((0,m.eachProp)(L,(ae,ve)=>{E[ve]||(U[ve]=ae,ee++)}),ee)return U}function N(L){let U=_(L);if(U){let ee={to:U};return(0,m.eachProp)(L,(ae,ve)=>ve in U||(ee[ve]=ae)),ee}return{...L}}function $(L){return L=(0,m.getFluidValue)(L),m.is.arr(L)?L.map($):(0,m.isAnimatedString)(L)?m.Globals.createStringInterpolator({range:[0,1],output:[L,L]})(1):L}function P(L){for(let U in L)return!0;return!1}function D(L){return m.is.fun(L)||m.is.arr(L)&&m.is.obj(L[0])}function j(L,U){var ee;(ee=L.ref)==null||ee.delete(L),U?.delete(L)}function B(L,U){var ee;U&&L.ref!==U&&((ee=L.ref)==null||ee.delete(L),U.add(L),L.ref=U)}function K(L,U,ee=1e3){(0,f.useIsomorphicLayoutEffect)(()=>{if(U){let ae=0;(0,f.each)(L,(ve,Ce)=>{let Ae=ve.current;if(Ae.length){let Re=ee*U[Ce];isNaN(Re)?Re=ae:ae=Re,(0,f.each)(Ae,Ne=>{(0,f.each)(Ne.queue,je=>{let gt=je.delay;je.delay=rt=>Re+y(gt||0,rt)})}),ve.start()}})}else{let ae=Promise.resolve();(0,f.each)(L,ve=>{let Ce=ve.current;if(Ce.length){let Ae=Ce.map(Re=>{let Ne=Re.queue;return Re.queue=[],Ne});ae=ae.then(()=>((0,f.each)(Ce,(Re,Ne)=>(0,f.each)(Ae[Ne]||[],je=>Re.queue.push(je))),Promise.all(ve.start())))}})}})}var Y=nn,Z=O,H=nn,F=nn,Q=E0,J=nn,re={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},se={...re.default,mass:1,damping:1,easing:J.easings.linear,clamp:!1},he=class{constructor(){this.velocity=0,Object.assign(this,se)}};function de(L,U,ee){ee&&(ee={...ee},ie(ee,U),U={...ee,...U}),ie(L,U),Object.assign(L,U);for(let Ae in se)L[Ae]==null&&(L[Ae]=se[Ae]);let{frequency:ae,damping:ve}=L,{mass:Ce}=L;return J.is.und(ae)||(ae<.01&&(ae=.01),ve<0&&(ve=0),L.tension=Math.pow(2*Math.PI/ae,2)*Ce,L.friction=4*Math.PI*ve*Ce/ae),L}function ie(L,U){if(!J.is.und(U.decay))L.duration=void 0;else{let ee=!J.is.und(U.tension)||!J.is.und(U.friction);(ee||!J.is.und(U.frequency)||!J.is.und(U.damping)||!J.is.und(U.mass))&&(L.duration=void 0,L.decay=void 0),ee&&(L.frequency=void 0)}}var xe=[],q=class{constructor(){this.changed=!1,this.values=xe,this.toValues=null,this.fromValues=xe,this.config=new he,this.immediate=!1}},oe=nn;function pe(L,{key:U,props:ee,defaultProps:ae,state:ve,actions:Ce}){return new Promise((Ae,Re)=>{let Ne,je,gt=v(ee.cancel??ae?.cancel,U);if(gt)wt();else{oe.is.und(ee.pause)||(ve.paused=v(ee.pause,U));let Ke=ae?.pause;Ke!==!0&&(Ke=ve.paused||v(Ke,U)),Ne=y(ee.delay||0,U),Ke?(ve.resumeQueue.add($t),Ce.pause()):(Ce.resume(),$t())}function rt(){ve.resumeQueue.add($t),ve.timeouts.delete(je),je.cancel(),Ne=je.time-oe.raf.now()}function $t(){Ne>0&&!oe.Globals.skipAnimation?(ve.delayed=!0,je=oe.raf.setTimeout(wt,Ne),ve.pauseQueue.add(rt),ve.timeouts.add(je)):wt()}function wt(){ve.delayed&&(ve.delayed=!1),ve.pauseQueue.delete(rt),ve.timeouts.delete(je),L<=(ve.cancelId||0)&&(gt=!0);try{Ce.start({...ee,callId:L,cancel:gt},Ae)}catch(Ke){Re(Ke)}}})}var Ee=nn,Ie=(L,U)=>U.length==1?U[0]:U.some(ee=>ee.cancelled)?Xe(L.get()):U.every(ee=>ee.noop)?_e(L.get()):Fe(L.get(),U.every(ee=>ee.finished)),_e=L=>({value:L,noop:!0,finished:!0,cancelled:!1}),Fe=(L,U,ee=!1)=>({value:L,finished:U,cancelled:ee}),Xe=L=>({value:L,cancelled:!0,finished:!1});function $e(L,U,ee,ae){let{callId:ve,parentId:Ce,onRest:Ae}=U,{asyncTo:Re,promise:Ne}=ee;return!Ce&&L===Re&&!U.reset?Ne:ee.promise=(async()=>{ee.asyncId=ve,ee.asyncTo=L;let je=S(U,(ht,at)=>at==="onRest"?void 0:ht),gt,rt,$t=new Promise((ht,at)=>(gt=ht,rt=at)),wt=ht=>{let at=ve<=(ee.cancelId||0)&&Xe(ae)||ve!==ee.asyncId&&Fe(ae,!1);if(at)throw ht.result=at,rt(ht),ht},Ke=(ht,at)=>{let kt=new Ze,st=new nt;return(async()=>{if(Ee.Globals.skipAnimation)throw lt(ee),st.result=Fe(ae,!1),rt(st),st;wt(kt);let vt=Ee.is.obj(ht)?{...ht}:{...at,to:ht};vt.parentId=ve,(0,Ee.eachProp)(je,(ni,Gt)=>{Ee.is.und(vt[Gt])&&(vt[Gt]=ni)});let or=await ae.start(vt);return wt(kt),ee.paused&&await new Promise(ni=>{ee.resumeQueue.add(ni)}),or})()},ct;if(Ee.Globals.skipAnimation)return lt(ee),Fe(ae,!1);try{let ht;Ee.is.arr(L)?ht=(async at=>{for(let kt of at)await Ke(kt)})(L):ht=Promise.resolve(L(Ke,ae.stop.bind(ae))),await Promise.all([ht.then(gt),$t]),ct=Fe(ae.get(),!0,!1)}catch(ht){if(ht instanceof Ze)ct=ht.result;else if(ht instanceof nt)ct=ht.result;else throw ht}finally{ve==ee.asyncId&&(ee.asyncId=Ce,ee.asyncTo=Ce?Re:void 0,ee.promise=Ce?Ne:void 0)}return Ee.is.fun(Ae)&&Ee.raf.batchedUpdates(()=>{Ae(ct,ae,ae.item)}),ct})()}function lt(L,U){(0,Ee.flush)(L.timeouts,ee=>ee.cancel()),L.pauseQueue.clear(),L.resumeQueue.clear(),L.asyncId=L.asyncTo=L.promise=void 0,U&&(L.cancelId=U)}var Ze=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},nt=class extends Error{constructor(){super("SkipAnimationSignal")}},et=nn,ln=E0,Ut=L=>L instanceof Zt,Jt=1,Zt=class extends et.FluidValue{constructor(){super(...arguments),this.id=Jt++,this._priority=0}get priority(){return this._priority}set priority(L){this._priority!=L&&(this._priority=L,this._onPriorityChange(L))}get(){let L=(0,ln.getAnimated)(this);return L&&L.getValue()}to(...L){return et.Globals.to(this,L)}interpolate(...L){return(0,et.deprecateInterpolate)(),et.Globals.to(this,L)}toJSON(){return this.get()}observerAdded(L){L==1&&this._attach()}observerRemoved(L){L==0&&this._detach()}_attach(){}_detach(){}_onChange(L,U=!1){(0,et.callFluidObservers)(this,{type:"change",parent:this,value:L,idle:U})}_onPriorityChange(L){this.idle||et.frameLoop.sort(this),(0,et.callFluidObservers)(this,{type:"priority",parent:this,priority:L})}},Mt=Symbol.for("SpringPhase"),It=1,Vn=2,Qn=4,Ua=L=>(L[Mt]&It)>0,Rn=L=>(L[Mt]&Vn)>0,ei=L=>(L[Mt]&Qn)>0,ko=(L,U)=>U?L[Mt]|=Vn|It:L[Mt]&=~Vn,wi=(L,U)=>U?L[Mt]|=Qn:L[Mt]&=~Qn,gn=class extends Zt{constructor(L,U){if(super(),this.animation=new q,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!F.is.und(L)||!F.is.und(U)){let ee=F.is.obj(L)?{...L}:{...U,from:L};F.is.und(ee.default)&&(ee.default=!0),this.start(ee)}}get idle(){return!(Rn(this)||this._state.asyncTo)||ei(this)}get goal(){return(0,F.getFluidValue)(this.animation.to)}get velocity(){let L=(0,Q.getAnimated)(this);return L instanceof Q.AnimatedValue?L.lastVelocity||0:L.getPayload().map(U=>U.lastVelocity||0)}get hasAnimated(){return Ua(this)}get isAnimating(){return Rn(this)}get isPaused(){return ei(this)}get isDelayed(){return this._state.delayed}advance(L){let U=!0,ee=!1,ae=this.animation,{toValues:ve}=ae,{config:Ce}=ae,Ae=(0,Q.getPayload)(ae.to);!Ae&&(0,F.hasFluidValue)(ae.to)&&(ve=(0,F.toArray)((0,F.getFluidValue)(ae.to))),ae.values.forEach((je,gt)=>{if(je.done)return;let rt=je.constructor==Q.AnimatedString?1:Ae?Ae[gt].lastPosition:ve[gt],$t=ae.immediate,wt=rt;if(!$t){if(wt=je.lastPosition,Ce.tension<=0){je.done=!0;return}let Ke=je.elapsedTime+=L,ct=ae.fromValues[gt],ht=je.v0!=null?je.v0:je.v0=F.is.arr(Ce.velocity)?Ce.velocity[gt]:Ce.velocity,at,kt=Ce.precision||(ct==rt?.005:Math.min(1,Math.abs(rt-ct)*.001));if(F.is.und(Ce.duration))if(Ce.decay){let st=Ce.decay===!0?.998:Ce.decay,vt=Math.exp(-(1-st)*Ke);wt=ct+ht/(1-st)*(1-vt),$t=Math.abs(je.lastPosition-wt)<=kt,at=ht*vt}else{at=je.lastVelocity==null?ht:je.lastVelocity;let st=Ce.restVelocity||kt/10,vt=Ce.clamp?0:Ce.bounce,or=!F.is.und(vt),ni=ct==rt?je.v0>0:ct<rt,Gt,Wn=!1,Dn=1,ka=Math.ceil(L/Dn);for(let Wa=0;Wa<ka&&(Gt=Math.abs(at)>st,!(!Gt&&($t=Math.abs(rt-wt)<=kt,$t)));++Wa){or&&(Wn=wt==rt||wt>rt==ni,Wn&&(at=-at*vt,wt=rt));let Eo=-Ce.tension*1e-6*(wt-rt),Sr=-Ce.friction*.001*at,pt=(Eo+Sr)/Ce.mass;at=at+pt*Dn,wt=wt+at*Dn}}else{let st=1;Ce.duration>0&&(this._memoizedDuration!==Ce.duration&&(this._memoizedDuration=Ce.duration,je.durationProgress>0&&(je.elapsedTime=Ce.duration*je.durationProgress,Ke=je.elapsedTime+=L)),st=(Ce.progress||0)+Ke/this._memoizedDuration,st=st>1?1:st<0?0:st,je.durationProgress=st),wt=ct+Ce.easing(st)*(rt-ct),at=(wt-je.lastPosition)/L,$t=st==1}je.lastVelocity=at,Number.isNaN(wt)&&(console.warn("Got NaN while animating:",this),$t=!0)}Ae&&!Ae[gt].done&&($t=!1),$t?je.done=!0:U=!1,je.setValue(wt,Ce.round)&&(ee=!0)});let Re=(0,Q.getAnimated)(this),Ne=Re.getValue();if(U){let je=(0,F.getFluidValue)(ae.to);(Ne!==je||ee)&&!Ce.decay?(Re.setValue(je),this._onChange(je)):ee&&Ce.decay&&this._onChange(Ne),this._stop()}else ee&&this._onChange(Ne)}set(L){return F.raf.batchedUpdates(()=>{this._stop(),this._focus(L),this._set(L)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Rn(this)){let{to:L,config:U}=this.animation;F.raf.batchedUpdates(()=>{this._onStart(),U.decay||this._set(L,!1),this._stop()})}return this}update(L){return(this.queue||(this.queue=[])).push(L),this}start(L,U){let ee;return F.is.und(L)?(ee=this.queue||[],this.queue=[]):ee=[F.is.obj(L)?L:{...U,to:L}],Promise.all(ee.map(ae=>this._update(ae))).then(ae=>Ie(this,ae))}stop(L){let{to:U}=this.animation;return this._focus(this.get()),lt(this._state,L&&this._lastCallId),F.raf.batchedUpdates(()=>this._stop(U,L)),this}reset(){this._update({reset:!0})}eventObserved(L){L.type=="change"?this._start():L.type=="priority"&&(this.priority=L.priority+1)}_prepareNode(L){let U=this.key||"",{to:ee,from:ae}=L;ee=F.is.obj(ee)?ee[U]:ee,(ee==null||D(ee))&&(ee=void 0),ae=F.is.obj(ae)?ae[U]:ae,ae==null&&(ae=void 0);let ve={to:ee,from:ae};return Ua(this)||(L.reverse&&([ee,ae]=[ae,ee]),ae=(0,F.getFluidValue)(ae),F.is.und(ae)?(0,Q.getAnimated)(this)||this._set(ee):this._set(ae)),ve}_update({...L},U){let{key:ee,defaultProps:ae}=this;L.default&&Object.assign(ae,S(L,(Ae,Re)=>/^on/.test(Re)?b(Ae,ee):Ae)),Ed(this,L,"onProps"),Qo(this,"onProps",L,this);let ve=this._prepareNode(L);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ce=this._state;return pe(++this._lastCallId,{key:ee,props:L,defaultProps:ae,state:Ce,actions:{pause:()=>{ei(this)||(wi(this,!0),(0,F.flushCalls)(Ce.pauseQueue),Qo(this,"onPause",Fe(this,ti(this,this.animation.to)),this))},resume:()=>{ei(this)&&(wi(this,!1),Rn(this)&&this._resume(),(0,F.flushCalls)(Ce.resumeQueue),Qo(this,"onResume",Fe(this,ti(this,this.animation.to)),this))},start:this._merge.bind(this,ve)}}).then(Ae=>{if(L.loop&&Ae.finished&&!(U&&Ae.noop)){let Re=ki(L);if(Re)return this._update(Re,!0)}return Ae})}_merge(L,U,ee){if(U.cancel)return this.stop(!0),ee(Xe(this));let ae=!F.is.und(L.to),ve=!F.is.und(L.from);if(ae||ve)if(U.callId>this._lastToId)this._lastToId=U.callId;else return ee(Xe(this));let{key:Ce,defaultProps:Ae,animation:Re}=this,{to:Ne,from:je}=Re,{to:gt=Ne,from:rt=je}=L;ve&&!ae&&(!U.default||F.is.und(gt))&&(gt=rt),U.reverse&&([gt,rt]=[rt,gt]);let $t=!(0,F.isEqual)(rt,je);$t&&(Re.from=rt),rt=(0,F.getFluidValue)(rt);let wt=!(0,F.isEqual)(gt,Ne);wt&&this._focus(gt);let Ke=D(U.to),{config:ct}=Re,{decay:ht,velocity:at}=ct;(ae||ve)&&(ct.velocity=0),U.config&&!Ke&&de(ct,y(U.config,Ce),U.config!==Ae.config?y(Ae.config,Ce):void 0);let kt=(0,Q.getAnimated)(this);if(!kt||F.is.und(gt))return ee(Fe(this,!0));let st=F.is.und(U.reset)?ve&&!U.default:!F.is.und(rt)&&v(U.reset,Ce),vt=st?rt:this.get(),or=$(gt),ni=F.is.num(or)||F.is.arr(or)||(0,F.isAnimatedString)(or),Gt=!Ke&&(!ni||v(Ae.immediate||U.immediate,Ce));if(wt){let Wa=(0,Q.getAnimatedType)(gt);if(Wa!==kt.constructor)if(Gt)kt=this._set(or);else throw Error(`Cannot animate between ${kt.constructor.name} and ${Wa.name}, as the "to" prop suggests`)}let Wn=kt.constructor,Dn=(0,F.hasFluidValue)(gt),ka=!1;if(!Dn){let Wa=st||!Ua(this)&&$t;(wt||Wa)&&(ka=(0,F.isEqual)($(vt),or),Dn=!ka),(!(0,F.isEqual)(Re.immediate,Gt)&&!Gt||!(0,F.isEqual)(ct.decay,ht)||!(0,F.isEqual)(ct.velocity,at))&&(Dn=!0)}if(ka&&Rn(this)&&(Re.changed&&!st?Dn=!0:Dn||this._stop(Ne)),!Ke&&((Dn||(0,F.hasFluidValue)(Ne))&&(Re.values=kt.getPayload(),Re.toValues=(0,F.hasFluidValue)(gt)?null:Wn==Q.AnimatedString?[1]:(0,F.toArray)(or)),Re.immediate!=Gt&&(Re.immediate=Gt,!Gt&&!st&&this._set(Ne)),Dn)){let{onRest:Wa}=Re;(0,F.each)(Nl,Sr=>Ed(this,U,Sr));let Eo=Fe(this,ti(this,Ne));(0,F.flushCalls)(this._pendingCalls,Eo),this._pendingCalls.add(ee),Re.changed&&F.raf.batchedUpdates(()=>{var Sr;Re.changed=!st,Wa?.(Eo,this),st?y(Ae.onRest,Eo):(Sr=Re.onStart)==null||Sr.call(Re,Eo,this)})}st&&this._set(vt),Ke?ee($e(U.to,U,this._state,this)):Dn?this._start():Rn(this)&&!wt?this._pendingCalls.add(ee):ee(_e(vt))}_focus(L){let U=this.animation;L!==U.to&&((0,F.getFluidObservers)(this)&&this._detach(),U.to=L,(0,F.getFluidObservers)(this)&&this._attach())}_attach(){let L=0,{to:U}=this.animation;(0,F.hasFluidValue)(U)&&((0,F.addFluidObserver)(U,this),Ut(U)&&(L=U.priority+1)),this.priority=L}_detach(){let{to:L}=this.animation;(0,F.hasFluidValue)(L)&&(0,F.removeFluidObserver)(L,this)}_set(L,U=!0){let ee=(0,F.getFluidValue)(L);if(!F.is.und(ee)){let ae=(0,Q.getAnimated)(this);if(!ae||!(0,F.isEqual)(ee,ae.getValue())){let ve=(0,Q.getAnimatedType)(ee);!ae||ae.constructor!=ve?(0,Q.setAnimated)(this,ve.create(ee)):ae.setValue(ee),ae&&F.raf.batchedUpdates(()=>{this._onChange(ee,U)})}}return(0,Q.getAnimated)(this)}_onStart(){let L=this.animation;L.changed||(L.changed=!0,Qo(this,"onStart",Fe(this,ti(this,L.to)),this))}_onChange(L,U){U||(this._onStart(),y(this.animation.onChange,L,this)),y(this.defaultProps.onChange,L,this),super._onChange(L,U)}_start(){let L=this.animation;(0,Q.getAnimated)(this).reset((0,F.getFluidValue)(L.to)),L.immediate||(L.fromValues=L.values.map(U=>U.lastPosition)),Rn(this)||(ko(this,!0),ei(this)||this._resume())}_resume(){F.Globals.skipAnimation?this.finish():F.frameLoop.start(this)}_stop(L,U){if(Rn(this)){ko(this,!1);let ee=this.animation;(0,F.each)(ee.values,ve=>{ve.done=!0}),ee.toValues&&(ee.onChange=ee.onPause=ee.onResume=void 0),(0,F.callFluidObservers)(this,{type:"idle",parent:this});let ae=U?Xe(this.get()):Fe(this.get(),ti(this,L??ee.to));(0,F.flushCalls)(this._pendingCalls,ae),ee.changed&&(ee.changed=!1,Qo(this,"onRest",ae,this))}}};function ti(L,U){let ee=$(U),ae=$(L.get());return(0,F.isEqual)(ae,ee)}function ki(L,U=L.loop,ee=L.to){let ae=y(U);if(ae){let ve=ae!==!0&&N(ae),Ce=(ve||L).reverse,Ae=!ve||ve.reset;return Si({...L,loop:U,default:!1,pause:void 0,to:!Ce||D(ee)?ee:void 0,from:Ae?L.from:void 0,reset:Ae,...ve})}}function Si(L){let{to:U,from:ee}=L=N(L),ae=new Set;return F.is.obj(U)&&ba(U,ae),F.is.obj(ee)&&ba(ee,ae),L.keys=ae.size?Array.from(ae):null,L}function Rs(L){let U=Si(L);return F.is.und(U.default)&&(U.default=S(U)),U}function ba(L,U){(0,F.eachProp)(L,(ee,ae)=>ee!=null&&U.add(ae))}var Nl=["onStart","onRest","onChange","onPause","onResume"];function Ed(L,U,ee){L.animation[ee]=U[ee]!==x(U,ee)?b(U[ee],L.key):void 0}function Qo(L,U,...ee){var ae,ve,Ce,Ae;(ve=(ae=L.animation)[U])==null||ve.call(ae,...ee),(Ae=(Ce=L.defaultProps)[U])==null||Ae.call(Ce,...ee)}var Wt=nn,ue=["onStart","onChange","onRest"],ge=1,ke=class{constructor(L,U){this.id=ge++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),U&&(this._flush=U),L&&this.start({default:!0,...L})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(L=>L.idle&&!L.isDelayed&&!L.isPaused)}get item(){return this._item}set item(L){this._item=L}get(){let L={};return this.each((U,ee)=>L[ee]=U.get()),L}set(L){for(let U in L){let ee=L[U];Wt.is.und(ee)||this.springs[U].set(ee)}}update(L){return L&&this.queue.push(Si(L)),this}start(L){let{queue:U}=this;return L?U=(0,Wt.toArray)(L).map(Si):this.queue=[],this._flush?this._flush(this,U):(Pt(this,U),Me(this,U))}stop(L,U){if(L!==!!L&&(U=L),U){let ee=this.springs;(0,Wt.each)((0,Wt.toArray)(U),ae=>ee[ae].stop(!!L))}else lt(this._state,this._lastAsyncId),this.each(ee=>ee.stop(!!L));return this}pause(L){if(Wt.is.und(L))this.start({pause:!0});else{let U=this.springs;(0,Wt.each)((0,Wt.toArray)(L),ee=>U[ee].pause())}return this}resume(L){if(Wt.is.und(L))this.start({pause:!1});else{let U=this.springs;(0,Wt.each)((0,Wt.toArray)(L),ee=>U[ee].resume())}return this}each(L){(0,Wt.eachProp)(this.springs,L)}_onFrame(){let{onStart:L,onChange:U,onRest:ee}=this._events,ae=this._active.size>0,ve=this._changed.size>0;(ae&&!this._started||ve&&!this._started)&&(this._started=!0,(0,Wt.flush)(L,([Re,Ne])=>{Ne.value=this.get(),Re(Ne,this,this._item)}));let Ce=!ae&&this._started,Ae=ve||Ce&&ee.size?this.get():null;ve&&U.size&&(0,Wt.flush)(U,([Re,Ne])=>{Ne.value=Ae,Re(Ne,this,this._item)}),Ce&&(this._started=!1,(0,Wt.flush)(ee,([Re,Ne])=>{Ne.value=Ae,Re(Ne,this,this._item)}))}eventObserved(L){if(L.type=="change")this._changed.add(L.parent),L.idle||this._active.add(L.parent);else if(L.type=="idle")this._active.delete(L.parent);else return;Wt.raf.onFrame(this._onFrame)}};function Me(L,U){return Promise.all(U.map(ee=>Ge(L,ee))).then(ee=>Ie(L,ee))}async function Ge(L,U,ee){let{keys:ae,to:ve,from:Ce,loop:Ae,onRest:Re,onResolve:Ne}=U,je=Wt.is.obj(U.default)&&U.default;Ae&&(U.loop=!1),ve===!1&&(U.to=null),Ce===!1&&(U.from=null);let gt=Wt.is.arr(ve)||Wt.is.fun(ve)?ve:void 0;gt?(U.to=void 0,U.onRest=void 0,je&&(je.onRest=void 0)):(0,Wt.each)(ue,ct=>{let ht=U[ct];if(Wt.is.fun(ht)){let at=L._events[ct];U[ct]=({finished:kt,cancelled:st})=>{let vt=at.get(ht);vt?(kt||(vt.finished=!1),st&&(vt.cancelled=!0)):at.set(ht,{value:null,finished:kt||!1,cancelled:st||!1})},je&&(je[ct]=U[ct])}});let rt=L._state;U.pause===!rt.paused?(rt.paused=U.pause,(0,Wt.flushCalls)(U.pause?rt.pauseQueue:rt.resumeQueue)):rt.paused&&(U.pause=!0);let $t=(ae||Object.keys(L.springs)).map(ct=>L.springs[ct].start(U)),wt=U.cancel===!0||x(U,"cancel")===!0;(gt||wt&&rt.asyncId)&&$t.push(pe(++L._lastAsyncId,{props:U,state:rt,actions:{pause:Wt.noop,resume:Wt.noop,start(ct,ht){wt?(lt(rt,L._lastAsyncId),ht(Xe(L))):(ct.onRest=Re,ht($e(gt,ct,rt,L)))}}})),rt.paused&&await new Promise(ct=>{rt.resumeQueue.add(ct)});let Ke=Ie(L,await Promise.all($t));if(Ae&&Ke.finished&&!(ee&&Ke.noop)){let ct=ki(U,Ae,ve);if(ct)return Pt(L,[ct]),Ge(L,ct,!0)}return Ne&&Wt.raf.batchedUpdates(()=>Ne(Ke,L,L.item)),Ke}function bt(L,U){let ee={...L.springs};return U&&(0,Wt.each)((0,Wt.toArray)(U),ae=>{Wt.is.und(ae.keys)&&(ae=Si(ae)),Wt.is.obj(ae.to)||(ae={...ae,to:void 0}),tt(ee,ae,ve=>ot(ve))}),ut(L,ee),ee}function ut(L,U){(0,Wt.eachProp)(U,(ee,ae)=>{L.springs[ae]||(L.springs[ae]=ee,(0,Wt.addFluidObserver)(ee,L))})}function ot(L,U){let ee=new gn;return ee.key=L,U&&(0,Wt.addFluidObserver)(ee,U),ee}function tt(L,U,ee){U.keys&&(0,Wt.each)(U.keys,ae=>{(L[ae]||(L[ae]=ee(ae)))._prepareNode(U)})}function Pt(L,U){(0,Wt.each)(U,ee=>{tt(L.springs,ee,ae=>ot(ae,L))})}var Ln=c(O),xt=O,dn=nn,mn=({children:L,...U})=>{let ee=(0,xt.useContext)($r),ae=U.pause||!!ee.pause,ve=U.immediate||!!ee.immediate;U=(0,dn.useMemoOne)(()=>({pause:ae,immediate:ve}),[ae,ve]);let{Provider:Ce}=$r;return Ln.createElement(Ce,{value:U},L)},$r=ir(mn,{});mn.Provider=$r.Provider,mn.Consumer=$r.Consumer;function ir(L,U){return Object.assign(L,Ln.createContext(U)),L.Provider._context=L,L.Consumer._context=L,L}var gr=nn,Jo=()=>{let L=[],U=function(ae){(0,gr.deprecateDirectCall)();let ve=[];return(0,gr.each)(L,(Ce,Ae)=>{if(gr.is.und(ae))ve.push(Ce.start());else{let Re=ee(ae,Ce,Ae);Re&&ve.push(Ce.start(Re))}}),ve};U.current=L,U.add=function(ae){L.includes(ae)||L.push(ae)},U.delete=function(ae){let ve=L.indexOf(ae);~ve&&L.splice(ve,1)},U.pause=function(){return(0,gr.each)(L,ae=>ae.pause(...arguments)),this},U.resume=function(){return(0,gr.each)(L,ae=>ae.resume(...arguments)),this},U.set=function(ae){(0,gr.each)(L,(ve,Ce)=>{let Ae=gr.is.fun(ae)?ae(Ce,ve):ae;Ae&&ve.set(Ae)})},U.start=function(ae){let ve=[];return(0,gr.each)(L,(Ce,Ae)=>{if(gr.is.und(ae))ve.push(Ce.start());else{let Re=this._getProps(ae,Ce,Ae);Re&&ve.push(Ce.start(Re))}}),ve},U.stop=function(){return(0,gr.each)(L,ae=>ae.stop(...arguments)),this},U.update=function(ae){return(0,gr.each)(L,(ve,Ce)=>ve.update(this._getProps(ae,ve,Ce))),this};let ee=function(ae,ve,Ce){return gr.is.fun(ae)?ae(Ce,ve):ae};return U._getProps=ee,U};function Ui(L,U,ee){let ae=H.is.fun(U)&&U;ae&&!ee&&(ee=[]);let ve=(0,Z.useMemo)(()=>ae||arguments.length==3?Jo():void 0,[]),Ce=(0,Z.useRef)(0),Ae=(0,H.useForceUpdate)(),Re=(0,Z.useMemo)(()=>({ctrls:[],queue:[],flush(at,kt){let st=bt(at,kt);return Ce.current>0&&!Re.queue.length&&!Object.keys(st).some(vt=>!at.springs[vt])?Me(at,kt):new Promise(vt=>{ut(at,st),Re.queue.push(()=>{vt(Me(at,kt))}),Ae()})}}),[]),Ne=(0,Z.useRef)([...Re.ctrls]),je=[],gt=(0,H.usePrev)(L)||0;(0,Z.useMemo)(()=>{(0,H.each)(Ne.current.slice(L,gt),at=>{j(at,ve),at.stop(!0)}),Ne.current.length=L,rt(gt,L)},[L]),(0,Z.useMemo)(()=>{rt(0,Math.min(gt,L))},ee);function rt(at,kt){for(let st=at;st<kt;st++){let vt=Ne.current[st]||(Ne.current[st]=new ke(null,Re.flush)),or=ae?ae(st,vt):U[st];or&&(je[st]=Rs(or))}}let $t=Ne.current.map((at,kt)=>bt(at,je[kt])),wt=(0,Z.useContext)(mn),Ke=(0,H.usePrev)(wt),ct=wt!==Ke&&P(wt);(0,H.useIsomorphicLayoutEffect)(()=>{Ce.current++,Re.ctrls=Ne.current;let{queue:at}=Re;at.length&&(Re.queue=[],(0,H.each)(at,kt=>kt())),(0,H.each)(Ne.current,(kt,st)=>{ve?.add(kt),ct&&kt.start({default:wt});let vt=je[st];vt&&(B(kt,vt.ref),kt.ref?kt.queue.push(vt):kt.start(vt))})}),(0,H.useOnce)(()=>()=>{(0,H.each)(Re.ctrls,at=>at.stop(!0))});let ht=$t.map(at=>({...at}));return ve?[ht,ve]:ht}function va(L,U){let ee=Y.is.fun(L),[[ae],ve]=Ui(1,ee?L:[L],ee?U||[]:U);return ee||arguments.length==2?[ae,ve]:ae}var So=O,Ku=()=>Jo(),Xu=()=>(0,So.useState)(Ku)[0],_l=nn,Zo=(L,U)=>{let ee=(0,_l.useConstant)(()=>new gn(L,U));return(0,_l.useOnce)(()=>()=>{ee.stop()}),ee},Co=nn;function rn(L,U,ee){let ae=Co.is.fun(U)&&U;ae&&!ee&&(ee=[]);let ve=!0,Ce,Ae=Ui(L,(Re,Ne)=>{let je=ae?ae(Re,Ne):U;return Ce=je.ref,ve=ve&&je.reverse,je},ee||[{}]);if((0,Co.useIsomorphicLayoutEffect)(()=>{(0,Co.each)(Ae[1].current,(Re,Ne)=>{let je=Ae[1].current[Ne+(ve?1:-1)];if(B(Re,Ce),Re.ref){je&&Re.update({to:je.springs});return}je?Re.start({to:je.springs}):Re.start()})},ee),ae||arguments.length==3){let Re=Ce??Ae[1];return Re._getProps=(Ne,je,gt)=>{let rt=Co.is.fun(Ne)?Ne(gt,je):Ne;if(rt){let $t=Re.current[gt+(rt.reverse?1:-1)];return $t&&(rt.to=$t.springs),rt}},Ae}return Ae[0]}var hn=c(O),kr=O,Dt=nn;function Ol(L,U,ee){let ae=Dt.is.fun(U)&&U,{reset:ve,sort:Ce,trail:Ae=0,expires:Re=!0,exitBeforeEnter:Ne=!1,onDestroyed:je,ref:gt,config:rt}=ae?ae():U,$t=(0,kr.useMemo)(()=>ae||arguments.length==3?Jo():void 0,[]),wt=(0,Dt.toArray)(L),Ke=[],ct=(0,kr.useRef)(null),ht=ve?null:ct.current;(0,Dt.useIsomorphicLayoutEffect)(()=>{ct.current=Ke}),(0,Dt.useOnce)(()=>((0,Dt.each)(Ke,pt=>{$t?.add(pt.ctrl),pt.ctrl.ref=$t}),()=>{(0,Dt.each)(ct.current,pt=>{pt.expired&&clearTimeout(pt.expirationId),j(pt.ctrl,$t),pt.ctrl.stop(!0)})}));let at=ek(wt,ae?ae():U,ht),kt=ve&&ct.current||[];(0,Dt.useIsomorphicLayoutEffect)(()=>(0,Dt.each)(kt,({ctrl:pt,item:Rt,key:Cr})=>{j(pt,$t),y(je,Rt,Cr)}));let st=[];if(ht&&(0,Dt.each)(ht,(pt,Rt)=>{pt.expired?(clearTimeout(pt.expirationId),kt.push(pt)):(Rt=st[Rt]=at.indexOf(pt.key),~Rt&&(Ke[Rt]=pt))}),(0,Dt.each)(wt,(pt,Rt)=>{Ke[Rt]||(Ke[Rt]={key:at[Rt],item:pt,phase:"mount",ctrl:new ke},Ke[Rt].ctrl.item=pt)}),st.length){let pt=-1,{leave:Rt}=ae?ae():U;(0,Dt.each)(st,(Cr,Er)=>{let pn=ht[Er];~Cr?(pt=Ke.indexOf(pn),Ke[pt]={...pn,item:wt[Cr]}):Rt&&Ke.splice(++pt,0,pn)})}Dt.is.fun(Ce)&&Ke.sort((pt,Rt)=>Ce(pt.item,Rt.item));let vt=-Ae,or=(0,Dt.useForceUpdate)(),ni=S(U),Gt=new Map,Wn=(0,kr.useRef)(new Map),Dn=(0,kr.useRef)(!1);(0,Dt.each)(Ke,(pt,Rt)=>{let Cr=pt.key,Er=pt.phase,pn=ae?ae():U,$n,na,Io=y(pn.delay||0,Cr);if(Er=="mount")$n=pn.enter,na="enter";else{let Ga=at.indexOf(Cr)<0;if(Er!="leave")if(Ga)$n=pn.leave,na="leave";else if($n=pn.update)na="update";else return;else if(!Ga)$n=pn.enter,na="enter";else return}if($n=y($n,pt.item,Rt),$n=Dt.is.obj($n)?N($n):{to:$n},!$n.config){let Ga=rt||ni.config;$n.config=y(Ga,pt.item,Rt,na)}vt+=Ae;let ra={...ni,delay:Io+vt,ref:gt,immediate:pn.immediate,reset:!1,...$n};if(na=="enter"&&Dt.is.und(ra.from)){let Ga=ae?ae():U,Ls=Dt.is.und(Ga.initial)||ht?Ga.from:Ga.initial;ra.from=y(Ls,pt.item,Rt)}let{onResolve:As}=ra;ra.onResolve=Ga=>{y(As,Ga);let Ls=ct.current,sr=Ls.find(aa=>aa.key===Cr);if(sr&&!(Ga.cancelled&&sr.phase!="update")&&sr.ctrl.idle){let aa=Ls.every(an=>an.ctrl.idle);if(sr.phase=="leave"){let an=y(Re,sr.item);if(an!==!1){let Ds=an===!0?0:an;if(sr.expired=!0,!aa&&Ds>0){Ds<=2147483647&&(sr.expirationId=setTimeout(or,Ds));return}}}aa&&Ls.some(an=>an.expired)&&(Wn.current.delete(sr),Ne&&(Dn.current=!0),or())}};let Ap=bt(pt.ctrl,ra);na==="leave"&&Ne?Wn.current.set(pt,{phase:na,springs:Ap,payload:ra}):Gt.set(pt,{phase:na,springs:Ap,payload:ra})});let ka=(0,kr.useContext)(mn),Wa=(0,Dt.usePrev)(ka),Eo=ka!==Wa&&P(ka);(0,Dt.useIsomorphicLayoutEffect)(()=>{Eo&&(0,Dt.each)(Ke,pt=>{pt.ctrl.start({default:ka})})},[ka]),(0,Dt.each)(Gt,(pt,Rt)=>{if(Wn.current.size){let Cr=Ke.findIndex(Er=>Er.key===Rt.key);Ke.splice(Cr,1)}}),(0,Dt.useIsomorphicLayoutEffect)(()=>{(0,Dt.each)(Wn.current.size?Wn.current:Gt,({phase:pt,payload:Rt},Cr)=>{let{ctrl:Er}=Cr;Cr.phase=pt,$t?.add(Er),Eo&&pt=="enter"&&Er.start({default:ka}),Rt&&(B(Er,Rt.ref),(Er.ref||$t)&&!Dn.current?Er.update(Rt):(Er.start(Rt),Dn.current&&(Dn.current=!1)))})},ve?void 0:ee);let Sr=pt=>hn.createElement(hn.Fragment,null,Ke.map((Rt,Cr)=>{let{springs:Er}=Gt.get(Rt)||Rt.ctrl,pn=pt({...Er},Rt.item,Rt,Cr);return pn&&pn.type?hn.createElement(pn.type,{...pn.props,key:Dt.is.str(Rt.key)||Dt.is.num(Rt.key)?Rt.key:Rt.ctrl.id,ref:pn.ref}):pn}));return $t?[Sr,$t]:Sr}var Mp=1;function ek(L,{key:U,keys:ee=U},ae){if(ee===null){let ve=new Set;return L.map(Ce=>{let Ae=ae&&ae.find(Re=>Re.item===Ce&&Re.phase!=="leave"&&!ve.has(Re));return Ae?(ve.add(Ae),Ae.key):Mp++})}return Dt.is.und(ee)?L:Dt.is.fun(ee)?L.map(ee):(0,Dt.toArray)(ee)}var Yu=nn,Rl=({container:L,...U}={})=>{let[ee,ae]=va(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...U}),[]);return(0,Yu.useIsomorphicLayoutEffect)(()=>{let ve=(0,Yu.onScroll)(({x:Ce,y:Ae})=>{ae.start({scrollX:Ce.current,scrollXProgress:Ce.progress,scrollY:Ae.current,scrollYProgress:Ae.progress})},{container:L?.current||void 0});return()=>{(0,Yu.each)(Object.values(ee),Ce=>Ce.stop()),ve()}},[]),ee},Wi=nn,Sn=({container:L,...U})=>{let[ee,ae]=va(()=>({width:0,height:0,...U}),[]);return(0,Wi.useIsomorphicLayoutEffect)(()=>{let ve=(0,Wi.onResize)(({width:Ce,height:Ae})=>{ae.start({width:Ce,height:Ae,immediate:ee.width.get()===0||ee.height.get()===0})},{container:L?.current||void 0});return()=>{(0,Wi.each)(Object.values(ee),Ce=>Ce.stop()),ve()}},[]),ee},yn=O,Gi=nn,Wr={any:0,all:1};function xa(L,U){let[ee,ae]=(0,yn.useState)(!1),ve=(0,yn.useRef)(),Ce=Gi.is.fun(L)&&L,Ae=Ce?Ce():{},{to:Re={},from:Ne={},...je}=Ae,gt=Ce?U:L,[rt,$t]=va(()=>({from:Ne,...je}),[]);return(0,Gi.useIsomorphicLayoutEffect)(()=>{let wt=ve.current,{root:Ke,once:ct,amount:ht="any",...at}=gt??{};if(!wt||ct&&ee||typeof IntersectionObserver>"u")return;let kt=new WeakMap,st=()=>(Re&&$t.start(Re),ae(!0),ct?void 0:()=>{Ne&&$t.start(Ne),ae(!1)}),vt=ni=>{ni.forEach(Gt=>{let Wn=kt.get(Gt.target);if(Gt.isIntersecting!==!!Wn)if(Gt.isIntersecting){let Dn=st();Gi.is.fun(Dn)?kt.set(Gt.target,Dn):or.unobserve(Gt.target)}else Wn&&(Wn(),kt.delete(Gt.target))})},or=new IntersectionObserver(vt,{root:Ke&&Ke.current||void 0,threshold:typeof ht=="number"||Array.isArray(ht)?ht:Wr[ht],...at});return or.observe(wt),()=>or.unobserve(wt)},[gt]),Ce?[ve,rt]:[ve,ee]}function $s({children:L,...U}){return L(va(U))}var $l=nn;function wa({items:L,children:U,...ee}){let ae=rn(L.length,ee);return L.map((ve,Ce)=>{let Ae=U(ve,Ce);return $l.is.fun(Ae)?Ae(ae[Ce]):Ae})}function Id({items:L,children:U,...ee}){return Ol(L,ee)(U)}var $0=nn,Un=nn,es=E0,Qu=class extends Zt{constructor(L,U){super(),this.source=L,this.idle=!0,this._active=new Set,this.calc=(0,Un.createInterpolator)(...U);let ee=this._get(),ae=(0,es.getAnimatedType)(ee);(0,es.setAnimated)(this,ae.create(ee))}advance(L){let U=this._get(),ee=this.get();(0,Un.isEqual)(U,ee)||((0,es.getAnimated)(this).setValue(U),this._onChange(U,this.idle)),!this.idle&&M0(this._active)&&Pp(this)}_get(){let L=Un.is.arr(this.source)?this.source.map(Un.getFluidValue):(0,Un.toArray)((0,Un.getFluidValue)(this.source));return this.calc(...L)}_start(){this.idle&&!M0(this._active)&&(this.idle=!1,(0,Un.each)((0,es.getPayload)(this),L=>{L.done=!1}),Un.Globals.skipAnimation?(Un.raf.batchedUpdates(()=>this.advance()),Pp(this)):Un.frameLoop.start(this))}_attach(){let L=1;(0,Un.each)((0,Un.toArray)(this.source),U=>{(0,Un.hasFluidValue)(U)&&(0,Un.addFluidObserver)(U,this),Ut(U)&&(U.idle||this._active.add(U),L=Math.max(L,U.priority+1))}),this.priority=L,this._start()}_detach(){(0,Un.each)((0,Un.toArray)(this.source),L=>{(0,Un.hasFluidValue)(L)&&(0,Un.removeFluidObserver)(L,this)}),this._active.clear(),Pp(this)}eventObserved(L){L.type=="change"?L.idle?this.advance():(this._active.add(L.parent),this._start()):L.type=="idle"?this._active.delete(L.parent):L.type=="priority"&&(this.priority=(0,Un.toArray)(this.source).reduce((U,ee)=>Math.max(U,(Ut(ee)?ee.priority:0)+1),0))}};function Ci(L){return L.idle!==!1}function M0(L){return!L.size||Array.from(L).every(Ci)}function Pp(L){L.idle||(L.idle=!0,(0,Un.each)((0,es.getPayload)(L),U=>{U.done=!0}),(0,Un.callFluidObservers)(L,{type:"idle",parent:L}))}var tk=(L,...U)=>new Qu(L,U),Td=(L,...U)=>((0,$0.deprecateInterpolate)(),new Qu(L,U)),Ms=nn;Ms.Globals.assign({createStringInterpolator:Ms.createStringInterpolator,to:(L,U)=>new Qu(L,U)});var Ju=Ms.frameLoop.advance,Ps=nn;u(h,r$e(),t.exports)})(pj);var a$e=pj.exports;hj.exports=a$e;var bV=hj.exports;(function(t){var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i=(H,F)=>{for(var Q in F)e(H,Q,{get:F[Q],enumerable:!0})},o=(H,F,Q,J)=>{if(F&&typeof F=="object"||typeof F=="function")for(let re of r(F))!a.call(H,re)&&re!==Q&&e(H,re,{get:()=>F[re],enumerable:!(J=n(F,re))||J.enumerable});return H},s=(H,F,Q)=>(o(H,F,"default"),Q&&o(Q,F,"default")),l=H=>o(e({},"__esModule",{value:!0}),H),u={};i(u,{a:()=>Z,animated:()=>Z}),t.exports=l(u);var c=bV,d=mh,h=nn,f=E0,m=/^--/;function y(H,F){return F==null||typeof F=="boolean"||F===""?"":typeof F=="number"&&F!==0&&!m.test(H)&&!(x.hasOwnProperty(H)&&x[H])?F+"px":(""+F).trim()}var v={};function b(H,F){if(!H.nodeType||!H.setAttribute)return!1;let Q=H.nodeName==="filter"||H.parentNode&&H.parentNode.nodeName==="filter",{style:J,children:re,scrollTop:se,scrollLeft:he,viewBox:de,...ie}=F,xe=Object.values(ie),q=Object.keys(ie).map(oe=>Q||H.hasAttribute(oe)?oe:v[oe]||(v[oe]=oe.replace(/([A-Z])/g,pe=>"-"+pe.toLowerCase())));re!==void 0&&(H.textContent=re);for(let oe in J)if(J.hasOwnProperty(oe)){let pe=y(oe,J[oe]);m.test(oe)?H.style.setProperty(oe,pe):H.style[oe]=pe}q.forEach((oe,pe)=>{H.setAttribute(oe,xe[pe])}),se!==void 0&&(H.scrollTop=se),he!==void 0&&(H.scrollLeft=he),de!==void 0&&H.setAttribute("viewBox",de)}var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=(H,F)=>H+F.charAt(0).toUpperCase()+F.substring(1),S=["Webkit","Ms","Moz","O"];x=Object.keys(x).reduce((H,F)=>(S.forEach(Q=>H[w(Q,F)]=H[F]),H),x);var C=E0,E=nn,_=/^(matrix|translate|scale|rotate|skew)/,N=/^(translate)/,$=/^(rotate|skew)/,P=(H,F)=>E.is.num(H)&&H!==0?H+F:H,D=(H,F)=>E.is.arr(H)?H.every(Q=>D(Q,F)):E.is.num(H)?H===F:parseFloat(H)===F,j=class extends C.AnimatedObject{constructor({x:H,y:F,z:Q,...J}){let re=[],se=[];(H||F||Q)&&(re.push([H||0,F||0,Q||0]),se.push(he=>[`translate3d(${he.map(de=>P(de,"px")).join(",")})`,D(he,0)])),(0,E.eachProp)(J,(he,de)=>{if(de==="transform")re.push([he||""]),se.push(ie=>[ie,ie===""]);else if(_.test(de)){if(delete J[de],E.is.und(he))return;let ie=N.test(de)?"px":$.test(de)?"deg":"";re.push((0,E.toArray)(he)),se.push(de==="rotate3d"?([xe,q,oe,pe])=>[`rotate3d(${xe},${q},${oe},${P(pe,ie)})`,D(pe,0)]:xe=>[`${de}(${xe.map(q=>P(q,ie)).join(",")})`,D(xe,de.startsWith("scale")?1:0)])}}),re.length&&(J.transform=new B(re,se)),super(J)}},B=class extends E.FluidValue{constructor(H,F){super(),this.inputs=H,this.transforms=F,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let H="",F=!0;return(0,E.each)(this.inputs,(Q,J)=>{let re=(0,E.getFluidValue)(Q[0]),[se,he]=this.transforms[J](E.is.arr(re)?re:Q.map(E.getFluidValue));H+=" "+se,F=F&&he}),F?"none":H}observerAdded(H){H==1&&(0,E.each)(this.inputs,F=>(0,E.each)(F,Q=>(0,E.hasFluidValue)(Q)&&(0,E.addFluidObserver)(Q,this)))}observerRemoved(H){H==0&&(0,E.each)(this.inputs,F=>(0,E.each)(F,Q=>(0,E.hasFluidValue)(Q)&&(0,E.removeFluidObserver)(Q,this)))}eventObserved(H){H.type=="change"&&(this._value=null),(0,E.callFluidObservers)(this,H)}},K=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];s(u,bV,t.exports),c.Globals.assign({batchedUpdates:d.unstable_batchedUpdates,createStringInterpolator:h.createStringInterpolator,colors:h.colors});var Y=(0,f.createHost)(K,{applyAnimatedValues:b,createAnimatedStyle:H=>new j(H),getComponentProps:({scrollTop:H,scrollLeft:F,...Q})=>Q}),Z=Y.animated})(dj);var i$e=dj.exports;cj.exports=i$e;var o$e=cj.exports;const{useState:s$e,useEffect:l$e}=O;function u$e(){const[t,e]=s$e({width:void 0,height:void 0});return l$e(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}var c$e=u$e;const _p=O,{useSpring:d$e,animated:h$e}=o$e,p$e=c$e,Wu={maxTilt:25,rotationPower:50,swipeThreshold:.5},W_={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},vV=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),f$e=t=>{const e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}},I0=async(t,e,n,r)=>{const a=vV(n,r),i=vV(t.x,t.y),o=a*t.x,s=a*t.y,l=t.x*45,u=a/i;return e.start({xyrot:[o,s,l],config:{duration:u}}),await new Promise(c=>setTimeout(()=>{c()},u))},xV=t=>new Promise(e=>{t.start({xyrot:[0,0,0],config:W_.animateBack,onRest:e})}),wV=t=>{if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>Wu.swipeThreshold)return"right";if(t.x<-Wu.swipeThreshold)return"left"}else{if(t.y>Wu.swipeThreshold)return"down";if(t.y<-Wu.swipeThreshold)return"up"}return"none"},g$e=h$e.div,m$e=_p.forwardRef(({flickOnSwipe:t=!0,children:e,onSwipe:n,onCardLeftScreen:r,className:a,preventSwipe:i=[],swipeRequirementType:o="velocity",swipeThreshold:s=Wu.swipeThreshold,onSwipeRequirementFulfilled:l,onSwipeRequirementUnfulfilled:u},c)=>{const{width:d,height:h}=p$e(),[{xyrot:f},m]=d$e(()=>({xyrot:[0,0,0],config:W_.touchResponsive}));Wu.swipeThreshold=s,_p.useImperativeHandle(c,()=>({async swipe(w="right"){n&&n(w);const S=1.3,C=(Math.random()-.5)/2;w==="right"?await I0({x:S,y:C},m,d,h):w==="left"?await I0({x:-S,y:C},m,d,h):w==="up"?await I0({x:C,y:-S},m,d,h):w==="down"&&await I0({x:C,y:S},m,d,h),r&&r(w)},async restoreCard(){await xV(m)}}));const y=_p.useCallback(async(w,S)=>{const C=wV({x:o==="velocity"?S.vx:S.dx,y:o==="velocity"?S.vy:S.dy});if(C!=="none"&&t&&!i.includes(C)){n&&n(C),await I0(o==="velocity"?{x:S.vx,y:S.vy}:f$e({x:S.dx,y:S.dy}),w,d,h),r&&r(C);return}xV(w)},[o,t,i,n,r,d,h]);let v="none";const b=(w,S,C,E)=>{let _=E?w.touches[0].clientX-S.x:w.clientX-S.x,N=E?w.touches[0].clientY-S.y:w.clientY-S.y;S.x===0&&S.y===0&&(_=0,N=0);const $=-(_-C.dx)/(C.timeStamp-Date.now()),P=-(N-C.dy)/(C.timeStamp-Date.now());return{dx:_,dy:N,vx:$,vy:P,timeStamp:Date.now()}};_p.useLayoutEffect(()=>{let w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},C=!1;const E=B=>{!B.srcElement.className.includes("pressable")&&B.cancelable&&B.preventDefault(),S=b(B,w,S,!0),w={x:B.touches[0].clientX,y:B.touches[0].clientY}};x.current.addEventListener("touchstart",E);const _=B=>{C=!0,S=b(B,w,S,!1),w={x:B.clientX,y:B.clientY}};x.current.addEventListener("mousedown",_);const N=B=>{if(l||u){const Y=wV({x:o==="velocity"?B.vx:B.dx,y:o==="velocity"?B.vy:B.dy});Y!==v&&(v=Y,v==="none"?u&&u():l&&l(Y))}let K=B.vx*15;isNaN(K)&&(K=0),K=Math.max(Math.min(K,Wu.maxTilt),-Wu.maxTilt),m.start({xyrot:[B.dx,B.dy,K],config:W_.touchResponsive})},$=B=>{if(!C)return;const K=b(B,w,S,!1);S=K,N(K)};window.addEventListener("mousemove",$);const P=B=>{C&&(C=!1,y(m,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})};window.addEventListener("mouseup",P);const D=B=>{const K=b(B,w,S,!0);S=K,N(K)};x.current.addEventListener("touchmove",D);const j=B=>{y(m,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}};return x.current.addEventListener("touchend",j),()=>{x.current.removeEventListener("touchstart",E),x.current.removeEventListener("touchmove",D),x.current.removeEventListener("touchend",j),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",P),x.current.removeEventListener("mousedown",_)}},[y,m,l,u]);const x=_p.useRef();return _p.createElement(g$e,{ref:x,className:a,style:{transform:f.to((w,S,C)=>`translate3d(${w}px, ${S}px, 0px) rotate(${C}deg)`)},children:e})});var y$e=m$e;const b$e=Ii(y$e);function Vi(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const v$e=Vi(/^[1-9][0-9]*$/),G_=Vi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),x$e=Vi(/^E[1-9][0-9]*$/),U2=Vi(/^Q[1-9][0-9]*$/),W2=Vi(/^P[1-9][0-9]*$/),kV=Vi(/^L[1-9][0-9]*$/),SV=Vi(/^L[1-9][0-9]*-F[1-9][0-9]*$/),CV=Vi(/^L[1-9][0-9]*-S[1-9][0-9]*$/),w$e=Vi(/^M[1-9][0-9]*$/),k$e=Vi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),S$e=Vi(/^[0-9a-f]{40}$/),EV=Vi(/^\d+$/),IV=Vi(/^(Q|P|L|M)[1-9][0-9]*$/);function C$e(t){if(typeof t!="string")return!1;const[e,n]=t.split("#");return G_(e)&&W2(n)}function TV(t){return typeof t!="string"?!1:t.startsWith("Item:")?U2(t.substring(5)):t.startsWith("Lexeme:")?kV(t.substring(7)):t.startsWith("Property:")?W2(t.substring(9)):U2(t)}function E$e(t){if(!IV(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function I$e(t,e){let n=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(n+=`?width=${e}`),n}function T$e(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const N$e=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:T$e,getImageUrl:I$e,getNumericId:E$e,isEntityId:G_,isEntityPageTitle:TV,isEntitySchemaId:x$e,isFormId:SV,isGuid:k$e,isHash:S$e,isItemId:U2,isLexemeId:kV,isMediaInfoId:w$e,isNonNestedEntityId:IV,isNumericId:v$e,isPropertyClaimsId:C$e,isPropertyId:W2,isRevisionId:EV,isSenseId:CV},Symbol.toStringTag,{value:"Module"}));function _s(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function NV(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const _V=t=>encodeURIComponent(t).replace(/[!'()*]/g,R$e),_$e=t=>t.replace(/\s/g,"_");function O$e(t){return Array.from(new Set(t))}const R$e=t=>"%"+t.charCodeAt(0).toString(16);function Gu(t){if(t.length!==1||!NV(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function T0(t,e){return typeof e=="string"&&t.includes(e)}function H_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function q_(t){return Object.entries(t)}function K_(t){typeof t=="object"&&(t=t.time);const e=t[0];let[n,r]=t.slice(1).split("T");n=n.replace(/-00/g,"-01");const a=`${n}T${r}`;return $$e(e,a)}const $$e=(t,e)=>{const n=e.split("-")[0];return t==="-"||n.length>4?M$e(t,e,n):new Date(e)},M$e=(t,e,n)=>{let r;return n.length===4?r=`${t}00${e}`:n.length===5?r=`${t}0${e}`:r=t+e,new Date(r)};function X_(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[r,a]=e.slice(1).split("T");if(!n||!r||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return r=r.replace(/-00/g,"-01"),`${n}${r}T${a}`}}}const P$e=t=>K_(t).getTime(),A$e=t=>K_(t).toISOString(),L$e=t=>{if(typeof t=="object"){const{time:e,precision:n}=t;n===9?t=e.replace("-01-01T","-00-00T"):n===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},OV=X_(P$e),RV=X_(A$e),$V=X_(L$e),D$e=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:K_,wikibaseTimeToEpochTime:OV,wikibaseTimeToISOString:RV,wikibaseTimeToSimpleDay:$V},Symbol.toStringTag,{value:"Module"})),Hu=t=>t.value,F$e=(t,e)=>e.keepRichValues?t.value:t.value.text,Op=(t,e)=>z$e(t,e.entityPrefix),B$e={item:"Q",lexeme:"L",property:"P"},z$e=(t,e)=>{const{value:n}=t,r=n.id||B$e[n["entity-type"]]+n["numeric-id"];return typeof e=="string"?`${e}:${r}`:r},j$e=(t,e)=>{const{value:n}=t,r=parseFloat(n.amount);if(e.keepRichValues){const a={amount:parseFloat(n.amount),unit:n.unit.replace(/^https?:\/\/.*\/entity\//,"")};return n.upperBound!=null&&(a.upperBound=parseFloat(n.upperBound)),n.lowerBound!=null&&(a.lowerBound=parseFloat(n.lowerBound)),a}else return r},V$e=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],U$e=(t,e)=>{let n;if(typeof e.timeConverter=="function"?n=e.timeConverter(t.value):n=W$e(e.timeConverter)(t.value),e.keepRichValues){const{timezone:r,before:a,after:i,precision:o,calendarmodel:s}=t.value;return{time:n,timezone:r,before:a,after:i,precision:o,calendarmodel:s}}else return n},W$e=(t="iso")=>{const e=G$e[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},G$e={iso:RV,epoch:OV,"simple-day":$V,none:t=>typeof t=="string"?t:t.time},H$e={commonsMedia:Hu,"external-id":Hu,"geo-shape":Hu,"globe-coordinate":V$e,math:Hu,monolingualtext:F$e,"musical-notation":Hu,quantity:j$e,string:Hu,"tabular-data":Hu,time:U$e,url:Hu,"wikibase-entityid":Op,"wikibase-form":Op,"wikibase-item":Op,"wikibase-lexeme":Op,"wikibase-property":Op,"wikibase-sense":Op},MV=t=>t.toLowerCase().replace(/[\s-]/g,""),PV={};for(const[t,e]of Object.entries(H$e))PV[MV(t)]=e;function q$e(t,e,n,r){t=t||e.type;try{const a=PV[MV(t)];return a(e,n)}catch(a){throw a.message==="parsers[datatype] is not a function"&&(a.message=`${t} claim parser isn't implemented
      Claim id: ${r}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),a}}function Y_(t){const e={};for(const n of t){const{rank:r}=n;e[r]=e[r]||[],e[r].push(n)}return e.preferred||e.normal||[]}function AV(t){return t.filter(e=>e.rank!=="deprecated")}function K$e(t){const e={};for(const[n,r]of q_(t))e[n]=Y_(r);return e}const X$e=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:AV,truthyClaims:K$e,truthyPropertyClaims:Y_},Symbol.toStringTag,{value:"Module"}));function Q_(t,e){const{propertyPrefix:n}=e,r={};for(let a in t){const i=t[a];n&&(a=n+":"+a),r[a]=J_(i,e)}return r}function J_(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:n,keepNonDeprecated:r,areSubSnaks:a}=zV(e);return r?t=AV(t):n||a||(t=Y_(t)),t=t.map(i=>Z_(i,e)).filter(i=>i!==void 0),t[0]&&typeof t[0]!="object"?O$e(t):t}function LV(t,e){const{keepQualifiers:n,keepReferences:r,keepIds:a,keepHashes:i,keepTypes:o,keepSnaktypes:s,keepRanks:l}=zV(e),{mainsnak:u,rank:c}=t;let d,h,f,m,y,v;if(u?(h=u.datatype,f=u.datavalue,m=u.snaktype):(f=t.datavalue,h=t.datatype,m=t.snaktype,t.hash?y=!0:v=!0),f)d=q$e(h,f,e,t.id);else if(m==="somevalue")d=e.somevalueValue;else if(m==="novalue")d=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(y){if(!(i||o||s))return d;const w={value:d};return i&&(w.hash=t.hash),o&&(w.type=h),s&&(w.snaktype=m),w}if(v)return o?{type:h,value:d}:d;if(!(n||r||a||o||s||l))return d;const b={value:d};o&&(b.type=h),s&&(b.snaktype=m),l&&(b.rank=c);const x=G2(e);return x.keepHashes=i,n&&(b.qualifiers=FV(t.qualifiers,x)),r&&(t.references=t.references||[],b.references=BV(t.references,x)),a&&(b.id=t.id),b}function Rp(t,e={}){return Q_(t,e)}function DV(t,e={}){return J_(t,e)}function Z_(t,e={}){return LV(t,e)}function FV(t,e={}){return Q_(t,G2(e))}function Y$e(t,e={}){return J_(t,G2(e))}function Q$e(t,e={}){return LV(t,e)}function BV(t,e={}){return t.map(n=>J$e(n,e))}function J$e(t,e={}){const n=G2(e),r=Q_(t.snaks,n);return n.keepHashes?{snaks:r,hash:t.hash}:r}const G2=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),Z$e=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],zV=(t={})=>(t.keepAll&&Z$e.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function N0(t){const e={};for(const[n,r]of q_(t))e[n]=r!=null?r.value:null;return e}function eMe(t){const e={};for(const[n,r]of q_(t))e[n]=r!=null?r.map(a=>a.value):[];return e}function jV(t){return N0(t)}function VV(t){return N0(t)}function UV(t){return eMe(t)}function WV(t){return N0(t)}function GV(t){return N0(t)}function HV(t){return N0(t)}const qV=(t,e={})=>{const{id:n,representations:r,grammaticalFeatures:a,claims:i}=t;if(!SV(n))throw new Error("invalid form object");return{id:n,representations:GV(r),grammaticalFeatures:a,claims:Rp(i,e)}},KV=(t,e={})=>t.map(n=>qV(n,e)),XV=(t,e={})=>{const{id:n,glosses:r,claims:a}=t;if(!CV(n))throw new Error("invalid sense object");return{id:n,glosses:HV(r),claims:Rp(a,e)}};function YV(t,e={}){return t.map(n=>XV(n,e))}const e5={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},t5=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],tMe="https://www.wikidata.org/wiki/";function QV({site:t,title:e}){if(Gu(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(H_(H2,t))return H2[t](e);const n=t.replace(/wiki$/,"");if(H_(H2,n))return H2[n](e);const{lang:r,project:a}=JV(t);return e=_V(_$e(e)),`https://${r}.${a}.org/wiki/${e}`}const wd=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,H2={commons:wd("commons"),foundation:wd("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:wd("meta"),outreach:wd("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:wd("species"),wikidata:t=>{const e=nMe[t[0]];let n=e?`${e}:${t}`:t;return n=n.replace("-","#"),`${tMe}${n}`},wikifunctions:wd("wikifunctions"),wikimania:wd("wikimania")},nMe={E:"EntitySchema",L:"Lexeme",P:"Property"},rMe=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function JV(t){if(t.startsWith("http")){const e=t,n=e.match(rMe);if(!n)throw new Error(`invalid sitelink url: ${e}`);let[r,a,i]=n.slice(1);if(i=decodeURIComponent(i),r==="commons")return{lang:"en",project:"commons",key:"commons",title:i,url:e};if(!T0(iMe,a))throw new Error(`project is unknown: ${a}`);if(r==="www")return{lang:"en",project:a,key:a,title:i,url:e};const o=`${r.replace(/-/g,"_")}${a}`.replace("wikipedia","wiki");return{lang:r,project:a,key:o,title:i,url:e}}else{if(H_(e5,t))return{lang:"en",project:e5[t],key:t};if(!T0(t5,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,n,r]=t.split("wik");if(r!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const a=eU[n];if(!a)throw new Error(`sitelink project not found: ${a}`);return{lang:e,project:a,key:t}}}const ZV=t=>T0(t5,t),aMe=ZV,eU={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},iMe=[...Object.values(eU),...Object.values(e5)],oMe=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:JV,getSitelinkUrl:QV,isSite:ZV,isSitelinkKey:aMe},Symbol.toStringTag,{value:"Module"}));function tU(t,e={}){let{addUrl:n,keepBadges:r,keepAll:a}=e;return r=r||a,Object.keys(t).reduce(sMe({sitelinks:t,addUrl:n,keepBadges:r}),{})}const sMe=({sitelinks:t,addUrl:e,keepBadges:n})=>(r,a)=>{if(t[a]==null)return r[a]=t[a],r;const{title:i,badges:o}=t[a];return e||n?(r[a]={title:i},e&&(r[a].url=QV({site:a,title:i})),n&&(r[a].badges=o)):r[a]=i,r},lMe={labels:jV,descriptions:VV,aliases:UV,claims:Rp,statements:Rp,sitelinks:tU,lemmas:WV,forms:KV,senses:YV},nU=(t,e={})=>{const{type:n}=t,r={id:t.id,type:n,modified:t.modified};return n==="item"?(ja(t,r,"labels"),ja(t,r,"descriptions"),ja(t,r,"aliases"),ja(t,r,"claims",e),ja(t,r,"sitelinks",e)):n==="property"?(r.datatype=t.datatype,ja(t,r,"labels"),ja(t,r,"descriptions"),ja(t,r,"aliases"),ja(t,r,"claims",e)):n==="lexeme"?(ja(t,r,"lemmas"),r.lexicalCategory=t.lexicalCategory,r.language=t.language,ja(t,r,"claims",e),ja(t,r,"forms",e),ja(t,r,"senses",e)):n==="mediainfo"&&(ja(t,r,"labels"),ja(t,r,"descriptions"),ja(t,r,"statements",e)),r},ja=(t,e,n,r)=>{t[n]!=null&&(e[n]=lMe[n](t[n],r))},rU=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:n}=e,r={};for(const[a,i]of Object.entries(t)){const o=n?`${n}:${a}`:a;r[o]=nU(i,e)}return r};function uMe(t){t=t.body||t;const{entities:e}=t;return rU(e)}function cMe(t){return t=t.body||t,t.query.search.map(e=>e.title)}const dMe=Object.freeze(Object.defineProperty({__proto__:null,entities:uMe,pagesTitles:cMe},Symbol.toStringTag,{value:"Module"}));function hMe(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:n}=t.head,r=t.results.bindings;if(n.length===1&&e.minimize){const s=n[0];return r.map(l=>n5(l[s])).filter(l=>l!=null)}const{richVars:a,associatedVars:i,standaloneVars:o}=gMe(n);return r.map(s=>mMe(a,i,o,s))}function n5(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return pMe(e);const n=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return n==="decimal"||n==="integer"||n==="float"||n==="double"?parseFloat(e):n==="boolean"?e==="true":e}function pMe(t){return t.match(/http.*\/entity\/statement\//)?fMe(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function fMe(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function gMe(t){let e=t.filter(i=>{const o=new RegExp(`^${i}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(i=>!e.some(o=>i!==o&&i.startsWith(o)));const n=new RegExp(`^(${e.join("|")})[A-Z]`),r=t.filter(i=>n.test(i)),a=t.filter(i=>!e.includes(i)&&!n.test(i));return{richVars:e,associatedVars:r,standaloneVars:a}}function mMe(t,e,n,r){const a={};for(const i of t){const o={},s=n5(r[i]);s!=null&&(o.value=s);for(const l of e)l.startsWith(i)&&yMe(r,i,l,o);Object.keys(o).length>0&&(a[i]=o)}for(const i of n){const o=n5(r[i]);o!=null&&(a[i]=o)}return a}function yMe(t,e,n,r){let a=n.split(e)[1];a=a[0].toLowerCase()+a.slice(1),a=a==="altLabel"?"aliases":a;const i=t[n];i!=null&&(r[a]=i.value)}const bMe=Object.freeze(Object.defineProperty({__proto__:null,aliases:UV,claim:Z_,claims:Rp,descriptions:VV,entities:rU,entity:nU,form:qV,forms:KV,glosses:HV,labels:jV,lemmas:WV,propertyClaims:DV,propertyQualifiers:Y$e,propertySnaks:DV,qualifier:Q$e,qualifiers:FV,references:BV,representations:GV,sense:XV,senses:YV,sitelinks:tU,snak:Z_,snaks:Rp,sparqlResults:hMe},Symbol.toStringTag,{value:"Module"})),vMe=/^\d+[|\d]*$/;function xMe(t){return function(e){Gu(arguments);for(const[f,m]of Object.entries(e))if(f.startsWith("sr")){const y=f.replace(/^sr/,"");if(e[y]!=null)throw new Error(`${y} and ${f} are the same`);e[y]=m}const{search:n,haswbstatement:r,format:a="json",limit:i,offset:o,profile:s,sort:l}=e;let{namespace:u,prop:c}=e;if(!(n||r))throw new Error('missing "search" or "haswbstatement" parameter');let d="";if(n&&(d+=n),r){const f=r instanceof Array?r:[r];for(const m of f)m[0]==="-"?d+=` -haswbstatement:${m.slice(1)}`:d+=` haswbstatement:${m}`}if(i!=null&&(typeof i!="number"||i<1))throw new Error(`invalid limit: ${i}`);if(o!=null&&(typeof o!="number"||o<0))throw new Error(`invalid offset: ${o}`);if(u instanceof Array?u=u.join("|"):typeof u=="number"&&(u=u.toString()),u&&!vMe.test(u))throw new Error(`invalid namespace: ${u}`);if(s!=null&&typeof s!="string")throw new Error(`invalid profile: ${s} (${typeof s}, expected string)`);if(l!=null&&typeof l!="string")throw new Error(`invalid sort: ${l} (${typeof l}, expected string)`);let h;if(c!=null){if(c instanceof Array&&(c=c.join("|")),typeof c!="string")throw new Error(`invalid prop: ${c} (${typeof c}, expected string)`);h=c.toString()}return t({action:"query",list:"search",srsearch:d.trim(),format:a,srnamespace:u,srlimit:i,sroffset:o,srqiprofile:s,srsort:l,srprop:h})}}function q2(t,e){return function(n){if(!e(n))throw new Error(`invalid ${t}: ${n} (type: ${CMe(n)})`)}}const aU=q2("entity id",G_),wMe=q2("property id",W2),kMe=q2("entity page title",TV),SMe=q2("revision id",EV);function CMe(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function iU(t){return function({ids:e,languages:n,props:r,format:a="json",redirects:i}){if(Gu(arguments),!(e&&e.length>0))throw new Error("no id provided");e=_s(e),e.forEach(s=>aU(s)),e.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const o={action:"wbgetentities",ids:e.join("|"),format:a};return i===!1&&(o.redirects="no"),n&&(n=_s(n),o.languages=n.join("|")),r&&r.length>0&&(o.props=_s(r).join("|")),t(o)}}function EMe(t){return function({titles:e,sites:n,languages:r,props:a,format:i="json",redirects:o}){if(Gu(arguments),!(e&&e.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),e=_s(e),n=_s(n).map(IMe),a=_s(a);const s={action:"wbgetentities",titles:e.join("|"),sites:n.join("|"),format:i};return n.length===1&&e.length===1&&(s.normalize=!0),r&&(r=_s(r),s.languages=r.join("|")),a.length>0&&(s.props=a.join("|")),o===!1&&(s.redirects="no"),t(s)}}function IMe(t){return T0(t5,t)?t:t.replace(/-/g,"_")+"wiki"}function TMe(t,e){return function({id:n,revision:r}){return Gu(arguments),aU(n),SMe(r),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${r}`}}function NMe(t){const e=iU(t);return function({ids:n,languages:r,props:a,format:i,redirects:o}){if(Gu(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return _Me(n).map(s=>e({ids:s,languages:r,props:a,format:i,redirects:o}))}}function _Me(t){const e=[];for(;t.length>0;){const n=t.slice(0,50);t=t.slice(50),e.push(n)}return e}function oU(t){return function(e){const n=_V(e);return`${t}?format=json&query=${n}`}}const OMe="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",RMe=t=>{const e=oU(t);return function(n){let{properties:r}=n;const{values:a,limit:i,caseInsensitive:o,keepProperties:s}=n,l=o?PMe:MMe,u=s?"":OMe;r=_s(r),r.forEach(d=>wMe(d));let c=`SELECT DISTINCT ?subject WHERE { ${$Me(a,l,r,u)} }`;return i&&(c+=` LIMIT ${i}`),e(c)}},$Me=(t,e,n,r)=>(n=n.map(AMe).join("|"),t instanceof Array?"{ "+t.map(sU).map(a=>e(n,a,r)).join("} UNION {")+" }":e(n,sU(t),r)),sU=t=>(U2(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),MMe=(t,e,n)=>`?subject ${t} ${e} .
    ${n}`,PMe=(t,e,n)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${n}`,AMe=t=>"wdt:"+t;function LMe(t){return function({ids:e,format:n,limit:r,start:a,end:i,prop:o,user:s,excludeuser:l,tag:u}){Gu(arguments),e=_s(e),e.forEach(h=>kMe(h));const c=e.length===1,d={action:"query",prop:"revisions"};return d.titles=e.join("|"),d.format=n||"json",c&&(d.rvlimit=r||"max"),c&&a&&(d.rvstart=lU(a)),c&&i&&(d.rvend=lU(i)),o?d.rvprop=_s(o).join("|"):d.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",d.rvslots="*",s&&(d.rvuser=s),l&&(d.rvexcludeuser=l),u&&(d.rvtag=u),t(d)}}const lU=t=>typeof t=="number"&&t<DMe?t:Math.trunc(new Date(t).getTime()/1e3),DMe=new Date("2000-01-01").getTime(),FMe=["item","property","lexeme","form","sense"],BMe=t=>function({search:e,language:n="en",uselang:r,limit:a="20",continue:i="0",format:o="json",type:s="item"}){if(Gu(arguments),r=r||n,!(e&&e.length>0))throw new Error("search can't be empty");if(!T0(FMe,s))throw new Error(`invalid type: ${s}`);return t({action:"wbsearchentities",search:e,language:n,limit:a,continue:i,format:o,uselang:r,type:s})},zMe=typeof location<"u"&&typeof document<"u";function jMe(t){return e=>{zMe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const n=Object.entries(e).filter(([,a])=>a!=null).map(([a,i])=>[a,String(i)]),r=new URLSearchParams(n).toString();return t+"?"+r}}const VMe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,UMe=Object.assign(Object.assign(Object.assign(Object.assign({simplify:bMe,parse:dMe},N$e),oMe),X$e),D$e);function WMe(t){if(!NV(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:n}=t;let{wgScriptPath:r="w"}=t;if(r=r.replace(/^\//,""),!(e||n))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${VMe}`);let a,i,o;if(e){uU("instance",e),i=e.replace(/\/$/,"").replace(`/${r}/api.php`,""),o=`${i}/${r}/api.php`;const l=jMe(o);a={searchEntities:BMe(l),cirrusSearchPages:xMe(l),getEntities:iU(l),getManyEntities:NMe(l),getRevisions:LMe(l),getEntityRevision:TMe(e,r),getEntitiesFromSitelinks:EMe(l)}}else a={searchEntities:kd("searchEntities"),cirrusSearchPages:kd("cirrusSearchPages"),getEntities:kd("getEntities"),getManyEntities:kd("getManyEntities"),getRevisions:kd("getRevisions"),getEntityRevision:kd("getEntityRevision"),getEntitiesFromSitelinks:kd("getEntitiesFromSitelinks")};let s;return n?(uU("sparqlEndpoint",n),s={sparqlQuery:oU(n),getReverseClaims:RMe(n)}):s={sparqlQuery:dU("sparqlQuery"),getReverseClaims:dU("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:i,apiEndpoint:o}},UMe),a),s)}const uU=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},cU=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},dU=cU("a sparqlEndpoint"),kd=cU("an instance"),GMe={sparqlQuery:(t="")=>{const e=WMe({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),n=`
      SELECT ?item ?itemLabel ?artworkLabel ?countryLabel ?genreLabel ?year ?locationLabel ?creatorLabel ?materialLabel ?depictsLabel ?collectionLabel ?iiifManifest (MD5(CONCAT(str(?item),str(RAND()))) as ?random)
      WITH {    
        SELECT ?item (SAMPLE(?artwork) as ?artwork) (SAMPLE(?country) as ?country) (SAMPLE(?genre) as ?genre) (SAMPLE(YEAR(?inception)) as ?year) (SAMPLE(?location) as ?location) (SAMPLE(?creator) as ?creator) (SAMPLE(?material) as ?material) (SAMPLE(?depicts) as ?depicts) (SAMPLE(?collection) as ?collection) (SAMPLE(?iiifManifest) as ?iiifManifest)
        WHERE {
          ?item wdt:P6108 ?iiifManifest ;
                wdt:P195 ?collection ;
                wdt:P31 ?artwork .
                FILTER ( ?artwork = wd:Q3305213 || ?artwork = wd:Q93184 || ?artwork = wd:Q11060274 || ?artwork = wd:Q860861 || ?artwork = wd:Q125191 )
                ${t!==""?`FILTER ( ?material = ${t} )`:""}
                OPTIONAL {
                  ?item wdt:P495 ?countryOfOrigin.
                  FILTER(?countryOfOrigin = wd:Q31 || ?countryOfOrigin = wd:Q213 || ?countryOfOrigin = wd:Q35 || ?countryOfOrigin = wd:Q142 || ?countryOfOrigin = wd:Q36 || ?countryOfOrigin = wd:Q39 || ?countryOfOrigin = wd:Q32 || ?countryOfOrigin = wd:Q40 || ?countryOfOrigin = wd:Q55 || ?countryOfOrigin = wd:Q183 )
                }
                OPTIONAL {
                  ?collection wdt:P17 ?country.
                  FILTER(?country = wd:Q31 || ?country = wd:Q213 || ?country = wd:Q35 || ?country = wd:Q142 || ?country = wd:Q36 || ?country = wd:Q39 || ?country = wd:Q32 || ?country = wd:Q40 || ?country = wd:Q55 || ?country = wd:Q183 )
                }
                BIND(COALESCE(?countryOfOrigin, ?country) AS ?country)
                FILTER(BOUND(?country))

                OPTIONAL { ?item wdt:P136 ?genre. }
                OPTIONAL { ?item wdt:P571 ?inception. }
                OPTIONAL { ?item wdt:P276 ?location. }
                OPTIONAL { ?item wdt:P170 ?creator. }
                OPTIONAL { ?item wdt:P186 ?material. }
                OPTIONAL { ?item wdt:P180 ?depicts. }
        }
        GROUP BY ?item
        LIMIT 100
      } AS %result
      WHERE {
        INCLUDE %result.
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
      } ORDER BY ?random
    `;return e.sparqlQuery(n)}},HMe=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),[a,i]=O.useState(null);return O.useEffect(()=>{(async()=>{try{const o=await fetch(GMe.sparqlQuery());if(!o.ok)throw new Error(`Error: ${o.status} - ${o.statusText}`);const s=await o.json();e(s.results.bindings)}catch(o){i(o.message)}finally{r(!1)}})()},[]),{data:t,loading:n,error:a}},hU=({onClick:t,materialIcon:e})=>X.jsx(vr,{className:"p-4 text-xl text-black",onClick:t,rounded:!0,inline:!0,children:X.jsx($a,{material:e})});function qMe(){const{t}=ps(),{addToImageList:e,imageList:n,removeFromImageList:r,likeImage:a}=_c(),{data:i}=HMe(),[o,s]=O.useState(0),l=O.useRef(o),u=O.useRef(null);O.useEffect(()=>{const y=async v=>{if(!v)return;const b=(await Promise.all(v.map(async x=>{var w,S,C,E,_;try{const N=await uj.fetchIIIFIdentifier(x.iiifManifest.value);return N?{id:x.item.value,name:((w=x.itemLabel)==null?void 0:w.value)||"",year:((S=x.year)==null?void 0:S.value)||"",country:((C=x.countryLabel)==null?void 0:C.value)||"",location:((E=x.locationLabel)==null?void 0:E.value)||"",creator:((_=x.creatorLabel)==null?void 0:_.value)||"",url:x.iiifManifest.value,identifier:N,image:`${N}/full/400,/0/default.jpg`,thumbnail:`${N}/full/100,100/0/default.jpg`}:null}catch(N){return console.error("Error processing image:",N),null}}))).filter(x=>x!==null);e(b)};i.length>0&&y(i)},[i,e]);const c=y=>{y==="right"&&o<n.length&&a(n[o]),r(n[o].id),s(v=>v+1)},d=y=>{var v;l.current>=y&&((v=u.current)==null||v.restoreCard())},h=async y=>{var v;o>=0&&o<n.length&&await((v=u.current)==null?void 0:v.swipe(y))},f=n[o],m=y=>y&&!y.includes("http")?y:t("selectionUnknown");return X.jsxs(da,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("selectionTitle")}),X.jsx("div",{className:"mx-auto h-2/3",children:X.jsx(JP,{className:"flex shadow-md shadow-[#BC13FE]/90",children:f&&X.jsxs(X.Fragment,{children:[X.jsx(b$e,{ref:u,className:"mb-4",onSwipe:y=>c(y),onCardLeftScreen:()=>d(o),swipeRequirementType:"position",swipeThreshold:100,preventSwipe:["up","down"],children:X.jsx("img",{alt:f.name,src:f.image})},f.id),X.jsxs("div",{className:"flex justify-between",children:[X.jsx(hU,{onClick:()=>h("left"),materialIcon:X.jsx(xte,{className:"w-6 h-6"})}),X.jsx(hU,{onClick:()=>h("right"),materialIcon:X.jsx(Ste,{className:"w-6 h-6"})})]})]})})}),X.jsxs("div",{className:"mb-8 p-4 bg-white rounded h-1/3 opacity-90 max-w-lg w-3/4 text-center mx-auto shadow-md shadow-[#BC13FE]/90",children:[X.jsx("h2",{className:"text-lg font-bold mb-4 text-black md:text-xl",children:f?.name}),X.jsxs("p",{className:"text-gray-600",children:[t("selectionYear")," ",f?.year||t("selectionUnknown")]}),X.jsxs("p",{className:"text-gray-600",children:[t("selectionCreator")," ",m(f?.creator)]}),X.jsxs("p",{className:"text-gray-600",children:[t("selectionLocation")," ",f?.location||t("selectionUnknown")]})]})]})}const KMe="/collage.webp",XMe="/logo_animated.svg",YMe=()=>X.jsx("img",{src:XMe,alt:"Logo GLAMorous Europe",className:"w-48 md:w-64 lg:w-96 m-auto"}),QMe=()=>X.jsx("img",{src:KMe,alt:"Collage GLAMorous Europe",className:"w-64 md:w-80 lg:w-1/2 xl:w-1/3 m-auto",decoding:"async"});function JMe(){const{t}=ps(),{imageLikeList:e,resetState:n}=_c(),[r,a]=O.useState(!1),i=()=>{e.length>0?a(!0):window.location.href="/selection"},o=()=>{a(!1)},s=()=>{a(!1),n()};return X.jsxs(da,{margin:"mb-16 lg:mb-4",className:"flex flex-col gap-4 lg:gap-8 text-center mx-auto",children:[X.jsx(YMe,{}),X.jsx("h1",{className:"text-lg px-8 md:text-xl",children:t("startTitle")}),X.jsx(QMe,{}),X.jsx("p",{className:"text-lg px-8 md:px-24 md:text-xl",children:t("startSubtitle")}),X.jsx("p",{className:"text-lg px-8 md:px-24 md:text-xl",children:t("startText")}),X.jsx(vr,{large:!0,className:"text-lg w-1/2 mx-auto h-16 md:text-xl",rounded:!0,inline:!0,onClick:i,children:t("startButtonText")}),r&&X.jsx(aA,{opened:r,onBackdropClick:()=>a(!1),children:X.jsxs(sb,{children:[X.jsx(ab,{title:t("discardModalTitle")}),X.jsxs(da,{className:"space-y-4",children:[X.jsx("p",{children:t("discardModalMessage")}),X.jsx(vr,{className:"p-4 rounded-full text-lg",children:X.jsx(nI,{to:"/selection",onClick:s,children:t("discardModalConfirm")})}),X.jsx(vr,{className:"p-4 rounded-full text-lg",children:X.jsx(nI,{to:"/selection",onClick:o,children:t("discardModalNotConfirm")})})]})]})})]})}const ZMe=sQ(tI(X.jsxs(hu,{path:"/",element:X.jsx($Oe,{}),children:[X.jsx(hu,{index:!0,element:X.jsx(JMe,{})}),X.jsx(hu,{path:"selection",element:X.jsx(qMe,{})}),X.jsx(hu,{path:"collection",element:X.jsx(kOe,{})}),X.jsx(hu,{path:"creation",element:X.jsx(ase,{})}),X.jsx(hu,{path:"about",element:X.jsx(mee,{})}),X.jsx(hu,{path:"legal",element:X.jsx(MOe,{})})]})));function e6e(){return TQ({immediate:!0}),X.jsx(gQ,{router:ZMe})}const t6e={about:{license:"Lizenzen",licenseparagraph1:"Der Quellcode von GLAMorous Europe l\xE4uft unter einer MIT Lizenz. Die \xFCber Wikidata eingebundenen Digitalisate von Kunstwerken wurden unter einer Creative Commons Public Domain Dedication 1.0 (CC0) ver\xF6ffentlicht und sind damit gemeinfrei. Alle hier verwendeten Digitalisate weisen zudem IIIF-Manifeste auf.",licenseparagraph2:"Alle erstellten Collagen sind damit ebenfalls als CC0 lizenziert und k\xF6nnen frei und vielf\xE4ltig genutzt und ver\xE4ndert werden, z.B. f\xFCr den Unterricht, f\xFCr kunstp\xE4dagogische Angebote oder einfach f\xFCr private Deko.",title:"\xDCber GLAMorous Europe",titleparagraph1:"Die Webapp GLAMorous Europe nutzt Wikidata-APIs, um dir eine breite Palette von Kunst-Sammlungen zug\xE4nglich zu machen. Um deine k\xFCnstlerischen Interessen zu ermitteln, verwenden wir ein Swipe-System, mithilfe dessen du durch verschiedene digitalisierte Objekte wie Gem\xE4lde, Fotografien, Skizzen und Plastiken navigieren kannst.",titleparagraph2:"Basierend auf deinen Pr\xE4ferenzen erh\xE4ltst du Vorschl\xE4ge f\xFCr digitale Sammlungen, die f\xFCr dich von Interesse sein k\xF6nnten [dieses Feature ist im aktuellen Prototypen noch nicht enthalten].",titleparagraph3:"Lieblingsst\xFCcke und Ausschnitte daraus kannst du dann kombinieren, um ein neues Kunstwerk zu schaffen. Das Kunstwerk kann daraufhin analog oder digital geteilt werden. Weitere Informationen zu den Kulturg\xFCtern kannst du zus\xE4tzlich \xFCber die Daten des IIIF-Manifestes direkt abrufen. Sp\xE4ter soll auch noch eine Einbindung von Wikipedia-Informationen zu den entsprechenden K\xFCnstler:innen erfolgen.",titleparagraph4:"GLAMorous Europe konzentriert sich auf offen lizenzierte Sammlungen aus ganz Europa, wobei der Schwerpunkt auf den Nachbarl\xE4ndern Deutschlands liegt.",titleparagraph5:"GLAMorous Europe ist ein Open-Source-Projekt der Digitalwarenkombinat GbR und wurde im Rahmen der 14. F\xF6rderungsrunde des Prototype Fund von September 2023 bis Februar 2024 gef\xF6rdert. Der Prototype Fund ist ein F\xF6rderprogramm des Bundesministeriums f\xFCr Bildung und Forschung (BMBF), das von der Open Knowledge Foundation Deutschland betreut und ausgewertet wird.",usage:"Und von wem stammen die ganzen Sachen?",usagecollage:"Start-Collage",usagecollage1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usagecollage10:"Pozdrowienie znad Ba\u0142tyku, G. S. B., 1948 (Public Domain, Polona)",usagecollage11:"Riesengebirge: Schneekoppe 1605 m., G\xF6rlitz: Photowerkst\xE4tte Bruno Scholz, vor 1945 (Public Domain, Polona)",usagecollage12:"Polesie, Sityck, Henryk Podd\u0119bski, ca. 1936  (Public Domain, Polona)",usagecollage2:"Heuvellandschap met jagers, Mattheus Molanus, ca. 1600\u20121649 (Public Domain, Wikidata)",usagecollage3:"Melancholie, Lucas Cranach der \xC4ltere, 1523 (Public Domain, Wikidata)",usagecollage4:"Et sardineri i Concarneau, Peder Severin Kr\xF8yer, 1879 (Public Domain, Wikidata)",usagecollage5:"Plakat: Moekavandid h\xE4rradele, ohne Hrsg./Autor:in, ca. 1943 (CC0, Europeana)",usagecollage6:"Hagenbund XII. Ausstellung, Christoph Reissers S\xF6hne & Alfred Keller, 1904 (CC0, Europeana)",usagecollage7:"Portret van een vrouw met hoed, zittend voor een wandtapijt met landschap, ohne Hrsg./Autor:in, 1910 (Public Domain, Europeana)",usagecollage8:"Fj\xE4ril p\xE5 blad, Alm C G, 1900\u20121925 (Public Domain, Europeana)",usagecollage9:"Katherine Corri Harris podczas gry w golfa, Underwood & Underwood, vor 1927 (Public Domain, Polona)",usagefonts:"Schriftarten",usagefonts1:"Average Sans von Typo auf 1001fonts.com (OFL-Lizenz)",usagefonts2:"Beauty Scool Dropout Regular von Nick Curtis auf 1001fonts.com (FFC-Lizenz)",usagefonts3:"Neucha Font von Jovanny Lemonad auf 1001fonts.com (OFL-Lizenz)",usageframes:"Rahmen",usageframes1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usageframes2:"Zimn\xE1 krajina, Viktor Olgyai, 1910 (Public Domain, Wikidata)",usageframes3:"Poh\u013Ead na Spi\u0161sk\xFA Nov\xFA Ves, Lajos Csord\xE1k, 1900 (Public Domain, Wikidata)",usageframes4:"Picture Frame (CC0, kisscc0)",usageframes5:"Picture Frame (CC0, kisscc0)",usageframes6:"Picture Frame (CC0, kisscc0)",usageparagraph1:"F\xFCr die Startcollage haben wir \xFCber den Tellerrand der Wikidata hinausgeblickt, denn nicht alle L\xE4nder Europas und nicht alle Kultureinrichtungen sind bisher gut genug angebunden oder vertreten. Daher haben wir uns explizit auch bei den Best\xE4nden der Europeana sowie der Plattform Polona der Polnischen Nationalbibliothek bedient.",usageparagraph2:"Da wir gern trotzdem sichtbar machen wollen, wessen Bilder und Fonts wir verwendet haben, findet ihr hier noch einmal alle verwendeten Materialien:",usagesticker:"Sticker",usagesticker1:"I haved\xF8ren. Kunstnerens hustru, Laurits Andersen Ring, 1897 (Public Domain, Wikidata)",usagesticker10:"The Hare, after Albert de Balleroy, F\xE9lix Bracquemond, 1865 (Public Domain, Wikidata)",usagesticker2:"Calvary, Antonello da Messina, 1475 (Public Domain, Wikidata)",usagesticker3:"Business-Man, Frans Masereel, 1920 (Public Domain, Wikidata)",usagesticker4:"Udsigt fra kunstnerens vindue, Martinus R\xF8rbye, 1825 (Public Domain, Wikidata)",usagesticker5:"Festino degli dei, Giovanni Bellini & Titian, 1514/1529 (Public Domain, Wikidata)",usagesticker6:"Bloemen in een vaasje met sprinkhaan en kikvors, Clara Peeters, 17. Jhd (Public Domain, Wikidata)",usagesticker7:"Le Stryge (The Vampire), Charles Meryon, 1853 (Public Domain, Wikidata)",usagesticker8:"Udsigt gennem en d\xF8r til l\xF8bende figurer,  Christoffer Wilhelm Eckersberg, 1845 (Public Domain, Wikidata)",usagesticker9:"Zodiac, Alfons Mucha, 1896/1897 (Public Domain, Wikidata)",vision:"GLAMorous Europe weiterdenken",visionparagraph1:"GLAMorous Europe ist als Open-Source-Anwendung konzipiert und kann auf dieser Basis vielf\xE4ltig weiterentwickelt werden. Beispielweise kann es f\xFCr einzelne Kulturinstitutionen angepasst werden und sogar f\xFCr Medienstationen optimiert werden.",visionparagraph2:"GLAMorous Europe wird au\xDFerdem immer besser, umso besser die Daten von Kunstobjekten in wikidata.org gepflegt und benannt werden. Wir wollen also auch dazu ermutigen, sich selbst bei wikidata einzubringen und Daten zu erg\xE4nzen und zu vernetzen.",visionparagraph3:"Wenn du oder deine Institution Interesse hat, gemeinsam mit uns GLAMorous Europe einzusetzen oder weiterzuentwickeln, dann kontaktiere uns gern unter folgender E-Mail-Adresse: <1>info@digitalwarenkombinat.de</1>",visionparagraph4:"Folge uns gern auf <1>Instagram</1>, <2>LinkedIn</2> und <3>X</3> unter @digitalwarenkombinat #glamorouseurope"},artwork:"Leinwand",artworkCanvasBrightness:"Helligkeit",artworkCanvasContrast:"Kontrast",artworkCanvasOpacity:"Deckkraft",artworkEmpty:"F\xFCge deine eigenen Bildausschnitte hinzu",artworkTitle:"Ziehe die Ausschnitte oder Sticker in die Leinwand. Du kannst sie ver\xE4ndern und die Leinwand austauschen. Gestalte dein eigenes Kunstwerk und teile es!",chooseLanguage:"Sprache w\xE4hlen:",collection:"Sammlung",collectionAddText:"Ausschnitt hinzuf\xFCgen",collectionClose:"Schlie\xDFen",collectionLoading:"Lade...",collectionRemoveText:"Hintergrund entfernen",collectionSwitchLasso:"Lassoauswahl",collectionSwitchViewer:"Zoomauswahl",collectionTitle:"W\xE4hle Bildausschnitte aus deinen Lieblingsobjekten aus, um sie deiner Leinwand hinzuzuf\xFCgen.",collectionToastSuccess:"Ausschnitt hinzugef\xFCgt",discardModalCancel:"Abbrechen",discardModalConfirm:"Ja",discardModalMessage:"M\xF6chtest du deine bisherige Auswahl verwerfen?",discardModalNotConfirm:"Nein",discardModalTitle:"Bisherige Auswahl",legal:{contact:"Kontakt:",contactparagraph1:"E-Mail: <1>info@digitalwarenkombinat.de</1>",contactparagraph2:"Umsatzsteuer-ID: DE350177346",informationtitle:"Angaben gem\xE4\xDF \xA7 5 TMG:",informationtitleparagraph1:"Digitalwarenkombinat GbR",informationtitleparagraph2:"Eilenburger Stra\xDFe 27",informationtitleparagraph3:"04317 Leipzig",legalparagraph1:"Haftung f\xFCr Inhalte",legalparagraph2:"Als Diensteanbieter sind wir gem\xE4\xDF \xA7 7 Abs.1 TMG f\xFCr eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach \xA7\xA7 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, \xFCbermittelte oder gespeicherte fremde Informationen zu \xFCberwachen oder nach Umst\xE4nden zu forschen, die auf eine rechtswidrige T\xE4tigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unber\xFChrt. Eine diesbez\xFCgliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung m\xF6glich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.",legalparagraph3:"Haftung f\xFCr Links",legalparagraph4:"Unser Angebot enth\xE4lt Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb k\xF6nnen wir f\xFCr diese fremden Inhalte auch keine Gew\xE4hr \xFCbernehmen. F\xFCr die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf m\xF6gliche Rechtsverst\xF6\xDFe \xFCberpr\xFCft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar.",legalparagraph5:"Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.",procedure:"Streitbeilegungsverfahren",procedureparagraph1:"Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen.",representation:"Vertreten durch:",representationparagraph1:"Anne M\xFChlich und Gerd M\xFCller",title:"Impressum"},selection:"Auswahl",selectionCreator:"K\xFCnstler:in:",selectionLocation:"Sammlungsort:",selectionTitle:"W\xE4hle deine Lieblingsobjekte per Swipe oder Klick. F\xFCge sie somit zu deiner Sammlung hinzu.",selectionUnknown:"Unbekannt",selectionYear:"Entstehungsjahr:",sidebarAbout:"\xDCber uns",sidebarChooseLanguage:"Sprache",sidebarLegal:"Impressum",start:"Start",startButtonText:"Los geht's!",startSubtitle:"Durchst\xF6bere Kunstwerke aus Museen, Galerien, Bibliotheken und Archiven.",startText:"Sammle deine Lieblingsobjekte, w\xE4hle daraus Motive aus und gestalte dein ganz pers\xF6nliches Kunstwerk.",startTitle:"Entdecke mit GLAMorous Europe europ\xE4isches Kulturerbe!"},n6e={translation:t6e},r6e={about:{license:"Licenses",licenseparagraph1:"The source code of GLAMorous Europe runs under an MIT license. The via Wikidata integrated digital copies of artworks have been published under a Creative Commons Public Domain Dedication 1.0 (CC0). All digital copies used here also own IIIF manifests.",licenseparagraph2:"All collages created are therefore also licensed as CC0 and can be used and modified freely and in a variety of ways, e.g. for teaching, for art education programmes or simply for private decoration.",title:"About GLAMorous Europe",titleparagraph1:"The GLAMorous Europe webapp uses Wikidata APIs to give you access to a wide range of art collections. To identify your artistic interests, we use a swipe system that allows you to navigate through various digitised objects such as paintings, photographs, sketches and sculptures.",titleparagraph2:"Based on your preferences, you will receive suggestions for digital collections that might be of interest to you [this feature is not yet included in the current prototype].",titleparagraph3:"You can then combine your favourite pieces and selected details from them to create a new work of art. The artwork can then be shared in analogue or digital form. You can also access further information on the cultural assets directly via the IIIF manifesto data. Later, Wikipedia information on the artists will also be integrated.",titleparagraph4:"GLAMorous Europe concentrates on openly licensed collections from all over Europe, with a focus on Germany's neighbouring countries.",titleparagraph5:"GLAMorous Europe is an open source project of Digitalwarenkombinat GbR and was financed as part of the 14th funding round of the Prototype Fund from September 2023 to February 2024. The Prototype Fund is a funding programme of the Federal Ministry of Education and Research (BMBF), which is managed and evaluated by the Open Knowledge Foundation Germany.",usage:"And where does all this stuff come from?",usagecollage:"Collage from Mainpage",usagecollage1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usagecollage10:"Pozdrowienie znad Ba\u0142tyku, G. S. B., 1948 (Public Domain, Polona)",usagecollage11:"Riesengebirge: Schneekoppe 1605 m., G\xF6rlitz: Photowerkst\xE4tte Bruno Scholz, before 1945 (Public Domain, Polona)",usagecollage12:"Polesie, Sityck, Henryk Podd\u0119bski, ca. 1936  (Public Domain, Polona)",usagecollage2:"Heuvellandschap met jagers, Mattheus Molanus, ca. 1600\u20121649 (Public Domain, Wikidata)",usagecollage3:"Melancholie, Lucas Cranach the Elder, 1523 (Public Domain, Wikidata)",usagecollage4:"Et sardineri i Concarneau, Peder Severin Kr\xF8yer, 1879 (Public Domain, Wikidata)",usagecollage5:"Plakat: Moekavandid h\xE4rradele, without author, ca. 1943 (CC0, Europeana)",usagecollage6:"Hagenbund XII. Ausstellung, Christoph Reissers S\xF6hne & Alfred Keller, 1904 (CC0, Europeana)",usagecollage7:"Portret van een vrouw met hoed, zittend voor een wandtapijt met landschap, without author, 1910 (Public Domain, Europeana)",usagecollage8:"Fj\xE4ril p\xE5 blad, Alm C G, 1900\u20121925 (Public Domain, Europeana)",usagecollage9:"Katherine Corri Harris podczas gry w golfa, Underwood & Underwood, before 1927 (Public Domain, Polona)",usagefonts:"Fonts",usagefonts1:"Average Sans by Typo on 1001fonts.com (OFL license)",usagefonts2:"Beauty Scool Dropout Regular by Nick Curtis on 1001fonts.com (FFC license)",usagefonts3:"Neucha Font by Jovanny Lemonad on 1001fonts.com (OFL license)",usageframes:"Frames",usageframes1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usageframes2:"Zimn\xE1 krajina, Viktor Olgyai, 1910 (Public Domain, Wikidata)",usageframes3:"Poh\u013Ead na Spi\u0161sk\xFA Nov\xFA Ves, Lajos Csord\xE1k, 1900 (Public Domain, Wikidata)",usageframes4:"Picture Frame (CC0, kisscc0)",usageframes5:"Picture Frame (CC0, kisscc0)",usageframes6:"Picture Frame (CC0, kisscc0)",usageparagraph1:"For the collage on the mainpage, we looked beyond Wikidata, because not all European countries and not all cultural institutions are sufficiently well connected or represented. That's why we explicitly used the holdings of Europeana and the Polona platform of the National Library of Poland.",usageparagraph2:"As we would still like to make visible whose images and fonts we have used, you will find all the materials used here once again:",usagesticker:"Sticker",usagesticker1:"I haved\xF8ren. Kunstnerens hustru, Laurits Andersen Ring, 1897 (Public Domain, Wikidata)",usagesticker10:"The Hare, after Albert de Balleroy, F\xE9lix Bracquemond, 1865 (Public Domain, Wikidata)",usagesticker2:"Calvary, Antonello da Messina, 1475 (Public Domain, Wikidata)",usagesticker3:"Business-Man, Frans Masereel, 1920 (Public Domain, Wikidata)",usagesticker4:"Udsigt fra kunstnerens vindue, Martinus R\xF8rbye, 1825 (Public Domain, Wikidata)",usagesticker5:"Festino degli dei, Giovanni Bellini & Titian, 1514/1529 (Public Domain, Wikidata)",usagesticker6:"Bloemen in een vaasje met sprinkhaan en kikvors, Clara Peeters, 17th century (Public Domain, Wikidata)",usagesticker7:"Le Stryge (The Vampire), Charles Meryon, 1853 (Public Domain, Wikidata)",usagesticker8:"Udsigt gennem en d\xF8r til l\xF8bende figurer, Christoffer Wilhelm Eckersberg, 1845 (Public Domain, Wikidata)",usagesticker9:"Zodiac, Alfons Mucha, 1896/1897 (Public Domain, Wikidata)",vision:"Thinking GLAMorous Europe further",visionparagraph1:"GLAMorous Europe is designed as an open source application and can be further developed on this basis in a variety of ways. For example, it can be adapted for individual cultural institutions and even optimised for media stations.",visionparagraph2:"GLAMorous Europe will also improve the better the data on art objects is maintained and named in wikidata.org. We also want to encourage people to contribute to wikidata by adding and linking data.",visionparagraph3:"If you or your institution are interested in using or further developing GLAMorous Europe together with us, please contact us at the following e-mail address: <1>info@digitalwarenkombinat.de</1>",visionparagraph4:"Follow us on <1>Instagram</1>, <2>LinkedIn</2> and <3>X</3> with @digitalwarenkombinat #glamorouseurope"},artwork:"Canvas",artworkCanvasBrightness:"Brightness",artworkCanvasContrast:"Contrast",artworkCanvasOpacity:"Opacity",artworkEmpty:"Add your image details.",artworkTitle:"Drag the image details or stickers onto the canvas. You can change them and replace the canvas. Create your own work of art and share it!",chooseLanguage:"Choose Language:",collection:"Collection",collectionAddText:"Add choosen detail",collectionClose:"Close",collectionLoading:"Loading...",collectionRemoveText:"Remove Background",collectionSwitchLasso:"Select Lasso",collectionSwitchViewer:"Select zoom",collectionTitle:"Select image details from your favorites to add them to your canvas.",collectionToastSuccess:"Added choosen detail",discardModalCancel:"Close",discardModalConfirm:"Yes",discardModalMessage:"Would you like to discard your previous selection?",discardModalNotConfirm:"No",discardModalTitle:"Current selection",legal:{contact:"Contact:",contactparagraph1:"E-Mail: <1>info@digitalwarenkombinat.de</1>",contactparagraph2:"VAT ID: DE350177346",informationtitle:"Information in accordance with \xA7 5 TMG:",informationtitleparagraph1:"Digitalwarenkombinat GbR",informationtitleparagraph2:"Eilenburger Stra\xDFe 27",informationtitleparagraph3:"04317 Leipzig/Germany",legalparagraph1:"Liability for content",legalparagraph2:"As a service provider, we are responsible for our own content on these pages in accordance with Section 7 (1) TMG (German Telemedia Act) and general legislation. According to \xA7\xA7 8 to 10 TMG, however, we as a service provider are not obliged to monitor transmitted or stored third-party information or to investigate circumstances that indicate illegal activity. Obligations to remove or block the use of information in accordance with general legislation remain unaffected by this. However, liability in this respect is only possible from the time of knowledge of a specific infringement. As soon as we become aware of such infringements, we will remove this content immediately.",legalparagraph3:"Liability for links",legalparagraph4:"Our website contains links to external third-party websites over whose content we have no influence. Therefore, we cannot accept any liability for this third-party content. The respective provider or operator of the pages is always responsible for the content of the linked pages. The linked pages were checked for possible legal violations at the time of linking. Illegal content was not recognizable at the time of linking.",legalparagraph5:"However, permanent monitoring of the content of the linked pages is not reasonable without concrete evidence of an infringement. If we become aware of any legal infringements, we will remove such links immediately.",procedure:"Dispute resolution procedure",procedureparagraph1:"We are not willing or obliged to participate in dispute resolution proceedings before a consumer arbitration board.",representation:"Represented by:",representationparagraph1:"Anne M\xFChlich und Gerd M\xFCller",title:"Legal notice"},selection:"Selection",selectionCreator:"Artist:",selectionLocation:"Location:",selectionTitle:"Select your favorites by swiping or clicking. This will add them to your collection.",selectionUnknown:"Unknown",selectionYear:"Year of creation:",sidebarAbout:"About",sidebarChooseLanguage:"Language",sidebarLegal:"Legal",start:"Start",startButtonText:"Let's go!",startSubtitle:"Explore works of art from museums, galleries, libraries and archives.",startText:"Collect your favorite objects, select details from them and create your very own work of art.",startTitle:"Dating European cultural heritage with GLAMorous Europe!"},a6e={translation:r6e};sa.init({interpolation:{escapeValue:!1},lng:"auto",fallbackLng:"de",resources:{de:{...n6e},en:{...a6e}}});const i6e={backends:[{id:"html5",backend:QW,preview:!0,transition:nG},{id:"touch",backend:SX,options:{delay:50,ignoreContextMenu:!0,scrollAngleRanges:[{start:300},{end:60},{start:120,end:240}]},preview:!0,transition:tG}]};Z6(document.getElementById("root")).render(X.jsx(G.StrictMode,{children:X.jsx(HX,{i18n:sa,children:X.jsx(hX,{options:i6e,children:X.jsx(e6e,{})})})}));export{GO as $,mS as a,uG as b,lG as c,xR as d,mh as e,G as f,qa as g,JF as h,Ii as i,q6 as j,O as r};function _0(t){return _0.viteFileDeps||(_0.viteFileDeps=[]),t.map(e=>_0.viteFileDeps[e])}
