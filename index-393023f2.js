var b_=Object.defineProperty;var x_=(Nr,_r,Ur)=>_r in Nr?b_(Nr,_r,{enumerable:!0,configurable:!0,writable:!0,value:Ur}):Nr[_r]=Ur;var ap=(Nr,_r,Ur)=>(x_(Nr,typeof _r!="symbol"?_r+"":_r,Ur),Ur);function _mergeNamespaces(Nr,_r){for(var Ur=0;Ur<_r.length;Ur++){const jr=_r[Ur];if(typeof jr!="string"&&!Array.isArray(jr)){for(const Gr in jr)if(Gr!=="default"&&!(Gr in Nr)){const Wr=Object.getOwnPropertyDescriptor(jr,Gr);Wr&&Object.defineProperty(Nr,Gr,Wr.get?Wr:{enumerable:!0,get:()=>jr[Gr]})}}}return Object.freeze(Object.defineProperty(Nr,Symbol.toStringTag,{value:"Module"}))}(function(){const _r=document.createElement("link").relList;if(_r&&_r.supports&&_r.supports("modulepreload"))return;for(const Gr of document.querySelectorAll('link[rel="modulepreload"]'))jr(Gr);new MutationObserver(Gr=>{for(const Wr of Gr)if(Wr.type==="childList")for(const Zr of Wr.addedNodes)Zr.tagName==="LINK"&&Zr.rel==="modulepreload"&&jr(Zr)}).observe(document,{childList:!0,subtree:!0});function Ur(Gr){const Wr={};return Gr.integrity&&(Wr.integrity=Gr.integrity),Gr.referrerPolicy&&(Wr.referrerPolicy=Gr.referrerPolicy),Gr.crossOrigin==="use-credentials"?Wr.credentials="include":Gr.crossOrigin==="anonymous"?Wr.credentials="omit":Wr.credentials="same-origin",Wr}function jr(Gr){if(Gr.ep)return;Gr.ep=!0;const Wr=Ur(Gr);fetch(Gr.href,Wr)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(Nr){return Nr&&Nr.__esModule&&Object.prototype.hasOwnProperty.call(Nr,"default")?Nr.default:Nr}function getAugmentedNamespace(Nr){if(Nr.__esModule)return Nr;var _r=Nr.default;if(typeof _r=="function"){var Ur=function jr(){return this instanceof jr?Reflect.construct(_r,arguments,this.constructor):_r.apply(this,arguments)};Ur.prototype=_r.prototype}else Ur={};return Object.defineProperty(Ur,"__esModule",{value:!0}),Object.keys(Nr).forEach(function(jr){var Gr=Object.getOwnPropertyDescriptor(Nr,jr);Object.defineProperty(Ur,jr,Gr.get?Gr:{enumerable:!0,get:function(){return Nr[jr]}})}),Ur}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$4=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$5=Symbol.iterator;function A$4(Nr){return Nr===null||typeof Nr!="object"?null:(Nr=z$5&&Nr[z$5]||Nr["@@iterator"],typeof Nr=="function"?Nr:null)}var B$4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$4={};function E$4(Nr,_r,Ur){this.props=Nr,this.context=_r,this.refs=D$4,this.updater=Ur||B$4}E$4.prototype.isReactComponent={};E$4.prototype.setState=function(Nr,_r){if(typeof Nr!="object"&&typeof Nr!="function"&&Nr!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Nr,_r,"setState")};E$4.prototype.forceUpdate=function(Nr){this.updater.enqueueForceUpdate(this,Nr,"forceUpdate")};function F$3(){}F$3.prototype=E$4.prototype;function G$5(Nr,_r,Ur){this.props=Nr,this.context=_r,this.refs=D$4,this.updater=Ur||B$4}var H$4=G$5.prototype=new F$3;H$4.constructor=G$5;C$3(H$4,E$4.prototype);H$4.isPureReactComponent=!0;var I$5=Array.isArray,J$4=Object.prototype.hasOwnProperty,K$5={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$4(Nr,_r,Ur){var jr,Gr={},Wr=null,Zr=null;if(_r!=null)for(jr in _r.ref!==void 0&&(Zr=_r.ref),_r.key!==void 0&&(Wr=""+_r.key),_r)J$4.call(_r,jr)&&!L$3.hasOwnProperty(jr)&&(Gr[jr]=_r[jr]);var Yr=arguments.length-2;if(Yr===1)Gr.children=Ur;else if(1<Yr){for(var ts=Array(Yr),es=0;es<Yr;es++)ts[es]=arguments[es+2];Gr.children=ts}if(Nr&&Nr.defaultProps)for(jr in Yr=Nr.defaultProps,Yr)Gr[jr]===void 0&&(Gr[jr]=Yr[jr]);return{$$typeof:l$3,type:Nr,key:Wr,ref:Zr,props:Gr,_owner:K$5.current}}function N$5(Nr,_r){return{$$typeof:l$3,type:Nr.type,key:_r,ref:Nr.ref,props:Nr.props,_owner:Nr._owner}}function O$5(Nr){return typeof Nr=="object"&&Nr!==null&&Nr.$$typeof===l$3}function escape(Nr){var _r={"=":"=0",":":"=2"};return"$"+Nr.replace(/[=:]/g,function(Ur){return _r[Ur]})}var P$5=/\/+/g;function Q$5(Nr,_r){return typeof Nr=="object"&&Nr!==null&&Nr.key!=null?escape(""+Nr.key):_r.toString(36)}function R$5(Nr,_r,Ur,jr,Gr){var Wr=typeof Nr;(Wr==="undefined"||Wr==="boolean")&&(Nr=null);var Zr=!1;if(Nr===null)Zr=!0;else switch(Wr){case"string":case"number":Zr=!0;break;case"object":switch(Nr.$$typeof){case l$3:case n$3:Zr=!0}}if(Zr)return Zr=Nr,Gr=Gr(Zr),Nr=jr===""?"."+Q$5(Zr,0):jr,I$5(Gr)?(Ur="",Nr!=null&&(Ur=Nr.replace(P$5,"$&/")+"/"),R$5(Gr,_r,Ur,"",function(es){return es})):Gr!=null&&(O$5(Gr)&&(Gr=N$5(Gr,Ur+(!Gr.key||Zr&&Zr.key===Gr.key?"":(""+Gr.key).replace(P$5,"$&/")+"/")+Nr)),_r.push(Gr)),1;if(Zr=0,jr=jr===""?".":jr+":",I$5(Nr))for(var Yr=0;Yr<Nr.length;Yr++){Wr=Nr[Yr];var ts=jr+Q$5(Wr,Yr);Zr+=R$5(Wr,_r,Ur,ts,Gr)}else if(ts=A$4(Nr),typeof ts=="function")for(Nr=ts.call(Nr),Yr=0;!(Wr=Nr.next()).done;)Wr=Wr.value,ts=jr+Q$5(Wr,Yr++),Zr+=R$5(Wr,_r,Ur,ts,Gr);else if(Wr==="object")throw _r=String(Nr),Error("Objects are not valid as a React child (found: "+(_r==="[object Object]"?"object with keys {"+Object.keys(Nr).join(", ")+"}":_r)+"). If you meant to render a collection of children, use an array instead.");return Zr}function S$4(Nr,_r,Ur){if(Nr==null)return Nr;var jr=[],Gr=0;return R$5(Nr,jr,"","",function(Wr){return _r.call(Ur,Wr,Gr++)}),jr}function T$5(Nr){if(Nr._status===-1){var _r=Nr._result;_r=_r(),_r.then(function(Ur){(Nr._status===0||Nr._status===-1)&&(Nr._status=1,Nr._result=Ur)},function(Ur){(Nr._status===0||Nr._status===-1)&&(Nr._status=2,Nr._result=Ur)}),Nr._status===-1&&(Nr._status=0,Nr._result=_r)}if(Nr._status===1)return Nr._result.default;throw Nr._result}var U$5={current:null},V$5={transition:null},W$4={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$5,ReactCurrentOwner:K$5};react_production_min.Children={map:S$4,forEach:function(Nr,_r,Ur){S$4(Nr,function(){_r.apply(this,arguments)},Ur)},count:function(Nr){var _r=0;return S$4(Nr,function(){_r++}),_r},toArray:function(Nr){return S$4(Nr,function(_r){return _r})||[]},only:function(Nr){if(!O$5(Nr))throw Error("React.Children.only expected to receive a single React element child.");return Nr}};react_production_min.Component=E$4;react_production_min.Fragment=p$5;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$5;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$4;react_production_min.cloneElement=function(Nr,_r,Ur){if(Nr==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Nr+".");var jr=C$3({},Nr.props),Gr=Nr.key,Wr=Nr.ref,Zr=Nr._owner;if(_r!=null){if(_r.ref!==void 0&&(Wr=_r.ref,Zr=K$5.current),_r.key!==void 0&&(Gr=""+_r.key),Nr.type&&Nr.type.defaultProps)var Yr=Nr.type.defaultProps;for(ts in _r)J$4.call(_r,ts)&&!L$3.hasOwnProperty(ts)&&(jr[ts]=_r[ts]===void 0&&Yr!==void 0?Yr[ts]:_r[ts])}var ts=arguments.length-2;if(ts===1)jr.children=Ur;else if(1<ts){Yr=Array(ts);for(var es=0;es<ts;es++)Yr[es]=arguments[es+2];jr.children=Yr}return{$$typeof:l$3,type:Nr.type,key:Gr,ref:Wr,props:jr,_owner:Zr}};react_production_min.createContext=function(Nr){return Nr={$$typeof:u$3,_currentValue:Nr,_currentValue2:Nr,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Nr.Provider={$$typeof:t$2,_context:Nr},Nr.Consumer=Nr};react_production_min.createElement=M$4;react_production_min.createFactory=function(Nr){var _r=M$4.bind(null,Nr);return _r.type=Nr,_r};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(Nr){return{$$typeof:v$3,render:Nr}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(Nr){return{$$typeof:y$3,_payload:{_status:-1,_result:Nr},_init:T$5}};react_production_min.memo=function(Nr,_r){return{$$typeof:x$4,type:Nr,compare:_r===void 0?null:_r}};react_production_min.startTransition=function(Nr){var _r=V$5.transition;V$5.transition={};try{Nr()}finally{V$5.transition=_r}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(Nr,_r){return U$5.current.useCallback(Nr,_r)};react_production_min.useContext=function(Nr){return U$5.current.useContext(Nr)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(Nr){return U$5.current.useDeferredValue(Nr)};react_production_min.useEffect=function(Nr,_r){return U$5.current.useEffect(Nr,_r)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(Nr,_r,Ur){return U$5.current.useImperativeHandle(Nr,_r,Ur)};react_production_min.useInsertionEffect=function(Nr,_r){return U$5.current.useInsertionEffect(Nr,_r)};react_production_min.useLayoutEffect=function(Nr,_r){return U$5.current.useLayoutEffect(Nr,_r)};react_production_min.useMemo=function(Nr,_r){return U$5.current.useMemo(Nr,_r)};react_production_min.useReducer=function(Nr,_r,Ur){return U$5.current.useReducer(Nr,_r,Ur)};react_production_min.useRef=function(Nr){return U$5.current.useRef(Nr)};react_production_min.useState=function(Nr){return U$5.current.useState(Nr)};react_production_min.useSyncExternalStore=function(Nr,_r,Ur){return U$5.current.useSyncExternalStore(Nr,_r,Ur)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs$1(reactExports),$2AODx$react=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$4=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$5=Object.prototype.hasOwnProperty,n$2=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$4(Nr,_r,Ur){var jr,Gr={},Wr=null,Zr=null;Ur!==void 0&&(Wr=""+Ur),_r.key!==void 0&&(Wr=""+_r.key),_r.ref!==void 0&&(Zr=_r.ref);for(jr in _r)m$5.call(_r,jr)&&!p$4.hasOwnProperty(jr)&&(Gr[jr]=_r[jr]);if(Nr&&Nr.defaultProps)for(jr in _r=Nr.defaultProps,_r)Gr[jr]===void 0&&(Gr[jr]=_r[jr]);return{$$typeof:k$4,type:Nr,key:Wr,ref:Zr,props:Gr,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(Nr){function _r(As,Us){var Ks=As.length;As.push(Us);e:for(;0<Ks;){var Ws=Ks-1>>>1,Js=As[Ws];if(0<Gr(Js,Us))As[Ws]=Us,As[Ks]=Js,Ks=Ws;else break e}}function Ur(As){return As.length===0?null:As[0]}function jr(As){if(As.length===0)return null;var Us=As[0],Ks=As.pop();if(Ks!==Us){As[0]=Ks;e:for(var Ws=0,Js=As.length,ho=Js>>>1;Ws<ho;){var so=2*(Ws+1)-1,io=As[so],vo=so+1,co=As[vo];if(0>Gr(io,Ks))vo<Js&&0>Gr(co,io)?(As[Ws]=co,As[vo]=Ks,Ws=vo):(As[Ws]=io,As[so]=Ks,Ws=so);else if(vo<Js&&0>Gr(co,Ks))As[Ws]=co,As[vo]=Ks,Ws=vo;else break e}}return Us}function Gr(As,Us){var Ks=As.sortIndex-Us.sortIndex;return Ks!==0?Ks:As.id-Us.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Wr=performance;Nr.unstable_now=function(){return Wr.now()}}else{var Zr=Date,Yr=Zr.now();Nr.unstable_now=function(){return Zr.now()-Yr}}var ts=[],es=[],ns=1,Xr=null,qr=3,_i=!1,rs=!1,is=!1,ss=typeof setTimeout=="function"?setTimeout:null,os=typeof clearTimeout=="function"?clearTimeout:null,ls=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function cs(As){for(var Us=Ur(es);Us!==null;){if(Us.callback===null)jr(es);else if(Us.startTime<=As)jr(es),Us.sortIndex=Us.expirationTime,_r(ts,Us);else break;Us=Ur(es)}}function ds(As){if(is=!1,cs(As),!rs)if(Ur(ts)!==null)rs=!0,Cs(fs);else{var Us=Ur(es);Us!==null&&Ss(ds,Us.startTime-As)}}function fs(As,Us){rs=!1,is&&(is=!1,os(ys),ys=-1),_i=!0;var Ks=qr;try{for(cs(Us),Xr=Ur(ts);Xr!==null&&(!(Xr.expirationTime>Us)||As&&!Es());){var Ws=Xr.callback;if(typeof Ws=="function"){Xr.callback=null,qr=Xr.priorityLevel;var Js=Ws(Xr.expirationTime<=Us);Us=Nr.unstable_now(),typeof Js=="function"?Xr.callback=Js:Xr===Ur(ts)&&jr(ts),cs(Us)}else jr(ts);Xr=Ur(ts)}if(Xr!==null)var ho=!0;else{var so=Ur(es);so!==null&&Ss(ds,so.startTime-Us),ho=!1}return ho}finally{Xr=null,qr=Ks,_i=!1}}var ms=!1,ps=null,ys=-1,ws=5,xs=-1;function Es(){return!(Nr.unstable_now()-xs<ws)}function Rs(){if(ps!==null){var As=Nr.unstable_now();xs=As;var Us=!0;try{Us=ps(!0,As)}finally{Us?_s():(ms=!1,ps=null)}}else ms=!1}var _s;if(typeof ls=="function")_s=function(){ls(Rs)};else if(typeof MessageChannel<"u"){var Bs=new MessageChannel,vs=Bs.port2;Bs.port1.onmessage=Rs,_s=function(){vs.postMessage(null)}}else _s=function(){ss(Rs,0)};function Cs(As){ps=As,ms||(ms=!0,_s())}function Ss(As,Us){ys=ss(function(){As(Nr.unstable_now())},Us)}Nr.unstable_IdlePriority=5,Nr.unstable_ImmediatePriority=1,Nr.unstable_LowPriority=4,Nr.unstable_NormalPriority=3,Nr.unstable_Profiling=null,Nr.unstable_UserBlockingPriority=2,Nr.unstable_cancelCallback=function(As){As.callback=null},Nr.unstable_continueExecution=function(){rs||_i||(rs=!0,Cs(fs))},Nr.unstable_forceFrameRate=function(As){0>As||125<As?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ws=0<As?Math.floor(1e3/As):5},Nr.unstable_getCurrentPriorityLevel=function(){return qr},Nr.unstable_getFirstCallbackNode=function(){return Ur(ts)},Nr.unstable_next=function(As){switch(qr){case 1:case 2:case 3:var Us=3;break;default:Us=qr}var Ks=qr;qr=Us;try{return As()}finally{qr=Ks}},Nr.unstable_pauseExecution=function(){},Nr.unstable_requestPaint=function(){},Nr.unstable_runWithPriority=function(As,Us){switch(As){case 1:case 2:case 3:case 4:case 5:break;default:As=3}var Ks=qr;qr=As;try{return Us()}finally{qr=Ks}},Nr.unstable_scheduleCallback=function(As,Us,Ks){var Ws=Nr.unstable_now();switch(typeof Ks=="object"&&Ks!==null?(Ks=Ks.delay,Ks=typeof Ks=="number"&&0<Ks?Ws+Ks:Ws):Ks=Ws,As){case 1:var Js=-1;break;case 2:Js=250;break;case 5:Js=1073741823;break;case 4:Js=1e4;break;default:Js=5e3}return Js=Ks+Js,As={id:ns++,callback:Us,priorityLevel:As,startTime:Ks,expirationTime:Js,sortIndex:-1},Ks>Ws?(As.sortIndex=Ks,_r(es,As),Ur(ts)===null&&As===Ur(es)&&(is?(os(ys),ys=-1):is=!0,Ss(ds,Ks-Ws))):(As.sortIndex=Js,_r(ts,As),rs||_i||(rs=!0,Cs(fs))),As},Nr.unstable_shouldYield=Es,Nr.unstable_wrapCallback=function(As){var Us=qr;return function(){var Ks=qr;qr=Us;try{return As.apply(this,arguments)}finally{qr=Ks}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$3(Nr){for(var _r="https://reactjs.org/docs/error-decoder.html?invariant="+Nr,Ur=1;Ur<arguments.length;Ur++)_r+="&args[]="+encodeURIComponent(arguments[Ur]);return"Minified React error #"+Nr+"; visit "+_r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(Nr,_r){ha(Nr,_r),ha(Nr+"Capture",_r)}function ha(Nr,_r){for(ea[Nr]=_r,Nr=0;Nr<_r.length;Nr++)da.add(_r[Nr])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(Nr){return ja.call(ma,Nr)?!0:ja.call(la,Nr)?!1:ka.test(Nr)?ma[Nr]=!0:(la[Nr]=!0,!1)}function pa(Nr,_r,Ur,jr){if(Ur!==null&&Ur.type===0)return!1;switch(typeof _r){case"function":case"symbol":return!0;case"boolean":return jr?!1:Ur!==null?!Ur.acceptsBooleans:(Nr=Nr.toLowerCase().slice(0,5),Nr!=="data-"&&Nr!=="aria-");default:return!1}}function qa(Nr,_r,Ur,jr){if(_r===null||typeof _r>"u"||pa(Nr,_r,Ur,jr))return!0;if(jr)return!1;if(Ur!==null)switch(Ur.type){case 3:return!_r;case 4:return _r===!1;case 5:return isNaN(_r);case 6:return isNaN(_r)||1>_r}return!1}function v$2(Nr,_r,Ur,jr,Gr,Wr,Zr){this.acceptsBooleans=_r===2||_r===3||_r===4,this.attributeName=jr,this.attributeNamespace=Gr,this.mustUseProperty=Ur,this.propertyName=Nr,this.type=_r,this.sanitizeURL=Wr,this.removeEmptyString=Zr}var z$4={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Nr){z$4[Nr]=new v$2(Nr,0,!1,Nr,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Nr){var _r=Nr[0];z$4[_r]=new v$2(_r,1,!1,Nr[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,2,!1,Nr.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,2,!1,Nr,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Nr){z$4[Nr]=new v$2(Nr,3,!1,Nr.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,3,!0,Nr,null,!1,!1)});["capture","download"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,4,!1,Nr,null,!1,!1)});["cols","rows","size","span"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,6,!1,Nr,null,!1,!1)});["rowSpan","start"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,5,!1,Nr.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(Nr){return Nr[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Nr){var _r=Nr.replace(ra,sa);z$4[_r]=new v$2(_r,1,!1,Nr,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Nr){var _r=Nr.replace(ra,sa);z$4[_r]=new v$2(_r,1,!1,Nr,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Nr){var _r=Nr.replace(ra,sa);z$4[_r]=new v$2(_r,1,!1,Nr,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,1,!1,Nr.toLowerCase(),null,!1,!1)});z$4.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Nr){z$4[Nr]=new v$2(Nr,1,!1,Nr.toLowerCase(),null,!0,!0)});function ta(Nr,_r,Ur,jr){var Gr=z$4.hasOwnProperty(_r)?z$4[_r]:null;(Gr!==null?Gr.type!==0:jr||!(2<_r.length)||_r[0]!=="o"&&_r[0]!=="O"||_r[1]!=="n"&&_r[1]!=="N")&&(qa(_r,Ur,Gr,jr)&&(Ur=null),jr||Gr===null?oa(_r)&&(Ur===null?Nr.removeAttribute(_r):Nr.setAttribute(_r,""+Ur)):Gr.mustUseProperty?Nr[Gr.propertyName]=Ur===null?Gr.type===3?!1:"":Ur:(_r=Gr.attributeName,jr=Gr.attributeNamespace,Ur===null?Nr.removeAttribute(_r):(Gr=Gr.type,Ur=Gr===3||Gr===4&&Ur===!0?"":""+Ur,jr?Nr.setAttributeNS(jr,_r,Ur):Nr.setAttribute(_r,Ur))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(Nr){return Nr===null||typeof Nr!="object"?null:(Nr=Ja&&Nr[Ja]||Nr["@@iterator"],typeof Nr=="function"?Nr:null)}var A$3=Object.assign,La;function Ma(Nr){if(La===void 0)try{throw Error()}catch(Ur){var _r=Ur.stack.trim().match(/\n( *(at )?)/);La=_r&&_r[1]||""}return`
`+La+Nr}var Na=!1;function Oa(Nr,_r){if(!Nr||Na)return"";Na=!0;var Ur=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_r)if(_r=function(){throw Error()},Object.defineProperty(_r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_r,[])}catch(es){var jr=es}Reflect.construct(Nr,[],_r)}else{try{_r.call()}catch(es){jr=es}Nr.call(_r.prototype)}else{try{throw Error()}catch(es){jr=es}Nr()}}catch(es){if(es&&jr&&typeof es.stack=="string"){for(var Gr=es.stack.split(`
`),Wr=jr.stack.split(`
`),Zr=Gr.length-1,Yr=Wr.length-1;1<=Zr&&0<=Yr&&Gr[Zr]!==Wr[Yr];)Yr--;for(;1<=Zr&&0<=Yr;Zr--,Yr--)if(Gr[Zr]!==Wr[Yr]){if(Zr!==1||Yr!==1)do if(Zr--,Yr--,0>Yr||Gr[Zr]!==Wr[Yr]){var ts=`
`+Gr[Zr].replace(" at new "," at ");return Nr.displayName&&ts.includes("<anonymous>")&&(ts=ts.replace("<anonymous>",Nr.displayName)),ts}while(1<=Zr&&0<=Yr);break}}}finally{Na=!1,Error.prepareStackTrace=Ur}return(Nr=Nr?Nr.displayName||Nr.name:"")?Ma(Nr):""}function Pa(Nr){switch(Nr.tag){case 5:return Ma(Nr.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return Nr=Oa(Nr.type,!1),Nr;case 11:return Nr=Oa(Nr.type.render,!1),Nr;case 1:return Nr=Oa(Nr.type,!0),Nr;default:return""}}function Qa(Nr){if(Nr==null)return null;if(typeof Nr=="function")return Nr.displayName||Nr.name||null;if(typeof Nr=="string")return Nr;switch(Nr){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof Nr=="object")switch(Nr.$$typeof){case Ca:return(Nr.displayName||"Context")+".Consumer";case Ba:return(Nr._context.displayName||"Context")+".Provider";case Da:var _r=Nr.render;return Nr=Nr.displayName,Nr||(Nr=_r.displayName||_r.name||"",Nr=Nr!==""?"ForwardRef("+Nr+")":"ForwardRef"),Nr;case Ga:return _r=Nr.displayName||null,_r!==null?_r:Qa(Nr.type)||"Memo";case Ha:_r=Nr._payload,Nr=Nr._init;try{return Qa(Nr(_r))}catch{}}return null}function Ra(Nr){var _r=Nr.type;switch(Nr.tag){case 24:return"Cache";case 9:return(_r.displayName||"Context")+".Consumer";case 10:return(_r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Nr=_r.render,Nr=Nr.displayName||Nr.name||"",_r.displayName||(Nr!==""?"ForwardRef("+Nr+")":"ForwardRef");case 7:return"Fragment";case 5:return _r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_r);case 8:return _r===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _r=="function")return _r.displayName||_r.name||null;if(typeof _r=="string")return _r}return null}function Sa(Nr){switch(typeof Nr){case"boolean":case"number":case"string":case"undefined":return Nr;case"object":return Nr;default:return""}}function Ta(Nr){var _r=Nr.type;return(Nr=Nr.nodeName)&&Nr.toLowerCase()==="input"&&(_r==="checkbox"||_r==="radio")}function Ua(Nr){var _r=Ta(Nr)?"checked":"value",Ur=Object.getOwnPropertyDescriptor(Nr.constructor.prototype,_r),jr=""+Nr[_r];if(!Nr.hasOwnProperty(_r)&&typeof Ur<"u"&&typeof Ur.get=="function"&&typeof Ur.set=="function"){var Gr=Ur.get,Wr=Ur.set;return Object.defineProperty(Nr,_r,{configurable:!0,get:function(){return Gr.call(this)},set:function(Zr){jr=""+Zr,Wr.call(this,Zr)}}),Object.defineProperty(Nr,_r,{enumerable:Ur.enumerable}),{getValue:function(){return jr},setValue:function(Zr){jr=""+Zr},stopTracking:function(){Nr._valueTracker=null,delete Nr[_r]}}}}function Va(Nr){Nr._valueTracker||(Nr._valueTracker=Ua(Nr))}function Wa(Nr){if(!Nr)return!1;var _r=Nr._valueTracker;if(!_r)return!0;var Ur=_r.getValue(),jr="";return Nr&&(jr=Ta(Nr)?Nr.checked?"true":"false":Nr.value),Nr=jr,Nr!==Ur?(_r.setValue(Nr),!0):!1}function Xa(Nr){if(Nr=Nr||(typeof document<"u"?document:void 0),typeof Nr>"u")return null;try{return Nr.activeElement||Nr.body}catch{return Nr.body}}function Ya(Nr,_r){var Ur=_r.checked;return A$3({},_r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Ur??Nr._wrapperState.initialChecked})}function Za(Nr,_r){var Ur=_r.defaultValue==null?"":_r.defaultValue,jr=_r.checked!=null?_r.checked:_r.defaultChecked;Ur=Sa(_r.value!=null?_r.value:Ur),Nr._wrapperState={initialChecked:jr,initialValue:Ur,controlled:_r.type==="checkbox"||_r.type==="radio"?_r.checked!=null:_r.value!=null}}function ab(Nr,_r){_r=_r.checked,_r!=null&&ta(Nr,"checked",_r,!1)}function bb(Nr,_r){ab(Nr,_r);var Ur=Sa(_r.value),jr=_r.type;if(Ur!=null)jr==="number"?(Ur===0&&Nr.value===""||Nr.value!=Ur)&&(Nr.value=""+Ur):Nr.value!==""+Ur&&(Nr.value=""+Ur);else if(jr==="submit"||jr==="reset"){Nr.removeAttribute("value");return}_r.hasOwnProperty("value")?cb(Nr,_r.type,Ur):_r.hasOwnProperty("defaultValue")&&cb(Nr,_r.type,Sa(_r.defaultValue)),_r.checked==null&&_r.defaultChecked!=null&&(Nr.defaultChecked=!!_r.defaultChecked)}function db(Nr,_r,Ur){if(_r.hasOwnProperty("value")||_r.hasOwnProperty("defaultValue")){var jr=_r.type;if(!(jr!=="submit"&&jr!=="reset"||_r.value!==void 0&&_r.value!==null))return;_r=""+Nr._wrapperState.initialValue,Ur||_r===Nr.value||(Nr.value=_r),Nr.defaultValue=_r}Ur=Nr.name,Ur!==""&&(Nr.name=""),Nr.defaultChecked=!!Nr._wrapperState.initialChecked,Ur!==""&&(Nr.name=Ur)}function cb(Nr,_r,Ur){(_r!=="number"||Xa(Nr.ownerDocument)!==Nr)&&(Ur==null?Nr.defaultValue=""+Nr._wrapperState.initialValue:Nr.defaultValue!==""+Ur&&(Nr.defaultValue=""+Ur))}var eb=Array.isArray;function fb(Nr,_r,Ur,jr){if(Nr=Nr.options,_r){_r={};for(var Gr=0;Gr<Ur.length;Gr++)_r["$"+Ur[Gr]]=!0;for(Ur=0;Ur<Nr.length;Ur++)Gr=_r.hasOwnProperty("$"+Nr[Ur].value),Nr[Ur].selected!==Gr&&(Nr[Ur].selected=Gr),Gr&&jr&&(Nr[Ur].defaultSelected=!0)}else{for(Ur=""+Sa(Ur),_r=null,Gr=0;Gr<Nr.length;Gr++){if(Nr[Gr].value===Ur){Nr[Gr].selected=!0,jr&&(Nr[Gr].defaultSelected=!0);return}_r!==null||Nr[Gr].disabled||(_r=Nr[Gr])}_r!==null&&(_r.selected=!0)}}function gb(Nr,_r){if(_r.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$3({},_r,{value:void 0,defaultValue:void 0,children:""+Nr._wrapperState.initialValue})}function hb(Nr,_r){var Ur=_r.value;if(Ur==null){if(Ur=_r.children,_r=_r.defaultValue,Ur!=null){if(_r!=null)throw Error(p$3(92));if(eb(Ur)){if(1<Ur.length)throw Error(p$3(93));Ur=Ur[0]}_r=Ur}_r==null&&(_r=""),Ur=_r}Nr._wrapperState={initialValue:Sa(Ur)}}function ib(Nr,_r){var Ur=Sa(_r.value),jr=Sa(_r.defaultValue);Ur!=null&&(Ur=""+Ur,Ur!==Nr.value&&(Nr.value=Ur),_r.defaultValue==null&&Nr.defaultValue!==Ur&&(Nr.defaultValue=Ur)),jr!=null&&(Nr.defaultValue=""+jr)}function jb(Nr){var _r=Nr.textContent;_r===Nr._wrapperState.initialValue&&_r!==""&&_r!==null&&(Nr.value=_r)}function kb(Nr){switch(Nr){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(Nr,_r){return Nr==null||Nr==="http://www.w3.org/1999/xhtml"?kb(_r):Nr==="http://www.w3.org/2000/svg"&&_r==="foreignObject"?"http://www.w3.org/1999/xhtml":Nr}var mb,nb=function(Nr){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_r,Ur,jr,Gr){MSApp.execUnsafeLocalFunction(function(){return Nr(_r,Ur,jr,Gr)})}:Nr}(function(Nr,_r){if(Nr.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in Nr)Nr.innerHTML=_r;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_r.valueOf().toString()+"</svg>",_r=mb.firstChild;Nr.firstChild;)Nr.removeChild(Nr.firstChild);for(;_r.firstChild;)Nr.appendChild(_r.firstChild)}});function ob(Nr,_r){if(_r){var Ur=Nr.firstChild;if(Ur&&Ur===Nr.lastChild&&Ur.nodeType===3){Ur.nodeValue=_r;return}}Nr.textContent=_r}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(Nr){qb.forEach(function(_r){_r=_r+Nr.charAt(0).toUpperCase()+Nr.substring(1),pb[_r]=pb[Nr]})});function rb(Nr,_r,Ur){return _r==null||typeof _r=="boolean"||_r===""?"":Ur||typeof _r!="number"||_r===0||pb.hasOwnProperty(Nr)&&pb[Nr]?(""+_r).trim():_r+"px"}function sb(Nr,_r){Nr=Nr.style;for(var Ur in _r)if(_r.hasOwnProperty(Ur)){var jr=Ur.indexOf("--")===0,Gr=rb(Ur,_r[Ur],jr);Ur==="float"&&(Ur="cssFloat"),jr?Nr.setProperty(Ur,Gr):Nr[Ur]=Gr}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(Nr,_r){if(_r){if(tb[Nr]&&(_r.children!=null||_r.dangerouslySetInnerHTML!=null))throw Error(p$3(137,Nr));if(_r.dangerouslySetInnerHTML!=null){if(_r.children!=null)throw Error(p$3(60));if(typeof _r.dangerouslySetInnerHTML!="object"||!("__html"in _r.dangerouslySetInnerHTML))throw Error(p$3(61))}if(_r.style!=null&&typeof _r.style!="object")throw Error(p$3(62))}}function vb(Nr,_r){if(Nr.indexOf("-")===-1)return typeof _r.is=="string";switch(Nr){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(Nr){return Nr=Nr.target||Nr.srcElement||window,Nr.correspondingUseElement&&(Nr=Nr.correspondingUseElement),Nr.nodeType===3?Nr.parentNode:Nr}var yb=null,zb=null,Ab=null;function Bb(Nr){if(Nr=Cb(Nr)){if(typeof yb!="function")throw Error(p$3(280));var _r=Nr.stateNode;_r&&(_r=Db(_r),yb(Nr.stateNode,Nr.type,_r))}}function Eb(Nr){zb?Ab?Ab.push(Nr):Ab=[Nr]:zb=Nr}function Fb(){if(zb){var Nr=zb,_r=Ab;if(Ab=zb=null,Bb(Nr),_r)for(Nr=0;Nr<_r.length;Nr++)Bb(_r[Nr])}}function Gb(Nr,_r){return Nr(_r)}function Hb(){}var Ib=!1;function Jb(Nr,_r,Ur){if(Ib)return Nr(_r,Ur);Ib=!0;try{return Gb(Nr,_r,Ur)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(Nr,_r){var Ur=Nr.stateNode;if(Ur===null)return null;var jr=Db(Ur);if(jr===null)return null;Ur=jr[_r];e:switch(_r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(jr=!jr.disabled)||(Nr=Nr.type,jr=!(Nr==="button"||Nr==="input"||Nr==="select"||Nr==="textarea")),Nr=!jr;break e;default:Nr=!1}if(Nr)return null;if(Ur&&typeof Ur!="function")throw Error(p$3(231,_r,typeof Ur));return Ur}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(Nr,_r,Ur,jr,Gr,Wr,Zr,Yr,ts){var es=Array.prototype.slice.call(arguments,3);try{_r.apply(Ur,es)}catch(ns){this.onError(ns)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(Nr){Ob=!0,Pb=Nr}};function Tb(Nr,_r,Ur,jr,Gr,Wr,Zr,Yr,ts){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(Nr,_r,Ur,jr,Gr,Wr,Zr,Yr,ts){if(Tb.apply(this,arguments),Ob){if(Ob){var es=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=es)}}function Vb(Nr){var _r=Nr,Ur=Nr;if(Nr.alternate)for(;_r.return;)_r=_r.return;else{Nr=_r;do _r=Nr,_r.flags&4098&&(Ur=_r.return),Nr=_r.return;while(Nr)}return _r.tag===3?Ur:null}function Wb(Nr){if(Nr.tag===13){var _r=Nr.memoizedState;if(_r===null&&(Nr=Nr.alternate,Nr!==null&&(_r=Nr.memoizedState)),_r!==null)return _r.dehydrated}return null}function Xb(Nr){if(Vb(Nr)!==Nr)throw Error(p$3(188))}function Yb(Nr){var _r=Nr.alternate;if(!_r){if(_r=Vb(Nr),_r===null)throw Error(p$3(188));return _r!==Nr?null:Nr}for(var Ur=Nr,jr=_r;;){var Gr=Ur.return;if(Gr===null)break;var Wr=Gr.alternate;if(Wr===null){if(jr=Gr.return,jr!==null){Ur=jr;continue}break}if(Gr.child===Wr.child){for(Wr=Gr.child;Wr;){if(Wr===Ur)return Xb(Gr),Nr;if(Wr===jr)return Xb(Gr),_r;Wr=Wr.sibling}throw Error(p$3(188))}if(Ur.return!==jr.return)Ur=Gr,jr=Wr;else{for(var Zr=!1,Yr=Gr.child;Yr;){if(Yr===Ur){Zr=!0,Ur=Gr,jr=Wr;break}if(Yr===jr){Zr=!0,jr=Gr,Ur=Wr;break}Yr=Yr.sibling}if(!Zr){for(Yr=Wr.child;Yr;){if(Yr===Ur){Zr=!0,Ur=Wr,jr=Gr;break}if(Yr===jr){Zr=!0,jr=Wr,Ur=Gr;break}Yr=Yr.sibling}if(!Zr)throw Error(p$3(189))}}if(Ur.alternate!==jr)throw Error(p$3(190))}if(Ur.tag!==3)throw Error(p$3(188));return Ur.stateNode.current===Ur?Nr:_r}function Zb(Nr){return Nr=Yb(Nr),Nr!==null?$b(Nr):null}function $b(Nr){if(Nr.tag===5||Nr.tag===6)return Nr;for(Nr=Nr.child;Nr!==null;){var _r=$b(Nr);if(_r!==null)return _r;Nr=Nr.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$3=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(Nr){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,Nr,void 0,(Nr.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(Nr){return Nr>>>=0,Nr===0?32:31-(pc(Nr)/qc|0)|0}var rc=64,sc=4194304;function tc(Nr){switch(Nr&-Nr){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Nr&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Nr&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Nr}}function uc(Nr,_r){var Ur=Nr.pendingLanes;if(Ur===0)return 0;var jr=0,Gr=Nr.suspendedLanes,Wr=Nr.pingedLanes,Zr=Ur&268435455;if(Zr!==0){var Yr=Zr&~Gr;Yr!==0?jr=tc(Yr):(Wr&=Zr,Wr!==0&&(jr=tc(Wr)))}else Zr=Ur&~Gr,Zr!==0?jr=tc(Zr):Wr!==0&&(jr=tc(Wr));if(jr===0)return 0;if(_r!==0&&_r!==jr&&!(_r&Gr)&&(Gr=jr&-jr,Wr=_r&-_r,Gr>=Wr||Gr===16&&(Wr&4194240)!==0))return _r;if(jr&4&&(jr|=Ur&16),_r=Nr.entangledLanes,_r!==0)for(Nr=Nr.entanglements,_r&=jr;0<_r;)Ur=31-oc(_r),Gr=1<<Ur,jr|=Nr[Ur],_r&=~Gr;return jr}function vc(Nr,_r){switch(Nr){case 1:case 2:case 4:return _r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(Nr,_r){for(var Ur=Nr.suspendedLanes,jr=Nr.pingedLanes,Gr=Nr.expirationTimes,Wr=Nr.pendingLanes;0<Wr;){var Zr=31-oc(Wr),Yr=1<<Zr,ts=Gr[Zr];ts===-1?(!(Yr&Ur)||Yr&jr)&&(Gr[Zr]=vc(Yr,_r)):ts<=_r&&(Nr.expiredLanes|=Yr),Wr&=~Yr}}function xc(Nr){return Nr=Nr.pendingLanes&-1073741825,Nr!==0?Nr:Nr&1073741824?1073741824:0}function yc(){var Nr=rc;return rc<<=1,!(rc&4194240)&&(rc=64),Nr}function zc(Nr){for(var _r=[],Ur=0;31>Ur;Ur++)_r.push(Nr);return _r}function Ac(Nr,_r,Ur){Nr.pendingLanes|=_r,_r!==536870912&&(Nr.suspendedLanes=0,Nr.pingedLanes=0),Nr=Nr.eventTimes,_r=31-oc(_r),Nr[_r]=Ur}function Bc(Nr,_r){var Ur=Nr.pendingLanes&~_r;Nr.pendingLanes=_r,Nr.suspendedLanes=0,Nr.pingedLanes=0,Nr.expiredLanes&=_r,Nr.mutableReadLanes&=_r,Nr.entangledLanes&=_r,_r=Nr.entanglements;var jr=Nr.eventTimes;for(Nr=Nr.expirationTimes;0<Ur;){var Gr=31-oc(Ur),Wr=1<<Gr;_r[Gr]=0,jr[Gr]=-1,Nr[Gr]=-1,Ur&=~Wr}}function Cc(Nr,_r){var Ur=Nr.entangledLanes|=_r;for(Nr=Nr.entanglements;Ur;){var jr=31-oc(Ur),Gr=1<<jr;Gr&_r|Nr[jr]&_r&&(Nr[jr]|=_r),Ur&=~Gr}}var C$2=0;function Dc(Nr){return Nr&=-Nr,1<Nr?4<Nr?Nr&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(Nr,_r){switch(Nr){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_r.pointerId)}}function Tc(Nr,_r,Ur,jr,Gr,Wr){return Nr===null||Nr.nativeEvent!==Wr?(Nr={blockedOn:_r,domEventName:Ur,eventSystemFlags:jr,nativeEvent:Wr,targetContainers:[Gr]},_r!==null&&(_r=Cb(_r),_r!==null&&Fc(_r)),Nr):(Nr.eventSystemFlags|=jr,_r=Nr.targetContainers,Gr!==null&&_r.indexOf(Gr)===-1&&_r.push(Gr),Nr)}function Uc(Nr,_r,Ur,jr,Gr){switch(_r){case"focusin":return Lc=Tc(Lc,Nr,_r,Ur,jr,Gr),!0;case"dragenter":return Mc=Tc(Mc,Nr,_r,Ur,jr,Gr),!0;case"mouseover":return Nc=Tc(Nc,Nr,_r,Ur,jr,Gr),!0;case"pointerover":var Wr=Gr.pointerId;return Oc.set(Wr,Tc(Oc.get(Wr)||null,Nr,_r,Ur,jr,Gr)),!0;case"gotpointercapture":return Wr=Gr.pointerId,Pc.set(Wr,Tc(Pc.get(Wr)||null,Nr,_r,Ur,jr,Gr)),!0}return!1}function Vc(Nr){var _r=Wc(Nr.target);if(_r!==null){var Ur=Vb(_r);if(Ur!==null){if(_r=Ur.tag,_r===13){if(_r=Wb(Ur),_r!==null){Nr.blockedOn=_r,Ic(Nr.priority,function(){Gc(Ur)});return}}else if(_r===3&&Ur.stateNode.current.memoizedState.isDehydrated){Nr.blockedOn=Ur.tag===3?Ur.stateNode.containerInfo:null;return}}}Nr.blockedOn=null}function Xc(Nr){if(Nr.blockedOn!==null)return!1;for(var _r=Nr.targetContainers;0<_r.length;){var Ur=Yc(Nr.domEventName,Nr.eventSystemFlags,_r[0],Nr.nativeEvent);if(Ur===null){Ur=Nr.nativeEvent;var jr=new Ur.constructor(Ur.type,Ur);wb=jr,Ur.target.dispatchEvent(jr),wb=null}else return _r=Cb(Ur),_r!==null&&Fc(_r),Nr.blockedOn=Ur,!1;_r.shift()}return!0}function Zc(Nr,_r,Ur){Xc(Nr)&&Ur.delete(_r)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(Nr,_r){Nr.blockedOn===_r&&(Nr.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(Nr){function _r(Gr){return ad(Gr,Nr)}if(0<Kc.length){ad(Kc[0],Nr);for(var Ur=1;Ur<Kc.length;Ur++){var jr=Kc[Ur];jr.blockedOn===Nr&&(jr.blockedOn=null)}}for(Lc!==null&&ad(Lc,Nr),Mc!==null&&ad(Mc,Nr),Nc!==null&&ad(Nc,Nr),Oc.forEach(_r),Pc.forEach(_r),Ur=0;Ur<Qc.length;Ur++)jr=Qc[Ur],jr.blockedOn===Nr&&(jr.blockedOn=null);for(;0<Qc.length&&(Ur=Qc[0],Ur.blockedOn===null);)Vc(Ur),Ur.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(Nr,_r,Ur,jr){var Gr=C$2,Wr=cd.transition;cd.transition=null;try{C$2=1,fd(Nr,_r,Ur,jr)}finally{C$2=Gr,cd.transition=Wr}}function gd(Nr,_r,Ur,jr){var Gr=C$2,Wr=cd.transition;cd.transition=null;try{C$2=4,fd(Nr,_r,Ur,jr)}finally{C$2=Gr,cd.transition=Wr}}function fd(Nr,_r,Ur,jr){if(dd){var Gr=Yc(Nr,_r,Ur,jr);if(Gr===null)hd(Nr,_r,jr,id,Ur),Sc(Nr,jr);else if(Uc(Gr,Nr,_r,Ur,jr))jr.stopPropagation();else if(Sc(Nr,jr),_r&4&&-1<Rc.indexOf(Nr)){for(;Gr!==null;){var Wr=Cb(Gr);if(Wr!==null&&Ec(Wr),Wr=Yc(Nr,_r,Ur,jr),Wr===null&&hd(Nr,_r,jr,id,Ur),Wr===Gr)break;Gr=Wr}Gr!==null&&jr.stopPropagation()}else hd(Nr,_r,jr,null,Ur)}}var id=null;function Yc(Nr,_r,Ur,jr){if(id=null,Nr=xb(jr),Nr=Wc(Nr),Nr!==null)if(_r=Vb(Nr),_r===null)Nr=null;else if(Ur=_r.tag,Ur===13){if(Nr=Wb(_r),Nr!==null)return Nr;Nr=null}else if(Ur===3){if(_r.stateNode.current.memoizedState.isDehydrated)return _r.tag===3?_r.stateNode.containerInfo:null;Nr=null}else _r!==Nr&&(Nr=null);return id=Nr,null}function jd(Nr){switch(Nr){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var Nr,_r=ld,Ur=_r.length,jr,Gr="value"in kd?kd.value:kd.textContent,Wr=Gr.length;for(Nr=0;Nr<Ur&&_r[Nr]===Gr[Nr];Nr++);var Zr=Ur-Nr;for(jr=1;jr<=Zr&&_r[Ur-jr]===Gr[Wr-jr];jr++);return md=Gr.slice(Nr,1<jr?1-jr:void 0)}function od(Nr){var _r=Nr.keyCode;return"charCode"in Nr?(Nr=Nr.charCode,Nr===0&&_r===13&&(Nr=13)):Nr=_r,Nr===10&&(Nr=13),32<=Nr||Nr===13?Nr:0}function pd(){return!0}function qd(){return!1}function rd(Nr){function _r(Ur,jr,Gr,Wr,Zr){this._reactName=Ur,this._targetInst=Gr,this.type=jr,this.nativeEvent=Wr,this.target=Zr,this.currentTarget=null;for(var Yr in Nr)Nr.hasOwnProperty(Yr)&&(Ur=Nr[Yr],this[Yr]=Ur?Ur(Wr):Wr[Yr]);return this.isDefaultPrevented=(Wr.defaultPrevented!=null?Wr.defaultPrevented:Wr.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(_r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Ur=this.nativeEvent;Ur&&(Ur.preventDefault?Ur.preventDefault():typeof Ur.returnValue!="unknown"&&(Ur.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var Ur=this.nativeEvent;Ur&&(Ur.stopPropagation?Ur.stopPropagation():typeof Ur.cancelBubble!="unknown"&&(Ur.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_r}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Nr){return Nr.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(Nr){return Nr.relatedTarget===void 0?Nr.fromElement===Nr.srcElement?Nr.toElement:Nr.fromElement:Nr.relatedTarget},movementX:function(Nr){return"movementX"in Nr?Nr.movementX:(Nr!==yd&&(yd&&Nr.type==="mousemove"?(wd=Nr.screenX-yd.screenX,xd=Nr.screenY-yd.screenY):xd=wd=0,yd=Nr),wd)},movementY:function(Nr){return"movementY"in Nr?Nr.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(Nr){return"clipboardData"in Nr?Nr.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(Nr){var _r=this.nativeEvent;return _r.getModifierState?_r.getModifierState(Nr):(Nr=Od[Nr])?!!_r[Nr]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(Nr){if(Nr.key){var _r=Md[Nr.key]||Nr.key;if(_r!=="Unidentified")return _r}return Nr.type==="keypress"?(Nr=od(Nr),Nr===13?"Enter":String.fromCharCode(Nr)):Nr.type==="keydown"||Nr.type==="keyup"?Nd[Nr.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(Nr){return Nr.type==="keypress"?od(Nr):0},keyCode:function(Nr){return Nr.type==="keydown"||Nr.type==="keyup"?Nr.keyCode:0},which:function(Nr){return Nr.type==="keypress"?od(Nr):Nr.type==="keydown"||Nr.type==="keyup"?Nr.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(Nr){return"deltaX"in Nr?Nr.deltaX:"wheelDeltaX"in Nr?-Nr.wheelDeltaX:0},deltaY:function(Nr){return"deltaY"in Nr?Nr.deltaY:"wheelDeltaY"in Nr?-Nr.wheelDeltaY:"wheelDelta"in Nr?-Nr.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$2=ia&&"TextEvent"in window&&!be$2,de$2=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$2=String.fromCharCode(32),fe$1=!1;function ge$2(Nr,_r){switch(Nr){case"keyup":return $d.indexOf(_r.keyCode)!==-1;case"keydown":return _r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(Nr){return Nr=Nr.detail,typeof Nr=="object"&&"data"in Nr?Nr.data:null}var ie$2=!1;function je$2(Nr,_r){switch(Nr){case"compositionend":return he$2(_r);case"keypress":return _r.which!==32?null:(fe$1=!0,ee$2);case"textInput":return Nr=_r.data,Nr===ee$2&&fe$1?null:Nr;default:return null}}function ke$2(Nr,_r){if(ie$2)return Nr==="compositionend"||!ae$2&&ge$2(Nr,_r)?(Nr=nd(),md=ld=kd=null,ie$2=!1,Nr):null;switch(Nr){case"paste":return null;case"keypress":if(!(_r.ctrlKey||_r.altKey||_r.metaKey)||_r.ctrlKey&&_r.altKey){if(_r.char&&1<_r.char.length)return _r.char;if(_r.which)return String.fromCharCode(_r.which)}return null;case"compositionend":return de$2&&_r.locale!=="ko"?null:_r.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(Nr){var _r=Nr&&Nr.nodeName&&Nr.nodeName.toLowerCase();return _r==="input"?!!le$2[Nr.type]:_r==="textarea"}function ne$2(Nr,_r,Ur,jr){Eb(jr),_r=oe$2(_r,"onChange"),0<_r.length&&(Ur=new td("onChange","change",null,Ur,jr),Nr.push({event:Ur,listeners:_r}))}var pe$1=null,qe$1=null;function re$3(Nr){se$2(Nr,0)}function te$3(Nr){var _r=ue$1(Nr);if(Wa(_r))return Nr}function ve$2(Nr,_r){if(Nr==="change")return _r}var we$2=!1;if(ia){var xe$2;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2=typeof ze$2.oninput=="function"}xe$2=ye$2}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$2),qe$1=pe$1=null)}function Be$2(Nr){if(Nr.propertyName==="value"&&te$3(qe$1)){var _r=[];ne$2(_r,qe$1,Nr,xb(Nr)),Jb(re$3,_r)}}function Ce$2(Nr,_r,Ur){Nr==="focusin"?(Ae$2(),pe$1=_r,qe$1=Ur,pe$1.attachEvent("onpropertychange",Be$2)):Nr==="focusout"&&Ae$2()}function De$2(Nr){if(Nr==="selectionchange"||Nr==="keyup"||Nr==="keydown")return te$3(qe$1)}function Ee$2(Nr,_r){if(Nr==="click")return te$3(_r)}function Fe$2(Nr,_r){if(Nr==="input"||Nr==="change")return te$3(_r)}function Ge$1(Nr,_r){return Nr===_r&&(Nr!==0||1/Nr===1/_r)||Nr!==Nr&&_r!==_r}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(Nr,_r){if(He$2(Nr,_r))return!0;if(typeof Nr!="object"||Nr===null||typeof _r!="object"||_r===null)return!1;var Ur=Object.keys(Nr),jr=Object.keys(_r);if(Ur.length!==jr.length)return!1;for(jr=0;jr<Ur.length;jr++){var Gr=Ur[jr];if(!ja.call(_r,Gr)||!He$2(Nr[Gr],_r[Gr]))return!1}return!0}function Je$1(Nr){for(;Nr&&Nr.firstChild;)Nr=Nr.firstChild;return Nr}function Ke$1(Nr,_r){var Ur=Je$1(Nr);Nr=0;for(var jr;Ur;){if(Ur.nodeType===3){if(jr=Nr+Ur.textContent.length,Nr<=_r&&jr>=_r)return{node:Ur,offset:_r-Nr};Nr=jr}e:{for(;Ur;){if(Ur.nextSibling){Ur=Ur.nextSibling;break e}Ur=Ur.parentNode}Ur=void 0}Ur=Je$1(Ur)}}function Le$2(Nr,_r){return Nr&&_r?Nr===_r?!0:Nr&&Nr.nodeType===3?!1:_r&&_r.nodeType===3?Le$2(Nr,_r.parentNode):"contains"in Nr?Nr.contains(_r):Nr.compareDocumentPosition?!!(Nr.compareDocumentPosition(_r)&16):!1:!1}function Me$2(){for(var Nr=window,_r=Xa();_r instanceof Nr.HTMLIFrameElement;){try{var Ur=typeof _r.contentWindow.location.href=="string"}catch{Ur=!1}if(Ur)Nr=_r.contentWindow;else break;_r=Xa(Nr.document)}return _r}function Ne$1(Nr){var _r=Nr&&Nr.nodeName&&Nr.nodeName.toLowerCase();return _r&&(_r==="input"&&(Nr.type==="text"||Nr.type==="search"||Nr.type==="tel"||Nr.type==="url"||Nr.type==="password")||_r==="textarea"||Nr.contentEditable==="true")}function Oe$2(Nr){var _r=Me$2(),Ur=Nr.focusedElem,jr=Nr.selectionRange;if(_r!==Ur&&Ur&&Ur.ownerDocument&&Le$2(Ur.ownerDocument.documentElement,Ur)){if(jr!==null&&Ne$1(Ur)){if(_r=jr.start,Nr=jr.end,Nr===void 0&&(Nr=_r),"selectionStart"in Ur)Ur.selectionStart=_r,Ur.selectionEnd=Math.min(Nr,Ur.value.length);else if(Nr=(_r=Ur.ownerDocument||document)&&_r.defaultView||window,Nr.getSelection){Nr=Nr.getSelection();var Gr=Ur.textContent.length,Wr=Math.min(jr.start,Gr);jr=jr.end===void 0?Wr:Math.min(jr.end,Gr),!Nr.extend&&Wr>jr&&(Gr=jr,jr=Wr,Wr=Gr),Gr=Ke$1(Ur,Wr);var Zr=Ke$1(Ur,jr);Gr&&Zr&&(Nr.rangeCount!==1||Nr.anchorNode!==Gr.node||Nr.anchorOffset!==Gr.offset||Nr.focusNode!==Zr.node||Nr.focusOffset!==Zr.offset)&&(_r=_r.createRange(),_r.setStart(Gr.node,Gr.offset),Nr.removeAllRanges(),Wr>jr?(Nr.addRange(_r),Nr.extend(Zr.node,Zr.offset)):(_r.setEnd(Zr.node,Zr.offset),Nr.addRange(_r)))}}for(_r=[],Nr=Ur;Nr=Nr.parentNode;)Nr.nodeType===1&&_r.push({element:Nr,left:Nr.scrollLeft,top:Nr.scrollTop});for(typeof Ur.focus=="function"&&Ur.focus(),Ur=0;Ur<_r.length;Ur++)Nr=_r[Ur],Nr.element.scrollLeft=Nr.left,Nr.element.scrollTop=Nr.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe$2=null,Re$2=null,Se$2=null,Te$2=!1;function Ue$1(Nr,_r,Ur){var jr=Ur.window===Ur?Ur.document:Ur.nodeType===9?Ur:Ur.ownerDocument;Te$2||Qe$2==null||Qe$2!==Xa(jr)||(jr=Qe$2,"selectionStart"in jr&&Ne$1(jr)?jr={start:jr.selectionStart,end:jr.selectionEnd}:(jr=(jr.ownerDocument&&jr.ownerDocument.defaultView||window).getSelection(),jr={anchorNode:jr.anchorNode,anchorOffset:jr.anchorOffset,focusNode:jr.focusNode,focusOffset:jr.focusOffset}),Se$2&&Ie$2(Se$2,jr)||(Se$2=jr,jr=oe$2(Re$2,"onSelect"),0<jr.length&&(_r=new td("onSelect","select",null,_r,Ur),Nr.push({event:_r,listeners:jr}),_r.target=Qe$2)))}function Ve$2(Nr,_r){var Ur={};return Ur[Nr.toLowerCase()]=_r.toLowerCase(),Ur["Webkit"+Nr]="webkit"+_r,Ur["Moz"+Nr]="moz"+_r,Ur}var We$2={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze$1(Nr){if(Xe$1[Nr])return Xe$1[Nr];if(!We$2[Nr])return Nr;var _r=We$2[Nr],Ur;for(Ur in _r)if(_r.hasOwnProperty(Ur)&&Ur in Ye$1)return Xe$1[Nr]=_r[Ur];return Nr}var $e$2=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(Nr,_r){df.set(Nr,_r),fa(_r,[Nr])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$2,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(Nr,_r,Ur){var jr=Nr.type||"unknown-event";Nr.currentTarget=Ur,Ub(jr,_r,void 0,Nr),Nr.currentTarget=null}function se$2(Nr,_r){_r=(_r&4)!==0;for(var Ur=0;Ur<Nr.length;Ur++){var jr=Nr[Ur],Gr=jr.event;jr=jr.listeners;e:{var Wr=void 0;if(_r)for(var Zr=jr.length-1;0<=Zr;Zr--){var Yr=jr[Zr],ts=Yr.instance,es=Yr.currentTarget;if(Yr=Yr.listener,ts!==Wr&&Gr.isPropagationStopped())break e;nf(Gr,Yr,es),Wr=ts}else for(Zr=0;Zr<jr.length;Zr++){if(Yr=jr[Zr],ts=Yr.instance,es=Yr.currentTarget,Yr=Yr.listener,ts!==Wr&&Gr.isPropagationStopped())break e;nf(Gr,Yr,es),Wr=ts}}}if(Qb)throw Nr=Rb,Qb=!1,Rb=null,Nr}function D$3(Nr,_r){var Ur=_r[of];Ur===void 0&&(Ur=_r[of]=new Set);var jr=Nr+"__bubble";Ur.has(jr)||(pf(_r,Nr,2,!1),Ur.add(jr))}function qf(Nr,_r,Ur){var jr=0;_r&&(jr|=4),pf(Ur,Nr,jr,_r)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(Nr){if(!Nr[rf]){Nr[rf]=!0,da.forEach(function(Ur){Ur!=="selectionchange"&&(mf.has(Ur)||qf(Ur,!1,Nr),qf(Ur,!0,Nr))});var _r=Nr.nodeType===9?Nr:Nr.ownerDocument;_r===null||_r[rf]||(_r[rf]=!0,qf("selectionchange",!1,_r))}}function pf(Nr,_r,Ur,jr){switch(jd(_r)){case 1:var Gr=ed;break;case 4:Gr=gd;break;default:Gr=fd}Ur=Gr.bind(null,_r,Ur,Nr),Gr=void 0,!Lb||_r!=="touchstart"&&_r!=="touchmove"&&_r!=="wheel"||(Gr=!0),jr?Gr!==void 0?Nr.addEventListener(_r,Ur,{capture:!0,passive:Gr}):Nr.addEventListener(_r,Ur,!0):Gr!==void 0?Nr.addEventListener(_r,Ur,{passive:Gr}):Nr.addEventListener(_r,Ur,!1)}function hd(Nr,_r,Ur,jr,Gr){var Wr=jr;if(!(_r&1)&&!(_r&2)&&jr!==null)e:for(;;){if(jr===null)return;var Zr=jr.tag;if(Zr===3||Zr===4){var Yr=jr.stateNode.containerInfo;if(Yr===Gr||Yr.nodeType===8&&Yr.parentNode===Gr)break;if(Zr===4)for(Zr=jr.return;Zr!==null;){var ts=Zr.tag;if((ts===3||ts===4)&&(ts=Zr.stateNode.containerInfo,ts===Gr||ts.nodeType===8&&ts.parentNode===Gr))return;Zr=Zr.return}for(;Yr!==null;){if(Zr=Wc(Yr),Zr===null)return;if(ts=Zr.tag,ts===5||ts===6){jr=Wr=Zr;continue e}Yr=Yr.parentNode}}jr=jr.return}Jb(function(){var es=Wr,ns=xb(Ur),Xr=[];e:{var qr=df.get(Nr);if(qr!==void 0){var _i=td,rs=Nr;switch(Nr){case"keypress":if(od(Ur)===0)break e;case"keydown":case"keyup":_i=Rd;break;case"focusin":rs="focus",_i=Fd;break;case"focusout":rs="blur",_i=Fd;break;case"beforeblur":case"afterblur":_i=Fd;break;case"click":if(Ur.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_i=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_i=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_i=Vd;break;case $e$2:case af:case bf:_i=Hd;break;case cf:_i=Xd;break;case"scroll":_i=vd;break;case"wheel":_i=Zd;break;case"copy":case"cut":case"paste":_i=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_i=Td}var is=(_r&4)!==0,ss=!is&&Nr==="scroll",os=is?qr!==null?qr+"Capture":null:qr;is=[];for(var ls=es,cs;ls!==null;){cs=ls;var ds=cs.stateNode;if(cs.tag===5&&ds!==null&&(cs=ds,os!==null&&(ds=Kb(ls,os),ds!=null&&is.push(tf(ls,ds,cs)))),ss)break;ls=ls.return}0<is.length&&(qr=new _i(qr,rs,null,Ur,ns),Xr.push({event:qr,listeners:is}))}}if(!(_r&7)){e:{if(qr=Nr==="mouseover"||Nr==="pointerover",_i=Nr==="mouseout"||Nr==="pointerout",qr&&Ur!==wb&&(rs=Ur.relatedTarget||Ur.fromElement)&&(Wc(rs)||rs[uf]))break e;if((_i||qr)&&(qr=ns.window===ns?ns:(qr=ns.ownerDocument)?qr.defaultView||qr.parentWindow:window,_i?(rs=Ur.relatedTarget||Ur.toElement,_i=es,rs=rs?Wc(rs):null,rs!==null&&(ss=Vb(rs),rs!==ss||rs.tag!==5&&rs.tag!==6)&&(rs=null)):(_i=null,rs=es),_i!==rs)){if(is=Bd,ds="onMouseLeave",os="onMouseEnter",ls="mouse",(Nr==="pointerout"||Nr==="pointerover")&&(is=Td,ds="onPointerLeave",os="onPointerEnter",ls="pointer"),ss=_i==null?qr:ue$1(_i),cs=rs==null?qr:ue$1(rs),qr=new is(ds,ls+"leave",_i,Ur,ns),qr.target=ss,qr.relatedTarget=cs,ds=null,Wc(ns)===es&&(is=new is(os,ls+"enter",rs,Ur,ns),is.target=cs,is.relatedTarget=ss,ds=is),ss=ds,_i&&rs)t:{for(is=_i,os=rs,ls=0,cs=is;cs;cs=vf(cs))ls++;for(cs=0,ds=os;ds;ds=vf(ds))cs++;for(;0<ls-cs;)is=vf(is),ls--;for(;0<cs-ls;)os=vf(os),cs--;for(;ls--;){if(is===os||os!==null&&is===os.alternate)break t;is=vf(is),os=vf(os)}is=null}else is=null;_i!==null&&wf(Xr,qr,_i,is,!1),rs!==null&&ss!==null&&wf(Xr,ss,rs,is,!0)}}e:{if(qr=es?ue$1(es):window,_i=qr.nodeName&&qr.nodeName.toLowerCase(),_i==="select"||_i==="input"&&qr.type==="file")var fs=ve$2;else if(me$2(qr))if(we$2)fs=Fe$2;else{fs=De$2;var ms=Ce$2}else(_i=qr.nodeName)&&_i.toLowerCase()==="input"&&(qr.type==="checkbox"||qr.type==="radio")&&(fs=Ee$2);if(fs&&(fs=fs(Nr,es))){ne$2(Xr,fs,Ur,ns);break e}ms&&ms(Nr,qr,es),Nr==="focusout"&&(ms=qr._wrapperState)&&ms.controlled&&qr.type==="number"&&cb(qr,"number",qr.value)}switch(ms=es?ue$1(es):window,Nr){case"focusin":(me$2(ms)||ms.contentEditable==="true")&&(Qe$2=ms,Re$2=es,Se$2=null);break;case"focusout":Se$2=Re$2=Qe$2=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue$1(Xr,Ur,ns);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$1(Xr,Ur,ns)}var ps;if(ae$2)e:{switch(Nr){case"compositionstart":var ys="onCompositionStart";break e;case"compositionend":ys="onCompositionEnd";break e;case"compositionupdate":ys="onCompositionUpdate";break e}ys=void 0}else ie$2?ge$2(Nr,Ur)&&(ys="onCompositionEnd"):Nr==="keydown"&&Ur.keyCode===229&&(ys="onCompositionStart");ys&&(de$2&&Ur.locale!=="ko"&&(ie$2||ys!=="onCompositionStart"?ys==="onCompositionEnd"&&ie$2&&(ps=nd()):(kd=ns,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),ms=oe$2(es,ys),0<ms.length&&(ys=new Ld(ys,Nr,null,Ur,ns),Xr.push({event:ys,listeners:ms}),ps?ys.data=ps:(ps=he$2(Ur),ps!==null&&(ys.data=ps)))),(ps=ce$2?je$2(Nr,Ur):ke$2(Nr,Ur))&&(es=oe$2(es,"onBeforeInput"),0<es.length&&(ns=new Ld("onBeforeInput","beforeinput",null,Ur,ns),Xr.push({event:ns,listeners:es}),ns.data=ps))}se$2(Xr,_r)})}function tf(Nr,_r,Ur){return{instance:Nr,listener:_r,currentTarget:Ur}}function oe$2(Nr,_r){for(var Ur=_r+"Capture",jr=[];Nr!==null;){var Gr=Nr,Wr=Gr.stateNode;Gr.tag===5&&Wr!==null&&(Gr=Wr,Wr=Kb(Nr,Ur),Wr!=null&&jr.unshift(tf(Nr,Wr,Gr)),Wr=Kb(Nr,_r),Wr!=null&&jr.push(tf(Nr,Wr,Gr))),Nr=Nr.return}return jr}function vf(Nr){if(Nr===null)return null;do Nr=Nr.return;while(Nr&&Nr.tag!==5);return Nr||null}function wf(Nr,_r,Ur,jr,Gr){for(var Wr=_r._reactName,Zr=[];Ur!==null&&Ur!==jr;){var Yr=Ur,ts=Yr.alternate,es=Yr.stateNode;if(ts!==null&&ts===jr)break;Yr.tag===5&&es!==null&&(Yr=es,Gr?(ts=Kb(Ur,Wr),ts!=null&&Zr.unshift(tf(Ur,ts,Yr))):Gr||(ts=Kb(Ur,Wr),ts!=null&&Zr.push(tf(Ur,ts,Yr)))),Ur=Ur.return}Zr.length!==0&&Nr.push({event:_r,listeners:Zr})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(Nr){return(typeof Nr=="string"?Nr:""+Nr).replace(xf,`
`).replace(yf,"")}function Af(Nr,_r,Ur){if(_r=zf(_r),zf(Nr)!==_r&&Ur)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(Nr,_r){return Nr==="textarea"||Nr==="noscript"||typeof _r.children=="string"||typeof _r.children=="number"||typeof _r.dangerouslySetInnerHTML=="object"&&_r.dangerouslySetInnerHTML!==null&&_r.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(Nr){return Hf.resolve(null).then(Nr).catch(If)}:Ff;function If(Nr){setTimeout(function(){throw Nr})}function Kf(Nr,_r){var Ur=_r,jr=0;do{var Gr=Ur.nextSibling;if(Nr.removeChild(Ur),Gr&&Gr.nodeType===8)if(Ur=Gr.data,Ur==="/$"){if(jr===0){Nr.removeChild(Gr),bd(_r);return}jr--}else Ur!=="$"&&Ur!=="$?"&&Ur!=="$!"||jr++;Ur=Gr}while(Ur);bd(_r)}function Lf(Nr){for(;Nr!=null;Nr=Nr.nextSibling){var _r=Nr.nodeType;if(_r===1||_r===3)break;if(_r===8){if(_r=Nr.data,_r==="$"||_r==="$!"||_r==="$?")break;if(_r==="/$")return null}}return Nr}function Mf(Nr){Nr=Nr.previousSibling;for(var _r=0;Nr;){if(Nr.nodeType===8){var Ur=Nr.data;if(Ur==="$"||Ur==="$!"||Ur==="$?"){if(_r===0)return Nr;_r--}else Ur==="/$"&&_r++}Nr=Nr.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(Nr){var _r=Nr[Of];if(_r)return _r;for(var Ur=Nr.parentNode;Ur;){if(_r=Ur[uf]||Ur[Of]){if(Ur=_r.alternate,_r.child!==null||Ur!==null&&Ur.child!==null)for(Nr=Mf(Nr);Nr!==null;){if(Ur=Nr[Of])return Ur;Nr=Mf(Nr)}return _r}Nr=Ur,Ur=Nr.parentNode}return null}function Cb(Nr){return Nr=Nr[Of]||Nr[uf],!Nr||Nr.tag!==5&&Nr.tag!==6&&Nr.tag!==13&&Nr.tag!==3?null:Nr}function ue$1(Nr){if(Nr.tag===5||Nr.tag===6)return Nr.stateNode;throw Error(p$3(33))}function Db(Nr){return Nr[Pf]||null}var Sf=[],Tf=-1;function Uf(Nr){return{current:Nr}}function E$3(Nr){0>Tf||(Nr.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$4(Nr,_r){Tf++,Sf[Tf]=Nr.current,Nr.current=_r}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(Nr,_r){var Ur=Nr.type.contextTypes;if(!Ur)return Vf;var jr=Nr.stateNode;if(jr&&jr.__reactInternalMemoizedUnmaskedChildContext===_r)return jr.__reactInternalMemoizedMaskedChildContext;var Gr={},Wr;for(Wr in Ur)Gr[Wr]=_r[Wr];return jr&&(Nr=Nr.stateNode,Nr.__reactInternalMemoizedUnmaskedChildContext=_r,Nr.__reactInternalMemoizedMaskedChildContext=Gr),Gr}function Zf(Nr){return Nr=Nr.childContextTypes,Nr!=null}function $f(){E$3(Wf),E$3(H$3)}function ag(Nr,_r,Ur){if(H$3.current!==Vf)throw Error(p$3(168));G$4(H$3,_r),G$4(Wf,Ur)}function bg(Nr,_r,Ur){var jr=Nr.stateNode;if(_r=_r.childContextTypes,typeof jr.getChildContext!="function")return Ur;jr=jr.getChildContext();for(var Gr in jr)if(!(Gr in _r))throw Error(p$3(108,Ra(Nr)||"Unknown",Gr));return A$3({},Ur,jr)}function cg(Nr){return Nr=(Nr=Nr.stateNode)&&Nr.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$4(H$3,Nr),G$4(Wf,Wf.current),!0}function dg(Nr,_r,Ur){var jr=Nr.stateNode;if(!jr)throw Error(p$3(169));Ur?(Nr=bg(Nr,_r,Xf),jr.__reactInternalMemoizedMergedChildContext=Nr,E$3(Wf),E$3(H$3),G$4(H$3,Nr)):E$3(Wf),G$4(Wf,Ur)}var eg=null,fg=!1,gg=!1;function hg(Nr){eg===null?eg=[Nr]:eg.push(Nr)}function ig(Nr){fg=!0,hg(Nr)}function jg(){if(!gg&&eg!==null){gg=!0;var Nr=0,_r=C$2;try{var Ur=eg;for(C$2=1;Nr<Ur.length;Nr++){var jr=Ur[Nr];do jr=jr(!0);while(jr!==null)}eg=null,fg=!1}catch(Gr){throw eg!==null&&(eg=eg.slice(Nr+1)),ac(fc,jg),Gr}finally{C$2=_r,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(Nr,_r){kg[lg++]=ng,kg[lg++]=mg,mg=Nr,ng=_r}function ug(Nr,_r,Ur){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=Nr;var jr=rg;Nr=sg;var Gr=32-oc(jr)-1;jr&=~(1<<Gr),Ur+=1;var Wr=32-oc(_r)+Gr;if(30<Wr){var Zr=Gr-Gr%5;Wr=(jr&(1<<Zr)-1).toString(32),jr>>=Zr,Gr-=Zr,rg=1<<32-oc(_r)+Gr|Ur<<Gr|jr,sg=Wr+Nr}else rg=1<<Wr|Ur<<Gr|jr,sg=Nr}function vg(Nr){Nr.return!==null&&(tg(Nr,1),ug(Nr,1,0))}function wg(Nr){for(;Nr===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;Nr===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(Nr,_r){var Ur=Bg(5,null,null,0);Ur.elementType="DELETED",Ur.stateNode=_r,Ur.return=Nr,_r=Nr.deletions,_r===null?(Nr.deletions=[Ur],Nr.flags|=16):_r.push(Ur)}function Cg(Nr,_r){switch(Nr.tag){case 5:var Ur=Nr.type;return _r=_r.nodeType!==1||Ur.toLowerCase()!==_r.nodeName.toLowerCase()?null:_r,_r!==null?(Nr.stateNode=_r,xg=Nr,yg=Lf(_r.firstChild),!0):!1;case 6:return _r=Nr.pendingProps===""||_r.nodeType!==3?null:_r,_r!==null?(Nr.stateNode=_r,xg=Nr,yg=null,!0):!1;case 13:return _r=_r.nodeType!==8?null:_r,_r!==null?(Ur=qg!==null?{id:rg,overflow:sg}:null,Nr.memoizedState={dehydrated:_r,treeContext:Ur,retryLane:1073741824},Ur=Bg(18,null,null,0),Ur.stateNode=_r,Ur.return=Nr,Nr.child=Ur,xg=Nr,yg=null,!0):!1;default:return!1}}function Dg(Nr){return(Nr.mode&1)!==0&&(Nr.flags&128)===0}function Eg(Nr){if(I$4){var _r=yg;if(_r){var Ur=_r;if(!Cg(Nr,_r)){if(Dg(Nr))throw Error(p$3(418));_r=Lf(Ur.nextSibling);var jr=xg;_r&&Cg(Nr,_r)?Ag(jr,Ur):(Nr.flags=Nr.flags&-4097|2,I$4=!1,xg=Nr)}}else{if(Dg(Nr))throw Error(p$3(418));Nr.flags=Nr.flags&-4097|2,I$4=!1,xg=Nr}}}function Fg(Nr){for(Nr=Nr.return;Nr!==null&&Nr.tag!==5&&Nr.tag!==3&&Nr.tag!==13;)Nr=Nr.return;xg=Nr}function Gg(Nr){if(Nr!==xg)return!1;if(!I$4)return Fg(Nr),I$4=!0,!1;var _r;if((_r=Nr.tag!==3)&&!(_r=Nr.tag!==5)&&(_r=Nr.type,_r=_r!=="head"&&_r!=="body"&&!Ef(Nr.type,Nr.memoizedProps)),_r&&(_r=yg)){if(Dg(Nr))throw Hg(),Error(p$3(418));for(;_r;)Ag(Nr,_r),_r=Lf(_r.nextSibling)}if(Fg(Nr),Nr.tag===13){if(Nr=Nr.memoizedState,Nr=Nr!==null?Nr.dehydrated:null,!Nr)throw Error(p$3(317));e:{for(Nr=Nr.nextSibling,_r=0;Nr;){if(Nr.nodeType===8){var Ur=Nr.data;if(Ur==="/$"){if(_r===0){yg=Lf(Nr.nextSibling);break e}_r--}else Ur!=="$"&&Ur!=="$!"&&Ur!=="$?"||_r++}Nr=Nr.nextSibling}yg=null}}else yg=xg?Lf(Nr.stateNode.nextSibling):null;return!0}function Hg(){for(var Nr=yg;Nr;)Nr=Lf(Nr.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(Nr){zg===null?zg=[Nr]:zg.push(Nr)}var Kg=ua.ReactCurrentBatchConfig;function Lg(Nr,_r){if(Nr&&Nr.defaultProps){_r=A$3({},_r),Nr=Nr.defaultProps;for(var Ur in Nr)_r[Ur]===void 0&&(_r[Ur]=Nr[Ur]);return _r}return _r}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(Nr){var _r=Mg.current;E$3(Mg),Nr._currentValue=_r}function Sg(Nr,_r,Ur){for(;Nr!==null;){var jr=Nr.alternate;if((Nr.childLanes&_r)!==_r?(Nr.childLanes|=_r,jr!==null&&(jr.childLanes|=_r)):jr!==null&&(jr.childLanes&_r)!==_r&&(jr.childLanes|=_r),Nr===Ur)break;Nr=Nr.return}}function Tg(Nr,_r){Ng=Nr,Pg=Og=null,Nr=Nr.dependencies,Nr!==null&&Nr.firstContext!==null&&(Nr.lanes&_r&&(Ug=!0),Nr.firstContext=null)}function Vg(Nr){var _r=Nr._currentValue;if(Pg!==Nr)if(Nr={context:Nr,memoizedValue:_r,next:null},Og===null){if(Ng===null)throw Error(p$3(308));Og=Nr,Ng.dependencies={lanes:0,firstContext:Nr}}else Og=Og.next=Nr;return _r}var Wg=null;function Xg(Nr){Wg===null?Wg=[Nr]:Wg.push(Nr)}function Yg(Nr,_r,Ur,jr){var Gr=_r.interleaved;return Gr===null?(Ur.next=Ur,Xg(_r)):(Ur.next=Gr.next,Gr.next=Ur),_r.interleaved=Ur,Zg(Nr,jr)}function Zg(Nr,_r){Nr.lanes|=_r;var Ur=Nr.alternate;for(Ur!==null&&(Ur.lanes|=_r),Ur=Nr,Nr=Nr.return;Nr!==null;)Nr.childLanes|=_r,Ur=Nr.alternate,Ur!==null&&(Ur.childLanes|=_r),Ur=Nr,Nr=Nr.return;return Ur.tag===3?Ur.stateNode:null}var $g=!1;function ah(Nr){Nr.updateQueue={baseState:Nr.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(Nr,_r){Nr=Nr.updateQueue,_r.updateQueue===Nr&&(_r.updateQueue={baseState:Nr.baseState,firstBaseUpdate:Nr.firstBaseUpdate,lastBaseUpdate:Nr.lastBaseUpdate,shared:Nr.shared,effects:Nr.effects})}function ch(Nr,_r){return{eventTime:Nr,lane:_r,tag:0,payload:null,callback:null,next:null}}function dh(Nr,_r,Ur){var jr=Nr.updateQueue;if(jr===null)return null;if(jr=jr.shared,K$4&2){var Gr=jr.pending;return Gr===null?_r.next=_r:(_r.next=Gr.next,Gr.next=_r),jr.pending=_r,Zg(Nr,Ur)}return Gr=jr.interleaved,Gr===null?(_r.next=_r,Xg(jr)):(_r.next=Gr.next,Gr.next=_r),jr.interleaved=_r,Zg(Nr,Ur)}function eh(Nr,_r,Ur){if(_r=_r.updateQueue,_r!==null&&(_r=_r.shared,(Ur&4194240)!==0)){var jr=_r.lanes;jr&=Nr.pendingLanes,Ur|=jr,_r.lanes=Ur,Cc(Nr,Ur)}}function fh(Nr,_r){var Ur=Nr.updateQueue,jr=Nr.alternate;if(jr!==null&&(jr=jr.updateQueue,Ur===jr)){var Gr=null,Wr=null;if(Ur=Ur.firstBaseUpdate,Ur!==null){do{var Zr={eventTime:Ur.eventTime,lane:Ur.lane,tag:Ur.tag,payload:Ur.payload,callback:Ur.callback,next:null};Wr===null?Gr=Wr=Zr:Wr=Wr.next=Zr,Ur=Ur.next}while(Ur!==null);Wr===null?Gr=Wr=_r:Wr=Wr.next=_r}else Gr=Wr=_r;Ur={baseState:jr.baseState,firstBaseUpdate:Gr,lastBaseUpdate:Wr,shared:jr.shared,effects:jr.effects},Nr.updateQueue=Ur;return}Nr=Ur.lastBaseUpdate,Nr===null?Ur.firstBaseUpdate=_r:Nr.next=_r,Ur.lastBaseUpdate=_r}function gh(Nr,_r,Ur,jr){var Gr=Nr.updateQueue;$g=!1;var Wr=Gr.firstBaseUpdate,Zr=Gr.lastBaseUpdate,Yr=Gr.shared.pending;if(Yr!==null){Gr.shared.pending=null;var ts=Yr,es=ts.next;ts.next=null,Zr===null?Wr=es:Zr.next=es,Zr=ts;var ns=Nr.alternate;ns!==null&&(ns=ns.updateQueue,Yr=ns.lastBaseUpdate,Yr!==Zr&&(Yr===null?ns.firstBaseUpdate=es:Yr.next=es,ns.lastBaseUpdate=ts))}if(Wr!==null){var Xr=Gr.baseState;Zr=0,ns=es=ts=null,Yr=Wr;do{var qr=Yr.lane,_i=Yr.eventTime;if((jr&qr)===qr){ns!==null&&(ns=ns.next={eventTime:_i,lane:0,tag:Yr.tag,payload:Yr.payload,callback:Yr.callback,next:null});e:{var rs=Nr,is=Yr;switch(qr=_r,_i=Ur,is.tag){case 1:if(rs=is.payload,typeof rs=="function"){Xr=rs.call(_i,Xr,qr);break e}Xr=rs;break e;case 3:rs.flags=rs.flags&-65537|128;case 0:if(rs=is.payload,qr=typeof rs=="function"?rs.call(_i,Xr,qr):rs,qr==null)break e;Xr=A$3({},Xr,qr);break e;case 2:$g=!0}}Yr.callback!==null&&Yr.lane!==0&&(Nr.flags|=64,qr=Gr.effects,qr===null?Gr.effects=[Yr]:qr.push(Yr))}else _i={eventTime:_i,lane:qr,tag:Yr.tag,payload:Yr.payload,callback:Yr.callback,next:null},ns===null?(es=ns=_i,ts=Xr):ns=ns.next=_i,Zr|=qr;if(Yr=Yr.next,Yr===null){if(Yr=Gr.shared.pending,Yr===null)break;qr=Yr,Yr=qr.next,qr.next=null,Gr.lastBaseUpdate=qr,Gr.shared.pending=null}}while(1);if(ns===null&&(ts=Xr),Gr.baseState=ts,Gr.firstBaseUpdate=es,Gr.lastBaseUpdate=ns,_r=Gr.shared.interleaved,_r!==null){Gr=_r;do Zr|=Gr.lane,Gr=Gr.next;while(Gr!==_r)}else Wr===null&&(Gr.shared.lanes=0);hh|=Zr,Nr.lanes=Zr,Nr.memoizedState=Xr}}function ih(Nr,_r,Ur){if(Nr=_r.effects,_r.effects=null,Nr!==null)for(_r=0;_r<Nr.length;_r++){var jr=Nr[_r],Gr=jr.callback;if(Gr!==null){if(jr.callback=null,jr=Ur,typeof Gr!="function")throw Error(p$3(191,Gr));Gr.call(jr)}}}var jh=new aa.Component().refs;function kh(Nr,_r,Ur,jr){_r=Nr.memoizedState,Ur=Ur(jr,_r),Ur=Ur==null?_r:A$3({},_r,Ur),Nr.memoizedState=Ur,Nr.lanes===0&&(Nr.updateQueue.baseState=Ur)}var nh={isMounted:function(Nr){return(Nr=Nr._reactInternals)?Vb(Nr)===Nr:!1},enqueueSetState:function(Nr,_r,Ur){Nr=Nr._reactInternals;var jr=L$2(),Gr=lh(Nr),Wr=ch(jr,Gr);Wr.payload=_r,Ur!=null&&(Wr.callback=Ur),_r=dh(Nr,Wr,Gr),_r!==null&&(mh(_r,Nr,Gr,jr),eh(_r,Nr,Gr))},enqueueReplaceState:function(Nr,_r,Ur){Nr=Nr._reactInternals;var jr=L$2(),Gr=lh(Nr),Wr=ch(jr,Gr);Wr.tag=1,Wr.payload=_r,Ur!=null&&(Wr.callback=Ur),_r=dh(Nr,Wr,Gr),_r!==null&&(mh(_r,Nr,Gr,jr),eh(_r,Nr,Gr))},enqueueForceUpdate:function(Nr,_r){Nr=Nr._reactInternals;var Ur=L$2(),jr=lh(Nr),Gr=ch(Ur,jr);Gr.tag=2,_r!=null&&(Gr.callback=_r),_r=dh(Nr,Gr,jr),_r!==null&&(mh(_r,Nr,jr,Ur),eh(_r,Nr,jr))}};function oh(Nr,_r,Ur,jr,Gr,Wr,Zr){return Nr=Nr.stateNode,typeof Nr.shouldComponentUpdate=="function"?Nr.shouldComponentUpdate(jr,Wr,Zr):_r.prototype&&_r.prototype.isPureReactComponent?!Ie$2(Ur,jr)||!Ie$2(Gr,Wr):!0}function ph(Nr,_r,Ur){var jr=!1,Gr=Vf,Wr=_r.contextType;return typeof Wr=="object"&&Wr!==null?Wr=Vg(Wr):(Gr=Zf(_r)?Xf:H$3.current,jr=_r.contextTypes,Wr=(jr=jr!=null)?Yf(Nr,Gr):Vf),_r=new _r(Ur,Wr),Nr.memoizedState=_r.state!==null&&_r.state!==void 0?_r.state:null,_r.updater=nh,Nr.stateNode=_r,_r._reactInternals=Nr,jr&&(Nr=Nr.stateNode,Nr.__reactInternalMemoizedUnmaskedChildContext=Gr,Nr.__reactInternalMemoizedMaskedChildContext=Wr),_r}function qh(Nr,_r,Ur,jr){Nr=_r.state,typeof _r.componentWillReceiveProps=="function"&&_r.componentWillReceiveProps(Ur,jr),typeof _r.UNSAFE_componentWillReceiveProps=="function"&&_r.UNSAFE_componentWillReceiveProps(Ur,jr),_r.state!==Nr&&nh.enqueueReplaceState(_r,_r.state,null)}function rh(Nr,_r,Ur,jr){var Gr=Nr.stateNode;Gr.props=Ur,Gr.state=Nr.memoizedState,Gr.refs=jh,ah(Nr);var Wr=_r.contextType;typeof Wr=="object"&&Wr!==null?Gr.context=Vg(Wr):(Wr=Zf(_r)?Xf:H$3.current,Gr.context=Yf(Nr,Wr)),Gr.state=Nr.memoizedState,Wr=_r.getDerivedStateFromProps,typeof Wr=="function"&&(kh(Nr,_r,Wr,Ur),Gr.state=Nr.memoizedState),typeof _r.getDerivedStateFromProps=="function"||typeof Gr.getSnapshotBeforeUpdate=="function"||typeof Gr.UNSAFE_componentWillMount!="function"&&typeof Gr.componentWillMount!="function"||(_r=Gr.state,typeof Gr.componentWillMount=="function"&&Gr.componentWillMount(),typeof Gr.UNSAFE_componentWillMount=="function"&&Gr.UNSAFE_componentWillMount(),_r!==Gr.state&&nh.enqueueReplaceState(Gr,Gr.state,null),gh(Nr,Ur,Gr,jr),Gr.state=Nr.memoizedState),typeof Gr.componentDidMount=="function"&&(Nr.flags|=4194308)}function sh(Nr,_r,Ur){if(Nr=Ur.ref,Nr!==null&&typeof Nr!="function"&&typeof Nr!="object"){if(Ur._owner){if(Ur=Ur._owner,Ur){if(Ur.tag!==1)throw Error(p$3(309));var jr=Ur.stateNode}if(!jr)throw Error(p$3(147,Nr));var Gr=jr,Wr=""+Nr;return _r!==null&&_r.ref!==null&&typeof _r.ref=="function"&&_r.ref._stringRef===Wr?_r.ref:(_r=function(Zr){var Yr=Gr.refs;Yr===jh&&(Yr=Gr.refs={}),Zr===null?delete Yr[Wr]:Yr[Wr]=Zr},_r._stringRef=Wr,_r)}if(typeof Nr!="string")throw Error(p$3(284));if(!Ur._owner)throw Error(p$3(290,Nr))}return Nr}function th(Nr,_r){throw Nr=Object.prototype.toString.call(_r),Error(p$3(31,Nr==="[object Object]"?"object with keys {"+Object.keys(_r).join(", ")+"}":Nr))}function uh(Nr){var _r=Nr._init;return _r(Nr._payload)}function vh(Nr){function _r(os,ls){if(Nr){var cs=os.deletions;cs===null?(os.deletions=[ls],os.flags|=16):cs.push(ls)}}function Ur(os,ls){if(!Nr)return null;for(;ls!==null;)_r(os,ls),ls=ls.sibling;return null}function jr(os,ls){for(os=new Map;ls!==null;)ls.key!==null?os.set(ls.key,ls):os.set(ls.index,ls),ls=ls.sibling;return os}function Gr(os,ls){return os=wh(os,ls),os.index=0,os.sibling=null,os}function Wr(os,ls,cs){return os.index=cs,Nr?(cs=os.alternate,cs!==null?(cs=cs.index,cs<ls?(os.flags|=2,ls):cs):(os.flags|=2,ls)):(os.flags|=1048576,ls)}function Zr(os){return Nr&&os.alternate===null&&(os.flags|=2),os}function Yr(os,ls,cs,ds){return ls===null||ls.tag!==6?(ls=xh(cs,os.mode,ds),ls.return=os,ls):(ls=Gr(ls,cs),ls.return=os,ls)}function ts(os,ls,cs,ds){var fs=cs.type;return fs===ya?ns(os,ls,cs.props.children,ds,cs.key):ls!==null&&(ls.elementType===fs||typeof fs=="object"&&fs!==null&&fs.$$typeof===Ha&&uh(fs)===ls.type)?(ds=Gr(ls,cs.props),ds.ref=sh(os,ls,cs),ds.return=os,ds):(ds=yh(cs.type,cs.key,cs.props,null,os.mode,ds),ds.ref=sh(os,ls,cs),ds.return=os,ds)}function es(os,ls,cs,ds){return ls===null||ls.tag!==4||ls.stateNode.containerInfo!==cs.containerInfo||ls.stateNode.implementation!==cs.implementation?(ls=zh(cs,os.mode,ds),ls.return=os,ls):(ls=Gr(ls,cs.children||[]),ls.return=os,ls)}function ns(os,ls,cs,ds,fs){return ls===null||ls.tag!==7?(ls=Ah(cs,os.mode,ds,fs),ls.return=os,ls):(ls=Gr(ls,cs),ls.return=os,ls)}function Xr(os,ls,cs){if(typeof ls=="string"&&ls!==""||typeof ls=="number")return ls=xh(""+ls,os.mode,cs),ls.return=os,ls;if(typeof ls=="object"&&ls!==null){switch(ls.$$typeof){case va:return cs=yh(ls.type,ls.key,ls.props,null,os.mode,cs),cs.ref=sh(os,null,ls),cs.return=os,cs;case wa:return ls=zh(ls,os.mode,cs),ls.return=os,ls;case Ha:var ds=ls._init;return Xr(os,ds(ls._payload),cs)}if(eb(ls)||Ka(ls))return ls=Ah(ls,os.mode,cs,null),ls.return=os,ls;th(os,ls)}return null}function qr(os,ls,cs,ds){var fs=ls!==null?ls.key:null;if(typeof cs=="string"&&cs!==""||typeof cs=="number")return fs!==null?null:Yr(os,ls,""+cs,ds);if(typeof cs=="object"&&cs!==null){switch(cs.$$typeof){case va:return cs.key===fs?ts(os,ls,cs,ds):null;case wa:return cs.key===fs?es(os,ls,cs,ds):null;case Ha:return fs=cs._init,qr(os,ls,fs(cs._payload),ds)}if(eb(cs)||Ka(cs))return fs!==null?null:ns(os,ls,cs,ds,null);th(os,cs)}return null}function _i(os,ls,cs,ds,fs){if(typeof ds=="string"&&ds!==""||typeof ds=="number")return os=os.get(cs)||null,Yr(ls,os,""+ds,fs);if(typeof ds=="object"&&ds!==null){switch(ds.$$typeof){case va:return os=os.get(ds.key===null?cs:ds.key)||null,ts(ls,os,ds,fs);case wa:return os=os.get(ds.key===null?cs:ds.key)||null,es(ls,os,ds,fs);case Ha:var ms=ds._init;return _i(os,ls,cs,ms(ds._payload),fs)}if(eb(ds)||Ka(ds))return os=os.get(cs)||null,ns(ls,os,ds,fs,null);th(ls,ds)}return null}function rs(os,ls,cs,ds){for(var fs=null,ms=null,ps=ls,ys=ls=0,ws=null;ps!==null&&ys<cs.length;ys++){ps.index>ys?(ws=ps,ps=null):ws=ps.sibling;var xs=qr(os,ps,cs[ys],ds);if(xs===null){ps===null&&(ps=ws);break}Nr&&ps&&xs.alternate===null&&_r(os,ps),ls=Wr(xs,ls,ys),ms===null?fs=xs:ms.sibling=xs,ms=xs,ps=ws}if(ys===cs.length)return Ur(os,ps),I$4&&tg(os,ys),fs;if(ps===null){for(;ys<cs.length;ys++)ps=Xr(os,cs[ys],ds),ps!==null&&(ls=Wr(ps,ls,ys),ms===null?fs=ps:ms.sibling=ps,ms=ps);return I$4&&tg(os,ys),fs}for(ps=jr(os,ps);ys<cs.length;ys++)ws=_i(ps,os,ys,cs[ys],ds),ws!==null&&(Nr&&ws.alternate!==null&&ps.delete(ws.key===null?ys:ws.key),ls=Wr(ws,ls,ys),ms===null?fs=ws:ms.sibling=ws,ms=ws);return Nr&&ps.forEach(function(Es){return _r(os,Es)}),I$4&&tg(os,ys),fs}function is(os,ls,cs,ds){var fs=Ka(cs);if(typeof fs!="function")throw Error(p$3(150));if(cs=fs.call(cs),cs==null)throw Error(p$3(151));for(var ms=fs=null,ps=ls,ys=ls=0,ws=null,xs=cs.next();ps!==null&&!xs.done;ys++,xs=cs.next()){ps.index>ys?(ws=ps,ps=null):ws=ps.sibling;var Es=qr(os,ps,xs.value,ds);if(Es===null){ps===null&&(ps=ws);break}Nr&&ps&&Es.alternate===null&&_r(os,ps),ls=Wr(Es,ls,ys),ms===null?fs=Es:ms.sibling=Es,ms=Es,ps=ws}if(xs.done)return Ur(os,ps),I$4&&tg(os,ys),fs;if(ps===null){for(;!xs.done;ys++,xs=cs.next())xs=Xr(os,xs.value,ds),xs!==null&&(ls=Wr(xs,ls,ys),ms===null?fs=xs:ms.sibling=xs,ms=xs);return I$4&&tg(os,ys),fs}for(ps=jr(os,ps);!xs.done;ys++,xs=cs.next())xs=_i(ps,os,ys,xs.value,ds),xs!==null&&(Nr&&xs.alternate!==null&&ps.delete(xs.key===null?ys:xs.key),ls=Wr(xs,ls,ys),ms===null?fs=xs:ms.sibling=xs,ms=xs);return Nr&&ps.forEach(function(Rs){return _r(os,Rs)}),I$4&&tg(os,ys),fs}function ss(os,ls,cs,ds){if(typeof cs=="object"&&cs!==null&&cs.type===ya&&cs.key===null&&(cs=cs.props.children),typeof cs=="object"&&cs!==null){switch(cs.$$typeof){case va:e:{for(var fs=cs.key,ms=ls;ms!==null;){if(ms.key===fs){if(fs=cs.type,fs===ya){if(ms.tag===7){Ur(os,ms.sibling),ls=Gr(ms,cs.props.children),ls.return=os,os=ls;break e}}else if(ms.elementType===fs||typeof fs=="object"&&fs!==null&&fs.$$typeof===Ha&&uh(fs)===ms.type){Ur(os,ms.sibling),ls=Gr(ms,cs.props),ls.ref=sh(os,ms,cs),ls.return=os,os=ls;break e}Ur(os,ms);break}else _r(os,ms);ms=ms.sibling}cs.type===ya?(ls=Ah(cs.props.children,os.mode,ds,cs.key),ls.return=os,os=ls):(ds=yh(cs.type,cs.key,cs.props,null,os.mode,ds),ds.ref=sh(os,ls,cs),ds.return=os,os=ds)}return Zr(os);case wa:e:{for(ms=cs.key;ls!==null;){if(ls.key===ms)if(ls.tag===4&&ls.stateNode.containerInfo===cs.containerInfo&&ls.stateNode.implementation===cs.implementation){Ur(os,ls.sibling),ls=Gr(ls,cs.children||[]),ls.return=os,os=ls;break e}else{Ur(os,ls);break}else _r(os,ls);ls=ls.sibling}ls=zh(cs,os.mode,ds),ls.return=os,os=ls}return Zr(os);case Ha:return ms=cs._init,ss(os,ls,ms(cs._payload),ds)}if(eb(cs))return rs(os,ls,cs,ds);if(Ka(cs))return is(os,ls,cs,ds);th(os,cs)}return typeof cs=="string"&&cs!==""||typeof cs=="number"?(cs=""+cs,ls!==null&&ls.tag===6?(Ur(os,ls.sibling),ls=Gr(ls,cs),ls.return=os,os=ls):(Ur(os,ls),ls=xh(cs,os.mode,ds),ls.return=os,os=ls),Zr(os)):Ur(os,ls)}return ss}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(Nr){if(Nr===Dh)throw Error(p$3(174));return Nr}function Ih(Nr,_r){switch(G$4(Gh,_r),G$4(Fh,Nr),G$4(Eh,Dh),Nr=_r.nodeType,Nr){case 9:case 11:_r=(_r=_r.documentElement)?_r.namespaceURI:lb(null,"");break;default:Nr=Nr===8?_r.parentNode:_r,_r=Nr.namespaceURI||null,Nr=Nr.tagName,_r=lb(_r,Nr)}E$3(Eh),G$4(Eh,_r)}function Jh(){E$3(Eh),E$3(Fh),E$3(Gh)}function Kh(Nr){Hh(Gh.current);var _r=Hh(Eh.current),Ur=lb(_r,Nr.type);_r!==Ur&&(G$4(Fh,Nr),G$4(Eh,Ur))}function Lh(Nr){Fh.current===Nr&&(E$3(Eh),E$3(Fh))}var M$3=Uf(0);function Mh(Nr){for(var _r=Nr;_r!==null;){if(_r.tag===13){var Ur=_r.memoizedState;if(Ur!==null&&(Ur=Ur.dehydrated,Ur===null||Ur.data==="$?"||Ur.data==="$!"))return _r}else if(_r.tag===19&&_r.memoizedProps.revealOrder!==void 0){if(_r.flags&128)return _r}else if(_r.child!==null){_r.child.return=_r,_r=_r.child;continue}if(_r===Nr)break;for(;_r.sibling===null;){if(_r.return===null||_r.return===Nr)return null;_r=_r.return}_r.sibling.return=_r.return,_r=_r.sibling}return null}var Nh=[];function Oh(){for(var Nr=0;Nr<Nh.length;Nr++)Nh[Nr]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$4=null,O$4=null,P$4=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$4(){throw Error(p$3(321))}function Wh(Nr,_r){if(_r===null)return!1;for(var Ur=0;Ur<_r.length&&Ur<Nr.length;Ur++)if(!He$2(Nr[Ur],_r[Ur]))return!1;return!0}function Xh(Nr,_r,Ur,jr,Gr,Wr){if(Rh=Wr,N$4=_r,_r.memoizedState=null,_r.updateQueue=null,_r.lanes=0,Ph.current=Nr===null||Nr.memoizedState===null?Yh:Zh,Nr=Ur(jr,Gr),Th){Wr=0;do{if(Th=!1,Uh=0,25<=Wr)throw Error(p$3(301));Wr+=1,P$4=O$4=null,_r.updateQueue=null,Ph.current=$h,Nr=Ur(jr,Gr)}while(Th)}if(Ph.current=ai,_r=O$4!==null&&O$4.next!==null,Rh=0,P$4=O$4=N$4=null,Sh=!1,_r)throw Error(p$3(300));return Nr}function bi(){var Nr=Uh!==0;return Uh=0,Nr}function ci(){var Nr={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$4===null?N$4.memoizedState=P$4=Nr:P$4=P$4.next=Nr,P$4}function di(){if(O$4===null){var Nr=N$4.alternate;Nr=Nr!==null?Nr.memoizedState:null}else Nr=O$4.next;var _r=P$4===null?N$4.memoizedState:P$4.next;if(_r!==null)P$4=_r,O$4=Nr;else{if(Nr===null)throw Error(p$3(310));O$4=Nr,Nr={memoizedState:O$4.memoizedState,baseState:O$4.baseState,baseQueue:O$4.baseQueue,queue:O$4.queue,next:null},P$4===null?N$4.memoizedState=P$4=Nr:P$4=P$4.next=Nr}return P$4}function ei(Nr,_r){return typeof _r=="function"?_r(Nr):_r}function fi(Nr){var _r=di(),Ur=_r.queue;if(Ur===null)throw Error(p$3(311));Ur.lastRenderedReducer=Nr;var jr=O$4,Gr=jr.baseQueue,Wr=Ur.pending;if(Wr!==null){if(Gr!==null){var Zr=Gr.next;Gr.next=Wr.next,Wr.next=Zr}jr.baseQueue=Gr=Wr,Ur.pending=null}if(Gr!==null){Wr=Gr.next,jr=jr.baseState;var Yr=Zr=null,ts=null,es=Wr;do{var ns=es.lane;if((Rh&ns)===ns)ts!==null&&(ts=ts.next={lane:0,action:es.action,hasEagerState:es.hasEagerState,eagerState:es.eagerState,next:null}),jr=es.hasEagerState?es.eagerState:Nr(jr,es.action);else{var Xr={lane:ns,action:es.action,hasEagerState:es.hasEagerState,eagerState:es.eagerState,next:null};ts===null?(Yr=ts=Xr,Zr=jr):ts=ts.next=Xr,N$4.lanes|=ns,hh|=ns}es=es.next}while(es!==null&&es!==Wr);ts===null?Zr=jr:ts.next=Yr,He$2(jr,_r.memoizedState)||(Ug=!0),_r.memoizedState=jr,_r.baseState=Zr,_r.baseQueue=ts,Ur.lastRenderedState=jr}if(Nr=Ur.interleaved,Nr!==null){Gr=Nr;do Wr=Gr.lane,N$4.lanes|=Wr,hh|=Wr,Gr=Gr.next;while(Gr!==Nr)}else Gr===null&&(Ur.lanes=0);return[_r.memoizedState,Ur.dispatch]}function gi(Nr){var _r=di(),Ur=_r.queue;if(Ur===null)throw Error(p$3(311));Ur.lastRenderedReducer=Nr;var jr=Ur.dispatch,Gr=Ur.pending,Wr=_r.memoizedState;if(Gr!==null){Ur.pending=null;var Zr=Gr=Gr.next;do Wr=Nr(Wr,Zr.action),Zr=Zr.next;while(Zr!==Gr);He$2(Wr,_r.memoizedState)||(Ug=!0),_r.memoizedState=Wr,_r.baseQueue===null&&(_r.baseState=Wr),Ur.lastRenderedState=Wr}return[Wr,jr]}function hi(){}function ii(Nr,_r){var Ur=N$4,jr=di(),Gr=_r(),Wr=!He$2(jr.memoizedState,Gr);if(Wr&&(jr.memoizedState=Gr,Ug=!0),jr=jr.queue,ji(ki.bind(null,Ur,jr,Nr),[Nr]),jr.getSnapshot!==_r||Wr||P$4!==null&&P$4.memoizedState.tag&1){if(Ur.flags|=2048,li(9,mi.bind(null,Ur,jr,Gr,_r),void 0,null),R$4===null)throw Error(p$3(349));Rh&30||ni(Ur,_r,Gr)}return Gr}function ni(Nr,_r,Ur){Nr.flags|=16384,Nr={getSnapshot:_r,value:Ur},_r=N$4.updateQueue,_r===null?(_r={lastEffect:null,stores:null},N$4.updateQueue=_r,_r.stores=[Nr]):(Ur=_r.stores,Ur===null?_r.stores=[Nr]:Ur.push(Nr))}function mi(Nr,_r,Ur,jr){_r.value=Ur,_r.getSnapshot=jr,oi(_r)&&pi(Nr)}function ki(Nr,_r,Ur){return Ur(function(){oi(_r)&&pi(Nr)})}function oi(Nr){var _r=Nr.getSnapshot;Nr=Nr.value;try{var Ur=_r();return!He$2(Nr,Ur)}catch{return!0}}function pi(Nr){var _r=Zg(Nr,1);_r!==null&&mh(_r,Nr,1,-1)}function qi(Nr){var _r=ci();return typeof Nr=="function"&&(Nr=Nr()),_r.memoizedState=_r.baseState=Nr,Nr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:Nr},_r.queue=Nr,Nr=Nr.dispatch=ri.bind(null,N$4,Nr),[_r.memoizedState,Nr]}function li(Nr,_r,Ur,jr){return Nr={tag:Nr,create:_r,destroy:Ur,deps:jr,next:null},_r=N$4.updateQueue,_r===null?(_r={lastEffect:null,stores:null},N$4.updateQueue=_r,_r.lastEffect=Nr.next=Nr):(Ur=_r.lastEffect,Ur===null?_r.lastEffect=Nr.next=Nr:(jr=Ur.next,Ur.next=Nr,Nr.next=jr,_r.lastEffect=Nr)),Nr}function si(){return di().memoizedState}function ti(Nr,_r,Ur,jr){var Gr=ci();N$4.flags|=Nr,Gr.memoizedState=li(1|_r,Ur,void 0,jr===void 0?null:jr)}function ui(Nr,_r,Ur,jr){var Gr=di();jr=jr===void 0?null:jr;var Wr=void 0;if(O$4!==null){var Zr=O$4.memoizedState;if(Wr=Zr.destroy,jr!==null&&Wh(jr,Zr.deps)){Gr.memoizedState=li(_r,Ur,Wr,jr);return}}N$4.flags|=Nr,Gr.memoizedState=li(1|_r,Ur,Wr,jr)}function vi(Nr,_r){return ti(8390656,8,Nr,_r)}function ji(Nr,_r){return ui(2048,8,Nr,_r)}function wi(Nr,_r){return ui(4,2,Nr,_r)}function xi(Nr,_r){return ui(4,4,Nr,_r)}function yi(Nr,_r){if(typeof _r=="function")return Nr=Nr(),_r(Nr),function(){_r(null)};if(_r!=null)return Nr=Nr(),_r.current=Nr,function(){_r.current=null}}function zi(Nr,_r,Ur){return Ur=Ur!=null?Ur.concat([Nr]):null,ui(4,4,yi.bind(null,_r,Nr),Ur)}function Ai(){}function Bi(Nr,_r){var Ur=di();_r=_r===void 0?null:_r;var jr=Ur.memoizedState;return jr!==null&&_r!==null&&Wh(_r,jr[1])?jr[0]:(Ur.memoizedState=[Nr,_r],Nr)}function Ci(Nr,_r){var Ur=di();_r=_r===void 0?null:_r;var jr=Ur.memoizedState;return jr!==null&&_r!==null&&Wh(_r,jr[1])?jr[0]:(Nr=Nr(),Ur.memoizedState=[Nr,_r],Nr)}function Di(Nr,_r,Ur){return Rh&21?(He$2(Ur,_r)||(Ur=yc(),N$4.lanes|=Ur,hh|=Ur,Nr.baseState=!0),_r):(Nr.baseState&&(Nr.baseState=!1,Ug=!0),Nr.memoizedState=Ur)}function Ei(Nr,_r){var Ur=C$2;C$2=Ur!==0&&4>Ur?Ur:4,Nr(!0);var jr=Qh.transition;Qh.transition={};try{Nr(!1),_r()}finally{C$2=Ur,Qh.transition=jr}}function Fi(){return di().memoizedState}function Gi(Nr,_r,Ur){var jr=lh(Nr);if(Ur={lane:jr,action:Ur,hasEagerState:!1,eagerState:null,next:null},Hi(Nr))Ii(_r,Ur);else if(Ur=Yg(Nr,_r,Ur,jr),Ur!==null){var Gr=L$2();mh(Ur,Nr,jr,Gr),Ji(Ur,_r,jr)}}function ri(Nr,_r,Ur){var jr=lh(Nr),Gr={lane:jr,action:Ur,hasEagerState:!1,eagerState:null,next:null};if(Hi(Nr))Ii(_r,Gr);else{var Wr=Nr.alternate;if(Nr.lanes===0&&(Wr===null||Wr.lanes===0)&&(Wr=_r.lastRenderedReducer,Wr!==null))try{var Zr=_r.lastRenderedState,Yr=Wr(Zr,Ur);if(Gr.hasEagerState=!0,Gr.eagerState=Yr,He$2(Yr,Zr)){var ts=_r.interleaved;ts===null?(Gr.next=Gr,Xg(_r)):(Gr.next=ts.next,ts.next=Gr),_r.interleaved=Gr;return}}catch{}finally{}Ur=Yg(Nr,_r,Gr,jr),Ur!==null&&(Gr=L$2(),mh(Ur,Nr,jr,Gr),Ji(Ur,_r,jr))}}function Hi(Nr){var _r=Nr.alternate;return Nr===N$4||_r!==null&&_r===N$4}function Ii(Nr,_r){Th=Sh=!0;var Ur=Nr.pending;Ur===null?_r.next=_r:(_r.next=Ur.next,Ur.next=_r),Nr.pending=_r}function Ji(Nr,_r,Ur){if(Ur&4194240){var jr=_r.lanes;jr&=Nr.pendingLanes,Ur|=jr,_r.lanes=Ur,Cc(Nr,Ur)}}var ai={readContext:Vg,useCallback:Q$4,useContext:Q$4,useEffect:Q$4,useImperativeHandle:Q$4,useInsertionEffect:Q$4,useLayoutEffect:Q$4,useMemo:Q$4,useReducer:Q$4,useRef:Q$4,useState:Q$4,useDebugValue:Q$4,useDeferredValue:Q$4,useTransition:Q$4,useMutableSource:Q$4,useSyncExternalStore:Q$4,useId:Q$4,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(Nr,_r){return ci().memoizedState=[Nr,_r===void 0?null:_r],Nr},useContext:Vg,useEffect:vi,useImperativeHandle:function(Nr,_r,Ur){return Ur=Ur!=null?Ur.concat([Nr]):null,ti(4194308,4,yi.bind(null,_r,Nr),Ur)},useLayoutEffect:function(Nr,_r){return ti(4194308,4,Nr,_r)},useInsertionEffect:function(Nr,_r){return ti(4,2,Nr,_r)},useMemo:function(Nr,_r){var Ur=ci();return _r=_r===void 0?null:_r,Nr=Nr(),Ur.memoizedState=[Nr,_r],Nr},useReducer:function(Nr,_r,Ur){var jr=ci();return _r=Ur!==void 0?Ur(_r):_r,jr.memoizedState=jr.baseState=_r,Nr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:_r},jr.queue=Nr,Nr=Nr.dispatch=Gi.bind(null,N$4,Nr),[jr.memoizedState,Nr]},useRef:function(Nr){var _r=ci();return Nr={current:Nr},_r.memoizedState=Nr},useState:qi,useDebugValue:Ai,useDeferredValue:function(Nr){return ci().memoizedState=Nr},useTransition:function(){var Nr=qi(!1),_r=Nr[0];return Nr=Ei.bind(null,Nr[1]),ci().memoizedState=Nr,[_r,Nr]},useMutableSource:function(){},useSyncExternalStore:function(Nr,_r,Ur){var jr=N$4,Gr=ci();if(I$4){if(Ur===void 0)throw Error(p$3(407));Ur=Ur()}else{if(Ur=_r(),R$4===null)throw Error(p$3(349));Rh&30||ni(jr,_r,Ur)}Gr.memoizedState=Ur;var Wr={value:Ur,getSnapshot:_r};return Gr.queue=Wr,vi(ki.bind(null,jr,Wr,Nr),[Nr]),jr.flags|=2048,li(9,mi.bind(null,jr,Wr,Ur,_r),void 0,null),Ur},useId:function(){var Nr=ci(),_r=R$4.identifierPrefix;if(I$4){var Ur=sg,jr=rg;Ur=(jr&~(1<<32-oc(jr)-1)).toString(32)+Ur,_r=":"+_r+"R"+Ur,Ur=Uh++,0<Ur&&(_r+="H"+Ur.toString(32)),_r+=":"}else Ur=Vh++,_r=":"+_r+"r"+Ur.toString(32)+":";return Nr.memoizedState=_r},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(Nr){var _r=di();return Di(_r,O$4.memoizedState,Nr)},useTransition:function(){var Nr=fi(ei)[0],_r=di().memoizedState;return[Nr,_r]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(Nr){var _r=di();return O$4===null?_r.memoizedState=Nr:Di(_r,O$4.memoizedState,Nr)},useTransition:function(){var Nr=gi(ei)[0],_r=di().memoizedState;return[Nr,_r]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(Nr,_r){try{var Ur="",jr=_r;do Ur+=Pa(jr),jr=jr.return;while(jr);var Gr=Ur}catch(Wr){Gr=`
Error generating stack: `+Wr.message+`
`+Wr.stack}return{value:Nr,source:_r,stack:Gr,digest:null}}function Li(Nr,_r,Ur){return{value:Nr,source:null,stack:Ur??null,digest:_r??null}}function Mi(Nr,_r){try{console.error(_r.value)}catch(Ur){setTimeout(function(){throw Ur})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(Nr,_r,Ur){Ur=ch(-1,Ur),Ur.tag=3,Ur.payload={element:null};var jr=_r.value;return Ur.callback=function(){Pi||(Pi=!0,Qi=jr),Mi(Nr,_r)},Ur}function Ri(Nr,_r,Ur){Ur=ch(-1,Ur),Ur.tag=3;var jr=Nr.type.getDerivedStateFromError;if(typeof jr=="function"){var Gr=_r.value;Ur.payload=function(){return jr(Gr)},Ur.callback=function(){Mi(Nr,_r)}}var Wr=Nr.stateNode;return Wr!==null&&typeof Wr.componentDidCatch=="function"&&(Ur.callback=function(){Mi(Nr,_r),typeof jr!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var Zr=_r.stack;this.componentDidCatch(_r.value,{componentStack:Zr!==null?Zr:""})}),Ur}function Ti(Nr,_r,Ur){var jr=Nr.pingCache;if(jr===null){jr=Nr.pingCache=new Ni;var Gr=new Set;jr.set(_r,Gr)}else Gr=jr.get(_r),Gr===void 0&&(Gr=new Set,jr.set(_r,Gr));Gr.has(Ur)||(Gr.add(Ur),Nr=Ui.bind(null,Nr,_r,Ur),_r.then(Nr,Nr))}function Vi(Nr){do{var _r;if((_r=Nr.tag===13)&&(_r=Nr.memoizedState,_r=_r!==null?_r.dehydrated!==null:!0),_r)return Nr;Nr=Nr.return}while(Nr!==null);return null}function Wi(Nr,_r,Ur,jr,Gr){return Nr.mode&1?(Nr.flags|=65536,Nr.lanes=Gr,Nr):(Nr===_r?Nr.flags|=65536:(Nr.flags|=128,Ur.flags|=131072,Ur.flags&=-52805,Ur.tag===1&&(Ur.alternate===null?Ur.tag=17:(_r=ch(-1,1),_r.tag=2,dh(Ur,_r,1))),Ur.lanes|=1),Nr)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(Nr,_r,Ur,jr){_r.child=Nr===null?Ch(_r,null,Ur,jr):Bh(_r,Nr.child,Ur,jr)}function Zi(Nr,_r,Ur,jr,Gr){Ur=Ur.render;var Wr=_r.ref;return Tg(_r,Gr),jr=Xh(Nr,_r,Ur,jr,Wr,Gr),Ur=bi(),Nr!==null&&!Ug?(_r.updateQueue=Nr.updateQueue,_r.flags&=-2053,Nr.lanes&=~Gr,$i(Nr,_r,Gr)):(I$4&&Ur&&vg(_r),_r.flags|=1,Yi(Nr,_r,jr,Gr),_r.child)}function aj(Nr,_r,Ur,jr,Gr){if(Nr===null){var Wr=Ur.type;return typeof Wr=="function"&&!bj(Wr)&&Wr.defaultProps===void 0&&Ur.compare===null&&Ur.defaultProps===void 0?(_r.tag=15,_r.type=Wr,cj(Nr,_r,Wr,jr,Gr)):(Nr=yh(Ur.type,null,jr,_r,_r.mode,Gr),Nr.ref=_r.ref,Nr.return=_r,_r.child=Nr)}if(Wr=Nr.child,!(Nr.lanes&Gr)){var Zr=Wr.memoizedProps;if(Ur=Ur.compare,Ur=Ur!==null?Ur:Ie$2,Ur(Zr,jr)&&Nr.ref===_r.ref)return $i(Nr,_r,Gr)}return _r.flags|=1,Nr=wh(Wr,jr),Nr.ref=_r.ref,Nr.return=_r,_r.child=Nr}function cj(Nr,_r,Ur,jr,Gr){if(Nr!==null){var Wr=Nr.memoizedProps;if(Ie$2(Wr,jr)&&Nr.ref===_r.ref)if(Ug=!1,_r.pendingProps=jr=Wr,(Nr.lanes&Gr)!==0)Nr.flags&131072&&(Ug=!0);else return _r.lanes=Nr.lanes,$i(Nr,_r,Gr)}return dj(Nr,_r,Ur,jr,Gr)}function ej(Nr,_r,Ur){var jr=_r.pendingProps,Gr=jr.children,Wr=Nr!==null?Nr.memoizedState:null;if(jr.mode==="hidden")if(!(_r.mode&1))_r.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$4(fj,gj),gj|=Ur;else{if(!(Ur&1073741824))return Nr=Wr!==null?Wr.baseLanes|Ur:Ur,_r.lanes=_r.childLanes=1073741824,_r.memoizedState={baseLanes:Nr,cachePool:null,transitions:null},_r.updateQueue=null,G$4(fj,gj),gj|=Nr,null;_r.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr=Wr!==null?Wr.baseLanes:Ur,G$4(fj,gj),gj|=jr}else Wr!==null?(jr=Wr.baseLanes|Ur,_r.memoizedState=null):jr=Ur,G$4(fj,gj),gj|=jr;return Yi(Nr,_r,Gr,Ur),_r.child}function hj(Nr,_r){var Ur=_r.ref;(Nr===null&&Ur!==null||Nr!==null&&Nr.ref!==Ur)&&(_r.flags|=512,_r.flags|=2097152)}function dj(Nr,_r,Ur,jr,Gr){var Wr=Zf(Ur)?Xf:H$3.current;return Wr=Yf(_r,Wr),Tg(_r,Gr),Ur=Xh(Nr,_r,Ur,jr,Wr,Gr),jr=bi(),Nr!==null&&!Ug?(_r.updateQueue=Nr.updateQueue,_r.flags&=-2053,Nr.lanes&=~Gr,$i(Nr,_r,Gr)):(I$4&&jr&&vg(_r),_r.flags|=1,Yi(Nr,_r,Ur,Gr),_r.child)}function ij(Nr,_r,Ur,jr,Gr){if(Zf(Ur)){var Wr=!0;cg(_r)}else Wr=!1;if(Tg(_r,Gr),_r.stateNode===null)jj(Nr,_r),ph(_r,Ur,jr),rh(_r,Ur,jr,Gr),jr=!0;else if(Nr===null){var Zr=_r.stateNode,Yr=_r.memoizedProps;Zr.props=Yr;var ts=Zr.context,es=Ur.contextType;typeof es=="object"&&es!==null?es=Vg(es):(es=Zf(Ur)?Xf:H$3.current,es=Yf(_r,es));var ns=Ur.getDerivedStateFromProps,Xr=typeof ns=="function"||typeof Zr.getSnapshotBeforeUpdate=="function";Xr||typeof Zr.UNSAFE_componentWillReceiveProps!="function"&&typeof Zr.componentWillReceiveProps!="function"||(Yr!==jr||ts!==es)&&qh(_r,Zr,jr,es),$g=!1;var qr=_r.memoizedState;Zr.state=qr,gh(_r,jr,Zr,Gr),ts=_r.memoizedState,Yr!==jr||qr!==ts||Wf.current||$g?(typeof ns=="function"&&(kh(_r,Ur,ns,jr),ts=_r.memoizedState),(Yr=$g||oh(_r,Ur,Yr,jr,qr,ts,es))?(Xr||typeof Zr.UNSAFE_componentWillMount!="function"&&typeof Zr.componentWillMount!="function"||(typeof Zr.componentWillMount=="function"&&Zr.componentWillMount(),typeof Zr.UNSAFE_componentWillMount=="function"&&Zr.UNSAFE_componentWillMount()),typeof Zr.componentDidMount=="function"&&(_r.flags|=4194308)):(typeof Zr.componentDidMount=="function"&&(_r.flags|=4194308),_r.memoizedProps=jr,_r.memoizedState=ts),Zr.props=jr,Zr.state=ts,Zr.context=es,jr=Yr):(typeof Zr.componentDidMount=="function"&&(_r.flags|=4194308),jr=!1)}else{Zr=_r.stateNode,bh(Nr,_r),Yr=_r.memoizedProps,es=_r.type===_r.elementType?Yr:Lg(_r.type,Yr),Zr.props=es,Xr=_r.pendingProps,qr=Zr.context,ts=Ur.contextType,typeof ts=="object"&&ts!==null?ts=Vg(ts):(ts=Zf(Ur)?Xf:H$3.current,ts=Yf(_r,ts));var _i=Ur.getDerivedStateFromProps;(ns=typeof _i=="function"||typeof Zr.getSnapshotBeforeUpdate=="function")||typeof Zr.UNSAFE_componentWillReceiveProps!="function"&&typeof Zr.componentWillReceiveProps!="function"||(Yr!==Xr||qr!==ts)&&qh(_r,Zr,jr,ts),$g=!1,qr=_r.memoizedState,Zr.state=qr,gh(_r,jr,Zr,Gr);var rs=_r.memoizedState;Yr!==Xr||qr!==rs||Wf.current||$g?(typeof _i=="function"&&(kh(_r,Ur,_i,jr),rs=_r.memoizedState),(es=$g||oh(_r,Ur,es,jr,qr,rs,ts)||!1)?(ns||typeof Zr.UNSAFE_componentWillUpdate!="function"&&typeof Zr.componentWillUpdate!="function"||(typeof Zr.componentWillUpdate=="function"&&Zr.componentWillUpdate(jr,rs,ts),typeof Zr.UNSAFE_componentWillUpdate=="function"&&Zr.UNSAFE_componentWillUpdate(jr,rs,ts)),typeof Zr.componentDidUpdate=="function"&&(_r.flags|=4),typeof Zr.getSnapshotBeforeUpdate=="function"&&(_r.flags|=1024)):(typeof Zr.componentDidUpdate!="function"||Yr===Nr.memoizedProps&&qr===Nr.memoizedState||(_r.flags|=4),typeof Zr.getSnapshotBeforeUpdate!="function"||Yr===Nr.memoizedProps&&qr===Nr.memoizedState||(_r.flags|=1024),_r.memoizedProps=jr,_r.memoizedState=rs),Zr.props=jr,Zr.state=rs,Zr.context=ts,jr=es):(typeof Zr.componentDidUpdate!="function"||Yr===Nr.memoizedProps&&qr===Nr.memoizedState||(_r.flags|=4),typeof Zr.getSnapshotBeforeUpdate!="function"||Yr===Nr.memoizedProps&&qr===Nr.memoizedState||(_r.flags|=1024),jr=!1)}return kj(Nr,_r,Ur,jr,Wr,Gr)}function kj(Nr,_r,Ur,jr,Gr,Wr){hj(Nr,_r);var Zr=(_r.flags&128)!==0;if(!jr&&!Zr)return Gr&&dg(_r,Ur,!1),$i(Nr,_r,Wr);jr=_r.stateNode,Xi.current=_r;var Yr=Zr&&typeof Ur.getDerivedStateFromError!="function"?null:jr.render();return _r.flags|=1,Nr!==null&&Zr?(_r.child=Bh(_r,Nr.child,null,Wr),_r.child=Bh(_r,null,Yr,Wr)):Yi(Nr,_r,Yr,Wr),_r.memoizedState=jr.state,Gr&&dg(_r,Ur,!0),_r.child}function lj(Nr){var _r=Nr.stateNode;_r.pendingContext?ag(Nr,_r.pendingContext,_r.pendingContext!==_r.context):_r.context&&ag(Nr,_r.context,!1),Ih(Nr,_r.containerInfo)}function mj(Nr,_r,Ur,jr,Gr){return Ig(),Jg(Gr),_r.flags|=256,Yi(Nr,_r,Ur,jr),_r.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(Nr){return{baseLanes:Nr,cachePool:null,transitions:null}}function pj(Nr,_r,Ur){var jr=_r.pendingProps,Gr=M$3.current,Wr=!1,Zr=(_r.flags&128)!==0,Yr;if((Yr=Zr)||(Yr=Nr!==null&&Nr.memoizedState===null?!1:(Gr&2)!==0),Yr?(Wr=!0,_r.flags&=-129):(Nr===null||Nr.memoizedState!==null)&&(Gr|=1),G$4(M$3,Gr&1),Nr===null)return Eg(_r),Nr=_r.memoizedState,Nr!==null&&(Nr=Nr.dehydrated,Nr!==null)?(_r.mode&1?Nr.data==="$!"?_r.lanes=8:_r.lanes=1073741824:_r.lanes=1,null):(Zr=jr.children,Nr=jr.fallback,Wr?(jr=_r.mode,Wr=_r.child,Zr={mode:"hidden",children:Zr},!(jr&1)&&Wr!==null?(Wr.childLanes=0,Wr.pendingProps=Zr):Wr=qj(Zr,jr,0,null),Nr=Ah(Nr,jr,Ur,null),Wr.return=_r,Nr.return=_r,Wr.sibling=Nr,_r.child=Wr,_r.child.memoizedState=oj(Ur),_r.memoizedState=nj,Nr):rj(_r,Zr));if(Gr=Nr.memoizedState,Gr!==null&&(Yr=Gr.dehydrated,Yr!==null))return sj(Nr,_r,Zr,jr,Yr,Gr,Ur);if(Wr){Wr=jr.fallback,Zr=_r.mode,Gr=Nr.child,Yr=Gr.sibling;var ts={mode:"hidden",children:jr.children};return!(Zr&1)&&_r.child!==Gr?(jr=_r.child,jr.childLanes=0,jr.pendingProps=ts,_r.deletions=null):(jr=wh(Gr,ts),jr.subtreeFlags=Gr.subtreeFlags&14680064),Yr!==null?Wr=wh(Yr,Wr):(Wr=Ah(Wr,Zr,Ur,null),Wr.flags|=2),Wr.return=_r,jr.return=_r,jr.sibling=Wr,_r.child=jr,jr=Wr,Wr=_r.child,Zr=Nr.child.memoizedState,Zr=Zr===null?oj(Ur):{baseLanes:Zr.baseLanes|Ur,cachePool:null,transitions:Zr.transitions},Wr.memoizedState=Zr,Wr.childLanes=Nr.childLanes&~Ur,_r.memoizedState=nj,jr}return Wr=Nr.child,Nr=Wr.sibling,jr=wh(Wr,{mode:"visible",children:jr.children}),!(_r.mode&1)&&(jr.lanes=Ur),jr.return=_r,jr.sibling=null,Nr!==null&&(Ur=_r.deletions,Ur===null?(_r.deletions=[Nr],_r.flags|=16):Ur.push(Nr)),_r.child=jr,_r.memoizedState=null,jr}function rj(Nr,_r){return _r=qj({mode:"visible",children:_r},Nr.mode,0,null),_r.return=Nr,Nr.child=_r}function tj(Nr,_r,Ur,jr){return jr!==null&&Jg(jr),Bh(_r,Nr.child,null,Ur),Nr=rj(_r,_r.pendingProps.children),Nr.flags|=2,_r.memoizedState=null,Nr}function sj(Nr,_r,Ur,jr,Gr,Wr,Zr){if(Ur)return _r.flags&256?(_r.flags&=-257,jr=Li(Error(p$3(422))),tj(Nr,_r,Zr,jr)):_r.memoizedState!==null?(_r.child=Nr.child,_r.flags|=128,null):(Wr=jr.fallback,Gr=_r.mode,jr=qj({mode:"visible",children:jr.children},Gr,0,null),Wr=Ah(Wr,Gr,Zr,null),Wr.flags|=2,jr.return=_r,Wr.return=_r,jr.sibling=Wr,_r.child=jr,_r.mode&1&&Bh(_r,Nr.child,null,Zr),_r.child.memoizedState=oj(Zr),_r.memoizedState=nj,Wr);if(!(_r.mode&1))return tj(Nr,_r,Zr,null);if(Gr.data==="$!"){if(jr=Gr.nextSibling&&Gr.nextSibling.dataset,jr)var Yr=jr.dgst;return jr=Yr,Wr=Error(p$3(419)),jr=Li(Wr,jr,void 0),tj(Nr,_r,Zr,jr)}if(Yr=(Zr&Nr.childLanes)!==0,Ug||Yr){if(jr=R$4,jr!==null){switch(Zr&-Zr){case 4:Gr=2;break;case 16:Gr=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Gr=32;break;case 536870912:Gr=268435456;break;default:Gr=0}Gr=Gr&(jr.suspendedLanes|Zr)?0:Gr,Gr!==0&&Gr!==Wr.retryLane&&(Wr.retryLane=Gr,Zg(Nr,Gr),mh(jr,Nr,Gr,-1))}return uj(),jr=Li(Error(p$3(421))),tj(Nr,_r,Zr,jr)}return Gr.data==="$?"?(_r.flags|=128,_r.child=Nr.child,_r=vj.bind(null,Nr),Gr._reactRetry=_r,null):(Nr=Wr.treeContext,yg=Lf(Gr.nextSibling),xg=_r,I$4=!0,zg=null,Nr!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=Nr.id,sg=Nr.overflow,qg=_r),_r=rj(_r,jr.children),_r.flags|=4096,_r)}function wj(Nr,_r,Ur){Nr.lanes|=_r;var jr=Nr.alternate;jr!==null&&(jr.lanes|=_r),Sg(Nr.return,_r,Ur)}function xj(Nr,_r,Ur,jr,Gr){var Wr=Nr.memoizedState;Wr===null?Nr.memoizedState={isBackwards:_r,rendering:null,renderingStartTime:0,last:jr,tail:Ur,tailMode:Gr}:(Wr.isBackwards=_r,Wr.rendering=null,Wr.renderingStartTime=0,Wr.last=jr,Wr.tail=Ur,Wr.tailMode=Gr)}function yj(Nr,_r,Ur){var jr=_r.pendingProps,Gr=jr.revealOrder,Wr=jr.tail;if(Yi(Nr,_r,jr.children,Ur),jr=M$3.current,jr&2)jr=jr&1|2,_r.flags|=128;else{if(Nr!==null&&Nr.flags&128)e:for(Nr=_r.child;Nr!==null;){if(Nr.tag===13)Nr.memoizedState!==null&&wj(Nr,Ur,_r);else if(Nr.tag===19)wj(Nr,Ur,_r);else if(Nr.child!==null){Nr.child.return=Nr,Nr=Nr.child;continue}if(Nr===_r)break e;for(;Nr.sibling===null;){if(Nr.return===null||Nr.return===_r)break e;Nr=Nr.return}Nr.sibling.return=Nr.return,Nr=Nr.sibling}jr&=1}if(G$4(M$3,jr),!(_r.mode&1))_r.memoizedState=null;else switch(Gr){case"forwards":for(Ur=_r.child,Gr=null;Ur!==null;)Nr=Ur.alternate,Nr!==null&&Mh(Nr)===null&&(Gr=Ur),Ur=Ur.sibling;Ur=Gr,Ur===null?(Gr=_r.child,_r.child=null):(Gr=Ur.sibling,Ur.sibling=null),xj(_r,!1,Gr,Ur,Wr);break;case"backwards":for(Ur=null,Gr=_r.child,_r.child=null;Gr!==null;){if(Nr=Gr.alternate,Nr!==null&&Mh(Nr)===null){_r.child=Gr;break}Nr=Gr.sibling,Gr.sibling=Ur,Ur=Gr,Gr=Nr}xj(_r,!0,Ur,null,Wr);break;case"together":xj(_r,!1,null,null,void 0);break;default:_r.memoizedState=null}return _r.child}function jj(Nr,_r){!(_r.mode&1)&&Nr!==null&&(Nr.alternate=null,_r.alternate=null,_r.flags|=2)}function $i(Nr,_r,Ur){if(Nr!==null&&(_r.dependencies=Nr.dependencies),hh|=_r.lanes,!(Ur&_r.childLanes))return null;if(Nr!==null&&_r.child!==Nr.child)throw Error(p$3(153));if(_r.child!==null){for(Nr=_r.child,Ur=wh(Nr,Nr.pendingProps),_r.child=Ur,Ur.return=_r;Nr.sibling!==null;)Nr=Nr.sibling,Ur=Ur.sibling=wh(Nr,Nr.pendingProps),Ur.return=_r;Ur.sibling=null}return _r.child}function zj(Nr,_r,Ur){switch(_r.tag){case 3:lj(_r),Ig();break;case 5:Kh(_r);break;case 1:Zf(_r.type)&&cg(_r);break;case 4:Ih(_r,_r.stateNode.containerInfo);break;case 10:var jr=_r.type._context,Gr=_r.memoizedProps.value;G$4(Mg,jr._currentValue),jr._currentValue=Gr;break;case 13:if(jr=_r.memoizedState,jr!==null)return jr.dehydrated!==null?(G$4(M$3,M$3.current&1),_r.flags|=128,null):Ur&_r.child.childLanes?pj(Nr,_r,Ur):(G$4(M$3,M$3.current&1),Nr=$i(Nr,_r,Ur),Nr!==null?Nr.sibling:null);G$4(M$3,M$3.current&1);break;case 19:if(jr=(Ur&_r.childLanes)!==0,Nr.flags&128){if(jr)return yj(Nr,_r,Ur);_r.flags|=128}if(Gr=_r.memoizedState,Gr!==null&&(Gr.rendering=null,Gr.tail=null,Gr.lastEffect=null),G$4(M$3,M$3.current),jr)break;return null;case 22:case 23:return _r.lanes=0,ej(Nr,_r,Ur)}return $i(Nr,_r,Ur)}var Aj,Bj,Cj,Dj;Aj=function(Nr,_r){for(var Ur=_r.child;Ur!==null;){if(Ur.tag===5||Ur.tag===6)Nr.appendChild(Ur.stateNode);else if(Ur.tag!==4&&Ur.child!==null){Ur.child.return=Ur,Ur=Ur.child;continue}if(Ur===_r)break;for(;Ur.sibling===null;){if(Ur.return===null||Ur.return===_r)return;Ur=Ur.return}Ur.sibling.return=Ur.return,Ur=Ur.sibling}};Bj=function(){};Cj=function(Nr,_r,Ur,jr){var Gr=Nr.memoizedProps;if(Gr!==jr){Nr=_r.stateNode,Hh(Eh.current);var Wr=null;switch(Ur){case"input":Gr=Ya(Nr,Gr),jr=Ya(Nr,jr),Wr=[];break;case"select":Gr=A$3({},Gr,{value:void 0}),jr=A$3({},jr,{value:void 0}),Wr=[];break;case"textarea":Gr=gb(Nr,Gr),jr=gb(Nr,jr),Wr=[];break;default:typeof Gr.onClick!="function"&&typeof jr.onClick=="function"&&(Nr.onclick=Bf)}ub(Ur,jr);var Zr;Ur=null;for(es in Gr)if(!jr.hasOwnProperty(es)&&Gr.hasOwnProperty(es)&&Gr[es]!=null)if(es==="style"){var Yr=Gr[es];for(Zr in Yr)Yr.hasOwnProperty(Zr)&&(Ur||(Ur={}),Ur[Zr]="")}else es!=="dangerouslySetInnerHTML"&&es!=="children"&&es!=="suppressContentEditableWarning"&&es!=="suppressHydrationWarning"&&es!=="autoFocus"&&(ea.hasOwnProperty(es)?Wr||(Wr=[]):(Wr=Wr||[]).push(es,null));for(es in jr){var ts=jr[es];if(Yr=Gr!=null?Gr[es]:void 0,jr.hasOwnProperty(es)&&ts!==Yr&&(ts!=null||Yr!=null))if(es==="style")if(Yr){for(Zr in Yr)!Yr.hasOwnProperty(Zr)||ts&&ts.hasOwnProperty(Zr)||(Ur||(Ur={}),Ur[Zr]="");for(Zr in ts)ts.hasOwnProperty(Zr)&&Yr[Zr]!==ts[Zr]&&(Ur||(Ur={}),Ur[Zr]=ts[Zr])}else Ur||(Wr||(Wr=[]),Wr.push(es,Ur)),Ur=ts;else es==="dangerouslySetInnerHTML"?(ts=ts?ts.__html:void 0,Yr=Yr?Yr.__html:void 0,ts!=null&&Yr!==ts&&(Wr=Wr||[]).push(es,ts)):es==="children"?typeof ts!="string"&&typeof ts!="number"||(Wr=Wr||[]).push(es,""+ts):es!=="suppressContentEditableWarning"&&es!=="suppressHydrationWarning"&&(ea.hasOwnProperty(es)?(ts!=null&&es==="onScroll"&&D$3("scroll",Nr),Wr||Yr===ts||(Wr=[])):(Wr=Wr||[]).push(es,ts))}Ur&&(Wr=Wr||[]).push("style",Ur);var es=Wr;(_r.updateQueue=es)&&(_r.flags|=4)}};Dj=function(Nr,_r,Ur,jr){Ur!==jr&&(_r.flags|=4)};function Ej(Nr,_r){if(!I$4)switch(Nr.tailMode){case"hidden":_r=Nr.tail;for(var Ur=null;_r!==null;)_r.alternate!==null&&(Ur=_r),_r=_r.sibling;Ur===null?Nr.tail=null:Ur.sibling=null;break;case"collapsed":Ur=Nr.tail;for(var jr=null;Ur!==null;)Ur.alternate!==null&&(jr=Ur),Ur=Ur.sibling;jr===null?_r||Nr.tail===null?Nr.tail=null:Nr.tail.sibling=null:jr.sibling=null}}function S$3(Nr){var _r=Nr.alternate!==null&&Nr.alternate.child===Nr.child,Ur=0,jr=0;if(_r)for(var Gr=Nr.child;Gr!==null;)Ur|=Gr.lanes|Gr.childLanes,jr|=Gr.subtreeFlags&14680064,jr|=Gr.flags&14680064,Gr.return=Nr,Gr=Gr.sibling;else for(Gr=Nr.child;Gr!==null;)Ur|=Gr.lanes|Gr.childLanes,jr|=Gr.subtreeFlags,jr|=Gr.flags,Gr.return=Nr,Gr=Gr.sibling;return Nr.subtreeFlags|=jr,Nr.childLanes=Ur,_r}function Fj(Nr,_r,Ur){var jr=_r.pendingProps;switch(wg(_r),_r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(_r),null;case 1:return Zf(_r.type)&&$f(),S$3(_r),null;case 3:return jr=_r.stateNode,Jh(),E$3(Wf),E$3(H$3),Oh(),jr.pendingContext&&(jr.context=jr.pendingContext,jr.pendingContext=null),(Nr===null||Nr.child===null)&&(Gg(_r)?_r.flags|=4:Nr===null||Nr.memoizedState.isDehydrated&&!(_r.flags&256)||(_r.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(Nr,_r),S$3(_r),null;case 5:Lh(_r);var Gr=Hh(Gh.current);if(Ur=_r.type,Nr!==null&&_r.stateNode!=null)Cj(Nr,_r,Ur,jr,Gr),Nr.ref!==_r.ref&&(_r.flags|=512,_r.flags|=2097152);else{if(!jr){if(_r.stateNode===null)throw Error(p$3(166));return S$3(_r),null}if(Nr=Hh(Eh.current),Gg(_r)){jr=_r.stateNode,Ur=_r.type;var Wr=_r.memoizedProps;switch(jr[Of]=_r,jr[Pf]=Wr,Nr=(_r.mode&1)!==0,Ur){case"dialog":D$3("cancel",jr),D$3("close",jr);break;case"iframe":case"object":case"embed":D$3("load",jr);break;case"video":case"audio":for(Gr=0;Gr<lf.length;Gr++)D$3(lf[Gr],jr);break;case"source":D$3("error",jr);break;case"img":case"image":case"link":D$3("error",jr),D$3("load",jr);break;case"details":D$3("toggle",jr);break;case"input":Za(jr,Wr),D$3("invalid",jr);break;case"select":jr._wrapperState={wasMultiple:!!Wr.multiple},D$3("invalid",jr);break;case"textarea":hb(jr,Wr),D$3("invalid",jr)}ub(Ur,Wr),Gr=null;for(var Zr in Wr)if(Wr.hasOwnProperty(Zr)){var Yr=Wr[Zr];Zr==="children"?typeof Yr=="string"?jr.textContent!==Yr&&(Wr.suppressHydrationWarning!==!0&&Af(jr.textContent,Yr,Nr),Gr=["children",Yr]):typeof Yr=="number"&&jr.textContent!==""+Yr&&(Wr.suppressHydrationWarning!==!0&&Af(jr.textContent,Yr,Nr),Gr=["children",""+Yr]):ea.hasOwnProperty(Zr)&&Yr!=null&&Zr==="onScroll"&&D$3("scroll",jr)}switch(Ur){case"input":Va(jr),db(jr,Wr,!0);break;case"textarea":Va(jr),jb(jr);break;case"select":case"option":break;default:typeof Wr.onClick=="function"&&(jr.onclick=Bf)}jr=Gr,_r.updateQueue=jr,jr!==null&&(_r.flags|=4)}else{Zr=Gr.nodeType===9?Gr:Gr.ownerDocument,Nr==="http://www.w3.org/1999/xhtml"&&(Nr=kb(Ur)),Nr==="http://www.w3.org/1999/xhtml"?Ur==="script"?(Nr=Zr.createElement("div"),Nr.innerHTML="<script><\/script>",Nr=Nr.removeChild(Nr.firstChild)):typeof jr.is=="string"?Nr=Zr.createElement(Ur,{is:jr.is}):(Nr=Zr.createElement(Ur),Ur==="select"&&(Zr=Nr,jr.multiple?Zr.multiple=!0:jr.size&&(Zr.size=jr.size))):Nr=Zr.createElementNS(Nr,Ur),Nr[Of]=_r,Nr[Pf]=jr,Aj(Nr,_r,!1,!1),_r.stateNode=Nr;e:{switch(Zr=vb(Ur,jr),Ur){case"dialog":D$3("cancel",Nr),D$3("close",Nr),Gr=jr;break;case"iframe":case"object":case"embed":D$3("load",Nr),Gr=jr;break;case"video":case"audio":for(Gr=0;Gr<lf.length;Gr++)D$3(lf[Gr],Nr);Gr=jr;break;case"source":D$3("error",Nr),Gr=jr;break;case"img":case"image":case"link":D$3("error",Nr),D$3("load",Nr),Gr=jr;break;case"details":D$3("toggle",Nr),Gr=jr;break;case"input":Za(Nr,jr),Gr=Ya(Nr,jr),D$3("invalid",Nr);break;case"option":Gr=jr;break;case"select":Nr._wrapperState={wasMultiple:!!jr.multiple},Gr=A$3({},jr,{value:void 0}),D$3("invalid",Nr);break;case"textarea":hb(Nr,jr),Gr=gb(Nr,jr),D$3("invalid",Nr);break;default:Gr=jr}ub(Ur,Gr),Yr=Gr;for(Wr in Yr)if(Yr.hasOwnProperty(Wr)){var ts=Yr[Wr];Wr==="style"?sb(Nr,ts):Wr==="dangerouslySetInnerHTML"?(ts=ts?ts.__html:void 0,ts!=null&&nb(Nr,ts)):Wr==="children"?typeof ts=="string"?(Ur!=="textarea"||ts!=="")&&ob(Nr,ts):typeof ts=="number"&&ob(Nr,""+ts):Wr!=="suppressContentEditableWarning"&&Wr!=="suppressHydrationWarning"&&Wr!=="autoFocus"&&(ea.hasOwnProperty(Wr)?ts!=null&&Wr==="onScroll"&&D$3("scroll",Nr):ts!=null&&ta(Nr,Wr,ts,Zr))}switch(Ur){case"input":Va(Nr),db(Nr,jr,!1);break;case"textarea":Va(Nr),jb(Nr);break;case"option":jr.value!=null&&Nr.setAttribute("value",""+Sa(jr.value));break;case"select":Nr.multiple=!!jr.multiple,Wr=jr.value,Wr!=null?fb(Nr,!!jr.multiple,Wr,!1):jr.defaultValue!=null&&fb(Nr,!!jr.multiple,jr.defaultValue,!0);break;default:typeof Gr.onClick=="function"&&(Nr.onclick=Bf)}switch(Ur){case"button":case"input":case"select":case"textarea":jr=!!jr.autoFocus;break e;case"img":jr=!0;break e;default:jr=!1}}jr&&(_r.flags|=4)}_r.ref!==null&&(_r.flags|=512,_r.flags|=2097152)}return S$3(_r),null;case 6:if(Nr&&_r.stateNode!=null)Dj(Nr,_r,Nr.memoizedProps,jr);else{if(typeof jr!="string"&&_r.stateNode===null)throw Error(p$3(166));if(Ur=Hh(Gh.current),Hh(Eh.current),Gg(_r)){if(jr=_r.stateNode,Ur=_r.memoizedProps,jr[Of]=_r,(Wr=jr.nodeValue!==Ur)&&(Nr=xg,Nr!==null))switch(Nr.tag){case 3:Af(jr.nodeValue,Ur,(Nr.mode&1)!==0);break;case 5:Nr.memoizedProps.suppressHydrationWarning!==!0&&Af(jr.nodeValue,Ur,(Nr.mode&1)!==0)}Wr&&(_r.flags|=4)}else jr=(Ur.nodeType===9?Ur:Ur.ownerDocument).createTextNode(jr),jr[Of]=_r,_r.stateNode=jr}return S$3(_r),null;case 13:if(E$3(M$3),jr=_r.memoizedState,Nr===null||Nr.memoizedState!==null&&Nr.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&_r.mode&1&&!(_r.flags&128))Hg(),Ig(),_r.flags|=98560,Wr=!1;else if(Wr=Gg(_r),jr!==null&&jr.dehydrated!==null){if(Nr===null){if(!Wr)throw Error(p$3(318));if(Wr=_r.memoizedState,Wr=Wr!==null?Wr.dehydrated:null,!Wr)throw Error(p$3(317));Wr[Of]=_r}else Ig(),!(_r.flags&128)&&(_r.memoizedState=null),_r.flags|=4;S$3(_r),Wr=!1}else zg!==null&&(Gj(zg),zg=null),Wr=!0;if(!Wr)return _r.flags&65536?_r:null}return _r.flags&128?(_r.lanes=Ur,_r):(jr=jr!==null,jr!==(Nr!==null&&Nr.memoizedState!==null)&&jr&&(_r.child.flags|=8192,_r.mode&1&&(Nr===null||M$3.current&1?T$4===0&&(T$4=3):uj())),_r.updateQueue!==null&&(_r.flags|=4),S$3(_r),null);case 4:return Jh(),Bj(Nr,_r),Nr===null&&sf(_r.stateNode.containerInfo),S$3(_r),null;case 10:return Rg(_r.type._context),S$3(_r),null;case 17:return Zf(_r.type)&&$f(),S$3(_r),null;case 19:if(E$3(M$3),Wr=_r.memoizedState,Wr===null)return S$3(_r),null;if(jr=(_r.flags&128)!==0,Zr=Wr.rendering,Zr===null)if(jr)Ej(Wr,!1);else{if(T$4!==0||Nr!==null&&Nr.flags&128)for(Nr=_r.child;Nr!==null;){if(Zr=Mh(Nr),Zr!==null){for(_r.flags|=128,Ej(Wr,!1),jr=Zr.updateQueue,jr!==null&&(_r.updateQueue=jr,_r.flags|=4),_r.subtreeFlags=0,jr=Ur,Ur=_r.child;Ur!==null;)Wr=Ur,Nr=jr,Wr.flags&=14680066,Zr=Wr.alternate,Zr===null?(Wr.childLanes=0,Wr.lanes=Nr,Wr.child=null,Wr.subtreeFlags=0,Wr.memoizedProps=null,Wr.memoizedState=null,Wr.updateQueue=null,Wr.dependencies=null,Wr.stateNode=null):(Wr.childLanes=Zr.childLanes,Wr.lanes=Zr.lanes,Wr.child=Zr.child,Wr.subtreeFlags=0,Wr.deletions=null,Wr.memoizedProps=Zr.memoizedProps,Wr.memoizedState=Zr.memoizedState,Wr.updateQueue=Zr.updateQueue,Wr.type=Zr.type,Nr=Zr.dependencies,Wr.dependencies=Nr===null?null:{lanes:Nr.lanes,firstContext:Nr.firstContext}),Ur=Ur.sibling;return G$4(M$3,M$3.current&1|2),_r.child}Nr=Nr.sibling}Wr.tail!==null&&B$3()>Hj&&(_r.flags|=128,jr=!0,Ej(Wr,!1),_r.lanes=4194304)}else{if(!jr)if(Nr=Mh(Zr),Nr!==null){if(_r.flags|=128,jr=!0,Ur=Nr.updateQueue,Ur!==null&&(_r.updateQueue=Ur,_r.flags|=4),Ej(Wr,!0),Wr.tail===null&&Wr.tailMode==="hidden"&&!Zr.alternate&&!I$4)return S$3(_r),null}else 2*B$3()-Wr.renderingStartTime>Hj&&Ur!==1073741824&&(_r.flags|=128,jr=!0,Ej(Wr,!1),_r.lanes=4194304);Wr.isBackwards?(Zr.sibling=_r.child,_r.child=Zr):(Ur=Wr.last,Ur!==null?Ur.sibling=Zr:_r.child=Zr,Wr.last=Zr)}return Wr.tail!==null?(_r=Wr.tail,Wr.rendering=_r,Wr.tail=_r.sibling,Wr.renderingStartTime=B$3(),_r.sibling=null,Ur=M$3.current,G$4(M$3,jr?Ur&1|2:Ur&1),_r):(S$3(_r),null);case 22:case 23:return Ij(),jr=_r.memoizedState!==null,Nr!==null&&Nr.memoizedState!==null!==jr&&(_r.flags|=8192),jr&&_r.mode&1?gj&1073741824&&(S$3(_r),_r.subtreeFlags&6&&(_r.flags|=8192)):S$3(_r),null;case 24:return null;case 25:return null}throw Error(p$3(156,_r.tag))}function Jj(Nr,_r){switch(wg(_r),_r.tag){case 1:return Zf(_r.type)&&$f(),Nr=_r.flags,Nr&65536?(_r.flags=Nr&-65537|128,_r):null;case 3:return Jh(),E$3(Wf),E$3(H$3),Oh(),Nr=_r.flags,Nr&65536&&!(Nr&128)?(_r.flags=Nr&-65537|128,_r):null;case 5:return Lh(_r),null;case 13:if(E$3(M$3),Nr=_r.memoizedState,Nr!==null&&Nr.dehydrated!==null){if(_r.alternate===null)throw Error(p$3(340));Ig()}return Nr=_r.flags,Nr&65536?(_r.flags=Nr&-65537|128,_r):null;case 19:return E$3(M$3),null;case 4:return Jh(),null;case 10:return Rg(_r.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$4=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$4=null;function Mj(Nr,_r){var Ur=Nr.ref;if(Ur!==null)if(typeof Ur=="function")try{Ur(null)}catch(jr){W$3(Nr,_r,jr)}else Ur.current=null}function Nj(Nr,_r,Ur){try{Ur()}catch(jr){W$3(Nr,_r,jr)}}var Oj=!1;function Pj(Nr,_r){if(Cf=dd,Nr=Me$2(),Ne$1(Nr)){if("selectionStart"in Nr)var Ur={start:Nr.selectionStart,end:Nr.selectionEnd};else e:{Ur=(Ur=Nr.ownerDocument)&&Ur.defaultView||window;var jr=Ur.getSelection&&Ur.getSelection();if(jr&&jr.rangeCount!==0){Ur=jr.anchorNode;var Gr=jr.anchorOffset,Wr=jr.focusNode;jr=jr.focusOffset;try{Ur.nodeType,Wr.nodeType}catch{Ur=null;break e}var Zr=0,Yr=-1,ts=-1,es=0,ns=0,Xr=Nr,qr=null;t:for(;;){for(var _i;Xr!==Ur||Gr!==0&&Xr.nodeType!==3||(Yr=Zr+Gr),Xr!==Wr||jr!==0&&Xr.nodeType!==3||(ts=Zr+jr),Xr.nodeType===3&&(Zr+=Xr.nodeValue.length),(_i=Xr.firstChild)!==null;)qr=Xr,Xr=_i;for(;;){if(Xr===Nr)break t;if(qr===Ur&&++es===Gr&&(Yr=Zr),qr===Wr&&++ns===jr&&(ts=Zr),(_i=Xr.nextSibling)!==null)break;Xr=qr,qr=Xr.parentNode}Xr=_i}Ur=Yr===-1||ts===-1?null:{start:Yr,end:ts}}else Ur=null}Ur=Ur||{start:0,end:0}}else Ur=null;for(Df={focusedElem:Nr,selectionRange:Ur},dd=!1,V$4=_r;V$4!==null;)if(_r=V$4,Nr=_r.child,(_r.subtreeFlags&1028)!==0&&Nr!==null)Nr.return=_r,V$4=Nr;else for(;V$4!==null;){_r=V$4;try{var rs=_r.alternate;if(_r.flags&1024)switch(_r.tag){case 0:case 11:case 15:break;case 1:if(rs!==null){var is=rs.memoizedProps,ss=rs.memoizedState,os=_r.stateNode,ls=os.getSnapshotBeforeUpdate(_r.elementType===_r.type?is:Lg(_r.type,is),ss);os.__reactInternalSnapshotBeforeUpdate=ls}break;case 3:var cs=_r.stateNode.containerInfo;cs.nodeType===1?cs.textContent="":cs.nodeType===9&&cs.documentElement&&cs.removeChild(cs.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(ds){W$3(_r,_r.return,ds)}if(Nr=_r.sibling,Nr!==null){Nr.return=_r.return,V$4=Nr;break}V$4=_r.return}return rs=Oj,Oj=!1,rs}function Qj(Nr,_r,Ur){var jr=_r.updateQueue;if(jr=jr!==null?jr.lastEffect:null,jr!==null){var Gr=jr=jr.next;do{if((Gr.tag&Nr)===Nr){var Wr=Gr.destroy;Gr.destroy=void 0,Wr!==void 0&&Nj(_r,Ur,Wr)}Gr=Gr.next}while(Gr!==jr)}}function Rj(Nr,_r){if(_r=_r.updateQueue,_r=_r!==null?_r.lastEffect:null,_r!==null){var Ur=_r=_r.next;do{if((Ur.tag&Nr)===Nr){var jr=Ur.create;Ur.destroy=jr()}Ur=Ur.next}while(Ur!==_r)}}function Sj(Nr){var _r=Nr.ref;if(_r!==null){var Ur=Nr.stateNode;switch(Nr.tag){case 5:Nr=Ur;break;default:Nr=Ur}typeof _r=="function"?_r(Nr):_r.current=Nr}}function Tj(Nr){var _r=Nr.alternate;_r!==null&&(Nr.alternate=null,Tj(_r)),Nr.child=null,Nr.deletions=null,Nr.sibling=null,Nr.tag===5&&(_r=Nr.stateNode,_r!==null&&(delete _r[Of],delete _r[Pf],delete _r[of],delete _r[Qf],delete _r[Rf])),Nr.stateNode=null,Nr.return=null,Nr.dependencies=null,Nr.memoizedProps=null,Nr.memoizedState=null,Nr.pendingProps=null,Nr.stateNode=null,Nr.updateQueue=null}function Uj(Nr){return Nr.tag===5||Nr.tag===3||Nr.tag===4}function Vj(Nr){e:for(;;){for(;Nr.sibling===null;){if(Nr.return===null||Uj(Nr.return))return null;Nr=Nr.return}for(Nr.sibling.return=Nr.return,Nr=Nr.sibling;Nr.tag!==5&&Nr.tag!==6&&Nr.tag!==18;){if(Nr.flags&2||Nr.child===null||Nr.tag===4)continue e;Nr.child.return=Nr,Nr=Nr.child}if(!(Nr.flags&2))return Nr.stateNode}}function Wj(Nr,_r,Ur){var jr=Nr.tag;if(jr===5||jr===6)Nr=Nr.stateNode,_r?Ur.nodeType===8?Ur.parentNode.insertBefore(Nr,_r):Ur.insertBefore(Nr,_r):(Ur.nodeType===8?(_r=Ur.parentNode,_r.insertBefore(Nr,Ur)):(_r=Ur,_r.appendChild(Nr)),Ur=Ur._reactRootContainer,Ur!=null||_r.onclick!==null||(_r.onclick=Bf));else if(jr!==4&&(Nr=Nr.child,Nr!==null))for(Wj(Nr,_r,Ur),Nr=Nr.sibling;Nr!==null;)Wj(Nr,_r,Ur),Nr=Nr.sibling}function Xj(Nr,_r,Ur){var jr=Nr.tag;if(jr===5||jr===6)Nr=Nr.stateNode,_r?Ur.insertBefore(Nr,_r):Ur.appendChild(Nr);else if(jr!==4&&(Nr=Nr.child,Nr!==null))for(Xj(Nr,_r,Ur),Nr=Nr.sibling;Nr!==null;)Xj(Nr,_r,Ur),Nr=Nr.sibling}var X$3=null,Yj=!1;function Zj(Nr,_r,Ur){for(Ur=Ur.child;Ur!==null;)ak(Nr,_r,Ur),Ur=Ur.sibling}function ak(Nr,_r,Ur){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,Ur)}catch{}switch(Ur.tag){case 5:U$4||Mj(Ur,_r);case 6:var jr=X$3,Gr=Yj;X$3=null,Zj(Nr,_r,Ur),X$3=jr,Yj=Gr,X$3!==null&&(Yj?(Nr=X$3,Ur=Ur.stateNode,Nr.nodeType===8?Nr.parentNode.removeChild(Ur):Nr.removeChild(Ur)):X$3.removeChild(Ur.stateNode));break;case 18:X$3!==null&&(Yj?(Nr=X$3,Ur=Ur.stateNode,Nr.nodeType===8?Kf(Nr.parentNode,Ur):Nr.nodeType===1&&Kf(Nr,Ur),bd(Nr)):Kf(X$3,Ur.stateNode));break;case 4:jr=X$3,Gr=Yj,X$3=Ur.stateNode.containerInfo,Yj=!0,Zj(Nr,_r,Ur),X$3=jr,Yj=Gr;break;case 0:case 11:case 14:case 15:if(!U$4&&(jr=Ur.updateQueue,jr!==null&&(jr=jr.lastEffect,jr!==null))){Gr=jr=jr.next;do{var Wr=Gr,Zr=Wr.destroy;Wr=Wr.tag,Zr!==void 0&&(Wr&2||Wr&4)&&Nj(Ur,_r,Zr),Gr=Gr.next}while(Gr!==jr)}Zj(Nr,_r,Ur);break;case 1:if(!U$4&&(Mj(Ur,_r),jr=Ur.stateNode,typeof jr.componentWillUnmount=="function"))try{jr.props=Ur.memoizedProps,jr.state=Ur.memoizedState,jr.componentWillUnmount()}catch(Yr){W$3(Ur,_r,Yr)}Zj(Nr,_r,Ur);break;case 21:Zj(Nr,_r,Ur);break;case 22:Ur.mode&1?(U$4=(jr=U$4)||Ur.memoizedState!==null,Zj(Nr,_r,Ur),U$4=jr):Zj(Nr,_r,Ur);break;default:Zj(Nr,_r,Ur)}}function bk(Nr){var _r=Nr.updateQueue;if(_r!==null){Nr.updateQueue=null;var Ur=Nr.stateNode;Ur===null&&(Ur=Nr.stateNode=new Lj),_r.forEach(function(jr){var Gr=ck.bind(null,Nr,jr);Ur.has(jr)||(Ur.add(jr),jr.then(Gr,Gr))})}}function dk(Nr,_r){var Ur=_r.deletions;if(Ur!==null)for(var jr=0;jr<Ur.length;jr++){var Gr=Ur[jr];try{var Wr=Nr,Zr=_r,Yr=Zr;e:for(;Yr!==null;){switch(Yr.tag){case 5:X$3=Yr.stateNode,Yj=!1;break e;case 3:X$3=Yr.stateNode.containerInfo,Yj=!0;break e;case 4:X$3=Yr.stateNode.containerInfo,Yj=!0;break e}Yr=Yr.return}if(X$3===null)throw Error(p$3(160));ak(Wr,Zr,Gr),X$3=null,Yj=!1;var ts=Gr.alternate;ts!==null&&(ts.return=null),Gr.return=null}catch(es){W$3(Gr,_r,es)}}if(_r.subtreeFlags&12854)for(_r=_r.child;_r!==null;)ek(_r,Nr),_r=_r.sibling}function ek(Nr,_r){var Ur=Nr.alternate,jr=Nr.flags;switch(Nr.tag){case 0:case 11:case 14:case 15:if(dk(_r,Nr),fk(Nr),jr&4){try{Qj(3,Nr,Nr.return),Rj(3,Nr)}catch(is){W$3(Nr,Nr.return,is)}try{Qj(5,Nr,Nr.return)}catch(is){W$3(Nr,Nr.return,is)}}break;case 1:dk(_r,Nr),fk(Nr),jr&512&&Ur!==null&&Mj(Ur,Ur.return);break;case 5:if(dk(_r,Nr),fk(Nr),jr&512&&Ur!==null&&Mj(Ur,Ur.return),Nr.flags&32){var Gr=Nr.stateNode;try{ob(Gr,"")}catch(is){W$3(Nr,Nr.return,is)}}if(jr&4&&(Gr=Nr.stateNode,Gr!=null)){var Wr=Nr.memoizedProps,Zr=Ur!==null?Ur.memoizedProps:Wr,Yr=Nr.type,ts=Nr.updateQueue;if(Nr.updateQueue=null,ts!==null)try{Yr==="input"&&Wr.type==="radio"&&Wr.name!=null&&ab(Gr,Wr),vb(Yr,Zr);var es=vb(Yr,Wr);for(Zr=0;Zr<ts.length;Zr+=2){var ns=ts[Zr],Xr=ts[Zr+1];ns==="style"?sb(Gr,Xr):ns==="dangerouslySetInnerHTML"?nb(Gr,Xr):ns==="children"?ob(Gr,Xr):ta(Gr,ns,Xr,es)}switch(Yr){case"input":bb(Gr,Wr);break;case"textarea":ib(Gr,Wr);break;case"select":var qr=Gr._wrapperState.wasMultiple;Gr._wrapperState.wasMultiple=!!Wr.multiple;var _i=Wr.value;_i!=null?fb(Gr,!!Wr.multiple,_i,!1):qr!==!!Wr.multiple&&(Wr.defaultValue!=null?fb(Gr,!!Wr.multiple,Wr.defaultValue,!0):fb(Gr,!!Wr.multiple,Wr.multiple?[]:"",!1))}Gr[Pf]=Wr}catch(is){W$3(Nr,Nr.return,is)}}break;case 6:if(dk(_r,Nr),fk(Nr),jr&4){if(Nr.stateNode===null)throw Error(p$3(162));Gr=Nr.stateNode,Wr=Nr.memoizedProps;try{Gr.nodeValue=Wr}catch(is){W$3(Nr,Nr.return,is)}}break;case 3:if(dk(_r,Nr),fk(Nr),jr&4&&Ur!==null&&Ur.memoizedState.isDehydrated)try{bd(_r.containerInfo)}catch(is){W$3(Nr,Nr.return,is)}break;case 4:dk(_r,Nr),fk(Nr);break;case 13:dk(_r,Nr),fk(Nr),Gr=Nr.child,Gr.flags&8192&&(Wr=Gr.memoizedState!==null,Gr.stateNode.isHidden=Wr,!Wr||Gr.alternate!==null&&Gr.alternate.memoizedState!==null||(gk=B$3())),jr&4&&bk(Nr);break;case 22:if(ns=Ur!==null&&Ur.memoizedState!==null,Nr.mode&1?(U$4=(es=U$4)||ns,dk(_r,Nr),U$4=es):dk(_r,Nr),fk(Nr),jr&8192){if(es=Nr.memoizedState!==null,(Nr.stateNode.isHidden=es)&&!ns&&Nr.mode&1)for(V$4=Nr,ns=Nr.child;ns!==null;){for(Xr=V$4=ns;V$4!==null;){switch(qr=V$4,_i=qr.child,qr.tag){case 0:case 11:case 14:case 15:Qj(4,qr,qr.return);break;case 1:Mj(qr,qr.return);var rs=qr.stateNode;if(typeof rs.componentWillUnmount=="function"){jr=qr,Ur=qr.return;try{_r=jr,rs.props=_r.memoizedProps,rs.state=_r.memoizedState,rs.componentWillUnmount()}catch(is){W$3(jr,Ur,is)}}break;case 5:Mj(qr,qr.return);break;case 22:if(qr.memoizedState!==null){hk(Xr);continue}}_i!==null?(_i.return=qr,V$4=_i):hk(Xr)}ns=ns.sibling}e:for(ns=null,Xr=Nr;;){if(Xr.tag===5){if(ns===null){ns=Xr;try{Gr=Xr.stateNode,es?(Wr=Gr.style,typeof Wr.setProperty=="function"?Wr.setProperty("display","none","important"):Wr.display="none"):(Yr=Xr.stateNode,ts=Xr.memoizedProps.style,Zr=ts!=null&&ts.hasOwnProperty("display")?ts.display:null,Yr.style.display=rb("display",Zr))}catch(is){W$3(Nr,Nr.return,is)}}}else if(Xr.tag===6){if(ns===null)try{Xr.stateNode.nodeValue=es?"":Xr.memoizedProps}catch(is){W$3(Nr,Nr.return,is)}}else if((Xr.tag!==22&&Xr.tag!==23||Xr.memoizedState===null||Xr===Nr)&&Xr.child!==null){Xr.child.return=Xr,Xr=Xr.child;continue}if(Xr===Nr)break e;for(;Xr.sibling===null;){if(Xr.return===null||Xr.return===Nr)break e;ns===Xr&&(ns=null),Xr=Xr.return}ns===Xr&&(ns=null),Xr.sibling.return=Xr.return,Xr=Xr.sibling}}break;case 19:dk(_r,Nr),fk(Nr),jr&4&&bk(Nr);break;case 21:break;default:dk(_r,Nr),fk(Nr)}}function fk(Nr){var _r=Nr.flags;if(_r&2){try{e:{for(var Ur=Nr.return;Ur!==null;){if(Uj(Ur)){var jr=Ur;break e}Ur=Ur.return}throw Error(p$3(160))}switch(jr.tag){case 5:var Gr=jr.stateNode;jr.flags&32&&(ob(Gr,""),jr.flags&=-33);var Wr=Vj(Nr);Xj(Nr,Wr,Gr);break;case 3:case 4:var Zr=jr.stateNode.containerInfo,Yr=Vj(Nr);Wj(Nr,Yr,Zr);break;default:throw Error(p$3(161))}}catch(ts){W$3(Nr,Nr.return,ts)}Nr.flags&=-3}_r&4096&&(Nr.flags&=-4097)}function ik(Nr,_r,Ur){V$4=Nr,jk(Nr)}function jk(Nr,_r,Ur){for(var jr=(Nr.mode&1)!==0;V$4!==null;){var Gr=V$4,Wr=Gr.child;if(Gr.tag===22&&jr){var Zr=Gr.memoizedState!==null||Kj;if(!Zr){var Yr=Gr.alternate,ts=Yr!==null&&Yr.memoizedState!==null||U$4;Yr=Kj;var es=U$4;if(Kj=Zr,(U$4=ts)&&!es)for(V$4=Gr;V$4!==null;)Zr=V$4,ts=Zr.child,Zr.tag===22&&Zr.memoizedState!==null?kk(Gr):ts!==null?(ts.return=Zr,V$4=ts):kk(Gr);for(;Wr!==null;)V$4=Wr,jk(Wr),Wr=Wr.sibling;V$4=Gr,Kj=Yr,U$4=es}lk(Nr)}else Gr.subtreeFlags&8772&&Wr!==null?(Wr.return=Gr,V$4=Wr):lk(Nr)}}function lk(Nr){for(;V$4!==null;){var _r=V$4;if(_r.flags&8772){var Ur=_r.alternate;try{if(_r.flags&8772)switch(_r.tag){case 0:case 11:case 15:U$4||Rj(5,_r);break;case 1:var jr=_r.stateNode;if(_r.flags&4&&!U$4)if(Ur===null)jr.componentDidMount();else{var Gr=_r.elementType===_r.type?Ur.memoizedProps:Lg(_r.type,Ur.memoizedProps);jr.componentDidUpdate(Gr,Ur.memoizedState,jr.__reactInternalSnapshotBeforeUpdate)}var Wr=_r.updateQueue;Wr!==null&&ih(_r,Wr,jr);break;case 3:var Zr=_r.updateQueue;if(Zr!==null){if(Ur=null,_r.child!==null)switch(_r.child.tag){case 5:Ur=_r.child.stateNode;break;case 1:Ur=_r.child.stateNode}ih(_r,Zr,Ur)}break;case 5:var Yr=_r.stateNode;if(Ur===null&&_r.flags&4){Ur=Yr;var ts=_r.memoizedProps;switch(_r.type){case"button":case"input":case"select":case"textarea":ts.autoFocus&&Ur.focus();break;case"img":ts.src&&(Ur.src=ts.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_r.memoizedState===null){var es=_r.alternate;if(es!==null){var ns=es.memoizedState;if(ns!==null){var Xr=ns.dehydrated;Xr!==null&&bd(Xr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||_r.flags&512&&Sj(_r)}catch(qr){W$3(_r,_r.return,qr)}}if(_r===Nr){V$4=null;break}if(Ur=_r.sibling,Ur!==null){Ur.return=_r.return,V$4=Ur;break}V$4=_r.return}}function hk(Nr){for(;V$4!==null;){var _r=V$4;if(_r===Nr){V$4=null;break}var Ur=_r.sibling;if(Ur!==null){Ur.return=_r.return,V$4=Ur;break}V$4=_r.return}}function kk(Nr){for(;V$4!==null;){var _r=V$4;try{switch(_r.tag){case 0:case 11:case 15:var Ur=_r.return;try{Rj(4,_r)}catch(ts){W$3(_r,Ur,ts)}break;case 1:var jr=_r.stateNode;if(typeof jr.componentDidMount=="function"){var Gr=_r.return;try{jr.componentDidMount()}catch(ts){W$3(_r,Gr,ts)}}var Wr=_r.return;try{Sj(_r)}catch(ts){W$3(_r,Wr,ts)}break;case 5:var Zr=_r.return;try{Sj(_r)}catch(ts){W$3(_r,Zr,ts)}}}catch(ts){W$3(_r,_r.return,ts)}if(_r===Nr){V$4=null;break}var Yr=_r.sibling;if(Yr!==null){Yr.return=_r.return,V$4=Yr;break}V$4=_r.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$4=0,R$4=null,Y$4=null,Z$2=0,gj=0,fj=Uf(0),T$4=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$4&6?B$3():Bk!==-1?Bk:Bk=B$3()}function lh(Nr){return Nr.mode&1?K$4&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(Nr=C$2,Nr!==0||(Nr=window.event,Nr=Nr===void 0?16:jd(Nr.type)),Nr):1}function mh(Nr,_r,Ur,jr){if(50<zk)throw zk=0,Ak=null,Error(p$3(185));Ac(Nr,Ur,jr),(!(K$4&2)||Nr!==R$4)&&(Nr===R$4&&(!(K$4&2)&&(rk|=Ur),T$4===4&&Dk(Nr,Z$2)),Ek(Nr,jr),Ur===1&&K$4===0&&!(_r.mode&1)&&(Hj=B$3()+500,fg&&jg()))}function Ek(Nr,_r){var Ur=Nr.callbackNode;wc(Nr,_r);var jr=uc(Nr,Nr===R$4?Z$2:0);if(jr===0)Ur!==null&&bc(Ur),Nr.callbackNode=null,Nr.callbackPriority=0;else if(_r=jr&-jr,Nr.callbackPriority!==_r){if(Ur!=null&&bc(Ur),_r===1)Nr.tag===0?ig(Fk.bind(null,Nr)):hg(Fk.bind(null,Nr)),Jf(function(){!(K$4&6)&&jg()}),Ur=null;else{switch(Dc(jr)){case 1:Ur=fc;break;case 4:Ur=gc;break;case 16:Ur=hc;break;case 536870912:Ur=jc;break;default:Ur=hc}Ur=Gk(Ur,Hk.bind(null,Nr))}Nr.callbackPriority=_r,Nr.callbackNode=Ur}}function Hk(Nr,_r){if(Bk=-1,Ck=0,K$4&6)throw Error(p$3(327));var Ur=Nr.callbackNode;if(Ik()&&Nr.callbackNode!==Ur)return null;var jr=uc(Nr,Nr===R$4?Z$2:0);if(jr===0)return null;if(jr&30||jr&Nr.expiredLanes||_r)_r=Jk(Nr,jr);else{_r=jr;var Gr=K$4;K$4|=2;var Wr=Kk();(R$4!==Nr||Z$2!==_r)&&(vk=null,Hj=B$3()+500,Lk(Nr,_r));do try{Mk();break}catch(Yr){Nk(Nr,Yr)}while(1);Qg(),nk.current=Wr,K$4=Gr,Y$4!==null?_r=0:(R$4=null,Z$2=0,_r=T$4)}if(_r!==0){if(_r===2&&(Gr=xc(Nr),Gr!==0&&(jr=Gr,_r=Ok(Nr,Gr))),_r===1)throw Ur=qk,Lk(Nr,0),Dk(Nr,jr),Ek(Nr,B$3()),Ur;if(_r===6)Dk(Nr,jr);else{if(Gr=Nr.current.alternate,!(jr&30)&&!Pk(Gr)&&(_r=Jk(Nr,jr),_r===2&&(Wr=xc(Nr),Wr!==0&&(jr=Wr,_r=Ok(Nr,Wr))),_r===1))throw Ur=qk,Lk(Nr,0),Dk(Nr,jr),Ek(Nr,B$3()),Ur;switch(Nr.finishedWork=Gr,Nr.finishedLanes=jr,_r){case 0:case 1:throw Error(p$3(345));case 2:Qk(Nr,uk,vk);break;case 3:if(Dk(Nr,jr),(jr&130023424)===jr&&(_r=gk+500-B$3(),10<_r)){if(uc(Nr,0)!==0)break;if(Gr=Nr.suspendedLanes,(Gr&jr)!==jr){L$2(),Nr.pingedLanes|=Nr.suspendedLanes&Gr;break}Nr.timeoutHandle=Ff(Qk.bind(null,Nr,uk,vk),_r);break}Qk(Nr,uk,vk);break;case 4:if(Dk(Nr,jr),(jr&4194240)===jr)break;for(_r=Nr.eventTimes,Gr=-1;0<jr;){var Zr=31-oc(jr);Wr=1<<Zr,Zr=_r[Zr],Zr>Gr&&(Gr=Zr),jr&=~Wr}if(jr=Gr,jr=B$3()-jr,jr=(120>jr?120:480>jr?480:1080>jr?1080:1920>jr?1920:3e3>jr?3e3:4320>jr?4320:1960*mk(jr/1960))-jr,10<jr){Nr.timeoutHandle=Ff(Qk.bind(null,Nr,uk,vk),jr);break}Qk(Nr,uk,vk);break;case 5:Qk(Nr,uk,vk);break;default:throw Error(p$3(329))}}}return Ek(Nr,B$3()),Nr.callbackNode===Ur?Hk.bind(null,Nr):null}function Ok(Nr,_r){var Ur=tk;return Nr.current.memoizedState.isDehydrated&&(Lk(Nr,_r).flags|=256),Nr=Jk(Nr,_r),Nr!==2&&(_r=uk,uk=Ur,_r!==null&&Gj(_r)),Nr}function Gj(Nr){uk===null?uk=Nr:uk.push.apply(uk,Nr)}function Pk(Nr){for(var _r=Nr;;){if(_r.flags&16384){var Ur=_r.updateQueue;if(Ur!==null&&(Ur=Ur.stores,Ur!==null))for(var jr=0;jr<Ur.length;jr++){var Gr=Ur[jr],Wr=Gr.getSnapshot;Gr=Gr.value;try{if(!He$2(Wr(),Gr))return!1}catch{return!1}}}if(Ur=_r.child,_r.subtreeFlags&16384&&Ur!==null)Ur.return=_r,_r=Ur;else{if(_r===Nr)break;for(;_r.sibling===null;){if(_r.return===null||_r.return===Nr)return!0;_r=_r.return}_r.sibling.return=_r.return,_r=_r.sibling}}return!0}function Dk(Nr,_r){for(_r&=~sk,_r&=~rk,Nr.suspendedLanes|=_r,Nr.pingedLanes&=~_r,Nr=Nr.expirationTimes;0<_r;){var Ur=31-oc(_r),jr=1<<Ur;Nr[Ur]=-1,_r&=~jr}}function Fk(Nr){if(K$4&6)throw Error(p$3(327));Ik();var _r=uc(Nr,0);if(!(_r&1))return Ek(Nr,B$3()),null;var Ur=Jk(Nr,_r);if(Nr.tag!==0&&Ur===2){var jr=xc(Nr);jr!==0&&(_r=jr,Ur=Ok(Nr,jr))}if(Ur===1)throw Ur=qk,Lk(Nr,0),Dk(Nr,_r),Ek(Nr,B$3()),Ur;if(Ur===6)throw Error(p$3(345));return Nr.finishedWork=Nr.current.alternate,Nr.finishedLanes=_r,Qk(Nr,uk,vk),Ek(Nr,B$3()),null}function Rk(Nr,_r){var Ur=K$4;K$4|=1;try{return Nr(_r)}finally{K$4=Ur,K$4===0&&(Hj=B$3()+500,fg&&jg())}}function Sk(Nr){xk!==null&&xk.tag===0&&!(K$4&6)&&Ik();var _r=K$4;K$4|=1;var Ur=pk.transition,jr=C$2;try{if(pk.transition=null,C$2=1,Nr)return Nr()}finally{C$2=jr,pk.transition=Ur,K$4=_r,!(K$4&6)&&jg()}}function Ij(){gj=fj.current,E$3(fj)}function Lk(Nr,_r){Nr.finishedWork=null,Nr.finishedLanes=0;var Ur=Nr.timeoutHandle;if(Ur!==-1&&(Nr.timeoutHandle=-1,Gf(Ur)),Y$4!==null)for(Ur=Y$4.return;Ur!==null;){var jr=Ur;switch(wg(jr),jr.tag){case 1:jr=jr.type.childContextTypes,jr!=null&&$f();break;case 3:Jh(),E$3(Wf),E$3(H$3),Oh();break;case 5:Lh(jr);break;case 4:Jh();break;case 13:E$3(M$3);break;case 19:E$3(M$3);break;case 10:Rg(jr.type._context);break;case 22:case 23:Ij()}Ur=Ur.return}if(R$4=Nr,Y$4=Nr=wh(Nr.current,null),Z$2=gj=_r,T$4=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_r=0;_r<Wg.length;_r++)if(Ur=Wg[_r],jr=Ur.interleaved,jr!==null){Ur.interleaved=null;var Gr=jr.next,Wr=Ur.pending;if(Wr!==null){var Zr=Wr.next;Wr.next=Gr,jr.next=Zr}Ur.pending=jr}Wg=null}return Nr}function Nk(Nr,_r){do{var Ur=Y$4;try{if(Qg(),Ph.current=ai,Sh){for(var jr=N$4.memoizedState;jr!==null;){var Gr=jr.queue;Gr!==null&&(Gr.pending=null),jr=jr.next}Sh=!1}if(Rh=0,P$4=O$4=N$4=null,Th=!1,Uh=0,ok.current=null,Ur===null||Ur.return===null){T$4=1,qk=_r,Y$4=null;break}e:{var Wr=Nr,Zr=Ur.return,Yr=Ur,ts=_r;if(_r=Z$2,Yr.flags|=32768,ts!==null&&typeof ts=="object"&&typeof ts.then=="function"){var es=ts,ns=Yr,Xr=ns.tag;if(!(ns.mode&1)&&(Xr===0||Xr===11||Xr===15)){var qr=ns.alternate;qr?(ns.updateQueue=qr.updateQueue,ns.memoizedState=qr.memoizedState,ns.lanes=qr.lanes):(ns.updateQueue=null,ns.memoizedState=null)}var _i=Vi(Zr);if(_i!==null){_i.flags&=-257,Wi(_i,Zr,Yr,Wr,_r),_i.mode&1&&Ti(Wr,es,_r),_r=_i,ts=es;var rs=_r.updateQueue;if(rs===null){var is=new Set;is.add(ts),_r.updateQueue=is}else rs.add(ts);break e}else{if(!(_r&1)){Ti(Wr,es,_r),uj();break e}ts=Error(p$3(426))}}else if(I$4&&Yr.mode&1){var ss=Vi(Zr);if(ss!==null){!(ss.flags&65536)&&(ss.flags|=256),Wi(ss,Zr,Yr,Wr,_r),Jg(Ki(ts,Yr));break e}}Wr=ts=Ki(ts,Yr),T$4!==4&&(T$4=2),tk===null?tk=[Wr]:tk.push(Wr),Wr=Zr;do{switch(Wr.tag){case 3:Wr.flags|=65536,_r&=-_r,Wr.lanes|=_r;var os=Oi(Wr,ts,_r);fh(Wr,os);break e;case 1:Yr=ts;var ls=Wr.type,cs=Wr.stateNode;if(!(Wr.flags&128)&&(typeof ls.getDerivedStateFromError=="function"||cs!==null&&typeof cs.componentDidCatch=="function"&&(Si===null||!Si.has(cs)))){Wr.flags|=65536,_r&=-_r,Wr.lanes|=_r;var ds=Ri(Wr,Yr,_r);fh(Wr,ds);break e}}Wr=Wr.return}while(Wr!==null)}Tk(Ur)}catch(fs){_r=fs,Y$4===Ur&&Ur!==null&&(Y$4=Ur=Ur.return);continue}break}while(1)}function Kk(){var Nr=nk.current;return nk.current=ai,Nr===null?ai:Nr}function uj(){(T$4===0||T$4===3||T$4===2)&&(T$4=4),R$4===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$4,Z$2)}function Jk(Nr,_r){var Ur=K$4;K$4|=2;var jr=Kk();(R$4!==Nr||Z$2!==_r)&&(vk=null,Lk(Nr,_r));do try{Uk();break}catch(Gr){Nk(Nr,Gr)}while(1);if(Qg(),K$4=Ur,nk.current=jr,Y$4!==null)throw Error(p$3(261));return R$4=null,Z$2=0,T$4}function Uk(){for(;Y$4!==null;)Vk(Y$4)}function Mk(){for(;Y$4!==null&&!cc();)Vk(Y$4)}function Vk(Nr){var _r=Wk(Nr.alternate,Nr,gj);Nr.memoizedProps=Nr.pendingProps,_r===null?Tk(Nr):Y$4=_r,ok.current=null}function Tk(Nr){var _r=Nr;do{var Ur=_r.alternate;if(Nr=_r.return,_r.flags&32768){if(Ur=Jj(Ur,_r),Ur!==null){Ur.flags&=32767,Y$4=Ur;return}if(Nr!==null)Nr.flags|=32768,Nr.subtreeFlags=0,Nr.deletions=null;else{T$4=6,Y$4=null;return}}else if(Ur=Fj(Ur,_r,gj),Ur!==null){Y$4=Ur;return}if(_r=_r.sibling,_r!==null){Y$4=_r;return}Y$4=_r=Nr}while(_r!==null);T$4===0&&(T$4=5)}function Qk(Nr,_r,Ur){var jr=C$2,Gr=pk.transition;try{pk.transition=null,C$2=1,Xk(Nr,_r,Ur,jr)}finally{pk.transition=Gr,C$2=jr}return null}function Xk(Nr,_r,Ur,jr){do Ik();while(xk!==null);if(K$4&6)throw Error(p$3(327));Ur=Nr.finishedWork;var Gr=Nr.finishedLanes;if(Ur===null)return null;if(Nr.finishedWork=null,Nr.finishedLanes=0,Ur===Nr.current)throw Error(p$3(177));Nr.callbackNode=null,Nr.callbackPriority=0;var Wr=Ur.lanes|Ur.childLanes;if(Bc(Nr,Wr),Nr===R$4&&(Y$4=R$4=null,Z$2=0),!(Ur.subtreeFlags&2064)&&!(Ur.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),Wr=(Ur.flags&15990)!==0,Ur.subtreeFlags&15990||Wr){Wr=pk.transition,pk.transition=null;var Zr=C$2;C$2=1;var Yr=K$4;K$4|=4,ok.current=null,Pj(Nr,Ur),ek(Ur,Nr),Oe$2(Df),dd=!!Cf,Df=Cf=null,Nr.current=Ur,ik(Ur),dc(),K$4=Yr,C$2=Zr,pk.transition=Wr}else Nr.current=Ur;if(wk&&(wk=!1,xk=Nr,yk=Gr),Wr=Nr.pendingLanes,Wr===0&&(Si=null),mc(Ur.stateNode),Ek(Nr,B$3()),_r!==null)for(jr=Nr.onRecoverableError,Ur=0;Ur<_r.length;Ur++)Gr=_r[Ur],jr(Gr.value,{componentStack:Gr.stack,digest:Gr.digest});if(Pi)throw Pi=!1,Nr=Qi,Qi=null,Nr;return yk&1&&Nr.tag!==0&&Ik(),Wr=Nr.pendingLanes,Wr&1?Nr===Ak?zk++:(zk=0,Ak=Nr):zk=0,jg(),null}function Ik(){if(xk!==null){var Nr=Dc(yk),_r=pk.transition,Ur=C$2;try{if(pk.transition=null,C$2=16>Nr?16:Nr,xk===null)var jr=!1;else{if(Nr=xk,xk=null,yk=0,K$4&6)throw Error(p$3(331));var Gr=K$4;for(K$4|=4,V$4=Nr.current;V$4!==null;){var Wr=V$4,Zr=Wr.child;if(V$4.flags&16){var Yr=Wr.deletions;if(Yr!==null){for(var ts=0;ts<Yr.length;ts++){var es=Yr[ts];for(V$4=es;V$4!==null;){var ns=V$4;switch(ns.tag){case 0:case 11:case 15:Qj(8,ns,Wr)}var Xr=ns.child;if(Xr!==null)Xr.return=ns,V$4=Xr;else for(;V$4!==null;){ns=V$4;var qr=ns.sibling,_i=ns.return;if(Tj(ns),ns===es){V$4=null;break}if(qr!==null){qr.return=_i,V$4=qr;break}V$4=_i}}}var rs=Wr.alternate;if(rs!==null){var is=rs.child;if(is!==null){rs.child=null;do{var ss=is.sibling;is.sibling=null,is=ss}while(is!==null)}}V$4=Wr}}if(Wr.subtreeFlags&2064&&Zr!==null)Zr.return=Wr,V$4=Zr;else e:for(;V$4!==null;){if(Wr=V$4,Wr.flags&2048)switch(Wr.tag){case 0:case 11:case 15:Qj(9,Wr,Wr.return)}var os=Wr.sibling;if(os!==null){os.return=Wr.return,V$4=os;break e}V$4=Wr.return}}var ls=Nr.current;for(V$4=ls;V$4!==null;){Zr=V$4;var cs=Zr.child;if(Zr.subtreeFlags&2064&&cs!==null)cs.return=Zr,V$4=cs;else e:for(Zr=ls;V$4!==null;){if(Yr=V$4,Yr.flags&2048)try{switch(Yr.tag){case 0:case 11:case 15:Rj(9,Yr)}}catch(fs){W$3(Yr,Yr.return,fs)}if(Yr===Zr){V$4=null;break e}var ds=Yr.sibling;if(ds!==null){ds.return=Yr.return,V$4=ds;break e}V$4=Yr.return}}if(K$4=Gr,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,Nr)}catch{}jr=!0}return jr}finally{C$2=Ur,pk.transition=_r}}return!1}function Yk(Nr,_r,Ur){_r=Ki(Ur,_r),_r=Oi(Nr,_r,1),Nr=dh(Nr,_r,1),_r=L$2(),Nr!==null&&(Ac(Nr,1,_r),Ek(Nr,_r))}function W$3(Nr,_r,Ur){if(Nr.tag===3)Yk(Nr,Nr,Ur);else for(;_r!==null;){if(_r.tag===3){Yk(_r,Nr,Ur);break}else if(_r.tag===1){var jr=_r.stateNode;if(typeof _r.type.getDerivedStateFromError=="function"||typeof jr.componentDidCatch=="function"&&(Si===null||!Si.has(jr))){Nr=Ki(Ur,Nr),Nr=Ri(_r,Nr,1),_r=dh(_r,Nr,1),Nr=L$2(),_r!==null&&(Ac(_r,1,Nr),Ek(_r,Nr));break}}_r=_r.return}}function Ui(Nr,_r,Ur){var jr=Nr.pingCache;jr!==null&&jr.delete(_r),_r=L$2(),Nr.pingedLanes|=Nr.suspendedLanes&Ur,R$4===Nr&&(Z$2&Ur)===Ur&&(T$4===4||T$4===3&&(Z$2&130023424)===Z$2&&500>B$3()-gk?Lk(Nr,0):sk|=Ur),Ek(Nr,_r)}function Zk(Nr,_r){_r===0&&(Nr.mode&1?(_r=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_r=1);var Ur=L$2();Nr=Zg(Nr,_r),Nr!==null&&(Ac(Nr,_r,Ur),Ek(Nr,Ur))}function vj(Nr){var _r=Nr.memoizedState,Ur=0;_r!==null&&(Ur=_r.retryLane),Zk(Nr,Ur)}function ck(Nr,_r){var Ur=0;switch(Nr.tag){case 13:var jr=Nr.stateNode,Gr=Nr.memoizedState;Gr!==null&&(Ur=Gr.retryLane);break;case 19:jr=Nr.stateNode;break;default:throw Error(p$3(314))}jr!==null&&jr.delete(_r),Zk(Nr,Ur)}var Wk;Wk=function(Nr,_r,Ur){if(Nr!==null)if(Nr.memoizedProps!==_r.pendingProps||Wf.current)Ug=!0;else{if(!(Nr.lanes&Ur)&&!(_r.flags&128))return Ug=!1,zj(Nr,_r,Ur);Ug=!!(Nr.flags&131072)}else Ug=!1,I$4&&_r.flags&1048576&&ug(_r,ng,_r.index);switch(_r.lanes=0,_r.tag){case 2:var jr=_r.type;jj(Nr,_r),Nr=_r.pendingProps;var Gr=Yf(_r,H$3.current);Tg(_r,Ur),Gr=Xh(null,_r,jr,Nr,Gr,Ur);var Wr=bi();return _r.flags|=1,typeof Gr=="object"&&Gr!==null&&typeof Gr.render=="function"&&Gr.$$typeof===void 0?(_r.tag=1,_r.memoizedState=null,_r.updateQueue=null,Zf(jr)?(Wr=!0,cg(_r)):Wr=!1,_r.memoizedState=Gr.state!==null&&Gr.state!==void 0?Gr.state:null,ah(_r),Gr.updater=nh,_r.stateNode=Gr,Gr._reactInternals=_r,rh(_r,jr,Nr,Ur),_r=kj(null,_r,jr,!0,Wr,Ur)):(_r.tag=0,I$4&&Wr&&vg(_r),Yi(null,_r,Gr,Ur),_r=_r.child),_r;case 16:jr=_r.elementType;e:{switch(jj(Nr,_r),Nr=_r.pendingProps,Gr=jr._init,jr=Gr(jr._payload),_r.type=jr,Gr=_r.tag=$k(jr),Nr=Lg(jr,Nr),Gr){case 0:_r=dj(null,_r,jr,Nr,Ur);break e;case 1:_r=ij(null,_r,jr,Nr,Ur);break e;case 11:_r=Zi(null,_r,jr,Nr,Ur);break e;case 14:_r=aj(null,_r,jr,Lg(jr.type,Nr),Ur);break e}throw Error(p$3(306,jr,""))}return _r;case 0:return jr=_r.type,Gr=_r.pendingProps,Gr=_r.elementType===jr?Gr:Lg(jr,Gr),dj(Nr,_r,jr,Gr,Ur);case 1:return jr=_r.type,Gr=_r.pendingProps,Gr=_r.elementType===jr?Gr:Lg(jr,Gr),ij(Nr,_r,jr,Gr,Ur);case 3:e:{if(lj(_r),Nr===null)throw Error(p$3(387));jr=_r.pendingProps,Wr=_r.memoizedState,Gr=Wr.element,bh(Nr,_r),gh(_r,jr,null,Ur);var Zr=_r.memoizedState;if(jr=Zr.element,Wr.isDehydrated)if(Wr={element:jr,isDehydrated:!1,cache:Zr.cache,pendingSuspenseBoundaries:Zr.pendingSuspenseBoundaries,transitions:Zr.transitions},_r.updateQueue.baseState=Wr,_r.memoizedState=Wr,_r.flags&256){Gr=Ki(Error(p$3(423)),_r),_r=mj(Nr,_r,jr,Ur,Gr);break e}else if(jr!==Gr){Gr=Ki(Error(p$3(424)),_r),_r=mj(Nr,_r,jr,Ur,Gr);break e}else for(yg=Lf(_r.stateNode.containerInfo.firstChild),xg=_r,I$4=!0,zg=null,Ur=Ch(_r,null,jr,Ur),_r.child=Ur;Ur;)Ur.flags=Ur.flags&-3|4096,Ur=Ur.sibling;else{if(Ig(),jr===Gr){_r=$i(Nr,_r,Ur);break e}Yi(Nr,_r,jr,Ur)}_r=_r.child}return _r;case 5:return Kh(_r),Nr===null&&Eg(_r),jr=_r.type,Gr=_r.pendingProps,Wr=Nr!==null?Nr.memoizedProps:null,Zr=Gr.children,Ef(jr,Gr)?Zr=null:Wr!==null&&Ef(jr,Wr)&&(_r.flags|=32),hj(Nr,_r),Yi(Nr,_r,Zr,Ur),_r.child;case 6:return Nr===null&&Eg(_r),null;case 13:return pj(Nr,_r,Ur);case 4:return Ih(_r,_r.stateNode.containerInfo),jr=_r.pendingProps,Nr===null?_r.child=Bh(_r,null,jr,Ur):Yi(Nr,_r,jr,Ur),_r.child;case 11:return jr=_r.type,Gr=_r.pendingProps,Gr=_r.elementType===jr?Gr:Lg(jr,Gr),Zi(Nr,_r,jr,Gr,Ur);case 7:return Yi(Nr,_r,_r.pendingProps,Ur),_r.child;case 8:return Yi(Nr,_r,_r.pendingProps.children,Ur),_r.child;case 12:return Yi(Nr,_r,_r.pendingProps.children,Ur),_r.child;case 10:e:{if(jr=_r.type._context,Gr=_r.pendingProps,Wr=_r.memoizedProps,Zr=Gr.value,G$4(Mg,jr._currentValue),jr._currentValue=Zr,Wr!==null)if(He$2(Wr.value,Zr)){if(Wr.children===Gr.children&&!Wf.current){_r=$i(Nr,_r,Ur);break e}}else for(Wr=_r.child,Wr!==null&&(Wr.return=_r);Wr!==null;){var Yr=Wr.dependencies;if(Yr!==null){Zr=Wr.child;for(var ts=Yr.firstContext;ts!==null;){if(ts.context===jr){if(Wr.tag===1){ts=ch(-1,Ur&-Ur),ts.tag=2;var es=Wr.updateQueue;if(es!==null){es=es.shared;var ns=es.pending;ns===null?ts.next=ts:(ts.next=ns.next,ns.next=ts),es.pending=ts}}Wr.lanes|=Ur,ts=Wr.alternate,ts!==null&&(ts.lanes|=Ur),Sg(Wr.return,Ur,_r),Yr.lanes|=Ur;break}ts=ts.next}}else if(Wr.tag===10)Zr=Wr.type===_r.type?null:Wr.child;else if(Wr.tag===18){if(Zr=Wr.return,Zr===null)throw Error(p$3(341));Zr.lanes|=Ur,Yr=Zr.alternate,Yr!==null&&(Yr.lanes|=Ur),Sg(Zr,Ur,_r),Zr=Wr.sibling}else Zr=Wr.child;if(Zr!==null)Zr.return=Wr;else for(Zr=Wr;Zr!==null;){if(Zr===_r){Zr=null;break}if(Wr=Zr.sibling,Wr!==null){Wr.return=Zr.return,Zr=Wr;break}Zr=Zr.return}Wr=Zr}Yi(Nr,_r,Gr.children,Ur),_r=_r.child}return _r;case 9:return Gr=_r.type,jr=_r.pendingProps.children,Tg(_r,Ur),Gr=Vg(Gr),jr=jr(Gr),_r.flags|=1,Yi(Nr,_r,jr,Ur),_r.child;case 14:return jr=_r.type,Gr=Lg(jr,_r.pendingProps),Gr=Lg(jr.type,Gr),aj(Nr,_r,jr,Gr,Ur);case 15:return cj(Nr,_r,_r.type,_r.pendingProps,Ur);case 17:return jr=_r.type,Gr=_r.pendingProps,Gr=_r.elementType===jr?Gr:Lg(jr,Gr),jj(Nr,_r),_r.tag=1,Zf(jr)?(Nr=!0,cg(_r)):Nr=!1,Tg(_r,Ur),ph(_r,jr,Gr),rh(_r,jr,Gr,Ur),kj(null,_r,jr,!0,Nr,Ur);case 19:return yj(Nr,_r,Ur);case 22:return ej(Nr,_r,Ur)}throw Error(p$3(156,_r.tag))};function Gk(Nr,_r){return ac(Nr,_r)}function al(Nr,_r,Ur,jr){this.tag=Nr,this.key=Ur,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=jr,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(Nr,_r,Ur,jr){return new al(Nr,_r,Ur,jr)}function bj(Nr){return Nr=Nr.prototype,!(!Nr||!Nr.isReactComponent)}function $k(Nr){if(typeof Nr=="function")return bj(Nr)?1:0;if(Nr!=null){if(Nr=Nr.$$typeof,Nr===Da)return 11;if(Nr===Ga)return 14}return 2}function wh(Nr,_r){var Ur=Nr.alternate;return Ur===null?(Ur=Bg(Nr.tag,_r,Nr.key,Nr.mode),Ur.elementType=Nr.elementType,Ur.type=Nr.type,Ur.stateNode=Nr.stateNode,Ur.alternate=Nr,Nr.alternate=Ur):(Ur.pendingProps=_r,Ur.type=Nr.type,Ur.flags=0,Ur.subtreeFlags=0,Ur.deletions=null),Ur.flags=Nr.flags&14680064,Ur.childLanes=Nr.childLanes,Ur.lanes=Nr.lanes,Ur.child=Nr.child,Ur.memoizedProps=Nr.memoizedProps,Ur.memoizedState=Nr.memoizedState,Ur.updateQueue=Nr.updateQueue,_r=Nr.dependencies,Ur.dependencies=_r===null?null:{lanes:_r.lanes,firstContext:_r.firstContext},Ur.sibling=Nr.sibling,Ur.index=Nr.index,Ur.ref=Nr.ref,Ur}function yh(Nr,_r,Ur,jr,Gr,Wr){var Zr=2;if(jr=Nr,typeof Nr=="function")bj(Nr)&&(Zr=1);else if(typeof Nr=="string")Zr=5;else e:switch(Nr){case ya:return Ah(Ur.children,Gr,Wr,_r);case za:Zr=8,Gr|=8;break;case Aa:return Nr=Bg(12,Ur,_r,Gr|2),Nr.elementType=Aa,Nr.lanes=Wr,Nr;case Ea:return Nr=Bg(13,Ur,_r,Gr),Nr.elementType=Ea,Nr.lanes=Wr,Nr;case Fa:return Nr=Bg(19,Ur,_r,Gr),Nr.elementType=Fa,Nr.lanes=Wr,Nr;case Ia:return qj(Ur,Gr,Wr,_r);default:if(typeof Nr=="object"&&Nr!==null)switch(Nr.$$typeof){case Ba:Zr=10;break e;case Ca:Zr=9;break e;case Da:Zr=11;break e;case Ga:Zr=14;break e;case Ha:Zr=16,jr=null;break e}throw Error(p$3(130,Nr==null?Nr:typeof Nr,""))}return _r=Bg(Zr,Ur,_r,Gr),_r.elementType=Nr,_r.type=jr,_r.lanes=Wr,_r}function Ah(Nr,_r,Ur,jr){return Nr=Bg(7,Nr,jr,_r),Nr.lanes=Ur,Nr}function qj(Nr,_r,Ur,jr){return Nr=Bg(22,Nr,jr,_r),Nr.elementType=Ia,Nr.lanes=Ur,Nr.stateNode={isHidden:!1},Nr}function xh(Nr,_r,Ur){return Nr=Bg(6,Nr,null,_r),Nr.lanes=Ur,Nr}function zh(Nr,_r,Ur){return _r=Bg(4,Nr.children!==null?Nr.children:[],Nr.key,_r),_r.lanes=Ur,_r.stateNode={containerInfo:Nr.containerInfo,pendingChildren:null,implementation:Nr.implementation},_r}function bl(Nr,_r,Ur,jr,Gr){this.tag=_r,this.containerInfo=Nr,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=jr,this.onRecoverableError=Gr,this.mutableSourceEagerHydrationData=null}function cl(Nr,_r,Ur,jr,Gr,Wr,Zr,Yr,ts){return Nr=new bl(Nr,_r,Ur,Yr,ts),_r===1?(_r=1,Wr===!0&&(_r|=8)):_r=0,Wr=Bg(3,null,null,_r),Nr.current=Wr,Wr.stateNode=Nr,Wr.memoizedState={element:jr,isDehydrated:Ur,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(Wr),Nr}function dl(Nr,_r,Ur){var jr=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:jr==null?null:""+jr,children:Nr,containerInfo:_r,implementation:Ur}}function el(Nr){if(!Nr)return Vf;Nr=Nr._reactInternals;e:{if(Vb(Nr)!==Nr||Nr.tag!==1)throw Error(p$3(170));var _r=Nr;do{switch(_r.tag){case 3:_r=_r.stateNode.context;break e;case 1:if(Zf(_r.type)){_r=_r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_r=_r.return}while(_r!==null);throw Error(p$3(171))}if(Nr.tag===1){var Ur=Nr.type;if(Zf(Ur))return bg(Nr,Ur,_r)}return _r}function fl(Nr,_r,Ur,jr,Gr,Wr,Zr,Yr,ts){return Nr=cl(Ur,jr,!0,Nr,Gr,Wr,Zr,Yr,ts),Nr.context=el(null),Ur=Nr.current,jr=L$2(),Gr=lh(Ur),Wr=ch(jr,Gr),Wr.callback=_r??null,dh(Ur,Wr,Gr),Nr.current.lanes=Gr,Ac(Nr,Gr,jr),Ek(Nr,jr),Nr}function gl(Nr,_r,Ur,jr){var Gr=_r.current,Wr=L$2(),Zr=lh(Gr);return Ur=el(Ur),_r.context===null?_r.context=Ur:_r.pendingContext=Ur,_r=ch(Wr,Zr),_r.payload={element:Nr},jr=jr===void 0?null:jr,jr!==null&&(_r.callback=jr),Nr=dh(Gr,_r,Zr),Nr!==null&&(mh(Nr,Gr,Zr,Wr),eh(Nr,Gr,Zr)),Zr}function hl(Nr){if(Nr=Nr.current,!Nr.child)return null;switch(Nr.child.tag){case 5:return Nr.child.stateNode;default:return Nr.child.stateNode}}function il(Nr,_r){if(Nr=Nr.memoizedState,Nr!==null&&Nr.dehydrated!==null){var Ur=Nr.retryLane;Nr.retryLane=Ur!==0&&Ur<_r?Ur:_r}}function jl(Nr,_r){il(Nr,_r),(Nr=Nr.alternate)&&il(Nr,_r)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(Nr){console.error(Nr)};function ml(Nr){this._internalRoot=Nr}nl.prototype.render=ml.prototype.render=function(Nr){var _r=this._internalRoot;if(_r===null)throw Error(p$3(409));gl(Nr,_r,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var Nr=this._internalRoot;if(Nr!==null){this._internalRoot=null;var _r=Nr.containerInfo;Sk(function(){gl(null,Nr,null,null)}),_r[uf]=null}};function nl(Nr){this._internalRoot=Nr}nl.prototype.unstable_scheduleHydration=function(Nr){if(Nr){var _r=Hc();Nr={blockedOn:null,target:Nr,priority:_r};for(var Ur=0;Ur<Qc.length&&_r!==0&&_r<Qc[Ur].priority;Ur++);Qc.splice(Ur,0,Nr),Ur===0&&Vc(Nr)}};function ol(Nr){return!(!Nr||Nr.nodeType!==1&&Nr.nodeType!==9&&Nr.nodeType!==11)}function pl(Nr){return!(!Nr||Nr.nodeType!==1&&Nr.nodeType!==9&&Nr.nodeType!==11&&(Nr.nodeType!==8||Nr.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(Nr,_r,Ur,jr,Gr){if(Gr){if(typeof jr=="function"){var Wr=jr;jr=function(){var es=hl(Zr);Wr.call(es)}}var Zr=fl(_r,jr,Nr,0,null,!1,!1,"",ql);return Nr._reactRootContainer=Zr,Nr[uf]=Zr.current,sf(Nr.nodeType===8?Nr.parentNode:Nr),Sk(),Zr}for(;Gr=Nr.lastChild;)Nr.removeChild(Gr);if(typeof jr=="function"){var Yr=jr;jr=function(){var es=hl(ts);Yr.call(es)}}var ts=cl(Nr,0,!1,null,null,!1,!1,"",ql);return Nr._reactRootContainer=ts,Nr[uf]=ts.current,sf(Nr.nodeType===8?Nr.parentNode:Nr),Sk(function(){gl(_r,ts,Ur,jr)}),ts}function sl(Nr,_r,Ur,jr,Gr){var Wr=Ur._reactRootContainer;if(Wr){var Zr=Wr;if(typeof Gr=="function"){var Yr=Gr;Gr=function(){var ts=hl(Zr);Yr.call(ts)}}gl(_r,Zr,Nr,Gr)}else Zr=rl(Ur,_r,Nr,Gr,jr);return hl(Zr)}Ec=function(Nr){switch(Nr.tag){case 3:var _r=Nr.stateNode;if(_r.current.memoizedState.isDehydrated){var Ur=tc(_r.pendingLanes);Ur!==0&&(Cc(_r,Ur|1),Ek(_r,B$3()),!(K$4&6)&&(Hj=B$3()+500,jg()))}break;case 13:Sk(function(){var jr=Zg(Nr,1);if(jr!==null){var Gr=L$2();mh(jr,Nr,1,Gr)}}),jl(Nr,1)}};Fc=function(Nr){if(Nr.tag===13){var _r=Zg(Nr,134217728);if(_r!==null){var Ur=L$2();mh(_r,Nr,134217728,Ur)}jl(Nr,134217728)}};Gc=function(Nr){if(Nr.tag===13){var _r=lh(Nr),Ur=Zg(Nr,_r);if(Ur!==null){var jr=L$2();mh(Ur,Nr,_r,jr)}jl(Nr,_r)}};Hc=function(){return C$2};Ic=function(Nr,_r){var Ur=C$2;try{return C$2=Nr,_r()}finally{C$2=Ur}};yb=function(Nr,_r,Ur){switch(_r){case"input":if(bb(Nr,Ur),_r=Ur.name,Ur.type==="radio"&&_r!=null){for(Ur=Nr;Ur.parentNode;)Ur=Ur.parentNode;for(Ur=Ur.querySelectorAll("input[name="+JSON.stringify(""+_r)+'][type="radio"]'),_r=0;_r<Ur.length;_r++){var jr=Ur[_r];if(jr!==Nr&&jr.form===Nr.form){var Gr=Db(jr);if(!Gr)throw Error(p$3(90));Wa(jr),bb(jr,Gr)}}}break;case"textarea":ib(Nr,Ur);break;case"select":_r=Ur.value,_r!=null&&fb(Nr,!!Ur.multiple,_r,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(Nr){return Nr=Zb(Nr),Nr===null?null:Nr.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(Nr,_r){var Ur=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_r))throw Error(p$3(200));return dl(Nr,_r,null,Ur)};reactDom_production_min.createRoot=function(Nr,_r){if(!ol(Nr))throw Error(p$3(299));var Ur=!1,jr="",Gr=ll;return _r!=null&&(_r.unstable_strictMode===!0&&(Ur=!0),_r.identifierPrefix!==void 0&&(jr=_r.identifierPrefix),_r.onRecoverableError!==void 0&&(Gr=_r.onRecoverableError)),_r=cl(Nr,1,!1,null,null,Ur,!1,jr,Gr),Nr[uf]=_r.current,sf(Nr.nodeType===8?Nr.parentNode:Nr),new ml(_r)};reactDom_production_min.findDOMNode=function(Nr){if(Nr==null)return null;if(Nr.nodeType===1)return Nr;var _r=Nr._reactInternals;if(_r===void 0)throw typeof Nr.render=="function"?Error(p$3(188)):(Nr=Object.keys(Nr).join(","),Error(p$3(268,Nr)));return Nr=Zb(_r),Nr=Nr===null?null:Nr.stateNode,Nr};reactDom_production_min.flushSync=function(Nr){return Sk(Nr)};reactDom_production_min.hydrate=function(Nr,_r,Ur){if(!pl(_r))throw Error(p$3(200));return sl(null,Nr,_r,!0,Ur)};reactDom_production_min.hydrateRoot=function(Nr,_r,Ur){if(!ol(Nr))throw Error(p$3(405));var jr=Ur!=null&&Ur.hydratedSources||null,Gr=!1,Wr="",Zr=ll;if(Ur!=null&&(Ur.unstable_strictMode===!0&&(Gr=!0),Ur.identifierPrefix!==void 0&&(Wr=Ur.identifierPrefix),Ur.onRecoverableError!==void 0&&(Zr=Ur.onRecoverableError)),_r=fl(_r,null,Nr,1,Ur??null,Gr,!1,Wr,Zr),Nr[uf]=_r.current,sf(Nr),jr)for(Nr=0;Nr<jr.length;Nr++)Ur=jr[Nr],Gr=Ur._getVersion,Gr=Gr(Ur._source),_r.mutableSourceEagerHydrationData==null?_r.mutableSourceEagerHydrationData=[Ur,Gr]:_r.mutableSourceEagerHydrationData.push(Ur,Gr);return new nl(_r)};reactDom_production_min.render=function(Nr,_r,Ur){if(!pl(_r))throw Error(p$3(200));return sl(null,Nr,_r,!1,Ur)};reactDom_production_min.unmountComponentAtNode=function(Nr){if(!pl(Nr))throw Error(p$3(40));return Nr._reactRootContainer?(Sk(function(){sl(null,null,Nr,!1,function(){Nr._reactRootContainer=null,Nr[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(Nr,_r,Ur,jr){if(!pl(Ur))throw Error(p$3(200));if(Nr==null||Nr._reactInternals===void 0)throw Error(p$3(38));return sl(Nr,_r,Ur,!1,jr)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(Nr){console.error(Nr)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const $7SXl2$reactdom=getDefaultExportFromCjs$1(reactDomExports);var createRoot,m$4=reactDomExports;createRoot=m$4.createRoot,m$4.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$18(){return _extends$18=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$18.apply(this,arguments)}var Action;(function(Nr){Nr.Pop="POP",Nr.Push="PUSH",Nr.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(Nr){Nr===void 0&&(Nr={});function _r(jr,Gr){let{pathname:Wr,search:Zr,hash:Yr}=jr.location;return createLocation("",{pathname:Wr,search:Zr,hash:Yr},Gr.state&&Gr.state.usr||null,Gr.state&&Gr.state.key||"default")}function Ur(jr,Gr){return typeof Gr=="string"?Gr:createPath(Gr)}return getUrlBasedHistory(_r,Ur,null,Nr)}function invariant(Nr,_r){if(Nr===!1||Nr===null||typeof Nr>"u")throw new Error(_r)}function warning$1(Nr,_r){if(!Nr){typeof console<"u"&&console.warn(_r);try{throw new Error(_r)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(Nr,_r){return{usr:Nr.state,key:Nr.key,idx:_r}}function createLocation(Nr,_r,Ur,jr){return Ur===void 0&&(Ur=null),_extends$18({pathname:typeof Nr=="string"?Nr:Nr.pathname,search:"",hash:""},typeof _r=="string"?parsePath(_r):_r,{state:Ur,key:_r&&_r.key||jr||createKey()})}function createPath(Nr){let{pathname:_r="/",search:Ur="",hash:jr=""}=Nr;return Ur&&Ur!=="?"&&(_r+=Ur.charAt(0)==="?"?Ur:"?"+Ur),jr&&jr!=="#"&&(_r+=jr.charAt(0)==="#"?jr:"#"+jr),_r}function parsePath(Nr){let _r={};if(Nr){let Ur=Nr.indexOf("#");Ur>=0&&(_r.hash=Nr.substr(Ur),Nr=Nr.substr(0,Ur));let jr=Nr.indexOf("?");jr>=0&&(_r.search=Nr.substr(jr),Nr=Nr.substr(0,jr)),Nr&&(_r.pathname=Nr)}return _r}function getUrlBasedHistory(Nr,_r,Ur,jr){jr===void 0&&(jr={});let{window:Gr=document.defaultView,v5Compat:Wr=!1}=jr,Zr=Gr.history,Yr=Action.Pop,ts=null,es=ns();es==null&&(es=0,Zr.replaceState(_extends$18({},Zr.state,{idx:es}),""));function ns(){return(Zr.state||{idx:null}).idx}function Xr(){Yr=Action.Pop;let ss=ns(),os=ss==null?null:ss-es;es=ss,ts&&ts({action:Yr,location:is.location,delta:os})}function qr(ss,os){Yr=Action.Push;let ls=createLocation(is.location,ss,os);Ur&&Ur(ls,ss),es=ns()+1;let cs=getHistoryState(ls,es),ds=is.createHref(ls);try{Zr.pushState(cs,"",ds)}catch(fs){if(fs instanceof DOMException&&fs.name==="DataCloneError")throw fs;Gr.location.assign(ds)}Wr&&ts&&ts({action:Yr,location:is.location,delta:1})}function _i(ss,os){Yr=Action.Replace;let ls=createLocation(is.location,ss,os);Ur&&Ur(ls,ss),es=ns();let cs=getHistoryState(ls,es),ds=is.createHref(ls);Zr.replaceState(cs,"",ds),Wr&&ts&&ts({action:Yr,location:is.location,delta:0})}function rs(ss){let os=Gr.location.origin!=="null"?Gr.location.origin:Gr.location.href,ls=typeof ss=="string"?ss:createPath(ss);return invariant(os,"No window.location.(origin|href) available to create URL for href: "+ls),new URL(ls,os)}let is={get action(){return Yr},get location(){return Nr(Gr,Zr)},listen(ss){if(ts)throw new Error("A history only accepts one active listener");return Gr.addEventListener(PopStateEventType,Xr),ts=ss,()=>{Gr.removeEventListener(PopStateEventType,Xr),ts=null}},createHref(ss){return _r(Gr,ss)},createURL:rs,encodeLocation(ss){let os=rs(ss);return{pathname:os.pathname,search:os.search,hash:os.hash}},push:qr,replace:_i,go(ss){return Zr.go(ss)}};return is}var ResultType;(function(Nr){Nr.data="data",Nr.deferred="deferred",Nr.redirect="redirect",Nr.error="error"})(ResultType||(ResultType={}));function matchRoutes(Nr,_r,Ur){Ur===void 0&&(Ur="/");let jr=typeof _r=="string"?parsePath(_r):_r,Gr=stripBasename(jr.pathname||"/",Ur);if(Gr==null)return null;let Wr=flattenRoutes(Nr);rankRouteBranches(Wr);let Zr=null;for(let Yr=0;Zr==null&&Yr<Wr.length;++Yr)Zr=matchRouteBranch(Wr[Yr],safelyDecodeURI(Gr));return Zr}function flattenRoutes(Nr,_r,Ur,jr){_r===void 0&&(_r=[]),Ur===void 0&&(Ur=[]),jr===void 0&&(jr="");let Gr=(Wr,Zr,Yr)=>{let ts={relativePath:Yr===void 0?Wr.path||"":Yr,caseSensitive:Wr.caseSensitive===!0,childrenIndex:Zr,route:Wr};ts.relativePath.startsWith("/")&&(invariant(ts.relativePath.startsWith(jr),'Absolute route path "'+ts.relativePath+'" nested under path '+('"'+jr+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ts.relativePath=ts.relativePath.slice(jr.length));let es=joinPaths([jr,ts.relativePath]),ns=Ur.concat(ts);Wr.children&&Wr.children.length>0&&(invariant(Wr.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+es+'".')),flattenRoutes(Wr.children,_r,ns,es)),!(Wr.path==null&&!Wr.index)&&_r.push({path:es,score:computeScore(es,Wr.index),routesMeta:ns})};return Nr.forEach((Wr,Zr)=>{var Yr;if(Wr.path===""||!((Yr=Wr.path)!=null&&Yr.includes("?")))Gr(Wr,Zr);else for(let ts of explodeOptionalSegments(Wr.path))Gr(Wr,Zr,ts)}),_r}function explodeOptionalSegments(Nr){let _r=Nr.split("/");if(_r.length===0)return[];let[Ur,...jr]=_r,Gr=Ur.endsWith("?"),Wr=Ur.replace(/\?$/,"");if(jr.length===0)return Gr?[Wr,""]:[Wr];let Zr=explodeOptionalSegments(jr.join("/")),Yr=[];return Yr.push(...Zr.map(ts=>ts===""?Wr:[Wr,ts].join("/"))),Gr&&Yr.push(...Zr),Yr.map(ts=>Nr.startsWith("/")&&ts===""?"/":ts)}function rankRouteBranches(Nr){Nr.sort((_r,Ur)=>_r.score!==Ur.score?Ur.score-_r.score:compareIndexes(_r.routesMeta.map(jr=>jr.childrenIndex),Ur.routesMeta.map(jr=>jr.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=Nr=>Nr==="*";function computeScore(Nr,_r){let Ur=Nr.split("/"),jr=Ur.length;return Ur.some(isSplat)&&(jr+=splatPenalty),_r&&(jr+=indexRouteValue),Ur.filter(Gr=>!isSplat(Gr)).reduce((Gr,Wr)=>Gr+(paramRe.test(Wr)?dynamicSegmentValue:Wr===""?emptySegmentValue:staticSegmentValue),jr)}function compareIndexes(Nr,_r){return Nr.length===_r.length&&Nr.slice(0,-1).every((jr,Gr)=>jr===_r[Gr])?Nr[Nr.length-1]-_r[_r.length-1]:0}function matchRouteBranch(Nr,_r){let{routesMeta:Ur}=Nr,jr={},Gr="/",Wr=[];for(let Zr=0;Zr<Ur.length;++Zr){let Yr=Ur[Zr],ts=Zr===Ur.length-1,es=Gr==="/"?_r:_r.slice(Gr.length)||"/",ns=matchPath({path:Yr.relativePath,caseSensitive:Yr.caseSensitive,end:ts},es);if(!ns)return null;Object.assign(jr,ns.params);let Xr=Yr.route;Wr.push({params:jr,pathname:joinPaths([Gr,ns.pathname]),pathnameBase:normalizePathname(joinPaths([Gr,ns.pathnameBase])),route:Xr}),ns.pathnameBase!=="/"&&(Gr=joinPaths([Gr,ns.pathnameBase]))}return Wr}function matchPath(Nr,_r){typeof Nr=="string"&&(Nr={path:Nr,caseSensitive:!1,end:!0});let[Ur,jr]=compilePath(Nr.path,Nr.caseSensitive,Nr.end),Gr=_r.match(Ur);if(!Gr)return null;let Wr=Gr[0],Zr=Wr.replace(/(.)\/+$/,"$1"),Yr=Gr.slice(1);return{params:jr.reduce((es,ns,Xr)=>{let{paramName:qr,isOptional:_i}=ns;if(qr==="*"){let is=Yr[Xr]||"";Zr=Wr.slice(0,Wr.length-is.length).replace(/(.)\/+$/,"$1")}const rs=Yr[Xr];return _i&&!rs?es[qr]=void 0:es[qr]=safelyDecodeURIComponent(rs||"",qr),es},{}),pathname:Wr,pathnameBase:Zr,pattern:Nr}}function compilePath(Nr,_r,Ur){_r===void 0&&(_r=!1),Ur===void 0&&(Ur=!0),warning$1(Nr==="*"||!Nr.endsWith("*")||Nr.endsWith("/*"),'Route path "'+Nr+'" will be treated as if it were '+('"'+Nr.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+Nr.replace(/\*$/,"/*")+'".'));let jr=[],Gr="^"+Nr.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(Zr,Yr,ts)=>(jr.push({paramName:Yr,isOptional:ts!=null}),ts?"/?([^\\/]+)?":"/([^\\/]+)"));return Nr.endsWith("*")?(jr.push({paramName:"*"}),Gr+=Nr==="*"||Nr==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):Ur?Gr+="\\/*$":Nr!==""&&Nr!=="/"&&(Gr+="(?:(?=\\/|$))"),[new RegExp(Gr,_r?void 0:"i"),jr]}function safelyDecodeURI(Nr){try{return decodeURI(Nr)}catch(_r){return warning$1(!1,'The URL path "'+Nr+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+_r+").")),Nr}}function safelyDecodeURIComponent(Nr,_r){try{return decodeURIComponent(Nr)}catch(Ur){return warning$1(!1,'The value for the URL param "'+_r+'" will not be decoded because'+(' the string "'+Nr+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+Ur+").")),Nr}}function stripBasename(Nr,_r){if(_r==="/")return Nr;if(!Nr.toLowerCase().startsWith(_r.toLowerCase()))return null;let Ur=_r.endsWith("/")?_r.length-1:_r.length,jr=Nr.charAt(Ur);return jr&&jr!=="/"?null:Nr.slice(Ur)||"/"}function resolvePath(Nr,_r){_r===void 0&&(_r="/");let{pathname:Ur,search:jr="",hash:Gr=""}=typeof Nr=="string"?parsePath(Nr):Nr;return{pathname:Ur?Ur.startsWith("/")?Ur:resolvePathname(Ur,_r):_r,search:normalizeSearch(jr),hash:normalizeHash(Gr)}}function resolvePathname(Nr,_r){let Ur=_r.replace(/\/+$/,"").split("/");return Nr.split("/").forEach(Gr=>{Gr===".."?Ur.length>1&&Ur.pop():Gr!=="."&&Ur.push(Gr)}),Ur.length>1?Ur.join("/"):"/"}function getInvalidPathError(Nr,_r,Ur,jr){return"Cannot include a '"+Nr+"' character in a manually specified "+("`to."+_r+"` field ["+JSON.stringify(jr)+"].  Please separate it out to the ")+("`to."+Ur+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(Nr){return Nr.filter((_r,Ur)=>Ur===0||_r.route.path&&_r.route.path.length>0)}function resolveTo(Nr,_r,Ur,jr){jr===void 0&&(jr=!1);let Gr;typeof Nr=="string"?Gr=parsePath(Nr):(Gr=_extends$18({},Nr),invariant(!Gr.pathname||!Gr.pathname.includes("?"),getInvalidPathError("?","pathname","search",Gr)),invariant(!Gr.pathname||!Gr.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Gr)),invariant(!Gr.search||!Gr.search.includes("#"),getInvalidPathError("#","search","hash",Gr)));let Wr=Nr===""||Gr.pathname==="",Zr=Wr?"/":Gr.pathname,Yr;if(jr||Zr==null)Yr=Ur;else{let Xr=_r.length-1;if(Zr.startsWith("..")){let qr=Zr.split("/");for(;qr[0]==="..";)qr.shift(),Xr-=1;Gr.pathname=qr.join("/")}Yr=Xr>=0?_r[Xr]:"/"}let ts=resolvePath(Gr,Yr),es=Zr&&Zr!=="/"&&Zr.endsWith("/"),ns=(Wr||Zr===".")&&Ur.endsWith("/");return!ts.pathname.endsWith("/")&&(es||ns)&&(ts.pathname+="/"),ts}const joinPaths=Nr=>Nr.join("/").replace(/\/\/+/g,"/"),normalizePathname=Nr=>Nr.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=Nr=>!Nr||Nr==="?"?"":Nr.startsWith("?")?Nr:"?"+Nr,normalizeHash=Nr=>!Nr||Nr==="#"?"":Nr.startsWith("#")?Nr:"#"+Nr;function isRouteErrorResponse(Nr){return Nr!=null&&typeof Nr.status=="number"&&typeof Nr.statusText=="string"&&typeof Nr.internal=="boolean"&&"data"in Nr}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$17(){return _extends$17=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$17.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(Nr,_r){let{relative:Ur}=_r===void 0?{}:_r;useInRouterContext()||invariant(!1);let{basename:jr,navigator:Gr}=reactExports.useContext(NavigationContext),{hash:Wr,pathname:Zr,search:Yr}=useResolvedPath(Nr,{relative:Ur}),ts=Zr;return jr!=="/"&&(ts=Zr==="/"?jr:joinPaths([jr,Zr])),Gr.createHref({pathname:ts,search:Yr,hash:Wr})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useMatch(Nr){useInRouterContext()||invariant(!1);let{pathname:_r}=useLocation();return reactExports.useMemo(()=>matchPath(Nr,_r),[_r,Nr])}function useIsomorphicLayoutEffect$1(Nr){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(Nr)}function useNavigate(){let{isDataRoute:Nr}=reactExports.useContext(RouteContext);return Nr?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let Nr=reactExports.useContext(DataRouterContext),{basename:_r,navigator:Ur}=reactExports.useContext(NavigationContext),{matches:jr}=reactExports.useContext(RouteContext),{pathname:Gr}=useLocation(),Wr=JSON.stringify(getPathContributingMatches(jr).map(ts=>ts.pathnameBase)),Zr=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{Zr.current=!0}),reactExports.useCallback(function(ts,es){if(es===void 0&&(es={}),!Zr.current)return;if(typeof ts=="number"){Ur.go(ts);return}let ns=resolveTo(ts,JSON.parse(Wr),Gr,es.relative==="path");Nr==null&&_r!=="/"&&(ns.pathname=ns.pathname==="/"?_r:joinPaths([_r,ns.pathname])),(es.replace?Ur.replace:Ur.push)(ns,es.state,es)},[_r,Ur,Wr,Gr,Nr])}const OutletContext=reactExports.createContext(null);function useOutlet(Nr){let _r=reactExports.useContext(RouteContext).outlet;return _r&&reactExports.createElement(OutletContext.Provider,{value:Nr},_r)}function useResolvedPath(Nr,_r){let{relative:Ur}=_r===void 0?{}:_r,{matches:jr}=reactExports.useContext(RouteContext),{pathname:Gr}=useLocation(),Wr=JSON.stringify(getPathContributingMatches(jr).map(Zr=>Zr.pathnameBase));return reactExports.useMemo(()=>resolveTo(Nr,JSON.parse(Wr),Gr,Ur==="path"),[Nr,Wr,Gr,Ur])}function useRoutes(Nr,_r){return useRoutesImpl(Nr,_r)}function useRoutesImpl(Nr,_r,Ur){useInRouterContext()||invariant(!1);let{navigator:jr}=reactExports.useContext(NavigationContext),{matches:Gr}=reactExports.useContext(RouteContext),Wr=Gr[Gr.length-1],Zr=Wr?Wr.params:{};Wr&&Wr.pathname;let Yr=Wr?Wr.pathnameBase:"/";Wr&&Wr.route;let ts=useLocation(),es;if(_r){var ns;let is=typeof _r=="string"?parsePath(_r):_r;Yr==="/"||(ns=is.pathname)!=null&&ns.startsWith(Yr)||invariant(!1),es=is}else es=ts;let Xr=es.pathname||"/",qr=Yr==="/"?Xr:Xr.slice(Yr.length)||"/",_i=matchRoutes(Nr,{pathname:qr}),rs=_renderMatches(_i&&_i.map(is=>Object.assign({},is,{params:Object.assign({},Zr,is.params),pathname:joinPaths([Yr,jr.encodeLocation?jr.encodeLocation(is.pathname).pathname:is.pathname]),pathnameBase:is.pathnameBase==="/"?Yr:joinPaths([Yr,jr.encodeLocation?jr.encodeLocation(is.pathnameBase).pathname:is.pathnameBase])})),Gr,Ur);return _r&&rs?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$17({pathname:"/",search:"",hash:"",state:null,key:"default"},es),navigationType:Action.Pop}},rs):rs}function DefaultErrorComponent(){let Nr=useRouteError(),_r=isRouteErrorResponse(Nr)?Nr.status+" "+Nr.statusText:Nr instanceof Error?Nr.message:JSON.stringify(Nr),Ur=Nr instanceof Error?Nr.stack:null,Gr={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},Wr=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},_r),Ur?reactExports.createElement("pre",{style:Gr},Ur):null,Wr)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(_r){super(_r),this.state={location:_r.location,revalidation:_r.revalidation,error:_r.error}}static getDerivedStateFromError(_r){return{error:_r}}static getDerivedStateFromProps(_r,Ur){return Ur.location!==_r.location||Ur.revalidation!=="idle"&&_r.revalidation==="idle"?{error:_r.error,location:_r.location,revalidation:_r.revalidation}:{error:_r.error||Ur.error,location:Ur.location,revalidation:_r.revalidation||Ur.revalidation}}componentDidCatch(_r,Ur){console.error("React Router caught the following error during render",_r,Ur)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(Nr){let{routeContext:_r,match:Ur,children:jr}=Nr,Gr=reactExports.useContext(DataRouterContext);return Gr&&Gr.static&&Gr.staticContext&&(Ur.route.errorElement||Ur.route.ErrorBoundary)&&(Gr.staticContext._deepestRenderedBoundaryId=Ur.route.id),reactExports.createElement(RouteContext.Provider,{value:_r},jr)}function _renderMatches(Nr,_r,Ur){var jr;if(_r===void 0&&(_r=[]),Ur===void 0&&(Ur=null),Nr==null){var Gr;if((Gr=Ur)!=null&&Gr.errors)Nr=Ur.matches;else return null}let Wr=Nr,Zr=(jr=Ur)==null?void 0:jr.errors;if(Zr!=null){let Yr=Wr.findIndex(ts=>ts.route.id&&(Zr==null?void 0:Zr[ts.route.id]));Yr>=0||invariant(!1),Wr=Wr.slice(0,Math.min(Wr.length,Yr+1))}return Wr.reduceRight((Yr,ts,es)=>{let ns=ts.route.id?Zr==null?void 0:Zr[ts.route.id]:null,Xr=null;Ur&&(Xr=ts.route.errorElement||defaultErrorElement);let qr=_r.concat(Wr.slice(0,es+1)),_i=()=>{let rs;return ns?rs=Xr:ts.route.Component?rs=reactExports.createElement(ts.route.Component,null):ts.route.element?rs=ts.route.element:rs=Yr,reactExports.createElement(RenderedRoute,{match:ts,routeContext:{outlet:Yr,matches:qr,isDataRoute:Ur!=null},children:rs})};return Ur&&(ts.route.ErrorBoundary||ts.route.errorElement||es===0)?reactExports.createElement(RenderErrorBoundary,{location:Ur.location,revalidation:Ur.revalidation,component:Xr,error:ns,children:_i(),routeContext:{outlet:null,matches:qr,isDataRoute:!0}}):_i()},null)}var DataRouterHook$1=function(Nr){return Nr.UseBlocker="useBlocker",Nr.UseRevalidator="useRevalidator",Nr.UseNavigateStable="useNavigate",Nr}(DataRouterHook$1||{}),DataRouterStateHook$1=function(Nr){return Nr.UseBlocker="useBlocker",Nr.UseLoaderData="useLoaderData",Nr.UseActionData="useActionData",Nr.UseRouteError="useRouteError",Nr.UseNavigation="useNavigation",Nr.UseRouteLoaderData="useRouteLoaderData",Nr.UseMatches="useMatches",Nr.UseRevalidator="useRevalidator",Nr.UseNavigateStable="useNavigate",Nr.UseRouteId="useRouteId",Nr}(DataRouterStateHook$1||{});function useDataRouterContext$1(Nr){let _r=reactExports.useContext(DataRouterContext);return _r||invariant(!1),_r}function useDataRouterState(Nr){let _r=reactExports.useContext(DataRouterStateContext);return _r||invariant(!1),_r}function useRouteContext(Nr){let _r=reactExports.useContext(RouteContext);return _r||invariant(!1),_r}function useCurrentRouteId(Nr){let _r=useRouteContext(),Ur=_r.matches[_r.matches.length-1];return Ur.route.id||invariant(!1),Ur.route.id}function useRouteError(){var Nr;let _r=reactExports.useContext(RouteErrorContext),Ur=useDataRouterState(DataRouterStateHook$1.UseRouteError),jr=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return _r||((Nr=Ur.errors)==null?void 0:Nr[jr])}function useNavigateStable(){let{router:Nr}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),_r=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),Ur=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{Ur.current=!0}),reactExports.useCallback(function(Gr,Wr){Wr===void 0&&(Wr={}),Ur.current&&(typeof Gr=="number"?Nr.navigate(Gr):Nr.navigate(Gr,_extends$17({fromRouteId:_r},Wr)))},[Nr,_r])}function Outlet(Nr){return useOutlet(Nr.context)}function Route(Nr){invariant(!1)}function Router(Nr){let{basename:_r="/",children:Ur=null,location:jr,navigationType:Gr=Action.Pop,navigator:Wr,static:Zr=!1}=Nr;useInRouterContext()&&invariant(!1);let Yr=_r.replace(/^\/*/,"/"),ts=reactExports.useMemo(()=>({basename:Yr,navigator:Wr,static:Zr}),[Yr,Wr,Zr]);typeof jr=="string"&&(jr=parsePath(jr));let{pathname:es="/",search:ns="",hash:Xr="",state:qr=null,key:_i="default"}=jr,rs=reactExports.useMemo(()=>{let is=stripBasename(es,Yr);return is==null?null:{location:{pathname:is,search:ns,hash:Xr,state:qr,key:_i},navigationType:Gr}},[Yr,es,ns,Xr,qr,_i,Gr]);return rs==null?null:reactExports.createElement(NavigationContext.Provider,{value:ts},reactExports.createElement(LocationContext.Provider,{children:Ur,value:rs}))}function Routes(Nr){let{children:_r,location:Ur}=Nr;return useRoutes(createRoutesFromChildren(_r),Ur)}new Promise(()=>{});function createRoutesFromChildren(Nr,_r){_r===void 0&&(_r=[]);let Ur=[];return reactExports.Children.forEach(Nr,(jr,Gr)=>{if(!reactExports.isValidElement(jr))return;let Wr=[..._r,Gr];if(jr.type===reactExports.Fragment){Ur.push.apply(Ur,createRoutesFromChildren(jr.props.children,Wr));return}jr.type!==Route&&invariant(!1),!jr.props.index||!jr.props.children||invariant(!1);let Zr={id:jr.props.id||Wr.join("-"),caseSensitive:jr.props.caseSensitive,element:jr.props.element,Component:jr.props.Component,index:jr.props.index,path:jr.props.path,loader:jr.props.loader,action:jr.props.action,errorElement:jr.props.errorElement,ErrorBoundary:jr.props.ErrorBoundary,hasErrorBoundary:jr.props.ErrorBoundary!=null||jr.props.errorElement!=null,shouldRevalidate:jr.props.shouldRevalidate,handle:jr.props.handle,lazy:jr.props.lazy};jr.props.children&&(Zr.children=createRoutesFromChildren(jr.props.children,Wr)),Ur.push(Zr)}),Ur}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$16(){return _extends$16=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$16.apply(this,arguments)}function _objectWithoutPropertiesLoose(Nr,_r){if(Nr==null)return{};var Ur={},jr=Object.keys(Nr),Gr,Wr;for(Wr=0;Wr<jr.length;Wr++)Gr=jr[Wr],!(_r.indexOf(Gr)>=0)&&(Ur[Gr]=Nr[Gr]);return Ur}function isModifiedEvent(Nr){return!!(Nr.metaKey||Nr.altKey||Nr.ctrlKey||Nr.shiftKey)}function shouldProcessLinkClick(Nr,_r){return Nr.button===0&&(!_r||_r==="_self")&&!isModifiedEvent(Nr)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),START_TRANSITION="startTransition",startTransitionImpl=$2AODx$react[START_TRANSITION];function BrowserRouter(Nr){let{basename:_r,children:Ur,future:jr,window:Gr}=Nr,Wr=reactExports.useRef();Wr.current==null&&(Wr.current=createBrowserHistory({window:Gr,v5Compat:!0}));let Zr=Wr.current,[Yr,ts]=reactExports.useState({action:Zr.action,location:Zr.location}),{v7_startTransition:es}=jr||{},ns=reactExports.useCallback(Xr=>{es&&startTransitionImpl?startTransitionImpl(()=>ts(Xr)):ts(Xr)},[ts,es]);return reactExports.useLayoutEffect(()=>Zr.listen(ns),[Zr,ns]),reactExports.createElement(Router,{basename:_r,children:Ur,location:Yr.location,navigationType:Yr.action,navigator:Zr})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(_r,Ur){let{onClick:jr,relative:Gr,reloadDocument:Wr,replace:Zr,state:Yr,target:ts,to:es,preventScrollReset:ns,unstable_viewTransition:Xr}=_r,qr=_objectWithoutPropertiesLoose(_r,_excluded),{basename:_i}=reactExports.useContext(NavigationContext),rs,is=!1;if(typeof es=="string"&&ABSOLUTE_URL_REGEX.test(es)&&(rs=es,isBrowser$1))try{let cs=new URL(window.location.href),ds=es.startsWith("//")?new URL(cs.protocol+es):new URL(es),fs=stripBasename(ds.pathname,_i);ds.origin===cs.origin&&fs!=null?es=fs+ds.search+ds.hash:is=!0}catch{}let ss=useHref(es,{relative:Gr}),os=useLinkClickHandler(es,{replace:Zr,state:Yr,target:ts,preventScrollReset:ns,relative:Gr,unstable_viewTransition:Xr});function ls(cs){jr&&jr(cs),cs.defaultPrevented||os(cs)}return reactExports.createElement("a",_extends$16({},qr,{href:rs||ss,onClick:is||Wr?jr:ls,ref:Ur,target:ts}))}),NavLink=reactExports.forwardRef(function(_r,Ur){let{"aria-current":jr="page",caseSensitive:Gr=!1,className:Wr="",end:Zr=!1,style:Yr,to:ts,unstable_viewTransition:es,children:ns}=_r,Xr=_objectWithoutPropertiesLoose(_r,_excluded2),qr=useResolvedPath(ts,{relative:Xr.relative}),_i=useLocation(),rs=reactExports.useContext(DataRouterStateContext),{navigator:is}=reactExports.useContext(NavigationContext),ss=rs!=null&&useViewTransitionState(qr)&&es===!0,os=is.encodeLocation?is.encodeLocation(qr).pathname:qr.pathname,ls=_i.pathname,cs=rs&&rs.navigation&&rs.navigation.location?rs.navigation.location.pathname:null;Gr||(ls=ls.toLowerCase(),cs=cs?cs.toLowerCase():null,os=os.toLowerCase());let ds=ls===os||!Zr&&ls.startsWith(os)&&ls.charAt(os.length)==="/",fs=cs!=null&&(cs===os||!Zr&&cs.startsWith(os)&&cs.charAt(os.length)==="/"),ms={isActive:ds,isPending:fs,isTransitioning:ss},ps=ds?jr:void 0,ys;typeof Wr=="function"?ys=Wr(ms):ys=[Wr,ds?"active":null,fs?"pending":null,ss?"transitioning":null].filter(Boolean).join(" ");let ws=typeof Yr=="function"?Yr(ms):Yr;return reactExports.createElement(Link$1,_extends$16({},Xr,{"aria-current":ps,className:ys,ref:Ur,style:ws,to:ts,unstable_viewTransition:es}),typeof ns=="function"?ns(ms):ns)});var DataRouterHook;(function(Nr){Nr.UseScrollRestoration="useScrollRestoration",Nr.UseSubmit="useSubmit",Nr.UseSubmitFetcher="useSubmitFetcher",Nr.UseFetcher="useFetcher",Nr.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(Nr){Nr.UseFetcher="useFetcher",Nr.UseFetchers="useFetchers",Nr.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(Nr){let _r=reactExports.useContext(DataRouterContext);return _r||invariant(!1),_r}function useLinkClickHandler(Nr,_r){let{target:Ur,replace:jr,state:Gr,preventScrollReset:Wr,relative:Zr,unstable_viewTransition:Yr}=_r===void 0?{}:_r,ts=useNavigate(),es=useLocation(),ns=useResolvedPath(Nr,{relative:Zr});return reactExports.useCallback(Xr=>{if(shouldProcessLinkClick(Xr,Ur)){Xr.preventDefault();let qr=jr!==void 0?jr:createPath(es)===createPath(ns);ts(Nr,{replace:qr,state:Gr,preventScrollReset:Wr,relative:Zr,unstable_viewTransition:Yr})}},[es,ts,ns,jr,Gr,Ur,Nr,Wr,Zr,Yr])}function useViewTransitionState(Nr,_r){_r===void 0&&(_r={});let Ur=reactExports.useContext(ViewTransitionContext);Ur==null&&invariant(!1);let{basename:jr}=useDataRouterContext(DataRouterHook.useViewTransitionState),Gr=useResolvedPath(Nr,{relative:_r.relative});if(!Ur.isTransitioning)return!1;let Wr=stripBasename(Ur.currentLocation.pathname,jr)||Ur.currentLocation.pathname,Zr=stripBasename(Ur.nextLocation.pathname,jr)||Ur.nextLocation.pathname;return matchPath(Gr.pathname,Zr)!=null||matchPath(Gr.pathname,Wr)!=null}const App$2="",KonstaContext=React$1.createContext({theme:"material",dark:!0,touchRipple:!0});function useIsomorphicLayoutEffect(Nr,_r){return typeof window>"u"?reactExports.useEffect(Nr,_r):reactExports.useLayoutEffect(Nr,_r)}const useAutoTheme=function(Nr,_r){_r===void 0&&(_r=!0);const[Ur,jr]=reactExports.useState(Nr);return useIsomorphicLayoutEffect(()=>{if(_r){if(Nr==="ios"||Nr==="material")Ur!==Nr&&jr(Nr);else if(Ur==="parent"&&typeof window<"u"&&typeof document<"u"){const Gr=document.documentElement;Gr&&(Gr.classList.contains("ios")?jr("ios"):(Gr.classList.contains("md")||Gr.classList.contains("material"))&&jr("material"))}}},[Nr]),_r?Ur:Nr},KonstaProvider=Nr=>{const{theme:_r,dark:Ur,touchRipple:jr=!0,autoThemeDetection:Gr=!0,children:Wr}=Nr,Zr=useAutoTheme(_r,Gr);return React$1.createElement(KonstaContext.Provider,{value:{theme:Zr,dark:Ur,touchRipple:jr}},Wr)};function cls(){const Nr=[];for(var _r=arguments.length,Ur=new Array(_r),jr=0;jr<_r;jr++)Ur[jr]=arguments[jr];Ur.forEach(Wr=>{typeof Wr=="object"&&Wr.constructor===Object?Object.keys(Wr).forEach(Zr=>{Wr[Zr]&&Nr.push(Zr)}):Array.isArray(Wr)?Nr.push(...Wr):typeof Wr=="function"?Nr.push(Wr()):Wr&&Wr.value?Nr.push(Wr.value):Wr&&Nr.push(Wr)});const Gr=[];return Nr.forEach(Wr=>{Gr.indexOf(Wr)<0&&Gr.push(Wr)}),Gr.filter(Wr=>!!Wr).join(" ")}const positionClass=function(Nr,_r){return _r===void 0&&(_r=""),!_r||typeof _r!="string"?Nr:["static","relative","absolute","fixed","sticky"].filter(Gr=>_r.indexOf(Gr)>=0).length>0?"":Nr},AppClasses=(Nr,_r,Ur)=>{const{safeAreas:jr}=Nr;return cls(_r==="ios"&&"k-ios",_r==="material"&&"k-material","k-app w-full h-full min-h-screen",jr&&"safe-areas",positionClass("relative",Ur),Ur)};function _extends$15(){return _extends$15=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$15.apply(this,arguments)}const App$1=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,theme:Gr="material",dark:Wr=!0,touchRipple:Zr=!0,safeAreas:Yr=!0,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=Ur,qr={...es},_i=useAutoTheme(Gr),rs=AppClasses({...Nr,safeAreas:Yr},_i,jr);return React$1.createElement(KonstaProvider,{theme:_i,dark:Wr,touchRipple:Zr,autoThemeDetection:!1},React$1.createElement(Xr,_extends$15({ref:ns,className:rs},qr),ts))});App$1.displayName="App";const propClasses=(Nr,_r,Ur)=>{if(typeof Nr=="string")return Nr;const jr=[Nr.common,Nr[_r]];return Ur&&Nr[Ur]&&(typeof Nr[Ur]=="string"?jr.push(Nr[Ur]):jr.push(Nr[Ur].common,Nr[Ur][_r])),jr},themeClasses=(Nr,_r,Ur)=>{const jr={},Gr=["common","ios","material"];return Object.keys(Nr).forEach(Wr=>{const Zr=Wr==="base"?Ur:"";if(!(typeof Nr[Wr]!="string"&&Object.keys(Nr[Wr]).filter(es=>!Gr.includes(es)).length>0)){jr[Wr]=cls(propClasses(Nr[Wr],_r),Zr);return}jr[Wr]={};const ts=propClasses(Nr[Wr],_r);jr[Wr].default=cls(ts,Zr),Object.keys(Nr[Wr]).filter(es=>!Gr.includes(es)).forEach(es=>{jr[Wr][es]=cls(ts,propClasses(Nr[Wr],_r,es),Zr)})}),jr},useThemeClasses=function(Nr){let{ios:_r,material:Ur}=Nr===void 0?{}:Nr,Gr=reactExports.useContext(KonstaContext).theme||"ios";return _r&&(Gr="ios"),Ur&&(Gr="material"),(Wr,Zr)=>themeClasses(Wr,Gr,Zr)},ActionsClasses=(Nr,_r)=>({base:{common:cls("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",positionClass("fixed",_r)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function _extends$14(){return _extends$14=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$14.apply(this,arguments)}const Actions=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,ios:Gr,material:Wr,opened:Zr,backdrop:Yr=!0,onBackdropClick:ts,children:es,...ns}=Nr,Xr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Xr.current}));const qr=Zr?"opened":"closed",_i=Ur,rs={...ns},ss=useThemeClasses({ios:Gr,material:Wr})(ActionsClasses(Nr,jr),jr);return React$1.createElement(React$1.Fragment,null,Yr&&React$1.createElement("div",{className:ss.backdrop[qr],onClick:ts}),React$1.createElement(_i,_extends$14({ref:Xr,className:ss.base[qr]},rs),es))});Actions.displayName="Actions";const ActionsGroupClasses=Nr=>{const{dividers:_r}=Nr;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:cls(_r&&"hairline-b")}}};function _extends$13(){return _extends$13=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$13.apply(this,arguments)}const ActionsGroup=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,ios:Gr,material:Wr,dividers:Zr=!0,children:Yr,...ts}=Nr,es=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:es.current}));const ns=Ur,Xr={...ts},_i=useThemeClasses({ios:Gr,material:Wr})(ActionsGroupClasses({dividers:Zr,...Nr}),jr);return React$1.createElement(ns,_extends$13({ref:es,className:_i.base},Xr),Yr)});ActionsGroup.displayName="ActionsGroup";const useTheme=function(Nr){let{ios:_r,material:Ur}=Nr===void 0?{}:Nr,Gr=reactExports.useContext(KonstaContext).theme||"ios";return _r&&(Gr="ios"),Ur&&(Gr="material"),Gr};class TouchRipple{constructor(_r,Ur,jr){const Gr=this;if(!_r)return;Gr.el=_r;const{left:Wr,top:Zr,width:Yr,height:ts}=_r.getBoundingClientRect(),es={x:Ur-Wr,y:jr-Zr};let ns=Math.max((ts**2+Yr**2)**.5,48);const Xr=_r.classList.contains("k-touch-ripple-inset");Xr&&(ns=Math.max(Math.min(Yr,ts),48));const qr=typeof window<"u"&&window.getComputedStyle(_r,null).getPropertyValue("overflow")==="hidden";if(!Xr&&qr){const rs=((es.x-Yr/2)**2+(es.y-ts/2)**2)**.5,is=(ns/2+rs)/(ns/2);Gr.rippleTransform=`translate3d(0px, 0px, 0) scale(${is})`}else Gr.rippleTransform=`translate3d(${-es.x+Yr/2}px, ${-es.y+ts/2}px, 0) scale(1)`;Gr.rippleWaveEl=document.createElement("span"),Gr.rippleWaveEl.classList.add("k-touch-ripple-wave"),Gr.rippleWaveEl.setAttribute("hidden",""),Gr.rippleWaveEl.style=`
      width: ${ns}px;
      height: ${ns}px;
      margin-top:-${ns/2}px;
      margin-left:-${ns/2}px;
      left:${es.x}px;
      top:${es.y}px; --k-ripple-transform: ${Gr.rippleTransform}`,_r.insertAdjacentElement("afterbegin",Gr.rippleWaveEl);const _i=()=>{Gr.rippleWaveEl.removeEventListener("animationend",_i),Gr.rippleWaveEl&&(Gr.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(Gr.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),Gr.shouldBeRemoved&&Gr.out()))};return Gr.rippleWaveEl.addEventListener("animationend",_i),Gr}destroy(){let _r=this;_r.rippleWaveEl&&_r.el.removeChild(_r.rippleWaveEl),Object.keys(_r).forEach(Ur=>{_r[Ur]=null,delete _r[Ur]}),_r=null}out(){const _r=this,{rippleWaveEl:Ur}=this;clearTimeout(_r.removeTimeout),Ur.classList.add("k-touch-ripple-wave-out"),_r.removeTimeout=setTimeout(()=>{_r.destroy()},300);const jr=()=>{_r.rippleWaveEl.removeEventListener("animationend",jr),clearTimeout(_r.removeTimeout),_r.destroy()};_r.rippleWaveEl.addEventListener("animationend",jr)}remove(){const _r=this;_r.shouldBeRemoved||(_r.removeTimeout=setTimeout(()=>{_r.destroy()},400),_r.shouldBeRemoved=!0,_r.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&_r.out())}}const useTouchRipple=(Nr,_r,Ur)=>{const jr=reactExports.useContext(KonstaContext);Ur||(Ur=Nr);const Gr=reactExports.useRef(null),Wr=()=>{Gr.current&&Gr.current.remove(),Gr.current=null},Zr=_i=>{Gr.current=new TouchRipple(Nr.current,_i.pageX,_i.pageY)},Yr=()=>{Wr()},ts=()=>{Wr()},es=()=>{if(!jr.touchRipple)return;const _i=Ur.current;_i.addEventListener("pointerdown",Zr),_i.addEventListener("pointermove",Yr),_i.addEventListener("pointerup",ts),_i.addEventListener("pointercancel",ts),_i.addEventListener("contextmenu",ts)},ns=()=>{const _i=Ur.current;_i.removeEventListener("pointerdown",Zr),_i.removeEventListener("pointermove",Yr),_i.removeEventListener("pointerup",ts),_i.removeEventListener("pointercancel",ts),_i.removeEventListener("contextmenu",ts)},Xr=()=>{!Ur||!Ur.current||!_r||es()},qr=()=>{!Ur||!Ur.current||!_r||ns()};reactExports.useEffect(()=>(Xr(),()=>qr()))},useDarkClasses=()=>{const Nr=reactExports.useContext(KonstaContext);return _r=>Nr.dark?_r:""},ActionsButtonClasses=(Nr,_r,Ur)=>{const{fontSizeIos:jr,fontSizeMaterial:Gr,bold:Wr,dividers:Zr}=Nr;return{base:{common:cls("flex items-center w-full px-4 relative z-10 overflow-hidden",Zr&&"hairline-b"),ios:cls("h-14",_r.textIos,_r.bgIos,_r.activeBgIos,jr,"first:rounded-t-xl last:rounded-b-xl justify-center",Wr&&"font-semibold"),material:cls("h-12",_r.textMaterial,_r.bgMaterial,_r.activeBgMaterial,Gr,"justify-start",Ur("dark:touch-ripple-white"),Wr&&"font-medium")}}},ActionsButtonColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-white",_r("dark:bg-neutral-800")),bgMaterial:cls("bg-md-light-surface-3",_r("dark:bg-md-dark-surface-3")),activeBgIos:cls("active:bg-neutral-200",_r("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:cls("text-md-light-on-surface",_r("dark:text-md-dark-on-surface")),...Nr}};function _extends$12(){return _extends$12=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$12.apply(this,arguments)}const ActionsButton=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="button",className:jr,colors:Gr,ios:Wr,material:Zr,bold:Yr,boldIos:ts=!1,boldMaterial:es=!1,fontSizeIos:ns="text-xl",fontSizeMaterial:Xr="text-base",href:qr,touchRipple:_i=!0,dividers:rs=void 0,children:is,...ss}=Nr,os=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:os.current}));let ls=Ur;typeof Nr.component>"u"&&(qr||qr==="")&&(ls="a");const cs={href:qr,...ss},ds=useTheme({ios:Wr,material:Zr}),fs=useThemeClasses({ios:Wr,material:Zr}),ms=useDarkClasses();useTouchRipple(os,ds==="material"&&_i);const ps=ActionsButtonColors(Gr,ms),xs=fs(ActionsButtonClasses({fontSizeIos:ns,fontSizeMaterial:Xr,bold:typeof Yr>"u"?ds==="ios"?ts:es:Yr,dividers:typeof rs>"u"?ds==="ios":rs,...Nr},ps,ms),jr);return React$1.createElement(ls,_extends$12({ref:os,role:"button",tabIndex:"0",className:xs.base},cs),is)});ActionsButton.displayName="ActionsButton";const ActionsLabelClasses=(Nr,_r)=>{const{fontSizeIos:Ur,fontSizeMaterial:jr,dividers:Gr}=Nr;return{base:{common:cls(`flex items-center w-full px-4 relative z-10 overflow-hidden ${_r.activeBg}`,Gr&&"hairline-b"),ios:cls("h-14",_r.bgIos,_r.textIos,Ur,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:cls("h-12",_r.bgMaterial,_r.textMaterial,jr,"font-medium","justify-start")}}},ActionsLabelColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-white",_r("dark:bg-neutral-800")),bgMaterial:cls("bg-md-light-surface-3",_r("dark:bg-md-dark-surface-3")),textIos:cls("text-black text-opacity-55",_r("dark:text-white dark:text-opacity-55")),textMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),...Nr}};function _extends$11(){return _extends$11=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$11.apply(this,arguments)}const ActionsLabel=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,fontSizeIos:Yr="text-sm",fontSizeMaterial:ts="text-sm",dividers:es=void 0,children:ns,...Xr}=Nr,qr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:qr.current}));const _i=Ur,rs={...Xr},is=useTheme({ios:Wr,material:Zr}),ss=useThemeClasses({ios:Wr,material:Zr}),os=useDarkClasses(),ls=ActionsLabelColors(Gr,os),ds=ss(ActionsLabelClasses({fontSizeIos:Yr,fontSizeMaterial:ts,dividers:typeof es>"u"?is==="ios":es,...Nr},ls),jr);return React$1.createElement(_i,_extends$11({ref:qr,className:ds.base},rs),ns)});ActionsLabel.displayName="ActionsLabel";const BadgeClasses=(Nr,_r)=>({base:{common:`${_r.text} ${_r.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),BadgeColors=function(Nr){return Nr===void 0&&(Nr={}),{bg:"bg-primary",text:"text-white",...Nr}};function _extends$10(){return _extends$10=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$10.apply(this,arguments)}const Badge=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="span",className:jr,colors:Gr,small:Wr,ios:Zr,material:Yr,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=Ur,qr={...es},_i=useThemeClasses({ios:Zr,material:Yr}),rs=BadgeColors(Gr),is=Wr?"sm":"md",ss=_i(BadgeClasses(Nr,rs),jr);return React$1.createElement(Xr,_extends$10({ref:ns,className:ss.base[is]},qr),ts)});Badge.displayName="Badge";const BlockClasses=(Nr,_r,Ur)=>{const{inset:jr,nested:Gr,margin:Wr,padding:Zr,strong:Yr,outline:ts}=Nr;return{base:{common:cls("text-sm z-10",positionClass("relative",Ur),!jr&&!Gr&&ts&&"hairline-t hairline-b",jr&&ts&&"border",jr&&"px-4",!jr&&"pl-4-safe pr-4-safe",!Gr&&Wr,(Yr||ts)&&Zr),ios:cls(_r.textIos,Yr&&_r.strongBgIos,jr&&ts&&_r.outlineIos),material:cls(_r.textMaterial,Yr&&_r.strongBgMaterial,jr&&ts&&_r.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},BlockColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{outlineIos:cls("border-black border-opacity-20",_r("dark:border-white dark:border-opacity-15")),outlineMaterial:cls("border-md-light-outline",_r("border-md-dark-outline")),strongBgIos:cls("bg-ios-light-surface-1",_r("dark:bg-ios-dark-surface-1")),strongBgMaterial:cls("bg-md-light-surface-1",_r("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:cls("text-md-light-on-surface",_r("dark:text-md-dark-on-surface")),...Nr}};function _extends$$(){return _extends$$=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$$.apply(this,arguments)}const Block=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,margin:Wr="my-8",padding:Zr="py-4",inset:Yr,insetIos:ts,insetMaterial:es,strong:ns,strongIos:Xr,strongMaterial:qr,outline:_i,outlineIos:rs,outlineMaterial:is,nested:ss,ios:os,material:ls,children:cs,...ds}=Nr,fs=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:fs.current}));const ms=Ur,ps={...ds},ys=useTheme({ios:os,material:ls}),ws=useThemeClasses({ios:os,material:ls}),xs=useDarkClasses(),Es=BlockColors(Gr,xs),Rs=typeof ns>"u"?ys==="ios"?Xr:qr:ns,_s=typeof _i>"u"?ys==="ios"?rs:is:_i,Bs=typeof Yr>"u"?ys==="ios"?ts:es:Yr,vs=ws(BlockClasses({...Nr,margin:Wr,padding:Zr,inset:Bs,strong:Rs,outline:_s},Es,jr)),Cs=cls(vs.base,Bs&&vs.inset,jr);return React$1.createElement(ms,_extends$$({ref:fs,className:Cs},ps),cs)});Block.displayName="Block";const BlockFooterClasses=(Nr,_r)=>{const{inset:Ur}=Nr;return{base:{common:cls("mb-8 flex items-center -mt-6 text-sm",Ur?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:_r.textIos,material:_r.textMaterial}}},BlockFooterColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:cls("text-black text-opacity-75",_r("dark:text-white dark:text-opacity-75")),textMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),...Nr}};function _extends$_(){return _extends$_=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$_.apply(this,arguments)}const BlockFooter=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,inset:Yr,insetIos:ts,insetMaterial:es,children:ns,...Xr}=Nr,qr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:qr.current}));const _i=useTheme(),rs=typeof Yr>"u"?_i==="ios"?ts:es:Yr,is=Ur,ss={...Xr},os=useThemeClasses({ios:Wr,material:Zr}),ls=useDarkClasses(),cs=BlockFooterColors(Gr,ls),ds=os(BlockFooterClasses({...Nr,inset:rs},cs),jr);return React$1.createElement(is,_extends$_({ref:qr,className:ds.base},ss),ns)});BlockFooter.displayName="BlockFooter";const BlockHeaderClasses=(Nr,_r)=>{const{inset:Ur}=Nr;return{base:{common:cls("mt-8 flex items-center -mb-6 text-sm",Ur?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:_r.textIos,material:_r.textMaterial}}},BlockHeaderColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:cls("text-black",_r("dark:text-white")),textMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),...Nr}};function _extends$Z(){return _extends$Z=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$Z.apply(this,arguments)}const BlockHeader=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,inset:Yr,insetIos:ts,insetMaterial:es,children:ns,...Xr}=Nr,qr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:qr.current}));const _i=Ur,rs={...Xr},is=useTheme(),ss=typeof Yr>"u"?is==="ios"?ts:es:Yr,os=useThemeClasses({ios:Wr,material:Zr}),ls=useDarkClasses(),cs=BlockHeaderColors(Gr,ls),ds=os(BlockHeaderClasses({...Nr,inset:ss},cs),jr);return React$1.createElement(_i,_extends$Z({ref:qr,className:ds.base},rs),ns)});BlockHeader.displayName="BlockHeader";const BlockTitleClasses=(Nr,_r)=>{const{withBlock:Ur,medium:jr,large:Gr}=Nr;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${Ur?"-mb-6":"mb-2"}`,ios:cls(`font-semibold ${_r.textIos}`,Gr&&"text-[1.5rem]",jr&&"text-[1.125rem]",!jr&&!Gr&&"text-[1rem]"),material:cls(`font-medium ${_r.textMaterial}`,Gr&&"text-[1.375rem]",jr&&"text-[1rem]",!jr&&!Gr&&"text-[0.875rem]")}}},BlockTitleColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:"",textMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),...Nr}};function _extends$Y(){return _extends$Y=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$Y.apply(this,arguments)}const BlockTitle=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,withBlock:Wr=!0,medium:Zr,large:Yr,ios:ts,material:es,children:ns,...Xr}=Nr,qr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:qr.current}));const _i=Ur,rs={...Xr},is=useThemeClasses({ios:ts,material:es}),ss=useDarkClasses(),os=BlockTitleColors(Gr,ss),ls=is(BlockTitleClasses({...Nr,withBlock:Wr},os),jr);return React$1.createElement(_i,_extends$Y({ref:qr,className:ls.base},rs),ns)});BlockTitle.displayName="BlockTitle";const BreadcrumbsClasses=Nr=>{const{fontSizeIos:_r,fontSizeMaterial:Ur}=Nr;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:_r,material:Ur}}};function _extends$X(){return _extends$X=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$X.apply(this,arguments)}const Breadcrumbs=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,fontSizeIos:Gr="text-[17px]",fontSizeMaterial:Wr="text-[14px]",ios:Zr,material:Yr,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=Ur,qr={...es},rs=useThemeClasses({ios:Zr,material:Yr})(BreadcrumbsClasses({...Nr,fontSizeIos:Gr,fontSizeMaterial:Wr}),jr);return React$1.createElement(Xr,_extends$X({ref:ns,className:rs.base},qr),ts)});Breadcrumbs.displayName="Breadcrumbs";const BreadcrumbsItemClasses=(Nr,_r)=>{const{active:Ur}=Nr;return{base:{common:cls("flex items-center overflow-hidden"),ios:cls(_r.textIos,_r.bgIos,Ur?_r.textActiveIos:_r.textIos,Ur&&"font-semibold"),material:cls("font-medium px-2 py-1 rounded-lg",_r.bgMaterial,Ur?_r.textActiveMaterial:_r.textMaterial)}}},BreadcrumbsItemColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:cls("text-black text-opacity-55",_r("dark:text-white dark:text-opacity-55")),textMaterial:cls("text-md-light-on-secondary-container",_r("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:cls("bg-md-light-secondary-container",_r("dark:bg-md-dark-secondary-container")),textActiveIos:cls("text-black",_r("dark:text-white")),textActiveMaterial:cls("text-md-light-on-secondary-container",_r("dark:text-md-dark-on-secondary-container")),...Nr}};function _extends$W(){return _extends$W=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$W.apply(this,arguments)}const BreadcrumbsItem=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,ios:Gr,material:Wr,colors:Zr,active:Yr,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=Ur,qr={...es},_i=useThemeClasses({ios:Gr,material:Wr}),rs=useDarkClasses(),is=BreadcrumbsItemColors(Zr,rs),ss=_i(BreadcrumbsItemClasses({...Nr},is),jr);return React$1.createElement(Xr,_extends$W({ref:ns,className:ss.base,role:"menuitem",tabIndex:"0"},qr),ts)});BreadcrumbsItem.displayName="BreadcrumbsItem";const BreadcrumbsSeparatorClasses=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function _extends$V(){return _extends$V=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$V.apply(this,arguments)}const ChevronIcon=Nr=>React$1.createElement("svg",_extends$V({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},Nr),React$1.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function _extends$U(){return _extends$U=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$U.apply(this,arguments)}const BreadcrumbsSeparator=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,ios:Gr,material:Wr,children:Zr,...Yr}=Nr,ts=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ts.current}));const es=Ur,ns={...Yr},qr=useThemeClasses({ios:Gr,material:Wr})(BreadcrumbsSeparatorClasses({...Nr}),jr);return React$1.createElement(es,_extends$U({ref:ts,className:qr.base},ns),React$1.createElement(ChevronIcon,{className:qr.icon}),Zr)});BreadcrumbsSeparator.displayName="BreadcrumbsSeparator";const BreadcrumbsCollapsedClasses=(Nr,_r)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${_r.bg}`,ios:cls("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",_r.bgIos),material:cls("py-3 px-2 rounded-lg",_r.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${_r.dotBg}`,ios:_r.dotBgIos,material:_r.dotBgMaterial}}),BreadcrumbsCollapsedColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-black bg-opacity-15",_r("dark:bg-white dark:bg-opacity-15")),bgMaterial:cls("bg-md-light-secondary-container",_r("dark:bg-md-dark-secondary-container")),dotBgIos:cls("bg-black",_r("dark:bg-white")),dotBgMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),...Nr}};function _extends$T(){return _extends$T=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$T.apply(this,arguments)}const BreadcrumbsCollapsed=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,children:Yr,...ts}=Nr,es=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:es.current}));const ns=useDarkClasses(),Xr=BreadcrumbsCollapsedColors(Gr,ns),qr=Ur,_i={...ts},is=useThemeClasses({ios:Wr,material:Zr})(BreadcrumbsCollapsedClasses({...Nr},Xr),jr);return React$1.createElement(qr,_extends$T({ref:es,role:"button",tabIndex:"0",className:is.base},_i),React$1.createElement("span",{className:is.dot}),React$1.createElement("span",{className:is.dot}),React$1.createElement("span",{className:is.dot}),Yr)});BreadcrumbsCollapsed.displayName="BreadcrumbsCollapsed";const ButtonClasses=(Nr,_r,Ur,jr)=>{const{inline:Gr,segmented:Wr,segmentedStrong:Zr,segmentedActive:Yr,disabled:ts}=Nr;return{base:{common:cls("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",Gr?"inline-flex":"w-full flex",positionClass("relative",Ur),ts&&"pointer-events-none",Zr&&Yr&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:Wr&&!Zr?"first:rounded-s last:rounded-e":"rounded",material:Wr&&!Zr?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:Wr&&!Zr?"":"rounded-full"},style:{fill:{common:cls(ts&&cls(_r.disabledBg,_r.disabledText)),ios:cls(ts?cls(_r.disabledBg,_r.disabledText):`${_r.fillTextIos} ${_r.fillBgIos} ${_r.fillActiveBgIos}`),material:cls(ts?cls(_r.disabledBg,_r.disabledText):cls(_r.fillTextMaterial,_r.fillBgMaterial,_r.fillActiveBgMaterial,_r.fillTouchRipple))},outline:{common:cls(ts?cls(_r.disabledText,_r.disabledBorder):cls("active:bg-opacity-15",_r.touchRipple)),ios:cls(!Wr&&"border-2",!ts&&!Wr&&_r.outlineBorderIos,!ts&&cls(_r.textIos,_r.activeBgIos)),material:cls(!Wr&&"border",!ts&&!Wr&&_r.outlineBorderMaterial,!ts&&cls(_r.textMaterial,_r.activeBgMaterial))},clear:{common:cls(ts?_r.disabledText:`active:bg-opacity-15 ${_r.touchRipple}`),ios:!ts&&cls(_r.textIos,_r.activeBgIos),material:!ts&&cls(_r.textMaterial,_r.activeBgMaterial)},tonal:{common:ts?cls(_r.disabledBg,_r.disabledText):cls(_r.touchRipple),ios:!ts&&cls(_r.tonalTextIos,_r.tonalBgIos,_r.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!ts&&cls(_r.tonalTextMaterial,_r.tonalBgMaterial,_r.activeBgMaterial)},segmentedStrong:cls("active:bg-black active:bg-opacity-10",jr("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},ButtonColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:cls("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:cls("text-white"),fillTextMaterial:cls("text-md-light-on-primary",_r("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),fillTouchRipple:cls("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:cls("bg-md-light-secondary-container",_r("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:cls("text-md-light-on-secondary-container",_r("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:cls("text-black text-opacity-30",_r("dark:text-white dark:text-opacity-30")),disabledBg:cls("bg-black bg-opacity-10",_r("dark:bg-white dark:bg-opacity-10")),disabledBorder:cls("border-black border-opacity-10",_r("dark:border-white dark:border-opacity-10")),...Nr}};function _extends$S(){return _extends$S=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$S.apply(this,arguments)}const Button=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="button",className:jr,colors:Gr,ios:Wr,material:Zr,disabled:Yr,href:ts,outline:es,outlineIos:ns,outlineMaterial:Xr,clear:qr,clearIos:_i,clearMaterial:rs,tonal:is,tonalIos:ss,tonalMaterial:os,rounded:ls,roundedIos:cs,roundedMaterial:ds,small:fs,smallIos:ms,smallMaterial:ps,large:ys,largeIos:ws,largeMaterial:xs,raised:Es,raisedIos:Rs,raisedMaterial:_s,inline:Bs,segmented:vs,segmentedStrong:Cs,segmentedActive:Ss,touchRipple:As=!0,children:Us,...Ks}=Nr,Ws=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Ws.current}));let Js=Ur;typeof Nr.component>"u"&&(ts||ts==="")&&(Js="a");const ho={href:ts,...Ks},so=useTheme({ios:Wr,material:Zr}),io=useThemeClasses({ios:Wr,material:Zr}),vo=useDarkClasses();useTouchRipple(Ws,so==="material"&&As);const go=(Ns=>{const to={};return Object.keys(Ns).forEach(ao=>{to[ao]=typeof Ns[ao]>"u"?so==="ios"?Nr[`${ao}Ios`]:Nr[`${ao}Material`]:Ns[ao]}),to})({outline:es,clear:qr,tonal:is,rounded:ls,small:fs,large:ys,raised:Es}),Eo=go.large?"large":go.small?"small":"medium";let Ro=go.outline?"outline":go.clear||vs&&!Ss?"clear":go.tonal?"tonal":"fill";Cs&&(Ro="segmentedStrong"),Cs&&Ss&&(Ro="segmentedStrongActive");const Po=ButtonColors(Gr,vo),Oo=io(ButtonClasses({...Nr,...go},Po,jr,vo)),Ts=cls(Oo.base[go.rounded?"rounded":"square"],Oo.style[Ro],Oo.size[Eo],go.raised&&Oo.raised,jr);return React$1.createElement(Js,_extends$S({ref:Ws,className:Ts,disabled:Yr,role:"button",tabIndex:"0"},ho),Us)});Button.displayName="Button";const CardClasses=(Nr,_r)=>{const{margin:Ur,headerDivider:jr,footerDivider:Gr,contentWrapPadding:Wr}=Nr;return{base:{common:cls(Ur,"overflow-hidden"),ios:cls("rounded-lg",_r.bgIos,_r.textIos),material:cls("rounded-2xl",_r.bgMaterial,_r.textMaterial),plain:"",raised:"shadow",outline:{common:cls("border"),ios:_r.outlineIos,material:_r.outlineMaterial}},header:{common:cls(jr&&"border-b","p-4"),ios:cls(jr&&_r.outlineIos,Nr.headerFontSizeIos),material:cls(jr&&_r.outlineMaterial,Nr.headerFontSizeMaterial)},content:cls(Wr,"text-sm"),footer:{common:cls(jr&&"border-t","text-sm p-4"),ios:cls(_r.footerTextIos,Gr&&_r.outlineIos),material:cls(_r.footerTextMaterial,Gr&&_r.outlineMaterial)}}},CardColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:cls(""),textMaterial:cls("text-md-light-on-surface",_r("dark:text-md-dark-on-surface")),bgIos:cls("bg-ios-light-surface-1",_r("dark:bg-ios-dark-surface-1")),bgMaterial:cls("bg-md-light-surface-1",_r("dark:bg-md-dark-surface-1")),footerTextIos:cls("text-black text-opacity-55",_r("dark:text-white dark:text-opacity-55")),footerTextMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),outlineIos:cls("border-black border-opacity-20",_r("dark:border-white dark:border-opacity-20")),outlineMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),...Nr}};function _extends$R(){return _extends$R=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$R.apply(this,arguments)}const Card=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,margin:Gr="m-4",colors:Wr,header:Zr,footer:Yr,ios:ts,material:es,headerFontSizeIos:ns="text-[17px]",headerFontSizeMaterial:Xr="text-[22px]",contentWrap:qr=!0,contentWrapPadding:_i="p-4",raised:rs,raisedIos:is,raisedMaterial:ss,outline:os,outlineIos:ls,outlineMaterial:cs,headerDivider:ds=!1,footerDivider:fs=!1,children:ms,...ps}=Nr,ys=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ys.current}));const ws=Ur,xs={...ps},Es=useTheme(),Rs=useThemeClasses({ios:ts,material:es}),_s=useDarkClasses(),Bs=CardColors(Wr,_s),vs=typeof os>"u"?Es==="ios"?ls:cs:os,Cs=typeof rs>"u"?Es==="ios"?is:ss:rs,Ss=vs?"outline":Cs?"raised":"plain",As=Rs(CardClasses({...Nr,margin:Gr,contentWrapPadding:_i,headerDivider:ds,footerDivider:fs,headerFontSizeIos:ns,headerFontSizeMaterial:Xr,outline:vs,raised:Cs},Bs),jr);return React$1.createElement(ws,_extends$R({ref:ys,className:As.base[Ss]},xs),Zr&&React$1.createElement("div",{className:As.header},Zr),qr?React$1.createElement("div",{className:As.content},ms):ms,Yr&&React$1.createElement("div",{className:As.footer},Yr))});Card.displayName="Card";const CheckboxClasses=(Nr,_r,Ur,jr)=>({base:cls("cursor-pointer inline-flex align-middle",positionClass("relative",Ur),jr("dark:touch-ripple-white")),iconWrap:{common:cls("flex items-center justify-center text-white",jr("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:_r.borderIos,material:_r.borderMaterial},checked:{ios:`${_r.bgCheckedIos} ${_r.borderCheckedIos}`,material:`${_r.bgCheckedMaterial} ${_r.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:cls("bg-white w-3/4",jr("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),CheckboxColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{borderIos:cls("border-black border-opacity-30",_r("dark:border-white dark:border-opacity-30")),borderMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:cls("border-md-light-primary",_r("dark:border-md-dark-primary")),...Nr}};function _extends$Q(){return _extends$Q=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$Q.apply(this,arguments)}const CheckboxIcon=Nr=>{const{ios:_r,material:Ur,fill:jr,...Gr}=Nr;return useTheme({ios:_r,material:Ur})==="ios"?React$1.createElement("svg",_extends$Q({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},Gr),React$1.createElement("path",{fill:jr||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):React$1.createElement("svg",_extends$Q({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},Gr),React$1.createElement("polygon",{fill:jr,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function _extends$P(){return _extends$P=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$P.apply(this,arguments)}const Checkbox=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="label",className:jr,colors:Gr,defaultChecked:Wr,checked:Zr,indeterminate:Yr,name:ts,value:es,disabled:ns,readOnly:Xr,onChange:qr,ios:_i,material:rs,touchRipple:is=!0,children:ss,...os}=Nr,ls=reactExports.useRef(null),cs=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:cs.current,inputEl:ls.current}));const ds=Ur,fs={...os},ms=useTheme({ios:_i,material:rs}),ps=useThemeClasses({ios:_i,material:rs}),ys=useDarkClasses();useTouchRipple(cs,ms==="material"&&is);const ws=CheckboxColors(Gr,ys),xs=Zr||Wr&&!qr||Yr?"checked":"notChecked",Es=ps(CheckboxClasses(Nr,ws,jr,ys),jr);return reactExports.useEffect(()=>{ls.current&&(ls.current.indeterminate=!!Yr)},[Yr]),React$1.createElement(ds,_extends$P({ref:cs,className:Es.base},fs),React$1.createElement("input",{ref:ls,type:"checkbox",name:ts,value:es,disabled:ns,readOnly:Xr,checked:Zr,defaultChecked:Wr,onChange:qr,className:Es.input}),React$1.createElement("i",{className:Es.iconWrap[xs]},Yr?React$1.createElement("span",{className:Es.indeterminateIcon}):React$1.createElement(CheckboxIcon,{ios:_i,material:rs,className:Es.icon[xs]})),ss)});Checkbox.displayName="Checkbox";const ChipClasses=(Nr,_r)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:cls(_r.fillBg||_r.fillBgIos,_r.fillText||_r.fillTextIos),material:cls(_r.fillBg||_r.fillBgMaterial,_r.fillText||_r.fillTextMaterial)},outline:{common:"border",ios:cls(_r.outlineText||_r.outlineTextIos,_r.outlineBorder||_r.outlineBorderIos),material:cls(_r.outlineText||_r.outlineTextMaterial,_r.outlineBorder||_r.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),ChipColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{fillTextIos:"text-current",fillTextMaterial:cls("text-md-light-on-secondary-container",_r("dark:text-md-dark-on-secondary-container")),fillBgIos:cls("bg-black bg-opacity-10",_r("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:cls("bg-md-light-secondary-container",_r("dark:bg-md-dark-secondary-container")),outlineTextIos:cls("text-current"),outlineTextMaterial:cls("text-md-light-on-surface",_r("dark:text-md-dark-on-surface")),outlineBorderIos:cls("border-black border-opacity-20",_r("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),...Nr}};function _extends$O(){return _extends$O=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$O.apply(this,arguments)}const DeleteIcon=Nr=>{let{theme:_r,...Ur}=Nr;return _r==="ios"?React$1.createElement("svg",_extends$O({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},Ur),React$1.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):React$1.createElement("svg",_extends$O({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ur),React$1.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function _extends$N(){return _extends$N=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$N.apply(this,arguments)}const Chip=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,media:Wr,deleteButton:Zr,onDelete:Yr,ios:ts,material:es,outline:ns,children:Xr,...qr}=Nr,_i=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:_i.current}));const rs=Ur,is={...qr},ss=useThemeClasses({ios:ts,material:es}),os=useTheme({ios:ts,material:es}),ls=useDarkClasses(),cs=ns?"outline":"fill",ds=ChipColors(Gr,ls),fs=ss(ChipClasses(Nr,ds),jr);return React$1.createElement(rs,_extends$N({ref:_i,className:fs.base[cs]},is),Wr&&React$1.createElement("div",{className:fs.media},Wr),Xr,Zr&&React$1.createElement("div",{className:fs.deleteButton,role:"button",tabIndex:"0",onClick:Yr},React$1.createElement(DeleteIcon,{theme:os,className:"h-4 w-4"})))});Chip.displayName="Chip";const DialogClasses=(Nr,_r,Ur,jr)=>{let{hasButtons:Gr}=jr;const{titleFontSizeMaterial:Wr,titleFontSizeIos:Zr,translucent:Yr,sizeIos:ts,sizeMaterial:es}=Nr;return{base:{common:cls("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",positionClass("fixed",Ur)),ios:cls("rounded-xl max-w-full",ts,_r.bgIos,Yr&&"translucent"),material:cls("rounded-[1.75rem] p-6 max-w-[90%]",es,_r.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:cls("p-4 space-y-1 relative",Gr&&"hairline-b")},title:{common:cls("w-full"),ios:cls(_r.titleIos,Zr,"font-semibold text-center"),material:cls(_r.titleMaterial,Wr)},content:{common:cls("text-sm w-full"),ios:cls(_r.contentTextIos,"text-center"),material:cls(_r.contentTextMaterial)},buttons:{common:"flex items-center",ios:cls("justify-center last-child-hairline-r-none"),material:cls("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},DialogColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-white",_r("dark:bg-neutral-800")),bgMaterial:cls("bg-md-light-surface-3",_r("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:cls("text-md-light-on-surface",_r("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),...Nr}};function _extends$M(){return _extends$M=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$M.apply(this,arguments)}const Dialog=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,opened:Wr,backdrop:Zr=!0,onBackdropClick:Yr,translucent:ts=!0,sizeIos:es="w-[16.875rem]",sizeMaterial:ns="w-[19.5rem]",titleFontSizeIos:Xr="text-[18px]",titleFontSizeMaterial:qr="text-[24px]",title:_i,content:rs,buttons:is,ios:ss,material:os,children:ls,...cs}=Nr,ds=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ds.current}));const fs=Wr?"opened":"closed",ms=Ur,ps={...cs},ys=useThemeClasses({ios:ss,material:os}),ws=useDarkClasses(),xs=DialogColors(Gr,ws),Es=ys(DialogClasses({...Nr,titleFontSizeIos:Xr,titleFontSizeMaterial:qr,translucent:ts,sizeIos:es,sizeMaterial:ns},xs,jr,{hasButtons:!!is}),jr);return React$1.createElement(React$1.Fragment,null,Zr&&React$1.createElement("div",{className:Es.backdrop[fs],onClick:Yr}),React$1.createElement(ms,_extends$M({ref:ds,className:Es.base[fs]},ps),React$1.createElement("div",{className:Es.contentWrap},_i&&React$1.createElement("div",{className:Es.title},_i),(rs||ls)&&React$1.createElement("div",{className:Es.content},rs,ls)),is&&React$1.createElement("div",{className:Es.buttons},is)))});Dialog.displayName="Dialog";const DialogButtonClasses=(Nr,_r)=>{const{strong:Ur,disabled:jr}=Nr;return{base:{ios:cls("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",jr?_r.disabledTextIos:_r.textIos,Ur&&"font-semibold",!jr&&_r.activeBgIos)}}},DialogButtonColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{activeBgIos:cls("active:bg-black active:bg-opacity-10",_r("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:cls("text-black text-opacity-30",_r("dark:text-white dark:text-opacity-30")),...Nr}};function _extends$L(){return _extends$L=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$L.apply(this,arguments)}const DialogButton=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="button",className:jr,colors:Gr,ios:Wr,material:Zr,disabled:Yr,strong:ts,strongIos:es,strongMaterial:ns,children:Xr,...qr}=Nr,_i=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:_i.current}));const rs={...qr},is=useTheme({ios:Wr,material:Zr}),ss=useThemeClasses({ios:Wr,material:Zr}),os=useDarkClasses(),ls=DialogButtonColors(Gr,os),cs=typeof ts>"u"?is==="ios"?es:ns:ts,ds=ss(DialogButtonClasses({...Nr,strong:cs},ls),jr),fs=Ur;return is==="ios"?React$1.createElement(fs,_extends$L({className:ds.base,disabled:Yr,role:"button",tabIndex:"0"},rs),Xr):React$1.createElement(Button,_extends$L({component:Ur,inline:!0,rounded:!0,disabled:Yr,clear:!cs,className:jr},rs),Xr)});DialogButton.displayName="DialogButton";const FabClasses=(Nr,_r)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${_r.bgIos} ${_r.activeBgIos} ${_r.textIos}`,material:`duration-300 rounded-2xl shadow ${_r.bgMaterial} ${_r.activeBgMaterial} ${_r.textMaterial} ${_r.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),FabColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:"bg-primary",bgMaterial:cls("bg-md-light-primary-container",_r("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:cls("text-md-light-on-primary-container",_r("dark:text-md-dark-on-primary-container")),touchRipple:cls("touch-ripple-primary",_r("dark:touch-ripple-white")),...Nr}};function _extends$K(){return _extends$K=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$K.apply(this,arguments)}const Fab=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="a",className:jr,colors:Gr,href:Wr,text:Zr,textPosition:Yr="after",icon:ts,ios:es,material:ns,touchRipple:Xr=!0,children:qr,..._i}=Nr,rs=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:rs.current}));const is=Ur,ss={..._i},os=useTheme({ios:es,material:ns}),ls=useThemeClasses({ios:es,material:ns}),cs=useDarkClasses();useTouchRipple(rs,os==="material"&&Xr);const ds=FabColors(Gr,cs),fs=ls(FabClasses(Nr,ds),jr);return React$1.createElement(is,_extends$K({className:Zr?fs.base.withText:fs.base.iconOnly,href:Wr,ref:rs,role:"button",tabIndex:"0"},ss),Zr&&Yr==="before"&&React$1.createElement("span",{className:fs.text},Zr),ts&&React$1.createElement("span",{className:fs.icon},ts),Zr&&Yr==="after"&&React$1.createElement("span",{className:fs.text},Zr),qr)});Fab.displayName="Fab";const IconClasses=(Nr,_r)=>({base:`${positionClass("relative",_r)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function _extends$J(){return _extends$J=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$J.apply(this,arguments)}const Icon=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="i",className:jr,ios:Gr,material:Wr,badge:Zr,badgeColors:Yr,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=Ur,qr={...es},_i=useThemeClasses(),rs=useTheme(),is=_i(IconClasses(Nr,jr),jr);return React$1.createElement(Xr,_extends$J({ref:ns,className:is.base},qr),rs==="ios"?Gr:Wr,typeof Zr<"u"&&Zr!==null&&React$1.createElement(Badge,{small:!0,className:is.badge,colors:Yr},Zr),ts)});Icon.displayName="Icon";const LinkClasses=(Nr,_r,Ur)=>{let{textColor:jr,needsTouchRipple:Gr}=_r;const{iconOnly:Wr,tabbar:Zr}=Nr;return{base:{common:cls(!Zr&&jr,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",Gr&&`touch-ripple-primary ${positionClass("relative",Ur)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:Gr?"":"active:opacity-55"}},tabbar:{common:cls(positionClass("relative",Ur),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:cls("h-full max-h-12",Wr&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:cls("h-full max-h-12",Wr&&"k-touch-ripple-inset"),material:"px-3"}}},LinkColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:"text-primary",textMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",...Nr}};function _extends$I(){return _extends$I=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$I.apply(this,arguments)}const Link=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="a",className:jr,colors:Gr,navbar:Wr,toolbar:Zr,iconOnly:Yr,linkProps:ts={},tabbar:es,tabbarActive:ns,touchRipple:Xr=void 0,ios:qr,material:_i,onClick:rs,children:is,...ss}=Nr,os=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:os.current}));const ls=Ur,cs={...ts,...ss},ds=useTheme({ios:qr,material:_i}),fs=useThemeClasses({ios:qr,material:_i}),ms=useDarkClasses(),ps=ds==="material"&&(Xr||(Zr||es||Wr)&&typeof Xr>"u");useTouchRipple(os,ps);const ys=LinkColors(Gr,ms),ws=Nr.navbar?ds==="material"?ys.navbarTextMaterial:ys.navbarTextIos:ds==="material"?ys.textMaterial:ys.textIos,xs=es&&!ns?ys.tabbarInactive:ws,Es=ns?"active":"inactive",Rs=fs(LinkClasses(Nr,{textColor:xs,needsTouchRipple:ps},jr)),_s=cls(Rs.base[es?"default":"notTabbar"],Zr&&Rs.toolbar,Wr&&Rs.navbar,es&&Rs.tabbar[Es],jr);return React$1.createElement(ls,_extends$I({ref:os,className:_s},cs,{role:"link",tabIndex:"0",onClick:rs}),is)});Link.displayName="Link";const ListClasses=(Nr,_r,Ur)=>{const{nested:jr,margin:Gr,inset:Wr,strong:Zr,outline:Yr}=Nr;return{base:{common:cls(!jr&&Gr,!Wr&&!jr&&Yr&&"hairline-t hairline-b",Wr&&Yr&&"border",positionClass("relative",Ur),"z-10"),ios:cls(Zr&&_r.strongBgIos,Wr&&Yr&&_r.outlineIos),material:cls(Zr&&_r.strongBgMaterial,Wr&&Yr&&_r.outlineMaterial)},ul:{common:cls(Wr&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},ListColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{outlineIos:cls("border-black border-opacity-20",_r("dark:border-white dark:border-opacity-15")),outlineMaterial:cls("border-md-light-outline",_r("border-md-dark-outline")),strongBgIos:cls("bg-ios-light-surface-1",_r("dark:bg-ios-dark-surface-1")),strongBgMaterial:cls("bg-md-light-surface-1",_r("dark:bg-md-dark-surface-1")),...Nr}},ListDividersContext=React$1.createContext(!1);function _extends$H(){return _extends$H=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$H.apply(this,arguments)}const List=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,margin:Wr="my-8",nested:Zr,menuList:Yr,dividers:ts,dividersIos:es=!0,dividersMaterial:ns=!1,inset:Xr,insetIos:qr,insetMaterial:_i,strong:rs,strongIos:is,strongMaterial:ss,outline:os,outlineIos:ls,outlineMaterial:cs,ios:ds,material:fs,children:ms,...ps}=Nr,ys=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ys.current}));const ws=Ur,xs={...ps},Es=useTheme(),Rs=useThemeClasses({ios:ds,material:fs}),_s=useDarkClasses(),Bs=typeof ts>"u"?Es==="ios"?es:ns:ts,vs=typeof rs>"u"?Es==="ios"?is:ss:rs,Cs=typeof os>"u"?Es==="ios"?ls:cs:os,Ss=typeof Xr>"u"?Es==="ios"?qr:_i:Xr,As=ListColors(Gr,_s),Us=Rs(ListClasses({...Nr,margin:Wr,inset:Ss,strong:vs,outline:Cs},As,jr)),Ks=cls(Us.base,Ss&&Us.inset,Yr&&Us.menuList,jr);return React$1.createElement(ListDividersContext.Provider,{value:Bs},React$1.createElement(ws,_extends$H({ref:ys,className:Ks},xs),React$1.createElement("ul",{className:Us.ul},ms)))});List.displayName="List";function _extends$G(){return _extends$G=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$G.apply(this,arguments)}const ListGroup=reactExports.forwardRef((Nr,_r)=>{const{children:Ur,...jr}=Nr,Gr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Gr.current}));const Wr={...jr};return React$1.createElement("li",{ref:Gr},React$1.createElement(List,_extends$G({nested:!0},Wr),Ur))});ListGroup.displayName="ListGroup";const ListButtonClasses=(Nr,_r,Ur)=>{const{dividers:jr}=Nr;return{base:"",button:{common:cls(positionClass("relative",Ur),jr&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${_r.touchRipple} overflow-hidden select-none`),ios:cls("h-11",_r.textIos,_r.activeBgIos,_r.activeBgIos),material:cls("h-12",_r.textMaterial,_r.activeBgMaterial)}}},ListButtonColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:"text-primary",textMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",...Nr}},useListDividers=()=>reactExports.useContext(ListDividersContext);function _extends$F(){return _extends$F=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$F.apply(this,arguments)}const ListButton=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="li",className:jr,colors:Gr,href:Wr,target:Zr,type:Yr,value:ts,linkComponent:es="a",linkProps:ns={},ios:Xr,material:qr,touchRipple:_i=!0,children:rs,...is}=Nr,ss=reactExports.useRef(null),os=reactExports.useRef(null),ls=useListDividers();reactExports.useImperativeHandle(_r,()=>({el:ss.current}));const cs=Ur,ds={...is},fs=useTheme({ios:Xr,material:qr}),ms=useThemeClasses({ios:Xr,material:qr});useTouchRipple(os,fs==="material"&&_i);const ps=useDarkClasses(),ys=ListButtonColors(Gr,ps),ws=ms(ListButtonClasses({...Nr,dividers:ls},ys,jr),jr),xs=!!Wr||Wr==="",Rs={href:!xs||Wr===!0||Wr===!1?void 0:Wr||"",target:Zr,type:Yr,value:ts,...ns},_s=xs?es:"button";return React$1.createElement(cs,_extends$F({ref:ss,className:ws.base},ds),React$1.createElement(_s,_extends$F({ref:os,className:ws.button},Rs),rs))});ListButton.displayName="ListButton";const ListItemClasses=(Nr,_r,Ur)=>{let{className:jr,isMediaItem:Gr,theme:Wr,textColor:Zr,needsTouchRipple:Yr,isMenuListItemActive:ts,autoStrongTitle:es}=Ur;const{menuListItem:ns,dividers:Xr,mediaClassName:qr="",mediaClass:_i="",innerClassName:rs="",innerClass:is="",contentClassName:ss="",contentClass:os="",titleWrapClassName:ls="",titleWrapClass:cs="",titleFontSizeIos:ds,titleFontSizeMaterial:fs,strongTitle:ms,contacts:ps}=Nr;return{base:{common:ns?`${Zr} py-1`:"",material:ps&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:cls(`flex items-center ${ss||os}`),ios:cls(!ns&&cls(_r.primaryTextIos,"ps-4-safe"),ns&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:cls(!ns&&cls(_r.primaryTextMaterial,Gr?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",ps&&"ml-10"),ns&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:cls("duration-300 active:duration-0 cursor-pointer select-none",Xr&&Wr==="ios"&&"active:hairline-transparent",Yr&&cls("relative overflow-hidden z-10",_r.touchRipple),cls(ts?Wr==="ios"?_r.menuListItemActiveBgIos:_r.menuListItemActiveBgMaterial:ns?Wr==="ios"?_r.menuListItemBgIos:_r.menuListItemBgMaterial:Wr==="ios"?_r.activeBgIos:_r.activeBgMaterial))},media:{common:`shrink-0 flex ${qr||_i}`,ios:"py-2 me-4",material:cls("py-3",ns?"me-3":"me-4")},inner:{common:cls("w-full relative",!ns&&Xr&&"hairline-b",rs||is),ios:"py-2.5 pe-4-safe",material:cls("py-3",Gr&&!ns?"pe-2":"pe-4-safe")},titleWrap:{common:cls(`flex justify-between items-center ${ls||cs}`),ios:cls(!ns&&ds),material:cls(!ns&&fs)},title:{common:"shrink",menuListItem:cls("text-sm",ms===!0||es?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:cls("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:_r.secondaryTextIos,material:cls(_r.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:cls("text-sm line-clamp-2"),ios:_r.secondaryTextIos,material:_r.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:_r.secondaryTextIos,material:_r.secondaryTextMaterial},footer:{common:cls("text-xs mt-0.5"),ios:_r.secondaryTextIos,material:_r.secondaryTextMaterial},groupTitle:{common:cls("pl-4-safe pr-4-safe py-1 flex items-center z-20",positionClass("relative",jr)),ios:`h-8${Xr?" hairline-t":""} -mt-px ${ds} ${_r.secondaryTextIos} ${_r.groupTitleBgIos} ${ps&&cls("font-semibold top-11-safe sticky",_r.groupTitleContactsTextIos,_r.groupTitleContactsBgIos)}`,material:`h-12 ${fs} ${_r.secondaryTextMaterial} ${_r.groupTitleBgMaterial} ${ps&&cls("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",_r.groupTitleContactsTextMaterial,_r.groupTitleContactsBgMaterial)}`}}},ListItemColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{primaryTextIos:cls("text-black",_r("dark:text-white")),primaryTextMaterial:cls("text-md-light-on-surface",_r("dark:text-md-dark-on-surface")),secondaryTextIos:cls("text-black text-opacity-55",_r("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),activeBgIos:cls("active:bg-black active:bg-opacity-10",_r("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:cls("bg-ios-light-surface-variant",_r("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:cls("bg-md-light-surface-2",_r("dark:bg-md-dark-surface-2")),menuListItemTextIos:cls("text-black",_r("dark:text-white")),menuListItemTextMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:cls("active:bg-black active:bg-opacity-10",_r("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:cls("bg-md-light-surface-1",_r("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:cls("text-primary",_r("dark:text-white")),menuListItemActiveTextMaterial:cls("text-md-light-on-secondary-container",_r("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:cls("bg-primary bg-opacity-15",_r("dark:bg-primary")),menuListItemActiveBgMaterial:cls("bg-md-light-secondary-container",_r("dark:bg-md-dark-secondary-container")),touchRipple:cls("touch-ripple-black",_r("dark:touch-ripple-white")),groupTitleContactsTextIos:cls("text-opacity-90",_r("dark:text-opacity-90")),groupTitleContactsTextMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),groupTitleContactsBgIos:cls(_r("dark:bg-[#323234]")),groupTitleContactsBgMaterial:cls("bg-transparent",_r("dark:bg-transparent")),...Nr}};function _extends$E(){return _extends$E=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$E.apply(this,arguments)}const ListItem=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="li",colors:jr,className:Gr,mediaClassName:Wr="",innerClassName:Zr="",innerChildren:Yr,contentClassName:ts="",contentChildren:es,titleWrapClassName:ns="",titleFontSizeIos:Xr="text-[17px]",titleFontSizeMaterial:qr="text-[16px]",title:_i,subtitle:rs,text:is,after:ss,media:os,header:ls,footer:cs,menuListItem:ds,menuListItemActive:fs,groupTitle:ms,strongTitle:ps="auto",label:ys,chevron:ws=void 0,chevronIos:xs=!0,chevronMaterial:Es=!0,chevronIcon:Rs,href:_s,target:Bs,link:vs,linkComponent:Cs="a",linkProps:Ss={},dividers:As,contacts:Us,ios:Ks,material:Ws,touchRipple:Js=!0,children:ho,...so}=Nr,io=reactExports.useRef(null),vo=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:vo.current}));const co=Ur,go={...so},Eo=typeof As>"u"?useListDividers():As,Ro=useTheme({ios:Ks,material:Ws}),Po=useThemeClasses({ios:Ks,material:Ws}),Oo=useDarkClasses(),Ts=typeof ws>"u"?Ro==="ios"?xs:Es:ws,Ns=ListItemColors(jr,Oo),to=ds&&fs,ao=Ns[`${to?"menuListItemActiveText":ds?"menuListItemText":"text"}${Ro==="ios"?"Ios":"Material"}`],lo=!!_s||_s===""||ds||vs,Io=!!ys,po=Ro==="material"&&(Io||lo)&&Js;useTouchRipple(io,po);const Fo=_s===!0||_s===!1||typeof _s>"u"?void 0:_s||"",Do=lo?Cs:Io?"label":"div",No=lo?{href:Fo,target:Bs,...Ss}:{},Co=_i&&(rs||is),qo=ps==="auto"&&Co,Mo=Po(ListItemClasses({...Nr,titleFontSizeIos:Xr,titleFontSizeMaterial:qr,dividers:Eo,strongTitle:ps,mediaClassName:Wr,innerClassName:Zr,contentClassName:ts,titleWrapClassName:ns},Ns,{isMediaItem:Co,theme:Ro,textColor:ao,needsTouchRipple:po,isMenuListItemActive:to,darkClasses:Oo,autoStrongTitle:qo,className:Gr}),Gr),_l=lo||Io?Mo.itemContent.link:Mo.itemContent.default,Al=ds?Mo.title.menuListItem:ps===!0||qo?Mo.title.strong:Mo.title.default;return ms?React$1.createElement(co,{className:cls(Mo.groupTitle,Gr)},_i,ho):React$1.createElement(co,_extends$E({ref:vo,className:Mo.base},go),React$1.createElement(Do,_extends$E({ref:io,className:_l},No),os&&React$1.createElement("div",{className:Mo.media},os),React$1.createElement("div",{className:Mo.inner},ls&&React$1.createElement("div",{className:Mo.header},ls),(_i||ss)&&React$1.createElement("div",{className:Mo.titleWrap},_i&&React$1.createElement("div",{className:Al},_i),ss&&React$1.createElement("div",{className:Mo.after},ss),lo&&Ts&&!ds&&(Rs||React$1.createElement(ChevronIcon,{className:Mo.chevron}))),rs&&React$1.createElement("div",{className:Mo.subtitle},rs),is&&React$1.createElement("div",{className:Mo.text},is),cs&&React$1.createElement("div",{className:Mo.footer},cs),Yr),es),ho)});ListItem.displayName="ListItem";function _extends$D(){return _extends$D=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$D.apply(this,arguments)}const DropdownIcon=Nr=>React$1.createElement("svg",_extends$D({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},Nr),React$1.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),ListInputClasses=(Nr,_r,Ur)=>{let{isFloatingTransformed:jr,isFocused:Gr,darkClasses:Wr,getLabelColor:Zr,hasLabel:Yr}=Ur;const{error:ts,type:es,outline:ns,inputClassName:Xr="",inputClass:qr=""}=Nr;return{base:{common:"",ios:cls(ns&&"my-4"),material:cls("py-2")},itemContent:{common:"relative",ios:cls(ns&&"ml-4 mr-4 rounded-lg",!ns&&_r.bgIos),material:cls("min-h-[56px] ml-4 mr-4",ns?cls("rounded"):cls(_r.bgMaterial,"rounded-t relative "))},inner:{common:"",material:cls(ns?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:cls("duration-200 text-xs",Zr(),ns&&"flex"),ios:cls(ns&&"-mt-4"),material:cls(ns&&"-mt-4"),stacked:"",floating:{common:cls("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",jr&&"scale-133"),ios:jr?ns?"translate-y-6":"translate-y-4":"",material:jr?ns?"translate-y-8":"translate-y-3":""}},labelText:{common:cls(ns&&"relative p-1 block -m-1"),ios:cls(ns&&cls("-top-1",_r.outlineLabelBgIos)),material:cls(ns&&cls("-top-2",_r.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:cls((!Yr||ns)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${Zr()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${Xr||qr}`,ios:"h-10",material:"h-6",notFloating:{common:cls("placeholder-black placeholder-opacity-30",Wr("dark:placeholder-white dark:placeholder-opacity-30")),material:cls(es==="textarea"&&"py-1"),ios:cls(es==="textarea"&&"py-2")},floating:jr?"placeholder-transparent":cls("placeholder-black placeholder-opacity-30",Wr("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:_r.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:cls("w-3.5 h-3.5 opacity-45 active:opacity-30",_r.labelTextIos),material:cls("w-6 h-6 active:opacity-55",_r.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:ns&&cls(ts?_r.errorBorder:Gr?_r.outlineBorderFocusIos:_r.outlineBorderIos,"h-full border rounded-lg -z-10"),material:cls(ts?_r.errorBorder:Gr?_r.outlineBorderFocusMaterial:_r.outlineBorderMaterial,ns&&cls("h-full border rounded -z-10",Gr&&"border-2"),!ns&&cls("border-b h-px origin-bottom",Gr&&"scale-y-[2]"))}}},ListInputColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:"",bgMaterial:cls("bg-md-light-surface-variant",_r("dark:bg-md-dark-surface-variant")),outlineBorderIos:cls("border-black border-opacity-30",_r("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:cls("border-md-light-on-surface",_r("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:cls("border-md-light-primary",_r("dark:border-md-dark-primary")),outlineLabelBgIos:cls("bg-ios-light-surface-1",_r("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:cls("bg-md-light-surface",_r("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",...Nr}};function _extends$C(){return _extends$C=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$C.apply(this,arguments)}const ListInput=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="li",className:jr,colors:Gr,label:Wr,floatingLabel:Zr,outline:Yr,outlineIos:ts,outlineMaterial:es,media:ns,input:Xr,info:qr,error:_i,clearButton:rs,dropdown:is,inputId:ss,inputStyle:os,inputClassName:ls="",name:cs,value:ds,defaultValue:fs,type:ms="text",inputMode:ps,readOnly:ys,required:ws,disabled:xs,placeholder:Es,size:Rs,accept:_s,autoComplete:Bs,autoCorrect:vs,autoCapitalize:Cs,spellCheck:Ss,autoFocus:As,autoSave:Us,max:Ks,min:Ws,step:Js,maxLength:ho,minLength:so,multiple:io,pattern:vo,tabIndex:co,onInput:go,onChange:Eo,onFocus:Ro,onBlur:Po,onClear:Oo,ios:Ts,material:Ns,children:to,...ao}=Nr,lo=reactExports.useRef(null),Io=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Io.current,inputEl:lo.current}));const[po,Fo]=reactExports.useState(!1),Do=useTheme({ios:Ts,material:Ns}),No=useThemeClasses({ios:Ts,material:Ns}),Co=useDarkClasses(),qo=ListInputColors(Gr,Co),Mo=Wr&&Zr?"floating":"stacked",_l=Mo==="floating"?"floating":"notFloating",Al=()=>{if(lo.current)return lo.current.value},Ul=Wr&&Zr&&!(()=>{const zs=Al();return typeof ds>"u"?zs||zs===0:ds||ds===0})()&&!po,eu=()=>_i?qo.errorText:Do==="material"?po?qo.labelTextFocusMaterial:qo.labelTextMaterial:Do==="ios"?po?qo.labelTextFocusIos:qo.labelTextIos:"",du=zs=>{Fo(!0),Ro&&Ro(zs)},ru=zs=>{Fo(!1),Po&&Po(zs)},tu=typeof Yr>"u"?Do==="ios"?ts:es:Yr,$l=No(ListInputClasses({...Nr,outline:tu},qo,{isFloatingTransformed:Ul,isFocused:po,darkClasses:Co,getLabelColor:eu,inputClassName:ls,hasLabel:!!Wr})),Ps={...ao},Os=()=>{if(Xr)return Xr;const zs=ms==="select"||ms==="textarea"?ms:"input",qs=zs==="input";return React$1.createElement(zs,{id:ss,ref:lo,className:$l.input[_l],style:os,name:cs,type:qs?ms:void 0,placeholder:Es,inputMode:ps,size:Rs,accept:_s,autoComplete:Bs,autoCorrect:vs,autoCapitalize:Cs,spellCheck:Ss,autoFocus:As,autoSave:Us,disabled:xs,max:Ks,maxLength:ho,min:Ws,minLength:so,step:Js,multiple:io,readOnly:ys,required:ws,pattern:vo,tabIndex:co,value:ds,defaultValue:fs,onInput:go,onChange:Eo,onFocus:du,onBlur:ru},ms==="select"?to:null)},Gs=React$1.createElement(React$1.Fragment,null,_i&&_i!==!0&&React$1.createElement("div",{className:cls($l.errorInfo,$l.error)},_i),qr&&!_i&&React$1.createElement("div",{className:cls($l.errorInfo,$l.info)},qr)),Is=React$1.createElement(React$1.Fragment,null,Wr&&React$1.createElement("div",{className:$l.label[Mo]},React$1.createElement("div",{className:$l.labelText},Wr)),React$1.createElement("div",{className:$l.inputWrap[Mo]},Os(),rs&&React$1.createElement(DeleteIcon,{theme:Do,onClick:Oo,className:$l.clearButton}),is&&React$1.createElement(DropdownIcon,{className:$l.dropdown})),Gs);return React$1.createElement(ListItem,_extends$C({ref:Io,component:Ur,media:ns,className:$l.base,title:null,mediaClassName:$l.media,innerClassName:$l.inner[Mo],contentClassName:$l.itemContent,titleWrapClassName:$l.titleWrap,innerChildren:Is,contentChildren:(tu||Do==="material")&&React$1.createElement("span",{className:$l.border}),dividers:Do==="material"||tu?!1:void 0},Ps),ms!=="select"?to:null)});ListInput.displayName="ListInput";function _extends$B(){return _extends$B=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$B.apply(this,arguments)}const MenuList=reactExports.forwardRef((Nr,_r)=>{const{children:Ur,...jr}=Nr,Gr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Gr.current}));const Wr={...jr};return React$1.createElement(List,_extends$B({ref:Gr,menuList:!0},Wr),Ur)});MenuList.displayName="MenuList";function _extends$A(){return _extends$A=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$A.apply(this,arguments)}const MenuListItem=reactExports.forwardRef((Nr,_r)=>{const{active:Ur,href:jr,children:Gr,...Wr}=Nr,Zr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Zr.current}));const Yr={...Wr};return React$1.createElement(ListItem,_extends$A({ref:Zr,menuListItem:!0,menuListItemActive:Ur,href:jr||!1},Yr),Gr)});MenuListItem.displayName="MenuListItem";const MessageClasses=(Nr,_r)=>{const{type:Ur}=Nr;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:cls("self-end",_r.messageSent)},messageReceived:{common:_r.messageReceived},messageName:{common:"text-xs",ios:cls("mb-0.5 ms-4",_r.messageNameIos),material:cls("ms-4 mb-0.5",_r.messageNameMd)},messageHeader:{common:"text-xs",ios:cls("mb-0.5 ms-4",_r.messageNameIos),material:cls("ms-4 mb-0.5",_r.messageNameMd)},messageFooter:{common:"text-xs",ios:cls("mb-0.5 ms-4",_r.messageNameIos),material:cls("ms-4 mb-0.5",_r.messageNameMd)},messageAvatar:{common:cls("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...Ur==="sent"&&{ios:cls("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",_r.bubbleSentIos),material:cls("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",_r.bubbleSentMd)},...Ur==="received"&&{ios:cls("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",_r.bubbleReceivedIos),material:cls("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",_r.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},MessageColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{messageSent:"text-white",messageReceived:"text-inherit",messageNameIos:cls("text-black text-opacity-45",_r("dark:text-white dark:text-opacity-45")),messageNameMd:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),bubbleSentIos:cls("bg-primary"),bubbleSentMd:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:cls("bg-[#e5e5ea]",_r("dark:bg-[#252525]")),bubbleReceivedMd:cls(_r("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),...Nr}};function _extends$z(){return _extends$z=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$z.apply(this,arguments)}const Message=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,id:Wr,text:Zr,name:Yr,type:ts="sent",header:es,footer:ns,textHeader:Xr,textFooter:qr,avatar:_i,ios:rs,material:is,children:ss,...os}=Nr,ls=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ls.current}));const cs=useThemeClasses({ios:rs,material:is}),ds=useDarkClasses(),fs=MessageColors(Gr,ds),ms=cs(MessageClasses({...Nr},fs)),ps=Ur,ys={...os},ws=cls(jr,ms.message,{[ms.messageSent]:ts==="sent",[ms.messageReceived]:ts==="received"});return React$1.createElement(ps,_extends$z({id:Wr,ref:ls,className:ws},ys),_i&&React$1.createElement("div",{className:ms.messageAvatar},_i),React$1.createElement("div",{className:ms.messageContent},Yr&&React$1.createElement("div",{className:ms.messageName},Yr),es&&React$1.createElement("div",{className:ms.messageHeader},es),React$1.createElement("div",{className:ms.messageBubble},Xr&&React$1.createElement("div",{className:ms.messageTextHeader},Xr),Zr&&React$1.createElement("div",{className:ms.messageText},Zr),qr&&React$1.createElement("div",{className:ms.messageTextFooter},qr)),ns&&React$1.createElement("div",{className:ms.messageFooter},ns)))});Message.displayName="Message";const MessagebarClasses=(Nr,_r,Ur)=>{let{isFocused:jr}=Ur;const{rightClassName:Gr="",rightClass:Wr="",leftClassName:Zr="",leftClass:Yr=""}=Nr;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:_r.bgMessage},left:{common:cls("mt-1 -ms-2",Zr||Yr),ios:cls("px-2",_r.toolbarIconIos),material:cls("",_r.toolbarIconMd)},right:{common:cls("mt-1 -me-2",Gr||Wr),ios:cls("px-2",_r.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:cls("block w-full focus:outline-none resize-none",jr&&"outline-offset-0"),ios:cls("border h-8 rounded-3xl px-4 leading-4 py-1.5",_r.inputBgIos,_r.borderIos,_r.placeholderIos),material:cls("rounded-3xl h-12 px-4 py-4 leading-4 ",_r.inputBgMd,_r.placeholderMd)}}},MessagebarColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{toolbarIconIos:cls("fill-primary",_r("dark:fill-md-dark-primary")),toolbarIconMd:cls("fill-black"),inputBgIos:cls("bg-transparent"),borderIos:cls("border-[#c8c8cd]",_r("dark:border-white dark:border-opacity-30")),inputBgMd:cls("bg-md-light-surface-2",_r("dark:bg-md-dark-surface-variant")),placeholderIos:cls(_r("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:cls("placeholder-md-light-on-surface-variant",_r("dark:placeholder-md-dark-on-surface-variant")),bgIos:cls("bg-white",_r("dark:bg-black")),bgMaterial:cls("bg-md-light-surface",_r("dark:bg-md-dark-surface")),...Nr}},ToolbarClasses=(Nr,_r,Ur)=>{const{bgClassName:jr="",bgClass:Gr="",outline:Wr,translucent:Zr,innerClassName:Yr="",innerClass:ts="",tabbar:es,tabbarIcons:ns,top:Xr}=Nr;return{base:{common:cls("w-full z-20",positionClass("relative",Ur),!Xr&&"pb-safe")},bg:{common:cls("absolute w-full h-full left-0 top-0",Wr&&(Xr?"hairline-b":"hairline-t"),jr||Gr),ios:cls(_r.bgIos,Zr&&"translucent"),material:cls(`${_r.bgMaterial}`)},inner:{common:cls("flex relative justify-between items-center w-full overflow-hidden",Yr||ts),ios:cls("pl-2-safe pr-2-safe",ns?"h-12.5":"h-11"),material:cls(es?"":"pl-2-safe pr-2-safe",ns?"h-20":"h-14")},highlight:{common:cls(Xr?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:_r.tabbarHighlightBgIos,material:_r.tabbarHighlightBgMaterial}}},ToolbarColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-ios-light-surface-2",_r("dark:bg-ios-dark-surface-2")),bgMaterial:cls("bg-md-light-surface-2",_r("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),...Nr}};function _extends$y(){return _extends$y=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$y.apply(this,arguments)}const Toolbar=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,translucent:Wr=!0,bgClassName:Zr="",innerClassName:Yr="",outline:ts,tabbar:es,tabbarIcons:ns,tabbarLabels:Xr,top:qr,ios:_i,material:rs,children:is,...ss}=Nr,os=reactExports.useRef(null),ls=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ls.current}));const cs=Ur,[ds,fs]=reactExports.useState({transform:"",width:""}),ms=useTheme({ios:_i,material:rs}),ps=useThemeClasses({ios:_i,material:rs}),ys=useDarkClasses(),ws={...ss},xs=ToolbarColors(Gr,ys),Rs=ps(ToolbarClasses({...Nr,outline:typeof ts>"u"?ms==="ios":ts,translucent:Wr,bgClassName:Zr,innerClassName:Yr},xs,jr),jr),_s=ms==="material"&&es&&!ns;return reactExports.useEffect(()=>{if(_s&&os.current){const Bs=os.current.previousElementSibling,vs=1/Bs.children.length*100,Cs=[...Bs.children].indexOf(Bs.querySelector(".k-tabbar-link-active"));fs({...ds,width:`${vs}%`,transform:`translateX(${Cs*100}%)`})}},[is]),React$1.createElement(cs,_extends$y({ref:ls,className:Rs.base},ws),React$1.createElement("div",{className:Rs.bg}),React$1.createElement("div",{className:Rs.inner},is),_s&&React$1.createElement("span",{className:Rs.highlight,style:ds,ref:os}))});Toolbar.displayName="Toolbar";function _extends$x(){return _extends$x=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$x.apply(this,arguments)}const Messagebar=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,id:Wr,style:Zr,name:Yr,placeholder:ts="Message",value:es,outline:ns=!1,leftClassName:Xr="",rightClassName:qr="",textareaId:_i,disabled:rs,size:is,left:ss,right:os,ios:ls,material:cs,onInput:ds,onChange:fs,onFocus:ms,children:ps,...ys}=Nr,ws=reactExports.useRef(null),xs=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ws.current,areaElRef:xs.current}));const[Es,Rs]=reactExports.useState(!1),_s=useThemeClasses({ios:ls,material:cs}),Bs=useDarkClasses(),vs=MessagebarColors(Gr,Bs),Cs=Ks=>{Rs(!0),ms&&ms(Ks)},Ss=_s(MessagebarClasses({...Nr},vs,{isFocused:Es})),As=Ur,Us={...ys};return React$1.createElement(As,_extends$x({ref:ws,id:Wr,style:Zr,className:Ss.base},Us),React$1.createElement(Toolbar,{colors:vs,outline:ns},ss&&React$1.createElement("div",{className:Ss.left},ss),React$1.createElement("div",{className:Ss.messagebarArea},React$1.createElement("textarea",{id:_i,ref:xs,type:"textarea",className:Ss.messagebarInput,placeholder:ts,name:Yr,size:is,disabled:rs,onInput:ds,onChange:fs,onFocus:Cs,value:es})),os&&React$1.createElement("div",{className:Ss.right},os)))});Messagebar.displayName="Messagebar";const MessagesClasses=()=>({base:{common:cls("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$w.apply(this,arguments)}const Messages=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,id:Wr,ios:Zr,material:Yr,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const qr=useThemeClasses({ios:Zr,material:Yr})(MessagesClasses({...Nr})),_i=Ur,rs={...es};return React$1.createElement(_i,_extends$w({id:Wr,className:qr.base,ref:ns},rs),ts)});Messages.displayName="Messages";const MessagesTitleClasses=(Nr,_r)=>({base:{common:cls("text-center text-xs leading-none"),ios:cls("w-full mt-2.5",_r.titleIos),material:cls("mt-4",_r.titleMd)}}),MessagesTitleColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{titleIos:cls("text-black text-opacity-45",_r("dark:text-white dark:text-opacity-45")),titleMd:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),...Nr}};function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$v.apply(this,arguments)}const MessagesTitle=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,id:Yr,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=useThemeClasses({ios:Wr,material:Zr}),qr=useDarkClasses(),_i=MessagesTitleColors(Gr,qr),rs=Xr(MessagesTitleClasses({...Nr},_i)),is=Ur,ss={...es};return React$1.createElement(is,_extends$v({id:Yr,className:rs.base,ref:ns},ss),ts)});MessagesTitle.displayName="MessagesTitle";const NavbarClasses=(Nr,_r,Ur)=>{const{outline:jr,translucent:Gr,large:Wr,medium:Zr,transparent:Yr,left:ts,right:es,fontSizeIos:ns,fontSizeMaterial:Xr,titleFontSizeIos:qr,titleFontSizeMaterial:_i,titleLargeFontSizeIos:rs,titleLargeFontSizeMaterial:is,titleMediumFontSizeIos:ss,titleMediumFontSizeMaterial:os,bgClassName:ls="",bgClass:cs="",subnavbarClassName:ds="",subnavbarClass:fs="",innerClassName:ms="",innerClass:ps="",leftClassName:ys="",leftClass:ws="",titleClassName:xs="",titleClass:Es="",subtitleClassName:Rs="",subtitleClass:_s="",rightClassName:Bs="",rightClass:vs="",centerTitle:Cs}=Nr;return{base:{common:cls("w-full z-20 top-0 pt-safe",(Wr||Zr)&&"pointer-events-none",positionClass("sticky",Ur)),ios:cls(ns,_r.textIos),material:cls(Xr,_r.textMaterial)},bg:{common:cls("absolute w-full h-full left-0 top-0",jr&&"hairline-b",ls||cs),ios:cls(_r.bgIos,Gr&&"translucent"),material:`${_r.bgMaterial}`},subnavbar:{common:cls("relative flex items-center",ds||fs,(Wr||Zr)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:cls("flex relative items-center w-full overflow-hidden",ms||ps,(Wr||Zr)&&"pointer-events-auto z-10"),ios:cls("pl-2-safe pr-2-safe h-11",!ts&&es?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:cls("flex items-center px-4 relative",(Wr||Zr)&&"pointer-events-auto"),ios:cls(Zr&&cls(ss,"h-11 font-semibold"),Wr&&cls(rs,"h-13 font-bold")),material:cls(Zr&&cls(os,"h-12 pb-4"),Wr&&cls(is,"h-[5.5rem]"))},left:{common:cls("flex justify-center items-center h-full",ys||ws),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:cls("whitespace-nowrap leading-tight",xs||Es,(Wr||Zr||Yr)&&"opacity-0",Cs?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:cls(`${qr} font-semibold`,!Cs&&"first:mx-2"),material:cls(`${_i} font-normal`,!Cs&&"first:mx-4")},subtitle:{common:cls("font-normal leading-none",Rs||_s),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:cls("flex justify-center items-center h-full",Bs||vs),ios:cls("transform transform-gpu",Cs?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},NavbarColors=(Nr,_r)=>({bgIos:cls("bg-ios-light-surface-2",_r("dark:bg-ios-dark-surface-2")),bgMaterial:cls("bg-md-light-surface-2",_r("dark:bg-md-dark-surface-2")),textIos:cls("text-black",_r("dark:text-white")),textMaterial:cls("text-md-light-on-surface",_r("dark:text-md-dark-on-surface")),...Nr});function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$u.apply(this,arguments)}const Navbar=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,bgClassName:Gr="",innerClassName:Wr="",leftClassName:Zr="",titleClassName:Yr="",subtitleClassName:ts="",rightClassName:es="",subnavbarClassName:ns="",centerTitle:Xr,colors:qr,translucent:_i=!0,outline:rs,medium:is,large:ss,transparent:os,fontSizeIos:ls="text-[17px]",fontSizeMaterial:cs="text-[16px]",titleFontSizeIos:ds="text-[17px]",titleFontSizeMaterial:fs="text-[22px]",titleMediumFontSizeIos:ms="text-[24px]",titleMediumFontSizeMaterial:ps="text-[24px]",titleLargeFontSizeIos:ys="text-[34px]",titleLargeFontSizeMaterial:ws="text-[28px]",scrollEl:xs,left:Es,title:Rs,subtitle:_s,right:Bs,subnavbar:vs,ios:Cs,material:Ss,children:As,...Us}=Nr,Ks=reactExports.useRef(null),Ws=reactExports.useRef(0),Js=reactExports.useRef(null),ho=reactExports.useRef(null),so=reactExports.useRef(null),io=reactExports.useRef(null),vo=reactExports.useRef(null),co=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Ks.current}));const go=Ur,Eo=useTheme({ios:Cs,material:Ss}),Ro=useThemeClasses({ios:Cs,material:Ss}),Po=useDarkClasses(),Oo={...Us},Ts=NavbarColors(qr,Po),Ns=Fo=>{const{scrollTop:Do}=Fo.target;if(!os&&!ss&&!is){co.current&&(io.current&&(io.current.style.opacity=""),Js.current&&(Js.current.style.opacity=""));return}const No=Ws.current,Co=Math.max(Math.min(Do/No,1),0);Js.current.style.opacity=os?-.5+Co*1.5:"",(is||ss)&&(Js.current.style.transform=`translateY(-${Co*No}px)`),so.current&&(so.current.style.transform=`translateY(-${Co*No}px)`,so.current.style.opacity=1-Co*2),io.current&&(io.current.style.opacity=-.5+Co*1.5),(is||ss)&&vo.current&&(vo.current.style.transform=`translateY(-${Co*No}px)`)},to=()=>typeof xs>"u"?Ks.current&&Ks.current.parentNode:xs.current||xs,ao=()=>{if(!ss&&!is&&!os){co.current&&(Ns({target:{scrollTop:0}}),co.current=!1);return}co.current=!0,so.current?Ws.current=so.current.offsetHeight:Ws.current=ho.current.offsetHeight;const Fo=to();Fo?(Fo.addEventListener("scroll",Ns),Ns({target:Fo})):Ns({target:{scrollTop:0}})},lo=()=>{const Fo=to();Fo&&Fo.removeEventListener("scroll",Ns)};reactExports.useEffect(()=>(ao(),lo));const po=Ro(NavbarClasses({...Nr,centerTitle:typeof Xr>"u"?Eo==="ios":Xr,translucent:_i,outline:typeof rs>"u"?Eo==="ios":rs,fontSizeIos:ls,fontSizeMaterial:cs,titleFontSizeIos:ds,titleFontSizeMaterial:fs,titleMediumFontSizeIos:ms,titleMediumFontSizeMaterial:ps,titleLargeFontSizeIos:ys,titleLargeFontSizeMaterial:ws,bgClassName:Gr,innerClassName:Wr,leftClassName:Zr,titleClassName:Yr,subtitleClassName:ts,rightClassName:es,subnavbarClassName:ns},Ts,jr),jr);return React$1.createElement(go,_extends$u({ref:Ks,className:po.base},Oo),React$1.createElement("div",{className:po.bg,ref:Js}),React$1.createElement("div",{className:po.inner,ref:ho},Es&&React$1.createElement("div",{className:po.left},Es),(Rs||_s)&&React$1.createElement("div",{className:po.title,ref:io},Rs,_s&&React$1.createElement("div",{className:po.subtitle},_s)),Bs&&React$1.createElement("div",{className:po.right},Bs),As),(ss||is)&&React$1.createElement("div",{className:po.titleContainer,ref:so},Rs),vs&&React$1.createElement("div",{className:po.subnavbar,ref:vo},vs))});Navbar.displayName="Navbar";function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$t.apply(this,arguments)}const BackIcon=Nr=>{let{theme:_r,...Ur}=Nr;return _r==="ios"?React$1.createElement("svg",_extends$t({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},Ur),React$1.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):React$1.createElement("svg",_extends$t({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},Ur),React$1.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},NavbarBackLinkClasses=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$s.apply(this,arguments)}const NavbarBackLink=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="a",className:jr,text:Gr="Back",showText:Wr="auto",ios:Zr,material:Yr,onClick:ts,children:es,...ns}=Nr,Xr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Xr.current}));const qr={...ns},_i=useTheme({ios:Zr,material:Yr}),rs=useThemeClasses({ios:Zr,material:Yr}),is=Wr==="auto"&&_i==="ios"||Wr===!0,ss=rs(NavbarBackLinkClasses(),jr);return React$1.createElement(Link,_extends$s({ref:Xr,component:Ur,className:ss.base,navbar:!0},qr,{onClick:ts}),React$1.createElement("span",{className:ss.icon},React$1.createElement(BackIcon,{theme:_i})),is&&React$1.createElement("span",null,Gr),es)});NavbarBackLink.displayName="NavbarBackLink";const NotificationsClasses=(Nr,_r,Ur)=>{const{opened:jr,translucent:Gr}=Nr;return{base:{common:cls(positionClass("absolute",Ur),"z-50 transform transition-transform-opacity box-border duration-500",!jr&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:cls("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",_r.bgIos,Gr&&"translucent"),material:cls("rounded-2xl py-5 px-4 start-4 end-4 top-4",_r.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:cls("mt-2")},header:{common:cls("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:cls("me-2"),material:"me-4"},contentTitle:{material:cls("flex flex-row items-center")},title:{ios:cls("tracking-wide text-[13px] uppercase",_r.titleIos),material:cls("font-medium")},titleRightText:{ios:cls("me-1 ms-auto text-[13px]",_r.titleRightIos),material:cls("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",_r.titleRightMd)},button:{ios:cls("me-1 ms-auto cursor-pointer"),material:cls("ms-auto cursor-pointer")},deleteIcon:{ios:cls("w-5 h-5",_r.deleteIconIos),material:cls("w-6 h-6",_r.deleteIconMd)},subtitle:{ios:cls("text-[15px] font-semibold",_r.subtitleIos),material:cls("text-sm")},text:{ios:cls("text-[15px]"),material:cls("text-sm",_r.textMaterial)}}},NotificationsColors=(Nr,_r)=>({bgIos:cls("bg-white",_r("dark:bg-[#1e1e1e]")),bgMaterial:cls("bg-md-light-surface-5",_r("dark:bg-md-dark-surface-5")),titleIos:cls("text-black",_r("dark:text-white")),titleRightIos:cls("text-opacity-45 text-black",_r("dark:text-white dark:text-opacity-45")),titleRightMd:cls("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:cls("text-black ",_r("dark:text-white")),textMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant ")),deleteIconIos:cls("fill-stone-400 active:fill-stone-200",_r("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),...Nr});function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$r.apply(this,arguments)}const Notification=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,button:Wr,icon:Zr,title:Yr,titleRightText:ts,subtitle:es,text:ns,translucent:Xr=!0,opened:qr,onClose:_i,ios:rs,material:is,children:ss,...os}=Nr,ls=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ls.current}));const cs=Ur,ds={...os},fs=useTheme({ios:rs,material:is}),ms=useThemeClasses({ios:rs,material:is}),ps=useDarkClasses(),ys=NotificationsColors(Gr,ps),ws=ms(NotificationsClasses({...Nr,translucent:Xr},ys,jr),jr);return fs==="ios"?React$1.createElement(cs,_extends$r({ref:ls,className:ws.base},ds),React$1.createElement("div",{className:ws.header},Zr&&React$1.createElement("div",{className:ws.icon},Zr),Yr&&React$1.createElement("div",{className:ws.title},Yr),ts&&React$1.createElement("div",{className:ws.titleRightText},ts),Wr&&React$1.createElement("div",{className:ws.button,role:"button",tabIndex:"0",onClick:_i},React$1.createElement(DeleteIcon,{theme:fs,className:ws.deleteIcon}))),React$1.createElement("div",{className:ws.content},es&&React$1.createElement("div",{className:ws.subtitle},es),ns&&React$1.createElement("div",{className:ws.text},ns),ss)):React$1.createElement(cs,_extends$r({ref:ls,className:ws.base},ds),React$1.createElement("div",{className:ws.header},Zr&&React$1.createElement("div",{className:ws.icon},Zr),React$1.createElement("div",{className:ws.contentWrapper},React$1.createElement("div",{className:ws.contentTitle},Yr&&React$1.createElement("div",{className:ws.title},Yr),ts&&React$1.createElement("div",{className:ws.titleRightText},ts)),React$1.createElement("div",{className:ws.content},es&&React$1.createElement("div",{className:ws.subtitle},es),ns&&React$1.createElement("div",{className:ws.text},ns),ss)),Wr&&React$1.createElement("div",{className:ws.button,role:"button",tabIndex:"0",onClick:_i},React$1.createElement(DeleteIcon,{theme:fs,className:ws.deleteIcon}))))});Notification.displayName="Notification";const PageClasses=(Nr,_r,Ur)=>({base:{common:cls("h-full w-full left-0 top-0 overflow-auto",positionClass("absolute",Ur)),ios:_r.bgIos,material:_r.bgMaterial}}),PageColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-ios-light-surface",_r("dark:bg-ios-dark-surface")),bgMaterial:cls("bg-md-light-surface",_r("dark:bg-md-dark-surface")),...Nr}};function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$q.apply(this,arguments)}const Page=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,children:Yr,...ts}=Nr,es=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:es.current}));const ns=Ur,Xr={...ts},qr=useThemeClasses({ios:Wr,material:Zr}),_i=useDarkClasses(),rs=PageColors(Gr,_i),is=qr(PageClasses(Nr,rs,jr),jr);return React$1.createElement(ns,_extends$q({ref:es,className:is.base},Xr),Yr)});Page.displayName="Page";const PanelClasses=(Nr,_r,Ur)=>{const{size:jr,floating:Gr}=Nr;return{base:{common:cls("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",Gr?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",_r.bg,positionClass("fixed",Ur),jr),ios:"",material:"ease-material-in"},left:{common:cls("no-safe-areas-right",Gr?"right-full -mr-2 rounded-2xl":"right-full"),material:cls(!Gr&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:cls("no-safe-areas-left",Gr?"left-full -ml-2 rounded-2xl":"left-full"),material:cls(!Gr&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},PanelColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bg:cls("bg-white",_r("dark:bg-black")),...Nr}};function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$p.apply(this,arguments)}const Panel=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,size:Wr="w-72 h-screen",side:Zr="left",opened:Yr,backdrop:ts=!0,floating:es=!1,onBackdropClick:ns,ios:Xr,material:qr,children:_i,...rs}=Nr,is=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:is.current}));const ss=Yr?"opened":"closed",os=Ur,ls={...rs},cs=useThemeClasses({ios:Xr,material:qr}),ds=useDarkClasses(),fs=PanelColors(Gr,ds),ms=cs(PanelClasses({...Nr,size:Wr,floating:es},fs,jr),jr),ps=cls(ms.base,ms[Zr][ss]);return React$1.createElement(React$1.Fragment,null,ts&&React$1.createElement("div",{className:ms.backdrop[ss],onClick:ns}),React$1.createElement(os,_extends$p({ref:is,className:ps},ls),_i))});Panel.displayName="Panel";const calcPopoverPosition=Nr=>{let{popoverEl:_r,targetEl:Ur,angleEl:jr,needsAngle:Gr,targetX:Wr,targetY:Zr,targetWidth:Yr=0,targetHeight:ts=0,theme:es}=Nr;Ur.current?Ur=Ur.current:Ur.value?Ur=Ur.value:Ur.el?Ur=Ur.el:Ur.$el&&(Ur=Ur.$el),typeof Ur=="string"&&(Ur=document.querySelector(Ur));let ns=document.body.offsetWidth,Xr=document.body.offsetHeight;ns===0&&(ns=window.innerWidth),Xr===0&&(Xr=window.innerHeight);const[qr,_i]=[_r.offsetWidth,_r.offsetHeight];let rs=0,is,ss,os="";Gr&&(rs=jr.offsetWidth/2);let ls,cs;const ds=window.getComputedStyle(Ur);let fs=parseInt(ds.getPropertyValue("--k-safe-area-top"),10)||0,ms=parseInt(ds.getPropertyValue("--k-safe-area-left"),10)||0,ps=parseInt(ds.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(fs)&&(fs=0),Number.isNaN(ms)&&(ms=0),Number.isNaN(ps)&&(ps=0),Ur){Yr=Ur.offsetWidth,ts=Ur.offsetHeight;const vs=Ur.getBoundingClientRect();ls=vs.left,cs=vs.top}else typeof Wr<"u"&&Zr!=="undefined"&&(ls=Wr,cs=Zr);let[ys,ws,xs]=[0,0,0];const Es=es==="ios"?13:23;let Rs="top";_i+rs<cs-fs?ws=cs-_i-rs:_i+rs<Xr-cs-ts?(Rs="bottom",ws=cs+ts+rs):(Rs="middle",ws=ts/2+cs-_i/2,xs=ws,ws=Math.max(5,Math.min(ws,Xr-_i-5)),xs-=ws),Rs==="top"||Rs==="bottom"?(ys=Yr/2+ls-qr/2,xs=ys,ys=Math.max(5,Math.min(ys,ns-qr-5)),ms&&(ys=Math.max(ys,ms)),ps&&ys+qr>ns-5-ps&&(ys=ns-5-ps-qr),Rs==="top"&&(os="bottom"),Rs==="bottom"&&(os="top"),xs-=ys,is=qr/2-rs+xs,is=Math.max(Math.min(is,qr-rs*2-Es),Es)):Rs==="middle"&&(ys=ls-qr-rs,os="right",(ys<5||ys+qr+ps>ns||ys<ms)&&(ys<5&&(ys=ls+Yr+rs),ys+qr+ps>ns&&(ys=ns-qr-5-ps),ys<ms&&(ys=ms),os="left"),ss=_i/2-rs+xs,ss=Math.max(Math.min(ss,_i-rs*2-Es),Es));const _s=Rs,Bs=ys<ls?"left":"right";return{set:!0,angleTop:typeof ss>"u"?void 0:`${ss}px`,angleLeft:typeof is>"u"?void 0:`${is}px`,anglePosition:os,popoverTop:`${ws}px`,popoverLeft:`${ys}px`,popoverPosition:`${_s}-${Bs}`}},PopoverClasses=(Nr,_r,Ur)=>{const{size:jr,translucent:Gr,angleClassName:Wr,angleClass:Zr}=Nr;return{base:{common:cls("transition-transform-opacity z-40 no-safe-areas",positionClass("fixed",Ur),jr),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:cls("overflow-hidden relative"),ios:cls("rounded-xl",Gr&&"translucent",_r.bgIos),material:cls("rounded-[1.75rem]",_r.bgMaterial)},angleWrap:{common:cls(Wr||Zr||"","pointer-events-none"),ios:cls("absolute w-6.5 h-6.5 z-50 overflow-hidden",Gr&&"opacity-80"),material:cls("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:cls("absolute rounded w-full h-full transform rotate-45"),ios:_r.bgIos,material:_r.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},PopoverColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-ios-light-surface-3",_r("dark:bg-ios-dark-surface-3")),bgMaterial:cls("bg-md-light-surface-3",_r("dark:bg-md-dark-surface-3")),...Nr}};function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$o.apply(this,arguments)}const Popover=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,angle:Gr=!0,angleClassName:Wr="",colors:Zr,size:Yr="w-64",opened:ts,backdrop:es=!0,onBackdropClick:ns,target:Xr,targetX:qr,targetY:_i,targetWidth:rs,targetHeight:is,translucent:ss=!0,ios:os,material:ls,children:cs,style:ds={},...fs}=Nr,ms=reactExports.useRef(null),ps=reactExports.useRef(null),[ys,ws]=reactExports.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});reactExports.useImperativeHandle(_r,()=>({el:ms.current}));const xs=ts?"opened":"closed",Es=Ur,Rs={...fs},_s=useTheme({ios:os,material:ls}),Bs=useThemeClasses({ios:os,material:ls}),vs=useDarkClasses(),Cs=PopoverColors(Zr,vs),Ss=Bs(PopoverClasses({...Nr,size:Yr,angleClassName:Wr,translucent:ss},Cs,jr),jr),As=()=>{!Xr||!ms.current||!ts||ws(calcPopoverPosition({popoverEl:ms.current,targetEl:Xr,angleEl:ps.current,needsAngle:Gr,targetX:qr,targetY:_i,targetHeight:is,targetWidth:rs,theme:_s}))},Us=()=>{typeof window>"u"||window.addEventListener("resize",As)},Ks=()=>{typeof window>"u"||window.removeEventListener("resize",As)};reactExports.useEffect(()=>(Us(),()=>Ks())),reactExports.useEffect(()=>{As()},[ts]);const Ws=ys.set?{...ds||{},left:ys.popoverLeft,top:ys.popoverTop}:ds,Js=ys.set?{left:ys.angleLeft,top:ys.angleTop}:void 0,ho={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},so=cls(Ss.base[xs],_s==="material"&&ho[ys.popoverPosition]);return React$1.createElement(React$1.Fragment,null,es&&React$1.createElement("div",{className:Ss.backdrop[xs],onClick:ns}),React$1.createElement(Es,_extends$o({ref:ms,className:so,style:Ws},Rs),Gr&&React$1.createElement("div",{ref:ps,style:Js,className:Ss.angleWrap[ys.anglePosition]},React$1.createElement("div",{className:Ss.angleArrow[ys.anglePosition]})),React$1.createElement("div",{className:Ss.inner},cs)))});Popover.displayName="Popover";const PopupClasses=(Nr,_r,Ur)=>{const{size:jr}=Nr;return{base:{common:cls("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",_r.bg,positionClass("fixed",Ur),jr),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:cls("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},PopupColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bg:cls("bg-white",_r("dark:bg-black")),...Nr}};function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$n.apply(this,arguments)}const Popup=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,size:Wr="w-screen h-screen md:w-160 md:h-160",opened:Zr,backdrop:Yr=!0,onBackdropClick:ts,ios:es,material:ns,children:Xr,...qr}=Nr,_i=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:_i.current}));const rs=Zr?"opened":"closed",is=Ur,ss={...qr},os=useThemeClasses({ios:es,material:ns}),ls=useDarkClasses(),cs=PopupColors(Gr,ls),ds=os(PopupClasses({...Nr,size:Wr},cs,jr),jr);return React$1.createElement(React$1.Fragment,null,Yr&&React$1.createElement("div",{className:ds.backdrop[rs],onClick:ts}),React$1.createElement(is,_extends$n({ref:_i,className:ds.base[rs]},ss),Xr))});Popup.displayName="Popup";function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$m.apply(this,arguments)}const PreloaderIOS=Nr=>React$1.createElement("svg",_extends$m({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},Nr),React$1.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),React$1.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),React$1.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),React$1.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),React$1.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),React$1.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),React$1.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),React$1.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$l.apply(this,arguments)}const PreloaderMaterial=Nr=>React$1.createElement("svg",_extends$l({viewBox:"0 0 36 36"},Nr,{fill:"none",stroke:"currentcolor"}),React$1.createElement("circle",{cx:"18",cy:"18",r:"16"})),PreloaderClasses=(Nr,_r,Ur)=>{const{size:jr}=Nr;return{base:{common:cls(Ur==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${jr}`),ios:_r.iconIos,material:`stroke-4 ${_r.iconMaterial}`},inner:{common:"block w-full h-full"}}},PreloaderColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{iconIos:"text-primary",iconMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),...Nr}};function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$k.apply(this,arguments)}const Preloader=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="span",className:jr,colors:Gr,size:Wr="w-8 h-8",ios:Zr,material:Yr,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=Ur,qr={...es},_i=useTheme({ios:Zr,material:Yr}),rs=useThemeClasses({ios:Zr,material:Yr}),is=useDarkClasses(),ss=PreloaderColors(Gr,is),os=_i==="ios"?PreloaderIOS:PreloaderMaterial,ls=rs(PreloaderClasses({...Nr,size:Wr},ss,_i),jr);return React$1.createElement(Xr,_extends$k({ref:ns,className:ls.base},qr),React$1.createElement("span",{className:ls.inner},React$1.createElement(os,{className:"w-full h-full"})),ts)});Preloader.displayName="Preloader";const ProgressbarClasses=Nr=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:Nr.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:Nr.bgIos,material:Nr.bgMaterial}}),ProgressbarColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:"bg-primary",bgMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),...Nr}};function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$j.apply(this,arguments)}const Progressbar=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="span",className:jr,colors:Gr,ios:Wr,material:Zr,progress:Yr=0,children:ts,...es}=Nr,ns=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ns.current}));const Xr=Ur,qr={...es},_i=useThemeClasses({ios:Wr,material:Zr}),rs=useDarkClasses(),is=ProgressbarColors(Gr,rs),ss=_i(ProgressbarClasses(is),jr);return React$1.createElement(Xr,_extends$j({ref:ns,className:ss.base},qr),React$1.createElement("span",{className:ss.inner,style:{transform:`translateX(-${100-Yr/1*100}%)`}}),ts)});Progressbar.displayName="Progressbar";const RadioClasses=(Nr,_r,Ur,jr)=>({base:cls("cursor-pointer inline-flex align-middle",positionClass("relative",Ur),jr("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:_r.borderIos,material:_r.borderMaterial},checked:{ios:_r.borderCheckedIos,material:_r.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${_r.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),RadioColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{borderIos:cls("border-black border-opacity-30",_r("dark:border-white dark:border-opacity-30")),borderMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:cls("border-md-light-primary",_r("dark:border-md-dark-primary")),...Nr}};function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$i.apply(this,arguments)}const Radio=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="label",className:jr,colors:Gr,defaultChecked:Wr,checked:Zr,name:Yr,value:ts,disabled:es,readOnly:ns,onChange:Xr,ios:qr,material:_i,touchRipple:rs=!0,children:is,...ss}=Nr,os=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:os.current}));const ls=Ur,cs={...ss},ds=useTheme({ios:qr,material:_i}),fs=useThemeClasses({ios:qr,material:_i}),ms=useDarkClasses();useTouchRipple(os,ds==="material"&&rs);const ps=RadioColors(Gr,ms),ys=Zr||Wr&&!Xr?"checked":"notChecked",ws=fs(RadioClasses(Nr,ps,jr,ms),jr);return React$1.createElement(ls,_extends$i({ref:os,className:ws.base},cs),React$1.createElement("input",{type:"radio",name:Yr,value:ts,disabled:es,readOnly:ns,checked:Zr,defaultChecked:Wr,onChange:Xr,className:ws.input}),React$1.createElement("i",{className:ws.iconWrap[ys]},ds==="ios"?React$1.createElement(CheckboxIcon,{className:ws.icon[ys]}):React$1.createElement("span",{className:ws.icon[ys]})),is)});Radio.displayName="Radio";const RangeClasses=(Nr,_r,Ur)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:cls("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",Ur("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${_r.valueBgIos}`,material:`h-0.5 ${_r.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${_r.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${_r.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),RangeColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{valueBgIos:"bg-primary",valueBgMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:cls("range-thumb:bg-md-light-primary",_r("dark:range-thumb:bg-md-dark-primary")),...Nr}};function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$h.apply(this,arguments)}const Range=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,children:Yr,inputId:ts,name:es,value:ns=void 0,defaultValue:Xr,readOnly:qr,disabled:_i,step:rs=1,min:is=0,max:ss=100,onInput:os,onChange:ls,onFocus:cs,onBlur:ds,...fs}=Nr,ms=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ms.current}));const ps=Ur,ys={...fs},ws=useThemeClasses({ios:Wr,material:Zr}),xs=useDarkClasses(),Es=RangeColors(Gr,xs),Rs=ws(RangeClasses(Nr,Es,xs),jr),_s=((ns||0)-is)/(ss-is)*100;return React$1.createElement(ps,_extends$h({ref:ms,className:Rs.base},ys),React$1.createElement("span",{className:Rs.trackBg}),React$1.createElement("span",{className:Rs.trackValue,style:{width:`${_s}%`}}),React$1.createElement("input",{className:cls(Rs.input,Rs.inputThumb,Rs.inputTrack),type:"range",id:ts,name:es,min:is,max:ss,step:rs,value:ns,defaultValue:Xr,readOnly:qr,disabled:_i,onInput:os,onChange:ls,onFocus:cs,onBlur:ds}))});Range.displayName="Range";const SearchbarClasses=(Nr,_r,Ur)=>{let{isEnabled:jr,darkClasses:Gr}=Ur;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:cls("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",Gr("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),_r.placeholderIos,_r.inputBgIos),material:cls("h-12 ps-12 pe-4 rounded-full",_r.placeholderMaterial,_r.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:cls("w-4 h-4 opacity-45"),material:cls("w-5 h-5 z-30",jr?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:cls("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",jr?"":"opacity-0"),material:cls("absolute left-4 cursor-pointer",jr?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},SearchbarColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{inputBgIos:"",inputBgMaterial:cls("bg-md-light-secondary-container",_r("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:cls("placeholder-md-light-on-surface-variant",_r("dark:placeholder-md-dark-on-surface-variant")),...Nr}};function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$g.apply(this,arguments)}const SearchIcon=Nr=>{let{theme:_r,...Ur}=Nr;return _r==="ios"?React$1.createElement("svg",_extends$g({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},Ur),React$1.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):React$1.createElement("svg",_extends$g({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},Ur),React$1.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$f.apply(this,arguments)}const Searchbar=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,placeholder:Wr="Search",value:Zr,inputId:Yr,inputStyle:ts,disableButton:es=!1,disableButtonText:ns="Cancel",clearButton:Xr=!0,onInput:qr,onChange:_i,onFocus:rs,onBlur:is,onClear:ss,onDisable:os,ios:ls,material:cs,...ds}=Nr,fs=reactExports.useRef(null),ms=reactExports.useRef(null),ps=reactExports.useRef(null),[ys,ws]=reactExports.useState(0),xs=reactExports.useRef(null),Es=reactExports.useRef(!1);reactExports.useImperativeHandle(_r,()=>({el:ms.current,searchEl:fs.current}));const[Rs,_s]=reactExports.useState(!1),Bs=useTheme({ios:ls,material:cs}),vs=useThemeClasses({ios:ls,material:cs}),Cs=useDarkClasses(),Ss=SearchbarColors(Gr,Cs),As=Eo=>{qr&&qr(Eo)},Us=Eo=>{_i&&_i(Eo)},Ks=Eo=>{_s(!0),rs&&rs(Eo)},Ws=Eo=>{is&&is(Eo)},Js=()=>{Zr||(xs.current=setTimeout(()=>{_s(!1)}))},ho=()=>{clearTimeout(xs.current)},so=Eo=>{Eo.preventDefault(),_s(!1),fs.current&&fs.current.blur(),os&&os(),ss&&ss()};reactExports.useEffect(()=>{ps.current&&ws(ps.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Es.current=!0})})},[]);const io=vs(SearchbarClasses({...Nr},Ss,{isEnabled:Rs,darkClasses:Cs})),vo=Bs==="ios"?React$1.createElement("button",{type:"button",ref:ps,style:{marginRight:Rs?0:`-${ys}px`,transitionDuration:Es.current?"":"0ms"},className:io.cancelButton,onClick:so,onPointerDown:Eo=>Eo.preventDefault()},ns):React$1.createElement(BackIcon,{theme:Bs,onClick:so,className:cls(io.cancelButton),onPointerDown:Eo=>Eo.preventDefault()}),co=Ur,go={...ds};return React$1.createElement(co,_extends$f({ref:ms,className:io.base},go,{onBlurCapture:Js,onFocusCapture:ho}),React$1.createElement("div",{className:io.inner},React$1.createElement("span",{className:io.searchIconWrap},React$1.createElement(SearchIcon,{ios:ls,material:cs,className:io.searchIcon})),React$1.createElement("input",{id:Yr,ref:fs,className:cls(io.input),style:ts,type:"text",name:"search",placeholder:Wr,value:Zr,onInput:As,onChange:Us,onFocus:Ks,onBlur:Ws}),Zr&&Xr&&React$1.createElement("button",{className:io.clearButton,onClick:ss,type:"button"},React$1.createElement(DeleteIcon,{theme:Bs,className:io.deleteIcon}))),es&&vo)});Searchbar.displayName="Searchbar";const SegmentedClasses=(Nr,_r,Ur)=>{const{outline:jr,rounded:Gr}=Nr;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:jr?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${_r.borderIos} border-2`,material:`${_r.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${_r.divideIos}`,material:`divide-x ${_r.divideMaterial}`},strong:{common:cls("p-0.5 space-x-1 relative"),ios:_r.strongBgIos,material:_r.strongBgMaterial},strongHighlight:{common:cls("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",Gr&&"rounded-full","bg-white shadow",Ur("dark:bg-opacity-15 dark:touch-ripple-white")),ios:cls(!Gr&&"rounded"),material:cls(!Gr&&"rounded-md")}}},SegmentedColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{strongBgIos:cls("bg-black bg-opacity-5",_r("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:cls("bg-md-light-surface-variant",_r("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:cls("divide-md-light-outline",_r("dark:divide-md-dark-outline")),...Nr}};function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$e.apply(this,arguments)}const Segmented=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,ios:Wr,material:Zr,raised:Yr,outline:ts,strong:es,rounded:ns,children:Xr,...qr}=Nr,_i=reactExports.useRef(null),rs=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:_i.current}));const[is,ss]=reactExports.useState({transform:"",width:""}),os=Ur,ls={...qr},cs=useThemeClasses({ios:Wr,material:Zr}),ds=useDarkClasses(),fs=SegmentedColors(Gr,ds),ms=cs(SegmentedClasses(Nr,fs,ds)),ps=cls(ns?ms.base.rounded:ms.base.square,Yr&&ms.raised,ts&&ms.outline,es&&ms.strong,jr);return reactExports.useEffect(()=>{if(es&&rs.current){const ys=rs.current.parentElement,ws=ys.children.length-1,xs=[...ys.children].indexOf(ys.querySelector(".k-segmented-strong-button-active")),Es="4px";ss({...is,width:`calc((100% - 2px * 2 - ${Es} * (${ws} - 1)) / ${ws})`,transform:`translateX(calc((${xs} * 100% + ${xs} * ${Es}) * var(--k-rtl-reverse)))`})}},[Xr]),React$1.createElement(os,_extends$e({ref:_i,className:ps},ls),ts?React$1.createElement("span",{className:ms.outlineInner},Xr):Xr,es&&React$1.createElement("span",{ref:rs,className:ms.strongHighlight,style:is}))});Segmented.displayName="Segmented";function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$d.apply(this,arguments)}const SegmentedButton=reactExports.forwardRef((Nr,_r)=>{const{active:Ur,children:jr,outline:Gr,strong:Wr,clear:Zr,rounded:Yr,...ts}=Nr,es=reactExports.useRef(null);return reactExports.useImperativeHandle(_r,()=>({el:es.current})),React$1.createElement(Button,_extends$d({ref:es,segmented:!0,segmentedActive:Ur,segmentedStrong:Wr,rounded:Yr&&Wr},ts),jr)});SegmentedButton.displayName="SegmentedButton";const SheetClasses=(Nr,_r,Ur)=>({base:{common:cls("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",positionClass("fixed",Ur)),ios:"",material:`rounded-t-2xl ease-material-in ${_r.bgIos}`,opened:`-translate-y-full ${_r.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),SheetColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-white",_r("dark:bg-black")),bgMaterial:cls("bg-md-light-surface",_r("dark:bg-md-dark-surface")),...Nr}};function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$c.apply(this,arguments)}const Sheet=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,opened:Wr,backdrop:Zr=!0,onBackdropClick:Yr,ios:ts,material:es,children:ns,...Xr}=Nr,qr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:qr.current}));const _i=Wr?"opened":"closed",rs=Ur,is={...Xr},ss=useThemeClasses({ios:ts,material:es}),os=useDarkClasses(),ls=SheetColors(Gr,os),cs=ss(SheetClasses(Nr,ls,jr),jr);return React$1.createElement(React$1.Fragment,null,Zr&&React$1.createElement("div",{className:cs.backdrop[_i],onClick:Yr}),React$1.createElement(rs,_extends$c({ref:qr,className:cs.base[_i]},is),ns))});Sheet.displayName="Sheet";const StepperClasses=(Nr,_r)=>{const{buttonsOnly:Ur}=Nr;return{base:`${_r.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:cls(_r.fillTouchRipple,Ur&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:cls(_r.fillBgIos,_r.fillTextIos,_r.fillActiveBgIos),material:cls(_r.fillBgMaterial,_r.fillTextMaterial,_r.fillActiveBgMaterial)},outline:{common:cls(_r.touchRipple,"active:bg-opacity-15",Ur&&"first:border-r-0 rtl:last:border-r-0"),ios:cls("border-2",_r.textIos,_r.activeBgIos,_r.outlineBorderIos,Ur&&"rtl:first:border-r-2"),material:cls("border",_r.textMaterial,_r.activeBgMaterial,_r.outlineBorderMaterial,Ur&&"rtl:first:border-r")},clear:{common:`${_r.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:cls(_r.textIos,_r.activeBgIos),material:cls(_r.textMaterial,_r.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${_r.textIos}`,material:`text-sm ${_r.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${_r.outlineBorderIos}`,material:`border-t border-b ${_r.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${_r.outlineBorderIos}`,material:`border-t border-b ${_r.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},StepperColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:cls("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:cls("text-white"),fillTextMaterial:cls("text-md-light-on-primary",_r("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:cls("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",...Nr}};function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$b.apply(this,arguments)}const Stepper=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="span",className:jr,colors:Gr,value:Wr=0,defaultValue:Zr,input:Yr=!1,inputType:ts="text",inputPlaceholder:es,inputDisabled:ns,inputReadOnly:Xr,buttonsOnly:qr,rounded:_i,roundedIos:rs,roundedMaterial:is,small:ss,smallIos:os,smallMaterial:ls,large:cs,largeIos:ds,largeMaterial:fs,raised:ms,raisedIos:ps,raisedMaterial:ys,outline:ws,outlineIos:xs,outlineMaterial:Es,onInput:Rs,onChange:_s,onFocus:Bs,onBlur:vs,onMinus:Cs,onPlus:Ss,ios:As,material:Us,touchRipple:Ks=!0,children:Ws,...Js}=Nr,ho=reactExports.useRef(null),so=reactExports.useRef(null),io=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:ho.current}));const vo=Ur,co=useTheme({ios:As,material:Us}),go=useThemeClasses({ios:As,material:Us});useTouchRipple(so,co==="material"&&Ks),useTouchRipple(io,co==="material"&&Ks);const Eo=typeof _i>"u"?co==="ios"?rs:is:_i,Ro=typeof ss>"u"?co==="ios"?os:ls:ss,Po=typeof cs>"u"?co==="ios"?ds:fs:cs,Oo=typeof ms>"u"?co==="ios"?ps:ys:ms,Ts=typeof ws>"u"?co==="ios"?xs:Es:ws,Ns=useDarkClasses(),to=StepperColors(Gr,Ns),ao=Po?"large":Ro?"small":"medium",lo=Ts&&Oo?"clear":Ts?"outline":"fill",Io=Eo?"rounded":"square",po=go(StepperClasses({...Nr,rounded:Eo,small:Ro,large:Po,raised:Oo,outline:Ts},to)),Fo={...Js},Do=cls(po.base,Oo&&po.raised,po.size[ao],po.shape[Io],jr),No=cls(po.button,po.buttonStyle[lo],po.buttonLeftShape[Io]),Co=cls(po.button,po.buttonStyle[lo],po.buttonRightShape[Io]),qo=cls(Yr&&po.input,po.value[lo]);return React$1.createElement(vo,_extends$b({ref:ho,className:Do},Fo),React$1.createElement("span",{ref:so,className:No,role:"button",tabIndex:"0",onClick:Cs},React$1.createElement("span",{className:po.hBar})),Yr&&!qr&&React$1.createElement("input",{className:qo,placeholder:es,type:ts,value:Wr,defaultValue:Zr,disabled:ns,readOnly:Xr,onInput:Rs,onChange:_s,onFocus:Bs,onBlur:vs}),!Yr&&!qr&&React$1.createElement("span",{className:qo},Wr),React$1.createElement("span",{ref:io,className:Co,role:"button",tabIndex:"0",onClick:Ss},React$1.createElement("span",{className:po.hBar}),React$1.createElement("span",{className:po.vBar})))});Stepper.displayName="Stepper";function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$a.apply(this,arguments)}const Tabbar=reactExports.forwardRef((Nr,_r)=>{const{labels:Ur,icons:jr,children:Gr,...Wr}=Nr,Zr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Zr.current}));const Yr={...Wr};return React$1.createElement(Toolbar,_extends$a({ref:Zr,tabbar:!0,tabbarIcons:jr,tabbarLabels:Ur},Yr),Gr)});Tabbar.displayName="Tabbar";const TabbarLinkClasses=function(Nr,_r){let{hasIcon:Ur,hasLabel:jr,active:Gr}=Nr===void 0?{}:Nr;return _r===void 0&&(_r={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:cls("py-1",Gr?_r.textActiveIos:_r.textIos),material:cls("py-2",Ur&&jr&&"space-y-1",Gr?_r.textActiveMaterial:_r.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:cls("w-7 h-7"),material:cls("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:cls(Gr?_r.iconBgActiveIos:_r.iconBgIos),material:cls(Gr?_r.iconBgActiveMaterial:_r.iconBgMaterial,!Gr&&"scale-x-[0.5] opacity-0")},label:{ios:cls(Ur?"text-xs font-medium":"",""),material:cls(Ur?"text-xs":"text-sm","font-medium")}}},TabbarLinkColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textIos:cls("text-black text-opacity-40",_r("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),textActiveMaterial:cls("text-md-light-on-secondary-container",_r("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:cls("bg-md-light-secondary-container",_r("dark:bg-md-dark-secondary-container")),...Nr}};function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$9.apply(this,arguments)}const TabbarLink=reactExports.forwardRef((Nr,_r)=>{const{className:Ur,active:jr,ios:Gr,material:Wr,colors:Zr,linkProps:Yr={},icon:ts,label:es,children:ns,...Xr}=Nr,qr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:qr.current}));const _i={...Yr,...Xr},rs=useDarkClasses(),is=TabbarLinkColors(Zr,rs),ss=useThemeClasses({ios:Gr,material:Wr}),os=!!ts,ls=es||ns&&ns.length,cs=ss(TabbarLinkClasses({hasLabel:ls,hasIcon:os,active:jr},is));return React$1.createElement(Link,_extends$9({ref:qr,tabbar:!0,tabbarActive:jr,className:Ur},_i),React$1.createElement("span",{className:cs.content},ts&&React$1.createElement("span",{className:cs.iconContainer},React$1.createElement("span",{className:cs.iconBg}),ts),(es||ns&&ns.length)&&React$1.createElement("span",{className:cs.label},es,ns)))});TabbarLink.displayName="TabbarLink";const TableClasses=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$8.apply(this,arguments)}const Table=reactExports.forwardRef((Nr,_r)=>{const{className:Ur,ios:jr,material:Gr,children:Wr,...Zr}=Nr,Yr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Yr.current}));const es=useThemeClasses({ios:jr,material:Gr})(TableClasses({...Nr})),ns={...Zr};return React$1.createElement("table",_extends$8({className:es.base,ref:Yr},ns),Wr)});Table.displayName="Table";const TableBodyClasses=()=>({base:{common:"text-sm",ios:"",material:""}});function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$7.apply(this,arguments)}const TableBody=reactExports.forwardRef((Nr,_r)=>{const{className:Ur,ios:jr,material:Gr,children:Wr,...Zr}=Nr,Yr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Yr.current}));const es=useThemeClasses({ios:jr,material:Gr})(TableBodyClasses({...Nr})),ns={...Zr};return React$1.createElement("tbody",_extends$7({className:es.base,ref:Yr},ns),Wr)});TableBody.displayName="TableBody";const TableCellClasses=(Nr,_r,Ur)=>{const{header:jr}=Nr;return{base:{common:cls("align-middle",Ur),ios:cls(jr?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${_r.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:cls(jr?`${_r.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},TableCellColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{textHeaderIos:cls("text-black/45",_r("dark:text-white/55")),textHeaderMaterial:cls("text-md-light-on-surface-variant",_r("dark:text-md-dark-on-surface-variant")),...Nr}};function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$6.apply(this,arguments)}const TableCell=reactExports.forwardRef((Nr,_r)=>{const{className:Ur,colors:jr,header:Gr,ios:Wr,material:Zr,children:Yr,...ts}=Nr,es=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:es.current}));const ns=Gr?"th":"td",Xr=useThemeClasses({ios:Wr,material:Zr}),qr=useDarkClasses(),_i=TableCellColors(jr,qr),rs=Xr(TableCellClasses({...Nr},_i,Ur)),is={...ts};return React$1.createElement(ns,_extends$6({className:rs.base,ref:es},is),Yr)});TableCell.displayName="TableCell";const TableHeadClasses=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$5.apply(this,arguments)}const TableHead=reactExports.forwardRef((Nr,_r)=>{const{className:Ur,ios:jr,material:Gr,children:Wr,...Zr}=Nr,Yr=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:Yr.current}));const es=useThemeClasses({ios:jr,material:Gr})(TableHeadClasses({...Nr})),ns={...Zr};return React$1.createElement("thead",_extends$5({className:es.base,ref:Yr},ns),Wr)});TableHead.displayName="TableHead";const TableRowClasses=(Nr,_r)=>{const{header:Ur}=Nr;return{base:{common:"align-middle relative",ios:Ur?"":cls(_r.bgIos,"hairline-b last:hairline-transparent"),material:Ur?"":cls(_r.bgMaterial,`border-t ${_r.dividerMaterial}`)}}},TableRowColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("hover:bg-black/5",_r("dark:hover:bg-white/10")),bgMaterial:cls("hover:bg-md-light-secondary-container",_r("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),...Nr}};function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$4.apply(this,arguments)}const TableRow=reactExports.forwardRef((Nr,_r)=>{const{className:Ur,colors:jr,header:Gr,ios:Wr,material:Zr,children:Yr,...ts}=Nr,es=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:es.current}));const ns=useThemeClasses({ios:Wr,material:Zr}),Xr=useDarkClasses(),qr=TableRowColors(jr,Xr),_i=ns(TableRowClasses({...Nr},qr)),rs={...ts};return React$1.createElement("tr",_extends$4({className:_i.base,ref:es},rs),Yr)});TableRow.displayName="TableRow";const ToastClasses=(Nr,_r,Ur)=>{const{translucent:jr,opened:Gr}=Nr;return{base:{common:cls(positionClass("fixed",Ur),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!Gr&&"translate-y-full opacity-0 pointer-events-none"),ios:cls("sm:rounded-lg duration-300",_r.textIos,_r.bgIos,jr&&"translucent"),material:cls("sm:rounded-2xl duration-200",_r.textMaterial,_r.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},ToastColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:"bg-black",bgMaterial:cls("bg-md-light-surface-5",_r("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:cls("text-md-light-primary",_r("dark:text-md-dark-primary")),...Nr}};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$3.apply(this,arguments)}const Toast=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="div",className:jr,colors:Gr,translucent:Wr=!0,button:Zr,position:Yr="left",opened:ts,ios:es,material:ns,children:Xr,...qr}=Nr,_i=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:_i.current}));const rs=Ur,is={...qr},ss=useThemeClasses({ios:es,material:ns}),os=useDarkClasses(),ls=ToastColors(Gr,os),cs=ss(ToastClasses({...Nr,translucent:Wr},ls,jr),jr);return React$1.createElement(rs,_extends$3({ref:_i,className:cs.base[Yr]},is),React$1.createElement("div",{className:cs.content},Xr,Zr&&React$1.createElement("div",{className:cs.button},Zr)))});Toast.displayName="Toast";const ToggleClasses=(Nr,_r,Ur,jr)=>({base:{common:cls(positionClass("relative",Ur),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",jr("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:_r.bgIos,material:cls(_r.bgMaterial,_r.borderMaterial)},checked:{ios:`${_r.checkedBgIos}`,material:cls(_r.checkedBgMaterial,_r.checkedBorderMaterial)}},inner:{ios:cls("w-full h-full bg-white rounded-full block duration-300 transform",jr("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:cls("translate-x-5 rtl:!-translate-x-5"),material:cls("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:cls(_r.checkedThumbBgIos),material:cls(_r.checkedThumbBgMaterial)},notChecked:{ios:_r.thumbBgIos,material:cls("scale-[0.666]",_r.thumbBgMaterial)}},input:{common:"hidden"}}),ToggleColors=function(Nr,_r){return Nr===void 0&&(Nr={}),{bgIos:cls("bg-black bg-opacity-10",_r("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:cls("bg-md-light-surface-variant",_r("dark:bg-md-dark-surface-variant")),checkedBgMaterial:cls("bg-md-light-primary",_r("dark:bg-md-dark-primary")),borderMaterial:cls("border-md-light-outline",_r("dark:border-md-dark-outline")),checkedBorderMaterial:cls("border-md-light-primary",_r("dark:border-md-dark-primary")),thumbBgMaterial:cls("bg-md-light-outline",_r("dark:bg-md-dark-outline")),checkedThumbBgMaterial:cls("bg-md-light-on-primary",_r("dark:bg-md-dark-on-primary")),...Nr}};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$2.apply(this,arguments)}const Toggle=reactExports.forwardRef((Nr,_r)=>{const{component:Ur="label",className:jr,colors:Gr,defaultChecked:Wr,checked:Zr,name:Yr,value:ts,disabled:es,readOnly:ns,onChange:Xr,touchRipple:qr=!0,ios:_i,material:rs,children:is,...ss}=Nr,os=reactExports.useRef(null),ls=reactExports.useRef(null);reactExports.useImperativeHandle(_r,()=>({el:os.current}));const cs=Ur,ds={...ss},fs=useTheme({ios:_i,material:rs}),ms=useThemeClasses({ios:_i,material:rs}),ps=useDarkClasses();useTouchRipple(ls,fs==="material"&&qr,os);const ys=ToggleColors(Gr,ps),ws=Zr||Wr&&!Xr?"checked":"notChecked",xs=ms(ToggleClasses(Nr,ys,jr,ps),jr);return React$1.createElement(cs,_extends$2({ref:os,className:xs.base[ws]},ds),React$1.createElement("input",{type:"checkbox",name:Yr,value:ts,disabled:es,readOnly:ns,checked:Zr,defaultChecked:Wr,onChange:Xr,className:xs.input}),React$1.createElement("span",{className:xs.inner[ws]}),React$1.createElement("span",{ref:ls,className:xs.thumbWrap[ws]},React$1.createElement("span",{className:xs.thumb[ws]})),is)});Toggle.displayName="Toggle";var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React$1.createContext&&React$1.createContext(DefaultContext),__assign$3=globalThis&&globalThis.__assign||function(){return __assign$3=Object.assign||function(Nr){for(var _r,Ur=1,jr=arguments.length;Ur<jr;Ur++){_r=arguments[Ur];for(var Gr in _r)Object.prototype.hasOwnProperty.call(_r,Gr)&&(Nr[Gr]=_r[Gr])}return Nr},__assign$3.apply(this,arguments)},__rest$1=globalThis&&globalThis.__rest||function(Nr,_r){var Ur={};for(var jr in Nr)Object.prototype.hasOwnProperty.call(Nr,jr)&&_r.indexOf(jr)<0&&(Ur[jr]=Nr[jr]);if(Nr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Gr=0,jr=Object.getOwnPropertySymbols(Nr);Gr<jr.length;Gr++)_r.indexOf(jr[Gr])<0&&Object.prototype.propertyIsEnumerable.call(Nr,jr[Gr])&&(Ur[jr[Gr]]=Nr[jr[Gr]]);return Ur};function Tree2Element(Nr){return Nr&&Nr.map(function(_r,Ur){return React$1.createElement(_r.tag,__assign$3({key:Ur},_r.attr),Tree2Element(_r.child))})}function GenIcon(Nr){return function(_r){return React$1.createElement(IconBase,__assign$3({attr:__assign$3({},Nr.attr)},_r),Tree2Element(Nr.child))}}function IconBase(Nr){var _r=function(Ur){var jr=Nr.attr,Gr=Nr.size,Wr=Nr.title,Zr=__rest$1(Nr,["attr","size","title"]),Yr=Gr||Ur.size||"1em",ts;return Ur.className&&(ts=Ur.className),Nr.className&&(ts=(ts?ts+" ":"")+Nr.className),React$1.createElement("svg",__assign$3({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},Ur.attr,jr,Zr,{className:ts,style:__assign$3(__assign$3({color:Nr.color||Ur.color},Ur.style),Nr.style),height:Yr,width:Yr,xmlns:"http://www.w3.org/2000/svg"}),Wr&&React$1.createElement("title",null,Wr),Nr.children)};return IconContext!==void 0?React$1.createElement(IconContext.Consumer,null,function(Ur){return _r(Ur)}):_r(DefaultContext)}function MdHome(Nr){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}}]})(Nr)}function MdCreate(Nr){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 000-1.41l-2.34-2.34a.996.996 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}]})(Nr)}function MdCollections(Nr){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}}]})(Nr)}const LogoIcon="/logo.svg",Logo=()=>jsxRuntimeExports.jsx("img",{src:LogoIcon,alt:"Logo GLAMorous Europe",className:"bg-white h-16 w-16"});function Layout(){return jsxRuntimeExports.jsx(App$1,{theme:"material",children:jsxRuntimeExports.jsxs(Page,{className:"flex flex-col",children:[jsxRuntimeExports.jsx(Navbar,{centerTitle:!0,title:"GLAMorouS Europe",titleClassName:"neonFont text-white text-3xl",className:"top-0 sticky p-4",left:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(Logo,{})})}),jsxRuntimeExports.jsxs(Tabbar,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed",children:[jsxRuntimeExports.jsx(TabbarLink,{to:"/",active:useMatch({path:useResolvedPath("/").pathname,end:!0}),component:NavLink,icon:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(MdHome,{className:"w-6 h-6"})})}),jsxRuntimeExports.jsx(TabbarLink,{active:useMatch({path:useResolvedPath("/collect").pathname,end:!0}),to:"/collect",component:NavLink,icon:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(MdCollections,{className:"w-6 h-6"})})}),jsxRuntimeExports.jsx(TabbarLink,{active:useMatch({path:useResolvedPath("/create").pathname,end:!0}),to:"/create",component:NavLink,icon:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(MdCreate,{className:"w-6 h-6"})})})]}),jsxRuntimeExports.jsx("main",{className:"flex-1",children:jsxRuntimeExports.jsx(Outlet,{})})]})})}const Collect$1="";function bind(Nr,_r){return function(){return Nr.apply(_r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(Nr=>_r=>{const Ur=toString.call(_r);return Nr[Ur]||(Nr[Ur]=Ur.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=Nr=>(Nr=Nr.toLowerCase(),_r=>kindOf(_r)===Nr),typeOfTest=Nr=>_r=>typeof _r===Nr,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(Nr){return Nr!==null&&!isUndefined(Nr)&&Nr.constructor!==null&&!isUndefined(Nr.constructor)&&isFunction(Nr.constructor.isBuffer)&&Nr.constructor.isBuffer(Nr)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(Nr){let _r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?_r=ArrayBuffer.isView(Nr):_r=Nr&&Nr.buffer&&isArrayBuffer(Nr.buffer),_r}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$2=Nr=>Nr!==null&&typeof Nr=="object",isBoolean=Nr=>Nr===!0||Nr===!1,isPlainObject$5=Nr=>{if(kindOf(Nr)!=="object")return!1;const _r=getPrototypeOf(Nr);return(_r===null||_r===Object.prototype||Object.getPrototypeOf(_r)===null)&&!(Symbol.toStringTag in Nr)&&!(Symbol.iterator in Nr)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=Nr=>isObject$2(Nr)&&isFunction(Nr.pipe),isFormData=Nr=>{let _r;return Nr&&(typeof FormData=="function"&&Nr instanceof FormData||isFunction(Nr.append)&&((_r=kindOf(Nr))==="formdata"||_r==="object"&&isFunction(Nr.toString)&&Nr.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=Nr=>Nr.trim?Nr.trim():Nr.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(Nr,_r,{allOwnKeys:Ur=!1}={}){if(Nr===null||typeof Nr>"u")return;let jr,Gr;if(typeof Nr!="object"&&(Nr=[Nr]),isArray(Nr))for(jr=0,Gr=Nr.length;jr<Gr;jr++)_r.call(null,Nr[jr],jr,Nr);else{const Wr=Ur?Object.getOwnPropertyNames(Nr):Object.keys(Nr),Zr=Wr.length;let Yr;for(jr=0;jr<Zr;jr++)Yr=Wr[jr],_r.call(null,Nr[Yr],Yr,Nr)}}function findKey(Nr,_r){_r=_r.toLowerCase();const Ur=Object.keys(Nr);let jr=Ur.length,Gr;for(;jr-- >0;)if(Gr=Ur[jr],_r===Gr.toLowerCase())return Gr;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=Nr=>!isUndefined(Nr)&&Nr!==_global;function merge$1(){const{caseless:Nr}=isContextDefined(this)&&this||{},_r={},Ur=(jr,Gr)=>{const Wr=Nr&&findKey(_r,Gr)||Gr;isPlainObject$5(_r[Wr])&&isPlainObject$5(jr)?_r[Wr]=merge$1(_r[Wr],jr):isPlainObject$5(jr)?_r[Wr]=merge$1({},jr):isArray(jr)?_r[Wr]=jr.slice():_r[Wr]=jr};for(let jr=0,Gr=arguments.length;jr<Gr;jr++)arguments[jr]&&forEach(arguments[jr],Ur);return _r}const extend=(Nr,_r,Ur,{allOwnKeys:jr}={})=>(forEach(_r,(Gr,Wr)=>{Ur&&isFunction(Gr)?Nr[Wr]=bind(Gr,Ur):Nr[Wr]=Gr},{allOwnKeys:jr}),Nr),stripBOM=Nr=>(Nr.charCodeAt(0)===65279&&(Nr=Nr.slice(1)),Nr),inherits=(Nr,_r,Ur,jr)=>{Nr.prototype=Object.create(_r.prototype,jr),Nr.prototype.constructor=Nr,Object.defineProperty(Nr,"super",{value:_r.prototype}),Ur&&Object.assign(Nr.prototype,Ur)},toFlatObject=(Nr,_r,Ur,jr)=>{let Gr,Wr,Zr;const Yr={};if(_r=_r||{},Nr==null)return _r;do{for(Gr=Object.getOwnPropertyNames(Nr),Wr=Gr.length;Wr-- >0;)Zr=Gr[Wr],(!jr||jr(Zr,Nr,_r))&&!Yr[Zr]&&(_r[Zr]=Nr[Zr],Yr[Zr]=!0);Nr=Ur!==!1&&getPrototypeOf(Nr)}while(Nr&&(!Ur||Ur(Nr,_r))&&Nr!==Object.prototype);return _r},endsWith=(Nr,_r,Ur)=>{Nr=String(Nr),(Ur===void 0||Ur>Nr.length)&&(Ur=Nr.length),Ur-=_r.length;const jr=Nr.indexOf(_r,Ur);return jr!==-1&&jr===Ur},toArray=Nr=>{if(!Nr)return null;if(isArray(Nr))return Nr;let _r=Nr.length;if(!isNumber(_r))return null;const Ur=new Array(_r);for(;_r-- >0;)Ur[_r]=Nr[_r];return Ur},isTypedArray=(Nr=>_r=>Nr&&_r instanceof Nr)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(Nr,_r)=>{const jr=(Nr&&Nr[Symbol.iterator]).call(Nr);let Gr;for(;(Gr=jr.next())&&!Gr.done;){const Wr=Gr.value;_r.call(Nr,Wr[0],Wr[1])}},matchAll=(Nr,_r)=>{let Ur;const jr=[];for(;(Ur=Nr.exec(_r))!==null;)jr.push(Ur);return jr},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=Nr=>Nr.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(Ur,jr,Gr){return jr.toUpperCase()+Gr}),hasOwnProperty=(({hasOwnProperty:Nr})=>(_r,Ur)=>Nr.call(_r,Ur))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(Nr,_r)=>{const Ur=Object.getOwnPropertyDescriptors(Nr),jr={};forEach(Ur,(Gr,Wr)=>{let Zr;(Zr=_r(Gr,Wr,Nr))!==!1&&(jr[Wr]=Zr||Gr)}),Object.defineProperties(Nr,jr)},freezeMethods=Nr=>{reduceDescriptors(Nr,(_r,Ur)=>{if(isFunction(Nr)&&["arguments","caller","callee"].indexOf(Ur)!==-1)return!1;const jr=Nr[Ur];if(isFunction(jr)){if(_r.enumerable=!1,"writable"in _r){_r.writable=!1;return}_r.set||(_r.set=()=>{throw Error("Can not rewrite read-only method '"+Ur+"'")})}})},toObjectSet=(Nr,_r)=>{const Ur={},jr=Gr=>{Gr.forEach(Wr=>{Ur[Wr]=!0})};return isArray(Nr)?jr(Nr):jr(String(Nr).split(_r)),Ur},noop$1=()=>{},toFiniteNumber=(Nr,_r)=>(Nr=+Nr,Number.isFinite(Nr)?Nr:_r),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(Nr=16,_r=ALPHABET.ALPHA_DIGIT)=>{let Ur="";const{length:jr}=_r;for(;Nr--;)Ur+=_r[Math.random()*jr|0];return Ur};function isSpecCompliantForm(Nr){return!!(Nr&&isFunction(Nr.append)&&Nr[Symbol.toStringTag]==="FormData"&&Nr[Symbol.iterator])}const toJSONObject=Nr=>{const _r=new Array(10),Ur=(jr,Gr)=>{if(isObject$2(jr)){if(_r.indexOf(jr)>=0)return;if(!("toJSON"in jr)){_r[Gr]=jr;const Wr=isArray(jr)?[]:{};return forEach(jr,(Zr,Yr)=>{const ts=Ur(Zr,Gr+1);!isUndefined(ts)&&(Wr[Yr]=ts)}),_r[Gr]=void 0,Wr}}return jr};return Ur(Nr,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=Nr=>Nr&&(isObject$2(Nr)||isFunction(Nr))&&isFunction(Nr.then)&&isFunction(Nr.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$2,isPlainObject:isPlainObject$5,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(Nr,_r,Ur,jr,Gr){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=Nr,this.name="AxiosError",_r&&(this.code=_r),Ur&&(this.config=Ur),jr&&(this.request=jr),Gr&&(this.response=Gr)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(Nr=>{descriptors[Nr]={value:Nr}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(Nr,_r,Ur,jr,Gr,Wr)=>{const Zr=Object.create(prototype$1);return utils$1.toFlatObject(Nr,Zr,function(ts){return ts!==Error.prototype},Yr=>Yr!=="isAxiosError"),AxiosError.call(Zr,Nr.message,_r,Ur,jr,Gr),Zr.cause=Nr,Zr.name=Nr.name,Wr&&Object.assign(Zr,Wr),Zr};const httpAdapter=null;function isVisitable(Nr){return utils$1.isPlainObject(Nr)||utils$1.isArray(Nr)}function removeBrackets(Nr){return utils$1.endsWith(Nr,"[]")?Nr.slice(0,-2):Nr}function renderKey(Nr,_r,Ur){return Nr?Nr.concat(_r).map(function(Gr,Wr){return Gr=removeBrackets(Gr),!Ur&&Wr?"["+Gr+"]":Gr}).join(Ur?".":""):_r}function isFlatArray(Nr){return utils$1.isArray(Nr)&&!Nr.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(_r){return/^is[A-Z]/.test(_r)});function toFormData(Nr,_r,Ur){if(!utils$1.isObject(Nr))throw new TypeError("target must be an object");_r=_r||new FormData,Ur=utils$1.toFlatObject(Ur,{metaTokens:!0,dots:!1,indexes:!1},!1,function(is,ss){return!utils$1.isUndefined(ss[is])});const jr=Ur.metaTokens,Gr=Ur.visitor||ns,Wr=Ur.dots,Zr=Ur.indexes,ts=(Ur.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(_r);if(!utils$1.isFunction(Gr))throw new TypeError("visitor must be a function");function es(rs){if(rs===null)return"";if(utils$1.isDate(rs))return rs.toISOString();if(!ts&&utils$1.isBlob(rs))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(rs)||utils$1.isTypedArray(rs)?ts&&typeof Blob=="function"?new Blob([rs]):Buffer.from(rs):rs}function ns(rs,is,ss){let os=rs;if(rs&&!ss&&typeof rs=="object"){if(utils$1.endsWith(is,"{}"))is=jr?is:is.slice(0,-2),rs=JSON.stringify(rs);else if(utils$1.isArray(rs)&&isFlatArray(rs)||(utils$1.isFileList(rs)||utils$1.endsWith(is,"[]"))&&(os=utils$1.toArray(rs)))return is=removeBrackets(is),os.forEach(function(cs,ds){!(utils$1.isUndefined(cs)||cs===null)&&_r.append(Zr===!0?renderKey([is],ds,Wr):Zr===null?is:is+"[]",es(cs))}),!1}return isVisitable(rs)?!0:(_r.append(renderKey(ss,is,Wr),es(rs)),!1)}const Xr=[],qr=Object.assign(predicates,{defaultVisitor:ns,convertValue:es,isVisitable});function _i(rs,is){if(!utils$1.isUndefined(rs)){if(Xr.indexOf(rs)!==-1)throw Error("Circular reference detected in "+is.join("."));Xr.push(rs),utils$1.forEach(rs,function(os,ls){(!(utils$1.isUndefined(os)||os===null)&&Gr.call(_r,os,utils$1.isString(ls)?ls.trim():ls,is,qr))===!0&&_i(os,is?is.concat(ls):[ls])}),Xr.pop()}}if(!utils$1.isObject(Nr))throw new TypeError("data must be an object");return _i(Nr),_r}function encode$2(Nr){const _r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(Nr).replace(/[!'()~]|%20|%00/g,function(jr){return _r[jr]})}function AxiosURLSearchParams(Nr,_r){this._pairs=[],Nr&&toFormData(Nr,this,_r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(_r,Ur){this._pairs.push([_r,Ur])};prototype.toString=function(_r){const Ur=_r?function(jr){return _r.call(this,jr,encode$2)}:encode$2;return this._pairs.map(function(Gr){return Ur(Gr[0])+"="+Ur(Gr[1])},"").join("&")};function encode$1(Nr){return encodeURIComponent(Nr).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(Nr,_r,Ur){if(!_r)return Nr;const jr=Ur&&Ur.encode||encode$1,Gr=Ur&&Ur.serialize;let Wr;if(Gr?Wr=Gr(_r,Ur):Wr=utils$1.isURLSearchParams(_r)?_r.toString():new AxiosURLSearchParams(_r,Ur).toString(jr),Wr){const Zr=Nr.indexOf("#");Zr!==-1&&(Nr=Nr.slice(0,Zr)),Nr+=(Nr.indexOf("?")===-1?"?":"&")+Wr}return Nr}class InterceptorManager{constructor(){this.handlers=[]}use(_r,Ur,jr){return this.handlers.push({fulfilled:_r,rejected:Ur,synchronous:jr?jr.synchronous:!1,runWhen:jr?jr.runWhen:null}),this.handlers.length-1}eject(_r){this.handlers[_r]&&(this.handlers[_r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(_r){utils$1.forEach(this.handlers,function(jr){jr!==null&&_r(jr)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let Nr;return typeof navigator<"u"&&((Nr=navigator.product)==="ReactNative"||Nr==="NativeScript"||Nr==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(Nr,_r){return toFormData(Nr,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(Ur,jr,Gr,Wr){return platform$1.isNode&&utils$1.isBuffer(Ur)?(this.append(jr,Ur.toString("base64")),!1):Wr.defaultVisitor.apply(this,arguments)}},_r))}function parsePropPath(Nr){return utils$1.matchAll(/\w+|\[(\w*)]/g,Nr).map(_r=>_r[0]==="[]"?"":_r[1]||_r[0])}function arrayToObject(Nr){const _r={},Ur=Object.keys(Nr);let jr;const Gr=Ur.length;let Wr;for(jr=0;jr<Gr;jr++)Wr=Ur[jr],_r[Wr]=Nr[Wr];return _r}function formDataToJSON(Nr){function _r(Ur,jr,Gr,Wr){let Zr=Ur[Wr++];const Yr=Number.isFinite(+Zr),ts=Wr>=Ur.length;return Zr=!Zr&&utils$1.isArray(Gr)?Gr.length:Zr,ts?(utils$1.hasOwnProp(Gr,Zr)?Gr[Zr]=[Gr[Zr],jr]:Gr[Zr]=jr,!Yr):((!Gr[Zr]||!utils$1.isObject(Gr[Zr]))&&(Gr[Zr]=[]),_r(Ur,jr,Gr[Zr],Wr)&&utils$1.isArray(Gr[Zr])&&(Gr[Zr]=arrayToObject(Gr[Zr])),!Yr)}if(utils$1.isFormData(Nr)&&utils$1.isFunction(Nr.entries)){const Ur={};return utils$1.forEachEntry(Nr,(jr,Gr)=>{_r(parsePropPath(jr),Gr,Ur,0)}),Ur}return null}function stringifySafely(Nr,_r,Ur){if(utils$1.isString(Nr))try{return(_r||JSON.parse)(Nr),utils$1.trim(Nr)}catch(jr){if(jr.name!=="SyntaxError")throw jr}return(Ur||JSON.stringify)(Nr)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(_r,Ur){const jr=Ur.getContentType()||"",Gr=jr.indexOf("application/json")>-1,Wr=utils$1.isObject(_r);if(Wr&&utils$1.isHTMLForm(_r)&&(_r=new FormData(_r)),utils$1.isFormData(_r))return Gr&&Gr?JSON.stringify(formDataToJSON(_r)):_r;if(utils$1.isArrayBuffer(_r)||utils$1.isBuffer(_r)||utils$1.isStream(_r)||utils$1.isFile(_r)||utils$1.isBlob(_r))return _r;if(utils$1.isArrayBufferView(_r))return _r.buffer;if(utils$1.isURLSearchParams(_r))return Ur.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),_r.toString();let Yr;if(Wr){if(jr.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(_r,this.formSerializer).toString();if((Yr=utils$1.isFileList(_r))||jr.indexOf("multipart/form-data")>-1){const ts=this.env&&this.env.FormData;return toFormData(Yr?{"files[]":_r}:_r,ts&&new ts,this.formSerializer)}}return Wr||Gr?(Ur.setContentType("application/json",!1),stringifySafely(_r)):_r}],transformResponse:[function(_r){const Ur=this.transitional||defaults$1.transitional,jr=Ur&&Ur.forcedJSONParsing,Gr=this.responseType==="json";if(_r&&utils$1.isString(_r)&&(jr&&!this.responseType||Gr)){const Zr=!(Ur&&Ur.silentJSONParsing)&&Gr;try{return JSON.parse(_r)}catch(Yr){if(Zr)throw Yr.name==="SyntaxError"?AxiosError.from(Yr,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):Yr}}return _r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(_r){return _r>=200&&_r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],Nr=>{defaults$1.headers[Nr]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=Nr=>{const _r={};let Ur,jr,Gr;return Nr&&Nr.split(`
`).forEach(function(Zr){Gr=Zr.indexOf(":"),Ur=Zr.substring(0,Gr).trim().toLowerCase(),jr=Zr.substring(Gr+1).trim(),!(!Ur||_r[Ur]&&ignoreDuplicateOf[Ur])&&(Ur==="set-cookie"?_r[Ur]?_r[Ur].push(jr):_r[Ur]=[jr]:_r[Ur]=_r[Ur]?_r[Ur]+", "+jr:jr)}),_r},$internals=Symbol("internals");function normalizeHeader(Nr){return Nr&&String(Nr).trim().toLowerCase()}function normalizeValue(Nr){return Nr===!1||Nr==null?Nr:utils$1.isArray(Nr)?Nr.map(normalizeValue):String(Nr)}function parseTokens(Nr){const _r=Object.create(null),Ur=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let jr;for(;jr=Ur.exec(Nr);)_r[jr[1]]=jr[2];return _r}const isValidHeaderName=Nr=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(Nr.trim());function matchHeaderValue(Nr,_r,Ur,jr,Gr){if(utils$1.isFunction(jr))return jr.call(this,_r,Ur);if(Gr&&(_r=Ur),!!utils$1.isString(_r)){if(utils$1.isString(jr))return _r.indexOf(jr)!==-1;if(utils$1.isRegExp(jr))return jr.test(_r)}}function formatHeader(Nr){return Nr.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(_r,Ur,jr)=>Ur.toUpperCase()+jr)}function buildAccessors(Nr,_r){const Ur=utils$1.toCamelCase(" "+_r);["get","set","has"].forEach(jr=>{Object.defineProperty(Nr,jr+Ur,{value:function(Gr,Wr,Zr){return this[jr].call(this,_r,Gr,Wr,Zr)},configurable:!0})})}class AxiosHeaders{constructor(_r){_r&&this.set(_r)}set(_r,Ur,jr){const Gr=this;function Wr(Yr,ts,es){const ns=normalizeHeader(ts);if(!ns)throw new Error("header name must be a non-empty string");const Xr=utils$1.findKey(Gr,ns);(!Xr||Gr[Xr]===void 0||es===!0||es===void 0&&Gr[Xr]!==!1)&&(Gr[Xr||ts]=normalizeValue(Yr))}const Zr=(Yr,ts)=>utils$1.forEach(Yr,(es,ns)=>Wr(es,ns,ts));return utils$1.isPlainObject(_r)||_r instanceof this.constructor?Zr(_r,Ur):utils$1.isString(_r)&&(_r=_r.trim())&&!isValidHeaderName(_r)?Zr(parseHeaders(_r),Ur):_r!=null&&Wr(Ur,_r,jr),this}get(_r,Ur){if(_r=normalizeHeader(_r),_r){const jr=utils$1.findKey(this,_r);if(jr){const Gr=this[jr];if(!Ur)return Gr;if(Ur===!0)return parseTokens(Gr);if(utils$1.isFunction(Ur))return Ur.call(this,Gr,jr);if(utils$1.isRegExp(Ur))return Ur.exec(Gr);throw new TypeError("parser must be boolean|regexp|function")}}}has(_r,Ur){if(_r=normalizeHeader(_r),_r){const jr=utils$1.findKey(this,_r);return!!(jr&&this[jr]!==void 0&&(!Ur||matchHeaderValue(this,this[jr],jr,Ur)))}return!1}delete(_r,Ur){const jr=this;let Gr=!1;function Wr(Zr){if(Zr=normalizeHeader(Zr),Zr){const Yr=utils$1.findKey(jr,Zr);Yr&&(!Ur||matchHeaderValue(jr,jr[Yr],Yr,Ur))&&(delete jr[Yr],Gr=!0)}}return utils$1.isArray(_r)?_r.forEach(Wr):Wr(_r),Gr}clear(_r){const Ur=Object.keys(this);let jr=Ur.length,Gr=!1;for(;jr--;){const Wr=Ur[jr];(!_r||matchHeaderValue(this,this[Wr],Wr,_r,!0))&&(delete this[Wr],Gr=!0)}return Gr}normalize(_r){const Ur=this,jr={};return utils$1.forEach(this,(Gr,Wr)=>{const Zr=utils$1.findKey(jr,Wr);if(Zr){Ur[Zr]=normalizeValue(Gr),delete Ur[Wr];return}const Yr=_r?formatHeader(Wr):String(Wr).trim();Yr!==Wr&&delete Ur[Wr],Ur[Yr]=normalizeValue(Gr),jr[Yr]=!0}),this}concat(..._r){return this.constructor.concat(this,..._r)}toJSON(_r){const Ur=Object.create(null);return utils$1.forEach(this,(jr,Gr)=>{jr!=null&&jr!==!1&&(Ur[Gr]=_r&&utils$1.isArray(jr)?jr.join(", "):jr)}),Ur}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([_r,Ur])=>_r+": "+Ur).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(_r){return _r instanceof this?_r:new this(_r)}static concat(_r,...Ur){const jr=new this(_r);return Ur.forEach(Gr=>jr.set(Gr)),jr}static accessor(_r){const jr=(this[$internals]=this[$internals]={accessors:{}}).accessors,Gr=this.prototype;function Wr(Zr){const Yr=normalizeHeader(Zr);jr[Yr]||(buildAccessors(Gr,Zr),jr[Yr]=!0)}return utils$1.isArray(_r)?_r.forEach(Wr):Wr(_r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:Nr},_r)=>{let Ur=_r[0].toUpperCase()+_r.slice(1);return{get:()=>Nr,set(jr){this[Ur]=jr}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(Nr,_r){const Ur=this||defaults$2,jr=_r||Ur,Gr=AxiosHeaders$1.from(jr.headers);let Wr=jr.data;return utils$1.forEach(Nr,function(Yr){Wr=Yr.call(Ur,Wr,Gr.normalize(),_r?_r.status:void 0)}),Gr.normalize(),Wr}function isCancel(Nr){return!!(Nr&&Nr.__CANCEL__)}function CanceledError(Nr,_r,Ur){AxiosError.call(this,Nr??"canceled",AxiosError.ERR_CANCELED,_r,Ur),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(Nr,_r,Ur){const jr=Ur.config.validateStatus;!Ur.status||!jr||jr(Ur.status)?Nr(Ur):_r(new AxiosError("Request failed with status code "+Ur.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(Ur.status/100)-4],Ur.config,Ur.request,Ur))}const cookies=platform$1.isStandardBrowserEnv?function(){return{write:function(Ur,jr,Gr,Wr,Zr,Yr){const ts=[];ts.push(Ur+"="+encodeURIComponent(jr)),utils$1.isNumber(Gr)&&ts.push("expires="+new Date(Gr).toGMTString()),utils$1.isString(Wr)&&ts.push("path="+Wr),utils$1.isString(Zr)&&ts.push("domain="+Zr),Yr===!0&&ts.push("secure"),document.cookie=ts.join("; ")},read:function(Ur){const jr=document.cookie.match(new RegExp("(^|;\\s*)("+Ur+")=([^;]*)"));return jr?decodeURIComponent(jr[3]):null},remove:function(Ur){this.write(Ur,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(Nr){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Nr)}function combineURLs(Nr,_r){return _r?Nr.replace(/\/+$/,"")+"/"+_r.replace(/^\/+/,""):Nr}function buildFullPath(Nr,_r){return Nr&&!isAbsoluteURL(_r)?combineURLs(Nr,_r):_r}const isURLSameOrigin=platform$1.isStandardBrowserEnv?function(){const _r=/(msie|trident)/i.test(navigator.userAgent),Ur=document.createElement("a");let jr;function Gr(Wr){let Zr=Wr;return _r&&(Ur.setAttribute("href",Zr),Zr=Ur.href),Ur.setAttribute("href",Zr),{href:Ur.href,protocol:Ur.protocol?Ur.protocol.replace(/:$/,""):"",host:Ur.host,search:Ur.search?Ur.search.replace(/^\?/,""):"",hash:Ur.hash?Ur.hash.replace(/^#/,""):"",hostname:Ur.hostname,port:Ur.port,pathname:Ur.pathname.charAt(0)==="/"?Ur.pathname:"/"+Ur.pathname}}return jr=Gr(window.location.href),function(Zr){const Yr=utils$1.isString(Zr)?Gr(Zr):Zr;return Yr.protocol===jr.protocol&&Yr.host===jr.host}}():function(){return function(){return!0}}();function parseProtocol(Nr){const _r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(Nr);return _r&&_r[1]||""}function speedometer(Nr,_r){Nr=Nr||10;const Ur=new Array(Nr),jr=new Array(Nr);let Gr=0,Wr=0,Zr;return _r=_r!==void 0?_r:1e3,function(ts){const es=Date.now(),ns=jr[Wr];Zr||(Zr=es),Ur[Gr]=ts,jr[Gr]=es;let Xr=Wr,qr=0;for(;Xr!==Gr;)qr+=Ur[Xr++],Xr=Xr%Nr;if(Gr=(Gr+1)%Nr,Gr===Wr&&(Wr=(Wr+1)%Nr),es-Zr<_r)return;const _i=ns&&es-ns;return _i?Math.round(qr*1e3/_i):void 0}}function progressEventReducer(Nr,_r){let Ur=0;const jr=speedometer(50,250);return Gr=>{const Wr=Gr.loaded,Zr=Gr.lengthComputable?Gr.total:void 0,Yr=Wr-Ur,ts=jr(Yr),es=Wr<=Zr;Ur=Wr;const ns={loaded:Wr,total:Zr,progress:Zr?Wr/Zr:void 0,bytes:Yr,rate:ts||void 0,estimated:ts&&Zr&&es?(Zr-Wr)/ts:void 0,event:Gr};ns[_r?"download":"upload"]=!0,Nr(ns)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(Nr){return new Promise(function(Ur,jr){let Gr=Nr.data;const Wr=AxiosHeaders$1.from(Nr.headers).normalize(),Zr=Nr.responseType;let Yr;function ts(){Nr.cancelToken&&Nr.cancelToken.unsubscribe(Yr),Nr.signal&&Nr.signal.removeEventListener("abort",Yr)}let es;utils$1.isFormData(Gr)&&(platform$1.isStandardBrowserEnv||platform$1.isStandardBrowserWebWorkerEnv?Wr.setContentType(!1):Wr.getContentType(/^\s*multipart\/form-data/)?utils$1.isString(es=Wr.getContentType())&&Wr.setContentType(es.replace(/^\s*(multipart\/form-data);+/,"$1")):Wr.setContentType("multipart/form-data"));let ns=new XMLHttpRequest;if(Nr.auth){const rs=Nr.auth.username||"",is=Nr.auth.password?unescape(encodeURIComponent(Nr.auth.password)):"";Wr.set("Authorization","Basic "+btoa(rs+":"+is))}const Xr=buildFullPath(Nr.baseURL,Nr.url);ns.open(Nr.method.toUpperCase(),buildURL(Xr,Nr.params,Nr.paramsSerializer),!0),ns.timeout=Nr.timeout;function qr(){if(!ns)return;const rs=AxiosHeaders$1.from("getAllResponseHeaders"in ns&&ns.getAllResponseHeaders()),ss={data:!Zr||Zr==="text"||Zr==="json"?ns.responseText:ns.response,status:ns.status,statusText:ns.statusText,headers:rs,config:Nr,request:ns};settle(function(ls){Ur(ls),ts()},function(ls){jr(ls),ts()},ss),ns=null}if("onloadend"in ns?ns.onloadend=qr:ns.onreadystatechange=function(){!ns||ns.readyState!==4||ns.status===0&&!(ns.responseURL&&ns.responseURL.indexOf("file:")===0)||setTimeout(qr)},ns.onabort=function(){ns&&(jr(new AxiosError("Request aborted",AxiosError.ECONNABORTED,Nr,ns)),ns=null)},ns.onerror=function(){jr(new AxiosError("Network Error",AxiosError.ERR_NETWORK,Nr,ns)),ns=null},ns.ontimeout=function(){let is=Nr.timeout?"timeout of "+Nr.timeout+"ms exceeded":"timeout exceeded";const ss=Nr.transitional||transitionalDefaults;Nr.timeoutErrorMessage&&(is=Nr.timeoutErrorMessage),jr(new AxiosError(is,ss.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,Nr,ns)),ns=null},platform$1.isStandardBrowserEnv){const rs=isURLSameOrigin(Xr)&&Nr.xsrfCookieName&&cookies.read(Nr.xsrfCookieName);rs&&Wr.set(Nr.xsrfHeaderName,rs)}Gr===void 0&&Wr.setContentType(null),"setRequestHeader"in ns&&utils$1.forEach(Wr.toJSON(),function(is,ss){ns.setRequestHeader(ss,is)}),utils$1.isUndefined(Nr.withCredentials)||(ns.withCredentials=!!Nr.withCredentials),Zr&&Zr!=="json"&&(ns.responseType=Nr.responseType),typeof Nr.onDownloadProgress=="function"&&ns.addEventListener("progress",progressEventReducer(Nr.onDownloadProgress,!0)),typeof Nr.onUploadProgress=="function"&&ns.upload&&ns.upload.addEventListener("progress",progressEventReducer(Nr.onUploadProgress)),(Nr.cancelToken||Nr.signal)&&(Yr=rs=>{ns&&(jr(!rs||rs.type?new CanceledError(null,Nr,ns):rs),ns.abort(),ns=null)},Nr.cancelToken&&Nr.cancelToken.subscribe(Yr),Nr.signal&&(Nr.signal.aborted?Yr():Nr.signal.addEventListener("abort",Yr)));const _i=parseProtocol(Xr);if(_i&&platform$1.protocols.indexOf(_i)===-1){jr(new AxiosError("Unsupported protocol "+_i+":",AxiosError.ERR_BAD_REQUEST,Nr));return}ns.send(Gr||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(Nr,_r)=>{if(Nr){try{Object.defineProperty(Nr,"name",{value:_r})}catch{}Object.defineProperty(Nr,"adapterName",{value:_r})}});const renderReason=Nr=>`- ${Nr}`,isResolvedHandle=Nr=>utils$1.isFunction(Nr)||Nr===null||Nr===!1,adapters={getAdapter:Nr=>{Nr=utils$1.isArray(Nr)?Nr:[Nr];const{length:_r}=Nr;let Ur,jr;const Gr={};for(let Wr=0;Wr<_r;Wr++){Ur=Nr[Wr];let Zr;if(jr=Ur,!isResolvedHandle(Ur)&&(jr=knownAdapters[(Zr=String(Ur)).toLowerCase()],jr===void 0))throw new AxiosError(`Unknown adapter '${Zr}'`);if(jr)break;Gr[Zr||"#"+Wr]=jr}if(!jr){const Wr=Object.entries(Gr).map(([Yr,ts])=>`adapter ${Yr} `+(ts===!1?"is not supported by the environment":"is not available in the build"));let Zr=_r?Wr.length>1?`since :
`+Wr.map(renderReason).join(`
`):" "+renderReason(Wr[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+Zr,"ERR_NOT_SUPPORT")}return jr},adapters:knownAdapters};function throwIfCancellationRequested(Nr){if(Nr.cancelToken&&Nr.cancelToken.throwIfRequested(),Nr.signal&&Nr.signal.aborted)throw new CanceledError(null,Nr)}function dispatchRequest(Nr){return throwIfCancellationRequested(Nr),Nr.headers=AxiosHeaders$1.from(Nr.headers),Nr.data=transformData.call(Nr,Nr.transformRequest),["post","put","patch"].indexOf(Nr.method)!==-1&&Nr.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(Nr.adapter||defaults$2.adapter)(Nr).then(function(jr){return throwIfCancellationRequested(Nr),jr.data=transformData.call(Nr,Nr.transformResponse,jr),jr.headers=AxiosHeaders$1.from(jr.headers),jr},function(jr){return isCancel(jr)||(throwIfCancellationRequested(Nr),jr&&jr.response&&(jr.response.data=transformData.call(Nr,Nr.transformResponse,jr.response),jr.response.headers=AxiosHeaders$1.from(jr.response.headers))),Promise.reject(jr)})}const headersToObject=Nr=>Nr instanceof AxiosHeaders$1?Nr.toJSON():Nr;function mergeConfig$1(Nr,_r){_r=_r||{};const Ur={};function jr(es,ns,Xr){return utils$1.isPlainObject(es)&&utils$1.isPlainObject(ns)?utils$1.merge.call({caseless:Xr},es,ns):utils$1.isPlainObject(ns)?utils$1.merge({},ns):utils$1.isArray(ns)?ns.slice():ns}function Gr(es,ns,Xr){if(utils$1.isUndefined(ns)){if(!utils$1.isUndefined(es))return jr(void 0,es,Xr)}else return jr(es,ns,Xr)}function Wr(es,ns){if(!utils$1.isUndefined(ns))return jr(void 0,ns)}function Zr(es,ns){if(utils$1.isUndefined(ns)){if(!utils$1.isUndefined(es))return jr(void 0,es)}else return jr(void 0,ns)}function Yr(es,ns,Xr){if(Xr in _r)return jr(es,ns);if(Xr in Nr)return jr(void 0,es)}const ts={url:Wr,method:Wr,data:Wr,baseURL:Zr,transformRequest:Zr,transformResponse:Zr,paramsSerializer:Zr,timeout:Zr,timeoutMessage:Zr,withCredentials:Zr,adapter:Zr,responseType:Zr,xsrfCookieName:Zr,xsrfHeaderName:Zr,onUploadProgress:Zr,onDownloadProgress:Zr,decompress:Zr,maxContentLength:Zr,maxBodyLength:Zr,beforeRedirect:Zr,transport:Zr,httpAgent:Zr,httpsAgent:Zr,cancelToken:Zr,socketPath:Zr,responseEncoding:Zr,validateStatus:Yr,headers:(es,ns)=>Gr(headersToObject(es),headersToObject(ns),!0)};return utils$1.forEach(Object.keys(Object.assign({},Nr,_r)),function(ns){const Xr=ts[ns]||Gr,qr=Xr(Nr[ns],_r[ns],ns);utils$1.isUndefined(qr)&&Xr!==Yr||(Ur[ns]=qr)}),Ur}const VERSION="1.6.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((Nr,_r)=>{validators$1[Nr]=function(jr){return typeof jr===Nr||"a"+(_r<1?"n ":" ")+Nr}});const deprecatedWarnings={};validators$1.transitional=function(_r,Ur,jr){function Gr(Wr,Zr){return"[Axios v"+VERSION+"] Transitional option '"+Wr+"'"+Zr+(jr?". "+jr:"")}return(Wr,Zr,Yr)=>{if(_r===!1)throw new AxiosError(Gr(Zr," has been removed"+(Ur?" in "+Ur:"")),AxiosError.ERR_DEPRECATED);return Ur&&!deprecatedWarnings[Zr]&&(deprecatedWarnings[Zr]=!0,console.warn(Gr(Zr," has been deprecated since v"+Ur+" and will be removed in the near future"))),_r?_r(Wr,Zr,Yr):!0}};function assertOptions(Nr,_r,Ur){if(typeof Nr!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const jr=Object.keys(Nr);let Gr=jr.length;for(;Gr-- >0;){const Wr=jr[Gr],Zr=_r[Wr];if(Zr){const Yr=Nr[Wr],ts=Yr===void 0||Zr(Yr,Wr,Nr);if(ts!==!0)throw new AxiosError("option "+Wr+" must be "+ts,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(Ur!==!0)throw new AxiosError("Unknown option "+Wr,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(_r){this.defaults=_r,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(_r,Ur){typeof _r=="string"?(Ur=Ur||{},Ur.url=_r):Ur=_r||{},Ur=mergeConfig$1(this.defaults,Ur);const{transitional:jr,paramsSerializer:Gr,headers:Wr}=Ur;jr!==void 0&&validator.assertOptions(jr,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Gr!=null&&(utils$1.isFunction(Gr)?Ur.paramsSerializer={serialize:Gr}:validator.assertOptions(Gr,{encode:validators.function,serialize:validators.function},!0)),Ur.method=(Ur.method||this.defaults.method||"get").toLowerCase();let Zr=Wr&&utils$1.merge(Wr.common,Wr[Ur.method]);Wr&&utils$1.forEach(["delete","get","head","post","put","patch","common"],rs=>{delete Wr[rs]}),Ur.headers=AxiosHeaders$1.concat(Zr,Wr);const Yr=[];let ts=!0;this.interceptors.request.forEach(function(is){typeof is.runWhen=="function"&&is.runWhen(Ur)===!1||(ts=ts&&is.synchronous,Yr.unshift(is.fulfilled,is.rejected))});const es=[];this.interceptors.response.forEach(function(is){es.push(is.fulfilled,is.rejected)});let ns,Xr=0,qr;if(!ts){const rs=[dispatchRequest.bind(this),void 0];for(rs.unshift.apply(rs,Yr),rs.push.apply(rs,es),qr=rs.length,ns=Promise.resolve(Ur);Xr<qr;)ns=ns.then(rs[Xr++],rs[Xr++]);return ns}qr=Yr.length;let _i=Ur;for(Xr=0;Xr<qr;){const rs=Yr[Xr++],is=Yr[Xr++];try{_i=rs(_i)}catch(ss){is.call(this,ss);break}}try{ns=dispatchRequest.call(this,_i)}catch(rs){return Promise.reject(rs)}for(Xr=0,qr=es.length;Xr<qr;)ns=ns.then(es[Xr++],es[Xr++]);return ns}getUri(_r){_r=mergeConfig$1(this.defaults,_r);const Ur=buildFullPath(_r.baseURL,_r.url);return buildURL(Ur,_r.params,_r.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(_r){Axios.prototype[_r]=function(Ur,jr){return this.request(mergeConfig$1(jr||{},{method:_r,url:Ur,data:(jr||{}).data}))}});utils$1.forEach(["post","put","patch"],function(_r){function Ur(jr){return function(Wr,Zr,Yr){return this.request(mergeConfig$1(Yr||{},{method:_r,headers:jr?{"Content-Type":"multipart/form-data"}:{},url:Wr,data:Zr}))}}Axios.prototype[_r]=Ur(),Axios.prototype[_r+"Form"]=Ur(!0)});const Axios$1=Axios;class CancelToken{constructor(_r){if(typeof _r!="function")throw new TypeError("executor must be a function.");let Ur;this.promise=new Promise(function(Wr){Ur=Wr});const jr=this;this.promise.then(Gr=>{if(!jr._listeners)return;let Wr=jr._listeners.length;for(;Wr-- >0;)jr._listeners[Wr](Gr);jr._listeners=null}),this.promise.then=Gr=>{let Wr;const Zr=new Promise(Yr=>{jr.subscribe(Yr),Wr=Yr}).then(Gr);return Zr.cancel=function(){jr.unsubscribe(Wr)},Zr},_r(function(Wr,Zr,Yr){jr.reason||(jr.reason=new CanceledError(Wr,Zr,Yr),Ur(jr.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(_r){if(this.reason){_r(this.reason);return}this._listeners?this._listeners.push(_r):this._listeners=[_r]}unsubscribe(_r){if(!this._listeners)return;const Ur=this._listeners.indexOf(_r);Ur!==-1&&this._listeners.splice(Ur,1)}static source(){let _r;return{token:new CancelToken(function(Gr){_r=Gr}),cancel:_r}}}const CancelToken$1=CancelToken;function spread(Nr){return function(Ur){return Nr.apply(null,Ur)}}function isAxiosError(Nr){return utils$1.isObject(Nr)&&Nr.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([Nr,_r])=>{HttpStatusCode[_r]=Nr});const HttpStatusCode$1=HttpStatusCode;function createInstance(Nr){const _r=new Axios$1(Nr),Ur=bind(Axios$1.prototype.request,_r);return utils$1.extend(Ur,Axios$1.prototype,_r,{allOwnKeys:!0}),utils$1.extend(Ur,_r,null,{allOwnKeys:!0}),Ur.create=function(Gr){return createInstance(mergeConfig$1(Nr,Gr))},Ur}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(_r){return Promise.all(_r)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=Nr=>formDataToJSON(utils$1.isHTMLForm(Nr)?new FormData(Nr):Nr);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;var cjs$5={exports:{}},reactSpring_web_production_min={exports:{}},cjs$4={exports:{}},reactSpring_core_production_min={exports:{}},cjs$3={exports:{}},Y$3=Object.defineProperty,ut$1=Object.getOwnPropertyDescriptor,lt=Object.getOwnPropertyNames,ct=Object.prototype.hasOwnProperty,ke$1=(Nr,_r)=>{for(var Ur in _r)Y$3(Nr,Ur,{get:_r[Ur],enumerable:!0})},dt$1=(Nr,_r,Ur,jr)=>{if(_r&&typeof _r=="object"||typeof _r=="function")for(let Gr of lt(_r))!ct.call(Nr,Gr)&&Gr!==Ur&&Y$3(Nr,Gr,{get:()=>_r[Gr],enumerable:!(jr=ut$1(_r,Gr))||jr.enumerable});return Nr},pt$1=Nr=>dt$1(Y$3({},"__esModule",{value:!0}),Nr),Jt$1={};ke$1(Jt$1,{FluidValue:()=>ge$1,Globals:()=>x$3,addFluidObserver:()=>Mt$1,callFluidObserver:()=>Ke,callFluidObservers:()=>At$1,clamp:()=>ue,colorToRgba:()=>G$3,colors:()=>Et$1,createInterpolator:()=>H$2,createStringInterpolator:()=>Vt$1,defineHidden:()=>bt$1,deprecateDirectCall:()=>Ut$1,deprecateInterpolate:()=>Pt$1,each:()=>ze$1,eachProp:()=>ht$1,easings:()=>kt$1,flush:()=>Le$1,flushCalls:()=>gt$1,frameLoop:()=>Pe$1,getFluidObservers:()=>Rt$1,getFluidValue:()=>ve$1,hasFluidValue:()=>St$1,hex3:()=>me$1,hex4:()=>be$1,hex6:()=>xe$1,hex8:()=>he$1,hsl:()=>de$1,hsla:()=>pe,is:()=>l$1,isAnimatedString:()=>$t$1,isEqual:()=>xt$1,isSSR:()=>h$2,noop:()=>ae$1,onResize:()=>Te$1,onScroll:()=>jt$1,once:()=>Fe$1,prefix:()=>W$2,raf:()=>f$2,removeFluidObserver:()=>Ct$1,rgb:()=>le$1,rgba:()=>ce$1,setFluidGetter:()=>_e,toArray:()=>yt$1,useConstant:()=>Dt$1,useForceUpdate:()=>Wt$1,useIsomorphicLayoutEffect:()=>C$1,useMemoOne:()=>Kt$1,useOnce:()=>Nt$1,usePrev:()=>Xt$1,useReducedMotion:()=>Yt$1});var reactSpring_shared_production_min=pt$1(Jt$1),x$3={};ke$1(x$3,{assign:()=>fe,colors:()=>d$2,createStringInterpolator:()=>V$3,skipAnimation:()=>qe,to:()=>Ve$1,willAdvance:()=>q$3});var ee$1=k$3(),f$2=Nr=>I$3(Nr,ee$1),te$2=k$3();f$2.write=Nr=>I$3(Nr,te$2);var L$1=k$3();f$2.onStart=Nr=>I$3(Nr,L$1);var re$2=k$3();f$2.onFrame=Nr=>I$3(Nr,re$2);var ne$1=k$3();f$2.onFinish=Nr=>I$3(Nr,ne$1);var w$1=[];f$2.setTimeout=(Nr,_r)=>{let Ur=f$2.now()+_r,jr=()=>{let Wr=w$1.findIndex(Zr=>Zr.cancel==jr);~Wr&&w$1.splice(Wr,1),b$2-=~Wr?1:0},Gr={time:Ur,handler:Nr,cancel:jr};return w$1.splice(Se$1(Ur),0,Gr),b$2+=1,Re$1(),Gr};var Se$1=Nr=>~(~w$1.findIndex(_r=>_r.time>Nr)||~w$1.length);f$2.cancel=Nr=>{L$1.delete(Nr),re$2.delete(Nr),ne$1.delete(Nr),ee$1.delete(Nr),te$2.delete(Nr)};f$2.sync=Nr=>{J$3=!0,f$2.batchedUpdates(Nr),J$3=!1};f$2.throttle=Nr=>{let _r;function Ur(){try{Nr(..._r)}finally{_r=null}}function jr(...Gr){_r=Gr,f$2.onStart(Ur)}return jr.handler=Nr,jr.cancel=()=>{L$1.delete(Ur),_r=null},jr};var oe$1=typeof window<"u"?window.requestAnimationFrame:()=>{};f$2.use=Nr=>oe$1=Nr;f$2.now=typeof performance<"u"?()=>performance.now():Date.now;f$2.batchedUpdates=Nr=>Nr();f$2.catch=console.error;f$2.frameLoop="always";f$2.advance=()=>{f$2.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Me$1()};var m$3=-1,b$2=0,J$3=!1;function I$3(Nr,_r){J$3?(_r.delete(Nr),Nr(0)):(_r.add(Nr),Re$1())}function Re$1(){m$3<0&&(m$3=0,f$2.frameLoop!=="demand"&&oe$1(Ae$1))}function mt$1(){m$3=-1}function Ae$1(){~m$3&&(oe$1(Ae$1),f$2.batchedUpdates(Me$1))}function Me$1(){let Nr=m$3;m$3=f$2.now();let _r=Se$1(m$3);if(_r&&(Ce$1(w$1.splice(0,_r),Ur=>Ur.handler()),b$2-=_r),!b$2){mt$1();return}L$1.flush(),ee$1.flush(Nr?Math.min(64,m$3-Nr):16.667),re$2.flush(),te$2.flush(),ne$1.flush()}function k$3(){let Nr=new Set,_r=Nr;return{add(Ur){b$2+=_r==Nr&&!Nr.has(Ur)?1:0,Nr.add(Ur)},delete(Ur){return b$2-=_r==Nr&&Nr.has(Ur)?1:0,Nr.delete(Ur)},flush(Ur){_r.size&&(Nr=new Set,b$2-=_r.size,Ce$1(_r,jr=>jr(Ur)&&Nr.add(jr)),b$2+=Nr.size,_r=Nr)}}}function Ce$1(Nr,_r){Nr.forEach(Ur=>{try{_r(Ur)}catch(jr){f$2.catch(jr)}})}function ae$1(){}var bt$1=(Nr,_r,Ur)=>Object.defineProperty(Nr,_r,{value:Ur,writable:!0,configurable:!0}),l$1={arr:Array.isArray,obj:Nr=>!!Nr&&Nr.constructor.name==="Object",fun:Nr=>typeof Nr=="function",str:Nr=>typeof Nr=="string",num:Nr=>typeof Nr=="number",und:Nr=>Nr===void 0};function xt$1(Nr,_r){if(l$1.arr(Nr)){if(!l$1.arr(_r)||Nr.length!==_r.length)return!1;for(let Ur=0;Ur<Nr.length;Ur++)if(Nr[Ur]!==_r[Ur])return!1;return!0}return Nr===_r}var ze$1=(Nr,_r)=>Nr.forEach(_r);function ht$1(Nr,_r,Ur){if(l$1.arr(Nr)){for(let jr=0;jr<Nr.length;jr++)_r.call(Ur,Nr[jr],`${jr}`);return}for(let jr in Nr)Nr.hasOwnProperty(jr)&&_r.call(Ur,Nr[jr],jr)}var yt$1=Nr=>l$1.und(Nr)?[]:l$1.arr(Nr)?Nr:[Nr];function Le$1(Nr,_r){if(Nr.size){let Ur=Array.from(Nr);Nr.clear(),ze$1(Ur,_r)}}var gt$1=(Nr,..._r)=>Le$1(Nr,Ur=>Ur(..._r)),h$2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),V$3,Ve$1,d$2=null,qe=!1,q$3=ae$1,fe=Nr=>{Nr.to&&(Ve$1=Nr.to),Nr.now&&(f$2.now=Nr.now),Nr.colors!==void 0&&(d$2=Nr.colors),Nr.skipAnimation!=null&&(qe=Nr.skipAnimation),Nr.createStringInterpolator&&(V$3=Nr.createStringInterpolator),Nr.requestAnimationFrame&&f$2.use(Nr.requestAnimationFrame),Nr.batchedUpdates&&(f$2.batchedUpdates=Nr.batchedUpdates),Nr.willAdvance&&(q$3=Nr.willAdvance),Nr.frameLoop&&(f$2.frameLoop=Nr.frameLoop)},S$2=new Set,c$2=[],ie$1=[],P$3=0,Pe$1={get idle(){return!S$2.size&&!c$2.length},start(Nr){P$3>Nr.priority?(S$2.add(Nr),f$2.onStart(vt$1)):(Qe$1(Nr),f$2(se$1))},advance:se$1,sort(Nr){if(P$3)f$2.onFrame(()=>Pe$1.sort(Nr));else{let _r=c$2.indexOf(Nr);~_r&&(c$2.splice(_r,1),Ue(Nr))}},clear(){c$2=[],S$2.clear()}};function vt$1(){S$2.forEach(Qe$1),S$2.clear(),f$2(se$1)}function Qe$1(Nr){c$2.includes(Nr)||Ue(Nr)}function Ue(Nr){c$2.splice(wt$1(c$2,_r=>_r.priority>Nr.priority),0,Nr)}function se$1(Nr){let _r=ie$1;for(let Ur=0;Ur<c$2.length;Ur++){let jr=c$2[Ur];P$3=jr.priority,jr.idle||(q$3(jr),jr.advance(Nr),jr.idle||_r.push(jr))}return P$3=0,ie$1=c$2,ie$1.length=0,c$2=_r,c$2.length>0}function wt$1(Nr,_r){let Ur=Nr.findIndex(_r);return Ur<0?Nr.length:Ur}var ue=(Nr,_r,Ur)=>Math.min(Math.max(Ur,Nr),_r),Et$1={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},p$2="[-+]?\\d*\\.?\\d+",Q$3=p$2+"%";function U$3(...Nr){return"\\(\\s*("+Nr.join(")\\s*,\\s*(")+")\\s*\\)"}var le$1=new RegExp("rgb"+U$3(p$2,p$2,p$2)),ce$1=new RegExp("rgba"+U$3(p$2,p$2,p$2,p$2)),de$1=new RegExp("hsl"+U$3(p$2,Q$3,Q$3)),pe=new RegExp("hsla"+U$3(p$2,Q$3,Q$3,p$2)),me$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,be$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,xe$1=/^#([0-9a-fA-F]{6})$/,he$1=/^#([0-9a-fA-F]{8})$/;function Be$1(Nr){let _r;return typeof Nr=="number"?Nr>>>0===Nr&&Nr>=0&&Nr<=4294967295?Nr:null:(_r=xe$1.exec(Nr))?parseInt(_r[1]+"ff",16)>>>0:d$2&&d$2[Nr]!==void 0?d$2[Nr]:(_r=le$1.exec(Nr))?(E$2(_r[1])<<24|E$2(_r[2])<<16|E$2(_r[3])<<8|255)>>>0:(_r=ce$1.exec(Nr))?(E$2(_r[1])<<24|E$2(_r[2])<<16|E$2(_r[3])<<8|He$1(_r[4]))>>>0:(_r=me$1.exec(Nr))?parseInt(_r[1]+_r[1]+_r[2]+_r[2]+_r[3]+_r[3]+"ff",16)>>>0:(_r=he$1.exec(Nr))?parseInt(_r[1],16)>>>0:(_r=be$1.exec(Nr))?parseInt(_r[1]+_r[1]+_r[2]+_r[2]+_r[3]+_r[3]+_r[4]+_r[4],16)>>>0:(_r=de$1.exec(Nr))?($e$1(Ge(_r[1]),$$1(_r[2]),$$1(_r[3]))|255)>>>0:(_r=pe.exec(Nr))?($e$1(Ge(_r[1]),$$1(_r[2]),$$1(_r[3]))|He$1(_r[4]))>>>0:null}function ye$1(Nr,_r,Ur){return Ur<0&&(Ur+=1),Ur>1&&(Ur-=1),Ur<1/6?Nr+(_r-Nr)*6*Ur:Ur<1/2?_r:Ur<2/3?Nr+(_r-Nr)*(2/3-Ur)*6:Nr}function $e$1(Nr,_r,Ur){let jr=Ur<.5?Ur*(1+_r):Ur+_r-Ur*_r,Gr=2*Ur-jr,Wr=ye$1(Gr,jr,Nr+1/3),Zr=ye$1(Gr,jr,Nr),Yr=ye$1(Gr,jr,Nr-1/3);return Math.round(Wr*255)<<24|Math.round(Zr*255)<<16|Math.round(Yr*255)<<8}function E$2(Nr){let _r=parseInt(Nr,10);return _r<0?0:_r>255?255:_r}function Ge(Nr){return(parseFloat(Nr)%360+360)%360/360}function He$1(Nr){let _r=parseFloat(Nr);return _r<0?0:_r>1?255:Math.round(_r*255)}function $$1(Nr){let _r=parseFloat(Nr);return _r<0?0:_r>100?1:_r/100}function G$3(Nr){let _r=Be$1(Nr);if(_r===null)return Nr;_r=_r||0;let Ur=(_r&4278190080)>>>24,jr=(_r&16711680)>>>16,Gr=(_r&65280)>>>8,Wr=(_r&255)/255;return`rgba(${Ur}, ${jr}, ${Gr}, ${Wr})`}var H$2=(Nr,_r,Ur)=>{if(l$1.fun(Nr))return Nr;if(l$1.arr(Nr))return H$2({range:Nr,output:_r,extrapolate:Ur});if(l$1.str(Nr.output[0]))return V$3(Nr);let jr=Nr,Gr=jr.output,Wr=jr.range||[0,1],Zr=jr.extrapolateLeft||jr.extrapolate||"extend",Yr=jr.extrapolateRight||jr.extrapolate||"extend",ts=jr.easing||(es=>es);return es=>{let ns=Tt$1(es,Wr);return Ft$1(es,Wr[ns],Wr[ns+1],Gr[ns],Gr[ns+1],ts,Zr,Yr,jr.map)}};function Ft$1(Nr,_r,Ur,jr,Gr,Wr,Zr,Yr,ts){let es=ts?ts(Nr):Nr;if(es<_r){if(Zr==="identity")return es;Zr==="clamp"&&(es=_r)}if(es>Ur){if(Yr==="identity")return es;Yr==="clamp"&&(es=Ur)}return jr===Gr?jr:_r===Ur?Nr<=_r?jr:Gr:(_r===-1/0?es=-es:Ur===1/0?es=es-_r:es=(es-_r)/(Ur-_r),es=Wr(es),jr===-1/0?es=-es:Gr===1/0?es=es+jr:es=es*(Gr-jr)+jr,es)}function Tt$1(Nr,_r){for(var Ur=1;Ur<_r.length-1&&!(_r[Ur]>=Nr);++Ur);return Ur-1}var It$1=(Nr,_r="end")=>Ur=>{Ur=_r==="end"?Math.min(Ur,.999):Math.max(Ur,.001);let jr=Ur*Nr,Gr=_r==="end"?Math.floor(jr):Math.ceil(jr);return ue(0,1,Gr/Nr)},D$2=1.70158,B$2=D$2*1.525,je$1=D$2+1,De$1=2*Math.PI/3,We$1=2*Math.PI/4.5,j$3=Nr=>Nr<1/2.75?7.5625*Nr*Nr:Nr<2/2.75?7.5625*(Nr-=1.5/2.75)*Nr+.75:Nr<2.5/2.75?7.5625*(Nr-=2.25/2.75)*Nr+.9375:7.5625*(Nr-=2.625/2.75)*Nr+.984375,kt$1={linear:Nr=>Nr,easeInQuad:Nr=>Nr*Nr,easeOutQuad:Nr=>1-(1-Nr)*(1-Nr),easeInOutQuad:Nr=>Nr<.5?2*Nr*Nr:1-Math.pow(-2*Nr+2,2)/2,easeInCubic:Nr=>Nr*Nr*Nr,easeOutCubic:Nr=>1-Math.pow(1-Nr,3),easeInOutCubic:Nr=>Nr<.5?4*Nr*Nr*Nr:1-Math.pow(-2*Nr+2,3)/2,easeInQuart:Nr=>Nr*Nr*Nr*Nr,easeOutQuart:Nr=>1-Math.pow(1-Nr,4),easeInOutQuart:Nr=>Nr<.5?8*Nr*Nr*Nr*Nr:1-Math.pow(-2*Nr+2,4)/2,easeInQuint:Nr=>Nr*Nr*Nr*Nr*Nr,easeOutQuint:Nr=>1-Math.pow(1-Nr,5),easeInOutQuint:Nr=>Nr<.5?16*Nr*Nr*Nr*Nr*Nr:1-Math.pow(-2*Nr+2,5)/2,easeInSine:Nr=>1-Math.cos(Nr*Math.PI/2),easeOutSine:Nr=>Math.sin(Nr*Math.PI/2),easeInOutSine:Nr=>-(Math.cos(Math.PI*Nr)-1)/2,easeInExpo:Nr=>Nr===0?0:Math.pow(2,10*Nr-10),easeOutExpo:Nr=>Nr===1?1:1-Math.pow(2,-10*Nr),easeInOutExpo:Nr=>Nr===0?0:Nr===1?1:Nr<.5?Math.pow(2,20*Nr-10)/2:(2-Math.pow(2,-20*Nr+10))/2,easeInCirc:Nr=>1-Math.sqrt(1-Math.pow(Nr,2)),easeOutCirc:Nr=>Math.sqrt(1-Math.pow(Nr-1,2)),easeInOutCirc:Nr=>Nr<.5?(1-Math.sqrt(1-Math.pow(2*Nr,2)))/2:(Math.sqrt(1-Math.pow(-2*Nr+2,2))+1)/2,easeInBack:Nr=>je$1*Nr*Nr*Nr-D$2*Nr*Nr,easeOutBack:Nr=>1+je$1*Math.pow(Nr-1,3)+D$2*Math.pow(Nr-1,2),easeInOutBack:Nr=>Nr<.5?Math.pow(2*Nr,2)*((B$2+1)*2*Nr-B$2)/2:(Math.pow(2*Nr-2,2)*((B$2+1)*(Nr*2-2)+B$2)+2)/2,easeInElastic:Nr=>Nr===0?0:Nr===1?1:-Math.pow(2,10*Nr-10)*Math.sin((Nr*10-10.75)*De$1),easeOutElastic:Nr=>Nr===0?0:Nr===1?1:Math.pow(2,-10*Nr)*Math.sin((Nr*10-.75)*De$1)+1,easeInOutElastic:Nr=>Nr===0?0:Nr===1?1:Nr<.5?-(Math.pow(2,20*Nr-10)*Math.sin((20*Nr-11.125)*We$1))/2:Math.pow(2,-20*Nr+10)*Math.sin((20*Nr-11.125)*We$1)/2+1,easeInBounce:Nr=>1-j$3(1-Nr),easeOutBounce:j$3,easeInOutBounce:Nr=>Nr<.5?(1-j$3(1-2*Nr))/2:(1+j$3(2*Nr-1))/2,steps:It$1},O$3=Symbol.for("FluidValue.get"),y$2=Symbol.for("FluidValue.observers"),St$1=Nr=>!!(Nr&&Nr[O$3]),ve$1=Nr=>Nr&&Nr[O$3]?Nr[O$3]():Nr,Rt$1=Nr=>Nr[y$2]||null;function Ke(Nr,_r){Nr.eventObserved?Nr.eventObserved(_r):Nr(_r)}function At$1(Nr,_r){let Ur=Nr[y$2];Ur&&Ur.forEach(jr=>{Ke(jr,_r)})}var ge$1=class{constructor(_r){if(!_r&&!(_r=this.get))throw Error("Unknown getter");_e(this,_r)}},_e=(Nr,_r)=>Ne(Nr,O$3,_r);function Mt$1(Nr,_r){if(Nr[O$3]){let Ur=Nr[y$2];Ur||Ne(Nr,y$2,Ur=new Set),Ur.has(_r)||(Ur.add(_r),Nr.observerAdded&&Nr.observerAdded(Ur.size,_r))}return _r}function Ct$1(Nr,_r){let Ur=Nr[y$2];if(Ur&&Ur.has(_r)){let jr=Ur.size-1;jr?Ur.delete(_r):Nr[y$2]=null,Nr.observerRemoved&&Nr.observerRemoved(jr,_r)}}var Ne=(Nr,_r,Ur)=>Object.defineProperty(Nr,_r,{value:Ur,writable:!0,configurable:!0}),R$3=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ze=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,we$1=new RegExp(`(${R$3.source})(%|[a-z]+)`,"i"),Xe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,g$2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ee$1=Nr=>{let[_r,Ur]=zt$1(Nr);if(!_r||h$2())return Nr;let jr=window.getComputedStyle(document.documentElement).getPropertyValue(_r);return jr?jr.trim():Ur&&Ur.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(Ur)||Nr:Ur&&g$2.test(Ur)?Ee$1(Ur):Ur||Nr},zt$1=Nr=>{let _r=g$2.exec(Nr);if(!_r)return[,];let[,Ur,jr]=_r;return[Ur,jr]},Oe$1,Lt$1=(Nr,_r,Ur,jr,Gr)=>`rgba(${Math.round(_r)}, ${Math.round(Ur)}, ${Math.round(jr)}, ${Gr})`,Vt$1=Nr=>{Oe$1||(Oe$1=d$2?new RegExp(`(${Object.keys(d$2).join("|")})(?!\\w)`,"g"):/^\b$/);let _r=Nr.output.map(Gr=>ve$1(Gr).replace(g$2,Ee$1).replace(Ze,G$3).replace(Oe$1,G$3)),Ur=_r.map(Gr=>Gr.match(R$3).map(Number)),jr=Ur[0].map((Gr,Wr)=>Ur.map(Zr=>{if(!(Wr in Zr))throw Error('The arity of each "output" value must be equal');return Zr[Wr]})).map(Gr=>H$2({...Nr,output:Gr}));return Gr=>{var Yr;let Wr=!we$1.test(_r[0])&&((Yr=_r.find(ts=>we$1.test(ts)))==null?void 0:Yr.replace(R$3,"")),Zr=0;return _r[0].replace(R$3,()=>`${jr[Zr++](Gr)}${Wr||""}`).replace(Xe,Lt$1)}},W$2="react-spring: ",Fe$1=Nr=>{let _r=Nr,Ur=!1;if(typeof _r!="function")throw new TypeError(`${W$2}once requires a function parameter`);return(...jr)=>{Ur||(_r(...jr),Ur=!0)}},qt$1=Fe$1(console.warn);function Pt$1(){qt$1(`${W$2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Qt$1=Fe$1(console.warn);function Ut$1(){Qt$1(`${W$2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function $t$1(Nr){return l$1.str(Nr)&&(Nr[0]=="#"||/\d/.test(Nr)||!h$2()&&g$2.test(Nr)||Nr in(d$2||{}))}var F$2,K$3=new WeakMap,Gt$1=Nr=>Nr.forEach(({target:_r,contentRect:Ur})=>{var jr;return(jr=K$3.get(_r))==null?void 0:jr.forEach(Gr=>Gr(Ur))});function Ye(Nr,_r){F$2||typeof ResizeObserver<"u"&&(F$2=new ResizeObserver(Gt$1));let Ur=K$3.get(_r);return Ur||(Ur=new Set,K$3.set(_r,Ur)),Ur.add(Nr),F$2&&F$2.observe(_r),()=>{let jr=K$3.get(_r);jr&&(jr.delete(Nr),!jr.size&&F$2&&F$2.unobserve(_r))}}var _$2=new Set,A$2,Ht$1=()=>{let Nr=()=>{_$2.forEach(_r=>_r({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",Nr),()=>{window.removeEventListener("resize",Nr)}},Je=Nr=>(_$2.add(Nr),A$2||(A$2=Ht$1()),()=>{_$2.delete(Nr),!_$2.size&&A$2&&(A$2(),A$2=void 0)}),Te$1=(Nr,{container:_r=document.documentElement}={})=>_r===document.documentElement?Je(Nr):Ye(Nr,_r),et=(Nr,_r,Ur)=>_r-Nr===0?1:(Ur-Nr)/(_r-Nr),Bt$1={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},N$3=class{constructor(_r,Ur){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=jr=>{let Gr=this.info[jr],{length:Wr,position:Zr}=Bt$1[jr];Gr.current=this.container[`scroll${Zr}`],Gr.scrollLength=this.container["scroll"+Wr]-this.container["client"+Wr],Gr.progress=et(0,Gr.scrollLength,Gr.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=_r,this.container=Ur,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},M$2=new WeakMap,tt=new WeakMap,Ie$1=new WeakMap,rt=Nr=>Nr===document.documentElement?window:Nr,jt$1=(Nr,{container:_r=document.documentElement}={})=>{let Ur=Ie$1.get(_r);Ur||(Ur=new Set,Ie$1.set(_r,Ur));let jr=new N$3(Nr,_r);if(Ur.add(jr),!M$2.has(_r)){let Wr=()=>(Ur==null||Ur.forEach(Yr=>Yr.advance()),!0);M$2.set(_r,Wr);let Zr=rt(_r);window.addEventListener("resize",Wr,{passive:!0}),_r!==document.documentElement&&tt.set(_r,Te$1(Wr,{container:_r})),Zr.addEventListener("scroll",Wr,{passive:!0})}let Gr=M$2.get(_r);return f$2(Gr),()=>{var Yr;f$2.cancel(Gr);let Wr=Ie$1.get(_r);if(!Wr||(Wr.delete(jr),Wr.size))return;let Zr=M$2.get(_r);M$2.delete(_r),Zr&&(rt(_r).removeEventListener("scroll",Zr),window.removeEventListener("resize",Zr),(Yr=tt.get(_r))==null||Yr())}},nt=reactExports;function Dt$1(Nr){let _r=(0,nt.useRef)(null);return _r.current===null&&(_r.current=Nr()),_r.current}var ft$1=reactExports,ot=reactExports,Z$1=reactExports,C$1=h$2()?Z$1.useEffect:Z$1.useLayoutEffect,at=()=>{let Nr=(0,ot.useRef)(!1);return C$1(()=>(Nr.current=!0,()=>{Nr.current=!1}),[]),Nr};function Wt$1(){let Nr=(0,ft$1.useState)()[1],_r=at();return()=>{_r.current&&Nr(Math.random())}}var T$3=reactExports;function Kt$1(Nr,_r){let[Ur]=(0,T$3.useState)(()=>({inputs:_r,result:Nr()})),jr=(0,T$3.useRef)(),Gr=jr.current,Wr=Gr;return Wr?_r&&Wr.inputs&&_t$1(_r,Wr.inputs)||(Wr={inputs:_r,result:Nr()}):Wr=Ur,(0,T$3.useEffect)(()=>{jr.current=Wr,Gr==Ur&&(Ur.inputs=Ur.result=void 0)},[Wr]),Wr.result}function _t$1(Nr,_r){if(Nr.length!==_r.length)return!1;for(let Ur=0;Ur<Nr.length;Ur++)if(Nr[Ur]!==_r[Ur])return!1;return!0}var it=reactExports,Nt$1=Nr=>(0,it.useEffect)(Nr,Zt$1),Zt$1=[],X$2=reactExports;function Xt$1(Nr){let _r=(0,X$2.useRef)();return(0,X$2.useEffect)(()=>{_r.current=Nr}),_r.current}var st=reactExports,Yt$1=()=>{let[Nr,_r]=(0,st.useState)(null);return C$1(()=>{let Ur=window.matchMedia("(prefers-reduced-motion)"),jr=Gr=>{_r(Gr.matches),fe({skipAnimation:Gr.matches})};return jr(Ur),Ur.addEventListener("change",jr),()=>{Ur.removeEventListener("change",jr)}},[]),Nr};cjs$3.exports=reactSpring_shared_production_min;var cjsExports$3=cjs$3.exports,cjs$2={exports:{}},D$1=Object.create,T$2=Object.defineProperty,K$2=Object.getOwnPropertyDescriptor,M$1=Object.getOwnPropertyNames,q$2=Object.getPrototypeOf,z$3=Object.prototype.hasOwnProperty,G$2=(Nr,_r)=>{for(var Ur in _r)T$2(Nr,Ur,{get:_r[Ur],enumerable:!0})},E$1=(Nr,_r,Ur,jr)=>{if(_r&&typeof _r=="object"||typeof _r=="function")for(let Gr of M$1(_r))!z$3.call(Nr,Gr)&&Gr!==Ur&&T$2(Nr,Gr,{get:()=>_r[Gr],enumerable:!(jr=K$2(_r,Gr))||jr.enumerable});return Nr},J$2=(Nr,_r,Ur)=>(Ur=Nr!=null?D$1(q$2(Nr)):{},E$1(_r||!Nr||!Nr.__esModule?T$2(Ur,"default",{value:Nr,enumerable:!0}):Ur,Nr)),Q$2=Nr=>E$1(T$2({},"__esModule",{value:!0}),Nr),re$1={};G$2(re$1,{Animated:()=>h$1,AnimatedArray:()=>g$1,AnimatedObject:()=>p$1,AnimatedString:()=>m$2,AnimatedValue:()=>d$1,createHost:()=>te$1,getAnimated:()=>v$1,getAnimatedType:()=>Y$2,getPayload:()=>k$2,isAnimated:()=>S$1,setAnimated:()=>N$2});var reactSpring_animated_production_min=Q$2(re$1),O$2=cjsExports$3,b$1=Symbol.for("Animated:node"),S$1=Nr=>!!Nr&&Nr[b$1]===Nr,v$1=Nr=>Nr&&Nr[b$1],N$2=(Nr,_r)=>(0,O$2.defineHidden)(Nr,b$1,_r),k$2=Nr=>Nr&&Nr[b$1]&&Nr[b$1].getPayload(),h$1=class{constructor(){N$2(this,this)}getPayload(){return this.payload||[]}},P$2=cjsExports$3,d$1=class extends h$1{constructor(_r){super(),this._value=_r,this.done=!0,this.durationProgress=0,P$2.is.num(this._value)&&(this.lastPosition=this._value)}static create(_r){return new d$1(_r)}getPayload(){return[this]}getValue(){return this._value}setValue(_r,Ur){return P$2.is.num(_r)&&(this.lastPosition=_r,Ur&&(_r=Math.round(_r/Ur)*Ur,this.done&&(this.lastPosition=_r))),this._value===_r?!1:(this._value=_r,!0)}reset(){let{done:_r}=this;this.done=!1,P$2.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,_r&&(this.lastVelocity=null),this.v0=null)}},x$2=cjsExports$3,m$2=class extends d$1{constructor(_r){super(0),this._string=null,this._toString=(0,x$2.createInterpolator)({output:[_r,_r]})}static create(_r){return new m$2(_r)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(_r){if(x$2.is.str(_r)){if(_r==this._string)return!1;this._string=_r,this._value=1}else if(super.setValue(_r))this._string=null;else return!1;return!0}reset(_r){_r&&(this._toString=(0,x$2.createInterpolator)({output:[this.getValue(),_r]})),this._value=0,super.reset()}},U$2=cjsExports$3,u$2=cjsExports$3,V$2={dependencies:null},p$1=class extends h$1{constructor(_r){super(),this.source=_r,this.setValue(_r)}getValue(_r){let Ur={};return(0,u$2.eachProp)(this.source,(jr,Gr)=>{S$1(jr)?Ur[Gr]=jr.getValue(_r):(0,u$2.hasFluidValue)(jr)?Ur[Gr]=(0,u$2.getFluidValue)(jr):_r||(Ur[Gr]=jr)}),Ur}setValue(_r){this.source=_r,this.payload=this._makePayload(_r)}reset(){this.payload&&(0,u$2.each)(this.payload,_r=>_r.reset())}_makePayload(_r){if(_r){let Ur=new Set;return(0,u$2.eachProp)(_r,this._addToPayload,Ur),Array.from(Ur)}}_addToPayload(_r){V$2.dependencies&&(0,u$2.hasFluidValue)(_r)&&V$2.dependencies.add(_r);let Ur=k$2(_r);Ur&&(0,u$2.each)(Ur,jr=>this.add(jr))}},g$1=class extends p$1{constructor(_r){super(_r)}static create(_r){return new g$1(_r)}getValue(){return this.source.map(_r=>_r.getValue())}setValue(_r){let Ur=this.getPayload();return _r.length==Ur.length?Ur.map((jr,Gr)=>jr.setValue(_r[Gr])).some(Boolean):(super.setValue(_r.map(X$1)),!0)}};function X$1(Nr){return((0,U$2.isAnimatedString)(Nr)?m$2:d$1).create(Nr)}var _$1=cjsExports$3;function Y$2(Nr){let _r=v$1(Nr);return _r?_r.constructor:_$1.is.arr(Nr)?g$1:(0,_$1.isAnimatedString)(Nr)?m$2:d$1}var f$1=cjsExports$3,j$2=J$2(reactExports),c$1=reactExports,o$2=cjsExports$3,R$2=(Nr,_r)=>{let Ur=!o$2.is.fun(Nr)||Nr.prototype&&Nr.prototype.isReactComponent;return(0,c$1.forwardRef)((jr,Gr)=>{let Wr=(0,c$1.useRef)(null),Zr=Ur&&(0,c$1.useCallback)(rs=>{Wr.current=ee(Gr,rs)},[Gr]),[Yr,ts]=Z(jr,_r),es=(0,o$2.useForceUpdate)(),ns=()=>{let rs=Wr.current;Ur&&!rs||(rs?_r.applyAnimatedValues(rs,Yr.getValue(!0)):!1)===!1&&es()},Xr=new F$1(ns,ts),qr=(0,c$1.useRef)();(0,o$2.useIsomorphicLayoutEffect)(()=>(qr.current=Xr,(0,o$2.each)(ts,rs=>(0,o$2.addFluidObserver)(rs,Xr)),()=>{qr.current&&((0,o$2.each)(qr.current.deps,rs=>(0,o$2.removeFluidObserver)(rs,qr.current)),o$2.raf.cancel(qr.current.update))})),(0,c$1.useEffect)(ns,[]),(0,o$2.useOnce)(()=>()=>{let rs=qr.current;(0,o$2.each)(rs.deps,is=>(0,o$2.removeFluidObserver)(is,rs))});let _i=_r.getComponentProps(Yr.getValue());return j$2.createElement(Nr,{..._i,ref:Zr})})},F$1=class{constructor(_r,Ur){this.update=_r,this.deps=Ur}eventObserved(_r){_r.type=="change"&&o$2.raf.write(this.update)}};function Z(Nr,_r){let Ur=new Set;return V$2.dependencies=Ur,Nr.style&&(Nr={...Nr,style:_r.createAnimatedStyle(Nr.style)}),Nr=new p$1(Nr),V$2.dependencies=null,[Nr,Ur]}function ee(Nr,_r){return Nr&&(o$2.is.fun(Nr)?Nr(_r):Nr.current=_r),_r}var I$2=Symbol.for("AnimatedComponent"),te$1=(Nr,{applyAnimatedValues:_r=()=>!1,createAnimatedStyle:Ur=Gr=>new p$1(Gr),getComponentProps:jr=Gr=>Gr}={})=>{let Gr={applyAnimatedValues:_r,createAnimatedStyle:Ur,getComponentProps:jr},Wr=Zr=>{let Yr=W$1(Zr)||"Anonymous";return f$1.is.str(Zr)?Zr=Wr[Zr]||(Wr[Zr]=R$2(Zr,Gr)):Zr=Zr[I$2]||(Zr[I$2]=R$2(Zr,Gr)),Zr.displayName=`Animated(${Yr})`,Zr};return(0,f$1.eachProp)(Nr,(Zr,Yr)=>{f$1.is.arr(Nr)&&(Yr=W$1(Zr)),Wr[Yr]=Wr(Zr)}),{animated:Wr}},W$1=Nr=>f$1.is.str(Nr)?Nr:Nr&&f$1.is.str(Nr.displayName)?Nr.displayName:f$1.is.fun(Nr)&&Nr.name||null;cjs$2.exports=reactSpring_animated_production_min;var cjsExports$2=cjs$2.exports,cjs$1={exports:{}},reactSpring_types_production_min,hasRequiredReactSpring_types_production_min;function requireReactSpring_types_production_min(){if(hasRequiredReactSpring_types_production_min)return reactSpring_types_production_min;hasRequiredReactSpring_types_production_min=1;var Nr=Object.defineProperty,_r=Object.getOwnPropertyDescriptor,Ur=Object.getOwnPropertyNames,jr=Object.prototype.hasOwnProperty,Gr=(es,ns)=>{for(var Xr in ns)Nr(es,Xr,{get:ns[Xr],enumerable:!0})},Wr=(es,ns,Xr,qr)=>{if(ns&&typeof ns=="object"||typeof ns=="function")for(let _i of Ur(ns))!jr.call(es,_i)&&_i!==Xr&&Nr(es,_i,{get:()=>ns[_i],enumerable:!(qr=_r(ns,_i))||qr.enumerable});return es},Zr=es=>Wr(Nr({},"__esModule",{value:!0}),es),Yr={};Gr(Yr,{Any:()=>ts}),reactSpring_types_production_min=Zr(Yr);var ts=class{};return reactSpring_types_production_min}var hasRequiredCjs;function requireCjs(){return hasRequiredCjs||(hasRequiredCjs=1,cjs$1.exports=requireReactSpring_types_production_min()),cjs$1.exports}(function(Nr){var _r=Object.create,Ur=Object.defineProperty,jr=Object.getOwnPropertyDescriptor,Gr=Object.getOwnPropertyNames,Wr=Object.getPrototypeOf,Zr=Object.prototype.hasOwnProperty,Yr=(ks,gs)=>{for(var $s in gs)Ur(ks,$s,{get:gs[$s],enumerable:!0})},ts=(ks,gs,$s,Ds)=>{if(gs&&typeof gs=="object"||typeof gs=="function")for(let js of Gr(gs))!Zr.call(ks,js)&&js!==$s&&Ur(ks,js,{get:()=>gs[js],enumerable:!(Ds=jr(gs,js))||Ds.enumerable});return ks},es=(ks,gs,$s)=>(ts(ks,gs,"default"),$s&&ts($s,gs,"default")),ns=(ks,gs,$s)=>($s=ks!=null?_r(Wr(ks)):{},ts(gs||!ks||!ks.__esModule?Ur($s,"default",{value:ks,enumerable:!0}):$s,ks)),Xr=ks=>ts(Ur({},"__esModule",{value:!0}),ks),qr={};Yr(qr,{BailSignal:()=>lo,Controller:()=>jo,FrameValue:()=>Co,Globals:()=>Fu.Globals,Interpolation:()=>ep,Spring:()=>Gp,SpringContext:()=>qu,SpringRef:()=>Ku,SpringValue:()=>tu,Trail:()=>Tm,Transition:()=>fp,config:()=>Ws,createInterpolator:()=>Xu.createInterpolator,easings:()=>Xu.easings,inferTo:()=>ys,interpolate:()=>Cp,to:()=>qp,update:()=>Ru,useChain:()=>Bs,useInView:()=>am,useIsomorphicLayoutEffect:()=>Xu.useIsomorphicLayoutEffect,useReducedMotion:()=>Xu.useReducedMotion,useResize:()=>om,useScroll:()=>jp,useSpring:()=>Zu,useSpringRef:()=>im,useSpringValue:()=>Em,useSprings:()=>Mu,useTrail:()=>Yu,useTransition:()=>Bp}),Nr.exports=Xr(qr);var _i=cjsExports$3,rs=cjsExports$3;function is(ks,...gs){return rs.is.fun(ks)?ks(...gs):ks}var ss=(ks,gs)=>ks===!0||!!(gs&&ks&&(rs.is.fun(ks)?ks(gs):(0,rs.toArray)(ks).includes(gs))),os=(ks,gs)=>rs.is.obj(ks)?gs&&ks[gs]:ks,ls=(ks,gs)=>ks.default===!0?ks[gs]:ks.default?ks.default[gs]:void 0,cs=ks=>ks,ds=(ks,gs=cs)=>{let $s=fs;ks.default&&ks.default!==!0&&(ks=ks.default,$s=Object.keys(ks));let Ds={};for(let js of $s){let Vs=gs(ks[js],js);rs.is.und(Vs)||(Ds[js]=Vs)}return Ds},fs=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ms={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function ps(ks){let gs={},$s=0;if((0,rs.eachProp)(ks,(Ds,js)=>{ms[js]||(gs[js]=Ds,$s++)}),$s)return gs}function ys(ks){let gs=ps(ks);if(gs){let $s={to:gs};return(0,rs.eachProp)(ks,(Ds,js)=>js in gs||($s[js]=Ds)),$s}return{...ks}}function ws(ks){return ks=(0,rs.getFluidValue)(ks),rs.is.arr(ks)?ks.map(ws):(0,rs.isAnimatedString)(ks)?rs.Globals.createStringInterpolator({range:[0,1],output:[ks,ks]})(1):ks}function xs(ks){for(let gs in ks)return!0;return!1}function Es(ks){return rs.is.fun(ks)||rs.is.arr(ks)&&rs.is.obj(ks[0])}function Rs(ks,gs){var $s;($s=ks.ref)==null||$s.delete(ks),gs==null||gs.delete(ks)}function _s(ks,gs){var $s;gs&&ks.ref!==gs&&(($s=ks.ref)==null||$s.delete(ks),gs.add(ks),ks.ref=gs)}function Bs(ks,gs,$s=1e3){(0,_i.useIsomorphicLayoutEffect)(()=>{if(gs){let Ds=0;(0,_i.each)(ks,(js,Vs)=>{let no=js.current;if(no.length){let uo=$s*gs[Vs];isNaN(uo)?uo=Ds:Ds=uo,(0,_i.each)(no,So=>{(0,_i.each)(So.queue,_o=>{let Ho=_o.delay;_o.delay=Lo=>uo+is(Ho||0,Lo)})}),js.start()}})}else{let Ds=Promise.resolve();(0,_i.each)(ks,js=>{let Vs=js.current;if(Vs.length){let no=Vs.map(uo=>{let So=uo.queue;return uo.queue=[],So});Ds=Ds.then(()=>((0,_i.each)(Vs,(uo,So)=>(0,_i.each)(no[So]||[],_o=>uo.queue.push(_o))),Promise.all(js.start())))}})}})}var vs=cjsExports$3,Cs=reactExports,Ss=cjsExports$3,As=cjsExports$3,Us=cjsExports$2,Ks=cjsExports$3,Ws={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Js={...Ws.default,mass:1,damping:1,easing:Ks.easings.linear,clamp:!1},ho=class{constructor(){this.velocity=0,Object.assign(this,Js)}};function so(ks,gs,$s){$s&&($s={...$s},io($s,gs),gs={...$s,...gs}),io(ks,gs),Object.assign(ks,gs);for(let no in Js)ks[no]==null&&(ks[no]=Js[no]);let{frequency:Ds,damping:js}=ks,{mass:Vs}=ks;return Ks.is.und(Ds)||(Ds<.01&&(Ds=.01),js<0&&(js=0),ks.tension=Math.pow(2*Math.PI/Ds,2)*Vs,ks.friction=4*Math.PI*js*Vs/Ds),ks}function io(ks,gs){if(!Ks.is.und(gs.decay))ks.duration=void 0;else{let $s=!Ks.is.und(gs.tension)||!Ks.is.und(gs.friction);($s||!Ks.is.und(gs.frequency)||!Ks.is.und(gs.damping)||!Ks.is.und(gs.mass))&&(ks.duration=void 0,ks.decay=void 0),$s&&(ks.frequency=void 0)}}var vo=[],co=class{constructor(){this.changed=!1,this.values=vo,this.toValues=null,this.fromValues=vo,this.config=new ho,this.immediate=!1}},go=cjsExports$3;function Eo(ks,{key:gs,props:$s,defaultProps:Ds,state:js,actions:Vs}){return new Promise((no,uo)=>{let So,_o,Ho=ss($s.cancel??(Ds==null?void 0:Ds.cancel),gs);if(Ho)Jo();else{go.is.und($s.pause)||(js.paused=ss($s.pause,gs));let ro=Ds==null?void 0:Ds.pause;ro!==!0&&(ro=js.paused||ss(ro,gs)),So=is($s.delay||0,gs),ro?(js.resumeQueue.add(ba),Vs.pause()):(Vs.resume(),ba())}function Lo(){js.resumeQueue.add(ba),js.timeouts.delete(_o),_o.cancel(),So=_o.time-go.raf.now()}function ba(){So>0&&!go.Globals.skipAnimation?(js.delayed=!0,_o=go.raf.setTimeout(Jo,So),js.pauseQueue.add(Lo),js.timeouts.add(_o)):Jo()}function Jo(){js.delayed&&(js.delayed=!1),js.pauseQueue.delete(Lo),js.timeouts.delete(_o),ks<=(js.cancelId||0)&&(Ho=!0);try{Vs.start({...$s,callId:ks,cancel:Ho},no)}catch(ro){uo(ro)}}})}var Ro=cjsExports$3,Po=(ks,gs)=>gs.length==1?gs[0]:gs.some($s=>$s.cancelled)?Ns(ks.get()):gs.every($s=>$s.noop)?Oo(ks.get()):Ts(ks.get(),gs.every($s=>$s.finished)),Oo=ks=>({value:ks,noop:!0,finished:!0,cancelled:!1}),Ts=(ks,gs,$s=!1)=>({value:ks,finished:gs,cancelled:$s}),Ns=ks=>({value:ks,cancelled:!0,finished:!1});function to(ks,gs,$s,Ds){let{callId:js,parentId:Vs,onRest:no}=gs,{asyncTo:uo,promise:So}=$s;return!Vs&&ks===uo&&!gs.reset?So:$s.promise=(async()=>{$s.asyncId=js,$s.asyncTo=ks;let _o=ds(gs,(ko,zo)=>zo==="onRest"?void 0:ko),Ho,Lo,ba=new Promise((ko,zo)=>(Ho=ko,Lo=zo)),Jo=ko=>{let zo=js<=($s.cancelId||0)&&Ns(Ds)||js!==$s.asyncId&&Ts(Ds,!1);if(zo)throw ko.result=zo,Lo(ko),ko},ro=(ko,zo)=>{let na=new lo,Qo=new Io;return(async()=>{if(Ro.Globals.skipAnimation)throw ao($s),Qo.result=Ts(Ds,!1),Lo(Qo),Qo;Jo(na);let Go=Ro.is.obj(ko)?{...ko}:{...zo,to:ko};Go.parentId=js,(0,Ro.eachProp)(_o,(Tu,zl)=>{Ro.is.und(Go[zl])&&(Go[zl]=Tu)});let ga=await Ds.start(Go);return Jo(na),$s.paused&&await new Promise(Tu=>{$s.resumeQueue.add(Tu)}),ga})()},$o;if(Ro.Globals.skipAnimation)return ao($s),Ts(Ds,!1);try{let ko;Ro.is.arr(ks)?ko=(async zo=>{for(let na of zo)await ro(na)})(ks):ko=Promise.resolve(ks(ro,Ds.stop.bind(Ds))),await Promise.all([ko.then(Ho),ba]),$o=Ts(Ds.get(),!0,!1)}catch(ko){if(ko instanceof lo)$o=ko.result;else if(ko instanceof Io)$o=ko.result;else throw ko}finally{js==$s.asyncId&&($s.asyncId=Vs,$s.asyncTo=Vs?uo:void 0,$s.promise=Vs?So:void 0)}return Ro.is.fun(no)&&Ro.raf.batchedUpdates(()=>{no($o,Ds,Ds.item)}),$o})()}function ao(ks,gs){(0,Ro.flush)(ks.timeouts,$s=>$s.cancel()),ks.pauseQueue.clear(),ks.resumeQueue.clear(),ks.asyncId=ks.asyncTo=ks.promise=void 0,gs&&(ks.cancelId=gs)}var lo=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Io=class extends Error{constructor(){super("SkipAnimationSignal")}},po=cjsExports$3,Fo=cjsExports$2,Do=ks=>ks instanceof Co,No=1,Co=class extends po.FluidValue{constructor(){super(...arguments),this.id=No++,this._priority=0}get priority(){return this._priority}set priority(ks){this._priority!=ks&&(this._priority=ks,this._onPriorityChange(ks))}get(){let ks=(0,Fo.getAnimated)(this);return ks&&ks.getValue()}to(...ks){return po.Globals.to(this,ks)}interpolate(...ks){return(0,po.deprecateInterpolate)(),po.Globals.to(this,ks)}toJSON(){return this.get()}observerAdded(ks){ks==1&&this._attach()}observerRemoved(ks){ks==0&&this._detach()}_attach(){}_detach(){}_onChange(ks,gs=!1){(0,po.callFluidObservers)(this,{type:"change",parent:this,value:ks,idle:gs})}_onPriorityChange(ks){this.idle||po.frameLoop.sort(this),(0,po.callFluidObservers)(this,{type:"priority",parent:this,priority:ks})}},qo=Symbol.for("SpringPhase"),Mo=1,_l=2,Al=4,Yl=ks=>(ks[qo]&Mo)>0,Ul=ks=>(ks[qo]&_l)>0,eu=ks=>(ks[qo]&Al)>0,du=(ks,gs)=>gs?ks[qo]|=_l|Mo:ks[qo]&=~_l,ru=(ks,gs)=>gs?ks[qo]|=Al:ks[qo]&=~Al,tu=class extends Co{constructor(ks,gs){if(super(),this.animation=new co,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!As.is.und(ks)||!As.is.und(gs)){let $s=As.is.obj(ks)?{...ks}:{...gs,from:ks};As.is.und($s.default)&&($s.default=!0),this.start($s)}}get idle(){return!(Ul(this)||this._state.asyncTo)||eu(this)}get goal(){return(0,As.getFluidValue)(this.animation.to)}get velocity(){let ks=(0,Us.getAnimated)(this);return ks instanceof Us.AnimatedValue?ks.lastVelocity||0:ks.getPayload().map(gs=>gs.lastVelocity||0)}get hasAnimated(){return Yl(this)}get isAnimating(){return Ul(this)}get isPaused(){return eu(this)}get isDelayed(){return this._state.delayed}advance(ks){let gs=!0,$s=!1,Ds=this.animation,{toValues:js}=Ds,{config:Vs}=Ds,no=(0,Us.getPayload)(Ds.to);!no&&(0,As.hasFluidValue)(Ds.to)&&(js=(0,As.toArray)((0,As.getFluidValue)(Ds.to))),Ds.values.forEach((_o,Ho)=>{if(_o.done)return;let Lo=_o.constructor==Us.AnimatedString?1:no?no[Ho].lastPosition:js[Ho],ba=Ds.immediate,Jo=Lo;if(!ba){if(Jo=_o.lastPosition,Vs.tension<=0){_o.done=!0;return}let ro=_o.elapsedTime+=ks,$o=Ds.fromValues[Ho],ko=_o.v0!=null?_o.v0:_o.v0=As.is.arr(Vs.velocity)?Vs.velocity[Ho]:Vs.velocity,zo,na=Vs.precision||($o==Lo?.005:Math.min(1,Math.abs(Lo-$o)*.001));if(As.is.und(Vs.duration))if(Vs.decay){let Qo=Vs.decay===!0?.998:Vs.decay,Go=Math.exp(-(1-Qo)*ro);Jo=$o+ko/(1-Qo)*(1-Go),ba=Math.abs(_o.lastPosition-Jo)<=na,zo=ko*Go}else{zo=_o.lastVelocity==null?ko:_o.lastVelocity;let Qo=Vs.restVelocity||na/10,Go=Vs.clamp?0:Vs.bounce,ga=!As.is.und(Go),Tu=$o==Lo?_o.v0>0:$o<Lo,zl,hu=!1,Kl=1,Su=Math.ceil(ks/Kl);for(let gu=0;gu<Su&&(zl=Math.abs(zo)>Qo,!(!zl&&(ba=Math.abs(Lo-Jo)<=na,ba)));++gu){ga&&(hu=Jo==Lo||Jo>Lo==Tu,hu&&(zo=-zo*Go,Jo=Lo));let Bu=-Vs.tension*1e-6*(Jo-Lo),Qu=-Vs.friction*.001*zo,Vo=(Bu+Qu)/Vs.mass;zo=zo+Vo*Kl,Jo=Jo+zo*Kl}}else{let Qo=1;Vs.duration>0&&(this._memoizedDuration!==Vs.duration&&(this._memoizedDuration=Vs.duration,_o.durationProgress>0&&(_o.elapsedTime=Vs.duration*_o.durationProgress,ro=_o.elapsedTime+=ks)),Qo=(Vs.progress||0)+ro/this._memoizedDuration,Qo=Qo>1?1:Qo<0?0:Qo,_o.durationProgress=Qo),Jo=$o+Vs.easing(Qo)*(Lo-$o),zo=(Jo-_o.lastPosition)/ks,ba=Qo==1}_o.lastVelocity=zo,Number.isNaN(Jo)&&(console.warn("Got NaN while animating:",this),ba=!0)}no&&!no[Ho].done&&(ba=!1),ba?_o.done=!0:gs=!1,_o.setValue(Jo,Vs.round)&&($s=!0)});let uo=(0,Us.getAnimated)(this),So=uo.getValue();if(gs){let _o=(0,As.getFluidValue)(Ds.to);(So!==_o||$s)&&!Vs.decay?(uo.setValue(_o),this._onChange(_o)):$s&&Vs.decay&&this._onChange(So),this._stop()}else $s&&this._onChange(So)}set(ks){return As.raf.batchedUpdates(()=>{this._stop(),this._focus(ks),this._set(ks)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ul(this)){let{to:ks,config:gs}=this.animation;As.raf.batchedUpdates(()=>{this._onStart(),gs.decay||this._set(ks,!1),this._stop()})}return this}update(ks){return(this.queue||(this.queue=[])).push(ks),this}start(ks,gs){let $s;return As.is.und(ks)?($s=this.queue||[],this.queue=[]):$s=[As.is.obj(ks)?ks:{...gs,to:ks}],Promise.all($s.map(Ds=>this._update(Ds))).then(Ds=>Po(this,Ds))}stop(ks){let{to:gs}=this.animation;return this._focus(this.get()),ao(this._state,ks&&this._lastCallId),As.raf.batchedUpdates(()=>this._stop(gs,ks)),this}reset(){this._update({reset:!0})}eventObserved(ks){ks.type=="change"?this._start():ks.type=="priority"&&(this.priority=ks.priority+1)}_prepareNode(ks){let gs=this.key||"",{to:$s,from:Ds}=ks;$s=As.is.obj($s)?$s[gs]:$s,($s==null||Es($s))&&($s=void 0),Ds=As.is.obj(Ds)?Ds[gs]:Ds,Ds==null&&(Ds=void 0);let js={to:$s,from:Ds};return Yl(this)||(ks.reverse&&([$s,Ds]=[Ds,$s]),Ds=(0,As.getFluidValue)(Ds),As.is.und(Ds)?(0,Us.getAnimated)(this)||this._set($s):this._set(Ds)),js}_update({...ks},gs){let{key:$s,defaultProps:Ds}=this;ks.default&&Object.assign(Ds,ds(ks,(no,uo)=>/^on/.test(uo)?os(no,$s):no)),qs(this,ks,"onProps"),Ys(this,"onProps",ks,this);let js=this._prepareNode(ks);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Vs=this._state;return Eo(++this._lastCallId,{key:$s,props:ks,defaultProps:Ds,state:Vs,actions:{pause:()=>{eu(this)||(ru(this,!0),(0,As.flushCalls)(Vs.pauseQueue),Ys(this,"onPause",Ts(this,$l(this,this.animation.to)),this))},resume:()=>{eu(this)&&(ru(this,!1),Ul(this)&&this._resume(),(0,As.flushCalls)(Vs.resumeQueue),Ys(this,"onResume",Ts(this,$l(this,this.animation.to)),this))},start:this._merge.bind(this,js)}}).then(no=>{if(ks.loop&&no.finished&&!(gs&&no.noop)){let uo=Ps(ks);if(uo)return this._update(uo,!0)}return no})}_merge(ks,gs,$s){if(gs.cancel)return this.stop(!0),$s(Ns(this));let Ds=!As.is.und(ks.to),js=!As.is.und(ks.from);if(Ds||js)if(gs.callId>this._lastToId)this._lastToId=gs.callId;else return $s(Ns(this));let{key:Vs,defaultProps:no,animation:uo}=this,{to:So,from:_o}=uo,{to:Ho=So,from:Lo=_o}=ks;js&&!Ds&&(!gs.default||As.is.und(Ho))&&(Ho=Lo),gs.reverse&&([Ho,Lo]=[Lo,Ho]);let ba=!(0,As.isEqual)(Lo,_o);ba&&(uo.from=Lo),Lo=(0,As.getFluidValue)(Lo);let Jo=!(0,As.isEqual)(Ho,So);Jo&&this._focus(Ho);let ro=Es(gs.to),{config:$o}=uo,{decay:ko,velocity:zo}=$o;(Ds||js)&&($o.velocity=0),gs.config&&!ro&&so($o,is(gs.config,Vs),gs.config!==no.config?is(no.config,Vs):void 0);let na=(0,Us.getAnimated)(this);if(!na||As.is.und(Ho))return $s(Ts(this,!0));let Qo=As.is.und(gs.reset)?js&&!gs.default:!As.is.und(Lo)&&ss(gs.reset,Vs),Go=Qo?Lo:this.get(),ga=ws(Ho),Tu=As.is.num(ga)||As.is.arr(ga)||(0,As.isAnimatedString)(ga),zl=!ro&&(!Tu||ss(no.immediate||gs.immediate,Vs));if(Jo){let gu=(0,Us.getAnimatedType)(Ho);if(gu!==na.constructor)if(zl)na=this._set(ga);else throw Error(`Cannot animate between ${na.constructor.name} and ${gu.name}, as the "to" prop suggests`)}let hu=na.constructor,Kl=(0,As.hasFluidValue)(Ho),Su=!1;if(!Kl){let gu=Qo||!Yl(this)&&ba;(Jo||gu)&&(Su=(0,As.isEqual)(ws(Go),ga),Kl=!Su),(!(0,As.isEqual)(uo.immediate,zl)&&!zl||!(0,As.isEqual)($o.decay,ko)||!(0,As.isEqual)($o.velocity,zo))&&(Kl=!0)}if(Su&&Ul(this)&&(uo.changed&&!Qo?Kl=!0:Kl||this._stop(So)),!ro&&((Kl||(0,As.hasFluidValue)(So))&&(uo.values=na.getPayload(),uo.toValues=(0,As.hasFluidValue)(Ho)?null:hu==Us.AnimatedString?[1]:(0,As.toArray)(ga)),uo.immediate!=zl&&(uo.immediate=zl,!zl&&!Qo&&this._set(So)),Kl)){let{onRest:gu}=uo;(0,As.each)(zs,Qu=>qs(this,gs,Qu));let Bu=Ts(this,$l(this,So));(0,As.flushCalls)(this._pendingCalls,Bu),this._pendingCalls.add($s),uo.changed&&As.raf.batchedUpdates(()=>{var Qu;uo.changed=!Qo,gu==null||gu(Bu,this),Qo?is(no.onRest,Bu):(Qu=uo.onStart)==null||Qu.call(uo,Bu,this)})}Qo&&this._set(Go),ro?$s(to(gs.to,gs,this._state,this)):Kl?this._start():Ul(this)&&!Jo?this._pendingCalls.add($s):$s(Oo(Go))}_focus(ks){let gs=this.animation;ks!==gs.to&&((0,As.getFluidObservers)(this)&&this._detach(),gs.to=ks,(0,As.getFluidObservers)(this)&&this._attach())}_attach(){let ks=0,{to:gs}=this.animation;(0,As.hasFluidValue)(gs)&&((0,As.addFluidObserver)(gs,this),Do(gs)&&(ks=gs.priority+1)),this.priority=ks}_detach(){let{to:ks}=this.animation;(0,As.hasFluidValue)(ks)&&(0,As.removeFluidObserver)(ks,this)}_set(ks,gs=!0){let $s=(0,As.getFluidValue)(ks);if(!As.is.und($s)){let Ds=(0,Us.getAnimated)(this);if(!Ds||!(0,As.isEqual)($s,Ds.getValue())){let js=(0,Us.getAnimatedType)($s);!Ds||Ds.constructor!=js?(0,Us.setAnimated)(this,js.create($s)):Ds.setValue($s),Ds&&As.raf.batchedUpdates(()=>{this._onChange($s,gs)})}}return(0,Us.getAnimated)(this)}_onStart(){let ks=this.animation;ks.changed||(ks.changed=!0,Ys(this,"onStart",Ts(this,$l(this,ks.to)),this))}_onChange(ks,gs){gs||(this._onStart(),is(this.animation.onChange,ks,this)),is(this.defaultProps.onChange,ks,this),super._onChange(ks,gs)}_start(){let ks=this.animation;(0,Us.getAnimated)(this).reset((0,As.getFluidValue)(ks.to)),ks.immediate||(ks.fromValues=ks.values.map(gs=>gs.lastPosition)),Ul(this)||(du(this,!0),eu(this)||this._resume())}_resume(){As.Globals.skipAnimation?this.finish():As.frameLoop.start(this)}_stop(ks,gs){if(Ul(this)){du(this,!1);let $s=this.animation;(0,As.each)($s.values,js=>{js.done=!0}),$s.toValues&&($s.onChange=$s.onPause=$s.onResume=void 0),(0,As.callFluidObservers)(this,{type:"idle",parent:this});let Ds=gs?Ns(this.get()):Ts(this.get(),$l(this,ks??$s.to));(0,As.flushCalls)(this._pendingCalls,Ds),$s.changed&&($s.changed=!1,Ys(this,"onRest",Ds,this))}}};function $l(ks,gs){let $s=ws(gs),Ds=ws(ks.get());return(0,As.isEqual)(Ds,$s)}function Ps(ks,gs=ks.loop,$s=ks.to){let Ds=is(gs);if(Ds){let js=Ds!==!0&&ys(Ds),Vs=(js||ks).reverse,no=!js||js.reset;return Os({...ks,loop:gs,default:!1,pause:void 0,to:!Vs||Es($s)?$s:void 0,from:no?ks.from:void 0,reset:no,...js})}}function Os(ks){let{to:gs,from:$s}=ks=ys(ks),Ds=new Set;return As.is.obj(gs)&&Is(gs,Ds),As.is.obj($s)&&Is($s,Ds),ks.keys=Ds.size?Array.from(Ds):null,ks}function Gs(ks){let gs=Os(ks);return As.is.und(gs.default)&&(gs.default=ds(gs)),gs}function Is(ks,gs){(0,As.eachProp)(ks,($s,Ds)=>$s!=null&&gs.add(Ds))}var zs=["onStart","onRest","onChange","onPause","onResume"];function qs(ks,gs,$s){ks.animation[$s]=gs[$s]!==ls(gs,$s)?os(gs[$s],ks.key):void 0}function Ys(ks,gs,...$s){var Ds,js,Vs,no;(js=(Ds=ks.animation)[gs])==null||js.call(Ds,...$s),(no=(Vs=ks.defaultProps)[gs])==null||no.call(Vs,...$s)}var Xs=cjsExports$3,xo=["onStart","onChange","onRest"],To=1,jo=class{constructor(ks,gs){this.id=To++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),gs&&(this._flush=gs),ks&&this.start({default:!0,...ks})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(ks=>ks.idle&&!ks.isDelayed&&!ks.isPaused)}get item(){return this._item}set item(ks){this._item=ks}get(){let ks={};return this.each((gs,$s)=>ks[$s]=gs.get()),ks}set(ks){for(let gs in ks){let $s=ks[gs];Xs.is.und($s)||this.springs[gs].set($s)}}update(ks){return ks&&this.queue.push(Os(ks)),this}start(ks){let{queue:gs}=this;return ks?gs=(0,Xs.toArray)(ks).map(Os):this.queue=[],this._flush?this._flush(this,gs):(xl(this,gs),Xo(this,gs))}stop(ks,gs){if(ks!==!!ks&&(gs=ks),gs){let $s=this.springs;(0,Xs.each)((0,Xs.toArray)(gs),Ds=>$s[Ds].stop(!!ks))}else ao(this._state,this._lastAsyncId),this.each($s=>$s.stop(!!ks));return this}pause(ks){if(Xs.is.und(ks))this.start({pause:!0});else{let gs=this.springs;(0,Xs.each)((0,Xs.toArray)(ks),$s=>gs[$s].pause())}return this}resume(ks){if(Xs.is.und(ks))this.start({pause:!1});else{let gs=this.springs;(0,Xs.each)((0,Xs.toArray)(ks),$s=>gs[$s].resume())}return this}each(ks){(0,Xs.eachProp)(this.springs,ks)}_onFrame(){let{onStart:ks,onChange:gs,onRest:$s}=this._events,Ds=this._active.size>0,js=this._changed.size>0;(Ds&&!this._started||js&&!this._started)&&(this._started=!0,(0,Xs.flush)(ks,([uo,So])=>{So.value=this.get(),uo(So,this,this._item)}));let Vs=!Ds&&this._started,no=js||Vs&&$s.size?this.get():null;js&&gs.size&&(0,Xs.flush)(gs,([uo,So])=>{So.value=no,uo(So,this,this._item)}),Vs&&(this._started=!1,(0,Xs.flush)($s,([uo,So])=>{So.value=no,uo(So,this,this._item)}))}eventObserved(ks){if(ks.type=="change")this._changed.add(ks.parent),ks.idle||this._active.add(ks.parent);else if(ks.type=="idle")this._active.delete(ks.parent);else return;Xs.raf.onFrame(this._onFrame)}};function Xo(ks,gs){return Promise.all(gs.map($s=>Uo(ks,$s))).then($s=>Po(ks,$s))}async function Uo(ks,gs,$s){let{keys:Ds,to:js,from:Vs,loop:no,onRest:uo,onResolve:So}=gs,_o=Xs.is.obj(gs.default)&&gs.default;no&&(gs.loop=!1),js===!1&&(gs.to=null),Vs===!1&&(gs.from=null);let Ho=Xs.is.arr(js)||Xs.is.fun(js)?js:void 0;Ho?(gs.to=void 0,gs.onRest=void 0,_o&&(_o.onRest=void 0)):(0,Xs.each)(xo,$o=>{let ko=gs[$o];if(Xs.is.fun(ko)){let zo=ks._events[$o];gs[$o]=({finished:na,cancelled:Qo})=>{let Go=zo.get(ko);Go?(na||(Go.finished=!1),Qo&&(Go.cancelled=!0)):zo.set(ko,{value:null,finished:na||!1,cancelled:Qo||!1})},_o&&(_o[$o]=gs[$o])}});let Lo=ks._state;gs.pause===!Lo.paused?(Lo.paused=gs.pause,(0,Xs.flushCalls)(gs.pause?Lo.pauseQueue:Lo.resumeQueue)):Lo.paused&&(gs.pause=!0);let ba=(Ds||Object.keys(ks.springs)).map($o=>ks.springs[$o].start(gs)),Jo=gs.cancel===!0||ls(gs,"cancel")===!0;(Ho||Jo&&Lo.asyncId)&&ba.push(Eo(++ks._lastAsyncId,{props:gs,state:Lo,actions:{pause:Xs.noop,resume:Xs.noop,start($o,ko){Jo?(ao(Lo,ks._lastAsyncId),ko(Ns(ks))):($o.onRest=uo,ko(to(Ho,$o,Lo,ks)))}}})),Lo.paused&&await new Promise($o=>{Lo.resumeQueue.add($o)});let ro=Po(ks,await Promise.all(ba));if(no&&ro.finished&&!($s&&ro.noop)){let $o=Ps(gs,no,js);if($o)return xl(ks,[$o]),Uo(ks,$o,!0)}return So&&Xs.raf.batchedUpdates(()=>So(ro,ks,ks.item)),ro}function Ml(ks,gs){let $s={...ks.springs};return gs&&(0,Xs.each)((0,Xs.toArray)(gs),Ds=>{Xs.is.und(Ds.keys)&&(Ds=Os(Ds)),Xs.is.obj(Ds.to)||(Ds={...Ds,to:void 0}),fo($s,Ds,js=>xu(js))}),fu(ks,$s),$s}function fu(ks,gs){(0,Xs.eachProp)(gs,($s,Ds)=>{ks.springs[Ds]||(ks.springs[Ds]=$s,(0,Xs.addFluidObserver)($s,ks))})}function xu(ks,gs){let $s=new tu;return $s.key=ks,gs&&(0,Xs.addFluidObserver)($s,gs),$s}function fo(ks,gs,$s){gs.keys&&(0,Xs.each)(gs.keys,Ds=>{(ks[Ds]||(ks[Ds]=$s(Ds)))._prepareNode(gs)})}function xl(ks,gs){(0,Xs.each)(gs,$s=>{fo(ks.springs,$s,Ds=>xu(Ds,ks))})}var Pl=ns(reactExports),wu=reactExports,lp=cjsExports$3,qu=({children:ks,...gs})=>{let $s=(0,wu.useContext)(up),Ds=gs.pause||!!$s.pause,js=gs.immediate||!!$s.immediate;gs=(0,lp.useMemoOne)(()=>({pause:Ds,immediate:js}),[Ds,js]);let{Provider:Vs}=up;return Pl.createElement(Vs,{value:gs},ks)},up=wm(qu,{});qu.Provider=up.Provider,qu.Consumer=up.Consumer;function wm(ks,gs){return Object.assign(ks,Pl.createContext(gs)),ks.Provider._context=ks,ks.Consumer._context=ks,ks}var ou=cjsExports$3,Ku=()=>{let ks=[],gs=function(Ds){(0,ou.deprecateDirectCall)();let js=[];return(0,ou.each)(ks,(Vs,no)=>{if(ou.is.und(Ds))js.push(Vs.start());else{let uo=$s(Ds,Vs,no);uo&&js.push(Vs.start(uo))}}),js};gs.current=ks,gs.add=function(Ds){ks.includes(Ds)||ks.push(Ds)},gs.delete=function(Ds){let js=ks.indexOf(Ds);~js&&ks.splice(js,1)},gs.pause=function(){return(0,ou.each)(ks,Ds=>Ds.pause(...arguments)),this},gs.resume=function(){return(0,ou.each)(ks,Ds=>Ds.resume(...arguments)),this},gs.set=function(Ds){(0,ou.each)(ks,(js,Vs)=>{let no=ou.is.fun(Ds)?Ds(Vs,js):Ds;no&&js.set(no)})},gs.start=function(Ds){let js=[];return(0,ou.each)(ks,(Vs,no)=>{if(ou.is.und(Ds))js.push(Vs.start());else{let uo=this._getProps(Ds,Vs,no);uo&&js.push(Vs.start(uo))}}),js},gs.stop=function(){return(0,ou.each)(ks,Ds=>Ds.stop(...arguments)),this},gs.update=function(Ds){return(0,ou.each)(ks,(js,Vs)=>js.update(this._getProps(Ds,js,Vs))),this};let $s=function(Ds,js,Vs){return ou.is.fun(Ds)?Ds(Vs,js):Ds};return gs._getProps=$s,gs};function Mu(ks,gs,$s){let Ds=Ss.is.fun(gs)&&gs;Ds&&!$s&&($s=[]);let js=(0,Cs.useMemo)(()=>Ds||arguments.length==3?Ku():void 0,[]),Vs=(0,Cs.useRef)(0),no=(0,Ss.useForceUpdate)(),uo=(0,Cs.useMemo)(()=>({ctrls:[],queue:[],flush(zo,na){let Qo=Ml(zo,na);return Vs.current>0&&!uo.queue.length&&!Object.keys(Qo).some(Go=>!zo.springs[Go])?Xo(zo,na):new Promise(Go=>{fu(zo,Qo),uo.queue.push(()=>{Go(Xo(zo,na))}),no()})}}),[]),So=(0,Cs.useRef)([...uo.ctrls]),_o=[],Ho=(0,Ss.usePrev)(ks)||0;(0,Cs.useMemo)(()=>{(0,Ss.each)(So.current.slice(ks,Ho),zo=>{Rs(zo,js),zo.stop(!0)}),So.current.length=ks,Lo(Ho,ks)},[ks]),(0,Cs.useMemo)(()=>{Lo(0,Math.min(Ho,ks))},$s);function Lo(zo,na){for(let Qo=zo;Qo<na;Qo++){let Go=So.current[Qo]||(So.current[Qo]=new jo(null,uo.flush)),ga=Ds?Ds(Qo,Go):gs[Qo];ga&&(_o[Qo]=Gs(ga))}}let ba=So.current.map((zo,na)=>Ml(zo,_o[na])),Jo=(0,Cs.useContext)(qu),ro=(0,Ss.usePrev)(Jo),$o=Jo!==ro&&xs(Jo);(0,Ss.useIsomorphicLayoutEffect)(()=>{Vs.current++,uo.ctrls=So.current;let{queue:zo}=uo;zo.length&&(uo.queue=[],(0,Ss.each)(zo,na=>na())),(0,Ss.each)(So.current,(na,Qo)=>{js==null||js.add(na),$o&&na.start({default:Jo});let Go=_o[Qo];Go&&(_s(na,Go.ref),na.ref?na.queue.push(Go):na.start(Go))})}),(0,Ss.useOnce)(()=>()=>{(0,Ss.each)(uo.ctrls,zo=>zo.stop(!0))});let ko=ba.map(zo=>({...zo}));return js?[ko,js]:ko}function Zu(ks,gs){let $s=vs.is.fun(ks),[[Ds],js]=Mu(1,$s?ks:[ks],$s?gs||[]:gs);return $s||arguments.length==2?[Ds,js]:Ds}var rm=reactExports,nm=()=>Ku(),im=()=>(0,rm.useState)(nm)[0],Fp=cjsExports$3,Em=(ks,gs)=>{let $s=(0,Fp.useConstant)(()=>new tu(ks,gs));return(0,Fp.useOnce)(()=>()=>{$s.stop()}),$s},Ol=cjsExports$3;function Yu(ks,gs,$s){let Ds=Ol.is.fun(gs)&&gs;Ds&&!$s&&($s=[]);let js=!0,Vs,no=Mu(ks,(uo,So)=>{let _o=Ds?Ds(uo,So):gs;return Vs=_o.ref,js=js&&_o.reverse,_o},$s||[{}]);if((0,Ol.useIsomorphicLayoutEffect)(()=>{(0,Ol.each)(no[1].current,(uo,So)=>{let _o=no[1].current[So+(js?1:-1)];if(_s(uo,Vs),uo.ref){_o&&uo.update({to:_o.springs});return}_o?uo.start({to:_o.springs}):uo.start()})},$s),Ds||arguments.length==3){let uo=Vs??no[1];return uo._getProps=(So,_o,Ho)=>{let Lo=Ol.is.fun(So)?So(Ho,_o):So;if(Lo){let ba=uo.current[Ho+(Lo.reverse?1:-1)];return ba&&(Lo.to=ba.springs),Lo}},no}return no[0]}var cp=ns(reactExports),Eu=reactExports,Rl=cjsExports$3;function Bp(ks,gs,$s){let Ds=Rl.is.fun(gs)&&gs,{reset:js,sort:Vs,trail:no=0,expires:uo=!0,exitBeforeEnter:So=!1,onDestroyed:_o,ref:Ho,config:Lo}=Ds?Ds():gs,ba=(0,Eu.useMemo)(()=>Ds||arguments.length==3?Ku():void 0,[]),Jo=(0,Rl.toArray)(ks),ro=[],$o=(0,Eu.useRef)(null),ko=js?null:$o.current;(0,Rl.useIsomorphicLayoutEffect)(()=>{$o.current=ro}),(0,Rl.useOnce)(()=>((0,Rl.each)(ro,Vo=>{ba==null||ba.add(Vo.ctrl),Vo.ctrl.ref=ba}),()=>{(0,Rl.each)($o.current,Vo=>{Vo.expired&&clearTimeout(Vo.expirationId),Rs(Vo.ctrl,ba),Vo.ctrl.stop(!0)})}));let zo=Up(Jo,Ds?Ds():gs,ko),na=js&&$o.current||[];(0,Rl.useIsomorphicLayoutEffect)(()=>(0,Rl.each)(na,({ctrl:Vo,item:El,key:Gl})=>{Rs(Vo,ba),is(_o,El,Gl)}));let Qo=[];if(ko&&(0,Rl.each)(ko,(Vo,El)=>{Vo.expired?(clearTimeout(Vo.expirationId),na.push(Vo)):(El=Qo[El]=zo.indexOf(Vo.key),~El&&(ro[El]=Vo))}),(0,Rl.each)(Jo,(Vo,El)=>{ro[El]||(ro[El]={key:zo[El],item:Vo,phase:"mount",ctrl:new jo},ro[El].ctrl.item=Vo)}),Qo.length){let Vo=-1,{leave:El}=Ds?Ds():gs;(0,Rl.each)(Qo,(Gl,au)=>{let Xl=ko[au];~Gl?(Vo=ro.indexOf(Xl),ro[Vo]={...Xl,item:Jo[Gl]}):El&&ro.splice(++Vo,0,Xl)})}Rl.is.fun(Vs)&&ro.sort((Vo,El)=>Vs(Vo.item,El.item));let Go=-no,ga=(0,Rl.useForceUpdate)(),Tu=ds(gs),zl=new Map,hu=(0,Eu.useRef)(new Map),Kl=(0,Eu.useRef)(!1);(0,Rl.each)(ro,(Vo,El)=>{let Gl=Vo.key,au=Vo.phase,Xl=Ds?Ds():gs,Hl,Uu,jm=is(Xl.delay||0,Gl);if(au=="mount")Hl=Xl.enter,Uu="enter";else{let _u=zo.indexOf(Gl)<0;if(au!="leave")if(_u)Hl=Xl.leave,Uu="leave";else if(Hl=Xl.update)Uu="update";else return;else if(!_u)Hl=Xl.enter,Uu="enter";else return}if(Hl=is(Hl,Vo.item,El),Hl=Rl.is.obj(Hl)?ys(Hl):{to:Hl},!Hl.config){let _u=Lo||Tu.config;Hl.config=is(_u,Vo.item,El,Uu)}Go+=no;let rp={...Tu,delay:jm+Go,ref:Ho,immediate:Xl.immediate,reset:!1,...Hl};if(Uu=="enter"&&Rl.is.und(rp.from)){let _u=Ds?Ds():gs,nu=Rl.is.und(_u.initial)||ko?_u.from:_u.initial;rp.from=is(nu,Vo.item,El)}let{onResolve:zm}=rp;rp.onResolve=_u=>{is(zm,_u);let nu=$o.current,np=nu.find(uu=>uu.key===Gl);if(np&&!(_u.cancelled&&np.phase!="update")&&np.ctrl.idle){let uu=nu.every(pp=>pp.ctrl.idle);if(np.phase=="leave"){let pp=is(uo,np.item);if(pp!==!1){let lm=pp===!0?0:pp;if(np.expired=!0,!uu&&lm>0){lm<=2147483647&&(np.expirationId=setTimeout(ga,lm));return}}}uu&&nu.some(pp=>pp.expired)&&(hu.current.delete(np),So&&(Kl.current=!0),ga())}};let Sm=Ml(Vo.ctrl,rp);Uu==="leave"&&So?hu.current.set(Vo,{phase:Uu,springs:Sm,payload:rp}):zl.set(Vo,{phase:Uu,springs:Sm,payload:rp})});let Su=(0,Eu.useContext)(qu),gu=(0,Rl.usePrev)(Su),Bu=Su!==gu&&xs(Su);(0,Rl.useIsomorphicLayoutEffect)(()=>{Bu&&(0,Rl.each)(ro,Vo=>{Vo.ctrl.start({default:Su})})},[Su]),(0,Rl.each)(zl,(Vo,El)=>{if(hu.current.size){let Gl=ro.findIndex(au=>au.key===El.key);ro.splice(Gl,1)}}),(0,Rl.useIsomorphicLayoutEffect)(()=>{(0,Rl.each)(hu.current.size?hu.current:zl,({phase:Vo,payload:El},Gl)=>{let{ctrl:au}=Gl;Gl.phase=Vo,ba==null||ba.add(au),Bu&&Vo=="enter"&&au.start({default:Su}),El&&(_s(au,El.ref),(au.ref||ba)&&!Kl.current?au.update(El):(au.start(El),Kl.current&&(Kl.current=!1)))})},js?void 0:$s);let Qu=Vo=>cp.createElement(cp.Fragment,null,ro.map((El,Gl)=>{let{springs:au}=zl.get(El)||El.ctrl,Xl=Vo({...au},El.item,El,Gl);return Xl&&Xl.type?cp.createElement(Xl.type,{...Xl.props,key:Rl.is.str(El.key)||Rl.is.num(El.key)?El.key:El.ctrl.id,ref:Xl.ref}):Xl}));return ba?[Qu,ba]:Qu}var sm=1;function Up(ks,{key:gs,keys:$s=gs},Ds){if($s===null){let js=new Set;return ks.map(Vs=>{let no=Ds&&Ds.find(uo=>uo.item===Vs&&uo.phase!=="leave"&&!js.has(uo));return no?(js.add(no),no.key):sm++})}return Rl.is.und($s)?ks:Rl.is.fun($s)?ks.map($s):(0,Rl.toArray)($s)}var dp=cjsExports$3,jp=({container:ks,...gs}={})=>{let[$s,Ds]=Zu(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...gs}),[]);return(0,dp.useIsomorphicLayoutEffect)(()=>{let js=(0,dp.onScroll)(({x:Vs,y:no})=>{Ds.start({scrollX:Vs.current,scrollXProgress:Vs.progress,scrollY:no.current,scrollYProgress:no.progress})},{container:(ks==null?void 0:ks.current)||void 0});return()=>{(0,dp.each)(Object.values($s),Vs=>Vs.stop()),js()}},[]),$s},zp=cjsExports$3,om=({container:ks,...gs})=>{let[$s,Ds]=Zu(()=>({width:0,height:0,...gs}),[]);return(0,zp.useIsomorphicLayoutEffect)(()=>{let js=(0,zp.onResize)(({width:Vs,height:no})=>{Ds.start({width:Vs,height:no,immediate:$s.width.get()===0||$s.height.get()===0})},{container:(ks==null?void 0:ks.current)||void 0});return()=>{(0,zp.each)(Object.values($s),Vs=>Vs.stop()),js()}},[]),$s},Hp=reactExports,Sp=cjsExports$3,Vp={any:0,all:1};function am(ks,gs){let[$s,Ds]=(0,Hp.useState)(!1),js=(0,Hp.useRef)(),Vs=Sp.is.fun(ks)&&ks,no=Vs?Vs():{},{to:uo={},from:So={},..._o}=no,Ho=Vs?gs:ks,[Lo,ba]=Zu(()=>({from:So,..._o}),[]);return(0,Sp.useIsomorphicLayoutEffect)(()=>{let Jo=js.current,{root:ro,once:$o,amount:ko="any",...zo}=Ho??{};if(!Jo||$o&&$s||typeof IntersectionObserver>"u")return;let na=new WeakMap,Qo=()=>(uo&&ba.start(uo),Ds(!0),$o?void 0:()=>{So&&ba.start(So),Ds(!1)}),Go=Tu=>{Tu.forEach(zl=>{let hu=na.get(zl.target);if(zl.isIntersecting!==!!hu)if(zl.isIntersecting){let Kl=Qo();Sp.is.fun(Kl)?na.set(zl.target,Kl):ga.unobserve(zl.target)}else hu&&(hu(),na.delete(zl.target))})},ga=new IntersectionObserver(Go,{root:ro&&ro.current||void 0,threshold:typeof ko=="number"||Array.isArray(ko)?ko:Vp[ko],...zo});return ga.observe(Jo),()=>ga.unobserve(Jo)},[Ho]),Vs?[js,Lo]:[js,$s]}function Gp({children:ks,...gs}){return ks(Zu(gs))}var Wp=cjsExports$3;function Tm({items:ks,children:gs,...$s}){let Ds=Yu(ks.length,$s);return ks.map((js,Vs)=>{let no=gs(js,Vs);return Wp.is.fun(no)?no(Ds[Vs]):no})}function fp({items:ks,children:gs,...$s}){return Bp(ks,$s)(gs)}var hp=cjsExports$3,Fl=cjsExports$3,Nu=cjsExports$2,ep=class extends Co{constructor(ks,gs){super(),this.source=ks,this.idle=!0,this._active=new Set,this.calc=(0,Fl.createInterpolator)(...gs);let $s=this._get(),Ds=(0,Nu.getAnimatedType)($s);(0,Nu.setAnimated)(this,Ds.create($s))}advance(ks){let gs=this._get(),$s=this.get();(0,Fl.isEqual)(gs,$s)||((0,Nu.getAnimated)(this).setValue(gs),this._onChange(gs,this.idle)),!this.idle&&tp(this._active)&&$p(this)}_get(){let ks=Fl.is.arr(this.source)?this.source.map(Fl.getFluidValue):(0,Fl.toArray)((0,Fl.getFluidValue)(this.source));return this.calc(...ks)}_start(){this.idle&&!tp(this._active)&&(this.idle=!1,(0,Fl.each)((0,Nu.getPayload)(this),ks=>{ks.done=!1}),Fl.Globals.skipAnimation?(Fl.raf.batchedUpdates(()=>this.advance()),$p(this)):Fl.frameLoop.start(this))}_attach(){let ks=1;(0,Fl.each)((0,Fl.toArray)(this.source),gs=>{(0,Fl.hasFluidValue)(gs)&&(0,Fl.addFluidObserver)(gs,this),Do(gs)&&(gs.idle||this._active.add(gs),ks=Math.max(ks,gs.priority+1))}),this.priority=ks,this._start()}_detach(){(0,Fl.each)((0,Fl.toArray)(this.source),ks=>{(0,Fl.hasFluidValue)(ks)&&(0,Fl.removeFluidObserver)(ks,this)}),this._active.clear(),$p(this)}eventObserved(ks){ks.type=="change"?ks.idle?this.advance():(this._active.add(ks.parent),this._start()):ks.type=="idle"?this._active.delete(ks.parent):ks.type=="priority"&&(this.priority=(0,Fl.toArray)(this.source).reduce((gs,$s)=>Math.max(gs,(Do($s)?$s.priority:0)+1),0))}};function _p(ks){return ks.idle!==!1}function tp(ks){return!ks.size||Array.from(ks).every(_p)}function $p(ks){ks.idle||(ks.idle=!0,(0,Fl.each)((0,Nu.getPayload)(ks),gs=>{gs.done=!0}),(0,Fl.callFluidObservers)(ks,{type:"idle",parent:ks}))}var qp=(ks,...gs)=>new ep(ks,gs),Cp=(ks,...gs)=>((0,hp.deprecateInterpolate)(),new ep(ks,gs)),Fu=cjsExports$3;Fu.Globals.assign({createStringInterpolator:Fu.createStringInterpolator,to:(ks,gs)=>new ep(ks,gs)});var Ru=Fu.frameLoop.advance,Xu=cjsExports$3;es(qr,requireCjs(),Nr.exports)})(reactSpring_core_production_min);var reactSpring_core_production_minExports=reactSpring_core_production_min.exports;cjs$4.exports=reactSpring_core_production_minExports;var cjsExports$1=cjs$4.exports;(function(Nr){var _r=Object.defineProperty,Ur=Object.getOwnPropertyDescriptor,jr=Object.getOwnPropertyNames,Gr=Object.prototype.hasOwnProperty,Wr=(Ss,As)=>{for(var Us in As)_r(Ss,Us,{get:As[Us],enumerable:!0})},Zr=(Ss,As,Us,Ks)=>{if(As&&typeof As=="object"||typeof As=="function")for(let Ws of jr(As))!Gr.call(Ss,Ws)&&Ws!==Us&&_r(Ss,Ws,{get:()=>As[Ws],enumerable:!(Ks=Ur(As,Ws))||Ks.enumerable});return Ss},Yr=(Ss,As,Us)=>(Zr(Ss,As,"default"),Us&&Zr(Us,As,"default")),ts=Ss=>Zr(_r({},"__esModule",{value:!0}),Ss),es={};Wr(es,{a:()=>Cs,animated:()=>Cs}),Nr.exports=ts(es);var ns=cjsExports$1,Xr=reactDomExports,qr=cjsExports$3,_i=cjsExports$2,rs=/^--/;function is(Ss,As){return As==null||typeof As=="boolean"||As===""?"":typeof As=="number"&&As!==0&&!rs.test(Ss)&&!(ls.hasOwnProperty(Ss)&&ls[Ss])?As+"px":(""+As).trim()}var ss={};function os(Ss,As){if(!Ss.nodeType||!Ss.setAttribute)return!1;let Us=Ss.nodeName==="filter"||Ss.parentNode&&Ss.parentNode.nodeName==="filter",{style:Ks,children:Ws,scrollTop:Js,scrollLeft:ho,viewBox:so,...io}=As,vo=Object.values(io),co=Object.keys(io).map(go=>Us||Ss.hasAttribute(go)?go:ss[go]||(ss[go]=go.replace(/([A-Z])/g,Eo=>"-"+Eo.toLowerCase())));Ws!==void 0&&(Ss.textContent=Ws);for(let go in Ks)if(Ks.hasOwnProperty(go)){let Eo=is(go,Ks[go]);rs.test(go)?Ss.style.setProperty(go,Eo):Ss.style[go]=Eo}co.forEach((go,Eo)=>{Ss.setAttribute(go,vo[Eo])}),Js!==void 0&&(Ss.scrollTop=Js),ho!==void 0&&(Ss.scrollLeft=ho),so!==void 0&&Ss.setAttribute("viewBox",so)}var ls={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cs=(Ss,As)=>Ss+As.charAt(0).toUpperCase()+As.substring(1),ds=["Webkit","Ms","Moz","O"];ls=Object.keys(ls).reduce((Ss,As)=>(ds.forEach(Us=>Ss[cs(Us,As)]=Ss[As]),Ss),ls);var fs=cjsExports$2,ms=cjsExports$3,ps=/^(matrix|translate|scale|rotate|skew)/,ys=/^(translate)/,ws=/^(rotate|skew)/,xs=(Ss,As)=>ms.is.num(Ss)&&Ss!==0?Ss+As:Ss,Es=(Ss,As)=>ms.is.arr(Ss)?Ss.every(Us=>Es(Us,As)):ms.is.num(Ss)?Ss===As:parseFloat(Ss)===As,Rs=class extends fs.AnimatedObject{constructor({x:Ss,y:As,z:Us,...Ks}){let Ws=[],Js=[];(Ss||As||Us)&&(Ws.push([Ss||0,As||0,Us||0]),Js.push(ho=>[`translate3d(${ho.map(so=>xs(so,"px")).join(",")})`,Es(ho,0)])),(0,ms.eachProp)(Ks,(ho,so)=>{if(so==="transform")Ws.push([ho||""]),Js.push(io=>[io,io===""]);else if(ps.test(so)){if(delete Ks[so],ms.is.und(ho))return;let io=ys.test(so)?"px":ws.test(so)?"deg":"";Ws.push((0,ms.toArray)(ho)),Js.push(so==="rotate3d"?([vo,co,go,Eo])=>[`rotate3d(${vo},${co},${go},${xs(Eo,io)})`,Es(Eo,0)]:vo=>[`${so}(${vo.map(co=>xs(co,io)).join(",")})`,Es(vo,so.startsWith("scale")?1:0)])}}),Ws.length&&(Ks.transform=new _s(Ws,Js)),super(Ks)}},_s=class extends ms.FluidValue{constructor(Ss,As){super(),this.inputs=Ss,this.transforms=As,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let Ss="",As=!0;return(0,ms.each)(this.inputs,(Us,Ks)=>{let Ws=(0,ms.getFluidValue)(Us[0]),[Js,ho]=this.transforms[Ks](ms.is.arr(Ws)?Ws:Us.map(ms.getFluidValue));Ss+=" "+Js,As=As&&ho}),As?"none":Ss}observerAdded(Ss){Ss==1&&(0,ms.each)(this.inputs,As=>(0,ms.each)(As,Us=>(0,ms.hasFluidValue)(Us)&&(0,ms.addFluidObserver)(Us,this)))}observerRemoved(Ss){Ss==0&&(0,ms.each)(this.inputs,As=>(0,ms.each)(As,Us=>(0,ms.hasFluidValue)(Us)&&(0,ms.removeFluidObserver)(Us,this)))}eventObserved(Ss){Ss.type=="change"&&(this._value=null),(0,ms.callFluidObservers)(this,Ss)}},Bs=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Yr(es,cjsExports$1,Nr.exports),ns.Globals.assign({batchedUpdates:Xr.unstable_batchedUpdates,createStringInterpolator:qr.createStringInterpolator,colors:qr.colors});var vs=(0,_i.createHost)(Bs,{applyAnimatedValues:os,createAnimatedStyle:Ss=>new Rs(Ss),getComponentProps:({scrollTop:Ss,scrollLeft:As,...Us})=>Us}),Cs=vs.animated})(reactSpring_web_production_min);var reactSpring_web_production_minExports=reactSpring_web_production_min.exports;cjs$5.exports=reactSpring_web_production_minExports;var cjsExports=cjs$5.exports;const{useState,useEffect}=reactExports;function useWindowSize$1(){const[Nr,_r]=useState({width:void 0,height:void 0});return useEffect(()=>{function Ur(){_r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",Ur),Ur(),()=>window.removeEventListener("resize",Ur)},[]),Nr}var useWindowSize_1=useWindowSize$1;const React=reactExports,{useSpring,animated}=cjsExports,useWindowSize=useWindowSize_1,settings={maxTilt:25,rotationPower:50,swipeThreshold:.5},physics={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},pythagoras=(Nr,_r)=>Math.sqrt(Math.pow(Nr,2)+Math.pow(_r,2)),normalize$1=Nr=>{const _r=Math.sqrt(Math.pow(Nr.x,2)+Math.pow(Nr.y,2));return{x:Nr.x/_r,y:Nr.y/_r}},animateOut=async(Nr,_r,Ur,jr)=>{const Gr=pythagoras(Ur,jr),Wr=pythagoras(Nr.x,Nr.y),Zr=Gr*Nr.x,Yr=Gr*Nr.y,ts=Nr.x*45,es=Gr/Wr;return _r.start({xyrot:[Zr,Yr,ts],config:{duration:es}}),await new Promise(ns=>setTimeout(()=>{ns()},es))},animateBack=Nr=>new Promise(_r=>{Nr.start({xyrot:[0,0,0],config:physics.animateBack,onRest:_r})}),getSwipeDirection=Nr=>{if(Math.abs(Nr.x)>Math.abs(Nr.y)){if(Nr.x>settings.swipeThreshold)return"right";if(Nr.x<-settings.swipeThreshold)return"left"}else{if(Nr.y>settings.swipeThreshold)return"down";if(Nr.y<-settings.swipeThreshold)return"up"}return"none"},AnimatedDiv=animated.div,TinderCard=React.forwardRef(({flickOnSwipe:Nr=!0,children:_r,onSwipe:Ur,onCardLeftScreen:jr,className:Gr,preventSwipe:Wr=[],swipeRequirementType:Zr="velocity",swipeThreshold:Yr=settings.swipeThreshold,onSwipeRequirementFulfilled:ts,onSwipeRequirementUnfulfilled:es},ns)=>{const{width:Xr,height:qr}=useWindowSize(),[{xyrot:_i},rs]=useSpring(()=>({xyrot:[0,0,0],config:physics.touchResponsive}));settings.swipeThreshold=Yr,React.useImperativeHandle(ns,()=>({async swipe(cs="right"){Ur&&Ur(cs);const ds=1.3,fs=(Math.random()-.5)/2;cs==="right"?await animateOut({x:ds,y:fs},rs,Xr,qr):cs==="left"?await animateOut({x:-ds,y:fs},rs,Xr,qr):cs==="up"?await animateOut({x:fs,y:-ds},rs,Xr,qr):cs==="down"&&await animateOut({x:fs,y:ds},rs,Xr,qr),jr&&jr(cs)},async restoreCard(){await animateBack(rs)}}));const is=React.useCallback(async(cs,ds)=>{const fs=getSwipeDirection({x:Zr==="velocity"?ds.vx:ds.dx,y:Zr==="velocity"?ds.vy:ds.dy});if(fs!=="none"&&Nr&&!Wr.includes(fs)){Ur&&Ur(fs),await animateOut(Zr==="velocity"?{x:ds.vx,y:ds.vy}:normalize$1({x:ds.dx,y:ds.dy}),cs,Xr,qr),jr&&jr(fs);return}animateBack(cs)},[Zr,Nr,Wr,Ur,jr,Xr,qr]);let ss="none";const os=(cs,ds,fs,ms)=>{let ps=ms?cs.touches[0].clientX-ds.x:cs.clientX-ds.x,ys=ms?cs.touches[0].clientY-ds.y:cs.clientY-ds.y;ds.x===0&&ds.y===0&&(ps=0,ys=0);const ws=-(ps-fs.dx)/(fs.timeStamp-Date.now()),xs=-(ys-fs.dy)/(fs.timeStamp-Date.now());return{dx:ps,dy:ys,vx:ws,vy:xs,timeStamp:Date.now()}};React.useLayoutEffect(()=>{let cs={x:0,y:0},ds={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},fs=!1;ls.current.addEventListener("touchstart",ps=>{!ps.srcElement.className.includes("pressable")&&ps.cancelable&&ps.preventDefault(),ds=os(ps,cs,ds,!0),cs={x:ps.touches[0].clientX,y:ps.touches[0].clientY}}),ls.current.addEventListener("mousedown",ps=>{fs=!0,ds=os(ps,cs,ds,!1),cs={x:ps.clientX,y:ps.clientY}});const ms=ps=>{if(ts||es){const ws=getSwipeDirection({x:Zr==="velocity"?ps.vx:ps.dx,y:Zr==="velocity"?ps.vy:ps.dy});ws!==ss&&(ss=ws,ss==="none"?es&&es():ts&&ts(ws))}let ys=ps.vx*15;isNaN(ys)&&(ys=0),ys=Math.max(Math.min(ys,settings.maxTilt),-settings.maxTilt),rs.start({xyrot:[ps.dx,ps.dy,ys],config:physics.touchResponsive})};window.addEventListener("mousemove",ps=>{if(!fs)return;const ys=os(ps,cs,ds,!1);ds=ys,ms(ys)}),window.addEventListener("mouseup",ps=>{fs&&(fs=!1,is(rs,ds),cs={x:0,y:0},ds={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})}),ls.current.addEventListener("touchmove",ps=>{const ys=os(ps,cs,ds,!0);ds=ys,ms(ys)}),ls.current.addEventListener("touchend",ps=>{is(rs,ds),cs={x:0,y:0},ds={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}})});const ls=React.useRef();return React.createElement(AnimatedDiv,{ref:ls,className:Gr,style:{transform:_i.to((cs,ds,fs)=>`translate3d(${cs}px, ${ds}px, 0px) rotate(${fs}deg)`)},children:_r})});var reactTinderCard=TinderCard;const TinderCard$1=getDefaultExportFromCjs$1(reactTinderCard);var __defProp$1=Object.defineProperty,__defNormalProp=(Nr,_r,Ur)=>_r in Nr?__defProp$1(Nr,_r,{enumerable:!0,configurable:!0,writable:!0,value:Ur}):Nr[_r]=Ur,__publicField=(Nr,_r,Ur)=>(__defNormalProp(Nr,typeof _r!="symbol"?_r+"":_r,Ur),Ur);const EMPTY=[];Object.freeze(EMPTY);const emptyAnnotationPage={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:EMPTY,motivation:null,label:null,thumbnail:EMPTY,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,provider:EMPTY,items:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,rendering:EMPTY,service:EMPTY},emptyCanvas={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,duration:0,height:0,width:0},emptyCollection={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,services:EMPTY},emptyManifest={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:EMPTY,behavior:EMPTY,homepage:EMPTY,items:EMPTY,label:null,logo:EMPTY,metadata:EMPTY,motivation:null,navDate:null,provider:EMPTY,partOf:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:EMPTY,requiredStatement:null,rights:null,seeAlso:EMPTY,service:EMPTY,services:EMPTY,start:null,structures:EMPTY,summary:null,thumbnail:EMPTY,viewingDirection:"left-to-right"},emptyRange={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,start:null,supplementary:null,viewingDirection:"left-to-right"},emptyAgent={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:EMPTY,seeAlso:EMPTY,homepage:EMPTY};function ensureArray$1(Nr){return Array.isArray(Nr)?Nr:[Nr]}const types$1=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function identifyResource$1(Nr){if(typeof Nr>"u"||Nr===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(Nr))throw new Error("Array is not a valid entity");if(typeof Nr!="object")throw new Error(`${typeof Nr} is not a valid entity`);if(typeof Nr.type=="string"){const _r=types$1.indexOf(Nr.type);if(_r!==-1)return types$1[_r]}if(Nr.profile)return"Service";throw new Error("Resource type is not known")}class Traverse$1{constructor(_r,Ur={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],..._r},this.options={allowUndefinedReturn:!1,...Ur}}static all(_r){return new Traverse$1({collection:[_r],manifest:[_r],canvas:[_r],annotationCollection:[_r],annotationPage:[_r],annotation:[_r],contentResource:[_r],choice:[_r],range:[_r],service:[_r]})}traverseDescriptive(_r){return _r.thumbnail&&(_r.thumbnail=_r.thumbnail.map(Ur=>this.traverseType(Ur,this.traversals.contentResource))),_r.provider&&(_r.provider=_r.provider.map(Ur=>this.traverseAgent(Ur))),_r}traverseLinking(_r){return _r.seeAlso&&(_r.seeAlso=_r.seeAlso.map(Ur=>this.traverseType(Ur,this.traversals.contentResource))),_r.service&&(_r.service=ensureArray$1(_r.service).map(Ur=>this.traverseType(Ur,this.traversals.service))),_r.services&&(_r.services=_r.services.map(Ur=>this.traverseType(Ur,this.traversals.service))),_r.logo&&(_r.logo=_r.logo.map(Ur=>this.traverseType(Ur,this.traversals.contentResource))),_r.homepage&&(_r.homepage=_r.homepage.map(Ur=>this.traverseType(Ur,this.traversals.contentResource))),_r.partOf&&(_r.partOf=_r.partOf.map(Ur=>typeof Ur=="string"||!Ur.type?this.traverseType(Ur,this.traversals.contentResource):Ur.type==="Canvas"?this.traverseType(Ur,this.traversals.canvas):Ur.type==="AnnotationCollection"?this.traverseType(Ur,this.traversals.annotationCollection):Ur.type==="Collection"?this.traverseType(Ur,this.traversals.collection):this.traverseType(Ur,this.traversals.contentResource))),_r.start&&(_r.start=_r.start?this.traverseType(_r.start,this.traversals.canvas):null),_r.rendering&&(_r.rendering=_r.rendering.map(Ur=>this.traverseType(Ur,this.traversals.contentResource))),_r.supplementary&&(_r.supplementary=_r.supplementary.map(Ur=>this.traverseType(Ur,this.traversals.contentResource))),_r}traverseCollectionItems(_r){return _r.items&&_r.items.map(Ur=>Ur.type==="Collection"?this.traverseCollection(Ur):this.traverseManifest(Ur)),_r}traverseCollection(_r){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(_r))))),this.traversals.collection)}traverseManifestItems(_r){return _r.items&&(_r.items=_r.items.map(Ur=>this.traverseCanvas(Ur))),_r}traverseManifestStructures(_r){return _r.structures&&(_r.structures=_r.structures.map(Ur=>this.traverseRange(Ur))),_r}traverseManifest(_r){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(_r)))))),this.traversals.manifest)}traverseCanvasItems(_r){return _r.items=(_r.items||[]).map(Ur=>this.traverseAnnotationPage(Ur)),_r}traverseInlineAnnotationPages(_r){return typeof _r=="string"||!_r||_r.annotations&&(_r.annotations=_r.annotations.map(Ur=>this.traverseAnnotationPage(Ur))),_r}traverseCanvas(_r){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(_r))))),this.traversals.canvas)}traverseAnnotationPageItems(_r){return _r.items&&(_r.items=_r.items.map(Ur=>this.traverseAnnotation(Ur))),_r}traverseAnnotationPage(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(_r))),this.traversals.annotationPage)}traverseAnnotationBody(_r){return Array.isArray(_r.body)?_r.body=_r.body.map(Ur=>this.traverseContentResource(Ur)):_r.body&&(_r.body=this.traverseContentResource(_r.body)),_r}traversePosterCanvas(_r){return _r.posterCanvas&&(_r.posterCanvas=this.traverseCanvas(_r.posterCanvas)),_r.placeholderCanvas&&(_r.placeholderCanvas=this.traverseCanvas(_r.placeholderCanvas)),_r.accompanyingCanvas&&(_r.accompanyingCanvas=this.traverseCanvas(_r.accompanyingCanvas)),_r}traverseAnnotation(_r){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(_r)),this.traversals.annotation)}traverseContentResourceLinking(_r){return typeof _r=="string"||!_r||_r&&_r.service&&(_r.service=ensureArray$1(_r.service||[]).map(Ur=>this.traverseType(Ur,this.traversals.service))),_r}traverseContentResource(_r){return _r.type==="Choice"&&(_r.items=_r.items.map(Ur=>this.traverseContentResource(Ur))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(_r)),this.traversals.contentResource)}traverseRangeRanges(_r){return _r.items&&(_r.items=_r.items.map(Ur=>typeof Ur=="string"?this.traverseCanvas({id:Ur,type:"Canvas"}):Ur.type==="Manifest"?this.traverseManifest(Ur):this.traverseRange(Ur))),_r}traverseRange(_r){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(_r)))),this.traversals.range)}traverseAgent(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(_r)),this.traversals.agent)}traverseType(_r,Ur){return Ur.reduce((jr,Gr)=>{const Wr=Gr(jr);return typeof Wr>"u"&&!this.options.allowUndefinedReturn?jr:Wr},_r)}traverseService(_r){return this.traverseType(_r,this.traversals.service)}traverseUnknown(_r){const Ur=identifyResource$1(_r);switch(Ur){case"Collection":return this.traverseCollection(_r);case"Manifest":return this.traverseManifest(_r);case"Canvas":return this.traverseCanvas(_r);case"AnnotationPage":return this.traverseAnnotationPage(_r);case"Annotation":return this.traverseAnnotation(_r);case"ContentResource":return this.traverseContentResource(_r);case"Range":return this.traverseRange(_r);case"Service":return this.traverseService(_r);case"Agent":return this.traverseAgent(_r);default:throw new Error(`Unknown or unsupported resource type of ${Ur}`)}}}const types=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function identifyResource(Nr){if(typeof Nr>"u"||Nr===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(Nr))throw new Error("Array is not a valid entity");if(typeof Nr!="object")throw new Error(`${typeof Nr} is not a valid entity`);if(typeof Nr["@type"]=="string"){const _r=types.indexOf(Nr["@type"]);if(_r!==-1)return types[_r]}if(Nr.profile)return"Service";if(Nr.format||Nr["@type"])return"ContentResource";throw new Error("Resource type is not known")}class Traverse{constructor(_r,Ur={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],..._r},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...Ur}}static all(_r){return new Traverse({collection:[_r],manifest:[_r],canvas:[_r],annotationList:[_r],sequence:[_r],annotation:[_r],contentResource:[_r],choice:[_r],range:[_r],service:[_r],layer:[_r]})}traverseCollection(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(_r))),this.traversals.collection)}traverseCollectionItems(_r){if(this.options.mergeMemberProperties){const Ur=[...(_r.manifests||[]).map(jr=>typeof jr=="string"?{"@id":jr,"@type":"sc:Manifest"}:jr),...(_r.collections||[]).map(jr=>typeof jr=="string"?{"@id":jr,"@type":"sc:Collection"}:jr),..._r.members||[]];delete _r.collections,delete _r.manifests,_r.members=Ur}return _r.manifests&&(_r.manifests=_r.manifests.map(Ur=>this.traverseManifest(typeof Ur=="string"?{"@id":Ur,"@type":"sc:Manifest"}:Ur))),_r.collections&&(_r.collections=_r.collections.map(Ur=>this.traverseCollection(typeof Ur=="string"?{"@id":Ur,"@type":"sc:Collection"}:Ur))),_r.members&&(_r.members=_r.members.map(Ur=>typeof Ur=="string"?Ur:this.traverseUnknown(Ur))),_r}traverseManifest(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(_r))),this.traversals.manifest)}traverseManifestItems(_r){return _r.sequences&&(_r.sequences=_r.sequences.map(Ur=>this.traverseSequence(Ur))),_r.structures&&(_r.structures=_r.structures.map(Ur=>this.traverseRange(Ur))),_r}traverseSequence(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(_r))),this.traversals.sequence)}traverseSequenceItems(_r){return _r.canvases&&(_r.canvases=_r.canvases.map(Ur=>this.traverseCanvas(Ur))),_r}traverseCanvas(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(_r))),this.traversals.canvas)}traverseCanvasItems(_r){return _r.images&&(_r.images=_r.images.map(Ur=>this.traverseAnnotation(Ur))),_r.otherContent&&(_r.otherContent=_r.otherContent.map(Ur=>this.traverseAnnotationList(Ur))),_r}traverseRange(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(_r))),this.traversals.range)}traverseRangeItems(_r){if(this.options.mergeMemberProperties){const Ur=[...(_r.ranges||[]).map(jr=>typeof jr=="string"?{"@id":jr,"@type":"sc:Range"}:jr),...(_r.canvases||[]).map(jr=>typeof jr=="string"?{"@id":jr,"@type":"sc:Canvas"}:jr),..._r.members||[]];delete _r.ranges,delete _r.canvases,_r.members=Ur.length?Ur.map(jr=>this.traverseUnknown(jr)):void 0}return _r}traverseAnnotationList(_r){const Ur=typeof _r=="string"?{"@id":_r,"@type":"sc:AnnotationList"}:_r;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(Ur)),this.traversals.annotationList)}traverseAnnotationListItems(_r){return _r.resources&&(_r.resources=_r.resources.map(Ur=>this.traverseAnnotation(Ur))),_r}traverseAnnotation(_r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(_r))),this.traversals.annotation)}traverseAnnotationItems(_r){return _r.resource&&(Array.isArray(_r.resource)?_r.resource=_r.resource.map(Ur=>this.traverseContentResource(Ur)):_r.resource=this.traverseContentResource(_r.resource)),_r.on,_r}traverseLayer(_r){return this.traverseType(this.traverseLinking(this.traverseLayerItems(_r)),this.traversals.layer)}traverseLayerItems(_r){return _r.otherContent&&(_r.otherContent=_r.otherContent.map(Ur=>this.traverseAnnotationList(Ur))),_r}traverseChoice(_r){return this.traverseType(this.traverseChoiceItems(_r),this.traversals.choice)}traverseChoiceItems(_r){return _r.default&&_r.default!=="rdf:nil"&&(_r.default=this.traverseContentResource(_r.default)),_r.item&&_r.item!=="rdf:nil"&&(_r.item=_r.item.map(Ur=>this.traverseContentResource(Ur))),_r}traverseService(_r){return this.traverseType(this.traverseLinking(_r),this.traversals.service)}traverseContentResource(_r){return _r["@type"]==="oa:Choice"?this.traverseChoice(_r):this.traverseType(this.traverseDescriptive(this.traverseLinking(_r)),this.traversals.contentResource)}traverseUnknown(_r){if(!_r["@type"]||typeof _r=="string")return _r;switch(identifyResource(_r)){case"sc:Collection":return this.traverseCollection(_r);case"sc:Manifest":return this.traverseManifest(_r);case"sc:Canvas":return this.traverseCanvas(_r);case"sc:Sequence":return this.traverseSequence(_r);case"sc:Range":return this.traverseRange(_r);case"oa:Annotation":return this.traverseAnnotation(_r);case"sc:AnnotationList":return this.traverseAnnotationList(_r);case"sc:Layer":return this.traverseLayer(_r);case"Service":return this.traverseService(_r);case"oa:Choice":return this.traverseChoice(_r);case"ContentResource":return this.traverseContentResource(_r)}return _r.profile?this.traverseService(_r):_r}traverseImageResource(_r){const Ur=Array.isArray(_r),jr=Array.isArray(_r)?_r:[_r],Gr=[];for(const Wr of jr)typeof Wr=="string"?Gr.push(this.traverseContentResource({"@id":Wr,"@type":"dctypes:Image"})):Gr.push(this.traverseContentResource(Wr));return!Ur&&!this.options.convertPropsToArray?Gr[0]:Gr}traverseDescriptive(_r){return _r.thumbnail&&(_r.thumbnail=this.traverseImageResource(_r.thumbnail)),_r.logo&&(_r.logo=this.traverseImageResource(_r.logo)),_r}traverseOneOrMoreServices(_r){const Ur=Array.isArray(_r),jr=Array.isArray(_r)?_r:[_r],Gr=[];for(const Wr of jr)Gr.push(this.traverseService(Wr));return!Ur&&!this.options.convertPropsToArray?Gr[0]:Gr}traverseLinking(_r){return _r.related&&(_r.related=this.traverseOneOrManyType(_r.related,this.traversals.contentResource)),_r.rendering&&(_r.rendering=this.traverseOneOrManyType(_r.rendering,this.traversals.contentResource)),_r.service&&(_r.service=this.traverseOneOrMoreServices(_r.service)),_r.seeAlso&&(_r.seeAlso=this.traverseOneOrManyType(_r.seeAlso,this.traversals.contentResource)),_r.within&&(typeof _r.within=="string"||(_r.within=this.traverseOneOrManyType(_r.within,this.traversals.contentResource))),_r.startCanvas&&(typeof _r.startCanvas=="string"?_r.startCanvas=this.traverseType({"@id":_r.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):_r.startCanvas&&this.traverseType(_r.startCanvas,this.traversals.canvas)),_r.contentLayer&&(typeof _r.contentLayer=="string"?_r.contentLayer=this.traverseLayer({"@id":_r.contentLayer,"@type":"sc:Layer"}):_r.contentLayer=this.traverseLayer(_r.contentLayer)),_r}traverseOneOrManyType(_r,Ur){if(!Array.isArray(_r))if(this.options.convertPropsToArray)_r=[_r];else return this.traverseType(_r,Ur);return _r.map(jr=>this.traverseType(jr,Ur))}traverseType(_r,Ur){return Ur.reduce((jr,Gr)=>{const Wr=Gr(jr);return typeof Wr>"u"&&!this.options.allowUndefinedReturn?jr:Wr},_r)}}const STANFORD_IIIF_IMAGE_COMPLIANCE_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",STANFORD_IIIF_IMAGE_COMPLIANCE_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",STANFORD_IIIF_IMAGE_COMPLIANCE_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",STANFORD_IIIF_IMAGE_CONFORMANCE_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",STANFORD_IIIF_IMAGE_CONFORMANCE_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",STANFORD_IIIF_IMAGE_CONFORMANCE_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",STANFORD_IIIF_1_IMAGE_COMPLIANCE_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",STANFORD_IIIF_1_IMAGE_COMPLIANCE_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",STANFORD_IIIF_1_IMAGE_COMPLIANCE_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",STANFORD_IIIF_1_IMAGE_CONFORMANCE_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",STANFORD_IIIF_1_IMAGE_CONFORMANCE_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",STANFORD_IIIF_1_IMAGE_CONFORMANCE_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",IIIF_1_IMAGE_LEVEL_0="http://iiif.io/api/image/1/level0.json",IIIF_1_IMAGE_LEVEL_0_PROFILE="http://iiif.io/api/image/1/profiles/level0.json",IIIF_1_IMAGE_LEVEL_1="http://iiif.io/api/image/1/level1.json",IIIF_1_IMAGE_LEVEL_1_PROFILE="http://iiif.io/api/image/1/profiles/level1.json",IIIF_1_IMAGE_LEVEL_2="http://iiif.io/api/image/1/level2.json",IIIF_1_IMAGE_LEVEL_2_PROFILE="http://iiif.io/api/image/1/profiles/level2.json",IIIF_2_IMAGE_LEVEL_0="http://iiif.io/api/image/2/level0.json",IIIF_2_IMAGE_LEVEL_0_PROFILE="http://iiif.io/api/image/2/profiles/level0.json",IIIF_2_IMAGE_LEVEL_1="http://iiif.io/api/image/2/level1.json",IIIF_2_IMAGE_LEVEL_1_PROFILE="http://iiif.io/api/image/2/profiles/level1.json",IIIF_2_IMAGE_LEVEL_2="http://iiif.io/api/image/2/level2.json",IIIF_2_IMAGE_LEVEL_2_PROFILE="http://iiif.io/api/image/2/profiles/level2.json",IIIF_3_IMAGE_LEVEL_0="level0",IIIF_3_IMAGE_LEVEL_1="level1",IIIF_3_IMAGE_LEVEL_2="level2",IIIF_2_IMAGE_LEVEL_0_NO_JSON="http://iiif.io/api/image/2/level0",IIIF_2_IMAGE_LEVEL_1_NO_JSON="http://iiif.io/api/image/2/level1",IIIF_2_IMAGE_LEVEL_2_NO_JSON="http://iiif.io/api/image/2/level2",level1Support=[IIIF_2_IMAGE_LEVEL_1_NO_JSON,IIIF_2_IMAGE_LEVEL_2_NO_JSON,STANFORD_IIIF_IMAGE_COMPLIANCE_1,STANFORD_IIIF_IMAGE_COMPLIANCE_2,STANFORD_IIIF_IMAGE_CONFORMANCE_1,STANFORD_IIIF_IMAGE_CONFORMANCE_2,STANFORD_IIIF_1_IMAGE_COMPLIANCE_1,STANFORD_IIIF_1_IMAGE_COMPLIANCE_2,STANFORD_IIIF_1_IMAGE_CONFORMANCE_1,STANFORD_IIIF_1_IMAGE_CONFORMANCE_2,IIIF_1_IMAGE_LEVEL_1,IIIF_1_IMAGE_LEVEL_1_PROFILE,IIIF_1_IMAGE_LEVEL_2,IIIF_1_IMAGE_LEVEL_2_PROFILE,IIIF_2_IMAGE_LEVEL_1,IIIF_2_IMAGE_LEVEL_1_PROFILE,IIIF_2_IMAGE_LEVEL_2,IIIF_2_IMAGE_LEVEL_2_PROFILE,IIIF_3_IMAGE_LEVEL_1,IIIF_3_IMAGE_LEVEL_2],imageServiceProfiles=[IIIF_2_IMAGE_LEVEL_0_NO_JSON,IIIF_2_IMAGE_LEVEL_1_NO_JSON,IIIF_2_IMAGE_LEVEL_2_NO_JSON,STANFORD_IIIF_IMAGE_COMPLIANCE_0,STANFORD_IIIF_IMAGE_COMPLIANCE_1,STANFORD_IIIF_IMAGE_COMPLIANCE_2,STANFORD_IIIF_IMAGE_CONFORMANCE_0,STANFORD_IIIF_IMAGE_CONFORMANCE_1,STANFORD_IIIF_IMAGE_CONFORMANCE_2,STANFORD_IIIF_1_IMAGE_COMPLIANCE_0,STANFORD_IIIF_1_IMAGE_COMPLIANCE_1,STANFORD_IIIF_1_IMAGE_COMPLIANCE_2,STANFORD_IIIF_1_IMAGE_CONFORMANCE_0,STANFORD_IIIF_1_IMAGE_CONFORMANCE_1,STANFORD_IIIF_1_IMAGE_CONFORMANCE_2,IIIF_1_IMAGE_LEVEL_0,IIIF_1_IMAGE_LEVEL_0_PROFILE,IIIF_1_IMAGE_LEVEL_1,IIIF_1_IMAGE_LEVEL_1_PROFILE,IIIF_1_IMAGE_LEVEL_2,IIIF_1_IMAGE_LEVEL_2_PROFILE,IIIF_2_IMAGE_LEVEL_0,IIIF_2_IMAGE_LEVEL_0_PROFILE,IIIF_2_IMAGE_LEVEL_1,IIIF_2_IMAGE_LEVEL_1_PROFILE,IIIF_2_IMAGE_LEVEL_2,IIIF_2_IMAGE_LEVEL_2_PROFILE,IIIF_3_IMAGE_LEVEL_0,IIIF_3_IMAGE_LEVEL_1,IIIF_3_IMAGE_LEVEL_2],configuration={attributionLabel:"Attribution",lang:"none",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(Nr,_r="none"){if(!Nr)return{};const Ur=Array.isArray(Nr)?Nr:[Nr],jr={};for(const Gr of Ur){if(typeof Gr=="string"){jr[_r]=jr[_r]?jr[_r]:[],jr[_r].push(Gr||"");continue}if(!Gr["@language"]){jr[_r]=jr[_r]?jr[_r]:[],jr[_r].push(Gr["@value"]||"");continue}const Wr=Gr["@language"];jr[Wr]=jr[Wr]?jr[Wr]:[],jr[Wr].push(Gr["@value"]||"")}return jr}function getProfile(Nr){if(Array.isArray(Nr))return getProfile(Nr.find(_r=>typeof _r=="string"));if(imageServiceProfiles.indexOf(Nr)!==-1)return"level2";if(level1Support.indexOf(Nr)!==-1)return"level1";if(typeof Nr=="string")return Nr}function getTypeFromContext(Nr){const _r=Array.isArray(Nr)?Nr:[Nr];for(const Ur of _r)switch(Ur){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function getTypeFromProfile(Nr){switch(Nr){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function removePrefix(Nr){for(const _r of["sc","oa","dcterms","dctypes","iiif"])if(Nr.startsWith(`${_r}:`))return Nr.slice(_r.length+1);return Nr}const knownTypes=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(Nr){const _r=Nr["@id"]||Nr.id;let Ur=Nr["@type"]||Nr.type;const jr=Nr.profile||void 0,Gr=Nr["@context"]||void 0;if(jr){const Wr=getTypeFromProfile(jr);if(Wr)return Wr}if(Gr){const Wr=getTypeFromContext(Gr);if(Wr)return Wr}if(Ur){if(Array.isArray(Ur)){if(Ur.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(Ur.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";Ur=Ur[0]}for(const Wr of["sc","oa","dcterms","dctypes","iiif"])if(Ur.startsWith(`${Wr}:`)){Ur=Ur.slice(Wr.length+1);break}switch(Ur){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(Ur&&knownTypes.indexOf(Ur)!==-1)return Ur;if(Nr.format){if(Nr.format.startsWith("image/"))return"Image";if(Nr.format.startsWith("text/")||Nr.format==="application/pdf")return"Text";if(Nr.format.startsWith("application/"))return"Dataset"}return _r&&(_r.endsWith(".jpg")||_r.endsWith(".png")||_r.endsWith(".jpeg"))?"Image":Ur||"unknown"}const licenseRegex=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function extractLicense(Nr){const _r=Nr.match(licenseRegex);return _r?_r[0]:Nr}function fixLicense(Nr,_r="Rights/License",Ur="none"){let jr=null;const Gr=[],Wr=Array.isArray(Nr)?Nr:[Nr];for(const Zr of Wr){const Yr=Zr?extractLicense(Zr):void 0;if(Yr&&(Yr.indexOf("creativecommons.org")!==-1||Yr.indexOf("rightsstatements.org")!==-1)){Yr.startsWith("https://")?jr=`http://${Yr.slice(8)}`:jr=Yr;continue}Yr&&Gr.push({label:{[Ur]:[_r]},value:{[Ur]:[Yr]}})}return[jr,Gr]}const removeContexts=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function fixContext(Nr){if(Nr){const _r=Array.isArray(Nr)?Nr:[Nr],Ur=[];for(const jr of _r)jr==="http://iiif.io/api/presentation/2/context.json"&&Ur.push("http://iiif.io/api/presentation/3/context.json"),removeContexts.indexOf(jr)===-1&&Ur.push(jr);if(_r.length)return Ur.length===1?Ur[0]:Ur}}function convertMetadata(Nr){return Nr?Nr.map(_r=>({label:convertLanguageMapping(_r.label),value:convertLanguageMapping(_r.value)})):[]}function removeUndefinedProperties(Nr){for(const _r in Nr)(typeof Nr[_r]>"u"||Nr[_r]===null)&&delete Nr[_r];return Nr}let mintedIdCounter=0;function mintNewIdFromResource(Nr,_r){const Ur=encodeURI(Nr.id||Nr["@id"]||"").trim();return Ur&&_r?`${Ur}/${_r}`:Ur||(mintedIdCounter++,`http://example.org/${Nr["@type"]}${_r?`/${_r}`:""}/${mintedIdCounter}`)}function technicalProperties$2(Nr){const _r=[...Nr.behavior||[]];Nr.viewingHint&&_r.push(Nr.viewingHint);let Ur;return Array.isArray(Nr.motivation)?Ur=Nr.motivation.map(removePrefix):Nr.motivation&&(Ur=removePrefix(Nr.motivation)),{"@context":Nr["@context"]?fixContext(Nr["@context"]):void 0,id:(Nr["@id"]||mintNewIdFromResource(Nr)).trim(),type:getNewType(Nr),behavior:_r.length?_r:void 0,height:Nr.height?Nr.height:void 0,width:Nr.width?Nr.width:void 0,motivation:Ur,viewingDirection:Nr.viewingDirection,profile:Nr.profile,format:Nr.format?Nr.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(Nr){const[_r,Ur]=fixLicense(Nr.license),jr=[...Nr.metadata?convertMetadata(Nr.metadata):[],...Ur];return{rights:_r,metadata:jr.length?jr:void 0,label:Nr.label?convertLanguageMapping(Nr.label):void 0,requiredStatement:Nr.attribution?{label:convertLanguageMapping(configuration.attributionLabel),value:convertLanguageMapping(Nr.attribution)}:void 0,navDate:Nr.navDate,summary:Nr.description?convertLanguageMapping(Nr.description):void 0,thumbnail:Nr.thumbnail}}function parseWithin(Nr){if(!Nr.within)return;const _r=Array.isArray(Nr.within)?Nr.within:[Nr.within],Ur=[];for(const jr of _r)if(typeof jr=="string"){if(jr)switch(Nr["@type"]){case"sc:Manifest":Ur.push({id:jr,type:"Collection"});break}}else jr["@id"]&&Ur.push({id:jr["@id"],type:getNewType(jr)});return Ur.length?Ur:void 0}function linkingProperties$2(Nr){const _r=Nr.related?Array.isArray(Nr.related)?Nr.related:[Nr.related]:[],Ur=Nr.contentLayer;return{provider:Nr.logo||_r.length?[{id:configuration.providerId,type:"Agent",homepage:_r.length?[_r[0]]:void 0,logo:Nr.logo?Array.isArray(Nr.logo)?Nr.logo:[Nr.logo]:void 0,label:convertLanguageMapping(configuration.providerName)}]:void 0,partOf:parseWithin(Nr),rendering:Nr.rendering,seeAlso:Nr.seeAlso,start:Nr.startCanvas,service:Nr.service?ensureArray$1(Nr.service):void 0,supplementary:Ur?[Ur]:void 0}}function embeddedContentProperties(Nr){return{chars:Nr.chars,format:Nr.format?Nr.format:void 0,language:Nr.language}}function upgradeCollection(Nr){return removeUndefinedProperties({...technicalProperties$2(Nr),...descriptiveProperties$2(Nr),...linkingProperties$2(Nr),items:Nr.members})}function upgradeManifest(Nr){const _r=[],Ur=[];for(const Gr of Nr.sequences||[])Gr.canvases.length&&_r.push(...Gr.canvases),Gr.behavior&&Ur.push(...Gr.behavior);const jr=technicalProperties$2(Nr);return Ur.length&&(jr.behavior?jr.behavior.push(...Ur):jr.behavior=Ur),removeUndefinedProperties({...jr,...descriptiveProperties$2(Nr),...linkingProperties$2(Nr),items:_r,structures:Nr.structures})}function upgradeCanvas(Nr){return removeUndefinedProperties({...technicalProperties$2(Nr),...descriptiveProperties$2(Nr),...linkingProperties$2(Nr),annotations:Nr.otherContent&&Nr.otherContent.length?Nr.otherContent:void 0,items:Nr.images&&Nr.images.length?[{id:mintNewIdFromResource(Nr,"annotation-page"),type:"AnnotationPage",items:Nr.images}]:void 0})}function upgradeAnnotationList(Nr){return removeUndefinedProperties({...technicalProperties$2(Nr),...descriptiveProperties$2(Nr),...linkingProperties$2(Nr),items:Nr.resources&&Nr.resources.length?Nr.resources:void 0})}function upgradeSequence(Nr){return!Nr.canvases||Nr.canvases.length===0?{canvases:[],behavior:[]}:{canvases:Nr.canvases,behavior:Nr.viewingHint?[Nr.viewingHint]:[]}}function upgradeAnnotation(Nr){function _r(Ur){if(Array.isArray(Ur)){if(Ur.length>1)return{type:"List",items:Ur.map(_r)};Ur=Ur[0]}if(typeof Ur=="string")return encodeURI(Ur).trim();if("@type"in Ur){let jr;if(typeof Ur.full=="string")jr=Ur.full;else if(Ur.full["@type"]==="dctypes:Image")jr={id:Ur.full["@id"],type:"Image"};else if(Ur.full["@type"]==="sc:Canvas")jr={id:Ur.full["@id"],type:"Canvas"};else throw new Error(`Unsupported source type on annotation: ${Ur.full["@type"]}`);return{type:"SpecificResource",source:jr,selector:upgradeSelector(Ur.selector)}}else return encodeURI(Ur["@id"]).trim()}return removeUndefinedProperties({...technicalProperties$2(Nr),...descriptiveProperties$2(Nr),...linkingProperties$2(Nr),target:_r(Nr.on),body:Array.isArray(Nr.resource)?Nr.resource.map(upgradeContentResource):upgradeContentResource(Nr.resource)})}function upgradeContentResource(Nr){const _r=Nr;return removeUndefinedProperties({...technicalProperties$2(_r),...descriptiveProperties$2(_r),...linkingProperties$2(_r),...embeddedContentProperties(_r)})}function upgradeChoice(Nr){const _r=[];return Nr.default&&Nr.default!=="rdf:nil"&&_r.push(Nr.default),Nr.item&&Nr.item!=="rdf:nil"&&_r.push(...Nr.item),{...technicalProperties$2(Nr),...descriptiveProperties$2(Nr),items:_r}}function upgradeRange(Nr){return removeUndefinedProperties({...technicalProperties$2(Nr),...descriptiveProperties$2(Nr),...linkingProperties$2(Nr),items:Nr.members})}function upgradeService(Nr){const{"@id":_r,"@type":Ur,"@context":jr,profile:Gr,...Wr}=Nr,Zr={};return _r&&(Zr["@id"]=_r),Zr["@type"]=getNewType(Nr),Zr["@type"]==="unknown"&&(jr&&jr.length&&(Zr["@context"]=jr),Zr["@type"]="Service"),Gr&&(Zr.profile=getProfile(Gr)),removeUndefinedProperties({...Zr,...Wr})}function upgradeLayer(Nr){return removeUndefinedProperties({...technicalProperties$2(Nr),...descriptiveProperties$2(Nr),...linkingProperties$2(Nr)})}const presentation2to3=new Traverse({collection:[upgradeCollection],manifest:[upgradeManifest],canvas:[upgradeCanvas],annotationList:[upgradeAnnotationList],sequence:[upgradeSequence],annotation:[upgradeAnnotation],contentResource:[upgradeContentResource],choice:[upgradeChoice],range:[upgradeRange],service:[upgradeService],layer:[upgradeLayer]});function convertPresentation2(Nr){return Nr&&Nr["@context"]&&(Nr["@context"]==="http://iiif.io/api/presentation/2/context.json"||Nr["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||Nr["@context"]==="http://www.shared-canvas.org/ns/context.json")||Nr["@context"]==="http://iiif.io/api/image/2/context.json"?presentation2to3.traverseUnknown(Nr):Nr}function upgradeSelector(Nr){if((Array.isArray(Nr["@type"])&&Nr["@type"].includes("oa:SvgSelector")||Nr["@type"]=="oa:SvgSelector")&&("chars"in Nr||"value"in Nr))return{type:"SvgSelector",value:"chars"in Nr?Nr.chars:Nr.value};if(Nr["@type"]==="oa:FragmentSelector")return{type:"FragmentSelector",value:Nr.value};if(Nr["@type"]==="oa:Choice")return[upgradeSelector(Nr.default),...(Array.isArray(Nr.item)?Nr.item:[Nr.item]).map(upgradeSelector)];if(Nr["@type"]=="iiif:ImageApiSelector")return{type:"ImageApiSelector",region:"region"in Nr?Nr.region:void 0,rotation:"rotation"in Nr?Nr.rotation:void 0};throw new Error(`Unsupported selector type: ${Nr["@type"]}`)}function getDefaultEntities$1(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function getResource(Nr,_r){if(typeof Nr=="string")return{id:Nr,type:_r};if(!Nr.id)throw new Error(`Invalid resource does not have an ID (${_r})`);return Nr}function mapToEntities(Nr){return(_r,Ur)=>{const jr=Nr[_r]?Nr[_r]:{};return Gr=>{const Wr=getResource(Gr,Ur||_r);return Wr&&Wr.id&&_r?(jr[Wr.id]=jr[Wr.id]?mergeEntities(jr[Wr.id],Wr):Object.assign({},Wr),{id:Wr.id,type:_r==="ContentResource"?_r:Wr.type}):Wr}}}function merge(Nr,_r){if(!_r)return Nr;if(Array.isArray(Nr)){if(!Array.isArray(_r))throw new Error("Cannot merge array with non-array");const Ur=[...Nr];for(const jr of _r)if(jr!=null)if(Array.isArray(jr))Ur.push(jr);else if(typeof jr=="object"&&jr.id&&jr.type){const Gr=Ur.findIndex(Wr=>Wr.id===jr.id&&Wr.type===jr.type);Gr>=0&&(Ur[Gr]=merge(Ur[Gr],jr))}else Nr.indexOf(jr)===-1&&Ur.push(jr);return Ur}else if(typeof Nr=="object"){if(Array.isArray(_r)||typeof _r!="object")throw new Error("Cannot merge object with non-object");const Ur={...Nr};for(const[jr,Gr]of Object.entries(_r)){const Wr=Ur[jr];Wr===EMPTY||!Wr?Ur[jr]=Gr:Ur[jr]=merge(Wr,Gr)}return Ur}else if(Nr)return Nr;return _r}function mergeEntities(Nr,_r){if(typeof Nr=="string")return Nr;if(_r.id!==Nr.id||_r.type!==Nr.type)throw new Error("Can only merge entities with identical identifiers and type!");return merge({...Nr},_r)}function recordTypeInMapping(Nr){return(_r,Ur)=>jr=>{const{id:Gr,type:Wr}=getResource(jr,Ur||_r);if(typeof Gr>"u")throw new Error("Found invalid entity without an ID.");return _r==="ContentResource"?Nr[Gr]=_r:Nr[Gr]=Wr,jr}}function hash$1(Nr){const _r=JSON.stringify(Nr);let Ur=5381,jr=_r.length;for(;jr;)Ur=Ur*33^_r.charCodeAt(--jr);const Wr=(Ur>>>0).toString(16);return Wr.length%2?"0"+Wr:Wr}function addMissingIdToContentResource(Nr){return _r=>typeof _r=="string"?{id:_r,type:Nr}:_r.id?_r.type?_r:{type:Nr,..._r}:{id:`vault://${hash$1(_r)}`,type:Nr,..._r}}function ensureDefaultFields(Nr){return _r=>({...Nr,..._r})}function ensureArray(Nr){return Array.isArray(Nr)?Nr:[Nr]}function ensureArrayOnAnnotation(Nr){return Nr.body&&(Nr.body=ensureArray(Nr.body)),Nr.seeAlso&&(Nr.seeAlso=ensureArray(Nr.seeAlso)),Nr.body&&(Nr.body=ensureArray(Nr.body)),Nr.audience&&(Nr.audience=ensureArray(Nr.audience)),Nr.accessibility&&(Nr.accessibility=ensureArray(Nr.accessibility)),Nr.motivation&&(Nr.motivation=ensureArray(Nr.motivation)),Nr}function normalize(Nr){const _r=convertPresentation2(Nr),Ur=getDefaultEntities$1(),jr={},Gr=mapToEntities(Ur),Wr=recordTypeInMapping(jr),Yr=new Traverse$1({collection:[ensureDefaultFields(emptyCollection),Wr("Collection"),Gr("Collection")],manifest:[ensureDefaultFields(emptyManifest),Wr("Manifest"),Gr("Manifest")],canvas:[ensureDefaultFields(emptyCanvas),Wr("Canvas"),Gr("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(emptyAnnotationPage),Wr("AnnotationPage"),Gr("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,Wr("Annotation"),Gr("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),Wr("ContentResource"),Gr("ContentResource")],range:[ensureDefaultFields(emptyRange),Wr("Range","Canvas"),Gr("Range","Canvas")],agent:[ensureDefaultFields(emptyAgent),Wr("Agent"),Gr("Agent")]}).traverseUnknown(_r);return{entities:Ur,resource:Yr,mapping:jr}}const UNSET="__$UNSET$__",UNWRAP="__$UNWRAP$__";function resolveIfExists$1(Nr,_r){const Ur=Nr.requests[_r],jr=Nr.mapping[_r];if(!(!jr||Ur&&Ur.resourceUri&&!Nr.entities[jr][Ur.resourceUri]))return Nr.entities[jr][Ur?Ur.resourceUri:_r]}function serializedFieldsToObject(Nr){const _r={};for(const[Ur,jr]of Nr){if(Ur===UNWRAP&&jr!==UNSET)return jr;jr!==UNSET&&typeof jr<"u"&&jr!==null&&(_r[Ur]=jr)}return _r}function serialize(Nr,_r,Ur){if(!_r.type||!_r.id)throw new Error("Unknown entity");if(!Ur[_r.type])throw new Error(`Serializer not found for ${_r.type}`);function jr(Gr){const Wr=Ur[Gr.type];if(!Wr)return UNSET;const Zr=resolveIfExists$1(Nr,Gr.id)||(Gr.id&&Gr.type?Gr:null);if(!Zr)return UNSET;const Yr=Wr(Zr,Nr,{isTopLevel:_r.id===Gr.id});let ts=Yr.next();for(;!ts.done;){const es=ts.value;let ns=UNSET;if(es)if(Array.isArray(es)){const Xr=[];for(const qr of es)Xr.push(jr(qr));ns=Xr}else ns=jr(es);ts=Yr.next(ns)}return ts.value===UNSET?UNSET:serializedFieldsToObject(ts.value)}return jr(_r)}function languageString2to3(Nr){if(!Nr)return;const _r=Object.keys(Nr);if(_r.length!==0){if(_r.length===1){const Ur=_r[0];if(!Ur)return"";const jr=(Nr[Ur]||[]).join("");return Ur==="@none"||Ur==="none"||Ur==="en"?jr:{"@language":Ur,"@value":jr}}return _r.map(Ur=>({"@language":Ur,"@value":(Nr[Ur]||[]).join("")}))}}function parseCanvasTarget(Nr){return Array.isArray(Nr)?Nr.map(_r=>parseCanvasTarget(_r)):typeof Nr=="string"?Nr:Nr.type&&Nr.type==="Canvas"?Nr.id:Nr}function unNestArray(Nr,_r=!1){if(Nr)return Nr.length>1&&!_r?Nr:Nr[0]||void 0}function convertService(Nr){if(Nr){if(typeof Nr=="string")return{"@id":Nr};if("@id"in Nr){const _r={...Nr};return delete _r["@type"],_r}return{"@context":"http://iiif.io/api/image/2/context.json","@id":Nr.id,profile:`http://iiif.io/api/image/2/profiles/${Nr.profile}.json`}}}function technicalProperties$1(Nr,_r){return[["@id",Nr.id],["@type",_r],["format",Nr.format],["height",Nr.height],["width",Nr.width],["viewingDirection",Nr.viewingDirection!=="left-to-right"?Nr.viewingDirection:void 0]]}function*descriptiveProperties$1(Nr){const _r=Nr.provider?yield Nr.provider[0]:void 0;return[["label",languageString2to3(Nr.label)],["metadata",Nr.metadata&&Nr.metadata.length?Nr.metadata.map(Ur=>({label:languageString2to3(Ur.label)||"",value:languageString2to3(Ur.value)||""})):void 0],["description",languageString2to3(Nr.summary)],["thumbnail",unNestArray(yield Nr.thumbnail)],["navDate",Nr.navDate],["logo",_r?unNestArray(_r.logo):void 0],["homepage",_r?_r.homepage:void 0],["attribution",Nr.requiredStatement?languageString2to3(Nr.requiredStatement.value):void 0]]}function*linkingProperties$1(Nr){return[["seeAlso",unNestArray(yield Nr.seeAlso)],["service",unNestArray((Nr.service||[]).map(convertService))],["rendering",unNestArray(yield Nr.rendering)],["startCanvas",Nr.start?Nr.start.id:void 0]]}const serializeConfigPresentation2={Manifest:function*(Nr){return[...technicalProperties$1(Nr,"sc:Manifest"),...yield*descriptiveProperties$1(Nr),...yield*linkingProperties$1(Nr),["sequences",[{"@id":`${Nr.id}/sequence0`,"@type":"sc:Sequence",canvases:yield Nr.items}]],["structures",yield Nr.structures]]},Canvas:function*(Nr){const Ur=(yield Nr.items)[0];return[...technicalProperties$1(Nr,"sc:Canvas"),...yield*descriptiveProperties$1(Nr),...yield*linkingProperties$1(Nr),["images",Ur?[Ur.resources]:void 0],["annotations",Nr.annotations&&Nr.annotations.length?unNestArray(yield Nr.annotations):void 0]]},AnnotationPage:function*(Nr){return[...technicalProperties$1(Nr,"sc:AnnotationList"),...yield*descriptiveProperties$1(Nr),["resources",Nr.items&&Nr.items.length?unNestArray(yield Nr.items):void 0]]},Annotation:function*(Nr){return[["@id",Nr.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",parseCanvasTarget(Nr.target)],["resource",unNestArray(yield Nr.body,!0)]]},ContentResource:function*(Nr){switch(Nr.type){case"Image":return[...technicalProperties$1(Nr,"dctypes:Image"),...yield*descriptiveProperties$1(Nr),...yield*linkingProperties$1(Nr)];case"Text":case"Dataset":default:return[...technicalProperties$1(Nr,void 0),...yield*descriptiveProperties$1(Nr)]}},AnnotationCollection:function*(Nr){return[["@id",Nr.id],["@type","sc:Layer"],["label",languageString2to3(Nr.label)]]},Collection:function*(Nr){return[...technicalProperties$1(Nr,"sc:Collection"),...yield*descriptiveProperties$1(Nr),...yield*linkingProperties$1(Nr),["members",yield*Nr.items]]},Range:function*(Nr){const _r=[],Ur=[];if(Nr.items)for(const jr of Nr.items){const Gr=yield jr;_r.push({"@id":jr.id,"@type":jr.type,label:Gr?Gr.label:void 0,within:Nr.id}),jr.type==="Canvas"&&Ur.push(jr.id)}return[...technicalProperties$1(Nr,"sc:Range"),...yield*descriptiveProperties$1(Nr),...yield*linkingProperties$1(Nr),["canvases",Ur.length===_r.length?Ur:void 0],["members",Ur.length!==_r.length?_r:void 0]]}};function technicalProperties(Nr){var _r;return[["id",(_r=Nr.id)!=null&&_r.startsWith("vault://")?void 0:Nr.id],["type",Nr.type],["format",Nr.format],["profile",Nr.profile],["height",Nr.height],["width",Nr.width],["duration",Nr.duration||void 0],["viewingDirection",Nr.viewingDirection!=="left-to-right"?Nr.viewingDirection:void 0],["behavior",Nr.behavior&&Nr.behavior.length?Nr.behavior:void 0],["timeMode",Nr.timeMode],["motivation",Array.isArray(Nr.motivation)?Nr.motivation[0]:Nr.motivation]]}function filterEmpty(Nr){if(!(!Nr||Nr.length===0))return Nr}function service2compat(Nr){if(Nr&&Nr.type&&Nr.type==="ImageService2"){const{id:_r,type:Ur,profile:jr,...Gr}=Nr,Wr=typeof jr=="string"?jr:Array.isArray(jr)?jr.find(Zr=>typeof Zr=="string"):"";return{"@id":_r,"@type":Ur,profile:Wr?Wr.startsWith("http")?Wr:`http://iiif.io/api/image/2/${Wr}.json`:"http://iiif.io/api/image/2/level0.json",...Gr}}return Nr}function filterService2Compat(Nr){if(!(!Nr||Nr.length===0))return Nr.map(service2compat)}function*descriptiveProperties(Nr){return[["label",Nr.label],["metadata",filterEmpty(Nr.metadata)],["summary",Nr.summary],["requiredStatement",Nr.requiredStatement],["rights",Nr.rights],["navDate",Nr.navDate],["language",Nr.language],["thumbnail",filterEmpty(yield Nr.thumbnail)],["placeholderCanvas",yield Nr.placeholderCanvas],["accompanyingCanvas",yield Nr.accompanyingCanvas],["provider",filterEmpty(yield Nr.provider)]]}function*linkingProperties(Nr){return[["seeAlso",filterEmpty(yield Nr.seeAlso)],["service",filterService2Compat(Nr.service)],["services",filterService2Compat(Nr.services)],["rendering",filterEmpty(yield Nr.rendering)],["supplementary",filterEmpty(yield Nr.supplementary)],["homepage",filterEmpty(yield Nr.homepage)],["logo",filterEmpty(yield Nr.logo)],["partOf",filterEmpty(yield Nr.partOf)],["start",Nr.start]]}const serializeConfigPresentation3={Manifest:function*(Nr,_r,{isTopLevel:Ur}){return Ur?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(Nr),...yield*descriptiveProperties(Nr),...yield*linkingProperties(Nr),["items",yield Nr.items],["structures",filterEmpty(yield Nr.structures)],["annotations",filterEmpty(yield Nr.annotations)]]:[...technicalProperties(Nr),...yield*descriptiveProperties(Nr)]},Canvas:function*(Nr){return[...technicalProperties(Nr),...yield*descriptiveProperties(Nr),...yield*linkingProperties(Nr),["items",yield Nr.items],["annotations",filterEmpty(yield Nr.annotations)]]},Agent:function*(Nr){return[["id",Nr.id],["type","Agent"],["label",Nr.label],...yield*linkingProperties(Nr)]},AnnotationPage:function*(Nr){return[...Object.entries(Nr).map(([Ur,jr])=>[Ur,Array.isArray(jr)?filterEmpty(jr):jr]).filter(([Ur,jr])=>Ur!=="items"),...yield*linkingProperties(Nr),["items",yield Nr.items]]},Service:function*(Nr){return[[UNWRAP,service2compat(Nr)]]},Annotation:function*(Nr){const _r=Object.entries(Nr).map(([jr,Gr])=>jr==="motivation"?[jr,Array.isArray(Gr)?Gr[0]:Gr]:[jr,Array.isArray(Gr)?filterEmpty(Gr):Gr]).filter(([jr])=>jr!=="body"),Ur=yield Nr.body;return[..._r,["body",Ur.length===1?Ur[0]:Ur]]},ContentResource:function*(Nr){return[...technicalProperties(Nr),...yield*descriptiveProperties(Nr),...yield*linkingProperties(Nr),["annotations",filterEmpty(yield Nr.annotations)],["items",filterEmpty(yield Nr.items)]]},AnnotationCollection:function*(Nr){return[["id",Nr.id],["type","AnnotationCollection"],["label",Nr.label]]},Collection:function*(Nr,_r,{isTopLevel:Ur}){return Ur?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(Nr),...yield*descriptiveProperties(Nr),...yield*linkingProperties(Nr),["items",filterEmpty(yield Nr.items)]]:[...technicalProperties(Nr),...yield*descriptiveProperties(Nr)]},Range:function*(Nr){const _r=[];for(const Ur of Nr.items)Ur.type==="Range"?_r.push(yield Ur):_r.push(Ur);return[...technicalProperties(Nr),...yield*descriptiveProperties(Nr),...yield*linkingProperties(Nr),["items",_r],["annotations",filterEmpty(yield Nr.annotations)]]}};function n$1(Nr){return Nr==null}function t$1(Nr){throw new Error("Argument "+Nr+" is empty.")}function o$1(Nr){return typeof Nr=="string"||typeof Nr=="symbol"}function u$1(Nr){return!o$1(Nr)}function a$1(Nr){throw new Error("Argument "+Nr+" is invalid, it should be an action type of type: string | symbol")}function s$1(Nr,_r){return n$1(Nr)&&t$1(1),u$1(Nr)&&a$1(1),Object.assign(function(){var Ur=_r!=null?_r.apply(void 0,arguments):void 0;return Object.assign({type:Nr},Ur)},{getType:function(){return Nr},toString:function(){return Nr}})}function y$1(Nr,_r,Ur){return n$1(Nr)&&t$1(1),u$1(Nr)&&a$1(1),function(){return s$1(Nr,function(){var jr=arguments.length<=0?void 0:arguments[0],Gr=arguments.length<=1?void 0:arguments[1];return _r==null&&Ur==null||(jr=_r!=null?_r.apply(void 0,arguments):void 0,Gr=Ur!=null?Ur.apply(void 0,arguments):void 0),Object.assign({},jr!==void 0&&{payload:jr},{},Gr!==void 0&&{meta:Gr})})}}function _typeof(Nr){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_r){return typeof _r}:function(_r){return _r&&typeof Symbol=="function"&&_r.constructor===Symbol&&_r!==Symbol.prototype?"symbol":typeof _r},_typeof(Nr)}function _toPrimitive$1(Nr,_r){if(_typeof(Nr)!=="object"||Nr===null)return Nr;var Ur=Nr[Symbol.toPrimitive];if(Ur!==void 0){var jr=Ur.call(Nr,_r||"default");if(_typeof(jr)!=="object")return jr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_r==="string"?String:Number)(Nr)}function _toPropertyKey$1(Nr){var _r=_toPrimitive$1(Nr,"string");return _typeof(_r)==="symbol"?_r:String(_r)}function _defineProperty$1(Nr,_r,Ur){return _r=_toPropertyKey$1(_r),_r in Nr?Object.defineProperty(Nr,_r,{value:Ur,enumerable:!0,configurable:!0,writable:!0}):Nr[_r]=Ur,Nr}function ownKeys$1(Nr,_r){var Ur=Object.keys(Nr);if(Object.getOwnPropertySymbols){var jr=Object.getOwnPropertySymbols(Nr);_r&&(jr=jr.filter(function(Gr){return Object.getOwnPropertyDescriptor(Nr,Gr).enumerable})),Ur.push.apply(Ur,jr)}return Ur}function _objectSpread2$1(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r]!=null?arguments[_r]:{};_r%2?ownKeys$1(Object(Ur),!0).forEach(function(jr){_defineProperty$1(Nr,jr,Ur[jr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Nr,Object.getOwnPropertyDescriptors(Ur)):ownKeys$1(Object(Ur)).forEach(function(jr){Object.defineProperty(Nr,jr,Object.getOwnPropertyDescriptor(Ur,jr))})}return Nr}function formatProdErrorMessage(Nr){return"Minified Redux error #"+Nr+"; visit https://redux.js.org/Errors?code="+Nr+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$4(Nr){if(typeof Nr!="object"||Nr===null)return!1;for(var _r=Nr;Object.getPrototypeOf(_r)!==null;)_r=Object.getPrototypeOf(_r);return Object.getPrototypeOf(Nr)===_r}function createStore$1(Nr,_r,Ur){var jr;if(typeof _r=="function"&&typeof Ur=="function"||typeof Ur=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof _r=="function"&&typeof Ur>"u"&&(Ur=_r,_r=void 0),typeof Ur<"u"){if(typeof Ur!="function")throw new Error(formatProdErrorMessage(1));return Ur(createStore$1)(Nr,_r)}if(typeof Nr!="function")throw new Error(formatProdErrorMessage(2));var Gr=Nr,Wr=_r,Zr=[],Yr=Zr,ts=!1;function es(){Yr===Zr&&(Yr=Zr.slice())}function ns(){if(ts)throw new Error(formatProdErrorMessage(3));return Wr}function Xr(is){if(typeof is!="function")throw new Error(formatProdErrorMessage(4));if(ts)throw new Error(formatProdErrorMessage(5));var ss=!0;return es(),Yr.push(is),function(){if(ss){if(ts)throw new Error(formatProdErrorMessage(6));ss=!1,es();var ls=Yr.indexOf(is);Yr.splice(ls,1),Zr=null}}}function qr(is){if(!isPlainObject$4(is))throw new Error(formatProdErrorMessage(7));if(typeof is.type>"u")throw new Error(formatProdErrorMessage(8));if(ts)throw new Error(formatProdErrorMessage(9));try{ts=!0,Wr=Gr(Wr,is)}finally{ts=!1}for(var ss=Zr=Yr,os=0;os<ss.length;os++){var ls=ss[os];ls()}return is}function _i(is){if(typeof is!="function")throw new Error(formatProdErrorMessage(10));Gr=is,qr({type:ActionTypes.REPLACE})}function rs(){var is,ss=Xr;return is={subscribe:function(ls){if(typeof ls!="object"||ls===null)throw new Error(formatProdErrorMessage(11));function cs(){ls.next&&ls.next(ns())}cs();var ds=ss(cs);return{unsubscribe:ds}}},is[$$observable]=function(){return this},is}return qr({type:ActionTypes.INIT}),jr={dispatch:qr,subscribe:Xr,getState:ns,replaceReducer:_i},jr[$$observable]=rs,jr}function assertReducerShape(Nr){Object.keys(Nr).forEach(function(_r){var Ur=Nr[_r],jr=Ur(void 0,{type:ActionTypes.INIT});if(typeof jr>"u")throw new Error(formatProdErrorMessage(12));if(typeof Ur(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(Nr){for(var _r=Object.keys(Nr),Ur={},jr=0;jr<_r.length;jr++){var Gr=_r[jr];typeof Nr[Gr]=="function"&&(Ur[Gr]=Nr[Gr])}var Wr=Object.keys(Ur),Zr;try{assertReducerShape(Ur)}catch(Yr){Zr=Yr}return function(ts,es){if(ts===void 0&&(ts={}),Zr)throw Zr;for(var ns=!1,Xr={},qr=0;qr<Wr.length;qr++){var _i=Wr[qr],rs=Ur[_i],is=ts[_i],ss=rs(is,es);if(typeof ss>"u")throw es&&es.type,new Error(formatProdErrorMessage(14));Xr[_i]=ss,ns=ns||ss!==is}return ns=ns||Wr.length!==Object.keys(ts).length,ns?Xr:ts}}function compose(){for(var Nr=arguments.length,_r=new Array(Nr),Ur=0;Ur<Nr;Ur++)_r[Ur]=arguments[Ur];return _r.length===0?function(jr){return jr}:_r.length===1?_r[0]:_r.reduce(function(jr,Gr){return function(){return jr(Gr.apply(void 0,arguments))}})}function applyMiddleware(){for(var Nr=arguments.length,_r=new Array(Nr),Ur=0;Ur<Nr;Ur++)_r[Ur]=arguments[Ur];return function(jr){return function(){var Gr=jr.apply(void 0,arguments),Wr=function(){throw new Error(formatProdErrorMessage(15))},Zr={getState:Gr.getState,dispatch:function(){return Wr.apply(void 0,arguments)}},Yr=_r.map(function(ts){return ts(Zr)});return Wr=compose.apply(void 0,Yr)(Gr.dispatch),_objectSpread2$1(_objectSpread2$1({},Gr),{},{dispatch:Wr})}}}const IMPORT_ENTITIES="@iiif/IMPORT_ENTITIES",MODIFY_ENTITY_FIELD="@iiif/MODIFY_ENTITY_FIELD",REORDER_ENTITY_FIELD="@iiif/REORDER_ENTITY_FIELD",ADD_REFERENCE="@iiif/ADD_REFERENCE",REMOVE_REFERENCE="@iiif/REMOVE_REFERENCE",importEntities=y$1(IMPORT_ENTITIES)(),modifyEntityField=y$1(MODIFY_ENTITY_FIELD)(),reorderEntityField=y$1(REORDER_ENTITY_FIELD)(),addReference=y$1(ADD_REFERENCE)(),removeReference=y$1(REMOVE_REFERENCE)(),entityActions={importEntities,modifyEntityField,reorderEntityField,addReference,removeReference},ADD_MAPPING="@iiif/ADD_MAPPING",ADD_MAPPINGS="@iiif/ADD_MAPPINGS",addMapping=y$1(ADD_MAPPING)(),addMappings=y$1(ADD_MAPPINGS)(),SET_META_VALUE="@iiif/SET_META_VALUE",SET_META_VALUE_DYNAMIC="@iiif/SET_META_VALUE_DYNAMIC",UNSET_META_VALUE="@iiif/UNSET_META_VALUE",setMetaValue=y$1(SET_META_VALUE)(),setMetaValueDynamic=y$1(SET_META_VALUE_DYNAMIC)(),unsetMetaValue=y$1(UNSET_META_VALUE)(),metaActions={setMetaValue,setMetaValueDynamic,unsetMetaValue},RESOURCE_ERROR="RESOURCE_ERROR",RESOURCE_LOADING="RESOURCE_LOADING",RESOURCE_READY="RESOURCE_READY",REQUEST_RESOURCE="@iiif/REQUEST_RESOURCE",REQUEST_ERROR="@iiif/REQUEST_ERROR",REQUEST_MISMATCH="@iiif/REQUEST_MISMATCH",REQUEST_COMPLETE="@iiif/REQUEST_COMPLETE",REQUEST_OFFLINE_RESOURCE="@iiif/REQUEST_OFFLINE_RESOURCE",requestResource=y$1(REQUEST_RESOURCE)(),requestError=y$1(REQUEST_ERROR)(),requestMismatch=y$1(REQUEST_MISMATCH)(),requestComplete=y$1(REQUEST_COMPLETE)();y$1(REQUEST_OFFLINE_RESOURCE)();const BATCH_ACTIONS="@iiif/BATCH",BATCH_IMPORT="@iiif/BATCH_IMPORT",batchActions=y$1(BATCH_ACTIONS)();y$1(BATCH_IMPORT)();const actionListFromResource=(Nr,_r)=>{const{entities:Ur,resource:jr,mapping:Gr}=normalize(_r);if(jr.id===void 0)return[requestError({id:Nr,message:"ID is not defined in resource."})];const Wr=[importEntities({entities:Ur}),addMappings({mapping:Gr})];return jr.id!==Nr&&(Wr.push(addMapping({id:Nr,type:jr.type})),Wr.push(requestMismatch({requestId:Nr,actualId:jr.id}))),Wr.push(requestComplete({id:Nr})),Wr},safeIsNaN=Number.isNaN||function(_r){return typeof _r=="number"&&_r!==_r};function isEqual(Nr,_r){return!!(Nr===_r||safeIsNaN(Nr)&&safeIsNaN(_r))}function areInputsEqual(Nr,_r){if(!Array.isArray(Nr)||!Array.isArray(_r))return Nr===_r;if(Nr.length!==_r.length)return!1;for(let Ur=0;Ur<Nr.length;Ur++)if(!isEqual(Nr[Ur],_r[Ur]))return!1;return!0}function resolveIfExists(Nr,_r){const Ur=Nr.iiif.requests[_r],jr=Nr.iiif.mapping[_r];if(!(!jr||!Nr.iiif.entities[jr][Ur.resourceUri]))return Nr.iiif.entities[jr][Ur.resourceUri]}function createFetchHelper(Nr,_r,{waitTimeout:Ur=30}={}){return async(jr,Gr)=>{const Wr=Nr.getState(),Zr=Wr.iiif.requests[jr];if(Zr)switch(Zr.loadingState){case RESOURCE_ERROR:break;case RESOURCE_LOADING:{let Yr,ts=!1;try{const es=await Promise.race([new Promise((ns,Xr)=>{ts||(Yr=Nr.subscribe(()=>{const qr=Nr.getState();if(qr.iiif.requests[jr].loadingState===RESOURCE_ERROR){Xr();return}if(qr.iiif.requests[jr].loadingState===RESOURCE_READY){const _i=resolveIfExists(qr,jr);_i?ns(_i):Xr()}}))}),new Promise((ns,Xr)=>setTimeout(()=>{ts=!0,Xr()},Ur*60))]);if(Yr&&Yr(),es)return es}catch{Yr&&Yr();break}break}case RESOURCE_READY:{const Yr=resolveIfExists(Wr,jr);if(Yr)return Yr;break}}Nr.dispatch(requestResource({id:jr}));try{const Yr=await _r(jr,Gr);!Yr.id&&!Yr["@id"]&&(Yr["@type"]&&(Yr["@id"]=jr),Yr.id=jr);const ts=actionListFromResource(jr,Yr);return Nr.dispatch(batchActions({actions:ts})),resolveIfExists(Nr.getState(),jr)}catch(Yr){throw Nr.dispatch(requestError({id:jr,message:Yr.toString()})),Yr}}}function getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}const mappingReducer=(Nr={},_r)=>{switch(_r.type){case ADD_MAPPING:return{...Nr,[_r.payload.id]:_r.payload.type};case ADD_MAPPINGS:return{...Nr,..._r.payload.mapping};default:return Nr}};function isReferenceList(Nr,_r,Ur,jr){return!(!Nr[Ur]||!Nr[Ur][_r]||!Nr[Ur][_r][jr]||!Array.isArray(Nr[Ur][_r][jr]))}function quickMerge(Nr,_r){const Ur={},jr=[];for(const[Gr,Wr]of Object.entries(Nr||{})){jr.push(Gr);const Zr=(_r||{})[Gr];if(!Zr||Zr.length===0){Ur[Gr]=Wr;continue}Ur[Gr]=Zr}for(const[Gr,Wr]of Object.entries(_r||{}))jr.indexOf(Gr)===-1&&(Ur[Gr]=Wr);return Ur}const entitiesReducer=(Nr=getDefaultEntities(),_r)=>{var Ur;switch(_r.type){case MODIFY_ENTITY_FIELD:{if(!Nr[_r.payload.type]||!Nr[_r.payload.type][_r.payload.id])return Nr;const jr=Nr[_r.payload.type][_r.payload.id];return typeof jr=="string"?Nr:{...Nr,[_r.payload.type]:{...Nr[_r.payload.type],[_r.payload.id]:{...jr,[_r.payload.key]:_r.payload.value}}}}case REORDER_ENTITY_FIELD:{if(!isReferenceList(Nr,_r.payload.id,_r.payload.type,_r.payload.key))return Nr;const jr=Nr[_r.payload.type][_r.payload.id];if(typeof jr=="string")return Nr;const Gr=Array.from(jr[_r.payload.key]),[Wr]=Gr.splice(_r.payload.startIndex,1);return Gr.splice(_r.payload.endIndex,0,Wr),{...Nr,[_r.payload.type]:{...Nr[_r.payload.type],[_r.payload.id]:{...jr,[_r.payload.key]:Gr}}}}case IMPORT_ENTITIES:{const jr=Object.keys(_r.payload.entities),Gr={...Nr};for(const Wr of jr){const Zr=_r.payload.entities[Wr],Yr={...Nr[Wr]||{}};let ts=!1;const es=Object.keys(Zr||{})||[];if(Zr&&es){for(const ns of es)ts=!0,Yr[ns]=Nr[Wr][ns]?quickMerge(Nr[Wr][ns],Zr[ns]):Zr[ns];ts&&(Gr[Wr]=Yr)}}return Gr}case ADD_REFERENCE:{if(!isReferenceList(Nr,_r.payload.id,_r.payload.type,_r.payload.key))return Nr;const jr=Nr[_r.payload.type][_r.payload.id],Gr=Array.from(jr[_r.payload.key]);return Gr.splice(_r.payload.index||Gr.length+1,0,_r.payload.reference),{...Nr,[_r.payload.type]:{...Nr[_r.payload.type],[_r.payload.id]:{...jr,[_r.payload.key]:Gr}}}}case REMOVE_REFERENCE:{if(!isReferenceList(Nr,_r.payload.id,_r.payload.type,_r.payload.key))return Nr;const jr=Nr[_r.payload.type][_r.payload.id],Gr=Array.from(jr[_r.payload.key]),Wr=_r.payload.index||Gr.findIndex(Zr=>Zr&&Zr.id===_r.payload.reference.id);return Wr===-1||((Ur=Gr[Wr])==null?void 0:Ur.id)!==_r.payload.reference.id?Nr:(Gr.splice(Wr,1),{...Nr,[_r.payload.type]:{...Nr[_r.payload.type],[_r.payload.id]:{...jr,[_r.payload.key]:Gr}}})}default:return Nr}},requestReducer=(Nr={},_r)=>{switch(_r.type){case REQUEST_RESOURCE:case REQUEST_OFFLINE_RESOURCE:return{...Nr,[_r.payload.id]:{requestUri:_r.payload.id,loadingState:RESOURCE_LOADING,uriMismatch:!1,resourceUri:_r.payload.id}};case REQUEST_MISMATCH:return{...Nr,[_r.payload.requestId]:{...Nr[_r.payload.requestId]||{},uriMismatch:!0,resourceUri:_r.payload.actualId},[_r.payload.actualId]:{requestUri:_r.payload.requestId,loadingState:Nr[_r.payload.requestId].loadingState,uriMismatch:!0,resourceUri:_r.payload.actualId}};case REQUEST_ERROR:return{...Nr,[_r.payload.id]:{...Nr[_r.payload.id]||{},loadingState:RESOURCE_ERROR,error:_r.payload.message}};case REQUEST_COMPLETE:return{...Nr,[_r.payload.id]:{...Nr[_r.payload.id]||{},loadingState:RESOURCE_READY,error:void 0}}}return Nr},metaReducer=(Nr={},_r)=>{const{id:Ur,updateValue:jr,value:Gr,meta:Wr,key:Zr}=_r&&_r.payload||{};switch(_r.type){case SET_META_VALUE:return{...Nr,[Ur]:{...Nr[Ur]||{},[Wr]:{...Nr[Ur]?Nr[Ur][Wr]||{}:{},[Zr]:Gr}}};case SET_META_VALUE_DYNAMIC:return{...Nr,[Ur]:{...Nr[Ur]||{},[Wr]:{...Nr[Ur]?Nr[Ur][Wr]||{}:{},[Zr]:Nr[Ur]&&Nr[Ur][Wr]?jr(Nr[Ur][Wr][Zr]):jr(void 0)}}};case UNSET_META_VALUE:return Nr[Ur]&&Nr[Ur][Wr]&&Nr[Ur][Wr][Zr]?{...Nr,[Ur]:{...Nr[Ur]||{},[Wr]:{...Nr[Ur]?Nr[Ur][Wr]||{}:{},[Zr]:void 0}}}:Nr;default:return Nr}};function createBatchReducer(Nr){return(_r,Ur)=>Ur&&Ur.type===BATCH_ACTIONS?Ur.payload.actions.reduce(Nr,_r):Ur&&Ur.type===BATCH_IMPORT?Ur.payload.state:Nr(_r,Ur)}const reducers=combineReducers({mapping:mappingReducer,entities:entitiesReducer,requests:requestReducer,meta:metaReducer}),composeEnhancers=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;function createStore(Nr={}){const{enableDevtools:_r=!0,iiifStoreName:Ur="iiif",defaultState:jr={},extraMiddleware:Gr=[],customReducers:Wr={}}=Nr,Zr=combineReducers({[Ur]:reducers,...Wr});return createStore$1(createBatchReducer(Zr),jr,_r?composeEnhancers(applyMiddleware(...Gr)):compose(applyMiddleware(...Gr)))}function mitt(Nr){return{all:Nr=Nr||new Map,on:function(_r,Ur){var jr=Nr.get(_r);jr?jr.push(Ur):Nr.set(_r,[Ur])},off:function(_r,Ur){var jr=Nr.get(_r);jr&&(Ur?jr.splice(jr.indexOf(Ur)>>>0,1):Nr.set(_r,[]))},emit:function(_r,Ur){var jr=Nr.get(_r);jr&&jr.slice().map(function(Gr){Gr(Ur)}),(jr=Nr.get("*"))&&jr.slice().map(function(Gr){Gr(_r,Ur)})}}}class Vault{constructor(_r,Ur){ap(this,"options");ap(this,"store");ap(this,"emitter");ap(this,"isBatching",!1);ap(this,"batchQueue",[]);ap(this,"remoteFetcher");ap(this,"staticFetcher");ap(this,"defaultFetcher",_r=>fetch(_r).then(Ur=>Ur.json()));ap(this,"middleware",_r=>Ur=>jr=>{if(jr.type===BATCH_ACTIONS){for(const Zr of jr.payload.actions)this.emitter.emit(Zr.type,{realAction:Zr,state:_r.getState()});const Wr=Ur(jr);for(const Zr of jr.payload.actions)this.emitter.emit(`after:${jr.type}`,{action:jr,state:Wr});return Wr}this.emitter.emit(jr.type,{action:jr,state:_r.getState()});const Gr=Ur(jr);return this.emitter.emit(`after:${jr.type}`,{action:jr,state:Gr}),Gr});this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},_r||{}),this.store=Ur||createStore({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=mitt(),this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(jr,Gr)=>Gr)}batch(_r){this.isBatching=!0;try{_r(this),this.store.dispatch(batchActions({actions:this.batchQueue}))}catch(Ur){throw this.batchQueue=[],this.isBatching=!1,Ur}this.batchQueue=[],this.isBatching=!1}async asyncBatch(_r){this.isBatching=!0;try{await _r(this),this.store.dispatch(batchActions({actions:this.batchQueue}))}catch(Ur){throw this.batchQueue=[],this.isBatching=!1,Ur}this.batchQueue=[],this.isBatching=!1}modifyEntityField(_r,Ur,jr){this.dispatch(entityActions.modifyEntityField({id:_r.id,type:_r.type,key:Ur,value:jr}))}dispatch(_r){this.isBatching?this.batchQueue.push(_r):this.store.dispatch(_r)}serialize(_r,Ur){return serialize(this.getState().iiif,_r,Ur)}toPresentation2(_r){return this.serialize(_r,serializeConfigPresentation2)}toPresentation3(_r){return this.serialize(_r,serializeConfigPresentation3)}hydrate(_r,Ur){return this.get(_r,Ur,{skipSelfReturn:!1})}get(_r,Ur,jr={}){typeof Ur!="string"&&(jr=Ur||{},Ur=void 0);const{skipSelfReturn:Gr=!0}=jr||{};if(Array.isArray(_r))return _r.map(es=>this.get(es,jr));const Wr=this.getState();if(typeof _r=="string"){const es=Ur||Wr.iiif.mapping[_r];if(!es)return Gr?null:{id:_r,type:"unknown"};_r={id:_r,type:es}}const Zr=Ur||_r.type,Yr=_r.id,ts=Wr.iiif.entities[Zr];if(!ts){const es=Wr.iiif.requests[Yr];return es&&es.resourceUri!==Yr?this.get(es.resourceUri,jr):Gr?null:_r}return ts[_r.id]||(Gr?null:_r)}select(_r){return _r(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(_r,Ur){const jr=typeof _r=="string"?_r:_r.id;return this.load(jr,Ur)}loadCollection(_r,Ur){const jr=typeof _r=="string"?_r:_r.id;return this.load(jr,Ur)}load(_r,Ur){const jr=typeof _r=="string"?_r:_r.id;return Ur?this.staticFetcher(jr,Ur):this.remoteFetcher(jr)}areInputsEqual(_r,Ur){return areInputsEqual(_r,Ur)}subscribe(_r,Ur,jr){typeof jr>"u"&&(typeof Ur>"u"||Ur===!1||Ur===!0)&&(jr=Ur,Ur=_r,_r=Wr=>Wr);let Gr=jr?null:_r(this.store.getState());return jr||Ur(Gr,this),this.store.subscribe(()=>{const Wr=this.store.getState(),Zr=_r(Wr);Gr!==Zr&&!areInputsEqual(Gr,Zr)&&Ur(Zr,this),Gr=Zr})}async ensureLoaded(_r){const Ur=typeof _r=="string"?_r:_r.id;this.requestStatus(Ur)||await this.load(Ur)}requestStatus(_r){return this.select(Ur=>Ur.iiif.requests[_r])}getResourceMeta(_r,Ur){const jr=this.getState().iiif.meta[_r];if(jr)return Ur?jr[Ur]:jr}setMetaValue([_r,Ur,jr],Gr){this.dispatch(typeof Gr=="function"?metaActions.setMetaValueDynamic({id:_r,meta:Ur,key:jr,updateValue:Gr}):metaActions.setMetaValue({id:_r,meta:Ur,key:jr,value:Gr}))}}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends$1.apply(this,arguments)}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr,_r,{checkForDefaultPrevented:Ur=!0}={}){return function(Gr){if(Nr==null||Nr(Gr),Ur===!1||!Gr.defaultPrevented)return _r==null?void 0:_r(Gr)}}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(Nr,_r=[]){let Ur=[];function jr(Wr,Zr){const Yr=reactExports.createContext(Zr),ts=Ur.length;Ur=[...Ur,Zr];function es(Xr){const{scope:qr,children:_i,...rs}=Xr,is=(qr==null?void 0:qr[Nr][ts])||Yr,ss=reactExports.useMemo(()=>rs,Object.values(rs));return reactExports.createElement(is.Provider,{value:ss},_i)}function ns(Xr,qr){const _i=(qr==null?void 0:qr[Nr][ts])||Yr,rs=reactExports.useContext(_i);if(rs)return rs;if(Zr!==void 0)return Zr;throw new Error(`\`${Xr}\` must be used within \`${Wr}\``)}return es.displayName=Wr+"Provider",[es,ns]}const Gr=()=>{const Wr=Ur.map(Zr=>reactExports.createContext(Zr));return function(Yr){const ts=(Yr==null?void 0:Yr[Nr])||Wr;return reactExports.useMemo(()=>({[`__scope${Nr}`]:{...Yr,[Nr]:ts}}),[Yr,ts])}};return Gr.scopeName=Nr,[jr,$c512c27ab02ef895$var$composeContextScopes(Gr,..._r)]}function $c512c27ab02ef895$var$composeContextScopes(...Nr){const _r=Nr[0];if(Nr.length===1)return _r;const Ur=()=>{const jr=Nr.map(Gr=>({useScope:Gr(),scopeName:Gr.scopeName}));return function(Wr){const Zr=jr.reduce((Yr,{useScope:ts,scopeName:es})=>{const Xr=ts(Wr)[`__scope${es}`];return{...Yr,...Xr}},{});return reactExports.useMemo(()=>({[`__scope${_r.scopeName}`]:Zr}),[Zr])}};return Ur.scopeName=_r.scopeName,Ur}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Nr){const _r=reactExports.useRef(Nr);return reactExports.useEffect(()=>{_r.current=Nr}),reactExports.useMemo(()=>(...Ur)=>{var jr;return(jr=_r.current)===null||jr===void 0?void 0:jr.call(_r,...Ur)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:Nr,defaultProp:_r,onChange:Ur=()=>{}}){const[jr,Gr]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:_r,onChange:Ur}),Wr=Nr!==void 0,Zr=Wr?Nr:jr,Yr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Ur),ts=reactExports.useCallback(es=>{if(Wr){const Xr=typeof es=="function"?es(Nr):es;Xr!==Nr&&Yr(Xr)}else Gr(es)},[Wr,Nr,Gr,Yr]);return[Zr,ts]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:Nr,onChange:_r}){const Ur=reactExports.useState(Nr),[jr]=Ur,Gr=reactExports.useRef(jr),Wr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_r);return reactExports.useEffect(()=>{Gr.current!==jr&&(Wr(jr),Gr.current=jr)},[jr,Gr,Wr]),Ur}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function $6ed0406888f73fc4$var$setRef(Nr,_r){typeof Nr=="function"?Nr(_r):Nr!=null&&(Nr.current=_r)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...Nr){return _r=>Nr.forEach(Ur=>$6ed0406888f73fc4$var$setRef(Ur,_r))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...Nr){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...Nr),Nr)}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((Nr,_r)=>{const{children:Ur,...jr}=Nr,Gr=reactExports.Children.toArray(Ur),Wr=Gr.find($5e63c961fc1ce211$var$isSlottable);if(Wr){const Zr=Wr.props.children,Yr=Gr.map(ts=>ts===Wr?reactExports.Children.count(Zr)>1?reactExports.Children.only(null):reactExports.isValidElement(Zr)?Zr.props.children:null:ts);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},jr,{ref:_r}),reactExports.isValidElement(Zr)?reactExports.cloneElement(Zr,void 0,Yr):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},jr,{ref:_r}),Ur)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((Nr,_r)=>{const{children:Ur,...jr}=Nr;return reactExports.isValidElement(Ur)?reactExports.cloneElement(Ur,{...$5e63c961fc1ce211$var$mergeProps(jr,Ur.props),ref:_r?$6ed0406888f73fc4$export$43e446d32b3d21af(_r,Ur.ref):Ur.ref}):reactExports.Children.count(Ur)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:Nr})=>reactExports.createElement(reactExports.Fragment,null,Nr);function $5e63c961fc1ce211$var$isSlottable(Nr){return reactExports.isValidElement(Nr)&&Nr.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(Nr,_r){const Ur={..._r};for(const jr in _r){const Gr=Nr[jr],Wr=_r[jr];/^on[A-Z]/.test(jr)?Gr&&Wr?Ur[jr]=(...Yr)=>{Wr(...Yr),Gr(...Yr)}:Gr&&(Ur[jr]=Gr):jr==="style"?Ur[jr]={...Gr,...Wr}:jr==="className"&&(Ur[jr]=[Gr,Wr].filter(Boolean).join(" "))}return{...Nr,...Ur}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((Nr,_r)=>{const Ur=reactExports.forwardRef((jr,Gr)=>{const{asChild:Wr,...Zr}=jr,Yr=Wr?$5e63c961fc1ce211$export$8c6ed5c666ac1360:_r;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(Yr,_extends$1({},Zr,{ref:Gr}))});return Ur.displayName=`Primitive.${_r}`,{...Nr,[_r]:Ur}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(Nr,_r){Nr&&reactDomExports.flushSync(()=>Nr.dispatchEvent(_r))}function $fe963b355347cc68$export$3e6543de14f8614f(Nr,_r){return reactExports.useReducer((Ur,jr)=>{const Gr=_r[Ur][jr];return Gr??Ur},Nr)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=Nr=>{const{present:_r,children:Ur}=Nr,jr=$921a889cee6df7e8$var$usePresence(_r),Gr=typeof Ur=="function"?Ur({present:jr.isPresent}):reactExports.Children.only(Ur),Wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(jr.ref,Gr.ref);return typeof Ur=="function"||jr.isPresent?reactExports.cloneElement(Gr,{ref:Wr}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(Nr){const[_r,Ur]=reactExports.useState(),jr=reactExports.useRef({}),Gr=reactExports.useRef(Nr),Wr=reactExports.useRef("none"),Zr=Nr?"mounted":"unmounted",[Yr,ts]=$fe963b355347cc68$export$3e6543de14f8614f(Zr,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const es=$921a889cee6df7e8$var$getAnimationName(jr.current);Wr.current=Yr==="mounted"?es:"none"},[Yr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const es=jr.current,ns=Gr.current;if(ns!==Nr){const qr=Wr.current,_i=$921a889cee6df7e8$var$getAnimationName(es);Nr?ts("MOUNT"):_i==="none"||(es==null?void 0:es.display)==="none"?ts("UNMOUNT"):ts(ns&&qr!==_i?"ANIMATION_OUT":"UNMOUNT"),Gr.current=Nr}},[Nr,ts]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(_r){const es=Xr=>{const _i=$921a889cee6df7e8$var$getAnimationName(jr.current).includes(Xr.animationName);Xr.target===_r&&_i&&reactDomExports.flushSync(()=>ts("ANIMATION_END"))},ns=Xr=>{Xr.target===_r&&(Wr.current=$921a889cee6df7e8$var$getAnimationName(jr.current))};return _r.addEventListener("animationstart",ns),_r.addEventListener("animationcancel",es),_r.addEventListener("animationend",es),()=>{_r.removeEventListener("animationstart",ns),_r.removeEventListener("animationcancel",es),_r.removeEventListener("animationend",es)}}else ts("ANIMATION_END")},[_r,ts]),{isPresent:["mounted","unmountSuspended"].includes(Yr),ref:reactExports.useCallback(es=>{es&&(jr.current=getComputedStyle(es)),Ur(es)},[])}}function $921a889cee6df7e8$var$getAnimationName(Nr){return(Nr==null?void 0:Nr.animationName)||"none"}const $1746a345f3d73bb7$var$useReactId=$2AODx$react["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(Nr){const[_r,Ur]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{Nr||Ur(jr=>jr??String($1746a345f3d73bb7$var$count++))},[Nr]),Nr||(_r?`radix-${_r}`:"")}const $409067139f391064$var$COLLAPSIBLE_NAME="Collapsible",[$409067139f391064$var$createCollapsibleContext,$409067139f391064$export$952b32dcbe73087a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($409067139f391064$var$COLLAPSIBLE_NAME),[$409067139f391064$var$CollapsibleProvider,$409067139f391064$var$useCollapsibleContext]=$409067139f391064$var$createCollapsibleContext($409067139f391064$var$COLLAPSIBLE_NAME),$409067139f391064$export$6eb0f7ddcda6131f=reactExports.forwardRef((Nr,_r)=>{const{__scopeCollapsible:Ur,open:jr,defaultOpen:Gr,disabled:Wr,onOpenChange:Zr,...Yr}=Nr,[ts=!1,es]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:jr,defaultProp:Gr,onChange:Zr});return reactExports.createElement($409067139f391064$var$CollapsibleProvider,{scope:Ur,disabled:Wr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:ts,onOpenToggle:reactExports.useCallback(()=>es(ns=>!ns),[es])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$409067139f391064$var$getState(ts),"data-disabled":Wr?"":void 0},Yr,{ref:_r})))}),$409067139f391064$var$TRIGGER_NAME="CollapsibleTrigger",$409067139f391064$export$c135dce7b15bbbdc=reactExports.forwardRef((Nr,_r)=>{const{__scopeCollapsible:Ur,...jr}=Nr,Gr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$TRIGGER_NAME,Ur);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-controls":Gr.contentId,"aria-expanded":Gr.open||!1,"data-state":$409067139f391064$var$getState(Gr.open),"data-disabled":Gr.disabled?"":void 0,disabled:Gr.disabled},jr,{ref:_r,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onClick,Gr.onOpenToggle)}))}),$409067139f391064$var$CONTENT_NAME="CollapsibleContent",$409067139f391064$export$aadde00976f34151=reactExports.forwardRef((Nr,_r)=>{const{forceMount:Ur,...jr}=Nr,Gr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,Nr.__scopeCollapsible);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:Ur||Gr.open},({present:Wr})=>reactExports.createElement($409067139f391064$var$CollapsibleContentImpl,_extends$1({},jr,{ref:_r,present:Wr})))}),$409067139f391064$var$CollapsibleContentImpl=reactExports.forwardRef((Nr,_r)=>{const{__scopeCollapsible:Ur,present:jr,children:Gr,...Wr}=Nr,Zr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,Ur),[Yr,ts]=reactExports.useState(jr),es=reactExports.useRef(null),ns=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,es),Xr=reactExports.useRef(0),qr=Xr.current,_i=reactExports.useRef(0),rs=_i.current,is=Zr.open||Yr,ss=reactExports.useRef(is),os=reactExports.useRef();return reactExports.useEffect(()=>{const ls=requestAnimationFrame(()=>ss.current=!1);return()=>cancelAnimationFrame(ls)},[]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const ls=es.current;if(ls){os.current=os.current||{transitionDuration:ls.style.transitionDuration,animationName:ls.style.animationName},ls.style.transitionDuration="0s",ls.style.animationName="none";const cs=ls.getBoundingClientRect();Xr.current=cs.height,_i.current=cs.width,ss.current||(ls.style.transitionDuration=os.current.transitionDuration,ls.style.animationName=os.current.animationName),ts(jr)}},[Zr.open,jr]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$409067139f391064$var$getState(Zr.open),"data-disabled":Zr.disabled?"":void 0,id:Zr.contentId,hidden:!is},Wr,{ref:ns,style:{"--radix-collapsible-content-height":qr?`${qr}px`:void 0,"--radix-collapsible-content-width":rs?`${rs}px`:void 0,...Nr.style}}),is&&Gr)});function $409067139f391064$var$getState(Nr){return Nr?"open":"closed"}const $409067139f391064$export$be92b6f5f03c0fe9=$409067139f391064$export$6eb0f7ddcda6131f,$409067139f391064$export$41fb9f06171c75f4=$409067139f391064$export$c135dce7b15bbbdc,$409067139f391064$export$7c6e2c02157bb7d2=$409067139f391064$export$aadde00976f34151,ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(_r){super(_r),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(_r){return{didCatch:!0,error:_r}}resetErrorBoundary(){const{error:_r}=this.state;if(_r!==null){for(var Ur,jr,Gr=arguments.length,Wr=new Array(Gr),Zr=0;Zr<Gr;Zr++)Wr[Zr]=arguments[Zr];(Ur=(jr=this.props).onReset)===null||Ur===void 0||Ur.call(jr,{args:Wr,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(_r,Ur){var jr,Gr;(jr=(Gr=this.props).onError)===null||jr===void 0||jr.call(Gr,_r,Ur)}componentDidUpdate(_r,Ur){const{didCatch:jr}=this.state,{resetKeys:Gr}=this.props;if(jr&&Ur.error!==null&&hasArrayChanged(_r.resetKeys,Gr)){var Wr,Zr;(Wr=(Zr=this.props).onReset)===null||Wr===void 0||Wr.call(Zr,{next:Gr,prev:_r.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:_r,fallbackRender:Ur,FallbackComponent:jr,fallback:Gr}=this.props,{didCatch:Wr,error:Zr}=this.state;let Yr=_r;if(Wr){const ts={error:Zr,resetErrorBoundary:this.resetErrorBoundary};if(reactExports.isValidElement(Gr))Yr=Gr;else if(typeof Ur=="function")Yr=Ur(ts);else if(jr)Yr=reactExports.createElement(jr,ts);else throw Zr}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:Wr,error:Zr,resetErrorBoundary:this.resetErrorBoundary}},Yr)}}function hasArrayChanged(){let Nr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Nr.length!==_r.length||Nr.some((Ur,jr)=>!Object.is(Ur,_r[jr]))}var e="colors",t="sizes",r="space",n={gap:r,gridGap:r,columnGap:r,gridColumnGap:r,rowGap:r,gridRowGap:r,inset:r,insetBlock:r,insetBlockEnd:r,insetBlockStart:r,insetInline:r,insetInlineEnd:r,insetInlineStart:r,margin:r,marginTop:r,marginRight:r,marginBottom:r,marginLeft:r,marginBlock:r,marginBlockEnd:r,marginBlockStart:r,marginInline:r,marginInlineEnd:r,marginInlineStart:r,padding:r,paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r,paddingBlock:r,paddingBlockEnd:r,paddingBlockStart:r,paddingInline:r,paddingInlineEnd:r,paddingInlineStart:r,top:r,right:r,bottom:r,left:r,scrollMargin:r,scrollMarginTop:r,scrollMarginRight:r,scrollMarginBottom:r,scrollMarginLeft:r,scrollMarginX:r,scrollMarginY:r,scrollMarginBlock:r,scrollMarginBlockEnd:r,scrollMarginBlockStart:r,scrollMarginInline:r,scrollMarginInlineEnd:r,scrollMarginInlineStart:r,scrollPadding:r,scrollPaddingTop:r,scrollPaddingRight:r,scrollPaddingBottom:r,scrollPaddingLeft:r,scrollPaddingX:r,scrollPaddingY:r,scrollPaddingBlock:r,scrollPaddingBlockEnd:r,scrollPaddingBlockStart:r,scrollPaddingInline:r,scrollPaddingInlineEnd:r,scrollPaddingInlineStart:r,fontSize:"fontSizes",background:e,backgroundColor:e,backgroundImage:e,borderImage:e,border:e,borderBlock:e,borderBlockEnd:e,borderBlockStart:e,borderBottom:e,borderBottomColor:e,borderColor:e,borderInline:e,borderInlineEnd:e,borderInlineStart:e,borderLeft:e,borderLeftColor:e,borderRight:e,borderRightColor:e,borderTop:e,borderTopColor:e,caretColor:e,color:e,columnRuleColor:e,fill:e,outline:e,outlineColor:e,stroke:e,textDecorationColor:e,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t,minBlockSize:t,maxBlockSize:t,inlineSize:t,minInlineSize:t,maxInlineSize:t,width:t,minWidth:t,maxWidth:t,height:t,minHeight:t,maxHeight:t,flexBasis:t,gridTemplateColumns:t,gridTemplateRows:t,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i=(Nr,_r)=>typeof _r=="function"?{"()":Function.prototype.toString.call(_r)}:_r,o=()=>{const Nr=Object.create(null);return(_r,Ur,...jr)=>{const Gr=(Wr=>JSON.stringify(Wr,i))(_r);return Gr in Nr?Nr[Gr]:Nr[Gr]=Ur(_r,...jr)}},l=Symbol.for("sxs.internal"),s=(Nr,_r)=>Object.defineProperties(Nr,Object.getOwnPropertyDescriptors(_r)),a=Nr=>{for(const _r in Nr)return!0;return!1},{hasOwnProperty:c}=Object.prototype,d=Nr=>Nr.includes("-")?Nr:Nr.replace(/[A-Z]/g,_r=>"-"+_r.toLowerCase()),g=/\s+(?![^()]*\))/,p=Nr=>_r=>Nr(...typeof _r=="string"?String(_r).split(g):[_r]),u={appearance:Nr=>({WebkitAppearance:Nr,appearance:Nr}),backfaceVisibility:Nr=>({WebkitBackfaceVisibility:Nr,backfaceVisibility:Nr}),backdropFilter:Nr=>({WebkitBackdropFilter:Nr,backdropFilter:Nr}),backgroundClip:Nr=>({WebkitBackgroundClip:Nr,backgroundClip:Nr}),boxDecorationBreak:Nr=>({WebkitBoxDecorationBreak:Nr,boxDecorationBreak:Nr}),clipPath:Nr=>({WebkitClipPath:Nr,clipPath:Nr}),content:Nr=>({content:Nr.includes('"')||Nr.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(Nr)?Nr:`"${Nr}"`}),hyphens:Nr=>({WebkitHyphens:Nr,hyphens:Nr}),maskImage:Nr=>({WebkitMaskImage:Nr,maskImage:Nr}),maskSize:Nr=>({WebkitMaskSize:Nr,maskSize:Nr}),tabSize:Nr=>({MozTabSize:Nr,tabSize:Nr}),textSizeAdjust:Nr=>({WebkitTextSizeAdjust:Nr,textSizeAdjust:Nr}),userSelect:Nr=>({WebkitUserSelect:Nr,userSelect:Nr}),marginBlock:p((Nr,_r)=>({marginBlockStart:Nr,marginBlockEnd:_r||Nr})),marginInline:p((Nr,_r)=>({marginInlineStart:Nr,marginInlineEnd:_r||Nr})),maxSize:p((Nr,_r)=>({maxBlockSize:Nr,maxInlineSize:_r||Nr})),minSize:p((Nr,_r)=>({minBlockSize:Nr,minInlineSize:_r||Nr})),paddingBlock:p((Nr,_r)=>({paddingBlockStart:Nr,paddingBlockEnd:_r||Nr})),paddingInline:p((Nr,_r)=>({paddingInlineStart:Nr,paddingInlineEnd:_r||Nr}))},h=/([\d.]+)([^]*)/,f=(Nr,_r)=>Nr.length?Nr.reduce((Ur,jr)=>(Ur.push(..._r.map(Gr=>Gr.includes("&")?Gr.replace(/&/g,/[ +>|~]/.test(jr)&&/&.*&/.test(Gr)?`:is(${jr})`:jr):jr+" "+Gr)),Ur),[]):_r,m$1=(Nr,_r)=>Nr in b&&typeof _r=="string"?_r.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(Ur,jr,Gr,Wr)=>jr+(Gr==="stretch"?`-moz-available${Wr};${d(Nr)}:${jr}-webkit-fill-available`:`-moz-fit-content${Wr};${d(Nr)}:${jr}fit-content`)+Wr):String(_r),b={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S=Nr=>Nr?Nr+"-":"",k$1=(Nr,_r,Ur)=>Nr.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(jr,Gr,Wr,Zr,Yr)=>Zr=="$"==!!Wr?jr:(Gr||Zr=="--"?"calc(":"")+"var(--"+(Zr==="$"?S(_r)+(Yr.includes("$")?"":S(Ur))+Yr.replace(/\$/g,"-"):Yr)+")"+(Gr||Zr=="--"?"*"+(Gr||"")+(Wr||"1")+")":"")),y=/\s*,\s*(?![^()]*\))/,B$1=Object.prototype.toString,$=(Nr,_r,Ur,jr,Gr)=>{let Wr,Zr,Yr;const ts=(es,ns,Xr)=>{let qr,_i;const rs=is=>{for(qr in is){const ls=qr.charCodeAt(0)===64,cs=ls&&Array.isArray(is[qr])?is[qr]:[is[qr]];for(_i of cs){const ds=/[A-Z]/.test(os=qr)?os:os.replace(/-[^]/g,ms=>ms[1].toUpperCase()),fs=typeof _i=="object"&&_i&&_i.toString===B$1&&(!jr.utils[ds]||!ns.length);if(ds in jr.utils&&!fs){const ms=jr.utils[ds];if(ms!==Zr){Zr=ms,rs(ms(_i)),Zr=null;continue}}else if(ds in u){const ms=u[ds];if(ms!==Yr){Yr=ms,rs(ms(_i)),Yr=null;continue}}if(ls&&(ss=qr.slice(1)in jr.media?"@media "+jr.media[qr.slice(1)]:qr,qr=ss.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(ms,ps,ys,ws,xs,Es)=>{const Rs=h.test(ps),_s=.0625*(Rs?-1:1),[Bs,vs]=Rs?[ws,ps]:[ps,ws];return"("+(ys[0]==="="?"":ys[0]===">"===Rs?"max-":"min-")+Bs+":"+(ys[0]!=="="&&ys.length===1?vs.replace(h,(Cs,Ss,As)=>Number(Ss)+_s*(ys===">"?1:-1)+As):vs)+(xs?") and ("+(xs[0]===">"?"min-":"max-")+Bs+":"+(xs.length===1?Es.replace(h,(Cs,Ss,As)=>Number(Ss)+_s*(xs===">"?-1:1)+As):Es):"")+")"})),fs){const ms=ls?Xr.concat(qr):[...Xr],ps=ls?[...ns]:f(ns,qr.split(y));Wr!==void 0&&Gr(x$1(...Wr)),Wr=void 0,ts(_i,ps,ms)}else Wr===void 0&&(Wr=[[],ns,Xr]),qr=ls||qr.charCodeAt(0)!==36?qr:`--${S(jr.prefix)}${qr.slice(1).replace(/\$/g,"-")}`,_i=fs?_i:typeof _i=="number"?_i&&ds in I$1?String(_i)+"px":String(_i):k$1(m$1(ds,_i??""),jr.prefix,jr.themeMap[ds]),Wr[0].push(`${ls?`${qr} `:`${d(qr)}:`}${_i}`)}}var ss,os};rs(es),Wr!==void 0&&Gr(x$1(...Wr)),Wr=void 0};ts(Nr,_r,Ur)},x$1=(Nr,_r,Ur)=>`${Ur.map(jr=>`${jr}{`).join("")}${_r.length?`${_r.join(",")}{`:""}${Nr.join(";")}${_r.length?"}":""}${Array(Ur.length?Ur.length+1:0).join("}")}`,I$1={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R$1=Nr=>String.fromCharCode(Nr+(Nr>25?39:97)),z$2=Nr=>(_r=>{let Ur,jr="";for(Ur=Math.abs(_r);Ur>52;Ur=Ur/52|0)jr=R$1(Ur%52)+jr;return R$1(Ur%52)+jr})(((_r,Ur)=>{let jr=Ur.length;for(;jr;)_r=33*_r^Ur.charCodeAt(--jr);return _r})(5381,JSON.stringify(Nr))>>>0),W=["themed","global","styled","onevar","resonevar","allvar","inline"],j$1=Nr=>{if(Nr.href&&!Nr.href.startsWith(location.origin))return!1;try{return!!Nr.cssRules}catch{return!1}},E=Nr=>{let _r;const Ur=()=>{const{cssRules:Gr}=_r.sheet;return[].map.call(Gr,(Wr,Zr)=>{const{cssText:Yr}=Wr;let ts="";if(Yr.startsWith("--sxs"))return"";if(Gr[Zr-1]&&(ts=Gr[Zr-1].cssText).startsWith("--sxs")){if(!Wr.cssRules.length)return"";for(const es in _r.rules)if(_r.rules[es].group===Wr)return`--sxs{--sxs:${[..._r.rules[es].cache].join(" ")}}${Yr}`;return Wr.cssRules.length?`${ts}${Yr}`:""}return Yr}).join("")},jr=()=>{if(_r){const{rules:Yr,sheet:ts}=_r;if(!ts.deleteRule){for(;Object(Object(ts.cssRules)[0]).type===3;)ts.cssRules.splice(0,1);ts.cssRules=[]}for(const es in Yr)delete Yr[es]}const Gr=Object(Nr).styleSheets||[];for(const Yr of Gr)if(j$1(Yr)){for(let ts=0,es=Yr.cssRules;es[ts];++ts){const ns=Object(es[ts]);if(ns.type!==1)continue;const Xr=Object(es[ts+1]);if(Xr.type!==4)continue;++ts;const{cssText:qr}=ns;if(!qr.startsWith("--sxs"))continue;const _i=qr.slice(14,-3).trim().split(/\s+/),rs=W[_i[0]];rs&&(_r||(_r={sheet:Yr,reset:jr,rules:{},toString:Ur}),_r.rules[rs]={group:Xr,index:ts,cache:new Set(_i)})}if(_r)break}if(!_r){const Yr=(ts,es)=>({type:es,cssRules:[],insertRule(ns,Xr){this.cssRules.splice(Xr,0,Yr(ns,{import:3,undefined:1}[(ns.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return ts==="@media{}"?`@media{${[].map.call(this.cssRules,ns=>ns.cssText).join("")}}`:ts}});_r={sheet:Nr?(Nr.head||Nr).appendChild(document.createElement("style")).sheet:Yr("","text/css"),rules:{},reset:jr,toString:Ur}}const{sheet:Wr,rules:Zr}=_r;for(let Yr=W.length-1;Yr>=0;--Yr){const ts=W[Yr];if(!Zr[ts]){const es=W[Yr+1],ns=Zr[es]?Zr[es].index:Wr.cssRules.length;Wr.insertRule("@media{}",ns),Wr.insertRule(`--sxs{--sxs:${Yr}}`,ns),Zr[ts]={group:Wr.cssRules[ns+1],index:ns,cache:new Set([Yr])}}v(Zr[ts])}};return jr(),_r},v=Nr=>{const _r=Nr.group;let Ur=_r.cssRules.length;Nr.apply=jr=>{try{_r.insertRule(jr,Ur),++Ur}catch{}}},T$1=Symbol(),w=o(),M=(Nr,_r)=>w(Nr,()=>(...Ur)=>{let jr={type:null,composers:new Set};for(const Gr of Ur)if(Gr!=null)if(Gr[l]){jr.type==null&&(jr.type=Gr[l].type);for(const Wr of Gr[l].composers)jr.composers.add(Wr)}else Gr.constructor!==Object||Gr.$$typeof?jr.type==null&&(jr.type=Gr):jr.composers.add(C(Gr,Nr));return jr.type==null&&(jr.type="span"),jr.composers.size||jr.composers.add(["PJLV",{},[],[],{},[]]),P$1(Nr,jr,_r)}),C=({variants:Nr,compoundVariants:_r,defaultVariants:Ur,...jr},Gr)=>{const Wr=`${S(Gr.prefix)}c-${z$2(jr)}`,Zr=[],Yr=[],ts=Object.create(null),es=[];for(const qr in Ur)ts[qr]=String(Ur[qr]);if(typeof Nr=="object"&&Nr)for(const qr in Nr){ns=ts,Xr=qr,c.call(ns,Xr)||(ts[qr]="undefined");const _i=Nr[qr];for(const rs in _i){const is={[qr]:String(rs)};String(rs)==="undefined"&&es.push(qr);const ss=_i[rs],os=[is,ss,!a(ss)];Zr.push(os)}}var ns,Xr;if(typeof _r=="object"&&_r)for(const qr of _r){let{css:_i,...rs}=qr;_i=typeof _i=="object"&&_i||{};for(const ss in rs)rs[ss]=String(rs[ss]);const is=[rs,_i,!a(_i)];Yr.push(is)}return[Wr,jr,Zr,Yr,ts,es]},P$1=(Nr,_r,Ur)=>{const[jr,Gr,Wr,Zr]=L(_r.composers),Yr=typeof _r.type=="function"||_r.type.$$typeof?(Xr=>{function qr(){for(let _i=0;_i<qr[T$1].length;_i++){const[rs,is]=qr[T$1][_i];Xr.rules[rs].apply(is)}return qr[T$1]=[],null}return qr[T$1]=[],qr.rules={},W.forEach(_i=>qr.rules[_i]={apply:rs=>qr[T$1].push([_i,rs])}),qr})(Ur):null,ts=(Yr||Ur).rules,es=`.${jr}${Gr.length>1?`:where(.${Gr.slice(1).join(".")})`:""}`,ns=Xr=>{Xr=typeof Xr=="object"&&Xr||A$1;const{css:qr,..._i}=Xr,rs={};for(const os in Wr)if(delete _i[os],os in Xr){let ls=Xr[os];typeof ls=="object"&&ls?rs[os]={"@initial":Wr[os],...ls}:(ls=String(ls),rs[os]=ls!=="undefined"||Zr.has(os)?ls:Wr[os])}else rs[os]=Wr[os];const is=new Set([...Gr]);for(const[os,ls,cs,ds]of _r.composers){Ur.rules.styled.cache.has(os)||(Ur.rules.styled.cache.add(os),$(ls,[`.${os}`],[],Nr,ps=>{ts.styled.apply(ps)}));const fs=O$1(cs,rs,Nr.media),ms=O$1(ds,rs,Nr.media,!0);for(const ps of fs)if(ps!==void 0)for(const[ys,ws,xs]of ps){const Es=`${os}-${z$2(ws)}-${ys}`;is.add(Es);const Rs=(xs?Ur.rules.resonevar:Ur.rules.onevar).cache,_s=xs?ts.resonevar:ts.onevar;Rs.has(Es)||(Rs.add(Es),$(ws,[`.${Es}`],[],Nr,Bs=>{_s.apply(Bs)}))}for(const ps of ms)if(ps!==void 0)for(const[ys,ws]of ps){const xs=`${os}-${z$2(ws)}-${ys}`;is.add(xs),Ur.rules.allvar.cache.has(xs)||(Ur.rules.allvar.cache.add(xs),$(ws,[`.${xs}`],[],Nr,Es=>{ts.allvar.apply(Es)}))}}if(typeof qr=="object"&&qr){const os=`${jr}-i${z$2(qr)}-css`;is.add(os),Ur.rules.inline.cache.has(os)||(Ur.rules.inline.cache.add(os),$(qr,[`.${os}`],[],Nr,ls=>{ts.inline.apply(ls)}))}for(const os of String(Xr.className||"").trim().split(/\s+/))os&&is.add(os);const ss=_i.className=[...is].join(" ");return{type:_r.type,className:ss,selector:es,props:_i,toString:()=>ss,deferredInjector:Yr}};return s(ns,{className:jr,selector:es,[l]:_r,toString:()=>(Ur.rules.styled.cache.has(jr)||ns(),jr)})},L=Nr=>{let _r="";const Ur=[],jr={},Gr=[];for(const[Wr,,,,Zr,Yr]of Nr){_r===""&&(_r=Wr),Ur.push(Wr),Gr.push(...Yr);for(const ts in Zr){const es=Zr[ts];(jr[ts]===void 0||es!=="undefined"||Yr.includes(es))&&(jr[ts]=es)}}return[_r,Ur,jr,new Set(Gr)]},O$1=(Nr,_r,Ur,jr)=>{const Gr=[];e:for(let[Wr,Zr,Yr]of Nr){if(Yr)continue;let ts,es=0,ns=!1;for(ts in Wr){const Xr=Wr[ts];let qr=_r[ts];if(qr!==Xr){if(typeof qr!="object"||!qr)continue e;{let _i,rs,is=0;for(const ss in qr){if(Xr===String(qr[ss])){if(ss!=="@initial"){const os=ss.slice(1);(rs=rs||[]).push(os in Ur?Ur[os]:ss.replace(/^@media ?/,"")),ns=!0}es+=is,_i=!0}++is}if(rs&&rs.length&&(Zr={["@media "+rs.join(", ")]:Zr}),!_i)continue e}}}(Gr[es]=Gr[es]||[]).push([jr?"cv":`${ts}-${Wr[ts]}`,Zr,ns])}return Gr},A$1={},N$1=o(),D=(Nr,_r)=>N$1(Nr,()=>(...Ur)=>{const jr=()=>{for(let Gr of Ur){Gr=typeof Gr=="object"&&Gr||{};let Wr=z$2(Gr);if(!_r.rules.global.cache.has(Wr)){if(_r.rules.global.cache.add(Wr),"@import"in Gr){let Zr=[].indexOf.call(_r.sheet.cssRules,_r.rules.themed.group)-1;for(let Yr of[].concat(Gr["@import"]))Yr=Yr.includes('"')||Yr.includes("'")?Yr:`"${Yr}"`,_r.sheet.insertRule(`@import ${Yr};`,Zr++);delete Gr["@import"]}$(Gr,[],[],Nr,Zr=>{_r.rules.global.apply(Zr)})}}return""};return s(jr,{toString:jr})}),H$1=o(),V$1=(Nr,_r)=>H$1(Nr,()=>Ur=>{const jr=`${S(Nr.prefix)}k-${z$2(Ur)}`,Gr=()=>{if(!_r.rules.global.cache.has(jr)){_r.rules.global.cache.add(jr);const Wr=[];$(Ur,[],[],Nr,Yr=>Wr.push(Yr));const Zr=`@keyframes ${jr}{${Wr.join("")}}`;_r.rules.global.apply(Zr)}return jr};return s(Gr,{get name(){return Gr()},toString:Gr})}),G$1=class{constructor(_r,Ur,jr,Gr){this.token=_r==null?"":String(_r),this.value=Ur==null?"":String(Ur),this.scale=jr==null?"":String(jr),this.prefix=Gr==null?"":String(Gr)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S(this.prefix)+S(this.scale)+this.token}toString(){return this.computedValue}},F=o(),J$1=(Nr,_r)=>F(Nr,()=>(Ur,jr)=>{jr=typeof Ur=="object"&&Ur||Object(jr);const Gr=`.${Ur=(Ur=typeof Ur=="string"?Ur:"")||`${S(Nr.prefix)}t-${z$2(jr)}`}`,Wr={},Zr=[];for(const ts in jr){Wr[ts]={};for(const es in jr[ts]){const ns=`--${S(Nr.prefix)}${ts}-${es}`,Xr=k$1(String(jr[ts][es]),Nr.prefix,ts);Wr[ts][es]=new G$1(es,Xr,ts,Nr.prefix),Zr.push(`${ns}:${Xr}`)}}const Yr=()=>{if(Zr.length&&!_r.rules.themed.cache.has(Ur)){_r.rules.themed.cache.add(Ur);const ts=`${jr===Nr.theme?":root,":""}.${Ur}{${Zr.join(";")}}`;_r.rules.themed.apply(ts)}return Ur};return{...Wr,get className(){return Yr()},selector:Gr,toString:Yr}}),U$1=o(),X,Y$1=o(),q$1=Nr=>{const _r=(Ur=>{let jr=!1;const Gr=U$1(Ur,Wr=>{jr=!0;const Zr="prefix"in(Wr=typeof Wr=="object"&&Wr||{})?String(Wr.prefix):"",Yr=typeof Wr.media=="object"&&Wr.media||{},ts=typeof Wr.root=="object"?Wr.root||null:globalThis.document||null,es=typeof Wr.theme=="object"&&Wr.theme||{},ns={prefix:Zr,media:Yr,theme:es,themeMap:typeof Wr.themeMap=="object"&&Wr.themeMap||{...n},utils:typeof Wr.utils=="object"&&Wr.utils||{}},Xr=E(ts),qr={css:M(ns,Xr),globalCss:D(ns,Xr),keyframes:V$1(ns,Xr),createTheme:J$1(ns,Xr),reset(){Xr.reset(),qr.theme.toString()},theme:{},sheet:Xr,config:ns,prefix:Zr,getCssText:Xr.toString,toString:Xr.toString};return String(qr.theme=qr.createTheme(es)),qr});return jr||Gr.reset(),Gr})(Nr);return _r.styled=(({config:Ur,sheet:jr})=>Y$1(Ur,()=>{const Gr=M(Ur,jr);return(...Wr)=>{const Zr=Gr(...Wr),Yr=Zr[l].type,ts=React$1.forwardRef((es,ns)=>{const Xr=es&&es.as||Yr,{props:qr,deferredInjector:_i}=Zr(es);return delete qr.as,qr.ref=ns,_i?React$1.createElement(React$1.Fragment,null,React$1.createElement(Xr,qr),React$1.createElement(_i,null)):React$1.createElement(Xr,qr)});return ts.className=Zr.className,ts.displayName=`Styled.${Yr.displayName||Yr.name||Yr}`,ts.selector=Zr.selector,ts.toString=()=>Zr.selector,ts[l]=Zr[l],ts}}))(_r),_r},K$1=()=>X||(X=q$1()),Q$1=(...Nr)=>K$1().createTheme(...Nr);function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(Nr){const _r=Nr+"CollectionProvider",[Ur,jr]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(_r),[Gr,Wr]=Ur(_r,{collectionRef:{current:null},itemMap:new Map}),Zr=_i=>{const{scope:rs,children:is}=_i,ss=React$1.useRef(null),os=React$1.useRef(new Map).current;return React$1.createElement(Gr,{scope:rs,itemMap:os,collectionRef:ss},is)},Yr=Nr+"CollectionSlot",ts=React$1.forwardRef((_i,rs)=>{const{scope:is,children:ss}=_i,os=Wr(Yr,is),ls=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(rs,os.collectionRef);return React$1.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:ls},ss)}),es=Nr+"CollectionItemSlot",ns="data-radix-collection-item",Xr=React$1.forwardRef((_i,rs)=>{const{scope:is,children:ss,...os}=_i,ls=React$1.useRef(null),cs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(rs,ls),ds=Wr(es,is);return React$1.useEffect(()=>(ds.itemMap.set(ls,{ref:ls,...os}),()=>void ds.itemMap.delete(ls))),React$1.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[ns]:"",ref:cs},ss)});function qr(_i){const rs=Wr(Nr+"CollectionConsumer",_i);return React$1.useCallback(()=>{const ss=rs.collectionRef.current;if(!ss)return[];const os=Array.from(ss.querySelectorAll(`[${ns}]`));return Array.from(rs.itemMap.values()).sort((ds,fs)=>os.indexOf(ds.ref.current)-os.indexOf(fs.ref.current))},[rs.collectionRef,rs.itemMap])}return[{Provider:Zr,Slot:ts,ItemSlot:Xr},qr,jr]}const $f631663db3294ace$var$DirectionContext=reactExports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(Nr){const _r=reactExports.useContext($f631663db3294ace$var$DirectionContext);return Nr||_r||"ltr"}const $d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=reactExports.forwardRef((Nr,_r)=>reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:Nr.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:Nr.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends$1({},Nr,{ref:_r}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=reactExports.forwardRef((Nr,_r)=>{const{__scopeRovingFocusGroup:Ur,orientation:jr,loop:Gr=!1,dir:Wr,currentTabStopId:Zr,defaultCurrentTabStopId:Yr,onCurrentTabStopIdChange:ts,onEntryFocus:es,...ns}=Nr,Xr=reactExports.useRef(null),qr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Xr),_i=$f631663db3294ace$export$b39126d51d94e6f3(Wr),[rs=null,is]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Zr,defaultProp:Yr,onChange:ts}),[ss,os]=reactExports.useState(!1),ls=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(es),cs=$d7bdfb9eb0fdf311$var$useCollection(Ur),ds=reactExports.useRef(!1),[fs,ms]=reactExports.useState(0);return reactExports.useEffect(()=>{const ps=Xr.current;if(ps)return ps.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,ls),()=>ps.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,ls)},[ls]),reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:Ur,orientation:jr,dir:_i,loop:Gr,currentTabStopId:rs,onItemFocus:reactExports.useCallback(ps=>is(ps),[is]),onItemShiftTab:reactExports.useCallback(()=>os(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>ms(ps=>ps+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>ms(ps=>ps-1),[])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:ss||fs===0?-1:0,"data-orientation":jr},ns,{ref:qr,style:{outline:"none",...Nr.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onMouseDown,()=>{ds.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onFocus,ps=>{const ys=!ds.current;if(ps.target===ps.currentTarget&&ys&&!ss){const ws=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(ps.currentTarget.dispatchEvent(ws),!ws.defaultPrevented){const xs=cs().filter(vs=>vs.focusable),Es=xs.find(vs=>vs.active),Rs=xs.find(vs=>vs.id===rs),Bs=[Es,Rs,...xs].filter(Boolean).map(vs=>vs.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(Bs)}}ds.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onBlur,()=>os(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=reactExports.forwardRef((Nr,_r)=>{const{__scopeRovingFocusGroup:Ur,focusable:jr=!0,active:Gr=!1,tabStopId:Wr,...Zr}=Nr,Yr=$1746a345f3d73bb7$export$f680877a34711e37(),ts=Wr||Yr,es=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,Ur),ns=es.currentTabStopId===ts,Xr=$d7bdfb9eb0fdf311$var$useCollection(Ur),{onFocusableItemAdd:qr,onFocusableItemRemove:_i}=es;return reactExports.useEffect(()=>{if(jr)return qr(),()=>_i()},[jr,qr,_i]),reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:Ur,id:ts,focusable:jr,active:Gr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({tabIndex:ns?0:-1,"data-orientation":es.orientation},Zr,{ref:_r,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onMouseDown,rs=>{jr?es.onItemFocus(ts):rs.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onFocus,()=>es.onItemFocus(ts)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onKeyDown,rs=>{if(rs.key==="Tab"&&rs.shiftKey){es.onItemShiftTab();return}if(rs.target!==rs.currentTarget)return;const is=$d7bdfb9eb0fdf311$var$getFocusIntent(rs,es.orientation,es.dir);if(is!==void 0){rs.preventDefault();let os=Xr().filter(ls=>ls.focusable).map(ls=>ls.ref.current);if(is==="last")os.reverse();else if(is==="prev"||is==="next"){is==="prev"&&os.reverse();const ls=os.indexOf(rs.currentTarget);os=es.loop?$d7bdfb9eb0fdf311$var$wrapArray(os,ls+1):os.slice(ls+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(os))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(Nr,_r){return _r!=="rtl"?Nr:Nr==="ArrowLeft"?"ArrowRight":Nr==="ArrowRight"?"ArrowLeft":Nr}function $d7bdfb9eb0fdf311$var$getFocusIntent(Nr,_r,Ur){const jr=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(Nr.key,Ur);if(!(_r==="vertical"&&["ArrowLeft","ArrowRight"].includes(jr))&&!(_r==="horizontal"&&["ArrowUp","ArrowDown"].includes(jr)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[jr]}function $d7bdfb9eb0fdf311$var$focusFirst(Nr){const _r=document.activeElement;for(const Ur of Nr)if(Ur===_r||(Ur.focus(),document.activeElement!==_r))return}function $d7bdfb9eb0fdf311$var$wrapArray(Nr,_r){return Nr.map((Ur,jr)=>Nr[(_r+jr)%Nr.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454,$69cb30bb0017df05$var$TABS_NAME="Tabs",[$69cb30bb0017df05$var$createTabsContext,$69cb30bb0017df05$export$355f5bd209d7b13a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($69cb30bb0017df05$var$TABS_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$69cb30bb0017df05$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$69cb30bb0017df05$var$TabsProvider,$69cb30bb0017df05$var$useTabsContext]=$69cb30bb0017df05$var$createTabsContext($69cb30bb0017df05$var$TABS_NAME),$69cb30bb0017df05$export$b2539bed5023c21c=reactExports.forwardRef((Nr,_r)=>{const{__scopeTabs:Ur,value:jr,onValueChange:Gr,defaultValue:Wr,orientation:Zr="horizontal",dir:Yr,activationMode:ts="automatic",...es}=Nr,ns=$f631663db3294ace$export$b39126d51d94e6f3(Yr),[Xr,qr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:jr,onChange:Gr,defaultProp:Wr});return reactExports.createElement($69cb30bb0017df05$var$TabsProvider,{scope:Ur,baseId:$1746a345f3d73bb7$export$f680877a34711e37(),value:Xr,onValueChange:qr,orientation:Zr,dir:ns,activationMode:ts},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({dir:ns,"data-orientation":Zr},es,{ref:_r})))}),$69cb30bb0017df05$var$TAB_LIST_NAME="TabsList",$69cb30bb0017df05$export$9712d22edc0d78c1=reactExports.forwardRef((Nr,_r)=>{const{__scopeTabs:Ur,loop:jr=!0,...Gr}=Nr,Wr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TAB_LIST_NAME,Ur),Zr=$69cb30bb0017df05$var$useRovingFocusGroupScope(Ur);return reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},Zr,{orientation:Wr.orientation,dir:Wr.dir,loop:jr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"tablist","aria-orientation":Wr.orientation},Gr,{ref:_r})))}),$69cb30bb0017df05$var$TRIGGER_NAME="TabsTrigger",$69cb30bb0017df05$export$8114b9fdfdf9f3ba=reactExports.forwardRef((Nr,_r)=>{const{__scopeTabs:Ur,value:jr,disabled:Gr=!1,...Wr}=Nr,Zr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TRIGGER_NAME,Ur),Yr=$69cb30bb0017df05$var$useRovingFocusGroupScope(Ur),ts=$69cb30bb0017df05$var$makeTriggerId(Zr.baseId,jr),es=$69cb30bb0017df05$var$makeContentId(Zr.baseId,jr),ns=jr===Zr.value;return reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},Yr,{focusable:!Gr,active:ns}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"tab","aria-selected":ns,"aria-controls":es,"data-state":ns?"active":"inactive","data-disabled":Gr?"":void 0,disabled:Gr,id:ts},Wr,{ref:_r,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onMouseDown,Xr=>{!Gr&&Xr.button===0&&Xr.ctrlKey===!1?Zr.onValueChange(jr):Xr.preventDefault()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onKeyDown,Xr=>{[" ","Enter"].includes(Xr.key)&&Zr.onValueChange(jr)}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onFocus,()=>{const Xr=Zr.activationMode!=="manual";!ns&&!Gr&&Xr&&Zr.onValueChange(jr)})})))}),$69cb30bb0017df05$var$CONTENT_NAME="TabsContent",$69cb30bb0017df05$export$bd905d70e8fd2ebb=reactExports.forwardRef((Nr,_r)=>{const{__scopeTabs:Ur,value:jr,forceMount:Gr,children:Wr,...Zr}=Nr,Yr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$CONTENT_NAME,Ur),ts=$69cb30bb0017df05$var$makeTriggerId(Yr.baseId,jr),es=$69cb30bb0017df05$var$makeContentId(Yr.baseId,jr),ns=jr===Yr.value,Xr=reactExports.useRef(ns);return reactExports.useEffect(()=>{const qr=requestAnimationFrame(()=>Xr.current=!1);return()=>cancelAnimationFrame(qr)},[]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:Gr||ns},({present:qr})=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":ns?"active":"inactive","data-orientation":Yr.orientation,role:"tabpanel","aria-labelledby":ts,hidden:!qr,id:es,tabIndex:0},Zr,{ref:_r,style:{...Nr.style,animationDuration:Xr.current?"0s":void 0}}),qr&&Wr))});function $69cb30bb0017df05$var$makeTriggerId(Nr,_r){return`${Nr}-trigger-${_r}`}function $69cb30bb0017df05$var$makeContentId(Nr,_r){return`${Nr}-content-${_r}`}const $69cb30bb0017df05$export$be92b6f5f03c0fe9=$69cb30bb0017df05$export$b2539bed5023c21c,$69cb30bb0017df05$export$54c2e3dc7acea9f5=$69cb30bb0017df05$export$9712d22edc0d78c1,$69cb30bb0017df05$export$41fb9f06171c75f4=$69cb30bb0017df05$export$8114b9fdfdf9f3ba,$69cb30bb0017df05$export$7c6e2c02157bb7d2=$69cb30bb0017df05$export$bd905d70e8fd2ebb;var lib$5={},Parser$3={},Tokenizer={},decode={},decodeDataHtml={};Object.defineProperty(decodeDataHtml,"__esModule",{value:!0});decodeDataHtml.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(Nr){return Nr.charCodeAt(0)}));var decodeDataXml={};Object.defineProperty(decodeDataXml,"__esModule",{value:!0});decodeDataXml.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(Nr){return Nr.charCodeAt(0)}));var decode_codepoint={};(function(Nr){var _r;Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.replaceCodePoint=Nr.fromCodePoint=void 0;var Ur=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);Nr.fromCodePoint=(_r=String.fromCodePoint)!==null&&_r!==void 0?_r:function(Wr){var Zr="";return Wr>65535&&(Wr-=65536,Zr+=String.fromCharCode(Wr>>>10&1023|55296),Wr=56320|Wr&1023),Zr+=String.fromCharCode(Wr),Zr};function jr(Wr){var Zr;return Wr>=55296&&Wr<=57343||Wr>1114111?65533:(Zr=Ur.get(Wr))!==null&&Zr!==void 0?Zr:Wr}Nr.replaceCodePoint=jr;function Gr(Wr){return(0,Nr.fromCodePoint)(jr(Wr))}Nr.default=Gr})(decode_codepoint);(function(Nr){var _r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Es,Rs,_s,Bs){Bs===void 0&&(Bs=_s);var vs=Object.getOwnPropertyDescriptor(Rs,_s);(!vs||("get"in vs?!Rs.__esModule:vs.writable||vs.configurable))&&(vs={enumerable:!0,get:function(){return Rs[_s]}}),Object.defineProperty(Es,Bs,vs)}:function(Es,Rs,_s,Bs){Bs===void 0&&(Bs=_s),Es[Bs]=Rs[_s]}),Ur=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Es,Rs){Object.defineProperty(Es,"default",{enumerable:!0,value:Rs})}:function(Es,Rs){Es.default=Rs}),jr=commonjsGlobal&&commonjsGlobal.__importStar||function(Es){if(Es&&Es.__esModule)return Es;var Rs={};if(Es!=null)for(var _s in Es)_s!=="default"&&Object.prototype.hasOwnProperty.call(Es,_s)&&_r(Rs,Es,_s);return Ur(Rs,Es),Rs},Gr=commonjsGlobal&&commonjsGlobal.__importDefault||function(Es){return Es&&Es.__esModule?Es:{default:Es}};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.decodeXML=Nr.decodeHTMLStrict=Nr.decodeHTMLAttribute=Nr.decodeHTML=Nr.determineBranch=Nr.EntityDecoder=Nr.DecodingMode=Nr.BinTrieFlags=Nr.fromCodePoint=Nr.replaceCodePoint=Nr.decodeCodePoint=Nr.xmlDecodeTree=Nr.htmlDecodeTree=void 0;var Wr=Gr(decodeDataHtml);Nr.htmlDecodeTree=Wr.default;var Zr=Gr(decodeDataXml);Nr.xmlDecodeTree=Zr.default;var Yr=jr(decode_codepoint);Nr.decodeCodePoint=Yr.default;var ts=decode_codepoint;Object.defineProperty(Nr,"replaceCodePoint",{enumerable:!0,get:function(){return ts.replaceCodePoint}}),Object.defineProperty(Nr,"fromCodePoint",{enumerable:!0,get:function(){return ts.fromCodePoint}});var es;(function(Es){Es[Es.NUM=35]="NUM",Es[Es.SEMI=59]="SEMI",Es[Es.EQUALS=61]="EQUALS",Es[Es.ZERO=48]="ZERO",Es[Es.NINE=57]="NINE",Es[Es.LOWER_A=97]="LOWER_A",Es[Es.LOWER_F=102]="LOWER_F",Es[Es.LOWER_X=120]="LOWER_X",Es[Es.LOWER_Z=122]="LOWER_Z",Es[Es.UPPER_A=65]="UPPER_A",Es[Es.UPPER_F=70]="UPPER_F",Es[Es.UPPER_Z=90]="UPPER_Z"})(es||(es={}));var ns=32,Xr;(function(Es){Es[Es.VALUE_LENGTH=49152]="VALUE_LENGTH",Es[Es.BRANCH_LENGTH=16256]="BRANCH_LENGTH",Es[Es.JUMP_TABLE=127]="JUMP_TABLE"})(Xr=Nr.BinTrieFlags||(Nr.BinTrieFlags={}));function qr(Es){return Es>=es.ZERO&&Es<=es.NINE}function _i(Es){return Es>=es.UPPER_A&&Es<=es.UPPER_F||Es>=es.LOWER_A&&Es<=es.LOWER_F}function rs(Es){return Es>=es.UPPER_A&&Es<=es.UPPER_Z||Es>=es.LOWER_A&&Es<=es.LOWER_Z||qr(Es)}function is(Es){return Es===es.EQUALS||rs(Es)}var ss;(function(Es){Es[Es.EntityStart=0]="EntityStart",Es[Es.NumericStart=1]="NumericStart",Es[Es.NumericDecimal=2]="NumericDecimal",Es[Es.NumericHex=3]="NumericHex",Es[Es.NamedEntity=4]="NamedEntity"})(ss||(ss={}));var os;(function(Es){Es[Es.Legacy=0]="Legacy",Es[Es.Strict=1]="Strict",Es[Es.Attribute=2]="Attribute"})(os=Nr.DecodingMode||(Nr.DecodingMode={}));var ls=function(){function Es(Rs,_s,Bs){this.decodeTree=Rs,this.emitCodePoint=_s,this.errors=Bs,this.state=ss.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=os.Strict}return Es.prototype.startEntity=function(Rs){this.decodeMode=Rs,this.state=ss.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},Es.prototype.write=function(Rs,_s){switch(this.state){case ss.EntityStart:return Rs.charCodeAt(_s)===es.NUM?(this.state=ss.NumericStart,this.consumed+=1,this.stateNumericStart(Rs,_s+1)):(this.state=ss.NamedEntity,this.stateNamedEntity(Rs,_s));case ss.NumericStart:return this.stateNumericStart(Rs,_s);case ss.NumericDecimal:return this.stateNumericDecimal(Rs,_s);case ss.NumericHex:return this.stateNumericHex(Rs,_s);case ss.NamedEntity:return this.stateNamedEntity(Rs,_s)}},Es.prototype.stateNumericStart=function(Rs,_s){return _s>=Rs.length?-1:(Rs.charCodeAt(_s)|ns)===es.LOWER_X?(this.state=ss.NumericHex,this.consumed+=1,this.stateNumericHex(Rs,_s+1)):(this.state=ss.NumericDecimal,this.stateNumericDecimal(Rs,_s))},Es.prototype.addToNumericResult=function(Rs,_s,Bs,vs){if(_s!==Bs){var Cs=Bs-_s;this.result=this.result*Math.pow(vs,Cs)+parseInt(Rs.substr(_s,Cs),vs),this.consumed+=Cs}},Es.prototype.stateNumericHex=function(Rs,_s){for(var Bs=_s;_s<Rs.length;){var vs=Rs.charCodeAt(_s);if(qr(vs)||_i(vs))_s+=1;else return this.addToNumericResult(Rs,Bs,_s,16),this.emitNumericEntity(vs,3)}return this.addToNumericResult(Rs,Bs,_s,16),-1},Es.prototype.stateNumericDecimal=function(Rs,_s){for(var Bs=_s;_s<Rs.length;){var vs=Rs.charCodeAt(_s);if(qr(vs))_s+=1;else return this.addToNumericResult(Rs,Bs,_s,10),this.emitNumericEntity(vs,2)}return this.addToNumericResult(Rs,Bs,_s,10),-1},Es.prototype.emitNumericEntity=function(Rs,_s){var Bs;if(this.consumed<=_s)return(Bs=this.errors)===null||Bs===void 0||Bs.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(Rs===es.SEMI)this.consumed+=1;else if(this.decodeMode===os.Strict)return 0;return this.emitCodePoint((0,Yr.replaceCodePoint)(this.result),this.consumed),this.errors&&(Rs!==es.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},Es.prototype.stateNamedEntity=function(Rs,_s){for(var Bs=this.decodeTree,vs=Bs[this.treeIndex],Cs=(vs&Xr.VALUE_LENGTH)>>14;_s<Rs.length;_s++,this.excess++){var Ss=Rs.charCodeAt(_s);if(this.treeIndex=ds(Bs,vs,this.treeIndex+Math.max(1,Cs),Ss),this.treeIndex<0)return this.result===0||this.decodeMode===os.Attribute&&(Cs===0||is(Ss))?0:this.emitNotTerminatedNamedEntity();if(vs=Bs[this.treeIndex],Cs=(vs&Xr.VALUE_LENGTH)>>14,Cs!==0){if(Ss===es.SEMI)return this.emitNamedEntityData(this.treeIndex,Cs,this.consumed+this.excess);this.decodeMode!==os.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},Es.prototype.emitNotTerminatedNamedEntity=function(){var Rs,_s=this,Bs=_s.result,vs=_s.decodeTree,Cs=(vs[Bs]&Xr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(Bs,Cs,this.consumed),(Rs=this.errors)===null||Rs===void 0||Rs.missingSemicolonAfterCharacterReference(),this.consumed},Es.prototype.emitNamedEntityData=function(Rs,_s,Bs){var vs=this.decodeTree;return this.emitCodePoint(_s===1?vs[Rs]&~Xr.VALUE_LENGTH:vs[Rs+1],Bs),_s===3&&this.emitCodePoint(vs[Rs+2],Bs),Bs},Es.prototype.end=function(){var Rs;switch(this.state){case ss.NamedEntity:return this.result!==0&&(this.decodeMode!==os.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ss.NumericDecimal:return this.emitNumericEntity(0,2);case ss.NumericHex:return this.emitNumericEntity(0,3);case ss.NumericStart:return(Rs=this.errors)===null||Rs===void 0||Rs.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ss.EntityStart:return 0}},Es}();Nr.EntityDecoder=ls;function cs(Es){var Rs="",_s=new ls(Es,function(Bs){return Rs+=(0,Yr.fromCodePoint)(Bs)});return function(vs,Cs){for(var Ss=0,As=0;(As=vs.indexOf("&",As))>=0;){Rs+=vs.slice(Ss,As),_s.startEntity(Cs);var Us=_s.write(vs,As+1);if(Us<0){Ss=As+_s.end();break}Ss=As+Us,As=Us===0?Ss+1:Ss}var Ks=Rs+vs.slice(Ss);return Rs="",Ks}}function ds(Es,Rs,_s,Bs){var vs=(Rs&Xr.BRANCH_LENGTH)>>7,Cs=Rs&Xr.JUMP_TABLE;if(vs===0)return Cs!==0&&Bs===Cs?_s:-1;if(Cs){var Ss=Bs-Cs;return Ss<0||Ss>=vs?-1:Es[_s+Ss]-1}for(var As=_s,Us=As+vs-1;As<=Us;){var Ks=As+Us>>>1,Ws=Es[Ks];if(Ws<Bs)As=Ks+1;else if(Ws>Bs)Us=Ks-1;else return Es[Ks+vs]}return-1}Nr.determineBranch=ds;var fs=cs(Wr.default),ms=cs(Zr.default);function ps(Es,Rs){return Rs===void 0&&(Rs=os.Legacy),fs(Es,Rs)}Nr.decodeHTML=ps;function ys(Es){return fs(Es,os.Attribute)}Nr.decodeHTMLAttribute=ys;function ws(Es){return fs(Es,os.Strict)}Nr.decodeHTMLStrict=ws;function xs(Es){return ms(Es,os.Strict)}Nr.decodeXML=xs})(decode);(function(Nr){Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.QuoteType=void 0;var _r=decode,Ur;(function(qr){qr[qr.Tab=9]="Tab",qr[qr.NewLine=10]="NewLine",qr[qr.FormFeed=12]="FormFeed",qr[qr.CarriageReturn=13]="CarriageReturn",qr[qr.Space=32]="Space",qr[qr.ExclamationMark=33]="ExclamationMark",qr[qr.Number=35]="Number",qr[qr.Amp=38]="Amp",qr[qr.SingleQuote=39]="SingleQuote",qr[qr.DoubleQuote=34]="DoubleQuote",qr[qr.Dash=45]="Dash",qr[qr.Slash=47]="Slash",qr[qr.Zero=48]="Zero",qr[qr.Nine=57]="Nine",qr[qr.Semi=59]="Semi",qr[qr.Lt=60]="Lt",qr[qr.Eq=61]="Eq",qr[qr.Gt=62]="Gt",qr[qr.Questionmark=63]="Questionmark",qr[qr.UpperA=65]="UpperA",qr[qr.LowerA=97]="LowerA",qr[qr.UpperF=70]="UpperF",qr[qr.LowerF=102]="LowerF",qr[qr.UpperZ=90]="UpperZ",qr[qr.LowerZ=122]="LowerZ",qr[qr.LowerX=120]="LowerX",qr[qr.OpeningSquareBracket=91]="OpeningSquareBracket"})(Ur||(Ur={}));var jr;(function(qr){qr[qr.Text=1]="Text",qr[qr.BeforeTagName=2]="BeforeTagName",qr[qr.InTagName=3]="InTagName",qr[qr.InSelfClosingTag=4]="InSelfClosingTag",qr[qr.BeforeClosingTagName=5]="BeforeClosingTagName",qr[qr.InClosingTagName=6]="InClosingTagName",qr[qr.AfterClosingTagName=7]="AfterClosingTagName",qr[qr.BeforeAttributeName=8]="BeforeAttributeName",qr[qr.InAttributeName=9]="InAttributeName",qr[qr.AfterAttributeName=10]="AfterAttributeName",qr[qr.BeforeAttributeValue=11]="BeforeAttributeValue",qr[qr.InAttributeValueDq=12]="InAttributeValueDq",qr[qr.InAttributeValueSq=13]="InAttributeValueSq",qr[qr.InAttributeValueNq=14]="InAttributeValueNq",qr[qr.BeforeDeclaration=15]="BeforeDeclaration",qr[qr.InDeclaration=16]="InDeclaration",qr[qr.InProcessingInstruction=17]="InProcessingInstruction",qr[qr.BeforeComment=18]="BeforeComment",qr[qr.CDATASequence=19]="CDATASequence",qr[qr.InSpecialComment=20]="InSpecialComment",qr[qr.InCommentLike=21]="InCommentLike",qr[qr.BeforeSpecialS=22]="BeforeSpecialS",qr[qr.SpecialStartSequence=23]="SpecialStartSequence",qr[qr.InSpecialTag=24]="InSpecialTag",qr[qr.BeforeEntity=25]="BeforeEntity",qr[qr.BeforeNumericEntity=26]="BeforeNumericEntity",qr[qr.InNamedEntity=27]="InNamedEntity",qr[qr.InNumericEntity=28]="InNumericEntity",qr[qr.InHexEntity=29]="InHexEntity"})(jr||(jr={}));function Gr(qr){return qr===Ur.Space||qr===Ur.NewLine||qr===Ur.Tab||qr===Ur.FormFeed||qr===Ur.CarriageReturn}function Wr(qr){return qr===Ur.Slash||qr===Ur.Gt||Gr(qr)}function Zr(qr){return qr>=Ur.Zero&&qr<=Ur.Nine}function Yr(qr){return qr>=Ur.LowerA&&qr<=Ur.LowerZ||qr>=Ur.UpperA&&qr<=Ur.UpperZ}function ts(qr){return qr>=Ur.UpperA&&qr<=Ur.UpperF||qr>=Ur.LowerA&&qr<=Ur.LowerF}var es;(function(qr){qr[qr.NoValue=0]="NoValue",qr[qr.Unquoted=1]="Unquoted",qr[qr.Single=2]="Single",qr[qr.Double=3]="Double"})(es=Nr.QuoteType||(Nr.QuoteType={}));var ns={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},Xr=function(){function qr(_i,rs){var is=_i.xmlMode,ss=is===void 0?!1:is,os=_i.decodeEntities,ls=os===void 0?!0:os;this.cbs=rs,this.state=jr.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=jr.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=ss,this.decodeEntities=ls,this.entityTrie=ss?_r.xmlDecodeTree:_r.htmlDecodeTree}return qr.prototype.reset=function(){this.state=jr.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=jr.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},qr.prototype.write=function(_i){this.offset+=this.buffer.length,this.buffer=_i,this.parse()},qr.prototype.end=function(){this.running&&this.finish()},qr.prototype.pause=function(){this.running=!1},qr.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},qr.prototype.getIndex=function(){return this.index},qr.prototype.getSectionStart=function(){return this.sectionStart},qr.prototype.stateText=function(_i){_i===Ur.Lt||!this.decodeEntities&&this.fastForwardTo(Ur.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=jr.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&_i===Ur.Amp&&(this.state=jr.BeforeEntity)},qr.prototype.stateSpecialStartSequence=function(_i){var rs=this.sequenceIndex===this.currentSequence.length,is=rs?Wr(_i):(_i|32)===this.currentSequence[this.sequenceIndex];if(!is)this.isSpecial=!1;else if(!rs){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=jr.InTagName,this.stateInTagName(_i)},qr.prototype.stateInSpecialTag=function(_i){if(this.sequenceIndex===this.currentSequence.length){if(_i===Ur.Gt||Gr(_i)){var rs=this.index-this.currentSequence.length;if(this.sectionStart<rs){var is=this.index;this.index=rs,this.cbs.ontext(this.sectionStart,rs),this.index=is}this.isSpecial=!1,this.sectionStart=rs+2,this.stateInClosingTagName(_i);return}this.sequenceIndex=0}(_i|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===ns.TitleEnd?this.decodeEntities&&_i===Ur.Amp&&(this.state=jr.BeforeEntity):this.fastForwardTo(Ur.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(_i===Ur.Lt)},qr.prototype.stateCDATASequence=function(_i){_i===ns.Cdata[this.sequenceIndex]?++this.sequenceIndex===ns.Cdata.length&&(this.state=jr.InCommentLike,this.currentSequence=ns.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=jr.InDeclaration,this.stateInDeclaration(_i))},qr.prototype.fastForwardTo=function(_i){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===_i)return!0;return this.index=this.buffer.length+this.offset-1,!1},qr.prototype.stateInCommentLike=function(_i){_i===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===ns.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=jr.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):_i!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},qr.prototype.isTagStartChar=function(_i){return this.xmlMode?!Wr(_i):Yr(_i)},qr.prototype.startSpecial=function(_i,rs){this.isSpecial=!0,this.currentSequence=_i,this.sequenceIndex=rs,this.state=jr.SpecialStartSequence},qr.prototype.stateBeforeTagName=function(_i){if(_i===Ur.ExclamationMark)this.state=jr.BeforeDeclaration,this.sectionStart=this.index+1;else if(_i===Ur.Questionmark)this.state=jr.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(_i)){var rs=_i|32;this.sectionStart=this.index,!this.xmlMode&&rs===ns.TitleEnd[2]?this.startSpecial(ns.TitleEnd,3):this.state=!this.xmlMode&&rs===ns.ScriptEnd[2]?jr.BeforeSpecialS:jr.InTagName}else _i===Ur.Slash?this.state=jr.BeforeClosingTagName:(this.state=jr.Text,this.stateText(_i))},qr.prototype.stateInTagName=function(_i){Wr(_i)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=jr.BeforeAttributeName,this.stateBeforeAttributeName(_i))},qr.prototype.stateBeforeClosingTagName=function(_i){Gr(_i)||(_i===Ur.Gt?this.state=jr.Text:(this.state=this.isTagStartChar(_i)?jr.InClosingTagName:jr.InSpecialComment,this.sectionStart=this.index))},qr.prototype.stateInClosingTagName=function(_i){(_i===Ur.Gt||Gr(_i))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=jr.AfterClosingTagName,this.stateAfterClosingTagName(_i))},qr.prototype.stateAfterClosingTagName=function(_i){(_i===Ur.Gt||this.fastForwardTo(Ur.Gt))&&(this.state=jr.Text,this.baseState=jr.Text,this.sectionStart=this.index+1)},qr.prototype.stateBeforeAttributeName=function(_i){_i===Ur.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=jr.InSpecialTag,this.sequenceIndex=0):this.state=jr.Text,this.baseState=this.state,this.sectionStart=this.index+1):_i===Ur.Slash?this.state=jr.InSelfClosingTag:Gr(_i)||(this.state=jr.InAttributeName,this.sectionStart=this.index)},qr.prototype.stateInSelfClosingTag=function(_i){_i===Ur.Gt?(this.cbs.onselfclosingtag(this.index),this.state=jr.Text,this.baseState=jr.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Gr(_i)||(this.state=jr.BeforeAttributeName,this.stateBeforeAttributeName(_i))},qr.prototype.stateInAttributeName=function(_i){(_i===Ur.Eq||Wr(_i))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=jr.AfterAttributeName,this.stateAfterAttributeName(_i))},qr.prototype.stateAfterAttributeName=function(_i){_i===Ur.Eq?this.state=jr.BeforeAttributeValue:_i===Ur.Slash||_i===Ur.Gt?(this.cbs.onattribend(es.NoValue,this.index),this.state=jr.BeforeAttributeName,this.stateBeforeAttributeName(_i)):Gr(_i)||(this.cbs.onattribend(es.NoValue,this.index),this.state=jr.InAttributeName,this.sectionStart=this.index)},qr.prototype.stateBeforeAttributeValue=function(_i){_i===Ur.DoubleQuote?(this.state=jr.InAttributeValueDq,this.sectionStart=this.index+1):_i===Ur.SingleQuote?(this.state=jr.InAttributeValueSq,this.sectionStart=this.index+1):Gr(_i)||(this.sectionStart=this.index,this.state=jr.InAttributeValueNq,this.stateInAttributeValueNoQuotes(_i))},qr.prototype.handleInAttributeValue=function(_i,rs){_i===rs||!this.decodeEntities&&this.fastForwardTo(rs)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(rs===Ur.DoubleQuote?es.Double:es.Single,this.index),this.state=jr.BeforeAttributeName):this.decodeEntities&&_i===Ur.Amp&&(this.baseState=this.state,this.state=jr.BeforeEntity)},qr.prototype.stateInAttributeValueDoubleQuotes=function(_i){this.handleInAttributeValue(_i,Ur.DoubleQuote)},qr.prototype.stateInAttributeValueSingleQuotes=function(_i){this.handleInAttributeValue(_i,Ur.SingleQuote)},qr.prototype.stateInAttributeValueNoQuotes=function(_i){Gr(_i)||_i===Ur.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(es.Unquoted,this.index),this.state=jr.BeforeAttributeName,this.stateBeforeAttributeName(_i)):this.decodeEntities&&_i===Ur.Amp&&(this.baseState=this.state,this.state=jr.BeforeEntity)},qr.prototype.stateBeforeDeclaration=function(_i){_i===Ur.OpeningSquareBracket?(this.state=jr.CDATASequence,this.sequenceIndex=0):this.state=_i===Ur.Dash?jr.BeforeComment:jr.InDeclaration},qr.prototype.stateInDeclaration=function(_i){(_i===Ur.Gt||this.fastForwardTo(Ur.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=jr.Text,this.sectionStart=this.index+1)},qr.prototype.stateInProcessingInstruction=function(_i){(_i===Ur.Gt||this.fastForwardTo(Ur.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=jr.Text,this.sectionStart=this.index+1)},qr.prototype.stateBeforeComment=function(_i){_i===Ur.Dash?(this.state=jr.InCommentLike,this.currentSequence=ns.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=jr.InDeclaration},qr.prototype.stateInSpecialComment=function(_i){(_i===Ur.Gt||this.fastForwardTo(Ur.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=jr.Text,this.sectionStart=this.index+1)},qr.prototype.stateBeforeSpecialS=function(_i){var rs=_i|32;rs===ns.ScriptEnd[3]?this.startSpecial(ns.ScriptEnd,4):rs===ns.StyleEnd[3]?this.startSpecial(ns.StyleEnd,4):(this.state=jr.InTagName,this.stateInTagName(_i))},qr.prototype.stateBeforeEntity=function(_i){this.entityExcess=1,this.entityResult=0,_i===Ur.Number?this.state=jr.BeforeNumericEntity:_i===Ur.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=jr.InNamedEntity,this.stateInNamedEntity(_i))},qr.prototype.stateInNamedEntity=function(_i){if(this.entityExcess+=1,this.trieIndex=(0,_r.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,_i),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var rs=this.trieCurrent&_r.BinTrieFlags.VALUE_LENGTH;if(rs){var is=(rs>>14)-1;if(!this.allowLegacyEntity()&&_i!==Ur.Semi)this.trieIndex+=is;else{var ss=this.index-this.entityExcess+1;ss>this.sectionStart&&this.emitPartial(this.sectionStart,ss),this.entityResult=this.trieIndex,this.trieIndex+=is,this.entityExcess=0,this.sectionStart=this.index+1,is===0&&this.emitNamedEntity()}}},qr.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var _i=(this.entityTrie[this.entityResult]&_r.BinTrieFlags.VALUE_LENGTH)>>14;switch(_i){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~_r.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},qr.prototype.stateBeforeNumericEntity=function(_i){(_i|32)===Ur.LowerX?(this.entityExcess++,this.state=jr.InHexEntity):(this.state=jr.InNumericEntity,this.stateInNumericEntity(_i))},qr.prototype.emitNumericEntity=function(_i){var rs=this.index-this.entityExcess-1,is=rs+2+ +(this.state===jr.InHexEntity);is!==this.index&&(rs>this.sectionStart&&this.emitPartial(this.sectionStart,rs),this.sectionStart=this.index+Number(_i),this.emitCodePoint((0,_r.replaceCodePoint)(this.entityResult))),this.state=this.baseState},qr.prototype.stateInNumericEntity=function(_i){_i===Ur.Semi?this.emitNumericEntity(!0):Zr(_i)?(this.entityResult=this.entityResult*10+(_i-Ur.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},qr.prototype.stateInHexEntity=function(_i){_i===Ur.Semi?this.emitNumericEntity(!0):Zr(_i)?(this.entityResult=this.entityResult*16+(_i-Ur.Zero),this.entityExcess++):ts(_i)?(this.entityResult=this.entityResult*16+((_i|32)-Ur.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},qr.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===jr.Text||this.baseState===jr.InSpecialTag)},qr.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===jr.Text||this.state===jr.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===jr.InAttributeValueDq||this.state===jr.InAttributeValueSq||this.state===jr.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},qr.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},qr.prototype.parse=function(){for(;this.shouldContinue();){var _i=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case jr.Text:{this.stateText(_i);break}case jr.SpecialStartSequence:{this.stateSpecialStartSequence(_i);break}case jr.InSpecialTag:{this.stateInSpecialTag(_i);break}case jr.CDATASequence:{this.stateCDATASequence(_i);break}case jr.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(_i);break}case jr.InAttributeName:{this.stateInAttributeName(_i);break}case jr.InCommentLike:{this.stateInCommentLike(_i);break}case jr.InSpecialComment:{this.stateInSpecialComment(_i);break}case jr.BeforeAttributeName:{this.stateBeforeAttributeName(_i);break}case jr.InTagName:{this.stateInTagName(_i);break}case jr.InClosingTagName:{this.stateInClosingTagName(_i);break}case jr.BeforeTagName:{this.stateBeforeTagName(_i);break}case jr.AfterAttributeName:{this.stateAfterAttributeName(_i);break}case jr.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(_i);break}case jr.BeforeAttributeValue:{this.stateBeforeAttributeValue(_i);break}case jr.BeforeClosingTagName:{this.stateBeforeClosingTagName(_i);break}case jr.AfterClosingTagName:{this.stateAfterClosingTagName(_i);break}case jr.BeforeSpecialS:{this.stateBeforeSpecialS(_i);break}case jr.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(_i);break}case jr.InSelfClosingTag:{this.stateInSelfClosingTag(_i);break}case jr.InDeclaration:{this.stateInDeclaration(_i);break}case jr.BeforeDeclaration:{this.stateBeforeDeclaration(_i);break}case jr.BeforeComment:{this.stateBeforeComment(_i);break}case jr.InProcessingInstruction:{this.stateInProcessingInstruction(_i);break}case jr.InNamedEntity:{this.stateInNamedEntity(_i);break}case jr.BeforeEntity:{this.stateBeforeEntity(_i);break}case jr.InHexEntity:{this.stateInHexEntity(_i);break}case jr.InNumericEntity:{this.stateInNumericEntity(_i);break}default:this.stateBeforeNumericEntity(_i)}this.index++}this.cleanup()},qr.prototype.finish=function(){this.state===jr.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},qr.prototype.handleTrailingData=function(){var _i=this.buffer.length+this.offset;this.state===jr.InCommentLike?this.currentSequence===ns.CdataEnd?this.cbs.oncdata(this.sectionStart,_i,0):this.cbs.oncomment(this.sectionStart,_i,0):this.state===jr.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===jr.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===jr.InTagName||this.state===jr.BeforeAttributeName||this.state===jr.BeforeAttributeValue||this.state===jr.AfterAttributeName||this.state===jr.InAttributeName||this.state===jr.InAttributeValueSq||this.state===jr.InAttributeValueDq||this.state===jr.InAttributeValueNq||this.state===jr.InClosingTagName||this.cbs.ontext(this.sectionStart,_i)},qr.prototype.emitPartial=function(_i,rs){this.baseState!==jr.Text&&this.baseState!==jr.InSpecialTag?this.cbs.onattribdata(_i,rs):this.cbs.ontext(_i,rs)},qr.prototype.emitCodePoint=function(_i){this.baseState!==jr.Text&&this.baseState!==jr.InSpecialTag?this.cbs.onattribentity(_i):this.cbs.ontextentity(_i)},qr}();Nr.default=Xr})(Tokenizer);var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Nr,_r,Ur,jr){jr===void 0&&(jr=Ur);var Gr=Object.getOwnPropertyDescriptor(_r,Ur);(!Gr||("get"in Gr?!_r.__esModule:Gr.writable||Gr.configurable))&&(Gr={enumerable:!0,get:function(){return _r[Ur]}}),Object.defineProperty(Nr,jr,Gr)}:function(Nr,_r,Ur,jr){jr===void 0&&(jr=Ur),Nr[jr]=_r[Ur]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Nr,_r){Object.defineProperty(Nr,"default",{enumerable:!0,value:_r})}:function(Nr,_r){Nr.default=_r}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(Nr){if(Nr&&Nr.__esModule)return Nr;var _r={};if(Nr!=null)for(var Ur in Nr)Ur!=="default"&&Object.prototype.hasOwnProperty.call(Nr,Ur)&&__createBinding$1(_r,Nr,Ur);return __setModuleDefault$1(_r,Nr),_r};Object.defineProperty(Parser$3,"__esModule",{value:!0});Parser$3.Parser=void 0;var Tokenizer_js_1=__importStar$1(Tokenizer),decode_js_1=decode,formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pTag=new Set(["p"]),tableSectionTags=new Set(["thead","tbody"]),ddtTags=new Set(["dd","dt"]),rtpTags=new Set(["rt","rp"]),openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]),voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),foreignContextElements=new Set(["math","svg"]),htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),reNameEnd=/\s|\//,Parser$2=function(){function Nr(_r,Ur){Ur===void 0&&(Ur={});var jr,Gr,Wr,Zr,Yr;this.options=Ur,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=_r??{},this.lowerCaseTagNames=(jr=Ur.lowerCaseTags)!==null&&jr!==void 0?jr:!Ur.xmlMode,this.lowerCaseAttributeNames=(Gr=Ur.lowerCaseAttributeNames)!==null&&Gr!==void 0?Gr:!Ur.xmlMode,this.tokenizer=new((Wr=Ur.Tokenizer)!==null&&Wr!==void 0?Wr:Tokenizer_js_1.default)(this.options,this),(Yr=(Zr=this.cbs).onparserinit)===null||Yr===void 0||Yr.call(Zr,this)}return Nr.prototype.ontext=function(_r,Ur){var jr,Gr,Wr=this.getSlice(_r,Ur);this.endIndex=Ur-1,(Gr=(jr=this.cbs).ontext)===null||Gr===void 0||Gr.call(jr,Wr),this.startIndex=Ur},Nr.prototype.ontextentity=function(_r){var Ur,jr,Gr=this.tokenizer.getSectionStart();this.endIndex=Gr-1,(jr=(Ur=this.cbs).ontext)===null||jr===void 0||jr.call(Ur,(0,decode_js_1.fromCodePoint)(_r)),this.startIndex=Gr},Nr.prototype.isVoidElement=function(_r){return!this.options.xmlMode&&voidElements.has(_r)},Nr.prototype.onopentagname=function(_r,Ur){this.endIndex=Ur;var jr=this.getSlice(_r,Ur);this.lowerCaseTagNames&&(jr=jr.toLowerCase()),this.emitOpenTag(jr)},Nr.prototype.emitOpenTag=function(_r){var Ur,jr,Gr,Wr;this.openTagStart=this.startIndex,this.tagname=_r;var Zr=!this.options.xmlMode&&openImpliesClose.get(_r);if(Zr)for(;this.stack.length>0&&Zr.has(this.stack[this.stack.length-1]);){var Yr=this.stack.pop();(jr=(Ur=this.cbs).onclosetag)===null||jr===void 0||jr.call(Ur,Yr,!0)}this.isVoidElement(_r)||(this.stack.push(_r),foreignContextElements.has(_r)?this.foreignContext.push(!0):htmlIntegrationElements.has(_r)&&this.foreignContext.push(!1)),(Wr=(Gr=this.cbs).onopentagname)===null||Wr===void 0||Wr.call(Gr,_r),this.cbs.onopentag&&(this.attribs={})},Nr.prototype.endOpenTag=function(_r){var Ur,jr;this.startIndex=this.openTagStart,this.attribs&&((jr=(Ur=this.cbs).onopentag)===null||jr===void 0||jr.call(Ur,this.tagname,this.attribs,_r),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},Nr.prototype.onopentagend=function(_r){this.endIndex=_r,this.endOpenTag(!1),this.startIndex=_r+1},Nr.prototype.onclosetag=function(_r,Ur){var jr,Gr,Wr,Zr,Yr,ts;this.endIndex=Ur;var es=this.getSlice(_r,Ur);if(this.lowerCaseTagNames&&(es=es.toLowerCase()),(foreignContextElements.has(es)||htmlIntegrationElements.has(es))&&this.foreignContext.pop(),this.isVoidElement(es))!this.options.xmlMode&&es==="br"&&((Gr=(jr=this.cbs).onopentagname)===null||Gr===void 0||Gr.call(jr,"br"),(Zr=(Wr=this.cbs).onopentag)===null||Zr===void 0||Zr.call(Wr,"br",{},!0),(ts=(Yr=this.cbs).onclosetag)===null||ts===void 0||ts.call(Yr,"br",!1));else{var ns=this.stack.lastIndexOf(es);if(ns!==-1)if(this.cbs.onclosetag)for(var Xr=this.stack.length-ns;Xr--;)this.cbs.onclosetag(this.stack.pop(),Xr!==0);else this.stack.length=ns;else!this.options.xmlMode&&es==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=Ur+1},Nr.prototype.onselfclosingtag=function(_r){this.endIndex=_r,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=_r+1):this.onopentagend(_r)},Nr.prototype.closeCurrentTag=function(_r){var Ur,jr,Gr=this.tagname;this.endOpenTag(_r),this.stack[this.stack.length-1]===Gr&&((jr=(Ur=this.cbs).onclosetag)===null||jr===void 0||jr.call(Ur,Gr,!_r),this.stack.pop())},Nr.prototype.onattribname=function(_r,Ur){this.startIndex=_r;var jr=this.getSlice(_r,Ur);this.attribname=this.lowerCaseAttributeNames?jr.toLowerCase():jr},Nr.prototype.onattribdata=function(_r,Ur){this.attribvalue+=this.getSlice(_r,Ur)},Nr.prototype.onattribentity=function(_r){this.attribvalue+=(0,decode_js_1.fromCodePoint)(_r)},Nr.prototype.onattribend=function(_r,Ur){var jr,Gr;this.endIndex=Ur,(Gr=(jr=this.cbs).onattribute)===null||Gr===void 0||Gr.call(jr,this.attribname,this.attribvalue,_r===Tokenizer_js_1.QuoteType.Double?'"':_r===Tokenizer_js_1.QuoteType.Single?"'":_r===Tokenizer_js_1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},Nr.prototype.getInstructionName=function(_r){var Ur=_r.search(reNameEnd),jr=Ur<0?_r:_r.substr(0,Ur);return this.lowerCaseTagNames&&(jr=jr.toLowerCase()),jr},Nr.prototype.ondeclaration=function(_r,Ur){this.endIndex=Ur;var jr=this.getSlice(_r,Ur);if(this.cbs.onprocessinginstruction){var Gr=this.getInstructionName(jr);this.cbs.onprocessinginstruction("!".concat(Gr),"!".concat(jr))}this.startIndex=Ur+1},Nr.prototype.onprocessinginstruction=function(_r,Ur){this.endIndex=Ur;var jr=this.getSlice(_r,Ur);if(this.cbs.onprocessinginstruction){var Gr=this.getInstructionName(jr);this.cbs.onprocessinginstruction("?".concat(Gr),"?".concat(jr))}this.startIndex=Ur+1},Nr.prototype.oncomment=function(_r,Ur,jr){var Gr,Wr,Zr,Yr;this.endIndex=Ur,(Wr=(Gr=this.cbs).oncomment)===null||Wr===void 0||Wr.call(Gr,this.getSlice(_r,Ur-jr)),(Yr=(Zr=this.cbs).oncommentend)===null||Yr===void 0||Yr.call(Zr),this.startIndex=Ur+1},Nr.prototype.oncdata=function(_r,Ur,jr){var Gr,Wr,Zr,Yr,ts,es,ns,Xr,qr,_i;this.endIndex=Ur;var rs=this.getSlice(_r,Ur-jr);this.options.xmlMode||this.options.recognizeCDATA?((Wr=(Gr=this.cbs).oncdatastart)===null||Wr===void 0||Wr.call(Gr),(Yr=(Zr=this.cbs).ontext)===null||Yr===void 0||Yr.call(Zr,rs),(es=(ts=this.cbs).oncdataend)===null||es===void 0||es.call(ts)):((Xr=(ns=this.cbs).oncomment)===null||Xr===void 0||Xr.call(ns,"[CDATA[".concat(rs,"]]")),(_i=(qr=this.cbs).oncommentend)===null||_i===void 0||_i.call(qr)),this.startIndex=Ur+1},Nr.prototype.onend=function(){var _r,Ur;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var jr=this.stack.length;jr>0;this.cbs.onclosetag(this.stack[--jr],!0));}(Ur=(_r=this.cbs).onend)===null||Ur===void 0||Ur.call(_r)},Nr.prototype.reset=function(){var _r,Ur,jr,Gr;(Ur=(_r=this.cbs).onreset)===null||Ur===void 0||Ur.call(_r),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(Gr=(jr=this.cbs).onparserinit)===null||Gr===void 0||Gr.call(jr,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},Nr.prototype.parseComplete=function(_r){this.reset(),this.end(_r)},Nr.prototype.getSlice=function(_r,Ur){for(;_r-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var jr=this.buffers[0].slice(_r-this.bufferOffset,Ur-this.bufferOffset);Ur-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),jr+=this.buffers[0].slice(0,Ur-this.bufferOffset);return jr},Nr.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},Nr.prototype.write=function(_r){var Ur,jr;if(this.ended){(jr=(Ur=this.cbs).onerror)===null||jr===void 0||jr.call(Ur,new Error(".write() after done!"));return}this.buffers.push(_r),this.tokenizer.running&&(this.tokenizer.write(_r),this.writeIndex++)},Nr.prototype.end=function(_r){var Ur,jr;if(this.ended){(jr=(Ur=this.cbs).onerror)===null||jr===void 0||jr.call(Ur,new Error(".end() after done!"));return}_r&&this.write(_r),this.ended=!0,this.tokenizer.end()},Nr.prototype.pause=function(){this.tokenizer.pause()},Nr.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},Nr.prototype.parseChunk=function(_r){this.write(_r)},Nr.prototype.done=function(_r){this.end(_r)},Nr}();Parser$3.Parser=Parser$2;var lib$4={},lib$3={};(function(Nr){Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Doctype=Nr.CDATA=Nr.Tag=Nr.Style=Nr.Script=Nr.Comment=Nr.Directive=Nr.Text=Nr.Root=Nr.isTag=Nr.ElementType=void 0;var _r;(function(jr){jr.Root="root",jr.Text="text",jr.Directive="directive",jr.Comment="comment",jr.Script="script",jr.Style="style",jr.Tag="tag",jr.CDATA="cdata",jr.Doctype="doctype"})(_r=Nr.ElementType||(Nr.ElementType={}));function Ur(jr){return jr.type===_r.Tag||jr.type===_r.Script||jr.type===_r.Style}Nr.isTag=Ur,Nr.Root=_r.Root,Nr.Text=_r.Text,Nr.Directive=_r.Directive,Nr.Comment=_r.Comment,Nr.Script=_r.Script,Nr.Style=_r.Style,Nr.Tag=_r.Tag,Nr.CDATA=_r.CDATA,Nr.Doctype=_r.Doctype})(lib$3);var node$1={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var Nr=function(_r,Ur){return Nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jr,Gr){jr.__proto__=Gr}||function(jr,Gr){for(var Wr in Gr)Object.prototype.hasOwnProperty.call(Gr,Wr)&&(jr[Wr]=Gr[Wr])},Nr(_r,Ur)};return function(_r,Ur){if(typeof Ur!="function"&&Ur!==null)throw new TypeError("Class extends value "+String(Ur)+" is not a constructor or null");Nr(_r,Ur);function jr(){this.constructor=_r}_r.prototype=Ur===null?Object.create(Ur):(jr.prototype=Ur.prototype,new jr)}}(),__assign$2=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$2=Object.assign||function(Nr){for(var _r,Ur=1,jr=arguments.length;Ur<jr;Ur++){_r=arguments[Ur];for(var Gr in _r)Object.prototype.hasOwnProperty.call(_r,Gr)&&(Nr[Gr]=_r[Gr])}return Nr},__assign$2.apply(this,arguments)};Object.defineProperty(node$1,"__esModule",{value:!0});node$1.cloneNode=node$1.hasChildren=node$1.isDocument=node$1.isDirective=node$1.isComment=node$1.isText=node$1.isCDATA=node$1.isTag=node$1.Element=node$1.Document=node$1.CDATA=node$1.NodeWithChildren=node$1.ProcessingInstruction=node$1.Comment=node$1.Text=node$1.DataNode=node$1.Node=void 0;var domelementtype_1$1=lib$3,Node$6=function(){function Nr(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(Nr.prototype,"parentNode",{get:function(){return this.parent},set:function(_r){this.parent=_r},enumerable:!1,configurable:!0}),Object.defineProperty(Nr.prototype,"previousSibling",{get:function(){return this.prev},set:function(_r){this.prev=_r},enumerable:!1,configurable:!0}),Object.defineProperty(Nr.prototype,"nextSibling",{get:function(){return this.next},set:function(_r){this.next=_r},enumerable:!1,configurable:!0}),Nr.prototype.cloneNode=function(_r){return _r===void 0&&(_r=!1),cloneNode$1(this,_r)},Nr}();node$1.Node=Node$6;var DataNode=function(Nr){__extends(_r,Nr);function _r(Ur){var jr=Nr.call(this)||this;return jr.data=Ur,jr}return Object.defineProperty(_r.prototype,"nodeValue",{get:function(){return this.data},set:function(Ur){this.data=Ur},enumerable:!1,configurable:!0}),_r}(Node$6);node$1.DataNode=DataNode;var Text=function(Nr){__extends(_r,Nr);function _r(){var Ur=Nr!==null&&Nr.apply(this,arguments)||this;return Ur.type=domelementtype_1$1.ElementType.Text,Ur}return Object.defineProperty(_r.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),_r}(DataNode);node$1.Text=Text;var Comment$5=function(Nr){__extends(_r,Nr);function _r(){var Ur=Nr!==null&&Nr.apply(this,arguments)||this;return Ur.type=domelementtype_1$1.ElementType.Comment,Ur}return Object.defineProperty(_r.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),_r}(DataNode);node$1.Comment=Comment$5;var ProcessingInstruction=function(Nr){__extends(_r,Nr);function _r(Ur,jr){var Gr=Nr.call(this,jr)||this;return Gr.name=Ur,Gr.type=domelementtype_1$1.ElementType.Directive,Gr}return Object.defineProperty(_r.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),_r}(DataNode);node$1.ProcessingInstruction=ProcessingInstruction;var NodeWithChildren=function(Nr){__extends(_r,Nr);function _r(Ur){var jr=Nr.call(this)||this;return jr.children=Ur,jr}return Object.defineProperty(_r.prototype,"firstChild",{get:function(){var Ur;return(Ur=this.children[0])!==null&&Ur!==void 0?Ur:null},enumerable:!1,configurable:!0}),Object.defineProperty(_r.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(_r.prototype,"childNodes",{get:function(){return this.children},set:function(Ur){this.children=Ur},enumerable:!1,configurable:!0}),_r}(Node$6);node$1.NodeWithChildren=NodeWithChildren;var CDATA=function(Nr){__extends(_r,Nr);function _r(){var Ur=Nr!==null&&Nr.apply(this,arguments)||this;return Ur.type=domelementtype_1$1.ElementType.CDATA,Ur}return Object.defineProperty(_r.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),_r}(NodeWithChildren);node$1.CDATA=CDATA;var Document$4=function(Nr){__extends(_r,Nr);function _r(){var Ur=Nr!==null&&Nr.apply(this,arguments)||this;return Ur.type=domelementtype_1$1.ElementType.Root,Ur}return Object.defineProperty(_r.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),_r}(NodeWithChildren);node$1.Document=Document$4;var Element$1=function(Nr){__extends(_r,Nr);function _r(Ur,jr,Gr,Wr){Gr===void 0&&(Gr=[]),Wr===void 0&&(Wr=Ur==="script"?domelementtype_1$1.ElementType.Script:Ur==="style"?domelementtype_1$1.ElementType.Style:domelementtype_1$1.ElementType.Tag);var Zr=Nr.call(this,Gr)||this;return Zr.name=Ur,Zr.attribs=jr,Zr.type=Wr,Zr}return Object.defineProperty(_r.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(_r.prototype,"tagName",{get:function(){return this.name},set:function(Ur){this.name=Ur},enumerable:!1,configurable:!0}),Object.defineProperty(_r.prototype,"attributes",{get:function(){var Ur=this;return Object.keys(this.attribs).map(function(jr){var Gr,Wr;return{name:jr,value:Ur.attribs[jr],namespace:(Gr=Ur["x-attribsNamespace"])===null||Gr===void 0?void 0:Gr[jr],prefix:(Wr=Ur["x-attribsPrefix"])===null||Wr===void 0?void 0:Wr[jr]}})},enumerable:!1,configurable:!0}),_r}(NodeWithChildren);node$1.Element=Element$1;function isTag(Nr){return(0,domelementtype_1$1.isTag)(Nr)}node$1.isTag=isTag;function isCDATA(Nr){return Nr.type===domelementtype_1$1.ElementType.CDATA}node$1.isCDATA=isCDATA;function isText(Nr){return Nr.type===domelementtype_1$1.ElementType.Text}node$1.isText=isText;function isComment(Nr){return Nr.type===domelementtype_1$1.ElementType.Comment}node$1.isComment=isComment;function isDirective(Nr){return Nr.type===domelementtype_1$1.ElementType.Directive}node$1.isDirective=isDirective;function isDocument(Nr){return Nr.type===domelementtype_1$1.ElementType.Root}node$1.isDocument=isDocument;function hasChildren(Nr){return Object.prototype.hasOwnProperty.call(Nr,"children")}node$1.hasChildren=hasChildren;function cloneNode$1(Nr,_r){_r===void 0&&(_r=!1);var Ur;if(isText(Nr))Ur=new Text(Nr.data);else if(isComment(Nr))Ur=new Comment$5(Nr.data);else if(isTag(Nr)){var jr=_r?cloneChildren(Nr.children):[],Gr=new Element$1(Nr.name,__assign$2({},Nr.attribs),jr);jr.forEach(function(ts){return ts.parent=Gr}),Nr.namespace!=null&&(Gr.namespace=Nr.namespace),Nr["x-attribsNamespace"]&&(Gr["x-attribsNamespace"]=__assign$2({},Nr["x-attribsNamespace"])),Nr["x-attribsPrefix"]&&(Gr["x-attribsPrefix"]=__assign$2({},Nr["x-attribsPrefix"])),Ur=Gr}else if(isCDATA(Nr)){var jr=_r?cloneChildren(Nr.children):[],Wr=new CDATA(jr);jr.forEach(function(es){return es.parent=Wr}),Ur=Wr}else if(isDocument(Nr)){var jr=_r?cloneChildren(Nr.children):[],Zr=new Document$4(jr);jr.forEach(function(es){return es.parent=Zr}),Nr["x-mode"]&&(Zr["x-mode"]=Nr["x-mode"]),Ur=Zr}else if(isDirective(Nr)){var Yr=new ProcessingInstruction(Nr.name,Nr.data);Nr["x-name"]!=null&&(Yr["x-name"]=Nr["x-name"],Yr["x-publicId"]=Nr["x-publicId"],Yr["x-systemId"]=Nr["x-systemId"]),Ur=Yr}else throw new Error("Not implemented yet: ".concat(Nr.type));return Ur.startIndex=Nr.startIndex,Ur.endIndex=Nr.endIndex,Nr.sourceCodeLocation!=null&&(Ur.sourceCodeLocation=Nr.sourceCodeLocation),Ur}node$1.cloneNode=cloneNode$1;function cloneChildren(Nr){for(var _r=Nr.map(function(jr){return cloneNode$1(jr,!0)}),Ur=1;Ur<_r.length;Ur++)_r[Ur].prev=_r[Ur-1],_r[Ur-1].next=_r[Ur];return _r}(function(Nr){var _r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Yr,ts,es,ns){ns===void 0&&(ns=es);var Xr=Object.getOwnPropertyDescriptor(ts,es);(!Xr||("get"in Xr?!ts.__esModule:Xr.writable||Xr.configurable))&&(Xr={enumerable:!0,get:function(){return ts[es]}}),Object.defineProperty(Yr,ns,Xr)}:function(Yr,ts,es,ns){ns===void 0&&(ns=es),Yr[ns]=ts[es]}),Ur=commonjsGlobal&&commonjsGlobal.__exportStar||function(Yr,ts){for(var es in Yr)es!=="default"&&!Object.prototype.hasOwnProperty.call(ts,es)&&_r(ts,Yr,es)};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.DomHandler=void 0;var jr=lib$3,Gr=node$1;Ur(node$1,Nr);var Wr={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},Zr=function(){function Yr(ts,es,ns){this.dom=[],this.root=new Gr.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof es=="function"&&(ns=es,es=Wr),typeof ts=="object"&&(es=ts,ts=void 0),this.callback=ts??null,this.options=es??Wr,this.elementCB=ns??null}return Yr.prototype.onparserinit=function(ts){this.parser=ts},Yr.prototype.onreset=function(){this.dom=[],this.root=new Gr.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},Yr.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},Yr.prototype.onerror=function(ts){this.handleCallback(ts)},Yr.prototype.onclosetag=function(){this.lastNode=null;var ts=this.tagStack.pop();this.options.withEndIndices&&(ts.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(ts)},Yr.prototype.onopentag=function(ts,es){var ns=this.options.xmlMode?jr.ElementType.Tag:void 0,Xr=new Gr.Element(ts,es,void 0,ns);this.addNode(Xr),this.tagStack.push(Xr)},Yr.prototype.ontext=function(ts){var es=this.lastNode;if(es&&es.type===jr.ElementType.Text)es.data+=ts,this.options.withEndIndices&&(es.endIndex=this.parser.endIndex);else{var ns=new Gr.Text(ts);this.addNode(ns),this.lastNode=ns}},Yr.prototype.oncomment=function(ts){if(this.lastNode&&this.lastNode.type===jr.ElementType.Comment){this.lastNode.data+=ts;return}var es=new Gr.Comment(ts);this.addNode(es),this.lastNode=es},Yr.prototype.oncommentend=function(){this.lastNode=null},Yr.prototype.oncdatastart=function(){var ts=new Gr.Text(""),es=new Gr.CDATA([ts]);this.addNode(es),ts.parent=es,this.lastNode=ts},Yr.prototype.oncdataend=function(){this.lastNode=null},Yr.prototype.onprocessinginstruction=function(ts,es){var ns=new Gr.ProcessingInstruction(ts,es);this.addNode(ns)},Yr.prototype.handleCallback=function(ts){if(typeof this.callback=="function")this.callback(ts,this.dom);else if(ts)throw ts},Yr.prototype.addNode=function(ts){var es=this.tagStack[this.tagStack.length-1],ns=es.children[es.children.length-1];this.options.withStartIndices&&(ts.startIndex=this.parser.startIndex),this.options.withEndIndices&&(ts.endIndex=this.parser.endIndex),es.children.push(ts),ns&&(ts.prev=ns,ns.next=ts),ts.parent=es,this.lastNode=null},Yr}();Nr.DomHandler=Zr,Nr.default=Zr})(lib$4);var lib$2={},stringify$5={},lib$1={},lib={},encode={},encodeHtml={};Object.defineProperty(encodeHtml,"__esModule",{value:!0});function restoreDiff(Nr){for(var _r=1;_r<Nr.length;_r++)Nr[_r][0]+=Nr[_r-1][0]+1;return Nr}encodeHtml.default=new Map(restoreDiff([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(restoreDiff([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(restoreDiff([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(restoreDiff([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var _escape={};(function(Nr){Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.escapeText=Nr.escapeAttribute=Nr.escapeUTF8=Nr.escape=Nr.encodeXML=Nr.getCodePoint=Nr.xmlReplacer=void 0,Nr.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var _r=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);Nr.getCodePoint=String.prototype.codePointAt!=null?function(Gr,Wr){return Gr.codePointAt(Wr)}:function(Gr,Wr){return(Gr.charCodeAt(Wr)&64512)===55296?(Gr.charCodeAt(Wr)-55296)*1024+Gr.charCodeAt(Wr+1)-56320+65536:Gr.charCodeAt(Wr)};function Ur(Gr){for(var Wr="",Zr=0,Yr;(Yr=Nr.xmlReplacer.exec(Gr))!==null;){var ts=Yr.index,es=Gr.charCodeAt(ts),ns=_r.get(es);ns!==void 0?(Wr+=Gr.substring(Zr,ts)+ns,Zr=ts+1):(Wr+="".concat(Gr.substring(Zr,ts),"&#x").concat((0,Nr.getCodePoint)(Gr,ts).toString(16),";"),Zr=Nr.xmlReplacer.lastIndex+=+((es&64512)===55296))}return Wr+Gr.substr(Zr)}Nr.encodeXML=Ur,Nr.escape=Ur;function jr(Gr,Wr){return function(Yr){for(var ts,es=0,ns="";ts=Gr.exec(Yr);)es!==ts.index&&(ns+=Yr.substring(es,ts.index)),ns+=Wr.get(ts[0].charCodeAt(0)),es=ts.index+1;return ns+Yr.substring(es)}}Nr.escapeUTF8=jr(/[&<>'"]/g,_r),Nr.escapeAttribute=jr(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Nr.escapeText=jr(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(_escape);var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(Nr){return Nr&&Nr.__esModule?Nr:{default:Nr}};Object.defineProperty(encode,"__esModule",{value:!0});encode.encodeNonAsciiHTML=encode.encodeHTML=void 0;var encode_html_js_1=__importDefault$1(encodeHtml),escape_js_1=_escape,htmlReplacer=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function encodeHTML(Nr){return encodeHTMLTrieRe(htmlReplacer,Nr)}encode.encodeHTML=encodeHTML;function encodeNonAsciiHTML(Nr){return encodeHTMLTrieRe(escape_js_1.xmlReplacer,Nr)}encode.encodeNonAsciiHTML=encodeNonAsciiHTML;function encodeHTMLTrieRe(Nr,_r){for(var Ur="",jr=0,Gr;(Gr=Nr.exec(_r))!==null;){var Wr=Gr.index;Ur+=_r.substring(jr,Wr);var Zr=_r.charCodeAt(Wr),Yr=encode_html_js_1.default.get(Zr);if(typeof Yr=="object"){if(Wr+1<_r.length){var ts=_r.charCodeAt(Wr+1),es=typeof Yr.n=="number"?Yr.n===ts?Yr.o:void 0:Yr.n.get(ts);if(es!==void 0){Ur+=es,jr=Nr.lastIndex+=1;continue}}Yr=Yr.v}if(Yr!==void 0)Ur+=Yr,jr=Wr+1;else{var ns=(0,escape_js_1.getCodePoint)(_r,Wr);Ur+="&#x".concat(ns.toString(16),";"),jr=Nr.lastIndex+=+(ns!==Zr)}}return Ur+_r.substr(jr)}(function(Nr){Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.decodeXMLStrict=Nr.decodeHTML5Strict=Nr.decodeHTML4Strict=Nr.decodeHTML5=Nr.decodeHTML4=Nr.decodeHTMLAttribute=Nr.decodeHTMLStrict=Nr.decodeHTML=Nr.decodeXML=Nr.DecodingMode=Nr.EntityDecoder=Nr.encodeHTML5=Nr.encodeHTML4=Nr.encodeNonAsciiHTML=Nr.encodeHTML=Nr.escapeText=Nr.escapeAttribute=Nr.escapeUTF8=Nr.escape=Nr.encodeXML=Nr.encode=Nr.decodeStrict=Nr.decode=Nr.EncodingMode=Nr.EntityLevel=void 0;var _r=decode,Ur=encode,jr=_escape,Gr;(function(qr){qr[qr.XML=0]="XML",qr[qr.HTML=1]="HTML"})(Gr=Nr.EntityLevel||(Nr.EntityLevel={}));var Wr;(function(qr){qr[qr.UTF8=0]="UTF8",qr[qr.ASCII=1]="ASCII",qr[qr.Extensive=2]="Extensive",qr[qr.Attribute=3]="Attribute",qr[qr.Text=4]="Text"})(Wr=Nr.EncodingMode||(Nr.EncodingMode={}));function Zr(qr,_i){_i===void 0&&(_i=Gr.XML);var rs=typeof _i=="number"?_i:_i.level;if(rs===Gr.HTML){var is=typeof _i=="object"?_i.mode:void 0;return(0,_r.decodeHTML)(qr,is)}return(0,_r.decodeXML)(qr)}Nr.decode=Zr;function Yr(qr,_i){var rs;_i===void 0&&(_i=Gr.XML);var is=typeof _i=="number"?{level:_i}:_i;return(rs=is.mode)!==null&&rs!==void 0||(is.mode=_r.DecodingMode.Strict),Zr(qr,is)}Nr.decodeStrict=Yr;function ts(qr,_i){_i===void 0&&(_i=Gr.XML);var rs=typeof _i=="number"?{level:_i}:_i;return rs.mode===Wr.UTF8?(0,jr.escapeUTF8)(qr):rs.mode===Wr.Attribute?(0,jr.escapeAttribute)(qr):rs.mode===Wr.Text?(0,jr.escapeText)(qr):rs.level===Gr.HTML?rs.mode===Wr.ASCII?(0,Ur.encodeNonAsciiHTML)(qr):(0,Ur.encodeHTML)(qr):(0,jr.encodeXML)(qr)}Nr.encode=ts;var es=_escape;Object.defineProperty(Nr,"encodeXML",{enumerable:!0,get:function(){return es.encodeXML}}),Object.defineProperty(Nr,"escape",{enumerable:!0,get:function(){return es.escape}}),Object.defineProperty(Nr,"escapeUTF8",{enumerable:!0,get:function(){return es.escapeUTF8}}),Object.defineProperty(Nr,"escapeAttribute",{enumerable:!0,get:function(){return es.escapeAttribute}}),Object.defineProperty(Nr,"escapeText",{enumerable:!0,get:function(){return es.escapeText}});var ns=encode;Object.defineProperty(Nr,"encodeHTML",{enumerable:!0,get:function(){return ns.encodeHTML}}),Object.defineProperty(Nr,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return ns.encodeNonAsciiHTML}}),Object.defineProperty(Nr,"encodeHTML4",{enumerable:!0,get:function(){return ns.encodeHTML}}),Object.defineProperty(Nr,"encodeHTML5",{enumerable:!0,get:function(){return ns.encodeHTML}});var Xr=decode;Object.defineProperty(Nr,"EntityDecoder",{enumerable:!0,get:function(){return Xr.EntityDecoder}}),Object.defineProperty(Nr,"DecodingMode",{enumerable:!0,get:function(){return Xr.DecodingMode}}),Object.defineProperty(Nr,"decodeXML",{enumerable:!0,get:function(){return Xr.decodeXML}}),Object.defineProperty(Nr,"decodeHTML",{enumerable:!0,get:function(){return Xr.decodeHTML}}),Object.defineProperty(Nr,"decodeHTMLStrict",{enumerable:!0,get:function(){return Xr.decodeHTMLStrict}}),Object.defineProperty(Nr,"decodeHTMLAttribute",{enumerable:!0,get:function(){return Xr.decodeHTMLAttribute}}),Object.defineProperty(Nr,"decodeHTML4",{enumerable:!0,get:function(){return Xr.decodeHTML}}),Object.defineProperty(Nr,"decodeHTML5",{enumerable:!0,get:function(){return Xr.decodeHTML}}),Object.defineProperty(Nr,"decodeHTML4Strict",{enumerable:!0,get:function(){return Xr.decodeHTMLStrict}}),Object.defineProperty(Nr,"decodeHTML5Strict",{enumerable:!0,get:function(){return Xr.decodeHTMLStrict}}),Object.defineProperty(Nr,"decodeXMLStrict",{enumerable:!0,get:function(){return Xr.decodeXML}})})(lib);var foreignNames={};Object.defineProperty(foreignNames,"__esModule",{value:!0});foreignNames.attributeNames=foreignNames.elementNames=void 0;foreignNames.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(Nr){return[Nr.toLowerCase(),Nr]}));foreignNames.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(Nr){return[Nr.toLowerCase(),Nr]}));var __assign$1=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$1=Object.assign||function(Nr){for(var _r,Ur=1,jr=arguments.length;Ur<jr;Ur++){_r=arguments[Ur];for(var Gr in _r)Object.prototype.hasOwnProperty.call(_r,Gr)&&(Nr[Gr]=_r[Gr])}return Nr},__assign$1.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Nr,_r,Ur,jr){jr===void 0&&(jr=Ur);var Gr=Object.getOwnPropertyDescriptor(_r,Ur);(!Gr||("get"in Gr?!_r.__esModule:Gr.writable||Gr.configurable))&&(Gr={enumerable:!0,get:function(){return _r[Ur]}}),Object.defineProperty(Nr,jr,Gr)}:function(Nr,_r,Ur,jr){jr===void 0&&(jr=Ur),Nr[jr]=_r[Ur]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Nr,_r){Object.defineProperty(Nr,"default",{enumerable:!0,value:_r})}:function(Nr,_r){Nr.default=_r}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(Nr){if(Nr&&Nr.__esModule)return Nr;var _r={};if(Nr!=null)for(var Ur in Nr)Ur!=="default"&&Object.prototype.hasOwnProperty.call(Nr,Ur)&&__createBinding(_r,Nr,Ur);return __setModuleDefault(_r,Nr),_r};Object.defineProperty(lib$1,"__esModule",{value:!0});lib$1.render=void 0;var ElementType=__importStar(lib$3),entities_1=lib,foreignNames_js_1=foreignNames,unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(Nr){return Nr.replace(/"/g,"&quot;")}function formatAttributes(Nr,_r){var Ur;if(Nr){var jr=((Ur=_r.encodeEntities)!==null&&Ur!==void 0?Ur:_r.decodeEntities)===!1?replaceQuotes:_r.xmlMode||_r.encodeEntities!=="utf8"?entities_1.encodeXML:entities_1.escapeAttribute;return Object.keys(Nr).map(function(Gr){var Wr,Zr,Yr=(Wr=Nr[Gr])!==null&&Wr!==void 0?Wr:"";return _r.xmlMode==="foreign"&&(Gr=(Zr=foreignNames_js_1.attributeNames.get(Gr))!==null&&Zr!==void 0?Zr:Gr),!_r.emptyAttrs&&!_r.xmlMode&&Yr===""?Gr:"".concat(Gr,'="').concat(jr(Yr),'"')}).join(" ")}}var singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render(Nr,_r){_r===void 0&&(_r={});for(var Ur=("length"in Nr)?Nr:[Nr],jr="",Gr=0;Gr<Ur.length;Gr++)jr+=renderNode(Ur[Gr],_r);return jr}lib$1.render=render;lib$1.default=render;function renderNode(Nr,_r){switch(Nr.type){case ElementType.Root:return render(Nr.children,_r);case ElementType.Doctype:case ElementType.Directive:return renderDirective(Nr);case ElementType.Comment:return renderComment(Nr);case ElementType.CDATA:return renderCdata(Nr);case ElementType.Script:case ElementType.Style:case ElementType.Tag:return renderTag(Nr,_r);case ElementType.Text:return renderText(Nr,_r)}}var foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),foreignElements=new Set(["svg","math"]);function renderTag(Nr,_r){var Ur;_r.xmlMode==="foreign"&&(Nr.name=(Ur=foreignNames_js_1.elementNames.get(Nr.name))!==null&&Ur!==void 0?Ur:Nr.name,Nr.parent&&foreignModeIntegrationPoints.has(Nr.parent.name)&&(_r=__assign$1(__assign$1({},_r),{xmlMode:!1}))),!_r.xmlMode&&foreignElements.has(Nr.name)&&(_r=__assign$1(__assign$1({},_r),{xmlMode:"foreign"}));var jr="<".concat(Nr.name),Gr=formatAttributes(Nr.attribs,_r);return Gr&&(jr+=" ".concat(Gr)),Nr.children.length===0&&(_r.xmlMode?_r.selfClosingTags!==!1:_r.selfClosingTags&&singleTag.has(Nr.name))?(_r.xmlMode||(jr+=" "),jr+="/>"):(jr+=">",Nr.children.length>0&&(jr+=render(Nr.children,_r)),(_r.xmlMode||!singleTag.has(Nr.name))&&(jr+="</".concat(Nr.name,">"))),jr}function renderDirective(Nr){return"<".concat(Nr.data,">")}function renderText(Nr,_r){var Ur,jr=Nr.data||"";return((Ur=_r.encodeEntities)!==null&&Ur!==void 0?Ur:_r.decodeEntities)!==!1&&!(!_r.xmlMode&&Nr.parent&&unencodedElements.has(Nr.parent.name))&&(jr=_r.xmlMode||_r.encodeEntities!=="utf8"?(0,entities_1.encodeXML)(jr):(0,entities_1.escapeText)(jr)),jr}function renderCdata(Nr){return"<![CDATA[".concat(Nr.children[0].data,"]]>")}function renderComment(Nr){return"<!--".concat(Nr.data,"-->")}var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(Nr){return Nr&&Nr.__esModule?Nr:{default:Nr}};Object.defineProperty(stringify$5,"__esModule",{value:!0});stringify$5.innerText=stringify$5.textContent=stringify$5.getText=stringify$5.getInnerHTML=stringify$5.getOuterHTML=void 0;var domhandler_1$3=lib$4,dom_serializer_1=__importDefault(lib$1),domelementtype_1=lib$3;function getOuterHTML(Nr,_r){return(0,dom_serializer_1.default)(Nr,_r)}stringify$5.getOuterHTML=getOuterHTML;function getInnerHTML(Nr,_r){return(0,domhandler_1$3.hasChildren)(Nr)?Nr.children.map(function(Ur){return getOuterHTML(Ur,_r)}).join(""):""}stringify$5.getInnerHTML=getInnerHTML;function getText(Nr){return Array.isArray(Nr)?Nr.map(getText).join(""):(0,domhandler_1$3.isTag)(Nr)?Nr.name==="br"?`
`:getText(Nr.children):(0,domhandler_1$3.isCDATA)(Nr)?getText(Nr.children):(0,domhandler_1$3.isText)(Nr)?Nr.data:""}stringify$5.getText=getText;function textContent(Nr){return Array.isArray(Nr)?Nr.map(textContent).join(""):(0,domhandler_1$3.hasChildren)(Nr)&&!(0,domhandler_1$3.isComment)(Nr)?textContent(Nr.children):(0,domhandler_1$3.isText)(Nr)?Nr.data:""}stringify$5.textContent=textContent;function innerText(Nr){return Array.isArray(Nr)?Nr.map(innerText).join(""):(0,domhandler_1$3.hasChildren)(Nr)&&(Nr.type===domelementtype_1.ElementType.Tag||(0,domhandler_1$3.isCDATA)(Nr))?innerText(Nr.children):(0,domhandler_1$3.isText)(Nr)?Nr.data:""}stringify$5.innerText=innerText;var traversal={};Object.defineProperty(traversal,"__esModule",{value:!0});traversal.prevElementSibling=traversal.nextElementSibling=traversal.getName=traversal.hasAttrib=traversal.getAttributeValue=traversal.getSiblings=traversal.getParent=traversal.getChildren=void 0;var domhandler_1$2=lib$4;function getChildren(Nr){return(0,domhandler_1$2.hasChildren)(Nr)?Nr.children:[]}traversal.getChildren=getChildren;function getParent(Nr){return Nr.parent||null}traversal.getParent=getParent;function getSiblings(Nr){var _r,Ur,jr=getParent(Nr);if(jr!=null)return getChildren(jr);for(var Gr=[Nr],Wr=Nr.prev,Zr=Nr.next;Wr!=null;)Gr.unshift(Wr),_r=Wr,Wr=_r.prev;for(;Zr!=null;)Gr.push(Zr),Ur=Zr,Zr=Ur.next;return Gr}traversal.getSiblings=getSiblings;function getAttributeValue(Nr,_r){var Ur;return(Ur=Nr.attribs)===null||Ur===void 0?void 0:Ur[_r]}traversal.getAttributeValue=getAttributeValue;function hasAttrib(Nr,_r){return Nr.attribs!=null&&Object.prototype.hasOwnProperty.call(Nr.attribs,_r)&&Nr.attribs[_r]!=null}traversal.hasAttrib=hasAttrib;function getName(Nr){return Nr.name}traversal.getName=getName;function nextElementSibling(Nr){for(var _r,Ur=Nr.next;Ur!==null&&!(0,domhandler_1$2.isTag)(Ur);)_r=Ur,Ur=_r.next;return Ur}traversal.nextElementSibling=nextElementSibling;function prevElementSibling(Nr){for(var _r,Ur=Nr.prev;Ur!==null&&!(0,domhandler_1$2.isTag)(Ur);)_r=Ur,Ur=_r.prev;return Ur}traversal.prevElementSibling=prevElementSibling;var manipulation={};Object.defineProperty(manipulation,"__esModule",{value:!0});manipulation.prepend=manipulation.prependChild=manipulation.append=manipulation.appendChild=manipulation.replaceElement=manipulation.removeElement=void 0;function removeElement(Nr){if(Nr.prev&&(Nr.prev.next=Nr.next),Nr.next&&(Nr.next.prev=Nr.prev),Nr.parent){var _r=Nr.parent.children,Ur=_r.lastIndexOf(Nr);Ur>=0&&_r.splice(Ur,1)}Nr.next=null,Nr.prev=null,Nr.parent=null}manipulation.removeElement=removeElement;function replaceElement(Nr,_r){var Ur=_r.prev=Nr.prev;Ur&&(Ur.next=_r);var jr=_r.next=Nr.next;jr&&(jr.prev=_r);var Gr=_r.parent=Nr.parent;if(Gr){var Wr=Gr.children;Wr[Wr.lastIndexOf(Nr)]=_r,Nr.parent=null}}manipulation.replaceElement=replaceElement;function appendChild(Nr,_r){if(removeElement(_r),_r.next=null,_r.parent=Nr,Nr.children.push(_r)>1){var Ur=Nr.children[Nr.children.length-2];Ur.next=_r,_r.prev=Ur}else _r.prev=null}manipulation.appendChild=appendChild;function append(Nr,_r){removeElement(_r);var Ur=Nr.parent,jr=Nr.next;if(_r.next=jr,_r.prev=Nr,Nr.next=_r,_r.parent=Ur,jr){if(jr.prev=_r,Ur){var Gr=Ur.children;Gr.splice(Gr.lastIndexOf(jr),0,_r)}}else Ur&&Ur.children.push(_r)}manipulation.append=append;function prependChild(Nr,_r){if(removeElement(_r),_r.parent=Nr,_r.prev=null,Nr.children.unshift(_r)!==1){var Ur=Nr.children[1];Ur.prev=_r,_r.next=Ur}else _r.next=null}manipulation.prependChild=prependChild;function prepend(Nr,_r){removeElement(_r);var Ur=Nr.parent;if(Ur){var jr=Ur.children;jr.splice(jr.indexOf(Nr),0,_r)}Nr.prev&&(Nr.prev.next=_r),_r.parent=Ur,_r.prev=Nr.prev,_r.next=Nr,Nr.prev=_r}manipulation.prepend=prepend;var querying={};Object.defineProperty(querying,"__esModule",{value:!0});querying.findAll=querying.existsOne=querying.findOne=querying.findOneChild=querying.find=querying.filter=void 0;var domhandler_1$1=lib$4;function filter$1(Nr,_r,Ur,jr){return Ur===void 0&&(Ur=!0),jr===void 0&&(jr=1/0),find(Nr,Array.isArray(_r)?_r:[_r],Ur,jr)}querying.filter=filter$1;function find(Nr,_r,Ur,jr){for(var Gr=[],Wr=[_r],Zr=[0];;){if(Zr[0]>=Wr[0].length){if(Zr.length===1)return Gr;Wr.shift(),Zr.shift();continue}var Yr=Wr[0][Zr[0]++];if(Nr(Yr)&&(Gr.push(Yr),--jr<=0))return Gr;Ur&&(0,domhandler_1$1.hasChildren)(Yr)&&Yr.children.length>0&&(Zr.unshift(0),Wr.unshift(Yr.children))}}querying.find=find;function findOneChild(Nr,_r){return _r.find(Nr)}querying.findOneChild=findOneChild;function findOne(Nr,_r,Ur){Ur===void 0&&(Ur=!0);for(var jr=null,Gr=0;Gr<_r.length&&!jr;Gr++){var Wr=_r[Gr];if((0,domhandler_1$1.isTag)(Wr))Nr(Wr)?jr=Wr:Ur&&Wr.children.length>0&&(jr=findOne(Nr,Wr.children,!0));else continue}return jr}querying.findOne=findOne;function existsOne(Nr,_r){return _r.some(function(Ur){return(0,domhandler_1$1.isTag)(Ur)&&(Nr(Ur)||existsOne(Nr,Ur.children))})}querying.existsOne=existsOne;function findAll(Nr,_r){for(var Ur=[],jr=[_r],Gr=[0];;){if(Gr[0]>=jr[0].length){if(jr.length===1)return Ur;jr.shift(),Gr.shift();continue}var Wr=jr[0][Gr[0]++];(0,domhandler_1$1.isTag)(Wr)&&(Nr(Wr)&&Ur.push(Wr),Wr.children.length>0&&(Gr.unshift(0),jr.unshift(Wr.children)))}}querying.findAll=findAll;var legacy={};Object.defineProperty(legacy,"__esModule",{value:!0});legacy.getElementsByTagType=legacy.getElementsByTagName=legacy.getElementById=legacy.getElements=legacy.testElement=void 0;var domhandler_1=lib$4,querying_js_1=querying,Checks={tag_name:function(Nr){return typeof Nr=="function"?function(_r){return(0,domhandler_1.isTag)(_r)&&Nr(_r.name)}:Nr==="*"?domhandler_1.isTag:function(_r){return(0,domhandler_1.isTag)(_r)&&_r.name===Nr}},tag_type:function(Nr){return typeof Nr=="function"?function(_r){return Nr(_r.type)}:function(_r){return _r.type===Nr}},tag_contains:function(Nr){return typeof Nr=="function"?function(_r){return(0,domhandler_1.isText)(_r)&&Nr(_r.data)}:function(_r){return(0,domhandler_1.isText)(_r)&&_r.data===Nr}}};function getAttribCheck(Nr,_r){return typeof _r=="function"?function(Ur){return(0,domhandler_1.isTag)(Ur)&&_r(Ur.attribs[Nr])}:function(Ur){return(0,domhandler_1.isTag)(Ur)&&Ur.attribs[Nr]===_r}}function combineFuncs(Nr,_r){return function(Ur){return Nr(Ur)||_r(Ur)}}function compileTest(Nr){var _r=Object.keys(Nr).map(function(Ur){var jr=Nr[Ur];return Object.prototype.hasOwnProperty.call(Checks,Ur)?Checks[Ur](jr):getAttribCheck(Ur,jr)});return _r.length===0?null:_r.reduce(combineFuncs)}function testElement(Nr,_r){var Ur=compileTest(Nr);return Ur?Ur(_r):!0}legacy.testElement=testElement;function getElements(Nr,_r,Ur,jr){jr===void 0&&(jr=1/0);var Gr=compileTest(Nr);return Gr?(0,querying_js_1.filter)(Gr,_r,Ur,jr):[]}legacy.getElements=getElements;function getElementById(Nr,_r,Ur){return Ur===void 0&&(Ur=!0),Array.isArray(_r)||(_r=[_r]),(0,querying_js_1.findOne)(getAttribCheck("id",Nr),_r,Ur)}legacy.getElementById=getElementById;function getElementsByTagName(Nr,_r,Ur,jr){return Ur===void 0&&(Ur=!0),jr===void 0&&(jr=1/0),(0,querying_js_1.filter)(Checks.tag_name(Nr),_r,Ur,jr)}legacy.getElementsByTagName=getElementsByTagName;function getElementsByTagType(Nr,_r,Ur,jr){return Ur===void 0&&(Ur=!0),jr===void 0&&(jr=1/0),(0,querying_js_1.filter)(Checks.tag_type(Nr),_r,Ur,jr)}legacy.getElementsByTagType=getElementsByTagType;var helpers$1={};(function(Nr){Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.uniqueSort=Nr.compareDocumentPosition=Nr.DocumentPosition=Nr.removeSubsets=void 0;var _r=lib$4;function Ur(Zr){for(var Yr=Zr.length;--Yr>=0;){var ts=Zr[Yr];if(Yr>0&&Zr.lastIndexOf(ts,Yr-1)>=0){Zr.splice(Yr,1);continue}for(var es=ts.parent;es;es=es.parent)if(Zr.includes(es)){Zr.splice(Yr,1);break}}return Zr}Nr.removeSubsets=Ur;var jr;(function(Zr){Zr[Zr.DISCONNECTED=1]="DISCONNECTED",Zr[Zr.PRECEDING=2]="PRECEDING",Zr[Zr.FOLLOWING=4]="FOLLOWING",Zr[Zr.CONTAINS=8]="CONTAINS",Zr[Zr.CONTAINED_BY=16]="CONTAINED_BY"})(jr=Nr.DocumentPosition||(Nr.DocumentPosition={}));function Gr(Zr,Yr){var ts=[],es=[];if(Zr===Yr)return 0;for(var ns=(0,_r.hasChildren)(Zr)?Zr:Zr.parent;ns;)ts.unshift(ns),ns=ns.parent;for(ns=(0,_r.hasChildren)(Yr)?Yr:Yr.parent;ns;)es.unshift(ns),ns=ns.parent;for(var Xr=Math.min(ts.length,es.length),qr=0;qr<Xr&&ts[qr]===es[qr];)qr++;if(qr===0)return jr.DISCONNECTED;var _i=ts[qr-1],rs=_i.children,is=ts[qr],ss=es[qr];return rs.indexOf(is)>rs.indexOf(ss)?_i===Yr?jr.FOLLOWING|jr.CONTAINED_BY:jr.FOLLOWING:_i===Zr?jr.PRECEDING|jr.CONTAINS:jr.PRECEDING}Nr.compareDocumentPosition=Gr;function Wr(Zr){return Zr=Zr.filter(function(Yr,ts,es){return!es.includes(Yr,ts+1)}),Zr.sort(function(Yr,ts){var es=Gr(Yr,ts);return es&jr.PRECEDING?-1:es&jr.FOLLOWING?1:0}),Zr}Nr.uniqueSort=Wr})(helpers$1);var feeds={};Object.defineProperty(feeds,"__esModule",{value:!0});feeds.getFeed=void 0;var stringify_js_1=stringify$5,legacy_js_1=legacy;function getFeed(Nr){var _r=getOneElement(isValidFeed,Nr);return _r?_r.name==="feed"?getAtomFeed(_r):getRssFeed(_r):null}feeds.getFeed=getFeed;function getAtomFeed(Nr){var _r,Ur=Nr.children,jr={type:"atom",items:(0,legacy_js_1.getElementsByTagName)("entry",Ur).map(function(Zr){var Yr,ts=Zr.children,es={media:getMediaElements(ts)};addConditionally(es,"id","id",ts),addConditionally(es,"title","title",ts);var ns=(Yr=getOneElement("link",ts))===null||Yr===void 0?void 0:Yr.attribs.href;ns&&(es.link=ns);var Xr=fetch$1("summary",ts)||fetch$1("content",ts);Xr&&(es.description=Xr);var qr=fetch$1("updated",ts);return qr&&(es.pubDate=new Date(qr)),es})};addConditionally(jr,"id","id",Ur),addConditionally(jr,"title","title",Ur);var Gr=(_r=getOneElement("link",Ur))===null||_r===void 0?void 0:_r.attribs.href;Gr&&(jr.link=Gr),addConditionally(jr,"description","subtitle",Ur);var Wr=fetch$1("updated",Ur);return Wr&&(jr.updated=new Date(Wr)),addConditionally(jr,"author","email",Ur,!0),jr}function getRssFeed(Nr){var _r,Ur,jr=(Ur=(_r=getOneElement("channel",Nr.children))===null||_r===void 0?void 0:_r.children)!==null&&Ur!==void 0?Ur:[],Gr={type:Nr.name.substr(0,3),id:"",items:(0,legacy_js_1.getElementsByTagName)("item",Nr.children).map(function(Zr){var Yr=Zr.children,ts={media:getMediaElements(Yr)};addConditionally(ts,"id","guid",Yr),addConditionally(ts,"title","title",Yr),addConditionally(ts,"link","link",Yr),addConditionally(ts,"description","description",Yr);var es=fetch$1("pubDate",Yr)||fetch$1("dc:date",Yr);return es&&(ts.pubDate=new Date(es)),ts})};addConditionally(Gr,"title","title",jr),addConditionally(Gr,"link","link",jr),addConditionally(Gr,"description","description",jr);var Wr=fetch$1("lastBuildDate",jr);return Wr&&(Gr.updated=new Date(Wr)),addConditionally(Gr,"author","managingEditor",jr,!0),Gr}var MEDIA_KEYS_STRING=["url","type","lang"],MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(Nr){return(0,legacy_js_1.getElementsByTagName)("media:content",Nr).map(function(_r){for(var Ur=_r.attribs,jr={medium:Ur.medium,isDefault:!!Ur.isDefault},Gr=0,Wr=MEDIA_KEYS_STRING;Gr<Wr.length;Gr++){var Zr=Wr[Gr];Ur[Zr]&&(jr[Zr]=Ur[Zr])}for(var Yr=0,ts=MEDIA_KEYS_INT;Yr<ts.length;Yr++){var Zr=ts[Yr];Ur[Zr]&&(jr[Zr]=parseInt(Ur[Zr],10))}return Ur.expression&&(jr.expression=Ur.expression),jr})}function getOneElement(Nr,_r){return(0,legacy_js_1.getElementsByTagName)(Nr,_r,!0,1)[0]}function fetch$1(Nr,_r,Ur){return Ur===void 0&&(Ur=!1),(0,stringify_js_1.textContent)((0,legacy_js_1.getElementsByTagName)(Nr,_r,Ur,1)).trim()}function addConditionally(Nr,_r,Ur,jr,Gr){Gr===void 0&&(Gr=!1);var Wr=fetch$1(Ur,jr,Gr);Wr&&(Nr[_r]=Wr)}function isValidFeed(Nr){return Nr==="rss"||Nr==="feed"||Nr==="rdf:RDF"}(function(Nr){var _r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Gr,Wr,Zr,Yr){Yr===void 0&&(Yr=Zr);var ts=Object.getOwnPropertyDescriptor(Wr,Zr);(!ts||("get"in ts?!Wr.__esModule:ts.writable||ts.configurable))&&(ts={enumerable:!0,get:function(){return Wr[Zr]}}),Object.defineProperty(Gr,Yr,ts)}:function(Gr,Wr,Zr,Yr){Yr===void 0&&(Yr=Zr),Gr[Yr]=Wr[Zr]}),Ur=commonjsGlobal&&commonjsGlobal.__exportStar||function(Gr,Wr){for(var Zr in Gr)Zr!=="default"&&!Object.prototype.hasOwnProperty.call(Wr,Zr)&&_r(Wr,Gr,Zr)};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.hasChildren=Nr.isDocument=Nr.isComment=Nr.isText=Nr.isCDATA=Nr.isTag=void 0,Ur(stringify$5,Nr),Ur(traversal,Nr),Ur(manipulation,Nr),Ur(querying,Nr),Ur(legacy,Nr),Ur(helpers$1,Nr),Ur(feeds,Nr);var jr=lib$4;Object.defineProperty(Nr,"isTag",{enumerable:!0,get:function(){return jr.isTag}}),Object.defineProperty(Nr,"isCDATA",{enumerable:!0,get:function(){return jr.isCDATA}}),Object.defineProperty(Nr,"isText",{enumerable:!0,get:function(){return jr.isText}}),Object.defineProperty(Nr,"isComment",{enumerable:!0,get:function(){return jr.isComment}}),Object.defineProperty(Nr,"isDocument",{enumerable:!0,get:function(){return jr.isDocument}}),Object.defineProperty(Nr,"hasChildren",{enumerable:!0,get:function(){return jr.hasChildren}})})(lib$2);(function(Nr){var _r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(os,ls,cs,ds){ds===void 0&&(ds=cs);var fs=Object.getOwnPropertyDescriptor(ls,cs);(!fs||("get"in fs?!ls.__esModule:fs.writable||fs.configurable))&&(fs={enumerable:!0,get:function(){return ls[cs]}}),Object.defineProperty(os,ds,fs)}:function(os,ls,cs,ds){ds===void 0&&(ds=cs),os[ds]=ls[cs]}),Ur=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(os,ls){Object.defineProperty(os,"default",{enumerable:!0,value:ls})}:function(os,ls){os.default=ls}),jr=commonjsGlobal&&commonjsGlobal.__importStar||function(os){if(os&&os.__esModule)return os;var ls={};if(os!=null)for(var cs in os)cs!=="default"&&Object.prototype.hasOwnProperty.call(os,cs)&&_r(ls,os,cs);return Ur(ls,os),ls},Gr=commonjsGlobal&&commonjsGlobal.__importDefault||function(os){return os&&os.__esModule?os:{default:os}};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.DomUtils=Nr.parseFeed=Nr.getFeed=Nr.ElementType=Nr.Tokenizer=Nr.createDomStream=Nr.parseDOM=Nr.parseDocument=Nr.DefaultHandler=Nr.DomHandler=Nr.Parser=void 0;var Wr=Parser$3,Zr=Parser$3;Object.defineProperty(Nr,"Parser",{enumerable:!0,get:function(){return Zr.Parser}});var Yr=lib$4,ts=lib$4;Object.defineProperty(Nr,"DomHandler",{enumerable:!0,get:function(){return ts.DomHandler}}),Object.defineProperty(Nr,"DefaultHandler",{enumerable:!0,get:function(){return ts.DomHandler}});function es(os,ls){var cs=new Yr.DomHandler(void 0,ls);return new Wr.Parser(cs,ls).end(os),cs.root}Nr.parseDocument=es;function ns(os,ls){return es(os,ls).children}Nr.parseDOM=ns;function Xr(os,ls,cs){var ds=new Yr.DomHandler(os,ls,cs);return new Wr.Parser(ds,ls)}Nr.createDomStream=Xr;var qr=Tokenizer;Object.defineProperty(Nr,"Tokenizer",{enumerable:!0,get:function(){return Gr(qr).default}}),Nr.ElementType=jr(lib$3);var _i=lib$2,rs=lib$2;Object.defineProperty(Nr,"getFeed",{enumerable:!0,get:function(){return rs.getFeed}});var is={xmlMode:!0};function ss(os,ls){return ls===void 0&&(ls=is),(0,_i.getFeed)(ns(os,ls))}Nr.parseFeed=ss,Nr.DomUtils=jr(lib$2)})(lib$5);var escapeStringRegexp$1=Nr=>{if(typeof Nr!="string")throw new TypeError("Expected a string");return Nr.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},isPlainObject$3={};Object.defineProperty(isPlainObject$3,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function isObject$1(Nr){return Object.prototype.toString.call(Nr)==="[object Object]"}function isPlainObject$2(Nr){var _r,Ur;return isObject$1(Nr)===!1?!1:(_r=Nr.constructor,_r===void 0?!0:(Ur=_r.prototype,!(isObject$1(Ur)===!1||Ur.hasOwnProperty("isPrototypeOf")===!1)))}isPlainObject$3.isPlainObject=isPlainObject$2;var isMergeableObject=function(_r){return isNonNullObject(_r)&&!isSpecial(_r)};function isNonNullObject(Nr){return!!Nr&&typeof Nr=="object"}function isSpecial(Nr){var _r=Object.prototype.toString.call(Nr);return _r==="[object RegExp]"||_r==="[object Date]"||isReactElement(Nr)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(Nr){return Nr.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(Nr){return Array.isArray(Nr)?[]:{}}function cloneUnlessOtherwiseSpecified(Nr,_r){return _r.clone!==!1&&_r.isMergeableObject(Nr)?deepmerge$1(emptyTarget(Nr),Nr,_r):Nr}function defaultArrayMerge(Nr,_r,Ur){return Nr.concat(_r).map(function(jr){return cloneUnlessOtherwiseSpecified(jr,Ur)})}function getMergeFunction(Nr,_r){if(!_r.customMerge)return deepmerge$1;var Ur=_r.customMerge(Nr);return typeof Ur=="function"?Ur:deepmerge$1}function getEnumerableOwnPropertySymbols(Nr){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(Nr).filter(function(_r){return Object.propertyIsEnumerable.call(Nr,_r)}):[]}function getKeys(Nr){return Object.keys(Nr).concat(getEnumerableOwnPropertySymbols(Nr))}function propertyIsOnObject(Nr,_r){try{return _r in Nr}catch{return!1}}function propertyIsUnsafe(Nr,_r){return propertyIsOnObject(Nr,_r)&&!(Object.hasOwnProperty.call(Nr,_r)&&Object.propertyIsEnumerable.call(Nr,_r))}function mergeObject(Nr,_r,Ur){var jr={};return Ur.isMergeableObject(Nr)&&getKeys(Nr).forEach(function(Gr){jr[Gr]=cloneUnlessOtherwiseSpecified(Nr[Gr],Ur)}),getKeys(_r).forEach(function(Gr){propertyIsUnsafe(Nr,Gr)||(propertyIsOnObject(Nr,Gr)&&Ur.isMergeableObject(_r[Gr])?jr[Gr]=getMergeFunction(Gr,Ur)(Nr[Gr],_r[Gr],Ur):jr[Gr]=cloneUnlessOtherwiseSpecified(_r[Gr],Ur))}),jr}function deepmerge$1(Nr,_r,Ur){Ur=Ur||{},Ur.arrayMerge=Ur.arrayMerge||defaultArrayMerge,Ur.isMergeableObject=Ur.isMergeableObject||isMergeableObject,Ur.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var jr=Array.isArray(_r),Gr=Array.isArray(Nr),Wr=jr===Gr;return Wr?jr?Ur.arrayMerge(Nr,_r,Ur):mergeObject(Nr,_r,Ur):cloneUnlessOtherwiseSpecified(_r,Ur)}deepmerge$1.all=function(_r,Ur){if(!Array.isArray(_r))throw new Error("first argument should be an array");return _r.reduce(function(jr,Gr){return deepmerge$1(jr,Gr,Ur)},{})};var deepmerge_1=deepmerge$1,cjs=deepmerge_1,parseSrcset$1={exports:{}};(function(Nr){(function(_r,Ur){Nr.exports?Nr.exports=Ur():_r.parseSrcset=Ur()})(commonjsGlobal,function(){return function(_r){function Ur(ds){return ds===" "||ds==="	"||ds===`
`||ds==="\f"||ds==="\r"}function jr(ds){var fs,ms=ds.exec(_r.substring(ss));if(ms)return fs=ms[0],ss+=fs.length,fs}for(var Gr=_r.length,Wr=/^[ \t\n\r\u000c]+/,Zr=/^[, \t\n\r\u000c]+/,Yr=/^[^ \t\n\r\u000c]+/,ts=/[,]+$/,es=/^\d+$/,ns=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Xr,qr,_i,rs,is,ss=0,os=[];;){if(jr(Zr),ss>=Gr)return os;Xr=jr(Yr),qr=[],Xr.slice(-1)===","?(Xr=Xr.replace(ts,""),cs()):ls()}function ls(){for(jr(Wr),_i="",rs="in descriptor";;){if(is=_r.charAt(ss),rs==="in descriptor")if(Ur(is))_i&&(qr.push(_i),_i="",rs="after descriptor");else if(is===","){ss+=1,_i&&qr.push(_i),cs();return}else if(is==="(")_i=_i+is,rs="in parens";else if(is===""){_i&&qr.push(_i),cs();return}else _i=_i+is;else if(rs==="in parens")if(is===")")_i=_i+is,rs="in descriptor";else if(is===""){qr.push(_i),cs();return}else _i=_i+is;else if(rs==="after descriptor"&&!Ur(is))if(is===""){cs();return}else rs="in descriptor",ss-=1;ss+=1}}function cs(){var ds=!1,fs,ms,ps,ys,ws={},xs,Es,Rs,_s,Bs;for(ys=0;ys<qr.length;ys++)xs=qr[ys],Es=xs[xs.length-1],Rs=xs.substring(0,xs.length-1),_s=parseInt(Rs,10),Bs=parseFloat(Rs),es.test(Rs)&&Es==="w"?((fs||ms)&&(ds=!0),_s===0?ds=!0:fs=_s):ns.test(Rs)&&Es==="x"?((fs||ms||ps)&&(ds=!0),Bs<0?ds=!0:ms=Bs):es.test(Rs)&&Es==="h"?((ps||ms)&&(ds=!0),_s===0?ds=!0:ps=_s):ds=!0;ds?console&&console.log&&console.log("Invalid srcset descriptor found in '"+_r+"' at '"+xs+"'."):(ws.url=Xr,fs&&(ws.w=fs),ms&&(ws.d=ms),ps&&(ws.h=ps),os.push(ws))}}})})(parseSrcset$1);var parseSrcsetExports=parseSrcset$1.exports,picocolors_browser={exports:{}},x=String,create=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}};picocolors_browser.exports=create();picocolors_browser.exports.createColors=create;var picocolors_browserExports=picocolors_browser.exports;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);let pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=class M1 extends Error{constructor(_r,Ur,jr,Gr,Wr,Zr){super(_r),this.name="CssSyntaxError",this.reason=_r,Wr&&(this.file=Wr),Gr&&(this.source=Gr),Zr&&(this.plugin=Zr),typeof Ur<"u"&&typeof jr<"u"&&(typeof Ur=="number"?(this.line=Ur,this.column=jr):(this.line=Ur.line,this.column=Ur.column,this.endLine=jr.line,this.endColumn=jr.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,M1)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(_r){if(!this.source)return"";let Ur=this.source;_r==null&&(_r=pico.isColorSupported),terminalHighlight$1&&_r&&(Ur=terminalHighlight$1(Ur));let jr=Ur.split(/\r?\n/),Gr=Math.max(this.line-3,0),Wr=Math.min(this.line+2,jr.length),Zr=String(Wr).length,Yr,ts;if(_r){let{bold:es,gray:ns,red:Xr}=pico.createColors(!0);Yr=qr=>es(Xr(qr)),ts=qr=>ns(qr)}else Yr=ts=es=>es;return jr.slice(Gr,Wr).map((es,ns)=>{let Xr=Gr+1+ns,qr=" "+(" "+Xr).slice(-Zr)+" | ";if(Xr===this.line){let _i=ts(qr.replace(/\d/g," "))+es.slice(0,this.column-1).replace(/[^\t]/g," ");return Yr(">")+ts(qr)+es+`
 `+_i+Yr("^")}return" "+ts(qr)+es}).join(`
`)}toString(){let _r=this.showSourceCode();return _r&&(_r=`

`+_r+`
`),this.name+": "+this.message+_r}};var cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;var symbols={};symbols.isClean=Symbol("isClean");symbols.my=Symbol("my");const DEFAULT_RAW={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize(Nr){return Nr[0].toUpperCase()+Nr.slice(1)}let Stringifier$2=class{constructor(_r){this.builder=_r}atrule(_r,Ur){let jr="@"+_r.name,Gr=_r.params?this.rawValue(_r,"params"):"";if(typeof _r.raws.afterName<"u"?jr+=_r.raws.afterName:Gr&&(jr+=" "),_r.nodes)this.block(_r,jr+Gr);else{let Wr=(_r.raws.between||"")+(Ur?";":"");this.builder(jr+Gr+Wr,_r)}}beforeAfter(_r,Ur){let jr;_r.type==="decl"?jr=this.raw(_r,null,"beforeDecl"):_r.type==="comment"?jr=this.raw(_r,null,"beforeComment"):Ur==="before"?jr=this.raw(_r,null,"beforeRule"):jr=this.raw(_r,null,"beforeClose");let Gr=_r.parent,Wr=0;for(;Gr&&Gr.type!=="root";)Wr+=1,Gr=Gr.parent;if(jr.includes(`
`)){let Zr=this.raw(_r,null,"indent");if(Zr.length)for(let Yr=0;Yr<Wr;Yr++)jr+=Zr}return jr}block(_r,Ur){let jr=this.raw(_r,"between","beforeOpen");this.builder(Ur+jr+"{",_r,"start");let Gr;_r.nodes&&_r.nodes.length?(this.body(_r),Gr=this.raw(_r,"after")):Gr=this.raw(_r,"after","emptyBody"),Gr&&this.builder(Gr),this.builder("}",_r,"end")}body(_r){let Ur=_r.nodes.length-1;for(;Ur>0&&_r.nodes[Ur].type==="comment";)Ur-=1;let jr=this.raw(_r,"semicolon");for(let Gr=0;Gr<_r.nodes.length;Gr++){let Wr=_r.nodes[Gr],Zr=this.raw(Wr,"before");Zr&&this.builder(Zr),this.stringify(Wr,Ur!==Gr||jr)}}comment(_r){let Ur=this.raw(_r,"left","commentLeft"),jr=this.raw(_r,"right","commentRight");this.builder("/*"+Ur+_r.text+jr+"*/",_r)}decl(_r,Ur){let jr=this.raw(_r,"between","colon"),Gr=_r.prop+jr+this.rawValue(_r,"value");_r.important&&(Gr+=_r.raws.important||" !important"),Ur&&(Gr+=";"),this.builder(Gr,_r)}document(_r){this.body(_r)}raw(_r,Ur,jr){let Gr;if(jr||(jr=Ur),Ur&&(Gr=_r.raws[Ur],typeof Gr<"u"))return Gr;let Wr=_r.parent;if(jr==="before"&&(!Wr||Wr.type==="root"&&Wr.first===_r||Wr&&Wr.type==="document"))return"";if(!Wr)return DEFAULT_RAW[jr];let Zr=_r.root();if(Zr.rawCache||(Zr.rawCache={}),typeof Zr.rawCache[jr]<"u")return Zr.rawCache[jr];if(jr==="before"||jr==="after")return this.beforeAfter(_r,jr);{let Yr="raw"+capitalize(jr);this[Yr]?Gr=this[Yr](Zr,_r):Zr.walk(ts=>{if(Gr=ts.raws[Ur],typeof Gr<"u")return!1})}return typeof Gr>"u"&&(Gr=DEFAULT_RAW[jr]),Zr.rawCache[jr]=Gr,Gr}rawBeforeClose(_r){let Ur;return _r.walk(jr=>{if(jr.nodes&&jr.nodes.length>0&&typeof jr.raws.after<"u")return Ur=jr.raws.after,Ur.includes(`
`)&&(Ur=Ur.replace(/[^\n]+$/,"")),!1}),Ur&&(Ur=Ur.replace(/\S/g,"")),Ur}rawBeforeComment(_r,Ur){let jr;return _r.walkComments(Gr=>{if(typeof Gr.raws.before<"u")return jr=Gr.raws.before,jr.includes(`
`)&&(jr=jr.replace(/[^\n]+$/,"")),!1}),typeof jr>"u"?jr=this.raw(Ur,null,"beforeDecl"):jr&&(jr=jr.replace(/\S/g,"")),jr}rawBeforeDecl(_r,Ur){let jr;return _r.walkDecls(Gr=>{if(typeof Gr.raws.before<"u")return jr=Gr.raws.before,jr.includes(`
`)&&(jr=jr.replace(/[^\n]+$/,"")),!1}),typeof jr>"u"?jr=this.raw(Ur,null,"beforeRule"):jr&&(jr=jr.replace(/\S/g,"")),jr}rawBeforeOpen(_r){let Ur;return _r.walk(jr=>{if(jr.type!=="decl"&&(Ur=jr.raws.between,typeof Ur<"u"))return!1}),Ur}rawBeforeRule(_r){let Ur;return _r.walk(jr=>{if(jr.nodes&&(jr.parent!==_r||_r.first!==jr)&&typeof jr.raws.before<"u")return Ur=jr.raws.before,Ur.includes(`
`)&&(Ur=Ur.replace(/[^\n]+$/,"")),!1}),Ur&&(Ur=Ur.replace(/\S/g,"")),Ur}rawColon(_r){let Ur;return _r.walkDecls(jr=>{if(typeof jr.raws.between<"u")return Ur=jr.raws.between.replace(/[^\s:]/g,""),!1}),Ur}rawEmptyBody(_r){let Ur;return _r.walk(jr=>{if(jr.nodes&&jr.nodes.length===0&&(Ur=jr.raws.after,typeof Ur<"u"))return!1}),Ur}rawIndent(_r){if(_r.raws.indent)return _r.raws.indent;let Ur;return _r.walk(jr=>{let Gr=jr.parent;if(Gr&&Gr!==_r&&Gr.parent&&Gr.parent===_r&&typeof jr.raws.before<"u"){let Wr=jr.raws.before.split(`
`);return Ur=Wr[Wr.length-1],Ur=Ur.replace(/\S/g,""),!1}}),Ur}rawSemicolon(_r){let Ur;return _r.walk(jr=>{if(jr.nodes&&jr.nodes.length&&jr.last.type==="decl"&&(Ur=jr.raws.semicolon,typeof Ur<"u"))return!1}),Ur}rawValue(_r,Ur){let jr=_r[Ur],Gr=_r.raws[Ur];return Gr&&Gr.value===jr?Gr.raw:jr}root(_r){this.body(_r),_r.raws.after&&this.builder(_r.raws.after)}rule(_r){this.block(_r,this.rawValue(_r,"selector")),_r.raws.ownSemicolon&&this.builder(_r.raws.ownSemicolon,_r,"end")}stringify(_r,Ur){if(!this[_r.type])throw new Error("Unknown AST node type "+_r.type+". Maybe you need to change PostCSS stringifier.");this[_r.type](_r,Ur)}};var stringifier=Stringifier$2;Stringifier$2.default=Stringifier$2;let Stringifier$1=stringifier;function stringify$4(Nr,_r){new Stringifier$1(_r).stringify(Nr)}var stringify_1=stringify$4;stringify$4.default=stringify$4;let{isClean:isClean$2,my:my$2}=symbols,CssSyntaxError$2=cssSyntaxError,Stringifier=stringifier,stringify$3=stringify_1;function cloneNode(Nr,_r){let Ur=new Nr.constructor;for(let jr in Nr){if(!Object.prototype.hasOwnProperty.call(Nr,jr)||jr==="proxyCache")continue;let Gr=Nr[jr],Wr=typeof Gr;jr==="parent"&&Wr==="object"?_r&&(Ur[jr]=_r):jr==="source"?Ur[jr]=Gr:Array.isArray(Gr)?Ur[jr]=Gr.map(Zr=>cloneNode(Zr,Ur)):(Wr==="object"&&Gr!==null&&(Gr=cloneNode(Gr)),Ur[jr]=Gr)}return Ur}let Node$5=class{constructor(_r={}){this.raws={},this[isClean$2]=!1,this[my$2]=!0;for(let Ur in _r)if(Ur==="nodes"){this.nodes=[];for(let jr of _r[Ur])typeof jr.clone=="function"?this.append(jr.clone()):this.append(jr)}else this[Ur]=_r[Ur]}addToError(_r){if(_r.postcssNode=this,_r.stack&&this.source&&/\n\s{4}at /.test(_r.stack)){let Ur=this.source;_r.stack=_r.stack.replace(/\n\s{4}at /,`$&${Ur.input.from}:${Ur.start.line}:${Ur.start.column}$&`)}return _r}after(_r){return this.parent.insertAfter(this,_r),this}assign(_r={}){for(let Ur in _r)this[Ur]=_r[Ur];return this}before(_r){return this.parent.insertBefore(this,_r),this}cleanRaws(_r){delete this.raws.before,delete this.raws.after,_r||delete this.raws.between}clone(_r={}){let Ur=cloneNode(this);for(let jr in _r)Ur[jr]=_r[jr];return Ur}cloneAfter(_r={}){let Ur=this.clone(_r);return this.parent.insertAfter(this,Ur),Ur}cloneBefore(_r={}){let Ur=this.clone(_r);return this.parent.insertBefore(this,Ur),Ur}error(_r,Ur={}){if(this.source){let{end:jr,start:Gr}=this.rangeBy(Ur);return this.source.input.error(_r,{column:Gr.column,line:Gr.line},{column:jr.column,line:jr.line},Ur)}return new CssSyntaxError$2(_r)}getProxyProcessor(){return{get(_r,Ur){return Ur==="proxyOf"?_r:Ur==="root"?()=>_r.root().toProxy():_r[Ur]},set(_r,Ur,jr){return _r[Ur]===jr||(_r[Ur]=jr,(Ur==="prop"||Ur==="value"||Ur==="name"||Ur==="params"||Ur==="important"||Ur==="text")&&_r.markDirty()),!0}}}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let _r=this;for(;_r=_r.parent;)_r[isClean$2]=!1}}next(){if(!this.parent)return;let _r=this.parent.index(this);return this.parent.nodes[_r+1]}positionBy(_r,Ur){let jr=this.source.start;if(_r.index)jr=this.positionInside(_r.index,Ur);else if(_r.word){Ur=this.toString();let Gr=Ur.indexOf(_r.word);Gr!==-1&&(jr=this.positionInside(Gr,Ur))}return jr}positionInside(_r,Ur){let jr=Ur||this.toString(),Gr=this.source.start.column,Wr=this.source.start.line;for(let Zr=0;Zr<_r;Zr++)jr[Zr]===`
`?(Gr=1,Wr+=1):Gr+=1;return{column:Gr,line:Wr}}prev(){if(!this.parent)return;let _r=this.parent.index(this);return this.parent.nodes[_r-1]}rangeBy(_r){let Ur={column:this.source.start.column,line:this.source.start.line},jr=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:Ur.column+1,line:Ur.line};if(_r.word){let Gr=this.toString(),Wr=Gr.indexOf(_r.word);Wr!==-1&&(Ur=this.positionInside(Wr,Gr),jr=this.positionInside(Wr+_r.word.length,Gr))}else _r.start?Ur={column:_r.start.column,line:_r.start.line}:_r.index&&(Ur=this.positionInside(_r.index)),_r.end?jr={column:_r.end.column,line:_r.end.line}:_r.endIndex?jr=this.positionInside(_r.endIndex):_r.index&&(jr=this.positionInside(_r.index+1));return(jr.line<Ur.line||jr.line===Ur.line&&jr.column<=Ur.column)&&(jr={column:Ur.column+1,line:Ur.line}),{end:jr,start:Ur}}raw(_r,Ur){return new Stringifier().raw(this,_r,Ur)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(..._r){if(this.parent){let Ur=this,jr=!1;for(let Gr of _r)Gr===this?jr=!0:jr?(this.parent.insertAfter(Ur,Gr),Ur=Gr):this.parent.insertBefore(Ur,Gr);jr||this.remove()}return this}root(){let _r=this;for(;_r.parent&&_r.parent.type!=="document";)_r=_r.parent;return _r}toJSON(_r,Ur){let jr={},Gr=Ur==null;Ur=Ur||new Map;let Wr=0;for(let Zr in this){if(!Object.prototype.hasOwnProperty.call(this,Zr)||Zr==="parent"||Zr==="proxyCache")continue;let Yr=this[Zr];if(Array.isArray(Yr))jr[Zr]=Yr.map(ts=>typeof ts=="object"&&ts.toJSON?ts.toJSON(null,Ur):ts);else if(typeof Yr=="object"&&Yr.toJSON)jr[Zr]=Yr.toJSON(null,Ur);else if(Zr==="source"){let ts=Ur.get(Yr.input);ts==null&&(ts=Wr,Ur.set(Yr.input,Wr),Wr++),jr[Zr]={end:Yr.end,inputId:ts,start:Yr.start}}else jr[Zr]=Yr}return Gr&&(jr.inputs=[...Ur.keys()].map(Zr=>Zr.toJSON())),jr}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(_r=stringify$3){_r.stringify&&(_r=_r.stringify);let Ur="";return _r(this,jr=>{Ur+=jr}),Ur}warn(_r,Ur,jr){let Gr={node:this};for(let Wr in jr)Gr[Wr]=jr[Wr];return _r.warn(Ur,Gr)}get proxyOf(){return this}};var node=Node$5;Node$5.default=Node$5;let Node$4=node,Declaration$4=class extends Node$4{constructor(_r){_r&&typeof _r.value<"u"&&typeof _r.value!="string"&&(_r={..._r,value:String(_r.value)}),super(_r),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var declaration=Declaration$4;Declaration$4.default=Declaration$4;let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(Nr,_r=21)=>(Ur=_r)=>{let jr="",Gr=Ur;for(;Gr--;)jr+=Nr[Math.random()*Nr.length|0];return jr},nanoid$1=(Nr=21)=>{let _r="",Ur=Nr;for(;Ur--;)_r+=urlAlphabet[Math.random()*64|0];return _r};var nonSecure={nanoid:nanoid$1,customAlphabet};let{SourceMapConsumer:SourceMapConsumer$2,SourceMapGenerator:SourceMapGenerator$2}=require$$2,{existsSync,readFileSync}=require$$2,{dirname:dirname$1,join}=require$$2;function fromBase64(Nr){return Buffer?Buffer.from(Nr,"base64").toString():window.atob(Nr)}let PreviousMap$2=class{constructor(_r,Ur){if(Ur.map===!1)return;this.loadAnnotation(_r),this.inline=this.startWith(this.annotation,"data:");let jr=Ur.map?Ur.map.prev:void 0,Gr=this.loadMap(Ur.from,jr);!this.mapFile&&Ur.from&&(this.mapFile=Ur.from),this.mapFile&&(this.root=dirname$1(this.mapFile)),Gr&&(this.text=Gr)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2(this.text)),this.consumerCache}decodeInline(_r){let Ur=/^data:application\/json;charset=utf-?8;base64,/,jr=/^data:application\/json;base64,/,Gr=/^data:application\/json;charset=utf-?8,/,Wr=/^data:application\/json,/;if(Gr.test(_r)||Wr.test(_r))return decodeURIComponent(_r.substr(RegExp.lastMatch.length));if(Ur.test(_r)||jr.test(_r))return fromBase64(_r.substr(RegExp.lastMatch.length));let Zr=_r.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+Zr)}getAnnotationURL(_r){return _r.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(_r){return typeof _r!="object"?!1:typeof _r.mappings=="string"||typeof _r._mappings=="string"||Array.isArray(_r.sections)}loadAnnotation(_r){let Ur=_r.match(/\/\*\s*# sourceMappingURL=/gm);if(!Ur)return;let jr=_r.lastIndexOf(Ur.pop()),Gr=_r.indexOf("*/",jr);jr>-1&&Gr>-1&&(this.annotation=this.getAnnotationURL(_r.substring(jr,Gr)))}loadFile(_r){if(this.root=dirname$1(_r),existsSync(_r))return this.mapFile=_r,readFileSync(_r,"utf-8").toString().trim()}loadMap(_r,Ur){if(Ur===!1)return!1;if(Ur){if(typeof Ur=="string")return Ur;if(typeof Ur=="function"){let jr=Ur(_r);if(jr){let Gr=this.loadFile(jr);if(!Gr)throw new Error("Unable to load previous source map: "+jr.toString());return Gr}}else{if(Ur instanceof SourceMapConsumer$2)return SourceMapGenerator$2.fromSourceMap(Ur).toString();if(Ur instanceof SourceMapGenerator$2)return Ur.toString();if(this.isMap(Ur))return JSON.stringify(Ur);throw new Error("Unsupported previous source map format: "+Ur.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let jr=this.annotation;return _r&&(jr=join(dirname$1(_r),jr)),this.loadFile(jr)}}}startWith(_r,Ur){return _r?_r.substr(0,Ur.length)===Ur:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var previousMap=PreviousMap$2;PreviousMap$2.default=PreviousMap$2;let{SourceMapConsumer:SourceMapConsumer$1,SourceMapGenerator:SourceMapGenerator$1}=require$$2,{fileURLToPath,pathToFileURL:pathToFileURL$1}=require$$2,{isAbsolute,resolve:resolve$1}=require$$2,{nanoid}=nonSecure,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol("fromOffsetCache"),sourceMapAvailable$1=!!(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=!!(resolve$1&&isAbsolute),Input$4=class{constructor(_r,Ur={}){if(_r===null||typeof _r>"u"||typeof _r=="object"&&!_r.toString)throw new Error(`PostCSS received ${_r} instead of CSS string`);if(this.css=_r.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,Ur.from&&(!pathAvailable$1||/^\w+:\/\//.test(Ur.from)||isAbsolute(Ur.from)?this.file=Ur.from:this.file=resolve$1(Ur.from)),pathAvailable$1&&sourceMapAvailable$1){let jr=new PreviousMap$1(this.css,Ur);if(jr.text){this.map=jr;let Gr=jr.consumer().file;!this.file&&Gr&&(this.file=this.mapResolve(Gr))}}this.file||(this.id="<input css "+nanoid(6)+">"),this.map&&(this.map.file=this.from)}error(_r,Ur,jr,Gr={}){let Wr,Zr,Yr;if(Ur&&typeof Ur=="object"){let es=Ur,ns=jr;if(typeof es.offset=="number"){let Xr=this.fromOffset(es.offset);Ur=Xr.line,jr=Xr.col}else Ur=es.line,jr=es.column;if(typeof ns.offset=="number"){let Xr=this.fromOffset(ns.offset);Zr=Xr.line,Yr=Xr.col}else Zr=ns.line,Yr=ns.column}else if(!jr){let es=this.fromOffset(Ur);Ur=es.line,jr=es.col}let ts=this.origin(Ur,jr,Zr,Yr);return ts?Wr=new CssSyntaxError$1(_r,ts.endLine===void 0?ts.line:{column:ts.column,line:ts.line},ts.endLine===void 0?ts.column:{column:ts.endColumn,line:ts.endLine},ts.source,ts.file,Gr.plugin):Wr=new CssSyntaxError$1(_r,Zr===void 0?Ur:{column:jr,line:Ur},Zr===void 0?jr:{column:Yr,line:Zr},this.css,this.file,Gr.plugin),Wr.input={column:jr,endColumn:Yr,endLine:Zr,line:Ur,source:this.css},this.file&&(pathToFileURL$1&&(Wr.input.url=pathToFileURL$1(this.file).toString()),Wr.input.file=this.file),Wr}fromOffset(_r){let Ur,jr;if(this[fromOffsetCache])jr=this[fromOffsetCache];else{let Wr=this.css.split(`
`);jr=new Array(Wr.length);let Zr=0;for(let Yr=0,ts=Wr.length;Yr<ts;Yr++)jr[Yr]=Zr,Zr+=Wr[Yr].length+1;this[fromOffsetCache]=jr}Ur=jr[jr.length-1];let Gr=0;if(_r>=Ur)Gr=jr.length-1;else{let Wr=jr.length-2,Zr;for(;Gr<Wr;)if(Zr=Gr+(Wr-Gr>>1),_r<jr[Zr])Wr=Zr-1;else if(_r>=jr[Zr+1])Gr=Zr+1;else{Gr=Zr;break}}return{col:_r-jr[Gr]+1,line:Gr+1}}mapResolve(_r){return/^\w+:\/\//.test(_r)?_r:resolve$1(this.map.consumer().sourceRoot||this.map.root||".",_r)}origin(_r,Ur,jr,Gr){if(!this.map)return!1;let Wr=this.map.consumer(),Zr=Wr.originalPositionFor({column:Ur,line:_r});if(!Zr.source)return!1;let Yr;typeof jr=="number"&&(Yr=Wr.originalPositionFor({column:Gr,line:jr}));let ts;isAbsolute(Zr.source)?ts=pathToFileURL$1(Zr.source):ts=new URL(Zr.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));let es={column:Zr.column,endColumn:Yr&&Yr.column,endLine:Yr&&Yr.line,line:Zr.line,url:ts.toString()};if(ts.protocol==="file:")if(fileURLToPath)es.file=fileURLToPath(ts);else throw new Error("file: protocol is not available in this PostCSS build");let ns=Wr.sourceContentFor(Zr.source);return ns&&(es.source=ns),es}toJSON(){let _r={};for(let Ur of["hasBOM","css","file","id"])this[Ur]!=null&&(_r[Ur]=this[Ur]);return this.map&&(_r.map={...this.map},_r.map.consumerCache&&(_r.map.consumerCache=void 0)),_r}get from(){return this.file||this.id}};var input=Input$4;Input$4.default=Input$4;terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4);let{SourceMapConsumer,SourceMapGenerator}=require$$2,{dirname,relative,resolve,sep}=require$$2,{pathToFileURL}=require$$2,Input$3=input,sourceMapAvailable=!!(SourceMapConsumer&&SourceMapGenerator),pathAvailable=!!(dirname&&resolve&&relative&&sep),MapGenerator$2=class{constructor(_r,Ur,jr,Gr){this.stringify=_r,this.mapOpts=jr.map||{},this.root=Ur,this.opts=jr,this.css=Gr,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let _r;this.isInline()?_r="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?_r=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?_r=this.mapOpts.annotation(this.opts.to,this.root):_r=this.outputFile()+".map";let Ur=`
`;this.css.includes(`\r
`)&&(Ur=`\r
`),this.css+=Ur+"/*# sourceMappingURL="+_r+" */"}applyPrevMaps(){for(let _r of this.previous()){let Ur=this.toUrl(this.path(_r.file)),jr=_r.root||dirname(_r.file),Gr;this.mapOpts.sourcesContent===!1?(Gr=new SourceMapConsumer(_r.text),Gr.sourcesContent&&(Gr.sourcesContent=Gr.sourcesContent.map(()=>null))):Gr=_r.consumer(),this.map.applySourceMap(Gr,Ur,this.toUrl(this.path(jr)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let _r;for(let Ur=this.root.nodes.length-1;Ur>=0;Ur--)_r=this.root.nodes[Ur],_r.type==="comment"&&_r.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(Ur)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();{let _r="";return this.stringify(this.root,Ur=>{_r+=Ur}),[_r]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let _r=this.previous()[0].consumer();_r.file=this.outputFile(),this.map=SourceMapGenerator.fromSourceMap(_r)}else this.map=new SourceMapGenerator({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new SourceMapGenerator({file:this.outputFile()});let _r=1,Ur=1,jr="<no source>",Gr={generated:{column:0,line:0},original:{column:0,line:0},source:""},Wr,Zr;this.stringify(this.root,(Yr,ts,es)=>{if(this.css+=Yr,ts&&es!=="end"&&(Gr.generated.line=_r,Gr.generated.column=Ur-1,ts.source&&ts.source.start?(Gr.source=this.sourcePath(ts),Gr.original.line=ts.source.start.line,Gr.original.column=ts.source.start.column-1,this.map.addMapping(Gr)):(Gr.source=jr,Gr.original.line=1,Gr.original.column=0,this.map.addMapping(Gr))),Wr=Yr.match(/\n/g),Wr?(_r+=Wr.length,Zr=Yr.lastIndexOf(`
`),Ur=Yr.length-Zr):Ur+=Yr.length,ts&&es!=="start"){let ns=ts.parent||{raws:{}};(!(ts.type==="decl"||ts.type==="atrule"&&!ts.nodes)||ts!==ns.last||ns.raws.semicolon)&&(ts.source&&ts.source.end?(Gr.source=this.sourcePath(ts),Gr.original.line=ts.source.end.line,Gr.original.column=ts.source.end.column-1,Gr.generated.line=_r,Gr.generated.column=Ur-2,this.map.addMapping(Gr)):(Gr.source=jr,Gr.original.line=1,Gr.original.column=0,Gr.generated.line=_r,Gr.generated.column=Ur-1,this.map.addMapping(Gr)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(_r=>_r.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let _r=this.mapOpts.annotation;return typeof _r<"u"&&_r!==!0?!1:this.previous().length?this.previous().some(Ur=>Ur.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(_r=>_r.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(_r){if(this.mapOpts.absolute||_r.charCodeAt(0)===60||/^\w+:\/\//.test(_r))return _r;let Ur=this.memoizedPaths.get(_r);if(Ur)return Ur;let jr=this.opts.to?dirname(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(jr=dirname(resolve(jr,this.mapOpts.annotation)));let Gr=relative(jr,_r);return this.memoizedPaths.set(_r,Gr),Gr}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(_r=>{if(_r.source&&_r.source.input.map){let Ur=_r.source.input.map;this.previousMaps.includes(Ur)||this.previousMaps.push(Ur)}});else{let _r=new Input$3(this.css,this.opts);_r.map&&this.previousMaps.push(_r.map)}return this.previousMaps}setSourcesContent(){let _r={};if(this.root)this.root.walk(Ur=>{if(Ur.source){let jr=Ur.source.input.from;if(jr&&!_r[jr]){_r[jr]=!0;let Gr=this.usesFileUrls?this.toFileUrl(jr):this.toUrl(this.path(jr));this.map.setSourceContent(Gr,Ur.source.input.css)}}});else if(this.css){let Ur=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(Ur,this.css)}}sourcePath(_r){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(_r.source.input.from):this.toUrl(this.path(_r.source.input.from))}toBase64(_r){return Buffer?Buffer.from(_r).toString("base64"):window.btoa(unescape(encodeURIComponent(_r)))}toFileUrl(_r){let Ur=this.memoizedFileURLs.get(_r);if(Ur)return Ur;if(pathToFileURL){let jr=pathToFileURL(_r).toString();return this.memoizedFileURLs.set(_r,jr),jr}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(_r){let Ur=this.memoizedURLs.get(_r);if(Ur)return Ur;sep==="\\"&&(_r=_r.replace(/\\/g,"/"));let jr=encodeURI(_r).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(_r,jr),jr}};var mapGenerator=MapGenerator$2;let Node$3=node,Comment$4=class extends Node$3{constructor(_r){super(_r),this.type="comment"}};var comment=Comment$4;Comment$4.default=Comment$4;let{isClean:isClean$1,my:my$1}=symbols,Declaration$3=declaration,Comment$3=comment,Node$2=node,parse$9,Rule$4,AtRule$4,Root$6;function cleanSource(Nr){return Nr.map(_r=>(_r.nodes&&(_r.nodes=cleanSource(_r.nodes)),delete _r.source,_r))}function markDirtyUp(Nr){if(Nr[isClean$1]=!1,Nr.proxyOf.nodes)for(let _r of Nr.proxyOf.nodes)markDirtyUp(_r)}let Container$7=class N1 extends Node$2{append(..._r){for(let Ur of _r){let jr=this.normalize(Ur,this.last);for(let Gr of jr)this.proxyOf.nodes.push(Gr)}return this.markDirty(),this}cleanRaws(_r){if(super.cleanRaws(_r),this.nodes)for(let Ur of this.nodes)Ur.cleanRaws(_r)}each(_r){if(!this.proxyOf.nodes)return;let Ur=this.getIterator(),jr,Gr;for(;this.indexes[Ur]<this.proxyOf.nodes.length&&(jr=this.indexes[Ur],Gr=_r(this.proxyOf.nodes[jr],jr),Gr!==!1);)this.indexes[Ur]+=1;return delete this.indexes[Ur],Gr}every(_r){return this.nodes.every(_r)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let _r=this.lastEach;return this.indexes[_r]=0,_r}getProxyProcessor(){return{get(_r,Ur){return Ur==="proxyOf"?_r:_r[Ur]?Ur==="each"||typeof Ur=="string"&&Ur.startsWith("walk")?(...jr)=>_r[Ur](...jr.map(Gr=>typeof Gr=="function"?(Wr,Zr)=>Gr(Wr.toProxy(),Zr):Gr)):Ur==="every"||Ur==="some"?jr=>_r[Ur]((Gr,...Wr)=>jr(Gr.toProxy(),...Wr)):Ur==="root"?()=>_r.root().toProxy():Ur==="nodes"?_r.nodes.map(jr=>jr.toProxy()):Ur==="first"||Ur==="last"?_r[Ur].toProxy():_r[Ur]:_r[Ur]},set(_r,Ur,jr){return _r[Ur]===jr||(_r[Ur]=jr,(Ur==="name"||Ur==="params"||Ur==="selector")&&_r.markDirty()),!0}}}index(_r){return typeof _r=="number"?_r:(_r.proxyOf&&(_r=_r.proxyOf),this.proxyOf.nodes.indexOf(_r))}insertAfter(_r,Ur){let jr=this.index(_r),Gr=this.normalize(Ur,this.proxyOf.nodes[jr]).reverse();jr=this.index(_r);for(let Zr of Gr)this.proxyOf.nodes.splice(jr+1,0,Zr);let Wr;for(let Zr in this.indexes)Wr=this.indexes[Zr],jr<Wr&&(this.indexes[Zr]=Wr+Gr.length);return this.markDirty(),this}insertBefore(_r,Ur){let jr=this.index(_r),Gr=jr===0?"prepend":!1,Wr=this.normalize(Ur,this.proxyOf.nodes[jr],Gr).reverse();jr=this.index(_r);for(let Yr of Wr)this.proxyOf.nodes.splice(jr,0,Yr);let Zr;for(let Yr in this.indexes)Zr=this.indexes[Yr],jr<=Zr&&(this.indexes[Yr]=Zr+Wr.length);return this.markDirty(),this}normalize(_r,Ur){if(typeof _r=="string")_r=cleanSource(parse$9(_r).nodes);else if(Array.isArray(_r)){_r=_r.slice(0);for(let Gr of _r)Gr.parent&&Gr.parent.removeChild(Gr,"ignore")}else if(_r.type==="root"&&this.type!=="document"){_r=_r.nodes.slice(0);for(let Gr of _r)Gr.parent&&Gr.parent.removeChild(Gr,"ignore")}else if(_r.type)_r=[_r];else if(_r.prop){if(typeof _r.value>"u")throw new Error("Value field is missed in node creation");typeof _r.value!="string"&&(_r.value=String(_r.value)),_r=[new Declaration$3(_r)]}else if(_r.selector)_r=[new Rule$4(_r)];else if(_r.name)_r=[new AtRule$4(_r)];else if(_r.text)_r=[new Comment$3(_r)];else throw new Error("Unknown node type in node creation");return _r.map(Gr=>(Gr[my$1]||N1.rebuild(Gr),Gr=Gr.proxyOf,Gr.parent&&Gr.parent.removeChild(Gr),Gr[isClean$1]&&markDirtyUp(Gr),typeof Gr.raws.before>"u"&&Ur&&typeof Ur.raws.before<"u"&&(Gr.raws.before=Ur.raws.before.replace(/\S/g,"")),Gr.parent=this.proxyOf,Gr))}prepend(..._r){_r=_r.reverse();for(let Ur of _r){let jr=this.normalize(Ur,this.first,"prepend").reverse();for(let Gr of jr)this.proxyOf.nodes.unshift(Gr);for(let Gr in this.indexes)this.indexes[Gr]=this.indexes[Gr]+jr.length}return this.markDirty(),this}push(_r){return _r.parent=this,this.proxyOf.nodes.push(_r),this}removeAll(){for(let _r of this.proxyOf.nodes)_r.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(_r){_r=this.index(_r),this.proxyOf.nodes[_r].parent=void 0,this.proxyOf.nodes.splice(_r,1);let Ur;for(let jr in this.indexes)Ur=this.indexes[jr],Ur>=_r&&(this.indexes[jr]=Ur-1);return this.markDirty(),this}replaceValues(_r,Ur,jr){return jr||(jr=Ur,Ur={}),this.walkDecls(Gr=>{Ur.props&&!Ur.props.includes(Gr.prop)||Ur.fast&&!Gr.value.includes(Ur.fast)||(Gr.value=Gr.value.replace(_r,jr))}),this.markDirty(),this}some(_r){return this.nodes.some(_r)}walk(_r){return this.each((Ur,jr)=>{let Gr;try{Gr=_r(Ur,jr)}catch(Wr){throw Ur.addToError(Wr)}return Gr!==!1&&Ur.walk&&(Gr=Ur.walk(_r)),Gr})}walkAtRules(_r,Ur){return Ur?_r instanceof RegExp?this.walk((jr,Gr)=>{if(jr.type==="atrule"&&_r.test(jr.name))return Ur(jr,Gr)}):this.walk((jr,Gr)=>{if(jr.type==="atrule"&&jr.name===_r)return Ur(jr,Gr)}):(Ur=_r,this.walk((jr,Gr)=>{if(jr.type==="atrule")return Ur(jr,Gr)}))}walkComments(_r){return this.walk((Ur,jr)=>{if(Ur.type==="comment")return _r(Ur,jr)})}walkDecls(_r,Ur){return Ur?_r instanceof RegExp?this.walk((jr,Gr)=>{if(jr.type==="decl"&&_r.test(jr.prop))return Ur(jr,Gr)}):this.walk((jr,Gr)=>{if(jr.type==="decl"&&jr.prop===_r)return Ur(jr,Gr)}):(Ur=_r,this.walk((jr,Gr)=>{if(jr.type==="decl")return Ur(jr,Gr)}))}walkRules(_r,Ur){return Ur?_r instanceof RegExp?this.walk((jr,Gr)=>{if(jr.type==="rule"&&_r.test(jr.selector))return Ur(jr,Gr)}):this.walk((jr,Gr)=>{if(jr.type==="rule"&&jr.selector===_r)return Ur(jr,Gr)}):(Ur=_r,this.walk((jr,Gr)=>{if(jr.type==="rule")return Ur(jr,Gr)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Container$7.registerParse=Nr=>{parse$9=Nr};Container$7.registerRule=Nr=>{Rule$4=Nr};Container$7.registerAtRule=Nr=>{AtRule$4=Nr};Container$7.registerRoot=Nr=>{Root$6=Nr};var container=Container$7;Container$7.default=Container$7;Container$7.rebuild=Nr=>{Nr.type==="atrule"?Object.setPrototypeOf(Nr,AtRule$4.prototype):Nr.type==="rule"?Object.setPrototypeOf(Nr,Rule$4.prototype):Nr.type==="decl"?Object.setPrototypeOf(Nr,Declaration$3.prototype):Nr.type==="comment"?Object.setPrototypeOf(Nr,Comment$3.prototype):Nr.type==="root"&&Object.setPrototypeOf(Nr,Root$6.prototype),Nr[my$1]=!0,Nr.nodes&&Nr.nodes.forEach(_r=>{Container$7.rebuild(_r)})};let Container$6=container,LazyResult$4,Processor$3,Document$3=class extends Container$6{constructor(_r){super({type:"document",..._r}),this.nodes||(this.nodes=[])}toResult(_r={}){return new LazyResult$4(new Processor$3,this,_r).stringify()}};Document$3.registerLazyResult=Nr=>{LazyResult$4=Nr};Document$3.registerProcessor=Nr=>{Processor$3=Nr};var document$1=Document$3;Document$3.default=Document$3;let Warning$2=class{constructor(_r,Ur={}){if(this.type="warning",this.text=_r,Ur.node&&Ur.node.source){let jr=Ur.node.rangeBy(Ur);this.line=jr.start.line,this.column=jr.start.column,this.endLine=jr.end.line,this.endColumn=jr.end.column}for(let jr in Ur)this[jr]=Ur[jr]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning=Warning$2;Warning$2.default=Warning$2;let Warning$1=warning,Result$3=class{constructor(_r,Ur,jr){this.processor=_r,this.messages=[],this.root=Ur,this.opts=jr,this.css=void 0,this.map=void 0}toString(){return this.css}warn(_r,Ur={}){Ur.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(Ur.plugin=this.lastPlugin.postcssPlugin);let jr=new Warning$1(_r,Ur);return this.messages.push(jr),jr}warnings(){return this.messages.filter(_r=>_r.type==="warning")}get content(){return this.css}};var result=Result$3;Result$3.default=Result$3;const SINGLE_QUOTE="'".charCodeAt(0),DOUBLE_QUOTE='"'.charCodeAt(0),BACKSLASH="\\".charCodeAt(0),SLASH="/".charCodeAt(0),NEWLINE=`
`.charCodeAt(0),SPACE=" ".charCodeAt(0),FEED="\f".charCodeAt(0),TAB="	".charCodeAt(0),CR="\r".charCodeAt(0),OPEN_SQUARE="[".charCodeAt(0),CLOSE_SQUARE="]".charCodeAt(0),OPEN_PARENTHESES="(".charCodeAt(0),CLOSE_PARENTHESES=")".charCodeAt(0),OPEN_CURLY="{".charCodeAt(0),CLOSE_CURLY="}".charCodeAt(0),SEMICOLON=";".charCodeAt(0),ASTERISK="*".charCodeAt(0),COLON=":".charCodeAt(0),AT="@".charCodeAt(0),RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i;var tokenize=function(_r,Ur={}){let jr=_r.css.valueOf(),Gr=Ur.ignoreErrors,Wr,Zr,Yr,ts,es,ns,Xr,qr,_i,rs,is=jr.length,ss=0,os=[],ls=[];function cs(){return ss}function ds(ys){throw _r.error("Unclosed "+ys,ss)}function fs(){return ls.length===0&&ss>=is}function ms(ys){if(ls.length)return ls.pop();if(ss>=is)return;let ws=ys?ys.ignoreUnclosed:!1;switch(Wr=jr.charCodeAt(ss),Wr){case NEWLINE:case SPACE:case TAB:case CR:case FEED:{Zr=ss;do Zr+=1,Wr=jr.charCodeAt(Zr);while(Wr===SPACE||Wr===NEWLINE||Wr===TAB||Wr===CR||Wr===FEED);rs=["space",jr.slice(ss,Zr)],ss=Zr-1;break}case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let xs=String.fromCharCode(Wr);rs=[xs,xs,ss];break}case OPEN_PARENTHESES:{if(qr=os.length?os.pop()[1]:"",_i=jr.charCodeAt(ss+1),qr==="url"&&_i!==SINGLE_QUOTE&&_i!==DOUBLE_QUOTE&&_i!==SPACE&&_i!==NEWLINE&&_i!==TAB&&_i!==FEED&&_i!==CR){Zr=ss;do{if(ns=!1,Zr=jr.indexOf(")",Zr+1),Zr===-1)if(Gr||ws){Zr=ss;break}else ds("bracket");for(Xr=Zr;jr.charCodeAt(Xr-1)===BACKSLASH;)Xr-=1,ns=!ns}while(ns);rs=["brackets",jr.slice(ss,Zr+1),ss,Zr],ss=Zr}else Zr=jr.indexOf(")",ss+1),ts=jr.slice(ss,Zr+1),Zr===-1||RE_BAD_BRACKET.test(ts)?rs=["(","(",ss]:(rs=["brackets",ts,ss,Zr],ss=Zr);break}case SINGLE_QUOTE:case DOUBLE_QUOTE:{Yr=Wr===SINGLE_QUOTE?"'":'"',Zr=ss;do{if(ns=!1,Zr=jr.indexOf(Yr,Zr+1),Zr===-1)if(Gr||ws){Zr=ss+1;break}else ds("string");for(Xr=Zr;jr.charCodeAt(Xr-1)===BACKSLASH;)Xr-=1,ns=!ns}while(ns);rs=["string",jr.slice(ss,Zr+1),ss,Zr],ss=Zr;break}case AT:{RE_AT_END.lastIndex=ss+1,RE_AT_END.test(jr),RE_AT_END.lastIndex===0?Zr=jr.length-1:Zr=RE_AT_END.lastIndex-2,rs=["at-word",jr.slice(ss,Zr+1),ss,Zr],ss=Zr;break}case BACKSLASH:{for(Zr=ss,es=!0;jr.charCodeAt(Zr+1)===BACKSLASH;)Zr+=1,es=!es;if(Wr=jr.charCodeAt(Zr+1),es&&Wr!==SLASH&&Wr!==SPACE&&Wr!==NEWLINE&&Wr!==TAB&&Wr!==CR&&Wr!==FEED&&(Zr+=1,RE_HEX_ESCAPE.test(jr.charAt(Zr)))){for(;RE_HEX_ESCAPE.test(jr.charAt(Zr+1));)Zr+=1;jr.charCodeAt(Zr+1)===SPACE&&(Zr+=1)}rs=["word",jr.slice(ss,Zr+1),ss,Zr],ss=Zr;break}default:{Wr===SLASH&&jr.charCodeAt(ss+1)===ASTERISK?(Zr=jr.indexOf("*/",ss+2)+1,Zr===0&&(Gr||ws?Zr=jr.length:ds("comment")),rs=["comment",jr.slice(ss,Zr+1),ss,Zr],ss=Zr):(RE_WORD_END.lastIndex=ss+1,RE_WORD_END.test(jr),RE_WORD_END.lastIndex===0?Zr=jr.length-1:Zr=RE_WORD_END.lastIndex-2,rs=["word",jr.slice(ss,Zr+1),ss,Zr],os.push(rs),ss=Zr);break}}return ss++,rs}function ps(ys){ls.push(ys)}return{back:ps,endOfFile:fs,nextToken:ms,position:cs}};let Container$5=container,AtRule$3=class extends Container$5{constructor(_r){super(_r),this.type="atrule"}append(..._r){return this.proxyOf.nodes||(this.nodes=[]),super.append(..._r)}prepend(..._r){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(..._r)}};var atRule=AtRule$3;AtRule$3.default=AtRule$3;Container$5.registerAtRule(AtRule$3);let Container$4=container,LazyResult$3,Processor$2,Root$5=class extends Container$4{constructor(_r){super(_r),this.type="root",this.nodes||(this.nodes=[])}normalize(_r,Ur,jr){let Gr=super.normalize(_r);if(Ur){if(jr==="prepend")this.nodes.length>1?Ur.raws.before=this.nodes[1].raws.before:delete Ur.raws.before;else if(this.first!==Ur)for(let Wr of Gr)Wr.raws.before=Ur.raws.before}return Gr}removeChild(_r,Ur){let jr=this.index(_r);return!Ur&&jr===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[jr].raws.before),super.removeChild(_r)}toResult(_r={}){return new LazyResult$3(new Processor$2,this,_r).stringify()}};Root$5.registerLazyResult=Nr=>{LazyResult$3=Nr};Root$5.registerProcessor=Nr=>{Processor$2=Nr};var root=Root$5;Root$5.default=Root$5;Container$4.registerRoot(Root$5);let list$2={comma(Nr){return list$2.split(Nr,[","],!0)},space(Nr){let _r=[" ",`
`,"	"];return list$2.split(Nr,_r)},split(Nr,_r,Ur){let jr=[],Gr="",Wr=!1,Zr=0,Yr=!1,ts="",es=!1;for(let ns of Nr)es?es=!1:ns==="\\"?es=!0:Yr?ns===ts&&(Yr=!1):ns==='"'||ns==="'"?(Yr=!0,ts=ns):ns==="("?Zr+=1:ns===")"?Zr>0&&(Zr-=1):Zr===0&&_r.includes(ns)&&(Wr=!0),Wr?(Gr!==""&&jr.push(Gr.trim()),Gr="",Wr=!1):Gr+=ns;return(Ur||Gr!=="")&&jr.push(Gr.trim()),jr}};var list_1=list$2;list$2.default=list$2;let Container$3=container,list$1=list_1,Rule$3=class extends Container$3{constructor(_r){super(_r),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1.comma(this.selector)}set selectors(_r){let Ur=this.selector?this.selector.match(/,\s*/):null,jr=Ur?Ur[0]:","+this.raw("between","beforeOpen");this.selector=_r.join(jr)}};var rule=Rule$3;Rule$3.default=Rule$3;Container$3.registerRule(Rule$3);let Declaration$2=declaration,tokenizer=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule;const SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0};function findLastWithPosition(Nr){for(let _r=Nr.length-1;_r>=0;_r--){let Ur=Nr[_r],jr=Ur[3]||Ur[2];if(jr)return jr}}let Parser$1=class{constructor(_r){this.input=_r,this.root=new Root$4,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:_r,start:{column:1,line:1,offset:0}}}atrule(_r){let Ur=new AtRule$2;Ur.name=_r[1].slice(1),Ur.name===""&&this.unnamedAtrule(Ur,_r),this.init(Ur,_r[2]);let jr,Gr,Wr,Zr=!1,Yr=!1,ts=[],es=[];for(;!this.tokenizer.endOfFile();){if(_r=this.tokenizer.nextToken(),jr=_r[0],jr==="("||jr==="["?es.push(jr==="("?")":"]"):jr==="{"&&es.length>0?es.push("}"):jr===es[es.length-1]&&es.pop(),es.length===0)if(jr===";"){Ur.source.end=this.getPosition(_r[2]),Ur.source.end.offset++,this.semicolon=!0;break}else if(jr==="{"){Yr=!0;break}else if(jr==="}"){if(ts.length>0){for(Wr=ts.length-1,Gr=ts[Wr];Gr&&Gr[0]==="space";)Gr=ts[--Wr];Gr&&(Ur.source.end=this.getPosition(Gr[3]||Gr[2]),Ur.source.end.offset++)}this.end(_r);break}else ts.push(_r);else ts.push(_r);if(this.tokenizer.endOfFile()){Zr=!0;break}}Ur.raws.between=this.spacesAndCommentsFromEnd(ts),ts.length?(Ur.raws.afterName=this.spacesAndCommentsFromStart(ts),this.raw(Ur,"params",ts),Zr&&(_r=ts[ts.length-1],Ur.source.end=this.getPosition(_r[3]||_r[2]),Ur.source.end.offset++,this.spaces=Ur.raws.between,Ur.raws.between="")):(Ur.raws.afterName="",Ur.params=""),Yr&&(Ur.nodes=[],this.current=Ur)}checkMissedSemicolon(_r){let Ur=this.colon(_r);if(Ur===!1)return;let jr=0,Gr;for(let Wr=Ur-1;Wr>=0&&(Gr=_r[Wr],!(Gr[0]!=="space"&&(jr+=1,jr===2)));Wr--);throw this.input.error("Missed semicolon",Gr[0]==="word"?Gr[3]+1:Gr[2])}colon(_r){let Ur=0,jr,Gr,Wr;for(let[Zr,Yr]of _r.entries()){if(jr=Yr,Gr=jr[0],Gr==="("&&(Ur+=1),Gr===")"&&(Ur-=1),Ur===0&&Gr===":")if(!Wr)this.doubleColon(jr);else{if(Wr[0]==="word"&&Wr[1]==="progid")continue;return Zr}Wr=jr}return!1}comment(_r){let Ur=new Comment$2;this.init(Ur,_r[2]),Ur.source.end=this.getPosition(_r[3]||_r[2]),Ur.source.end.offset++;let jr=_r[1].slice(2,-2);if(/^\s*$/.test(jr))Ur.text="",Ur.raws.left=jr,Ur.raws.right="";else{let Gr=jr.match(/^(\s*)([^]*\S)(\s*)$/);Ur.text=Gr[2],Ur.raws.left=Gr[1],Ur.raws.right=Gr[3]}}createTokenizer(){this.tokenizer=tokenizer(this.input)}decl(_r,Ur){let jr=new Declaration$2;this.init(jr,_r[0][2]);let Gr=_r[_r.length-1];for(Gr[0]===";"&&(this.semicolon=!0,_r.pop()),jr.source.end=this.getPosition(Gr[3]||Gr[2]||findLastWithPosition(_r)),jr.source.end.offset++;_r[0][0]!=="word";)_r.length===1&&this.unknownWord(_r),jr.raws.before+=_r.shift()[1];for(jr.source.start=this.getPosition(_r[0][2]),jr.prop="";_r.length;){let es=_r[0][0];if(es===":"||es==="space"||es==="comment")break;jr.prop+=_r.shift()[1]}jr.raws.between="";let Wr;for(;_r.length;)if(Wr=_r.shift(),Wr[0]===":"){jr.raws.between+=Wr[1];break}else Wr[0]==="word"&&/\w/.test(Wr[1])&&this.unknownWord([Wr]),jr.raws.between+=Wr[1];(jr.prop[0]==="_"||jr.prop[0]==="*")&&(jr.raws.before+=jr.prop[0],jr.prop=jr.prop.slice(1));let Zr=[],Yr;for(;_r.length&&(Yr=_r[0][0],!(Yr!=="space"&&Yr!=="comment"));)Zr.push(_r.shift());this.precheckMissedSemicolon(_r);for(let es=_r.length-1;es>=0;es--){if(Wr=_r[es],Wr[1].toLowerCase()==="!important"){jr.important=!0;let ns=this.stringFrom(_r,es);ns=this.spacesFromEnd(_r)+ns,ns!==" !important"&&(jr.raws.important=ns);break}else if(Wr[1].toLowerCase()==="important"){let ns=_r.slice(0),Xr="";for(let qr=es;qr>0;qr--){let _i=ns[qr][0];if(Xr.trim().indexOf("!")===0&&_i!=="space")break;Xr=ns.pop()[1]+Xr}Xr.trim().indexOf("!")===0&&(jr.important=!0,jr.raws.important=Xr,_r=ns)}if(Wr[0]!=="space"&&Wr[0]!=="comment")break}_r.some(es=>es[0]!=="space"&&es[0]!=="comment")&&(jr.raws.between+=Zr.map(es=>es[1]).join(""),Zr=[]),this.raw(jr,"value",Zr.concat(_r),Ur),jr.value.includes(":")&&!Ur&&this.checkMissedSemicolon(_r)}doubleColon(_r){throw this.input.error("Double colon",{offset:_r[2]},{offset:_r[2]+_r[1].length})}emptyRule(_r){let Ur=new Rule$2;this.init(Ur,_r[2]),Ur.selector="",Ur.raws.between="",this.current=Ur}end(_r){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(_r[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(_r)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(_r){if(this.spaces+=_r[1],this.current.nodes){let Ur=this.current.nodes[this.current.nodes.length-1];Ur&&Ur.type==="rule"&&!Ur.raws.ownSemicolon&&(Ur.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(_r){let Ur=this.input.fromOffset(_r);return{column:Ur.col,line:Ur.line,offset:_r}}init(_r,Ur){this.current.push(_r),_r.source={input:this.input,start:this.getPosition(Ur)},_r.raws.before=this.spaces,this.spaces="",_r.type!=="comment"&&(this.semicolon=!1)}other(_r){let Ur=!1,jr=null,Gr=!1,Wr=null,Zr=[],Yr=_r[1].startsWith("--"),ts=[],es=_r;for(;es;){if(jr=es[0],ts.push(es),jr==="("||jr==="[")Wr||(Wr=es),Zr.push(jr==="("?")":"]");else if(Yr&&Gr&&jr==="{")Wr||(Wr=es),Zr.push("}");else if(Zr.length===0)if(jr===";")if(Gr){this.decl(ts,Yr);return}else break;else if(jr==="{"){this.rule(ts);return}else if(jr==="}"){this.tokenizer.back(ts.pop()),Ur=!0;break}else jr===":"&&(Gr=!0);else jr===Zr[Zr.length-1]&&(Zr.pop(),Zr.length===0&&(Wr=null));es=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(Ur=!0),Zr.length>0&&this.unclosedBracket(Wr),Ur&&Gr){if(!Yr)for(;ts.length&&(es=ts[ts.length-1][0],!(es!=="space"&&es!=="comment"));)this.tokenizer.back(ts.pop());this.decl(ts,Yr)}else this.unknownWord(ts)}parse(){let _r;for(;!this.tokenizer.endOfFile();)switch(_r=this.tokenizer.nextToken(),_r[0]){case"space":this.spaces+=_r[1];break;case";":this.freeSemicolon(_r);break;case"}":this.end(_r);break;case"comment":this.comment(_r);break;case"at-word":this.atrule(_r);break;case"{":this.emptyRule(_r);break;default:this.other(_r);break}this.endFile()}precheckMissedSemicolon(){}raw(_r,Ur,jr,Gr){let Wr,Zr,Yr=jr.length,ts="",es=!0,ns,Xr;for(let qr=0;qr<Yr;qr+=1)Wr=jr[qr],Zr=Wr[0],Zr==="space"&&qr===Yr-1&&!Gr?es=!1:Zr==="comment"?(Xr=jr[qr-1]?jr[qr-1][0]:"empty",ns=jr[qr+1]?jr[qr+1][0]:"empty",!SAFE_COMMENT_NEIGHBOR[Xr]&&!SAFE_COMMENT_NEIGHBOR[ns]?ts.slice(-1)===","?es=!1:ts+=Wr[1]:es=!1):ts+=Wr[1];if(!es){let qr=jr.reduce((_i,rs)=>_i+rs[1],"");_r.raws[Ur]={raw:qr,value:ts}}_r[Ur]=ts}rule(_r){_r.pop();let Ur=new Rule$2;this.init(Ur,_r[0][2]),Ur.raws.between=this.spacesAndCommentsFromEnd(_r),this.raw(Ur,"selector",_r),this.current=Ur}spacesAndCommentsFromEnd(_r){let Ur,jr="";for(;_r.length&&(Ur=_r[_r.length-1][0],!(Ur!=="space"&&Ur!=="comment"));)jr=_r.pop()[1]+jr;return jr}spacesAndCommentsFromStart(_r){let Ur,jr="";for(;_r.length&&(Ur=_r[0][0],!(Ur!=="space"&&Ur!=="comment"));)jr+=_r.shift()[1];return jr}spacesFromEnd(_r){let Ur,jr="";for(;_r.length&&(Ur=_r[_r.length-1][0],Ur==="space");)jr=_r.pop()[1]+jr;return jr}stringFrom(_r,Ur){let jr="";for(let Gr=Ur;Gr<_r.length;Gr++)jr+=_r[Gr][1];return _r.splice(Ur,_r.length-Ur),jr}unclosedBlock(){let _r=this.current.source.start;throw this.input.error("Unclosed block",_r.line,_r.column)}unclosedBracket(_r){throw this.input.error("Unclosed bracket",{offset:_r[2]},{offset:_r[2]+1})}unexpectedClose(_r){throw this.input.error("Unexpected }",{offset:_r[2]},{offset:_r[2]+1})}unknownWord(_r){throw this.input.error("Unknown word",{offset:_r[0][2]},{offset:_r[0][2]+_r[0][1].length})}unnamedAtrule(_r,Ur){throw this.input.error("At-rule without name",{offset:Ur[2]},{offset:Ur[2]+Ur[1].length})}};var parser$1=Parser$1;let Container$2=container,Parser=parser$1,Input$2=input;function parse$8(Nr,_r){let Ur=new Input$2(Nr,_r),jr=new Parser(Ur);try{jr.parse()}catch(Gr){throw Gr}return jr.root}var parse_1=parse$8;parse$8.default=parse$8;Container$2.registerParse(parse$8);let{isClean,my}=symbols,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1,Result$2=result,parse$7=parse_1,Root$3=root;const TYPE_TO_CLASS_NAME={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0;function isPromise$1(Nr){return typeof Nr=="object"&&typeof Nr.then=="function"}function getEvents(Nr){let _r=!1,Ur=TYPE_TO_CLASS_NAME[Nr.type];return Nr.type==="decl"?_r=Nr.prop.toLowerCase():Nr.type==="atrule"&&(_r=Nr.name.toLowerCase()),_r&&Nr.append?[Ur,Ur+"-"+_r,CHILDREN,Ur+"Exit",Ur+"Exit-"+_r]:_r?[Ur,Ur+"-"+_r,Ur+"Exit",Ur+"Exit-"+_r]:Nr.append?[Ur,CHILDREN,Ur+"Exit"]:[Ur,Ur+"Exit"]}function toStack(Nr){let _r;return Nr.type==="document"?_r=["Document",CHILDREN,"DocumentExit"]:Nr.type==="root"?_r=["Root",CHILDREN,"RootExit"]:_r=getEvents(Nr),{eventIndex:0,events:_r,iterator:0,node:Nr,visitorIndex:0,visitors:[]}}function cleanMarks(Nr){return Nr[isClean]=!1,Nr.nodes&&Nr.nodes.forEach(_r=>cleanMarks(_r)),Nr}let postcss$1={},LazyResult$2=class F1{constructor(_r,Ur,jr){this.stringified=!1,this.processed=!1;let Gr;if(typeof Ur=="object"&&Ur!==null&&(Ur.type==="root"||Ur.type==="document"))Gr=cleanMarks(Ur);else if(Ur instanceof F1||Ur instanceof Result$2)Gr=cleanMarks(Ur.root),Ur.map&&(typeof jr.map>"u"&&(jr.map={}),jr.map.inline||(jr.map.inline=!1),jr.map.prev=Ur.map);else{let Wr=parse$7;jr.syntax&&(Wr=jr.syntax.parse),jr.parser&&(Wr=jr.parser),Wr.parse&&(Wr=Wr.parse);try{Gr=Wr(Ur,jr)}catch(Zr){this.processed=!0,this.error=Zr}Gr&&!Gr[my]&&Container$1.rebuild(Gr)}this.result=new Result$2(_r,Gr,jr),this.helpers={...postcss$1,postcss:postcss$1,result:this.result},this.plugins=this.processor.plugins.map(Wr=>typeof Wr=="object"&&Wr.prepare?{...Wr,...Wr.prepare(this.result)}:Wr)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(_r){return this.async().catch(_r)}finally(_r){return this.async().then(_r,_r)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(_r,Ur){let jr=this.result.lastPlugin;try{Ur&&Ur.addToError(_r),this.error=_r,_r.name==="CssSyntaxError"&&!_r.plugin?(_r.plugin=jr.postcssPlugin,_r.setMessage()):jr.postcssVersion}catch(Gr){console&&console.error&&console.error(Gr)}return _r}prepareVisitors(){this.listeners={};let _r=(Ur,jr,Gr)=>{this.listeners[jr]||(this.listeners[jr]=[]),this.listeners[jr].push([Ur,Gr])};for(let Ur of this.plugins)if(typeof Ur=="object")for(let jr in Ur){if(!PLUGIN_PROPS[jr]&&/^[A-Z]/.test(jr))throw new Error(`Unknown event ${jr} in ${Ur.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS[jr])if(typeof Ur[jr]=="object")for(let Gr in Ur[jr])Gr==="*"?_r(Ur,jr,Ur[jr][Gr]):_r(Ur,jr+"-"+Gr.toLowerCase(),Ur[jr][Gr]);else typeof Ur[jr]=="function"&&_r(Ur,jr,Ur[jr])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let _r=0;_r<this.plugins.length;_r++){let Ur=this.plugins[_r],jr=this.runOnRoot(Ur);if(isPromise$1(jr))try{await jr}catch(Gr){throw this.handleError(Gr)}}if(this.prepareVisitors(),this.hasListener){let _r=this.result.root;for(;!_r[isClean];){_r[isClean]=!0;let Ur=[toStack(_r)];for(;Ur.length>0;){let jr=this.visitTick(Ur);if(isPromise$1(jr))try{await jr}catch(Gr){let Wr=Ur[Ur.length-1].node;throw this.handleError(Gr,Wr)}}}if(this.listeners.OnceExit)for(let[Ur,jr]of this.listeners.OnceExit){this.result.lastPlugin=Ur;try{if(_r.type==="document"){let Gr=_r.nodes.map(Wr=>jr(Wr,this.helpers));await Promise.all(Gr)}else await jr(_r,this.helpers)}catch(Gr){throw this.handleError(Gr)}}}return this.processed=!0,this.stringify()}runOnRoot(_r){this.result.lastPlugin=_r;try{if(typeof _r=="object"&&_r.Once){if(this.result.root.type==="document"){let Ur=this.result.root.nodes.map(jr=>_r.Once(jr,this.helpers));return isPromise$1(Ur[0])?Promise.all(Ur):Ur}return _r.Once(this.result.root,this.helpers)}else if(typeof _r=="function")return _r(this.result.root,this.result)}catch(Ur){throw this.handleError(Ur)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let _r=this.result.opts,Ur=stringify$2;_r.syntax&&(Ur=_r.syntax.stringify),_r.stringifier&&(Ur=_r.stringifier),Ur.stringify&&(Ur=Ur.stringify);let Gr=new MapGenerator$1(Ur,this.result.root,this.result.opts).generate();return this.result.css=Gr[0],this.result.map=Gr[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let _r of this.plugins){let Ur=this.runOnRoot(_r);if(isPromise$1(Ur))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let _r=this.result.root;for(;!_r[isClean];)_r[isClean]=!0,this.walkSync(_r);if(this.listeners.OnceExit)if(_r.type==="document")for(let Ur of _r.nodes)this.visitSync(this.listeners.OnceExit,Ur);else this.visitSync(this.listeners.OnceExit,_r)}return this.result}then(_r,Ur){return this.async().then(_r,Ur)}toString(){return this.css}visitSync(_r,Ur){for(let[jr,Gr]of _r){this.result.lastPlugin=jr;let Wr;try{Wr=Gr(Ur,this.helpers)}catch(Zr){throw this.handleError(Zr,Ur.proxyOf)}if(Ur.type!=="root"&&Ur.type!=="document"&&!Ur.parent)return!0;if(isPromise$1(Wr))throw this.getAsyncError()}}visitTick(_r){let Ur=_r[_r.length-1],{node:jr,visitors:Gr}=Ur;if(jr.type!=="root"&&jr.type!=="document"&&!jr.parent){_r.pop();return}if(Gr.length>0&&Ur.visitorIndex<Gr.length){let[Zr,Yr]=Gr[Ur.visitorIndex];Ur.visitorIndex+=1,Ur.visitorIndex===Gr.length&&(Ur.visitors=[],Ur.visitorIndex=0),this.result.lastPlugin=Zr;try{return Yr(jr.toProxy(),this.helpers)}catch(ts){throw this.handleError(ts,jr)}}if(Ur.iterator!==0){let Zr=Ur.iterator,Yr;for(;Yr=jr.nodes[jr.indexes[Zr]];)if(jr.indexes[Zr]+=1,!Yr[isClean]){Yr[isClean]=!0,_r.push(toStack(Yr));return}Ur.iterator=0,delete jr.indexes[Zr]}let Wr=Ur.events;for(;Ur.eventIndex<Wr.length;){let Zr=Wr[Ur.eventIndex];if(Ur.eventIndex+=1,Zr===CHILDREN){jr.nodes&&jr.nodes.length&&(jr[isClean]=!0,Ur.iterator=jr.getIterator());return}else if(this.listeners[Zr]){Ur.visitors=this.listeners[Zr];return}}_r.pop()}walkSync(_r){_r[isClean]=!0;let Ur=getEvents(_r);for(let jr of Ur)if(jr===CHILDREN)_r.nodes&&_r.each(Gr=>{Gr[isClean]||this.walkSync(Gr)});else{let Gr=this.listeners[jr];if(Gr&&this.visitSync(Gr,_r.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};LazyResult$2.registerPostcss=Nr=>{postcss$1=Nr};var lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2;Root$3.registerLazyResult(LazyResult$2);Document$2.registerLazyResult(LazyResult$2);let MapGenerator=mapGenerator,stringify$1=stringify_1,parse$6=parse_1;const Result$1=result;let NoWorkResult$1=class{constructor(_r,Ur,jr){Ur=Ur.toString(),this.stringified=!1,this._processor=_r,this._css=Ur,this._opts=jr,this._map=void 0;let Gr,Wr=stringify$1;this.result=new Result$1(this._processor,Gr,this._opts),this.result.css=Ur;let Zr=this;Object.defineProperty(this.result,"root",{get(){return Zr.root}});let Yr=new MapGenerator(Wr,Gr,this._opts,Ur);if(Yr.isMap()){let[ts,es]=Yr.generate();ts&&(this.result.css=ts),es&&(this.result.map=es)}}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(_r){return this.async().catch(_r)}finally(_r){return this.async().then(_r,_r)}sync(){if(this.error)throw this.error;return this.result}then(_r,Ur){return this.async().then(_r,Ur)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let _r,Ur=parse$6;try{_r=Ur(this._css,this._opts)}catch(jr){this.error=jr}if(this.error)throw this.error;return this._root=_r,_r}get[Symbol.toStringTag](){return"NoWorkResult"}};var noWorkResult=NoWorkResult$1;NoWorkResult$1.default=NoWorkResult$1;let NoWorkResult=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1,Root$2=root,Processor$1=class{constructor(_r=[]){this.version="8.4.31",this.plugins=this.normalize(_r)}normalize(_r){let Ur=[];for(let jr of _r)if(jr.postcss===!0?jr=jr():jr.postcss&&(jr=jr.postcss),typeof jr=="object"&&Array.isArray(jr.plugins))Ur=Ur.concat(jr.plugins);else if(typeof jr=="object"&&jr.postcssPlugin)Ur.push(jr);else if(typeof jr=="function")Ur.push(jr);else if(!(typeof jr=="object"&&(jr.parse||jr.stringify)))throw new Error(jr+" is not a PostCSS plugin");return Ur}process(_r,Ur={}){return this.plugins.length===0&&typeof Ur.parser>"u"&&typeof Ur.stringifier>"u"&&typeof Ur.syntax>"u"?new NoWorkResult(this,_r,Ur):new LazyResult$1(this,_r,Ur)}use(_r){return this.plugins=this.plugins.concat(this.normalize([_r])),this}};var processor=Processor$1;Processor$1.default=Processor$1;Root$2.registerProcessor(Processor$1);Document$1.registerProcessor(Processor$1);let Declaration$1=declaration,PreviousMap=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule;function fromJSON$1(Nr,_r){if(Array.isArray(Nr))return Nr.map(Gr=>fromJSON$1(Gr));let{inputs:Ur,...jr}=Nr;if(Ur){_r=[];for(let Gr of Ur){let Wr={...Gr,__proto__:Input$1.prototype};Wr.map&&(Wr.map={...Wr.map,__proto__:PreviousMap.prototype}),_r.push(Wr)}}if(jr.nodes&&(jr.nodes=Nr.nodes.map(Gr=>fromJSON$1(Gr,_r))),jr.source){let{inputId:Gr,...Wr}=jr.source;jr.source=Wr,Gr!=null&&(jr.source.input=_r[Gr])}if(jr.type==="root")return new Root$1(jr);if(jr.type==="decl")return new Declaration$1(jr);if(jr.type==="rule")return new Rule$1(jr);if(jr.type==="comment")return new Comment$1(jr);if(jr.type==="atrule")return new AtRule$1(jr);throw new Error("Unknown node type: "+Nr.type)}var fromJSON_1=fromJSON$1;fromJSON$1.default=fromJSON$1;let CssSyntaxError=cssSyntaxError,Declaration=declaration,LazyResult=lazyResult,Container=container,Processor=processor,stringify=stringify_1,fromJSON=fromJSON_1,Document=document$1,Warning=warning,Comment=comment,AtRule=atRule,Result=result,Input=input,parse$5=parse_1,list=list_1,Rule=rule,Root=root,Node$1=node;function postcss(...Nr){return Nr.length===1&&Array.isArray(Nr[0])&&(Nr=Nr[0]),new Processor(Nr)}postcss.plugin=function(_r,Ur){let jr=!1;function Gr(...Zr){console&&console.warn&&!jr&&(jr=!0,console.warn(_r+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),{}.LANG&&{}.LANG.startsWith("cn")&&console.warn(_r+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let Yr=Ur(...Zr);return Yr.postcssPlugin=_r,Yr.postcssVersion=new Processor().version,Yr}let Wr;return Object.defineProperty(Gr,"postcss",{get(){return Wr||(Wr=Gr()),Wr}}),Gr.process=function(Zr,Yr,ts){return postcss([Gr(ts)]).process(Zr,Yr)},Gr};postcss.stringify=stringify;postcss.parse=parse$5;postcss.fromJSON=fromJSON;postcss.list=list;postcss.comment=Nr=>new Comment(Nr);postcss.atRule=Nr=>new AtRule(Nr);postcss.decl=Nr=>new Declaration(Nr);postcss.rule=Nr=>new Rule(Nr);postcss.root=Nr=>new Root(Nr);postcss.document=Nr=>new Document(Nr);postcss.CssSyntaxError=CssSyntaxError;postcss.Declaration=Declaration;postcss.Container=Container;postcss.Processor=Processor;postcss.Document=Document;postcss.Comment=Comment;postcss.Warning=Warning;postcss.AtRule=AtRule;postcss.Result=Result;postcss.Input=Input;postcss.Rule=Rule;postcss.Root=Root;postcss.Node=Node$1;LazyResult.registerPostcss(postcss);var postcss_1=postcss;postcss.default=postcss;const htmlparser=lib$5,escapeStringRegexp=escapeStringRegexp$1,{isPlainObject:isPlainObject$1}=isPlainObject$3,deepmerge=cjs,parseSrcset=parseSrcsetExports,{parse:postcssParse}=postcss_1,mediaTags=["img","audio","video","picture","svg","object","map","iframe","embed"],vulnerableTags=["script","style"];function each(Nr,_r){Nr&&Object.keys(Nr).forEach(function(Ur){_r(Nr[Ur],Ur)})}function has(Nr,_r){return{}.hasOwnProperty.call(Nr,_r)}function filter(Nr,_r){const Ur=[];return each(Nr,function(jr){_r(jr)&&Ur.push(jr)}),Ur}function isEmptyObject(Nr){for(const _r in Nr)if(has(Nr,_r))return!1;return!0}function stringifySrcset(Nr){return Nr.map(function(_r){if(!_r.url)throw new Error("URL missing");return _r.url+(_r.w?` ${_r.w}w`:"")+(_r.h?` ${_r.h}h`:"")+(_r.d?` ${_r.d}x`:"")}).join(", ")}var sanitizeHtml_1=sanitizeHtml;const VALID_HTML_ATTRIBUTE_NAME=/^[^\0\t\n\f\r /<=>]+$/;function sanitizeHtml(Nr,_r,Ur){if(Nr==null)return"";typeof Nr=="number"&&(Nr=Nr.toString());let jr="",Gr="";function Wr(vs,Cs){const Ss=this;this.tag=vs,this.attribs=Cs||{},this.tagPosition=jr.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(ss.length){const As=ss[ss.length-1];As.text+=Ss.text}},this.updateParentNodeMediaChildren=function(){ss.length&&mediaTags.includes(this.tag)&&ss[ss.length-1].mediaChildren.push(this.tag)}}_r=Object.assign({},sanitizeHtml.defaults,_r),_r.parser=Object.assign({},htmlParserDefaults,_r.parser);const Zr=function(vs){return _r.allowedTags===!1||(_r.allowedTags||[]).indexOf(vs)>-1};vulnerableTags.forEach(function(vs){Zr(vs)&&!_r.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${vs}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const Yr=_r.nonTextTags||["script","style","textarea","option"];let ts,es;_r.allowedAttributes&&(ts={},es={},each(_r.allowedAttributes,function(vs,Cs){ts[Cs]=[];const Ss=[];vs.forEach(function(As){typeof As=="string"&&As.indexOf("*")>=0?Ss.push(escapeStringRegexp(As).replace(/\\\*/g,".*")):ts[Cs].push(As)}),Ss.length&&(es[Cs]=new RegExp("^("+Ss.join("|")+")$"))}));const ns={},Xr={},qr={};each(_r.allowedClasses,function(vs,Cs){if(ts&&(has(ts,Cs)||(ts[Cs]=[]),ts[Cs].push("class")),ns[Cs]=vs,Array.isArray(vs)){const Ss=[];ns[Cs]=[],qr[Cs]=[],vs.forEach(function(As){typeof As=="string"&&As.indexOf("*")>=0?Ss.push(escapeStringRegexp(As).replace(/\\\*/g,".*")):As instanceof RegExp?qr[Cs].push(As):ns[Cs].push(As)}),Ss.length&&(Xr[Cs]=new RegExp("^("+Ss.join("|")+")$"))}});const _i={};let rs;each(_r.transformTags,function(vs,Cs){let Ss;typeof vs=="function"?Ss=vs:typeof vs=="string"&&(Ss=sanitizeHtml.simpleTransform(vs)),Cs==="*"?rs=Ss:_i[Cs]=Ss});let is,ss,os,ls,cs,ds,fs=!1;ps();const ms=new htmlparser.Parser({onopentag:function(vs,Cs){if(_r.enforceHtmlBoundary&&vs==="html"&&ps(),cs){ds++;return}const Ss=new Wr(vs,Cs);ss.push(Ss);let As=!1;const Us=!!Ss.text;let Ks;if(has(_i,vs)&&(Ks=_i[vs](vs,Cs),Ss.attribs=Cs=Ks.attribs,Ks.text!==void 0&&(Ss.innerText=Ks.text),vs!==Ks.tagName&&(Ss.name=vs=Ks.tagName,ls[is]=Ks.tagName)),rs&&(Ks=rs(vs,Cs),Ss.attribs=Cs=Ks.attribs,vs!==Ks.tagName&&(Ss.name=vs=Ks.tagName,ls[is]=Ks.tagName)),(!Zr(vs)||_r.disallowedTagsMode==="recursiveEscape"&&!isEmptyObject(os)||_r.nestingLimit!=null&&is>=_r.nestingLimit)&&(As=!0,os[is]=!0,_r.disallowedTagsMode==="discard"&&Yr.indexOf(vs)!==-1&&(cs=!0,ds=1),os[is]=!0),is++,As){if(_r.disallowedTagsMode==="discard")return;Gr=jr,jr=""}jr+="<"+vs,vs==="script"&&(_r.allowedScriptHostnames||_r.allowedScriptDomains)&&(Ss.innerText=""),(!ts||has(ts,vs)||ts["*"])&&each(Cs,function(Ws,Js){if(!VALID_HTML_ATTRIBUTE_NAME.test(Js)){delete Ss.attribs[Js];return}if(Ws===""&&(_r.nonBooleanAttributes.includes(Js)||_r.nonBooleanAttributes.includes("*"))){delete Ss.attribs[Js];return}let ho=!1;if(!ts||has(ts,vs)&&ts[vs].indexOf(Js)!==-1||ts["*"]&&ts["*"].indexOf(Js)!==-1||has(es,vs)&&es[vs].test(Js)||es["*"]&&es["*"].test(Js))ho=!0;else if(ts&&ts[vs]){for(const so of ts[vs])if(isPlainObject$1(so)&&so.name&&so.name===Js){ho=!0;let io="";if(so.multiple===!0){const vo=Ws.split(" ");for(const co of vo)so.values.indexOf(co)!==-1&&(io===""?io=co:io+=" "+co)}else so.values.indexOf(Ws)>=0&&(io=Ws);Ws=io}}if(ho){if(_r.allowedSchemesAppliedToAttributes.indexOf(Js)!==-1&&ws(vs,Ws)){delete Ss.attribs[Js];return}if(vs==="script"&&Js==="src"){let so=!0;try{const io=xs(Ws);if(_r.allowedScriptHostnames||_r.allowedScriptDomains){const vo=(_r.allowedScriptHostnames||[]).find(function(go){return go===io.url.hostname}),co=(_r.allowedScriptDomains||[]).find(function(go){return io.url.hostname===go||io.url.hostname.endsWith(`.${go}`)});so=vo||co}}catch{so=!1}if(!so){delete Ss.attribs[Js];return}}if(vs==="iframe"&&Js==="src"){let so=!0;try{const io=xs(Ws);if(io.isRelativeUrl)so=has(_r,"allowIframeRelativeUrls")?_r.allowIframeRelativeUrls:!_r.allowedIframeHostnames&&!_r.allowedIframeDomains;else if(_r.allowedIframeHostnames||_r.allowedIframeDomains){const vo=(_r.allowedIframeHostnames||[]).find(function(go){return go===io.url.hostname}),co=(_r.allowedIframeDomains||[]).find(function(go){return io.url.hostname===go||io.url.hostname.endsWith(`.${go}`)});so=vo||co}}catch{so=!1}if(!so){delete Ss.attribs[Js];return}}if(Js==="srcset")try{let so=parseSrcset(Ws);if(so.forEach(function(io){ws("srcset",io.url)&&(io.evil=!0)}),so=filter(so,function(io){return!io.evil}),so.length)Ws=stringifySrcset(filter(so,function(io){return!io.evil})),Ss.attribs[Js]=Ws;else{delete Ss.attribs[Js];return}}catch{delete Ss.attribs[Js];return}if(Js==="class"){const so=ns[vs],io=ns["*"],vo=Xr[vs],co=qr[vs],go=Xr["*"],Eo=[vo,go].concat(co).filter(function(Ro){return Ro});if(so&&io?Ws=Bs(Ws,deepmerge(so,io),Eo):Ws=Bs(Ws,so||io,Eo),!Ws.length){delete Ss.attribs[Js];return}}if(Js==="style"){if(_r.parseStyleAttributes)try{const so=postcssParse(vs+" {"+Ws+"}"),io=Es(so,_r.allowedStyles);if(Ws=Rs(io),Ws.length===0){delete Ss.attribs[Js];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+vs+" {"+Ws+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete Ss.attribs[Js];return}else if(_r.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}jr+=" "+Js,Ws&&Ws.length&&(jr+='="'+ys(Ws,!0)+'"')}else delete Ss.attribs[Js]}),_r.selfClosing.indexOf(vs)!==-1?jr+=" />":(jr+=">",Ss.innerText&&!Us&&!_r.textFilter&&(jr+=ys(Ss.innerText),fs=!0)),As&&(jr=Gr+ys(jr),Gr="")},ontext:function(vs){if(cs)return;const Cs=ss[ss.length-1];let Ss;if(Cs&&(Ss=Cs.tag,vs=Cs.innerText!==void 0?Cs.innerText:vs),_r.disallowedTagsMode==="discard"&&(Ss==="script"||Ss==="style"))jr+=vs;else{const As=ys(vs,!1);_r.textFilter&&!fs?jr+=_r.textFilter(As,Ss):fs||(jr+=As)}if(ss.length){const As=ss[ss.length-1];As.text+=vs}},onclosetag:function(vs,Cs){if(cs)if(ds--,!ds)cs=!1;else return;const Ss=ss.pop();if(!Ss)return;if(Ss.tag!==vs){ss.push(Ss);return}cs=_r.enforceHtmlBoundary?vs==="html":!1,is--;const As=os[is];if(As){if(delete os[is],_r.disallowedTagsMode==="discard"){Ss.updateParentNodeText();return}Gr=jr,jr=""}if(ls[is]&&(vs=ls[is],delete ls[is]),_r.exclusiveFilter&&_r.exclusiveFilter(Ss)){jr=jr.substr(0,Ss.tagPosition);return}if(Ss.updateParentNodeMediaChildren(),Ss.updateParentNodeText(),_r.selfClosing.indexOf(vs)!==-1||Cs&&!Zr(vs)&&["escape","recursiveEscape"].indexOf(_r.disallowedTagsMode)>=0){As&&(jr=Gr,Gr="");return}jr+="</"+vs+">",As&&(jr=Gr+ys(jr),Gr=""),fs=!1}},_r.parser);return ms.write(Nr),ms.end(),jr;function ps(){jr="",is=0,ss=[],os={},ls={},cs=!1,ds=0}function ys(vs,Cs){return typeof vs!="string"&&(vs=vs+""),_r.parser.decodeEntities&&(vs=vs.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Cs&&(vs=vs.replace(/"/g,"&quot;"))),vs=vs.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Cs&&(vs=vs.replace(/"/g,"&quot;")),vs}function ws(vs,Cs){for(Cs=Cs.replace(/[\x00-\x20]+/g,"");;){const Us=Cs.indexOf("<!--");if(Us===-1)break;const Ks=Cs.indexOf("-->",Us+4);if(Ks===-1)break;Cs=Cs.substring(0,Us)+Cs.substring(Ks+3)}const Ss=Cs.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!Ss)return Cs.match(/^[/\\]{2}/)?!_r.allowProtocolRelative:!1;const As=Ss[1].toLowerCase();return has(_r.allowedSchemesByTag,vs)?_r.allowedSchemesByTag[vs].indexOf(As)===-1:!_r.allowedSchemes||_r.allowedSchemes.indexOf(As)===-1}function xs(vs){if(vs=vs.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),vs.startsWith("relative:"))throw new Error("relative: exploit attempt");let Cs="relative://relative-site";for(let Us=0;Us<100;Us++)Cs+=`/${Us}`;const Ss=new URL(vs,Cs);return{isRelativeUrl:Ss&&Ss.hostname==="relative-site"&&Ss.protocol==="relative:",url:Ss}}function Es(vs,Cs){if(!Cs)return vs;const Ss=vs.nodes[0];let As;return Cs[Ss.selector]&&Cs["*"]?As=deepmerge(Cs[Ss.selector],Cs["*"]):As=Cs[Ss.selector]||Cs["*"],As&&(vs.nodes[0].nodes=Ss.nodes.reduce(_s(As),[])),vs}function Rs(vs){return vs.nodes[0].nodes.reduce(function(Cs,Ss){return Cs.push(`${Ss.prop}:${Ss.value}${Ss.important?" !important":""}`),Cs},[]).join(";")}function _s(vs){return function(Cs,Ss){return has(vs,Ss.prop)&&vs[Ss.prop].some(function(Us){return Us.test(Ss.value)})&&Cs.push(Ss),Cs}}function Bs(vs,Cs,Ss){return Cs?(vs=vs.split(/\s+/),vs.filter(function(As){return Cs.indexOf(As)!==-1||Ss.some(function(Us){return Us.test(As)})}).join(" ")):vs}}const htmlParserDefaults={decodeEntities:!0};sanitizeHtml.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0};sanitizeHtml.simpleTransform=function(Nr,_r,Ur){return Ur=Ur===void 0?!0:Ur,_r=_r||{},function(jr,Gr){let Wr;if(Ur)for(Wr in _r)Gr[Wr]=_r[Wr];else Gr=_r;return{tagName:Nr,attribs:Gr}}};const Qe=getDefaultExportFromCjs$1(sanitizeHtml_1);function getDefaultExportFromCjs(Nr){return Nr&&Nr.__esModule&&Object.prototype.hasOwnProperty.call(Nr,"default")?Nr.default:Nr}var urlToolkit={exports:{}};(function(Nr,_r){(function(Ur){var jr=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,Gr=/^(?=([^\/?#]*))\1([^]*)$/,Wr=/(?:\/|^)\.(?=\/)/g,Zr=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Yr={buildAbsoluteURL:function(ts,es,ns){if(ns=ns||{},ts=ts.trim(),es=es.trim(),!es){if(!ns.alwaysNormalize)return ts;var Xr=Yr.parseURL(ts);if(!Xr)throw new Error("Error trying to parse base URL.");return Xr.path=Yr.normalizePath(Xr.path),Yr.buildURLFromParts(Xr)}var qr=Yr.parseURL(es);if(!qr)throw new Error("Error trying to parse relative URL.");if(qr.scheme)return ns.alwaysNormalize?(qr.path=Yr.normalizePath(qr.path),Yr.buildURLFromParts(qr)):es;var _i=Yr.parseURL(ts);if(!_i)throw new Error("Error trying to parse base URL.");if(!_i.netLoc&&_i.path&&_i.path[0]!=="/"){var rs=Gr.exec(_i.path);_i.netLoc=rs[1],_i.path=rs[2]}_i.netLoc&&!_i.path&&(_i.path="/");var is={scheme:_i.scheme,netLoc:qr.netLoc,path:null,params:qr.params,query:qr.query,fragment:qr.fragment};if(!qr.netLoc&&(is.netLoc=_i.netLoc,qr.path[0]!=="/"))if(!qr.path)is.path=_i.path,qr.params||(is.params=_i.params,qr.query||(is.query=_i.query));else{var ss=_i.path,os=ss.substring(0,ss.lastIndexOf("/")+1)+qr.path;is.path=Yr.normalizePath(os)}return is.path===null&&(is.path=ns.alwaysNormalize?Yr.normalizePath(qr.path):qr.path),Yr.buildURLFromParts(is)},parseURL:function(ts){var es=jr.exec(ts);return es?{scheme:es[1]||"",netLoc:es[2]||"",path:es[3]||"",params:es[4]||"",query:es[5]||"",fragment:es[6]||""}:null},normalizePath:function(ts){for(ts=ts.split("").reverse().join("").replace(Wr,"");ts.length!==(ts=ts.replace(Zr,"")).length;);return ts.split("").reverse().join("")},buildURLFromParts:function(ts){return ts.scheme+ts.netLoc+ts.path+ts.params+ts.query+ts.fragment}};Nr.exports=Yr})()})(urlToolkit);var urlToolkitExports=urlToolkit.exports;function ownKeys(Nr,_r){var Ur=Object.keys(Nr);if(Object.getOwnPropertySymbols){var jr=Object.getOwnPropertySymbols(Nr);_r&&(jr=jr.filter(function(Gr){return Object.getOwnPropertyDescriptor(Nr,Gr).enumerable})),Ur.push.apply(Ur,jr)}return Ur}function _objectSpread2(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r]!=null?arguments[_r]:{};_r%2?ownKeys(Object(Ur),!0).forEach(function(jr){_defineProperty(Nr,jr,Ur[jr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Nr,Object.getOwnPropertyDescriptors(Ur)):ownKeys(Object(Ur)).forEach(function(jr){Object.defineProperty(Nr,jr,Object.getOwnPropertyDescriptor(Ur,jr))})}return Nr}function _defineProperty(Nr,_r,Ur){return _r=_toPropertyKey(_r),_r in Nr?Object.defineProperty(Nr,_r,{value:Ur,enumerable:!0,configurable:!0,writable:!0}):Nr[_r]=Ur,Nr}function _extends(){return _extends=Object.assign?Object.assign.bind():function(Nr){for(var _r=1;_r<arguments.length;_r++){var Ur=arguments[_r];for(var jr in Ur)Object.prototype.hasOwnProperty.call(Ur,jr)&&(Nr[jr]=Ur[jr])}return Nr},_extends.apply(this,arguments)}function _toPrimitive(Nr,_r){if(typeof Nr!="object"||Nr===null)return Nr;var Ur=Nr[Symbol.toPrimitive];if(Ur!==void 0){var jr=Ur.call(Nr,_r||"default");if(typeof jr!="object")return jr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_r==="string"?String:Number)(Nr)}function _toPropertyKey(Nr){var _r=_toPrimitive(Nr,"string");return typeof _r=="symbol"?_r:String(_r)}const isFiniteNumber=Number.isFinite||function(Nr){return typeof Nr=="number"&&isFinite(Nr)};let Events=function(Nr){return Nr.MEDIA_ATTACHING="hlsMediaAttaching",Nr.MEDIA_ATTACHED="hlsMediaAttached",Nr.MEDIA_DETACHING="hlsMediaDetaching",Nr.MEDIA_DETACHED="hlsMediaDetached",Nr.BUFFER_RESET="hlsBufferReset",Nr.BUFFER_CODECS="hlsBufferCodecs",Nr.BUFFER_CREATED="hlsBufferCreated",Nr.BUFFER_APPENDING="hlsBufferAppending",Nr.BUFFER_APPENDED="hlsBufferAppended",Nr.BUFFER_EOS="hlsBufferEos",Nr.BUFFER_FLUSHING="hlsBufferFlushing",Nr.BUFFER_FLUSHED="hlsBufferFlushed",Nr.MANIFEST_LOADING="hlsManifestLoading",Nr.MANIFEST_LOADED="hlsManifestLoaded",Nr.MANIFEST_PARSED="hlsManifestParsed",Nr.LEVEL_SWITCHING="hlsLevelSwitching",Nr.LEVEL_SWITCHED="hlsLevelSwitched",Nr.LEVEL_LOADING="hlsLevelLoading",Nr.LEVEL_LOADED="hlsLevelLoaded",Nr.LEVEL_UPDATED="hlsLevelUpdated",Nr.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",Nr.LEVELS_UPDATED="hlsLevelsUpdated",Nr.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",Nr.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",Nr.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",Nr.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",Nr.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",Nr.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",Nr.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",Nr.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",Nr.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",Nr.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",Nr.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",Nr.CUES_PARSED="hlsCuesParsed",Nr.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",Nr.INIT_PTS_FOUND="hlsInitPtsFound",Nr.FRAG_LOADING="hlsFragLoading",Nr.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",Nr.FRAG_LOADED="hlsFragLoaded",Nr.FRAG_DECRYPTED="hlsFragDecrypted",Nr.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",Nr.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",Nr.FRAG_PARSING_METADATA="hlsFragParsingMetadata",Nr.FRAG_PARSED="hlsFragParsed",Nr.FRAG_BUFFERED="hlsFragBuffered",Nr.FRAG_CHANGED="hlsFragChanged",Nr.FPS_DROP="hlsFpsDrop",Nr.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",Nr.ERROR="hlsError",Nr.DESTROYING="hlsDestroying",Nr.KEY_LOADING="hlsKeyLoading",Nr.KEY_LOADED="hlsKeyLoaded",Nr.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",Nr.BACK_BUFFER_REACHED="hlsBackBufferReached",Nr}({}),ErrorTypes=function(Nr){return Nr.NETWORK_ERROR="networkError",Nr.MEDIA_ERROR="mediaError",Nr.KEY_SYSTEM_ERROR="keySystemError",Nr.MUX_ERROR="muxError",Nr.OTHER_ERROR="otherError",Nr}({}),ErrorDetails=function(Nr){return Nr.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",Nr.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",Nr.KEY_SYSTEM_NO_SESSION="keySystemNoSession",Nr.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",Nr.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",Nr.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",Nr.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",Nr.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",Nr.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",Nr.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",Nr.MANIFEST_LOAD_ERROR="manifestLoadError",Nr.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",Nr.MANIFEST_PARSING_ERROR="manifestParsingError",Nr.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",Nr.LEVEL_EMPTY_ERROR="levelEmptyError",Nr.LEVEL_LOAD_ERROR="levelLoadError",Nr.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",Nr.LEVEL_PARSING_ERROR="levelParsingError",Nr.LEVEL_SWITCH_ERROR="levelSwitchError",Nr.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",Nr.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",Nr.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",Nr.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",Nr.FRAG_LOAD_ERROR="fragLoadError",Nr.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",Nr.FRAG_DECRYPT_ERROR="fragDecryptError",Nr.FRAG_PARSING_ERROR="fragParsingError",Nr.FRAG_GAP="fragGap",Nr.REMUX_ALLOC_ERROR="remuxAllocError",Nr.KEY_LOAD_ERROR="keyLoadError",Nr.KEY_LOAD_TIMEOUT="keyLoadTimeOut",Nr.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",Nr.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",Nr.BUFFER_APPEND_ERROR="bufferAppendError",Nr.BUFFER_APPENDING_ERROR="bufferAppendingError",Nr.BUFFER_STALLED_ERROR="bufferStalledError",Nr.BUFFER_FULL_ERROR="bufferFullError",Nr.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",Nr.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",Nr.INTERNAL_EXCEPTION="internalException",Nr.INTERNAL_ABORTED="aborted",Nr.UNKNOWN="unknown",Nr}({});const noop=function(){},fakeLogger={trace:noop,debug:noop,log:noop,warn:noop,info:noop,error:noop};let exportedLogger=fakeLogger;function consolePrintFn(Nr){const _r=self.console[Nr];return _r?_r.bind(self.console,`[${Nr}] >`):noop}function exportLoggerFunctions(Nr,..._r){_r.forEach(function(Ur){exportedLogger[Ur]=Nr[Ur]?Nr[Ur].bind(Nr):consolePrintFn(Ur)})}function enableLogs(Nr,_r){if(self.console&&Nr===!0||typeof Nr=="object"){exportLoggerFunctions(Nr,"debug","log","info","warn","error");try{exportedLogger.log(`Debug logs enabled for "${_r}" in hls.js version 1.4.12`)}catch{exportedLogger=fakeLogger}}else exportedLogger=fakeLogger}const logger=exportedLogger,DECIMAL_RESOLUTION_REGEX=/^(\d+)x(\d+)$/,ATTR_LIST_REGEX=/(.+?)=(".*?"|.*?)(?:,|$)/g;class AttrList{constructor(_r){typeof _r=="string"&&(_r=AttrList.parseAttrList(_r));for(const Ur in _r)_r.hasOwnProperty(Ur)&&(Ur.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(Ur)),this[Ur]=_r[Ur])}decimalInteger(_r){const Ur=parseInt(this[_r],10);return Ur>Number.MAX_SAFE_INTEGER?1/0:Ur}hexadecimalInteger(_r){if(this[_r]){let Ur=(this[_r]||"0x").slice(2);Ur=(Ur.length&1?"0":"")+Ur;const jr=new Uint8Array(Ur.length/2);for(let Gr=0;Gr<Ur.length/2;Gr++)jr[Gr]=parseInt(Ur.slice(Gr*2,Gr*2+2),16);return jr}else return null}hexadecimalIntegerAsNumber(_r){const Ur=parseInt(this[_r],16);return Ur>Number.MAX_SAFE_INTEGER?1/0:Ur}decimalFloatingPoint(_r){return parseFloat(this[_r])}optionalFloat(_r,Ur){const jr=this[_r];return jr?parseFloat(jr):Ur}enumeratedString(_r){return this[_r]}bool(_r){return this[_r]==="YES"}decimalResolution(_r){const Ur=DECIMAL_RESOLUTION_REGEX.exec(this[_r]);if(Ur!==null)return{width:parseInt(Ur[1],10),height:parseInt(Ur[2],10)}}static parseAttrList(_r){let Ur;const jr={},Gr='"';for(ATTR_LIST_REGEX.lastIndex=0;(Ur=ATTR_LIST_REGEX.exec(_r))!==null;){let Wr=Ur[2];Wr.indexOf(Gr)===0&&Wr.lastIndexOf(Gr)===Wr.length-1&&(Wr=Wr.slice(1,-1));const Zr=Ur[1].trim();jr[Zr]=Wr}return jr}}function isDateRangeCueAttribute(Nr){return Nr!=="ID"&&Nr!=="CLASS"&&Nr!=="START-DATE"&&Nr!=="DURATION"&&Nr!=="END-DATE"&&Nr!=="END-ON-NEXT"}function isSCTE35Attribute(Nr){return Nr==="SCTE35-OUT"||Nr==="SCTE35-IN"}class DateRange{constructor(_r,Ur){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,Ur){const jr=Ur.attr;for(const Gr in jr)if(Object.prototype.hasOwnProperty.call(_r,Gr)&&_r[Gr]!==jr[Gr]){logger.warn(`DATERANGE tag attribute: "${Gr}" does not match for tags with ID: "${_r.ID}"`),this._badValueForSameId=Gr;break}_r=_extends(new AttrList({}),jr,_r)}if(this.attr=_r,this._startDate=new Date(_r["START-DATE"]),"END-DATE"in this.attr){const jr=new Date(this.attr["END-DATE"]);isFiniteNumber(jr.getTime())&&(this._endDate=jr)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const _r=this.duration;return _r!==null?new Date(this._startDate.getTime()+_r*1e3):null}get duration(){if("DURATION"in this.attr){const _r=this.attr.decimalFloatingPoint("DURATION");if(isFiniteNumber(_r))return _r}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&isFiniteNumber(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class LoadStats{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ElementaryStreamTypes={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class BaseSegment{constructor(_r){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ElementaryStreamTypes.AUDIO]:null,[ElementaryStreamTypes.VIDEO]:null,[ElementaryStreamTypes.AUDIOVIDEO]:null},this.baseurl=_r}setByteRange(_r,Ur){const jr=_r.split("@",2),Gr=[];jr.length===1?Gr[0]=Ur?Ur.byteRangeEndOffset:0:Gr[0]=parseInt(jr[1]),Gr[1]=parseInt(jr[0])+Gr[0],this._byteRange=Gr}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=urlToolkitExports.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(_r){this._url=_r}}class Fragment extends BaseSegment{constructor(_r,Ur){super(Ur),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new LoadStats,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=_r}get decryptdata(){const{levelkeys:_r}=this;if(!_r&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const Ur=this.levelkeys.identity;if(Ur)this._decryptdata=Ur.getDecryptData(this.sn);else{const jr=Object.keys(this.levelkeys);if(jr.length===1)return this._decryptdata=this.levelkeys[jr[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!isFiniteNumber(this.programDateTime))return null;const _r=isFiniteNumber(this.duration)?this.duration:0;return this.programDateTime+_r*1e3}get encrypted(){var _r;if((_r=this._decryptdata)!=null&&_r.encrypted)return!0;if(this.levelkeys){const Ur=Object.keys(this.levelkeys),jr=Ur.length;if(jr>1||jr===1&&this.levelkeys[Ur[0]].encrypted)return!0}return!1}setKeyFormat(_r){if(this.levelkeys){const Ur=this.levelkeys[_r];Ur&&!this._decryptdata&&(this._decryptdata=Ur.getDecryptData(this.sn))}}abortRequests(){var _r,Ur;(_r=this.loader)==null||_r.abort(),(Ur=this.keyLoader)==null||Ur.abort()}setElementaryStreamInfo(_r,Ur,jr,Gr,Wr,Zr=!1){const{elementaryStreams:Yr}=this,ts=Yr[_r];if(!ts){Yr[_r]={startPTS:Ur,endPTS:jr,startDTS:Gr,endDTS:Wr,partial:Zr};return}ts.startPTS=Math.min(ts.startPTS,Ur),ts.endPTS=Math.max(ts.endPTS,jr),ts.startDTS=Math.min(ts.startDTS,Gr),ts.endDTS=Math.max(ts.endDTS,Wr)}clearElementaryStreamInfo(){const{elementaryStreams:_r}=this;_r[ElementaryStreamTypes.AUDIO]=null,_r[ElementaryStreamTypes.VIDEO]=null,_r[ElementaryStreamTypes.AUDIOVIDEO]=null}}class Part extends BaseSegment{constructor(_r,Ur,jr,Gr,Wr){super(jr),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new LoadStats,this.duration=_r.decimalFloatingPoint("DURATION"),this.gap=_r.bool("GAP"),this.independent=_r.bool("INDEPENDENT"),this.relurl=_r.enumeratedString("URI"),this.fragment=Ur,this.index=Gr;const Zr=_r.enumeratedString("BYTERANGE");Zr&&this.setByteRange(Zr,Wr),Wr&&(this.fragOffset=Wr.fragOffset+Wr.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:_r}=this;return!!(_r.audio||_r.video||_r.audiovideo)}}const DEFAULT_TARGET_DURATION=10;class LevelDetails{constructor(_r){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=_r}reloaded(_r){if(!_r){this.advanced=!0,this.updated=!0;return}const Ur=this.lastPartSn-_r.lastPartSn,jr=this.lastPartIndex-_r.lastPartIndex;this.updated=this.endSN!==_r.endSN||!!jr||!!Ur||!this.live,this.advanced=this.endSN>_r.endSN||Ur>0||Ur===0&&jr>0,this.updated||this.advanced?this.misses=Math.floor(_r.misses*.6):this.misses=_r.misses+1,this.availabilityDelay=_r.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?isFiniteNumber(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||DEFAULT_TARGET_DURATION}get drift(){const _r=this.driftEndTime-this.driftStartTime;return _r>0?(this.driftEnd-this.driftStart)*1e3/_r:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var _r;return(_r=this.partList)!=null&&_r.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var _r;return(_r=this.fragments)!=null&&_r.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var _r;return(_r=this.partList)!=null&&_r.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var _r;return(_r=this.partList)!=null&&_r.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function base64Decode(Nr){return Uint8Array.from(atob(Nr),_r=>_r.charCodeAt(0))}function getKeyIdBytes(Nr){const _r=strToUtf8array(Nr).subarray(0,16),Ur=new Uint8Array(16);return Ur.set(_r,16-_r.length),Ur}function changeEndianness(Nr){const _r=function(jr,Gr,Wr){const Zr=jr[Gr];jr[Gr]=jr[Wr],jr[Wr]=Zr};_r(Nr,0,3),_r(Nr,1,2),_r(Nr,4,5),_r(Nr,6,7)}function convertDataUriToArrayBytes(Nr){const _r=Nr.split(":");let Ur=null;if(_r[0]==="data"&&_r.length===2){const jr=_r[1].split(";"),Gr=jr[jr.length-1].split(",");if(Gr.length===2){const Wr=Gr[0]==="base64",Zr=Gr[1];Wr?(jr.splice(-1,1),Ur=base64Decode(Zr)):Ur=getKeyIdBytes(Zr)}}return Ur}function strToUtf8array(Nr){return Uint8Array.from(unescape(encodeURIComponent(Nr)),_r=>_r.charCodeAt(0))}var KeySystems={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},KeySystemFormats={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function keySystemFormatToKeySystemDomain(Nr){switch(Nr){case KeySystemFormats.FAIRPLAY:return KeySystems.FAIRPLAY;case KeySystemFormats.PLAYREADY:return KeySystems.PLAYREADY;case KeySystemFormats.WIDEVINE:return KeySystems.WIDEVINE;case KeySystemFormats.CLEARKEY:return KeySystems.CLEARKEY}}var KeySystemIds={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function keySystemIdToKeySystemDomain(Nr){if(Nr===KeySystemIds.WIDEVINE)return KeySystems.WIDEVINE}function keySystemDomainToKeySystemFormat(Nr){switch(Nr){case KeySystems.FAIRPLAY:return KeySystemFormats.FAIRPLAY;case KeySystems.PLAYREADY:return KeySystemFormats.PLAYREADY;case KeySystems.WIDEVINE:return KeySystemFormats.WIDEVINE;case KeySystems.CLEARKEY:return KeySystemFormats.CLEARKEY}}function getKeySystemsForConfig(Nr){const{drmSystems:_r,widevineLicenseUrl:Ur}=Nr,jr=_r?[KeySystems.FAIRPLAY,KeySystems.WIDEVINE,KeySystems.PLAYREADY,KeySystems.CLEARKEY].filter(Gr=>!!_r[Gr]):[];return!jr[KeySystems.WIDEVINE]&&Ur&&jr.push(KeySystems.WIDEVINE),jr}const requestMediaKeySystemAccess=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function getSupportedMediaKeySystemConfigurations(Nr,_r,Ur,jr){let Gr;switch(Nr){case KeySystems.FAIRPLAY:Gr=["cenc","sinf"];break;case KeySystems.WIDEVINE:case KeySystems.PLAYREADY:Gr=["cenc"];break;case KeySystems.CLEARKEY:Gr=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${Nr}`)}return createMediaKeySystemConfigurations(Gr,_r,Ur,jr)}function createMediaKeySystemConfigurations(Nr,_r,Ur,jr){return[{initDataTypes:Nr,persistentState:jr.persistentState||"not-allowed",distinctiveIdentifier:jr.distinctiveIdentifier||"not-allowed",sessionTypes:jr.sessionTypes||[jr.sessionType||"temporary"],audioCapabilities:_r.map(Wr=>({contentType:`audio/mp4; codecs="${Wr}"`,robustness:jr.audioRobustness||"",encryptionScheme:jr.audioEncryptionScheme||null})),videoCapabilities:Ur.map(Wr=>({contentType:`video/mp4; codecs="${Wr}"`,robustness:jr.videoRobustness||"",encryptionScheme:jr.videoEncryptionScheme||null}))}]}function sliceUint8(Nr,_r,Ur){return Uint8Array.prototype.slice?Nr.slice(_r,Ur):new Uint8Array(Array.prototype.slice.call(Nr,_r,Ur))}const isHeader$2=(Nr,_r)=>_r+10<=Nr.length&&Nr[_r]===73&&Nr[_r+1]===68&&Nr[_r+2]===51&&Nr[_r+3]<255&&Nr[_r+4]<255&&Nr[_r+6]<128&&Nr[_r+7]<128&&Nr[_r+8]<128&&Nr[_r+9]<128,isFooter=(Nr,_r)=>_r+10<=Nr.length&&Nr[_r]===51&&Nr[_r+1]===68&&Nr[_r+2]===73&&Nr[_r+3]<255&&Nr[_r+4]<255&&Nr[_r+6]<128&&Nr[_r+7]<128&&Nr[_r+8]<128&&Nr[_r+9]<128,getID3Data=(Nr,_r)=>{const Ur=_r;let jr=0;for(;isHeader$2(Nr,_r);){jr+=10;const Gr=readSize(Nr,_r+6);jr+=Gr,isFooter(Nr,_r+10)&&(jr+=10),_r+=jr}if(jr>0)return Nr.subarray(Ur,Ur+jr)},readSize=(Nr,_r)=>{let Ur=0;return Ur=(Nr[_r]&127)<<21,Ur|=(Nr[_r+1]&127)<<14,Ur|=(Nr[_r+2]&127)<<7,Ur|=Nr[_r+3]&127,Ur},canParse$2=(Nr,_r)=>isHeader$2(Nr,_r)&&readSize(Nr,_r+6)+10<=Nr.length-_r,getTimeStamp=Nr=>{const _r=getID3Frames(Nr);for(let Ur=0;Ur<_r.length;Ur++){const jr=_r[Ur];if(isTimeStampFrame(jr))return readTimeStamp(jr)}},isTimeStampFrame=Nr=>Nr&&Nr.key==="PRIV"&&Nr.info==="com.apple.streaming.transportStreamTimestamp",getFrameData=Nr=>{const _r=String.fromCharCode(Nr[0],Nr[1],Nr[2],Nr[3]),Ur=readSize(Nr,4),jr=10;return{type:_r,size:Ur,data:Nr.subarray(jr,jr+Ur)}},getID3Frames=Nr=>{let _r=0;const Ur=[];for(;isHeader$2(Nr,_r);){const jr=readSize(Nr,_r+6);_r+=10;const Gr=_r+jr;for(;_r+8<Gr;){const Wr=getFrameData(Nr.subarray(_r)),Zr=decodeFrame(Wr);Zr&&Ur.push(Zr),_r+=Wr.size+10}isFooter(Nr,_r)&&(_r+=10)}return Ur},decodeFrame=Nr=>Nr.type==="PRIV"?decodePrivFrame(Nr):Nr.type[0]==="W"?decodeURLFrame(Nr):decodeTextFrame(Nr),decodePrivFrame=Nr=>{if(Nr.size<2)return;const _r=utf8ArrayToStr(Nr.data,!0),Ur=new Uint8Array(Nr.data.subarray(_r.length+1));return{key:Nr.type,info:_r,data:Ur.buffer}},decodeTextFrame=Nr=>{if(Nr.size<2)return;if(Nr.type==="TXXX"){let Ur=1;const jr=utf8ArrayToStr(Nr.data.subarray(Ur),!0);Ur+=jr.length+1;const Gr=utf8ArrayToStr(Nr.data.subarray(Ur));return{key:Nr.type,info:jr,data:Gr}}const _r=utf8ArrayToStr(Nr.data.subarray(1));return{key:Nr.type,data:_r}},decodeURLFrame=Nr=>{if(Nr.type==="WXXX"){if(Nr.size<2)return;let Ur=1;const jr=utf8ArrayToStr(Nr.data.subarray(Ur),!0);Ur+=jr.length+1;const Gr=utf8ArrayToStr(Nr.data.subarray(Ur));return{key:Nr.type,info:jr,data:Gr}}const _r=utf8ArrayToStr(Nr.data);return{key:Nr.type,data:_r}},readTimeStamp=Nr=>{if(Nr.data.byteLength===8){const _r=new Uint8Array(Nr.data),Ur=_r[3]&1;let jr=(_r[4]<<23)+(_r[5]<<15)+(_r[6]<<7)+_r[7];return jr/=45,Ur&&(jr+=4772185884e-2),Math.round(jr)}},utf8ArrayToStr=(Nr,_r=!1)=>{const Ur=getTextDecoder();if(Ur){const es=Ur.decode(Nr);if(_r){const ns=es.indexOf("\0");return ns!==-1?es.substring(0,ns):es}return es.replace(/\0/g,"")}const jr=Nr.length;let Gr,Wr,Zr,Yr="",ts=0;for(;ts<jr;){if(Gr=Nr[ts++],Gr===0&&_r)return Yr;if(Gr===0||Gr===3)continue;switch(Gr>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:Yr+=String.fromCharCode(Gr);break;case 12:case 13:Wr=Nr[ts++],Yr+=String.fromCharCode((Gr&31)<<6|Wr&63);break;case 14:Wr=Nr[ts++],Zr=Nr[ts++],Yr+=String.fromCharCode((Gr&15)<<12|(Wr&63)<<6|(Zr&63)<<0);break}}return Yr};let decoder;function getTextDecoder(){return!decoder&&typeof self.TextDecoder<"u"&&(decoder=new self.TextDecoder("utf-8")),decoder}const Hex={hexDump:function(Nr){let _r="";for(let Ur=0;Ur<Nr.length;Ur++){let jr=Nr[Ur].toString(16);jr.length<2&&(jr="0"+jr),_r+=jr}return _r}},UINT32_MAX$1=Math.pow(2,32)-1,push=[].push,RemuxerTrackIdConfig={video:1,audio:2,id3:3,text:4};function bin2str(Nr){return String.fromCharCode.apply(null,Nr)}function readUint16(Nr,_r){const Ur=Nr[_r]<<8|Nr[_r+1];return Ur<0?65536+Ur:Ur}function readUint32(Nr,_r){const Ur=readSint32(Nr,_r);return Ur<0?4294967296+Ur:Ur}function readSint32(Nr,_r){return Nr[_r]<<24|Nr[_r+1]<<16|Nr[_r+2]<<8|Nr[_r+3]}function writeUint32(Nr,_r,Ur){Nr[_r]=Ur>>24,Nr[_r+1]=Ur>>16&255,Nr[_r+2]=Ur>>8&255,Nr[_r+3]=Ur&255}function findBox(Nr,_r){const Ur=[];if(!_r.length)return Ur;const jr=Nr.byteLength;for(let Gr=0;Gr<jr;){const Wr=readUint32(Nr,Gr),Zr=bin2str(Nr.subarray(Gr+4,Gr+8)),Yr=Wr>1?Gr+Wr:jr;if(Zr===_r[0])if(_r.length===1)Ur.push(Nr.subarray(Gr+8,Yr));else{const ts=findBox(Nr.subarray(Gr+8,Yr),_r.slice(1));ts.length&&push.apply(Ur,ts)}Gr=Yr}return Ur}function parseSegmentIndex(Nr){const _r=[],Ur=Nr[0];let jr=8;const Gr=readUint32(Nr,jr);jr+=4;const Wr=0,Zr=0;Ur===0?jr+=8:jr+=16,jr+=2;let Yr=Nr.length+Zr;const ts=readUint16(Nr,jr);jr+=2;for(let es=0;es<ts;es++){let ns=jr;const Xr=readUint32(Nr,ns);ns+=4;const qr=Xr&2147483647;if((Xr&2147483648)>>>31===1)return logger.warn("SIDX has hierarchical references (not supported)"),null;const rs=readUint32(Nr,ns);ns+=4,_r.push({referenceSize:qr,subsegmentDuration:rs,info:{duration:rs/Gr,start:Yr,end:Yr+qr-1}}),Yr+=qr,ns+=4,jr=ns}return{earliestPresentationTime:Wr,timescale:Gr,version:Ur,referencesCount:ts,references:_r}}function parseInitSegment(Nr){const _r=[],Ur=findBox(Nr,["moov","trak"]);for(let Gr=0;Gr<Ur.length;Gr++){const Wr=Ur[Gr],Zr=findBox(Wr,["tkhd"])[0];if(Zr){let Yr=Zr[0],ts=Yr===0?12:20;const es=readUint32(Zr,ts),ns=findBox(Wr,["mdia","mdhd"])[0];if(ns){Yr=ns[0],ts=Yr===0?12:20;const Xr=readUint32(ns,ts),qr=findBox(Wr,["mdia","hdlr"])[0];if(qr){const _i=bin2str(qr.subarray(8,12)),rs={soun:ElementaryStreamTypes.AUDIO,vide:ElementaryStreamTypes.VIDEO}[_i];if(rs){const is=findBox(Wr,["mdia","minf","stbl","stsd"])[0];let ss;is&&(ss=bin2str(is.subarray(12,16))),_r[es]={timescale:Xr,type:rs},_r[rs]={timescale:Xr,id:es,codec:ss}}}}}}return findBox(Nr,["moov","mvex","trex"]).forEach(Gr=>{const Wr=readUint32(Gr,4),Zr=_r[Wr];Zr&&(Zr.default={duration:readUint32(Gr,12),flags:readUint32(Gr,20)})}),_r}function patchEncyptionData(Nr,_r){if(!Nr||!_r)return Nr;const Ur=_r.keyId;return Ur&&_r.isCommonEncryption&&findBox(Nr,["moov","trak"]).forEach(Gr=>{const Zr=findBox(Gr,["mdia","minf","stbl","stsd"])[0].subarray(8);let Yr=findBox(Zr,["enca"]);const ts=Yr.length>0;ts||(Yr=findBox(Zr,["encv"])),Yr.forEach(es=>{const ns=ts?es.subarray(28):es.subarray(78);findBox(ns,["sinf"]).forEach(qr=>{const _i=parseSinf(qr);if(_i){const rs=_i.subarray(8,24);rs.some(is=>is!==0)||(logger.log(`[eme] Patching keyId in 'enc${ts?"a":"v"}>sinf>>tenc' box: ${Hex.hexDump(rs)} -> ${Hex.hexDump(Ur)}`),_i.set(Ur,8))}})})}),Nr}function parseSinf(Nr){const _r=findBox(Nr,["schm"])[0];if(_r){const Ur=bin2str(_r.subarray(4,8));if(Ur==="cbcs"||Ur==="cenc")return findBox(Nr,["schi","tenc"])[0]}return logger.error("[eme] missing 'schm' box"),null}function getStartDTS(Nr,_r){return findBox(_r,["moof","traf"]).reduce((Ur,jr)=>{const Gr=findBox(jr,["tfdt"])[0],Wr=Gr[0],Zr=findBox(jr,["tfhd"]).reduce((Yr,ts)=>{const es=readUint32(ts,4),ns=Nr[es];if(ns){let Xr=readUint32(Gr,4);if(Wr===1){if(Xr===UINT32_MAX$1)return logger.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),Yr;Xr*=UINT32_MAX$1+1,Xr+=readUint32(Gr,8)}const qr=ns.timescale||9e4,_i=Xr/qr;if(isFinite(_i)&&(Yr===null||_i<Yr))return _i}return Yr},null);return Zr!==null&&isFinite(Zr)&&(Ur===null||Zr<Ur)?Zr:Ur},null)}function getDuration(Nr,_r){let Ur=0,jr=0,Gr=0;const Wr=findBox(Nr,["moof","traf"]);for(let Zr=0;Zr<Wr.length;Zr++){const Yr=Wr[Zr],ts=findBox(Yr,["tfhd"])[0],es=readUint32(ts,4),ns=_r[es];if(!ns)continue;const Xr=ns.default,qr=readUint32(ts,0)|(Xr==null?void 0:Xr.flags);let _i=Xr==null?void 0:Xr.duration;qr&8&&(qr&2?_i=readUint32(ts,12):_i=readUint32(ts,8));const rs=ns.timescale||9e4,is=findBox(Yr,["trun"]);for(let ss=0;ss<is.length;ss++){if(Ur=computeRawDurationFromSamples(is[ss]),!Ur&&_i){const os=readUint32(is[ss],4);Ur=_i*os}ns.type===ElementaryStreamTypes.VIDEO?jr+=Ur/rs:ns.type===ElementaryStreamTypes.AUDIO&&(Gr+=Ur/rs)}}if(jr===0&&Gr===0){let Zr=0;const Yr=findBox(Nr,["sidx"]);for(let ts=0;ts<Yr.length;ts++){const es=parseSegmentIndex(Yr[ts]);es!=null&&es.references&&(Zr+=es.references.reduce((ns,Xr)=>ns+Xr.info.duration||0,0))}return Zr}return jr||Gr}function computeRawDurationFromSamples(Nr){const _r=readUint32(Nr,0);let Ur=8;_r&1&&(Ur+=4),_r&4&&(Ur+=4);let jr=0;const Gr=readUint32(Nr,4);for(let Wr=0;Wr<Gr;Wr++){if(_r&256){const Zr=readUint32(Nr,Ur);jr+=Zr,Ur+=4}_r&512&&(Ur+=4),_r&1024&&(Ur+=4),_r&2048&&(Ur+=4)}return jr}function offsetStartDTS(Nr,_r,Ur){findBox(_r,["moof","traf"]).forEach(jr=>{findBox(jr,["tfhd"]).forEach(Gr=>{const Wr=readUint32(Gr,4),Zr=Nr[Wr];if(!Zr)return;const Yr=Zr.timescale||9e4;findBox(jr,["tfdt"]).forEach(ts=>{const es=ts[0];let ns=readUint32(ts,4);if(es===0)ns-=Ur*Yr,ns=Math.max(ns,0),writeUint32(ts,4,ns);else{ns*=Math.pow(2,32),ns+=readUint32(ts,8),ns-=Ur*Yr,ns=Math.max(ns,0);const Xr=Math.floor(ns/(UINT32_MAX$1+1)),qr=Math.floor(ns%(UINT32_MAX$1+1));writeUint32(ts,4,Xr),writeUint32(ts,8,qr)}})})})}function segmentValidRange(Nr){const _r={valid:null,remainder:null},Ur=findBox(Nr,["moof"]);if(Ur){if(Ur.length<2)return _r.remainder=Nr,_r}else return _r;const jr=Ur[Ur.length-1];return _r.valid=sliceUint8(Nr,0,jr.byteOffset-8),_r.remainder=sliceUint8(Nr,jr.byteOffset-8),_r}function appendUint8Array(Nr,_r){const Ur=new Uint8Array(Nr.length+_r.length);return Ur.set(Nr),Ur.set(_r,Nr.length),Ur}function parseSamples(Nr,_r){const Ur=[],jr=_r.samples,Gr=_r.timescale,Wr=_r.id;let Zr=!1;return findBox(jr,["moof"]).map(ts=>{const es=ts.byteOffset-8;findBox(ts,["traf"]).map(Xr=>{const qr=findBox(Xr,["tfdt"]).map(_i=>{const rs=_i[0];let is=readUint32(_i,4);return rs===1&&(is*=Math.pow(2,32),is+=readUint32(_i,8)),is/Gr})[0];return qr!==void 0&&(Nr=qr),findBox(Xr,["tfhd"]).map(_i=>{const rs=readUint32(_i,4),is=readUint32(_i,0)&16777215,ss=(is&1)!==0,os=(is&2)!==0,ls=(is&8)!==0;let cs=0;const ds=(is&16)!==0;let fs=0;const ms=(is&32)!==0;let ps=8;rs===Wr&&(ss&&(ps+=8),os&&(ps+=4),ls&&(cs=readUint32(_i,ps),ps+=4),ds&&(fs=readUint32(_i,ps),ps+=4),ms&&(ps+=4),_r.type==="video"&&(Zr=isHEVC(_r.codec)),findBox(Xr,["trun"]).map(ys=>{const ws=ys[0],xs=readUint32(ys,0)&16777215,Es=(xs&1)!==0;let Rs=0;const _s=(xs&4)!==0,Bs=(xs&256)!==0;let vs=0;const Cs=(xs&512)!==0;let Ss=0;const As=(xs&1024)!==0,Us=(xs&2048)!==0;let Ks=0;const Ws=readUint32(ys,4);let Js=8;Es&&(Rs=readUint32(ys,Js),Js+=4),_s&&(Js+=4);let ho=Rs+es;for(let so=0;so<Ws;so++){if(Bs?(vs=readUint32(ys,Js),Js+=4):vs=cs,Cs?(Ss=readUint32(ys,Js),Js+=4):Ss=fs,As&&(Js+=4),Us&&(ws===0?Ks=readUint32(ys,Js):Ks=readSint32(ys,Js),Js+=4),_r.type===ElementaryStreamTypes.VIDEO){let io=0;for(;io<Ss;){const vo=readUint32(jr,ho);if(ho+=4,isSEIMessage(Zr,jr[ho])){const co=jr.subarray(ho,ho+vo);parseSEIMessageFromNALu(co,Zr?2:1,Nr+Ks/Gr,Ur)}ho+=vo,io+=vo+4}}Nr+=vs/Gr}}))})})}),Ur}function isHEVC(Nr){if(!Nr)return!1;const _r=Nr.indexOf("."),Ur=_r<0?Nr:Nr.substring(0,_r);return Ur==="hvc1"||Ur==="hev1"||Ur==="dvh1"||Ur==="dvhe"}function isSEIMessage(Nr,_r){if(Nr){const Ur=_r>>1&63;return Ur===39||Ur===40}else return(_r&31)===6}function parseSEIMessageFromNALu(Nr,_r,Ur,jr){const Gr=discardEPB(Nr);let Wr=0;Wr+=_r;let Zr=0,Yr=0,ts=!1,es=0;for(;Wr<Gr.length;){Zr=0;do{if(Wr>=Gr.length)break;es=Gr[Wr++],Zr+=es}while(es===255);Yr=0;do{if(Wr>=Gr.length)break;es=Gr[Wr++],Yr+=es}while(es===255);const ns=Gr.length-Wr;if(!ts&&Zr===4&&Wr<Gr.length){if(ts=!0,Gr[Wr++]===181){const qr=readUint16(Gr,Wr);if(Wr+=2,qr===49){const _i=readUint32(Gr,Wr);if(Wr+=4,_i===1195456820){const rs=Gr[Wr++];if(rs===3){const is=Gr[Wr++],ss=31&is,os=64&is,ls=os?2+ss*3:0,cs=new Uint8Array(ls);if(os){cs[0]=is;for(let ds=1;ds<ls;ds++)cs[ds]=Gr[Wr++]}jr.push({type:rs,payloadType:Zr,pts:Ur,bytes:cs})}}}}}else if(Zr===5&&Yr<ns){if(ts=!0,Yr>16){const Xr=[];for(let rs=0;rs<16;rs++){const is=Gr[Wr++].toString(16);Xr.push(is.length==1?"0"+is:is),(rs===3||rs===5||rs===7||rs===9)&&Xr.push("-")}const qr=Yr-16,_i=new Uint8Array(qr);for(let rs=0;rs<qr;rs++)_i[rs]=Gr[Wr++];jr.push({payloadType:Zr,pts:Ur,uuid:Xr.join(""),userData:utf8ArrayToStr(_i),userDataBytes:_i})}}else if(Yr<ns)Wr+=Yr;else if(Yr>ns)break}}function discardEPB(Nr){const _r=Nr.byteLength,Ur=[];let jr=1;for(;jr<_r-2;)Nr[jr]===0&&Nr[jr+1]===0&&Nr[jr+2]===3?(Ur.push(jr+2),jr+=2):jr++;if(Ur.length===0)return Nr;const Gr=_r-Ur.length,Wr=new Uint8Array(Gr);let Zr=0;for(jr=0;jr<Gr;Zr++,jr++)Zr===Ur[0]&&(Zr++,Ur.shift()),Wr[jr]=Nr[Zr];return Wr}function parseEmsg(Nr){const _r=Nr[0];let Ur="",jr="",Gr=0,Wr=0,Zr=0,Yr=0,ts=0,es=0;if(_r===0){for(;bin2str(Nr.subarray(es,es+1))!=="\0";)Ur+=bin2str(Nr.subarray(es,es+1)),es+=1;for(Ur+=bin2str(Nr.subarray(es,es+1)),es+=1;bin2str(Nr.subarray(es,es+1))!=="\0";)jr+=bin2str(Nr.subarray(es,es+1)),es+=1;jr+=bin2str(Nr.subarray(es,es+1)),es+=1,Gr=readUint32(Nr,12),Wr=readUint32(Nr,16),Yr=readUint32(Nr,20),ts=readUint32(Nr,24),es=28}else if(_r===1){es+=4,Gr=readUint32(Nr,es),es+=4;const Xr=readUint32(Nr,es);es+=4;const qr=readUint32(Nr,es);for(es+=4,Zr=2**32*Xr+qr,Number.isSafeInteger(Zr)||(Zr=Number.MAX_SAFE_INTEGER,logger.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),Yr=readUint32(Nr,es),es+=4,ts=readUint32(Nr,es),es+=4;bin2str(Nr.subarray(es,es+1))!=="\0";)Ur+=bin2str(Nr.subarray(es,es+1)),es+=1;for(Ur+=bin2str(Nr.subarray(es,es+1)),es+=1;bin2str(Nr.subarray(es,es+1))!=="\0";)jr+=bin2str(Nr.subarray(es,es+1)),es+=1;jr+=bin2str(Nr.subarray(es,es+1)),es+=1}const ns=Nr.subarray(es,Nr.byteLength);return{schemeIdUri:Ur,value:jr,timeScale:Gr,presentationTime:Zr,presentationTimeDelta:Wr,eventDuration:Yr,id:ts,payload:ns}}function mp4Box(Nr,..._r){const Ur=_r.length;let jr=8,Gr=Ur;for(;Gr--;)jr+=_r[Gr].byteLength;const Wr=new Uint8Array(jr);for(Wr[0]=jr>>24&255,Wr[1]=jr>>16&255,Wr[2]=jr>>8&255,Wr[3]=jr&255,Wr.set(Nr,4),Gr=0,jr=8;Gr<Ur;Gr++)Wr.set(_r[Gr],jr),jr+=_r[Gr].byteLength;return Wr}function mp4pssh(Nr,_r,Ur){if(Nr.byteLength!==16)throw new RangeError("Invalid system id");let jr,Gr;if(_r){jr=1,Gr=new Uint8Array(_r.length*16);for(let Yr=0;Yr<_r.length;Yr++){const ts=_r[Yr];if(ts.byteLength!==16)throw new RangeError("Invalid key");Gr.set(ts,Yr*16)}}else jr=0,Gr=new Uint8Array;let Wr;jr>0?(Wr=new Uint8Array(4),_r.length>0&&new DataView(Wr.buffer).setUint32(0,_r.length,!1)):Wr=new Uint8Array;const Zr=new Uint8Array(4);return Ur&&Ur.byteLength>0&&new DataView(Zr.buffer).setUint32(0,Ur.byteLength,!1),mp4Box([112,115,115,104],new Uint8Array([jr,0,0,0]),Nr,Wr,Gr,Zr,Ur||new Uint8Array)}function parsePssh(Nr){if(!(Nr instanceof ArrayBuffer)||Nr.byteLength<32)return null;const _r={version:0,systemId:"",kids:null,data:null},Ur=new DataView(Nr),jr=Ur.getUint32(0);if(Nr.byteLength!==jr&&jr>44||Ur.getUint32(4)!==1886614376||(_r.version=Ur.getUint32(8)>>>24,_r.version>1))return null;_r.systemId=Hex.hexDump(new Uint8Array(Nr,12,16));const Wr=Ur.getUint32(28);if(_r.version===0){if(jr-32<Wr)return null;_r.data=new Uint8Array(Nr,32,Wr)}else if(_r.version===1){_r.kids=[];for(let Zr=0;Zr<Wr;Zr++)_r.kids.push(new Uint8Array(Nr,32+Zr*16,16))}return _r}let keyUriToKeyIdMap={};class LevelKey{static clearKeyUriToKeyIdMap(){keyUriToKeyIdMap={}}constructor(_r,Ur,jr,Gr=[1],Wr=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=_r,this.uri=Ur,this.keyFormat=jr,this.keyFormatVersions=Gr,this.iv=Wr,this.encrypted=_r?_r!=="NONE":!1,this.isCommonEncryption=this.encrypted&&_r!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case KeySystemFormats.FAIRPLAY:case KeySystemFormats.WIDEVINE:case KeySystemFormats.PLAYREADY:case KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(_r){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof _r!="number"&&(this.method==="AES-128"&&!this.iv&&logger.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),_r=0);const jr=createInitializationVector(_r);return new LevelKey(this.method,this.uri,"identity",this.keyFormatVersions,jr)}const Ur=convertDataUriToArrayBytes(this.uri);if(Ur)switch(this.keyFormat){case KeySystemFormats.WIDEVINE:this.pssh=Ur,Ur.length>=22&&(this.keyId=Ur.subarray(Ur.length-22,Ur.length-6));break;case KeySystemFormats.PLAYREADY:{const jr=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=mp4pssh(jr,null,Ur);const Gr=new Uint16Array(Ur.buffer,Ur.byteOffset,Ur.byteLength/2),Wr=String.fromCharCode.apply(null,Array.from(Gr)),Zr=Wr.substring(Wr.indexOf("<"),Wr.length),es=new DOMParser().parseFromString(Zr,"text/xml").getElementsByTagName("KID")[0];if(es){const ns=es.childNodes[0]?es.childNodes[0].nodeValue:es.getAttribute("VALUE");if(ns){const Xr=base64Decode(ns).subarray(0,16);changeEndianness(Xr),this.keyId=Xr}}break}default:{let jr=Ur.subarray(0,16);if(jr.length!==16){const Gr=new Uint8Array(16);Gr.set(jr,16-jr.length),jr=Gr}this.keyId=jr;break}}if(!this.keyId||this.keyId.byteLength!==16){let jr=keyUriToKeyIdMap[this.uri];if(!jr){const Gr=Object.keys(keyUriToKeyIdMap).length%Number.MAX_SAFE_INTEGER;jr=new Uint8Array(16),new DataView(jr.buffer,12,4).setUint32(0,Gr),keyUriToKeyIdMap[this.uri]=jr}this.keyId=jr}return this}}function createInitializationVector(Nr){const _r=new Uint8Array(16);for(let Ur=12;Ur<16;Ur++)_r[Ur]=Nr>>8*(15-Ur)&255;return _r}const VARIABLE_REPLACEMENT_REGEX=/\{\$([a-zA-Z0-9-_]+)\}/g;function hasVariableReferences(Nr){return VARIABLE_REPLACEMENT_REGEX.test(Nr)}function substituteVariablesInAttributes(Nr,_r,Ur){if(Nr.variableList!==null||Nr.hasVariableRefs)for(let jr=Ur.length;jr--;){const Gr=Ur[jr],Wr=_r[Gr];Wr&&(_r[Gr]=substituteVariables(Nr,Wr))}}function substituteVariables(Nr,_r){if(Nr.variableList!==null||Nr.hasVariableRefs){const Ur=Nr.variableList;return _r.replace(VARIABLE_REPLACEMENT_REGEX,jr=>{const Gr=jr.substring(2,jr.length-1),Wr=Ur==null?void 0:Ur[Gr];return Wr===void 0?(Nr.playlistParsingError||(Nr.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${Gr}"`)),jr):Wr})}return _r}function addVariableDefinition(Nr,_r,Ur){let jr=Nr.variableList;jr||(Nr.variableList=jr={});let Gr,Wr;if("QUERYPARAM"in _r){Gr=_r.QUERYPARAM;try{const Zr=new self.URL(Ur).searchParams;if(Zr.has(Gr))Wr=Zr.get(Gr);else throw new Error(`"${Gr}" does not match any query parameter in URI: "${Ur}"`)}catch(Zr){Nr.playlistParsingError||(Nr.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${Zr.message}`))}}else Gr=_r.NAME,Wr=_r.VALUE;Gr in jr?Nr.playlistParsingError||(Nr.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${Gr}"`)):jr[Gr]=Wr||""}function importVariableDefinition(Nr,_r,Ur){const jr=_r.IMPORT;if(Ur&&jr in Ur){let Gr=Nr.variableList;Gr||(Nr.variableList=Gr={}),Gr[jr]=Ur[jr]}else Nr.playlistParsingError||(Nr.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${jr}"`))}function getMediaSource(){if(!(typeof self>"u"))return self.MediaSource||self.WebKitMediaSource}const sampleEntryCodesISO={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},MediaSource$2=getMediaSource();function isCodecType(Nr,_r){const Ur=sampleEntryCodesISO[_r];return!!Ur&&Ur[Nr.slice(0,4)]===!0}function isCodecSupportedInMp4(Nr,_r){var Ur;return(Ur=MediaSource$2==null?void 0:MediaSource$2.isTypeSupported(`${_r||"video"}/mp4;codecs="${Nr}"`))!=null?Ur:!1}const MASTER_PLAYLIST_REGEX=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,MASTER_PLAYLIST_MEDIA_REGEX=/#EXT-X-MEDIA:(.*)/g,IS_MEDIA_PLAYLIST=/^#EXT(?:INF|-X-TARGETDURATION):/m,LEVEL_PLAYLIST_REGEX_FAST=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),LEVEL_PLAYLIST_REGEX_SLOW=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class M3U8Parser{static findGroup(_r,Ur){for(let jr=0;jr<_r.length;jr++){const Gr=_r[jr];if(Gr.id===Ur)return Gr}}static convertAVC1ToAVCOTI(_r){const Ur=_r.split(".");if(Ur.length>2){let jr=Ur.shift()+".";return jr+=parseInt(Ur.shift()).toString(16),jr+=("000"+parseInt(Ur.shift()).toString(16)).slice(-4),jr}return _r}static resolve(_r,Ur){return urlToolkitExports.buildAbsoluteURL(Ur,_r,{alwaysNormalize:!0})}static isMediaPlaylist(_r){return IS_MEDIA_PLAYLIST.test(_r)}static parseMasterPlaylist(_r,Ur){const jr=hasVariableReferences(_r),Gr={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:jr},Wr=[];MASTER_PLAYLIST_REGEX.lastIndex=0;let Zr;for(;(Zr=MASTER_PLAYLIST_REGEX.exec(_r))!=null;)if(Zr[1]){var Yr;const es=new AttrList(Zr[1]);substituteVariablesInAttributes(Gr,es,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const ns=substituteVariables(Gr,Zr[2]),Xr={attrs:es,bitrate:es.decimalInteger("AVERAGE-BANDWIDTH")||es.decimalInteger("BANDWIDTH"),name:es.NAME,url:M3U8Parser.resolve(ns,Ur)},qr=es.decimalResolution("RESOLUTION");qr&&(Xr.width=qr.width,Xr.height=qr.height),setCodecs((es.CODECS||"").split(/[ ,]+/).filter(_i=>_i),Xr),Xr.videoCodec&&Xr.videoCodec.indexOf("avc1")!==-1&&(Xr.videoCodec=M3U8Parser.convertAVC1ToAVCOTI(Xr.videoCodec)),(Yr=Xr.unknownCodecs)!=null&&Yr.length||Wr.push(Xr),Gr.levels.push(Xr)}else if(Zr[3]){const es=Zr[3],ns=Zr[4];switch(es){case"SESSION-DATA":{const Xr=new AttrList(ns);substituteVariablesInAttributes(Gr,Xr,["DATA-ID","LANGUAGE","VALUE","URI"]);const qr=Xr["DATA-ID"];qr&&(Gr.sessionData===null&&(Gr.sessionData={}),Gr.sessionData[qr]=Xr);break}case"SESSION-KEY":{const Xr=parseKey(ns,Ur,Gr);Xr.encrypted&&Xr.isSupported()?(Gr.sessionKeys===null&&(Gr.sessionKeys=[]),Gr.sessionKeys.push(Xr)):logger.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${ns}"`);break}case"DEFINE":{{const Xr=new AttrList(ns);substituteVariablesInAttributes(Gr,Xr,["NAME","VALUE","QUERYPARAM"]),addVariableDefinition(Gr,Xr,Ur)}break}case"CONTENT-STEERING":{const Xr=new AttrList(ns);substituteVariablesInAttributes(Gr,Xr,["SERVER-URI","PATHWAY-ID"]),Gr.contentSteering={uri:M3U8Parser.resolve(Xr["SERVER-URI"],Ur),pathwayId:Xr["PATHWAY-ID"]||"."};break}case"START":{Gr.startTimeOffset=parseStartTimeOffset(ns);break}}}const ts=Wr.length>0&&Wr.length<Gr.levels.length;return Gr.levels=ts?Wr:Gr.levels,Gr.levels.length===0&&(Gr.playlistParsingError=new Error("no levels found in manifest")),Gr}static parseMasterPlaylistMedia(_r,Ur,jr){let Gr;const Wr={},Zr=jr.levels,Yr={AUDIO:Zr.map(es=>({id:es.attrs.AUDIO,audioCodec:es.audioCodec})),SUBTITLES:Zr.map(es=>({id:es.attrs.SUBTITLES,textCodec:es.textCodec})),"CLOSED-CAPTIONS":[]};let ts=0;for(MASTER_PLAYLIST_MEDIA_REGEX.lastIndex=0;(Gr=MASTER_PLAYLIST_MEDIA_REGEX.exec(_r))!==null;){const es=new AttrList(Gr[1]),ns=es.TYPE;if(ns){const Xr=Yr[ns],qr=Wr[ns]||[];Wr[ns]=qr,substituteVariablesInAttributes(jr,es,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const _i={attrs:es,bitrate:0,id:ts++,groupId:es["GROUP-ID"]||"",instreamId:es["INSTREAM-ID"],name:es.NAME||es.LANGUAGE||"",type:ns,default:es.bool("DEFAULT"),autoselect:es.bool("AUTOSELECT"),forced:es.bool("FORCED"),lang:es.LANGUAGE,url:es.URI?M3U8Parser.resolve(es.URI,Ur):""};if(Xr!=null&&Xr.length){const rs=M3U8Parser.findGroup(Xr,_i.groupId)||Xr[0];assignCodec(_i,rs,"audioCodec"),assignCodec(_i,rs,"textCodec")}qr.push(_i)}}return Wr}static parseLevelPlaylist(_r,Ur,jr,Gr,Wr,Zr){const Yr=new LevelDetails(Ur),ts=Yr.fragments;let es=null,ns=0,Xr=0,qr=0,_i=0,rs=null,is=new Fragment(Gr,Ur),ss,os,ls,cs=-1,ds=!1;for(LEVEL_PLAYLIST_REGEX_FAST.lastIndex=0,Yr.m3u8=_r,Yr.hasVariableRefs=hasVariableReferences(_r);(ss=LEVEL_PLAYLIST_REGEX_FAST.exec(_r))!==null;){ds&&(ds=!1,is=new Fragment(Gr,Ur),is.start=qr,is.sn=ns,is.cc=_i,is.level=jr,es&&(is.initSegment=es,is.rawProgramDateTime=es.rawProgramDateTime,es.rawProgramDateTime=null));const ys=ss[1];if(ys){is.duration=parseFloat(ys);const ws=(" "+ss[2]).slice(1);is.title=ws||null,is.tagList.push(ws?["INF",ys,ws]:["INF",ys])}else if(ss[3]){if(isFiniteNumber(is.duration)){is.start=qr,ls&&setFragLevelKeys(is,ls,Yr),is.sn=ns,is.level=jr,is.cc=_i,is.urlId=Wr,ts.push(is);const ws=(" "+ss[3]).slice(1);is.relurl=substituteVariables(Yr,ws),assignProgramDateTime(is,rs),rs=is,qr+=is.duration,ns++,Xr=0,ds=!0}}else if(ss[4]){const ws=(" "+ss[4]).slice(1);rs?is.setByteRange(ws,rs):is.setByteRange(ws)}else if(ss[5])is.rawProgramDateTime=(" "+ss[5]).slice(1),is.tagList.push(["PROGRAM-DATE-TIME",is.rawProgramDateTime]),cs===-1&&(cs=ts.length);else{if(ss=ss[0].match(LEVEL_PLAYLIST_REGEX_SLOW),!ss){logger.warn("No matches on slow regex match for level playlist!");continue}for(os=1;os<ss.length&&!(typeof ss[os]<"u");os++);const ws=(" "+ss[os]).slice(1),xs=(" "+ss[os+1]).slice(1),Es=ss[os+2]?(" "+ss[os+2]).slice(1):"";switch(ws){case"PLAYLIST-TYPE":Yr.type=xs.toUpperCase();break;case"MEDIA-SEQUENCE":ns=Yr.startSN=parseInt(xs);break;case"SKIP":{const Rs=new AttrList(xs);substituteVariablesInAttributes(Yr,Rs,["RECENTLY-REMOVED-DATERANGES"]);const _s=Rs.decimalInteger("SKIPPED-SEGMENTS");if(isFiniteNumber(_s)){Yr.skippedSegments=_s;for(let vs=_s;vs--;)ts.unshift(null);ns+=_s}const Bs=Rs.enumeratedString("RECENTLY-REMOVED-DATERANGES");Bs&&(Yr.recentlyRemovedDateranges=Bs.split("	"));break}case"TARGETDURATION":Yr.targetduration=Math.max(parseInt(xs),1);break;case"VERSION":Yr.version=parseInt(xs);break;case"EXTM3U":break;case"ENDLIST":Yr.live=!1;break;case"#":(xs||Es)&&is.tagList.push(Es?[xs,Es]:[xs]);break;case"DISCONTINUITY":_i++,is.tagList.push(["DIS"]);break;case"GAP":is.gap=!0,is.tagList.push([ws]);break;case"BITRATE":is.tagList.push([ws,xs]);break;case"DATERANGE":{const Rs=new AttrList(xs);substituteVariablesInAttributes(Yr,Rs,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),substituteVariablesInAttributes(Yr,Rs,Rs.clientAttrs);const _s=new DateRange(Rs,Yr.dateRanges[Rs.ID]);_s.isValid||Yr.skippedSegments?Yr.dateRanges[_s.id]=_s:logger.warn(`Ignoring invalid DATERANGE tag: "${xs}"`),is.tagList.push(["EXT-X-DATERANGE",xs]);break}case"DEFINE":{{const Rs=new AttrList(xs);substituteVariablesInAttributes(Yr,Rs,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in Rs?importVariableDefinition(Yr,Rs,Zr):addVariableDefinition(Yr,Rs,Ur)}break}case"DISCONTINUITY-SEQUENCE":_i=parseInt(xs);break;case"KEY":{const Rs=parseKey(xs,Ur,Yr);if(Rs.isSupported()){if(Rs.method==="NONE"){ls=void 0;break}ls||(ls={}),ls[Rs.keyFormat]&&(ls=_extends({},ls)),ls[Rs.keyFormat]=Rs}else logger.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${xs}"`);break}case"START":Yr.startTimeOffset=parseStartTimeOffset(xs);break;case"MAP":{const Rs=new AttrList(xs);if(substituteVariablesInAttributes(Yr,Rs,["BYTERANGE","URI"]),is.duration){const _s=new Fragment(Gr,Ur);setInitSegment(_s,Rs,jr,ls),es=_s,is.initSegment=es,es.rawProgramDateTime&&!is.rawProgramDateTime&&(is.rawProgramDateTime=es.rawProgramDateTime)}else setInitSegment(is,Rs,jr,ls),es=is,ds=!0;break}case"SERVER-CONTROL":{const Rs=new AttrList(xs);Yr.canBlockReload=Rs.bool("CAN-BLOCK-RELOAD"),Yr.canSkipUntil=Rs.optionalFloat("CAN-SKIP-UNTIL",0),Yr.canSkipDateRanges=Yr.canSkipUntil>0&&Rs.bool("CAN-SKIP-DATERANGES"),Yr.partHoldBack=Rs.optionalFloat("PART-HOLD-BACK",0),Yr.holdBack=Rs.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const Rs=new AttrList(xs);Yr.partTarget=Rs.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Rs=Yr.partList;Rs||(Rs=Yr.partList=[]);const _s=Xr>0?Rs[Rs.length-1]:void 0,Bs=Xr++,vs=new AttrList(xs);substituteVariablesInAttributes(Yr,vs,["BYTERANGE","URI"]);const Cs=new Part(vs,is,Ur,Bs,_s);Rs.push(Cs),is.duration+=Cs.duration;break}case"PRELOAD-HINT":{const Rs=new AttrList(xs);substituteVariablesInAttributes(Yr,Rs,["URI"]),Yr.preloadHint=Rs;break}case"RENDITION-REPORT":{const Rs=new AttrList(xs);substituteVariablesInAttributes(Yr,Rs,["URI"]),Yr.renditionReports=Yr.renditionReports||[],Yr.renditionReports.push(Rs);break}default:logger.warn(`line parsed but not handled: ${ss}`);break}}}rs&&!rs.relurl?(ts.pop(),qr-=rs.duration,Yr.partList&&(Yr.fragmentHint=rs)):Yr.partList&&(assignProgramDateTime(is,rs),is.cc=_i,Yr.fragmentHint=is,ls&&setFragLevelKeys(is,ls,Yr));const fs=ts.length,ms=ts[0],ps=ts[fs-1];if(qr+=Yr.skippedSegments*Yr.targetduration,qr>0&&fs&&ps){Yr.averagetargetduration=qr/fs;const ys=ps.sn;Yr.endSN=ys!=="initSegment"?ys:0,Yr.live||(ps.endList=!0),ms&&(Yr.startCC=ms.cc)}else Yr.endSN=0,Yr.startCC=0;return Yr.fragmentHint&&(qr+=Yr.fragmentHint.duration),Yr.totalduration=qr,Yr.endCC=_i,cs>0&&backfillProgramDateTimes(ts,cs),Yr}}function parseKey(Nr,_r,Ur){var jr,Gr;const Wr=new AttrList(Nr);substituteVariablesInAttributes(Ur,Wr,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const Zr=(jr=Wr.METHOD)!=null?jr:"",Yr=Wr.URI,ts=Wr.hexadecimalInteger("IV"),es=Wr.KEYFORMATVERSIONS,ns=(Gr=Wr.KEYFORMAT)!=null?Gr:"identity";Yr&&Wr.IV&&!ts&&logger.error(`Invalid IV: ${Wr.IV}`);const Xr=Yr?M3U8Parser.resolve(Yr,_r):"",qr=(es||"1").split("/").map(Number).filter(Number.isFinite);return new LevelKey(Zr,Xr,ns,qr,ts)}function parseStartTimeOffset(Nr){const Ur=new AttrList(Nr).decimalFloatingPoint("TIME-OFFSET");return isFiniteNumber(Ur)?Ur:null}function setCodecs(Nr,_r){["video","audio","text"].forEach(Ur=>{const jr=Nr.filter(Gr=>isCodecType(Gr,Ur));if(jr.length){const Gr=jr.filter(Wr=>Wr.lastIndexOf("avc1",0)===0||Wr.lastIndexOf("mp4a",0)===0);_r[`${Ur}Codec`]=Gr.length>0?Gr[0]:jr[0],Nr=Nr.filter(Wr=>jr.indexOf(Wr)===-1)}}),_r.unknownCodecs=Nr}function assignCodec(Nr,_r,Ur){const jr=_r[Ur];jr&&(Nr[Ur]=jr)}function backfillProgramDateTimes(Nr,_r){let Ur=Nr[_r];for(let jr=_r;jr--;){const Gr=Nr[jr];if(!Gr)return;Gr.programDateTime=Ur.programDateTime-Gr.duration*1e3,Ur=Gr}}function assignProgramDateTime(Nr,_r){Nr.rawProgramDateTime?Nr.programDateTime=Date.parse(Nr.rawProgramDateTime):_r!=null&&_r.programDateTime&&(Nr.programDateTime=_r.endProgramDateTime),isFiniteNumber(Nr.programDateTime)||(Nr.programDateTime=null,Nr.rawProgramDateTime=null)}function setInitSegment(Nr,_r,Ur,jr){Nr.relurl=_r.URI,_r.BYTERANGE&&Nr.setByteRange(_r.BYTERANGE),Nr.level=Ur,Nr.sn="initSegment",jr&&(Nr.levelkeys=jr),Nr.initSegment=null}function setFragLevelKeys(Nr,_r,Ur){Nr.levelkeys=_r;const{encryptedFragments:jr}=Ur;(!jr.length||jr[jr.length-1].levelkeys!==_r)&&Object.keys(_r).some(Gr=>_r[Gr].isCommonEncryption)&&jr.push(Nr)}var PlaylistContextType={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},PlaylistLevelType={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function mapContextToLevelType(Nr){const{type:_r}=Nr;switch(_r){case PlaylistContextType.AUDIO_TRACK:return PlaylistLevelType.AUDIO;case PlaylistContextType.SUBTITLE_TRACK:return PlaylistLevelType.SUBTITLE;default:return PlaylistLevelType.MAIN}}function getResponseUrl(Nr,_r){let Ur=Nr.url;return(Ur===void 0||Ur.indexOf("data:")===0)&&(Ur=_r.url),Ur}class PlaylistLoader{constructor(_r){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=_r,this.registerListeners()}startLoad(_r){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:_r}=this;_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.LEVEL_LOADING,this.onLevelLoading,this),_r.on(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),_r.on(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:_r}=this;_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.LEVEL_LOADING,this.onLevelLoading,this),_r.off(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),_r.off(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(_r){const Ur=this.hls.config,jr=Ur.pLoader,Gr=Ur.loader,Wr=jr||Gr,Zr=new Wr(Ur);return this.loaders[_r.type]=Zr,Zr}getInternalLoader(_r){return this.loaders[_r.type]}resetInternalLoader(_r){this.loaders[_r]&&delete this.loaders[_r]}destroyInternalLoaders(){for(const _r in this.loaders){const Ur=this.loaders[_r];Ur&&Ur.destroy(),this.resetInternalLoader(_r)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(_r,Ur){const{url:jr}=Ur;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:PlaylistContextType.MANIFEST,url:jr,deliveryDirectives:null})}onLevelLoading(_r,Ur){const{id:jr,level:Gr,url:Wr,deliveryDirectives:Zr}=Ur;this.load({id:jr,level:Gr,responseType:"text",type:PlaylistContextType.LEVEL,url:Wr,deliveryDirectives:Zr})}onAudioTrackLoading(_r,Ur){const{id:jr,groupId:Gr,url:Wr,deliveryDirectives:Zr}=Ur;this.load({id:jr,groupId:Gr,level:null,responseType:"text",type:PlaylistContextType.AUDIO_TRACK,url:Wr,deliveryDirectives:Zr})}onSubtitleTrackLoading(_r,Ur){const{id:jr,groupId:Gr,url:Wr,deliveryDirectives:Zr}=Ur;this.load({id:jr,groupId:Gr,level:null,responseType:"text",type:PlaylistContextType.SUBTITLE_TRACK,url:Wr,deliveryDirectives:Zr})}load(_r){var Ur;const jr=this.hls.config;let Gr=this.getInternalLoader(_r);if(Gr){const es=Gr.context;if(es&&es.url===_r.url){logger.trace("[playlist-loader]: playlist request ongoing");return}logger.log(`[playlist-loader]: aborting previous loader for type: ${_r.type}`),Gr.abort()}let Wr;if(_r.type===PlaylistContextType.MANIFEST?Wr=jr.manifestLoadPolicy.default:Wr=_extends({},jr.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),Gr=this.createInternalLoader(_r),(Ur=_r.deliveryDirectives)!=null&&Ur.part){let es;if(_r.type===PlaylistContextType.LEVEL&&_r.level!==null?es=this.hls.levels[_r.level].details:_r.type===PlaylistContextType.AUDIO_TRACK&&_r.id!==null?es=this.hls.audioTracks[_r.id].details:_r.type===PlaylistContextType.SUBTITLE_TRACK&&_r.id!==null&&(es=this.hls.subtitleTracks[_r.id].details),es){const ns=es.partTarget,Xr=es.targetduration;if(ns&&Xr){const qr=Math.max(ns*3,Xr*.8)*1e3;Wr=_extends({},Wr,{maxTimeToFirstByteMs:Math.min(qr,Wr.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(qr,Wr.maxTimeToFirstByteMs)})}}}const Zr=Wr.errorRetry||Wr.timeoutRetry||{},Yr={loadPolicy:Wr,timeout:Wr.maxLoadTimeMs,maxRetry:Zr.maxNumRetry||0,retryDelay:Zr.retryDelayMs||0,maxRetryDelay:Zr.maxRetryDelayMs||0},ts={onSuccess:(es,ns,Xr,qr)=>{const _i=this.getInternalLoader(Xr);this.resetInternalLoader(Xr.type);const rs=es.data;if(rs.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(es,Xr,new Error("no EXTM3U delimiter"),qr||null,ns);return}ns.parsing.start=performance.now(),M3U8Parser.isMediaPlaylist(rs)?this.handleTrackOrLevelPlaylist(es,ns,Xr,qr||null,_i):this.handleMasterPlaylist(es,ns,Xr,qr)},onError:(es,ns,Xr,qr)=>{this.handleNetworkError(ns,Xr,!1,es,qr)},onTimeout:(es,ns,Xr)=>{this.handleNetworkError(ns,Xr,!0,void 0,es)}};Gr.load(_r,Yr,ts)}handleMasterPlaylist(_r,Ur,jr,Gr){const Wr=this.hls,Zr=_r.data,Yr=getResponseUrl(_r,jr),ts=M3U8Parser.parseMasterPlaylist(Zr,Yr);if(ts.playlistParsingError){this.handleManifestParsingError(_r,jr,ts.playlistParsingError,Gr,Ur);return}const{contentSteering:es,levels:ns,sessionData:Xr,sessionKeys:qr,startTimeOffset:_i,variableList:rs}=ts;this.variableList=rs;const{AUDIO:is=[],SUBTITLES:ss,"CLOSED-CAPTIONS":os}=M3U8Parser.parseMasterPlaylistMedia(Zr,Yr,ts);is.length&&!is.some(cs=>!cs.url)&&ns[0].audioCodec&&!ns[0].attrs.AUDIO&&(logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),is.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new AttrList({}),bitrate:0,url:""})),Wr.trigger(Events.MANIFEST_LOADED,{levels:ns,audioTracks:is,subtitles:ss,captions:os,contentSteering:es,url:Yr,stats:Ur,networkDetails:Gr,sessionData:Xr,sessionKeys:qr,startTimeOffset:_i,variableList:rs})}handleTrackOrLevelPlaylist(_r,Ur,jr,Gr,Wr){const Zr=this.hls,{id:Yr,level:ts,type:es}=jr,ns=getResponseUrl(_r,jr),Xr=isFiniteNumber(Yr)?Yr:0,qr=isFiniteNumber(ts)?ts:Xr,_i=mapContextToLevelType(jr),rs=M3U8Parser.parseLevelPlaylist(_r.data,ns,qr,_i,Xr,this.variableList);if(es===PlaylistContextType.MANIFEST){const is={attrs:new AttrList({}),bitrate:0,details:rs,name:"",url:ns};Zr.trigger(Events.MANIFEST_LOADED,{levels:[is],audioTracks:[],url:ns,stats:Ur,networkDetails:Gr,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}Ur.parsing.end=performance.now(),jr.levelDetails=rs,this.handlePlaylistLoaded(rs,_r,Ur,jr,Gr,Wr)}handleManifestParsingError(_r,Ur,jr,Gr,Wr){this.hls.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.MANIFEST_PARSING_ERROR,fatal:Ur.type===PlaylistContextType.MANIFEST,url:_r.url,err:jr,error:jr,reason:jr.message,response:_r,context:Ur,networkDetails:Gr,stats:Wr})}handleNetworkError(_r,Ur,jr=!1,Gr,Wr){let Zr=`A network ${jr?"timeout":"error"+(Gr?" (status "+Gr.code+")":"")} occurred while loading ${_r.type}`;_r.type===PlaylistContextType.LEVEL?Zr+=`: ${_r.level} id: ${_r.id}`:(_r.type===PlaylistContextType.AUDIO_TRACK||_r.type===PlaylistContextType.SUBTITLE_TRACK)&&(Zr+=` id: ${_r.id} group-id: "${_r.groupId}"`);const Yr=new Error(Zr);logger.warn(`[playlist-loader]: ${Zr}`);let ts=ErrorDetails.UNKNOWN,es=!1;const ns=this.getInternalLoader(_r);switch(_r.type){case PlaylistContextType.MANIFEST:ts=jr?ErrorDetails.MANIFEST_LOAD_TIMEOUT:ErrorDetails.MANIFEST_LOAD_ERROR,es=!0;break;case PlaylistContextType.LEVEL:ts=jr?ErrorDetails.LEVEL_LOAD_TIMEOUT:ErrorDetails.LEVEL_LOAD_ERROR,es=!1;break;case PlaylistContextType.AUDIO_TRACK:ts=jr?ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,es=!1;break;case PlaylistContextType.SUBTITLE_TRACK:ts=jr?ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:ErrorDetails.SUBTITLE_LOAD_ERROR,es=!1;break}ns&&this.resetInternalLoader(_r.type);const Xr={type:ErrorTypes.NETWORK_ERROR,details:ts,fatal:es,url:_r.url,loader:ns,context:_r,error:Yr,networkDetails:Ur,stats:Wr};if(Gr){const qr=(Ur==null?void 0:Ur.url)||_r.url;Xr.response=_objectSpread2({url:qr,data:void 0},Gr)}this.hls.trigger(Events.ERROR,Xr)}handlePlaylistLoaded(_r,Ur,jr,Gr,Wr,Zr){const Yr=this.hls,{type:ts,level:es,id:ns,groupId:Xr,deliveryDirectives:qr}=Gr,_i=getResponseUrl(Ur,Gr),rs=mapContextToLevelType(Gr),is=typeof Gr.level=="number"&&rs===PlaylistLevelType.MAIN?es:void 0;if(!_r.fragments.length){const os=new Error("No Segments found in Playlist");Yr.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:_i,error:os,reason:os.message,response:Ur,context:Gr,level:is,parent:rs,networkDetails:Wr,stats:jr});return}_r.targetduration||(_r.playlistParsingError=new Error("Missing Target Duration"));const ss=_r.playlistParsingError;if(ss){Yr.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_PARSING_ERROR,fatal:!1,url:_i,error:ss,reason:ss.message,response:Ur,context:Gr,level:is,parent:rs,networkDetails:Wr,stats:jr});return}switch(_r.live&&Zr&&(Zr.getCacheAge&&(_r.ageHeader=Zr.getCacheAge()||0),(!Zr.getCacheAge||isNaN(_r.ageHeader))&&(_r.ageHeader=0)),ts){case PlaylistContextType.MANIFEST:case PlaylistContextType.LEVEL:Yr.trigger(Events.LEVEL_LOADED,{details:_r,level:is||0,id:ns||0,stats:jr,networkDetails:Wr,deliveryDirectives:qr});break;case PlaylistContextType.AUDIO_TRACK:Yr.trigger(Events.AUDIO_TRACK_LOADED,{details:_r,id:ns||0,groupId:Xr||"",stats:jr,networkDetails:Wr,deliveryDirectives:qr});break;case PlaylistContextType.SUBTITLE_TRACK:Yr.trigger(Events.SUBTITLE_TRACK_LOADED,{details:_r,id:ns||0,groupId:Xr||"",stats:jr,networkDetails:Wr,deliveryDirectives:qr});break}}}function sendAddTrackEvent(Nr,_r){let Ur;try{Ur=new Event("addtrack")}catch{Ur=document.createEvent("Event"),Ur.initEvent("addtrack",!1,!1)}Ur.track=Nr,_r.dispatchEvent(Ur)}function addCueToTrack(Nr,_r){const Ur=Nr.mode;if(Ur==="disabled"&&(Nr.mode="hidden"),Nr.cues&&!Nr.cues.getCueById(_r.id))try{if(Nr.addCue(_r),!Nr.cues.getCueById(_r.id))throw new Error(`addCue is failed for: ${_r}`)}catch(jr){logger.debug(`[texttrack-utils]: ${jr}`);try{const Gr=new self.TextTrackCue(_r.startTime,_r.endTime,_r.text);Gr.id=_r.id,Nr.addCue(Gr)}catch(Gr){logger.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${Gr}`)}}Ur==="disabled"&&(Nr.mode=Ur)}function clearCurrentCues(Nr){const _r=Nr.mode;if(_r==="disabled"&&(Nr.mode="hidden"),Nr.cues)for(let Ur=Nr.cues.length;Ur--;)Nr.removeCue(Nr.cues[Ur]);_r==="disabled"&&(Nr.mode=_r)}function removeCuesInRange(Nr,_r,Ur,jr){const Gr=Nr.mode;if(Gr==="disabled"&&(Nr.mode="hidden"),Nr.cues&&Nr.cues.length>0){const Wr=getCuesInRange(Nr.cues,_r,Ur);for(let Zr=0;Zr<Wr.length;Zr++)(!jr||jr(Wr[Zr]))&&Nr.removeCue(Wr[Zr])}Gr==="disabled"&&(Nr.mode=Gr)}function getFirstCueIndexAfterTime(Nr,_r){if(_r<Nr[0].startTime)return 0;const Ur=Nr.length-1;if(_r>Nr[Ur].endTime)return-1;let jr=0,Gr=Ur;for(;jr<=Gr;){const Wr=Math.floor((Gr+jr)/2);if(_r<Nr[Wr].startTime)Gr=Wr-1;else if(_r>Nr[Wr].startTime&&jr<Ur)jr=Wr+1;else return Wr}return Nr[jr].startTime-_r<_r-Nr[Gr].startTime?jr:Gr}function getCuesInRange(Nr,_r,Ur){const jr=[],Gr=getFirstCueIndexAfterTime(Nr,_r);if(Gr>-1)for(let Wr=Gr,Zr=Nr.length;Wr<Zr;Wr++){const Yr=Nr[Wr];if(Yr.startTime>=_r&&Yr.endTime<=Ur)jr.push(Yr);else if(Yr.startTime>Ur)return jr}return jr}var MetadataSchema={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const MIN_CUE_DURATION=.25;function getCueClass(){if(!(typeof self>"u"))return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const MAX_CUE_ENDTIME=(()=>{const Nr=getCueClass();try{new Nr(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function dateRangeDateToTimelineSeconds(Nr,_r){return Nr.getTime()/1e3-_r}function hexToArrayBuffer(Nr){return Uint8Array.from(Nr.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class ID3TrackController{constructor(_r){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=_r,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:_r}=this;_r.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),_r.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_r.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:_r}=this;_r.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),_r.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_r.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(_r,Ur){this.media=Ur.media}onMediaDetaching(){this.id3Track&&(clearCurrentCues(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(_r){const Ur=this.getID3Track(_r.textTracks);return Ur.mode="hidden",Ur}getID3Track(_r){if(this.media){for(let Ur=0;Ur<_r.length;Ur++){const jr=_r[Ur];if(jr.kind==="metadata"&&jr.label==="id3")return sendAddTrackEvent(jr,this.media),jr}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(_r,Ur){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:jr,enableID3MetadataCues:Gr}}}=this;if(!jr&&!Gr)return;const{samples:Wr}=Ur;this.id3Track||(this.id3Track=this.createTrack(this.media));const Zr=getCueClass();for(let Yr=0;Yr<Wr.length;Yr++){const ts=Wr[Yr].type;if(ts===MetadataSchema.emsg&&!jr||!Gr)continue;const es=getID3Frames(Wr[Yr].data);if(es){const ns=Wr[Yr].pts;let Xr=ns+Wr[Yr].duration;Xr>MAX_CUE_ENDTIME&&(Xr=MAX_CUE_ENDTIME),Xr-ns<=0&&(Xr=ns+MIN_CUE_DURATION);for(let _i=0;_i<es.length;_i++){const rs=es[_i];if(!isTimeStampFrame(rs)){this.updateId3CueEnds(ns,ts);const is=new Zr(ns,Xr,"");is.value=rs,ts&&(is.type=ts),this.id3Track.addCue(is)}}}}}updateId3CueEnds(_r,Ur){var jr;const Gr=(jr=this.id3Track)==null?void 0:jr.cues;if(Gr)for(let Wr=Gr.length;Wr--;){const Zr=Gr[Wr];Zr.type===Ur&&Zr.startTime<_r&&Zr.endTime===MAX_CUE_ENDTIME&&(Zr.endTime=_r)}}onBufferFlushing(_r,{startOffset:Ur,endOffset:jr,type:Gr}){const{id3Track:Wr,hls:Zr}=this;if(!Zr)return;const{config:{enableEmsgMetadataCues:Yr,enableID3MetadataCues:ts}}=Zr;if(Wr&&(Yr||ts)){let es;Gr==="audio"?es=ns=>ns.type===MetadataSchema.audioId3&&ts:Gr==="video"?es=ns=>ns.type===MetadataSchema.emsg&&Yr:es=ns=>ns.type===MetadataSchema.audioId3&&ts||ns.type===MetadataSchema.emsg&&Yr,removeCuesInRange(Wr,Ur,jr,es)}}onLevelUpdated(_r,{details:Ur}){if(!this.media||!Ur.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:jr,id3Track:Gr}=this,{dateRanges:Wr}=Ur,Zr=Object.keys(Wr);if(Gr){const ns=Object.keys(jr).filter(Xr=>!Zr.includes(Xr));for(let Xr=ns.length;Xr--;){const qr=ns[Xr];Object.keys(jr[qr].cues).forEach(_i=>{Gr.removeCue(jr[qr].cues[_i])}),delete jr[qr]}}const Yr=Ur.fragments[Ur.fragments.length-1];if(Zr.length===0||!isFiniteNumber(Yr==null?void 0:Yr.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const ts=Yr.programDateTime/1e3-Yr.start,es=getCueClass();for(let ns=0;ns<Zr.length;ns++){const Xr=Zr[ns],qr=Wr[Xr],_i=jr[Xr],rs=(_i==null?void 0:_i.cues)||{};let is=(_i==null?void 0:_i.durationKnown)||!1;const ss=dateRangeDateToTimelineSeconds(qr.startDate,ts);let os=MAX_CUE_ENDTIME;const ls=qr.endDate;if(ls)os=dateRangeDateToTimelineSeconds(ls,ts),is=!0;else if(qr.endOnNext&&!is){const ds=Zr.reduce((fs,ms)=>{const ps=Wr[ms];return ps.class===qr.class&&ps.id!==ms&&ps.startDate>qr.startDate&&fs.push(ps),fs},[]).sort((fs,ms)=>fs.startDate.getTime()-ms.startDate.getTime())[0];ds&&(os=dateRangeDateToTimelineSeconds(ds.startDate,ts),is=!0)}const cs=Object.keys(qr.attr);for(let ds=0;ds<cs.length;ds++){const fs=cs[ds];if(!isDateRangeCueAttribute(fs))continue;let ms=rs[fs];if(ms)is&&!_i.durationKnown&&(ms.endTime=os);else{let ps=qr.attr[fs];ms=new es(ss,os,""),isSCTE35Attribute(fs)&&(ps=hexToArrayBuffer(ps)),ms.value={key:fs,data:ps},ms.type=MetadataSchema.dateRange,ms.id=Xr,this.id3Track.addCue(ms),rs[fs]=ms}}jr[Xr]={cues:rs,dateRange:qr,durationKnown:is}}}}class LatencyController{constructor(_r){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=_r,this.config=_r.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:_r,levelDetails:Ur}=this;return _r.liveMaxLatencyDuration!==void 0?_r.liveMaxLatencyDuration:Ur?_r.liveMaxLatencyDurationCount*Ur.targetduration:0}get targetLatency(){const{levelDetails:_r}=this;if(_r===null)return null;const{holdBack:Ur,partHoldBack:jr,targetduration:Gr}=_r,{liveSyncDuration:Wr,liveSyncDurationCount:Zr,lowLatencyMode:Yr}=this.config,ts=this.hls.userConfig;let es=Yr&&jr||Ur;(ts.liveSyncDuration||ts.liveSyncDurationCount||es===0)&&(es=Wr!==void 0?Wr:Zr*Gr);const ns=Gr,Xr=1;return es+Math.min(this.stallCount*Xr,ns)}get liveSyncPosition(){const _r=this.estimateLiveEdge(),Ur=this.targetLatency,jr=this.levelDetails;if(_r===null||Ur===null||jr===null)return null;const Gr=jr.edge,Wr=_r-Ur-this.edgeStalled,Zr=Gr-jr.totalduration,Yr=Gr-(this.config.lowLatencyMode&&jr.partTarget||jr.targetduration);return Math.min(Math.max(Zr,Wr),Yr)}get drift(){const{levelDetails:_r}=this;return _r===null?1:_r.drift}get edgeStalled(){const{levelDetails:_r}=this;if(_r===null)return 0;const Ur=(this.config.lowLatencyMode&&_r.partTarget||_r.targetduration)*3;return Math.max(_r.age-Ur,0)}get forwardBufferLength(){const{media:_r,levelDetails:Ur}=this;if(!_r||!Ur)return 0;const jr=_r.buffered.length;return(jr?_r.buffered.end(jr-1):Ur.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Events.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Events.ERROR,this.onError,this)}onMediaAttached(_r,Ur){this.media=Ur.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(_r,{details:Ur}){this.levelDetails=Ur,Ur.advanced&&this.timeupdate(),!Ur.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(_r,Ur){var jr;Ur.details===ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,(jr=this.levelDetails)!=null&&jr.live&&logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:_r,levelDetails:Ur}=this;if(!_r||!Ur)return;this.currentTime=_r.currentTime;const jr=this.computeLatency();if(jr===null)return;this._latency=jr;const{lowLatencyMode:Gr,maxLiveSyncPlaybackRate:Wr}=this.config;if(!Gr||Wr===1)return;const Zr=this.targetLatency;if(Zr===null)return;const Yr=jr-Zr,ts=Math.min(this.maxLatency,Zr+Ur.targetduration),es=Yr<ts;if(Ur.live&&es&&Yr>.05&&this.forwardBufferLength>1){const ns=Math.min(2,Math.max(1,Wr)),Xr=Math.round(2/(1+Math.exp(-.75*Yr-this.edgeStalled))*20)/20;_r.playbackRate=Math.min(ns,Math.max(1,Xr))}else _r.playbackRate!==1&&_r.playbackRate!==0&&(_r.playbackRate=1)}estimateLiveEdge(){const{levelDetails:_r}=this;return _r===null?null:_r.edge+_r.age}computeLatency(){const _r=this.estimateLiveEdge();return _r===null?null:_r-this.currentTime}}const HdcpLevels=["NONE","TYPE-0","TYPE-1",null];var HlsSkip={No:"",Yes:"YES",v2:"v2"};function getSkipValue(Nr,_r){const{canSkipUntil:Ur,canSkipDateRanges:jr,endSN:Gr}=Nr,Wr=_r!==void 0?_r-Gr:0;return Ur&&Wr<Ur?jr?HlsSkip.v2:HlsSkip.Yes:HlsSkip.No}class HlsUrlParameters{constructor(_r,Ur,jr){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=_r,this.part=Ur,this.skip=jr}addDirectives(_r){const Ur=new self.URL(_r);return this.msn!==void 0&&Ur.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&Ur.searchParams.set("_HLS_part",this.part.toString()),this.skip&&Ur.searchParams.set("_HLS_skip",this.skip),Ur.href}}class Level{constructor(_r){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[_r.url],this._attrs=[_r.attrs],this.bitrate=_r.bitrate,_r.details&&(this.details=_r.details),this.id=_r.id||0,this.name=_r.name,this.width=_r.width||0,this.height=_r.height||0,this.audioCodec=_r.audioCodec,this.videoCodec=_r.videoCodec,this.unknownCodecs=_r.unknownCodecs,this.codecSet=[_r.videoCodec,_r.audioCodec].filter(Ur=>Ur).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(_r){const Ur=_r%this.url.length;this._urlId!==Ur&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=Ur)}get audioGroupId(){var _r;return(_r=this.audioGroupIds)==null?void 0:_r[this.urlId]}get textGroupId(){var _r;return(_r=this.textGroupIds)==null?void 0:_r[this.urlId]}addFallback(_r){this.url.push(_r.url),this._attrs.push(_r.attrs)}}function updateFromToPTS(Nr,_r){const Ur=_r.startPTS;if(isFiniteNumber(Ur)){let jr=0,Gr;_r.sn>Nr.sn?(jr=Ur-Nr.start,Gr=Nr):(jr=Nr.start-Ur,Gr=_r),Gr.duration!==jr&&(Gr.duration=jr)}else _r.sn>Nr.sn?Nr.cc===_r.cc&&Nr.minEndPTS?_r.start=Nr.start+(Nr.minEndPTS-Nr.start):_r.start=Nr.start+Nr.duration:_r.start=Math.max(Nr.start-_r.duration,0)}function updateFragPTSDTS(Nr,_r,Ur,jr,Gr,Wr){jr-Ur<=0&&(logger.warn("Fragment should have a positive duration",_r),jr=Ur+_r.duration,Wr=Gr+_r.duration);let Yr=Ur,ts=jr;const es=_r.startPTS,ns=_r.endPTS;if(isFiniteNumber(es)){const ss=Math.abs(es-Ur);isFiniteNumber(_r.deltaPTS)?_r.deltaPTS=Math.max(ss,_r.deltaPTS):_r.deltaPTS=ss,Yr=Math.max(Ur,es),Ur=Math.min(Ur,es),Gr=Math.min(Gr,_r.startDTS),ts=Math.min(jr,ns),jr=Math.max(jr,ns),Wr=Math.max(Wr,_r.endDTS)}const Xr=Ur-_r.start;_r.start!==0&&(_r.start=Ur),_r.duration=jr-_r.start,_r.startPTS=Ur,_r.maxStartPTS=Yr,_r.startDTS=Gr,_r.endPTS=jr,_r.minEndPTS=ts,_r.endDTS=Wr;const qr=_r.sn;if(!Nr||qr<Nr.startSN||qr>Nr.endSN)return 0;let _i;const rs=qr-Nr.startSN,is=Nr.fragments;for(is[rs]=_r,_i=rs;_i>0;_i--)updateFromToPTS(is[_i],is[_i-1]);for(_i=rs;_i<is.length-1;_i++)updateFromToPTS(is[_i],is[_i+1]);return Nr.fragmentHint&&updateFromToPTS(is[is.length-1],Nr.fragmentHint),Nr.PTSKnown=Nr.alignedSliding=!0,Xr}function mergeDetails(Nr,_r){let Ur=null;const jr=Nr.fragments;for(let ts=jr.length-1;ts>=0;ts--){const es=jr[ts].initSegment;if(es){Ur=es;break}}Nr.fragmentHint&&delete Nr.fragmentHint.endPTS;let Gr=0,Wr;if(mapFragmentIntersection(Nr,_r,(ts,es)=>{ts.relurl&&(Gr=ts.cc-es.cc),isFiniteNumber(ts.startPTS)&&isFiniteNumber(ts.endPTS)&&(es.start=es.startPTS=ts.startPTS,es.startDTS=ts.startDTS,es.maxStartPTS=ts.maxStartPTS,es.endPTS=ts.endPTS,es.endDTS=ts.endDTS,es.minEndPTS=ts.minEndPTS,es.duration=ts.endPTS-ts.startPTS,es.duration&&(Wr=es),_r.PTSKnown=_r.alignedSliding=!0),es.elementaryStreams=ts.elementaryStreams,es.loader=ts.loader,es.stats=ts.stats,es.urlId=ts.urlId,ts.initSegment&&(es.initSegment=ts.initSegment,Ur=ts.initSegment)}),Ur&&(_r.fragmentHint?_r.fragments.concat(_r.fragmentHint):_r.fragments).forEach(es=>{var ns;(!es.initSegment||es.initSegment.relurl===((ns=Ur)==null?void 0:ns.relurl))&&(es.initSegment=Ur)}),_r.skippedSegments)if(_r.deltaUpdateFailed=_r.fragments.some(ts=>!ts),_r.deltaUpdateFailed){logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let ts=_r.skippedSegments;ts--;)_r.fragments.shift();_r.startSN=_r.fragments[0].sn,_r.startCC=_r.fragments[0].cc}else _r.canSkipDateRanges&&(_r.dateRanges=mergeDateRanges(Nr.dateRanges,_r.dateRanges,_r.recentlyRemovedDateranges));const Zr=_r.fragments;if(Gr){logger.warn("discontinuity sliding from playlist, take drift into account");for(let ts=0;ts<Zr.length;ts++)Zr[ts].cc+=Gr}_r.skippedSegments&&(_r.startCC=_r.fragments[0].cc),mapPartIntersection(Nr.partList,_r.partList,(ts,es)=>{es.elementaryStreams=ts.elementaryStreams,es.stats=ts.stats}),Wr?updateFragPTSDTS(_r,Wr,Wr.startPTS,Wr.endPTS,Wr.startDTS,Wr.endDTS):adjustSliding(Nr,_r),Zr.length&&(_r.totalduration=_r.edge-Zr[0].start),_r.driftStartTime=Nr.driftStartTime,_r.driftStart=Nr.driftStart;const Yr=_r.advancedDateTime;if(_r.advanced&&Yr){const ts=_r.edge;_r.driftStart||(_r.driftStartTime=Yr,_r.driftStart=ts),_r.driftEndTime=Yr,_r.driftEnd=ts}else _r.driftEndTime=Nr.driftEndTime,_r.driftEnd=Nr.driftEnd,_r.advancedDateTime=Nr.advancedDateTime}function mergeDateRanges(Nr,_r,Ur){const jr=_extends({},Nr);return Ur&&Ur.forEach(Gr=>{delete jr[Gr]}),Object.keys(_r).forEach(Gr=>{const Wr=new DateRange(_r[Gr].attr,jr[Gr]);Wr.isValid?jr[Gr]=Wr:logger.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(_r[Gr].attr)}"`)}),jr}function mapPartIntersection(Nr,_r,Ur){if(Nr&&_r){let jr=0;for(let Gr=0,Wr=Nr.length;Gr<=Wr;Gr++){const Zr=Nr[Gr],Yr=_r[Gr+jr];Zr&&Yr&&Zr.index===Yr.index&&Zr.fragment.sn===Yr.fragment.sn?Ur(Zr,Yr):jr--}}}function mapFragmentIntersection(Nr,_r,Ur){const jr=_r.skippedSegments,Gr=Math.max(Nr.startSN,_r.startSN)-_r.startSN,Wr=(Nr.fragmentHint?1:0)+(jr?_r.endSN:Math.min(Nr.endSN,_r.endSN))-_r.startSN,Zr=_r.startSN-Nr.startSN,Yr=_r.fragmentHint?_r.fragments.concat(_r.fragmentHint):_r.fragments,ts=Nr.fragmentHint?Nr.fragments.concat(Nr.fragmentHint):Nr.fragments;for(let es=Gr;es<=Wr;es++){const ns=ts[Zr+es];let Xr=Yr[es];jr&&!Xr&&es<jr&&(Xr=_r.fragments[es]=ns),ns&&Xr&&Ur(ns,Xr)}}function adjustSliding(Nr,_r){const Ur=_r.startSN+_r.skippedSegments-Nr.startSN,jr=Nr.fragments;Ur<0||Ur>=jr.length||addSliding(_r,jr[Ur].start)}function addSliding(Nr,_r){if(_r){const Ur=Nr.fragments;for(let jr=Nr.skippedSegments;jr<Ur.length;jr++)Ur[jr].start+=_r;Nr.fragmentHint&&(Nr.fragmentHint.start+=_r)}}function computeReloadInterval(Nr,_r=1/0){let Ur=1e3*Nr.targetduration;if(Nr.updated){const jr=Nr.fragments,Gr=4;if(jr.length&&Ur*Gr>_r){const Wr=jr[jr.length-1].duration*1e3;Wr<Ur&&(Ur=Wr)}}else Ur/=2;return Math.round(Ur)}function getFragmentWithSN(Nr,_r,Ur){if(!(Nr!=null&&Nr.details))return null;const jr=Nr.details;let Gr=jr.fragments[_r-jr.startSN];return Gr||(Gr=jr.fragmentHint,Gr&&Gr.sn===_r)?Gr:_r<jr.startSN&&Ur&&Ur.sn===_r?Ur:null}function getPartWith(Nr,_r,Ur){var jr;return Nr!=null&&Nr.details?findPart((jr=Nr.details)==null?void 0:jr.partList,_r,Ur):null}function findPart(Nr,_r,Ur){if(Nr)for(let jr=Nr.length;jr--;){const Gr=Nr[jr];if(Gr.index===Ur&&Gr.fragment.sn===_r)return Gr}return null}function isTimeoutError(Nr){switch(Nr.details){case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_TIMEOUT:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function getRetryConfig(Nr,_r){const Ur=isTimeoutError(_r);return Nr.default[`${Ur?"timeout":"error"}Retry`]}function getRetryDelay(Nr,_r){const Ur=Nr.backoff==="linear"?1:Math.pow(2,_r);return Math.min(Ur*Nr.retryDelayMs,Nr.maxRetryDelayMs)}function getLoaderConfigWithoutReties(Nr){return _objectSpread2(_objectSpread2({},Nr),{errorRetry:null,timeoutRetry:null})}function shouldRetry(Nr,_r,Ur,jr){return!!Nr&&_r<Nr.maxNumRetry&&(retryForHttpStatus(jr)||!!Ur)}function retryForHttpStatus(Nr){return Nr===0&&navigator.onLine===!1||!!Nr&&(Nr<400||Nr>499)}const BinarySearch={search:function(Nr,_r){let Ur=0,jr=Nr.length-1,Gr=null,Wr=null;for(;Ur<=jr;){Gr=(Ur+jr)/2|0,Wr=Nr[Gr];const Zr=_r(Wr);if(Zr>0)Ur=Gr+1;else if(Zr<0)jr=Gr-1;else return Wr}return null}};function findFragmentByPDT(Nr,_r,Ur){if(_r===null||!Array.isArray(Nr)||!Nr.length||!isFiniteNumber(_r))return null;const jr=Nr[0].programDateTime;if(_r<(jr||0))return null;const Gr=Nr[Nr.length-1].endProgramDateTime;if(_r>=(Gr||0))return null;Ur=Ur||0;for(let Wr=0;Wr<Nr.length;++Wr){const Zr=Nr[Wr];if(pdtWithinToleranceTest(_r,Ur,Zr))return Zr}return null}function findFragmentByPTS(Nr,_r,Ur=0,jr=0){let Gr=null;if(Nr?Gr=_r[Nr.sn-_r[0].sn+1]||null:Ur===0&&_r[0].start===0&&(Gr=_r[0]),Gr&&fragmentWithinToleranceTest(Ur,jr,Gr)===0)return Gr;const Wr=BinarySearch.search(_r,fragmentWithinToleranceTest.bind(null,Ur,jr));return Wr&&(Wr!==Nr||!Gr)?Wr:Gr}function fragmentWithinToleranceTest(Nr=0,_r=0,Ur){if(Ur.start<=Nr&&Ur.start+Ur.duration>Nr)return 0;const jr=Math.min(_r,Ur.duration+(Ur.deltaPTS?Ur.deltaPTS:0));return Ur.start+Ur.duration-jr<=Nr?1:Ur.start-jr>Nr&&Ur.start?-1:0}function pdtWithinToleranceTest(Nr,_r,Ur){const jr=Math.min(_r,Ur.duration+(Ur.deltaPTS?Ur.deltaPTS:0))*1e3;return(Ur.endProgramDateTime||0)-jr>Nr}function findFragWithCC(Nr,_r){return BinarySearch.search(Nr,Ur=>Ur.cc<_r?1:Ur.cc>_r?-1:0)}const RENDITION_PENALTY_DURATION_MS=3e5;var NetworkErrorAction={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ErrorActionFlags={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ErrorController{constructor(_r){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=_r,this.log=logger.log.bind(logger,"[info]:"),this.warn=logger.warn.bind(logger,"[warning]:"),this.error=logger.error.bind(logger,"[error]:"),this.registerListeners()}registerListeners(){const _r=this.hls;_r.on(Events.ERROR,this.onError,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const _r=this.hls;_r&&(_r.off(Events.ERROR,this.onError,this),_r.off(Events.ERROR,this.onErrorOut,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(_r){this.playlistError=0}stopLoad(){}getVariantLevelIndex(_r){return(_r==null?void 0:_r.type)===PlaylistLevelType.MAIN?_r.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(_r,Ur){var jr,Gr;if(Ur.fatal)return;const Wr=this.hls,Zr=Ur.context;switch(Ur.details){case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:Ur.errorAction=this.getFragRetryOrSwitchAction(Ur);return;case ErrorDetails.FRAG_PARSING_ERROR:if((jr=Ur.frag)!=null&&jr.gap){Ur.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_DECRYPT_ERROR:{Ur.errorAction=this.getFragRetryOrSwitchAction(Ur),Ur.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox;return}case ErrorDetails.LEVEL_EMPTY_ERROR:case ErrorDetails.LEVEL_PARSING_ERROR:{var Yr,ts;const es=Ur.parent===PlaylistLevelType.MAIN?Ur.level:Wr.loadLevel;Ur.details===ErrorDetails.LEVEL_EMPTY_ERROR&&((Yr=Ur.context)!=null&&(ts=Yr.levelDetails)!=null&&ts.live)?Ur.errorAction=this.getPlaylistRetryOrSwitchAction(Ur,es):(Ur.levelRetry=!1,Ur.errorAction=this.getLevelSwitchAction(Ur,es))}return;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:typeof(Zr==null?void 0:Zr.level)=="number"&&(Ur.errorAction=this.getPlaylistRetryOrSwitchAction(Ur,Zr.level));return;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.SUBTITLE_LOAD_ERROR:case ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:if(Zr){const es=Wr.levels[Wr.loadLevel];if(es&&(Zr.type===PlaylistContextType.AUDIO_TRACK&&Zr.groupId===es.audioGroupId||Zr.type===PlaylistContextType.SUBTITLE_TRACK&&Zr.groupId===es.textGroupId)){Ur.errorAction=this.getPlaylistRetryOrSwitchAction(Ur,Wr.loadLevel),Ur.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox,Ur.errorAction.flags=ErrorActionFlags.MoveAllAlternatesMatchingHost;return}}return;case ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const es=Wr.levels[Wr.loadLevel],ns=es==null?void 0:es.attrs["HDCP-LEVEL"];ns&&(Ur.errorAction={action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHDCP,hdcpLevel:ns})}return;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.REMUX_ALLOC_ERROR:Ur.errorAction=this.getLevelSwitchAction(Ur,(Gr=Ur.level)!=null?Gr:Wr.loadLevel);return;case ErrorDetails.INTERNAL_EXCEPTION:case ErrorDetails.BUFFER_APPENDING_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:case ErrorDetails.LEVEL_SWITCH_ERROR:case ErrorDetails.BUFFER_STALLED_ERROR:case ErrorDetails.BUFFER_SEEK_OVER_HOLE:case ErrorDetails.BUFFER_NUDGE_ON_STALL:Ur.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}if(Ur.type===ErrorTypes.KEY_SYSTEM_ERROR){const es=this.getVariantLevelIndex(Ur.frag);Ur.levelRetry=!1,Ur.errorAction=this.getLevelSwitchAction(Ur,es);return}}getPlaylistRetryOrSwitchAction(_r,Ur){var jr;const Gr=this.hls,Wr=getRetryConfig(Gr.config.playlistLoadPolicy,_r),Zr=this.playlistError++,Yr=(jr=_r.response)==null?void 0:jr.code;if(shouldRetry(Wr,Zr,isTimeoutError(_r),Yr))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:Wr,retryCount:Zr};const es=this.getLevelSwitchAction(_r,Ur);return Wr&&(es.retryConfig=Wr,es.retryCount=Zr),es}getFragRetryOrSwitchAction(_r){const Ur=this.hls,jr=this.getVariantLevelIndex(_r.frag),Gr=Ur.levels[jr],{fragLoadPolicy:Wr,keyLoadPolicy:Zr}=Ur.config,Yr=getRetryConfig(_r.details.startsWith("key")?Zr:Wr,_r),ts=Ur.levels.reduce((Xr,qr)=>Xr+qr.fragmentError,0);if(Gr){var es;_r.details!==ErrorDetails.FRAG_GAP&&Gr.fragmentError++;const Xr=(es=_r.response)==null?void 0:es.code;if(shouldRetry(Yr,ts,isTimeoutError(_r),Xr))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:Yr,retryCount:ts}}const ns=this.getLevelSwitchAction(_r,jr);return Yr&&(ns.retryConfig=Yr,ns.retryCount=ts),ns}getLevelSwitchAction(_r,Ur){const jr=this.hls;Ur==null&&(Ur=jr.loadLevel);const Gr=this.hls.levels[Ur];if(Gr&&(Gr.loadError++,jr.autoLevelEnabled)){var Wr,Zr;let Yr=-1;const{levels:ts,loadLevel:es,minAutoLevel:ns,maxAutoLevel:Xr}=jr,qr=(Wr=_r.frag)==null?void 0:Wr.type,{type:_i,groupId:rs}=(Zr=_r.context)!=null?Zr:{};for(let is=ts.length;is--;){const ss=(is+es)%ts.length;if(ss!==es&&ss>=ns&&ss<=Xr&&ts[ss].loadError===0){const os=ts[ss];if(_r.details===ErrorDetails.FRAG_GAP&&_r.frag){const ls=ts[ss].details;if(ls){const cs=findFragmentByPTS(_r.frag,ls.fragments,_r.frag.start);if(cs!=null&&cs.gap)continue}}else{if(_i===PlaylistContextType.AUDIO_TRACK&&rs===os.audioGroupId||_i===PlaylistContextType.SUBTITLE_TRACK&&rs===os.textGroupId)continue;if(qr===PlaylistLevelType.AUDIO&&Gr.audioGroupId===os.audioGroupId||qr===PlaylistLevelType.SUBTITLE&&Gr.textGroupId===os.textGroupId)continue}Yr=ss;break}}if(Yr>-1&&jr.loadLevel!==Yr)return _r.levelRetry=!0,this.playlistError=0,{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.None,nextAutoLevel:Yr}}return{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHost}}onErrorOut(_r,Ur){var jr;switch((jr=Ur.errorAction)==null?void 0:jr.action){case NetworkErrorAction.DoNothing:break;case NetworkErrorAction.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(Ur),!Ur.errorAction.resolved&&Ur.details!==ErrorDetails.FRAG_GAP&&(Ur.fatal=!0);break}if(Ur.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(_r){const Ur=this.hls,jr=_r.errorAction;if(!jr)return;const{flags:Gr,hdcpLevel:Wr,nextAutoLevel:Zr}=jr;switch(Gr){case ErrorActionFlags.None:this.switchLevel(_r,Zr);break;case ErrorActionFlags.MoveAllAlternatesMatchingHost:jr.resolved||(jr.resolved=this.redundantFailover(_r));break;case ErrorActionFlags.MoveAllAlternatesMatchingHDCP:Wr&&(Ur.maxHdcpLevel=HdcpLevels[HdcpLevels.indexOf(Wr)-1],jr.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${Ur.maxHdcpLevel}" or lower`);break}jr.resolved||this.switchLevel(_r,Zr)}switchLevel(_r,Ur){Ur!==void 0&&_r.errorAction&&(this.warn(`switching to level ${Ur} after ${_r.details}`),this.hls.nextAutoLevel=Ur,_r.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(_r){const{hls:Ur,penalizedRenditions:jr}=this,Gr=_r.parent===PlaylistLevelType.MAIN?_r.level:Ur.loadLevel,Wr=Ur.levels[Gr],Zr=Wr.url.length,Yr=_r.frag?_r.frag.urlId:Wr.urlId;Wr.urlId===Yr&&(!_r.frag||Wr.details)&&this.penalizeRendition(Wr,_r);for(let ts=1;ts<Zr;ts++){const es=(Yr+ts)%Zr,ns=jr[es];if(!ns||checkExpired(ns,_r,jr[Yr]))return this.warn(`Switching to Redundant Stream ${es+1}/${Zr}: "${Wr.url[es]}" after ${_r.details}`),this.playlistError=0,Ur.levels.forEach(Xr=>{Xr.urlId=es}),Ur.nextLoadLevel=Gr,!0}return!1}penalizeRendition(_r,Ur){const{penalizedRenditions:jr}=this,Gr=jr[_r.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};Gr.lastErrorPerfMs=performance.now(),Gr.errors.push(Ur),Gr.details=_r.details,jr[_r.urlId]=Gr}}function checkExpired(Nr,_r,Ur){if(performance.now()-Nr.lastErrorPerfMs>RENDITION_PENALTY_DURATION_MS)return!0;const jr=Nr.details;if(_r.details===ErrorDetails.FRAG_GAP&&jr&&_r.frag){const Gr=_r.frag.start,Wr=findFragmentByPTS(null,jr.fragments,Gr);if(Wr&&!Wr.gap)return!0}if(Ur&&Nr.errors.length<Ur.errors.length){const Gr=Nr.errors[Nr.errors.length-1];if(jr&&Gr.frag&&_r.frag&&Math.abs(Gr.frag.start-_r.frag.start)>jr.targetduration*3)return!0}return!1}class BasePlaylistController{constructor(_r,Ur){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=logger.log.bind(logger,`${Ur}:`),this.warn=logger.warn.bind(logger,`${Ur}:`),this.hls=_r}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(_r,Ur){const jr=Ur==null?void 0:Ur.renditionReports;if(jr){let Gr=-1;for(let Wr=0;Wr<jr.length;Wr++){const Zr=jr[Wr];let Yr;try{Yr=new self.URL(Zr.URI,Ur.url).href}catch(ts){logger.warn(`Could not construct new URL for Rendition Report: ${ts}`),Yr=Zr.URI||""}if(Yr===_r){Gr=Wr;break}else Yr===_r.substring(0,Yr.length)&&(Gr=Wr)}if(Gr!==-1){const Wr=jr[Gr],Zr=parseInt(Wr["LAST-MSN"])||(Ur==null?void 0:Ur.lastPartSn);let Yr=parseInt(Wr["LAST-PART"])||(Ur==null?void 0:Ur.lastPartIndex);if(this.hls.config.lowLatencyMode){const ts=Math.min(Ur.age-Ur.partTarget,Ur.targetduration);Yr>=0&&ts>Ur.partTarget&&(Yr+=1)}return new HlsUrlParameters(Zr,Yr>=0?Yr:void 0,HlsSkip.No)}}}loadPlaylist(_r){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(_r){return this.canLoad&&!!_r&&!!_r.url&&(!_r.details||_r.details.live)}shouldReloadPlaylist(_r){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(_r)}playlistLoaded(_r,Ur,jr){const{details:Gr,stats:Wr}=Ur,Zr=self.performance.now(),Yr=Wr.loading.first?Math.max(0,Zr-Wr.loading.first):0;if(Gr.advancedDateTime=Date.now()-Yr,Gr.live||jr!=null&&jr.live){if(Gr.reloaded(jr),jr&&this.log(`live playlist ${_r} ${Gr.advanced?"REFRESHED "+Gr.lastPartSn+"-"+Gr.lastPartIndex:Gr.updated?"UPDATED":"MISSED"}`),jr&&Gr.fragments.length>0&&mergeDetails(jr,Gr),!this.canLoad||!Gr.live)return;let ts,es,ns;if(Gr.canBlockReload&&Gr.endSN&&Gr.advanced){const ss=this.hls.config.lowLatencyMode,os=Gr.lastPartSn,ls=Gr.endSN,cs=Gr.lastPartIndex,ds=cs!==-1,fs=os===ls,ms=ss?0:cs;ds?(es=fs?ls+1:os,ns=fs?ms:cs+1):es=ls+1;const ps=Gr.age,ys=ps+Gr.ageHeader;let ws=Math.min(ys-Gr.partTarget,Gr.targetduration*1.5);if(ws>0){if(jr&&ws>jr.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${jr.tuneInGoal} to: ${ws} with playlist age: ${Gr.age}`),ws=0;else{const xs=Math.floor(ws/Gr.targetduration);if(es+=xs,ns!==void 0){const Es=Math.round(ws%Gr.targetduration/Gr.partTarget);ns+=Es}this.log(`CDN Tune-in age: ${Gr.ageHeader}s last advanced ${ps.toFixed(2)}s goal: ${ws} skip sn ${xs} to part ${ns}`)}Gr.tuneInGoal=ws}if(ts=this.getDeliveryDirectives(Gr,Ur.deliveryDirectives,es,ns),ss||!fs){this.loadPlaylist(ts);return}}else(Gr.canBlockReload||Gr.canSkipUntil)&&(ts=this.getDeliveryDirectives(Gr,Ur.deliveryDirectives,es,ns));const Xr=this.hls.mainForwardBufferInfo,qr=Xr?Xr.end-Xr.len:0,_i=(Gr.edge-qr)*1e3,rs=computeReloadInterval(Gr,_i);Gr.updated&&Zr>this.requestScheduled+rs&&(this.requestScheduled=Wr.loading.start),es!==void 0&&Gr.canBlockReload?this.requestScheduled=Wr.loading.first+rs-(Gr.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+rs<Zr?this.requestScheduled=Zr:this.requestScheduled-Zr<=0&&(this.requestScheduled+=rs);let is=this.requestScheduled-Zr;is=Math.max(0,is),this.log(`reload live playlist ${_r} in ${Math.round(is)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(ts),is)}else this.clearTimer()}getDeliveryDirectives(_r,Ur,jr,Gr){let Wr=getSkipValue(_r,jr);return Ur!=null&&Ur.skip&&_r.deltaUpdateFailed&&(jr=Ur.msn,Gr=Ur.part,Wr=HlsSkip.No),new HlsUrlParameters(jr,Gr,Wr)}checkRetry(_r){const Ur=_r.details,jr=isTimeoutError(_r),Gr=_r.errorAction,{action:Wr,retryCount:Zr=0,retryConfig:Yr}=Gr||{},ts=!!Gr&&!!Yr&&(Wr===NetworkErrorAction.RetryRequest||!Gr.resolved&&Wr===NetworkErrorAction.SendAlternateToPenaltyBox);if(ts){var es;if(this.requestScheduled=-1,Zr>=Yr.maxNumRetry)return!1;if(jr&&(es=_r.context)!=null&&es.deliveryDirectives)this.warn(`Retrying playlist loading ${Zr+1}/${Yr.maxNumRetry} after "${Ur}" without delivery-directives`),this.loadPlaylist();else{const ns=getRetryDelay(Yr,Zr);this.timer=self.setTimeout(()=>this.loadPlaylist(),ns),this.warn(`Retrying playlist loading ${Zr+1}/${Yr.maxNumRetry} after "${Ur}" in ${ns}ms`)}_r.levelRetry=!0,Gr.resolved=!0}return ts}}let chromeOrFirefox;class LevelController extends BasePlaylistController{constructor(_r,Ur){super(_r,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=Ur,this._registerListeners()}_registerListeners(){const{hls:_r}=this;_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),_r.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),_r.on(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_r.on(Events.FRAG_LOADED,this.onFragLoaded,this),_r.on(Events.ERROR,this.onError,this)}_unregisterListeners(){const{hls:_r}=this;_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),_r.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),_r.off(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_r.off(Events.FRAG_LOADED,this.onFragLoaded,this),_r.off(Events.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(Ur=>{Ur.loadError=0,Ur.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(_r,Ur){this.resetLevels()}onManifestLoaded(_r,Ur){const jr=[],Gr={};let Wr;Ur.levels.forEach(Zr=>{var Yr;const ts=Zr.attrs;((Yr=Zr.audioCodec)==null?void 0:Yr.indexOf("mp4a.40.34"))!==-1&&(chromeOrFirefox||(chromeOrFirefox=/chrome|firefox/i.test(navigator.userAgent)),chromeOrFirefox&&(Zr.audioCodec=void 0));const{AUDIO:es,CODECS:ns,"FRAME-RATE":Xr,"PATHWAY-ID":qr,RESOLUTION:_i,SUBTITLES:rs}=ts,ss=`${`${qr||"."}-`}${Zr.bitrate}-${_i}-${Xr}-${ns}`;Wr=Gr[ss],Wr?Wr.addFallback(Zr):(Wr=new Level(Zr),Gr[ss]=Wr,jr.push(Wr)),addGroupId(Wr,"audio",es),addGroupId(Wr,"text",rs)}),this.filterAndSortMediaOptions(jr,Ur)}filterAndSortMediaOptions(_r,Ur){let jr=[],Gr=[],Wr=!1,Zr=!1,Yr=!1,ts=_r.filter(({audioCodec:_i,videoCodec:rs,width:is,height:ss,unknownCodecs:os})=>(Wr||(Wr=!!(is&&ss)),Zr||(Zr=!!rs),Yr||(Yr=!!_i),!(os!=null&&os.length)&&(!_i||isCodecSupportedInMp4(_i,"audio"))&&(!rs||isCodecSupportedInMp4(rs,"video"))));if((Wr||Zr)&&Yr&&(ts=ts.filter(({videoCodec:_i,width:rs,height:is})=>!!_i||!!(rs&&is))),ts.length===0){Promise.resolve().then(()=>{if(this.hls){const _i=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:Ur.url,error:_i,reason:_i.message})}});return}Ur.audioTracks&&(jr=Ur.audioTracks.filter(_i=>!_i.audioCodec||isCodecSupportedInMp4(_i.audioCodec,"audio")),assignTrackIdsByGroup(jr)),Ur.subtitles&&(Gr=Ur.subtitles,assignTrackIdsByGroup(Gr));const es=ts.slice(0);ts.sort((_i,rs)=>_i.attrs["HDCP-LEVEL"]!==rs.attrs["HDCP-LEVEL"]?(_i.attrs["HDCP-LEVEL"]||"")>(rs.attrs["HDCP-LEVEL"]||"")?1:-1:_i.bitrate!==rs.bitrate?_i.bitrate-rs.bitrate:_i.attrs["FRAME-RATE"]!==rs.attrs["FRAME-RATE"]?_i.attrs.decimalFloatingPoint("FRAME-RATE")-rs.attrs.decimalFloatingPoint("FRAME-RATE"):_i.attrs.SCORE!==rs.attrs.SCORE?_i.attrs.decimalFloatingPoint("SCORE")-rs.attrs.decimalFloatingPoint("SCORE"):Wr&&_i.height!==rs.height?_i.height-rs.height:0);let ns=es[0];if(this.steering&&(ts=this.steering.filterParsedLevels(ts),ts.length!==es.length)){for(let _i=0;_i<es.length;_i++)if(es[_i].pathwayId===ts[0].pathwayId){ns=es[_i];break}}this._levels=ts;for(let _i=0;_i<ts.length;_i++)if(ts[_i]===ns){this._firstLevel=_i,this.log(`manifest loaded, ${ts.length} level(s) found, first bitrate: ${ns.bitrate}`);break}const Xr=Yr&&!Zr,qr={levels:ts,audioTracks:jr,subtitleTracks:Gr,sessionData:Ur.sessionData,sessionKeys:Ur.sessionKeys,firstLevel:this._firstLevel,stats:Ur.stats,audio:Yr,video:Zr,altAudio:!Xr&&jr.some(_i=>!!_i.url)};this.hls.trigger(Events.MANIFEST_PARSED,qr),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(_r){const Ur=this._levels;if(Ur.length===0)return;if(_r<0||_r>=Ur.length){const ns=new Error("invalid level idx"),Xr=_r<0;if(this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.LEVEL_SWITCH_ERROR,level:_r,fatal:Xr,error:ns,reason:ns.message}),Xr)return;_r=Math.min(_r,Ur.length-1)}const jr=this.currentLevelIndex,Gr=this.currentLevel,Wr=Gr?Gr.attrs["PATHWAY-ID"]:void 0,Zr=Ur[_r],Yr=Zr.attrs["PATHWAY-ID"];if(this.currentLevelIndex=_r,this.currentLevel=Zr,jr===_r&&Zr.details&&Gr&&Wr===Yr)return;this.log(`Switching to level ${_r}${Yr?" with Pathway "+Yr:""} from level ${jr}${Wr?" with Pathway "+Wr:""}`);const ts=_extends({},Zr,{level:_r,maxBitrate:Zr.maxBitrate,attrs:Zr.attrs,uri:Zr.uri,urlId:Zr.urlId});delete ts._attrs,delete ts._urlId,this.hls.trigger(Events.LEVEL_SWITCHING,ts);const es=Zr.details;if(!es||es.live){const ns=this.switchParams(Zr.uri,Gr==null?void 0:Gr.details);this.loadPlaylist(ns)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(_r){this.manualLevelIndex=_r,this._startLevel===void 0&&(this._startLevel=_r),_r!==-1&&(this.level=_r)}get firstLevel(){return this._firstLevel}set firstLevel(_r){this._firstLevel=_r}get startLevel(){if(this._startLevel===void 0){const _r=this.hls.config.startLevel;return _r!==void 0?_r:this._firstLevel}else return this._startLevel}set startLevel(_r){this._startLevel=_r}onError(_r,Ur){Ur.fatal||!Ur.context||Ur.context.type===PlaylistContextType.LEVEL&&Ur.context.level===this.level&&this.checkRetry(Ur)}onFragLoaded(_r,{frag:Ur}){if(Ur!==void 0&&Ur.type===PlaylistLevelType.MAIN){const jr=this._levels[Ur.level];jr!==void 0&&(jr.loadError=0)}}onLevelLoaded(_r,Ur){var jr;const{level:Gr,details:Wr}=Ur,Zr=this._levels[Gr];if(!Zr){var Yr;this.warn(`Invalid level index ${Gr}`),(Yr=Ur.deliveryDirectives)!=null&&Yr.skip&&(Wr.deltaUpdateFailed=!0);return}Gr===this.currentLevelIndex?(Zr.fragmentError===0&&(Zr.loadError=0),this.playlistLoaded(Gr,Ur,Zr.details)):(jr=Ur.deliveryDirectives)!=null&&jr.skip&&(Wr.deltaUpdateFailed=!0)}onAudioTrackSwitched(_r,Ur){const jr=this.currentLevel;if(!jr)return;const Gr=this.hls.audioTracks[Ur.id].groupId;if(jr.audioGroupIds&&jr.audioGroupId!==Gr){let Wr=-1;for(let Zr=0;Zr<jr.audioGroupIds.length;Zr++)if(jr.audioGroupIds[Zr]===Gr){Wr=Zr;break}Wr!==-1&&Wr!==jr.urlId&&(jr.urlId=Wr,this.canLoad&&this.startLoad())}}loadPlaylist(_r){super.loadPlaylist();const Ur=this.currentLevelIndex,jr=this.currentLevel;if(jr&&this.shouldLoadPlaylist(jr)){const Gr=jr.urlId;let Wr=jr.uri;if(_r)try{Wr=_r.addDirectives(Wr)}catch(Yr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Yr}`)}const Zr=jr.attrs["PATHWAY-ID"];this.log(`Loading level index ${Ur}${(_r==null?void 0:_r.msn)!==void 0?" at sn "+_r.msn+" part "+_r.part:""} with${Zr?" Pathway "+Zr:""} URI ${Gr+1}/${jr.url.length} ${Wr}`),this.clearTimer(),this.hls.trigger(Events.LEVEL_LOADING,{url:Wr,level:Ur,id:Gr,deliveryDirectives:_r||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(_r){this.level=_r,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=_r)}removeLevel(_r,Ur){const jr=(Wr,Zr)=>Zr!==Ur,Gr=this._levels.filter((Wr,Zr)=>Zr!==_r?!0:Wr.url.length>1&&Ur!==void 0?(Wr.url=Wr.url.filter(jr),Wr.audioGroupIds&&(Wr.audioGroupIds=Wr.audioGroupIds.filter(jr)),Wr.textGroupIds&&(Wr.textGroupIds=Wr.textGroupIds.filter(jr)),Wr.urlId=0,!0):(this.steering&&this.steering.removeLevel(Wr),!1));this.hls.trigger(Events.LEVELS_UPDATED,{levels:Gr})}onLevelsUpdated(_r,{levels:Ur}){Ur.forEach((jr,Gr)=>{const{details:Wr}=jr;Wr!=null&&Wr.fragments&&Wr.fragments.forEach(Zr=>{Zr.level=Gr})}),this._levels=Ur}}function addGroupId(Nr,_r,Ur){Ur&&(_r==="audio"?(Nr.audioGroupIds||(Nr.audioGroupIds=[]),Nr.audioGroupIds[Nr.url.length-1]=Ur):_r==="text"&&(Nr.textGroupIds||(Nr.textGroupIds=[]),Nr.textGroupIds[Nr.url.length-1]=Ur))}function assignTrackIdsByGroup(Nr){const _r={};Nr.forEach(Ur=>{const jr=Ur.groupId||"";Ur.id=_r[jr]=_r[jr]||0,_r[jr]++})}var FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class FragmentTracker{constructor(_r){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=_r,this._registerListeners()}_registerListeners(){const{hls:_r}=this;_r.on(Events.BUFFER_APPENDED,this.onBufferAppended,this),_r.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),_r.on(Events.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:_r}=this;_r.off(Events.BUFFER_APPENDED,this.onBufferAppended,this),_r.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),_r.off(Events.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(_r,Ur){const jr=this.activePartLists[Ur];if(jr)for(let Gr=jr.length;Gr--;){const Wr=jr[Gr];if(!Wr)break;const Zr=Wr.end;if(Wr.start<=_r&&Zr!==null&&_r<=Zr)return Wr}return this.getBufferedFrag(_r,Ur)}getBufferedFrag(_r,Ur){const{fragments:jr}=this,Gr=Object.keys(jr);for(let Wr=Gr.length;Wr--;){const Zr=jr[Gr[Wr]];if((Zr==null?void 0:Zr.body.type)===Ur&&Zr.buffered){const Yr=Zr.body;if(Yr.start<=_r&&_r<=Yr.end)return Yr}}return null}detectEvictedFragments(_r,Ur,jr,Gr){this.timeRanges&&(this.timeRanges[_r]=Ur);const Wr=(Gr==null?void 0:Gr.fragment.sn)||-1;Object.keys(this.fragments).forEach(Zr=>{const Yr=this.fragments[Zr];if(!Yr||Wr>=Yr.body.sn)return;if(!Yr.buffered&&!Yr.loaded){Yr.body.type===jr&&this.removeFragment(Yr.body);return}const ts=Yr.range[_r];ts&&ts.time.some(es=>{const ns=!this.isTimeBuffered(es.startPTS,es.endPTS,Ur);return ns&&this.removeFragment(Yr.body),ns})})}detectPartialFragments(_r){const Ur=this.timeRanges,{frag:jr,part:Gr}=_r;if(!Ur||jr.sn==="initSegment")return;const Wr=getFragmentKey(jr),Zr=this.fragments[Wr];if(!Zr||Zr.buffered&&jr.gap)return;const Yr=!jr.relurl;Object.keys(Ur).forEach(ts=>{const es=jr.elementaryStreams[ts];if(!es)return;const ns=Ur[ts],Xr=Yr||es.partial===!0;Zr.range[ts]=this.getBufferedTimes(jr,Gr,Xr,ns)}),Zr.loaded=null,Object.keys(Zr.range).length?(Zr.buffered=!0,(Zr.body.endList=jr.endList||Zr.body.endList)&&(this.endListFragments[Zr.body.type]=Zr),isPartial(Zr)||this.removeParts(jr.sn-1,jr.type)):this.removeFragment(Zr.body)}removeParts(_r,Ur){const jr=this.activePartLists[Ur];jr&&(this.activePartLists[Ur]=jr.filter(Gr=>Gr.fragment.sn>=_r))}fragBuffered(_r,Ur){const jr=getFragmentKey(_r);let Gr=this.fragments[jr];!Gr&&Ur&&(Gr=this.fragments[jr]={body:_r,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},_r.gap&&(this.hasGaps=!0)),Gr&&(Gr.loaded=null,Gr.buffered=!0)}getBufferedTimes(_r,Ur,jr,Gr){const Wr={time:[],partial:jr},Zr=_r.start,Yr=_r.end,ts=_r.minEndPTS||Yr,es=_r.maxStartPTS||Zr;for(let ns=0;ns<Gr.length;ns++){const Xr=Gr.start(ns)-this.bufferPadding,qr=Gr.end(ns)+this.bufferPadding;if(es>=Xr&&ts<=qr){Wr.time.push({startPTS:Math.max(Zr,Gr.start(ns)),endPTS:Math.min(Yr,Gr.end(ns))});break}else if(Zr<qr&&Yr>Xr)Wr.partial=!0,Wr.time.push({startPTS:Math.max(Zr,Gr.start(ns)),endPTS:Math.min(Yr,Gr.end(ns))});else if(Yr<=Xr)break}return Wr}getPartialFragment(_r){let Ur=null,jr,Gr,Wr,Zr=0;const{bufferPadding:Yr,fragments:ts}=this;return Object.keys(ts).forEach(es=>{const ns=ts[es];ns&&isPartial(ns)&&(Gr=ns.body.start-Yr,Wr=ns.body.end+Yr,_r>=Gr&&_r<=Wr&&(jr=Math.min(_r-Gr,Wr-_r),Zr<=jr&&(Ur=ns.body,Zr=jr)))}),Ur}isEndListAppended(_r){const Ur=this.endListFragments[_r];return Ur!==void 0&&(Ur.buffered||isPartial(Ur))}getState(_r){const Ur=getFragmentKey(_r),jr=this.fragments[Ur];return jr?jr.buffered?isPartial(jr)?FragmentState.PARTIAL:FragmentState.OK:FragmentState.APPENDING:FragmentState.NOT_LOADED}isTimeBuffered(_r,Ur,jr){let Gr,Wr;for(let Zr=0;Zr<jr.length;Zr++){if(Gr=jr.start(Zr)-this.bufferPadding,Wr=jr.end(Zr)+this.bufferPadding,_r>=Gr&&Ur<=Wr)return!0;if(Ur<=Gr)return!1}return!1}onFragLoaded(_r,Ur){const{frag:jr,part:Gr}=Ur;if(jr.sn==="initSegment"||jr.bitrateTest)return;const Wr=Gr?null:Ur,Zr=getFragmentKey(jr);this.fragments[Zr]={body:jr,appendedPTS:null,loaded:Wr,buffered:!1,range:Object.create(null)}}onBufferAppended(_r,Ur){const{frag:jr,part:Gr,timeRanges:Wr}=Ur;if(jr.sn==="initSegment")return;const Zr=jr.type;if(Gr){let Yr=this.activePartLists[Zr];Yr||(this.activePartLists[Zr]=Yr=[]),Yr.push(Gr)}this.timeRanges=Wr,Object.keys(Wr).forEach(Yr=>{const ts=Wr[Yr];this.detectEvictedFragments(Yr,ts,Zr,Gr)})}onFragBuffered(_r,Ur){this.detectPartialFragments(Ur)}hasFragment(_r){const Ur=getFragmentKey(_r);return!!this.fragments[Ur]}hasParts(_r){var Ur;return!!((Ur=this.activePartLists[_r])!=null&&Ur.length)}removeFragmentsInRange(_r,Ur,jr,Gr,Wr){Gr&&!this.hasGaps||Object.keys(this.fragments).forEach(Zr=>{const Yr=this.fragments[Zr];if(!Yr)return;const ts=Yr.body;ts.type!==jr||Gr&&!ts.gap||ts.start<Ur&&ts.end>_r&&(Yr.buffered||Wr)&&this.removeFragment(ts)})}removeFragment(_r){const Ur=getFragmentKey(_r);_r.stats.loaded=0,_r.clearElementaryStreamInfo();const jr=this.activePartLists[_r.type];if(jr){const Gr=_r.sn;this.activePartLists[_r.type]=jr.filter(Wr=>Wr.fragment.sn!==Gr)}delete this.fragments[Ur],_r.endList&&delete this.endListFragments[_r.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function isPartial(Nr){var _r,Ur,jr;return Nr.buffered&&(Nr.body.gap||((_r=Nr.range.video)==null?void 0:_r.partial)||((Ur=Nr.range.audio)==null?void 0:Ur.partial)||((jr=Nr.range.audiovideo)==null?void 0:jr.partial))}function getFragmentKey(Nr){return`${Nr.type}_${Nr.level}_${Nr.urlId}_${Nr.sn}`}const MIN_CHUNK_SIZE=Math.pow(2,17);class FragmentLoader{constructor(_r){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=_r}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(_r,Ur){const jr=_r.url;if(!jr)return Promise.reject(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:_r,error:new Error(`Fragment does not have a ${jr?"part list":"url"}`),networkDetails:null}));this.abort();const Gr=this.config,Wr=Gr.fLoader,Zr=Gr.loader;return new Promise((Yr,ts)=>{if(this.loader&&this.loader.destroy(),_r.gap)if(_r.tagList.some(_i=>_i[0]==="GAP")){ts(createGapLoadError(_r));return}else _r.gap=!1;const es=this.loader=_r.loader=Wr?new Wr(Gr):new Zr(Gr),ns=createLoaderContext(_r),Xr=getLoaderConfigWithoutReties(Gr.fragLoadPolicy.default),qr={loadPolicy:Xr,timeout:Xr.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:_r.sn==="initSegment"?1/0:MIN_CHUNK_SIZE};_r.stats=es.stats,es.load(ns,qr,{onSuccess:(_i,rs,is,ss)=>{this.resetLoader(_r,es);let os=_i.data;is.resetIV&&_r.decryptdata&&(_r.decryptdata.iv=new Uint8Array(os.slice(0,16)),os=os.slice(16)),Yr({frag:_r,part:null,payload:os,networkDetails:ss})},onError:(_i,rs,is,ss)=>{this.resetLoader(_r,es),ts(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:_r,response:_objectSpread2({url:jr,data:void 0},_i),error:new Error(`HTTP Error ${_i.code} ${_i.text}`),networkDetails:is,stats:ss}))},onAbort:(_i,rs,is)=>{this.resetLoader(_r,es),ts(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:_r,error:new Error("Aborted"),networkDetails:is,stats:_i}))},onTimeout:(_i,rs,is)=>{this.resetLoader(_r,es),ts(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:_r,error:new Error(`Timeout after ${qr.timeout}ms`),networkDetails:is,stats:_i}))},onProgress:(_i,rs,is,ss)=>{Ur&&Ur({frag:_r,part:null,payload:is,networkDetails:ss})}})})}loadPart(_r,Ur,jr){this.abort();const Gr=this.config,Wr=Gr.fLoader,Zr=Gr.loader;return new Promise((Yr,ts)=>{if(this.loader&&this.loader.destroy(),_r.gap||Ur.gap){ts(createGapLoadError(_r,Ur));return}const es=this.loader=_r.loader=Wr?new Wr(Gr):new Zr(Gr),ns=createLoaderContext(_r,Ur),Xr=getLoaderConfigWithoutReties(Gr.fragLoadPolicy.default),qr={loadPolicy:Xr,timeout:Xr.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:MIN_CHUNK_SIZE};Ur.stats=es.stats,es.load(ns,qr,{onSuccess:(_i,rs,is,ss)=>{this.resetLoader(_r,es),this.updateStatsFromPart(_r,Ur);const os={frag:_r,part:Ur,payload:_i.data,networkDetails:ss};jr(os),Yr(os)},onError:(_i,rs,is,ss)=>{this.resetLoader(_r,es),ts(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:_r,part:Ur,response:_objectSpread2({url:ns.url,data:void 0},_i),error:new Error(`HTTP Error ${_i.code} ${_i.text}`),networkDetails:is,stats:ss}))},onAbort:(_i,rs,is)=>{_r.stats.aborted=Ur.stats.aborted,this.resetLoader(_r,es),ts(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:_r,part:Ur,error:new Error("Aborted"),networkDetails:is,stats:_i}))},onTimeout:(_i,rs,is)=>{this.resetLoader(_r,es),ts(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:_r,part:Ur,error:new Error(`Timeout after ${qr.timeout}ms`),networkDetails:is,stats:_i}))}})})}updateStatsFromPart(_r,Ur){const jr=_r.stats,Gr=Ur.stats,Wr=Gr.total;if(jr.loaded+=Gr.loaded,Wr){const ts=Math.round(_r.duration/Ur.duration),es=Math.min(Math.round(jr.loaded/Wr),ts),Xr=(ts-es)*Math.round(jr.loaded/es);jr.total=jr.loaded+Xr}else jr.total=Math.max(jr.loaded,jr.total);const Zr=jr.loading,Yr=Gr.loading;Zr.start?Zr.first+=Yr.first-Yr.start:(Zr.start=Yr.start,Zr.first=Yr.first),Zr.end=Yr.end}resetLoader(_r,Ur){_r.loader=null,this.loader===Ur&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),Ur.destroy()}}function createLoaderContext(Nr,_r=null){const Ur=_r||Nr,jr={frag:Nr,part:_r,responseType:"arraybuffer",url:Ur.url,headers:{},rangeStart:0,rangeEnd:0},Gr=Ur.byteRangeStartOffset,Wr=Ur.byteRangeEndOffset;if(isFiniteNumber(Gr)&&isFiniteNumber(Wr)){var Zr;let Yr=Gr,ts=Wr;if(Nr.sn==="initSegment"&&((Zr=Nr.decryptdata)==null?void 0:Zr.method)==="AES-128"){const es=Wr-Gr;es%16&&(ts=Wr+(16-es%16)),Gr!==0&&(jr.resetIV=!0,Yr=Gr-16)}jr.rangeStart=Yr,jr.rangeEnd=ts}return jr}function createGapLoadError(Nr,_r){const Ur=new Error(`GAP ${Nr.gap?"tag":"attribute"} found`),jr={type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_GAP,fatal:!1,frag:Nr,error:Ur,networkDetails:null};return _r&&(jr.part=_r),(_r||Nr).stats.aborted=!0,new LoadError(jr)}class LoadError extends Error{constructor(_r){super(_r.error.message),this.data=void 0,this.data=_r}}class KeyLoader{constructor(_r){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=_r}abort(_r){for(const Ur in this.keyUriToKeyInfo){const jr=this.keyUriToKeyInfo[Ur].loader;if(jr){if(_r&&_r!==jr.context.frag.type)return;jr.abort()}}}detach(){for(const _r in this.keyUriToKeyInfo){const Ur=this.keyUriToKeyInfo[_r];(Ur.mediaKeySessionContext||Ur.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[_r]}}destroy(){this.detach();for(const _r in this.keyUriToKeyInfo){const Ur=this.keyUriToKeyInfo[_r].loader;Ur&&Ur.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(_r,Ur=ErrorDetails.KEY_LOAD_ERROR,jr,Gr,Wr){return new LoadError({type:ErrorTypes.NETWORK_ERROR,details:Ur,fatal:!1,frag:_r,response:Wr,error:jr,networkDetails:Gr})}loadClear(_r,Ur){if(this.emeController&&this.config.emeEnabled){const{sn:jr,cc:Gr}=_r;for(let Wr=0;Wr<Ur.length;Wr++){const Zr=Ur[Wr];if(Gr<=Zr.cc&&(jr==="initSegment"||Zr.sn==="initSegment"||jr<Zr.sn)){this.emeController.selectKeySystemFormat(Zr).then(Yr=>{Zr.setKeyFormat(Yr)});break}}}}load(_r){return!_r.decryptdata&&_r.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(_r).then(Ur=>this.loadInternal(_r,Ur)):this.loadInternal(_r)}loadInternal(_r,Ur){var jr,Gr;Ur&&_r.setKeyFormat(Ur);const Wr=_r.decryptdata;if(!Wr){const es=new Error(Ur?`Expected frag.decryptdata to be defined after setting format ${Ur}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(_r,ErrorDetails.KEY_LOAD_ERROR,es))}const Zr=Wr.uri;if(!Zr)return Promise.reject(this.createKeyLoadError(_r,ErrorDetails.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${Zr}"`)));let Yr=this.keyUriToKeyInfo[Zr];if((jr=Yr)!=null&&jr.decryptdata.key)return Wr.key=Yr.decryptdata.key,Promise.resolve({frag:_r,keyInfo:Yr});if((Gr=Yr)!=null&&Gr.keyLoadPromise){var ts;switch((ts=Yr.mediaKeySessionContext)==null?void 0:ts.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return Yr.keyLoadPromise.then(es=>(Wr.key=es.keyInfo.decryptdata.key,{frag:_r,keyInfo:Yr}))}}switch(Yr=this.keyUriToKeyInfo[Zr]={decryptdata:Wr,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},Wr.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return Wr.keyFormat==="identity"?this.loadKeyHTTP(Yr,_r):this.loadKeyEME(Yr,_r);case"AES-128":return this.loadKeyHTTP(Yr,_r);default:return Promise.reject(this.createKeyLoadError(_r,ErrorDetails.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${Wr.method}"`)))}}loadKeyEME(_r,Ur){const jr={frag:Ur,keyInfo:_r};if(this.emeController&&this.config.emeEnabled){const Gr=this.emeController.loadKey(jr);if(Gr)return(_r.keyLoadPromise=Gr.then(Wr=>(_r.mediaKeySessionContext=Wr,jr))).catch(Wr=>{throw _r.keyLoadPromise=null,Wr})}return Promise.resolve(jr)}loadKeyHTTP(_r,Ur){const jr=this.config,Gr=jr.loader,Wr=new Gr(jr);return Ur.keyLoader=_r.loader=Wr,_r.keyLoadPromise=new Promise((Zr,Yr)=>{const ts={keyInfo:_r,frag:Ur,responseType:"arraybuffer",url:_r.decryptdata.uri},es=jr.keyLoadPolicy.default,ns={loadPolicy:es,timeout:es.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},Xr={onSuccess:(qr,_i,rs,is)=>{const{frag:ss,keyInfo:os,url:ls}=rs;if(!ss.decryptdata||os!==this.keyUriToKeyInfo[ls])return Yr(this.createKeyLoadError(ss,ErrorDetails.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),is));os.decryptdata.key=ss.decryptdata.key=new Uint8Array(qr.data),ss.keyLoader=null,os.loader=null,Zr({frag:ss,keyInfo:os})},onError:(qr,_i,rs,is)=>{this.resetLoader(_i),Yr(this.createKeyLoadError(Ur,ErrorDetails.KEY_LOAD_ERROR,new Error(`HTTP Error ${qr.code} loading key ${qr.text}`),rs,_objectSpread2({url:ts.url,data:void 0},qr)))},onTimeout:(qr,_i,rs)=>{this.resetLoader(_i),Yr(this.createKeyLoadError(Ur,ErrorDetails.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),rs))},onAbort:(qr,_i,rs)=>{this.resetLoader(_i),Yr(this.createKeyLoadError(Ur,ErrorDetails.INTERNAL_ABORTED,new Error("key loading aborted"),rs))}};Wr.load(ts,ns,Xr)})}resetLoader(_r){const{frag:Ur,keyInfo:jr,url:Gr}=_r,Wr=jr.loader;Ur.keyLoader===Wr&&(Ur.keyLoader=null,jr.loader=null),delete this.keyUriToKeyInfo[Gr],Wr&&Wr.destroy()}}class TaskLoop{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(_r){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,_r),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const noopBuffered={length:0,start:()=>0,end:()=>0};class BufferHelper{static isBuffered(_r,Ur){try{if(_r){const jr=BufferHelper.getBuffered(_r);for(let Gr=0;Gr<jr.length;Gr++)if(Ur>=jr.start(Gr)&&Ur<=jr.end(Gr))return!0}}catch{}return!1}static bufferInfo(_r,Ur,jr){try{if(_r){const Gr=BufferHelper.getBuffered(_r),Wr=[];let Zr;for(Zr=0;Zr<Gr.length;Zr++)Wr.push({start:Gr.start(Zr),end:Gr.end(Zr)});return this.bufferedInfo(Wr,Ur,jr)}}catch{}return{len:0,start:Ur,end:Ur,nextStart:void 0}}static bufferedInfo(_r,Ur,jr){Ur=Math.max(0,Ur),_r.sort(function(es,ns){const Xr=es.start-ns.start;return Xr||ns.end-es.end});let Gr=[];if(jr)for(let es=0;es<_r.length;es++){const ns=Gr.length;if(ns){const Xr=Gr[ns-1].end;_r[es].start-Xr<jr?_r[es].end>Xr&&(Gr[ns-1].end=_r[es].end):Gr.push(_r[es])}else Gr.push(_r[es])}else Gr=_r;let Wr=0,Zr,Yr=Ur,ts=Ur;for(let es=0;es<Gr.length;es++){const ns=Gr[es].start,Xr=Gr[es].end;if(Ur+jr>=ns&&Ur<Xr)Yr=ns,ts=Xr,Wr=ts-Ur;else if(Ur+jr<ns){Zr=ns;break}}return{len:Wr,start:Yr||0,end:ts||0,nextStart:Zr}}static getBuffered(_r){try{return _r.buffered}catch(Ur){return logger.log("failed to get media.buffered",Ur),noopBuffered}}}class ChunkMetadata{constructor(_r,Ur,jr,Gr=0,Wr=-1,Zr=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=getNewPerformanceTiming(),this.buffering={audio:getNewPerformanceTiming(),video:getNewPerformanceTiming(),audiovideo:getNewPerformanceTiming()},this.level=_r,this.sn=Ur,this.id=jr,this.size=Gr,this.part=Wr,this.partial=Zr}}function getNewPerformanceTiming(){return{start:0,executeStart:0,executeEnd:0,end:0}}function findFirstFragWithCC(Nr,_r){let Ur=null;for(let jr=0,Gr=Nr.length;jr<Gr;jr++){const Wr=Nr[jr];if(Wr&&Wr.cc===_r){Ur=Wr;break}}return Ur}function shouldAlignOnDiscontinuities(Nr,_r,Ur){return!!(_r.details&&(Ur.endCC>Ur.startCC||Nr&&Nr.cc<Ur.startCC))}function findDiscontinuousReferenceFrag(Nr,_r,Ur=0){const jr=Nr.fragments,Gr=_r.fragments;if(!Gr.length||!jr.length){logger.log("No fragments to align");return}const Wr=findFirstFragWithCC(jr,Gr[0].cc);if(!Wr||Wr&&!Wr.startPTS){logger.log("No frag in previous level to align on");return}return Wr}function adjustFragmentStart(Nr,_r){if(Nr){const Ur=Nr.start+_r;Nr.start=Nr.startPTS=Ur,Nr.endPTS=Ur+Nr.duration}}function adjustSlidingStart(Nr,_r){const Ur=_r.fragments;for(let jr=0,Gr=Ur.length;jr<Gr;jr++)adjustFragmentStart(Ur[jr],Nr);_r.fragmentHint&&adjustFragmentStart(_r.fragmentHint,Nr),_r.alignedSliding=!0}function alignStream(Nr,_r,Ur){_r&&(alignDiscontinuities(Nr,Ur,_r),!Ur.alignedSliding&&_r.details&&alignPDT(Ur,_r.details),!Ur.alignedSliding&&_r.details&&!Ur.skippedSegments&&adjustSliding(_r.details,Ur))}function alignDiscontinuities(Nr,_r,Ur){if(shouldAlignOnDiscontinuities(Nr,Ur,_r)){const jr=findDiscontinuousReferenceFrag(Ur.details,_r);jr&&isFiniteNumber(jr.start)&&(logger.log(`Adjusting PTS using last level due to CC increase within current level ${_r.url}`),adjustSlidingStart(jr.start,_r))}}function alignPDT(Nr,_r){if(!_r.fragments.length||!Nr.hasProgramDateTime||!_r.hasProgramDateTime)return;const Ur=_r.fragments[0].programDateTime,jr=Nr.fragments[0].programDateTime,Gr=(jr-Ur)/1e3+_r.fragments[0].start;Gr&&isFiniteNumber(Gr)&&(logger.log(`Adjusting PTS using programDateTime delta ${jr-Ur}ms, sliding:${Gr.toFixed(3)} ${Nr.url} `),adjustSlidingStart(Gr,Nr))}function alignMediaPlaylistByPDT(Nr,_r){if(!Nr.hasProgramDateTime||!_r.hasProgramDateTime)return;const Ur=Nr.fragments,jr=_r.fragments;if(!Ur.length||!jr.length)return;const Gr=Math.round(jr.length/2)-1,Wr=jr[Gr],Zr=findFirstFragWithCC(Ur,Wr.cc)||Ur[Math.round(Ur.length/2)-1],Yr=Wr.programDateTime,ts=Zr.programDateTime;if(Yr===null||ts===null)return;const es=(ts-Yr)/1e3-(Zr.start-Wr.start);adjustSlidingStart(es,Nr)}class AESCrypto{constructor(_r,Ur){this.subtle=void 0,this.aesIV=void 0,this.subtle=_r,this.aesIV=Ur}decrypt(_r,Ur){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},Ur,_r)}}class FastAESKey{constructor(_r,Ur){this.subtle=void 0,this.key=void 0,this.subtle=_r,this.key=Ur}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function removePadding(Nr){const _r=Nr.byteLength,Ur=_r&&new DataView(Nr.buffer).getUint8(_r-1);return Ur?sliceUint8(Nr,0,_r-Ur):Nr}class AESDecryptor{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(_r){const Ur=new DataView(_r),jr=new Uint32Array(4);for(let Gr=0;Gr<4;Gr++)jr[Gr]=Ur.getUint32(Gr*4);return jr}initTable(){const _r=this.sBox,Ur=this.invSBox,jr=this.subMix,Gr=jr[0],Wr=jr[1],Zr=jr[2],Yr=jr[3],ts=this.invSubMix,es=ts[0],ns=ts[1],Xr=ts[2],qr=ts[3],_i=new Uint32Array(256);let rs=0,is=0,ss=0;for(ss=0;ss<256;ss++)ss<128?_i[ss]=ss<<1:_i[ss]=ss<<1^283;for(ss=0;ss<256;ss++){let os=is^is<<1^is<<2^is<<3^is<<4;os=os>>>8^os&255^99,_r[rs]=os,Ur[os]=rs;const ls=_i[rs],cs=_i[ls],ds=_i[cs];let fs=_i[os]*257^os*16843008;Gr[rs]=fs<<24|fs>>>8,Wr[rs]=fs<<16|fs>>>16,Zr[rs]=fs<<8|fs>>>24,Yr[rs]=fs,fs=ds*16843009^cs*65537^ls*257^rs*16843008,es[os]=fs<<24|fs>>>8,ns[os]=fs<<16|fs>>>16,Xr[os]=fs<<8|fs>>>24,qr[os]=fs,rs?(rs=ls^_i[_i[_i[ds^ls]]],is^=_i[_i[is]]):rs=is=1}}expandKey(_r){const Ur=this.uint8ArrayToUint32Array_(_r);let jr=!0,Gr=0;for(;Gr<Ur.length&&jr;)jr=Ur[Gr]===this.key[Gr],Gr++;if(jr)return;this.key=Ur;const Wr=this.keySize=Ur.length;if(Wr!==4&&Wr!==6&&Wr!==8)throw new Error("Invalid aes key size="+Wr);const Zr=this.ksRows=(Wr+6+1)*4;let Yr,ts;const es=this.keySchedule=new Uint32Array(Zr),ns=this.invKeySchedule=new Uint32Array(Zr),Xr=this.sBox,qr=this.rcon,_i=this.invSubMix,rs=_i[0],is=_i[1],ss=_i[2],os=_i[3];let ls,cs;for(Yr=0;Yr<Zr;Yr++){if(Yr<Wr){ls=es[Yr]=Ur[Yr];continue}cs=ls,Yr%Wr===0?(cs=cs<<8|cs>>>24,cs=Xr[cs>>>24]<<24|Xr[cs>>>16&255]<<16|Xr[cs>>>8&255]<<8|Xr[cs&255],cs^=qr[Yr/Wr|0]<<24):Wr>6&&Yr%Wr===4&&(cs=Xr[cs>>>24]<<24|Xr[cs>>>16&255]<<16|Xr[cs>>>8&255]<<8|Xr[cs&255]),es[Yr]=ls=(es[Yr-Wr]^cs)>>>0}for(ts=0;ts<Zr;ts++)Yr=Zr-ts,ts&3?cs=es[Yr]:cs=es[Yr-4],ts<4||Yr<=4?ns[ts]=cs:ns[ts]=rs[Xr[cs>>>24]]^is[Xr[cs>>>16&255]]^ss[Xr[cs>>>8&255]]^os[Xr[cs&255]],ns[ts]=ns[ts]>>>0}networkToHostOrderSwap(_r){return _r<<24|(_r&65280)<<8|(_r&16711680)>>8|_r>>>24}decrypt(_r,Ur,jr){const Gr=this.keySize+6,Wr=this.invKeySchedule,Zr=this.invSBox,Yr=this.invSubMix,ts=Yr[0],es=Yr[1],ns=Yr[2],Xr=Yr[3],qr=this.uint8ArrayToUint32Array_(jr);let _i=qr[0],rs=qr[1],is=qr[2],ss=qr[3];const os=new Int32Array(_r),ls=new Int32Array(os.length);let cs,ds,fs,ms,ps,ys,ws,xs,Es,Rs,_s,Bs,vs,Cs;const Ss=this.networkToHostOrderSwap;for(;Ur<os.length;){for(Es=Ss(os[Ur]),Rs=Ss(os[Ur+1]),_s=Ss(os[Ur+2]),Bs=Ss(os[Ur+3]),ps=Es^Wr[0],ys=Bs^Wr[1],ws=_s^Wr[2],xs=Rs^Wr[3],vs=4,Cs=1;Cs<Gr;Cs++)cs=ts[ps>>>24]^es[ys>>16&255]^ns[ws>>8&255]^Xr[xs&255]^Wr[vs],ds=ts[ys>>>24]^es[ws>>16&255]^ns[xs>>8&255]^Xr[ps&255]^Wr[vs+1],fs=ts[ws>>>24]^es[xs>>16&255]^ns[ps>>8&255]^Xr[ys&255]^Wr[vs+2],ms=ts[xs>>>24]^es[ps>>16&255]^ns[ys>>8&255]^Xr[ws&255]^Wr[vs+3],ps=cs,ys=ds,ws=fs,xs=ms,vs=vs+4;cs=Zr[ps>>>24]<<24^Zr[ys>>16&255]<<16^Zr[ws>>8&255]<<8^Zr[xs&255]^Wr[vs],ds=Zr[ys>>>24]<<24^Zr[ws>>16&255]<<16^Zr[xs>>8&255]<<8^Zr[ps&255]^Wr[vs+1],fs=Zr[ws>>>24]<<24^Zr[xs>>16&255]<<16^Zr[ps>>8&255]<<8^Zr[ys&255]^Wr[vs+2],ms=Zr[xs>>>24]<<24^Zr[ps>>16&255]<<16^Zr[ys>>8&255]<<8^Zr[ws&255]^Wr[vs+3],ls[Ur]=Ss(cs^_i),ls[Ur+1]=Ss(ms^rs),ls[Ur+2]=Ss(fs^is),ls[Ur+3]=Ss(ds^ss),_i=Es,rs=Rs,is=_s,ss=Bs,Ur=Ur+4}return ls.buffer}}const CHUNK_SIZE=16;class Decrypter{constructor(_r,{removePKCS7Padding:Ur=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=_r.enableSoftwareAES,this.removePKCS7Padding=Ur,Ur)try{const jr=self.crypto;jr&&(this.subtle=jr.subtle||jr.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:_r,remainderData:Ur}=this;if(!_r||Ur)return this.reset(),null;const jr=new Uint8Array(_r);return this.reset(),this.removePKCS7Padding?removePadding(jr):jr}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(_r,Ur,jr){return this.useSoftware?new Promise((Gr,Wr)=>{this.softwareDecrypt(new Uint8Array(_r),Ur,jr);const Zr=this.flush();Zr?Gr(Zr.buffer):Wr(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(_r),Ur,jr)}softwareDecrypt(_r,Ur,jr){const{currentIV:Gr,currentResult:Wr,remainderData:Zr}=this;this.logOnce("JS AES decrypt"),Zr&&(_r=appendUint8Array(Zr,_r),this.remainderData=null);const Yr=this.getValidChunk(_r);if(!Yr.length)return null;Gr&&(jr=Gr);let ts=this.softwareDecrypter;ts||(ts=this.softwareDecrypter=new AESDecryptor),ts.expandKey(Ur);const es=Wr;return this.currentResult=ts.decrypt(Yr.buffer,0,jr),this.currentIV=sliceUint8(Yr,-16).buffer,es||null}webCryptoDecrypt(_r,Ur,jr){const Gr=this.subtle;return(this.key!==Ur||!this.fastAesKey)&&(this.key=Ur,this.fastAesKey=new FastAESKey(Gr,Ur)),this.fastAesKey.expandKey().then(Wr=>Gr?(this.logOnce("WebCrypto AES decrypt"),new AESCrypto(Gr,new Uint8Array(jr)).decrypt(_r.buffer,Wr)):Promise.reject(new Error("web crypto not initialized"))).catch(Wr=>(logger.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${Wr.name}: ${Wr.message}`),this.onWebCryptoError(_r,Ur,jr)))}onWebCryptoError(_r,Ur,jr){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(_r,Ur,jr);const Gr=this.flush();if(Gr)return Gr.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(_r){let Ur=_r;const jr=_r.length-_r.length%CHUNK_SIZE;return jr!==_r.length&&(Ur=sliceUint8(_r,0,jr),this.remainderData=sliceUint8(_r,jr)),Ur}logOnce(_r){this.logEnabled&&(logger.log(`[decrypter]: ${_r}`),this.logEnabled=!1)}}const TimeRanges={toString:function(Nr){let _r="";const Ur=Nr.length;for(let jr=0;jr<Ur;jr++)_r+=`[${Nr.start(jr).toFixed(3)}-${Nr.end(jr).toFixed(3)}]`;return _r}},State={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class BaseStreamController extends TaskLoop{constructor(_r,Ur,jr,Gr,Wr){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=State.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=Wr,this.logPrefix=Gr,this.log=logger.log.bind(logger,`${Gr}:`),this.warn=logger.warn.bind(logger,`${Gr}:`),this.hls=_r,this.fragmentLoader=new FragmentLoader(_r.config),this.keyLoader=jr,this.fragmentTracker=Ur,this.config=_r.config,this.decrypter=new Decrypter(_r.config),_r.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(_r){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const _r=this.fragCurrent;_r!=null&&_r.loader&&(_r.abortRequests(),this.fragmentTracker.removeFragment(_r)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=State.STOPPED}_streamEnded(_r,Ur){if(Ur.live||_r.nextStart||!_r.end||!this.media)return!1;const jr=Ur.partList;if(jr!=null&&jr.length){const Wr=jr[jr.length-1];return BufferHelper.isBuffered(this.media,Wr.start+Wr.duration/2)}const Gr=Ur.fragments[Ur.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(Gr)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var _r;return(_r=this.levels[this.levelLastLoaded])==null?void 0:_r.details}}onMediaAttached(_r,Ur){const jr=this.media=this.mediaBuffer=Ur.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),jr.addEventListener("seeking",this.onvseeking),jr.addEventListener("ended",this.onvended);const Gr=this.config;this.levels&&Gr.autoStartLoad&&this.state===State.STOPPED&&this.startLoad(Gr.startPosition)}onMediaDetaching(){const _r=this.media;_r!=null&&_r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),_r&&this.onvseeking&&this.onvended&&(_r.removeEventListener("seeking",this.onvseeking),_r.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:_r,fragCurrent:Ur,media:jr,mediaBuffer:Gr,state:Wr}=this,Zr=jr?jr.currentTime:0,Yr=BufferHelper.bufferInfo(Gr||jr,Zr,_r.maxBufferHole);if(this.log(`media seeking to ${isFiniteNumber(Zr)?Zr.toFixed(3):Zr}, state: ${Wr}`),this.state===State.ENDED)this.resetLoadingState();else if(Ur){const ts=_r.maxFragLookUpTolerance,es=Ur.start-ts,ns=Ur.start+Ur.duration+ts;if(!Yr.len||ns<Yr.start||es>Yr.end){const Xr=Zr>ns;(Zr<es||Xr)&&(Xr&&Ur.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),Ur.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}jr&&(this.fragmentTracker.removeFragmentsInRange(Zr,1/0,this.playlistType,!0),this.lastCurrentTime=Zr),!this.loadedmetadata&&!Yr.len&&(this.nextLoadPosition=this.startPosition=Zr),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(_r,Ur){this.startTimeOffset=Ur.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=State.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(_r,Ur,jr){this._loadFragForPlayback(_r,Ur,jr)}_loadFragForPlayback(_r,Ur,jr){const Gr=Wr=>{if(this.fragContextChanged(_r)){this.warn(`Fragment ${_r.sn}${Wr.part?" p: "+Wr.part.index:""} of level ${_r.level} was dropped during download.`),this.fragmentTracker.removeFragment(_r);return}_r.stats.chunkCount++,this._handleFragmentLoadProgress(Wr)};this._doFragLoad(_r,Ur,jr,Gr).then(Wr=>{if(!Wr)return;const Zr=this.state;if(this.fragContextChanged(_r)){(Zr===State.FRAG_LOADING||!this.fragCurrent&&Zr===State.PARSING)&&(this.fragmentTracker.removeFragment(_r),this.state=State.IDLE);return}"payload"in Wr&&(this.log(`Loaded fragment ${_r.sn} of level ${_r.level}`),this.hls.trigger(Events.FRAG_LOADED,Wr)),this._handleFragmentLoadComplete(Wr)}).catch(Wr=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(Wr),this.resetFragmentLoading(_r))})}clearTrackerIfNeeded(_r){var Ur;const{fragmentTracker:jr}=this;if(jr.getState(_r)===FragmentState.APPENDING){const Wr=_r.type,Zr=this.getFwdBufferInfo(this.mediaBuffer,Wr),Yr=Math.max(_r.duration,Zr?Zr.len:this.config.maxBufferLength);this.reduceMaxBufferLength(Yr)&&jr.removeFragment(_r)}else((Ur=this.mediaBuffer)==null?void 0:Ur.buffered.length)===0?jr.removeAllFragments():jr.hasParts(_r.type)&&(jr.detectPartialFragments({frag:_r,part:null,stats:_r.stats,id:_r.type}),jr.getState(_r)===FragmentState.PARTIAL&&jr.removeFragment(_r))}checkLiveUpdate(_r){if(_r.updated&&!_r.live){const Ur=_r.fragments[_r.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:Ur,part:null,stats:Ur.stats,id:Ur.type})}_r.fragments[0]||(_r.deltaUpdateFailed=!0)}flushMainBuffer(_r,Ur,jr=null){if(!(_r-Ur))return;const Gr={startOffset:_r,endOffset:Ur,type:jr};this.hls.trigger(Events.BUFFER_FLUSHING,Gr)}_loadInitSegment(_r,Ur){this._doFragLoad(_r,Ur).then(jr=>{if(!jr||this.fragContextChanged(_r)||!this.levels)throw new Error("init load aborted");return jr}).then(jr=>{const{hls:Gr}=this,{payload:Wr}=jr,Zr=_r.decryptdata;if(Wr&&Wr.byteLength>0&&Zr&&Zr.key&&Zr.iv&&Zr.method==="AES-128"){const Yr=self.performance.now();return this.decrypter.decrypt(new Uint8Array(Wr),Zr.key.buffer,Zr.iv.buffer).catch(ts=>{throw Gr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:ts,reason:ts.message,frag:_r}),ts}).then(ts=>{const es=self.performance.now();return Gr.trigger(Events.FRAG_DECRYPTED,{frag:_r,payload:ts,stats:{tstart:Yr,tdecrypt:es}}),jr.payload=ts,jr})}return jr}).then(jr=>{const{fragCurrent:Gr,hls:Wr,levels:Zr}=this;if(!Zr)throw new Error("init load aborted, missing levels");const Yr=_r.stats;this.state=State.IDLE,Ur.fragmentError=0,_r.data=new Uint8Array(jr.payload),Yr.parsing.start=Yr.buffering.start=self.performance.now(),Yr.parsing.end=Yr.buffering.end=self.performance.now(),jr.frag===Gr&&Wr.trigger(Events.FRAG_BUFFERED,{stats:Yr,frag:Gr,part:null,id:_r.type}),this.tick()}).catch(jr=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(jr),this.resetFragmentLoading(_r))})}fragContextChanged(_r){const{fragCurrent:Ur}=this;return!_r||!Ur||_r.level!==Ur.level||_r.sn!==Ur.sn||_r.urlId!==Ur.urlId}fragBufferedComplete(_r,Ur){var jr,Gr,Wr,Zr;const Yr=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${_r.type} sn: ${_r.sn}${Ur?" part: "+Ur.index:""} of ${this.playlistType===PlaylistLevelType.MAIN?"level":"track"} ${_r.level} (frag:[${((jr=_r.startPTS)!=null?jr:NaN).toFixed(3)}-${((Gr=_r.endPTS)!=null?Gr:NaN).toFixed(3)}] > buffer:${Yr?TimeRanges.toString(BufferHelper.getBuffered(Yr)):"(detached)"})`),this.state=State.IDLE,Yr&&(!this.loadedmetadata&&_r.type==PlaylistLevelType.MAIN&&Yr.buffered.length&&((Wr=this.fragCurrent)==null?void 0:Wr.sn)===((Zr=this.fragPrevious)==null?void 0:Zr.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(_r){const{transmuxer:Ur}=this;if(!Ur)return;const{frag:jr,part:Gr,partsLoaded:Wr}=_r,Zr=!Wr||Wr.length===0||Wr.some(ts=>!ts),Yr=new ChunkMetadata(jr.level,jr.sn,jr.stats.chunkCount+1,0,Gr?Gr.index:-1,!Zr);Ur.flush(Yr)}_handleFragmentLoadProgress(_r){}_doFragLoad(_r,Ur,jr=null,Gr){var Wr;const Zr=Ur==null?void 0:Ur.details;if(!this.levels||!Zr)throw new Error(`frag load aborted, missing level${Zr?"":" detail"}s`);let Yr=null;if(_r.encrypted&&!((Wr=_r.decryptdata)!=null&&Wr.key)?(this.log(`Loading key for ${_r.sn} of [${Zr.startSN}-${Zr.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${_r.level}`),this.state=State.KEY_LOADING,this.fragCurrent=_r,Yr=this.keyLoader.load(_r).then(ns=>{if(!this.fragContextChanged(ns.frag))return this.hls.trigger(Events.KEY_LOADED,ns),this.state===State.KEY_LOADING&&(this.state=State.IDLE),ns}),this.hls.trigger(Events.KEY_LOADING,{frag:_r}),this.fragCurrent===null&&(Yr=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!_r.encrypted&&Zr.encryptedFragments.length&&this.keyLoader.loadClear(_r,Zr.encryptedFragments),jr=Math.max(_r.start,jr||0),this.config.lowLatencyMode&&_r.sn!=="initSegment"){const ns=Zr.partList;if(ns&&Gr){jr>_r.end&&Zr.fragmentHint&&(_r=Zr.fragmentHint);const Xr=this.getNextPart(ns,_r,jr);if(Xr>-1){const qr=ns[Xr];this.log(`Loading part sn: ${_r.sn} p: ${qr.index} cc: ${_r.cc} of playlist [${Zr.startSN}-${Zr.endSN}] parts [0-${Xr}-${ns.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${_r.level}, target: ${parseFloat(jr.toFixed(3))}`),this.nextLoadPosition=qr.start+qr.duration,this.state=State.FRAG_LOADING;let _i;return Yr?_i=Yr.then(rs=>!rs||this.fragContextChanged(rs.frag)?null:this.doFragPartsLoad(_r,qr,Ur,Gr)).catch(rs=>this.handleFragLoadError(rs)):_i=this.doFragPartsLoad(_r,qr,Ur,Gr).catch(rs=>this.handleFragLoadError(rs)),this.hls.trigger(Events.FRAG_LOADING,{frag:_r,part:qr,targetBufferTime:jr}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):_i}else if(!_r.url||this.loadedEndOfParts(ns,jr))return Promise.resolve(null)}}this.log(`Loading fragment ${_r.sn} cc: ${_r.cc} ${Zr?"of ["+Zr.startSN+"-"+Zr.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${_r.level}, target: ${parseFloat(jr.toFixed(3))}`),isFiniteNumber(_r.sn)&&!this.bitrateTest&&(this.nextLoadPosition=_r.start+_r.duration),this.state=State.FRAG_LOADING;const ts=this.config.progressive;let es;return ts&&Yr?es=Yr.then(ns=>!ns||this.fragContextChanged(ns==null?void 0:ns.frag)?null:this.fragmentLoader.load(_r,Gr)).catch(ns=>this.handleFragLoadError(ns)):es=Promise.all([this.fragmentLoader.load(_r,ts?Gr:void 0),Yr]).then(([ns])=>(!ts&&ns&&Gr&&Gr(ns),ns)).catch(ns=>this.handleFragLoadError(ns)),this.hls.trigger(Events.FRAG_LOADING,{frag:_r,targetBufferTime:jr}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):es}doFragPartsLoad(_r,Ur,jr,Gr){return new Promise((Wr,Zr)=>{var Yr;const ts=[],es=(Yr=jr.details)==null?void 0:Yr.partList,ns=Xr=>{this.fragmentLoader.loadPart(_r,Xr,Gr).then(qr=>{ts[Xr.index]=qr;const _i=qr.part;this.hls.trigger(Events.FRAG_LOADED,qr);const rs=getPartWith(jr,_r.sn,Xr.index+1)||findPart(es,_r.sn,Xr.index+1);if(rs)ns(rs);else return Wr({frag:_r,part:_i,partsLoaded:ts})}).catch(Zr)};ns(Ur)})}handleFragLoadError(_r){if("data"in _r){const Ur=_r.data;_r.data&&Ur.details===ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(Ur.frag,Ur.part):this.hls.trigger(Events.ERROR,Ur)}else this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,err:_r,error:_r,fatal:!0});return null}_handleTransmuxerFlush(_r){const Ur=this.getCurrentContext(_r);if(!Ur||this.state!==State.PARSING){!this.fragCurrent&&this.state!==State.STOPPED&&this.state!==State.ERROR&&(this.state=State.IDLE);return}const{frag:jr,part:Gr,level:Wr}=Ur,Zr=self.performance.now();jr.stats.parsing.end=Zr,Gr&&(Gr.stats.parsing.end=Zr),this.updateLevelTiming(jr,Gr,Wr,_r.partial)}getCurrentContext(_r){const{levels:Ur,fragCurrent:jr}=this,{level:Gr,sn:Wr,part:Zr}=_r;if(!(Ur!=null&&Ur[Gr]))return this.warn(`Levels object was unset while buffering fragment ${Wr} of level ${Gr}. The current chunk will not be buffered.`),null;const Yr=Ur[Gr],ts=Zr>-1?getPartWith(Yr,Wr,Zr):null,es=ts?ts.fragment:getFragmentWithSN(Yr,Wr,jr);return es?(jr&&jr!==es&&(es.stats=jr.stats),{frag:es,part:ts,level:Yr}):null}bufferFragmentData(_r,Ur,jr,Gr,Wr){var Zr;if(!_r||this.state!==State.PARSING)return;const{data1:Yr,data2:ts}=_r;let es=Yr;if(Yr&&ts&&(es=appendUint8Array(Yr,ts)),!((Zr=es)!=null&&Zr.length))return;const ns={type:_r.type,frag:Ur,part:jr,chunkMeta:Gr,parent:Ur.type,data:es};if(this.hls.trigger(Events.BUFFER_APPENDING,ns),_r.dropped&&_r.independent&&!jr){if(Wr)return;this.flushBufferGap(Ur)}}flushBufferGap(_r){const Ur=this.media;if(!Ur)return;if(!BufferHelper.isBuffered(Ur,Ur.currentTime)){this.flushMainBuffer(0,_r.start);return}const jr=Ur.currentTime,Gr=BufferHelper.bufferInfo(Ur,jr,0),Wr=_r.duration,Zr=Math.min(this.config.maxFragLookUpTolerance*2,Wr*.25),Yr=Math.max(Math.min(_r.start-Zr,Gr.end-Zr),jr+Zr);_r.start-Yr>Zr&&this.flushMainBuffer(Yr,_r.start)}getFwdBufferInfo(_r,Ur){const jr=this.getLoadPosition();return isFiniteNumber(jr)?this.getFwdBufferInfoAtPos(_r,jr,Ur):null}getFwdBufferInfoAtPos(_r,Ur,jr){const{config:{maxBufferHole:Gr}}=this,Wr=BufferHelper.bufferInfo(_r,Ur,Gr);if(Wr.len===0&&Wr.nextStart!==void 0){const Zr=this.fragmentTracker.getBufferedFrag(Ur,jr);if(Zr&&Wr.nextStart<Zr.end)return BufferHelper.bufferInfo(_r,Ur,Math.max(Wr.nextStart,Gr))}return Wr}getMaxBufferLength(_r){const{config:Ur}=this;let jr;return _r?jr=Math.max(8*Ur.maxBufferSize/_r,Ur.maxBufferLength):jr=Ur.maxBufferLength,Math.min(jr,Ur.maxMaxBufferLength)}reduceMaxBufferLength(_r){const Ur=this.config,jr=_r||Ur.maxBufferLength;return Ur.maxMaxBufferLength>=jr?(Ur.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${Ur.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(_r,Ur=PlaylistLevelType.MAIN){const jr=this.fragmentTracker.getAppendedFrag(_r,PlaylistLevelType.MAIN);return jr&&"fragment"in jr?jr.fragment:jr}getNextFragment(_r,Ur){const jr=Ur.fragments,Gr=jr.length;if(!Gr)return null;const{config:Wr}=this,Zr=jr[0].start;let Yr;if(Ur.live){const ts=Wr.initialLiveManifestSize;if(Gr<ts)return this.warn(`Not enough fragments to start playback (have: ${Gr}, need: ${ts})`),null;!Ur.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(Yr=this.getInitialLiveFragment(Ur,jr),this.startPosition=Yr?this.hls.liveSyncPosition||Yr.start:_r)}else _r<=Zr&&(Yr=jr[0]);if(!Yr){const ts=Wr.lowLatencyMode?Ur.partEnd:Ur.fragmentEnd;Yr=this.getFragmentAtPosition(_r,ts,Ur)}return this.mapToInitFragWhenRequired(Yr)}isLoopLoading(_r,Ur){const jr=this.fragmentTracker.getState(_r);return(jr===FragmentState.OK||jr===FragmentState.PARTIAL&&!!_r.gap)&&this.nextLoadPosition>Ur}getNextFragmentLoopLoading(_r,Ur,jr,Gr,Wr){const Zr=_r.gap,Yr=this.getNextFragment(this.nextLoadPosition,Ur);if(Yr===null)return Yr;if(_r=Yr,Zr&&_r&&!_r.gap&&jr.nextStart){const ts=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,jr.nextStart,Gr);if(ts!==null&&jr.len+ts.len>=Wr)return this.log(`buffer full after gaps in "${Gr}" playlist starting at sn: ${_r.sn}`),null}return _r}mapToInitFragWhenRequired(_r){return _r!=null&&_r.initSegment&&!(_r!=null&&_r.initSegment.data)&&!this.bitrateTest?_r.initSegment:_r}getNextPart(_r,Ur,jr){let Gr=-1,Wr=!1,Zr=!0;for(let Yr=0,ts=_r.length;Yr<ts;Yr++){const es=_r[Yr];if(Zr=Zr&&!es.independent,Gr>-1&&jr<es.start)break;const ns=es.loaded;ns?Gr=-1:(Wr||es.independent||Zr)&&es.fragment===Ur&&(Gr=Yr),Wr=ns}return Gr}loadedEndOfParts(_r,Ur){const jr=_r[_r.length-1];return jr&&Ur>jr.start&&jr.loaded}getInitialLiveFragment(_r,Ur){const jr=this.fragPrevious;let Gr=null;if(jr){if(_r.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${jr.programDateTime}`),Gr=findFragmentByPDT(Ur,jr.endProgramDateTime,this.config.maxFragLookUpTolerance)),!Gr){const Wr=jr.sn+1;if(Wr>=_r.startSN&&Wr<=_r.endSN){const Zr=Ur[Wr-_r.startSN];jr.cc===Zr.cc&&(Gr=Zr,this.log(`Live playlist, switching playlist, load frag with next SN: ${Gr.sn}`))}Gr||(Gr=findFragWithCC(Ur,jr.cc),Gr&&this.log(`Live playlist, switching playlist, load frag with same CC: ${Gr.sn}`))}}else{const Wr=this.hls.liveSyncPosition;Wr!==null&&(Gr=this.getFragmentAtPosition(Wr,this.bitrateTest?_r.fragmentEnd:_r.edge,_r))}return Gr}getFragmentAtPosition(_r,Ur,jr){const{config:Gr}=this;let{fragPrevious:Wr}=this,{fragments:Zr,endSN:Yr}=jr;const{fragmentHint:ts}=jr,es=Gr.maxFragLookUpTolerance,ns=jr.partList,Xr=!!(Gr.lowLatencyMode&&ns!=null&&ns.length&&ts);Xr&&ts&&!this.bitrateTest&&(Zr=Zr.concat(ts),Yr=ts.sn);let qr;if(_r<Ur){const _i=_r>Ur-es?0:es;qr=findFragmentByPTS(Wr,Zr,_r,_i)}else qr=Zr[Zr.length-1];if(qr){const _i=qr.sn-jr.startSN,rs=this.fragmentTracker.getState(qr);if((rs===FragmentState.OK||rs===FragmentState.PARTIAL&&qr.gap)&&(Wr=qr),Wr&&qr.sn===Wr.sn&&(!Xr||ns[0].fragment.sn>qr.sn)&&Wr&&qr.level===Wr.level){const ss=Zr[_i+1];qr.sn<Yr&&this.fragmentTracker.getState(ss)!==FragmentState.OK?qr=ss:qr=null}}return qr}synchronizeToLiveEdge(_r){const{config:Ur,media:jr}=this;if(!jr)return;const Gr=this.hls.liveSyncPosition,Wr=jr.currentTime,Zr=_r.fragments[0].start,Yr=_r.edge,ts=Wr>=Zr-Ur.maxFragLookUpTolerance&&Wr<=Yr;if(Gr!==null&&jr.duration>Gr&&(Wr<Gr||!ts)){const es=Ur.liveMaxLatencyDuration!==void 0?Ur.liveMaxLatencyDuration:Ur.liveMaxLatencyDurationCount*_r.targetduration;(!ts&&jr.readyState<4||Wr<Yr-es)&&(this.loadedmetadata||(this.nextLoadPosition=Gr),jr.readyState&&(this.warn(`Playback: ${Wr.toFixed(3)} is located too far from the end of live sliding playlist: ${Yr}, reset currentTime to : ${Gr.toFixed(3)}`),jr.currentTime=Gr))}}alignPlaylists(_r,Ur){const{levels:jr,levelLastLoaded:Gr,fragPrevious:Wr}=this,Zr=Gr!==null?jr[Gr]:null,Yr=_r.fragments.length;if(!Yr)return this.warn("No fragments in live playlist"),0;const ts=_r.fragments[0].start,es=!Ur,ns=_r.alignedSliding&&isFiniteNumber(ts);if(es||!ns&&!ts){alignStream(Wr,Zr,_r);const Xr=_r.fragments[0].start;return this.log(`Live playlist sliding: ${Xr.toFixed(2)} start-sn: ${Ur?Ur.startSN:"na"}->${_r.startSN} prev-sn: ${Wr?Wr.sn:"na"} fragments: ${Yr}`),Xr}return ts}waitForCdnTuneIn(_r){return _r.live&&_r.canBlockReload&&_r.partTarget&&_r.tuneInGoal>Math.max(_r.partHoldBack,_r.partTarget*3)}setStartPosition(_r,Ur){let jr=this.startPosition;if(jr<Ur&&(jr=-1),jr===-1||this.lastCurrentTime===-1){const Gr=this.startTimeOffset!==null,Wr=Gr?this.startTimeOffset:_r.startTimeOffset;Wr!==null&&isFiniteNumber(Wr)?(jr=Ur+Wr,Wr<0&&(jr+=_r.totalduration),jr=Math.min(Math.max(Ur,jr),Ur+_r.totalduration),this.log(`Start time offset ${Wr} found in ${Gr?"multivariant":"media"} playlist, adjust startPosition to ${jr}`),this.startPosition=jr):_r.live?jr=this.hls.liveSyncPosition||Ur:this.startPosition=jr=0,this.lastCurrentTime=jr}this.nextLoadPosition=jr}getLoadPosition(){const{media:_r}=this;let Ur=0;return this.loadedmetadata&&_r?Ur=_r.currentTime:this.nextLoadPosition&&(Ur=this.nextLoadPosition),Ur}handleFragLoadAborted(_r,Ur){this.transmuxer&&_r.sn!=="initSegment"&&_r.stats.aborted&&(this.warn(`Fragment ${_r.sn}${Ur?" part "+Ur.index:""} of level ${_r.level} was aborted`),this.resetFragmentLoading(_r))}resetFragmentLoading(_r){(!this.fragCurrent||!this.fragContextChanged(_r)&&this.state!==State.FRAG_LOADING_WAITING_RETRY)&&(this.state=State.IDLE)}onFragmentOrKeyLoadError(_r,Ur){if(Ur.chunkMeta&&!Ur.frag){const Xr=this.getCurrentContext(Ur.chunkMeta);Xr&&(Ur.frag=Xr.frag)}const jr=Ur.frag;if(!jr||jr.type!==_r||!this.levels)return;if(this.fragContextChanged(jr)){var Gr;this.warn(`Frag load error must match current frag to retry ${jr.url} > ${(Gr=this.fragCurrent)==null?void 0:Gr.url}`);return}const Wr=Ur.details===ErrorDetails.FRAG_GAP;Wr&&this.fragmentTracker.fragBuffered(jr,!0);const Zr=Ur.errorAction,{action:Yr,retryCount:ts=0,retryConfig:es}=Zr||{};if(Zr&&Yr===NetworkErrorAction.RetryRequest&&es){var ns;this.resetStartWhenNotLoaded((ns=this.levelLastLoaded)!=null?ns:jr.level);const Xr=getRetryDelay(es,ts);this.warn(`Fragment ${jr.sn} of ${_r} ${jr.level} errored with ${Ur.details}, retrying loading ${ts+1}/${es.maxNumRetry} in ${Xr}ms`),Zr.resolved=!0,this.retryDate=self.performance.now()+Xr,this.state=State.FRAG_LOADING_WAITING_RETRY}else es&&Zr?(this.resetFragmentErrors(_r),ts<es.maxNumRetry?Wr||(Zr.resolved=!0):logger.warn(`${Ur.details} reached or exceeded max retry (${ts})`)):(Zr==null?void 0:Zr.action)===NetworkErrorAction.SendAlternateToPenaltyBox?this.state=State.WAITING_LEVEL:this.state=State.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(_r){if(this.state===State.PARSING||this.state===State.PARSED){const Ur=_r.parent,jr=this.getFwdBufferInfo(this.mediaBuffer,Ur),Gr=jr&&jr.len>.5;Gr&&this.reduceMaxBufferLength(jr.len);const Wr=!Gr;return Wr&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${Ur} buffer`),_r.frag&&(this.fragmentTracker.removeFragment(_r.frag),this.nextLoadPosition=_r.frag.start),this.resetLoadingState(),Wr}return!1}resetFragmentErrors(_r){_r===PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==State.STOPPED&&(this.state=State.IDLE)}afterBufferFlushed(_r,Ur,jr){if(!_r)return;const Gr=BufferHelper.getBuffered(_r);this.fragmentTracker.detectEvictedFragments(Ur,Gr,jr),this.state===State.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=State.IDLE}resetStartWhenNotLoaded(_r){if(!this.loadedmetadata){this.startFragRequested=!1;const Ur=this.levels?this.levels[_r].details:null;Ur!=null&&Ur.live?(this.startPosition=-1,this.setStartPosition(Ur,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(_r){var Ur;this.warn(`The loading context changed while buffering fragment ${_r.sn} of level ${_r.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded((Ur=this.levelLastLoaded)!=null?Ur:_r.level),this.resetLoadingState()}removeUnbufferedFrags(_r=0){this.fragmentTracker.removeFragmentsInRange(_r,1/0,this.playlistType,!1,!0)}updateLevelTiming(_r,Ur,jr,Gr){var Wr;const Zr=jr.details;if(!Zr){this.warn("level.details undefined");return}if(Object.keys(_r.elementaryStreams).reduce((ts,es)=>{const ns=_r.elementaryStreams[es];if(ns){const Xr=ns.endPTS-ns.startPTS;if(Xr<=0)return this.warn(`Could not parse fragment ${_r.sn} ${es} duration reliably (${Xr})`),ts||!1;const qr=Gr?0:updateFragPTSDTS(Zr,_r,ns.startPTS,ns.endPTS,ns.startDTS,ns.endDTS);return this.hls.trigger(Events.LEVEL_PTS_UPDATED,{details:Zr,level:jr,drift:qr,type:es,frag:_r,start:ns.startPTS,end:ns.endPTS}),!0}return ts},!1))jr.fragmentError=0;else if(((Wr=this.transmuxer)==null?void 0:Wr.error)===null){const ts=new Error(`Found no media in fragment ${_r.sn} of level ${_r.level} resetting transmuxer to fallback to playlist timing`);if(jr.fragmentError===0&&(jr.fragmentError++,_r.gap=!0,this.fragmentTracker.removeFragment(_r),this.fragmentTracker.fragBuffered(_r,!0)),this.warn(ts.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:ts,frag:_r,reason:`Found no media in msn ${_r.sn} of level "${jr.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=State.PARSED,this.hls.trigger(Events.FRAG_PARSED,{frag:_r,part:Ur})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(_r){if(_r.event==="demuxerWorker"){var Ur,jr,Gr;this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded((Ur=(jr=this.levelLastLoaded)!=null?jr:(Gr=this.fragCurrent)==null?void 0:Gr.level)!=null?Ur:0),this.resetLoadingState()}}set state(_r){const Ur=this._state;Ur!==_r&&(this._state=_r,this.log(`${Ur}->${_r}`))}get state(){return this._state}}function getSourceBuffer(){return self.SourceBuffer||self.WebKitSourceBuffer}function isSupported(){const Nr=getMediaSource();if(!Nr)return!1;const _r=getSourceBuffer(),Ur=Nr&&typeof Nr.isTypeSupported=="function"&&Nr.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),jr=!_r||_r.prototype&&typeof _r.prototype.appendBuffer=="function"&&typeof _r.prototype.remove=="function";return!!Ur&&!!jr}function changeTypeSupported(){var Nr;const _r=getSourceBuffer();return typeof(_r==null||(Nr=_r.prototype)==null?void 0:Nr.changeType)=="function"}function hasUMDWorker(){return typeof __HLS_WORKER_BUNDLE__=="function"}function injectWorker(){const Nr=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),_r=self.URL.createObjectURL(Nr);return{worker:new self.Worker(_r),objectURL:_r}}function loadWorker(Nr){const _r=new self.URL(Nr,self.location.href).href;return{worker:new self.Worker(_r),scriptURL:_r}}function dummyTrack(Nr="",_r=9e4){return{type:Nr,id:-1,pid:-1,inputTimeScale:_r,sequenceNumber:-1,samples:[],dropped:0}}class BaseAudioDemuxer{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(_r,Ur,jr,Gr){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(_r){this.initPTS=_r,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(_r,Ur){return!1}appendFrame(_r,Ur,jr){}demux(_r,Ur){this.cachedData&&(_r=appendUint8Array(this.cachedData,_r),this.cachedData=null);let jr=getID3Data(_r,0),Gr=jr?jr.length:0,Wr;const Zr=this._audioTrack,Yr=this._id3Track,ts=jr?getTimeStamp(jr):void 0,es=_r.length;for((this.basePTS===null||this.frameIndex===0&&isFiniteNumber(ts))&&(this.basePTS=initPTSFn(ts,Ur,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),jr&&jr.length>0&&Yr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:jr,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});Gr<es;){if(this.canParse(_r,Gr)){const ns=this.appendFrame(Zr,_r,Gr);ns?(this.frameIndex++,this.lastPTS=ns.sample.pts,Gr+=ns.length,Wr=Gr):Gr=es}else canParse$2(_r,Gr)?(jr=getID3Data(_r,Gr),Yr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:jr,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),Gr+=jr.length,Wr=Gr):Gr++;if(Gr===es&&Wr!==es){const ns=sliceUint8(_r,Wr);this.cachedData?this.cachedData=appendUint8Array(this.cachedData,ns):this.cachedData=ns}}return{audioTrack:Zr,videoTrack:dummyTrack(),id3Track:Yr,textTrack:dummyTrack()}}demuxSampleAes(_r,Ur,jr){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(_r){const Ur=this.cachedData;return Ur&&(this.cachedData=null,this.demux(Ur,0)),{audioTrack:this._audioTrack,videoTrack:dummyTrack(),id3Track:this._id3Track,textTrack:dummyTrack()}}destroy(){}}const initPTSFn=(Nr,_r,Ur)=>{if(isFiniteNumber(Nr))return Nr*90;const jr=Ur?Ur.baseTime*9e4/Ur.timescale:0;return _r*9e4+jr};function getAudioConfig(Nr,_r,Ur,jr){let Gr,Wr,Zr,Yr;const ts=navigator.userAgent.toLowerCase(),es=jr,ns=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Gr=((_r[Ur+2]&192)>>>6)+1;const Xr=(_r[Ur+2]&60)>>>2;if(Xr>ns.length-1){Nr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${Xr}`});return}return Zr=(_r[Ur+2]&1)<<2,Zr|=(_r[Ur+3]&192)>>>6,logger.log(`manifest codec:${jr}, ADTS type:${Gr}, samplingIndex:${Xr}`),/firefox/i.test(ts)?Xr>=6?(Gr=5,Yr=new Array(4),Wr=Xr-3):(Gr=2,Yr=new Array(2),Wr=Xr):ts.indexOf("android")!==-1?(Gr=2,Yr=new Array(2),Wr=Xr):(Gr=5,Yr=new Array(4),jr&&(jr.indexOf("mp4a.40.29")!==-1||jr.indexOf("mp4a.40.5")!==-1)||!jr&&Xr>=6?Wr=Xr-3:((jr&&jr.indexOf("mp4a.40.2")!==-1&&(Xr>=6&&Zr===1||/vivaldi/i.test(ts))||!jr&&Zr===1)&&(Gr=2,Yr=new Array(2)),Wr=Xr)),Yr[0]=Gr<<3,Yr[0]|=(Xr&14)>>1,Yr[1]|=(Xr&1)<<7,Yr[1]|=Zr<<3,Gr===5&&(Yr[1]|=(Wr&14)>>1,Yr[2]=(Wr&1)<<7,Yr[2]|=8,Yr[3]=0),{config:Yr,samplerate:ns[Xr],channelCount:Zr,codec:"mp4a.40."+Gr,manifestCodec:es}}function isHeaderPattern$1(Nr,_r){return Nr[_r]===255&&(Nr[_r+1]&246)===240}function getHeaderLength(Nr,_r){return Nr[_r+1]&1?7:9}function getFullFrameLength(Nr,_r){return(Nr[_r+3]&3)<<11|Nr[_r+4]<<3|(Nr[_r+5]&224)>>>5}function canGetFrameLength(Nr,_r){return _r+5<Nr.length}function isHeader$1(Nr,_r){return _r+1<Nr.length&&isHeaderPattern$1(Nr,_r)}function canParse$1(Nr,_r){return canGetFrameLength(Nr,_r)&&isHeaderPattern$1(Nr,_r)&&getFullFrameLength(Nr,_r)<=Nr.length-_r}function probe$1(Nr,_r){if(isHeader$1(Nr,_r)){const Ur=getHeaderLength(Nr,_r);if(_r+Ur>=Nr.length)return!1;const jr=getFullFrameLength(Nr,_r);if(jr<=Ur)return!1;const Gr=_r+jr;return Gr===Nr.length||isHeader$1(Nr,Gr)}return!1}function initTrackConfig(Nr,_r,Ur,jr,Gr){if(!Nr.samplerate){const Wr=getAudioConfig(_r,Ur,jr,Gr);if(!Wr)return;Nr.config=Wr.config,Nr.samplerate=Wr.samplerate,Nr.channelCount=Wr.channelCount,Nr.codec=Wr.codec,Nr.manifestCodec=Wr.manifestCodec,logger.log(`parsed codec:${Nr.codec}, rate:${Wr.samplerate}, channels:${Wr.channelCount}`)}}function getFrameDuration(Nr){return 1024*9e4/Nr}function parseFrameHeader(Nr,_r){const Ur=getHeaderLength(Nr,_r);if(_r+Ur<=Nr.length){const jr=getFullFrameLength(Nr,_r)-Ur;if(jr>0)return{headerLength:Ur,frameLength:jr}}}function appendFrame$1(Nr,_r,Ur,jr,Gr){const Wr=getFrameDuration(Nr.samplerate),Zr=jr+Gr*Wr,Yr=parseFrameHeader(_r,Ur);let ts;if(Yr){const{frameLength:Xr,headerLength:qr}=Yr,_i=qr+Xr,rs=Math.max(0,Ur+_i-_r.length);rs?(ts=new Uint8Array(_i-qr),ts.set(_r.subarray(Ur+qr,_r.length),0)):ts=_r.subarray(Ur+qr,Ur+_i);const is={unit:ts,pts:Zr};return rs||Nr.samples.push(is),{sample:is,length:_i,missing:rs}}const es=_r.length-Ur;return ts=new Uint8Array(es),ts.set(_r.subarray(Ur,_r.length),0),{sample:{unit:ts,pts:Zr},length:es,missing:-1}}class AACDemuxer extends BaseAudioDemuxer{constructor(_r,Ur){super(),this.observer=void 0,this.config=void 0,this.observer=_r,this.config=Ur}resetInitSegment(_r,Ur,jr,Gr){super.resetInitSegment(_r,Ur,jr,Gr),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:Ur,duration:Gr,inputTimeScale:9e4,dropped:0}}static probe(_r){if(!_r)return!1;let jr=(getID3Data(_r,0)||[]).length;for(let Gr=_r.length;jr<Gr;jr++)if(probe$1(_r,jr))return logger.log("ADTS sync word found !"),!0;return!1}canParse(_r,Ur){return canParse$1(_r,Ur)}appendFrame(_r,Ur,jr){initTrackConfig(_r,this.observer,Ur,jr,_r.manifestCodec);const Gr=appendFrame$1(_r,Ur,jr,this.basePTS,this.frameIndex);if(Gr&&Gr.missing===0)return Gr}}const emsgSchemePattern=/\/emsg[-/]ID3/i;class MP4Demuxer{constructor(_r,Ur){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=Ur}resetTimeStamp(){}resetInitSegment(_r,Ur,jr,Gr){const Wr=this.videoTrack=dummyTrack("video",1),Zr=this.audioTrack=dummyTrack("audio",1),Yr=this.txtTrack=dummyTrack("text",1);if(this.id3Track=dummyTrack("id3",1),this.timeOffset=0,!(_r!=null&&_r.byteLength))return;const ts=parseInitSegment(_r);if(ts.video){const{id:es,timescale:ns,codec:Xr}=ts.video;Wr.id=es,Wr.timescale=Yr.timescale=ns,Wr.codec=Xr}if(ts.audio){const{id:es,timescale:ns,codec:Xr}=ts.audio;Zr.id=es,Zr.timescale=ns,Zr.codec=Xr}Yr.id=RemuxerTrackIdConfig.text,Wr.sampleDuration=0,Wr.duration=Zr.duration=Gr}resetContiguity(){this.remainderData=null}static probe(_r){return _r=_r.length>16384?_r.subarray(0,16384):_r,findBox(_r,["moof"]).length>0}demux(_r,Ur){this.timeOffset=Ur;let jr=_r;const Gr=this.videoTrack,Wr=this.txtTrack;if(this.config.progressive){this.remainderData&&(jr=appendUint8Array(this.remainderData,_r));const Yr=segmentValidRange(jr);this.remainderData=Yr.remainder,Gr.samples=Yr.valid||new Uint8Array}else Gr.samples=jr;const Zr=this.extractID3Track(Gr,Ur);return Wr.samples=parseSamples(Ur,Gr),{videoTrack:Gr,audioTrack:this.audioTrack,id3Track:Zr,textTrack:this.txtTrack}}flush(){const _r=this.timeOffset,Ur=this.videoTrack,jr=this.txtTrack;Ur.samples=this.remainderData||new Uint8Array,this.remainderData=null;const Gr=this.extractID3Track(Ur,this.timeOffset);return jr.samples=parseSamples(_r,Ur),{videoTrack:Ur,audioTrack:dummyTrack(),id3Track:Gr,textTrack:dummyTrack()}}extractID3Track(_r,Ur){const jr=this.id3Track;if(_r.samples.length){const Gr=findBox(_r.samples,["emsg"]);Gr&&Gr.forEach(Wr=>{const Zr=parseEmsg(Wr);if(emsgSchemePattern.test(Zr.schemeIdUri)){const Yr=isFiniteNumber(Zr.presentationTime)?Zr.presentationTime/Zr.timeScale:Ur+Zr.presentationTimeDelta/Zr.timeScale;let ts=Zr.eventDuration===4294967295?Number.POSITIVE_INFINITY:Zr.eventDuration/Zr.timeScale;ts<=.001&&(ts=Number.POSITIVE_INFINITY);const es=Zr.payload;jr.samples.push({data:es,len:es.byteLength,dts:Yr,pts:Yr,type:MetadataSchema.emsg,duration:ts})}})}return jr}demuxSampleAes(_r,Ur,jr){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let chromeVersion$1=null;const BitratesMap=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot=[0,1,1,4];function appendFrame(Nr,_r,Ur,jr,Gr){if(Ur+24>_r.length)return;const Wr=parseHeader(_r,Ur);if(Wr&&Ur+Wr.frameLength<=_r.length){const Zr=Wr.samplesPerFrame*9e4/Wr.sampleRate,Yr=jr+Gr*Zr,ts={unit:_r.subarray(Ur,Ur+Wr.frameLength),pts:Yr,dts:Yr};return Nr.config=[],Nr.channelCount=Wr.channelCount,Nr.samplerate=Wr.sampleRate,Nr.samples.push(ts),{sample:ts,length:Wr.frameLength,missing:0}}}function parseHeader(Nr,_r){const Ur=Nr[_r+1]>>3&3,jr=Nr[_r+1]>>1&3,Gr=Nr[_r+2]>>4&15,Wr=Nr[_r+2]>>2&3;if(Ur!==1&&Gr!==0&&Gr!==15&&Wr!==3){const Zr=Nr[_r+2]>>1&1,Yr=Nr[_r+3]>>6,ts=Ur===3?3-jr:jr===3?3:4,es=BitratesMap[ts*14+Gr-1]*1e3,Xr=SamplingRateMap[(Ur===3?0:Ur===2?1:2)*3+Wr],qr=Yr===3?1:2,_i=SamplesCoefficients[Ur][jr],rs=BytesInSlot[jr],is=_i*8*rs,ss=Math.floor(_i*es/Xr+Zr)*rs;if(chromeVersion$1===null){const cs=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion$1=cs?parseInt(cs[1]):0}return!!chromeVersion$1&&chromeVersion$1<=87&&jr===2&&es>=224e3&&Yr===0&&(Nr[_r+3]=Nr[_r+3]|128),{sampleRate:Xr,channelCount:qr,frameLength:ss,samplesPerFrame:is}}}function isHeaderPattern(Nr,_r){return Nr[_r]===255&&(Nr[_r+1]&224)===224&&(Nr[_r+1]&6)!==0}function isHeader(Nr,_r){return _r+1<Nr.length&&isHeaderPattern(Nr,_r)}function canParse(Nr,_r){return isHeaderPattern(Nr,_r)&&4<=Nr.length-_r}function probe(Nr,_r){if(_r+1<Nr.length&&isHeaderPattern(Nr,_r)){const jr=parseHeader(Nr,_r);let Gr=4;jr!=null&&jr.frameLength&&(Gr=jr.frameLength);const Wr=_r+Gr;return Wr===Nr.length||isHeader(Nr,Wr)}return!1}class ExpGolomb{constructor(_r){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=_r,this.bytesAvailable=_r.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const _r=this.data,Ur=this.bytesAvailable,jr=_r.byteLength-Ur,Gr=new Uint8Array(4),Wr=Math.min(4,Ur);if(Wr===0)throw new Error("no bytes available");Gr.set(_r.subarray(jr,jr+Wr)),this.word=new DataView(Gr.buffer).getUint32(0),this.bitsAvailable=Wr*8,this.bytesAvailable-=Wr}skipBits(_r){let Ur;_r=Math.min(_r,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>_r?(this.word<<=_r,this.bitsAvailable-=_r):(_r-=this.bitsAvailable,Ur=_r>>3,_r-=Ur<<3,this.bytesAvailable-=Ur,this.loadWord(),this.word<<=_r,this.bitsAvailable-=_r)}readBits(_r){let Ur=Math.min(this.bitsAvailable,_r);const jr=this.word>>>32-Ur;if(_r>32&&logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=Ur,this.bitsAvailable>0)this.word<<=Ur;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return Ur=_r-Ur,Ur>0&&this.bitsAvailable?jr<<Ur|this.readBits(Ur):jr}skipLZ(){let _r;for(_r=0;_r<this.bitsAvailable;++_r)if(this.word&2147483648>>>_r)return this.word<<=_r,this.bitsAvailable-=_r,_r;return this.loadWord(),_r+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const _r=this.skipLZ();return this.readBits(_r+1)-1}readEG(){const _r=this.readUEG();return 1&_r?1+_r>>>1:-1*(_r>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(_r){let Ur=8,jr=8,Gr;for(let Wr=0;Wr<_r;Wr++)jr!==0&&(Gr=this.readEG(),jr=(Ur+Gr+256)%256),Ur=jr===0?Ur:jr}readSPS(){let _r=0,Ur=0,jr=0,Gr=0,Wr,Zr,Yr;const ts=this.readUByte.bind(this),es=this.readBits.bind(this),ns=this.readUEG.bind(this),Xr=this.readBoolean.bind(this),qr=this.skipBits.bind(this),_i=this.skipEG.bind(this),rs=this.skipUEG.bind(this),is=this.skipScalingList.bind(this);ts();const ss=ts();if(es(5),qr(3),ts(),rs(),ss===100||ss===110||ss===122||ss===244||ss===44||ss===83||ss===86||ss===118||ss===128){const ms=ns();if(ms===3&&qr(1),rs(),rs(),qr(1),Xr())for(Zr=ms!==3?8:12,Yr=0;Yr<Zr;Yr++)Xr()&&(Yr<6?is(16):is(64))}rs();const os=ns();if(os===0)ns();else if(os===1)for(qr(1),_i(),_i(),Wr=ns(),Yr=0;Yr<Wr;Yr++)_i();rs(),qr(1);const ls=ns(),cs=ns(),ds=es(1);ds===0&&qr(1),qr(1),Xr()&&(_r=ns(),Ur=ns(),jr=ns(),Gr=ns());let fs=[1,1];if(Xr()&&Xr())switch(ts()){case 1:fs=[1,1];break;case 2:fs=[12,11];break;case 3:fs=[10,11];break;case 4:fs=[16,11];break;case 5:fs=[40,33];break;case 6:fs=[24,11];break;case 7:fs=[20,11];break;case 8:fs=[32,11];break;case 9:fs=[80,33];break;case 10:fs=[18,11];break;case 11:fs=[15,11];break;case 12:fs=[64,33];break;case 13:fs=[160,99];break;case 14:fs=[4,3];break;case 15:fs=[3,2];break;case 16:fs=[2,1];break;case 255:{fs=[ts()<<8|ts(),ts()<<8|ts()];break}}return{width:Math.ceil((ls+1)*16-_r*2-Ur*2),height:(2-ds)*(cs+1)*16-(ds?2:4)*(jr+Gr),pixelRatio:fs}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class SampleAesDecrypter{constructor(_r,Ur,jr){this.keyData=void 0,this.decrypter=void 0,this.keyData=jr,this.decrypter=new Decrypter(Ur,{removePKCS7Padding:!1})}decryptBuffer(_r){return this.decrypter.decrypt(_r,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(_r,Ur,jr){const Gr=_r[Ur].unit;if(Gr.length<=16)return;const Wr=Gr.subarray(16,Gr.length-Gr.length%16),Zr=Wr.buffer.slice(Wr.byteOffset,Wr.byteOffset+Wr.length);this.decryptBuffer(Zr).then(Yr=>{const ts=new Uint8Array(Yr);Gr.set(ts,16),this.decrypter.isSync()||this.decryptAacSamples(_r,Ur+1,jr)})}decryptAacSamples(_r,Ur,jr){for(;;Ur++){if(Ur>=_r.length){jr();return}if(!(_r[Ur].unit.length<32)&&(this.decryptAacSample(_r,Ur,jr),!this.decrypter.isSync()))return}}getAvcEncryptedData(_r){const Ur=Math.floor((_r.length-48)/160)*16+16,jr=new Int8Array(Ur);let Gr=0;for(let Wr=32;Wr<_r.length-16;Wr+=160,Gr+=16)jr.set(_r.subarray(Wr,Wr+16),Gr);return jr}getAvcDecryptedUnit(_r,Ur){const jr=new Uint8Array(Ur);let Gr=0;for(let Wr=32;Wr<_r.length-16;Wr+=160,Gr+=16)_r.set(jr.subarray(Gr,Gr+16),Wr);return _r}decryptAvcSample(_r,Ur,jr,Gr,Wr){const Zr=discardEPB(Wr.data),Yr=this.getAvcEncryptedData(Zr);this.decryptBuffer(Yr.buffer).then(ts=>{Wr.data=this.getAvcDecryptedUnit(Zr,ts),this.decrypter.isSync()||this.decryptAvcSamples(_r,Ur,jr+1,Gr)})}decryptAvcSamples(_r,Ur,jr,Gr){if(_r instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;Ur++,jr=0){if(Ur>=_r.length){Gr();return}const Wr=_r[Ur].units;for(;!(jr>=Wr.length);jr++){const Zr=Wr[jr];if(!(Zr.data.length<=48||Zr.type!==1&&Zr.type!==5)&&(this.decryptAvcSample(_r,Ur,jr,Gr,Zr),!this.decrypter.isSync()))return}}}}const PACKET_LENGTH=188;class TSDemuxer{constructor(_r,Ur,jr){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=_r,this.config=Ur,this.typeSupported=jr}static probe(_r){const Ur=TSDemuxer.syncOffset(_r);return Ur>0&&logger.warn(`MPEG2-TS detected but first sync word found @ offset ${Ur}`),Ur!==-1}static syncOffset(_r){const Ur=_r.length;let jr=Math.min(PACKET_LENGTH*5,_r.length-PACKET_LENGTH)+1,Gr=0;for(;Gr<jr;){let Wr=!1,Zr=-1,Yr=0;for(let ts=Gr;ts<Ur;ts+=PACKET_LENGTH)if(_r[ts]===71){if(Yr++,Zr===-1&&(Zr=ts,Zr!==0&&(jr=Math.min(Zr+PACKET_LENGTH*99,_r.length-PACKET_LENGTH)+1)),Wr||(Wr=parsePID(_r,ts)===0),Wr&&Yr>1&&(Zr===0&&Yr>2||ts+PACKET_LENGTH>jr))return Zr}else{if(Yr)return-1;break}Gr++}return-1}static createTrack(_r,Ur){return{container:_r==="video"||_r==="audio"?"video/mp2t":void 0,type:_r,id:RemuxerTrackIdConfig[_r],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:_r==="audio"?Ur:void 0}}resetInitSegment(_r,Ur,jr,Gr){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=TSDemuxer.createTrack("video"),this._audioTrack=TSDemuxer.createTrack("audio",Gr),this._id3Track=TSDemuxer.createTrack("id3"),this._txtTrack=TSDemuxer.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=Ur,this.videoCodec=jr,this._duration=Gr}resetTimeStamp(){}resetContiguity(){const{_audioTrack:_r,_avcTrack:Ur,_id3Track:jr}=this;_r&&(_r.pesData=null),Ur&&(Ur.pesData=null),jr&&(jr.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(_r,Ur,jr=!1,Gr=!1){jr||(this.sampleAes=null);let Wr;const Zr=this._avcTrack,Yr=this._audioTrack,ts=this._id3Track,es=this._txtTrack;let ns=Zr.pid,Xr=Zr.pesData,qr=Yr.pid,_i=ts.pid,rs=Yr.pesData,is=ts.pesData,ss=null,os=this.pmtParsed,ls=this._pmtId,cs=_r.length;if(this.remainderData&&(_r=appendUint8Array(this.remainderData,_r),cs=_r.length,this.remainderData=null),cs<PACKET_LENGTH&&!Gr)return this.remainderData=_r,{audioTrack:Yr,videoTrack:Zr,id3Track:ts,textTrack:es};const ds=Math.max(0,TSDemuxer.syncOffset(_r));cs-=(cs-ds)%PACKET_LENGTH,cs<_r.byteLength&&!Gr&&(this.remainderData=new Uint8Array(_r.buffer,cs,_r.buffer.byteLength-cs));let fs=0;for(let ps=ds;ps<cs;ps+=PACKET_LENGTH)if(_r[ps]===71){const ys=!!(_r[ps+1]&64),ws=parsePID(_r,ps),xs=(_r[ps+3]&48)>>4;let Es;if(xs>1){if(Es=ps+5+_r[ps+4],Es===ps+PACKET_LENGTH)continue}else Es=ps+4;switch(ws){case ns:ys&&(Xr&&(Wr=parsePES(Xr))&&this.parseAVCPES(Zr,es,Wr,!1),Xr={data:[],size:0}),Xr&&(Xr.data.push(_r.subarray(Es,ps+PACKET_LENGTH)),Xr.size+=ps+PACKET_LENGTH-Es);break;case qr:if(ys){if(rs&&(Wr=parsePES(rs)))switch(Yr.segmentCodec){case"aac":this.parseAACPES(Yr,Wr);break;case"mp3":this.parseMPEGPES(Yr,Wr);break}rs={data:[],size:0}}rs&&(rs.data.push(_r.subarray(Es,ps+PACKET_LENGTH)),rs.size+=ps+PACKET_LENGTH-Es);break;case _i:ys&&(is&&(Wr=parsePES(is))&&this.parseID3PES(ts,Wr),is={data:[],size:0}),is&&(is.data.push(_r.subarray(Es,ps+PACKET_LENGTH)),is.size+=ps+PACKET_LENGTH-Es);break;case 0:ys&&(Es+=_r[Es]+1),ls=this._pmtId=parsePAT(_r,Es);break;case ls:{ys&&(Es+=_r[Es]+1);const Rs=parsePMT(_r,Es,this.typeSupported,jr);ns=Rs.avc,ns>0&&(Zr.pid=ns),qr=Rs.audio,qr>0&&(Yr.pid=qr,Yr.segmentCodec=Rs.segmentCodec),_i=Rs.id3,_i>0&&(ts.pid=_i),ss!==null&&!os&&(logger.warn(`MPEG-TS PMT found at ${ps} after unknown PID '${ss}'. Backtracking to sync byte @${ds} to parse all TS packets.`),ss=null,ps=ds-188),os=this.pmtParsed=!0;break}case 17:case 8191:break;default:ss=ws;break}}else fs++;if(fs>0){const ps=new Error(`Found ${fs} TS packet/s that do not start with 0x47`);this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:ps,reason:ps.message})}Zr.pesData=Xr,Yr.pesData=rs,ts.pesData=is;const ms={audioTrack:Yr,videoTrack:Zr,id3Track:ts,textTrack:es};return Gr&&this.extractRemainingSamples(ms),ms}flush(){const{remainderData:_r}=this;this.remainderData=null;let Ur;return _r?Ur=this.demux(_r,-1,!1,!0):Ur={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(Ur),this.sampleAes?this.decrypt(Ur,this.sampleAes):Ur}extractRemainingSamples(_r){const{audioTrack:Ur,videoTrack:jr,id3Track:Gr,textTrack:Wr}=_r,Zr=jr.pesData,Yr=Ur.pesData,ts=Gr.pesData;let es;if(Zr&&(es=parsePES(Zr))?(this.parseAVCPES(jr,Wr,es,!0),jr.pesData=null):jr.pesData=Zr,Yr&&(es=parsePES(Yr))){switch(Ur.segmentCodec){case"aac":this.parseAACPES(Ur,es);break;case"mp3":this.parseMPEGPES(Ur,es);break}Ur.pesData=null}else Yr!=null&&Yr.size&&logger.log("last AAC PES packet truncated,might overlap between fragments"),Ur.pesData=Yr;ts&&(es=parsePES(ts))?(this.parseID3PES(Gr,es),Gr.pesData=null):Gr.pesData=ts}demuxSampleAes(_r,Ur,jr){const Gr=this.demux(_r,jr,!0,!this.config.progressive),Wr=this.sampleAes=new SampleAesDecrypter(this.observer,this.config,Ur);return this.decrypt(Gr,Wr)}decrypt(_r,Ur){return new Promise(jr=>{const{audioTrack:Gr,videoTrack:Wr}=_r;Gr.samples&&Gr.segmentCodec==="aac"?Ur.decryptAacSamples(Gr.samples,0,()=>{Wr.samples?Ur.decryptAvcSamples(Wr.samples,0,0,()=>{jr(_r)}):jr(_r)}):Wr.samples&&Ur.decryptAvcSamples(Wr.samples,0,0,()=>{jr(_r)})})}destroy(){this._duration=0}parseAVCPES(_r,Ur,jr,Gr){const Wr=this.parseAVCNALu(_r,jr.data);let Zr=this.avcSample,Yr,ts=!1;jr.data=null,Zr&&Wr.length&&!_r.audFound&&(pushAccessUnit(Zr,_r),Zr=this.avcSample=createAVCSample(!1,jr.pts,jr.dts,"")),Wr.forEach(es=>{var ns;switch(es.type){case 1:{let qr=!1;Yr=!0;const _i=es.data;if(ts&&_i.length>4){const rs=new ExpGolomb(_i).readSliceType();(rs===2||rs===4||rs===7||rs===9)&&(qr=!0)}if(qr){var Xr;(Xr=Zr)!=null&&Xr.frame&&!Zr.key&&(pushAccessUnit(Zr,_r),Zr=this.avcSample=null)}Zr||(Zr=this.avcSample=createAVCSample(!0,jr.pts,jr.dts,"")),Zr.frame=!0,Zr.key=qr;break}case 5:Yr=!0,(ns=Zr)!=null&&ns.frame&&!Zr.key&&(pushAccessUnit(Zr,_r),Zr=this.avcSample=null),Zr||(Zr=this.avcSample=createAVCSample(!0,jr.pts,jr.dts,"")),Zr.key=!0,Zr.frame=!0;break;case 6:{Yr=!0,parseSEIMessageFromNALu(es.data,1,jr.pts,Ur.samples);break}case 7:if(Yr=!0,ts=!0,!_r.sps){const qr=es.data,rs=new ExpGolomb(qr).readSPS();_r.width=rs.width,_r.height=rs.height,_r.pixelRatio=rs.pixelRatio,_r.sps=[qr],_r.duration=this._duration;const is=qr.subarray(1,4);let ss="avc1.";for(let os=0;os<3;os++){let ls=is[os].toString(16);ls.length<2&&(ls="0"+ls),ss+=ls}_r.codec=ss}break;case 8:Yr=!0,_r.pps||(_r.pps=[es.data]);break;case 9:Yr=!1,_r.audFound=!0,Zr&&pushAccessUnit(Zr,_r),Zr=this.avcSample=createAVCSample(!1,jr.pts,jr.dts,"");break;case 12:Yr=!0;break;default:Yr=!1,Zr&&(Zr.debug+="unknown NAL "+es.type+" ");break}Zr&&Yr&&Zr.units.push(es)}),Gr&&Zr&&(pushAccessUnit(Zr,_r),this.avcSample=null)}getLastNalUnit(_r){var Ur;let jr=this.avcSample,Gr;if((!jr||jr.units.length===0)&&(jr=_r[_r.length-1]),(Ur=jr)!=null&&Ur.units){const Wr=jr.units;Gr=Wr[Wr.length-1]}return Gr}parseAVCNALu(_r,Ur){const jr=Ur.byteLength;let Gr=_r.naluState||0;const Wr=Gr,Zr=[];let Yr=0,ts,es,ns,Xr=-1,qr=0;for(Gr===-1&&(Xr=0,qr=Ur[0]&31,Gr=0,Yr=1);Yr<jr;){if(ts=Ur[Yr++],!Gr){Gr=ts?0:1;continue}if(Gr===1){Gr=ts?0:2;continue}if(!ts)Gr=3;else if(ts===1){if(Xr>=0){const _i={data:Ur.subarray(Xr,Yr-Gr-1),type:qr};Zr.push(_i)}else{const _i=this.getLastNalUnit(_r.samples);if(_i&&(Wr&&Yr<=4-Wr&&_i.state&&(_i.data=_i.data.subarray(0,_i.data.byteLength-Wr)),es=Yr-Gr-1,es>0)){const rs=new Uint8Array(_i.data.byteLength+es);rs.set(_i.data,0),rs.set(Ur.subarray(0,es),_i.data.byteLength),_i.data=rs,_i.state=0}}Yr<jr?(ns=Ur[Yr]&31,Xr=Yr,qr=ns,Gr=0):Gr=-1}else Gr=0}if(Xr>=0&&Gr>=0){const _i={data:Ur.subarray(Xr,jr),type:qr,state:Gr};Zr.push(_i)}if(Zr.length===0){const _i=this.getLastNalUnit(_r.samples);if(_i){const rs=new Uint8Array(_i.data.byteLength+Ur.byteLength);rs.set(_i.data,0),rs.set(Ur,_i.data.byteLength),_i.data=rs}}return _r.naluState=Gr,Zr}parseAACPES(_r,Ur){let jr=0;const Gr=this.aacOverFlow;let Wr=Ur.data;if(Gr){this.aacOverFlow=null;const Xr=Gr.missing,qr=Gr.sample.unit.byteLength;if(Xr===-1){const _i=new Uint8Array(qr+Wr.byteLength);_i.set(Gr.sample.unit,0),_i.set(Wr,qr),Wr=_i}else{const _i=qr-Xr;Gr.sample.unit.set(Wr.subarray(0,Xr),_i),_r.samples.push(Gr.sample),jr=Gr.missing}}let Zr,Yr;for(Zr=jr,Yr=Wr.length;Zr<Yr-1&&!isHeader$1(Wr,Zr);Zr++);if(Zr!==jr){let Xr;const qr=Zr<Yr-1;qr?Xr=`AAC PES did not start with ADTS header,offset:${Zr}`:Xr="No ADTS header found in AAC PES";const _i=new Error(Xr);if(logger.warn(`parsing error: ${Xr}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,levelRetry:qr,error:_i,reason:Xr}),!qr)return}initTrackConfig(_r,this.observer,Wr,Zr,this.audioCodec);let ts;if(Ur.pts!==void 0)ts=Ur.pts;else if(Gr){const Xr=getFrameDuration(_r.samplerate);ts=Gr.sample.pts+Xr}else{logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let es=0,ns;for(;Zr<Yr;)if(ns=appendFrame$1(_r,Wr,Zr,ts,es),Zr+=ns.length,ns.missing){this.aacOverFlow=ns;break}else for(es++;Zr<Yr-1&&!isHeader$1(Wr,Zr);Zr++);}parseMPEGPES(_r,Ur){const jr=Ur.data,Gr=jr.length;let Wr=0,Zr=0;const Yr=Ur.pts;if(Yr===void 0){logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;Zr<Gr;)if(isHeader(jr,Zr)){const ts=appendFrame(_r,jr,Zr,Yr,Wr);if(ts)Zr+=ts.length,Wr++;else break}else Zr++}parseID3PES(_r,Ur){if(Ur.pts===void 0){logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const jr=_extends({},Ur,{type:this._avcTrack?MetadataSchema.emsg:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});_r.samples.push(jr)}}function createAVCSample(Nr,_r,Ur,jr){return{key:Nr,frame:!1,pts:_r,dts:Ur,units:[],debug:jr,length:0}}function parsePID(Nr,_r){return((Nr[_r+1]&31)<<8)+Nr[_r+2]}function parsePAT(Nr,_r){return(Nr[_r+10]&31)<<8|Nr[_r+11]}function parsePMT(Nr,_r,Ur,jr){const Gr={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},Wr=(Nr[_r+1]&15)<<8|Nr[_r+2],Zr=_r+3+Wr-4,Yr=(Nr[_r+10]&15)<<8|Nr[_r+11];for(_r+=12+Yr;_r<Zr;){const ts=parsePID(Nr,_r);switch(Nr[_r]){case 207:if(!jr){logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:Gr.audio===-1&&(Gr.audio=ts);break;case 21:Gr.id3===-1&&(Gr.id3=ts);break;case 219:if(!jr){logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:Gr.avc===-1&&(Gr.avc=ts);break;case 3:case 4:Ur.mpeg!==!0&&Ur.mp3!==!0?logger.log("MPEG audio found, not supported in this browser"):Gr.audio===-1&&(Gr.audio=ts,Gr.segmentCodec="mp3");break;case 36:logger.warn("Unsupported HEVC stream type found");break}_r+=((Nr[_r+3]&15)<<8|Nr[_r+4])+5}return Gr}function parsePES(Nr){let _r=0,Ur,jr,Gr,Wr,Zr;const Yr=Nr.data;if(!Nr||Nr.size===0)return null;for(;Yr[0].length<19&&Yr.length>1;){const es=new Uint8Array(Yr[0].length+Yr[1].length);es.set(Yr[0]),es.set(Yr[1],Yr[0].length),Yr[0]=es,Yr.splice(1,1)}if(Ur=Yr[0],(Ur[0]<<16)+(Ur[1]<<8)+Ur[2]===1){if(jr=(Ur[4]<<8)+Ur[5],jr&&jr>Nr.size-6)return null;const es=Ur[7];es&192&&(Wr=(Ur[9]&14)*536870912+(Ur[10]&255)*4194304+(Ur[11]&254)*16384+(Ur[12]&255)*128+(Ur[13]&254)/2,es&64?(Zr=(Ur[14]&14)*536870912+(Ur[15]&255)*4194304+(Ur[16]&254)*16384+(Ur[17]&255)*128+(Ur[18]&254)/2,Wr-Zr>60*9e4&&(logger.warn(`${Math.round((Wr-Zr)/9e4)}s delta between PTS and DTS, align them`),Wr=Zr)):Zr=Wr),Gr=Ur[8];let ns=Gr+9;if(Nr.size<=ns)return null;Nr.size-=ns;const Xr=new Uint8Array(Nr.size);for(let qr=0,_i=Yr.length;qr<_i;qr++){Ur=Yr[qr];let rs=Ur.byteLength;if(ns)if(ns>rs){ns-=rs;continue}else Ur=Ur.subarray(ns),rs-=ns,ns=0;Xr.set(Ur,_r),_r+=rs}return jr&&(jr-=Gr+3),{data:Xr,pts:Wr,dts:Zr,len:jr}}return null}function pushAccessUnit(Nr,_r){if(Nr.units.length&&Nr.frame){if(Nr.pts===void 0){const Ur=_r.samples,jr=Ur.length;if(jr){const Gr=Ur[jr-1];Nr.pts=Gr.pts,Nr.dts=Gr.dts}else{_r.dropped++;return}}_r.samples.push(Nr)}Nr.debug.length&&logger.log(Nr.pts+"/"+Nr.dts+":"+Nr.debug)}class MP3Demuxer extends BaseAudioDemuxer{resetInitSegment(_r,Ur,jr,Gr){super.resetInitSegment(_r,Ur,jr,Gr),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:Ur,duration:Gr,inputTimeScale:9e4,dropped:0}}static probe(_r){if(!_r)return!1;let jr=(getID3Data(_r,0)||[]).length;for(let Gr=_r.length;jr<Gr;jr++)if(probe(_r,jr))return logger.log("MPEG Audio sync word found !"),!0;return!1}canParse(_r,Ur){return canParse(_r,Ur)}appendFrame(_r,Ur,jr){if(this.basePTS!==null)return appendFrame(_r,Ur,jr,this.basePTS,this.frameIndex)}}class AAC{static getSilentFrame(_r,Ur){switch(_r){case"mp4a.40.2":if(Ur===1)return new Uint8Array([0,200,0,128,35,128]);if(Ur===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(Ur===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(Ur===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(Ur===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(Ur===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(Ur===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Ur===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Ur===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const UINT32_MAX=Math.pow(2,32)-1;class MP4{static init(){MP4.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let _r;for(_r in MP4.types)MP4.types.hasOwnProperty(_r)&&(MP4.types[_r]=[_r.charCodeAt(0),_r.charCodeAt(1),_r.charCodeAt(2),_r.charCodeAt(3)]);const Ur=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),jr=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:Ur,audio:jr};const Gr=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Wr=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=Wr,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const Zr=new Uint8Array([105,115,111,109]),Yr=new Uint8Array([97,118,99,49]),ts=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,Zr,ts,Zr,Yr),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,Gr))}static box(_r,...Ur){let jr=8,Gr=Ur.length;const Wr=Gr;for(;Gr--;)jr+=Ur[Gr].byteLength;const Zr=new Uint8Array(jr);for(Zr[0]=jr>>24&255,Zr[1]=jr>>16&255,Zr[2]=jr>>8&255,Zr[3]=jr&255,Zr.set(_r,4),Gr=0,jr=8;Gr<Wr;Gr++)Zr.set(Ur[Gr],jr),jr+=Ur[Gr].byteLength;return Zr}static hdlr(_r){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[_r])}static mdat(_r){return MP4.box(MP4.types.mdat,_r)}static mdhd(_r,Ur){Ur*=_r;const jr=Math.floor(Ur/(UINT32_MAX+1)),Gr=Math.floor(Ur%(UINT32_MAX+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,_r>>24&255,_r>>16&255,_r>>8&255,_r&255,jr>>24,jr>>16&255,jr>>8&255,jr&255,Gr>>24,Gr>>16&255,Gr>>8&255,Gr&255,85,196,0,0]))}static mdia(_r){return MP4.box(MP4.types.mdia,MP4.mdhd(_r.timescale,_r.duration),MP4.hdlr(_r.type),MP4.minf(_r))}static mfhd(_r){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,_r>>24,_r>>16&255,_r>>8&255,_r&255]))}static minf(_r){return _r.type==="audio"?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(_r)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(_r))}static moof(_r,Ur,jr){return MP4.box(MP4.types.moof,MP4.mfhd(_r),MP4.traf(jr,Ur))}static moov(_r){let Ur=_r.length;const jr=[];for(;Ur--;)jr[Ur]=MP4.trak(_r[Ur]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(_r[0].timescale,_r[0].duration)].concat(jr).concat(MP4.mvex(_r)))}static mvex(_r){let Ur=_r.length;const jr=[];for(;Ur--;)jr[Ur]=MP4.trex(_r[Ur]);return MP4.box.apply(null,[MP4.types.mvex,...jr])}static mvhd(_r,Ur){Ur*=_r;const jr=Math.floor(Ur/(UINT32_MAX+1)),Gr=Math.floor(Ur%(UINT32_MAX+1)),Wr=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,_r>>24&255,_r>>16&255,_r>>8&255,_r&255,jr>>24,jr>>16&255,jr>>8&255,jr&255,Gr>>24,Gr>>16&255,Gr>>8&255,Gr&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,Wr)}static sdtp(_r){const Ur=_r.samples||[],jr=new Uint8Array(4+Ur.length);let Gr,Wr;for(Gr=0;Gr<Ur.length;Gr++)Wr=Ur[Gr].flags,jr[Gr+4]=Wr.dependsOn<<4|Wr.isDependedOn<<2|Wr.hasRedundancy;return MP4.box(MP4.types.sdtp,jr)}static stbl(_r){return MP4.box(MP4.types.stbl,MP4.stsd(_r),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))}static avc1(_r){let Ur=[],jr=[],Gr,Wr,Zr;for(Gr=0;Gr<_r.sps.length;Gr++)Wr=_r.sps[Gr],Zr=Wr.byteLength,Ur.push(Zr>>>8&255),Ur.push(Zr&255),Ur=Ur.concat(Array.prototype.slice.call(Wr));for(Gr=0;Gr<_r.pps.length;Gr++)Wr=_r.pps[Gr],Zr=Wr.byteLength,jr.push(Zr>>>8&255),jr.push(Zr&255),jr=jr.concat(Array.prototype.slice.call(Wr));const Yr=MP4.box(MP4.types.avcC,new Uint8Array([1,Ur[3],Ur[4],Ur[5],255,224|_r.sps.length].concat(Ur).concat([_r.pps.length]).concat(jr))),ts=_r.width,es=_r.height,ns=_r.pixelRatio[0],Xr=_r.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ts>>8&255,ts&255,es>>8&255,es&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Yr,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([ns>>24,ns>>16&255,ns>>8&255,ns&255,Xr>>24,Xr>>16&255,Xr>>8&255,Xr&255])))}static esds(_r){const Ur=_r.config.length;return new Uint8Array([0,0,0,0,3,23+Ur,0,1,0,4,15+Ur,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([Ur]).concat(_r.config).concat([6,1,2]))}static mp4a(_r){const Ur=_r.samplerate;return MP4.box(MP4.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,_r.channelCount,0,16,0,0,0,0,Ur>>8&255,Ur&255,0,0]),MP4.box(MP4.types.esds,MP4.esds(_r)))}static mp3(_r){const Ur=_r.samplerate;return MP4.box(MP4.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,_r.channelCount,0,16,0,0,0,0,Ur>>8&255,Ur&255,0,0]))}static stsd(_r){return _r.type==="audio"?_r.segmentCodec==="mp3"&&_r.codec==="mp3"?MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(_r)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(_r)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(_r))}static tkhd(_r){const Ur=_r.id,jr=_r.duration*_r.timescale,Gr=_r.width,Wr=_r.height,Zr=Math.floor(jr/(UINT32_MAX+1)),Yr=Math.floor(jr%(UINT32_MAX+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Ur>>24&255,Ur>>16&255,Ur>>8&255,Ur&255,0,0,0,0,Zr>>24,Zr>>16&255,Zr>>8&255,Zr&255,Yr>>24,Yr>>16&255,Yr>>8&255,Yr&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,Gr>>8&255,Gr&255,0,0,Wr>>8&255,Wr&255,0,0]))}static traf(_r,Ur){const jr=MP4.sdtp(_r),Gr=_r.id,Wr=Math.floor(Ur/(UINT32_MAX+1)),Zr=Math.floor(Ur%(UINT32_MAX+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,Gr>>24,Gr>>16&255,Gr>>8&255,Gr&255])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,Wr>>24,Wr>>16&255,Wr>>8&255,Wr&255,Zr>>24,Zr>>16&255,Zr>>8&255,Zr&255])),MP4.trun(_r,jr.length+16+20+8+16+8+8),jr)}static trak(_r){return _r.duration=_r.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(_r),MP4.mdia(_r))}static trex(_r){const Ur=_r.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,Ur>>24,Ur>>16&255,Ur>>8&255,Ur&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(_r,Ur){const jr=_r.samples||[],Gr=jr.length,Wr=12+16*Gr,Zr=new Uint8Array(Wr);let Yr,ts,es,ns,Xr,qr;for(Ur+=8+Wr,Zr.set([_r.type==="video"?1:0,0,15,1,Gr>>>24&255,Gr>>>16&255,Gr>>>8&255,Gr&255,Ur>>>24&255,Ur>>>16&255,Ur>>>8&255,Ur&255],0),Yr=0;Yr<Gr;Yr++)ts=jr[Yr],es=ts.duration,ns=ts.size,Xr=ts.flags,qr=ts.cts,Zr.set([es>>>24&255,es>>>16&255,es>>>8&255,es&255,ns>>>24&255,ns>>>16&255,ns>>>8&255,ns&255,Xr.isLeading<<2|Xr.dependsOn,Xr.isDependedOn<<6|Xr.hasRedundancy<<4|Xr.paddingValue<<1|Xr.isNonSync,Xr.degradPrio&61440,Xr.degradPrio&15,qr>>>24&255,qr>>>16&255,qr>>>8&255,qr&255],12+16*Yr);return MP4.box(MP4.types.trun,Zr)}static initSegment(_r){MP4.types||MP4.init();const Ur=MP4.moov(_r),jr=new Uint8Array(MP4.FTYP.byteLength+Ur.byteLength);return jr.set(MP4.FTYP),jr.set(Ur,MP4.FTYP.byteLength),jr}}MP4.types=void 0;MP4.HDLR_TYPES=void 0;MP4.STTS=void 0;MP4.STSC=void 0;MP4.STCO=void 0;MP4.STSZ=void 0;MP4.VMHD=void 0;MP4.SMHD=void 0;MP4.STSD=void 0;MP4.FTYP=void 0;MP4.DINF=void 0;const MPEG_TS_CLOCK_FREQ_HZ=9e4;function toTimescaleFromBase(Nr,_r,Ur=1,jr=!1){const Gr=Nr*_r*Ur;return jr?Math.round(Gr):Gr}function toTimescaleFromScale(Nr,_r,Ur=1,jr=!1){return toTimescaleFromBase(Nr,_r,1/Ur,jr)}function toMsFromMpegTsClock(Nr,_r=!1){return toTimescaleFromBase(Nr,1e3,1/MPEG_TS_CLOCK_FREQ_HZ,_r)}function toMpegTsClockFromTimescale(Nr,_r=1){return toTimescaleFromBase(Nr,MPEG_TS_CLOCK_FREQ_HZ,1/_r)}const MAX_SILENT_FRAME_DURATION=10*1e3,AAC_SAMPLES_PER_FRAME=1024,MPEG_AUDIO_SAMPLE_PER_FRAME=1152;let chromeVersion=null,safariWebkitVersion=null;class MP4Remuxer{constructor(_r,Ur,jr,Gr=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=_r,this.config=Ur,this.typeSupported=jr,this.ISGenerated=!1,chromeVersion===null){const Zr=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion=Zr?parseInt(Zr[1]):0}if(safariWebkitVersion===null){const Wr=navigator.userAgent.match(/Safari\/(\d+)/i);safariWebkitVersion=Wr?parseInt(Wr[1]):0}}destroy(){}resetTimeStamp(_r){logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=_r}resetNextTimestamp(){logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(_r){let Ur=!1;const jr=_r.reduce((Gr,Wr)=>{const Zr=Wr.pts-Gr;return Zr<-4294967296?(Ur=!0,normalizePts(Gr,Wr.pts)):Zr>0?Gr:Wr.pts},_r[0].pts);return Ur&&logger.debug("PTS rollover detected"),jr}remux(_r,Ur,jr,Gr,Wr,Zr,Yr,ts){let es,ns,Xr,qr,_i,rs,is=Wr,ss=Wr;const os=_r.pid>-1,ls=Ur.pid>-1,cs=Ur.samples.length,ds=_r.samples.length>0,fs=Yr&&cs>0||cs>1;if((!os||ds)&&(!ls||fs)||this.ISGenerated||Yr){this.ISGenerated||(Xr=this.generateIS(_r,Ur,Wr,Zr));const ps=this.isVideoContiguous;let ys=-1,ws;if(fs&&(ys=findKeyframeIndex(Ur.samples),!ps&&this.config.forceKeyFrameOnDiscontinuity))if(rs=!0,ys>0){logger.warn(`[mp4-remuxer]: Dropped ${ys} out of ${cs} video samples due to a missing keyframe`);const xs=this.getVideoStartPts(Ur.samples);Ur.samples=Ur.samples.slice(ys),Ur.dropped+=ys,ss+=(Ur.samples[0].pts-xs)/Ur.inputTimeScale,ws=ss}else ys===-1&&(logger.warn(`[mp4-remuxer]: No keyframe found out of ${cs} video samples`),rs=!1);if(this.ISGenerated){if(ds&&fs){const xs=this.getVideoStartPts(Ur.samples),Rs=(normalizePts(_r.samples[0].pts,xs)-xs)/Ur.inputTimeScale;is+=Math.max(0,Rs),ss+=Math.max(0,-Rs)}if(ds){if(_r.samplerate||(logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Xr=this.generateIS(_r,Ur,Wr,Zr)),ns=this.remuxAudio(_r,is,this.isAudioContiguous,Zr,ls||fs||ts===PlaylistLevelType.AUDIO?ss:void 0),fs){const xs=ns?ns.endPTS-ns.startPTS:0;Ur.inputTimeScale||(logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Xr=this.generateIS(_r,Ur,Wr,Zr)),es=this.remuxVideo(Ur,ss,ps,xs)}}else fs&&(es=this.remuxVideo(Ur,ss,ps,0));es&&(es.firstKeyFrame=ys,es.independent=ys!==-1,es.firstKeyFramePTS=ws)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(jr.samples.length&&(_i=flushTextTrackMetadataCueSamples(jr,Wr,this._initPTS,this._initDTS)),Gr.samples.length&&(qr=flushTextTrackUserdataCueSamples(Gr,Wr,this._initPTS))),{audio:ns,video:es,initSegment:Xr,independent:rs,text:qr,id3:_i}}generateIS(_r,Ur,jr,Gr){const Wr=_r.samples,Zr=Ur.samples,Yr=this.typeSupported,ts={},es=this._initPTS;let ns=!es||Gr,Xr="audio/mp4",qr,_i,rs;if(ns&&(qr=_i=1/0),_r.config&&Wr.length){switch(_r.timescale=_r.samplerate,_r.segmentCodec){case"mp3":Yr.mpeg?(Xr="audio/mpeg",_r.codec=""):Yr.mp3&&(_r.codec="mp3");break}ts.audio={id:"audio",container:Xr,codec:_r.codec,initSegment:_r.segmentCodec==="mp3"&&Yr.mpeg?new Uint8Array(0):MP4.initSegment([_r]),metadata:{channelCount:_r.channelCount}},ns&&(rs=_r.inputTimeScale,!es||rs!==es.timescale?qr=_i=Wr[0].pts-Math.round(rs*jr):ns=!1)}if(Ur.sps&&Ur.pps&&Zr.length&&(Ur.timescale=Ur.inputTimeScale,ts.video={id:"main",container:"video/mp4",codec:Ur.codec,initSegment:MP4.initSegment([Ur]),metadata:{width:Ur.width,height:Ur.height}},ns))if(rs=Ur.inputTimeScale,!es||rs!==es.timescale){const is=this.getVideoStartPts(Zr),ss=Math.round(rs*jr);_i=Math.min(_i,normalizePts(Zr[0].dts,is)-ss),qr=Math.min(qr,is-ss)}else ns=!1;if(Object.keys(ts).length)return this.ISGenerated=!0,ns?(this._initPTS={baseTime:qr,timescale:rs},this._initDTS={baseTime:_i,timescale:rs}):qr=rs=void 0,{tracks:ts,initPTS:qr,timescale:rs}}remuxVideo(_r,Ur,jr,Gr){const Wr=_r.inputTimeScale,Zr=_r.samples,Yr=[],ts=Zr.length,es=this._initPTS;let ns=this.nextAvcDts,Xr=8,qr=this.videoSampleDuration,_i,rs,is=Number.POSITIVE_INFINITY,ss=Number.NEGATIVE_INFINITY,os=!1;if(!jr||ns===null){const As=Ur*Wr,Us=Zr[0].pts-normalizePts(Zr[0].dts,Zr[0].pts);ns=As-Us}const ls=es.baseTime*Wr/es.timescale;for(let As=0;As<ts;As++){const Us=Zr[As];Us.pts=normalizePts(Us.pts-ls,ns),Us.dts=normalizePts(Us.dts-ls,ns),Us.dts<Zr[As>0?As-1:As].dts&&(os=!0)}os&&Zr.sort(function(As,Us){const Ks=As.dts-Us.dts,Ws=As.pts-Us.pts;return Ks||Ws}),_i=Zr[0].dts,rs=Zr[Zr.length-1].dts;const cs=rs-_i,ds=cs?Math.round(cs/(ts-1)):qr||_r.inputTimeScale/30;if(jr){const As=_i-ns,Us=As>ds,Ks=As<-1;if((Us||Ks)&&(Us?logger.warn(`AVC: ${toMsFromMpegTsClock(As,!0)} ms (${As}dts) hole between fragments detected, filling it`):logger.warn(`AVC: ${toMsFromMpegTsClock(-As,!0)} ms (${As}dts) overlapping between fragments detected`),!Ks||ns>=Zr[0].pts)){_i=ns;const Ws=Zr[0].pts-As;Zr[0].dts=_i,Zr[0].pts=Ws,logger.log(`Video: First PTS/DTS adjusted: ${toMsFromMpegTsClock(Ws,!0)}/${toMsFromMpegTsClock(_i,!0)}, delta: ${toMsFromMpegTsClock(As,!0)} ms`)}}_i=Math.max(0,_i);let fs=0,ms=0;for(let As=0;As<ts;As++){const Us=Zr[As],Ks=Us.units,Ws=Ks.length;let Js=0;for(let ho=0;ho<Ws;ho++)Js+=Ks[ho].data.length;ms+=Js,fs+=Ws,Us.length=Js,Us.dts=Math.max(Us.dts,_i),is=Math.min(Us.pts,is),ss=Math.max(Us.pts,ss)}rs=Zr[ts-1].dts;const ps=ms+4*fs+8;let ys;try{ys=new Uint8Array(ps)}catch(As){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:As,bytes:ps,reason:`fail allocating video mdat ${ps}`});return}const ws=new DataView(ys.buffer);ws.setUint32(0,ps),ys.set(MP4.types.mdat,4);let xs=!1,Es=Number.POSITIVE_INFINITY,Rs=Number.POSITIVE_INFINITY,_s=Number.NEGATIVE_INFINITY,Bs=Number.NEGATIVE_INFINITY;for(let As=0;As<ts;As++){const Us=Zr[As],Ks=Us.units;let Ws=0;for(let so=0,io=Ks.length;so<io;so++){const vo=Ks[so],co=vo.data,go=vo.data.byteLength;ws.setUint32(Xr,go),Xr+=4,ys.set(co,Xr),Xr+=go,Ws+=4+go}let Js;if(As<ts-1)qr=Zr[As+1].dts-Us.dts,Js=Zr[As+1].pts-Us.pts;else{const so=this.config,io=As>0?Us.dts-Zr[As-1].dts:ds;if(Js=As>0?Us.pts-Zr[As-1].pts:ds,so.stretchShortVideoTrack&&this.nextAudioPts!==null){const vo=Math.floor(so.maxBufferHole*Wr),co=(Gr?is+Gr*Wr:this.nextAudioPts)-Us.pts;co>vo?(qr=co-io,qr<0?qr=io:xs=!0,logger.log(`[mp4-remuxer]: It is approximately ${co/90} ms to the next segment; using duration ${qr/90} ms for the last video frame.`)):qr=io}else qr=io}const ho=Math.round(Us.pts-Us.dts);Es=Math.min(Es,qr),_s=Math.max(_s,qr),Rs=Math.min(Rs,Js),Bs=Math.max(Bs,Js),Yr.push(new Mp4Sample(Us.key,qr,Ws,ho))}if(Yr.length){if(chromeVersion){if(chromeVersion<70){const As=Yr[0].flags;As.dependsOn=2,As.isNonSync=0}}else if(safariWebkitVersion&&Bs-Rs<_s-Es&&ds/_s<.025&&Yr[0].cts===0){logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let As=_i;for(let Us=0,Ks=Yr.length;Us<Ks;Us++){const Ws=As+Yr[Us].duration,Js=As+Yr[Us].cts;if(Us<Ks-1){const ho=Ws+Yr[Us+1].cts;Yr[Us].duration=ho-Js}else Yr[Us].duration=Us?Yr[Us-1].duration:ds;Yr[Us].cts=0,As=Ws}}}qr=xs||!qr?ds:qr,this.nextAvcDts=ns=rs+qr,this.videoSampleDuration=qr,this.isVideoContiguous=!0;const vs=MP4.moof(_r.sequenceNumber++,_i,_extends({},_r,{samples:Yr})),Cs="video",Ss={data1:vs,data2:ys,startPTS:is/Wr,endPTS:(ss+qr)/Wr,startDTS:_i/Wr,endDTS:ns/Wr,type:Cs,hasAudio:!1,hasVideo:!0,nb:Yr.length,dropped:_r.dropped};return _r.samples=[],_r.dropped=0,Ss}remuxAudio(_r,Ur,jr,Gr,Wr){const Zr=_r.inputTimeScale,Yr=_r.samplerate?_r.samplerate:Zr,ts=Zr/Yr,es=_r.segmentCodec==="aac"?AAC_SAMPLES_PER_FRAME:MPEG_AUDIO_SAMPLE_PER_FRAME,ns=es*ts,Xr=this._initPTS,qr=_r.segmentCodec==="mp3"&&this.typeSupported.mpeg,_i=[],rs=Wr!==void 0;let is=_r.samples,ss=qr?0:8,os=this.nextAudioPts||-1;const ls=Ur*Zr,cs=Xr.baseTime*Zr/Xr.timescale;if(this.isAudioContiguous=jr=jr||is.length&&os>0&&(Gr&&Math.abs(ls-os)<9e3||Math.abs(normalizePts(is[0].pts-cs,ls)-os)<20*ns),is.forEach(function(Cs){Cs.pts=normalizePts(Cs.pts-cs,ls)}),!jr||os<0){if(is=is.filter(Cs=>Cs.pts>=0),!is.length)return;Wr===0?os=0:Gr&&!rs?os=Math.max(0,ls):os=is[0].pts}if(_r.segmentCodec==="aac"){const Cs=this.config.maxAudioFramesDrift;for(let Ss=0,As=os;Ss<is.length;Ss++){const Us=is[Ss],Ks=Us.pts,Ws=Ks-As,Js=Math.abs(1e3*Ws/Zr);if(Ws<=-Cs*ns&&rs)Ss===0&&(logger.warn(`Audio frame @ ${(Ks/Zr).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*Ws/Zr)} ms.`),this.nextAudioPts=os=As=Ks);else if(Ws>=Cs*ns&&Js<MAX_SILENT_FRAME_DURATION&&rs){let ho=Math.round(Ws/ns);As=Ks-ho*ns,As<0&&(ho--,As+=ns),Ss===0&&(this.nextAudioPts=os=As),logger.warn(`[mp4-remuxer]: Injecting ${ho} audio frame @ ${(As/Zr).toFixed(3)}s due to ${Math.round(1e3*Ws/Zr)} ms gap.`);for(let so=0;so<ho;so++){const io=Math.max(As,0);let vo=AAC.getSilentFrame(_r.manifestCodec||_r.codec,_r.channelCount);vo||(logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),vo=Us.unit.subarray()),is.splice(Ss,0,{unit:vo,pts:io}),As+=ns,Ss++}}Us.pts=As,As+=ns}}let ds=null,fs=null,ms,ps=0,ys=is.length;for(;ys--;)ps+=is[ys].unit.byteLength;for(let Cs=0,Ss=is.length;Cs<Ss;Cs++){const As=is[Cs],Us=As.unit;let Ks=As.pts;if(fs!==null){const Js=_i[Cs-1];Js.duration=Math.round((Ks-fs)/ts)}else if(jr&&_r.segmentCodec==="aac"&&(Ks=os),ds=Ks,ps>0){ps+=ss;try{ms=new Uint8Array(ps)}catch(Js){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:Js,bytes:ps,reason:`fail allocating audio mdat ${ps}`});return}qr||(new DataView(ms.buffer).setUint32(0,ps),ms.set(MP4.types.mdat,4))}else return;ms.set(Us,ss);const Ws=Us.byteLength;ss+=Ws,_i.push(new Mp4Sample(!0,es,Ws,0)),fs=Ks}const ws=_i.length;if(!ws)return;const xs=_i[_i.length-1];this.nextAudioPts=os=fs+ts*xs.duration;const Es=qr?new Uint8Array(0):MP4.moof(_r.sequenceNumber++,ds/ts,_extends({},_r,{samples:_i}));_r.samples=[];const Rs=ds/Zr,_s=os/Zr,vs={data1:Es,data2:ms,startPTS:Rs,endPTS:_s,startDTS:Rs,endDTS:_s,type:"audio",hasAudio:!0,hasVideo:!1,nb:ws};return this.isAudioContiguous=!0,vs}remuxEmptyAudio(_r,Ur,jr,Gr){const Wr=_r.inputTimeScale,Zr=_r.samplerate?_r.samplerate:Wr,Yr=Wr/Zr,ts=this.nextAudioPts,es=this._initDTS,ns=es.baseTime*9e4/es.timescale,Xr=(ts!==null?ts:Gr.startDTS*Wr)+ns,qr=Gr.endDTS*Wr+ns,_i=Yr*AAC_SAMPLES_PER_FRAME,rs=Math.ceil((qr-Xr)/_i),is=AAC.getSilentFrame(_r.manifestCodec||_r.codec,_r.channelCount);if(logger.warn("[mp4-remuxer]: remux empty Audio"),!is){logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const ss=[];for(let os=0;os<rs;os++){const ls=Xr+os*_i;ss.push({unit:is,pts:ls,dts:ls})}return _r.samples=ss,this.remuxAudio(_r,Ur,jr,!1)}}function normalizePts(Nr,_r){let Ur;if(_r===null)return Nr;for(_r<Nr?Ur=-8589934592:Ur=8589934592;Math.abs(Nr-_r)>4294967296;)Nr+=Ur;return Nr}function findKeyframeIndex(Nr){for(let _r=0;_r<Nr.length;_r++)if(Nr[_r].key)return _r;return-1}function flushTextTrackMetadataCueSamples(Nr,_r,Ur,jr){const Gr=Nr.samples.length;if(!Gr)return;const Wr=Nr.inputTimeScale;for(let Yr=0;Yr<Gr;Yr++){const ts=Nr.samples[Yr];ts.pts=normalizePts(ts.pts-Ur.baseTime*Wr/Ur.timescale,_r*Wr)/Wr,ts.dts=normalizePts(ts.dts-jr.baseTime*Wr/jr.timescale,_r*Wr)/Wr}const Zr=Nr.samples;return Nr.samples=[],{samples:Zr}}function flushTextTrackUserdataCueSamples(Nr,_r,Ur){const jr=Nr.samples.length;if(!jr)return;const Gr=Nr.inputTimeScale;for(let Zr=0;Zr<jr;Zr++){const Yr=Nr.samples[Zr];Yr.pts=normalizePts(Yr.pts-Ur.baseTime*Gr/Ur.timescale,_r*Gr)/Gr}Nr.samples.sort((Zr,Yr)=>Zr.pts-Yr.pts);const Wr=Nr.samples;return Nr.samples=[],{samples:Wr}}class Mp4Sample{constructor(_r,Ur,jr,Gr){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=Ur,this.size=jr,this.cts=Gr,this.flags=new Mp4SampleFlags(_r)}}class Mp4SampleFlags{constructor(_r){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=_r?2:1,this.isNonSync=_r?0:1}}class PassThroughRemuxer{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(_r){this.initPTS=_r,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(_r,Ur,jr,Gr){this.audioCodec=Ur,this.videoCodec=jr,this.generateInitSegment(patchEncyptionData(_r,Gr)),this.emitInitSegment=!0}generateInitSegment(_r){let{audioCodec:Ur,videoCodec:jr}=this;if(!(_r!=null&&_r.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const Gr=this.initData=parseInitSegment(_r);Ur||(Ur=getParsedTrackCodec(Gr.audio,ElementaryStreamTypes.AUDIO)),jr||(jr=getParsedTrackCodec(Gr.video,ElementaryStreamTypes.VIDEO));const Wr={};Gr.audio&&Gr.video?Wr.audiovideo={container:"video/mp4",codec:Ur+","+jr,initSegment:_r,id:"main"}:Gr.audio?Wr.audio={container:"audio/mp4",codec:Ur,initSegment:_r,id:"audio"}:Gr.video?Wr.video={container:"video/mp4",codec:jr,initSegment:_r,id:"main"}:logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=Wr}remux(_r,Ur,jr,Gr,Wr,Zr){var Yr,ts;let{initPTS:es,lastEndTime:ns}=this;const Xr={audio:void 0,video:void 0,text:Gr,id3:jr,initSegment:void 0};isFiniteNumber(ns)||(ns=this.lastEndTime=Wr||0);const qr=Ur.samples;if(!(qr!=null&&qr.length))return Xr;const _i={initPTS:void 0,timescale:1};let rs=this.initData;if((Yr=rs)!=null&&Yr.length||(this.generateInitSegment(qr),rs=this.initData),!((ts=rs)!=null&&ts.length))return logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),Xr;this.emitInitSegment&&(_i.tracks=this.initTracks,this.emitInitSegment=!1);const is=getDuration(qr,rs),ss=getStartDTS(rs,qr),os=ss===null?Wr:ss;(isInvalidInitPts(es,os,Wr,is)||_i.timescale!==es.timescale&&Zr)&&(_i.initPTS=os-Wr,es&&es.timescale===1&&logger.warn(`Adjusting initPTS by ${_i.initPTS-es.baseTime}`),this.initPTS=es={baseTime:_i.initPTS,timescale:1});const ls=_r?os-es.baseTime/es.timescale:ns,cs=ls+is;offsetStartDTS(rs,qr,es.baseTime/es.timescale),is>0?this.lastEndTime=cs:(logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const ds=!!rs.audio,fs=!!rs.video;let ms="";ds&&(ms+="audio"),fs&&(ms+="video");const ps={data1:qr,startPTS:ls,startDTS:ls,endPTS:cs,endDTS:cs,type:ms,hasAudio:ds,hasVideo:fs,nb:1,dropped:0};return Xr.audio=ps.type==="audio"?ps:void 0,Xr.video=ps.type!=="audio"?ps:void 0,Xr.initSegment=_i,Xr.id3=flushTextTrackMetadataCueSamples(jr,Wr,es,es),Gr.samples.length&&(Xr.text=flushTextTrackUserdataCueSamples(Gr,Wr,es)),Xr}}function isInvalidInitPts(Nr,_r,Ur,jr){if(Nr===null)return!0;const Gr=Math.max(jr,1),Wr=_r-Nr.baseTime/Nr.timescale;return Math.abs(Wr-Ur)>Gr}function getParsedTrackCodec(Nr,_r){const Ur=Nr==null?void 0:Nr.codec;return Ur&&Ur.length>4?Ur:Ur==="hvc1"||Ur==="hev1"?"hvc1.1.6.L120.90":Ur==="av01"?"av01.0.04M.08":Ur==="avc1"||_r===ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}let now;try{now=self.performance.now.bind(self.performance)}catch{logger.debug("Unable to use Performance API on this environment"),now=typeof self<"u"&&self.Date.now}const muxConfig=[{demux:MP4Demuxer,remux:PassThroughRemuxer},{demux:TSDemuxer,remux:MP4Remuxer},{demux:AACDemuxer,remux:MP4Remuxer},{demux:MP3Demuxer,remux:MP4Remuxer}];class Transmuxer{constructor(_r,Ur,jr,Gr,Wr){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=_r,this.typeSupported=Ur,this.config=jr,this.vendor=Gr,this.id=Wr}configure(_r){this.transmuxConfig=_r,this.decrypter&&this.decrypter.reset()}push(_r,Ur,jr,Gr){const Wr=jr.transmuxing;Wr.executeStart=now();let Zr=new Uint8Array(_r);const{currentTransmuxState:Yr,transmuxConfig:ts}=this;Gr&&(this.currentTransmuxState=Gr);const{contiguous:es,discontinuity:ns,trackSwitch:Xr,accurateTimeOffset:qr,timeOffset:_i,initSegmentChange:rs}=Gr||Yr,{audioCodec:is,videoCodec:ss,defaultInitPts:os,duration:ls,initSegmentData:cs}=ts,ds=getEncryptionType(Zr,Ur);if(ds&&ds.method==="AES-128"){const ys=this.getDecrypter();if(ys.isSync()){let ws=ys.softwareDecrypt(Zr,ds.key.buffer,ds.iv.buffer);if(jr.part>-1&&(ws=ys.flush()),!ws)return Wr.executeEnd=now(),emptyResult(jr);Zr=new Uint8Array(ws)}else return this.decryptionPromise=ys.webCryptoDecrypt(Zr,ds.key.buffer,ds.iv.buffer).then(ws=>{const xs=this.push(ws,null,jr);return this.decryptionPromise=null,xs}),this.decryptionPromise}const fs=this.needsProbing(ns,Xr);if(fs){const ys=this.configureTransmuxer(Zr);if(ys)return logger.warn(`[transmuxer] ${ys.message}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:ys,reason:ys.message}),Wr.executeEnd=now(),emptyResult(jr)}(ns||Xr||rs||fs)&&this.resetInitSegment(cs,is,ss,ls,Ur),(ns||rs||fs)&&this.resetInitialTimestamp(os),es||this.resetContiguity();const ms=this.transmux(Zr,ds,_i,qr,jr),ps=this.currentTransmuxState;return ps.contiguous=!0,ps.discontinuity=!1,ps.trackSwitch=!1,Wr.executeEnd=now(),ms}flush(_r){const Ur=_r.transmuxing;Ur.executeStart=now();const{decrypter:jr,currentTransmuxState:Gr,decryptionPromise:Wr}=this;if(Wr)return Wr.then(()=>this.flush(_r));const Zr=[],{timeOffset:Yr}=Gr;if(jr){const Xr=jr.flush();Xr&&Zr.push(this.push(Xr,null,_r))}const{demuxer:ts,remuxer:es}=this;if(!ts||!es)return Ur.executeEnd=now(),[emptyResult(_r)];const ns=ts.flush(Yr);return isPromise(ns)?ns.then(Xr=>(this.flushRemux(Zr,Xr,_r),Zr)):(this.flushRemux(Zr,ns,_r),Zr)}flushRemux(_r,Ur,jr){const{audioTrack:Gr,videoTrack:Wr,id3Track:Zr,textTrack:Yr}=Ur,{accurateTimeOffset:ts,timeOffset:es}=this.currentTransmuxState;logger.log(`[transmuxer.ts]: Flushed fragment ${jr.sn}${jr.part>-1?" p: "+jr.part:""} of level ${jr.level}`);const ns=this.remuxer.remux(Gr,Wr,Zr,Yr,es,ts,!0,this.id);_r.push({remuxResult:ns,chunkMeta:jr}),jr.transmuxing.executeEnd=now()}resetInitialTimestamp(_r){const{demuxer:Ur,remuxer:jr}=this;!Ur||!jr||(Ur.resetTimeStamp(_r),jr.resetTimeStamp(_r))}resetContiguity(){const{demuxer:_r,remuxer:Ur}=this;!_r||!Ur||(_r.resetContiguity(),Ur.resetNextTimestamp())}resetInitSegment(_r,Ur,jr,Gr,Wr){const{demuxer:Zr,remuxer:Yr}=this;!Zr||!Yr||(Zr.resetInitSegment(_r,Ur,jr,Gr),Yr.resetInitSegment(_r,Ur,jr,Wr))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(_r,Ur,jr,Gr,Wr){let Zr;return Ur&&Ur.method==="SAMPLE-AES"?Zr=this.transmuxSampleAes(_r,Ur,jr,Gr,Wr):Zr=this.transmuxUnencrypted(_r,jr,Gr,Wr),Zr}transmuxUnencrypted(_r,Ur,jr,Gr){const{audioTrack:Wr,videoTrack:Zr,id3Track:Yr,textTrack:ts}=this.demuxer.demux(_r,Ur,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(Wr,Zr,Yr,ts,Ur,jr,!1,this.id),chunkMeta:Gr}}transmuxSampleAes(_r,Ur,jr,Gr,Wr){return this.demuxer.demuxSampleAes(_r,Ur,jr).then(Zr=>({remuxResult:this.remuxer.remux(Zr.audioTrack,Zr.videoTrack,Zr.id3Track,Zr.textTrack,jr,Gr,!1,this.id),chunkMeta:Wr}))}configureTransmuxer(_r){const{config:Ur,observer:jr,typeSupported:Gr,vendor:Wr}=this;let Zr;for(let Xr=0,qr=muxConfig.length;Xr<qr;Xr++)if(muxConfig[Xr].demux.probe(_r)){Zr=muxConfig[Xr];break}if(!Zr)return new Error("Failed to find demuxer by probing fragment data");const Yr=this.demuxer,ts=this.remuxer,es=Zr.remux,ns=Zr.demux;(!ts||!(ts instanceof es))&&(this.remuxer=new es(jr,Ur,Gr,Wr)),(!Yr||!(Yr instanceof ns))&&(this.demuxer=new ns(jr,Ur,Gr),this.probe=ns.probe)}needsProbing(_r,Ur){return!this.demuxer||!this.remuxer||_r||Ur}getDecrypter(){let _r=this.decrypter;return _r||(_r=this.decrypter=new Decrypter(this.config)),_r}}function getEncryptionType(Nr,_r){let Ur=null;return Nr.byteLength>0&&_r!=null&&_r.key!=null&&_r.iv!==null&&_r.method!=null&&(Ur=_r),Ur}const emptyResult=Nr=>({remuxResult:{},chunkMeta:Nr});function isPromise(Nr){return"then"in Nr&&Nr.then instanceof Function}class TransmuxConfig{constructor(_r,Ur,jr,Gr,Wr){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=_r,this.videoCodec=Ur,this.initSegmentData=jr,this.duration=Gr,this.defaultInitPts=Wr||null}}class TransmuxState{constructor(_r,Ur,jr,Gr,Wr,Zr){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=_r,this.contiguous=Ur,this.accurateTimeOffset=jr,this.trackSwitch=Gr,this.timeOffset=Wr,this.initSegmentChange=Zr}}var eventemitter3={exports:{}};(function(Nr){var _r=Object.prototype.hasOwnProperty,Ur="~";function jr(){}Object.create&&(jr.prototype=Object.create(null),new jr().__proto__||(Ur=!1));function Gr(ts,es,ns){this.fn=ts,this.context=es,this.once=ns||!1}function Wr(ts,es,ns,Xr,qr){if(typeof ns!="function")throw new TypeError("The listener must be a function");var _i=new Gr(ns,Xr||ts,qr),rs=Ur?Ur+es:es;return ts._events[rs]?ts._events[rs].fn?ts._events[rs]=[ts._events[rs],_i]:ts._events[rs].push(_i):(ts._events[rs]=_i,ts._eventsCount++),ts}function Zr(ts,es){--ts._eventsCount===0?ts._events=new jr:delete ts._events[es]}function Yr(){this._events=new jr,this._eventsCount=0}Yr.prototype.eventNames=function(){var es=[],ns,Xr;if(this._eventsCount===0)return es;for(Xr in ns=this._events)_r.call(ns,Xr)&&es.push(Ur?Xr.slice(1):Xr);return Object.getOwnPropertySymbols?es.concat(Object.getOwnPropertySymbols(ns)):es},Yr.prototype.listeners=function(es){var ns=Ur?Ur+es:es,Xr=this._events[ns];if(!Xr)return[];if(Xr.fn)return[Xr.fn];for(var qr=0,_i=Xr.length,rs=new Array(_i);qr<_i;qr++)rs[qr]=Xr[qr].fn;return rs},Yr.prototype.listenerCount=function(es){var ns=Ur?Ur+es:es,Xr=this._events[ns];return Xr?Xr.fn?1:Xr.length:0},Yr.prototype.emit=function(es,ns,Xr,qr,_i,rs){var is=Ur?Ur+es:es;if(!this._events[is])return!1;var ss=this._events[is],os=arguments.length,ls,cs;if(ss.fn){switch(ss.once&&this.removeListener(es,ss.fn,void 0,!0),os){case 1:return ss.fn.call(ss.context),!0;case 2:return ss.fn.call(ss.context,ns),!0;case 3:return ss.fn.call(ss.context,ns,Xr),!0;case 4:return ss.fn.call(ss.context,ns,Xr,qr),!0;case 5:return ss.fn.call(ss.context,ns,Xr,qr,_i),!0;case 6:return ss.fn.call(ss.context,ns,Xr,qr,_i,rs),!0}for(cs=1,ls=new Array(os-1);cs<os;cs++)ls[cs-1]=arguments[cs];ss.fn.apply(ss.context,ls)}else{var ds=ss.length,fs;for(cs=0;cs<ds;cs++)switch(ss[cs].once&&this.removeListener(es,ss[cs].fn,void 0,!0),os){case 1:ss[cs].fn.call(ss[cs].context);break;case 2:ss[cs].fn.call(ss[cs].context,ns);break;case 3:ss[cs].fn.call(ss[cs].context,ns,Xr);break;case 4:ss[cs].fn.call(ss[cs].context,ns,Xr,qr);break;default:if(!ls)for(fs=1,ls=new Array(os-1);fs<os;fs++)ls[fs-1]=arguments[fs];ss[cs].fn.apply(ss[cs].context,ls)}}return!0},Yr.prototype.on=function(es,ns,Xr){return Wr(this,es,ns,Xr,!1)},Yr.prototype.once=function(es,ns,Xr){return Wr(this,es,ns,Xr,!0)},Yr.prototype.removeListener=function(es,ns,Xr,qr){var _i=Ur?Ur+es:es;if(!this._events[_i])return this;if(!ns)return Zr(this,_i),this;var rs=this._events[_i];if(rs.fn)rs.fn===ns&&(!qr||rs.once)&&(!Xr||rs.context===Xr)&&Zr(this,_i);else{for(var is=0,ss=[],os=rs.length;is<os;is++)(rs[is].fn!==ns||qr&&!rs[is].once||Xr&&rs[is].context!==Xr)&&ss.push(rs[is]);ss.length?this._events[_i]=ss.length===1?ss[0]:ss:Zr(this,_i)}return this},Yr.prototype.removeAllListeners=function(es){var ns;return es?(ns=Ur?Ur+es:es,this._events[ns]&&Zr(this,ns)):(this._events=new jr,this._eventsCount=0),this},Yr.prototype.off=Yr.prototype.removeListener,Yr.prototype.addListener=Yr.prototype.on,Yr.prefixed=Ur,Yr.EventEmitter=Yr,Nr.exports=Yr})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);const MediaSource$1=getMediaSource()||{isTypeSupported:()=>!1};class TransmuxerInterface{constructor(_r,Ur,jr,Gr){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const Wr=_r.config;this.hls=_r,this.id=Ur,this.useWorker=!!Wr.enableWorker,this.onTransmuxComplete=jr,this.onFlush=Gr;const Zr=(es,ns)=>{ns=ns||{},ns.frag=this.frag,ns.id=this.id,es===Events.ERROR&&(this.error=ns.error),this.hls.trigger(es,ns)};this.observer=new EventEmitter,this.observer.on(Events.FRAG_DECRYPTED,Zr),this.observer.on(Events.ERROR,Zr);const Yr={mp4:MediaSource$1.isTypeSupported("video/mp4"),mpeg:MediaSource$1.isTypeSupported("audio/mpeg"),mp3:MediaSource$1.isTypeSupported('audio/mp4; codecs="mp3"')},ts=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(Wr.workerPath||hasUMDWorker())){try{Wr.workerPath?(logger.log(`loading Web Worker ${Wr.workerPath} for "${Ur}"`),this.workerContext=loadWorker(Wr.workerPath)):(logger.log(`injecting Web Worker for "${Ur}"`),this.workerContext=injectWorker()),this.onwmsg=Xr=>this.onWorkerMessage(Xr);const{worker:ns}=this.workerContext;ns.addEventListener("message",this.onwmsg),ns.onerror=Xr=>{const qr=new Error(`${Xr.message}  (${Xr.filename}:${Xr.lineno})`);Wr.enableWorker=!1,logger.warn(`Error in "${Ur}" Web Worker, fallback to inline`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:qr})},ns.postMessage({cmd:"init",typeSupported:Yr,vendor:ts,id:Ur,config:JSON.stringify(Wr)})}catch(ns){logger.warn(`Error setting up "${Ur}" Web Worker, fallback to inline`,ns),this.resetWorker(),this.error=null,this.transmuxer=new Transmuxer(this.observer,Yr,Wr,ts,Ur)}return}this.transmuxer=new Transmuxer(this.observer,Yr,Wr,ts,Ur)}resetWorker(){if(this.workerContext){const{worker:_r,objectURL:Ur}=this.workerContext;Ur&&self.URL.revokeObjectURL(Ur),_r.removeEventListener("message",this.onwmsg),_r.onerror=null,_r.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const Ur=this.transmuxer;Ur&&(Ur.destroy(),this.transmuxer=null)}const _r=this.observer;_r&&_r.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(_r,Ur,jr,Gr,Wr,Zr,Yr,ts,es,ns){var Xr,qr;es.transmuxing.start=self.performance.now();const{transmuxer:_i}=this,rs=Zr?Zr.start:Wr.start,is=Wr.decryptdata,ss=this.frag,os=!(ss&&Wr.cc===ss.cc),ls=!(ss&&es.level===ss.level),cs=ss?es.sn-ss.sn:-1,ds=this.part?es.part-this.part.index:-1,fs=cs===0&&es.id>1&&es.id===(ss==null?void 0:ss.stats.chunkCount),ms=!ls&&(cs===1||cs===0&&(ds===1||fs&&ds<=0)),ps=self.performance.now();(ls||cs||Wr.stats.parsing.start===0)&&(Wr.stats.parsing.start=ps),Zr&&(ds||!ms)&&(Zr.stats.parsing.start=ps);const ys=!(ss&&((Xr=Wr.initSegment)==null?void 0:Xr.url)===((qr=ss.initSegment)==null?void 0:qr.url)),ws=new TransmuxState(os,ms,ts,ls,rs,ys);if(!ms||os||ys){logger.log(`[transmuxer-interface, ${Wr.type}]: Starting new transmux session for sn: ${es.sn} p: ${es.part} level: ${es.level} id: ${es.id}
        discontinuity: ${os}
        trackSwitch: ${ls}
        contiguous: ${ms}
        accurateTimeOffset: ${ts}
        timeOffset: ${rs}
        initSegmentChange: ${ys}`);const xs=new TransmuxConfig(jr,Gr,Ur,Yr,ns);this.configureTransmuxer(xs)}if(this.frag=Wr,this.part=Zr,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:_r,decryptdata:is,chunkMeta:es,state:ws},_r instanceof ArrayBuffer?[_r]:[]);else if(_i){const xs=_i.push(_r,is,es,ws);isPromise(xs)?(_i.async=!0,xs.then(Es=>{this.handleTransmuxComplete(Es)}).catch(Es=>{this.transmuxerError(Es,es,"transmuxer-interface push error")})):(_i.async=!1,this.handleTransmuxComplete(xs))}}flush(_r){_r.transmuxing.start=self.performance.now();const{transmuxer:Ur}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:_r});else if(Ur){let jr=Ur.flush(_r);isPromise(jr)||Ur.async?(isPromise(jr)||(jr=Promise.resolve(jr)),jr.then(Wr=>{this.handleFlushResult(Wr,_r)}).catch(Wr=>{this.transmuxerError(Wr,_r,"transmuxer-interface flush error")})):this.handleFlushResult(jr,_r)}}transmuxerError(_r,Ur,jr){this.hls&&(this.error=_r,this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:Ur,fatal:!1,error:_r,err:_r,reason:jr}))}handleFlushResult(_r,Ur){_r.forEach(jr=>{this.handleTransmuxComplete(jr)}),this.onFlush(Ur)}onWorkerMessage(_r){const Ur=_r.data,jr=this.hls;switch(Ur.event){case"init":{var Gr;const Wr=(Gr=this.workerContext)==null?void 0:Gr.objectURL;Wr&&self.URL.revokeObjectURL(Wr);break}case"transmuxComplete":{this.handleTransmuxComplete(Ur.data);break}case"flush":{this.onFlush(Ur.data);break}case"workerLog":logger[Ur.data.logType]&&logger[Ur.data.logType](Ur.data.message);break;default:{Ur.data=Ur.data||{},Ur.data.frag=this.frag,Ur.data.id=this.id,jr.trigger(Ur.event,Ur.data);break}}}configureTransmuxer(_r){const{transmuxer:Ur}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:_r}):Ur&&Ur.configure(_r)}handleTransmuxComplete(_r){_r.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(_r)}}const STALL_MINIMUM_DURATION_MS=250,MAX_START_GAP_JUMP=2,SKIP_BUFFER_HOLE_STEP_SECONDS=.1,SKIP_BUFFER_RANGE_START=.05;class GapController{constructor(_r,Ur,jr,Gr){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=_r,this.media=Ur,this.fragmentTracker=jr,this.hls=Gr}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(_r,Ur){const{config:jr,media:Gr,stalled:Wr}=this;if(Gr===null)return;const{currentTime:Zr,seeking:Yr}=Gr,ts=this.seeking&&!Yr,es=!this.seeking&&Yr;if(this.seeking=Yr,Zr!==_r){if(this.moved=!0,Wr!==null){if(this.stallReported){const os=self.performance.now()-Wr;logger.warn(`playback not stuck anymore @${Zr}, after ${Math.round(os)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(es||ts){this.stalled=null;return}if(Gr.paused&&!Yr||Gr.ended||Gr.playbackRate===0||!BufferHelper.getBuffered(Gr).length)return;const ns=BufferHelper.bufferInfo(Gr,Zr,0),Xr=ns.len>0,qr=ns.nextStart||0;if(!Xr&&!qr)return;if(Yr){const os=ns.len>MAX_START_GAP_JUMP,ls=!qr||Ur&&Ur.start<=Zr||qr-Zr>MAX_START_GAP_JUMP&&!this.fragmentTracker.getPartialFragment(Zr);if(os||ls)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var _i;const os=Math.max(qr,ns.start||0)-Zr,ls=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,ds=(ls==null||(_i=ls.details)==null?void 0:_i.live)?ls.details.targetduration*2:MAX_START_GAP_JUMP,fs=this.fragmentTracker.getPartialFragment(Zr);if(os>0&&(os<=ds||fs)){this._trySkipBufferHole(fs);return}}const rs=self.performance.now();if(Wr===null){this.stalled=rs;return}const is=rs-Wr;if(!Yr&&is>=STALL_MINIMUM_DURATION_MS&&(this._reportStall(ns),!this.media))return;const ss=BufferHelper.bufferInfo(Gr,Zr,jr.maxBufferHole);this._tryFixBufferStall(ss,is)}_tryFixBufferStall(_r,Ur){const{config:jr,fragmentTracker:Gr,media:Wr}=this;if(Wr===null)return;const Zr=Wr.currentTime,Yr=Gr.getPartialFragment(Zr);Yr&&(this._trySkipBufferHole(Yr)||!this.media)||(_r.len>jr.maxBufferHole||_r.nextStart&&_r.nextStart-Zr<jr.maxBufferHole)&&Ur>jr.highBufferWatchdogPeriod*1e3&&(logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(_r){const{hls:Ur,media:jr,stallReported:Gr}=this;if(!Gr&&jr){this.stallReported=!0;const Wr=new Error(`Playback stalling at @${jr.currentTime} due to low buffer (${JSON.stringify(_r)})`);logger.warn(Wr.message),Ur.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,error:Wr,buffer:_r.len})}}_trySkipBufferHole(_r){const{config:Ur,hls:jr,media:Gr}=this;if(Gr===null)return 0;const Wr=Gr.currentTime,Zr=BufferHelper.bufferInfo(Gr,Wr,0),Yr=Wr<Zr.start?Zr.start:Zr.nextStart;if(Yr){const ts=Zr.len<=Ur.maxBufferHole,es=Zr.len>0&&Zr.len<1&&Gr.readyState<3,ns=Yr-Wr;if(ns>0&&(ts||es)){if(ns>Ur.maxBufferHole){const{fragmentTracker:qr}=this;let _i=!1;if(Wr===0){const rs=qr.getAppendedFrag(0,PlaylistLevelType.MAIN);rs&&Yr<rs.end&&(_i=!0)}if(!_i){const rs=_r||qr.getAppendedFrag(Wr,PlaylistLevelType.MAIN);if(rs){let is=!1,ss=rs.end;for(;ss<Yr;){const os=qr.getPartialFragment(ss);if(os)ss+=os.duration;else{is=!0;break}}if(is)return 0}}}const Xr=Math.max(Yr+SKIP_BUFFER_RANGE_START,Wr+SKIP_BUFFER_HOLE_STEP_SECONDS);if(logger.warn(`skipping hole, adjusting currentTime from ${Wr} to ${Xr}`),this.moved=!0,this.stalled=null,Gr.currentTime=Xr,_r&&!_r.gap){const qr=new Error(`fragment loaded with buffer holes, seeking from ${Wr} to ${Xr}`);jr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:qr,reason:qr.message,frag:_r})}return Xr}}return 0}_tryNudgeBuffer(){const{config:_r,hls:Ur,media:jr,nudgeRetry:Gr}=this;if(jr===null)return;const Wr=jr.currentTime;if(this.nudgeRetry++,Gr<_r.nudgeMaxRetry){const Zr=Wr+(Gr+1)*_r.nudgeOffset,Yr=new Error(`Nudging 'currentTime' from ${Wr} to ${Zr}`);logger.warn(Yr.message),jr.currentTime=Zr,Ur.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_NUDGE_ON_STALL,error:Yr,fatal:!1})}else{const Zr=new Error(`Playhead still not moving while enough data buffered @${Wr} after ${_r.nudgeMaxRetry} nudges`);logger.error(Zr.message),Ur.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,error:Zr,fatal:!0})}}}const TICK_INTERVAL$2=100;class StreamController extends BaseStreamController{constructor(_r,Ur,jr){super(_r,Ur,jr,"[stream-controller]",PlaylistLevelType.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:_r}=this;_r.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.on(Events.LEVEL_LOADING,this.onLevelLoading,this),_r.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.on(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),_r.on(Events.ERROR,this.onError,this),_r.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),_r.on(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_r.on(Events.BUFFER_CREATED,this.onBufferCreated,this),_r.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),_r.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),_r.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:_r}=this;_r.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.off(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),_r.off(Events.ERROR,this.onError,this),_r.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),_r.off(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_r.off(Events.BUFFER_CREATED,this.onBufferCreated,this),_r.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),_r.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),_r.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(_r){if(this.levels){const{lastCurrentTime:Ur,hls:jr}=this;if(this.stopLoad(),this.setInterval(TICK_INTERVAL$2),this.level=-1,!this.startFragRequested){let Gr=jr.startLevel;Gr===-1&&(jr.config.testBandwidth&&this.levels.length>1?(Gr=0,this.bitrateTest=!0):Gr=jr.nextAutoLevel),this.level=jr.nextLoadLevel=Gr,this.loadedmetadata=!1}Ur>0&&_r===-1&&(this.log(`Override startPosition with lastCurrentTime @${Ur.toFixed(3)}`),_r=Ur),this.state=State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=_r,this.tick()}else this._forceStartLoad=!0,this.state=State.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case State.WAITING_LEVEL:{var _r;const{levels:jr,level:Gr}=this,Wr=jr==null||(_r=jr[Gr])==null?void 0:_r.details;if(Wr&&(!Wr.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(Wr))break;this.state=State.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=State.IDLE;break}break}case State.FRAG_LOADING_WAITING_RETRY:{var Ur;const jr=self.performance.now(),Gr=this.retryDate;(!Gr||jr>=Gr||(Ur=this.media)!=null&&Ur.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=State.IDLE)}break}this.state===State.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:_r,levelLastLoaded:Ur,levels:jr,media:Gr}=this,{config:Wr,nextLoadLevel:Zr}=_r;if(Ur===null||!Gr&&(this.startFragRequested||!Wr.startFragPrefetch)||this.altAudio&&this.audioOnly||!(jr!=null&&jr[Zr]))return;const Yr=jr[Zr],ts=this.getMainFwdBufferInfo();if(ts===null)return;const es=this.getLevelDetails();if(es&&this._streamEnded(ts,es)){const ss={};this.altAudio&&(ss.type="video"),this.hls.trigger(Events.BUFFER_EOS,ss),this.state=State.ENDED;return}_r.loadLevel!==Zr&&_r.manualLevel===-1&&this.log(`Adapting to level ${Zr} from level ${this.level}`),this.level=_r.nextLoadLevel=Zr;const ns=Yr.details;if(!ns||this.state===State.WAITING_LEVEL||ns.live&&this.levelLastLoaded!==Zr){this.level=Zr,this.state=State.WAITING_LEVEL;return}const Xr=ts.len,qr=this.getMaxBufferLength(Yr.maxBitrate);if(Xr>=qr)return;this.backtrackFragment&&this.backtrackFragment.start>ts.end&&(this.backtrackFragment=null);const _i=this.backtrackFragment?this.backtrackFragment.start:ts.end;let rs=this.getNextFragment(_i,ns);if(this.couldBacktrack&&!this.fragPrevious&&rs&&rs.sn!=="initSegment"&&this.fragmentTracker.getState(rs)!==FragmentState.OK){var is;const os=((is=this.backtrackFragment)!=null?is:rs).sn-ns.startSN,ls=ns.fragments[os-1];ls&&rs.cc===ls.cc&&(rs=ls,this.fragmentTracker.removeFragment(ls))}else this.backtrackFragment&&ts.len&&(this.backtrackFragment=null);if(rs&&this.isLoopLoading(rs,_i)){if(!rs.gap){const os=this.audioOnly&&!this.altAudio?ElementaryStreamTypes.AUDIO:ElementaryStreamTypes.VIDEO,ls=(os===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;ls&&this.afterBufferFlushed(ls,os,PlaylistLevelType.MAIN)}rs=this.getNextFragmentLoopLoading(rs,ns,ts,PlaylistLevelType.MAIN,qr)}rs&&(rs.initSegment&&!rs.initSegment.data&&!this.bitrateTest&&(rs=rs.initSegment),this.loadFragment(rs,Yr,_i))}loadFragment(_r,Ur,jr){const Gr=this.fragmentTracker.getState(_r);this.fragCurrent=_r,Gr===FragmentState.NOT_LOADED||Gr===FragmentState.PARTIAL?_r.sn==="initSegment"?this._loadInitSegment(_r,Ur):this.bitrateTest?(this.log(`Fragment ${_r.sn} of level ${_r.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(_r,Ur)):(this.startFragRequested=!0,super.loadFragment(_r,Ur,jr)):this.clearTrackerIfNeeded(_r)}getBufferedFrag(_r){return this.fragmentTracker.getBufferedFrag(_r,PlaylistLevelType.MAIN)}followingBufferedFrag(_r){return _r?this.getBufferedFrag(_r.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:_r,media:Ur}=this;if(Ur!=null&&Ur.readyState){let jr;const Gr=this.getAppendedFrag(Ur.currentTime);Gr&&Gr.start>1&&this.flushMainBuffer(0,Gr.start-1);const Wr=this.getLevelDetails();if(Wr!=null&&Wr.live){const Yr=this.getMainFwdBufferInfo();if(!Yr||Yr.len<Wr.targetduration*2)return}if(!Ur.paused&&_r){const Yr=this.hls.nextLoadLevel,ts=_r[Yr],es=this.fragLastKbps;es&&this.fragCurrent?jr=this.fragCurrent.duration*ts.maxBitrate/(1e3*es)+1:jr=0}else jr=0;const Zr=this.getBufferedFrag(Ur.currentTime+jr);if(Zr){const Yr=this.followingBufferedFrag(Zr);if(Yr){this.abortCurrentFrag();const ts=Yr.maxStartPTS?Yr.maxStartPTS:Yr.start,es=Yr.duration,ns=Math.max(Zr.end,ts+Math.min(Math.max(es-this.config.maxFragLookUpTolerance,es*.5),es*.75));this.flushMainBuffer(ns,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const _r=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,_r&&(_r.abortRequests(),this.fragmentTracker.removeFragment(_r)),this.state){case State.KEY_LOADING:case State.FRAG_LOADING:case State.FRAG_LOADING_WAITING_RETRY:case State.PARSING:case State.PARSED:this.state=State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(_r,Ur){super.flushMainBuffer(_r,Ur,this.altAudio?"video":null)}onMediaAttached(_r,Ur){super.onMediaAttached(_r,Ur);const jr=Ur.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),jr.addEventListener("playing",this.onvplaying),jr.addEventListener("seeked",this.onvseeked),this.gapController=new GapController(this.config,jr,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:_r}=this;_r&&this.onvplaying&&this.onvseeked&&(_r.removeEventListener("playing",this.onvplaying),_r.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const _r=this.media,Ur=_r?_r.currentTime:null;isFiniteNumber(Ur)&&this.log(`Media seeked to ${Ur.toFixed(3)}`);const jr=this.getMainFwdBufferInfo();if(jr===null||jr.len===0){this.warn(`Main forward buffer length on "seeked" event ${jr?jr.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(_r,Ur){let jr=!1,Gr=!1,Wr;Ur.levels.forEach(Zr=>{Wr=Zr.audioCodec,Wr&&(Wr.indexOf("mp4a.40.2")!==-1&&(jr=!0),Wr.indexOf("mp4a.40.5")!==-1&&(Gr=!0))}),this.audioCodecSwitch=jr&&Gr&&!changeTypeSupported(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=Ur.levels,this.startFragRequested=!1}onLevelLoading(_r,Ur){const{levels:jr}=this;if(!jr||this.state!==State.IDLE)return;const Gr=jr[Ur.level];(!Gr.details||Gr.details.live&&this.levelLastLoaded!==Ur.level||this.waitForCdnTuneIn(Gr.details))&&(this.state=State.WAITING_LEVEL)}onLevelLoaded(_r,Ur){var jr;const{levels:Gr}=this,Wr=Ur.level,Zr=Ur.details,Yr=Zr.totalduration;if(!Gr){this.warn(`Levels were reset while loading level ${Wr}`);return}this.log(`Level ${Wr} loaded [${Zr.startSN},${Zr.endSN}]${Zr.lastPartSn?`[part-${Zr.lastPartSn}-${Zr.lastPartIndex}]`:""}, cc [${Zr.startCC}, ${Zr.endCC}] duration:${Yr}`);const ts=Gr[Wr],es=this.fragCurrent;es&&(this.state===State.FRAG_LOADING||this.state===State.FRAG_LOADING_WAITING_RETRY)&&(es.level!==Ur.level||es.urlId!==ts.urlId)&&es.loader&&this.abortCurrentFrag();let ns=0;if(Zr.live||(jr=ts.details)!=null&&jr.live){if(this.checkLiveUpdate(Zr),Zr.deltaUpdateFailed)return;ns=this.alignPlaylists(Zr,ts.details)}if(ts.details=Zr,this.levelLastLoaded=Wr,this.hls.trigger(Events.LEVEL_UPDATED,{details:Zr,level:Wr}),this.state===State.WAITING_LEVEL){if(this.waitForCdnTuneIn(Zr))return;this.state=State.IDLE}this.startFragRequested?Zr.live&&this.synchronizeToLiveEdge(Zr):this.setStartPosition(Zr,ns),this.tick()}_handleFragmentLoadProgress(_r){var Ur;const{frag:jr,part:Gr,payload:Wr}=_r,{levels:Zr}=this;if(!Zr){this.warn(`Levels were reset while fragment load was in progress. Fragment ${jr.sn} of level ${jr.level} will not be buffered`);return}const Yr=Zr[jr.level],ts=Yr.details;if(!ts){this.warn(`Dropping fragment ${jr.sn} of level ${jr.level} after level details were reset`),this.fragmentTracker.removeFragment(jr);return}const es=Yr.videoCodec,ns=ts.PTSKnown||!ts.live,Xr=(Ur=jr.initSegment)==null?void 0:Ur.data,qr=this._getAudioCodec(Yr),_i=this.transmuxer=this.transmuxer||new TransmuxerInterface(this.hls,PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),rs=Gr?Gr.index:-1,is=rs!==-1,ss=new ChunkMetadata(jr.level,jr.sn,jr.stats.chunkCount,Wr.byteLength,rs,is),os=this.initPTS[jr.cc];_i.push(Wr,Xr,qr,es,jr,Gr,ts.totalduration,ns,ss,os)}onAudioTrackSwitching(_r,Ur){const jr=this.altAudio;if(!!!Ur.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const Zr=this.fragCurrent;Zr&&(this.log("Switching to main audio track, cancel main fragment load"),Zr.abortRequests(),this.fragmentTracker.removeFragment(Zr)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const Wr=this.hls;jr&&(Wr.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),Wr.trigger(Events.AUDIO_TRACK_SWITCHED,Ur)}}onAudioTrackSwitched(_r,Ur){const jr=Ur.id,Gr=!!this.hls.audioTracks[jr].url;if(Gr){const Wr=this.videoBuffer;Wr&&this.mediaBuffer!==Wr&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=Wr)}this.altAudio=Gr,this.tick()}onBufferCreated(_r,Ur){const jr=Ur.tracks;let Gr,Wr,Zr=!1;for(const Yr in jr){const ts=jr[Yr];if(ts.id==="main"){if(Wr=Yr,Gr=ts,Yr==="video"){const es=jr[Yr];es&&(this.videoBuffer=es.buffer)}}else Zr=!0}Zr&&Gr?(this.log(`Alternate track found, use ${Wr}.buffered to schedule main fragment loading`),this.mediaBuffer=Gr.buffer):this.mediaBuffer=this.media}onFragBuffered(_r,Ur){const{frag:jr,part:Gr}=Ur;if(jr&&jr.type!==PlaylistLevelType.MAIN)return;if(this.fragContextChanged(jr)){this.warn(`Fragment ${jr.sn}${Gr?" p: "+Gr.index:""} of level ${jr.level} finished buffering, but was aborted. state: ${this.state}`),this.state===State.PARSED&&(this.state=State.IDLE);return}const Wr=Gr?Gr.stats:jr.stats;this.fragLastKbps=Math.round(8*Wr.total/(Wr.buffering.end-Wr.loading.first)),jr.sn!=="initSegment"&&(this.fragPrevious=jr),this.fragBufferedComplete(jr,Gr)}onError(_r,Ur){var jr;if(Ur.fatal){this.state=State.ERROR;return}switch(Ur.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.MAIN,Ur);break;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!Ur.levelRetry&&this.state===State.WAITING_LEVEL&&((jr=Ur.context)==null?void 0:jr.type)===PlaylistContextType.LEVEL&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_FULL_ERROR:if(!Ur.parent||Ur.parent!=="main")return;this.reduceLengthAndFlushBuffer(Ur)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(Ur);break}}checkBuffer(){const{media:_r,gapController:Ur}=this;if(!(!_r||!Ur||!_r.readyState)){if(this.loadedmetadata||!BufferHelper.getBuffered(_r).length){const jr=this.state!==State.IDLE?this.fragCurrent:null;Ur.poll(this.lastCurrentTime,jr)}this.lastCurrentTime=_r.currentTime}}onFragLoadEmergencyAborted(){this.state=State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(_r,{type:Ur}){if(Ur!==ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){const jr=(Ur===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(jr,Ur,PlaylistLevelType.MAIN)}}onLevelsUpdated(_r,Ur){this.levels=Ur.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:_r}=this;if(!_r)return;const Ur=_r.currentTime;let jr=this.startPosition;if(jr>=0&&Ur<jr){if(_r.seeking){this.log(`could not seek to ${jr}, already seeking at ${Ur}`);return}const Gr=BufferHelper.getBuffered(_r),Zr=(Gr.length?Gr.start(0):0)-jr;Zr>0&&(Zr<this.config.maxBufferHole||Zr<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${Zr} to match buffer start`),jr+=Zr,this.startPosition=jr),this.log(`seek to target start position ${jr} from current time ${Ur}`),_r.currentTime=jr}}_getAudioCodec(_r){let Ur=this.config.defaultAudioCodec||_r.audioCodec;return this.audioCodecSwap&&Ur&&(this.log("Swapping audio codec"),Ur.indexOf("mp4a.40.5")!==-1?Ur="mp4a.40.2":Ur="mp4a.40.5"),Ur}_loadBitrateTestFrag(_r,Ur){_r.bitrateTest=!0,this._doFragLoad(_r,Ur).then(jr=>{const{hls:Gr}=this;if(!jr||this.fragContextChanged(_r))return;Ur.fragmentError=0,this.state=State.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const Wr=_r.stats;Wr.parsing.start=Wr.parsing.end=Wr.buffering.start=Wr.buffering.end=self.performance.now(),Gr.trigger(Events.FRAG_LOADED,jr),_r.bitrateTest=!1})}_handleTransmuxComplete(_r){var Ur;const jr="main",{hls:Gr}=this,{remuxResult:Wr,chunkMeta:Zr}=_r,Yr=this.getCurrentContext(Zr);if(!Yr){this.resetWhenMissingContext(Zr);return}const{frag:ts,part:es,level:ns}=Yr,{video:Xr,text:qr,id3:_i,initSegment:rs}=Wr,{details:is}=ns,ss=this.altAudio?void 0:Wr.audio;if(this.fragContextChanged(ts)){this.fragmentTracker.removeFragment(ts);return}if(this.state=State.PARSING,rs){if(rs!=null&&rs.tracks){const cs=ts.initSegment||ts;this._bufferInitSegment(ns,rs.tracks,cs,Zr),Gr.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:cs,id:jr,tracks:rs.tracks})}const os=rs.initPTS,ls=rs.timescale;isFiniteNumber(os)&&(this.initPTS[ts.cc]={baseTime:os,timescale:ls},Gr.trigger(Events.INIT_PTS_FOUND,{frag:ts,id:jr,initPTS:os,timescale:ls}))}if(Xr&&is&&ts.sn!=="initSegment"){const os=is.fragments[ts.sn-1-is.startSN],ls=ts.sn===is.startSN,cs=!os||ts.cc>os.cc;if(Wr.independent!==!1){const{startPTS:ds,endPTS:fs,startDTS:ms,endDTS:ps}=Xr;if(es)es.elementaryStreams[Xr.type]={startPTS:ds,endPTS:fs,startDTS:ms,endDTS:ps};else if(Xr.firstKeyFrame&&Xr.independent&&Zr.id===1&&!cs&&(this.couldBacktrack=!0),Xr.dropped&&Xr.independent){const ys=this.getMainFwdBufferInfo(),ws=(ys?ys.end:this.getLoadPosition())+this.config.maxBufferHole,xs=Xr.firstKeyFramePTS?Xr.firstKeyFramePTS:ds;if(!ls&&ws<xs-this.config.maxBufferHole&&!cs){this.backtrack(ts);return}else cs&&(ts.gap=!0);ts.setElementaryStreamInfo(Xr.type,ts.start,fs,ts.start,ps,!0)}ts.setElementaryStreamInfo(Xr.type,ds,fs,ms,ps),this.backtrackFragment&&(this.backtrackFragment=ts),this.bufferFragmentData(Xr,ts,es,Zr,ls||cs)}else if(ls||cs)ts.gap=!0;else{this.backtrack(ts);return}}if(ss){const{startPTS:os,endPTS:ls,startDTS:cs,endDTS:ds}=ss;es&&(es.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:os,endPTS:ls,startDTS:cs,endDTS:ds}),ts.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,os,ls,cs,ds),this.bufferFragmentData(ss,ts,es,Zr)}if(is&&_i!=null&&(Ur=_i.samples)!=null&&Ur.length){const os={id:jr,frag:ts,details:is,samples:_i.samples};Gr.trigger(Events.FRAG_PARSING_METADATA,os)}if(is&&qr){const os={id:jr,frag:ts,details:is,samples:qr.samples};Gr.trigger(Events.FRAG_PARSING_USERDATA,os)}}_bufferInitSegment(_r,Ur,jr,Gr){if(this.state!==State.PARSING)return;this.audioOnly=!!Ur.audio&&!Ur.video,this.altAudio&&!this.audioOnly&&delete Ur.audio;const{audio:Wr,video:Zr,audiovideo:Yr}=Ur;if(Wr){let ts=_r.audioCodec;const es=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(ts&&(ts.indexOf("mp4a.40.5")!==-1?ts="mp4a.40.2":ts="mp4a.40.5"),Wr.metadata.channelCount!==1&&es.indexOf("firefox")===-1&&(ts="mp4a.40.5")),es.indexOf("android")!==-1&&Wr.container!=="audio/mpeg"&&(ts="mp4a.40.2",this.log(`Android: force audio codec to ${ts}`)),_r.audioCodec&&_r.audioCodec!==ts&&this.log(`Swapping manifest audio codec "${_r.audioCodec}" for "${ts}"`),Wr.levelCodec=ts,Wr.id="main",this.log(`Init audio buffer, container:${Wr.container}, codecs[selected/level/parsed]=[${ts||""}/${_r.audioCodec||""}/${Wr.codec}]`)}Zr&&(Zr.levelCodec=_r.videoCodec,Zr.id="main",this.log(`Init video buffer, container:${Zr.container}, codecs[level/parsed]=[${_r.videoCodec||""}/${Zr.codec}]`)),Yr&&this.log(`Init audiovideo buffer, container:${Yr.container}, codecs[level/parsed]=[${_r.attrs.CODECS||""}/${Yr.codec}]`),this.hls.trigger(Events.BUFFER_CODECS,Ur),Object.keys(Ur).forEach(ts=>{const ns=Ur[ts].initSegment;ns!=null&&ns.byteLength&&this.hls.trigger(Events.BUFFER_APPENDING,{type:ts,data:ns,frag:jr,part:null,chunkMeta:Gr,parent:jr.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,PlaylistLevelType.MAIN)}backtrack(_r){this.couldBacktrack=!0,this.backtrackFragment=_r,this.resetTransmuxer(),this.flushBufferGap(_r),this.fragmentTracker.removeFragment(_r),this.fragPrevious=null,this.nextLoadPosition=_r.start,this.state=State.IDLE}checkFragmentChanged(){const _r=this.media;let Ur=null;if(_r&&_r.readyState>1&&_r.seeking===!1){const jr=_r.currentTime;if(BufferHelper.isBuffered(_r,jr)?Ur=this.getAppendedFrag(jr):BufferHelper.isBuffered(_r,jr+.1)&&(Ur=this.getAppendedFrag(jr+.1)),Ur){this.backtrackFragment=null;const Gr=this.fragPlaying,Wr=Ur.level;(!Gr||Ur.sn!==Gr.sn||Gr.level!==Wr||Ur.urlId!==Gr.urlId)&&(this.fragPlaying=Ur,this.hls.trigger(Events.FRAG_CHANGED,{frag:Ur}),(!Gr||Gr.level!==Wr)&&this.hls.trigger(Events.LEVEL_SWITCHED,{level:Wr}))}}}get nextLevel(){const _r=this.nextBufferedFrag;return _r?_r.level:-1}get currentFrag(){const _r=this.media;return _r?this.fragPlaying||this.getAppendedFrag(_r.currentTime):null}get currentProgramDateTime(){const _r=this.media;if(_r){const Ur=_r.currentTime,jr=this.currentFrag;if(jr&&isFiniteNumber(Ur)&&isFiniteNumber(jr.programDateTime)){const Gr=jr.programDateTime+(Ur-jr.start)*1e3;return new Date(Gr)}}return null}get currentLevel(){const _r=this.currentFrag;return _r?_r.level:-1}get nextBufferedFrag(){const _r=this.currentFrag;return _r?this.followingBufferedFrag(_r):null}get forceStartLoad(){return this._forceStartLoad}}class EWMA{constructor(_r,Ur=0,jr=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=_r,this.alpha_=_r?Math.exp(Math.log(.5)/_r):0,this.estimate_=Ur,this.totalWeight_=jr}sample(_r,Ur){const jr=Math.pow(this.alpha_,_r);this.estimate_=Ur*(1-jr)+jr*this.estimate_,this.totalWeight_+=_r}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const _r=1-Math.pow(this.alpha_,this.totalWeight_);if(_r)return this.estimate_/_r}return this.estimate_}}class EwmaBandWidthEstimator{constructor(_r,Ur,jr,Gr=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=jr,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new EWMA(_r),this.fast_=new EWMA(Ur),this.defaultTTFB_=Gr,this.ttfb_=new EWMA(_r)}update(_r,Ur){const{slow_:jr,fast_:Gr,ttfb_:Wr}=this;jr.halfLife!==_r&&(this.slow_=new EWMA(_r,jr.getEstimate(),jr.getTotalWeight())),Gr.halfLife!==Ur&&(this.fast_=new EWMA(Ur,Gr.getEstimate(),Gr.getTotalWeight())),Wr.halfLife!==_r&&(this.ttfb_=new EWMA(_r,Wr.getEstimate(),Wr.getTotalWeight()))}sample(_r,Ur){_r=Math.max(_r,this.minDelayMs_);const jr=8*Ur,Gr=_r/1e3,Wr=jr/Gr;this.fast_.sample(Gr,Wr),this.slow_.sample(Gr,Wr)}sampleTTFB(_r){const Ur=_r/1e3,jr=Math.sqrt(2)*Math.exp(-Math.pow(Ur,2)/2);this.ttfb_.sample(jr,Math.max(_r,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class AbrController{constructor(_r){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=_r;const Ur=_r.config;this.bwEstimator=new EwmaBandWidthEstimator(Ur.abrEwmaSlowVoD,Ur.abrEwmaFastVoD,Ur.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:_r}=this;_r.on(Events.FRAG_LOADING,this.onFragLoading,this),_r.on(Events.FRAG_LOADED,this.onFragLoaded,this),_r.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),_r.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),_r.on(Events.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:_r}=this;_r.off(Events.FRAG_LOADING,this.onFragLoading,this),_r.off(Events.FRAG_LOADED,this.onFragLoaded,this),_r.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),_r.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),_r.off(Events.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(_r,Ur){var jr;const Gr=Ur.frag;this.ignoreFragment(Gr)||(this.fragCurrent=Gr,this.partCurrent=(jr=Ur.part)!=null?jr:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(_r,Ur){this.clearTimer()}getTimeToLoadFrag(_r,Ur,jr,Gr){const Wr=_r+jr/Ur,Zr=Gr?this.lastLevelLoadSec:0;return Wr+Zr}onLevelLoaded(_r,Ur){const jr=this.hls.config,{total:Gr,bwEstimate:Wr}=Ur.stats;isFiniteNumber(Gr)&&isFiniteNumber(Wr)&&(this.lastLevelLoadSec=8*Gr/Wr),Ur.details.live?this.bwEstimator.update(jr.abrEwmaSlowLive,jr.abrEwmaFastLive):this.bwEstimator.update(jr.abrEwmaSlowVoD,jr.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:_r,partCurrent:Ur,hls:jr}=this,{autoLevelEnabled:Gr,media:Wr}=jr;if(!_r||!Wr)return;const Zr=performance.now(),Yr=Ur?Ur.stats:_r.stats,ts=Ur?Ur.duration:_r.duration,es=Zr-Yr.loading.start;if(Yr.aborted||Yr.loaded&&Yr.loaded===Yr.total||_r.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!Gr||Wr.paused||!Wr.playbackRate||!Wr.readyState)return;const ns=jr.mainForwardBufferInfo;if(ns===null)return;const Xr=this.bwEstimator.getEstimateTTFB(),qr=Math.abs(Wr.playbackRate);if(es<=Math.max(Xr,1e3*(ts/(qr*2))))return;const _i=ns.len/qr;if(_i>=2*ts/qr)return;const rs=Yr.loading.first?Yr.loading.first-Yr.loading.start:-1,is=Yr.loaded&&rs>-1,ss=this.bwEstimator.getEstimate(),{levels:os,minAutoLevel:ls}=jr,cs=os[_r.level],ds=Yr.total||Math.max(Yr.loaded,Math.round(ts*cs.maxBitrate/8));let fs=es-rs;fs<1&&is&&(fs=Math.min(es,Yr.loaded*8/ss));const ms=is?Yr.loaded*1e3/fs:0,ps=ms?(ds-Yr.loaded)/ms:ds*8/ss+Xr/1e3;if(ps<=_i)return;const ys=ms?ms*8:ss;let ws=Number.POSITIVE_INFINITY,xs;for(xs=_r.level-1;xs>ls;xs--){const Es=os[xs].maxBitrate;if(ws=this.getTimeToLoadFrag(Xr/1e3,ys,ts*Es,!os[xs].details),ws<_i)break}ws>=ps||ws>ts*10||(jr.nextLoadLevel=xs,is?this.bwEstimator.sample(es-Math.min(Xr,rs),Yr.loaded):this.bwEstimator.sampleTTFB(es),this.clearTimer(),logger.warn(`[abr] Fragment ${_r.sn}${Ur?" part "+Ur.index:""} of level ${_r.level} is loading too slowly;
      Time to underbuffer: ${_i.toFixed(3)} s
      Estimated load time for current fragment: ${ps.toFixed(3)} s
      Estimated load time for down switch fragment: ${ws.toFixed(3)} s
      TTFB estimate: ${rs}
      Current BW estimate: ${isFiniteNumber(ss)?(ss/1024).toFixed(3):"Unknown"} Kb/s
      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s
      Aborting and switching to level ${xs}`),_r.loader&&(this.fragCurrent=this.partCurrent=null,_r.abortRequests()),jr.trigger(Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:_r,part:Ur,stats:Yr}))}onFragLoaded(_r,{frag:Ur,part:jr}){const Gr=jr?jr.stats:Ur.stats;if(Ur.type===PlaylistLevelType.MAIN&&this.bwEstimator.sampleTTFB(Gr.loading.first-Gr.loading.start),!this.ignoreFragment(Ur)){if(this.clearTimer(),this.lastLoadedFragLevel=Ur.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const Wr=jr?jr.duration:Ur.duration,Zr=this.hls.levels[Ur.level],Yr=(Zr.loaded?Zr.loaded.bytes:0)+Gr.loaded,ts=(Zr.loaded?Zr.loaded.duration:0)+Wr;Zr.loaded={bytes:Yr,duration:ts},Zr.realBitrate=Math.round(8*Yr/ts)}if(Ur.bitrateTest){const Wr={stats:Gr,frag:Ur,part:jr,id:Ur.type};this.onFragBuffered(Events.FRAG_BUFFERED,Wr),Ur.bitrateTest=!1}}}onFragBuffered(_r,Ur){const{frag:jr,part:Gr}=Ur,Wr=Gr!=null&&Gr.stats.loaded?Gr.stats:jr.stats;if(Wr.aborted||this.ignoreFragment(jr))return;const Zr=Wr.parsing.end-Wr.loading.start-Math.min(Wr.loading.first-Wr.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(Zr,Wr.loaded),Wr.bwEstimate=this.bwEstimator.getEstimate(),jr.bitrateTest?this.bitrateTestDelay=Zr/1e3:this.bitrateTestDelay=0}ignoreFragment(_r){return _r.type!==PlaylistLevelType.MAIN||_r.sn==="initSegment"}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const _r=this._nextAutoLevel,Ur=this.bwEstimator;if(_r!==-1&&!Ur.canEstimate())return _r;let jr=this.getNextABRAutoLevel();if(_r!==-1){const Gr=this.hls.levels;if(Gr.length>Math.max(_r,jr)&&Gr[_r].loadError<=Gr[jr].loadError)return _r}return _r!==-1&&(jr=Math.min(_r,jr)),jr}getNextABRAutoLevel(){const{fragCurrent:_r,partCurrent:Ur,hls:jr}=this,{maxAutoLevel:Gr,config:Wr,minAutoLevel:Zr,media:Yr}=jr,ts=Ur?Ur.duration:_r?_r.duration:0,es=Yr&&Yr.playbackRate!==0?Math.abs(Yr.playbackRate):1,ns=this.bwEstimator?this.bwEstimator.getEstimate():Wr.abrEwmaDefaultEstimate,Xr=jr.mainForwardBufferInfo,qr=(Xr?Xr.len:0)/es;let _i=this.findBestLevel(ns,Zr,Gr,qr,Wr.abrBandWidthFactor,Wr.abrBandWidthUpFactor);if(_i>=0)return _i;logger.trace(`[abr] ${qr?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let rs=ts?Math.min(ts,Wr.maxStarvationDelay):Wr.maxStarvationDelay,is=Wr.abrBandWidthFactor,ss=Wr.abrBandWidthUpFactor;if(!qr){const os=this.bitrateTestDelay;os&&(rs=(ts?Math.min(ts,Wr.maxLoadingDelay):Wr.maxLoadingDelay)-os,logger.trace(`[abr] bitrate test took ${Math.round(1e3*os)}ms, set first fragment max fetchDuration to ${Math.round(1e3*rs)} ms`),is=ss=1)}return _i=this.findBestLevel(ns,Zr,Gr,qr+rs,is,ss),Math.max(_i,0)}findBestLevel(_r,Ur,jr,Gr,Wr,Zr){var Yr;const{fragCurrent:ts,partCurrent:es,lastLoadedFragLevel:ns}=this,{levels:Xr}=this.hls,qr=Xr[ns],_i=!!(qr!=null&&(Yr=qr.details)!=null&&Yr.live),rs=qr==null?void 0:qr.codecSet,is=es?es.duration:ts?ts.duration:0,ss=this.bwEstimator.getEstimateTTFB()/1e3;let os=Ur,ls=-1;for(let cs=jr;cs>=Ur;cs--){const ds=Xr[cs];if(!ds||rs&&ds.codecSet!==rs){ds&&(os=Math.min(cs,os),ls=Math.max(cs,ls));continue}ls!==-1&&logger.trace(`[abr] Skipped level(s) ${os}-${ls} with CODECS:"${Xr[ls].attrs.CODECS}"; not compatible with "${qr.attrs.CODECS}"`);const fs=ds.details,ms=(es?fs==null?void 0:fs.partTarget:fs==null?void 0:fs.averagetargetduration)||is;let ps;cs<=ns?ps=Wr*_r:ps=Zr*_r;const ys=Xr[cs].maxBitrate,ws=this.getTimeToLoadFrag(ss,ps,ys*ms,fs===void 0);if(logger.trace(`[abr] level:${cs} adjustedbw-bitrate:${Math.round(ps-ys)} avgDuration:${ms.toFixed(1)} maxFetchDuration:${Gr.toFixed(1)} fetchDuration:${ws.toFixed(1)}`),ps>ys&&(ws===0||!isFiniteNumber(ws)||_i&&!this.bitrateTestDelay||ws<Gr))return cs}return-1}set nextAutoLevel(_r){this._nextAutoLevel=_r}}class ChunkCache{constructor(){this.chunks=[],this.dataLength=0}push(_r){this.chunks.push(_r),this.dataLength+=_r.length}flush(){const{chunks:_r,dataLength:Ur}=this;let jr;if(_r.length)_r.length===1?jr=_r[0]:jr=concatUint8Arrays(_r,Ur);else return new Uint8Array(0);return this.reset(),jr}reset(){this.chunks.length=0,this.dataLength=0}}function concatUint8Arrays(Nr,_r){const Ur=new Uint8Array(_r);let jr=0;for(let Gr=0;Gr<Nr.length;Gr++){const Wr=Nr[Gr];Ur.set(Wr,jr),jr+=Wr.length}return Ur}const TICK_INTERVAL$1=100;class AudioStreamController extends BaseStreamController{constructor(_r,Ur,jr){super(_r,Ur,jr,"[audio-stream-controller]",PlaylistLevelType.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:_r}=this;_r.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.on(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),_r.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),_r.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),_r.on(Events.ERROR,this.onError,this),_r.on(Events.BUFFER_RESET,this.onBufferReset,this),_r.on(Events.BUFFER_CREATED,this.onBufferCreated,this),_r.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),_r.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),_r.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:_r}=this;_r.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.off(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),_r.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),_r.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),_r.off(Events.ERROR,this.onError,this),_r.off(Events.BUFFER_RESET,this.onBufferReset,this),_r.off(Events.BUFFER_CREATED,this.onBufferCreated,this),_r.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),_r.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),_r.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(_r,{frag:Ur,id:jr,initPTS:Gr,timescale:Wr}){if(jr==="main"){const Zr=Ur.cc;this.initPTS[Ur.cc]={baseTime:Gr,timescale:Wr},this.log(`InitPTS for cc: ${Zr} found from main: ${Gr}`),this.videoTrackCC=Zr,this.state===State.WAITING_INIT_PTS&&this.tick()}}startLoad(_r){if(!this.levels){this.startPosition=_r,this.state=State.STOPPED;return}const Ur=this.lastCurrentTime;this.stopLoad(),this.setInterval(TICK_INTERVAL$1),Ur>0&&_r===-1?(this.log(`Override startPosition with lastCurrentTime @${Ur.toFixed(3)}`),_r=Ur,this.state=State.IDLE):(this.loadedmetadata=!1,this.state=State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=_r,this.tick()}doTick(){switch(this.state){case State.IDLE:this.doTickIdle();break;case State.WAITING_TRACK:{var _r;const{levels:jr,trackId:Gr}=this,Wr=jr==null||(_r=jr[Gr])==null?void 0:_r.details;if(Wr){if(this.waitForCdnTuneIn(Wr))break;this.state=State.WAITING_INIT_PTS}break}case State.FRAG_LOADING_WAITING_RETRY:{var Ur;const jr=performance.now(),Gr=this.retryDate;(!Gr||jr>=Gr||(Ur=this.media)!=null&&Ur.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=State.IDLE);break}case State.WAITING_INIT_PTS:{const jr=this.waitingData;if(jr){const{frag:Gr,part:Wr,cache:Zr,complete:Yr}=jr;if(this.initPTS[Gr.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=State.FRAG_LOADING;const ts=Zr.flush(),es={frag:Gr,part:Wr,payload:ts,networkDetails:null};this._handleFragmentLoadProgress(es),Yr&&super._handleFragmentLoadComplete(es)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${Gr.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const ts=this.getLoadPosition(),es=BufferHelper.bufferInfo(this.mediaBuffer,ts,this.config.maxBufferHole);fragmentWithinToleranceTest(es.end,this.config.maxFragLookUpTolerance,Gr)<0&&(this.log(`Waiting fragment cc (${Gr.cc}) @ ${Gr.start} cancelled because another fragment at ${es.end} is needed`),this.clearWaitingFragment())}}else this.state=State.IDLE}}this.onTickEnd()}clearWaitingFragment(){const _r=this.waitingData;_r&&(this.fragmentTracker.removeFragment(_r.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=State.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:_r}=this;_r!=null&&_r.readyState&&(this.lastCurrentTime=_r.currentTime)}doTickIdle(){const{hls:_r,levels:Ur,media:jr,trackId:Gr}=this,Wr=_r.config;if(!(Ur!=null&&Ur[Gr])||!jr&&(this.startFragRequested||!Wr.startFragPrefetch))return;const Zr=Ur[Gr],Yr=Zr.details;if(!Yr||Yr.live&&this.levelLastLoaded!==Gr||this.waitForCdnTuneIn(Yr)){this.state=State.WAITING_TRACK;return}const ts=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&ts&&(this.bufferFlushed=!1,this.afterBufferFlushed(ts,ElementaryStreamTypes.AUDIO,PlaylistLevelType.AUDIO));const es=this.getFwdBufferInfo(ts,PlaylistLevelType.AUDIO);if(es===null)return;const{bufferedTrack:ns,switchingTrack:Xr}=this;if(!Xr&&this._streamEnded(es,Yr)){_r.trigger(Events.BUFFER_EOS,{type:"audio"}),this.state=State.ENDED;return}const qr=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,PlaylistLevelType.MAIN),_i=es.len,rs=this.getMaxBufferLength(qr==null?void 0:qr.len);if(_i>=rs&&!Xr)return;const ss=Yr.fragments[0].start;let os=es.end;if(Xr&&jr){const fs=this.getLoadPosition();ns&&Xr.attrs!==ns.attrs&&(os=fs),Yr.PTSKnown&&fs<ss&&(es.end>ss||es.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),jr.currentTime=ss+.05)}let ls=this.getNextFragment(os,Yr),cs=!1;if(ls&&this.isLoopLoading(ls,os)&&(cs=!!ls.gap,ls=this.getNextFragmentLoopLoading(ls,Yr,es,PlaylistLevelType.MAIN,rs)),!ls){this.bufferFlushed=!0;return}const ds=qr&&ls.start>qr.end+Yr.targetduration;if(ds||!(qr!=null&&qr.len)&&es.len){const fs=this.getAppendedFrag(ls.start,PlaylistLevelType.MAIN);if(fs===null||(cs||(cs=!!fs.gap||!!ds&&qr.len===0),ds&&!cs||cs&&es.nextStart&&es.nextStart<fs.end))return}this.loadFragment(ls,Zr,os)}getMaxBufferLength(_r){const Ur=super.getMaxBufferLength();return _r?Math.min(Math.max(Ur,_r),this.config.maxMaxBufferLength):Ur}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(_r,{audioTracks:Ur}){this.resetTransmuxer(),this.levels=Ur.map(jr=>new Level(jr))}onAudioTrackSwitching(_r,Ur){const jr=!!Ur.url;this.trackId=Ur.id;const{fragCurrent:Gr}=this;Gr&&(Gr.abortRequests(),this.removeUnbufferedFrags(Gr.start)),this.resetLoadingState(),jr?this.setInterval(TICK_INTERVAL$1):this.resetTransmuxer(),jr?(this.switchingTrack=Ur,this.state=State.IDLE):(this.switchingTrack=null,this.bufferedTrack=Ur,this.state=State.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(_r,Ur){this.mainDetails=Ur.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(_r,Ur){var jr;if(this.mainDetails==null){this.cachedTrackLoadedData=Ur;return}const{levels:Gr}=this,{details:Wr,id:Zr}=Ur;if(!Gr){this.warn(`Audio tracks were reset while loading level ${Zr}`);return}this.log(`Track ${Zr} loaded [${Wr.startSN},${Wr.endSN}]${Wr.lastPartSn?`[part-${Wr.lastPartSn}-${Wr.lastPartIndex}]`:""},duration:${Wr.totalduration}`);const Yr=Gr[Zr];let ts=0;if(Wr.live||(jr=Yr.details)!=null&&jr.live){this.checkLiveUpdate(Wr);const es=this.mainDetails;if(Wr.deltaUpdateFailed||!es)return;!Yr.details&&Wr.hasProgramDateTime&&es.hasProgramDateTime?(alignMediaPlaylistByPDT(Wr,es),ts=Wr.fragments[0].start):ts=this.alignPlaylists(Wr,Yr.details)}Yr.details=Wr,this.levelLastLoaded=Zr,!this.startFragRequested&&(this.mainDetails||!Wr.live)&&this.setStartPosition(Yr.details,ts),this.state===State.WAITING_TRACK&&!this.waitForCdnTuneIn(Wr)&&(this.state=State.IDLE),this.tick()}_handleFragmentLoadProgress(_r){var Ur;const{frag:jr,part:Gr,payload:Wr}=_r,{config:Zr,trackId:Yr,levels:ts}=this;if(!ts){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${jr.sn} of level ${jr.level} will not be buffered`);return}const es=ts[Yr];if(!es){this.warn("Audio track is undefined on fragment load progress");return}const ns=es.details;if(!ns){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(jr.start);return}const Xr=Zr.defaultAudioCodec||es.audioCodec||"mp4a.40.2";let qr=this.transmuxer;qr||(qr=this.transmuxer=new TransmuxerInterface(this.hls,PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const _i=this.initPTS[jr.cc],rs=(Ur=jr.initSegment)==null?void 0:Ur.data;if(_i!==void 0){const ss=Gr?Gr.index:-1,os=ss!==-1,ls=new ChunkMetadata(jr.level,jr.sn,jr.stats.chunkCount,Wr.byteLength,ss,os);qr.push(Wr,rs,Xr,"",jr,Gr,ns.totalduration,!1,ls,_i)}else{this.log(`Unknown video PTS for cc ${jr.cc}, waiting for video PTS before demuxing audio frag ${jr.sn} of [${ns.startSN} ,${ns.endSN}],track ${Yr}`);const{cache:is}=this.waitingData=this.waitingData||{frag:jr,part:Gr,cache:new ChunkCache,complete:!1};is.push(new Uint8Array(Wr)),this.waitingVideoCC=this.videoTrackCC,this.state=State.WAITING_INIT_PTS}}_handleFragmentLoadComplete(_r){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(_r)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(_r,Ur){const jr=Ur.tracks.audio;jr&&(this.mediaBuffer=jr.buffer||null),Ur.tracks.video&&(this.videoBuffer=Ur.tracks.video.buffer||null)}onFragBuffered(_r,Ur){const{frag:jr,part:Gr}=Ur;if(jr.type!==PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&jr.type===PlaylistLevelType.MAIN){const Wr=this.videoBuffer||this.media;Wr&&BufferHelper.getBuffered(Wr).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(jr)){this.warn(`Fragment ${jr.sn}${Gr?" p: "+Gr.index:""} of level ${jr.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(jr.sn!=="initSegment"){this.fragPrevious=jr;const Wr=this.switchingTrack;Wr&&(this.bufferedTrack=Wr,this.switchingTrack=null,this.hls.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},Wr)))}this.fragBufferedComplete(jr,Gr)}onError(_r,Ur){var jr;if(Ur.fatal){this.state=State.ERROR;return}switch(Ur.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.AUDIO,Ur);break;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!Ur.levelRetry&&this.state===State.WAITING_TRACK&&((jr=Ur.context)==null?void 0:jr.type)===PlaylistContextType.AUDIO_TRACK&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_FULL_ERROR:if(!Ur.parent||Ur.parent!=="audio")return;this.reduceLengthAndFlushBuffer(Ur)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(Ur);break}}onBufferFlushed(_r,{type:Ur}){Ur===ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===State.ENDED&&(this.state=State.IDLE))}_handleTransmuxComplete(_r){var Ur;const jr="audio",{hls:Gr}=this,{remuxResult:Wr,chunkMeta:Zr}=_r,Yr=this.getCurrentContext(Zr);if(!Yr){this.resetWhenMissingContext(Zr);return}const{frag:ts,part:es,level:ns}=Yr,{details:Xr}=ns,{audio:qr,text:_i,id3:rs,initSegment:is}=Wr;if(this.fragContextChanged(ts)||!Xr){this.fragmentTracker.removeFragment(ts);return}if(this.state=State.PARSING,this.switchingTrack&&qr&&this.completeAudioSwitch(this.switchingTrack),is!=null&&is.tracks){const ss=ts.initSegment||ts;this._bufferInitSegment(is.tracks,ss,Zr),Gr.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:ss,id:jr,tracks:is.tracks})}if(qr){const{startPTS:ss,endPTS:os,startDTS:ls,endDTS:cs}=qr;es&&(es.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:ss,endPTS:os,startDTS:ls,endDTS:cs}),ts.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,ss,os,ls,cs),this.bufferFragmentData(qr,ts,es,Zr)}if(rs!=null&&(Ur=rs.samples)!=null&&Ur.length){const ss=_extends({id:jr,frag:ts,details:Xr},rs);Gr.trigger(Events.FRAG_PARSING_METADATA,ss)}if(_i){const ss=_extends({id:jr,frag:ts,details:Xr},_i);Gr.trigger(Events.FRAG_PARSING_USERDATA,ss)}}_bufferInitSegment(_r,Ur,jr){if(this.state!==State.PARSING)return;_r.video&&delete _r.video;const Gr=_r.audio;if(!Gr)return;Gr.levelCodec=Gr.codec,Gr.id="audio",this.log(`Init audio buffer, container:${Gr.container}, codecs[parsed]=[${Gr.codec}]`),this.hls.trigger(Events.BUFFER_CODECS,_r);const Wr=Gr.initSegment;if(Wr!=null&&Wr.byteLength){const Zr={type:"audio",frag:Ur,part:null,chunkMeta:jr,parent:Ur.type,data:Wr};this.hls.trigger(Events.BUFFER_APPENDING,Zr)}this.tick()}loadFragment(_r,Ur,jr){const Gr=this.fragmentTracker.getState(_r);if(this.fragCurrent=_r,this.switchingTrack||Gr===FragmentState.NOT_LOADED||Gr===FragmentState.PARTIAL){var Wr;_r.sn==="initSegment"?this._loadInitSegment(_r,Ur):(Wr=Ur.details)!=null&&Wr.live&&!this.initPTS[_r.cc]?(this.log(`Waiting for video PTS in continuity counter ${_r.cc} of live stream before loading audio fragment ${_r.sn} of level ${this.trackId}`),this.state=State.WAITING_INIT_PTS):(this.startFragRequested=!0,super.loadFragment(_r,Ur,jr))}else this.clearTrackerIfNeeded(_r)}completeAudioSwitch(_r){const{hls:Ur,media:jr,bufferedTrack:Gr}=this,Wr=Gr==null?void 0:Gr.attrs,Zr=_r.attrs;jr&&Wr&&(Wr.CHANNELS!==Zr.CHANNELS||Wr.NAME!==Zr.NAME||Wr.LANGUAGE!==Zr.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=_r,this.switchingTrack=null,Ur.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},_r))}}class AudioTrackController extends BasePlaylistController{constructor(_r){super(_r,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:_r}=this;_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.on(Events.LEVEL_LOADING,this.onLevelLoading,this),_r.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),_r.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),_r.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:_r}=this;_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.off(Events.LEVEL_LOADING,this.onLevelLoading,this),_r.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),_r.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),_r.off(Events.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(_r,Ur){this.tracks=Ur.audioTracks||[]}onAudioTrackLoaded(_r,Ur){const{id:jr,groupId:Gr,details:Wr}=Ur,Zr=this.tracksInGroup[jr];if(!Zr||Zr.groupId!==Gr){this.warn(`Track with id:${jr} and group:${Gr} not found in active group ${Zr.groupId}`);return}const Yr=Zr.details;Zr.details=Ur.details,this.log(`audio-track ${jr} "${Zr.name}" lang:${Zr.lang} group:${Gr} loaded [${Wr.startSN}-${Wr.endSN}]`),jr===this.trackId&&this.playlistLoaded(jr,Ur,Yr)}onLevelLoading(_r,Ur){this.switchLevel(Ur.level)}onLevelSwitching(_r,Ur){this.switchLevel(Ur.level)}switchLevel(_r){const Ur=this.hls.levels[_r];if(!(Ur!=null&&Ur.audioGroupIds))return;const jr=Ur.audioGroupIds[Ur.urlId];if(this.groupId!==jr){this.groupId=jr||null;const Gr=this.tracks.filter(Zr=>!jr||Zr.groupId===jr);this.selectDefaultTrack&&!Gr.some(Zr=>Zr.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=Gr;const Wr={audioTracks:Gr};this.log(`Updating audio tracks, ${Gr.length} track(s) found in group:${jr}`),this.hls.trigger(Events.AUDIO_TRACKS_UPDATED,Wr),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(_r,Ur){Ur.fatal||!Ur.context||Ur.context.type===PlaylistContextType.AUDIO_TRACK&&Ur.context.id===this.trackId&&Ur.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(Ur))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(_r){this.selectDefaultTrack=!1,this.setAudioTrack(_r)}setAudioTrack(_r){const Ur=this.tracksInGroup;if(_r<0||_r>=Ur.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();const jr=this.currentTrack;Ur[this.trackId];const Gr=Ur[_r],{groupId:Wr,name:Zr}=Gr;if(this.log(`Switching to audio-track ${_r} "${Zr}" lang:${Gr.lang} group:${Wr}`),this.trackId=_r,this.currentTrack=Gr,this.selectDefaultTrack=!1,this.hls.trigger(Events.AUDIO_TRACK_SWITCHING,_objectSpread2({},Gr)),Gr.details&&!Gr.details.live)return;const Yr=this.switchParams(Gr.url,jr==null?void 0:jr.details);this.loadPlaylist(Yr)}selectInitialTrack(){const _r=this.tracksInGroup,Ur=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(Ur!==-1)this.setAudioTrack(Ur);else{const jr=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${_r.length}`);this.warn(jr.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:jr})}}findTrackId(_r){const Ur=this.tracksInGroup;for(let jr=0;jr<Ur.length;jr++){const Gr=Ur[jr];if((!this.selectDefaultTrack||Gr.default)&&(!_r||_r.attrs["STABLE-RENDITION-ID"]!==void 0&&_r.attrs["STABLE-RENDITION-ID"]===Gr.attrs["STABLE-RENDITION-ID"]||_r.name===Gr.name&&_r.lang===Gr.lang))return Gr.id}return-1}loadPlaylist(_r){super.loadPlaylist();const Ur=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(Ur)){const jr=Ur.id,Gr=Ur.groupId;let Wr=Ur.url;if(_r)try{Wr=_r.addDirectives(Wr)}catch(Zr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Zr}`)}this.log(`loading audio-track playlist ${jr} "${Ur.name}" lang:${Ur.lang} group:${Gr}`),this.clearTimer(),this.hls.trigger(Events.AUDIO_TRACK_LOADING,{url:Wr,id:jr,groupId:Gr,deliveryDirectives:_r||null})}}}function subtitleOptionsIdentical(Nr,_r){if(Nr.length!==_r.length)return!1;for(let Ur=0;Ur<Nr.length;Ur++)if(!subtitleAttributesIdentical(Nr[Ur].attrs,_r[Ur].attrs))return!1;return!0}function subtitleAttributesIdentical(Nr,_r){const Ur=Nr["STABLE-RENDITION-ID"];return Ur?Ur===_r["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(jr=>Nr[jr]!==_r[jr])}const TICK_INTERVAL=500;class SubtitleStreamController extends BaseStreamController{constructor(_r,Ur,jr){super(_r,Ur,jr,"[subtitle-stream-controller]",PlaylistLevelType.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:_r}=this;_r.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.on(Events.ERROR,this.onError,this),_r.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_r.on(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),_r.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_r.on(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),_r.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_r.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:_r}=this;_r.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),_r.off(Events.ERROR,this.onError,this),_r.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_r.off(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),_r.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_r.off(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),_r.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_r.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(_r){this.stopLoad(),this.state=State.IDLE,this.setInterval(TICK_INTERVAL),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=_r,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(_r,Ur){this.mainDetails=Ur.details}onSubtitleFragProcessed(_r,Ur){const{frag:jr,success:Gr}=Ur;if(this.fragPrevious=jr,this.state=State.IDLE,!Gr)return;const Wr=this.tracksBuffered[this.currentTrackId];if(!Wr)return;let Zr;const Yr=jr.start;for(let es=0;es<Wr.length;es++)if(Yr>=Wr[es].start&&Yr<=Wr[es].end){Zr=Wr[es];break}const ts=jr.start+jr.duration;Zr?Zr.end=ts:(Zr={start:Yr,end:ts},Wr.push(Zr)),this.fragmentTracker.fragBuffered(jr)}onBufferFlushing(_r,Ur){const{startOffset:jr,endOffset:Gr}=Ur;if(jr===0&&Gr!==Number.POSITIVE_INFINITY){const Wr=Gr-1;if(Wr<=0)return;Ur.endOffsetSubtitles=Math.max(0,Wr),this.tracksBuffered.forEach(Zr=>{for(let Yr=0;Yr<Zr.length;){if(Zr[Yr].end<=Wr){Zr.shift();continue}else if(Zr[Yr].start<Wr)Zr[Yr].start=Wr;else break;Yr++}}),this.fragmentTracker.removeFragmentsInRange(jr,Wr,PlaylistLevelType.SUBTITLE)}}onFragBuffered(_r,Ur){if(!this.loadedmetadata&&Ur.frag.type===PlaylistLevelType.MAIN){var jr;(jr=this.media)!=null&&jr.buffered.length&&(this.loadedmetadata=!0)}}onError(_r,Ur){const jr=Ur.frag;(jr==null?void 0:jr.type)===PlaylistLevelType.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==State.STOPPED&&(this.state=State.IDLE))}onSubtitleTracksUpdated(_r,{subtitleTracks:Ur}){if(subtitleOptionsIdentical(this.levels,Ur)){this.levels=Ur.map(jr=>new Level(jr));return}this.tracksBuffered=[],this.levels=Ur.map(jr=>{const Gr=new Level(jr);return this.tracksBuffered[Gr.id]=[],Gr}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,PlaylistLevelType.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(_r,Ur){if(this.currentTrackId=Ur.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}const jr=this.levels[this.currentTrackId];jr!=null&&jr.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,jr&&this.setInterval(TICK_INTERVAL)}onSubtitleTrackLoaded(_r,Ur){var jr;const{details:Gr,id:Wr}=Ur,{currentTrackId:Zr,levels:Yr}=this;if(!Yr.length)return;const ts=Yr[Zr];if(Wr>=Yr.length||Wr!==Zr||!ts)return;this.mediaBuffer=this.mediaBufferTimeRanges;let es=0;if(Gr.live||(jr=ts.details)!=null&&jr.live){const ns=this.mainDetails;if(Gr.deltaUpdateFailed||!ns)return;const Xr=ns.fragments[0];ts.details?(es=this.alignPlaylists(Gr,ts.details),es===0&&Xr&&(es=Xr.start,addSliding(Gr,es))):Gr.hasProgramDateTime&&ns.hasProgramDateTime?(alignMediaPlaylistByPDT(Gr,ns),es=Gr.fragments[0].start):Xr&&(es=Xr.start,addSliding(Gr,es))}ts.details=Gr,this.levelLastLoaded=Wr,!this.startFragRequested&&(this.mainDetails||!Gr.live)&&this.setStartPosition(ts.details,es),this.tick(),Gr.live&&!this.fragCurrent&&this.media&&this.state===State.IDLE&&(findFragmentByPTS(null,Gr.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),ts.details=void 0))}_handleFragmentLoadComplete(_r){const{frag:Ur,payload:jr}=_r,Gr=Ur.decryptdata,Wr=this.hls;if(!this.fragContextChanged(Ur)&&jr&&jr.byteLength>0&&Gr&&Gr.key&&Gr.iv&&Gr.method==="AES-128"){const Zr=performance.now();this.decrypter.decrypt(new Uint8Array(jr),Gr.key.buffer,Gr.iv.buffer).catch(Yr=>{throw Wr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:Yr,reason:Yr.message,frag:Ur}),Yr}).then(Yr=>{const ts=performance.now();Wr.trigger(Events.FRAG_DECRYPTED,{frag:Ur,payload:Yr,stats:{tstart:Zr,tdecrypt:ts}})}).catch(Yr=>{this.warn(`${Yr.name}: ${Yr.message}`),this.state=State.IDLE})}}doTick(){if(!this.media){this.state=State.IDLE;return}if(this.state===State.IDLE){const{currentTrackId:_r,levels:Ur}=this,jr=Ur[_r];if(!Ur.length||!jr||!jr.details)return;const{config:Gr}=this,Wr=this.getLoadPosition(),Zr=BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],Wr,Gr.maxBufferHole),{end:Yr,len:ts}=Zr,es=this.getFwdBufferInfo(this.media,PlaylistLevelType.MAIN),ns=jr.details,Xr=this.getMaxBufferLength(es==null?void 0:es.len)+ns.levelTargetDuration;if(ts>Xr)return;const qr=ns.fragments,_i=qr.length,rs=ns.edge;let is=null;const ss=this.fragPrevious;if(Yr<rs){const os=Gr.maxFragLookUpTolerance,ls=Yr>rs-os?0:os;is=findFragmentByPTS(ss,qr,Math.max(qr[0].start,Yr),ls),!is&&ss&&ss.start<qr[0].start&&(is=qr[0])}else is=qr[_i-1];if(!is)return;if(is=this.mapToInitFragWhenRequired(is),is.sn!=="initSegment"){const os=is.sn-ns.startSN,ls=qr[os-1];ls&&ls.cc===is.cc&&this.fragmentTracker.getState(ls)===FragmentState.NOT_LOADED&&(is=ls)}this.fragmentTracker.getState(is)===FragmentState.NOT_LOADED&&this.loadFragment(is,jr,Yr)}}getMaxBufferLength(_r){const Ur=super.getMaxBufferLength();return _r?Math.max(Ur,_r):Ur}loadFragment(_r,Ur,jr){this.fragCurrent=_r,_r.sn==="initSegment"?this._loadInitSegment(_r,Ur):(this.startFragRequested=!0,super.loadFragment(_r,Ur,jr))}get mediaBufferTimeRanges(){return new BufferableInstance(this.tracksBuffered[this.currentTrackId]||[])}}class BufferableInstance{constructor(_r){this.buffered=void 0;const Ur=(jr,Gr,Wr)=>{if(Gr=Gr>>>0,Gr>Wr-1)throw new DOMException(`Failed to execute '${jr}' on 'TimeRanges': The index provided (${Gr}) is greater than the maximum bound (${Wr})`);return _r[Gr][jr]};this.buffered={get length(){return _r.length},end(jr){return Ur("end",jr,_r.length)},start(jr){return Ur("start",jr,_r.length)}}}}class SubtitleTrackController extends BasePlaylistController{constructor(_r){super(_r,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(_r){this._subtitleDisplay=_r,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:_r}=this;_r.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.on(Events.LEVEL_LOADING,this.onLevelLoading,this),_r.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),_r.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_r.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:_r}=this;_r.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.off(Events.LEVEL_LOADING,this.onLevelLoading,this),_r.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),_r.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_r.off(Events.ERROR,this.onError,this)}onMediaAttached(_r,Ur){this.media=Ur.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(_r){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,_r)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),filterSubtitleTracks(this.media.textTracks).forEach(Ur=>{clearCurrentCues(Ur)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(_r,Ur){this.tracks=Ur.subtitleTracks}onSubtitleTrackLoaded(_r,Ur){const{id:jr,details:Gr}=Ur,{trackId:Wr}=this,Zr=this.tracksInGroup[Wr];if(!Zr){this.warn(`Invalid subtitle track id ${jr}`);return}const Yr=Zr.details;Zr.details=Ur.details,this.log(`subtitle track ${jr} loaded [${Gr.startSN}-${Gr.endSN}]`),jr===this.trackId&&this.playlistLoaded(jr,Ur,Yr)}onLevelLoading(_r,Ur){this.switchLevel(Ur.level)}onLevelSwitching(_r,Ur){this.switchLevel(Ur.level)}switchLevel(_r){const Ur=this.hls.levels[_r];if(!(Ur!=null&&Ur.textGroupIds))return;const jr=Ur.textGroupIds[Ur.urlId],Gr=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==jr){const Wr=this.tracks.filter(ts=>!jr||ts.groupId===jr);this.tracksInGroup=Wr;const Zr=this.findTrackId(Gr==null?void 0:Gr.name)||this.findTrackId();this.groupId=jr||null;const Yr={subtitleTracks:Wr};this.log(`Updating subtitle tracks, ${Wr.length} track(s) found in "${jr}" group-id`),this.hls.trigger(Events.SUBTITLE_TRACKS_UPDATED,Yr),Zr!==-1&&this.setSubtitleTrack(Zr,Gr)}else this.shouldReloadPlaylist(Gr)&&this.setSubtitleTrack(this.trackId,Gr)}findTrackId(_r){const Ur=this.tracksInGroup;for(let jr=0;jr<Ur.length;jr++){const Gr=Ur[jr];if((!this.selectDefaultTrack||Gr.default)&&(!_r||_r===Gr.name))return Gr.id}return-1}onError(_r,Ur){Ur.fatal||!Ur.context||Ur.context.type===PlaylistContextType.SUBTITLE_TRACK&&Ur.context.id===this.trackId&&Ur.context.groupId===this.groupId&&this.checkRetry(Ur)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(_r){this.selectDefaultTrack=!1;const Ur=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(_r,Ur)}loadPlaylist(_r){super.loadPlaylist();const Ur=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(Ur)){const jr=Ur.id,Gr=Ur.groupId;let Wr=Ur.url;if(_r)try{Wr=_r.addDirectives(Wr)}catch(Zr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Zr}`)}this.log(`Loading subtitle playlist for id ${jr}`),this.hls.trigger(Events.SUBTITLE_TRACK_LOADING,{url:Wr,id:jr,groupId:Gr,deliveryDirectives:_r||null})}}toggleTrackModes(_r){const{media:Ur,trackId:jr}=this;if(!Ur)return;const Gr=filterSubtitleTracks(Ur.textTracks),Wr=Gr.filter(Yr=>Yr.groupId===this.groupId);if(_r===-1)[].slice.call(Gr).forEach(Yr=>{Yr.mode="disabled"});else{const Yr=Wr[jr];Yr&&(Yr.mode="disabled")}const Zr=Wr[_r];Zr&&(Zr.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(_r,Ur){var jr;const Gr=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=_r;return}if(this.trackId!==_r&&this.toggleTrackModes(_r),this.trackId===_r&&(_r===-1||(jr=Gr[_r])!=null&&jr.details)||_r<-1||_r>=Gr.length)return;this.clearTimer();const Wr=Gr[_r];if(this.log(`Switching to subtitle-track ${_r}`+(Wr?` "${Wr.name}" lang:${Wr.lang} group:${Wr.groupId}`:"")),this.trackId=_r,Wr){const{id:Zr,groupId:Yr="",name:ts,type:es,url:ns}=Wr;this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:Zr,groupId:Yr,name:ts,type:es,url:ns});const Xr=this.switchParams(Wr.url,Ur==null?void 0:Ur.details);this.loadPlaylist(Xr)}else this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:_r})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let _r=-1;const Ur=filterSubtitleTracks(this.media.textTracks);for(let jr=0;jr<Ur.length;jr++)if(Ur[jr].mode==="hidden")_r=jr;else if(Ur[jr].mode==="showing"){_r=jr;break}this.subtitleTrack!==_r&&(this.subtitleTrack=_r)}}function filterSubtitleTracks(Nr){const _r=[];for(let Ur=0;Ur<Nr.length;Ur++){const jr=Nr[Ur];(jr.kind==="subtitles"||jr.kind==="captions")&&jr.label&&_r.push(Nr[Ur])}return _r}class BufferOperationQueue{constructor(_r){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=_r}append(_r,Ur){const jr=this.queues[Ur];jr.push(_r),jr.length===1&&this.buffers[Ur]&&this.executeNext(Ur)}insertAbort(_r,Ur){this.queues[Ur].unshift(_r),this.executeNext(Ur)}appendBlocker(_r){let Ur;const jr=new Promise(Wr=>{Ur=Wr}),Gr={execute:Ur,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(Gr,_r),jr}executeNext(_r){const{buffers:Ur,queues:jr}=this,Gr=Ur[_r],Wr=jr[_r];if(Wr.length){const Zr=Wr[0];try{Zr.execute()}catch(Yr){logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),Zr.onError(Yr),Gr!=null&&Gr.updating||(Wr.shift(),this.executeNext(_r))}}}shiftAndExecuteNext(_r){this.queues[_r].shift(),this.executeNext(_r)}current(_r){return this.queues[_r][0]}}const MediaSource=getMediaSource(),VIDEO_CODEC_PROFILE_REPACE=/([ha]vc.)(?:\.[^.,]+)+/;class BufferController{constructor(_r){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:Ur,mediaSource:jr}=this;logger.log("[buffer-controller]: Media source opened"),Ur&&(Ur.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Events.MEDIA_ATTACHED,{media:Ur})),jr&&jr.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:Ur,_objectUrl:jr}=this;Ur&&Ur.src!==jr&&logger.error(`Media element src was set while attaching MediaSource (${jr} > ${Ur.src})`)},this.hls=_r,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:_r}=this;_r.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.on(Events.BUFFER_RESET,this.onBufferReset,this),_r.on(Events.BUFFER_APPENDING,this.onBufferAppending,this),_r.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),_r.on(Events.BUFFER_EOS,this.onBufferEos,this),_r.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_r.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),_r.on(Events.FRAG_PARSED,this.onFragParsed,this),_r.on(Events.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:_r}=this;_r.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.off(Events.BUFFER_RESET,this.onBufferReset,this),_r.off(Events.BUFFER_APPENDING,this.onBufferAppending,this),_r.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),_r.off(Events.BUFFER_EOS,this.onBufferEos,this),_r.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_r.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),_r.off(Events.FRAG_PARSED,this.onFragParsed,this),_r.off(Events.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new BufferOperationQueue(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(_r,Ur){let jr=2;(Ur.audio&&!Ur.video||!Ur.altAudio)&&(jr=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=jr,logger.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(_r,Ur){const jr=this.media=Ur.media;if(jr&&MediaSource){const Gr=this.mediaSource=new MediaSource;Gr.addEventListener("sourceopen",this._onMediaSourceOpen),Gr.addEventListener("sourceended",this._onMediaSourceEnded),Gr.addEventListener("sourceclose",this._onMediaSourceClose),jr.src=self.URL.createObjectURL(Gr),this._objectUrl=jr.src,jr.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:_r,mediaSource:Ur,_objectUrl:jr}=this;if(Ur){if(logger.log("[buffer-controller]: media source detaching"),Ur.readyState==="open")try{Ur.endOfStream()}catch(Gr){logger.warn(`[buffer-controller]: onMediaDetaching: ${Gr.message} while calling endOfStream`)}this.onBufferReset(),Ur.removeEventListener("sourceopen",this._onMediaSourceOpen),Ur.removeEventListener("sourceended",this._onMediaSourceEnded),Ur.removeEventListener("sourceclose",this._onMediaSourceClose),_r&&(_r.removeEventListener("emptied",this._onMediaEmptied),jr&&self.URL.revokeObjectURL(jr),_r.src===jr?(_r.removeAttribute("src"),_r.load()):logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Events.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(_r=>{const Ur=this.sourceBuffer[_r];try{Ur&&(this.removeBufferListeners(_r),this.mediaSource&&this.mediaSource.removeSourceBuffer(Ur),this.sourceBuffer[_r]=void 0)}catch(jr){logger.warn(`[buffer-controller]: Failed to reset the ${_r} buffer`,jr)}}),this._initSourceBuffer()}onBufferCodecs(_r,Ur){const jr=this.getSourceBufferTypes().length;Object.keys(Ur).forEach(Gr=>{if(jr){const Wr=this.tracks[Gr];if(Wr&&typeof Wr.buffer.changeType=="function"){const{id:Zr,codec:Yr,levelCodec:ts,container:es,metadata:ns}=Ur[Gr],Xr=(Wr.levelCodec||Wr.codec).replace(VIDEO_CODEC_PROFILE_REPACE,"$1"),qr=(ts||Yr).replace(VIDEO_CODEC_PROFILE_REPACE,"$1");if(Xr!==qr){const _i=`${es};codecs=${ts||Yr}`;this.appendChangeType(Gr,_i),logger.log(`[buffer-controller]: switching codec ${Xr} to ${qr}`),this.tracks[Gr]={buffer:Wr.buffer,codec:Yr,container:es,levelCodec:ts,metadata:ns,id:Zr}}}}else this.pendingTracks[Gr]=Ur[Gr]}),!jr&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())}appendChangeType(_r,Ur){const{operationQueue:jr}=this,Gr={execute:()=>{const Wr=this.sourceBuffer[_r];Wr&&(logger.log(`[buffer-controller]: changing ${_r} sourceBuffer type to ${Ur}`),Wr.changeType(Ur)),jr.shiftAndExecuteNext(_r)},onStart:()=>{},onComplete:()=>{},onError:Wr=>{logger.warn(`[buffer-controller]: Failed to change ${_r} SourceBuffer type`,Wr)}};jr.append(Gr,_r)}onBufferAppending(_r,Ur){const{hls:jr,operationQueue:Gr,tracks:Wr}=this,{data:Zr,type:Yr,frag:ts,part:es,chunkMeta:ns}=Ur,Xr=ns.buffering[Yr],qr=self.performance.now();Xr.start=qr;const _i=ts.stats.buffering,rs=es?es.stats.buffering:null;_i.start===0&&(_i.start=qr),rs&&rs.start===0&&(rs.start=qr);const is=Wr.audio;let ss=!1;Yr==="audio"&&(is==null?void 0:is.container)==="audio/mpeg"&&(ss=!this.lastMpegAudioChunk||ns.id===1||this.lastMpegAudioChunk.sn!==ns.sn,this.lastMpegAudioChunk=ns);const os=ts.start,ls={execute:()=>{if(Xr.executeStart=self.performance.now(),ss){const cs=this.sourceBuffer[Yr];if(cs){const ds=os-cs.timestampOffset;Math.abs(ds)>=.1&&(logger.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${os} (delta: ${ds}) sn: ${ts.sn})`),cs.timestampOffset=os)}}this.appendExecutor(Zr,Yr)},onStart:()=>{},onComplete:()=>{const cs=self.performance.now();Xr.executeEnd=Xr.end=cs,_i.first===0&&(_i.first=cs),rs&&rs.first===0&&(rs.first=cs);const{sourceBuffer:ds}=this,fs={};for(const ms in ds)fs[ms]=BufferHelper.getBuffered(ds[ms]);this.appendError=0,this.hls.trigger(Events.BUFFER_APPENDED,{type:Yr,frag:ts,part:es,chunkMeta:ns,parent:ts.type,timeRanges:fs})},onError:cs=>{logger.error(`[buffer-controller]: Error encountered while trying to append to the ${Yr} SourceBuffer`,cs);const ds={type:ErrorTypes.MEDIA_ERROR,parent:ts.type,details:ErrorDetails.BUFFER_APPEND_ERROR,frag:ts,part:es,chunkMeta:ns,error:cs,err:cs,fatal:!1};cs.code===DOMException.QUOTA_EXCEEDED_ERR?ds.details=ErrorDetails.BUFFER_FULL_ERROR:(this.appendError++,ds.details=ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>jr.config.appendErrorMaxRetry&&(logger.error(`[buffer-controller]: Failed ${jr.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),ds.fatal=!0)),jr.trigger(Events.ERROR,ds)}};Gr.append(ls,Yr)}onBufferFlushing(_r,Ur){const{operationQueue:jr}=this,Gr=Wr=>({execute:this.removeExecutor.bind(this,Wr,Ur.startOffset,Ur.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Events.BUFFER_FLUSHED,{type:Wr})},onError:Zr=>{logger.warn(`[buffer-controller]: Failed to remove from ${Wr} SourceBuffer`,Zr)}});Ur.type?jr.append(Gr(Ur.type),Ur.type):this.getSourceBufferTypes().forEach(Wr=>{jr.append(Gr(Wr),Wr)})}onFragParsed(_r,Ur){const{frag:jr,part:Gr}=Ur,Wr=[],Zr=Gr?Gr.elementaryStreams:jr.elementaryStreams;Zr[ElementaryStreamTypes.AUDIOVIDEO]?Wr.push("audiovideo"):(Zr[ElementaryStreamTypes.AUDIO]&&Wr.push("audio"),Zr[ElementaryStreamTypes.VIDEO]&&Wr.push("video"));const Yr=()=>{const ts=self.performance.now();jr.stats.buffering.end=ts,Gr&&(Gr.stats.buffering.end=ts);const es=Gr?Gr.stats:jr.stats;this.hls.trigger(Events.FRAG_BUFFERED,{frag:jr,part:Gr,stats:es,id:jr.type})};Wr.length===0&&logger.warn(`Fragments must have at least one ElementaryStreamType set. type: ${jr.type} level: ${jr.level} sn: ${jr.sn}`),this.blockBuffers(Yr,Wr)}onFragChanged(_r,Ur){this.flushBackBuffer()}onBufferEos(_r,Ur){this.getSourceBufferTypes().reduce((Gr,Wr)=>{const Zr=this.sourceBuffer[Wr];return Zr&&(!Ur.type||Ur.type===Wr)&&(Zr.ending=!0,Zr.ended||(Zr.ended=!0,logger.log(`[buffer-controller]: ${Wr} sourceBuffer now EOS`))),Gr&&!!(!Zr||Zr.ended)},!0)&&(logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(Wr=>{const Zr=this.sourceBuffer[Wr];Zr&&(Zr.ending=!1)});const{mediaSource:Gr}=this;if(!Gr||Gr.readyState!=="open"){Gr&&logger.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${Gr.readyState}`);return}logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),Gr.endOfStream()}))}onLevelUpdated(_r,{details:Ur}){Ur.fragments.length&&(this.details=Ur,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:_r,details:Ur,media:jr,sourceBuffer:Gr}=this;if(!jr||Ur===null)return;const Wr=this.getSourceBufferTypes();if(!Wr.length)return;const Zr=Ur.live&&_r.config.liveBackBufferLength!==null?_r.config.liveBackBufferLength:_r.config.backBufferLength;if(!isFiniteNumber(Zr)||Zr<0)return;const Yr=jr.currentTime,ts=Ur.levelTargetDuration,es=Math.max(Zr,ts),ns=Math.floor(Yr/ts)*ts-es;Wr.forEach(Xr=>{const qr=Gr[Xr];if(qr){const _i=BufferHelper.getBuffered(qr);if(_i.length>0&&ns>_i.start(0)){if(_r.trigger(Events.BACK_BUFFER_REACHED,{bufferEnd:ns}),Ur.live)_r.trigger(Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:ns});else if(qr.ended&&_i.end(_i.length-1)-Yr<ts*2){logger.info(`[buffer-controller]: Cannot flush ${Xr} back buffer while SourceBuffer is in ended state`);return}_r.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:ns,type:Xr})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:_r,hls:Ur,media:jr,mediaSource:Gr}=this,Wr=_r.fragments[0].start+_r.totalduration,Zr=jr.duration,Yr=isFiniteNumber(Gr.duration)?Gr.duration:0;_r.live&&Ur.config.liveDurationInfinity?(logger.log("[buffer-controller]: Media Source duration is set to Infinity"),Gr.duration=1/0,this.updateSeekableRange(_r)):(Wr>Yr&&Wr>Zr||!isFiniteNumber(Zr))&&(logger.log(`[buffer-controller]: Updating Media Source duration to ${Wr.toFixed(3)}`),Gr.duration=Wr)}updateSeekableRange(_r){const Ur=this.mediaSource,jr=_r.fragments;if(jr.length&&_r.live&&Ur!=null&&Ur.setLiveSeekableRange){const Wr=Math.max(0,jr[0].start),Zr=Math.max(Wr,Wr+_r.totalduration);Ur.setLiveSeekableRange(Wr,Zr)}}checkPendingTracks(){const{bufferCodecEventsExpected:_r,operationQueue:Ur,pendingTracks:jr}=this,Gr=Object.keys(jr).length;if(Gr&&!_r||Gr===2){this.createSourceBuffers(jr),this.pendingTracks={};const Wr=this.getSourceBufferTypes();if(Wr.length)this.hls.trigger(Events.BUFFER_CREATED,{tracks:this.tracks}),Wr.forEach(Zr=>{Ur.executeNext(Zr)});else{const Zr=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:Zr,reason:Zr.message})}}}createSourceBuffers(_r){const{sourceBuffer:Ur,mediaSource:jr}=this;if(!jr)throw Error("createSourceBuffers called when mediaSource was null");for(const Gr in _r)if(!Ur[Gr]){const Wr=_r[Gr];if(!Wr)throw Error(`source buffer exists for track ${Gr}, however track does not`);const Zr=Wr.levelCodec||Wr.codec,Yr=`${Wr.container};codecs=${Zr}`;logger.log(`[buffer-controller]: creating sourceBuffer(${Yr})`);try{const ts=Ur[Gr]=jr.addSourceBuffer(Yr),es=Gr;this.addBufferListener(es,"updatestart",this._onSBUpdateStart),this.addBufferListener(es,"updateend",this._onSBUpdateEnd),this.addBufferListener(es,"error",this._onSBUpdateError),this.tracks[Gr]={buffer:ts,codec:Zr,container:Wr.container,levelCodec:Wr.levelCodec,metadata:Wr.metadata,id:Wr.id}}catch(ts){logger.error(`[buffer-controller]: error while trying to add sourceBuffer: ${ts.message}`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:ts,mimeType:Yr})}}}_onSBUpdateStart(_r){const{operationQueue:Ur}=this;Ur.current(_r).onStart()}_onSBUpdateEnd(_r){const{operationQueue:Ur}=this;Ur.current(_r).onComplete(),Ur.shiftAndExecuteNext(_r)}_onSBUpdateError(_r,Ur){const jr=new Error(`${_r} SourceBuffer error`);logger.error(`[buffer-controller]: ${jr}`,Ur),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_APPENDING_ERROR,error:jr,fatal:!1});const Gr=this.operationQueue.current(_r);Gr&&Gr.onError(Ur)}removeExecutor(_r,Ur,jr){const{media:Gr,mediaSource:Wr,operationQueue:Zr,sourceBuffer:Yr}=this,ts=Yr[_r];if(!Gr||!Wr||!ts){logger.warn(`[buffer-controller]: Attempting to remove from the ${_r} SourceBuffer, but it does not exist`),Zr.shiftAndExecuteNext(_r);return}const es=isFiniteNumber(Gr.duration)?Gr.duration:1/0,ns=isFiniteNumber(Wr.duration)?Wr.duration:1/0,Xr=Math.max(0,Ur),qr=Math.min(jr,es,ns);qr>Xr&&!ts.ending?(ts.ended=!1,logger.log(`[buffer-controller]: Removing [${Xr},${qr}] from the ${_r} SourceBuffer`),ts.remove(Xr,qr)):Zr.shiftAndExecuteNext(_r)}appendExecutor(_r,Ur){const{operationQueue:jr,sourceBuffer:Gr}=this,Wr=Gr[Ur];if(!Wr){logger.warn(`[buffer-controller]: Attempting to append to the ${Ur} SourceBuffer, but it does not exist`),jr.shiftAndExecuteNext(Ur);return}Wr.ended=!1,Wr.appendBuffer(_r)}blockBuffers(_r,Ur=this.getSourceBufferTypes()){if(!Ur.length){logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(_r);return}const{operationQueue:jr}=this,Gr=Ur.map(Wr=>jr.appendBlocker(Wr));Promise.all(Gr).then(()=>{_r(),Ur.forEach(Wr=>{const Zr=this.sourceBuffer[Wr];Zr!=null&&Zr.updating||jr.shiftAndExecuteNext(Wr)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(_r,Ur,jr){const Gr=this.sourceBuffer[_r];if(!Gr)return;const Wr=jr.bind(this,_r);this.listeners[_r].push({event:Ur,listener:Wr}),Gr.addEventListener(Ur,Wr)}removeBufferListeners(_r){const Ur=this.sourceBuffer[_r];Ur&&this.listeners[_r].forEach(jr=>{Ur.removeEventListener(jr.event,jr.listener)})}}const specialCea608CharsCodes={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},getCharForByte=function(_r){let Ur=_r;return specialCea608CharsCodes.hasOwnProperty(_r)&&(Ur=specialCea608CharsCodes[_r]),String.fromCharCode(Ur)},NR_ROWS=15,NR_COLS=100,rowsLowCh1={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},rowsHighCh1={17:2,18:4,21:6,22:8,23:10,19:13,20:15},rowsLowCh2={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},rowsHighCh2={25:2,26:4,29:6,30:8,31:10,27:13,28:15},backgroundColors=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class CaptionsLogger{constructor(){this.time=null,this.verboseLevel=0}log(_r,Ur){if(this.verboseLevel>=_r){const jr=typeof Ur=="function"?Ur():Ur;logger.log(`${this.time} [${_r}] ${jr}`)}}}const numArrayToHexArray=function(_r){const Ur=[];for(let jr=0;jr<_r.length;jr++)Ur.push(_r[jr].toString(16));return Ur};class PenState{constructor(_r,Ur,jr,Gr,Wr){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=_r||"white",this.underline=Ur||!1,this.italics=jr||!1,this.background=Gr||"black",this.flash=Wr||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(_r){const Ur=["foreground","underline","italics","background","flash"];for(let jr=0;jr<Ur.length;jr++){const Gr=Ur[jr];_r.hasOwnProperty(Gr)&&(this[Gr]=_r[Gr])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(_r){return this.foreground===_r.foreground&&this.underline===_r.underline&&this.italics===_r.italics&&this.background===_r.background&&this.flash===_r.flash}copy(_r){this.foreground=_r.foreground,this.underline=_r.underline,this.italics=_r.italics,this.background=_r.background,this.flash=_r.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class StyledUnicodeChar{constructor(_r,Ur,jr,Gr,Wr,Zr){this.uchar=void 0,this.penState=void 0,this.uchar=_r||" ",this.penState=new PenState(Ur,jr,Gr,Wr,Zr)}reset(){this.uchar=" ",this.penState.reset()}setChar(_r,Ur){this.uchar=_r,this.penState.copy(Ur)}setPenState(_r){this.penState.copy(_r)}equals(_r){return this.uchar===_r.uchar&&this.penState.equals(_r.penState)}copy(_r){this.uchar=_r.uchar,this.penState.copy(_r.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Row{constructor(_r){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let Ur=0;Ur<NR_COLS;Ur++)this.chars.push(new StyledUnicodeChar);this.logger=_r,this.pos=0,this.currPenState=new PenState}equals(_r){let Ur=!0;for(let jr=0;jr<NR_COLS;jr++)if(!this.chars[jr].equals(_r.chars[jr])){Ur=!1;break}return Ur}copy(_r){for(let Ur=0;Ur<NR_COLS;Ur++)this.chars[Ur].copy(_r.chars[Ur])}isEmpty(){let _r=!0;for(let Ur=0;Ur<NR_COLS;Ur++)if(!this.chars[Ur].isEmpty()){_r=!1;break}return _r}setCursor(_r){this.pos!==_r&&(this.pos=_r),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>NR_COLS&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=NR_COLS)}moveCursor(_r){const Ur=this.pos+_r;if(_r>1)for(let jr=this.pos+1;jr<Ur+1;jr++)this.chars[jr].setPenState(this.currPenState);this.setCursor(Ur)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(_r){_r>=144&&this.backSpace();const Ur=getCharForByte(_r);if(this.pos>=NR_COLS){this.logger.log(0,()=>"Cannot insert "+_r.toString(16)+" ("+Ur+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(Ur,this.currPenState),this.moveCursor(1)}clearFromPos(_r){let Ur;for(Ur=_r;Ur<NR_COLS;Ur++)this.chars[Ur].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const _r=[];let Ur=!0;for(let jr=0;jr<NR_COLS;jr++){const Gr=this.chars[jr].uchar;Gr!==" "&&(Ur=!1),_r.push(Gr)}return Ur?"":_r.join("")}setPenStyles(_r){this.currPenState.setStyles(_r),this.chars[this.pos].setPenState(this.currPenState)}}class CaptionScreen{constructor(_r){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let Ur=0;Ur<NR_ROWS;Ur++)this.rows.push(new Row(_r));this.logger=_r,this.currRow=NR_ROWS-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let _r=0;_r<NR_ROWS;_r++)this.rows[_r].clear();this.currRow=NR_ROWS-1}equals(_r){let Ur=!0;for(let jr=0;jr<NR_ROWS;jr++)if(!this.rows[jr].equals(_r.rows[jr])){Ur=!1;break}return Ur}copy(_r){for(let Ur=0;Ur<NR_ROWS;Ur++)this.rows[Ur].copy(_r.rows[Ur])}isEmpty(){let _r=!0;for(let Ur=0;Ur<NR_ROWS;Ur++)if(!this.rows[Ur].isEmpty()){_r=!1;break}return _r}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(_r){this.rows[this.currRow].insertChar(_r)}setPen(_r){this.rows[this.currRow].setPenStyles(_r)}moveCursor(_r){this.rows[this.currRow].moveCursor(_r)}setCursor(_r){this.logger.log(2,"setCursor: "+_r),this.rows[this.currRow].setCursor(_r)}setPAC(_r){this.logger.log(2,()=>"pacData = "+JSON.stringify(_r));let Ur=_r.row-1;if(this.nrRollUpRows&&Ur<this.nrRollUpRows-1&&(Ur=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==Ur){for(let Yr=0;Yr<NR_ROWS;Yr++)this.rows[Yr].clear();const Wr=this.currRow+1-this.nrRollUpRows,Zr=this.lastOutputScreen;if(Zr){const Yr=Zr.rows[Wr].cueStartTime,ts=this.logger.time;if(Yr&&ts!==null&&Yr<ts)for(let es=0;es<this.nrRollUpRows;es++)this.rows[Ur-this.nrRollUpRows+es+1].copy(Zr.rows[Wr+es])}}this.currRow=Ur;const jr=this.rows[this.currRow];if(_r.indent!==null){const Wr=_r.indent,Zr=Math.max(Wr-1,0);jr.setCursor(_r.indent),_r.color=jr.chars[Zr].penState.foreground}const Gr={foreground:_r.color,underline:_r.underline,italics:_r.italics,background:"black",flash:!1};this.setPen(Gr)}setBkgData(_r){this.logger.log(2,()=>"bkgData = "+JSON.stringify(_r)),this.backSpace(),this.setPen(_r),this.insertChar(32)}setRollUpRows(_r){this.nrRollUpRows=_r}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const _r=this.currRow+1-this.nrRollUpRows,Ur=this.rows.splice(_r,1)[0];Ur.clear(),this.rows.splice(this.currRow,0,Ur),this.logger.log(2,"Rolling up")}getDisplayText(_r){_r=_r||!1;const Ur=[];let jr="",Gr=-1;for(let Wr=0;Wr<NR_ROWS;Wr++){const Zr=this.rows[Wr].getTextString();Zr&&(Gr=Wr+1,_r?Ur.push("Row "+Gr+": '"+Zr+"'"):Ur.push(Zr.trim()))}return Ur.length>0&&(_r?jr="["+Ur.join(" | ")+"]":jr=Ur.join(`
`)),jr}getTextAndFormat(){return this.rows}}class Cea608Channel{constructor(_r,Ur,jr){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=_r,this.outputFilter=Ur,this.mode=null,this.verbose=0,this.displayedMemory=new CaptionScreen(jr),this.nonDisplayedMemory=new CaptionScreen(jr),this.lastOutputScreen=new CaptionScreen(jr),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=jr}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(_r){this.outputFilter=_r}setPAC(_r){this.writeScreen.setPAC(_r)}setBkgData(_r){this.writeScreen.setBkgData(_r)}setMode(_r){_r!==this.mode&&(this.mode=_r,this.logger.log(2,()=>"MODE="+_r),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=_r)}insertChars(_r){for(let jr=0;jr<_r.length;jr++)this.writeScreen.insertChar(_r[jr]);const Ur=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>Ur+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(_r){this.logger.log(2,"RU("+_r+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(_r)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const _r=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=_r,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(_r){this.logger.log(2,"TO("+_r+") - Tab Offset"),this.writeScreen.moveCursor(_r)}ccMIDROW(_r){const Ur={flash:!1};if(Ur.underline=_r%2===1,Ur.italics=_r>=46,Ur.italics)Ur.foreground="white";else{const jr=Math.floor(_r/2)-16,Gr=["white","green","blue","cyan","red","yellow","magenta"];Ur.foreground=Gr[jr]}this.logger.log(2,"MIDROW: "+JSON.stringify(Ur)),this.writeScreen.setPen(Ur)}outputDataUpdate(_r=!1){const Ur=this.logger.time;Ur!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=Ur:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,Ur,this.lastOutputScreen),_r&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:Ur),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(_r){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,_r,this.displayedMemory),this.cueStartTime=_r))}}class Cea608Parser{constructor(_r,Ur,jr){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const Gr=new CaptionsLogger;this.channels=[null,new Cea608Channel(_r,Ur,Gr),new Cea608Channel(_r+1,jr,Gr)],this.cmdHistory=createCmdHistory(),this.logger=Gr}getHandler(_r){return this.channels[_r].getHandler()}setHandler(_r,Ur){this.channels[_r].setHandler(Ur)}addData(_r,Ur){let jr,Gr,Wr,Zr=!1;this.logger.time=_r;for(let Yr=0;Yr<Ur.length;Yr+=2)if(Gr=Ur[Yr]&127,Wr=Ur[Yr+1]&127,!(Gr===0&&Wr===0)){if(this.logger.log(3,"["+numArrayToHexArray([Ur[Yr],Ur[Yr+1]])+"] -> ("+numArrayToHexArray([Gr,Wr])+")"),jr=this.parseCmd(Gr,Wr),jr||(jr=this.parseMidrow(Gr,Wr)),jr||(jr=this.parsePAC(Gr,Wr)),jr||(jr=this.parseBackgroundAttributes(Gr,Wr)),!jr&&(Zr=this.parseChars(Gr,Wr),Zr)){const ts=this.currentChannel;ts&&ts>0?this.channels[ts].insertChars(Zr):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!jr&&!Zr&&this.logger.log(2,"Couldn't parse cleaned data "+numArrayToHexArray([Gr,Wr])+" orig: "+numArrayToHexArray([Ur[Yr],Ur[Yr+1]]))}}parseCmd(_r,Ur){const{cmdHistory:jr}=this,Gr=(_r===20||_r===28||_r===21||_r===29)&&Ur>=32&&Ur<=47,Wr=(_r===23||_r===31)&&Ur>=33&&Ur<=35;if(!(Gr||Wr))return!1;if(hasCmdRepeated(_r,Ur,jr))return setLastCmd(null,null,jr),this.logger.log(3,"Repeated command ("+numArrayToHexArray([_r,Ur])+") is dropped"),!0;const Zr=_r===20||_r===21||_r===23?1:2,Yr=this.channels[Zr];return _r===20||_r===21||_r===28||_r===29?Ur===32?Yr.ccRCL():Ur===33?Yr.ccBS():Ur===34?Yr.ccAOF():Ur===35?Yr.ccAON():Ur===36?Yr.ccDER():Ur===37?Yr.ccRU(2):Ur===38?Yr.ccRU(3):Ur===39?Yr.ccRU(4):Ur===40?Yr.ccFON():Ur===41?Yr.ccRDC():Ur===42?Yr.ccTR():Ur===43?Yr.ccRTD():Ur===44?Yr.ccEDM():Ur===45?Yr.ccCR():Ur===46?Yr.ccENM():Ur===47&&Yr.ccEOC():Yr.ccTO(Ur-32),setLastCmd(_r,Ur,jr),this.currentChannel=Zr,!0}parseMidrow(_r,Ur){let jr=0;if((_r===17||_r===25)&&Ur>=32&&Ur<=47){if(_r===17?jr=1:jr=2,jr!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const Gr=this.channels[jr];return Gr?(Gr.ccMIDROW(Ur),this.logger.log(3,"MIDROW ("+numArrayToHexArray([_r,Ur])+")"),!0):!1}return!1}parsePAC(_r,Ur){let jr;const Gr=this.cmdHistory,Wr=(_r>=17&&_r<=23||_r>=25&&_r<=31)&&Ur>=64&&Ur<=127,Zr=(_r===16||_r===24)&&Ur>=64&&Ur<=95;if(!(Wr||Zr))return!1;if(hasCmdRepeated(_r,Ur,Gr))return setLastCmd(null,null,Gr),!0;const Yr=_r<=23?1:2;Ur>=64&&Ur<=95?jr=Yr===1?rowsLowCh1[_r]:rowsLowCh2[_r]:jr=Yr===1?rowsHighCh1[_r]:rowsHighCh2[_r];const ts=this.channels[Yr];return ts?(ts.setPAC(this.interpretPAC(jr,Ur)),setLastCmd(_r,Ur,Gr),this.currentChannel=Yr,!0):!1}interpretPAC(_r,Ur){let jr;const Gr={color:null,italics:!1,indent:null,underline:!1,row:_r};return Ur>95?jr=Ur-96:jr=Ur-64,Gr.underline=(jr&1)===1,jr<=13?Gr.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(jr/2)]:jr<=15?(Gr.italics=!0,Gr.color="white"):Gr.indent=Math.floor((jr-16)/2)*4,Gr}parseChars(_r,Ur){let jr,Gr=null,Wr=null;if(_r>=25?(jr=2,Wr=_r-8):(jr=1,Wr=_r),Wr>=17&&Wr<=19){let Zr;Wr===17?Zr=Ur+80:Wr===18?Zr=Ur+112:Zr=Ur+144,this.logger.log(2,"Special char '"+getCharForByte(Zr)+"' in channel "+jr),Gr=[Zr]}else _r>=32&&_r<=127&&(Gr=Ur===0?[_r]:[_r,Ur]);if(Gr){const Zr=numArrayToHexArray(Gr);this.logger.log(3,"Char codes =  "+Zr.join(",")),setLastCmd(_r,Ur,this.cmdHistory)}return Gr}parseBackgroundAttributes(_r,Ur){const jr=(_r===16||_r===24)&&Ur>=32&&Ur<=47,Gr=(_r===23||_r===31)&&Ur>=45&&Ur<=47;if(!(jr||Gr))return!1;let Wr;const Zr={};_r===16||_r===24?(Wr=Math.floor((Ur-32)/2),Zr.background=backgroundColors[Wr],Ur%2===1&&(Zr.background=Zr.background+"_semi")):Ur===45?Zr.background="transparent":(Zr.foreground="black",Ur===47&&(Zr.underline=!0));const Yr=_r<=23?1:2;return this.channels[Yr].setBkgData(Zr),setLastCmd(_r,Ur,this.cmdHistory),!0}reset(){for(let _r=0;_r<Object.keys(this.channels).length;_r++){const Ur=this.channels[_r];Ur&&Ur.reset()}this.cmdHistory=createCmdHistory()}cueSplitAtTime(_r){for(let Ur=0;Ur<this.channels.length;Ur++){const jr=this.channels[Ur];jr&&jr.cueSplitAtTime(_r)}}}function setLastCmd(Nr,_r,Ur){Ur.a=Nr,Ur.b=_r}function hasCmdRepeated(Nr,_r,Ur){return Ur.a===Nr&&Ur.b===_r}function createCmdHistory(){return{a:null,b:null}}class OutputFilter{constructor(_r,Ur){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=_r,this.trackName=Ur}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(_r,Ur,jr){(this.startTime===null||this.startTime>_r)&&(this.startTime=_r),this.endTime=Ur,this.screen=jr,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var VTTCue=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;const Nr=["","lr","rl"],_r=["start","middle","end","left","right"];function Ur(Yr,ts){if(typeof ts!="string"||!Array.isArray(Yr))return!1;const es=ts.toLowerCase();return~Yr.indexOf(es)?es:!1}function jr(Yr){return Ur(Nr,Yr)}function Gr(Yr){return Ur(_r,Yr)}function Wr(Yr,...ts){let es=1;for(;es<arguments.length;es++){const ns=arguments[es];for(const Xr in ns)Yr[Xr]=ns[Xr]}return Yr}function Zr(Yr,ts,es){const ns=this,Xr={enumerable:!0};ns.hasBeenReset=!1;let qr="",_i=!1,rs=Yr,is=ts,ss=es,os=null,ls="",cs=!0,ds="auto",fs="start",ms=50,ps="middle",ys=50,ws="middle";Object.defineProperty(ns,"id",Wr({},Xr,{get:function(){return qr},set:function(xs){qr=""+xs}})),Object.defineProperty(ns,"pauseOnExit",Wr({},Xr,{get:function(){return _i},set:function(xs){_i=!!xs}})),Object.defineProperty(ns,"startTime",Wr({},Xr,{get:function(){return rs},set:function(xs){if(typeof xs!="number")throw new TypeError("Start time must be set to a number.");rs=xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"endTime",Wr({},Xr,{get:function(){return is},set:function(xs){if(typeof xs!="number")throw new TypeError("End time must be set to a number.");is=xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"text",Wr({},Xr,{get:function(){return ss},set:function(xs){ss=""+xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"region",Wr({},Xr,{get:function(){return os},set:function(xs){os=xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"vertical",Wr({},Xr,{get:function(){return ls},set:function(xs){const Es=jr(xs);if(Es===!1)throw new SyntaxError("An invalid or illegal string was specified.");ls=Es,this.hasBeenReset=!0}})),Object.defineProperty(ns,"snapToLines",Wr({},Xr,{get:function(){return cs},set:function(xs){cs=!!xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"line",Wr({},Xr,{get:function(){return ds},set:function(xs){if(typeof xs!="number"&&xs!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");ds=xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"lineAlign",Wr({},Xr,{get:function(){return fs},set:function(xs){const Es=Gr(xs);if(!Es)throw new SyntaxError("An invalid or illegal string was specified.");fs=Es,this.hasBeenReset=!0}})),Object.defineProperty(ns,"position",Wr({},Xr,{get:function(){return ms},set:function(xs){if(xs<0||xs>100)throw new Error("Position must be between 0 and 100.");ms=xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"positionAlign",Wr({},Xr,{get:function(){return ps},set:function(xs){const Es=Gr(xs);if(!Es)throw new SyntaxError("An invalid or illegal string was specified.");ps=Es,this.hasBeenReset=!0}})),Object.defineProperty(ns,"size",Wr({},Xr,{get:function(){return ys},set:function(xs){if(xs<0||xs>100)throw new Error("Size must be between 0 and 100.");ys=xs,this.hasBeenReset=!0}})),Object.defineProperty(ns,"align",Wr({},Xr,{get:function(){return ws},set:function(xs){const Es=Gr(xs);if(!Es)throw new SyntaxError("An invalid or illegal string was specified.");ws=Es,this.hasBeenReset=!0}})),ns.displayState=void 0}return Zr.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},Zr}();class StringDecoder{decode(_r,Ur){if(!_r)return"";if(typeof _r!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(_r))}}function parseTimeStamp(Nr){function _r(jr,Gr,Wr,Zr){return(jr|0)*3600+(Gr|0)*60+(Wr|0)+parseFloat(Zr||0)}const Ur=Nr.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return Ur?parseFloat(Ur[2])>59?_r(Ur[2],Ur[3],0,Ur[4]):_r(Ur[1],Ur[2],Ur[3],Ur[4]):null}class Settings{constructor(){this.values=Object.create(null)}set(_r,Ur){!this.get(_r)&&Ur!==""&&(this.values[_r]=Ur)}get(_r,Ur,jr){return jr?this.has(_r)?this.values[_r]:Ur[jr]:this.has(_r)?this.values[_r]:Ur}has(_r){return _r in this.values}alt(_r,Ur,jr){for(let Gr=0;Gr<jr.length;++Gr)if(Ur===jr[Gr]){this.set(_r,Ur);break}}integer(_r,Ur){/^-?\d+$/.test(Ur)&&this.set(_r,parseInt(Ur,10))}percent(_r,Ur){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(Ur)){const jr=parseFloat(Ur);if(jr>=0&&jr<=100)return this.set(_r,jr),!0}return!1}}function parseOptions(Nr,_r,Ur,jr){const Gr=jr?Nr.split(jr):[Nr];for(const Wr in Gr){if(typeof Gr[Wr]!="string")continue;const Zr=Gr[Wr].split(Ur);if(Zr.length!==2)continue;const Yr=Zr[0],ts=Zr[1];_r(Yr,ts)}}const defaults=new VTTCue(0,0,""),center=defaults.align==="middle"?"middle":"center";function parseCue$1(Nr,_r,Ur){const jr=Nr;function Gr(){const Yr=parseTimeStamp(Nr);if(Yr===null)throw new Error("Malformed timestamp: "+jr);return Nr=Nr.replace(/^[^\sa-zA-Z-]+/,""),Yr}function Wr(Yr,ts){const es=new Settings;parseOptions(Yr,function(qr,_i){let rs;switch(qr){case"region":for(let is=Ur.length-1;is>=0;is--)if(Ur[is].id===_i){es.set(qr,Ur[is].region);break}break;case"vertical":es.alt(qr,_i,["rl","lr"]);break;case"line":rs=_i.split(","),es.integer(qr,rs[0]),es.percent(qr,rs[0])&&es.set("snapToLines",!1),es.alt(qr,rs[0],["auto"]),rs.length===2&&es.alt("lineAlign",rs[1],["start",center,"end"]);break;case"position":rs=_i.split(","),es.percent(qr,rs[0]),rs.length===2&&es.alt("positionAlign",rs[1],["start",center,"end","line-left","line-right","auto"]);break;case"size":es.percent(qr,_i);break;case"align":es.alt(qr,_i,["start",center,"end","left","right"]);break}},/:/,/\s/),ts.region=es.get("region",null),ts.vertical=es.get("vertical","");let ns=es.get("line","auto");ns==="auto"&&defaults.line===-1&&(ns=-1),ts.line=ns,ts.lineAlign=es.get("lineAlign","start"),ts.snapToLines=es.get("snapToLines",!0),ts.size=es.get("size",100),ts.align=es.get("align",center);let Xr=es.get("position","auto");Xr==="auto"&&defaults.position===50&&(Xr=ts.align==="start"||ts.align==="left"?0:ts.align==="end"||ts.align==="right"?100:50),ts.position=Xr}function Zr(){Nr=Nr.replace(/^\s+/,"")}if(Zr(),_r.startTime=Gr(),Zr(),Nr.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+jr);Nr=Nr.slice(3),Zr(),_r.endTime=Gr(),Zr(),Wr(Nr,_r)}function fixLineBreaks(Nr){return Nr.replace(/<br(?: \/)?>/gi,`
`)}class VTTParser{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new StringDecoder,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(_r){const Ur=this;_r&&(Ur.buffer+=Ur.decoder.decode(_r,{stream:!0}));function jr(){let Wr=Ur.buffer,Zr=0;for(Wr=fixLineBreaks(Wr);Zr<Wr.length&&Wr[Zr]!=="\r"&&Wr[Zr]!==`
`;)++Zr;const Yr=Wr.slice(0,Zr);return Wr[Zr]==="\r"&&++Zr,Wr[Zr]===`
`&&++Zr,Ur.buffer=Wr.slice(Zr),Yr}function Gr(Wr){parseOptions(Wr,function(Zr,Yr){},/:/)}try{let Wr="";if(Ur.state==="INITIAL"){if(!/\r\n|\n/.test(Ur.buffer))return this;Wr=jr();const Yr=Wr.match(/^()?WEBVTT([ \t].*)?$/);if(!(Yr!=null&&Yr[0]))throw new Error("Malformed WebVTT signature.");Ur.state="HEADER"}let Zr=!1;for(;Ur.buffer;){if(!/\r\n|\n/.test(Ur.buffer))return this;switch(Zr?Zr=!1:Wr=jr(),Ur.state){case"HEADER":/:/.test(Wr)?Gr(Wr):Wr||(Ur.state="ID");continue;case"NOTE":Wr||(Ur.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Wr)){Ur.state="NOTE";break}if(!Wr)continue;if(Ur.cue=new VTTCue(0,0,""),Ur.state="CUE",Wr.indexOf("-->")===-1){Ur.cue.id=Wr;continue}case"CUE":if(!Ur.cue){Ur.state="BADCUE";continue}try{parseCue$1(Wr,Ur.cue,Ur.regionList)}catch{Ur.cue=null,Ur.state="BADCUE";continue}Ur.state="CUETEXT";continue;case"CUETEXT":{const Yr=Wr.indexOf("-->")!==-1;if(!Wr||Yr&&(Zr=!0)){Ur.oncue&&Ur.cue&&Ur.oncue(Ur.cue),Ur.cue=null,Ur.state="ID";continue}if(Ur.cue===null)continue;Ur.cue.text&&(Ur.cue.text+=`
`),Ur.cue.text+=Wr}continue;case"BADCUE":Wr||(Ur.state="ID")}}}catch{Ur.state==="CUETEXT"&&Ur.cue&&Ur.oncue&&Ur.oncue(Ur.cue),Ur.cue=null,Ur.state=Ur.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const _r=this;try{if((_r.cue||_r.state==="HEADER")&&(_r.buffer+=`

`,_r.parse()),_r.state==="INITIAL"||_r.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(Ur){_r.onparsingerror&&_r.onparsingerror(Ur)}return _r.onflush&&_r.onflush(),this}}const LINEBREAKS=/\r\n|\n\r|\n|\r/g,startsWith=function(_r,Ur,jr=0){return _r.slice(jr,jr+Ur.length)===Ur},cueString2millis=function(_r){let Ur=parseInt(_r.slice(-3));const jr=parseInt(_r.slice(-6,-4)),Gr=parseInt(_r.slice(-9,-7)),Wr=_r.length>9?parseInt(_r.substring(0,_r.indexOf(":"))):0;if(!isFiniteNumber(Ur)||!isFiniteNumber(jr)||!isFiniteNumber(Gr)||!isFiniteNumber(Wr))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${_r}`);return Ur+=1e3*jr,Ur+=60*1e3*Gr,Ur+=60*60*1e3*Wr,Ur},hash=function(_r){let Ur=5381,jr=_r.length;for(;jr;)Ur=Ur*33^_r.charCodeAt(--jr);return(Ur>>>0).toString()};function generateCueId(Nr,_r,Ur){return hash(Nr.toString())+hash(_r.toString())+hash(Ur)}const calculateOffset=function(_r,Ur,jr){let Gr=_r[Ur],Wr=_r[Gr.prevCC];if(!Wr||!Wr.new&&Gr.new){_r.ccOffset=_r.presentationOffset=Gr.start,Gr.new=!1;return}for(;(Zr=Wr)!=null&&Zr.new;){var Zr;_r.ccOffset+=Gr.start-Wr.start,Gr.new=!1,Gr=Wr,Wr=_r[Gr.prevCC]}_r.presentationOffset=jr};function parseWebVTT(Nr,_r,Ur,jr,Gr,Wr,Zr){const Yr=new VTTParser,ts=utf8ArrayToStr(new Uint8Array(Nr)).trim().replace(LINEBREAKS,`
`).split(`
`),es=[],ns=_r?toMpegTsClockFromTimescale(_r.baseTime,_r.timescale):0;let Xr="00:00.000",qr=0,_i=0,rs,is=!0;Yr.oncue=function(ss){const os=Ur[jr];let ls=Ur.ccOffset;const cs=(qr-ns)/9e4;if(os!=null&&os.new&&(_i!==void 0?ls=Ur.ccOffset=os.start:calculateOffset(Ur,jr,cs)),cs){if(!_r){rs=new Error("Missing initPTS for VTT MPEGTS");return}ls=cs-Ur.presentationOffset}const ds=ss.endTime-ss.startTime,fs=normalizePts((ss.startTime+ls-_i)*9e4,Gr*9e4)/9e4;ss.startTime=Math.max(fs,0),ss.endTime=Math.max(fs+ds,0);const ms=ss.text.trim();ss.text=decodeURIComponent(encodeURIComponent(ms)),ss.id||(ss.id=generateCueId(ss.startTime,ss.endTime,ms)),ss.endTime>0&&es.push(ss)},Yr.onparsingerror=function(ss){rs=ss},Yr.onflush=function(){if(rs){Zr(rs);return}Wr(es)},ts.forEach(ss=>{if(is)if(startsWith(ss,"X-TIMESTAMP-MAP=")){is=!1,ss.slice(16).split(",").forEach(os=>{startsWith(os,"LOCAL:")?Xr=os.slice(6):startsWith(os,"MPEGTS:")&&(qr=parseInt(os.slice(7)))});try{_i=cueString2millis(Xr)/1e3}catch(os){rs=os}return}else ss===""&&(is=!1);Yr.parse(ss+`
`)}),Yr.flush()}const IMSC1_CODEC="stpp.ttml.im1t",HMSF_REGEX=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,TIME_UNIT_REGEX=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,textAlignToLineAlign={left:"start",center:"center",right:"end",start:"start",end:"end"};function parseIMSC1(Nr,_r,Ur,jr){const Gr=findBox(new Uint8Array(Nr),["mdat"]);if(Gr.length===0){jr(new Error("Could not parse IMSC1 mdat"));return}const Wr=Gr.map(Yr=>utf8ArrayToStr(Yr)),Zr=toTimescaleFromScale(_r.baseTime,1,_r.timescale);try{Wr.forEach(Yr=>Ur(parseTTML(Yr,Zr)))}catch(Yr){jr(Yr)}}function parseTTML(Nr,_r){const Gr=new DOMParser().parseFromString(Nr,"text/xml").getElementsByTagName("tt")[0];if(!Gr)throw new Error("Invalid ttml");const Wr={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},Zr=Object.keys(Wr).reduce((Xr,qr)=>(Xr[qr]=Gr.getAttribute(`ttp:${qr}`)||Wr[qr],Xr),{}),Yr=Gr.getAttribute("xml:space")!=="preserve",ts=collectionToDictionary(getElementCollection(Gr,"styling","style")),es=collectionToDictionary(getElementCollection(Gr,"layout","region")),ns=getElementCollection(Gr,"body","[begin]");return[].map.call(ns,Xr=>{const qr=getTextContent(Xr,Yr);if(!qr||!Xr.hasAttribute("begin"))return null;const _i=parseTtmlTime(Xr.getAttribute("begin"),Zr),rs=parseTtmlTime(Xr.getAttribute("dur"),Zr);let is=parseTtmlTime(Xr.getAttribute("end"),Zr);if(_i===null)throw timestampParsingError(Xr);if(is===null){if(rs===null)throw timestampParsingError(Xr);is=_i+rs}const ss=new VTTCue(_i-_r,is-_r,qr);ss.id=generateCueId(ss.startTime,ss.endTime,ss.text);const os=es[Xr.getAttribute("region")],ls=ts[Xr.getAttribute("style")],cs=getTtmlStyles(os,ls,ts),{textAlign:ds}=cs;if(ds){const fs=textAlignToLineAlign[ds];fs&&(ss.lineAlign=fs),ss.align=ds}return _extends(ss,cs),ss}).filter(Xr=>Xr!==null)}function getElementCollection(Nr,_r,Ur){const jr=Nr.getElementsByTagName(_r)[0];return jr?[].slice.call(jr.querySelectorAll(Ur)):[]}function collectionToDictionary(Nr){return Nr.reduce((_r,Ur)=>{const jr=Ur.getAttribute("xml:id");return jr&&(_r[jr]=Ur),_r},{})}function getTextContent(Nr,_r){return[].slice.call(Nr.childNodes).reduce((Ur,jr,Gr)=>{var Wr;return jr.nodeName==="br"&&Gr?Ur+`
`:(Wr=jr.childNodes)!=null&&Wr.length?getTextContent(jr,_r):_r?Ur+jr.textContent.trim().replace(/\s+/g," "):Ur+jr.textContent},"")}function getTtmlStyles(Nr,_r,Ur){const jr="http://www.w3.org/ns/ttml#styling";let Gr=null;const Wr=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],Zr=Nr!=null&&Nr.hasAttribute("style")?Nr.getAttribute("style"):null;return Zr&&Ur.hasOwnProperty(Zr)&&(Gr=Ur[Zr]),Wr.reduce((Yr,ts)=>{const es=getAttributeNS(_r,jr,ts)||getAttributeNS(Nr,jr,ts)||getAttributeNS(Gr,jr,ts);return es&&(Yr[ts]=es),Yr},{})}function getAttributeNS(Nr,_r,Ur){return Nr&&Nr.hasAttributeNS(_r,Ur)?Nr.getAttributeNS(_r,Ur):null}function timestampParsingError(Nr){return new Error(`Could not parse ttml timestamp ${Nr}`)}function parseTtmlTime(Nr,_r){if(!Nr)return null;let Ur=parseTimeStamp(Nr);return Ur===null&&(HMSF_REGEX.test(Nr)?Ur=parseHoursMinutesSecondsFrames(Nr,_r):TIME_UNIT_REGEX.test(Nr)&&(Ur=parseTimeUnits(Nr,_r))),Ur}function parseHoursMinutesSecondsFrames(Nr,_r){const Ur=HMSF_REGEX.exec(Nr),jr=(Ur[4]|0)+(Ur[5]|0)/_r.subFrameRate;return(Ur[1]|0)*3600+(Ur[2]|0)*60+(Ur[3]|0)+jr/_r.frameRate}function parseTimeUnits(Nr,_r){const Ur=TIME_UNIT_REGEX.exec(Nr),jr=Number(Ur[1]);switch(Ur[2]){case"h":return jr*3600;case"m":return jr*60;case"ms":return jr*1e3;case"f":return jr/_r.frameRate;case"t":return jr/_r.tickRate}return jr}class TimelineController{constructor(_r){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this.captionsProperties=void 0,this.hls=_r,this.config=_r.config,this.Cues=_r.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const Ur=new OutputFilter(this,"textTrack1"),jr=new OutputFilter(this,"textTrack2"),Gr=new OutputFilter(this,"textTrack3"),Wr=new OutputFilter(this,"textTrack4");this.cea608Parser1=new Cea608Parser(1,Ur,jr),this.cea608Parser2=new Cea608Parser(3,Gr,Wr)}_r.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),_r.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_r.on(Events.FRAG_LOADING,this.onFragLoading,this),_r.on(Events.FRAG_LOADED,this.onFragLoaded,this),_r.on(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),_r.on(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),_r.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),_r.on(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),_r.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:_r}=this;_r.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),_r.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_r.off(Events.FRAG_LOADING,this.onFragLoading,this),_r.off(Events.FRAG_LOADED,this.onFragLoaded,this),_r.off(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),_r.off(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),_r.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),_r.off(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),_r.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(_r,Ur,jr,Gr,Wr){let Zr=!1;for(let Yr=Wr.length;Yr--;){const ts=Wr[Yr],es=intersection(ts[0],ts[1],Ur,jr);if(es>=0&&(ts[0]=Math.min(ts[0],Ur),ts[1]=Math.max(ts[1],jr),Zr=!0,es/(jr-Ur)>.5))return}if(Zr||Wr.push([Ur,jr]),this.config.renderTextTracksNatively){const Yr=this.captionsTracks[_r];this.Cues.newCue(Yr,Ur,jr,Gr)}else{const Yr=this.Cues.newCue(null,Ur,jr,Gr);this.hls.trigger(Events.CUES_PARSED,{type:"captions",cues:Yr,track:_r})}}onInitPtsFound(_r,{frag:Ur,id:jr,initPTS:Gr,timescale:Wr}){const{unparsedVttFrags:Zr}=this;jr==="main"&&(this.initPTS[Ur.cc]={baseTime:Gr,timescale:Wr}),Zr.length&&(this.unparsedVttFrags=[],Zr.forEach(Yr=>{this.onFragLoaded(Events.FRAG_LOADED,Yr)}))}getExistingTrack(_r){const{media:Ur}=this;if(Ur)for(let jr=0;jr<Ur.textTracks.length;jr++){const Gr=Ur.textTracks[jr];if(Gr[_r])return Gr}return null}createCaptionsTrack(_r){this.config.renderTextTracksNatively?this.createNativeTrack(_r):this.createNonNativeTrack(_r)}createNativeTrack(_r){if(this.captionsTracks[_r])return;const{captionsProperties:Ur,captionsTracks:jr,media:Gr}=this,{label:Wr,languageCode:Zr}=Ur[_r],Yr=this.getExistingTrack(_r);if(Yr)jr[_r]=Yr,clearCurrentCues(jr[_r]),sendAddTrackEvent(jr[_r],Gr);else{const ts=this.createTextTrack("captions",Wr,Zr);ts&&(ts[_r]=!0,jr[_r]=ts)}}createNonNativeTrack(_r){if(this.nonNativeCaptionsTracks[_r])return;const Ur=this.captionsProperties[_r];if(!Ur)return;const jr=Ur.label,Gr={_id:_r,label:jr,kind:"captions",default:Ur.media?!!Ur.media.default:!1,closedCaptions:Ur.media};this.nonNativeCaptionsTracks[_r]=Gr,this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[Gr]})}createTextTrack(_r,Ur,jr){const Gr=this.media;if(Gr)return Gr.addTextTrack(_r,Ur,jr)}onMediaAttaching(_r,Ur){this.media=Ur.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:_r}=this;Object.keys(_r).forEach(Ur=>{clearCurrentCues(_r[Ur]),delete _r[Ur]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:_r}=this;if(!_r)return;const Ur=_r.textTracks;if(Ur)for(let jr=0;jr<Ur.length;jr++)clearCurrentCues(Ur[jr])}onSubtitleTracksUpdated(_r,Ur){const jr=Ur.subtitleTracks||[],Gr=jr.some(Wr=>Wr.textCodec===IMSC1_CODEC);if(this.config.enableWebVTT||Gr&&this.config.enableIMSC1){if(subtitleOptionsIdentical(this.tracks,jr)){this.tracks=jr;return}if(this.textTracks=[],this.tracks=jr,this.config.renderTextTracksNatively){const Zr=this.media?this.media.textTracks:null;this.tracks.forEach((Yr,ts)=>{let es;if(Zr&&ts<Zr.length){let ns=null;for(let Xr=0;Xr<Zr.length;Xr++)if(canReuseVttTextTrack(Zr[Xr],Yr)){ns=Zr[Xr];break}ns&&(es=ns)}if(es)clearCurrentCues(es);else{const ns=this._captionsOrSubtitlesFromCharacteristics(Yr);es=this.createTextTrack(ns,Yr.name,Yr.lang),es&&(es.mode="disabled")}es&&(es.groupId=Yr.groupId,this.textTracks.push(es))})}else if(this.tracks.length){const Zr=this.tracks.map(Yr=>({label:Yr.name,kind:Yr.type.toLowerCase(),default:Yr.default,subtitleTrack:Yr}));this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:Zr})}}}_captionsOrSubtitlesFromCharacteristics(_r){if(_r.attrs.CHARACTERISTICS){const Ur=/transcribes-spoken-dialog/gi.test(_r.attrs.CHARACTERISTICS),jr=/describes-music-and-sound/gi.test(_r.attrs.CHARACTERISTICS);if(Ur&&jr)return"captions"}return"subtitles"}onManifestLoaded(_r,Ur){this.config.enableCEA708Captions&&Ur.captions&&Ur.captions.forEach(jr=>{const Gr=/(?:CC|SERVICE)([1-4])/.exec(jr.instreamId);if(!Gr)return;const Wr=`textTrack${Gr[1]}`,Zr=this.captionsProperties[Wr];Zr&&(Zr.label=jr.name,jr.lang&&(Zr.languageCode=jr.lang),Zr.media=jr)})}closedCaptionsForLevel(_r){const Ur=this.hls.levels[_r.level];return Ur==null?void 0:Ur.attrs["CLOSED-CAPTIONS"]}onFragLoading(_r,Ur){const{cea608Parser1:jr,cea608Parser2:Gr,lastSn:Wr,lastPartIndex:Zr}=this;if(!(!this.enabled||!(jr&&Gr))&&Ur.frag.type===PlaylistLevelType.MAIN){var Yr,ts;const es=Ur.frag.sn,ns=(Yr=Ur==null||(ts=Ur.part)==null?void 0:ts.index)!=null?Yr:-1;es===Wr+1||es===Wr&&ns===Zr+1||(jr.reset(),Gr.reset()),this.lastSn=es,this.lastPartIndex=ns}}onFragLoaded(_r,Ur){const{frag:jr,payload:Gr}=Ur;if(jr.type===PlaylistLevelType.SUBTITLE)if(Gr.byteLength){const Wr=jr.decryptdata,Zr="stats"in Ur;if(Wr==null||!Wr.encrypted||Zr){const Yr=this.tracks[jr.level],ts=this.vttCCs;ts[jr.cc]||(ts[jr.cc]={start:jr.start,prevCC:this.prevCC,new:!0},this.prevCC=jr.cc),Yr&&Yr.textCodec===IMSC1_CODEC?this._parseIMSC1(jr,Gr):this._parseVTTs(Ur)}}else this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:jr,error:new Error("Empty subtitle payload")})}_parseIMSC1(_r,Ur){const jr=this.hls;parseIMSC1(Ur,this.initPTS[_r.cc],Gr=>{this._appendCues(Gr,_r.level),jr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:_r})},Gr=>{logger.log(`Failed to parse IMSC1: ${Gr}`),jr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:_r,error:Gr})})}_parseVTTs(_r){var Ur;const{frag:jr,payload:Gr}=_r,{initPTS:Wr,unparsedVttFrags:Zr}=this,Yr=Wr.length-1;if(!Wr[jr.cc]&&Yr===-1){Zr.push(_r);return}const ts=this.hls,es=(Ur=jr.initSegment)!=null&&Ur.data?appendUint8Array(jr.initSegment.data,new Uint8Array(Gr)):Gr;parseWebVTT(es,this.initPTS[jr.cc],this.vttCCs,jr.cc,jr.start,ns=>{this._appendCues(ns,jr.level),ts.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:jr})},ns=>{const Xr=ns.message==="Missing initPTS for VTT MPEGTS";Xr?Zr.push(_r):this._fallbackToIMSC1(jr,Gr),logger.log(`Failed to parse VTT cue: ${ns}`),!(Xr&&Yr>jr.cc)&&ts.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:jr,error:ns})})}_fallbackToIMSC1(_r,Ur){const jr=this.tracks[_r.level];jr.textCodec||parseIMSC1(Ur,this.initPTS[_r.cc],()=>{jr.textCodec=IMSC1_CODEC,this._parseIMSC1(_r,Ur)},()=>{jr.textCodec="wvtt"})}_appendCues(_r,Ur){const jr=this.hls;if(this.config.renderTextTracksNatively){const Gr=this.textTracks[Ur];if(!Gr||Gr.mode==="disabled")return;_r.forEach(Wr=>addCueToTrack(Gr,Wr))}else{const Gr=this.tracks[Ur];if(!Gr)return;const Wr=Gr.default?"default":"subtitles"+Ur;jr.trigger(Events.CUES_PARSED,{type:"subtitles",cues:_r,track:Wr})}}onFragDecrypted(_r,Ur){const{frag:jr}=Ur;jr.type===PlaylistLevelType.SUBTITLE&&this.onFragLoaded(Events.FRAG_LOADED,Ur)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(_r,Ur){const{cea608Parser1:jr,cea608Parser2:Gr}=this;if(!this.enabled||!(jr&&Gr))return;const{frag:Wr,samples:Zr}=Ur;if(!(Wr.type===PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(Wr)==="NONE"))for(let Yr=0;Yr<Zr.length;Yr++){const ts=Zr[Yr].bytes;if(ts){const es=this.extractCea608Data(ts);jr.addData(Zr[Yr].pts,es[0]),Gr.addData(Zr[Yr].pts,es[1])}}}onBufferFlushing(_r,{startOffset:Ur,endOffset:jr,endOffsetSubtitles:Gr,type:Wr}){const{media:Zr}=this;if(!(!Zr||Zr.currentTime<jr)){if(!Wr||Wr==="video"){const{captionsTracks:Yr}=this;Object.keys(Yr).forEach(ts=>removeCuesInRange(Yr[ts],Ur,jr))}if(this.config.renderTextTracksNatively&&Ur===0&&Gr!==void 0){const{textTracks:Yr}=this;Object.keys(Yr).forEach(ts=>removeCuesInRange(Yr[ts],Ur,Gr))}}}extractCea608Data(_r){const Ur=[[],[]],jr=_r[0]&31;let Gr=2;for(let Wr=0;Wr<jr;Wr++){const Zr=_r[Gr++],Yr=127&_r[Gr++],ts=127&_r[Gr++];if(Yr===0&&ts===0)continue;if((4&Zr)!==0){const ns=3&Zr;(ns===0||ns===1)&&(Ur[ns].push(Yr),Ur[ns].push(ts))}}return Ur}}function canReuseVttTextTrack(Nr,_r){return!!Nr&&Nr.label===_r.name&&!(Nr.textTrack1||Nr.textTrack2)}function intersection(Nr,_r,Ur,jr){return Math.min(_r,jr)-Math.max(Nr,Ur)}function newVTTCCs(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class CapLevelController{constructor(_r){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=_r,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(_r){this.streamController=_r}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:_r}=this;_r.on(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),_r.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),_r.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),_r.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:_r}=this;_r.off(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),_r.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),_r.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),_r.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(_r,Ur){const jr=this.hls.levels[Ur.droppedLevel];this.isLevelAllowed(jr)&&this.restrictedLevels.push({bitrate:jr.bitrate,height:jr.height,width:jr.width})}onMediaAttaching(_r,Ur){this.media=Ur.media instanceof HTMLVideoElement?Ur.media:null,this.clientRect=null}onManifestParsed(_r,Ur){const jr=this.hls;this.restrictedLevels=[],this.firstLevel=Ur.firstLevel,jr.config.capLevelToPlayerSize&&Ur.video&&this.startCapping()}onBufferCodecs(_r,Ur){this.hls.config.capLevelToPlayerSize&&Ur.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const _r=this.hls.levels;if(_r.length){const Ur=this.hls;Ur.autoLevelCapping=this.getMaxLevel(_r.length-1),Ur.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=Ur.autoLevelCapping}}}getMaxLevel(_r){const Ur=this.hls.levels;if(!Ur.length)return-1;const jr=Ur.filter((Gr,Wr)=>this.isLevelAllowed(Gr)&&Wr<=_r);return this.clientRect=null,CapLevelController.getMaxLevelByMediaSize(jr,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const _r=this.media,Ur={width:0,height:0};if(_r){const jr=_r.getBoundingClientRect();Ur.width=jr.width,Ur.height=jr.height,!Ur.width&&!Ur.height&&(Ur.width=jr.right-jr.left||_r.width||0,Ur.height=jr.bottom-jr.top||_r.height||0)}return this.clientRect=Ur,Ur}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let _r=1;if(!this.hls.config.ignoreDevicePixelRatio)try{_r=self.devicePixelRatio}catch{}return _r}isLevelAllowed(_r){return!this.restrictedLevels.some(jr=>_r.bitrate===jr.bitrate&&_r.width===jr.width&&_r.height===jr.height)}static getMaxLevelByMediaSize(_r,Ur,jr){if(!(_r!=null&&_r.length))return-1;const Gr=(Zr,Yr)=>Yr?Zr.width!==Yr.width||Zr.height!==Yr.height:!0;let Wr=_r.length-1;for(let Zr=0;Zr<_r.length;Zr+=1){const Yr=_r[Zr];if((Yr.width>=Ur||Yr.height>=jr)&&Gr(Yr,_r[Zr+1])){Wr=Zr;break}}return Wr}}class FPSController{constructor(_r){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=_r,this.registerListeners()}setStreamController(_r){this.streamController=_r}registerListeners(){this.hls.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(_r,Ur){const jr=this.hls.config;if(jr.capLevelOnFPSDrop){const Gr=Ur.media instanceof self.HTMLVideoElement?Ur.media:null;this.media=Gr,Gr&&typeof Gr.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),jr.fpsDroppedMonitoringPeriod)}}checkFPS(_r,Ur,jr){const Gr=performance.now();if(Ur){if(this.lastTime){const Wr=Gr-this.lastTime,Zr=jr-this.lastDroppedFrames,Yr=Ur-this.lastDecodedFrames,ts=1e3*Zr/Wr,es=this.hls;if(es.trigger(Events.FPS_DROP,{currentDropped:Zr,currentDecoded:Yr,totalDroppedFrames:jr}),ts>0&&Zr>es.config.fpsDroppedMonitoringThreshold*Yr){let ns=es.currentLevel;logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+ns),ns>0&&(es.autoLevelCapping===-1||es.autoLevelCapping>=ns)&&(ns=ns-1,es.trigger(Events.FPS_DROP_LEVEL_CAPPING,{level:ns,droppedLevel:es.currentLevel}),es.autoLevelCapping=ns,this.streamController.nextLevelSwitch())}}this.lastTime=Gr,this.lastDroppedFrames=jr,this.lastDecodedFrames=Ur}}checkFPSInterval(){const _r=this.media;if(_r)if(this.isVideoPlaybackQualityAvailable){const Ur=_r.getVideoPlaybackQuality();this.checkFPS(_r,Ur.totalVideoFrames,Ur.droppedVideoFrames)}else this.checkFPS(_r,_r.webkitDecodedFrameCount,_r.webkitDroppedFrameCount)}}const LOGGER_PREFIX="[eme]";class EMEController{constructor(_r){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=EMEController.CDMCleanupPromise?[EMEController.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=logger.debug.bind(logger,LOGGER_PREFIX),this.log=logger.log.bind(logger,LOGGER_PREFIX),this.warn=logger.warn.bind(logger,LOGGER_PREFIX),this.error=logger.error.bind(logger,LOGGER_PREFIX),this.hls=_r,this.config=_r.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const _r=this.config;_r.requestMediaKeySystemAccessFunc=null,_r.licenseXhrSetup=_r.licenseResponseCallback=void 0,_r.drmSystems=_r.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(_r){const{drmSystems:Ur,widevineLicenseUrl:jr}=this.config,Gr=Ur[_r];if(Gr)return Gr.licenseUrl;if(_r===KeySystems.WIDEVINE&&jr)return jr;throw new Error(`no license server URL configured for key-system "${_r}"`)}getServerCertificateUrl(_r){const{drmSystems:Ur}=this.config,jr=Ur[_r];if(jr)return jr.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${_r}"]`)}attemptKeySystemAccess(_r){const Ur=this.hls.levels,jr=(Zr,Yr,ts)=>!!Zr&&ts.indexOf(Zr)===Yr,Gr=Ur.map(Zr=>Zr.audioCodec).filter(jr),Wr=Ur.map(Zr=>Zr.videoCodec).filter(jr);return Gr.length+Wr.length===0&&Wr.push("avc1.42e01e"),new Promise((Zr,Yr)=>{const ts=es=>{const ns=es.shift();this.getMediaKeysPromise(ns,Gr,Wr).then(Xr=>Zr({keySystem:ns,mediaKeys:Xr})).catch(Xr=>{es.length?ts(es):Xr instanceof EMEKeyError?Yr(Xr):Yr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:Xr,fatal:!0},Xr.message))})};ts(_r)})}requestMediaKeySystemAccess(_r,Ur){const{requestMediaKeySystemAccessFunc:jr}=this.config;if(typeof jr!="function"){let Gr=`Configured requestMediaKeySystemAccess is not a function ${jr}`;return requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(Gr=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(Gr))}return jr(_r,Ur)}getMediaKeysPromise(_r,Ur,jr){const Gr=getSupportedMediaKeySystemConfigurations(_r,Ur,jr,this.config.drmSystemOptions),Wr=this.keySystemAccessPromises[_r];let Zr=Wr==null?void 0:Wr.keySystemAccess;if(!Zr){this.log(`Requesting encrypted media "${_r}" key-system access with config: ${JSON.stringify(Gr)}`),Zr=this.requestMediaKeySystemAccess(_r,Gr);const Yr=this.keySystemAccessPromises[_r]={keySystemAccess:Zr};return Zr.catch(ts=>{this.log(`Failed to obtain access to key-system "${_r}": ${ts}`)}),Zr.then(ts=>{this.log(`Access for key-system "${ts.keySystem}" obtained`);const es=this.fetchServerCertificate(_r);return this.log(`Create media-keys for "${_r}"`),Yr.mediaKeys=ts.createMediaKeys().then(ns=>(this.log(`Media-keys created for "${_r}"`),es.then(Xr=>Xr?this.setMediaKeysServerCertificate(ns,_r,Xr):ns))),Yr.mediaKeys.catch(ns=>{this.error(`Failed to create media-keys for "${_r}"}: ${ns}`)}),Yr.mediaKeys})}return Zr.then(()=>Wr.mediaKeys)}createMediaKeySessionContext({decryptdata:_r,keySystem:Ur,mediaKeys:jr}){this.log(`Creating key-system session "${Ur}" keyId: ${Hex.hexDump(_r.keyId||[])}`);const Gr=jr.createSession(),Wr={decryptdata:_r,keySystem:Ur,mediaKeys:jr,mediaKeysSession:Gr,keyStatus:"status-pending"};return this.mediaKeySessions.push(Wr),Wr}renewKeySession(_r){const Ur=_r.decryptdata;if(Ur.pssh){const jr=this.createMediaKeySessionContext(_r),Gr=this.getKeyIdString(Ur),Wr="cenc";this.keyIdToKeySessionPromise[Gr]=this.generateRequestWithPreferredKeySession(jr,Wr,Ur.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(_r)}getKeyIdString(_r){if(!_r)throw new Error("Could not read keyId of undefined decryptdata");if(_r.keyId===null)throw new Error("keyId is null");return Hex.hexDump(_r.keyId)}updateKeySession(_r,Ur){var jr;const Gr=_r.mediaKeysSession;return this.log(`Updating key-session "${Gr.sessionId}" for keyID ${Hex.hexDump(((jr=_r.decryptdata)==null?void 0:jr.keyId)||[])}
      } (data length: ${Ur&&Ur.byteLength})`),Gr.update(Ur)}selectKeySystemFormat(_r){const Ur=Object.keys(_r.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${_r.sn} ${_r.type}: ${_r.level}) key formats ${Ur.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(Ur)),this.keyFormatPromise}getKeyFormatPromise(_r){return new Promise((Ur,jr)=>{const Gr=getKeySystemsForConfig(this.config),Wr=_r.map(keySystemFormatToKeySystemDomain).filter(Zr=>!!Zr&&Gr.indexOf(Zr)!==-1);return this.getKeySystemSelectionPromise(Wr).then(({keySystem:Zr})=>{const Yr=keySystemDomainToKeySystemFormat(Zr);Yr?Ur(Yr):jr(new Error(`Unable to find format for key-system "${Zr}"`))}).catch(jr)})}loadKey(_r){const Ur=_r.keyInfo.decryptdata,jr=this.getKeyIdString(Ur),Gr=`(keyId: ${jr} format: "${Ur.keyFormat}" method: ${Ur.method} uri: ${Ur.uri})`;this.log(`Starting session for key ${Gr}`);let Wr=this.keyIdToKeySessionPromise[jr];return Wr||(Wr=this.keyIdToKeySessionPromise[jr]=this.getKeySystemForKeyPromise(Ur).then(({keySystem:Zr,mediaKeys:Yr})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${_r.frag.sn} ${_r.frag.type}: ${_r.frag.level} using key ${Gr}`),this.attemptSetMediaKeys(Zr,Yr).then(()=>{this.throwIfDestroyed();const ts=this.createMediaKeySessionContext({keySystem:Zr,mediaKeys:Yr,decryptdata:Ur}),es="cenc";return this.generateRequestWithPreferredKeySession(ts,es,Ur.pssh,"playlist-key")}))),Wr.catch(Zr=>this.handleError(Zr))),Wr}throwIfDestroyed(_r="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(_r){this.hls&&(this.error(_r.message),_r instanceof EMEKeyError?this.hls.trigger(Events.ERROR,_r.data):this.hls.trigger(Events.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,error:_r,fatal:!0}))}getKeySystemForKeyPromise(_r){const Ur=this.getKeyIdString(_r),jr=this.keyIdToKeySessionPromise[Ur];if(!jr){const Gr=keySystemFormatToKeySystemDomain(_r.keyFormat),Wr=Gr?[Gr]:getKeySystemsForConfig(this.config);return this.attemptKeySystemAccess(Wr)}return jr}getKeySystemSelectionPromise(_r){if(_r.length||(_r=getKeySystemsForConfig(this.config)),_r.length===0)throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(_r)}_onMediaEncrypted(_r){const{initDataType:Ur,initData:jr}=_r;if(this.debug(`"${_r.type}" event: init data type: "${Ur}"`),jr===null)return;let Gr,Wr;if(Ur==="sinf"&&this.config.drmSystems[KeySystems.FAIRPLAY]){const ns=bin2str(new Uint8Array(jr));try{const Xr=base64Decode(JSON.parse(ns).sinf),qr=parseSinf(new Uint8Array(Xr));if(!qr)return;Gr=qr.subarray(8,24),Wr=KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const ns=parsePssh(jr);if(ns===null)return;ns.version===0&&ns.systemId===KeySystemIds.WIDEVINE&&ns.data&&(Gr=ns.data.subarray(8,24)),Wr=keySystemIdToKeySystemDomain(ns.systemId)}if(!Wr||!Gr)return;const Zr=Hex.hexDump(Gr),{keyIdToKeySessionPromise:Yr,mediaKeySessions:ts}=this;let es=Yr[Zr];for(let ns=0;ns<ts.length;ns++){const Xr=ts[ns],qr=Xr.decryptdata;if(qr.pssh||!qr.keyId)continue;const _i=Hex.hexDump(qr.keyId);if(Zr===_i||qr.uri.replace(/-/g,"").indexOf(Zr)!==-1){es=Yr[_i],delete Yr[_i],qr.pssh=new Uint8Array(jr),qr.keyId=Gr,es=Yr[Zr]=es.then(()=>this.generateRequestWithPreferredKeySession(Xr,Ur,jr,"encrypted-event-key-match"));break}}es||(es=Yr[Zr]=this.getKeySystemSelectionPromise([Wr]).then(({keySystem:ns,mediaKeys:Xr})=>{var qr;this.throwIfDestroyed();const _i=new LevelKey("ISO-23001-7",Zr,(qr=keySystemDomainToKeySystemFormat(ns))!=null?qr:"");return _i.pssh=new Uint8Array(jr),_i.keyId=Gr,this.attemptSetMediaKeys(ns,Xr).then(()=>{this.throwIfDestroyed();const rs=this.createMediaKeySessionContext({decryptdata:_i,keySystem:ns,mediaKeys:Xr});return this.generateRequestWithPreferredKeySession(rs,Ur,jr,"encrypted-event-no-match")})})),es.catch(ns=>this.handleError(ns))}_onWaitingForKey(_r){this.log(`"${_r.type}" event`)}attemptSetMediaKeys(_r,Ur){const jr=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${_r}"`);const Gr=Promise.all(jr).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(Ur)});return this.setMediaKeysQueue.push(Gr),Gr.then(()=>{this.log(`Media-keys set for "${_r}"`),jr.push(Gr),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(Wr=>jr.indexOf(Wr)===-1)})}generateRequestWithPreferredKeySession(_r,Ur,jr,Gr){var Wr,Zr;const Yr=(Wr=this.config.drmSystems)==null||(Zr=Wr[_r.keySystem])==null?void 0:Zr.generateRequest;if(Yr)try{const qr=Yr.call(this.hls,Ur,jr,_r);if(!qr)throw new Error("Invalid response from configured generateRequest filter");Ur=qr.initDataType,jr=_r.decryptdata.pssh=qr.initData?new Uint8Array(qr.initData):null}catch(qr){var ts;if(this.warn(qr.message),(ts=this.hls)!=null&&ts.config.debug)throw qr}if(jr===null)return this.log(`Skipping key-session request for "${Gr}" (no initData)`),Promise.resolve(_r);const es=this.getKeyIdString(_r.decryptdata);this.log(`Generating key-session request for "${Gr}": ${es} (init data type: ${Ur} length: ${jr?jr.byteLength:null})`);const ns=new EventEmitter;_r.mediaKeysSession.onmessage=qr=>{const _i=_r.mediaKeysSession;if(!_i){ns.emit("error",new Error("invalid state"));return}const{messageType:rs,message:is}=qr;this.log(`"${rs}" message event for session "${_i.sessionId}" message size: ${is.byteLength}`),rs==="license-request"||rs==="license-renewal"?this.renewLicense(_r,is).catch(ss=>{this.handleError(ss),ns.emit("error",ss)}):rs==="license-release"?_r.keySystem===KeySystems.FAIRPLAY&&(this.updateKeySession(_r,strToUtf8array("acknowledged")),this.removeSession(_r)):this.warn(`unhandled media key message type "${rs}"`)},_r.mediaKeysSession.onkeystatuseschange=qr=>{if(!_r.mediaKeysSession){ns.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(_r);const rs=_r.keyStatus;ns.emit("keyStatus",rs),rs==="expired"&&(this.warn(`${_r.keySystem} expired for key ${es}`),this.renewKeySession(_r))};const Xr=new Promise((qr,_i)=>{ns.on("error",_i),ns.on("keyStatus",rs=>{rs.startsWith("usable")?qr():rs==="output-restricted"?_i(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):rs==="internal-error"?_i(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${rs}"`)):rs==="expired"?_i(new Error("key expired while generating request")):this.warn(`unhandled key status change "${rs}"`)})});return _r.mediaKeysSession.generateRequest(Ur,jr).then(()=>{var qr;this.log(`Request generated for key-session "${(qr=_r.mediaKeysSession)==null?void 0:qr.sessionId}" keyId: ${es}`)}).catch(qr=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_SESSION,error:qr,fatal:!1},`Error generating key-session request: ${qr}`)}).then(()=>Xr).catch(qr=>{throw ns.removeAllListeners(),this.removeSession(_r),qr}).then(()=>(ns.removeAllListeners(),_r))}onKeyStatusChange(_r){_r.mediaKeysSession.keyStatuses.forEach((Ur,jr)=>{this.log(`key status change "${Ur}" for keyStatuses keyId: ${Hex.hexDump("buffer"in jr?new Uint8Array(jr.buffer,jr.byteOffset,jr.byteLength):new Uint8Array(jr))} session keyId: ${Hex.hexDump(new Uint8Array(_r.decryptdata.keyId||[]))} uri: ${_r.decryptdata.uri}`),_r.keyStatus=Ur})}fetchServerCertificate(_r){const Ur=this.config,jr=Ur.loader,Gr=new jr(Ur),Wr=this.getServerCertificateUrl(_r);return Wr?(this.log(`Fetching serverCertificate for "${_r}"`),new Promise((Zr,Yr)=>{const ts={responseType:"arraybuffer",url:Wr},es=Ur.certLoadPolicy.default,ns={loadPolicy:es,timeout:es.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},Xr={onSuccess:(qr,_i,rs,is)=>{Zr(qr.data)},onError:(qr,_i,rs,is)=>{Yr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:rs,response:_objectSpread2({url:ts.url,data:void 0},qr)},`"${_r}" certificate request failed (${Wr}). Status: ${qr.code} (${qr.text})`))},onTimeout:(qr,_i,rs)=>{Yr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:rs,response:{url:ts.url,data:void 0}},`"${_r}" certificate request timed out (${Wr})`))},onAbort:(qr,_i,rs)=>{Yr(new Error("aborted"))}};Gr.load(ts,ns,Xr)})):Promise.resolve()}setMediaKeysServerCertificate(_r,Ur,jr){return new Promise((Gr,Wr)=>{_r.setServerCertificate(jr).then(Zr=>{this.log(`setServerCertificate ${Zr?"success":"not supported by CDM"} (${jr==null?void 0:jr.byteLength}) on "${Ur}"`),Gr(_r)}).catch(Zr=>{Wr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:Zr,fatal:!0},Zr.message))})})}renewLicense(_r,Ur){return this.requestLicense(_r,new Uint8Array(Ur)).then(jr=>this.updateKeySession(_r,new Uint8Array(jr)).catch(Gr=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:Gr,fatal:!0},Gr.message)}))}setupLicenseXHR(_r,Ur,jr,Gr){const Wr=this.config.licenseXhrSetup;return Wr?Promise.resolve().then(()=>{if(!jr.decryptdata)throw new Error("Key removed");return Wr.call(this.hls,_r,Ur,jr,Gr)}).catch(Zr=>{if(!jr.decryptdata)throw Zr;return _r.open("POST",Ur,!0),Wr.call(this.hls,_r,Ur,jr,Gr)}).then(Zr=>(_r.readyState||_r.open("POST",Ur,!0),{xhr:_r,licenseChallenge:Zr||Gr})):(_r.open("POST",Ur,!0),Promise.resolve({xhr:_r,licenseChallenge:Gr}))}requestLicense(_r,Ur){const jr=this.config.keyLoadPolicy.default;return new Promise((Gr,Wr)=>{const Zr=this.getLicenseServerUrl(_r.keySystem);this.log(`Sending license request to URL: ${Zr}`);const Yr=new XMLHttpRequest;Yr.responseType="arraybuffer",Yr.onreadystatechange=()=>{if(!this.hls||!_r.mediaKeysSession)return Wr(new Error("invalid state"));if(Yr.readyState===4)if(Yr.status===200){this._requestLicenseFailureCount=0;let ts=Yr.response;this.log(`License received ${ts instanceof ArrayBuffer?ts.byteLength:ts}`);const es=this.config.licenseResponseCallback;if(es)try{ts=es.call(this.hls,Yr,Zr,_r)}catch(ns){this.error(ns)}Gr(ts)}else{const ts=jr.errorRetry,es=ts?ts.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>es||Yr.status>=400&&Yr.status<500)Wr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:Yr,response:{url:Zr,data:void 0,code:Yr.status,text:Yr.statusText}},`License Request XHR failed (${Zr}). Status: ${Yr.status} (${Yr.statusText})`));else{const ns=es-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${ns} attempts left`),this.requestLicense(_r,Ur).then(Gr,Wr)}}},_r.licenseXhr&&_r.licenseXhr.readyState!==XMLHttpRequest.DONE&&_r.licenseXhr.abort(),_r.licenseXhr=Yr,this.setupLicenseXHR(Yr,Zr,_r,Ur).then(({xhr:ts,licenseChallenge:es})=>{ts.send(es)})})}onMediaAttached(_r,Ur){if(!this.config.emeEnabled)return;const jr=Ur.media;this.media=jr,jr.addEventListener("encrypted",this.onMediaEncrypted),jr.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const _r=this.media,Ur=this.mediaKeySessions;_r&&(_r.removeEventListener("encrypted",this.onMediaEncrypted),_r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},LevelKey.clearKeyUriToKeyIdMap();const jr=Ur.length;EMEController.CDMCleanupPromise=Promise.all(Ur.map(Gr=>this.removeSession(Gr)).concat(_r==null?void 0:_r.setMediaKeys(null).catch(Gr=>{this.log(`Could not clear media keys: ${Gr}. media.src: ${_r==null?void 0:_r.src}`)}))).then(()=>{jr&&(this.log("finished closing key sessions and clearing media keys"),Ur.length=0)}).catch(Gr=>{this.log(`Could not close sessions and clear media keys: ${Gr}. media.src: ${_r==null?void 0:_r.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(_r,{sessionKeys:Ur}){if(!(!Ur||!this.config.emeEnabled)&&!this.keyFormatPromise){const jr=Ur.reduce((Gr,Wr)=>(Gr.indexOf(Wr.keyFormat)===-1&&Gr.push(Wr.keyFormat),Gr),[]);this.log(`Selecting key-system from session-keys ${jr.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(jr)}}removeSession(_r){const{mediaKeysSession:Ur,licenseXhr:jr}=_r;if(Ur){this.log(`Remove licenses and keys and close session ${Ur.sessionId}`),Ur.onmessage=null,Ur.onkeystatuseschange=null,jr&&jr.readyState!==XMLHttpRequest.DONE&&jr.abort(),_r.mediaKeysSession=_r.decryptdata=_r.licenseXhr=void 0;const Gr=this.mediaKeySessions.indexOf(_r);return Gr>-1&&this.mediaKeySessions.splice(Gr,1),Ur.remove().catch(Wr=>{this.log(`Could not remove session: ${Wr}`)}).then(()=>Ur.close()).catch(Wr=>{this.log(`Could not close session: ${Wr}`)})}}}EMEController.CDMCleanupPromise=void 0;class EMEKeyError extends Error{constructor(_r,Ur){super(Ur),this.data=void 0,_r.error||(_r.error=new Error(Ur)),this.data=_r,_r.err=_r.error}}const CMCDVersion=1;var CMCDObjectType={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"};const CMCDStreamingFormatHLS="h";class CMCDController{constructor(_r){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=Gr=>{try{this.apply(Gr,{ot:CMCDObjectType.MANIFEST,su:!this.initialized})}catch(Wr){logger.warn("Could not generate manifest CMCD data.",Wr)}},this.applyFragmentData=Gr=>{try{const Wr=Gr.frag,Zr=this.hls.levels[Wr.level],Yr=this.getObjectType(Wr),ts={d:Wr.duration*1e3,ot:Yr};(Yr===CMCDObjectType.VIDEO||Yr===CMCDObjectType.AUDIO||Yr==CMCDObjectType.MUXED)&&(ts.br=Zr.bitrate/1e3,ts.tb=this.getTopBandwidth(Yr)/1e3,ts.bl=this.getBufferLength(Yr)),this.apply(Gr,ts)}catch(Wr){logger.warn("Could not generate segment CMCD data.",Wr)}},this.hls=_r;const Ur=this.config=_r.config,{cmcd:jr}=Ur;jr!=null&&(Ur.pLoader=this.createPlaylistLoader(),Ur.fLoader=this.createFragmentLoader(),this.sid=jr.sessionId||CMCDController.uuid(),this.cid=jr.contentId,this.useHeaders=jr.useHeaders===!0,this.registerListeners())}registerListeners(){const _r=this.hls;_r.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),_r.on(Events.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const _r=this.hls;_r.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),_r.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),_r.off(Events.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(_r,Ur){this.media=Ur.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(_r,Ur){var jr,Gr;this.audioBuffer=(jr=Ur.tracks.audio)==null?void 0:jr.buffer,this.videoBuffer=(Gr=Ur.tracks.video)==null?void 0:Gr.buffer}createData(){var _r;return{v:CMCDVersion,sf:CMCDStreamingFormatHLS,sid:this.sid,cid:this.cid,pr:(_r=this.media)==null?void 0:_r.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(_r,Ur={}){_extends(Ur,this.createData());const jr=Ur.ot===CMCDObjectType.INIT||Ur.ot===CMCDObjectType.VIDEO||Ur.ot===CMCDObjectType.MUXED;if(this.starved&&jr&&(Ur.bs=!0,Ur.su=!0,this.starved=!1),Ur.su==null&&(Ur.su=this.buffering),this.useHeaders){const Gr=CMCDController.toHeaders(Ur);if(!Object.keys(Gr).length)return;_r.headers||(_r.headers={}),_extends(_r.headers,Gr)}else{const Gr=CMCDController.toQuery(Ur);if(!Gr)return;_r.url=CMCDController.appendQueryToUri(_r.url,Gr)}}getObjectType(_r){const{type:Ur}=_r;if(Ur==="subtitle")return CMCDObjectType.TIMED_TEXT;if(_r.sn==="initSegment")return CMCDObjectType.INIT;if(Ur==="audio")return CMCDObjectType.AUDIO;if(Ur==="main")return this.hls.audioTracks.length?CMCDObjectType.VIDEO:CMCDObjectType.MUXED}getTopBandwidth(_r){let Ur=0,jr;const Gr=this.hls;if(_r===CMCDObjectType.AUDIO)jr=Gr.audioTracks;else{const Wr=Gr.maxAutoLevel,Zr=Wr>-1?Wr+1:Gr.levels.length;jr=Gr.levels.slice(0,Zr)}for(const Wr of jr)Wr.bitrate>Ur&&(Ur=Wr.bitrate);return Ur>0?Ur:NaN}getBufferLength(_r){const Ur=this.hls.media,jr=_r===CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return!jr||!Ur?NaN:BufferHelper.bufferInfo(jr,Ur.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:_r}=this.config,Ur=this.applyPlaylistData,jr=_r||this.config.loader;return class{constructor(Wr){this.loader=void 0,this.loader=new jr(Wr)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Wr,Zr,Yr){Ur(Wr),this.loader.load(Wr,Zr,Yr)}}}createFragmentLoader(){const{fLoader:_r}=this.config,Ur=this.applyFragmentData,jr=_r||this.config.loader;return class{constructor(Wr){this.loader=void 0,this.loader=new jr(Wr)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Wr,Zr,Yr){Ur(Wr),this.loader.load(Wr,Zr,Yr)}}}static uuid(){const _r=URL.createObjectURL(new Blob),Ur=_r.toString();return URL.revokeObjectURL(_r),Ur.slice(Ur.lastIndexOf("/")+1)}static serialize(_r){const Ur=[],jr=es=>!Number.isNaN(es)&&es!=null&&es!==""&&es!==!1,Gr=es=>Math.round(es),Wr=es=>Gr(es/100)*100,Yr={br:Gr,d:Gr,bl:Wr,dl:Wr,mtp:Wr,nor:es=>encodeURIComponent(es),rtp:Wr,tb:Gr},ts=Object.keys(_r||{}).sort();for(const es of ts){let ns=_r[es];if(!jr(ns)||es==="v"&&ns===1||es=="pr"&&ns===1)continue;const Xr=Yr[es];Xr&&(ns=Xr(ns));const qr=typeof ns;let _i;es==="ot"||es==="sf"||es==="st"?_i=`${es}=${ns}`:qr==="boolean"?_i=es:qr==="number"?_i=`${es}=${ns}`:_i=`${es}=${JSON.stringify(ns)}`,Ur.push(_i)}return Ur.join(",")}static toHeaders(_r){const Ur=Object.keys(_r),jr={},Gr=["Object","Request","Session","Status"],Wr=[{},{},{},{}],Zr={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const Yr of Ur){const ts=Zr[Yr]!=null?Zr[Yr]:1;Wr[ts][Yr]=_r[Yr]}for(let Yr=0;Yr<Wr.length;Yr++){const ts=CMCDController.serialize(Wr[Yr]);ts&&(jr[`CMCD-${Gr[Yr]}`]=ts)}return jr}static toQuery(_r){return`CMCD=${encodeURIComponent(CMCDController.serialize(_r))}`}static appendQueryToUri(_r,Ur){if(!Ur)return _r;const jr=_r.includes("?")?"&":"?";return`${_r}${jr}${Ur}`}}const PATHWAY_PENALTY_DURATION_MS=3e5;class ContentSteeringController{constructor(_r){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=_r,this.log=logger.log.bind(logger,"[content-steering]:"),this.registerListeners()}registerListeners(){const _r=this.hls;_r.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),_r.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.on(Events.ERROR,this.onError,this)}unregisterListeners(){const _r=this.hls;_r&&(_r.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),_r.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),_r.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),_r.off(Events.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const _r=Math.max(this.timeToLoad*1e3-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,_r)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(_r){const Ur=this.levels;Ur&&(this.levels=Ur.filter(jr=>jr!==_r))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(_r,Ur){const{contentSteering:jr}=Ur;jr!==null&&(this.pathwayId=jr.pathwayId,this.uri=jr.uri,this.started&&this.startLoad())}onManifestParsed(_r,Ur){this.audioTracks=Ur.audioTracks,this.subtitleTracks=Ur.subtitleTracks}onError(_r,Ur){const{errorAction:jr}=Ur;if((jr==null?void 0:jr.action)===NetworkErrorAction.SendAlternateToPenaltyBox&&jr.flags===ErrorActionFlags.MoveAllAlternatesMatchingHost){let Gr=this.pathwayPriority;const Wr=this.pathwayId;this.penalizedPathways[Wr]||(this.penalizedPathways[Wr]=performance.now()),!Gr&&this.levels&&(Gr=this.levels.reduce((Zr,Yr)=>(Zr.indexOf(Yr.pathwayId)===-1&&Zr.push(Yr.pathwayId),Zr),[])),Gr&&Gr.length>1&&(this.updatePathwayPriority(Gr),jr.resolved=this.pathwayId!==Wr)}}filterParsedLevels(_r){this.levels=_r;let Ur=this.getLevelsForPathway(this.pathwayId);if(Ur.length===0){const jr=_r[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${jr}"`),Ur=this.getLevelsForPathway(jr),this.pathwayId=jr}return Ur.length!==_r.length?(this.log(`Found ${Ur.length}/${_r.length} levels in Pathway "${this.pathwayId}"`),Ur):_r}getLevelsForPathway(_r){return this.levels===null?[]:this.levels.filter(Ur=>_r===Ur.pathwayId)}updatePathwayPriority(_r){this.pathwayPriority=_r;let Ur;const jr=this.penalizedPathways,Gr=performance.now();Object.keys(jr).forEach(Wr=>{Gr-jr[Wr]>PATHWAY_PENALTY_DURATION_MS&&delete jr[Wr]});for(let Wr=0;Wr<_r.length;Wr++){const Zr=_r[Wr];if(jr[Zr])continue;if(Zr===this.pathwayId)return;const Yr=this.hls.nextLoadLevel,ts=this.hls.levels[Yr];if(Ur=this.getLevelsForPathway(Zr),Ur.length>0){this.log(`Setting Pathway to "${Zr}"`),this.pathwayId=Zr,this.hls.trigger(Events.LEVELS_UPDATED,{levels:Ur});const es=this.hls.levels[Yr];ts&&es&&this.levels&&(es.attrs["STABLE-VARIANT-ID"]!==ts.attrs["STABLE-VARIANT-ID"]&&es.bitrate!==ts.bitrate&&this.log(`Unstable Pathways change from bitrate ${ts.bitrate} to ${es.bitrate}`),this.hls.nextLoadLevel=Yr);break}}}clonePathways(_r){const Ur=this.levels;if(!Ur)return;const jr={},Gr={};_r.forEach(Wr=>{const{ID:Zr,"BASE-ID":Yr,"URI-REPLACEMENT":ts}=Wr;if(Ur.some(ns=>ns.pathwayId===Zr))return;const es=this.getLevelsForPathway(Yr).map(ns=>{const Xr=_extends({},ns);Xr.details=void 0,Xr.url=performUriReplacement(ns.uri,ns.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",ts);const qr=new AttrList(ns.attrs);qr["PATHWAY-ID"]=Zr;const _i=qr.AUDIO&&`${qr.AUDIO}_clone_${Zr}`,rs=qr.SUBTITLES&&`${qr.SUBTITLES}_clone_${Zr}`;_i&&(jr[qr.AUDIO]=_i,qr.AUDIO=_i),rs&&(Gr[qr.SUBTITLES]=rs,qr.SUBTITLES=rs),Xr.attrs=qr;const is=new Level(Xr);return addGroupId(is,"audio",_i),addGroupId(is,"text",rs),is});Ur.push(...es),cloneRenditionGroups(this.audioTracks,jr,ts,Zr),cloneRenditionGroups(this.subtitleTracks,Gr,ts,Zr)})}loadSteeringManifest(_r){const Ur=this.hls.config,jr=Ur.loader;this.loader&&this.loader.destroy(),this.loader=new jr(Ur);let Gr;try{Gr=new self.URL(_r)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${_r}`);return}if(Gr.protocol!=="data:"){const ns=(this.hls.bandwidthEstimate||Ur.abrEwmaDefaultEstimate)|0;Gr.searchParams.set("_HLS_pathway",this.pathwayId),Gr.searchParams.set("_HLS_throughput",""+ns)}const Wr={responseType:"json",url:Gr.href},Zr=Ur.steeringManifestLoadPolicy.default,Yr=Zr.errorRetry||Zr.timeoutRetry||{},ts={loadPolicy:Zr,timeout:Zr.maxLoadTimeMs,maxRetry:Yr.maxNumRetry||0,retryDelay:Yr.retryDelayMs||0,maxRetryDelay:Yr.maxRetryDelayMs||0},es={onSuccess:(ns,Xr,qr,_i)=>{this.log(`Loaded steering manifest: "${Gr}"`);const rs=ns.data;if(rs.VERSION!==1){this.log(`Steering VERSION ${rs.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=rs.TTL;const{"RELOAD-URI":is,"PATHWAY-CLONES":ss,"PATHWAY-PRIORITY":os}=rs;if(is)try{this.uri=new self.URL(is,Gr).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${is}`);return}this.scheduleRefresh(this.uri||qr.url),ss&&this.clonePathways(ss),os&&this.updatePathwayPriority(os)},onError:(ns,Xr,qr,_i)=>{if(this.log(`Error loading steering manifest: ${ns.code} ${ns.text} (${Xr.url})`),this.stopLoad(),ns.code===410){this.enabled=!1,this.log(`Steering manifest ${Xr.url} no longer available`);return}let rs=this.timeToLoad*1e3;if(ns.code===429){const is=this.loader;if(typeof(is==null?void 0:is.getResponseHeader)=="function"){const ss=is.getResponseHeader("Retry-After");ss&&(rs=parseFloat(ss)*1e3)}this.log(`Steering manifest ${Xr.url} rate limited`);return}this.scheduleRefresh(this.uri||Xr.url,rs)},onTimeout:(ns,Xr,qr)=>{this.log(`Timeout loading steering manifest (${Xr.url})`),this.scheduleRefresh(this.uri||Xr.url)}};this.log(`Requesting steering manifest: ${Gr}`),this.loader.load(Wr,ts,es)}scheduleRefresh(_r,Ur=this.timeToLoad*1e3){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(_r)},Ur)}}function cloneRenditionGroups(Nr,_r,Ur,jr){Nr&&Object.keys(_r).forEach(Gr=>{const Wr=Nr.filter(Zr=>Zr.groupId===Gr).map(Zr=>{const Yr=_extends({},Zr);return Yr.details=void 0,Yr.attrs=new AttrList(Yr.attrs),Yr.url=Yr.attrs.URI=performUriReplacement(Zr.url,Zr.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",Ur),Yr.groupId=Yr.attrs["GROUP-ID"]=_r[Gr],Yr.attrs["PATHWAY-ID"]=jr,Yr});Nr.push(...Wr)})}function performUriReplacement(Nr,_r,Ur,jr){const{HOST:Gr,PARAMS:Wr,[Ur]:Zr}=jr;let Yr;_r&&(Yr=Zr==null?void 0:Zr[_r],Yr&&(Nr=Yr));const ts=new self.URL(Nr);return Gr&&!Yr&&(ts.host=Gr),Wr&&Object.keys(Wr).sort().forEach(es=>{es&&ts.searchParams.set(es,Wr[es])}),ts.href}const AGE_HEADER_LINE_REGEX=/^age:\s*[\d.]+\s*$/im;class XhrLoader{constructor(_r){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=_r&&_r.xhrSetup||null,this.stats=new LoadStats,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const _r=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),_r&&(_r.onreadystatechange=null,_r.onprogress=null,_r.readyState!==4&&(this.stats.aborted=!0,_r.abort()))}abort(){var _r;this.abortInternal(),(_r=this.callbacks)!=null&&_r.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(_r,Ur,jr){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=_r,this.config=Ur,this.callbacks=jr,this.loadInternal()}loadInternal(){const{config:_r,context:Ur}=this;if(!_r)return;const jr=this.loader=new self.XMLHttpRequest,Gr=this.stats;Gr.loading.first=0,Gr.loaded=0,Gr.aborted=!1;const Wr=this.xhrSetup;Wr?Promise.resolve().then(()=>{if(!this.stats.aborted)return Wr(jr,Ur.url)}).catch(Zr=>(jr.open("GET",Ur.url,!0),Wr(jr,Ur.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(jr,Ur,_r)}).catch(Zr=>{this.callbacks.onError({code:jr.status,text:Zr.message},Ur,jr,Gr)}):this.openAndSendXhr(jr,Ur,_r)}openAndSendXhr(_r,Ur,jr){_r.readyState||_r.open("GET",Ur.url,!0);const Gr=this.context.headers,{maxTimeToFirstByteMs:Wr,maxLoadTimeMs:Zr}=jr.loadPolicy;if(Gr)for(const Yr in Gr)_r.setRequestHeader(Yr,Gr[Yr]);Ur.rangeEnd&&_r.setRequestHeader("Range","bytes="+Ur.rangeStart+"-"+(Ur.rangeEnd-1)),_r.onreadystatechange=this.readystatechange.bind(this),_r.onprogress=this.loadprogress.bind(this),_r.responseType=Ur.responseType,self.clearTimeout(this.requestTimeout),jr.timeout=Wr&&isFiniteNumber(Wr)?Wr:Zr,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),jr.timeout),_r.send()}readystatechange(){const{context:_r,loader:Ur,stats:jr}=this;if(!_r||!Ur)return;const Gr=Ur.readyState,Wr=this.config;if(!jr.aborted&&Gr>=2&&(jr.loading.first===0&&(jr.loading.first=Math.max(self.performance.now(),jr.loading.start),Wr.timeout!==Wr.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),Wr.timeout=Wr.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Wr.loadPolicy.maxLoadTimeMs-(jr.loading.first-jr.loading.start)))),Gr===4)){self.clearTimeout(this.requestTimeout),Ur.onreadystatechange=null,Ur.onprogress=null;const Zr=Ur.status,Yr=Ur.responseType!=="text";if(Zr>=200&&Zr<300&&(Yr&&Ur.response||Ur.responseText!==null)){jr.loading.end=Math.max(self.performance.now(),jr.loading.first);const ts=Yr?Ur.response:Ur.responseText,es=Ur.responseType==="arraybuffer"?ts.byteLength:ts.length;if(jr.loaded=jr.total=es,jr.bwEstimate=jr.total*8e3/(jr.loading.end-jr.loading.first),!this.callbacks)return;const ns=this.callbacks.onProgress;if(ns&&ns(jr,_r,ts,Ur),!this.callbacks)return;const Xr={url:Ur.responseURL,data:ts,code:Zr};this.callbacks.onSuccess(Xr,jr,_r,Ur)}else{const ts=Wr.loadPolicy.errorRetry,es=jr.retry;shouldRetry(ts,es,!1,Zr)?this.retry(ts):(logger.error(`${Zr} while loading ${_r.url}`),this.callbacks.onError({code:Zr,text:Ur.statusText},_r,Ur,jr))}}}loadtimeout(){var _r;const Ur=(_r=this.config)==null?void 0:_r.loadPolicy.timeoutRetry,jr=this.stats.retry;if(shouldRetry(Ur,jr,!0))this.retry(Ur);else{logger.warn(`timeout while loading ${this.context.url}`);const Gr=this.callbacks;Gr&&(this.abortInternal(),Gr.onTimeout(this.stats,this.context,this.loader))}}retry(_r){const{context:Ur,stats:jr}=this;this.retryDelay=getRetryDelay(_r,jr.retry),jr.retry++,logger.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${Ur.url}, retrying ${jr.retry}/${_r.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(_r){const Ur=this.stats;Ur.loaded=_r.loaded,_r.lengthComputable&&(Ur.total=_r.total)}getCacheAge(){let _r=null;if(this.loader&&AGE_HEADER_LINE_REGEX.test(this.loader.getAllResponseHeaders())){const Ur=this.loader.getResponseHeader("age");_r=Ur?parseFloat(Ur):null}return _r}getResponseHeader(_r){return this.loader&&new RegExp(`^${_r}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(_r):null}}function fetchSupported(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const BYTERANGE=/(\d+)-(\d+)\/(\d+)/;class FetchLoader{constructor(_r){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=_r.fetchSetup||getRequest,this.controller=new self.AbortController,this.stats=new LoadStats}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const _r=this.response;_r!=null&&_r.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var _r;this.abortInternal(),(_r=this.callbacks)!=null&&_r.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(_r,Ur,jr){const Gr=this.stats;if(Gr.loading.start)throw new Error("Loader can only be used once.");Gr.loading.start=self.performance.now();const Wr=getRequestParameters(_r,this.controller.signal),Zr=jr.onProgress,Yr=_r.responseType==="arraybuffer",ts=Yr?"byteLength":"length",{maxTimeToFirstByteMs:es,maxLoadTimeMs:ns}=Ur.loadPolicy;this.context=_r,this.config=Ur,this.callbacks=jr,this.request=this.fetchSetup(_r,Wr),self.clearTimeout(this.requestTimeout),Ur.timeout=es&&isFiniteNumber(es)?es:ns,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),jr.onTimeout(Gr,_r,this.response)},Ur.timeout),self.fetch(this.request).then(Xr=>{this.response=this.loader=Xr;const qr=Math.max(self.performance.now(),Gr.loading.start);if(self.clearTimeout(this.requestTimeout),Ur.timeout=ns,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),jr.onTimeout(Gr,_r,this.response)},ns-(qr-Gr.loading.start)),!Xr.ok){const{status:_i,statusText:rs}=Xr;throw new FetchError(rs||"fetch, bad network response",_i,Xr)}return Gr.loading.first=qr,Gr.total=getContentLength(Xr.headers)||Gr.total,Zr&&isFiniteNumber(Ur.highWaterMark)?this.loadProgressively(Xr,Gr,_r,Ur.highWaterMark,Zr):Yr?Xr.arrayBuffer():_r.responseType==="json"?Xr.json():Xr.text()}).then(Xr=>{const{response:qr}=this;self.clearTimeout(this.requestTimeout),Gr.loading.end=Math.max(self.performance.now(),Gr.loading.first);const _i=Xr[ts];_i&&(Gr.loaded=Gr.total=_i);const rs={url:qr.url,data:Xr,code:qr.status};Zr&&!isFiniteNumber(Ur.highWaterMark)&&Zr(Gr,_r,Xr,qr),jr.onSuccess(rs,Gr,_r,qr)}).catch(Xr=>{if(self.clearTimeout(this.requestTimeout),Gr.aborted)return;const qr=Xr&&Xr.code||0,_i=Xr?Xr.message:null;jr.onError({code:qr,text:_i},_r,Xr?Xr.details:null,Gr)})}getCacheAge(){let _r=null;if(this.response){const Ur=this.response.headers.get("age");_r=Ur?parseFloat(Ur):null}return _r}getResponseHeader(_r){return this.response?this.response.headers.get(_r):null}loadProgressively(_r,Ur,jr,Gr=0,Wr){const Zr=new ChunkCache,Yr=_r.body.getReader(),ts=()=>Yr.read().then(es=>{if(es.done)return Zr.dataLength&&Wr(Ur,jr,Zr.flush(),_r),Promise.resolve(new ArrayBuffer(0));const ns=es.value,Xr=ns.length;return Ur.loaded+=Xr,Xr<Gr||Zr.dataLength?(Zr.push(ns),Zr.dataLength>=Gr&&Wr(Ur,jr,Zr.flush(),_r)):Wr(Ur,jr,ns,_r),ts()}).catch(()=>Promise.reject());return ts()}}function getRequestParameters(Nr,_r){const Ur={method:"GET",mode:"cors",credentials:"same-origin",signal:_r,headers:new self.Headers(_extends({},Nr.headers))};return Nr.rangeEnd&&Ur.headers.set("Range","bytes="+Nr.rangeStart+"-"+String(Nr.rangeEnd-1)),Ur}function getByteRangeLength(Nr){const _r=BYTERANGE.exec(Nr);if(_r)return parseInt(_r[2])-parseInt(_r[1])+1}function getContentLength(Nr){const _r=Nr.get("Content-Range");if(_r){const jr=getByteRangeLength(_r);if(isFiniteNumber(jr))return jr}const Ur=Nr.get("Content-Length");if(Ur)return parseInt(Ur)}function getRequest(Nr,_r){return new self.Request(Nr.url,_r)}class FetchError extends Error{constructor(_r,Ur,jr){super(_r),this.code=void 0,this.details=void 0,this.code=Ur,this.details=jr}}const WHITESPACE_CHAR=/\s/,Cues={newCue(Nr,_r,Ur,jr){const Gr=[];let Wr,Zr,Yr,ts,es;const ns=self.VTTCue||self.TextTrackCue;for(let qr=0;qr<jr.rows.length;qr++)if(Wr=jr.rows[qr],Yr=!0,ts=0,es="",!Wr.isEmpty()){var Xr;for(let is=0;is<Wr.chars.length;is++)WHITESPACE_CHAR.test(Wr.chars[is].uchar)&&Yr?ts++:(es+=Wr.chars[is].uchar,Yr=!1);Wr.cueStartTime=_r,_r===Ur&&(Ur+=1e-4),ts>=16?ts--:ts++;const _i=fixLineBreaks(es.trim()),rs=generateCueId(_r,Ur,_i);Nr!=null&&(Xr=Nr.cues)!=null&&Xr.getCueById(rs)||(Zr=new ns(_r,Ur,_i),Zr.id=rs,Zr.line=qr+1,Zr.align="left",Zr.position=10+Math.min(80,Math.floor(ts*8/32)*10),Gr.push(Zr))}return Nr&&Gr.length&&(Gr.sort((qr,_i)=>qr.line==="auto"||_i.line==="auto"?0:qr.line>8&&_i.line>8?_i.line-qr.line:qr.line-_i.line),Gr.forEach(qr=>addCueToTrack(Nr,qr))),Gr}},defaultLoadPolicy={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},hlsDefaultConfig=_objectSpread2(_objectSpread2({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:XhrLoader,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:AbrController,bufferController:BufferController,capLevelController:CapLevelController,errorController:ErrorController,fpsController:FPSController,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:defaultLoadPolicy},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},timelineConfig()),{},{subtitleStreamController:SubtitleStreamController,subtitleTrackController:SubtitleTrackController,timelineController:TimelineController,audioStreamController:AudioStreamController,audioTrackController:AudioTrackController,emeController:EMEController,cmcdController:CMCDController,contentSteeringController:ContentSteeringController});function timelineConfig(){return{cueHandler:Cues,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function mergeConfig(Nr,_r){if((_r.liveSyncDurationCount||_r.liveMaxLatencyDurationCount)&&(_r.liveSyncDuration||_r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(_r.liveMaxLatencyDurationCount!==void 0&&(_r.liveSyncDurationCount===void 0||_r.liveMaxLatencyDurationCount<=_r.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(_r.liveMaxLatencyDuration!==void 0&&(_r.liveSyncDuration===void 0||_r.liveMaxLatencyDuration<=_r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const Ur=deepCpy(Nr),jr=["manifest","level","frag"],Gr=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return jr.forEach(Wr=>{const Zr=`${Wr==="level"?"playlist":Wr}LoadPolicy`,Yr=_r[Zr]===void 0,ts=[];Gr.forEach(es=>{const ns=`${Wr}Loading${es}`,Xr=_r[ns];if(Xr!==void 0&&Yr){ts.push(ns);const qr=Ur[Zr].default;switch(_r[Zr]={default:qr},es){case"TimeOut":qr.maxLoadTimeMs=Xr,qr.maxTimeToFirstByteMs=Xr;break;case"MaxRetry":qr.errorRetry.maxNumRetry=Xr,qr.timeoutRetry.maxNumRetry=Xr;break;case"RetryDelay":qr.errorRetry.retryDelayMs=Xr,qr.timeoutRetry.retryDelayMs=Xr;break;case"MaxRetryTimeout":qr.errorRetry.maxRetryDelayMs=Xr,qr.timeoutRetry.maxRetryDelayMs=Xr;break}}}),ts.length&&logger.warn(`hls.js config: "${ts.join('", "')}" setting(s) are deprecated, use "${Zr}": ${JSON.stringify(_r[Zr])}`)}),_objectSpread2(_objectSpread2({},Ur),_r)}function deepCpy(Nr){return Nr&&typeof Nr=="object"?Array.isArray(Nr)?Nr.map(deepCpy):Object.keys(Nr).reduce((_r,Ur)=>(_r[Ur]=deepCpy(Nr[Ur]),_r),{}):Nr}function enableStreamingMode(Nr){const _r=Nr.loader;_r!==FetchLoader&&_r!==XhrLoader?(logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),Nr.progressive=!1):fetchSupported()&&(Nr.loader=FetchLoader,Nr.progressive=!0,Nr.enableSoftwareAES=!0,logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}class Hls{static get version(){return"1.4.12"}static isSupported(){return isSupported()}static get Events(){return Events}static get ErrorTypes(){return ErrorTypes}static get ErrorDetails(){return ErrorDetails}static get DefaultConfig(){return Hls.defaultConfig?Hls.defaultConfig:hlsDefaultConfig}static set DefaultConfig(_r){Hls.defaultConfig=_r}constructor(_r={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,enableLogs(_r.debug||!1,"Hls instance");const Ur=this.config=mergeConfig(Hls.DefaultConfig,_r);this.userConfig=_r,this._autoLevelCapping=-1,Ur.progressive&&enableStreamingMode(Ur);const{abrController:jr,bufferController:Gr,capLevelController:Wr,errorController:Zr,fpsController:Yr}=Ur,ts=new Zr(this),es=this.abrController=new jr(this),ns=this.bufferController=new Gr(this),Xr=this.capLevelController=new Wr(this),qr=new Yr(this),_i=new PlaylistLoader(this),rs=new ID3TrackController(this),is=Ur.contentSteeringController,ss=is?new is(this):null,os=this.levelController=new LevelController(this,ss),ls=new FragmentTracker(this),cs=new KeyLoader(this.config),ds=this.streamController=new StreamController(this,ls,cs);Xr.setStreamController(ds),qr.setStreamController(ds);const fs=[_i,os,ds];ss&&fs.splice(1,0,ss),this.networkControllers=fs;const ms=[es,ns,Xr,qr,rs,ls];this.audioTrackController=this.createController(Ur.audioTrackController,fs);const ps=Ur.audioStreamController;ps&&fs.push(new ps(this,ls,cs)),this.subtitleTrackController=this.createController(Ur.subtitleTrackController,fs);const ys=Ur.subtitleStreamController;ys&&fs.push(new ys(this,ls,cs)),this.createController(Ur.timelineController,ms),cs.emeController=this.emeController=this.createController(Ur.emeController,ms),this.cmcdController=this.createController(Ur.cmcdController,ms),this.latencyController=this.createController(LatencyController,ms),this.coreComponents=ms,fs.push(ts);const ws=ts.onErrorOut;typeof ws=="function"&&this.on(Events.ERROR,ws,ts)}createController(_r,Ur){if(_r){const jr=new _r(this);return Ur&&Ur.push(jr),jr}return null}on(_r,Ur,jr=this){this._emitter.on(_r,Ur,jr)}once(_r,Ur,jr=this){this._emitter.once(_r,Ur,jr)}removeAllListeners(_r){this._emitter.removeAllListeners(_r)}off(_r,Ur,jr=this,Gr){this._emitter.off(_r,Ur,jr,Gr)}listeners(_r){return this._emitter.listeners(_r)}emit(_r,Ur,jr){return this._emitter.emit(_r,Ur,jr)}trigger(_r,Ur){if(this.config.debug)return this.emit(_r,_r,Ur);try{return this.emit(_r,_r,Ur)}catch(jr){logger.error("An internal error happened while handling event "+_r+'. Error message: "'+jr.message+'". Here is a stacktrace:',jr),this.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:_r,error:jr})}return!1}listenerCount(_r){return this._emitter.listenerCount(_r)}destroy(){logger.log("destroy"),this.trigger(Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(Ur=>Ur.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(Ur=>Ur.destroy()),this.coreComponents.length=0;const _r=this.config;_r.xhrSetup=_r.fetchSetup=void 0,this.userConfig=null}attachMedia(_r){logger.log("attachMedia"),this._media=_r,this.trigger(Events.MEDIA_ATTACHING,{media:_r})}detachMedia(){logger.log("detachMedia"),this.trigger(Events.MEDIA_DETACHING,void 0),this._media=null}loadSource(_r){this.stopLoad();const Ur=this.media,jr=this.url,Gr=this.url=urlToolkitExports.buildAbsoluteURL(self.location.href,_r,{alwaysNormalize:!0});logger.log(`loadSource:${Gr}`),Ur&&jr&&(jr!==Gr||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(Ur)),this.trigger(Events.MANIFEST_LOADING,{url:_r})}startLoad(_r=-1){logger.log(`startLoad(${_r})`),this.networkControllers.forEach(Ur=>{Ur.startLoad(_r)})}stopLoad(){logger.log("stopLoad"),this.networkControllers.forEach(_r=>{_r.stopLoad()})}swapAudioCodec(){logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){logger.log("recoverMediaError");const _r=this._media;this.detachMedia(),_r&&this.attachMedia(_r)}removeLevel(_r,Ur=0){this.levelController.removeLevel(_r,Ur)}get levels(){const _r=this.levelController.levels;return _r||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(_r){logger.log(`set currentLevel:${_r}`),this.loadLevel=_r,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(_r){logger.log(`set nextLevel:${_r}`),this.levelController.manualLevel=_r,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(_r){logger.log(`set loadLevel:${_r}`),this.levelController.manualLevel=_r}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(_r){this.levelController.nextLoadLevel=_r}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(_r){logger.log(`set firstLevel:${_r}`),this.levelController.firstLevel=_r}get startLevel(){return this.levelController.startLevel}set startLevel(_r){logger.log(`set startLevel:${_r}`),_r!==-1&&(_r=Math.max(_r,this.minAutoLevel)),this.levelController.startLevel=_r}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(_r){const Ur=!!_r;Ur!==this.config.capLevelToPlayerSize&&(Ur?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=Ur)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:_r}=this.abrController;return _r?_r.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:_r}=this.abrController;return _r?_r.getEstimateTTFB():NaN}set autoLevelCapping(_r){this._autoLevelCapping!==_r&&(logger.log(`set autoLevelCapping:${_r}`),this._autoLevelCapping=_r)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(_r){HdcpLevels.indexOf(_r)>-1&&(this._maxHdcpLevel=_r)}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:_r,config:{minAutoBitrate:Ur}}=this;if(!_r)return 0;const jr=_r.length;for(let Gr=0;Gr<jr;Gr++)if(_r[Gr].maxBitrate>=Ur)return Gr;return 0}get maxAutoLevel(){const{levels:_r,autoLevelCapping:Ur,maxHdcpLevel:jr}=this;let Gr;if(Ur===-1&&_r&&_r.length?Gr=_r.length-1:Gr=Ur,jr)for(let Wr=Gr;Wr--;){const Zr=_r[Wr].attrs["HDCP-LEVEL"];if(Zr&&Zr<=jr)return Wr}return Gr}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(_r){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,_r)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const _r=this.audioTrackController;return _r?_r.audioTracks:[]}get audioTrack(){const _r=this.audioTrackController;return _r?_r.audioTrack:-1}set audioTrack(_r){const Ur=this.audioTrackController;Ur&&(Ur.audioTrack=_r)}get subtitleTracks(){const _r=this.subtitleTrackController;return _r?_r.subtitleTracks:[]}get subtitleTrack(){const _r=this.subtitleTrackController;return _r?_r.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(_r){const Ur=this.subtitleTrackController;Ur&&(Ur.subtitleTrack=_r)}get subtitleDisplay(){const _r=this.subtitleTrackController;return _r?_r.subtitleDisplay:!1}set subtitleDisplay(_r){const Ur=this.subtitleTrackController;Ur&&(Ur.subtitleDisplay=_r)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(_r){this.config.lowLatencyMode=_r}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Hls.defaultConfig=void 0;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let Nr=0;Nr<256;++Nr)byteToHex.push((Nr+256).toString(16).slice(1));function unsafeStringify(Nr,_r=0){return byteToHex[Nr[_r+0]]+byteToHex[Nr[_r+1]]+byteToHex[Nr[_r+2]]+byteToHex[Nr[_r+3]]+"-"+byteToHex[Nr[_r+4]]+byteToHex[Nr[_r+5]]+"-"+byteToHex[Nr[_r+6]]+byteToHex[Nr[_r+7]]+"-"+byteToHex[Nr[_r+8]]+byteToHex[Nr[_r+9]]+"-"+byteToHex[Nr[_r+10]]+byteToHex[Nr[_r+11]]+byteToHex[Nr[_r+12]]+byteToHex[Nr[_r+13]]+byteToHex[Nr[_r+14]]+byteToHex[Nr[_r+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(Nr,_r,Ur){if(native.randomUUID&&!_r&&!Nr)return native.randomUUID();Nr=Nr||{};const jr=Nr.random||(Nr.rng||rng)();if(jr[6]=jr[6]&15|64,jr[8]=jr[8]&63|128,_r){Ur=Ur||0;for(let Gr=0;Gr<16;++Gr)_r[Ur+Gr]=jr[Gr];return _r}return unsafeStringify(jr)}function $db6c3485150b8e66$export$1ab7ae714698c4b8(Nr){const[_r,Ur]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(Nr){Ur({width:Nr.offsetWidth,height:Nr.offsetHeight});const jr=new ResizeObserver(Gr=>{if(!Array.isArray(Gr)||!Gr.length)return;const Wr=Gr[0];let Zr,Yr;if("borderBoxSize"in Wr){const ts=Wr.borderBoxSize,es=Array.isArray(ts)?ts[0]:ts;Zr=es.inlineSize,Yr=es.blockSize}else Zr=Nr.offsetWidth,Yr=Nr.offsetHeight;Ur({width:Zr,height:Yr})});return jr.observe(Nr,{box:"border-box"}),()=>jr.unobserve(Nr)}else Ur(void 0)},[Nr]),_r}function $010c2913dbd2fe3d$export$5cae361ad82dce8b(Nr){const _r=reactExports.useRef({value:Nr,previous:Nr});return reactExports.useMemo(()=>(_r.current.value!==Nr&&(_r.current.previous=_r.current.value,_r.current.value=Nr),_r.current.previous),[Nr])}const $ce77a8961b41be9e$var$RADIO_NAME="Radio",[$ce77a8961b41be9e$var$createRadioContext,$ce77a8961b41be9e$export$67d2296460f1b002]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($ce77a8961b41be9e$var$RADIO_NAME),[$ce77a8961b41be9e$var$RadioProvider,$ce77a8961b41be9e$var$useRadioContext]=$ce77a8961b41be9e$var$createRadioContext($ce77a8961b41be9e$var$RADIO_NAME),$ce77a8961b41be9e$export$d7b12c4107be0d61=reactExports.forwardRef((Nr,_r)=>{const{__scopeRadio:Ur,name:jr,checked:Gr=!1,required:Wr,disabled:Zr,value:Yr="on",onCheck:ts,...es}=Nr,[ns,Xr]=reactExports.useState(null),qr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,is=>Xr(is)),_i=reactExports.useRef(!1),rs=ns?!!ns.closest("form"):!0;return reactExports.createElement($ce77a8961b41be9e$var$RadioProvider,{scope:Ur,checked:Gr,disabled:Zr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"radio","aria-checked":Gr,"data-state":$ce77a8961b41be9e$var$getState(Gr),"data-disabled":Zr?"":void 0,disabled:Zr,value:Yr},es,{ref:qr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onClick,is=>{Gr||ts==null||ts(),rs&&(_i.current=is.isPropagationStopped(),_i.current||is.stopPropagation())})})),rs&&reactExports.createElement($ce77a8961b41be9e$var$BubbleInput,{control:ns,bubbles:!_i.current,name:jr,value:Yr,checked:Gr,required:Wr,disabled:Zr,style:{transform:"translateX(-100%)"}}))}),$ce77a8961b41be9e$var$BubbleInput=Nr=>{const{control:_r,checked:Ur,bubbles:jr=!0,...Gr}=Nr,Wr=reactExports.useRef(null),Zr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(Ur),Yr=$db6c3485150b8e66$export$1ab7ae714698c4b8(_r);return reactExports.useEffect(()=>{const ts=Wr.current,es=window.HTMLInputElement.prototype,Xr=Object.getOwnPropertyDescriptor(es,"checked").set;if(Zr!==Ur&&Xr){const qr=new Event("click",{bubbles:jr});Xr.call(ts,Ur),ts.dispatchEvent(qr)}},[Zr,Ur,jr]),reactExports.createElement("input",_extends$1({type:"radio","aria-hidden":!0,defaultChecked:Ur},Gr,{tabIndex:-1,ref:Wr,style:{...Nr.style,...Yr,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $ce77a8961b41be9e$var$getState(Nr){return Nr?"checked":"unchecked"}const $f99a8c78507165f7$var$ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$f99a8c78507165f7$var$RADIO_GROUP_NAME="RadioGroup",[$f99a8c78507165f7$var$createRadioGroupContext,$f99a8c78507165f7$export$c547093f11b76da2]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($f99a8c78507165f7$var$RADIO_GROUP_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4,$ce77a8961b41be9e$export$67d2296460f1b002]),$f99a8c78507165f7$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),$f99a8c78507165f7$var$useRadioScope=$ce77a8961b41be9e$export$67d2296460f1b002(),[$f99a8c78507165f7$var$RadioGroupProvider,$f99a8c78507165f7$var$useRadioGroupContext]=$f99a8c78507165f7$var$createRadioGroupContext($f99a8c78507165f7$var$RADIO_GROUP_NAME),$f99a8c78507165f7$export$a98f0dcb43a68a25=reactExports.forwardRef((Nr,_r)=>{const{__scopeRadioGroup:Ur,name:jr,defaultValue:Gr,value:Wr,required:Zr=!1,disabled:Yr=!1,orientation:ts,dir:es,loop:ns=!0,onValueChange:Xr,...qr}=Nr,_i=$f99a8c78507165f7$var$useRovingFocusGroupScope(Ur),rs=$f631663db3294ace$export$b39126d51d94e6f3(es),[is,ss]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Wr,defaultProp:Gr,onChange:Xr});return reactExports.createElement($f99a8c78507165f7$var$RadioGroupProvider,{scope:Ur,name:jr,required:Zr,disabled:Yr,value:is,onValueChange:ss},reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},_i,{orientation:ts,dir:rs,loop:ns}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"radiogroup","aria-required":Zr,"aria-orientation":ts,"data-disabled":Yr?"":void 0,dir:rs},qr,{ref:_r}))))}),$f99a8c78507165f7$var$ITEM_NAME="RadioGroupItem",$f99a8c78507165f7$export$9f866c100ef519e4=reactExports.forwardRef((Nr,_r)=>{const{__scopeRadioGroup:Ur,disabled:jr,...Gr}=Nr,Wr=$f99a8c78507165f7$var$useRadioGroupContext($f99a8c78507165f7$var$ITEM_NAME,Ur),Zr=Wr.disabled||jr,Yr=$f99a8c78507165f7$var$useRovingFocusGroupScope(Ur),ts=$f99a8c78507165f7$var$useRadioScope(Ur),es=reactExports.useRef(null),ns=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,es),Xr=Wr.value===Gr.value,qr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const _i=is=>{$f99a8c78507165f7$var$ARROW_KEYS.includes(is.key)&&(qr.current=!0)},rs=()=>qr.current=!1;return document.addEventListener("keydown",_i),document.addEventListener("keyup",rs),()=>{document.removeEventListener("keydown",_i),document.removeEventListener("keyup",rs)}},[]),reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},Yr,{focusable:!Zr,active:Xr}),reactExports.createElement($ce77a8961b41be9e$export$d7b12c4107be0d61,_extends$1({disabled:Zr,required:Wr.required,checked:Xr},ts,Gr,{name:Wr.name,ref:ns,onCheck:()=>Wr.onValueChange(Gr.value),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_i=>{_i.key==="Enter"&&_i.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr.onFocus,()=>{var _i;qr.current&&((_i=es.current)===null||_i===void 0||_i.click())})})))}),$f99a8c78507165f7$export$be92b6f5f03c0fe9=$f99a8c78507165f7$export$a98f0dcb43a68a25,$f99a8c78507165f7$export$6d08773d2e66f8f2=$f99a8c78507165f7$export$9f866c100ef519e4;function ParserError(Nr,_r){this.message=Nr,this.error=_r}ParserError.prototype=Object.create(Error.prototype);const TIMESTAMP_REGEXP=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parse$4(Nr,_r){_r||(_r={});const{meta:Ur=!1,strict:jr=!0}=_r;if(typeof Nr!="string")throw new ParserError("Input must be a string");Nr=Nr.trim(),Nr=Nr.replace(/\r\n/g,`
`),Nr=Nr.replace(/\r/g,`
`);const Gr=Nr.split(`

`),Wr=Gr.shift();if(!Wr.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');const Zr=Wr.split(`
`),Yr=Zr[0].replace("WEBVTT","");if(Yr.length>0&&Yr[0]!==" "&&Yr[0]!=="	")throw new ParserError("Header comment must start with space or tab");if(Gr.length===0&&Zr.length===1)return{valid:!0,strict:jr,cues:[],errors:[]};if(!Ur&&Zr.length>1&&Zr[1]!=="")throw new ParserError("Missing blank line after signature");const{cues:ts,errors:es}=parseCues(Gr,jr);if(jr&&es.length>0)throw es[0];const ns=Ur?parseMeta(Zr):null,Xr={valid:es.length===0,strict:jr,cues:ts,errors:es};return Ur&&(Xr.meta=ns),Xr}function parseMeta(Nr){const _r={};return Nr.slice(1).forEach(Ur=>{const jr=Ur.indexOf(":"),Gr=Ur.slice(0,jr).trim(),Wr=Ur.slice(jr+1).trim();_r[Gr]=Wr}),Object.keys(_r).length>0?_r:null}function parseCues(Nr,_r){const Ur=[];return{cues:Nr.map((Gr,Wr)=>{try{return parseCue(Gr,Wr,_r)}catch(Zr){return Ur.push(Zr),null}}).filter(Boolean),errors:Ur}}function parseCue(Nr,_r,Ur){let jr="",Gr=0,Wr=.01,Zr="",Yr="";const ts=Nr.split(`
`).filter(Boolean);if(ts.length>0&&ts[0].trim().startsWith("NOTE"))return null;if(ts.length===1&&!ts[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${_r})`);if(ts.length>1&&!(ts[0].includes("-->")||ts[1].includes("-->"))){const ns=`Cue identifier needs to be followed by timestamp (cue #${_r})`;throw new ParserError(ns)}ts.length>1&&ts[1].includes("-->")&&(jr=ts.shift());const es=typeof ts[0]=="string"&&ts[0].split(" --> ");if(es.length!==2||!validTimestamp(es[0])||!validTimestamp(es[1]))throw new ParserError(`Invalid cue timestamp (cue #${_r})`);if(Gr=parseTimestamp(es[0]),Wr=parseTimestamp(es[1]),Ur){if(Gr>Wr)throw new ParserError(`Start timestamp greater than end (cue #${_r})`);if(Wr<=Gr)throw new ParserError(`End must be greater than start (cue #${_r})`)}if(!Ur&&Wr<Gr)throw new ParserError(`End must be greater or equal to start when not strict (cue #${_r})`);return Yr=es[1].replace(TIMESTAMP_REGEXP,"").trim(),ts.shift(),Zr=ts.join(`
`),Zr?{identifier:jr,start:Gr,end:Wr,text:Zr,styles:Yr}:!1}function validTimestamp(Nr){return TIMESTAMP_REGEXP.test(Nr)}function parseTimestamp(Nr){const _r=Nr.match(TIMESTAMP_REGEXP);let Ur=parseFloat(_r[1]||0)*60*60;return Ur+=parseFloat(_r[2])*60,Ur+=parseFloat(_r[3]),Ur}var parser={ParserError,parse:parse$4};function CompilerError(Nr,_r){this.message=Nr,this.error=_r}CompilerError.prototype=Object.create(Error.prototype);function compile$1(Nr){if(!Nr)throw new CompilerError("Input must be non-null");if(typeof Nr!="object")throw new CompilerError("Input must be an object");if(Array.isArray(Nr))throw new CompilerError("Input cannot be array");if(!Nr.valid)throw new CompilerError("Input must be valid");let _r=`WEBVTT
`;if(Nr.meta){if(typeof Nr.meta!="object"||Array.isArray(Nr.meta))throw new CompilerError("Metadata must be an object");Object.entries(Nr.meta).forEach(jr=>{if(typeof jr[1]!="string")throw new CompilerError(`Metadata value for "${jr[0]}" must be string`);_r+=`${jr[0]}: ${jr[1]}
`})}let Ur=null;return Nr.cues.forEach((jr,Gr)=>{if(Ur&&Ur>jr.start)throw new CompilerError(`Cue number ${Gr} is not in chronological order`);Ur=jr.start,_r+=`
`,_r+=compileCue(jr),_r+=`
`}),_r}function compileCue(Nr){if(typeof Nr!="object")throw new CompilerError("Cue malformed: not of type object");if(typeof Nr.identifier!="string"&&typeof Nr.identifier!="number"&&Nr.identifier!==null)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(Nr)}`);if(isNaN(Nr.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(Nr)}`);if(isNaN(Nr.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(Nr)}`);if(Nr.start>=Nr.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(Nr)}`);if(typeof Nr.text!="string")throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(Nr)}`);if(typeof Nr.styles!="string")throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(Nr)}`);let _r="";Nr.identifier.length>0&&(_r+=`${Nr.identifier}
`);const Ur=convertTimestamp(Nr.start),jr=convertTimestamp(Nr.end);return _r+=`${Ur} --> ${jr}`,_r+=Nr.styles?` ${Nr.styles}`:"",_r+=`
${Nr.text}`,_r}function convertTimestamp(Nr){const _r=pad$1(calculateHours(Nr),2),Ur=pad$1(calculateMinutes(Nr),2),jr=pad$1(calculateSeconds(Nr),2),Gr=pad$1(calculateMs(Nr),3);return`${_r}:${Ur}:${jr}.${Gr}`}function pad$1(Nr,_r){let Ur=`${Nr}`;for(;Ur.length<_r;)Ur=`0${Ur}`;return Ur}function calculateHours(Nr){return Math.floor(Nr/60/60)}function calculateMinutes(Nr){return Math.floor(Nr/60)%60}function calculateSeconds(Nr){return Math.floor(Nr%60)}function calculateMs(Nr){return Math.floor((Nr%1).toFixed(4)*1e3)}var compiler={CompilerError,compile:compile$1};const parse$3=parser.parse;function segment$2(Nr,_r){_r=_r||10;const Ur=parse$3(Nr),jr=[];let Gr=[],Wr=null,Zr=0,Yr=0;return Ur.cues.forEach((ts,es)=>{const ns=es===0,Xr=es===Ur.cues.length-1,qr=ts.start,_i=ts.end,rs=Xr?1/0:Ur.cues[es+1].start,is=ns?_i:_i-qr,ss=ns?0:qr-Ur.cues[es-1].end;Zr=Zr+is+ss,`${es}`,jr.length+1,Wr&&(Gr.push(Wr),Zr+=Wr.end-Yr,Wr=null),Gr.push(ts);let os=rs-_i<_r&&ss<_r&&Zr>_r;if(shouldSegment(Yr,_r,rs,ss)){const ls=segmentDuration(Xr,_i,_r,Zr,Yr);jr.push({duration:ls,cues:Gr}),Yr+=ls,Zr=0,Gr=[]}else os=!1;os&&(Wr=ts)}),jr}function shouldSegment(Nr,_r,Ur,jr){const Gr=alignToSegmentLength(jr,_r);return(jr<=_r||Gr+Nr<Ur)&&Ur-Nr>=_r}function segmentDuration(Nr,_r,Ur,jr,Gr){let Wr=Ur;return jr>Ur&&(Wr=alignToSegmentLength(jr-Ur,Ur)),Nr?Wr=parseFloat((_r-Gr).toFixed(2)):Wr=Math.round(Wr),Wr}function alignToSegmentLength(Nr,_r){return Nr+=_r-Nr%_r,Nr}function debug(Nr){}var segmenter={segment:segment$2};const segment$1=segmenter.segment;function hlsSegment(Nr,_r,Ur){typeof Ur>"u"&&(Ur="900000");const jr=segment$1(Nr,_r),Gr=[];return jr.forEach((Wr,Zr)=>{const Yr=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${Ur},LOCAL:00:00:00.000

${printableCues(Wr.cues)}
`,ts=generateSegmentFilename(Zr);Gr.push({filename:ts,content:Yr})}),Gr}function hlsSegmentPlaylist(Nr,_r){const Ur=segment$1(Nr,_r),jr=printableSegments(Ur);return`#EXTM3U
#EXT-X-TARGETDURATION:${Math.round(findLongestSegment(Ur))}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${jr}
#EXT-X-ENDLIST
`}function pad(Nr,_r){return`${"0".repeat(Math.max(0,_r-Nr.toString().length))}${Nr}`}function generateSegmentFilename(Nr){return`${Nr}.vtt`}function printableSegments(Nr){const _r=[];return Nr.forEach((Ur,jr)=>{_r.push(`#EXTINF:${Ur.duration.toFixed(5)},
${generateSegmentFilename(jr)}`)}),_r.join(`
`)}function findLongestSegment(Nr){let _r=0;return Nr.forEach(Ur=>{Ur.duration>_r&&(_r=Ur.duration)}),_r}function printableCues(Nr){const _r=[];return Nr.forEach(Ur=>{_r.push(printableCue(Ur))}),_r.join(`

`)}function printableCue(Nr){const _r=[];Nr.identifier&&_r.push(Nr.identifier);const Ur=printableTimestamp(Nr.start),jr=printableTimestamp(Nr.end),Gr=Nr.styles?`${Nr.styles}`:"";return _r.push(`${Ur} --> ${jr} ${Gr}`),_r.push(Nr.text),_r.join(`
`)}function printableTimestamp(Nr){const _r=(Nr%1).toFixed(3);Nr=Math.round(Nr-_r);const Ur=Math.floor(Nr/3600),jr=Math.floor((Nr-Ur*3600)/60),Gr=Nr-Ur*3600-jr*60;return`${`${pad(Ur,2)}:`}${pad(jr,2)}:${pad(Gr,2)}.${pad(_r*1e3,3)}`}var hls$1={hlsSegment,hlsSegmentPlaylist};const parse$2=parser.parse,compile=compiler.compile,segment=segmenter.segment,hls=hls$1;var nodeWebvtt={parse:parse$2,compile,segment,hls};function $addc16e1bbe58fd0$export$3a72a57244d6e765(Nr,_r=globalThis==null?void 0:globalThis.document){const Ur=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Nr);reactExports.useEffect(()=>{const jr=Gr=>{Gr.key==="Escape"&&Ur(Gr)};return _r.addEventListener("keydown",jr),()=>_r.removeEventListener("keydown",jr)},[Ur,_r])}const $5cb92bef7577960e$var$CONTEXT_UPDATE$1="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE$1="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE$1="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents$1;const $5cb92bef7577960e$var$DismissableLayerContext$1=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22$1=reactExports.forwardRef((Nr,_r)=>{var Ur;const{disableOutsidePointerEvents:jr=!1,onEscapeKeyDown:Gr,onPointerDownOutside:Wr,onFocusOutside:Zr,onInteractOutside:Yr,onDismiss:ts,...es}=Nr,ns=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext$1),[Xr,qr]=reactExports.useState(null),_i=(Ur=Xr==null?void 0:Xr.ownerDocument)!==null&&Ur!==void 0?Ur:globalThis==null?void 0:globalThis.document,[,rs]=reactExports.useState({}),is=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,ys=>qr(ys)),ss=Array.from(ns.layers),[os]=[...ns.layersWithOutsidePointerEventsDisabled].slice(-1),ls=ss.indexOf(os),cs=Xr?ss.indexOf(Xr):-1,ds=ns.layersWithOutsidePointerEventsDisabled.size>0,fs=cs>=ls,ms=$5cb92bef7577960e$var$usePointerDownOutside$1(ys=>{const ws=ys.target,xs=[...ns.branches].some(Es=>Es.contains(ws));!fs||xs||(Wr==null||Wr(ys),Yr==null||Yr(ys),ys.defaultPrevented||ts==null||ts())},_i),ps=$5cb92bef7577960e$var$useFocusOutside$1(ys=>{const ws=ys.target;[...ns.branches].some(Es=>Es.contains(ws))||(Zr==null||Zr(ys),Yr==null||Yr(ys),ys.defaultPrevented||ts==null||ts())},_i);return $addc16e1bbe58fd0$export$3a72a57244d6e765(ys=>{cs===ns.layers.size-1&&(Gr==null||Gr(ys),!ys.defaultPrevented&&ts&&(ys.preventDefault(),ts()))},_i),reactExports.useEffect(()=>{if(Xr)return jr&&(ns.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents$1=_i.body.style.pointerEvents,_i.body.style.pointerEvents="none"),ns.layersWithOutsidePointerEventsDisabled.add(Xr)),ns.layers.add(Xr),$5cb92bef7577960e$var$dispatchUpdate$1(),()=>{jr&&ns.layersWithOutsidePointerEventsDisabled.size===1&&(_i.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents$1)}},[Xr,_i,jr,ns]),reactExports.useEffect(()=>()=>{Xr&&(ns.layers.delete(Xr),ns.layersWithOutsidePointerEventsDisabled.delete(Xr),$5cb92bef7577960e$var$dispatchUpdate$1())},[Xr,ns]),reactExports.useEffect(()=>{const ys=()=>rs({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE$1,ys),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE$1,ys)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},es,{ref:is,style:{pointerEvents:ds?fs?"auto":"none":void 0,...Nr.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onFocusCapture,ps.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onBlurCapture,ps.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onPointerDownCapture,ms.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside$1(Nr,_r=globalThis==null?void 0:globalThis.document){const Ur=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Nr),jr=reactExports.useRef(!1),Gr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Wr=Yr=>{if(Yr.target&&!jr.current){let ns=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent$1($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE$1,Ur,es,{discrete:!0})};var ts=ns;const es={originalEvent:Yr};Yr.pointerType==="touch"?(_r.removeEventListener("click",Gr.current),Gr.current=ns,_r.addEventListener("click",Gr.current,{once:!0})):ns()}else _r.removeEventListener("click",Gr.current);jr.current=!1},Zr=window.setTimeout(()=>{_r.addEventListener("pointerdown",Wr)},0);return()=>{window.clearTimeout(Zr),_r.removeEventListener("pointerdown",Wr),_r.removeEventListener("click",Gr.current)}},[_r,Ur]),{onPointerDownCapture:()=>jr.current=!0}}function $5cb92bef7577960e$var$useFocusOutside$1(Nr,_r=globalThis==null?void 0:globalThis.document){const Ur=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Nr),jr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Gr=Wr=>{Wr.target&&!jr.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent$1($5cb92bef7577960e$var$FOCUS_OUTSIDE$1,Ur,{originalEvent:Wr},{discrete:!1})};return _r.addEventListener("focusin",Gr),()=>_r.removeEventListener("focusin",Gr)},[_r,Ur]),{onFocusCapture:()=>jr.current=!0,onBlurCapture:()=>jr.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate$1(){const Nr=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE$1);document.dispatchEvent(Nr)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent$1(Nr,_r,Ur,{discrete:jr}){const Gr=Ur.originalEvent.target,Wr=new CustomEvent(Nr,{bubbles:!1,cancelable:!0,detail:Ur});_r&&Gr.addEventListener(Nr,_r,{once:!0}),jr?$8927f6f2acc4f386$export$6d1a0317bde7de7f(Gr,Wr):Gr.dispatchEvent(Wr)}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var Nr,_r;const Ur=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(Nr=Ur[0])!==null&&Nr!==void 0?Nr:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(_r=Ur[1])!==null&&_r!==void 0?_r:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(jr=>jr.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const Nr=document.createElement("span");return Nr.setAttribute("data-radix-focus-guard",""),Nr.tabIndex=0,Nr.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",Nr}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT$1="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT$1="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6$1=reactExports.forwardRef((Nr,_r)=>{const{loop:Ur=!1,trapped:jr=!1,onMountAutoFocus:Gr,onUnmountAutoFocus:Wr,...Zr}=Nr,[Yr,ts]=reactExports.useState(null),es=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Gr),ns=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Wr),Xr=reactExports.useRef(null),qr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,is=>ts(is)),_i=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(jr){let ls=function(ms){if(_i.paused||!Yr)return;const ps=ms.target;Yr.contains(ps)?Xr.current=ps:$d3863c46a17e8a28$var$focus$1(Xr.current,{select:!0})},cs=function(ms){if(_i.paused||!Yr)return;const ps=ms.relatedTarget;ps!==null&&(Yr.contains(ps)||$d3863c46a17e8a28$var$focus$1(Xr.current,{select:!0}))},ds=function(ms){if(document.activeElement===document.body)for(const ys of ms)ys.removedNodes.length>0&&$d3863c46a17e8a28$var$focus$1(Yr)};var is=ls,ss=cs,os=ds;document.addEventListener("focusin",ls),document.addEventListener("focusout",cs);const fs=new MutationObserver(ds);return Yr&&fs.observe(Yr,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ls),document.removeEventListener("focusout",cs),fs.disconnect()}}},[jr,Yr,_i.paused]),reactExports.useEffect(()=>{if(Yr){$d3863c46a17e8a28$var$focusScopesStack$1.add(_i);const is=document.activeElement;if(!Yr.contains(is)){const os=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT$1,$d3863c46a17e8a28$var$EVENT_OPTIONS$1);Yr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT$1,es),Yr.dispatchEvent(os),os.defaultPrevented||($d3863c46a17e8a28$var$focusFirst$1($d3863c46a17e8a28$var$removeLinks$1($d3863c46a17e8a28$var$getTabbableCandidates$1(Yr)),{select:!0}),document.activeElement===is&&$d3863c46a17e8a28$var$focus$1(Yr))}return()=>{Yr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT$1,es),setTimeout(()=>{const os=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT$1,$d3863c46a17e8a28$var$EVENT_OPTIONS$1);Yr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT$1,ns),Yr.dispatchEvent(os),os.defaultPrevented||$d3863c46a17e8a28$var$focus$1(is??document.body,{select:!0}),Yr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT$1,ns),$d3863c46a17e8a28$var$focusScopesStack$1.remove(_i)},0)}}},[Yr,es,ns,_i]);const rs=reactExports.useCallback(is=>{if(!Ur&&!jr||_i.paused)return;const ss=is.key==="Tab"&&!is.altKey&&!is.ctrlKey&&!is.metaKey,os=document.activeElement;if(ss&&os){const ls=is.currentTarget,[cs,ds]=$d3863c46a17e8a28$var$getTabbableEdges$1(ls);cs&&ds?!is.shiftKey&&os===ds?(is.preventDefault(),Ur&&$d3863c46a17e8a28$var$focus$1(cs,{select:!0})):is.shiftKey&&os===cs&&(is.preventDefault(),Ur&&$d3863c46a17e8a28$var$focus$1(ds,{select:!0})):os===ls&&is.preventDefault()}},[Ur,jr,_i.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:-1},Zr,{ref:qr,onKeyDown:rs}))});function $d3863c46a17e8a28$var$focusFirst$1(Nr,{select:_r=!1}={}){const Ur=document.activeElement;for(const jr of Nr)if($d3863c46a17e8a28$var$focus$1(jr,{select:_r}),document.activeElement!==Ur)return}function $d3863c46a17e8a28$var$getTabbableEdges$1(Nr){const _r=$d3863c46a17e8a28$var$getTabbableCandidates$1(Nr),Ur=$d3863c46a17e8a28$var$findVisible$1(_r,Nr),jr=$d3863c46a17e8a28$var$findVisible$1(_r.reverse(),Nr);return[Ur,jr]}function $d3863c46a17e8a28$var$getTabbableCandidates$1(Nr){const _r=[],Ur=document.createTreeWalker(Nr,NodeFilter.SHOW_ELEMENT,{acceptNode:jr=>{const Gr=jr.tagName==="INPUT"&&jr.type==="hidden";return jr.disabled||jr.hidden||Gr?NodeFilter.FILTER_SKIP:jr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;Ur.nextNode();)_r.push(Ur.currentNode);return _r}function $d3863c46a17e8a28$var$findVisible$1(Nr,_r){for(const Ur of Nr)if(!$d3863c46a17e8a28$var$isHidden$1(Ur,{upTo:_r}))return Ur}function $d3863c46a17e8a28$var$isHidden$1(Nr,{upTo:_r}){if(getComputedStyle(Nr).visibility==="hidden")return!0;for(;Nr;){if(_r!==void 0&&Nr===_r)return!1;if(getComputedStyle(Nr).display==="none")return!0;Nr=Nr.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput$1(Nr){return Nr instanceof HTMLInputElement&&"select"in Nr}function $d3863c46a17e8a28$var$focus$1(Nr,{select:_r=!1}={}){if(Nr&&Nr.focus){const Ur=document.activeElement;Nr.focus({preventScroll:!0}),Nr!==Ur&&$d3863c46a17e8a28$var$isSelectableInput$1(Nr)&&_r&&Nr.select()}}const $d3863c46a17e8a28$var$focusScopesStack$1=$d3863c46a17e8a28$var$createFocusScopesStack$1();function $d3863c46a17e8a28$var$createFocusScopesStack$1(){let Nr=[];return{add(_r){const Ur=Nr[0];_r!==Ur&&(Ur==null||Ur.pause()),Nr=$d3863c46a17e8a28$var$arrayRemove$1(Nr,_r),Nr.unshift(_r)},remove(_r){var Ur;Nr=$d3863c46a17e8a28$var$arrayRemove$1(Nr,_r),(Ur=Nr[0])===null||Ur===void 0||Ur.resume()}}}function $d3863c46a17e8a28$var$arrayRemove$1(Nr,_r){const Ur=[...Nr],jr=Ur.indexOf(_r);return jr!==-1&&Ur.splice(jr,1),Ur}function $d3863c46a17e8a28$var$removeLinks$1(Nr){return Nr.filter(_r=>_r.tagName!=="A")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=Nr=>({x:Nr,y:Nr}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(Nr,_r,Ur){return max(Nr,min(_r,Ur))}function evaluate(Nr,_r){return typeof Nr=="function"?Nr(_r):Nr}function getSide(Nr){return Nr.split("-")[0]}function getAlignment(Nr){return Nr.split("-")[1]}function getOppositeAxis(Nr){return Nr==="x"?"y":"x"}function getAxisLength(Nr){return Nr==="y"?"height":"width"}function getSideAxis(Nr){return["top","bottom"].includes(getSide(Nr))?"y":"x"}function getAlignmentAxis(Nr){return getOppositeAxis(getSideAxis(Nr))}function getAlignmentSides(Nr,_r,Ur){Ur===void 0&&(Ur=!1);const jr=getAlignment(Nr),Gr=getAlignmentAxis(Nr),Wr=getAxisLength(Gr);let Zr=Gr==="x"?jr===(Ur?"end":"start")?"right":"left":jr==="start"?"bottom":"top";return _r.reference[Wr]>_r.floating[Wr]&&(Zr=getOppositePlacement(Zr)),[Zr,getOppositePlacement(Zr)]}function getExpandedPlacements(Nr){const _r=getOppositePlacement(Nr);return[getOppositeAlignmentPlacement(Nr),_r,getOppositeAlignmentPlacement(_r)]}function getOppositeAlignmentPlacement(Nr){return Nr.replace(/start|end/g,_r=>oppositeAlignmentMap[_r])}function getSideList(Nr,_r,Ur){const jr=["left","right"],Gr=["right","left"],Wr=["top","bottom"],Zr=["bottom","top"];switch(Nr){case"top":case"bottom":return Ur?_r?Gr:jr:_r?jr:Gr;case"left":case"right":return _r?Wr:Zr;default:return[]}}function getOppositeAxisPlacements(Nr,_r,Ur,jr){const Gr=getAlignment(Nr);let Wr=getSideList(getSide(Nr),Ur==="start",jr);return Gr&&(Wr=Wr.map(Zr=>Zr+"-"+Gr),_r&&(Wr=Wr.concat(Wr.map(getOppositeAlignmentPlacement)))),Wr}function getOppositePlacement(Nr){return Nr.replace(/left|right|bottom|top/g,_r=>oppositeSideMap[_r])}function expandPaddingObject(Nr){return{top:0,right:0,bottom:0,left:0,...Nr}}function getPaddingObject(Nr){return typeof Nr!="number"?expandPaddingObject(Nr):{top:Nr,right:Nr,bottom:Nr,left:Nr}}function rectToClientRect(Nr){return{...Nr,top:Nr.y,left:Nr.x,right:Nr.x+Nr.width,bottom:Nr.y+Nr.height}}function computeCoordsFromPlacement(Nr,_r,Ur){let{reference:jr,floating:Gr}=Nr;const Wr=getSideAxis(_r),Zr=getAlignmentAxis(_r),Yr=getAxisLength(Zr),ts=getSide(_r),es=Wr==="y",ns=jr.x+jr.width/2-Gr.width/2,Xr=jr.y+jr.height/2-Gr.height/2,qr=jr[Yr]/2-Gr[Yr]/2;let _i;switch(ts){case"top":_i={x:ns,y:jr.y-Gr.height};break;case"bottom":_i={x:ns,y:jr.y+jr.height};break;case"right":_i={x:jr.x+jr.width,y:Xr};break;case"left":_i={x:jr.x-Gr.width,y:Xr};break;default:_i={x:jr.x,y:jr.y}}switch(getAlignment(_r)){case"start":_i[Zr]-=qr*(Ur&&es?-1:1);break;case"end":_i[Zr]+=qr*(Ur&&es?-1:1);break}return _i}const computePosition$1=async(Nr,_r,Ur)=>{const{placement:jr="bottom",strategy:Gr="absolute",middleware:Wr=[],platform:Zr}=Ur,Yr=Wr.filter(Boolean),ts=await(Zr.isRTL==null?void 0:Zr.isRTL(_r));let es=await Zr.getElementRects({reference:Nr,floating:_r,strategy:Gr}),{x:ns,y:Xr}=computeCoordsFromPlacement(es,jr,ts),qr=jr,_i={},rs=0;for(let is=0;is<Yr.length;is++){const{name:ss,fn:os}=Yr[is],{x:ls,y:cs,data:ds,reset:fs}=await os({x:ns,y:Xr,initialPlacement:jr,placement:qr,strategy:Gr,middlewareData:_i,rects:es,platform:Zr,elements:{reference:Nr,floating:_r}});if(ns=ls??ns,Xr=cs??Xr,_i={..._i,[ss]:{..._i[ss],...ds}},fs&&rs<=50){rs++,typeof fs=="object"&&(fs.placement&&(qr=fs.placement),fs.rects&&(es=fs.rects===!0?await Zr.getElementRects({reference:Nr,floating:_r,strategy:Gr}):fs.rects),{x:ns,y:Xr}=computeCoordsFromPlacement(es,qr,ts)),is=-1;continue}}return{x:ns,y:Xr,placement:qr,strategy:Gr,middlewareData:_i}};async function detectOverflow(Nr,_r){var Ur;_r===void 0&&(_r={});const{x:jr,y:Gr,platform:Wr,rects:Zr,elements:Yr,strategy:ts}=Nr,{boundary:es="clippingAncestors",rootBoundary:ns="viewport",elementContext:Xr="floating",altBoundary:qr=!1,padding:_i=0}=evaluate(_r,Nr),rs=getPaddingObject(_i),ss=Yr[qr?Xr==="floating"?"reference":"floating":Xr],os=rectToClientRect(await Wr.getClippingRect({element:(Ur=await(Wr.isElement==null?void 0:Wr.isElement(ss)))==null||Ur?ss:ss.contextElement||await(Wr.getDocumentElement==null?void 0:Wr.getDocumentElement(Yr.floating)),boundary:es,rootBoundary:ns,strategy:ts})),ls=Xr==="floating"?{...Zr.floating,x:jr,y:Gr}:Zr.reference,cs=await(Wr.getOffsetParent==null?void 0:Wr.getOffsetParent(Yr.floating)),ds=await(Wr.isElement==null?void 0:Wr.isElement(cs))?await(Wr.getScale==null?void 0:Wr.getScale(cs))||{x:1,y:1}:{x:1,y:1},fs=rectToClientRect(Wr.convertOffsetParentRelativeRectToViewportRelativeRect?await Wr.convertOffsetParentRelativeRectToViewportRelativeRect({rect:ls,offsetParent:cs,strategy:ts}):ls);return{top:(os.top-fs.top+rs.top)/ds.y,bottom:(fs.bottom-os.bottom+rs.bottom)/ds.y,left:(os.left-fs.left+rs.left)/ds.x,right:(fs.right-os.right+rs.right)/ds.x}}const arrow$1=Nr=>({name:"arrow",options:Nr,async fn(_r){const{x:Ur,y:jr,placement:Gr,rects:Wr,platform:Zr,elements:Yr,middlewareData:ts}=_r,{element:es,padding:ns=0}=evaluate(Nr,_r)||{};if(es==null)return{};const Xr=getPaddingObject(ns),qr={x:Ur,y:jr},_i=getAlignmentAxis(Gr),rs=getAxisLength(_i),is=await Zr.getDimensions(es),ss=_i==="y",os=ss?"top":"left",ls=ss?"bottom":"right",cs=ss?"clientHeight":"clientWidth",ds=Wr.reference[rs]+Wr.reference[_i]-qr[_i]-Wr.floating[rs],fs=qr[_i]-Wr.reference[_i],ms=await(Zr.getOffsetParent==null?void 0:Zr.getOffsetParent(es));let ps=ms?ms[cs]:0;(!ps||!await(Zr.isElement==null?void 0:Zr.isElement(ms)))&&(ps=Yr.floating[cs]||Wr.floating[rs]);const ys=ds/2-fs/2,ws=ps/2-is[rs]/2-1,xs=min(Xr[os],ws),Es=min(Xr[ls],ws),Rs=xs,_s=ps-is[rs]-Es,Bs=ps/2-is[rs]/2+ys,vs=clamp(Rs,Bs,_s),Cs=!ts.arrow&&getAlignment(Gr)!=null&&Bs!=vs&&Wr.reference[rs]/2-(Bs<Rs?xs:Es)-is[rs]/2<0,Ss=Cs?Bs<Rs?Bs-Rs:Bs-_s:0;return{[_i]:qr[_i]+Ss,data:{[_i]:vs,centerOffset:Bs-vs-Ss,...Cs&&{alignmentOffset:Ss}},reset:Cs}}}),flip=function(Nr){return Nr===void 0&&(Nr={}),{name:"flip",options:Nr,async fn(_r){var Ur,jr;const{placement:Gr,middlewareData:Wr,rects:Zr,initialPlacement:Yr,platform:ts,elements:es}=_r,{mainAxis:ns=!0,crossAxis:Xr=!0,fallbackPlacements:qr,fallbackStrategy:_i="bestFit",fallbackAxisSideDirection:rs="none",flipAlignment:is=!0,...ss}=evaluate(Nr,_r);if((Ur=Wr.arrow)!=null&&Ur.alignmentOffset)return{};const os=getSide(Gr),ls=getSide(Yr)===Yr,cs=await(ts.isRTL==null?void 0:ts.isRTL(es.floating)),ds=qr||(ls||!is?[getOppositePlacement(Yr)]:getExpandedPlacements(Yr));!qr&&rs!=="none"&&ds.push(...getOppositeAxisPlacements(Yr,is,rs,cs));const fs=[Yr,...ds],ms=await detectOverflow(_r,ss),ps=[];let ys=((jr=Wr.flip)==null?void 0:jr.overflows)||[];if(ns&&ps.push(ms[os]),Xr){const Rs=getAlignmentSides(Gr,Zr,cs);ps.push(ms[Rs[0]],ms[Rs[1]])}if(ys=[...ys,{placement:Gr,overflows:ps}],!ps.every(Rs=>Rs<=0)){var ws,xs;const Rs=(((ws=Wr.flip)==null?void 0:ws.index)||0)+1,_s=fs[Rs];if(_s)return{data:{index:Rs,overflows:ys},reset:{placement:_s}};let Bs=(xs=ys.filter(vs=>vs.overflows[0]<=0).sort((vs,Cs)=>vs.overflows[1]-Cs.overflows[1])[0])==null?void 0:xs.placement;if(!Bs)switch(_i){case"bestFit":{var Es;const vs=(Es=ys.map(Cs=>[Cs.placement,Cs.overflows.filter(Ss=>Ss>0).reduce((Ss,As)=>Ss+As,0)]).sort((Cs,Ss)=>Cs[1]-Ss[1])[0])==null?void 0:Es[0];vs&&(Bs=vs);break}case"initialPlacement":Bs=Yr;break}if(Gr!==Bs)return{reset:{placement:Bs}}}return{}}}};function getSideOffsets(Nr,_r){return{top:Nr.top-_r.height,right:Nr.right-_r.width,bottom:Nr.bottom-_r.height,left:Nr.left-_r.width}}function isAnySideFullyClipped(Nr){return sides.some(_r=>Nr[_r]>=0)}const hide=function(Nr){return Nr===void 0&&(Nr={}),{name:"hide",options:Nr,async fn(_r){const{rects:Ur}=_r,{strategy:jr="referenceHidden",...Gr}=evaluate(Nr,_r);switch(jr){case"referenceHidden":{const Wr=await detectOverflow(_r,{...Gr,elementContext:"reference"}),Zr=getSideOffsets(Wr,Ur.reference);return{data:{referenceHiddenOffsets:Zr,referenceHidden:isAnySideFullyClipped(Zr)}}}case"escaped":{const Wr=await detectOverflow(_r,{...Gr,altBoundary:!0}),Zr=getSideOffsets(Wr,Ur.floating);return{data:{escapedOffsets:Zr,escaped:isAnySideFullyClipped(Zr)}}}default:return{}}}}};async function convertValueToCoords(Nr,_r){const{placement:Ur,platform:jr,elements:Gr}=Nr,Wr=await(jr.isRTL==null?void 0:jr.isRTL(Gr.floating)),Zr=getSide(Ur),Yr=getAlignment(Ur),ts=getSideAxis(Ur)==="y",es=["left","top"].includes(Zr)?-1:1,ns=Wr&&ts?-1:1,Xr=evaluate(_r,Nr);let{mainAxis:qr,crossAxis:_i,alignmentAxis:rs}=typeof Xr=="number"?{mainAxis:Xr,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Xr};return Yr&&typeof rs=="number"&&(_i=Yr==="end"?rs*-1:rs),ts?{x:_i*ns,y:qr*es}:{x:qr*es,y:_i*ns}}const offset=function(Nr){return Nr===void 0&&(Nr=0),{name:"offset",options:Nr,async fn(_r){const{x:Ur,y:jr}=_r,Gr=await convertValueToCoords(_r,Nr);return{x:Ur+Gr.x,y:jr+Gr.y,data:Gr}}}},shift=function(Nr){return Nr===void 0&&(Nr={}),{name:"shift",options:Nr,async fn(_r){const{x:Ur,y:jr,placement:Gr}=_r,{mainAxis:Wr=!0,crossAxis:Zr=!1,limiter:Yr={fn:ss=>{let{x:os,y:ls}=ss;return{x:os,y:ls}}},...ts}=evaluate(Nr,_r),es={x:Ur,y:jr},ns=await detectOverflow(_r,ts),Xr=getSideAxis(getSide(Gr)),qr=getOppositeAxis(Xr);let _i=es[qr],rs=es[Xr];if(Wr){const ss=qr==="y"?"top":"left",os=qr==="y"?"bottom":"right",ls=_i+ns[ss],cs=_i-ns[os];_i=clamp(ls,_i,cs)}if(Zr){const ss=Xr==="y"?"top":"left",os=Xr==="y"?"bottom":"right",ls=rs+ns[ss],cs=rs-ns[os];rs=clamp(ls,rs,cs)}const is=Yr.fn({..._r,[qr]:_i,[Xr]:rs});return{...is,data:{x:is.x-Ur,y:is.y-jr}}}}},limitShift=function(Nr){return Nr===void 0&&(Nr={}),{options:Nr,fn(_r){const{x:Ur,y:jr,placement:Gr,rects:Wr,middlewareData:Zr}=_r,{offset:Yr=0,mainAxis:ts=!0,crossAxis:es=!0}=evaluate(Nr,_r),ns={x:Ur,y:jr},Xr=getSideAxis(Gr),qr=getOppositeAxis(Xr);let _i=ns[qr],rs=ns[Xr];const is=evaluate(Yr,_r),ss=typeof is=="number"?{mainAxis:is,crossAxis:0}:{mainAxis:0,crossAxis:0,...is};if(ts){const cs=qr==="y"?"height":"width",ds=Wr.reference[qr]-Wr.floating[cs]+ss.mainAxis,fs=Wr.reference[qr]+Wr.reference[cs]-ss.mainAxis;_i<ds?_i=ds:_i>fs&&(_i=fs)}if(es){var os,ls;const cs=qr==="y"?"width":"height",ds=["top","left"].includes(getSide(Gr)),fs=Wr.reference[Xr]-Wr.floating[cs]+(ds&&((os=Zr.offset)==null?void 0:os[Xr])||0)+(ds?0:ss.crossAxis),ms=Wr.reference[Xr]+Wr.reference[cs]+(ds?0:((ls=Zr.offset)==null?void 0:ls[Xr])||0)-(ds?ss.crossAxis:0);rs<fs?rs=fs:rs>ms&&(rs=ms)}return{[qr]:_i,[Xr]:rs}}}},size=function(Nr){return Nr===void 0&&(Nr={}),{name:"size",options:Nr,async fn(_r){const{placement:Ur,rects:jr,platform:Gr,elements:Wr}=_r,{apply:Zr=()=>{},...Yr}=evaluate(Nr,_r),ts=await detectOverflow(_r,Yr),es=getSide(Ur),ns=getAlignment(Ur),Xr=getSideAxis(Ur)==="y",{width:qr,height:_i}=jr.floating;let rs,is;es==="top"||es==="bottom"?(rs=es,is=ns===(await(Gr.isRTL==null?void 0:Gr.isRTL(Wr.floating))?"start":"end")?"left":"right"):(is=es,rs=ns==="end"?"top":"bottom");const ss=_i-ts[rs],os=qr-ts[is],ls=!_r.middlewareData.shift;let cs=ss,ds=os;if(Xr){const ms=qr-ts.left-ts.right;ds=ns||ls?min(os,ms):ms}else{const ms=_i-ts.top-ts.bottom;cs=ns||ls?min(ss,ms):ms}if(ls&&!ns){const ms=max(ts.left,0),ps=max(ts.right,0),ys=max(ts.top,0),ws=max(ts.bottom,0);Xr?ds=qr-2*(ms!==0||ps!==0?ms+ps:max(ts.left,ts.right)):cs=_i-2*(ys!==0||ws!==0?ys+ws:max(ts.top,ts.bottom))}await Zr({..._r,availableWidth:ds,availableHeight:cs});const fs=await Gr.getDimensions(Wr.floating);return qr!==fs.width||_i!==fs.height?{reset:{rects:!0}}:{}}}};function getNodeName(Nr){return isNode(Nr)?(Nr.nodeName||"").toLowerCase():"#document"}function getWindow(Nr){var _r;return(Nr==null||(_r=Nr.ownerDocument)==null?void 0:_r.defaultView)||window}function getDocumentElement(Nr){var _r;return(_r=(isNode(Nr)?Nr.ownerDocument:Nr.document)||window.document)==null?void 0:_r.documentElement}function isNode(Nr){return Nr instanceof Node||Nr instanceof getWindow(Nr).Node}function isElement(Nr){return Nr instanceof Element||Nr instanceof getWindow(Nr).Element}function isHTMLElement(Nr){return Nr instanceof HTMLElement||Nr instanceof getWindow(Nr).HTMLElement}function isShadowRoot(Nr){return typeof ShadowRoot>"u"?!1:Nr instanceof ShadowRoot||Nr instanceof getWindow(Nr).ShadowRoot}function isOverflowElement(Nr){const{overflow:_r,overflowX:Ur,overflowY:jr,display:Gr}=getComputedStyle$1(Nr);return/auto|scroll|overlay|hidden|clip/.test(_r+jr+Ur)&&!["inline","contents"].includes(Gr)}function isTableElement(Nr){return["table","td","th"].includes(getNodeName(Nr))}function isContainingBlock(Nr){const _r=isWebKit(),Ur=getComputedStyle$1(Nr);return Ur.transform!=="none"||Ur.perspective!=="none"||(Ur.containerType?Ur.containerType!=="normal":!1)||!_r&&(Ur.backdropFilter?Ur.backdropFilter!=="none":!1)||!_r&&(Ur.filter?Ur.filter!=="none":!1)||["transform","perspective","filter"].some(jr=>(Ur.willChange||"").includes(jr))||["paint","layout","strict","content"].some(jr=>(Ur.contain||"").includes(jr))}function getContainingBlock(Nr){let _r=getParentNode(Nr);for(;isHTMLElement(_r)&&!isLastTraversableNode(_r);){if(isContainingBlock(_r))return _r;_r=getParentNode(_r)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(Nr){return["html","body","#document"].includes(getNodeName(Nr))}function getComputedStyle$1(Nr){return getWindow(Nr).getComputedStyle(Nr)}function getNodeScroll(Nr){return isElement(Nr)?{scrollLeft:Nr.scrollLeft,scrollTop:Nr.scrollTop}:{scrollLeft:Nr.pageXOffset,scrollTop:Nr.pageYOffset}}function getParentNode(Nr){if(getNodeName(Nr)==="html")return Nr;const _r=Nr.assignedSlot||Nr.parentNode||isShadowRoot(Nr)&&Nr.host||getDocumentElement(Nr);return isShadowRoot(_r)?_r.host:_r}function getNearestOverflowAncestor(Nr){const _r=getParentNode(Nr);return isLastTraversableNode(_r)?Nr.ownerDocument?Nr.ownerDocument.body:Nr.body:isHTMLElement(_r)&&isOverflowElement(_r)?_r:getNearestOverflowAncestor(_r)}function getOverflowAncestors(Nr,_r,Ur){var jr;_r===void 0&&(_r=[]),Ur===void 0&&(Ur=!0);const Gr=getNearestOverflowAncestor(Nr),Wr=Gr===((jr=Nr.ownerDocument)==null?void 0:jr.body),Zr=getWindow(Gr);return Wr?_r.concat(Zr,Zr.visualViewport||[],isOverflowElement(Gr)?Gr:[],Zr.frameElement&&Ur?getOverflowAncestors(Zr.frameElement):[]):_r.concat(Gr,getOverflowAncestors(Gr,[],Ur))}function getCssDimensions(Nr){const _r=getComputedStyle$1(Nr);let Ur=parseFloat(_r.width)||0,jr=parseFloat(_r.height)||0;const Gr=isHTMLElement(Nr),Wr=Gr?Nr.offsetWidth:Ur,Zr=Gr?Nr.offsetHeight:jr,Yr=round(Ur)!==Wr||round(jr)!==Zr;return Yr&&(Ur=Wr,jr=Zr),{width:Ur,height:jr,$:Yr}}function unwrapElement(Nr){return isElement(Nr)?Nr:Nr.contextElement}function getScale(Nr){const _r=unwrapElement(Nr);if(!isHTMLElement(_r))return createCoords(1);const Ur=_r.getBoundingClientRect(),{width:jr,height:Gr,$:Wr}=getCssDimensions(_r);let Zr=(Wr?round(Ur.width):Ur.width)/jr,Yr=(Wr?round(Ur.height):Ur.height)/Gr;return(!Zr||!Number.isFinite(Zr))&&(Zr=1),(!Yr||!Number.isFinite(Yr))&&(Yr=1),{x:Zr,y:Yr}}const noOffsets=createCoords(0);function getVisualOffsets(Nr){const _r=getWindow(Nr);return!isWebKit()||!_r.visualViewport?noOffsets:{x:_r.visualViewport.offsetLeft,y:_r.visualViewport.offsetTop}}function shouldAddVisualOffsets(Nr,_r,Ur){return _r===void 0&&(_r=!1),!Ur||_r&&Ur!==getWindow(Nr)?!1:_r}function getBoundingClientRect(Nr,_r,Ur,jr){_r===void 0&&(_r=!1),Ur===void 0&&(Ur=!1);const Gr=Nr.getBoundingClientRect(),Wr=unwrapElement(Nr);let Zr=createCoords(1);_r&&(jr?isElement(jr)&&(Zr=getScale(jr)):Zr=getScale(Nr));const Yr=shouldAddVisualOffsets(Wr,Ur,jr)?getVisualOffsets(Wr):createCoords(0);let ts=(Gr.left+Yr.x)/Zr.x,es=(Gr.top+Yr.y)/Zr.y,ns=Gr.width/Zr.x,Xr=Gr.height/Zr.y;if(Wr){const qr=getWindow(Wr),_i=jr&&isElement(jr)?getWindow(jr):jr;let rs=qr.frameElement;for(;rs&&jr&&_i!==qr;){const is=getScale(rs),ss=rs.getBoundingClientRect(),os=getComputedStyle$1(rs),ls=ss.left+(rs.clientLeft+parseFloat(os.paddingLeft))*is.x,cs=ss.top+(rs.clientTop+parseFloat(os.paddingTop))*is.y;ts*=is.x,es*=is.y,ns*=is.x,Xr*=is.y,ts+=ls,es+=cs,rs=getWindow(rs).frameElement}}return rectToClientRect({width:ns,height:Xr,x:ts,y:es})}function convertOffsetParentRelativeRectToViewportRelativeRect(Nr){let{rect:_r,offsetParent:Ur,strategy:jr}=Nr;const Gr=isHTMLElement(Ur),Wr=getDocumentElement(Ur);if(Ur===Wr)return _r;let Zr={scrollLeft:0,scrollTop:0},Yr=createCoords(1);const ts=createCoords(0);if((Gr||!Gr&&jr!=="fixed")&&((getNodeName(Ur)!=="body"||isOverflowElement(Wr))&&(Zr=getNodeScroll(Ur)),isHTMLElement(Ur))){const es=getBoundingClientRect(Ur);Yr=getScale(Ur),ts.x=es.x+Ur.clientLeft,ts.y=es.y+Ur.clientTop}return{width:_r.width*Yr.x,height:_r.height*Yr.y,x:_r.x*Yr.x-Zr.scrollLeft*Yr.x+ts.x,y:_r.y*Yr.y-Zr.scrollTop*Yr.y+ts.y}}function getClientRects(Nr){return Array.from(Nr.getClientRects())}function getWindowScrollBarX(Nr){return getBoundingClientRect(getDocumentElement(Nr)).left+getNodeScroll(Nr).scrollLeft}function getDocumentRect(Nr){const _r=getDocumentElement(Nr),Ur=getNodeScroll(Nr),jr=Nr.ownerDocument.body,Gr=max(_r.scrollWidth,_r.clientWidth,jr.scrollWidth,jr.clientWidth),Wr=max(_r.scrollHeight,_r.clientHeight,jr.scrollHeight,jr.clientHeight);let Zr=-Ur.scrollLeft+getWindowScrollBarX(Nr);const Yr=-Ur.scrollTop;return getComputedStyle$1(jr).direction==="rtl"&&(Zr+=max(_r.clientWidth,jr.clientWidth)-Gr),{width:Gr,height:Wr,x:Zr,y:Yr}}function getViewportRect(Nr,_r){const Ur=getWindow(Nr),jr=getDocumentElement(Nr),Gr=Ur.visualViewport;let Wr=jr.clientWidth,Zr=jr.clientHeight,Yr=0,ts=0;if(Gr){Wr=Gr.width,Zr=Gr.height;const es=isWebKit();(!es||es&&_r==="fixed")&&(Yr=Gr.offsetLeft,ts=Gr.offsetTop)}return{width:Wr,height:Zr,x:Yr,y:ts}}function getInnerBoundingClientRect(Nr,_r){const Ur=getBoundingClientRect(Nr,!0,_r==="fixed"),jr=Ur.top+Nr.clientTop,Gr=Ur.left+Nr.clientLeft,Wr=isHTMLElement(Nr)?getScale(Nr):createCoords(1),Zr=Nr.clientWidth*Wr.x,Yr=Nr.clientHeight*Wr.y,ts=Gr*Wr.x,es=jr*Wr.y;return{width:Zr,height:Yr,x:ts,y:es}}function getClientRectFromClippingAncestor(Nr,_r,Ur){let jr;if(_r==="viewport")jr=getViewportRect(Nr,Ur);else if(_r==="document")jr=getDocumentRect(getDocumentElement(Nr));else if(isElement(_r))jr=getInnerBoundingClientRect(_r,Ur);else{const Gr=getVisualOffsets(Nr);jr={..._r,x:_r.x-Gr.x,y:_r.y-Gr.y}}return rectToClientRect(jr)}function hasFixedPositionAncestor(Nr,_r){const Ur=getParentNode(Nr);return Ur===_r||!isElement(Ur)||isLastTraversableNode(Ur)?!1:getComputedStyle$1(Ur).position==="fixed"||hasFixedPositionAncestor(Ur,_r)}function getClippingElementAncestors(Nr,_r){const Ur=_r.get(Nr);if(Ur)return Ur;let jr=getOverflowAncestors(Nr,[],!1).filter(Yr=>isElement(Yr)&&getNodeName(Yr)!=="body"),Gr=null;const Wr=getComputedStyle$1(Nr).position==="fixed";let Zr=Wr?getParentNode(Nr):Nr;for(;isElement(Zr)&&!isLastTraversableNode(Zr);){const Yr=getComputedStyle$1(Zr),ts=isContainingBlock(Zr);!ts&&Yr.position==="fixed"&&(Gr=null),(Wr?!ts&&!Gr:!ts&&Yr.position==="static"&&!!Gr&&["absolute","fixed"].includes(Gr.position)||isOverflowElement(Zr)&&!ts&&hasFixedPositionAncestor(Nr,Zr))?jr=jr.filter(ns=>ns!==Zr):Gr=Yr,Zr=getParentNode(Zr)}return _r.set(Nr,jr),jr}function getClippingRect(Nr){let{element:_r,boundary:Ur,rootBoundary:jr,strategy:Gr}=Nr;const Zr=[...Ur==="clippingAncestors"?getClippingElementAncestors(_r,this._c):[].concat(Ur),jr],Yr=Zr[0],ts=Zr.reduce((es,ns)=>{const Xr=getClientRectFromClippingAncestor(_r,ns,Gr);return es.top=max(Xr.top,es.top),es.right=min(Xr.right,es.right),es.bottom=min(Xr.bottom,es.bottom),es.left=max(Xr.left,es.left),es},getClientRectFromClippingAncestor(_r,Yr,Gr));return{width:ts.right-ts.left,height:ts.bottom-ts.top,x:ts.left,y:ts.top}}function getDimensions(Nr){return getCssDimensions(Nr)}function getRectRelativeToOffsetParent(Nr,_r,Ur){const jr=isHTMLElement(_r),Gr=getDocumentElement(_r),Wr=Ur==="fixed",Zr=getBoundingClientRect(Nr,!0,Wr,_r);let Yr={scrollLeft:0,scrollTop:0};const ts=createCoords(0);if(jr||!jr&&!Wr)if((getNodeName(_r)!=="body"||isOverflowElement(Gr))&&(Yr=getNodeScroll(_r)),jr){const es=getBoundingClientRect(_r,!0,Wr,_r);ts.x=es.x+_r.clientLeft,ts.y=es.y+_r.clientTop}else Gr&&(ts.x=getWindowScrollBarX(Gr));return{x:Zr.left+Yr.scrollLeft-ts.x,y:Zr.top+Yr.scrollTop-ts.y,width:Zr.width,height:Zr.height}}function getTrueOffsetParent(Nr,_r){return!isHTMLElement(Nr)||getComputedStyle$1(Nr).position==="fixed"?null:_r?_r(Nr):Nr.offsetParent}function getOffsetParent(Nr,_r){const Ur=getWindow(Nr);if(!isHTMLElement(Nr))return Ur;let jr=getTrueOffsetParent(Nr,_r);for(;jr&&isTableElement(jr)&&getComputedStyle$1(jr).position==="static";)jr=getTrueOffsetParent(jr,_r);return jr&&(getNodeName(jr)==="html"||getNodeName(jr)==="body"&&getComputedStyle$1(jr).position==="static"&&!isContainingBlock(jr))?Ur:jr||getContainingBlock(Nr)||Ur}const getElementRects=async function(Nr){let{reference:_r,floating:Ur,strategy:jr}=Nr;const Gr=this.getOffsetParent||getOffsetParent,Wr=this.getDimensions;return{reference:getRectRelativeToOffsetParent(_r,await Gr(Ur),jr),floating:{x:0,y:0,...await Wr(Ur)}}};function isRTL(Nr){return getComputedStyle$1(Nr).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(Nr,_r){let Ur=null,jr;const Gr=getDocumentElement(Nr);function Wr(){clearTimeout(jr),Ur&&Ur.disconnect(),Ur=null}function Zr(Yr,ts){Yr===void 0&&(Yr=!1),ts===void 0&&(ts=1),Wr();const{left:es,top:ns,width:Xr,height:qr}=Nr.getBoundingClientRect();if(Yr||_r(),!Xr||!qr)return;const _i=floor(ns),rs=floor(Gr.clientWidth-(es+Xr)),is=floor(Gr.clientHeight-(ns+qr)),ss=floor(es),ls={rootMargin:-_i+"px "+-rs+"px "+-is+"px "+-ss+"px",threshold:max(0,min(1,ts))||1};let cs=!0;function ds(fs){const ms=fs[0].intersectionRatio;if(ms!==ts){if(!cs)return Zr();ms?Zr(!1,ms):jr=setTimeout(()=>{Zr(!1,1e-7)},100)}cs=!1}try{Ur=new IntersectionObserver(ds,{...ls,root:Gr.ownerDocument})}catch{Ur=new IntersectionObserver(ds,ls)}Ur.observe(Nr)}return Zr(!0),Wr}function autoUpdate(Nr,_r,Ur,jr){jr===void 0&&(jr={});const{ancestorScroll:Gr=!0,ancestorResize:Wr=!0,elementResize:Zr=typeof ResizeObserver=="function",layoutShift:Yr=typeof IntersectionObserver=="function",animationFrame:ts=!1}=jr,es=unwrapElement(Nr),ns=Gr||Wr?[...es?getOverflowAncestors(es):[],...getOverflowAncestors(_r)]:[];ns.forEach(os=>{Gr&&os.addEventListener("scroll",Ur,{passive:!0}),Wr&&os.addEventListener("resize",Ur)});const Xr=es&&Yr?observeMove(es,Ur):null;let qr=-1,_i=null;Zr&&(_i=new ResizeObserver(os=>{let[ls]=os;ls&&ls.target===es&&_i&&(_i.unobserve(_r),cancelAnimationFrame(qr),qr=requestAnimationFrame(()=>{_i&&_i.observe(_r)})),Ur()}),es&&!ts&&_i.observe(es),_i.observe(_r));let rs,is=ts?getBoundingClientRect(Nr):null;ts&&ss();function ss(){const os=getBoundingClientRect(Nr);is&&(os.x!==is.x||os.y!==is.y||os.width!==is.width||os.height!==is.height)&&Ur(),is=os,rs=requestAnimationFrame(ss)}return Ur(),()=>{ns.forEach(os=>{Gr&&os.removeEventListener("scroll",Ur),Wr&&os.removeEventListener("resize",Ur)}),Xr&&Xr(),_i&&_i.disconnect(),_i=null,ts&&cancelAnimationFrame(rs)}}const computePosition=(Nr,_r,Ur)=>{const jr=new Map,Gr={platform,...Ur},Wr={...Gr.platform,_c:jr};return computePosition$1(Nr,_r,{...Gr,platform:Wr})},arrow=Nr=>{function _r(Ur){return{}.hasOwnProperty.call(Ur,"current")}return{name:"arrow",options:Nr,fn(Ur){const{element:jr,padding:Gr}=typeof Nr=="function"?Nr(Ur):Nr;return jr&&_r(jr)?jr.current!=null?arrow$1({element:jr.current,padding:Gr}).fn(Ur):{}:jr?arrow$1({element:jr,padding:Gr}).fn(Ur):{}}}};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(Nr,_r){if(Nr===_r)return!0;if(typeof Nr!=typeof _r)return!1;if(typeof Nr=="function"&&Nr.toString()===_r.toString())return!0;let Ur,jr,Gr;if(Nr&&_r&&typeof Nr=="object"){if(Array.isArray(Nr)){if(Ur=Nr.length,Ur!=_r.length)return!1;for(jr=Ur;jr--!==0;)if(!deepEqual(Nr[jr],_r[jr]))return!1;return!0}if(Gr=Object.keys(Nr),Ur=Gr.length,Ur!==Object.keys(_r).length)return!1;for(jr=Ur;jr--!==0;)if(!{}.hasOwnProperty.call(_r,Gr[jr]))return!1;for(jr=Ur;jr--!==0;){const Wr=Gr[jr];if(!(Wr==="_owner"&&Nr.$$typeof)&&!deepEqual(Nr[Wr],_r[Wr]))return!1}return!0}return Nr!==Nr&&_r!==_r}function getDPR(Nr){return typeof window>"u"?1:(Nr.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(Nr,_r){const Ur=getDPR(Nr);return Math.round(_r*Ur)/Ur}function useLatestRef(Nr){const _r=reactExports.useRef(Nr);return index$1(()=>{_r.current=Nr}),_r}function useFloating(Nr){Nr===void 0&&(Nr={});const{placement:_r="bottom",strategy:Ur="absolute",middleware:jr=[],platform:Gr,elements:{reference:Wr,floating:Zr}={},transform:Yr=!0,whileElementsMounted:ts,open:es}=Nr,[ns,Xr]=reactExports.useState({x:0,y:0,strategy:Ur,placement:_r,middlewareData:{},isPositioned:!1}),[qr,_i]=reactExports.useState(jr);deepEqual(qr,jr)||_i(jr);const[rs,is]=reactExports.useState(null),[ss,os]=reactExports.useState(null),ls=reactExports.useCallback(Cs=>{Cs!=ms.current&&(ms.current=Cs,is(Cs))},[is]),cs=reactExports.useCallback(Cs=>{Cs!==ps.current&&(ps.current=Cs,os(Cs))},[os]),ds=Wr||rs,fs=Zr||ss,ms=reactExports.useRef(null),ps=reactExports.useRef(null),ys=reactExports.useRef(ns),ws=useLatestRef(ts),xs=useLatestRef(Gr),Es=reactExports.useCallback(()=>{if(!ms.current||!ps.current)return;const Cs={placement:_r,strategy:Ur,middleware:qr};xs.current&&(Cs.platform=xs.current),computePosition(ms.current,ps.current,Cs).then(Ss=>{const As={...Ss,isPositioned:!0};Rs.current&&!deepEqual(ys.current,As)&&(ys.current=As,reactDomExports.flushSync(()=>{Xr(As)}))})},[qr,_r,Ur,xs]);index$1(()=>{es===!1&&ys.current.isPositioned&&(ys.current.isPositioned=!1,Xr(Cs=>({...Cs,isPositioned:!1})))},[es]);const Rs=reactExports.useRef(!1);index$1(()=>(Rs.current=!0,()=>{Rs.current=!1}),[]),index$1(()=>{if(ds&&(ms.current=ds),fs&&(ps.current=fs),ds&&fs){if(ws.current)return ws.current(ds,fs,Es);Es()}},[ds,fs,Es,ws]);const _s=reactExports.useMemo(()=>({reference:ms,floating:ps,setReference:ls,setFloating:cs}),[ls,cs]),Bs=reactExports.useMemo(()=>({reference:ds,floating:fs}),[ds,fs]),vs=reactExports.useMemo(()=>{const Cs={position:Ur,left:0,top:0};if(!Bs.floating)return Cs;const Ss=roundByDPR(Bs.floating,ns.x),As=roundByDPR(Bs.floating,ns.y);return Yr?{...Cs,transform:"translate("+Ss+"px, "+As+"px)",...getDPR(Bs.floating)>=1.5&&{willChange:"transform"}}:{position:Ur,left:Ss,top:As}},[Ur,Yr,Bs.floating,ns.x,ns.y]);return reactExports.useMemo(()=>({...ns,update:Es,refs:_s,elements:Bs,floatingStyles:vs}),[ns,Es,_s,Bs,vs])}const $7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((Nr,_r)=>{const{children:Ur,width:jr=10,height:Gr=5,...Wr}=Nr;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$1({},Wr,{ref:_r,width:jr,height:Gr,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),Nr.asChild?Ur:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5,$cf1ac5d9fe0e8206$var$POPPER_NAME$1="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext$1,$cf1ac5d9fe0e8206$export$722aac194ae923$1]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME$1),[$cf1ac5d9fe0e8206$var$PopperProvider$1,$cf1ac5d9fe0e8206$var$usePopperContext$1]=$cf1ac5d9fe0e8206$var$createPopperContext$1($cf1ac5d9fe0e8206$var$POPPER_NAME$1),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9$1=Nr=>{const{__scopePopper:_r,children:Ur}=Nr,[jr,Gr]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider$1,{scope:_r,anchor:jr,onAnchorChange:Gr},Ur)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME$1="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d$1=reactExports.forwardRef((Nr,_r)=>{const{__scopePopper:Ur,virtualRef:jr,...Gr}=Nr,Wr=$cf1ac5d9fe0e8206$var$usePopperContext$1($cf1ac5d9fe0e8206$var$ANCHOR_NAME$1,Ur),Zr=reactExports.useRef(null),Yr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Zr);return reactExports.useEffect(()=>{Wr.onAnchorChange((jr==null?void 0:jr.current)||Zr.current)}),jr?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Gr,{ref:Yr}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME$1="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider$1,$cf1ac5d9fe0e8206$var$useContentContext$1]=$cf1ac5d9fe0e8206$var$createPopperContext$1($cf1ac5d9fe0e8206$var$CONTENT_NAME$1),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc$1=reactExports.forwardRef((Nr,_r)=>{var Ur,jr,Gr,Wr,Zr,Yr,ts,es;const{__scopePopper:ns,side:Xr="bottom",sideOffset:qr=0,align:_i="center",alignOffset:rs=0,arrowPadding:is=0,avoidCollisions:ss=!0,collisionBoundary:os=[],collisionPadding:ls=0,sticky:cs="partial",hideWhenDetached:ds=!1,updatePositionStrategy:fs="optimized",onPlaced:ms,...ps}=Nr,ys=$cf1ac5d9fe0e8206$var$usePopperContext$1($cf1ac5d9fe0e8206$var$CONTENT_NAME$1,ns),[ws,xs]=reactExports.useState(null),Es=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,to=>xs(to)),[Rs,_s]=reactExports.useState(null),Bs=$db6c3485150b8e66$export$1ab7ae714698c4b8(Rs),vs=(Ur=Bs==null?void 0:Bs.width)!==null&&Ur!==void 0?Ur:0,Cs=(jr=Bs==null?void 0:Bs.height)!==null&&jr!==void 0?jr:0,Ss=Xr+(_i!=="center"?"-"+_i:""),As=typeof ls=="number"?ls:{top:0,right:0,bottom:0,left:0,...ls},Us=Array.isArray(os)?os:[os],Ks=Us.length>0,Ws={padding:As,boundary:Us.filter($cf1ac5d9fe0e8206$var$isNotNull$1),altBoundary:Ks},{refs:Js,floatingStyles:ho,placement:so,isPositioned:io,middlewareData:vo}=useFloating({strategy:"fixed",placement:Ss,whileElementsMounted:(...to)=>autoUpdate(...to,{animationFrame:fs==="always"}),elements:{reference:ys.anchor},middleware:[offset({mainAxis:qr+Cs,alignmentAxis:rs}),ss&&shift({mainAxis:!0,crossAxis:!1,limiter:cs==="partial"?limitShift():void 0,...Ws}),ss&&flip({...Ws}),size({...Ws,apply:({elements:to,rects:ao,availableWidth:lo,availableHeight:Io})=>{const{width:po,height:Fo}=ao.reference,Do=to.floating.style;Do.setProperty("--radix-popper-available-width",`${lo}px`),Do.setProperty("--radix-popper-available-height",`${Io}px`),Do.setProperty("--radix-popper-anchor-width",`${po}px`),Do.setProperty("--radix-popper-anchor-height",`${Fo}px`)}}),Rs&&arrow({element:Rs,padding:is}),$cf1ac5d9fe0e8206$var$transformOrigin$1({arrowWidth:vs,arrowHeight:Cs}),ds&&hide({strategy:"referenceHidden",...Ws})]}),[co,go]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement$1(so),Eo=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ms);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{io&&(Eo==null||Eo())},[io,Eo]);const Ro=(Gr=vo.arrow)===null||Gr===void 0?void 0:Gr.x,Po=(Wr=vo.arrow)===null||Wr===void 0?void 0:Wr.y,Oo=((Zr=vo.arrow)===null||Zr===void 0?void 0:Zr.centerOffset)!==0,[Ts,Ns]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{ws&&Ns(window.getComputedStyle(ws).zIndex)},[ws]),reactExports.createElement("div",{ref:Js.setFloating,"data-radix-popper-content-wrapper":"",style:{...ho,transform:io?ho.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ts,"--radix-popper-transform-origin":[(Yr=vo.transformOrigin)===null||Yr===void 0?void 0:Yr.x,(ts=vo.transformOrigin)===null||ts===void 0?void 0:ts.y].join(" ")},dir:Nr.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider$1,{scope:ns,placedSide:co,onArrowChange:_s,arrowX:Ro,arrowY:Po,shouldHideArrow:Oo},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":co,"data-align":go},ps,{ref:Es,style:{...ps.style,animation:io?void 0:"none",opacity:(es=vo.hide)!==null&&es!==void 0&&es.referenceHidden?0:void 0}}))))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function(_r,Ur){const{__scopePopper:jr,...Gr}=_r,Wr=$cf1ac5d9fe0e8206$var$useContentContext$1($cf1ac5d9fe0e8206$var$ARROW_NAME,jr),Zr=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[Wr.placedSide];return reactExports.createElement("span",{ref:Wr.onArrowChange,style:{position:"absolute",left:Wr.arrowX,top:Wr.arrowY,[Zr]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Wr.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Wr.placedSide],visibility:Wr.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$1({},Gr,{ref:Ur,style:{...Gr.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull$1(Nr){return Nr!==null}const $cf1ac5d9fe0e8206$var$transformOrigin$1=Nr=>({name:"transformOrigin",options:Nr,fn(_r){var Ur,jr,Gr,Wr,Zr;const{placement:Yr,rects:ts,middlewareData:es}=_r,Xr=((Ur=es.arrow)===null||Ur===void 0?void 0:Ur.centerOffset)!==0,qr=Xr?0:Nr.arrowWidth,_i=Xr?0:Nr.arrowHeight,[rs,is]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement$1(Yr),ss={start:"0%",center:"50%",end:"100%"}[is],os=((jr=(Gr=es.arrow)===null||Gr===void 0?void 0:Gr.x)!==null&&jr!==void 0?jr:0)+qr/2,ls=((Wr=(Zr=es.arrow)===null||Zr===void 0?void 0:Zr.y)!==null&&Wr!==void 0?Wr:0)+_i/2;let cs="",ds="";return rs==="bottom"?(cs=Xr?ss:`${os}px`,ds=`${-_i}px`):rs==="top"?(cs=Xr?ss:`${os}px`,ds=`${ts.floating.height+_i}px`):rs==="right"?(cs=`${-_i}px`,ds=Xr?ss:`${ls}px`):rs==="left"&&(cs=`${ts.floating.width+_i}px`,ds=Xr?ss:`${ls}px`),{data:{x:cs,y:ds}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement$1(Nr){const[_r,Ur="center"]=Nr.split("-");return[_r,Ur]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9$1=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9$1,$cf1ac5d9fe0e8206$export$b688253958b8dfe7$1=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d$1,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2$1=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc$1,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0;var getDefaultParent=function(Nr){if(typeof document>"u")return null;var _r=Array.isArray(Nr)?Nr[0]:Nr;return _r.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(Nr){return Nr&&(Nr.host||unwrapHost(Nr.parentNode))},correctTargets=function(Nr,_r){return _r.map(function(Ur){if(Nr.contains(Ur))return Ur;var jr=unwrapHost(Ur);return jr&&Nr.contains(jr)?jr:(console.error("aria-hidden",Ur,"in not contained inside",Nr,". Doing nothing"),null)}).filter(function(Ur){return!!Ur})},applyAttributeToOthers=function(Nr,_r,Ur,jr){var Gr=correctTargets(_r,Array.isArray(Nr)?Nr:[Nr]);markerMap[Ur]||(markerMap[Ur]=new WeakMap);var Wr=markerMap[Ur],Zr=[],Yr=new Set,ts=new Set(Gr),es=function(Xr){!Xr||Yr.has(Xr)||(Yr.add(Xr),es(Xr.parentNode))};Gr.forEach(es);var ns=function(Xr){!Xr||ts.has(Xr)||Array.prototype.forEach.call(Xr.children,function(qr){if(Yr.has(qr))ns(qr);else{var _i=qr.getAttribute(jr),rs=_i!==null&&_i!=="false",is=(counterMap.get(qr)||0)+1,ss=(Wr.get(qr)||0)+1;counterMap.set(qr,is),Wr.set(qr,ss),Zr.push(qr),is===1&&rs&&uncontrolledNodes.set(qr,!0),ss===1&&qr.setAttribute(Ur,"true"),rs||qr.setAttribute(jr,"true")}})};return ns(_r),Yr.clear(),lockCount++,function(){Zr.forEach(function(Xr){var qr=counterMap.get(Xr)-1,_i=Wr.get(Xr)-1;counterMap.set(Xr,qr),Wr.set(Xr,_i),qr||(uncontrolledNodes.has(Xr)||Xr.removeAttribute(jr),uncontrolledNodes.delete(Xr)),_i||Xr.removeAttribute(Ur)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(Nr,_r,Ur){Ur===void 0&&(Ur="data-aria-hidden");var jr=Array.from(Array.isArray(Nr)?Nr:[Nr]),Gr=_r||getDefaultParent(Nr);return Gr?(jr.push.apply(jr,Array.from(Gr.querySelectorAll("[aria-live]"))),applyAttributeToOthers(jr,Gr,Ur,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(_r){for(var Ur,jr=1,Gr=arguments.length;jr<Gr;jr++){Ur=arguments[jr];for(var Wr in Ur)Object.prototype.hasOwnProperty.call(Ur,Wr)&&(_r[Wr]=Ur[Wr])}return _r},__assign.apply(this,arguments)};function __rest(Nr,_r){var Ur={};for(var jr in Nr)Object.prototype.hasOwnProperty.call(Nr,jr)&&_r.indexOf(jr)<0&&(Ur[jr]=Nr[jr]);if(Nr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Gr=0,jr=Object.getOwnPropertySymbols(Nr);Gr<jr.length;Gr++)_r.indexOf(jr[Gr])<0&&Object.prototype.propertyIsEnumerable.call(Nr,jr[Gr])&&(Ur[jr[Gr]]=Nr[jr[Gr]]);return Ur}function __spreadArray(Nr,_r,Ur){if(Ur||arguments.length===2)for(var jr=0,Gr=_r.length,Wr;jr<Gr;jr++)(Wr||!(jr in _r))&&(Wr||(Wr=Array.prototype.slice.call(_r,0,jr)),Wr[jr]=_r[jr]);return Nr.concat(Wr||Array.prototype.slice.call(_r))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(Nr,_r){return typeof Nr=="function"?Nr(_r):Nr&&(Nr.current=_r),Nr}function useCallbackRef(Nr,_r){var Ur=reactExports.useState(function(){return{value:Nr,callback:_r,facade:{get current(){return Ur.value},set current(jr){var Gr=Ur.value;Gr!==jr&&(Ur.value=jr,Ur.callback(jr,Gr))}}}})[0];return Ur.callback=_r,Ur.facade}function useMergeRefs(Nr,_r){return useCallbackRef(_r||null,function(Ur){return Nr.forEach(function(jr){return assignRef(jr,Ur)})})}function ItoI(Nr){return Nr}function innerCreateMedium(Nr,_r){_r===void 0&&(_r=ItoI);var Ur=[],jr=!1,Gr={read:function(){if(jr)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return Ur.length?Ur[Ur.length-1]:Nr},useMedium:function(Wr){var Zr=_r(Wr,jr);return Ur.push(Zr),function(){Ur=Ur.filter(function(Yr){return Yr!==Zr})}},assignSyncMedium:function(Wr){for(jr=!0;Ur.length;){var Zr=Ur;Ur=[],Zr.forEach(Wr)}Ur={push:function(Yr){return Wr(Yr)},filter:function(){return Ur}}},assignMedium:function(Wr){jr=!0;var Zr=[];if(Ur.length){var Yr=Ur;Ur=[],Yr.forEach(Wr),Zr=Ur}var ts=function(){var ns=Zr;Zr=[],ns.forEach(Wr)},es=function(){return Promise.resolve().then(ts)};es(),Ur={push:function(ns){Zr.push(ns),es()},filter:function(ns){return Zr=Zr.filter(ns),Ur}}}};return Gr}function createSidecarMedium(Nr){Nr===void 0&&(Nr={});var _r=innerCreateMedium(null);return _r.options=__assign({async:!0,ssr:!1},Nr),_r}var SideCar$1=function(Nr){var _r=Nr.sideCar,Ur=__rest(Nr,["sideCar"]);if(!_r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var jr=_r.read();if(!jr)throw new Error("Sidecar medium not found");return reactExports.createElement(jr,__assign({},Ur))};SideCar$1.isSideCarExport=!0;function exportSidecar(Nr,_r){return Nr.useMedium(_r),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(Nr,_r){var Ur=reactExports.useRef(null),jr=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),Gr=jr[0],Wr=jr[1],Zr=Nr.forwardProps,Yr=Nr.children,ts=Nr.className,es=Nr.removeScrollBar,ns=Nr.enabled,Xr=Nr.shards,qr=Nr.sideCar,_i=Nr.noIsolation,rs=Nr.inert,is=Nr.allowPinchZoom,ss=Nr.as,os=ss===void 0?"div":ss,ls=__rest(Nr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),cs=qr,ds=useMergeRefs([Ur,_r]),fs=__assign(__assign({},ls),Gr);return reactExports.createElement(reactExports.Fragment,null,ns&&reactExports.createElement(cs,{sideCar:effectCar,removeScrollBar:es,shards:Xr,noIsolation:_i,inert:rs,setCallbacks:Wr,allowPinchZoom:!!is,lockRef:Ur}),Zr?reactExports.cloneElement(reactExports.Children.only(Yr),__assign(__assign({},fs),{ref:ds})):reactExports.createElement(os,__assign({},fs,{className:ts,ref:ds}),Yr))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var currentNonce,getNonce=function(){if(currentNonce)return currentNonce;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var Nr=document.createElement("style");Nr.type="text/css";var _r=getNonce();return _r&&Nr.setAttribute("nonce",_r),Nr}function injectStyles(Nr,_r){Nr.styleSheet?Nr.styleSheet.cssText=_r:Nr.appendChild(document.createTextNode(_r))}function insertStyleTag(Nr){var _r=document.head||document.getElementsByTagName("head")[0];_r.appendChild(Nr)}var stylesheetSingleton=function(){var Nr=0,_r=null;return{add:function(Ur){Nr==0&&(_r=makeStyleTag())&&(injectStyles(_r,Ur),insertStyleTag(_r)),Nr++},remove:function(){Nr--,!Nr&&_r&&(_r.parentNode&&_r.parentNode.removeChild(_r),_r=null)}}},styleHookSingleton=function(){var Nr=stylesheetSingleton();return function(_r,Ur){reactExports.useEffect(function(){return Nr.add(_r),function(){Nr.remove()}},[_r&&Ur])}},styleSingleton=function(){var Nr=styleHookSingleton(),_r=function(Ur){var jr=Ur.styles,Gr=Ur.dynamic;return Nr(jr,Gr),null};return _r},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(Nr){return parseInt(Nr||"",10)||0},getOffset=function(Nr){var _r=window.getComputedStyle(document.body),Ur=_r[Nr==="padding"?"paddingLeft":"marginLeft"],jr=_r[Nr==="padding"?"paddingTop":"marginTop"],Gr=_r[Nr==="padding"?"paddingRight":"marginRight"];return[parse$1(Ur),parse$1(jr),parse$1(Gr)]},getGapWidth=function(Nr){if(Nr===void 0&&(Nr="margin"),typeof window>"u")return zeroGap;var _r=getOffset(Nr),Ur=document.documentElement.clientWidth,jr=window.innerWidth;return{left:_r[0],top:_r[1],right:_r[2],gap:Math.max(0,jr-Ur+_r[2]-_r[0])}},Style=styleSingleton(),getStyles=function(Nr,_r,Ur,jr){var Gr=Nr.left,Wr=Nr.top,Zr=Nr.right,Yr=Nr.gap;return Ur===void 0&&(Ur="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(jr,`;
   padding-right: `).concat(Yr,"px ").concat(jr,`;
  }
  body {
    overflow: hidden `).concat(jr,`;
    overscroll-behavior: contain;
    `).concat([_r&&"position: relative ".concat(jr,";"),Ur==="margin"&&`
    padding-left: `.concat(Gr,`px;
    padding-top: `).concat(Wr,`px;
    padding-right: `).concat(Zr,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(Yr,"px ").concat(jr,`;
    `),Ur==="padding"&&"padding-right: ".concat(Yr,"px ").concat(jr,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(Yr,"px ").concat(jr,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(Yr,"px ").concat(jr,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(jr,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(jr,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(Yr,`px;
  }
`)},RemoveScrollBar=function(Nr){var _r=Nr.noRelative,Ur=Nr.noImportant,jr=Nr.gapMode,Gr=jr===void 0?"margin":jr,Wr=reactExports.useMemo(function(){return getGapWidth(Gr)},[Gr]);return reactExports.createElement(Style,{styles:getStyles(Wr,!_r,Gr,Ur?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(Nr){return Nr.tagName==="TEXTAREA"},elementCanBeScrolled=function(Nr,_r){var Ur=window.getComputedStyle(Nr);return Ur[_r]!=="hidden"&&!(Ur.overflowY===Ur.overflowX&&!alwaysContainsScroll(Nr)&&Ur[_r]==="visible")},elementCouldBeVScrolled=function(Nr){return elementCanBeScrolled(Nr,"overflowY")},elementCouldBeHScrolled=function(Nr){return elementCanBeScrolled(Nr,"overflowX")},locationCouldBeScrolled=function(Nr,_r){var Ur=_r;do{typeof ShadowRoot<"u"&&Ur instanceof ShadowRoot&&(Ur=Ur.host);var jr=elementCouldBeScrolled(Nr,Ur);if(jr){var Gr=getScrollVariables(Nr,Ur),Wr=Gr[1],Zr=Gr[2];if(Wr>Zr)return!0}Ur=Ur.parentNode}while(Ur&&Ur!==document.body);return!1},getVScrollVariables=function(Nr){var _r=Nr.scrollTop,Ur=Nr.scrollHeight,jr=Nr.clientHeight;return[_r,Ur,jr]},getHScrollVariables=function(Nr){var _r=Nr.scrollLeft,Ur=Nr.scrollWidth,jr=Nr.clientWidth;return[_r,Ur,jr]},elementCouldBeScrolled=function(Nr,_r){return Nr==="v"?elementCouldBeVScrolled(_r):elementCouldBeHScrolled(_r)},getScrollVariables=function(Nr,_r){return Nr==="v"?getVScrollVariables(_r):getHScrollVariables(_r)},getDirectionFactor=function(Nr,_r){return Nr==="h"&&_r==="rtl"?-1:1},handleScroll=function(Nr,_r,Ur,jr,Gr){var Wr=getDirectionFactor(Nr,window.getComputedStyle(_r).direction),Zr=Wr*jr,Yr=Ur.target,ts=_r.contains(Yr),es=!1,ns=Zr>0,Xr=0,qr=0;do{var _i=getScrollVariables(Nr,Yr),rs=_i[0],is=_i[1],ss=_i[2],os=is-ss-Wr*rs;(rs||os)&&elementCouldBeScrolled(Nr,Yr)&&(Xr+=os,qr+=rs),Yr=Yr.parentNode}while(!ts&&Yr!==document.body||ts&&(_r.contains(Yr)||_r===Yr));return(ns&&(Gr&&Xr===0||!Gr&&Zr>Xr)||!ns&&(Gr&&qr===0||!Gr&&-Zr>qr))&&(es=!0),es},getTouchXY=function(Nr){return"changedTouches"in Nr?[Nr.changedTouches[0].clientX,Nr.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(Nr){return[Nr.deltaX,Nr.deltaY]},extractRef=function(Nr){return Nr&&"current"in Nr?Nr.current:Nr},deltaCompare=function(Nr,_r){return Nr[0]===_r[0]&&Nr[1]===_r[1]},generateStyle=function(Nr){return`
  .block-interactivity-`.concat(Nr,` {pointer-events: none;}
  .allow-interactivity-`).concat(Nr,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(Nr){var _r=reactExports.useRef([]),Ur=reactExports.useRef([0,0]),jr=reactExports.useRef(),Gr=reactExports.useState(idCounter++)[0],Wr=reactExports.useState(function(){return styleSingleton()})[0],Zr=reactExports.useRef(Nr);reactExports.useEffect(function(){Zr.current=Nr},[Nr]),reactExports.useEffect(function(){if(Nr.inert){document.body.classList.add("block-interactivity-".concat(Gr));var is=__spreadArray([Nr.lockRef.current],(Nr.shards||[]).map(extractRef),!0).filter(Boolean);return is.forEach(function(ss){return ss.classList.add("allow-interactivity-".concat(Gr))}),function(){document.body.classList.remove("block-interactivity-".concat(Gr)),is.forEach(function(ss){return ss.classList.remove("allow-interactivity-".concat(Gr))})}}},[Nr.inert,Nr.lockRef.current,Nr.shards]);var Yr=reactExports.useCallback(function(is,ss){if("touches"in is&&is.touches.length===2)return!Zr.current.allowPinchZoom;var os=getTouchXY(is),ls=Ur.current,cs="deltaX"in is?is.deltaX:ls[0]-os[0],ds="deltaY"in is?is.deltaY:ls[1]-os[1],fs,ms=is.target,ps=Math.abs(cs)>Math.abs(ds)?"h":"v";if("touches"in is&&ps==="h"&&ms.type==="range")return!1;var ys=locationCouldBeScrolled(ps,ms);if(!ys)return!0;if(ys?fs=ps:(fs=ps==="v"?"h":"v",ys=locationCouldBeScrolled(ps,ms)),!ys)return!1;if(!jr.current&&"changedTouches"in is&&(cs||ds)&&(jr.current=fs),!fs)return!0;var ws=jr.current||fs;return handleScroll(ws,ss,is,ws==="h"?cs:ds,!0)},[]),ts=reactExports.useCallback(function(is){var ss=is;if(!(!lockStack.length||lockStack[lockStack.length-1]!==Wr)){var os="deltaY"in ss?getDeltaXY(ss):getTouchXY(ss),ls=_r.current.filter(function(fs){return fs.name===ss.type&&fs.target===ss.target&&deltaCompare(fs.delta,os)})[0];if(ls&&ls.should){ss.cancelable&&ss.preventDefault();return}if(!ls){var cs=(Zr.current.shards||[]).map(extractRef).filter(Boolean).filter(function(fs){return fs.contains(ss.target)}),ds=cs.length>0?Yr(ss,cs[0]):!Zr.current.noIsolation;ds&&ss.cancelable&&ss.preventDefault()}}},[]),es=reactExports.useCallback(function(is,ss,os,ls){var cs={name:is,delta:ss,target:os,should:ls};_r.current.push(cs),setTimeout(function(){_r.current=_r.current.filter(function(ds){return ds!==cs})},1)},[]),ns=reactExports.useCallback(function(is){Ur.current=getTouchXY(is),jr.current=void 0},[]),Xr=reactExports.useCallback(function(is){es(is.type,getDeltaXY(is),is.target,Yr(is,Nr.lockRef.current))},[]),qr=reactExports.useCallback(function(is){es(is.type,getTouchXY(is),is.target,Yr(is,Nr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(Wr),Nr.setCallbacks({onScrollCapture:Xr,onWheelCapture:Xr,onTouchMoveCapture:qr}),document.addEventListener("wheel",ts,nonPassive),document.addEventListener("touchmove",ts,nonPassive),document.addEventListener("touchstart",ns,nonPassive),function(){lockStack=lockStack.filter(function(is){return is!==Wr}),document.removeEventListener("wheel",ts,nonPassive),document.removeEventListener("touchmove",ts,nonPassive),document.removeEventListener("touchstart",ns,nonPassive)}},[]);var _i=Nr.removeScrollBar,rs=Nr.inert;return reactExports.createElement(reactExports.Fragment,null,rs?reactExports.createElement(Wr,{styles:generateStyle(Gr)}):null,_i?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(Nr,_r){return reactExports.createElement(RemoveScroll,__assign({},Nr,{ref:_r,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $01b9c$RemoveScroll=ReactRemoveScroll,$cb5cc270b50c6fcd$var$POPOVER_NAME="Popover",[$cb5cc270b50c6fcd$var$createPopoverContext,$cb5cc270b50c6fcd$export$c8393c9e73286932]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cb5cc270b50c6fcd$var$POPOVER_NAME,[$cf1ac5d9fe0e8206$export$722aac194ae923$1]),$cb5cc270b50c6fcd$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923$1(),[$cb5cc270b50c6fcd$var$PopoverProvider,$cb5cc270b50c6fcd$var$usePopoverContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$POPOVER_NAME),$cb5cc270b50c6fcd$export$5b6b19405a83ff9d=Nr=>{const{__scopePopover:_r,children:Ur,open:jr,defaultOpen:Gr,onOpenChange:Wr,modal:Zr=!1}=Nr,Yr=$cb5cc270b50c6fcd$var$usePopperScope(_r),ts=reactExports.useRef(null),[es,ns]=reactExports.useState(!1),[Xr=!1,qr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:jr,defaultProp:Gr,onChange:Wr});return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9$1,Yr,reactExports.createElement($cb5cc270b50c6fcd$var$PopoverProvider,{scope:_r,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:ts,open:Xr,onOpenChange:qr,onOpenToggle:reactExports.useCallback(()=>qr(_i=>!_i),[qr]),hasCustomAnchor:es,onCustomAnchorAdd:reactExports.useCallback(()=>ns(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>ns(!1),[]),modal:Zr},Ur))},$cb5cc270b50c6fcd$var$TRIGGER_NAME="PopoverTrigger",$cb5cc270b50c6fcd$export$7dacb05d26466c3=reactExports.forwardRef((Nr,_r)=>{const{__scopePopover:Ur,...jr}=Nr,Gr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$TRIGGER_NAME,Ur),Wr=$cb5cc270b50c6fcd$var$usePopperScope(Ur),Zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Gr.triggerRef),Yr=reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-haspopup":"dialog","aria-expanded":Gr.open,"aria-controls":Gr.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(Gr.open)},jr,{ref:Zr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onClick,Gr.onOpenToggle)}));return Gr.hasCustomAnchor?Yr:reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7$1,_extends$1({asChild:!0},Wr),Yr)}),$cb5cc270b50c6fcd$var$PORTAL_NAME="PopoverPortal",[$cb5cc270b50c6fcd$var$PortalProvider,$cb5cc270b50c6fcd$var$usePortalContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$PORTAL_NAME,{forceMount:void 0}),$cb5cc270b50c6fcd$var$CONTENT_NAME="PopoverContent",$cb5cc270b50c6fcd$export$d7e1f420b25549ff=reactExports.forwardRef((Nr,_r)=>{const Ur=$cb5cc270b50c6fcd$var$usePortalContext($cb5cc270b50c6fcd$var$CONTENT_NAME,Nr.__scopePopover),{forceMount:jr=Ur.forceMount,...Gr}=Nr,Wr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,Nr.__scopePopover);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:jr||Wr.open},Wr.modal?reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentModal,_extends$1({},Gr,{ref:_r})):reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentNonModal,_extends$1({},Gr,{ref:_r})))}),$cb5cc270b50c6fcd$var$PopoverContentModal=reactExports.forwardRef((Nr,_r)=>{const Ur=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,Nr.__scopePopover),jr=reactExports.useRef(null),Gr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,jr),Wr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Zr=jr.current;if(Zr)return hideOthers(Zr)},[]),reactExports.createElement($01b9c$RemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},Nr,{ref:Gr,trapFocus:Ur.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onCloseAutoFocus,Zr=>{var Yr;Zr.preventDefault(),Wr.current||(Yr=Ur.triggerRef.current)===null||Yr===void 0||Yr.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onPointerDownOutside,Zr=>{const Yr=Zr.detail.originalEvent,ts=Yr.button===0&&Yr.ctrlKey===!0,es=Yr.button===2||ts;Wr.current=es},{checkForDefaultPrevented:!1}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onFocusOutside,Zr=>Zr.preventDefault(),{checkForDefaultPrevented:!1})})))}),$cb5cc270b50c6fcd$var$PopoverContentNonModal=reactExports.forwardRef((Nr,_r)=>{const Ur=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,Nr.__scopePopover),jr=reactExports.useRef(!1),Gr=reactExports.useRef(!1);return reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},Nr,{ref:_r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Wr=>{var Zr;if((Zr=Nr.onCloseAutoFocus)===null||Zr===void 0||Zr.call(Nr,Wr),!Wr.defaultPrevented){var Yr;jr.current||(Yr=Ur.triggerRef.current)===null||Yr===void 0||Yr.focus(),Wr.preventDefault()}jr.current=!1,Gr.current=!1},onInteractOutside:Wr=>{var Zr,Yr;(Zr=Nr.onInteractOutside)===null||Zr===void 0||Zr.call(Nr,Wr),Wr.defaultPrevented||(jr.current=!0,Wr.detail.originalEvent.type==="pointerdown"&&(Gr.current=!0));const ts=Wr.target;((Yr=Ur.triggerRef.current)===null||Yr===void 0?void 0:Yr.contains(ts))&&Wr.preventDefault(),Wr.detail.originalEvent.type==="focusin"&&Gr.current&&Wr.preventDefault()}}))}),$cb5cc270b50c6fcd$var$PopoverContentImpl=reactExports.forwardRef((Nr,_r)=>{const{__scopePopover:Ur,trapFocus:jr,onOpenAutoFocus:Gr,onCloseAutoFocus:Wr,disableOutsidePointerEvents:Zr,onEscapeKeyDown:Yr,onPointerDownOutside:ts,onFocusOutside:es,onInteractOutside:ns,...Xr}=Nr,qr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,Ur),_i=$cb5cc270b50c6fcd$var$usePopperScope(Ur);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6$1,{asChild:!0,loop:!0,trapped:jr,onMountAutoFocus:Gr,onUnmountAutoFocus:Wr},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22$1,{asChild:!0,disableOutsidePointerEvents:Zr,onInteractOutside:ns,onEscapeKeyDown:Yr,onPointerDownOutside:ts,onFocusOutside:es,onDismiss:()=>qr.onOpenChange(!1)},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2$1,_extends$1({"data-state":$cb5cc270b50c6fcd$var$getState(qr.open),role:"dialog",id:qr.contentId},_i,Xr,{ref:_r,style:{...Xr.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),$cb5cc270b50c6fcd$var$CLOSE_NAME="PopoverClose",$cb5cc270b50c6fcd$export$d6ac43ebaa40d53e=reactExports.forwardRef((Nr,_r)=>{const{__scopePopover:Ur,...jr}=Nr,Gr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CLOSE_NAME,Ur);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button"},jr,{ref:_r,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onClick,()=>Gr.onOpenChange(!1))}))}),$cb5cc270b50c6fcd$export$3152841115e061b2=reactExports.forwardRef((Nr,_r)=>{const{__scopePopover:Ur,...jr}=Nr,Gr=$cb5cc270b50c6fcd$var$usePopperScope(Ur);return reactExports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends$1({},Gr,jr,{ref:_r}))});function $cb5cc270b50c6fcd$var$getState(Nr){return Nr?"open":"closed"}const $cb5cc270b50c6fcd$export$be92b6f5f03c0fe9=$cb5cc270b50c6fcd$export$5b6b19405a83ff9d,$cb5cc270b50c6fcd$export$41fb9f06171c75f4=$cb5cc270b50c6fcd$export$7dacb05d26466c3,$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2=$cb5cc270b50c6fcd$export$d7e1f420b25549ff,$cb5cc270b50c6fcd$export$f39c2d165cd861fe=$cb5cc270b50c6fcd$export$d6ac43ebaa40d53e,$cb5cc270b50c6fcd$export$21b07c8f274aebd5=$cb5cc270b50c6fcd$export$3152841115e061b2;function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(Nr,[_r,Ur]){return Math.min(Ur,Math.max(_r,Nr))}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((Nr,_r)=>{var Ur;const{disableOutsidePointerEvents:jr=!1,onEscapeKeyDown:Gr,onPointerDownOutside:Wr,onFocusOutside:Zr,onInteractOutside:Yr,onDismiss:ts,...es}=Nr,ns=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[Xr,qr]=reactExports.useState(null),_i=(Ur=Xr==null?void 0:Xr.ownerDocument)!==null&&Ur!==void 0?Ur:globalThis==null?void 0:globalThis.document,[,rs]=reactExports.useState({}),is=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,ys=>qr(ys)),ss=Array.from(ns.layers),[os]=[...ns.layersWithOutsidePointerEventsDisabled].slice(-1),ls=ss.indexOf(os),cs=Xr?ss.indexOf(Xr):-1,ds=ns.layersWithOutsidePointerEventsDisabled.size>0,fs=cs>=ls,ms=$5cb92bef7577960e$var$usePointerDownOutside(ys=>{const ws=ys.target,xs=[...ns.branches].some(Es=>Es.contains(ws));!fs||xs||(Wr==null||Wr(ys),Yr==null||Yr(ys),ys.defaultPrevented||ts==null||ts())},_i),ps=$5cb92bef7577960e$var$useFocusOutside(ys=>{const ws=ys.target;[...ns.branches].some(Es=>Es.contains(ws))||(Zr==null||Zr(ys),Yr==null||Yr(ys),ys.defaultPrevented||ts==null||ts())},_i);return $addc16e1bbe58fd0$export$3a72a57244d6e765(ys=>{cs===ns.layers.size-1&&(Gr==null||Gr(ys),!ys.defaultPrevented&&ts&&(ys.preventDefault(),ts()))},_i),reactExports.useEffect(()=>{if(Xr)return jr&&(ns.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=_i.body.style.pointerEvents,_i.body.style.pointerEvents="none"),ns.layersWithOutsidePointerEventsDisabled.add(Xr)),ns.layers.add(Xr),$5cb92bef7577960e$var$dispatchUpdate(),()=>{jr&&ns.layersWithOutsidePointerEventsDisabled.size===1&&(_i.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[Xr,_i,jr,ns]),reactExports.useEffect(()=>()=>{Xr&&(ns.layers.delete(Xr),ns.layersWithOutsidePointerEventsDisabled.delete(Xr),$5cb92bef7577960e$var$dispatchUpdate())},[Xr,ns]),reactExports.useEffect(()=>{const ys=()=>rs({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,ys),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,ys)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},es,{ref:is,style:{pointerEvents:ds?fs?"auto":"none":void 0,...Nr.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onFocusCapture,ps.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onBlurCapture,ps.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onPointerDownCapture,ms.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(Nr,_r=globalThis==null?void 0:globalThis.document){const Ur=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Nr),jr=reactExports.useRef(!1),Gr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Wr=Yr=>{if(Yr.target&&!jr.current){let ns=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,Ur,es,{discrete:!0})};var ts=ns;const es={originalEvent:Yr};Yr.pointerType==="touch"?(_r.removeEventListener("click",Gr.current),Gr.current=ns,_r.addEventListener("click",Gr.current,{once:!0})):ns()}jr.current=!1},Zr=window.setTimeout(()=>{_r.addEventListener("pointerdown",Wr)},0);return()=>{window.clearTimeout(Zr),_r.removeEventListener("pointerdown",Wr),_r.removeEventListener("click",Gr.current)}},[_r,Ur]),{onPointerDownCapture:()=>jr.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(Nr,_r=globalThis==null?void 0:globalThis.document){const Ur=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Nr),jr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Gr=Wr=>{Wr.target&&!jr.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,Ur,{originalEvent:Wr},{discrete:!1})};return _r.addEventListener("focusin",Gr),()=>_r.removeEventListener("focusin",Gr)},[_r,Ur]),{onFocusCapture:()=>jr.current=!0,onBlurCapture:()=>jr.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const Nr=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(Nr)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(Nr,_r,Ur,{discrete:jr}){const Gr=Ur.originalEvent.target,Wr=new CustomEvent(Nr,{bubbles:!1,cancelable:!0,detail:Ur});_r&&Gr.addEventListener(Nr,_r,{once:!0}),jr?$8927f6f2acc4f386$export$6d1a0317bde7de7f(Gr,Wr):Gr.dispatchEvent(Wr)}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((Nr,_r)=>{const{loop:Ur=!1,trapped:jr=!1,onMountAutoFocus:Gr,onUnmountAutoFocus:Wr,...Zr}=Nr,[Yr,ts]=reactExports.useState(null),es=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Gr),ns=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Wr),Xr=reactExports.useRef(null),qr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,is=>ts(is)),_i=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(jr){let ls=function(ms){if(_i.paused||!Yr)return;const ps=ms.target;Yr.contains(ps)?Xr.current=ps:$d3863c46a17e8a28$var$focus(Xr.current,{select:!0})},cs=function(ms){if(_i.paused||!Yr)return;const ps=ms.relatedTarget;ps!==null&&(Yr.contains(ps)||$d3863c46a17e8a28$var$focus(Xr.current,{select:!0}))},ds=function(ms){const ps=document.activeElement;for(const ys of ms)ys.removedNodes.length>0&&(Yr!=null&&Yr.contains(ps)||$d3863c46a17e8a28$var$focus(Yr))};var is=ls,ss=cs,os=ds;document.addEventListener("focusin",ls),document.addEventListener("focusout",cs);const fs=new MutationObserver(ds);return Yr&&fs.observe(Yr,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ls),document.removeEventListener("focusout",cs),fs.disconnect()}}},[jr,Yr,_i.paused]),reactExports.useEffect(()=>{if(Yr){$d3863c46a17e8a28$var$focusScopesStack.add(_i);const is=document.activeElement;if(!Yr.contains(is)){const os=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Yr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,es),Yr.dispatchEvent(os),os.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(Yr)),{select:!0}),document.activeElement===is&&$d3863c46a17e8a28$var$focus(Yr))}return()=>{Yr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,es),setTimeout(()=>{const os=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Yr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,ns),Yr.dispatchEvent(os),os.defaultPrevented||$d3863c46a17e8a28$var$focus(is??document.body,{select:!0}),Yr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,ns),$d3863c46a17e8a28$var$focusScopesStack.remove(_i)},0)}}},[Yr,es,ns,_i]);const rs=reactExports.useCallback(is=>{if(!Ur&&!jr||_i.paused)return;const ss=is.key==="Tab"&&!is.altKey&&!is.ctrlKey&&!is.metaKey,os=document.activeElement;if(ss&&os){const ls=is.currentTarget,[cs,ds]=$d3863c46a17e8a28$var$getTabbableEdges(ls);cs&&ds?!is.shiftKey&&os===ds?(is.preventDefault(),Ur&&$d3863c46a17e8a28$var$focus(cs,{select:!0})):is.shiftKey&&os===cs&&(is.preventDefault(),Ur&&$d3863c46a17e8a28$var$focus(ds,{select:!0})):os===ls&&is.preventDefault()}},[Ur,jr,_i.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:-1},Zr,{ref:qr,onKeyDown:rs}))});function $d3863c46a17e8a28$var$focusFirst(Nr,{select:_r=!1}={}){const Ur=document.activeElement;for(const jr of Nr)if($d3863c46a17e8a28$var$focus(jr,{select:_r}),document.activeElement!==Ur)return}function $d3863c46a17e8a28$var$getTabbableEdges(Nr){const _r=$d3863c46a17e8a28$var$getTabbableCandidates(Nr),Ur=$d3863c46a17e8a28$var$findVisible(_r,Nr),jr=$d3863c46a17e8a28$var$findVisible(_r.reverse(),Nr);return[Ur,jr]}function $d3863c46a17e8a28$var$getTabbableCandidates(Nr){const _r=[],Ur=document.createTreeWalker(Nr,NodeFilter.SHOW_ELEMENT,{acceptNode:jr=>{const Gr=jr.tagName==="INPUT"&&jr.type==="hidden";return jr.disabled||jr.hidden||Gr?NodeFilter.FILTER_SKIP:jr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;Ur.nextNode();)_r.push(Ur.currentNode);return _r}function $d3863c46a17e8a28$var$findVisible(Nr,_r){for(const Ur of Nr)if(!$d3863c46a17e8a28$var$isHidden(Ur,{upTo:_r}))return Ur}function $d3863c46a17e8a28$var$isHidden(Nr,{upTo:_r}){if(getComputedStyle(Nr).visibility==="hidden")return!0;for(;Nr;){if(_r!==void 0&&Nr===_r)return!1;if(getComputedStyle(Nr).display==="none")return!0;Nr=Nr.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(Nr){return Nr instanceof HTMLInputElement&&"select"in Nr}function $d3863c46a17e8a28$var$focus(Nr,{select:_r=!1}={}){if(Nr&&Nr.focus){const Ur=document.activeElement;Nr.focus({preventScroll:!0}),Nr!==Ur&&$d3863c46a17e8a28$var$isSelectableInput(Nr)&&_r&&Nr.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let Nr=[];return{add(_r){const Ur=Nr[0];_r!==Ur&&(Ur==null||Ur.pause()),Nr=$d3863c46a17e8a28$var$arrayRemove(Nr,_r),Nr.unshift(_r)},remove(_r){var Ur;Nr=$d3863c46a17e8a28$var$arrayRemove(Nr,_r),(Ur=Nr[0])===null||Ur===void 0||Ur.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(Nr,_r){const Ur=[...Nr],jr=Ur.indexOf(_r);return jr!==-1&&Ur.splice(jr,1),Ur}function $d3863c46a17e8a28$var$removeLinks(Nr){return Nr.filter(_r=>_r.tagName!=="A")}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=Nr=>{const{__scopePopper:_r,children:Ur}=Nr,[jr,Gr]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:_r,anchor:jr,onAnchorChange:Gr},Ur)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((Nr,_r)=>{const{__scopePopper:Ur,virtualRef:jr,...Gr}=Nr,Wr=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,Ur),Zr=reactExports.useRef(null),Yr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Zr);return reactExports.useEffect(()=>{Wr.onAnchorChange((jr==null?void 0:jr.current)||Zr.current)}),jr?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Gr,{ref:Yr}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((Nr,_r)=>{var Ur,jr,Gr,Wr,Zr,Yr,ts,es;const{__scopePopper:ns,side:Xr="bottom",sideOffset:qr=0,align:_i="center",alignOffset:rs=0,arrowPadding:is=0,collisionBoundary:ss=[],collisionPadding:os=0,sticky:ls="partial",hideWhenDetached:cs=!1,avoidCollisions:ds=!0,onPlaced:fs,...ms}=Nr,ps=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,ns),[ys,ws]=reactExports.useState(null),xs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Ns=>ws(Ns)),[Es,Rs]=reactExports.useState(null),_s=$db6c3485150b8e66$export$1ab7ae714698c4b8(Es),Bs=(Ur=_s==null?void 0:_s.width)!==null&&Ur!==void 0?Ur:0,vs=(jr=_s==null?void 0:_s.height)!==null&&jr!==void 0?jr:0,Cs=Xr+(_i!=="center"?"-"+_i:""),Ss=typeof os=="number"?os:{top:0,right:0,bottom:0,left:0,...os},As=Array.isArray(ss)?ss:[ss],Us=As.length>0,Ks={padding:Ss,boundary:As.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:Us},{refs:Ws,floatingStyles:Js,placement:ho,isPositioned:so,middlewareData:io}=useFloating({strategy:"fixed",placement:Cs,whileElementsMounted:autoUpdate,elements:{reference:ps.anchor},middleware:[offset({mainAxis:qr+vs,alignmentAxis:rs}),ds&&shift({mainAxis:!0,crossAxis:!1,limiter:ls==="partial"?limitShift():void 0,...Ks}),ds&&flip({...Ks}),size({...Ks,apply:({elements:Ns,rects:to,availableWidth:ao,availableHeight:lo})=>{const{width:Io,height:po}=to.reference,Fo=Ns.floating.style;Fo.setProperty("--radix-popper-available-width",`${ao}px`),Fo.setProperty("--radix-popper-available-height",`${lo}px`),Fo.setProperty("--radix-popper-anchor-width",`${Io}px`),Fo.setProperty("--radix-popper-anchor-height",`${po}px`)}}),Es&&arrow({element:Es,padding:is}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Bs,arrowHeight:vs}),cs&&hide({strategy:"referenceHidden"})]}),[vo,co]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(ho),go=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(fs);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{so&&(go==null||go())},[so,go]);const Eo=(Gr=io.arrow)===null||Gr===void 0?void 0:Gr.x,Ro=(Wr=io.arrow)===null||Wr===void 0?void 0:Wr.y,Po=((Zr=io.arrow)===null||Zr===void 0?void 0:Zr.centerOffset)!==0,[Oo,Ts]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{ys&&Ts(window.getComputedStyle(ys).zIndex)},[ys]),reactExports.createElement("div",{ref:Ws.setFloating,"data-radix-popper-content-wrapper":"",style:{...Js,transform:so?Js.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oo,"--radix-popper-transform-origin":[(Yr=io.transformOrigin)===null||Yr===void 0?void 0:Yr.x,(ts=io.transformOrigin)===null||ts===void 0?void 0:ts.y].join(" ")},dir:Nr.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:ns,placedSide:vo,onArrowChange:Rs,arrowX:Eo,arrowY:Ro,shouldHideArrow:Po},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":vo,"data-align":co},ms,{ref:xs,style:{...ms.style,animation:so?void 0:"none",opacity:(es=io.hide)!==null&&es!==void 0&&es.referenceHidden?0:void 0}}))))});function $cf1ac5d9fe0e8206$var$isNotNull(Nr){return Nr!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=Nr=>({name:"transformOrigin",options:Nr,fn(_r){var Ur,jr,Gr,Wr,Zr;const{placement:Yr,rects:ts,middlewareData:es}=_r,Xr=((Ur=es.arrow)===null||Ur===void 0?void 0:Ur.centerOffset)!==0,qr=Xr?0:Nr.arrowWidth,_i=Xr?0:Nr.arrowHeight,[rs,is]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(Yr),ss={start:"0%",center:"50%",end:"100%"}[is],os=((jr=(Gr=es.arrow)===null||Gr===void 0?void 0:Gr.x)!==null&&jr!==void 0?jr:0)+qr/2,ls=((Wr=(Zr=es.arrow)===null||Zr===void 0?void 0:Zr.y)!==null&&Wr!==void 0?Wr:0)+_i/2;let cs="",ds="";return rs==="bottom"?(cs=Xr?ss:`${os}px`,ds=`${-_i}px`):rs==="top"?(cs=Xr?ss:`${os}px`,ds=`${ts.floating.height+_i}px`):rs==="right"?(cs=`${-_i}px`,ds=Xr?ss:`${ls}px`):rs==="left"&&(cs=`${ts.floating.width+_i}px`,ds=Xr?ss:`${ls}px`),{data:{x:cs,y:ds}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(Nr){const[_r,Ur="center"]=Nr.split("-");return[_r,Ur]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((Nr,_r)=>{var Ur;const{container:jr=globalThis==null||(Ur=globalThis.document)===null||Ur===void 0?void 0:Ur.body,...Gr}=Nr;return jr?$7SXl2$reactdom.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Gr,{ref:_r})),jr):null}),$ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((Nr,_r)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},Nr,{ref:_r,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...Nr.style}}))),$cc7e05a45900e73f$var$OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],$cc7e05a45900e73f$var$SELECTION_KEYS=[" ","Enter"],$cc7e05a45900e73f$var$SELECT_NAME="Select",[$cc7e05a45900e73f$var$Collection,$cc7e05a45900e73f$var$useCollection,$cc7e05a45900e73f$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$createSelectContext,$cc7e05a45900e73f$export$286727a75dc039bd]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cc7e05a45900e73f$var$SELECT_NAME,[$cc7e05a45900e73f$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923]),$cc7e05a45900e73f$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cc7e05a45900e73f$var$SelectProvider,$cc7e05a45900e73f$var$useSelectContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$SelectNativeOptionsProvider,$cc7e05a45900e73f$var$useSelectNativeOptionsContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),$cc7e05a45900e73f$export$ef9b1a59e592288f=Nr=>{const{__scopeSelect:_r,children:Ur,open:jr,defaultOpen:Gr,onOpenChange:Wr,value:Zr,defaultValue:Yr,onValueChange:ts,dir:es,name:ns,autoComplete:Xr,disabled:qr,required:_i}=Nr,rs=$cc7e05a45900e73f$var$usePopperScope(_r),[is,ss]=reactExports.useState(null),[os,ls]=reactExports.useState(null),[cs,ds]=reactExports.useState(!1),fs=$f631663db3294ace$export$b39126d51d94e6f3(es),[ms=!1,ps]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:jr,defaultProp:Gr,onChange:Wr}),[ys,ws]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Zr,defaultProp:Yr,onChange:ts}),xs=reactExports.useRef(null),Es=is?!!is.closest("form"):!0,[Rs,_s]=reactExports.useState(new Set),Bs=Array.from(Rs).map(vs=>vs.props.value).join(";");return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,rs,reactExports.createElement($cc7e05a45900e73f$var$SelectProvider,{required:_i,scope:_r,trigger:is,onTriggerChange:ss,valueNode:os,onValueNodeChange:ls,valueNodeHasChildren:cs,onValueNodeHasChildrenChange:ds,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),value:ys,onValueChange:ws,open:ms,onOpenChange:ps,dir:fs,triggerPointerDownPosRef:xs,disabled:qr},reactExports.createElement($cc7e05a45900e73f$var$Collection.Provider,{scope:_r},reactExports.createElement($cc7e05a45900e73f$var$SelectNativeOptionsProvider,{scope:Nr.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(vs=>{_s(Cs=>new Set(Cs).add(vs))},[]),onNativeOptionRemove:reactExports.useCallback(vs=>{_s(Cs=>{const Ss=new Set(Cs);return Ss.delete(vs),Ss})},[])},Ur)),Es?reactExports.createElement($cc7e05a45900e73f$var$BubbleSelect,{key:Bs,"aria-hidden":!0,required:_i,tabIndex:-1,name:ns,autoComplete:Xr,value:ys,onChange:vs=>ws(vs.target.value),disabled:qr},ys===void 0?reactExports.createElement("option",{value:""}):null,Array.from(Rs)):null))},$cc7e05a45900e73f$var$TRIGGER_NAME="SelectTrigger",$cc7e05a45900e73f$export$3ac1e88a1c0b9f1=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,disabled:jr=!1,...Gr}=Nr,Wr=$cc7e05a45900e73f$var$usePopperScope(Ur),Zr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$TRIGGER_NAME,Ur),Yr=Zr.disabled||jr,ts=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Zr.onTriggerChange),es=$cc7e05a45900e73f$var$useCollection(Ur),[ns,Xr,qr]=$cc7e05a45900e73f$var$useTypeaheadSearch(rs=>{const is=es().filter(ls=>!ls.disabled),ss=is.find(ls=>ls.value===Zr.value),os=$cc7e05a45900e73f$var$findNextItem(is,rs,ss);os!==void 0&&Zr.onValueChange(os.value)}),_i=()=>{Yr||(Zr.onOpenChange(!0),qr())};return reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},Wr),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"combobox","aria-controls":Zr.contentId,"aria-expanded":Zr.open,"aria-required":Zr.required,"aria-autocomplete":"none",dir:Zr.dir,"data-state":Zr.open?"open":"closed",disabled:Yr,"data-disabled":Yr?"":void 0,"data-placeholder":Zr.value===void 0?"":void 0},Gr,{ref:ts,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr.onClick,rs=>{rs.currentTarget.focus()}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr.onPointerDown,rs=>{const is=rs.target;is.hasPointerCapture(rs.pointerId)&&is.releasePointerCapture(rs.pointerId),rs.button===0&&rs.ctrlKey===!1&&(_i(),Zr.triggerPointerDownPosRef.current={x:Math.round(rs.pageX),y:Math.round(rs.pageY)},rs.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr.onKeyDown,rs=>{const is=ns.current!=="";!(rs.ctrlKey||rs.altKey||rs.metaKey)&&rs.key.length===1&&Xr(rs.key),!(is&&rs.key===" ")&&$cc7e05a45900e73f$var$OPEN_KEYS.includes(rs.key)&&(_i(),rs.preventDefault())})})))}),$cc7e05a45900e73f$var$VALUE_NAME="SelectValue",$cc7e05a45900e73f$export$e288731fd71264f0=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,className:jr,style:Gr,children:Wr,placeholder:Zr,...Yr}=Nr,ts=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$VALUE_NAME,Ur),{onValueNodeHasChildrenChange:es}=ts,ns=Wr!==void 0,Xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,ts.onValueNodeChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{es(ns)},[es,ns]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},Yr,{ref:Xr,style:{pointerEvents:"none"}}),ts.value===void 0&&Zr!==void 0?Zr:Wr)}),$cc7e05a45900e73f$export$99b400cabb58c515=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,children:jr,...Gr}=Nr;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},Gr,{ref:_r}),jr||"")}),$cc7e05a45900e73f$export$b2af6c9944296213=Nr=>reactExports.createElement($f1701beae083dbae$export$602eac185826482c,_extends$1({asChild:!0},Nr)),$cc7e05a45900e73f$var$CONTENT_NAME="SelectContent",$cc7e05a45900e73f$export$c973a4b3cb86a03d=reactExports.forwardRef((Nr,_r)=>{const Ur=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,Nr.__scopeSelect),[jr,Gr]=reactExports.useState();if($9f79659886946c16$export$e5c5a5f917a5871c(()=>{Gr(new DocumentFragment)},[]),!Ur.open){const Wr=jr;return Wr?reactDomExports.createPortal(reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:Nr.__scopeSelect},reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:Nr.__scopeSelect},reactExports.createElement("div",null,Nr.children))),Wr):null}return reactExports.createElement($cc7e05a45900e73f$var$SelectContentImpl,_extends$1({},Nr,{ref:_r}))}),$cc7e05a45900e73f$var$CONTENT_MARGIN=10,[$cc7e05a45900e73f$var$SelectContentProvider,$cc7e05a45900e73f$var$useSelectContentContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME),$cc7e05a45900e73f$var$SelectContentImpl=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,position:jr="item-aligned",onCloseAutoFocus:Gr,onEscapeKeyDown:Wr,onPointerDownOutside:Zr,side:Yr,sideOffset:ts,align:es,alignOffset:ns,arrowPadding:Xr,collisionBoundary:qr,collisionPadding:_i,sticky:rs,hideWhenDetached:is,avoidCollisions:ss,...os}=Nr,ls=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,Ur),[cs,ds]=reactExports.useState(null),[fs,ms]=reactExports.useState(null),ps=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,co=>ds(co)),[ys,ws]=reactExports.useState(null),[xs,Es]=reactExports.useState(null),Rs=$cc7e05a45900e73f$var$useCollection(Ur),[_s,Bs]=reactExports.useState(!1),vs=reactExports.useRef(!1);reactExports.useEffect(()=>{if(cs)return hideOthers(cs)},[cs]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c();const Cs=reactExports.useCallback(co=>{const[go,...Eo]=Rs().map(Oo=>Oo.ref.current),[Ro]=Eo.slice(-1),Po=document.activeElement;for(const Oo of co)if(Oo===Po||(Oo==null||Oo.scrollIntoView({block:"nearest"}),Oo===go&&fs&&(fs.scrollTop=0),Oo===Ro&&fs&&(fs.scrollTop=fs.scrollHeight),Oo==null||Oo.focus(),document.activeElement!==Po))return},[Rs,fs]),Ss=reactExports.useCallback(()=>Cs([ys,cs]),[Cs,ys,cs]);reactExports.useEffect(()=>{_s&&Ss()},[_s,Ss]);const{onOpenChange:As,triggerPointerDownPosRef:Us}=ls;reactExports.useEffect(()=>{if(cs){let co={x:0,y:0};const go=Ro=>{var Po,Oo,Ts,Ns;co={x:Math.abs(Math.round(Ro.pageX)-((Po=(Oo=Us.current)===null||Oo===void 0?void 0:Oo.x)!==null&&Po!==void 0?Po:0)),y:Math.abs(Math.round(Ro.pageY)-((Ts=(Ns=Us.current)===null||Ns===void 0?void 0:Ns.y)!==null&&Ts!==void 0?Ts:0))}},Eo=Ro=>{co.x<=10&&co.y<=10?Ro.preventDefault():cs.contains(Ro.target)||As(!1),document.removeEventListener("pointermove",go),Us.current=null};return Us.current!==null&&(document.addEventListener("pointermove",go),document.addEventListener("pointerup",Eo,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",go),document.removeEventListener("pointerup",Eo,{capture:!0})}}},[cs,As,Us]),reactExports.useEffect(()=>{const co=()=>As(!1);return window.addEventListener("blur",co),window.addEventListener("resize",co),()=>{window.removeEventListener("blur",co),window.removeEventListener("resize",co)}},[As]);const[Ks,Ws]=$cc7e05a45900e73f$var$useTypeaheadSearch(co=>{const go=Rs().filter(Po=>!Po.disabled),Eo=go.find(Po=>Po.ref.current===document.activeElement),Ro=$cc7e05a45900e73f$var$findNextItem(go,co,Eo);Ro&&setTimeout(()=>Ro.ref.current.focus())}),Js=reactExports.useCallback((co,go,Eo)=>{const Ro=!vs.current&&!Eo;(ls.value!==void 0&&ls.value===go||Ro)&&(ws(co),Ro&&(vs.current=!0))},[ls.value]),ho=reactExports.useCallback(()=>cs==null?void 0:cs.focus(),[cs]),so=reactExports.useCallback((co,go,Eo)=>{const Ro=!vs.current&&!Eo;(ls.value!==void 0&&ls.value===go||Ro)&&Es(co)},[ls.value]),io=jr==="popper"?$cc7e05a45900e73f$var$SelectPopperPosition:$cc7e05a45900e73f$var$SelectItemAlignedPosition,vo=io===$cc7e05a45900e73f$var$SelectPopperPosition?{side:Yr,sideOffset:ts,align:es,alignOffset:ns,arrowPadding:Xr,collisionBoundary:qr,collisionPadding:_i,sticky:rs,hideWhenDetached:is,avoidCollisions:ss}:{};return reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:Ur,content:cs,viewport:fs,onViewportChange:ms,itemRefCallback:Js,selectedItem:ys,onItemLeave:ho,itemTextRefCallback:so,focusSelectedItem:Ss,selectedItemText:xs,position:jr,isPositioned:_s,searchRef:Ks},reactExports.createElement($01b9c$RemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:ls.open,onMountAutoFocus:co=>{co.preventDefault()},onUnmountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr,co=>{var go;(go=ls.trigger)===null||go===void 0||go.focus({preventScroll:!0}),co.preventDefault()})},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:Wr,onPointerDownOutside:Zr,onFocusOutside:co=>co.preventDefault(),onDismiss:()=>ls.onOpenChange(!1)},reactExports.createElement(io,_extends$1({role:"listbox",id:ls.contentId,"data-state":ls.open?"open":"closed",dir:ls.dir,onContextMenu:co=>co.preventDefault()},os,vo,{onPlaced:()=>Bs(!0),ref:ps,style:{display:"flex",flexDirection:"column",outline:"none",...os.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(os.onKeyDown,co=>{const go=co.ctrlKey||co.altKey||co.metaKey;if(co.key==="Tab"&&co.preventDefault(),!go&&co.key.length===1&&Ws(co.key),["ArrowUp","ArrowDown","Home","End"].includes(co.key)){let Ro=Rs().filter(Po=>!Po.disabled).map(Po=>Po.ref.current);if(["ArrowUp","End"].includes(co.key)&&(Ro=Ro.slice().reverse()),["ArrowUp","ArrowDown"].includes(co.key)){const Po=co.target,Oo=Ro.indexOf(Po);Ro=Ro.slice(Oo+1)}setTimeout(()=>Cs(Ro)),co.preventDefault()}})}))))))}),$cc7e05a45900e73f$var$SelectItemAlignedPosition=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,onPlaced:jr,...Gr}=Nr,Wr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,Ur),Zr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$CONTENT_NAME,Ur),[Yr,ts]=reactExports.useState(null),[es,ns]=reactExports.useState(null),Xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,ps=>ns(ps)),qr=$cc7e05a45900e73f$var$useCollection(Ur),_i=reactExports.useRef(!1),rs=reactExports.useRef(!0),{viewport:is,selectedItem:ss,selectedItemText:os,focusSelectedItem:ls}=Zr,cs=reactExports.useCallback(()=>{if(Wr.trigger&&Wr.valueNode&&Yr&&es&&is&&ss&&os){const ps=Wr.trigger.getBoundingClientRect(),ys=es.getBoundingClientRect(),ws=Wr.valueNode.getBoundingClientRect(),xs=os.getBoundingClientRect();if(Wr.dir!=="rtl"){const Po=xs.left-ys.left,Oo=ws.left-Po,Ts=ps.left-Oo,Ns=ps.width+Ts,to=Math.max(Ns,ys.width),ao=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,lo=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(Oo,[$cc7e05a45900e73f$var$CONTENT_MARGIN,ao-to]);Yr.style.minWidth=Ns+"px",Yr.style.left=lo+"px"}else{const Po=ys.right-xs.right,Oo=window.innerWidth-ws.right-Po,Ts=window.innerWidth-ps.right-Oo,Ns=ps.width+Ts,to=Math.max(Ns,ys.width),ao=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,lo=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(Oo,[$cc7e05a45900e73f$var$CONTENT_MARGIN,ao-to]);Yr.style.minWidth=Ns+"px",Yr.style.right=lo+"px"}const Es=qr(),Rs=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,_s=is.scrollHeight,Bs=window.getComputedStyle(es),vs=parseInt(Bs.borderTopWidth,10),Cs=parseInt(Bs.paddingTop,10),Ss=parseInt(Bs.borderBottomWidth,10),As=parseInt(Bs.paddingBottom,10),Us=vs+Cs+_s+As+Ss,Ks=Math.min(ss.offsetHeight*5,Us),Ws=window.getComputedStyle(is),Js=parseInt(Ws.paddingTop,10),ho=parseInt(Ws.paddingBottom,10),so=ps.top+ps.height/2-$cc7e05a45900e73f$var$CONTENT_MARGIN,io=Rs-so,vo=ss.offsetHeight/2,co=ss.offsetTop+vo,go=vs+Cs+co,Eo=Us-go;if(go<=so){const Po=ss===Es[Es.length-1].ref.current;Yr.style.bottom="0px";const Oo=es.clientHeight-is.offsetTop-is.offsetHeight,Ts=Math.max(io,vo+(Po?ho:0)+Oo+Ss),Ns=go+Ts;Yr.style.height=Ns+"px"}else{const Po=ss===Es[0].ref.current;Yr.style.top="0px";const Ts=Math.max(so,vs+is.offsetTop+(Po?Js:0)+vo)+Eo;Yr.style.height=Ts+"px",is.scrollTop=go-so+is.offsetTop}Yr.style.margin=`${$cc7e05a45900e73f$var$CONTENT_MARGIN}px 0`,Yr.style.minHeight=Ks+"px",Yr.style.maxHeight=Rs+"px",jr==null||jr(),requestAnimationFrame(()=>_i.current=!0)}},[qr,Wr.trigger,Wr.valueNode,Yr,es,is,ss,os,Wr.dir,jr]);$9f79659886946c16$export$e5c5a5f917a5871c(()=>cs(),[cs]);const[ds,fs]=reactExports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{es&&fs(window.getComputedStyle(es).zIndex)},[es]);const ms=reactExports.useCallback(ps=>{ps&&rs.current===!0&&(cs(),ls==null||ls(),rs.current=!1)},[cs,ls]);return reactExports.createElement($cc7e05a45900e73f$var$SelectViewportProvider,{scope:Ur,contentWrapper:Yr,shouldExpandOnScrollRef:_i,onScrollButtonChange:ms},reactExports.createElement("div",{ref:ts,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ds}},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Gr,{ref:Xr,style:{boxSizing:"border-box",maxHeight:"100%",...Gr.style}}))))}),$cc7e05a45900e73f$var$SelectPopperPosition=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,align:jr="start",collisionPadding:Gr=$cc7e05a45900e73f$var$CONTENT_MARGIN,...Wr}=Nr,Zr=$cc7e05a45900e73f$var$usePopperScope(Ur);return reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({},Zr,Wr,{ref:_r,align:jr,collisionPadding:Gr,style:{boxSizing:"border-box",...Wr.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[$cc7e05a45900e73f$var$SelectViewportProvider,$cc7e05a45900e73f$var$useSelectViewportContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,{}),$cc7e05a45900e73f$var$VIEWPORT_NAME="SelectViewport",$cc7e05a45900e73f$export$9ed6e7b40248d36d=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,...jr}=Nr,Gr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$VIEWPORT_NAME,Ur),Wr=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$VIEWPORT_NAME,Ur),Zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Gr.onViewportChange),Yr=reactExports.useRef(0);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:Ur},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-radix-select-viewport":"",role:"presentation"},jr,{ref:Zr,style:{position:"relative",flex:1,overflow:"auto",...jr.style},onScroll:$e42e1063c40fb3ef$export$b9ecd428b558ff10(jr.onScroll,ts=>{const es=ts.currentTarget,{contentWrapper:ns,shouldExpandOnScrollRef:Xr}=Wr;if(Xr!=null&&Xr.current&&ns){const qr=Math.abs(Yr.current-es.scrollTop);if(qr>0){const _i=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,rs=parseFloat(ns.style.minHeight),is=parseFloat(ns.style.height),ss=Math.max(rs,is);if(ss<_i){const os=ss+qr,ls=Math.min(_i,os),cs=os-ls;ns.style.height=ls+"px",ns.style.bottom==="0px"&&(es.scrollTop=cs>0?cs:0,ns.style.justifyContent="flex-end")}}}Yr.current=es.scrollTop})}))))}),$cc7e05a45900e73f$var$GROUP_NAME="SelectGroup",[$cc7e05a45900e73f$var$SelectGroupContextProvider,$cc7e05a45900e73f$var$useSelectGroupContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$GROUP_NAME),$cc7e05a45900e73f$export$ee25a334c55de1f4=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,...jr}=Nr,Gr=$1746a345f3d73bb7$export$f680877a34711e37();return reactExports.createElement($cc7e05a45900e73f$var$SelectGroupContextProvider,{scope:Ur,id:Gr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"group","aria-labelledby":Gr},jr,{ref:_r})))}),$cc7e05a45900e73f$var$LABEL_NAME="SelectLabel",$cc7e05a45900e73f$export$f67338d29bd972f8=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,...jr}=Nr,Gr=$cc7e05a45900e73f$var$useSelectGroupContext($cc7e05a45900e73f$var$LABEL_NAME,Ur);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({id:Gr.id},jr,{ref:_r}))}),$cc7e05a45900e73f$var$ITEM_NAME="SelectItem",[$cc7e05a45900e73f$var$SelectItemContextProvider,$cc7e05a45900e73f$var$useSelectItemContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$ITEM_NAME),$cc7e05a45900e73f$export$13ef48a934230896=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,value:jr,disabled:Gr=!1,textValue:Wr,...Zr}=Nr,Yr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_NAME,Ur),ts=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_NAME,Ur),es=Yr.value===jr,[ns,Xr]=reactExports.useState(Wr??""),[qr,_i]=reactExports.useState(!1),rs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,os=>{var ls;return(ls=ts.itemRefCallback)===null||ls===void 0?void 0:ls.call(ts,os,jr,Gr)}),is=$1746a345f3d73bb7$export$f680877a34711e37(),ss=()=>{Gr||(Yr.onValueChange(jr),Yr.onOpenChange(!1))};return reactExports.createElement($cc7e05a45900e73f$var$SelectItemContextProvider,{scope:Ur,value:jr,disabled:Gr,textId:is,isSelected:es,onItemTextChange:reactExports.useCallback(os=>{Xr(ls=>{var cs;return ls||((cs=os==null?void 0:os.textContent)!==null&&cs!==void 0?cs:"").trim()})},[])},reactExports.createElement($cc7e05a45900e73f$var$Collection.ItemSlot,{scope:Ur,value:jr,disabled:Gr,textValue:ns},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"option","aria-labelledby":is,"data-highlighted":qr?"":void 0,"aria-selected":es&&qr,"data-state":es?"checked":"unchecked","aria-disabled":Gr||void 0,"data-disabled":Gr?"":void 0,tabIndex:Gr?void 0:-1},Zr,{ref:rs,onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Zr.onFocus,()=>_i(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Zr.onBlur,()=>_i(!1)),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Zr.onPointerUp,ss),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Zr.onPointerMove,os=>{if(Gr){var ls;(ls=ts.onItemLeave)===null||ls===void 0||ls.call(ts)}else os.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Zr.onPointerLeave,os=>{if(os.currentTarget===document.activeElement){var ls;(ls=ts.onItemLeave)===null||ls===void 0||ls.call(ts)}}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Zr.onKeyDown,os=>{var ls;((ls=ts.searchRef)===null||ls===void 0?void 0:ls.current)!==""&&os.key===" "||($cc7e05a45900e73f$var$SELECTION_KEYS.includes(os.key)&&ss(),os.key===" "&&os.preventDefault())})}))))}),$cc7e05a45900e73f$var$ITEM_TEXT_NAME="SelectItemText",$cc7e05a45900e73f$export$3572fb0fb821ff49=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,className:jr,style:Gr,...Wr}=Nr,Zr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Ur),Yr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Ur),ts=$cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Ur),es=$cc7e05a45900e73f$var$useSelectNativeOptionsContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Ur),[ns,Xr]=reactExports.useState(null),qr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,os=>Xr(os),ts.onItemTextChange,os=>{var ls;return(ls=Yr.itemTextRefCallback)===null||ls===void 0?void 0:ls.call(Yr,os,ts.value,ts.disabled)}),_i=ns==null?void 0:ns.textContent,rs=reactExports.useMemo(()=>reactExports.createElement("option",{key:ts.value,value:ts.value,disabled:ts.disabled},_i),[ts.disabled,ts.value,_i]),{onNativeOptionAdd:is,onNativeOptionRemove:ss}=es;return $9f79659886946c16$export$e5c5a5f917a5871c(()=>(is(rs),()=>ss(rs)),[is,ss,rs]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({id:ts.textId},Wr,{ref:qr})),ts.isSelected&&Zr.valueNode&&!Zr.valueNodeHasChildren?reactDomExports.createPortal(Wr.children,Zr.valueNode):null)}),$cc7e05a45900e73f$var$ITEM_INDICATOR_NAME="SelectItemIndicator",$cc7e05a45900e73f$export$6b9198de19accfe6=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,...jr}=Nr;return $cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_INDICATOR_NAME,Ur).isSelected?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},jr,{ref:_r})):null}),$cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",$cc7e05a45900e73f$export$d8117927658af6d7=reactExports.forwardRef((Nr,_r)=>{const Ur=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,Nr.__scopeSelect),jr=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,Nr.__scopeSelect),[Gr,Wr]=reactExports.useState(!1),Zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,jr.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(Ur.viewport&&Ur.isPositioned){let es=function(){const ns=ts.scrollTop>0;Wr(ns)};var Yr=es;const ts=Ur.viewport;return es(),ts.addEventListener("scroll",es),()=>ts.removeEventListener("scroll",es)}},[Ur.viewport,Ur.isPositioned]),Gr?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},Nr,{ref:Zr,onAutoScroll:()=>{const{viewport:Yr,selectedItem:ts}=Ur;Yr&&ts&&(Yr.scrollTop=Yr.scrollTop-ts.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",$cc7e05a45900e73f$export$ff951e476c12189=reactExports.forwardRef((Nr,_r)=>{const Ur=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,Nr.__scopeSelect),jr=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,Nr.__scopeSelect),[Gr,Wr]=reactExports.useState(!1),Zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,jr.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(Ur.viewport&&Ur.isPositioned){let es=function(){const ns=ts.scrollHeight-ts.clientHeight,Xr=Math.ceil(ts.scrollTop)<ns;Wr(Xr)};var Yr=es;const ts=Ur.viewport;return es(),ts.addEventListener("scroll",es),()=>ts.removeEventListener("scroll",es)}},[Ur.viewport,Ur.isPositioned]),Gr?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},Nr,{ref:Zr,onAutoScroll:()=>{const{viewport:Yr,selectedItem:ts}=Ur;Yr&&ts&&(Yr.scrollTop=Yr.scrollTop+ts.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SelectScrollButtonImpl=reactExports.forwardRef((Nr,_r)=>{const{__scopeSelect:Ur,onAutoScroll:jr,...Gr}=Nr,Wr=$cc7e05a45900e73f$var$useSelectContentContext("SelectScrollButton",Ur),Zr=reactExports.useRef(null),Yr=$cc7e05a45900e73f$var$useCollection(Ur),ts=reactExports.useCallback(()=>{Zr.current!==null&&(window.clearInterval(Zr.current),Zr.current=null)},[]);return reactExports.useEffect(()=>()=>ts(),[ts]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{var es;const ns=Yr().find(Xr=>Xr.ref.current===document.activeElement);ns==null||(es=ns.ref.current)===null||es===void 0||es.scrollIntoView({block:"nearest"})},[Yr]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"aria-hidden":!0},Gr,{ref:_r,style:{flexShrink:0,...Gr.style},onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr.onPointerDown,()=>{Zr.current===null&&(Zr.current=window.setInterval(jr,50))}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr.onPointerMove,()=>{var es;(es=Wr.onItemLeave)===null||es===void 0||es.call(Wr),Zr.current===null&&(Zr.current=window.setInterval(jr,50))}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr.onPointerLeave,()=>{ts()})}))}),$cc7e05a45900e73f$var$BubbleSelect=reactExports.forwardRef((Nr,_r)=>{const{value:Ur,...jr}=Nr,Gr=reactExports.useRef(null),Wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,Gr),Zr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(Ur);return reactExports.useEffect(()=>{const Yr=Gr.current,ts=window.HTMLSelectElement.prototype,ns=Object.getOwnPropertyDescriptor(ts,"value").set;if(Zr!==Ur&&ns){const Xr=new Event("change",{bubbles:!0});ns.call(Yr,Ur),Yr.dispatchEvent(Xr)}},[Zr,Ur]),reactExports.createElement($ea1ef594cf570d83$export$439d29a4e110a164,{asChild:!0},reactExports.createElement("select",_extends$1({},jr,{ref:Wr,defaultValue:Ur})))});$cc7e05a45900e73f$var$BubbleSelect.displayName="BubbleSelect";function $cc7e05a45900e73f$var$useTypeaheadSearch(Nr){const _r=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Nr),Ur=reactExports.useRef(""),jr=reactExports.useRef(0),Gr=reactExports.useCallback(Zr=>{const Yr=Ur.current+Zr;_r(Yr),function ts(es){Ur.current=es,window.clearTimeout(jr.current),es!==""&&(jr.current=window.setTimeout(()=>ts(""),1e3))}(Yr)},[_r]),Wr=reactExports.useCallback(()=>{Ur.current="",window.clearTimeout(jr.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(jr.current),[]),[Ur,Gr,Wr]}function $cc7e05a45900e73f$var$findNextItem(Nr,_r,Ur){const Gr=_r.length>1&&Array.from(_r).every(es=>es===_r[0])?_r[0]:_r,Wr=Ur?Nr.indexOf(Ur):-1;let Zr=$cc7e05a45900e73f$var$wrapArray(Nr,Math.max(Wr,0));Gr.length===1&&(Zr=Zr.filter(es=>es!==Ur));const ts=Zr.find(es=>es.textValue.toLowerCase().startsWith(Gr.toLowerCase()));return ts!==Ur?ts:void 0}function $cc7e05a45900e73f$var$wrapArray(Nr,_r){return Nr.map((Ur,jr)=>Nr[(_r+jr)%Nr.length])}const $cc7e05a45900e73f$export$be92b6f5f03c0fe9=$cc7e05a45900e73f$export$ef9b1a59e592288f,$cc7e05a45900e73f$export$41fb9f06171c75f4=$cc7e05a45900e73f$export$3ac1e88a1c0b9f1,$cc7e05a45900e73f$export$7c6e2c02157bb7d2=$cc7e05a45900e73f$export$c973a4b3cb86a03d,$cc7e05a45900e73f$export$b04be29aa201d4f5=$cc7e05a45900e73f$export$f67338d29bd972f8,$cc7e05a45900e73f$export$6d08773d2e66f8f2=$cc7e05a45900e73f$export$13ef48a934230896;var openseadragon={exports:{}};(function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(Nr){return new OpenSeadragon.Viewer(Nr)}(function(Nr){Nr.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var _r={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},Ur=Object.prototype.toString,jr=Object.prototype.hasOwnProperty;Nr.isFunction=function(Gr){return Nr.type(Gr)==="function"},Nr.isArray=Array.isArray||function(Gr){return Nr.type(Gr)==="array"},Nr.isWindow=function(Gr){return Gr&&typeof Gr=="object"&&"setInterval"in Gr},Nr.type=function(Gr){return Gr==null?String(Gr):_r[Ur.call(Gr)]||"object"},Nr.isPlainObject=function(Gr){if(!Gr||OpenSeadragon.type(Gr)!=="object"||Gr.nodeType||Nr.isWindow(Gr)||Gr.constructor&&!jr.call(Gr,"constructor")&&!jr.call(Gr.constructor.prototype,"isPrototypeOf"))return!1;var Wr;for(var Zr in Gr)Wr=Zr;return Wr===void 0||jr.call(Gr,Wr)},Nr.isEmptyObject=function(Gr){for(var Wr in Gr)return!1;return!0},Nr.freezeObject=function(Gr){return Object.freeze?Nr.freezeObject=Object.freeze:Nr.freezeObject=function(Wr){return Wr},Nr.freezeObject(Gr)},Nr.supportsCanvas=function(){var Gr=document.createElement("canvas");return!!(Nr.isFunction(Gr.getContext)&&Gr.getContext("2d"))}(),Nr.isCanvasTainted=function(Gr){var Wr=!1;try{Gr.getContext("2d").getImageData(0,0,1,1)}catch{Wr=!0}return Wr},Nr.pixelDensityRatio=function(){if(Nr.supportsCanvas){var Gr=document.createElement("canvas").getContext("2d"),Wr=window.devicePixelRatio||1,Zr=Gr.webkitBackingStorePixelRatio||Gr.mozBackingStorePixelRatio||Gr.msBackingStorePixelRatio||Gr.oBackingStorePixelRatio||Gr.backingStorePixelRatio||1;return Math.max(Wr,1)/Zr}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var Nr,_r,Ur,jr,Gr,Wr,Zr=arguments[0]||{},Yr=arguments.length,ts=!1,es=1;for(typeof Zr=="boolean"&&(ts=Zr,Zr=arguments[1]||{},es=2),typeof Zr!="object"&&!OpenSeadragon.isFunction(Zr)&&(Zr={}),Yr===es&&(Zr=this,--es);es<Yr;es++)if(Nr=arguments[es],Nr!==null||Nr!==void 0)for(_r in Nr)Ur=Zr[_r],jr=Nr[_r],Zr!==jr&&(ts&&jr&&(OpenSeadragon.isPlainObject(jr)||(Gr=OpenSeadragon.isArray(jr)))?(Gr?(Gr=!1,Wr=Ur&&OpenSeadragon.isArray(Ur)?Ur:[]):Wr=Ur&&OpenSeadragon.isPlainObject(Ur)?Ur:{},Zr[_r]=OpenSeadragon.extend(ts,Wr,jr)):jr!==void 0&&(Zr[_r]=jr));return Zr};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var Nr=navigator.userAgent;return typeof Nr!="string"?!1:Nr.indexOf("iPhone")!==-1||Nr.indexOf("iPad")!==-1||Nr.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(Nr,_r){return function(){var Ur=arguments;return Ur===void 0&&(Ur=[]),_r.apply(Nr,Ur)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(Nr){return typeof Nr=="string"&&(Nr=document.getElementById(Nr)),Nr},getElementPosition:function(Nr){var _r=new $.Point,Ur,jr;for(Nr=$.getElement(Nr),Ur=$.getElementStyle(Nr).position=="fixed",jr=getOffsetParent(Nr,Ur);jr;)_r.x+=Nr.offsetLeft,_r.y+=Nr.offsetTop,Ur&&(_r=_r.plus($.getPageScroll())),Nr=jr,Ur=$.getElementStyle(Nr).position=="fixed",jr=getOffsetParent(Nr,Ur);return _r},getElementOffset:function(Nr){Nr=$.getElement(Nr);var _r=Nr&&Nr.ownerDocument,Ur,jr,Gr={top:0,left:0};return _r?(Ur=_r.documentElement,typeof Nr.getBoundingClientRect<"u"&&(Gr=Nr.getBoundingClientRect()),jr=_r==_r.window?_r:_r.nodeType===9?_r.defaultView||_r.parentWindow:!1,new $.Point(Gr.left+(jr.pageXOffset||Ur.scrollLeft)-(Ur.clientLeft||0),Gr.top+(jr.pageYOffset||Ur.scrollTop)-(Ur.clientTop||0))):new $.Point},getElementSize:function(Nr){return Nr=$.getElement(Nr),new $.Point(Nr.clientWidth,Nr.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(Nr){return Nr=$.getElement(Nr),Nr.currentStyle}:function(Nr){return Nr=$.getElement(Nr),window.getComputedStyle(Nr,"")},getCssPropertyWithVendorPrefix:function(Nr){var _r={};return $.getCssPropertyWithVendorPrefix=function(Ur){if(_r[Ur]!==void 0)return _r[Ur];var jr=document.createElement("div").style,Gr=null;if(jr[Ur]!==void 0)Gr=Ur;else for(var Wr=["Webkit","Moz","MS","O","webkit","moz","ms","o"],Zr=$.capitalizeFirstLetter(Ur),Yr=0;Yr<Wr.length;Yr++){var ts=Wr[Yr]+Zr;if(jr[ts]!==void 0){Gr=ts;break}}return _r[Ur]=Gr,Gr},$.getCssPropertyWithVendorPrefix(Nr)},capitalizeFirstLetter:function(Nr){return Nr.charAt(0).toUpperCase()+Nr.slice(1)},positiveModulo:function(Nr,_r){var Ur=Nr%_r;return Ur<0&&(Ur+=_r),Ur},pointInElement:function(Nr,_r){Nr=$.getElement(Nr);var Ur=$.getElementOffset(Nr),jr=$.getElementSize(Nr);return _r.x>=Ur.x&&_r.x<Ur.x+jr.x&&_r.y<Ur.y+jr.y&&_r.y>=Ur.y},getEvent:function(Nr){return Nr?$.getEvent=function(_r){return _r}:$.getEvent=function(){return window.event},$.getEvent(Nr)},getMousePosition:function(Nr){if(typeof Nr.pageX=="number")$.getMousePosition=function(_r){var Ur=new $.Point;return _r=$.getEvent(_r),Ur.x=_r.pageX,Ur.y=_r.pageY,Ur};else if(typeof Nr.clientX=="number")$.getMousePosition=function(_r){var Ur=new $.Point;return _r=$.getEvent(_r),Ur.x=_r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,Ur.y=_r.clientY+document.body.scrollTop+document.documentElement.scrollTop,Ur};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(Nr)},getPageScroll:function(){var Nr=document.documentElement||{},_r=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(_r.scrollLeft||_r.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(Nr.scrollLeft||Nr.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(Nr){if(typeof window.scrollTo<"u")$.setPageScroll=function(jr){window.scrollTo(jr.x,jr.y)};else{var _r=$.getPageScroll();if(_r.x===Nr.x&&_r.y===Nr.y)return;document.body.scrollLeft=Nr.x,document.body.scrollTop=Nr.y;var Ur=$.getPageScroll();if(Ur.x!==_r.x&&Ur.y!==_r.y){$.setPageScroll=function(jr){document.body.scrollLeft=jr.x,document.body.scrollTop=jr.y};return}if(document.documentElement.scrollLeft=Nr.x,document.documentElement.scrollTop=Nr.y,Ur=$.getPageScroll(),Ur.x!==_r.x&&Ur.y!==_r.y){$.setPageScroll=function(jr){document.documentElement.scrollLeft=jr.x,document.documentElement.scrollTop=jr.y};return}$.setPageScroll=function(jr){}}return $.setPageScroll(Nr)},getWindowSize:function(){var Nr=document.documentElement||{},_r=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(Nr.clientWidth||Nr.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(_r.clientWidth||_r.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(Nr){Nr=$.getElement(Nr);var _r=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(_r[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(_r[1].style,{display:"table-row"}),$.extend(_r[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),_r[0].appendChild(_r[1]),_r[1].appendChild(_r[2]),_r[2].appendChild(Nr),_r[0]},makeNeutralElement:function(Nr){var _r=document.createElement(Nr),Ur=_r.style;return Ur.background="transparent none",Ur.border="none",Ur.margin="0px",Ur.padding="0px",Ur.position="static",_r},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(Nr){return $.makeTransparentImage=function(_r){var Ur=$.makeNeutralElement("img");return Ur.src=_r,Ur},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(_r){var Ur=$.makeNeutralElement("img"),jr=null;return jr=$.makeNeutralElement("span"),jr.style.display="inline-block",Ur.onload=function(){jr.style.width=jr.style.width||Ur.width+"px",jr.style.height=jr.style.height||Ur.height+"px",Ur.onload=null,Ur=null},Ur.src=_r,jr.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+_r+"', sizingMethod='scale')",jr}),$.makeTransparentImage(Nr)},setElementOpacity:function(Nr,_r,Ur){var jr,Gr;Nr=$.getElement(Nr),Ur&&!$.Browser.alpha&&(_r=Math.round(_r)),$.Browser.opacity?Nr.style.opacity=_r<1?_r:"":_r<1?(jr=Math.round(100*_r),Gr="alpha(opacity="+jr+")",Nr.style.filter=Gr):Nr.style.filter=""},setElementTouchActionNone:function(Nr){Nr=$.getElement(Nr),typeof Nr.style.touchAction<"u"?Nr.style.touchAction="none":typeof Nr.style.msTouchAction<"u"&&(Nr.style.msTouchAction="none")},addClass:function(Nr,_r){Nr=$.getElement(Nr),Nr.className?(" "+Nr.className+" ").indexOf(" "+_r+" ")===-1&&(Nr.className+=" "+_r):Nr.className=_r},indexOf:function(Nr,_r,Ur){return Array.prototype.indexOf?this.indexOf=function(jr,Gr,Wr){return jr.indexOf(Gr,Wr)}:this.indexOf=function(jr,Gr,Wr){var Zr,Yr=Wr||0,ts;if(!jr)throw new TypeError;if(ts=jr.length,ts===0||Yr>=ts)return-1;for(Yr<0&&(Yr=ts-Math.abs(Yr)),Zr=Yr;Zr<ts;Zr++)if(jr[Zr]===Gr)return Zr;return-1},this.indexOf(Nr,_r,Ur)},removeClass:function(Nr,_r){var Ur,jr=[],Gr;for(Nr=$.getElement(Nr),Ur=Nr.className.split(/\s+/),Gr=0;Gr<Ur.length;Gr++)Ur[Gr]&&Ur[Gr]!==_r&&jr.push(Ur[Gr]);Nr.className=jr.join(" ")},addEvent:function(){if(window.addEventListener)return function(Nr,_r,Ur,jr){Nr=$.getElement(Nr),Nr.addEventListener(_r,Ur,jr)};if(window.attachEvent)return function(Nr,_r,Ur,jr){Nr=$.getElement(Nr),Nr.attachEvent("on"+_r,Ur)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(Nr,_r,Ur,jr){Nr=$.getElement(Nr),Nr.removeEventListener(_r,Ur,jr)};if(window.detachEvent)return function(Nr,_r,Ur,jr){Nr=$.getElement(Nr),Nr.detachEvent("on"+_r,Ur)};throw new Error("No known event model.")}(),cancelEvent:function(Nr){Nr=$.getEvent(Nr),Nr.preventDefault?$.cancelEvent=function(_r){_r.preventDefault()}:$.cancelEvent=function(_r){_r=$.getEvent(_r),_r.cancel=!0,_r.returnValue=!1},$.cancelEvent(Nr)},stopEvent:function(Nr){Nr=$.getEvent(Nr),Nr.stopPropagation?$.stopEvent=function(_r){_r.stopPropagation()}:$.stopEvent=function(_r){_r=$.getEvent(_r),_r.cancelBubble=!0},$.stopEvent(Nr)},createCallback:function(Nr,_r){var Ur=[],jr;for(jr=2;jr<arguments.length;jr++)Ur.push(arguments[jr]);return function(){var Gr=Ur.concat([]),Wr;for(Wr=0;Wr<arguments.length;Wr++)Gr.push(arguments[Wr]);return _r.apply(Nr,Gr)}},getUrlParameter:function(Nr){var _r=URLPARAMS[Nr];return _r||null},getUrlProtocol:function(Nr){var _r=Nr.match(/^([a-z]+:)\/\//i);return _r===null?window.location.protocol:_r[1].toLowerCase()},createAjaxRequest:function(Nr){var _r;try{_r=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{_r=!1}if(_r)window.XMLHttpRequest?$.createAjaxRequest=function(Ur){return Ur?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(Nr)},makeAjaxRequest:function(Nr,_r,Ur){var jr,Gr,Wr;$.isPlainObject(Nr)&&(_r=Nr.success,Ur=Nr.error,jr=Nr.withCredentials,Gr=Nr.headers,Wr=Nr.responseType||null,Nr=Nr.url);var Zr=$.getUrlProtocol(Nr),Yr=$.createAjaxRequest(Zr==="file:");if(!$.isFunction(_r))throw new Error("makeAjaxRequest requires a success callback");Yr.onreadystatechange=function(){Yr.readyState==4&&(Yr.onreadystatechange=function(){},Yr.status>=200&&Yr.status<300||Yr.status===0&&Zr!=="http:"&&Zr!=="https:"?_r(Yr):($.console.log("AJAX request returned %d: %s",Yr.status,Nr),$.isFunction(Ur)&&Ur(Yr)))};try{if(Yr.open("GET",Nr,!0),Wr&&(Yr.responseType=Wr),Gr)for(var ts in Gr)Object.prototype.hasOwnProperty.call(Gr,ts)&&Gr[ts]&&Yr.setRequestHeader(ts,Gr[ts]);jr&&(Yr.withCredentials=!0),Yr.send(null)}catch(qr){var es=qr.message,ns=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(ns&&typeof qr.number<"u"&&qr.number==-2147024891&&(es+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",qr.name,es),Yr.onreadystatechange=function(){},window.XDomainRequest){var Xr=new window.XDomainRequest;if(Xr){Xr.onload=function(_i){$.isFunction(_r)&&_r({responseText:Xr.responseText,status:200,statusText:"OK"})},Xr.onerror=function(_i){$.isFunction(Ur)&&Ur({responseText:Xr.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{Xr.open("GET",Nr),Xr.send()}catch{$.isFunction(Ur)&&Ur(Yr,qr)}}}else $.isFunction(Ur)&&Ur(Yr,qr)}return Yr},jsonp:function(Nr){var _r,Ur=Nr.url,jr=document.head||document.getElementsByTagName("head")[0]||document.documentElement,Gr=Nr.callbackName||"openseadragon"+$.now(),Wr=window[Gr],Zr="$1"+Gr+"$2",Yr=Nr.param||"callback",ts=Nr.callback;Ur=Ur.replace(/(\=)\?(&|$)|\?\?/i,Zr),Ur+=(/\?/.test(Ur)?"&":"?")+Yr+"="+Gr,window[Gr]=function(es){if(Wr)window[Gr]=Wr;else try{delete window[Gr]}catch{}ts&&$.isFunction(ts)&&ts(es)},_r=document.createElement("script"),(Nr.async!==void 0||Nr.async!==!1)&&(_r.async="async"),Nr.scriptCharset&&(_r.charset=Nr.scriptCharset),_r.src=Ur,_r.onload=_r.onreadystatechange=function(es,ns){(ns||!_r.readyState||/loaded|complete/.test(_r.readyState))&&(_r.onload=_r.onreadystatechange=null,jr&&_r.parentNode&&jr.removeChild(_r),_r=void 0)},jr.insertBefore(_r,jr.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(Nr){if(window.DOMParser)$.parseXml=function(_r){var Ur=null,jr;return jr=new DOMParser,Ur=jr.parseFromString(_r,"text/xml"),Ur};else if(window.ActiveXObject)$.parseXml=function(_r){var Ur=null;return Ur=new ActiveXObject("Microsoft.XMLDOM"),Ur.async=!1,Ur.loadXML(_r),Ur};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(Nr)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(Nr){return Nr=Nr||"",!!FILEFORMATS[Nr.toLowerCase()]}});var nullfunction=function(Nr){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var Nr=navigator.appVersion,_r=navigator.userAgent,Ur;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(_r.substring(_r.indexOf("MSIE")+5,_r.indexOf(";",_r.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(_r.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(_r.substring(_r.indexOf("Firefox")+8))):_r.indexOf("Safari")>=0?($.Browser.vendor=_r.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(_r.substring(_r.substring(0,_r.indexOf("Safari")).lastIndexOf("/")+1,_r.indexOf("Safari")))):(Ur=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),Ur.exec(_r)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(Nr);break}var jr=window.location.search.substring(1),Gr=jr.split("&"),Wr,Zr,Yr;for(Yr=0;Yr<Gr.length;Yr++)if(Wr=Gr[Yr],Zr=Wr.indexOf("="),Zr>0){var ts=Wr.substring(0,Zr),es=Wr.substring(Zr+1);try{URLPARAMS[ts]=decodeURIComponent(es)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",ts,es)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(Nr){var _r=Nr.requestAnimationFrame||Nr.mozRequestAnimationFrame||Nr.webkitRequestAnimationFrame||Nr.msRequestAnimationFrame,Ur=Nr.cancelAnimationFrame||Nr.mozCancelAnimationFrame||Nr.webkitCancelAnimationFrame||Nr.msCancelAnimationFrame;if(_r&&Ur)$.requestAnimationFrame=function(){return _r.apply(Nr,arguments)},$.cancelAnimationFrame=function(){return Ur.apply(Nr,arguments)};else{var jr=[],Gr=[],Wr=0,Zr;$.requestAnimationFrame=function(Yr){return jr.push([++Wr,Yr]),Zr||(Zr=setInterval(function(){if(jr.length){var ts=$.now(),es=Gr;for(Gr=jr,jr=es;Gr.length;)Gr.shift()[1](ts)}else clearInterval(Zr),Zr=void 0},1e3/50)),Wr},$.cancelAnimationFrame=function(Yr){var ts,es;for(ts=0,es=jr.length;ts<es;ts+=1)if(jr[ts][0]===Yr){jr.splice(ts,1);return}for(ts=0,es=Gr.length;ts<es;ts+=1)if(Gr[ts][0]===Yr){Gr.splice(ts,1);return}}}}(window);function getOffsetParent(Nr,_r){return _r&&Nr!=document.body?document.body:Nr.offsetParent}}(OpenSeadragon),function(Nr,_r){module.exports?module.exports=_r():Nr.OpenSeadragon=_r()}(commonjsGlobal,function(){return OpenSeadragon}),function(Nr){var _r={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(_r.supportsFullScreen=!0,_r.getFullScreenElement=function(){return document.fullscreenElement},_r.requestFullScreen=function(Ur){return Ur.requestFullscreen()},_r.exitFullScreen=function(){document.exitFullscreen()},_r.fullScreenEventName="fullscreenchange",_r.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(_r.supportsFullScreen=!0,_r.getFullScreenElement=function(){return document.msFullscreenElement},_r.requestFullScreen=function(Ur){return Ur.msRequestFullscreen()},_r.exitFullScreen=function(){document.msExitFullscreen()},_r.fullScreenEventName="MSFullscreenChange",_r.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(_r.supportsFullScreen=!0,_r.getFullScreenElement=function(){return document.webkitFullscreenElement},_r.requestFullScreen=function(Ur){return Ur.webkitRequestFullscreen()},_r.exitFullScreen=function(){document.webkitExitFullscreen()},_r.fullScreenEventName="webkitfullscreenchange",_r.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(_r.supportsFullScreen=!0,_r.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},_r.requestFullScreen=function(Ur){return Ur.webkitRequestFullScreen()},_r.exitFullScreen=function(){document.webkitCancelFullScreen()},_r.fullScreenEventName="webkitfullscreenchange",_r.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(_r.supportsFullScreen=!0,_r.getFullScreenElement=function(){return document.mozFullScreenElement},_r.requestFullScreen=function(Ur){return Ur.mozRequestFullScreen()},_r.exitFullScreen=function(){document.mozCancelFullScreen()},_r.fullScreenEventName="mozfullscreenchange",_r.fullScreenErrorEventName="mozfullscreenerror"),_r.isFullScreen=function(){return _r.getFullScreenElement()!==null},_r.cancelFullScreen=function(){Nr.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),_r.exitFullScreen()},Nr.extend(Nr,_r)}(OpenSeadragon),function(Nr){Nr.EventSource=function(){this.events={}},Nr.EventSource.prototype={addOnceHandler:function(_r,Ur,jr,Gr){var Wr=this;Gr=Gr||1;var Zr=0,Yr=function(ts){Zr++,Zr===Gr&&Wr.removeHandler(_r,Yr),Ur(ts)};this.addHandler(_r,Yr,jr)},addHandler:function(_r,Ur,jr){var Gr=this.events[_r];Gr||(this.events[_r]=Gr=[]),Ur&&Nr.isFunction(Ur)&&(Gr[Gr.length]={handler:Ur,userData:jr||null})},removeHandler:function(_r,Ur){var jr=this.events[_r],Gr=[],Wr;if(jr&&Nr.isArray(jr)){for(Wr=0;Wr<jr.length;Wr++)jr[Wr].handler!==Ur&&Gr.push(jr[Wr]);this.events[_r]=Gr}},removeAllHandlers:function(_r){if(_r)this.events[_r]=[];else for(var Ur in this.events)this.events[Ur]=[]},getHandler:function(_r){var Ur=this.events[_r];return!Ur||!Ur.length?null:(Ur=Ur.length===1?[Ur[0]]:Array.apply(null,Ur),function(jr,Gr){var Wr,Zr=Ur.length;for(Wr=0;Wr<Zr;Wr++)Ur[Wr]&&(Gr.eventSource=jr,Gr.userData=Ur[Wr].userData,Ur[Wr].handler(Gr))})},raiseEvent:function(_r,Ur){var jr=this.getHandler(_r);jr&&(Ur||(Ur={}),jr(this,Ur))}}}(OpenSeadragon),function(Nr){var _r=[],Ur={};Nr.MouseTracker=function(Ps){_r.push(this);var Os=arguments;Nr.isPlainObject(Ps)||(Ps={element:Os[0],clickTimeThreshold:Os[1],clickDistThreshold:Os[2]}),this.hash=Math.random(),this.element=Nr.getElement(Ps.element),this.clickTimeThreshold=Ps.clickTimeThreshold||Nr.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=Ps.clickDistThreshold||Nr.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=Ps.dblClickTimeThreshold||Nr.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=Ps.dblClickDistThreshold||Nr.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=Ps.userData||null,this.stopDelay=Ps.stopDelay||50,this.enterHandler=Ps.enterHandler||null,this.exitHandler=Ps.exitHandler||null,this.pressHandler=Ps.pressHandler||null,this.nonPrimaryPressHandler=Ps.nonPrimaryPressHandler||null,this.releaseHandler=Ps.releaseHandler||null,this.nonPrimaryReleaseHandler=Ps.nonPrimaryReleaseHandler||null,this.moveHandler=Ps.moveHandler||null,this.scrollHandler=Ps.scrollHandler||null,this.clickHandler=Ps.clickHandler||null,this.dblClickHandler=Ps.dblClickHandler||null,this.dragHandler=Ps.dragHandler||null,this.dragEndHandler=Ps.dragEndHandler||null,this.pinchHandler=Ps.pinchHandler||null,this.stopHandler=Ps.stopHandler||null,this.keyDownHandler=Ps.keyDownHandler||null,this.keyUpHandler=Ps.keyUpHandler||null,this.keyHandler=Ps.keyHandler||null,this.focusHandler=Ps.focusHandler||null,this.blurHandler=Ps.blurHandler||null;var Gs=this;Ur[this.hash]={click:function(Is){rs(Gs,Is)},dblclick:function(Is){is(Gs,Is)},keydown:function(Is){ss(Gs,Is)},keyup:function(Is){os(Gs,Is)},keypress:function(Is){ls(Gs,Is)},focus:function(Is){cs(Gs,Is)},blur:function(Is){ds(Gs,Is)},wheel:function(Is){fs(Gs,Is)},mousewheel:function(Is){ms(Gs,Is)},DOMMouseScroll:function(Is){ms(Gs,Is)},MozMousePixelScroll:function(Is){ms(Gs,Is)},mouseenter:function(Is){ws(Gs,Is)},mouseleave:function(Is){Rs(Gs,Is)},mouseover:function(Is){xs(Gs,Is)},mouseout:function(Is){_s(Gs,Is)},mousedown:function(Is){Cs(Gs,Is)},mouseup:function(Is){Ss(Gs,Is)},mouseupcaptured:function(Is){As(Gs,Is)},mousemove:function(Is){Ks(Gs,Is)},mousemovecaptured:function(Is){Ws(Gs,Is)},touchstart:function(Is){so(Gs,Is)},touchend:function(Is){io(Gs,Is)},touchendcaptured:function(Is){vo(Gs,Is)},touchmove:function(Is){go(Gs,Is)},touchmovecaptured:function(Is){Eo(Gs,Is)},touchcancel:function(Is){Po(Gs,Is)},gesturestart:function(Is){Oo(Gs,Is)},gesturechange:function(Is){Ts(Gs,Is)},pointerover:function(Is){Ns(Gs,Is)},MSPointerOver:function(Is){Ns(Gs,Is)},pointerout:function(Is){to(Gs,Is)},MSPointerOut:function(Is){to(Gs,Is)},pointerdown:function(Is){ao(Gs,Is)},MSPointerDown:function(Is){ao(Gs,Is)},pointerup:function(Is){lo(Gs,Is)},MSPointerUp:function(Is){lo(Gs,Is)},pointermove:function(Is){Fo(Gs,Is)},MSPointerMove:function(Is){Fo(Gs,Is)},pointercancel:function(Is){Co(Gs,Is)},MSPointerCancel:function(Is){Co(Gs,Is)},pointerupcaptured:function(Is){Io(Gs,Is)},pointermovecaptured:function(Is){Do(Gs,Is)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},Ps.startDisabled||this.setTracking(!0)},Nr.MouseTracker.prototype={destroy:function(){var Ps;for(Wr(this),this.element=null,Ps=0;Ps<_r.length;Ps++)if(_r[Ps]===this){_r.splice(Ps,1);break}Ur[this.hash]=null,delete Ur[this.hash]},isTracking:function(){return Ur[this.hash].tracking},setTracking:function(Ps){return Ps?Gr(this):Wr(this),this},getActivePointersListsExceptType:function(Ps){for(var Os=Ur[this.hash],Gs=[],Is=0;Is<Os.activePointersLists.length;++Is)Os.activePointersLists[Is].type!==Ps&&Gs.push(Os.activePointersLists[Is]);return Gs},getActivePointersListByType:function(Ps){var Os=Ur[this.hash],Gs,Is=Os.activePointersLists.length,zs;for(Gs=0;Gs<Is;Gs++)if(Os.activePointersLists[Gs].type===Ps)return Os.activePointersLists[Gs];return zs=new Nr.MouseTracker.GesturePointList(Ps),Os.activePointersLists.push(zs),zs},getActivePointerCount:function(){var Ps=Ur[this.hash],Os,Gs=Ps.activePointersLists.length,Is=0;for(Os=0;Os<Gs;Os++)Is+=Ps.activePointersLists[Os].getLength();return Is},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},Nr.MouseTracker.resetAllMouseTrackers=function(){for(var Ps=0;Ps<_r.length;Ps++)_r[Ps].isTracking()&&(_r[Ps].setTracking(!1),_r[Ps].setTracking(!0))},Nr.MouseTracker.gesturePointVelocityTracker=function(){var Ps=[],Os=0,Gs=0,Is=function(Xs,xo){return Xs.hash.toString()+xo.type+xo.id.toString()},zs=function(){var Xs,xo=Ps.length,To,jo,Xo=Nr.now(),Uo,Ml,fu;for(Uo=Xo-Gs,Gs=Xo,Xs=0;Xs<xo;Xs++)To=Ps[Xs],jo=To.gPoint,jo.direction=Math.atan2(jo.currentPos.y-To.lastPos.y,jo.currentPos.x-To.lastPos.x),Ml=To.lastPos.distanceTo(jo.currentPos),To.lastPos=jo.currentPos,fu=1e3*Ml/(Uo+1),jo.speed=.75*fu+.25*jo.speed},qs=function(Xs,xo){var To=Is(Xs,xo);Ps.push({guid:To,gPoint:xo,lastPos:xo.currentPos}),Ps.length===1&&(Gs=Nr.now(),Os=window.setInterval(zs,50))},Ys=function(Xs,xo){var To=Is(Xs,xo),jo,Xo=Ps.length;for(jo=0;jo<Xo;jo++)if(Ps[jo].guid===To){Ps.splice(jo,1),Xo--,Xo===0&&window.clearInterval(Os);break}};return{addPoint:qs,removePoint:Ys}}(),Nr.MouseTracker.captureElement=document,Nr.MouseTracker.wheelEventName=Nr.Browser.vendor==Nr.BROWSERS.IE&&Nr.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",Nr.MouseTracker.supportsMouseCapture=function(){var Ps=document.createElement("div");return Nr.isFunction(Ps.setCapture)&&Nr.isFunction(Ps.releaseCapture)}(),Nr.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",Nr.MouseTracker.wheelEventName],Nr.MouseTracker.wheelEventName=="DOMMouseScroll"&&Nr.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||Nr.Browser.vendor!==Nr.BROWSERS.IE)?(Nr.MouseTracker.havePointerEvents=!0,Nr.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),Nr.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?Nr.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:Nr.MouseTracker.maxTouchPoints=0,Nr.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(Nr.MouseTracker.havePointerEvents=!0,Nr.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),Nr.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?Nr.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:Nr.MouseTracker.maxTouchPoints=0,Nr.MouseTracker.haveMouseEnter=!1):(Nr.MouseTracker.havePointerEvents=!1,Nr.Browser.vendor===Nr.BROWSERS.IE&&Nr.Browser.version<9?(Nr.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),Nr.MouseTracker.haveMouseEnter=!0):(Nr.MouseTracker.subscribeEvents.push("mouseover","mouseout"),Nr.MouseTracker.haveMouseEnter=!1),Nr.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&Nr.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&Nr.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),Nr.MouseTracker.mousePointerId="legacy-mouse",Nr.MouseTracker.maxTouchPoints=10),Nr.MouseTracker.GesturePointList=function(Ps){this._gPoints=[],this.type=Ps,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},Nr.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(Ps){return this._gPoints.push(Ps)},removeById:function(Ps){var Os,Gs=this._gPoints.length;for(Os=0;Os<Gs;Os++)if(this._gPoints[Os].id===Ps){this._gPoints.splice(Os,1);break}return this._gPoints.length},getByIndex:function(Ps){return Ps<this._gPoints.length?this._gPoints[Ps]:null},getById:function(Ps){var Os,Gs=this._gPoints.length;for(Os=0;Os<Gs;Os++)if(this._gPoints[Os].id===Ps)return this._gPoints[Os];return null},getPrimary:function(Ps){var Os,Gs=this._gPoints.length;for(Os=0;Os<Gs;Os++)if(this._gPoints[Os].isPrimary)return this._gPoints[Os];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function jr(Ps){var Os=Ur[Ps.hash],Gs,Is=Os.activePointersLists.length;for(Gs=0;Gs<Is;Gs++)Os.activePointersLists[Gs].captureCount>0&&(Nr.removeEvent(Nr.MouseTracker.captureElement,"mousemove",Os.mousemovecaptured,!0),Nr.removeEvent(Nr.MouseTracker.captureElement,"mouseup",Os.mouseupcaptured,!0),Nr.removeEvent(Nr.MouseTracker.captureElement,Nr.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",Os.pointermovecaptured,!0),Nr.removeEvent(Nr.MouseTracker.captureElement,Nr.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",Os.pointerupcaptured,!0),Nr.removeEvent(Nr.MouseTracker.captureElement,"touchmove",Os.touchmovecaptured,!0),Nr.removeEvent(Nr.MouseTracker.captureElement,"touchend",Os.touchendcaptured,!0),Os.activePointersLists[Gs].captureCount=0);for(Gs=0;Gs<Is;Gs++)Os.activePointersLists.pop()}function Gr(Ps){var Os=Ur[Ps.hash],Gs,Is;if(!Os.tracking){for(Is=0;Is<Nr.MouseTracker.subscribeEvents.length;Is++)Gs=Nr.MouseTracker.subscribeEvents[Is],Nr.addEvent(Ps.element,Gs,Os[Gs],!1);jr(Ps),Os.tracking=!0}}function Wr(Ps){var Os=Ur[Ps.hash],Gs,Is;if(Os.tracking){for(Is=0;Is<Nr.MouseTracker.subscribeEvents.length;Is++)Gs=Nr.MouseTracker.subscribeEvents[Is],Nr.removeEvent(Ps.element,Gs,Os[Gs],!1);jr(Ps),Os.tracking=!1}}function Zr(Ps,Os){var Gs=Ur[Ps.hash];if(Os==="pointerevent")return{upName:Nr.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:Gs.pointerupcaptured,moveName:Nr.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:Gs.pointermovecaptured};if(Os==="mouse")return{upName:"mouseup",upHandler:Gs.mouseupcaptured,moveName:"mousemove",moveHandler:Gs.mousemovecaptured};if(Os==="touch")return{upName:"touchend",upHandler:Gs.touchendcaptured,moveName:"touchmove",moveHandler:Gs.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function Yr(Ps,Os,Gs){var Is=Ps.getActivePointersListByType(Os),zs;Is.captureCount+=Gs||1,Is.captureCount===1&&(Nr.Browser.vendor===Nr.BROWSERS.IE&&Nr.Browser.version<9?Ps.element.setCapture(!0):(zs=Zr(Ps,Nr.MouseTracker.havePointerEvents?"pointerevent":Os),tu&&$l(window.top)&&Nr.addEvent(window.top,zs.upName,zs.upHandler,!0),Nr.addEvent(Nr.MouseTracker.captureElement,zs.upName,zs.upHandler,!0),Nr.addEvent(Nr.MouseTracker.captureElement,zs.moveName,zs.moveHandler,!0)))}function ts(Ps,Os,Gs){var Is=Ps.getActivePointersListByType(Os),zs;Is.captureCount-=Gs||1,Is.captureCount===0&&(Nr.Browser.vendor===Nr.BROWSERS.IE&&Nr.Browser.version<9?Ps.element.releaseCapture():(zs=Zr(Ps,Nr.MouseTracker.havePointerEvents?"pointerevent":Os),tu&&$l(window.top)&&Nr.removeEvent(window.top,zs.upName,zs.upHandler,!0),Nr.removeEvent(Nr.MouseTracker.captureElement,zs.moveName,zs.moveHandler,!0),Nr.removeEvent(Nr.MouseTracker.captureElement,zs.upName,zs.upHandler,!0)))}function es(Ps){var Os;if(Nr.MouseTracker.unprefixedPointerEvents)Os=Ps.pointerType;else switch(Ps.pointerType){case 2:Os="touch";break;case 3:Os="pen";break;case 4:Os="mouse";break;default:Os=""}return Os}function ns(Ps){return Nr.getMousePosition(Ps)}function Xr(Ps,Os){return qr(ns(Ps),Os)}function qr(Ps,Os){var Gs=Nr.getElementOffset(Os);return Ps.minus(Gs)}function _i(Ps,Os){return new Nr.Point((Ps.x+Os.x)/2,(Ps.y+Os.y)/2)}function rs(Ps,Os){Ps.clickHandler&&Nr.cancelEvent(Os)}function is(Ps,Os){Ps.dblClickHandler&&Nr.cancelEvent(Os)}function ss(Ps,Os){var Gs;Ps.keyDownHandler&&(Os=Nr.getEvent(Os),Gs=Ps.keyDownHandler({eventSource:Ps,keyCode:Os.keyCode?Os.keyCode:Os.charCode,ctrl:Os.ctrlKey,shift:Os.shiftKey,alt:Os.altKey,meta:Os.metaKey,originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Gs||Nr.cancelEvent(Os))}function os(Ps,Os){var Gs;Ps.keyUpHandler&&(Os=Nr.getEvent(Os),Gs=Ps.keyUpHandler({eventSource:Ps,keyCode:Os.keyCode?Os.keyCode:Os.charCode,ctrl:Os.ctrlKey,shift:Os.shiftKey,alt:Os.altKey,meta:Os.metaKey,originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Gs||Nr.cancelEvent(Os))}function ls(Ps,Os){var Gs;Ps.keyHandler&&(Os=Nr.getEvent(Os),Gs=Ps.keyHandler({eventSource:Ps,keyCode:Os.keyCode?Os.keyCode:Os.charCode,ctrl:Os.ctrlKey,shift:Os.shiftKey,alt:Os.altKey,meta:Os.metaKey,originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Gs||Nr.cancelEvent(Os))}function cs(Ps,Os){var Gs;Ps.focusHandler&&(Os=Nr.getEvent(Os),Gs=Ps.focusHandler({eventSource:Ps,originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Gs===!1&&Nr.cancelEvent(Os))}function ds(Ps,Os){var Gs;Ps.blurHandler&&(Os=Nr.getEvent(Os),Gs=Ps.blurHandler({eventSource:Ps,originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Gs===!1&&Nr.cancelEvent(Os))}function fs(Ps,Os){ps(Ps,Os,Os)}function ms(Ps,Os){Os=Nr.getEvent(Os);var Gs={target:Os.target||Os.srcElement,type:"wheel",shiftKey:Os.shiftKey||!1,clientX:Os.clientX,clientY:Os.clientY,pageX:Os.pageX?Os.pageX:Os.clientX,pageY:Os.pageY?Os.pageY:Os.clientY,deltaMode:Os.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};Nr.MouseTracker.wheelEventName=="mousewheel"?Gs.deltaY=-Os.wheelDelta/Nr.DEFAULT_SETTINGS.pixelsPerWheelLine:Gs.deltaY=Os.detail,ps(Ps,Gs,Os)}function ps(Ps,Os,Gs){var Is=0,zs;Is=Os.deltaY<0?1:-1,Ps.scrollHandler&&(zs=Ps.scrollHandler({eventSource:Ps,pointerType:"mouse",position:Xr(Os,Ps.element),scroll:Is,shift:Os.shiftKey,isTouchEvent:!1,originalEvent:Gs,preventDefaultAction:!1,userData:Ps.userData}),zs===!1&&Nr.cancelEvent(Gs))}function ys(Ps,Os){if(Ps===Os)return!1;for(;Os&&Os!==Ps;)Os=Os.parentNode;return Os===Ps}function ws(Ps,Os){Os=Nr.getEvent(Os),Es(Ps,Os)}function xs(Ps,Os){Os=Nr.getEvent(Os),!(Os.currentTarget===Os.relatedTarget||ys(Os.currentTarget,Os.relatedTarget))&&Es(Ps,Os)}function Es(Ps,Os){var Gs={id:Nr.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:ns(Os),currentTime:Nr.now()};_l(Ps,Os,[Gs])}function Rs(Ps,Os){Os=Nr.getEvent(Os),Bs(Ps,Os)}function _s(Ps,Os){Os=Nr.getEvent(Os),!(Os.currentTarget===Os.relatedTarget||ys(Os.currentTarget,Os.relatedTarget))&&Bs(Ps,Os)}function Bs(Ps,Os){var Gs={id:Nr.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:ns(Os),currentTime:Nr.now()};Al(Ps,Os,[Gs])}function vs(Ps){return Nr.Browser.vendor===Nr.BROWSERS.IE&&Nr.Browser.version<9?Ps===1?0:Ps===2?2:Ps===4?1:-1:Ps}function Cs(Ps,Os){var Gs;Os=Nr.getEvent(Os),Gs={id:Nr.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:ns(Os),currentTime:Nr.now()},Yl(Ps,Os,[Gs],vs(Os.button))&&(Nr.stopEvent(Os),Yr(Ps,"mouse")),(Ps.clickHandler||Ps.dblClickHandler||Ps.pressHandler||Ps.dragHandler||Ps.dragEndHandler)&&Nr.cancelEvent(Os)}function Ss(Ps,Os){Us(Ps,Os)}function As(Ps,Os){Us(Ps,Os),Nr.stopEvent(Os)}function Us(Ps,Os){var Gs;Os=Nr.getEvent(Os),Gs={id:Nr.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:ns(Os),currentTime:Nr.now()},Ul(Ps,Os,[Gs],vs(Os.button))&&ts(Ps,"mouse")}function Ks(Ps,Os){Js(Ps,Os)}function Ws(Ps,Os){Js(Ps,Os),Nr.stopEvent(Os)}function Js(Ps,Os){var Gs;Os=Nr.getEvent(Os),Gs={id:Nr.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:ns(Os),currentTime:Nr.now()},eu(Ps,Os,[Gs])}function ho(Ps,Os,Gs){var Is,zs=Gs.getLength(),qs=[];if(Gs.type==="touch"||Gs.contacts>0){for(Is=0;Is<zs;Is++)qs.push(Gs.getByIndex(Is));qs.length>0&&(Ul(Ps,Os,qs,0),Gs.captureCount=1,ts(Ps,Gs.type),Al(Ps,Os,qs))}}function so(Ps,Os){var Gs,Is,zs,qs=Os.changedTouches.length,Ys=[],Xs,xo=Ps.getActivePointersListByType("touch");for(Gs=Nr.now(),xo.getLength()>Os.touches.length-qs&&(Nr.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),ho(Ps,Os,xo)),Is=0;Is<qs;Is++)Ys.push({id:Os.changedTouches[Is].identifier,type:"touch",currentPos:ns(Os.changedTouches[Is]),currentTime:Gs});for(_l(Ps,Os,Ys),Is=0;Is<_r.length;Is++)if(_r[Is]!==Ps&&_r[Is].isTracking()&&ys(_r[Is].element,Ps.element)){for(Xs=[],zs=0;zs<qs;zs++)Xs.push({id:Os.changedTouches[zs].identifier,type:"touch",currentPos:ns(Os.changedTouches[zs]),currentTime:Gs});_l(_r[Is],Os,Xs)}Yl(Ps,Os,Ys,0)&&(Nr.stopEvent(Os),Yr(Ps,"touch",qs)),Nr.cancelEvent(Os)}function io(Ps,Os){co(Ps,Os)}function vo(Ps,Os){co(Ps,Os),Nr.stopEvent(Os)}function co(Ps,Os){var Gs,Is,zs,qs=Os.changedTouches.length,Ys=[],Xs;for(Gs=Nr.now(),Is=0;Is<qs;Is++)Ys.push({id:Os.changedTouches[Is].identifier,type:"touch",currentPos:ns(Os.changedTouches[Is]),currentTime:Gs});for(Ul(Ps,Os,Ys,0)&&ts(Ps,"touch",qs),Al(Ps,Os,Ys),Is=0;Is<_r.length;Is++)if(_r[Is]!==Ps&&_r[Is].isTracking()&&ys(_r[Is].element,Ps.element)){for(Xs=[],zs=0;zs<qs;zs++)Xs.push({id:Os.changedTouches[zs].identifier,type:"touch",currentPos:ns(Os.changedTouches[zs]),currentTime:Gs});Al(_r[Is],Os,Xs)}Nr.cancelEvent(Os)}function go(Ps,Os){Ro(Ps,Os)}function Eo(Ps,Os){Ro(Ps,Os),Nr.stopEvent(Os)}function Ro(Ps,Os){var Gs,Is=Os.changedTouches.length,zs=[];for(Gs=0;Gs<Is;Gs++)zs.push({id:Os.changedTouches[Gs].identifier,type:"touch",currentPos:ns(Os.changedTouches[Gs]),currentTime:Nr.now()});eu(Ps,Os,zs),Nr.cancelEvent(Os)}function Po(Ps,Os){var Gs=Ps.getActivePointersListByType("touch");ho(Ps,Os,Gs)}function Oo(Ps,Os){return Os.stopPropagation(),Os.preventDefault(),!1}function Ts(Ps,Os){return Os.stopPropagation(),Os.preventDefault(),!1}function Ns(Ps,Os){var Gs;Os.currentTarget===Os.relatedTarget||ys(Os.currentTarget,Os.relatedTarget)||(Gs={id:Os.pointerId,type:es(Os),isPrimary:Os.isPrimary,currentPos:ns(Os),currentTime:Nr.now()},_l(Ps,Os,[Gs]))}function to(Ps,Os){var Gs;Os.currentTarget===Os.relatedTarget||ys(Os.currentTarget,Os.relatedTarget)||(Gs={id:Os.pointerId,type:es(Os),isPrimary:Os.isPrimary,currentPos:ns(Os),currentTime:Nr.now()},Al(Ps,Os,[Gs]))}function ao(Ps,Os){var Gs;Gs={id:Os.pointerId,type:es(Os),isPrimary:Os.isPrimary,currentPos:ns(Os),currentTime:Nr.now()},Yl(Ps,Os,[Gs],Os.button)&&(Nr.stopEvent(Os),Yr(Ps,Gs.type)),(Ps.clickHandler||Ps.dblClickHandler||Ps.pressHandler||Ps.dragHandler||Ps.dragEndHandler||Ps.pinchHandler)&&Nr.cancelEvent(Os)}function lo(Ps,Os){po(Ps,Os)}function Io(Ps,Os){var Gs=Ps.getActivePointersListByType(es(Os));Gs.getById(Os.pointerId)&&po(Ps,Os),Nr.stopEvent(Os)}function po(Ps,Os){var Gs;Gs={id:Os.pointerId,type:es(Os),isPrimary:Os.isPrimary,currentPos:ns(Os),currentTime:Nr.now()},Ul(Ps,Os,[Gs],Os.button)&&ts(Ps,Gs.type)}function Fo(Ps,Os){No(Ps,Os)}function Do(Ps,Os){var Gs=Ps.getActivePointersListByType(es(Os));Gs.getById(Os.pointerId)&&No(Ps,Os),Nr.stopEvent(Os)}function No(Ps,Os){var Gs;Gs={id:Os.pointerId,type:es(Os),isPrimary:Os.isPrimary,currentPos:ns(Os),currentTime:Nr.now()},eu(Ps,Os,[Gs])}function Co(Ps,Os){var Gs;Gs={id:Os.pointerId,type:es(Os)},du(Ps,Os,[Gs])}function qo(Ps,Os){return Object.prototype.hasOwnProperty.call(Os,"isPrimary")||(Ps.getLength()===0?Os.isPrimary=!0:Os.isPrimary=!1),Os.speed=0,Os.direction=0,Os.contactPos=Os.currentPos,Os.contactTime=Os.currentTime,Os.lastPos=Os.currentPos,Os.lastTime=Os.currentTime,Ps.add(Os)}function Mo(Ps,Os){var Gs,Is;return Ps.getById(Os.id)?(Gs=Ps.removeById(Os.id),Object.prototype.hasOwnProperty.call(Os,"isPrimary")||(Is=Ps.getPrimary(),Is||(Is=Ps.getByIndex(0),Is&&(Is.isPrimary=!0)))):Gs=Ps.getLength(),Gs}function _l(Ps,Os,Gs){var Is=Ps.getActivePointersListByType(Gs[0].type),zs,qs=Gs.length,Ys,Xs,xo;for(zs=0;zs<qs;zs++)Ys=Gs[zs],Xs=Is.getById(Ys.id),Xs?(Xs.insideElement=!0,Xs.lastPos=Xs.currentPos,Xs.lastTime=Xs.currentTime,Xs.currentPos=Ys.currentPos,Xs.currentTime=Ys.currentTime,Ys=Xs):(Ys.captured=!1,Ys.insideElementPressed=!1,Ys.insideElement=!0,qo(Is,Ys)),Ps.enterHandler&&(xo=Ps.enterHandler({eventSource:Ps,pointerType:Ys.type,position:qr(Ys.currentPos,Ps.element),buttons:Is.buttons,pointers:Ps.getActivePointerCount(),insideElementPressed:Ys.insideElementPressed,buttonDownAny:Is.buttons!==0,isTouchEvent:Ys.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),xo===!1&&Nr.cancelEvent(Os))}function Al(Ps,Os,Gs){var Is=Ps.getActivePointersListByType(Gs[0].type),zs,qs=Gs.length,Ys,Xs,xo;for(zs=0;zs<qs;zs++)Ys=Gs[zs],Xs=Is.getById(Ys.id),Xs&&(Xs.captured?(Xs.insideElement=!1,Xs.lastPos=Xs.currentPos,Xs.lastTime=Xs.currentTime,Xs.currentPos=Ys.currentPos,Xs.currentTime=Ys.currentTime):Mo(Is,Xs),Ys=Xs),Ps.exitHandler&&(xo=Ps.exitHandler({eventSource:Ps,pointerType:Ys.type,position:Ys.currentPos&&qr(Ys.currentPos,Ps.element),buttons:Is.buttons,pointers:Ps.getActivePointerCount(),insideElementPressed:Xs?Xs.insideElementPressed:!1,buttonDownAny:Is.buttons!==0,isTouchEvent:Ys.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),xo===!1&&Nr.cancelEvent(Os))}function Yl(Ps,Os,Gs,Is){var zs=Ur[Ps.hash],qs,Ys=Ps.getActivePointersListByType(Gs[0].type),Xs,xo=Gs.length,To,jo;typeof Os.buttons<"u"?Ys.buttons=Os.buttons:Nr.Browser.vendor===Nr.BROWSERS.IE&&Nr.Browser.version<9?Is===0?Ys.buttons+=1:Is===1?Ys.buttons+=4:Is===2?Ys.buttons+=2:Is===3?Ys.buttons+=8:Is===4?Ys.buttons+=16:Is===5&&(Ys.buttons+=32):Is===0?Ys.buttons|=1:Is===1?Ys.buttons|=4:Is===2?Ys.buttons|=2:Is===3?Ys.buttons|=8:Is===4?Ys.buttons|=16:Is===5&&(Ys.buttons|=32);var Xo=Ps.getActivePointersListsExceptType(Gs[0].type);for(Xs=0;Xs<Xo.length;Xs++)ho(Ps,Os,Xo[Xs]);if(Is!==0)return Ps.nonPrimaryPressHandler&&(qs=Ps.nonPrimaryPressHandler({eventSource:Ps,pointerType:Gs[0].type,position:qr(Gs[0].currentPos,Ps.element),button:Is,buttons:Ys.buttons,isTouchEvent:Gs[0].type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),qs===!1&&Nr.cancelEvent(Os)),!1;for(Xs=0;Xs<xo;Xs++)To=Gs[Xs],jo=Ys.getById(To.id),jo?(jo.captured=!0,jo.insideElementPressed=!0,jo.insideElement=!0,jo.contactPos=To.currentPos,jo.contactTime=To.currentTime,jo.lastPos=jo.currentPos,jo.lastTime=jo.currentTime,jo.currentPos=To.currentPos,jo.currentTime=To.currentTime,To=jo):(To.captured=!0,To.insideElementPressed=!0,To.insideElement=!0,qo(Ys,To)),Ys.addContact(),(Ps.dragHandler||Ps.dragEndHandler||Ps.pinchHandler)&&Nr.MouseTracker.gesturePointVelocityTracker.addPoint(Ps,To),Ys.contacts===1?Ps.pressHandler&&(qs=Ps.pressHandler({eventSource:Ps,pointerType:To.type,position:qr(To.contactPos,Ps.element),buttons:Ys.buttons,isTouchEvent:To.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),qs===!1&&Nr.cancelEvent(Os)):Ys.contacts===2&&Ps.pinchHandler&&To.type==="touch"&&(zs.pinchGPoints=Ys.asArray(),zs.lastPinchDist=zs.currentPinchDist=zs.pinchGPoints[0].currentPos.distanceTo(zs.pinchGPoints[1].currentPos),zs.lastPinchCenter=zs.currentPinchCenter=_i(zs.pinchGPoints[0].currentPos,zs.pinchGPoints[1].currentPos));return!0}function Ul(Ps,Os,Gs,Is){var zs=Ur[Ps.hash],qs=Ps.getActivePointersListByType(Gs[0].type),Ys,Xs,xo,To,jo=Gs.length,Xo,Uo,Ml=!1,fu=!1,xu;if(typeof Os.buttons<"u"?qs.buttons=Os.buttons:Nr.Browser.vendor===Nr.BROWSERS.IE&&Nr.Browser.version<9?Is===0?qs.buttons-=1:Is===1?qs.buttons-=4:Is===2?qs.buttons-=2:Is===3?qs.buttons-=8:Is===4?qs.buttons-=16:Is===5&&(qs.buttons-=32):Is===0?qs.buttons^=-2:Is===1?qs.buttons^=-5:Is===2?qs.buttons^=-3:Is===3?qs.buttons^=-9:Is===4?qs.buttons^=-17:Is===5&&(qs.buttons^=-33),Is!==0){Ps.nonPrimaryReleaseHandler&&(Ys=Ps.nonPrimaryReleaseHandler({eventSource:Ps,pointerType:Gs[0].type,position:qr(Gs[0].currentPos,Ps.element),button:Is,buttons:qs.buttons,isTouchEvent:Gs[0].type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Ys===!1&&Nr.cancelEvent(Os));var fo=Ps.getActivePointersListByType("mouse");return ho(Ps,Os,fo),!1}if(typeof Gs[0].currentPos>"u")return ho(Ps,Os,qs),!1;for(To=0;To<jo;To++)Xo=Gs[To],Uo=qs.getById(Xo.id),Uo&&(Uo.captured&&(Uo.captured=!1,Ml=!0,fu=!0),Uo.lastPos=Uo.currentPos,Uo.lastTime=Uo.currentTime,Uo.currentPos=Xo.currentPos,Uo.currentTime=Xo.currentTime,Uo.insideElement||Mo(qs,Uo),Xs=Uo.currentPos,xo=Uo.currentTime,fu?(qs.removeContact(),(Ps.dragHandler||Ps.dragEndHandler||Ps.pinchHandler)&&Nr.MouseTracker.gesturePointVelocityTracker.removePoint(Ps,Uo),qs.contacts===0?(Ps.releaseHandler&&(Ys=Ps.releaseHandler({eventSource:Ps,pointerType:Uo.type,position:qr(Xs,Ps.element),buttons:qs.buttons,insideElementPressed:Uo.insideElementPressed,insideElementReleased:Uo.insideElement,isTouchEvent:Uo.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Ys===!1&&Nr.cancelEvent(Os)),Ps.dragEndHandler&&!Uo.currentPos.equals(Uo.contactPos)&&(Ys=Ps.dragEndHandler({eventSource:Ps,pointerType:Uo.type,position:qr(Uo.currentPos,Ps.element),speed:Uo.speed,direction:Uo.direction,shift:Os.shiftKey,isTouchEvent:Uo.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Ys===!1&&Nr.cancelEvent(Os)),(Ps.clickHandler||Ps.dblClickHandler)&&Uo.insideElement&&(xu=xo-Uo.contactTime<=Ps.clickTimeThreshold&&Uo.contactPos.distanceTo(Xs)<=Ps.clickDistThreshold,Ps.clickHandler&&(Ys=Ps.clickHandler({eventSource:Ps,pointerType:Uo.type,position:qr(Uo.currentPos,Ps.element),quick:xu,shift:Os.shiftKey,isTouchEvent:Uo.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Ys===!1&&Nr.cancelEvent(Os)),Ps.dblClickHandler&&xu&&(qs.clicks++,qs.clicks===1?(zs.lastClickPos=Xs,zs.dblClickTimeOut=setTimeout(function(){qs.clicks=0},Ps.dblClickTimeThreshold)):qs.clicks===2&&(clearTimeout(zs.dblClickTimeOut),qs.clicks=0,zs.lastClickPos.distanceTo(Xs)<=Ps.dblClickDistThreshold&&(Ys=Ps.dblClickHandler({eventSource:Ps,pointerType:Uo.type,position:qr(Uo.currentPos,Ps.element),shift:Os.shiftKey,isTouchEvent:Uo.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Ys===!1&&Nr.cancelEvent(Os)),zs.lastClickPos=null)))):qs.contacts===2&&Ps.pinchHandler&&Uo.type==="touch"&&(zs.pinchGPoints=qs.asArray(),zs.lastPinchDist=zs.currentPinchDist=zs.pinchGPoints[0].currentPos.distanceTo(zs.pinchGPoints[1].currentPos),zs.lastPinchCenter=zs.currentPinchCenter=_i(zs.pinchGPoints[0].currentPos,zs.pinchGPoints[1].currentPos))):Ps.releaseHandler&&(Ys=Ps.releaseHandler({eventSource:Ps,pointerType:Uo.type,position:qr(Xs,Ps.element),buttons:qs.buttons,insideElementPressed:Uo.insideElementPressed,insideElementReleased:Uo.insideElement,isTouchEvent:Uo.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Ys===!1&&Nr.cancelEvent(Os)));return Ml}function eu(Ps,Os,Gs){var Is=Ur[Ps.hash],zs=Ps.getActivePointersListByType(Gs[0].type),qs,Ys=Gs.length,Xs,xo,To,jo,Xo;for(typeof Os.buttons<"u"&&(zs.buttons=Os.buttons),qs=0;qs<Ys;qs++)Xs=Gs[qs],xo=zs.getById(Xs.id),xo?(Object.prototype.hasOwnProperty.call(Xs,"isPrimary")&&(xo.isPrimary=Xs.isPrimary),xo.lastPos=xo.currentPos,xo.lastTime=xo.currentTime,xo.currentPos=Xs.currentPos,xo.currentTime=Xs.currentTime):(Xs.captured=!1,Xs.insideElementPressed=!1,Xs.insideElement=!0,qo(zs,Xs));Ps.stopHandler&&Gs[0].type==="mouse"&&(clearTimeout(Ps.stopTimeOut),Ps.stopTimeOut=setTimeout(function(){ru(Ps,Os,Gs[0].type)},Ps.stopDelay)),zs.contacts===0?Ps.moveHandler&&(Xo=Ps.moveHandler({eventSource:Ps,pointerType:Gs[0].type,position:qr(Gs[0].currentPos,Ps.element),buttons:zs.buttons,isTouchEvent:Gs[0].type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Xo===!1&&Nr.cancelEvent(Os)):zs.contacts===1?(Ps.moveHandler&&(xo=zs.asArray()[0],Xo=Ps.moveHandler({eventSource:Ps,pointerType:xo.type,position:qr(xo.currentPos,Ps.element),buttons:zs.buttons,isTouchEvent:xo.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Xo===!1&&Nr.cancelEvent(Os)),Ps.dragHandler&&(xo=zs.asArray()[0],jo=xo.currentPos.minus(xo.lastPos),Xo=Ps.dragHandler({eventSource:Ps,pointerType:xo.type,position:qr(xo.currentPos,Ps.element),buttons:zs.buttons,delta:jo,speed:xo.speed,direction:xo.direction,shift:Os.shiftKey,isTouchEvent:xo.type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Xo===!1&&Nr.cancelEvent(Os))):zs.contacts===2&&(Ps.moveHandler&&(To=zs.asArray(),Xo=Ps.moveHandler({eventSource:Ps,pointerType:To[0].type,position:qr(_i(To[0].currentPos,To[1].currentPos),Ps.element),buttons:zs.buttons,isTouchEvent:To[0].type==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Xo===!1&&Nr.cancelEvent(Os)),Ps.pinchHandler&&Gs[0].type==="touch"&&(jo=Is.pinchGPoints[0].currentPos.distanceTo(Is.pinchGPoints[1].currentPos),jo!=Is.currentPinchDist&&(Is.lastPinchDist=Is.currentPinchDist,Is.currentPinchDist=jo,Is.lastPinchCenter=Is.currentPinchCenter,Is.currentPinchCenter=_i(Is.pinchGPoints[0].currentPos,Is.pinchGPoints[1].currentPos),Xo=Ps.pinchHandler({eventSource:Ps,pointerType:"touch",gesturePoints:Is.pinchGPoints,lastCenter:qr(Is.lastPinchCenter,Ps.element),center:qr(Is.currentPinchCenter,Ps.element),lastDistance:Is.lastPinchDist,distance:Is.currentPinchDist,shift:Os.shiftKey,originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData}),Xo===!1&&Nr.cancelEvent(Os))))}function du(Ps,Os,Gs){Ul(Ps,Os,Gs,0),Al(Ps,Os,Gs)}function ru(Ps,Os,Gs){Ps.stopHandler&&Ps.stopHandler({eventSource:Ps,pointerType:Gs,position:Xr(Os,Ps.element),buttons:Ps.getActivePointersListByType(Gs).buttons,isTouchEvent:Gs==="touch",originalEvent:Os,preventDefaultAction:!1,userData:Ps.userData})}var tu=function(){try{return window.self!==window.top}catch{return!0}}();function $l(Ps){try{return Ps.addEventListener&&Ps.removeEventListener}catch{return!1}}}(OpenSeadragon),function(Nr){Nr.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},Nr.Control=function(_r,Ur,jr){var Gr=_r.parentNode;typeof Ur=="number"&&(Nr.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),Ur={anchor:Ur}),Ur.attachToViewer=typeof Ur.attachToViewer>"u"?!0:Ur.attachToViewer,this.autoFade=typeof Ur.autoFade>"u"?!0:Ur.autoFade,this.element=_r,this.anchor=Ur.anchor,this.container=jr,this.anchor==Nr.ControlAnchor.ABSOLUTE?(this.wrapper=Nr.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof Ur.top=="number"?Ur.top+"px":Ur.top,this.wrapper.style.left=typeof Ur.left=="number"?Ur.left+"px":Ur.left,this.wrapper.style.height=typeof Ur.height=="number"?Ur.height+"px":Ur.height,this.wrapper.style.width=typeof Ur.width=="number"?Ur.width+"px":Ur.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=Nr.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==Nr.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),Ur.attachToViewer?this.anchor==Nr.ControlAnchor.TOP_RIGHT||this.anchor==Nr.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):Gr.appendChild(this.wrapper)},Nr.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(_r){this.wrapper.style.display=_r?this.anchor==Nr.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(_r){this.element[Nr.SIGNAL]&&Nr.Browser.vendor==Nr.BROWSERS.IE?Nr.setElementOpacity(this.element,_r,!0):Nr.setElementOpacity(this.wrapper,_r,!0)}}}(OpenSeadragon),function(Nr){Nr.ControlDock=function(Ur){var jr=["topleft","topright","bottomright","bottomleft"],Gr,Wr;for(Nr.extend(!0,this,{id:"controldock-"+Nr.now()+"-"+Math.floor(Math.random()*1e6),container:Nr.makeNeutralElement("div"),controls:[]},Ur),this.container.onsubmit=function(){return!1},this.element&&(this.element=Nr.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),Wr=0;Wr<jr.length;Wr++)Gr=jr[Wr],this.controls[Gr]=Nr.makeNeutralElement("div"),this.controls[Gr].style.position="absolute",Gr.match("left")&&(this.controls[Gr].style.left="0px"),Gr.match("right")&&(this.controls[Gr].style.right="0px"),Gr.match("top")&&(this.controls[Gr].style.top="0px"),Gr.match("bottom")&&(this.controls[Gr].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},Nr.ControlDock.prototype={addControl:function(Ur,jr){Ur=Nr.getElement(Ur);var Gr=null;if(!(_r(this,Ur)>=0)){switch(jr.anchor){case Nr.ControlAnchor.TOP_RIGHT:Gr=this.controls.topright,Ur.style.position="relative",Ur.style.paddingRight="0px",Ur.style.paddingTop="0px";break;case Nr.ControlAnchor.BOTTOM_RIGHT:Gr=this.controls.bottomright,Ur.style.position="relative",Ur.style.paddingRight="0px",Ur.style.paddingBottom="0px";break;case Nr.ControlAnchor.BOTTOM_LEFT:Gr=this.controls.bottomleft,Ur.style.position="relative",Ur.style.paddingLeft="0px",Ur.style.paddingBottom="0px";break;case Nr.ControlAnchor.TOP_LEFT:Gr=this.controls.topleft,Ur.style.position="relative",Ur.style.paddingLeft="0px",Ur.style.paddingTop="0px";break;case Nr.ControlAnchor.ABSOLUTE:Gr=this.container,Ur.style.margin="0px",Ur.style.padding="0px";break;default:case Nr.ControlAnchor.NONE:Gr=this.container,Ur.style.margin="0px",Ur.style.padding="0px";break}this.controls.push(new Nr.Control(Ur,jr,Gr)),Ur.style.display="inline-block"}},removeControl:function(Ur){Ur=Nr.getElement(Ur);var jr=_r(this,Ur);return jr>=0&&(this.controls[jr].destroy(),this.controls.splice(jr,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var Ur;for(Ur=this.controls.length-1;Ur>=0;Ur--)if(this.controls[Ur].isVisible())return!0;return!1},setControlsEnabled:function(Ur){var jr;for(jr=this.controls.length-1;jr>=0;jr--)this.controls[jr].setVisible(Ur);return this}};function _r(Ur,jr){var Gr=Ur.controls,Wr;for(Wr=Gr.length-1;Wr>=0;Wr--)if(Gr[Wr].element==jr)return Wr;return-1}}(OpenSeadragon),function(Nr){Nr.Placement=Nr.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(Nr){var _r={},Ur=1;Nr.Viewer=function(Ts){var Ns=arguments,to=this,ao;if(Nr.isPlainObject(Ts)||(Ts={id:Ns[0],xmlPath:Ns.length>1?Ns[1]:void 0,prefixUrl:Ns.length>2?Ns[2]:void 0,controls:Ns.length>3?Ns[3]:void 0,overlays:Ns.length>4?Ns[4]:void 0}),Ts.config&&(Nr.extend(!0,Ts,Ts.config),delete Ts.config),Nr.extend(!0,this,{id:Ts.id,hash:Ts.hash||Ur++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},Nr.DEFAULT_SETTINGS,Ts),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof _r[this.hash]<"u"&&Nr.console.warn("Hash "+this.hash+" has already been used."),_r[this.hash]={fsBoundsDelta:new Nr.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=Nr.now(),Nr.EventSource.call(this),this.addHandler("open-failed",function(lo){var Io=Nr.getString("Errors.OpenFailed",lo.eventSource,lo.message);to._showMessage(Io)}),Nr.ControlDock.call(this,Ts),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=Nr.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(lo){lo.width="100%",lo.height="100%",lo.overflow="hidden",lo.position="absolute",lo.top="0px",lo.left="0px"}(this.canvas.style),Nr.setElementTouchActionNone(this.canvas),Ts.tabIndex!==""&&(this.canvas.tabIndex=Ts.tabIndex===void 0?0:Ts.tabIndex),this.container.className="openseadragon-container",function(lo){lo.width="100%",lo.height="100%",lo.position="relative",lo.overflow="hidden",lo.left="0px",lo.top="0px",lo.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new Nr.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:Nr.delegate(this,rs),keyHandler:Nr.delegate(this,is),clickHandler:Nr.delegate(this,ss),dblClickHandler:Nr.delegate(this,os),dragHandler:Nr.delegate(this,ls),dragEndHandler:Nr.delegate(this,cs),enterHandler:Nr.delegate(this,ds),exitHandler:Nr.delegate(this,fs),pressHandler:Nr.delegate(this,ms),releaseHandler:Nr.delegate(this,ps),nonPrimaryPressHandler:Nr.delegate(this,ys),nonPrimaryReleaseHandler:Nr.delegate(this,ws),scrollHandler:Nr.delegate(this,Es),pinchHandler:Nr.delegate(this,xs)}),this.outerTracker=new Nr.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:Nr.delegate(this,Rs),exitHandler:Nr.delegate(this,_s)}),this.toolbar&&(this.toolbar=new Nr.ControlDock({element:this.toolbar})),this.bindStandardControls(),_r[this.hash].prevContainerSize=jr(this.container),this.world=new Nr.World({viewer:this}),this.world.addHandler("add-item",function(lo){to.source=to.world.getItemAt(0).source,_r[to.hash].forceRedraw=!0,to._updateRequestId||(to._updateRequestId=Yr(to,Bs))}),this.world.addHandler("remove-item",function(lo){to.world.getItemCount()?to.source=to.world.getItemAt(0).source:to.source=null,_r[to.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(lo){to.viewport&&to.viewport._setContentBounds(to.world.getHomeBounds(),to.world.getContentFactor())}),this.world.addHandler("item-index-change",function(lo){to.source=to.world.getItemAt(0).source}),this.viewport=new Nr.Viewport({containerSize:_r[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new Nr.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:Ts.timeout}),this.tileCache=new Nr.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new Nr.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=Nr.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(ao=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(ao,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(ao=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(ao,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new Nr.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),ao=0;ao<this.customControls.length;ao++)this.addControl(this.customControls[ao].id,{anchor:this.customControls[ao].anchor});Nr.requestAnimationFrame(function(){es(to)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},Nr.extend(Nr.Viewer.prototype,Nr.EventSource.prototype,Nr.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(Ts){return Nr.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(Ts)},openTileSource:function(Ts){return Nr.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(Ts)},open:function(Ts,Ns){var to=this;if(this.close(),!!Ts){if(this.sequenceMode&&Nr.isArray(Ts)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof Ns<"u"&&!isNaN(Ns)&&(this.initialPage=Ns),this.tileSources=Ts,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(Nr.isArray(Ts)||(Ts=[Ts]),!!Ts.length){this._opening=!0;for(var ao=Ts.length,lo=0,Io=0,po,Fo=function(){if(lo+Io===ao)if(lo){(to._firstOpen||!to.preserveViewport)&&(to.viewport.goHome(!0),to.viewport.update()),to._firstOpen=!1;var Co=Ts[0];if(Co.tileSource&&(Co=Co.tileSource),to.overlays&&!to.preserveOverlays)for(var qo=0;qo<to.overlays.length;qo++)to.currentOverlays[qo]=Wr(to,to.overlays[qo]);to._drawOverlays(),to._opening=!1,to.raiseEvent("open",{source:Co})}else to._opening=!1,to.raiseEvent("open-failed",po)},Do=function(Co){(!Nr.isPlainObject(Co)||!Co.tileSource)&&(Co={tileSource:Co}),Co.index!==void 0&&(Nr.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Co.index),Co.collectionImmediately===void 0&&(Co.collectionImmediately=!0);var qo=Co.success;Co.success=function(_l){if(lo++,Co.tileSource.overlays)for(var Al=0;Al<Co.tileSource.overlays.length;Al++)to.addOverlay(Co.tileSource.overlays[Al]);qo&&qo(_l),Fo()};var Mo=Co.error;Co.error=function(_l){Io++,po||(po=_l),Mo&&Mo(_l),Fo()},to.addTiledImage(Co)},No=0;No<Ts.length;No++)Do(Ts[No]);return this}}},close:function(){return _r[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),_r[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(_r[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(Nr.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),_r[this.hash]=null,delete _r[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(Ts){return this.innerTracker.setTracking(Ts),this.outerTracker.setTracking(Ts),this.raiseEvent("mouse-enabled",{enabled:Ts}),this},areControlsEnabled:function(){var Ts=this.controls.length,Ns;for(Ns=0;Ns<this.controls.length;Ns++)Ts=Ts&&this.controls[Ns].isVisible();return Ts},setControlsEnabled:function(Ts){return Ts?Xr(this):es(this),this.raiseEvent("controls-enabled",{enabled:Ts}),this},setDebugMode:function(Ts){for(var Ns=0;Ns<this.world.getItemCount();Ns++)this.world.getItemAt(Ns).debugMode=Ts;this.debugMode=Ts,this.forceRedraw()},isFullPage:function(){return _r[this.hash].fullPage},setFullPage:function(Ts){var Ns=document.body,to=Ns.style,ao=document.documentElement.style,lo=this,Io,po;if(Ts==this.isFullPage())return this;var Fo={fullPage:Ts,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Fo),Fo.preventDefaultAction)return this;if(Ts){for(this.elementSize=Nr.getElementSize(this.element),this.pageScroll=Nr.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=to.margin,this.docMargin=ao.margin,to.margin="0",ao.margin="0",this.bodyPadding=to.padding,this.docPadding=ao.padding,to.padding="0",ao.padding="0",this.bodyWidth=to.width,this.docWidth=ao.width,to.width="100%",ao.width="100%",this.bodyHeight=to.height,this.docHeight=ao.height,to.height="100%",ao.height="100%",this.previousBody=[],_r[this.hash].prevElementParent=this.element.parentNode,_r[this.hash].prevNextSibling=this.element.nextSibling,_r[this.hash].prevElementWidth=this.element.style.width,_r[this.hash].prevElementHeight=this.element.style.height,Io=Ns.childNodes.length,po=0;po<Io;po++)this.previousBody.push(Ns.childNodes[0]),Ns.removeChild(Ns.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,Ns.appendChild(this.toolbar.element),Nr.addClass(this.toolbar.element,"fullpage")),Nr.addClass(this.element,"fullpage"),Ns.appendChild(this.element),this.element.style.height=Nr.getWindowSize().y+"px",this.element.style.width=Nr.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=Nr.getElementSize(this.element).y-Nr.getElementSize(this.toolbar.element).y+"px"),_r[this.hash].fullPage=!0,Nr.delegate(this,Rs)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,to.margin=this.bodyMargin,ao.margin=this.docMargin,to.padding=this.bodyPadding,ao.padding=this.docPadding,to.width=this.bodyWidth,ao.width=this.docWidth,to.height=this.bodyHeight,ao.height=this.docHeight,Ns.removeChild(this.element),Io=this.previousBody.length,po=0;po<Io;po++)Ns.appendChild(this.previousBody.shift());Nr.removeClass(this.element,"fullpage"),_r[this.hash].prevElementParent.insertBefore(this.element,_r[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(Ns.removeChild(this.toolbar.element),Nr.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=_r[this.hash].prevElementWidth,this.element.style.height=_r[this.hash].prevElementHeight;var Do=0,No=function(){Nr.setPageScroll(lo.pageScroll);var Co=Nr.getPageScroll();Do++,Do<10&&(Co.x!==lo.pageScroll.x||Co.y!==lo.pageScroll.y)&&Nr.requestAnimationFrame(No)};Nr.requestAnimationFrame(No),_r[this.hash].fullPage=!1,Nr.delegate(this,_s)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:Ts}),this},setFullScreen:function(Ts){var Ns=this;if(!Nr.supportsFullScreen)return this.setFullPage(Ts);if(Nr.isFullScreen()===Ts)return this;var to={fullScreen:Ts,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",to),to.preventDefaultAction)return this;if(Ts){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var ao=function(){var lo=Nr.isFullScreen();lo||(Nr.removeEvent(document,Nr.fullScreenEventName,ao),Nr.removeEvent(document,Nr.fullScreenErrorEventName,ao),Ns.setFullPage(!1),Ns.isFullPage()&&(Ns.element.style.width=Ns.fullPageStyleWidth,Ns.element.style.height=Ns.fullPageStyleHeight)),Ns.navigator&&Ns.viewport&&setTimeout(function(){Ns.navigator.update(Ns.viewport)}),Ns.raiseEvent("full-screen",{fullScreen:lo})};Nr.addEvent(document,Nr.fullScreenEventName,ao),Nr.addEvent(document,Nr.fullScreenErrorEventName,ao),Nr.requestFullScreen(document.body)}else Nr.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(Ts){return this.container.style.visibility=Ts?"":"hidden",this.raiseEvent("visible",{visible:Ts}),this},addTiledImage:function(Ts){Nr.console.assert(Ts,"[Viewer.addTiledImage] options is required"),Nr.console.assert(Ts.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),Nr.console.assert(!Ts.replace||Ts.index>-1&&Ts.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var Ns=this;Ts.replace&&(Ts.replaceItem=Ns.world.getItemAt(Ts.index)),this._hideMessage(),Ts.placeholderFillStyle===void 0&&(Ts.placeholderFillStyle=this.placeholderFillStyle),Ts.opacity===void 0&&(Ts.opacity=this.opacity),Ts.preload===void 0&&(Ts.preload=this.preload),Ts.compositeOperation===void 0&&(Ts.compositeOperation=this.compositeOperation),Ts.crossOriginPolicy===void 0&&(Ts.crossOriginPolicy=Ts.tileSource.crossOriginPolicy!==void 0?Ts.tileSource.crossOriginPolicy:this.crossOriginPolicy),Ts.ajaxWithCredentials===void 0&&(Ts.ajaxWithCredentials=this.ajaxWithCredentials),Ts.loadTilesWithAjax===void 0&&(Ts.loadTilesWithAjax=this.loadTilesWithAjax),Ts.ajaxHeaders===void 0||Ts.ajaxHeaders===null?Ts.ajaxHeaders=this.ajaxHeaders:Nr.isPlainObject(Ts.ajaxHeaders)&&Nr.isPlainObject(this.ajaxHeaders)&&(Ts.ajaxHeaders=Nr.extend({},this.ajaxHeaders,Ts.ajaxHeaders));var to={options:Ts};function ao(po){for(var Fo=0;Fo<Ns._loadQueue.length;Fo++)if(Ns._loadQueue[Fo]===to){Ns._loadQueue.splice(Fo,1);break}Ns._loadQueue.length===0&&lo(to),Ns.raiseEvent("add-item-failed",po),Ts.error&&Ts.error(po)}function lo(po){Ns.collectionMode&&(Ns.world.arrange({immediately:po.options.collectionImmediately,rows:Ns.collectionRows,columns:Ns.collectionColumns,layout:Ns.collectionLayout,tileSize:Ns.collectionTileSize,tileMargin:Ns.collectionTileMargin}),Ns.world.setAutoRefigureSizes(!0))}if(Nr.isArray(Ts.tileSource)){setTimeout(function(){ao({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:Ts.tileSource,options:Ts})});return}this._loadQueue.push(to);function Io(){for(var po,Fo,Do;Ns._loadQueue.length&&(po=Ns._loadQueue[0],!!po.tileSource);){if(Ns._loadQueue.splice(0,1),po.options.replace){var No=Ns.world.getIndexOfItem(po.options.replaceItem);No!=-1&&(po.options.index=No),Ns.world.removeItem(po.options.replaceItem)}Fo=new Nr.TiledImage({viewer:Ns,source:po.tileSource,viewport:Ns.viewport,drawer:Ns.drawer,tileCache:Ns.tileCache,imageLoader:Ns.imageLoader,x:po.options.x,y:po.options.y,width:po.options.width,height:po.options.height,fitBounds:po.options.fitBounds,fitBoundsPlacement:po.options.fitBoundsPlacement,clip:po.options.clip,placeholderFillStyle:po.options.placeholderFillStyle,opacity:po.options.opacity,preload:po.options.preload,degrees:po.options.degrees,compositeOperation:po.options.compositeOperation,springStiffness:Ns.springStiffness,animationTime:Ns.animationTime,minZoomImageRatio:Ns.minZoomImageRatio,wrapHorizontal:Ns.wrapHorizontal,wrapVertical:Ns.wrapVertical,immediateRender:Ns.immediateRender,blendTime:Ns.blendTime,alwaysBlend:Ns.alwaysBlend,minPixelRatio:Ns.minPixelRatio,smoothTileEdgesMinZoom:Ns.smoothTileEdgesMinZoom,iOSDevice:Ns.iOSDevice,crossOriginPolicy:po.options.crossOriginPolicy,ajaxWithCredentials:po.options.ajaxWithCredentials,loadTilesWithAjax:po.options.loadTilesWithAjax,ajaxHeaders:po.options.ajaxHeaders,debugMode:Ns.debugMode}),Ns.collectionMode&&Ns.world.setAutoRefigureSizes(!1),Ns.world.addItem(Fo,{index:po.options.index}),Ns._loadQueue.length===0&&lo(po),Ns.world.getItemCount()===1&&!Ns.preserveViewport&&Ns.viewport.goHome(!0),Ns.navigator&&(Do=Nr.extend({},po.options,{replace:!1,originalTiledImage:Fo,tileSource:po.tileSource}),Ns.navigator.addTiledImage(Do)),po.options.success&&po.options.success({item:Fo})}}Gr(this,Ts.tileSource,Ts,function(po){to.tileSource=po,Io()},function(po){po.options=Ts,ao(po),Io()})},addSimpleImage:function(Ts){Nr.console.assert(Ts,"[Viewer.addSimpleImage] options is required"),Nr.console.assert(Ts.url,"[Viewer.addSimpleImage] options.url is required");var Ns=Nr.extend({},Ts,{tileSource:{type:"image",url:Ts.url}});delete Ns.url,this.addTiledImage(Ns)},addLayer:function(Ts){var Ns=this;Nr.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var to=Nr.extend({},Ts,{success:function(ao){Ns.raiseEvent("add-layer",{options:Ts,drawer:ao.item})},error:function(ao){Ns.raiseEvent("add-layer-failed",ao)}});return this.addTiledImage(to),this},getLayerAtLevel:function(Ts){return Nr.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(Ts)},getLevelOfLayer:function(Ts){return Nr.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(Ts)},getLayersCount:function(){return Nr.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(Ts,Ns){return Nr.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(Ts,Ns)},removeLayer:function(Ts){return Nr.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(Ts)},forceRedraw:function(){return _r[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var Ts=Nr.delegate(this,qr),Ns=Nr.delegate(this,_i),to=Nr.delegate(this,Oo),ao=Nr.delegate(this,Po),lo=this.navImages,Io=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(Io=!1),this.previousButton=new Nr.Button({element:this.previousButton?Nr.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.PreviousPage"),srcRest:Ss(this.prefixUrl,lo.previous.REST),srcGroup:Ss(this.prefixUrl,lo.previous.GROUP),srcHover:Ss(this.prefixUrl,lo.previous.HOVER),srcDown:Ss(this.prefixUrl,lo.previous.DOWN),onRelease:ao,onFocus:Ts,onBlur:Ns}),this.nextButton=new Nr.Button({element:this.nextButton?Nr.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.NextPage"),srcRest:Ss(this.prefixUrl,lo.next.REST),srcGroup:Ss(this.prefixUrl,lo.next.GROUP),srcHover:Ss(this.prefixUrl,lo.next.HOVER),srcDown:Ss(this.prefixUrl,lo.next.DOWN),onRelease:to,onFocus:Ts,onBlur:Ns}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),Io&&(this.paging=new Nr.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:Nr.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||Nr.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var Ts=Nr.delegate(this,As),Ns=Nr.delegate(this,Ks),to=Nr.delegate(this,ho),ao=Nr.delegate(this,Us),lo=Nr.delegate(this,so),Io=Nr.delegate(this,vo),po=Nr.delegate(this,co),Fo=Nr.delegate(this,go),Do=Nr.delegate(this,Eo),No=Nr.delegate(this,Ro),Co=Nr.delegate(this,qr),qo=Nr.delegate(this,_i),Mo=this.navImages,_l=[],Al=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(Al=!1),this.showZoomControl&&(_l.push(this.zoomInButton=new Nr.Button({element:this.zoomInButton?Nr.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.ZoomIn"),srcRest:Ss(this.prefixUrl,Mo.zoomIn.REST),srcGroup:Ss(this.prefixUrl,Mo.zoomIn.GROUP),srcHover:Ss(this.prefixUrl,Mo.zoomIn.HOVER),srcDown:Ss(this.prefixUrl,Mo.zoomIn.DOWN),onPress:Ts,onRelease:Ns,onClick:to,onEnter:Ts,onExit:Ns,onFocus:Co,onBlur:qo})),_l.push(this.zoomOutButton=new Nr.Button({element:this.zoomOutButton?Nr.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.ZoomOut"),srcRest:Ss(this.prefixUrl,Mo.zoomOut.REST),srcGroup:Ss(this.prefixUrl,Mo.zoomOut.GROUP),srcHover:Ss(this.prefixUrl,Mo.zoomOut.HOVER),srcDown:Ss(this.prefixUrl,Mo.zoomOut.DOWN),onPress:ao,onRelease:Ns,onClick:lo,onEnter:ao,onExit:Ns,onFocus:Co,onBlur:qo}))),this.showHomeControl&&_l.push(this.homeButton=new Nr.Button({element:this.homeButton?Nr.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.Home"),srcRest:Ss(this.prefixUrl,Mo.home.REST),srcGroup:Ss(this.prefixUrl,Mo.home.GROUP),srcHover:Ss(this.prefixUrl,Mo.home.HOVER),srcDown:Ss(this.prefixUrl,Mo.home.DOWN),onRelease:Io,onFocus:Co,onBlur:qo})),this.showFullPageControl&&_l.push(this.fullPageButton=new Nr.Button({element:this.fullPageButton?Nr.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.FullPage"),srcRest:Ss(this.prefixUrl,Mo.fullpage.REST),srcGroup:Ss(this.prefixUrl,Mo.fullpage.GROUP),srcHover:Ss(this.prefixUrl,Mo.fullpage.HOVER),srcDown:Ss(this.prefixUrl,Mo.fullpage.DOWN),onRelease:po,onFocus:Co,onBlur:qo})),this.showRotationControl&&(_l.push(this.rotateLeftButton=new Nr.Button({element:this.rotateLeftButton?Nr.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.RotateLeft"),srcRest:Ss(this.prefixUrl,Mo.rotateleft.REST),srcGroup:Ss(this.prefixUrl,Mo.rotateleft.GROUP),srcHover:Ss(this.prefixUrl,Mo.rotateleft.HOVER),srcDown:Ss(this.prefixUrl,Mo.rotateleft.DOWN),onRelease:Fo,onFocus:Co,onBlur:qo})),_l.push(this.rotateRightButton=new Nr.Button({element:this.rotateRightButton?Nr.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.RotateRight"),srcRest:Ss(this.prefixUrl,Mo.rotateright.REST),srcGroup:Ss(this.prefixUrl,Mo.rotateright.GROUP),srcHover:Ss(this.prefixUrl,Mo.rotateright.HOVER),srcDown:Ss(this.prefixUrl,Mo.rotateright.DOWN),onRelease:Do,onFocus:Co,onBlur:qo}))),this.showFlipControl&&_l.push(this.flipButton=new Nr.Button({element:this.flipButton?Nr.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Nr.getString("Tooltips.Flip"),srcRest:Ss(this.prefixUrl,Mo.flip.REST),srcGroup:Ss(this.prefixUrl,Mo.flip.GROUP),srcHover:Ss(this.prefixUrl,Mo.flip.HOVER),srcDown:Ss(this.prefixUrl,Mo.flip.DOWN),onRelease:No,onFocus:Co,onBlur:qo})),Al&&(this.buttons=new Nr.ButtonGroup({buttons:_l,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",Nr.delegate(this,io)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||Nr.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||Nr.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(Ts){return this.tileSources&&Ts>=0&&Ts<this.tileSources.length&&(this._sequenceIndex=Ts,this._updateSequenceButtons(Ts),this.open(this.tileSources[Ts]),this.referenceStrip&&this.referenceStrip.setFocus(Ts),this.raiseEvent("page",{page:Ts})),this},addOverlay:function(Ts,Ns,to,ao){var lo;if(Nr.isPlainObject(Ts)?lo=Ts:lo={element:Ts,location:Ns,placement:to,onDraw:ao},Ts=Nr.getElement(lo.element),Zr(this.currentOverlays,Ts)>=0)return this;var Io=Wr(this,lo);return this.currentOverlays.push(Io),Io.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:Ts,location:lo.location,placement:lo.placement}),this},updateOverlay:function(Ts,Ns,to){var ao;return Ts=Nr.getElement(Ts),ao=Zr(this.currentOverlays,Ts),ao>=0&&(this.currentOverlays[ao].update(Ns,to),_r[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:Ts,location:Ns,placement:to})),this},removeOverlay:function(Ts){var Ns;return Ts=Nr.getElement(Ts),Ns=Zr(this.currentOverlays,Ts),Ns>=0&&(this.currentOverlays[Ns].destroy(),this.currentOverlays.splice(Ns,1),_r[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:Ts})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return _r[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(Ts){var Ns;return Ts=Nr.getElement(Ts),Ns=Zr(this.currentOverlays,Ts),Ns>=0?this.currentOverlays[Ns]:null},_updateSequenceButtons:function(Ts){this.nextButton&&(!this.tileSources||this.tileSources.length-1===Ts?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(Ts>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(Ts){this._hideMessage();var Ns=Nr.makeNeutralElement("div");Ns.appendChild(document.createTextNode(Ts)),this.messageDiv=Nr.makeCenteredNode(Ns),Nr.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var Ts=this.messageDiv;Ts&&(Ts.parentNode.removeChild(Ts),delete this.messageDiv)},gestureSettingsByDeviceType:function(Ts){switch(Ts){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var Ts,Ns=this.currentOverlays.length;for(Ts=0;Ts<Ns;Ts++)this.currentOverlays[Ts].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new Nr.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else Nr.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function jr(Ts){return Ts=Nr.getElement(Ts),new Nr.Point(Ts.clientWidth===0?1:Ts.clientWidth,Ts.clientHeight===0?1:Ts.clientHeight)}function Gr(Ts,Ns,to,ao,lo){var Io=Ts;if(Nr.type(Ns)=="string"){if(Ns.match(/^\s*<.*>\s*$/))Ns=Nr.parseXml(Ns);else if(Ns.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var po=Nr.parseJSON(Ns);Ns=po}catch{}}function Fo(Do,No){Do.ready?ao(Do):(Do.addHandler("ready",function(){ao(Do)}),Do.addHandler("open-failed",function(Co){lo({message:Co.message,source:No})}))}setTimeout(function(){if(Nr.type(Ns)=="string")Ns=new Nr.TileSource({url:Ns,crossOriginPolicy:to.crossOriginPolicy!==void 0?to.crossOriginPolicy:Ts.crossOriginPolicy,ajaxWithCredentials:Ts.ajaxWithCredentials,ajaxHeaders:Ts.ajaxHeaders,useCanvas:Ts.useCanvas,success:function(qo){ao(qo.tileSource)}}),Ns.addHandler("open-failed",function(qo){lo(qo)});else if(Nr.isPlainObject(Ns)||Ns.nodeType)if(Ns.crossOriginPolicy===void 0&&(to.crossOriginPolicy!==void 0||Ts.crossOriginPolicy!==void 0)&&(Ns.crossOriginPolicy=to.crossOriginPolicy!==void 0?to.crossOriginPolicy:Ts.crossOriginPolicy),Ns.ajaxWithCredentials===void 0&&(Ns.ajaxWithCredentials=Ts.ajaxWithCredentials),Ns.useCanvas===void 0&&(Ns.useCanvas=Ts.useCanvas),Nr.isFunction(Ns.getTileUrl)){var Do=new Nr.TileSource(Ns);Do.getTileUrl=Ns.getTileUrl,ao(Do)}else{var No=Nr.TileSource.determineType(Io,Ns);if(!No){lo({message:"Unable to load TileSource",source:Ns});return}var Co=No.prototype.configure.apply(Io,[Ns]);Fo(new No(Co),Ns)}else Fo(Ns,Ns)})}function Wr(Ts,Ns){if(Ns instanceof Nr.Overlay)return Ns;var to=null;if(Ns.element)to=Nr.getElement(Ns.element);else{var ao=Ns.id?Ns.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);to=Nr.getElement(Ns.id),to||(to=document.createElement("a"),to.href="#/overlay/"+ao),to.id=ao,Nr.addClass(to,Ns.className?Ns.className:"openseadragon-overlay")}var lo=Ns.location,Io=Ns.width,po=Ns.height;if(!lo){var Fo=Ns.x,Do=Ns.y;if(Ns.px!==void 0){var No=Ts.viewport.imageToViewportRectangle(new Nr.Rect(Ns.px,Ns.py,Io||0,po||0));Fo=No.x,Do=No.y,Io=Io!==void 0?No.width:void 0,po=po!==void 0?No.height:void 0}lo=new Nr.Point(Fo,Do)}var Co=Ns.placement;return Co&&Nr.type(Co)==="string"&&(Co=Nr.Placement[Ns.placement.toUpperCase()]),new Nr.Overlay({element:to,location:lo,placement:Co,onDraw:Ns.onDraw,checkResize:Ns.checkResize,width:Io,height:po,rotationMode:Ns.rotationMode})}function Zr(Ts,Ns){var to;for(to=Ts.length-1;to>=0;to--)if(Ts[to].element===Ns)return to;return-1}function Yr(Ts,Ns){return Nr.requestAnimationFrame(function(){Ns(Ts)})}function ts(Ts){Nr.requestAnimationFrame(function(){ns(Ts)})}function es(Ts){Ts.autoHideControls&&(Ts.controlsShouldFade=!0,Ts.controlsFadeBeginTime=Nr.now()+Ts.controlsFadeDelay,window.setTimeout(function(){ts(Ts)},Ts.controlsFadeDelay))}function ns(Ts){var Ns,to,ao,lo;if(Ts.controlsShouldFade){for(Ns=Nr.now(),to=Ns-Ts.controlsFadeBeginTime,ao=1-to/Ts.controlsFadeLength,ao=Math.min(1,ao),ao=Math.max(0,ao),lo=Ts.controls.length-1;lo>=0;lo--)Ts.controls[lo].autoFade&&Ts.controls[lo].setOpacity(ao);ao>0&&ts(Ts)}}function Xr(Ts){var Ns;for(Ts.controlsShouldFade=!1,Ns=Ts.controls.length-1;Ns>=0;Ns--)Ts.controls[Ns].setOpacity(1)}function qr(){Xr(this)}function _i(){es(this)}function rs(Ts){var Ns={originalEvent:Ts.originalEvent,preventDefaultAction:Ts.preventDefaultAction,preventVerticalPan:Ts.preventVerticalPan,preventHorizontalPan:Ts.preventHorizontalPan};if(this.raiseEvent("canvas-key",Ns),!Ns.preventDefaultAction&&!Ts.ctrl&&!Ts.alt&&!Ts.meta)switch(Ts.keyCode){case 38:return Ns.preventVerticalPan||(Ts.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return Ns.preventVerticalPan||(Ts.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return Ns.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return Ns.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function is(Ts){var Ns={originalEvent:Ts.originalEvent,preventDefaultAction:Ts.preventDefaultAction,preventVerticalPan:Ts.preventVerticalPan,preventHorizontalPan:Ts.preventHorizontalPan};if(this.raiseEvent("canvas-key",Ns),!Ns.preventDefaultAction&&!Ts.ctrl&&!Ts.alt&&!Ts.meta)switch(Ts.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return Ns.preventVerticalPan||(Ts.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return Ns.preventVerticalPan||(Ts.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return Ns.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return Ns.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Nr.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(Nr.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(Nr.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(Nr.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(Nr.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function ss(Ts){var Ns,to=document.activeElement==this.canvas;to||this.canvas.focus(),this.viewport.flipped&&(Ts.position.x=this.viewport.getContainerSize().x-Ts.position.x);var ao={tracker:Ts.eventSource,position:Ts.position,quick:Ts.quick,shift:Ts.shift,originalEvent:Ts.originalEvent,preventDefaultAction:Ts.preventDefaultAction};this.raiseEvent("canvas-click",ao),!ao.preventDefaultAction&&this.viewport&&Ts.quick&&(Ns=this.gestureSettingsByDeviceType(Ts.pointerType),Ns.clickToZoom&&(this.viewport.zoomBy(Ts.shift?1/this.zoomPerClick:this.zoomPerClick,Ns.zoomToRefPoint?this.viewport.pointFromPixel(Ts.position,!0):null),this.viewport.applyConstraints()))}function os(Ts){var Ns,to={tracker:Ts.eventSource,position:Ts.position,shift:Ts.shift,originalEvent:Ts.originalEvent,preventDefaultAction:Ts.preventDefaultAction};this.raiseEvent("canvas-double-click",to),!to.preventDefaultAction&&this.viewport&&(Ns=this.gestureSettingsByDeviceType(Ts.pointerType),Ns.dblClickToZoom&&(this.viewport.zoomBy(Ts.shift?1/this.zoomPerClick:this.zoomPerClick,Ns.zoomToRefPoint?this.viewport.pointFromPixel(Ts.position,!0):null),this.viewport.applyConstraints()))}function ls(Ts){var Ns,to={tracker:Ts.eventSource,position:Ts.position,delta:Ts.delta,speed:Ts.speed,direction:Ts.direction,shift:Ts.shift,originalEvent:Ts.originalEvent,preventDefaultAction:Ts.preventDefaultAction};if(this.raiseEvent("canvas-drag",to),!to.preventDefaultAction&&this.viewport){if(Ns=this.gestureSettingsByDeviceType(Ts.pointerType),this.panHorizontal||(Ts.delta.x=0),this.panVertical||(Ts.delta.y=0),this.viewport.flipped&&(Ts.delta.x=-Ts.delta.x),this.constrainDuringPan){var ao=this.viewport.deltaPointsFromPixels(Ts.delta.negate());this.viewport.centerSpringX.target.value+=ao.x,this.viewport.centerSpringY.target.value+=ao.y;var lo=this.viewport.getBounds(),Io=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=ao.x,this.viewport.centerSpringY.target.value-=ao.y,lo.x!=Io.x&&(Ts.delta.x=0),lo.y!=Io.y&&(Ts.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(Ts.delta.negate()),Ns.flickEnabled&&!this.constrainDuringPan)}}function cs(Ts){if(!Ts.preventDefaultAction&&this.viewport){var Ns=this.gestureSettingsByDeviceType(Ts.pointerType);if(Ns.flickEnabled&&Ts.speed>=Ns.flickMinSpeed){var to=0;this.panHorizontal&&(to=Ns.flickMomentum*Ts.speed*Math.cos(Ts.direction));var ao=0;this.panVertical&&(ao=Ns.flickMomentum*Ts.speed*Math.sin(Ts.direction));var lo=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),Io=this.viewport.pointFromPixel(new Nr.Point(lo.x-to,lo.y-ao));this.viewport.panTo(Io,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:Ts.eventSource,position:Ts.position,speed:Ts.speed,direction:Ts.direction,shift:Ts.shift,originalEvent:Ts.originalEvent})}function ds(Ts){this.raiseEvent("canvas-enter",{tracker:Ts.eventSource,pointerType:Ts.pointerType,position:Ts.position,buttons:Ts.buttons,pointers:Ts.pointers,insideElementPressed:Ts.insideElementPressed,buttonDownAny:Ts.buttonDownAny,originalEvent:Ts.originalEvent})}function fs(Ts){window.location!=window.parent.location&&Nr.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:Ts.eventSource,pointerType:Ts.pointerType,position:Ts.position,buttons:Ts.buttons,pointers:Ts.pointers,insideElementPressed:Ts.insideElementPressed,buttonDownAny:Ts.buttonDownAny,originalEvent:Ts.originalEvent})}function ms(Ts){this.raiseEvent("canvas-press",{tracker:Ts.eventSource,pointerType:Ts.pointerType,position:Ts.position,insideElementPressed:Ts.insideElementPressed,insideElementReleased:Ts.insideElementReleased,originalEvent:Ts.originalEvent})}function ps(Ts){this.raiseEvent("canvas-release",{tracker:Ts.eventSource,pointerType:Ts.pointerType,position:Ts.position,insideElementPressed:Ts.insideElementPressed,insideElementReleased:Ts.insideElementReleased,originalEvent:Ts.originalEvent})}function ys(Ts){this.raiseEvent("canvas-nonprimary-press",{tracker:Ts.eventSource,position:Ts.position,pointerType:Ts.pointerType,button:Ts.button,buttons:Ts.buttons,originalEvent:Ts.originalEvent})}function ws(Ts){this.raiseEvent("canvas-nonprimary-release",{tracker:Ts.eventSource,position:Ts.position,pointerType:Ts.pointerType,button:Ts.button,buttons:Ts.buttons,originalEvent:Ts.originalEvent})}function xs(Ts){var Ns,to,ao,lo;if(!Ts.preventDefaultAction&&this.viewport&&(Ns=this.gestureSettingsByDeviceType(Ts.pointerType),Ns.pinchToZoom&&(to=this.viewport.pointFromPixel(Ts.center,!0),ao=this.viewport.pointFromPixel(Ts.lastCenter,!0),lo=ao.minus(to),this.panHorizontal||(lo.x=0),this.panVertical||(lo.y=0),this.viewport.zoomBy(Ts.distance/Ts.lastDistance,to,!0),Ns.zoomToRefPoint&&this.viewport.panBy(lo,!0),this.viewport.applyConstraints()),Ns.pinchRotate)){var Io=Math.atan2(Ts.gesturePoints[0].currentPos.y-Ts.gesturePoints[1].currentPos.y,Ts.gesturePoints[0].currentPos.x-Ts.gesturePoints[1].currentPos.x),po=Math.atan2(Ts.gesturePoints[0].lastPos.y-Ts.gesturePoints[1].lastPos.y,Ts.gesturePoints[0].lastPos.x-Ts.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(Io-po)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:Ts.eventSource,gesturePoints:Ts.gesturePoints,lastCenter:Ts.lastCenter,center:Ts.center,lastDistance:Ts.lastDistance,distance:Ts.distance,shift:Ts.shift,originalEvent:Ts.originalEvent}),!1}function Es(Ts){var Ns,to,ao,lo;if(ao=Nr.now(),lo=ao-this._lastScrollTime,lo>this.minScrollDeltaTime){if(this._lastScrollTime=ao,this.viewport.flipped&&(Ts.position.x=this.viewport.getContainerSize().x-Ts.position.x),!Ts.preventDefaultAction&&this.viewport&&(Ns=this.gestureSettingsByDeviceType(Ts.pointerType),Ns.scrollToZoom&&(to=Math.pow(this.zoomPerScroll,Ts.scroll),this.viewport.zoomBy(to,Ns.zoomToRefPoint?this.viewport.pointFromPixel(Ts.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:Ts.eventSource,position:Ts.position,scroll:Ts.scroll,shift:Ts.shift,originalEvent:Ts.originalEvent}),Ns&&Ns.scrollToZoom)return!1}else if(Ns=this.gestureSettingsByDeviceType(Ts.pointerType),Ns&&Ns.scrollToZoom)return!1}function Rs(Ts){_r[this.hash].mouseInside=!0,Xr(this),this.raiseEvent("container-enter",{tracker:Ts.eventSource,position:Ts.position,buttons:Ts.buttons,pointers:Ts.pointers,insideElementPressed:Ts.insideElementPressed,buttonDownAny:Ts.buttonDownAny,originalEvent:Ts.originalEvent})}function _s(Ts){Ts.pointers<1&&(_r[this.hash].mouseInside=!1,_r[this.hash].animating||es(this)),this.raiseEvent("container-exit",{tracker:Ts.eventSource,position:Ts.position,buttons:Ts.buttons,pointers:Ts.pointers,insideElementPressed:Ts.insideElementPressed,buttonDownAny:Ts.buttonDownAny,originalEvent:Ts.originalEvent})}function Bs(Ts){vs(Ts),Ts.isOpen()?Ts._updateRequestId=Yr(Ts,Bs):Ts._updateRequestId=!1}function vs(Ts){if(!Ts._opening){if(Ts.autoResize){var Ns=jr(Ts.container),to=_r[Ts.hash].prevContainerSize;if(!Ns.equals(to)){var ao=Ts.viewport;if(Ts.preserveImageSizeOnResize){var lo=to.x/Ns.x,Io=ao.getZoom()*lo,po=ao.getCenter();ao.resize(Ns,!1),ao.zoomTo(Io,null,!0),ao.panTo(po,!0)}else{var Fo=ao.getBounds();ao.resize(Ns,!0),ao.fitBoundsWithConstraints(Fo,!0)}_r[Ts.hash].prevContainerSize=Ns,_r[Ts.hash].forceRedraw=!0}}var Do=Ts.viewport.update(),No=Ts.world.update()||Do;Do&&Ts.raiseEvent("viewport-change"),Ts.referenceStrip&&(No=Ts.referenceStrip.update(Ts.viewport)||No),!_r[Ts.hash].animating&&No&&(Ts.raiseEvent("animation-start"),Xr(Ts)),(No||_r[Ts.hash].forceRedraw||Ts.world.needsDraw())&&(Cs(Ts),Ts._drawOverlays(),Ts.navigator&&Ts.navigator.update(Ts.viewport),_r[Ts.hash].forceRedraw=!1,No&&Ts.raiseEvent("animation")),_r[Ts.hash].animating&&!No&&(Ts.raiseEvent("animation-finish"),_r[Ts.hash].mouseInside||es(Ts)),_r[Ts.hash].animating=No}}function Cs(Ts){Ts.imageLoader.clear(),Ts.drawer.clear(),Ts.world.draw(),Ts.raiseEvent("update-viewport",{})}function Ss(Ts,Ns){return Ts?Ts+Ns:Ns}function As(){_r[this.hash].lastZoomTime=Nr.now(),_r[this.hash].zoomFactor=this.zoomPerSecond,_r[this.hash].zooming=!0,Ws(this)}function Us(){_r[this.hash].lastZoomTime=Nr.now(),_r[this.hash].zoomFactor=1/this.zoomPerSecond,_r[this.hash].zooming=!0,Ws(this)}function Ks(){_r[this.hash].zooming=!1}function Ws(Ts){Nr.requestAnimationFrame(Nr.delegate(Ts,Js))}function Js(){var Ts,Ns,to;_r[this.hash].zooming&&this.viewport&&(Ts=Nr.now(),Ns=Ts-_r[this.hash].lastZoomTime,to=Math.pow(_r[this.hash].zoomFactor,Ns/1e3),this.viewport.zoomBy(to),this.viewport.applyConstraints(),_r[this.hash].lastZoomTime=Ts,Ws(this))}function ho(){this.viewport&&(_r[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function so(){this.viewport&&(_r[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function io(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function vo(){this.viewport&&this.viewport.goHome()}function co(){this.isFullPage()&&!Nr.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function go(){if(this.viewport){var Ts=this.viewport.getRotation();this.viewport.flipped?Ts=Nr.positiveModulo(Ts+this.rotationIncrement,360):Ts=Nr.positiveModulo(Ts-this.rotationIncrement,360),this.viewport.setRotation(Ts)}}function Eo(){if(this.viewport){var Ts=this.viewport.getRotation();this.viewport.flipped?Ts=Nr.positiveModulo(Ts-this.rotationIncrement,360):Ts=Nr.positiveModulo(Ts+this.rotationIncrement,360),this.viewport.setRotation(Ts)}}function Ro(){this.viewport.toggleFlip()}function Po(){var Ts=this._sequenceIndex-1;this.navPrevNextWrap&&Ts<0&&(Ts+=this.tileSources.length),this.goToPage(Ts)}function Oo(){var Ts=this._sequenceIndex+1;this.navPrevNextWrap&&Ts>=this.tileSources.length&&(Ts=0),this.goToPage(Ts)}}(OpenSeadragon),function(Nr){Nr.Navigator=function(Yr){var ts=Yr.viewer,es=this,ns,Xr;Yr.id?(this.element=document.getElementById(Yr.id),Yr.controlOptions={anchor:Nr.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(Yr.id="navigator-"+Nr.now(),this.element=Nr.makeNeutralElement("div"),Yr.controlOptions={anchor:Nr.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:Yr.autoFade},Yr.position&&(Yr.position=="BOTTOM_RIGHT"?Yr.controlOptions.anchor=Nr.ControlAnchor.BOTTOM_RIGHT:Yr.position=="BOTTOM_LEFT"?Yr.controlOptions.anchor=Nr.ControlAnchor.BOTTOM_LEFT:Yr.position=="TOP_RIGHT"?Yr.controlOptions.anchor=Nr.ControlAnchor.TOP_RIGHT:Yr.position=="TOP_LEFT"?Yr.controlOptions.anchor=Nr.ControlAnchor.TOP_LEFT:Yr.position=="ABSOLUTE"&&(Yr.controlOptions.anchor=Nr.ControlAnchor.ABSOLUTE,Yr.controlOptions.top=Yr.top,Yr.controlOptions.left=Yr.left,Yr.controlOptions.height=Yr.height,Yr.controlOptions.width=Yr.width))),this.element.id=Yr.id,this.element.className+=" navigator",Yr=Nr.extend(!0,{sizeRatio:Nr.DEFAULT_SETTINGS.navigatorSizeRatio},Yr,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:Yr.autoResize,minZoomImageRatio:1,background:Yr.background,opacity:Yr.opacity,borderColor:Yr.borderColor,displayRegionColor:Yr.displayRegionColor}),Yr.minPixelRatio=this.minPixelRatio=ts.minPixelRatio,Nr.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new Nr.Point(1,1),this.totalBorderWidths=new Nr.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),Yr.controlOptions.anchor!=Nr.ControlAnchor.NONE&&function(rs,is){rs.margin="0px",rs.border=is+"px solid "+Yr.borderColor,rs.padding="0px",rs.background=Yr.background,rs.opacity=Yr.opacity,rs.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=Nr.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(rs,is){rs.position="relative",rs.top="0px",rs.left="0px",rs.fontSize="0px",rs.overflow="hidden",rs.border=is+"px solid "+Yr.displayRegionColor,rs.margin="0px",rs.padding="0px",rs.background="transparent",rs.float="left",rs.cssFloat="left",rs.styleFloat="left",rs.zIndex=999999999,rs.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=Nr.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",ts.addControl(this.element,Yr.controlOptions),this._resizeWithViewer=Yr.controlOptions.anchor!=Nr.ControlAnchor.ABSOLUTE&&Yr.controlOptions.anchor!=Nr.ControlAnchor.NONE,Yr.width&&Yr.height?(this.setWidth(Yr.width),this.setHeight(Yr.height)):this._resizeWithViewer&&(ns=Nr.getElementSize(ts.element),this.element.style.height=Math.round(ns.y*Yr.sizeRatio)+"px",this.element.style.width=Math.round(ns.x*Yr.sizeRatio)+"px",this.oldViewerSize=ns,Xr=Nr.getElementSize(this.element),this.elementArea=Xr.x*Xr.y),this.oldContainerSize=new Nr.Point(0,0),Nr.Viewer.apply(this,[Yr]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function qr(rs){Wr(es.displayRegionContainer,rs),Wr(es.displayRegion,-rs),es.viewport.setRotation(rs)}if(Yr.navigatorRotate){var _i=Yr.viewer.viewport?Yr.viewer.viewport.getRotation():Yr.viewer.degrees||0;qr(_i),Yr.viewer.addHandler("rotate",function(rs){qr(rs.degrees)})}this.innerTracker.destroy(),this.innerTracker=new Nr.MouseTracker({element:this.element,dragHandler:Nr.delegate(this,Ur),clickHandler:Nr.delegate(this,_r),releaseHandler:Nr.delegate(this,jr),scrollHandler:Nr.delegate(this,Gr)}),this.addHandler("reset-size",function(){es.viewport&&es.viewport.goHome(!0)}),ts.world.addHandler("item-index-change",function(rs){window.setTimeout(function(){var is=es.world.getItemAt(rs.previousIndex);es.world.setItemIndex(is,rs.newIndex)},1)}),ts.world.addHandler("remove-item",function(rs){var is=rs.item,ss=es._getMatchingItem(is);ss&&es.world.removeItem(ss)}),this.update(ts.viewport)},Nr.extend(Nr.Navigator.prototype,Nr.EventSource.prototype,Nr.Viewer.prototype,{updateSize:function(){if(this.viewport){var Yr=new Nr.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);Yr.equals(this.oldContainerSize)||(this.viewport.resize(Yr,!0),this.viewport.goHome(!0),this.oldContainerSize=Yr,this.drawer.clear(),this.world.draw())}},setWidth:function(Yr){this.width=Yr,this.element.style.width=typeof Yr=="number"?Yr+"px":Yr,this._resizeWithViewer=!1},setHeight:function(Yr){this.height=Yr,this.element.style.height=typeof Yr=="number"?Yr+"px":Yr,this._resizeWithViewer=!1},setFlip:function(Yr){return this.viewport.setFlip(Yr),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(Yr){Zr(this.displayRegion,Yr),Zr(this.canvas,Yr),Zr(this.element,Yr)},update:function(Yr){var ts,es,ns,Xr,qr,_i;if(ts=Nr.getElementSize(this.viewer.element),this._resizeWithViewer&&ts.x&&ts.y&&!ts.equals(this.oldViewerSize)&&(this.oldViewerSize=ts,this.maintainSizeRatio||!this.elementArea?(es=ts.x*this.sizeRatio,ns=ts.y*this.sizeRatio):(es=Math.sqrt(this.elementArea*(ts.x/ts.y)),ns=this.elementArea/es),this.element.style.width=Math.round(es)+"px",this.element.style.height=Math.round(ns)+"px",this.elementArea||(this.elementArea=es*ns),this.updateSize()),Yr&&this.viewport){Xr=Yr.getBoundsNoRotate(!0),qr=this.viewport.pixelFromPointNoRotate(Xr.getTopLeft(),!1),_i=this.viewport.pixelFromPointNoRotate(Xr.getBottomRight(),!1).minus(this.totalBorderWidths);var rs=this.displayRegion.style;rs.display=this.world.getItemCount()?"block":"none",rs.top=Math.round(qr.y)+"px",rs.left=Math.round(qr.x)+"px";var is=Math.abs(qr.x-_i.x),ss=Math.abs(qr.y-_i.y);rs.width=Math.round(Math.max(is,0))+"px",rs.height=Math.round(Math.max(ss,0))+"px"}},addTiledImage:function(Yr){var ts=this,es=Yr.originalTiledImage;delete Yr.original;var ns=Nr.extend({},Yr,{success:function(Xr){var qr=Xr.item;qr._originalForNavigator=es,ts._matchBounds(qr,es,!0);function _i(){ts._matchBounds(qr,es)}function rs(){ts._matchOpacity(qr,es)}function is(){ts._matchCompositeOperation(qr,es)}es.addHandler("bounds-change",_i),es.addHandler("clip-change",_i),es.addHandler("opacity-change",rs),es.addHandler("composite-operation-change",is)}});return Nr.Viewer.prototype.addTiledImage.apply(this,[ns])},_getMatchingItem:function(Yr){for(var ts=this.world.getItemCount(),es,ns=0;ns<ts;ns++)if(es=this.world.getItemAt(ns),es._originalForNavigator===Yr)return es;return null},_matchBounds:function(Yr,ts,es){var ns=ts.getBoundsNoRotate();Yr.setPosition(ns.getTopLeft(),es),Yr.setWidth(ns.width,es),Yr.setRotation(ts.getRotation(),es),Yr.setClip(ts.getClip())},_matchOpacity:function(Yr,ts){Yr.setOpacity(ts.opacity)},_matchCompositeOperation:function(Yr,ts){Yr.setCompositeOperation(ts.compositeOperation)}});function _r(Yr){var ts={tracker:Yr.eventSource,position:Yr.position,quick:Yr.quick,shift:Yr.shift,originalEvent:Yr.originalEvent,preventDefaultAction:Yr.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",ts),!ts.preventDefaultAction&&Yr.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(Yr.position.x=this.viewport.getContainerSize().x-Yr.position.x);var es=this.viewport.pointFromPixel(Yr.position);this.panVertical?this.panHorizontal||(es.x=this.viewer.viewport.getCenter(!0).x):es.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(es),this.viewer.viewport.applyConstraints()}}function Ur(Yr){var ts={tracker:Yr.eventSource,position:Yr.position,delta:Yr.delta,speed:Yr.speed,direction:Yr.direction,shift:Yr.shift,originalEvent:Yr.originalEvent,preventDefaultAction:Yr.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",ts),!ts.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(Yr.delta.x=0),this.panVertical||(Yr.delta.y=0),this.viewer.viewport.flipped&&(Yr.delta.x=-Yr.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(Yr.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function jr(Yr){Yr.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function Gr(Yr){return this.viewer.raiseEvent("navigator-scroll",{tracker:Yr.eventSource,position:Yr.position,scroll:Yr.scroll,shift:Yr.shift,originalEvent:Yr.originalEvent}),!1}function Wr(Yr,ts){Zr(Yr,"rotate("+ts+"deg)")}function Zr(Yr,ts){Yr.style.webkitTransform=ts,Yr.style.mozTransform=ts,Yr.style.msTransform=ts,Yr.style.oTransform=ts,Yr.style.transform=ts}}(OpenSeadragon),function(Nr){var _r={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};Nr.extend(Nr,{getString:function(Ur){var jr=Ur.split("."),Gr=null,Wr=arguments,Zr=_r,Yr;for(Yr=0;Yr<jr.length-1;Yr++)Zr=Zr[jr[Yr]]||{};return Gr=Zr[jr[Yr]],typeof Gr!="string"&&(Nr.console.log("Untranslated source string:",Ur),Gr=""),Gr.replace(/\{\d+\}/g,function(ts){var es=parseInt(ts.match(/\d+/),10)+1;return es<Wr.length?Wr[es]:""})},setString:function(Ur,jr){var Gr=Ur.split("."),Wr=_r,Zr;for(Zr=0;Zr<Gr.length-1;Zr++)Wr[Gr[Zr]]||(Wr[Gr[Zr]]={}),Wr=Wr[Gr[Zr]];Wr[Gr[Zr]]=jr}})}(OpenSeadragon),function(Nr){Nr.Point=function(_r,Ur){this.x=typeof _r=="number"?_r:0,this.y=typeof Ur=="number"?Ur:0},Nr.Point.prototype={clone:function(){return new Nr.Point(this.x,this.y)},plus:function(_r){return new Nr.Point(this.x+_r.x,this.y+_r.y)},minus:function(_r){return new Nr.Point(this.x-_r.x,this.y-_r.y)},times:function(_r){return new Nr.Point(this.x*_r,this.y*_r)},divide:function(_r){return new Nr.Point(this.x/_r,this.y/_r)},negate:function(){return new Nr.Point(-this.x,-this.y)},distanceTo:function(_r){return Math.sqrt(Math.pow(this.x-_r.x,2)+Math.pow(this.y-_r.y,2))},squaredDistanceTo:function(_r){return Math.pow(this.x-_r.x,2)+Math.pow(this.y-_r.y,2)},apply:function(_r){return new Nr.Point(_r(this.x),_r(this.y))},equals:function(_r){return _r instanceof Nr.Point&&this.x===_r.x&&this.y===_r.y},rotate:function(_r,Ur){Ur=Ur||new Nr.Point(0,0);var jr,Gr;if(_r%90===0){var Wr=Nr.positiveModulo(_r,360);switch(Wr){case 0:jr=1,Gr=0;break;case 90:jr=0,Gr=1;break;case 180:jr=-1,Gr=0;break;case 270:jr=0,Gr=-1;break}}else{var Zr=_r*Math.PI/180;jr=Math.cos(Zr),Gr=Math.sin(Zr)}var Yr=jr*(this.x-Ur.x)-Gr*(this.y-Ur.y)+Ur.x,ts=Gr*(this.x-Ur.x)+jr*(this.y-Ur.y)+Ur.y;return new Nr.Point(Yr,ts)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(Nr){Nr.TileSource=function(Ur,jr,Gr,Wr,Zr,Yr){var ts=this,es=arguments,ns,Xr;if(Nr.isPlainObject(Ur)?ns=Ur:ns={width:es[0],height:es[1],tileSize:es[2],tileOverlap:es[3],minLevel:es[4],maxLevel:es[5]},Nr.EventSource.call(this),Nr.extend(!0,this,ns),!this.success){for(Xr=0;Xr<arguments.length;Xr++)if(Nr.isFunction(arguments[Xr])){this.success=arguments[Xr];break}}this.success&&this.addHandler("ready",function(qr){ts.success(qr)}),Nr.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new Nr.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=ns.width&&ns.height?ns.width/ns.height:1,this.dimensions=new Nr.Point(ns.width,ns.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=ns.tileOverlap?ns.tileOverlap:0,this.minLevel=ns.minLevel?ns.minLevel:0,this.maxLevel=ns.maxLevel!==void 0&&ns.maxLevel!==null?ns.maxLevel:ns.width&&ns.height?Math.ceil(Math.log(Math.max(ns.width,ns.height))/Math.log(2)):0,this.success&&Nr.isFunction(this.success)&&this.success(this))},Nr.TileSource.prototype={getTileSize:function(Ur){return Nr.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(Ur){return this._tileWidth?this._tileWidth:this.getTileSize(Ur)},getTileHeight:function(Ur){return this._tileHeight?this._tileHeight:this.getTileSize(Ur)},getLevelScale:function(Ur){var jr={},Gr;for(Gr=0;Gr<=this.maxLevel;Gr++)jr[Gr]=1/Math.pow(2,this.maxLevel-Gr);return this.getLevelScale=function(Wr){return jr[Wr]},this.getLevelScale(Ur)},getNumTiles:function(Ur){var jr=this.getLevelScale(Ur),Gr=Math.ceil(jr*this.dimensions.x/this.getTileWidth(Ur)),Wr=Math.ceil(jr*this.dimensions.y/this.getTileHeight(Ur));return new Nr.Point(Gr,Wr)},getPixelRatio:function(Ur){var jr=this.dimensions.times(this.getLevelScale(Ur)),Gr=1/jr.x,Wr=1/jr.y;return new Nr.Point(Gr,Wr)},getClosestLevel:function(){var Ur,jr;for(Ur=this.minLevel+1;Ur<=this.maxLevel&&(jr=this.getNumTiles(Ur),!(jr.x>1||jr.y>1));Ur++);return Ur-1},getTileAtPoint:function(Ur,jr){var Gr=jr.x>=0&&jr.x<=1&&jr.y>=0&&jr.y<=1/this.aspectRatio;Nr.console.assert(Gr,"[TileSource.getTileAtPoint] must be called with a valid point.");var Wr=this.dimensions.x*this.getLevelScale(Ur),Zr=jr.x*Wr,Yr=jr.y*Wr,ts=Math.floor(Zr/this.getTileWidth(Ur)),es=Math.floor(Yr/this.getTileHeight(Ur));jr.x>=1&&(ts=this.getNumTiles(Ur).x-1);var ns=1e-15;return jr.y>=1/this.aspectRatio-ns&&(es=this.getNumTiles(Ur).y-1),new Nr.Point(ts,es)},getTileBounds:function(Ur,jr,Gr,Wr){var Zr=this.dimensions.times(this.getLevelScale(Ur)),Yr=this.getTileWidth(Ur),ts=this.getTileHeight(Ur),es=jr===0?0:Yr*jr-this.tileOverlap,ns=Gr===0?0:ts*Gr-this.tileOverlap,Xr=Yr+(jr===0?1:2)*this.tileOverlap,qr=ts+(Gr===0?1:2)*this.tileOverlap,_i=1/Zr.x;return Xr=Math.min(Xr,Zr.x-es),qr=Math.min(qr,Zr.y-ns),Wr?new Nr.Rect(0,0,Xr,qr):new Nr.Rect(es*_i,ns*_i,Xr*_i,qr*_i)},getImageInfo:function(Ur){var jr=this,Gr,Wr,Zr,Yr,ts,es,ns;Ur&&(ts=Ur.split("/"),es=ts[ts.length-1],ns=es.lastIndexOf("."),ns>-1&&(ts[ts.length-1]=es.slice(0,ns))),Wr=function(Xr){typeof Xr=="string"&&(Xr=Nr.parseXml(Xr));var qr=Nr.TileSource.determineType(jr,Xr,Ur);if(!qr){jr.raiseEvent("open-failed",{message:"Unable to load TileSource",source:Ur});return}Yr=qr.prototype.configure.apply(jr,[Xr,Ur]),Yr.ajaxWithCredentials===void 0&&(Yr.ajaxWithCredentials=jr.ajaxWithCredentials),Zr=new qr(Yr),jr.ready=!0,jr.raiseEvent("ready",{tileSource:Zr})},Ur.match(/\.js$/)?(Gr=Ur.split("/").pop().replace(".js",""),Nr.jsonp({url:Ur,async:!1,callbackName:Gr,callback:Wr})):Nr.makeAjaxRequest({url:Ur,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(Xr){var qr=_r(Xr);Wr(qr)},error:function(Xr,qr){var _i;try{_i="HTTP "+Xr.status+" attempting to load TileSource"}catch{var rs;typeof qr>"u"||!qr.toString?rs="Unknown error":rs=qr.toString(),_i=rs+" attempting to load TileSource"}jr.raiseEvent("open-failed",{message:_i,source:Ur})}})},supports:function(Ur,jr){return!1},configure:function(Ur,jr){throw new Error("Method not implemented.")},getTileUrl:function(Ur,jr,Gr){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(Ur,jr,Gr){return{}},tileExists:function(Ur,jr,Gr){var Wr=this.getNumTiles(Ur);return Ur>=this.minLevel&&Ur<=this.maxLevel&&jr>=0&&Gr>=0&&jr<Wr.x&&Gr<Wr.y}},Nr.extend(!0,Nr.TileSource.prototype,Nr.EventSource.prototype);function _r(Ur){var jr=Ur.responseText,Gr=Ur.status,Wr,Zr;if(Ur){if(Ur.status!==200&&Ur.status!==0)throw Gr=Ur.status,Wr=Gr==404?"Not Found":Ur.statusText,new Error(Nr.getString("Errors.Status",Gr,Wr))}else throw new Error(Nr.getString("Errors.Security"));if(jr.match(/\s*<.*/))try{Zr=Ur.responseXML&&Ur.responseXML.documentElement?Ur.responseXML:Nr.parseXml(jr)}catch{Zr=Ur.responseText}else if(jr.match(/\s*[\{\[].*/))try{Zr=Nr.parseJSON(jr)}catch{Zr=jr}else Zr=jr;return Zr}Nr.TileSource.determineType=function(Ur,jr,Gr){var Wr;for(Wr in OpenSeadragon)if(Wr.match(/.+TileSource$/)&&Nr.isFunction(OpenSeadragon[Wr])&&Nr.isFunction(OpenSeadragon[Wr].prototype.supports)&&OpenSeadragon[Wr].prototype.supports.call(Ur,jr,Gr))return OpenSeadragon[Wr];Nr.console.error("No TileSource was able to open %s %s",Gr,jr)}}(OpenSeadragon),function(Nr){Nr.DziTileSource=function(jr,Gr,Wr,Zr,Yr,ts,es,ns,Xr){var qr,_i,rs,is;if(Nr.isPlainObject(jr)?is=jr:is={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=is.tilesUrl,this.fileFormat=is.fileFormat,this.displayRects=is.displayRects,this.displayRects)for(qr=this.displayRects.length-1;qr>=0;qr--)for(_i=this.displayRects[qr],rs=_i.minLevel;rs<=_i.maxLevel;rs++)this._levelRects[rs]||(this._levelRects[rs]=[]),this._levelRects[rs].push(_i);Nr.TileSource.apply(this,[is])},Nr.extend(Nr.DziTileSource.prototype,Nr.TileSource.prototype,{supports:function(jr,Gr){var Wr;return jr.Image?Wr=jr.Image.xmlns:jr.documentElement&&(jr.documentElement.localName=="Image"||jr.documentElement.tagName=="Image")&&(Wr=jr.documentElement.namespaceURI),Wr=(Wr||"").toLowerCase(),Wr.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||Wr.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(jr,Gr){var Wr;return Nr.isPlainObject(jr)?Wr=Ur(this,jr):Wr=_r(this,jr),Gr&&!Wr.tilesUrl&&(Wr.tilesUrl=Gr.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),Gr.search(/\.(dzi|xml|js)\?/)!=-1?Wr.queryParams=Gr.match(/\?.*/):Wr.queryParams=""),Wr},getTileUrl:function(jr,Gr,Wr){return[this.tilesUrl,jr,"/",Gr,"_",Wr,".",this.fileFormat,this.queryParams].join("")},tileExists:function(jr,Gr,Wr){var Zr=this._levelRects[jr],Yr,ts,es,ns,Xr,qr,_i;if(this.minLevel&&jr<this.minLevel||this.maxLevel&&jr>this.maxLevel)return!1;if(!Zr||!Zr.length)return!0;for(_i=Zr.length-1;_i>=0;_i--)if(Yr=Zr[_i],!(jr<Yr.minLevel||jr>Yr.maxLevel)&&(ts=this.getLevelScale(jr),es=Yr.x*ts,ns=Yr.y*ts,Xr=es+Yr.width*ts,qr=ns+Yr.height*ts,es=Math.floor(es/this._tileWidth),ns=Math.floor(ns/this._tileWidth),Xr=Math.ceil(Xr/this._tileWidth),qr=Math.ceil(qr/this._tileWidth),es<=Gr&&Gr<Xr&&ns<=Wr&&Wr<qr))return!0;return!1}});function _r(jr,Gr){if(!Gr||!Gr.documentElement)throw new Error(Nr.getString("Errors.Xml"));var Wr=Gr.documentElement,Zr=Wr.localName||Wr.tagName,Yr=Gr.documentElement.namespaceURI,ts=null,es=[],ns,Xr,qr,_i,rs;if(Zr=="Image")try{if(_i=Wr.getElementsByTagName("Size")[0],_i===void 0&&(_i=Wr.getElementsByTagNameNS(Yr,"Size")[0]),ts={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:Wr.getAttribute("Url"),Format:Wr.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(Wr.getAttribute("Overlap"),10),TileSize:parseInt(Wr.getAttribute("TileSize"),10),Size:{Height:parseInt(_i.getAttribute("Height"),10),Width:parseInt(_i.getAttribute("Width"),10)}}},!Nr.imageFormatSupported(ts.Image.Format))throw new Error(Nr.getString("Errors.ImageFormat",ts.Image.Format.toUpperCase()));for(ns=Wr.getElementsByTagName("DisplayRect"),ns===void 0&&(ns=Wr.getElementsByTagNameNS(Yr,"DisplayRect")[0]),rs=0;rs<ns.length;rs++)Xr=ns[rs],qr=Xr.getElementsByTagName("Rect")[0],qr===void 0&&(qr=Xr.getElementsByTagNameNS(Yr,"Rect")[0]),es.push({Rect:{X:parseInt(qr.getAttribute("X"),10),Y:parseInt(qr.getAttribute("Y"),10),Width:parseInt(qr.getAttribute("Width"),10),Height:parseInt(qr.getAttribute("Height"),10),MinLevel:parseInt(Xr.getAttribute("MinLevel"),10),MaxLevel:parseInt(Xr.getAttribute("MaxLevel"),10)}});return es.length&&(ts.Image.DisplayRect=es),Ur(jr,ts)}catch(os){throw os instanceof Error?os:new Error(Nr.getString("Errors.Dzi"))}else{if(Zr=="Collection")throw new Error(Nr.getString("Errors.Dzc"));if(Zr=="Error"){var is=Wr.getElementsByTagName("Message")[0],ss=is.firstChild.nodeValue;throw new Error(ss)}}throw new Error(Nr.getString("Errors.Dzi"))}function Ur(jr,Gr){var Wr=Gr.Image,Zr=Wr.Url,Yr=Wr.Format,ts=Wr.Size,es=Wr.DisplayRect||[],ns=parseInt(ts.Width,10),Xr=parseInt(ts.Height,10),qr=parseInt(Wr.TileSize,10),_i=parseInt(Wr.Overlap,10),rs=[],is,ss;for(ss=0;ss<es.length;ss++)is=es[ss].Rect,rs.push(new Nr.DisplayRect(parseInt(is.X,10),parseInt(is.Y,10),parseInt(is.Width,10),parseInt(is.Height,10),parseInt(is.MinLevel,10),parseInt(is.MaxLevel,10)));return Nr.extend(!0,{width:ns,height:Xr,tileSize:qr,tileOverlap:_i,minLevel:null,maxLevel:null,tilesUrl:Zr,fileFormat:Yr,displayRects:rs},Gr)}}(OpenSeadragon),function(Nr){Nr.IIIFTileSource=function(Wr){if(Nr.extend(!0,this,Wr),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(Wr.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=Wr.version,this.tile_width&&this.tile_height)Wr.tileWidth=this.tile_width,Wr.tileHeight=this.tile_height;else if(this.tile_width)Wr.tileSize=this.tile_width;else if(this.tile_height)Wr.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)Wr.tileWidth=this.tiles[0].width,Wr.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var Zr=0;Zr<this.tiles.length;Zr++)for(var Yr=0;Yr<this.tiles[Zr].scaleFactors.length;Yr++){var ts=this.tiles[Zr].scaleFactors[Yr];this.scale_factors.push(ts),Wr.tileSizePerScaleFactor[ts]={width:this.tiles[Zr].width,height:this.tiles[Zr].height||this.tiles[Zr].width}}}else if(_r(Wr)){for(var es=Math.min(this.height,this.width),ns=[256,512,1024],Xr=[],qr=0;qr<ns.length;qr++)ns[qr]<=es&&Xr.push(ns[qr]);Xr.length>0?Wr.tileSize=Math.max.apply(null,Xr):Wr.tileSize=es}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,Wr.levels=Ur(this),Nr.extend(!0,Wr,{width:Wr.levels[Wr.levels.length-1].width,height:Wr.levels[Wr.levels.length-1].height,tileSize:Math.max(Wr.height,Wr.width),tileOverlap:0,minLevel:0,maxLevel:Wr.levels.length-1}),this.levels=Wr.levels):Nr.console.error("Nothing in the info.json to construct image pyramids from");if(!Wr.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)Wr.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var _i=Math.max.apply(null,this.scale_factors);Wr.maxLevel=Math.round(Math.log(_i)*Math.LOG2E)}Nr.TileSource.apply(this,[Wr])},Nr.extend(Nr.IIIFTileSource.prototype,Nr.TileSource.prototype,{supports:function(Wr,Zr){return Wr.protocol&&Wr.protocol=="http://iiif.io/api/image"||Wr["@context"]&&(Wr["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||Wr["@context"]=="http://iiif.io/api/image/1/context.json")||Wr.profile&&Wr.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||Wr.identifier&&Wr.width&&Wr.height?!0:!!(Wr.documentElement&&Wr.documentElement.tagName=="info"&&Wr.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(Wr,Zr){if(Nr.isPlainObject(Wr)){if(!Wr["@context"])Wr["@context"]="http://iiif.io/api/image/1.0/context.json",Wr["@id"]=Zr.replace("/info.json",""),Wr.version=1;else{var ts=Wr["@context"];if(Array.isArray(ts)){for(var es=0;es<ts.length;es++)if(typeof ts[es]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(ts[es])||ts[es]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){ts=ts[es];break}}switch(ts){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":Wr.version=1;break;case"http://iiif.io/api/image/2/context.json":Wr.version=2;break;case"http://iiif.io/api/image/3/context.json":Wr.version=3;break;default:Nr.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!Wr["@id"]&&Wr.id&&(Wr["@id"]=Wr.id),Wr.preferredFormats){for(var ns=0;ns<Wr.preferredFormats.length;ns++)if(OpenSeadragon.imageFormatSupported(Wr.preferredFormats[ns])){Wr.tileFormat=Wr.preferredFormats[ns];break}}return Wr}else{var Yr=jr(Wr);return Yr["@context"]="http://iiif.io/api/image/1.0/context.json",Yr["@id"]=Zr.replace("/info.xml",""),Yr.version=1,Yr}},getTileWidth:function(Wr){if(this.emulateLegacyImagePyramid)return Nr.TileSource.prototype.getTileWidth.call(this,Wr);var Zr=Math.pow(2,this.maxLevel-Wr);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Zr]?this.tileSizePerScaleFactor[Zr].width:this._tileWidth},getTileHeight:function(Wr){if(this.emulateLegacyImagePyramid)return Nr.TileSource.prototype.getTileHeight.call(this,Wr);var Zr=Math.pow(2,this.maxLevel-Wr);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Zr]?this.tileSizePerScaleFactor[Zr].height:this._tileHeight},getLevelScale:function(Wr){if(this.emulateLegacyImagePyramid){var Zr=NaN;return this.levels.length>0&&Wr>=this.minLevel&&Wr<=this.maxLevel&&(Zr=this.levels[Wr].width/this.levels[this.maxLevel].width),Zr}return Nr.TileSource.prototype.getLevelScale.call(this,Wr)},getNumTiles:function(Wr){if(this.emulateLegacyImagePyramid){var Zr=this.getLevelScale(Wr);return Zr?new Nr.Point(1,1):new Nr.Point(0,0)}return Nr.TileSource.prototype.getNumTiles.call(this,Wr)},getTileAtPoint:function(Wr,Zr){return this.emulateLegacyImagePyramid?new Nr.Point(0,0):Nr.TileSource.prototype.getTileAtPoint.call(this,Wr,Zr)},getTileUrl:function(Wr,Zr,Yr){if(this.emulateLegacyImagePyramid){var ts=null;return this.levels.length>0&&Wr>=this.minLevel&&Wr<=this.maxLevel&&(ts=this.levels[Wr].url),ts}var es="0",ns=Math.pow(.5,this.maxLevel-Wr),Xr=Math.ceil(this.width*ns),qr=Math.ceil(this.height*ns),_i,rs,is,ss,os,ls,cs,ds,fs,ms,ps,ys,ws,xs;return _i=this.getTileWidth(Wr),rs=this.getTileHeight(Wr),is=Math.ceil(_i/ns),ss=Math.ceil(rs/ns),this.version===1?ws="native."+this.tileFormat:ws="default."+this.tileFormat,Xr<_i&&qr<rs?(this.version===2&&Xr===this.width||this.version===3&&Xr===this.width&&qr===this.height?ms="max":this.version===3?ms=Xr+","+qr:ms=Xr+",",os="full"):(ls=Zr*is,cs=Yr*ss,ds=Math.min(is,this.width-ls),fs=Math.min(ss,this.height-cs),Zr===0&&Yr===0&&ds===this.width&&fs===this.height?os="full":os=[ls,cs,ds,fs].join(","),ps=Math.ceil(ds*ns),ys=Math.ceil(fs*ns),this.version===2&&ps===this.width||this.version===3&&ps===this.width&&ys===this.height?ms="max":this.version===3?ms=ps+","+ys:ms=ps+","),xs=[this["@id"],os,ms,es,ws].join("/"),xs},__testonly__:{canBeTiled:_r,constructLevels:Ur}});function _r(Wr){var Zr=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],Yr=Array.isArray(Wr.profile)?Wr.profile[0]:Wr.profile,ts=Zr.indexOf(Yr)!==-1,es=!1;return Wr.version===2&&Wr.profile.length>1&&Wr.profile[1].supports&&(es=Wr.profile[1].supports.indexOf("sizeByW")!==-1),Wr.version===3&&Wr.extraFeatures&&(es=Wr.extraFeatures.indexOf("sizeByWh")!==-1),!ts||es}function Ur(Wr){for(var Zr=[],Yr=0;Yr<Wr.sizes.length;Yr++)Zr.push({url:Wr["@id"]+"/full/"+Wr.sizes[Yr].width+","+(Wr.version===3?Wr.sizes[Yr].height:"")+"/0/default."+Wr.tileFormat,width:Wr.sizes[Yr].width,height:Wr.sizes[Yr].height});return Zr.sort(function(ts,es){return ts.width-es.width})}function jr(Wr){if(!Wr||!Wr.documentElement)throw new Error(Nr.getString("Errors.Xml"));var Zr=Wr.documentElement,Yr=Zr.tagName,ts=null;if(Yr=="info")try{return ts={},Gr(Zr,ts),ts}catch(es){throw es instanceof Error?es:new Error(Nr.getString("Errors.IIIF"))}throw new Error(Nr.getString("Errors.IIIF"))}function Gr(Wr,Zr,Yr){var ts,es;if(Wr.nodeType==3&&Yr)es=Wr.nodeValue.trim(),es.match(/^\d*$/)&&(es=Number(es)),Zr[Yr]?(Nr.isArray(Zr[Yr])||(Zr[Yr]=[Zr[Yr]]),Zr[Yr].push(es)):Zr[Yr]=es;else if(Wr.nodeType==1)for(ts=0;ts<Wr.childNodes.length;ts++)Gr(Wr.childNodes[ts],Zr,Wr.nodeName)}}(OpenSeadragon),function(Nr){Nr.OsmTileSource=function(_r,Ur,jr,Gr,Wr){var Zr;Nr.isPlainObject(_r)?Zr=_r:Zr={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!Zr.width||!Zr.height)&&(Zr.width=65572864,Zr.height=65572864),Zr.tileSize||(Zr.tileSize=256,Zr.tileOverlap=0),Zr.tilesUrl||(Zr.tilesUrl="http://tile.openstreetmap.org/"),Zr.minLevel=8,Nr.TileSource.apply(this,[Zr])},Nr.extend(Nr.OsmTileSource.prototype,Nr.TileSource.prototype,{supports:function(_r,Ur){return _r.type&&_r.type=="openstreetmaps"},configure:function(_r,Ur){return _r},getTileUrl:function(_r,Ur,jr){return this.tilesUrl+(_r-8)+"/"+Ur+"/"+jr+".png"}})}(OpenSeadragon),function(Nr){Nr.TmsTileSource=function(_r,Ur,jr,Gr,Wr){var Zr;Nr.isPlainObject(_r)?Zr=_r:Zr={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var Yr=Math.ceil(Zr.width/256)*256,ts=Math.ceil(Zr.height/256)*256,es;Yr>ts?es=Yr/256:es=ts/256,Zr.maxLevel=Math.ceil(Math.log(es)/Math.log(2))-1,Zr.tileSize=256,Zr.width=Yr,Zr.height=ts,Nr.TileSource.apply(this,[Zr])},Nr.extend(Nr.TmsTileSource.prototype,Nr.TileSource.prototype,{supports:function(_r,Ur){return _r.type&&_r.type=="tiledmapservice"},configure:function(_r,Ur){return _r},getTileUrl:function(_r,Ur,jr){var Gr=this.getNumTiles(_r).y-1;return this.tilesUrl+_r+"/"+Ur+"/"+(Gr-jr)+".png"}})}(OpenSeadragon),function(Nr){Nr.ZoomifyTileSource=function(_r){_r.tileSize=256;var Ur={x:_r.width,y:_r.height};for(_r.imageSizes=[{x:_r.width,y:_r.height}],_r.gridSize=[this._getGridSize(_r.width,_r.height,_r.tileSize)];parseInt(Ur.x,10)>_r.tileSize||parseInt(Ur.y,10)>_r.tileSize;)Ur.x=Math.floor(Ur.x/2),Ur.y=Math.floor(Ur.y/2),_r.imageSizes.push({x:Ur.x,y:Ur.y}),_r.gridSize.push(this._getGridSize(Ur.x,Ur.y,_r.tileSize));_r.imageSizes.reverse(),_r.gridSize.reverse(),_r.minLevel=0,_r.maxLevel=_r.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[_r])},Nr.extend(Nr.ZoomifyTileSource.prototype,Nr.TileSource.prototype,{_getGridSize:function(_r,Ur,jr){return{x:Math.ceil(_r/jr),y:Math.ceil(Ur/jr)}},_calculateAbsoluteTileNumber:function(_r,Ur,jr){for(var Gr=0,Wr={},Zr=0;Zr<_r;Zr++)Wr=this.gridSize[Zr],Gr+=Wr.x*Wr.y;return Wr=this.gridSize[_r],Gr+=Wr.x*jr+Ur,Gr},supports:function(_r,Ur){return _r.type&&_r.type=="zoomifytileservice"},configure:function(_r,Ur){return _r},getTileUrl:function(_r,Ur,jr){var Gr=0,Wr=this._calculateAbsoluteTileNumber(_r,Ur,jr);return Gr=Math.floor(Wr/256),this.tilesUrl+"TileGroup"+Gr+"/"+_r+"-"+Ur+"-"+jr+".jpg"}})}(OpenSeadragon),function(Nr){Nr.LegacyTileSource=function(Gr){var Wr,Zr,Yr;Nr.isArray(Gr)&&(Wr={type:"legacy-image-pyramid",levels:Gr}),Wr.levels=_r(Wr.levels),Wr.levels.length>0?(Zr=Wr.levels[Wr.levels.length-1].width,Yr=Wr.levels[Wr.levels.length-1].height):(Zr=0,Yr=0,Nr.console.error("No supported image formats found")),Nr.extend(!0,Wr,{width:Zr,height:Yr,tileSize:Math.max(Yr,Zr),tileOverlap:0,minLevel:0,maxLevel:Wr.levels.length>0?Wr.levels.length-1:0}),Nr.TileSource.apply(this,[Wr]),this.levels=Wr.levels},Nr.extend(Nr.LegacyTileSource.prototype,Nr.TileSource.prototype,{supports:function(Gr,Wr){return Gr.type&&Gr.type=="legacy-image-pyramid"||Gr.documentElement&&Gr.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(Gr,Wr){var Zr;return Nr.isPlainObject(Gr)?Zr=jr(this,Gr):Zr=Ur(this,Gr),Zr},getLevelScale:function(Gr){var Wr=NaN;return this.levels.length>0&&Gr>=this.minLevel&&Gr<=this.maxLevel&&(Wr=this.levels[Gr].width/this.levels[this.maxLevel].width),Wr},getNumTiles:function(Gr){var Wr=this.getLevelScale(Gr);return Wr?new Nr.Point(1,1):new Nr.Point(0,0)},getTileUrl:function(Gr,Wr,Zr){var Yr=null;return this.levels.length>0&&Gr>=this.minLevel&&Gr<=this.maxLevel&&(Yr=this.levels[Gr].url),Yr}});function _r(Gr){var Wr=[],Zr,Yr;for(Yr=0;Yr<Gr.length;Yr++)Zr=Gr[Yr],Zr.height&&Zr.width&&Zr.url?Wr.push({url:Zr.url,width:Number(Zr.width),height:Number(Zr.height)}):Nr.console.error("Unsupported image format: %s",Zr.url?Zr.url:"<no URL>");return Wr.sort(function(ts,es){return ts.height-es.height})}function Ur(Gr,Wr){if(!Wr||!Wr.documentElement)throw new Error(Nr.getString("Errors.Xml"));var Zr=Wr.documentElement,Yr=Zr.tagName,ts=null,es=[],ns,Xr;if(Yr=="image")try{for(ts={type:Zr.getAttribute("type"),levels:[]},es=Zr.getElementsByTagName("level"),Xr=0;Xr<es.length;Xr++)ns=es[Xr],ts.levels.push({url:ns.getAttribute("url"),width:parseInt(ns.getAttribute("width"),10),height:parseInt(ns.getAttribute("height"),10)});return jr(Gr,ts)}catch(qr){throw qr instanceof Error?qr:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(Yr=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(Yr=="error")throw new Error("Error: "+Wr)}throw new Error("Unknown element "+Yr)}function jr(Gr,Wr){return Wr.levels}}(OpenSeadragon),function(Nr){Nr.ImageTileSource=function(_r){_r=Nr.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},_r),Nr.TileSource.apply(this,[_r])},Nr.extend(Nr.ImageTileSource.prototype,Nr.TileSource.prototype,{supports:function(_r,Ur){return _r.type&&_r.type==="image"},configure:function(_r,Ur){return _r},getImageInfo:function(_r){var Ur=this._image=new Image,jr=this;this.crossOriginPolicy&&(Ur.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(Ur.useCredentials=this.ajaxWithCredentials),Nr.addEvent(Ur,"load",function(){jr.width=Object.prototype.hasOwnProperty.call(Ur,"naturalWidth")?Ur.naturalWidth:Ur.width,jr.height=Object.prototype.hasOwnProperty.call(Ur,"naturalHeight")?Ur.naturalHeight:Ur.height,jr.aspectRatio=jr.width/jr.height,jr.dimensions=new Nr.Point(jr.width,jr.height),jr._tileWidth=jr.width,jr._tileHeight=jr.height,jr.tileOverlap=0,jr.minLevel=0,jr.levels=jr._buildLevels(),jr.maxLevel=jr.levels.length-1,jr.ready=!0,jr.raiseEvent("ready",{tileSource:jr})}),Nr.addEvent(Ur,"error",function(){jr.raiseEvent("open-failed",{message:"Error loading image at "+_r,source:_r})}),Ur.src=_r},getLevelScale:function(_r){var Ur=NaN;return _r>=this.minLevel&&_r<=this.maxLevel&&(Ur=this.levels[_r].width/this.levels[this.maxLevel].width),Ur},getNumTiles:function(_r){var Ur=this.getLevelScale(_r);return Ur?new Nr.Point(1,1):new Nr.Point(0,0)},getTileUrl:function(_r,Ur,jr){var Gr=null;return _r>=this.minLevel&&_r<=this.maxLevel&&(Gr=this.levels[_r].url),Gr},getContext2D:function(_r,Ur,jr){var Gr=null;return _r>=this.minLevel&&_r<=this.maxLevel&&(Gr=this.levels[_r].context2D),Gr},_buildLevels:function(){var _r=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!Nr.supportsCanvas||!this.useCanvas)return delete this._image,_r;var Ur=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,jr=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,Gr=document.createElement("canvas"),Wr=Gr.getContext("2d");if(Gr.width=Ur,Gr.height=jr,Wr.drawImage(this._image,0,0,Ur,jr),_r[0].context2D=Wr,delete this._image,Nr.isCanvasTainted(Gr))return _r;for(;Ur>=2&&jr>=2;){Ur=Math.floor(Ur/2),jr=Math.floor(jr/2);var Zr=document.createElement("canvas"),Yr=Zr.getContext("2d");Zr.width=Ur,Zr.height=jr,Yr.drawImage(Gr,0,0,Ur,jr),_r.splice(0,0,{context2D:Yr,width:Ur,height:jr}),Gr=Zr,Wr=Yr}return _r}})}(OpenSeadragon),function(Nr){Nr.TileSourceCollection=function(_r,Ur,jr,Gr){Nr.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(Nr){Nr.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},Nr.Button=function(Yr){var ts=this;Nr.EventSource.call(this),Nr.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:Nr.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:Nr.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},Yr),this.element=Yr.element||Nr.makeNeutralElement("div"),Yr.element||(this.imgRest=Nr.makeTransparentImage(this.srcRest),this.imgGroup=Nr.makeTransparentImage(this.srcGroup),this.imgHover=Nr.makeTransparentImage(this.srcHover),this.imgDown=Nr.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",Nr.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",Nr.Browser.vendor==Nr.BROWSERS.FIREFOX&&Nr.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=Nr.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new Nr.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(es){es.insideElementPressed?(Wr(ts,Nr.ButtonState.DOWN),ts.raiseEvent("enter",{originalEvent:es.originalEvent})):es.buttonDownAny||Wr(ts,Nr.ButtonState.HOVER)},focusHandler:function(es){this.enterHandler(es),ts.raiseEvent("focus",{originalEvent:es.originalEvent})},exitHandler:function(es){Zr(ts,Nr.ButtonState.GROUP),es.insideElementPressed&&ts.raiseEvent("exit",{originalEvent:es.originalEvent})},blurHandler:function(es){this.exitHandler(es),ts.raiseEvent("blur",{originalEvent:es.originalEvent})},pressHandler:function(es){Wr(ts,Nr.ButtonState.DOWN),ts.raiseEvent("press",{originalEvent:es.originalEvent})},releaseHandler:function(es){es.insideElementPressed&&es.insideElementReleased?(Zr(ts,Nr.ButtonState.HOVER),ts.raiseEvent("release",{originalEvent:es.originalEvent})):es.insideElementPressed?Zr(ts,Nr.ButtonState.GROUP):Wr(ts,Nr.ButtonState.HOVER)},clickHandler:function(es){es.quick&&ts.raiseEvent("click",{originalEvent:es.originalEvent})},keyHandler:function(es){return es.keyCode===13?(ts.raiseEvent("click",{originalEvent:es.originalEvent}),ts.raiseEvent("release",{originalEvent:es.originalEvent}),!1):!0}}),Zr(this,Nr.ButtonState.REST)},Nr.extend(Nr.Button.prototype,Nr.EventSource.prototype,{notifyGroupEnter:function(){Wr(this,Nr.ButtonState.GROUP)},notifyGroupExit:function(){Zr(this,Nr.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,Nr.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,Nr.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function _r(Yr){Nr.requestAnimationFrame(function(){Ur(Yr)})}function Ur(Yr){var ts,es,ns;Yr.shouldFade&&(ts=Nr.now(),es=ts-Yr.fadeBeginTime,ns=1-es/Yr.fadeLength,ns=Math.min(1,ns),ns=Math.max(0,ns),Yr.imgGroup&&Nr.setElementOpacity(Yr.imgGroup,ns,!0),ns>0&&_r(Yr))}function jr(Yr){Yr.shouldFade=!0,Yr.fadeBeginTime=Nr.now()+Yr.fadeDelay,window.setTimeout(function(){_r(Yr)},Yr.fadeDelay)}function Gr(Yr){Yr.shouldFade=!1,Yr.imgGroup&&Nr.setElementOpacity(Yr.imgGroup,1,!0)}function Wr(Yr,ts){Yr.element.disabled||(ts>=Nr.ButtonState.GROUP&&Yr.currentState==Nr.ButtonState.REST&&(Gr(Yr),Yr.currentState=Nr.ButtonState.GROUP),ts>=Nr.ButtonState.HOVER&&Yr.currentState==Nr.ButtonState.GROUP&&(Yr.imgHover&&(Yr.imgHover.style.visibility=""),Yr.currentState=Nr.ButtonState.HOVER),ts>=Nr.ButtonState.DOWN&&Yr.currentState==Nr.ButtonState.HOVER&&(Yr.imgDown&&(Yr.imgDown.style.visibility=""),Yr.currentState=Nr.ButtonState.DOWN))}function Zr(Yr,ts){Yr.element.disabled||(ts<=Nr.ButtonState.HOVER&&Yr.currentState==Nr.ButtonState.DOWN&&(Yr.imgDown&&(Yr.imgDown.style.visibility="hidden"),Yr.currentState=Nr.ButtonState.HOVER),ts<=Nr.ButtonState.GROUP&&Yr.currentState==Nr.ButtonState.HOVER&&(Yr.imgHover&&(Yr.imgHover.style.visibility="hidden"),Yr.currentState=Nr.ButtonState.GROUP),ts<=Nr.ButtonState.REST&&Yr.currentState==Nr.ButtonState.GROUP&&(jr(Yr),Yr.currentState=Nr.ButtonState.REST))}}(OpenSeadragon),function(Nr){Nr.ButtonGroup=function(_r){Nr.extend(!0,this,{buttons:[],clickTimeThreshold:Nr.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:Nr.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},_r);var Ur=this.buttons.concat([]),jr=this,Gr;if(this.element=_r.element||Nr.makeNeutralElement("div"),!_r.group)for(this.element.style.display="inline-block",Gr=0;Gr<Ur.length;Gr++)this.element.appendChild(Ur[Gr].element);Nr.setElementTouchActionNone(this.element),this.tracker=new Nr.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Wr){var Zr;for(Zr=0;Zr<jr.buttons.length;Zr++)jr.buttons[Zr].notifyGroupEnter()},exitHandler:function(Wr){var Zr;if(!Wr.insideElementPressed)for(Zr=0;Zr<jr.buttons.length;Zr++)jr.buttons[Zr].notifyGroupExit()}})},Nr.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(Nr){Nr.Rect=function(_r,Ur,jr,Gr,Wr){this.x=typeof _r=="number"?_r:0,this.y=typeof Ur=="number"?Ur:0,this.width=typeof jr=="number"?jr:0,this.height=typeof Gr=="number"?Gr:0,this.degrees=typeof Wr=="number"?Wr:0,this.degrees=Nr.positiveModulo(this.degrees,360);var Zr,Yr;this.degrees>=270?(Zr=this.getTopRight(),this.x=Zr.x,this.y=Zr.y,Yr=this.height,this.height=this.width,this.width=Yr,this.degrees-=270):this.degrees>=180?(Zr=this.getBottomRight(),this.x=Zr.x,this.y=Zr.y,this.degrees-=180):this.degrees>=90&&(Zr=this.getBottomLeft(),this.x=Zr.x,this.y=Zr.y,Yr=this.height,this.height=this.width,this.width=Yr,this.degrees-=90)},Nr.Rect.fromSummits=function(_r,Ur,jr){var Gr=_r.distanceTo(Ur),Wr=_r.distanceTo(jr),Zr=Ur.minus(_r),Yr=Math.atan(Zr.y/Zr.x);return Zr.x<0?Yr+=Math.PI:Zr.y<0&&(Yr+=2*Math.PI),new Nr.Rect(_r.x,_r.y,Gr,Wr,Yr/Math.PI*180)},Nr.Rect.prototype={clone:function(){return new Nr.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new Nr.Point(this.x,this.y)},getBottomRight:function(){return new Nr.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new Nr.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new Nr.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new Nr.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new Nr.Point(this.width,this.height)},equals:function(_r){return _r instanceof Nr.Rect&&this.x===_r.x&&this.y===_r.y&&this.width===_r.width&&this.height===_r.height&&this.degrees===_r.degrees},times:function(_r){return new Nr.Rect(this.x*_r,this.y*_r,this.width*_r,this.height*_r,this.degrees)},translate:function(_r){return new Nr.Rect(this.x+_r.x,this.y+_r.y,this.width,this.height,this.degrees)},union:function(_r){var Ur=this.getBoundingBox(),jr=_r.getBoundingBox(),Gr=Math.min(Ur.x,jr.x),Wr=Math.min(Ur.y,jr.y),Zr=Math.max(Ur.x+Ur.width,jr.x+jr.width),Yr=Math.max(Ur.y+Ur.height,jr.y+jr.height);return new Nr.Rect(Gr,Wr,Zr-Gr,Yr-Wr)},intersection:function(_r){var Ur=1e-10,jr=[],Gr=this.getTopLeft();_r.containsPoint(Gr,Ur)&&jr.push(Gr);var Wr=this.getTopRight();_r.containsPoint(Wr,Ur)&&jr.push(Wr);var Zr=this.getBottomLeft();_r.containsPoint(Zr,Ur)&&jr.push(Zr);var Yr=this.getBottomRight();_r.containsPoint(Yr,Ur)&&jr.push(Yr);var ts=_r.getTopLeft();this.containsPoint(ts,Ur)&&jr.push(ts);var es=_r.getTopRight();this.containsPoint(es,Ur)&&jr.push(es);var ns=_r.getBottomLeft();this.containsPoint(ns,Ur)&&jr.push(ns);var Xr=_r.getBottomRight();this.containsPoint(Xr,Ur)&&jr.push(Xr);for(var qr=this._getSegments(),_i=_r._getSegments(),rs=0;rs<qr.length;rs++)for(var is=qr[rs],ss=0;ss<_i.length;ss++){var os=_i[ss],ls=cs(is[0],is[1],os[0],os[1]);ls&&jr.push(ls)}function cs(xs,Es,Rs,_s){var Bs=Es.minus(xs),vs=_s.minus(Rs),Cs=-vs.x*Bs.y+Bs.x*vs.y;if(Cs===0)return null;var Ss=(Bs.x*(xs.y-Rs.y)-Bs.y*(xs.x-Rs.x))/Cs,As=(vs.x*(xs.y-Rs.y)-vs.y*(xs.x-Rs.x))/Cs;return-Ur<=Ss&&Ss<=1-Ur&&-Ur<=As&&As<=1-Ur?new Nr.Point(xs.x+As*Bs.x,xs.y+As*Bs.y):null}if(jr.length===0)return null;for(var ds=jr[0].x,fs=jr[0].x,ms=jr[0].y,ps=jr[0].y,ys=1;ys<jr.length;ys++){var ws=jr[ys];ws.x<ds&&(ds=ws.x),ws.x>fs&&(fs=ws.x),ws.y<ms&&(ms=ws.y),ws.y>ps&&(ps=ws.y)}return new Nr.Rect(ds,ms,fs-ds,ps-ms)},_getSegments:function(){var _r=this.getTopLeft(),Ur=this.getTopRight(),jr=this.getBottomLeft(),Gr=this.getBottomRight();return[[_r,Ur],[Ur,Gr],[Gr,jr],[jr,_r]]},rotate:function(_r,Ur){if(_r=Nr.positiveModulo(_r,360),_r===0)return this.clone();Ur=Ur||this.getCenter();var jr=this.getTopLeft().rotate(_r,Ur),Gr=this.getTopRight().rotate(_r,Ur),Wr=Gr.minus(jr);Wr=Wr.apply(function(Yr){var ts=1e-15;return Math.abs(Yr)<ts?0:Yr});var Zr=Math.atan(Wr.y/Wr.x);return Wr.x<0?Zr+=Math.PI:Wr.y<0&&(Zr+=2*Math.PI),new Nr.Rect(jr.x,jr.y,this.width,this.height,Zr/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var _r=this.getTopLeft(),Ur=this.getTopRight(),jr=this.getBottomLeft(),Gr=this.getBottomRight(),Wr=Math.min(_r.x,Ur.x,jr.x,Gr.x),Zr=Math.max(_r.x,Ur.x,jr.x,Gr.x),Yr=Math.min(_r.y,Ur.y,jr.y,Gr.y),ts=Math.max(_r.y,Ur.y,jr.y,Gr.y);return new Nr.Rect(Wr,Yr,Zr-Wr,ts-Yr)},getIntegerBoundingBox:function(){var _r=this.getBoundingBox(),Ur=Math.floor(_r.x),jr=Math.floor(_r.y),Gr=Math.ceil(_r.width+_r.x-Ur),Wr=Math.ceil(_r.height+_r.y-jr);return new Nr.Rect(Ur,jr,Gr,Wr)},containsPoint:function(_r,Ur){Ur=Ur||0;var jr=this.getTopLeft(),Gr=this.getTopRight(),Wr=this.getBottomLeft(),Zr=Gr.minus(jr),Yr=Wr.minus(jr);return(_r.x-jr.x)*Zr.x+(_r.y-jr.y)*Zr.y>=-Ur&&(_r.x-Gr.x)*Zr.x+(_r.y-Gr.y)*Zr.y<=Ur&&(_r.x-jr.x)*Yr.x+(_r.y-jr.y)*Yr.y>=-Ur&&(_r.x-Wr.x)*Yr.x+(_r.y-Wr.y)*Yr.y<=Ur},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(Nr){var _r={};Nr.ReferenceStrip=function(es){var ns=this,Xr=es.viewer,qr=Nr.getElementSize(Xr.element),_i,rs,is;for(es.id||(es.id="referencestrip-"+Nr.now(),this.element=Nr.makeNeutralElement("div"),this.element.id=es.id,this.element.className="referencestrip"),es=Nr.extend(!0,{sizeRatio:Nr.DEFAULT_SETTINGS.referenceStripSizeRatio,position:Nr.DEFAULT_SETTINGS.referenceStripPosition,scroll:Nr.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:Nr.DEFAULT_SETTINGS.clickTimeThreshold},es,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),Nr.extend(this,es),_r[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,rs=this.element.style,rs.marginTop="0px",rs.marginRight="0px",rs.marginBottom="0px",rs.marginLeft="0px",rs.left="0px",rs.bottom="0px",rs.border="0px",rs.background="#000",rs.position="relative",Nr.setElementTouchActionNone(this.element),Nr.setElementOpacity(this.element,.8),this.viewer=Xr,this.innerTracker=new Nr.MouseTracker({element:this.element,dragHandler:Nr.delegate(this,Ur),scrollHandler:Nr.delegate(this,jr),enterHandler:Nr.delegate(this,Wr),exitHandler:Nr.delegate(this,Zr),keyDownHandler:Nr.delegate(this,Yr),keyHandler:Nr.delegate(this,ts)}),es.width&&es.height?(this.element.style.width=es.width+"px",this.element.style.height=es.height+"px",Xr.addControl(this.element,{anchor:Nr.ControlAnchor.BOTTOM_LEFT})):es.scroll=="horizontal"?(this.element.style.width=qr.x*es.sizeRatio*Xr.tileSources.length+12*Xr.tileSources.length+"px",this.element.style.height=qr.y*es.sizeRatio+"px",Xr.addControl(this.element,{anchor:Nr.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=qr.y*es.sizeRatio*Xr.tileSources.length+12*Xr.tileSources.length+"px",this.element.style.width=qr.x*es.sizeRatio+"px",Xr.addControl(this.element,{anchor:Nr.ControlAnchor.TOP_LEFT})),this.panelWidth=qr.x*this.sizeRatio+8,this.panelHeight=qr.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},is=0;is<Xr.tileSources.length;is++)_i=Nr.makeNeutralElement("div"),_i.id=this.element.id+"-"+is,_i.style.width=ns.panelWidth+"px",_i.style.height=ns.panelHeight+"px",_i.style.display="inline",_i.style.float="left",_i.style.cssFloat="left",_i.style.styleFloat="left",_i.style.padding="2px",Nr.setElementTouchActionNone(_i),_i.innerTracker=new Nr.MouseTracker({element:_i,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(ss){ss.eventSource.dragging=Nr.now()},releaseHandler:function(ss){var os=ss.eventSource,ls=os.element.id,cs=Number(ls.split("-")[2]),ds=Nr.now();ss.insideElementPressed&&ss.insideElementReleased&&os.dragging&&ds-os.dragging<os.clickTimeThreshold&&(os.dragging=null,Xr.goToPage(cs))}}),this.element.appendChild(_i),_i.activePanel=!1,this.panels.push(_i);Gr(this,this.scroll=="vertical"?qr.y:qr.x,0),this.setFocus(0)},Nr.extend(Nr.ReferenceStrip.prototype,Nr.EventSource.prototype,Nr.Viewer.prototype,{setFocus:function(es){var ns=this.element.querySelector("#"+this.element.id+"-"+es),Xr=Nr.getElementSize(this.viewer.canvas),qr=Number(this.element.style.width.replace("px","")),_i=Number(this.element.style.height.replace("px","")),rs=-Number(this.element.style.marginLeft.replace("px","")),is=-Number(this.element.style.marginTop.replace("px","")),ss;this.currentSelected!==ns&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=ns,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(ss=Number(es)*(this.panelWidth+3),ss>rs+Xr.x-this.panelWidth?(ss=Math.min(ss,qr-Xr.x),this.element.style.marginLeft=-ss+"px",Gr(this,Xr.x,-ss)):ss<rs&&(ss=Math.max(0,ss-Xr.x/2),this.element.style.marginLeft=-ss+"px",Gr(this,Xr.x,-ss))):(ss=Number(es)*(this.panelHeight+3),ss>is+Xr.y-this.panelHeight?(ss=Math.min(ss,_i-Xr.y),this.element.style.marginTop=-ss+"px",Gr(this,Xr.y,-ss)):ss<is&&(ss=Math.max(0,ss-Xr.y/2),this.element.style.marginTop=-ss+"px",Gr(this,Xr.y,-ss))),this.currentPage=es,Wr.call(this,{eventSource:this.innerTracker}))},update:function(){return _r[this.id].animating?(Nr.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var es in this.miniViewers)this.miniViewers[es].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function Ur(es){var ns=Number(this.element.style.marginLeft.replace("px","")),Xr=Number(this.element.style.marginTop.replace("px","")),qr=Number(this.element.style.width.replace("px","")),_i=Number(this.element.style.height.replace("px","")),rs=Nr.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-es.delta.x>0?ns>-(qr-rs.x)&&(this.element.style.marginLeft=ns+es.delta.x*2+"px",Gr(this,rs.x,ns+es.delta.x*2)):-es.delta.x<0&&ns<0&&(this.element.style.marginLeft=ns+es.delta.x*2+"px",Gr(this,rs.x,ns+es.delta.x*2)):-es.delta.y>0?Xr>-(_i-rs.y)&&(this.element.style.marginTop=Xr+es.delta.y*2+"px",Gr(this,rs.y,Xr+es.delta.y*2)):-es.delta.y<0&&Xr<0&&(this.element.style.marginTop=Xr+es.delta.y*2+"px",Gr(this,rs.y,Xr+es.delta.y*2))),!1}function jr(es){var ns=Number(this.element.style.marginLeft.replace("px","")),Xr=Number(this.element.style.marginTop.replace("px","")),qr=Number(this.element.style.width.replace("px","")),_i=Number(this.element.style.height.replace("px","")),rs=Nr.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?es.scroll>0?ns>-(qr-rs.x)&&(this.element.style.marginLeft=ns-es.scroll*60+"px",Gr(this,rs.x,ns-es.scroll*60)):es.scroll<0&&ns<0&&(this.element.style.marginLeft=ns-es.scroll*60+"px",Gr(this,rs.x,ns-es.scroll*60)):es.scroll<0?Xr>rs.y-_i&&(this.element.style.marginTop=Xr+es.scroll*60+"px",Gr(this,rs.y,Xr+es.scroll*60)):es.scroll>0&&Xr<0&&(this.element.style.marginTop=Xr+es.scroll*60+"px",Gr(this,rs.y,Xr+es.scroll*60))),!1}function Gr(es,ns,Xr){var qr,_i,rs,is,ss,os,ls;for(es.scroll=="horizontal"?qr=es.panelWidth:qr=es.panelHeight,_i=Math.ceil(ns/qr)+5,rs=Math.ceil((Math.abs(Xr)+ns)/qr)+1,_i=rs-_i,_i=_i<0?0:_i,os=_i;os<rs&&os<es.panels.length;os++)if(ls=es.panels[os],!ls.activePanel){var cs,ds=es.viewer.tileSources[os];ds.referenceStripThumbnailUrl?cs={type:"image",url:ds.referenceStripThumbnailUrl}:cs=ds,is=new Nr.Viewer({id:ls.id,tileSources:[cs],element:ls,navigatorSizeRatio:es.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:es.viewer.loadTilesWithAjax,ajaxHeaders:es.viewer.ajaxHeaders,useCanvas:es.useCanvas}),is.displayRegion=Nr.makeNeutralElement("div"),is.displayRegion.id=ls.id+"-displayregion",is.displayRegion.className="displayregion",ss=is.displayRegion.style,ss.position="relative",ss.top="0px",ss.left="0px",ss.fontSize="0px",ss.overflow="hidden",ss.float="left",ss.cssFloat="left",ss.styleFloat="left",ss.zIndex=999999999,ss.cursor="default",ss.width=es.panelWidth-4+"px",ss.height=es.panelHeight-4+"px",is.displayRegion.innerTracker=new Nr.MouseTracker({element:is.displayRegion,startDisabled:!0}),ls.getElementsByTagName("div")[0].appendChild(is.displayRegion),es.miniViewers[ls.id]=is,ls.activePanel=!0}}function Wr(es){var ns=es.eventSource.element;return this.scroll=="horizontal"?ns.style.marginBottom="0px":ns.style.marginLeft="0px",!1}function Zr(es){var ns=es.eventSource.element;return this.scroll=="horizontal"?ns.style.marginBottom="-"+Nr.getElementSize(ns).y/2+"px":ns.style.marginLeft="-"+Nr.getElementSize(ns).x/2+"px",!1}function Yr(es){if(!es.preventDefaultAction&&!es.ctrl&&!es.alt&&!es.meta)switch(es.keyCode){case 38:return jr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return jr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return jr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return jr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function ts(es){if(!es.preventDefaultAction&&!es.ctrl&&!es.alt&&!es.meta)switch(es.keyCode){case 61:return jr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return jr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return jr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return jr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return jr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return jr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(Nr){Nr.DisplayRect=function(_r,Ur,jr,Gr,Wr,Zr){Nr.Rect.apply(this,[_r,Ur,jr,Gr]),this.minLevel=Wr,this.maxLevel=Zr},Nr.extend(Nr.DisplayRect.prototype,Nr.Rect.prototype)}(OpenSeadragon),function(Nr){Nr.Spring=function(Ur){var jr=arguments;typeof Ur!="object"&&(Ur={initial:jr.length&&typeof jr[0]=="number"?jr[0]:void 0,springStiffness:jr.length>1?jr[1].springStiffness:5,animationTime:jr.length>1?jr[1].animationTime:1.5}),Nr.console.assert(typeof Ur.springStiffness=="number"&&Ur.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),Nr.console.assert(typeof Ur.animationTime=="number"&&Ur.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),Ur.exponential&&(this._exponential=!0,delete Ur.exponential),Nr.extend(!0,this,Ur),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:Nr.now()},Nr.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},Nr.Spring.prototype={resetTo:function(Ur){Nr.console.assert(!this._exponential||Ur!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=Ur,this.start.time=this.target.time=this.current.time=Nr.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(Ur){Nr.console.assert(!this._exponential||Ur!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=Ur,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(Ur){this.start.value+=Ur,this.target.value+=Ur,this._exponential&&(Nr.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(Ur){this._exponential=Ur,this._exponential&&(Nr.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=Nr.now();var Ur,jr;this._exponential?(Ur=this.start._logValue,jr=this.target._logValue):(Ur=this.start.value,jr=this.target.value);var Gr=this.current.time>=this.target.time?jr:Ur+(jr-Ur)*_r(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),Wr=this.current.value;return this._exponential?this.current.value=Math.exp(Gr):this.current.value=Gr,Wr!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function _r(Ur,jr){return(1-Math.exp(Ur*-jr))/(1-Math.exp(-Ur))}}(OpenSeadragon),function(Nr){function _r(jr){Nr.extend(!0,this,{timeout:Nr.DEFAULT_SETTINGS.timeout,jobId:null},jr),this.image=null}_r.prototype={errorMsg:null,start:function(){var jr=this,Gr=this.abort;this.image=new Image,this.image.onload=function(){jr.finish(!0)},this.image.onabort=this.image.onerror=function(){jr.errorMsg="Image load aborted",jr.finish(!1)},this.jobId=window.setTimeout(function(){jr.errorMsg="Image load exceeded timeout ("+jr.timeout+" ms)",jr.finish(!1)},this.timeout),this.loadWithAjax?(this.request=Nr.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(Wr){var Zr;try{Zr=new window.Blob([Wr.response])}catch(ns){var Yr=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(ns.name==="TypeError"&&Yr){var ts=new Yr;ts.append(Wr.response),Zr=ts.getBlob()}}Zr.size===0&&(jr.errorMsg="Empty image response.",jr.finish(!1));var es=(window.URL||window.webkitURL).createObjectURL(Zr);jr.image.src=es},error:function(Wr){jr.errorMsg="Image load aborted - XHR error",jr.finish(!1)}}),this.abort=function(){jr.request.abort(),typeof Gr=="function"&&Gr()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(jr){this.image.onload=this.image.onerror=this.image.onabort=null,jr||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},Nr.ImageLoader=function(jr){Nr.extend(!0,this,{jobLimit:Nr.DEFAULT_SETTINGS.imageLoaderLimit,timeout:Nr.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},jr)},Nr.ImageLoader.prototype={addJob:function(jr){var Gr=this,Wr=function(ts){Ur(Gr,ts,jr.callback)},Zr={src:jr.src,loadWithAjax:jr.loadWithAjax,ajaxHeaders:jr.loadWithAjax?jr.ajaxHeaders:null,crossOriginPolicy:jr.crossOriginPolicy,ajaxWithCredentials:jr.ajaxWithCredentials,callback:Wr,abort:jr.abort,timeout:this.timeout},Yr=new _r(Zr);!this.jobLimit||this.jobsInProgress<this.jobLimit?(Yr.start(),this.jobsInProgress++):this.jobQueue.push(Yr)},clear:function(){for(var jr=0;jr<this.jobQueue.length;jr++){var Gr=this.jobQueue[jr];typeof Gr.abort=="function"&&Gr.abort()}this.jobQueue=[]}};function Ur(jr,Gr,Wr){var Zr;jr.jobsInProgress--,(!jr.jobLimit||jr.jobsInProgress<jr.jobLimit)&&jr.jobQueue.length>0&&(Zr=jr.jobQueue.shift(),Zr.start(),jr.jobsInProgress++),Wr(Gr.image,Gr.errorMsg,Gr.request)}}(OpenSeadragon),function(Nr){Nr.Tile=function(_r,Ur,jr,Gr,Wr,Zr,Yr,ts,es,ns){this.level=_r,this.x=Ur,this.y=jr,this.bounds=Gr,this.sourceBounds=ns,this.exists=Wr,this.url=Zr,this.context2D=Yr,this.loadWithAjax=ts,this.ajaxHeaders=es,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},Nr.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(_r){if(!this.cacheImageRecord){Nr.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){Nr.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=Nr.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=_r&&_r.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",Nr.setElementOpacity(this.element,this.opacity)},drawCanvas:function(_r,Ur,jr,Gr){var Wr=this.position.times(Nr.pixelDensityRatio),Zr=this.size.times(Nr.pixelDensityRatio),Yr;if(!this.context2D&&!this.cacheImageRecord){Nr.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(Yr=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!Yr){Nr.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}_r.save(),_r.globalAlpha=this.opacity,typeof jr=="number"&&jr!==1&&(Wr=Wr.times(jr),Zr=Zr.times(jr)),Gr instanceof Nr.Point&&(Wr=Wr.plus(Gr)),_r.globalAlpha===1&&this._hasTransparencyChannel()&&_r.clearRect(Wr.x,Wr.y,Zr.x,Zr.y),Ur({context:_r,tile:this,rendered:Yr});var ts,es;this.sourceBounds?(ts=Math.min(this.sourceBounds.width,Yr.canvas.width),es=Math.min(this.sourceBounds.height,Yr.canvas.height)):(ts=Yr.canvas.width,es=Yr.canvas.height),_r.drawImage(Yr.canvas,0,0,ts,es,Wr.x,Wr.y,Zr.x,Zr.y),_r.restore()},getScaleForEdgeSmoothing:function(){var _r;if(this.cacheImageRecord)_r=this.cacheImageRecord.getRenderedContext();else if(this.context2D)_r=this.context2D;else return Nr.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return _r.canvas.width/(this.size.x*Nr.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(_r,Ur,jr){var Gr=Math.max(1,Math.ceil((jr.x-Ur.x)/2)),Wr=Math.max(1,Math.ceil((jr.y-Ur.y)/2));return new Nr.Point(Gr,Wr).minus(this.position.times(Nr.pixelDensityRatio).times(_r||1).apply(function(Zr){return Zr%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(Nr){Nr.OverlayPlacement=Nr.Placement,Nr.OverlayRotationMode=Nr.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),Nr.Overlay=function(_r,Ur,jr){var Gr;Nr.isPlainObject(_r)?Gr=_r:Gr={element:_r,location:Ur,placement:jr},this.element=Gr.element,this.style=Gr.element.style,this._init(Gr)},Nr.Overlay.prototype={_init:function(_r){this.location=_r.location,this.placement=_r.placement===void 0?Nr.Placement.TOP_LEFT:_r.placement,this.onDraw=_r.onDraw,this.checkResize=_r.checkResize===void 0?!0:_r.checkResize,this.width=_r.width===void 0?null:_r.width,this.height=_r.height===void 0?null:_r.height,this.rotationMode=_r.rotationMode||Nr.OverlayRotationMode.EXACT,this.location instanceof Nr.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=Nr.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new Nr.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(_r,Ur){var jr=Nr.Placement.properties[this.placement];jr&&(jr.isHorizontallyCentered?_r.x-=Ur.x/2:jr.isRight&&(_r.x-=Ur.x),jr.isVerticallyCentered?_r.y-=Ur.y/2:jr.isBottom&&(_r.y-=Ur.y))},destroy:function(){var _r=this.element,Ur=this.style;_r.parentNode&&(_r.parentNode.removeChild(_r),_r.prevElementParent&&(Ur.display="none",document.body.appendChild(_r))),this.onDraw=null,Ur.top="",Ur.left="",Ur.position="",this.width!==null&&(Ur.width=""),this.height!==null&&(Ur.height="");var jr=Nr.getCssPropertyWithVendorPrefix("transformOrigin"),Gr=Nr.getCssPropertyWithVendorPrefix("transform");jr&&Gr&&(Ur[jr]="",Ur[Gr]="")},drawHTML:function(_r,Ur){var jr=this.element;jr.parentNode!==_r&&(jr.prevElementParent=jr.parentNode,jr.prevNextSibling=jr.nextSibling,_r.appendChild(jr),this.style.position="absolute",this.size=Nr.getElementSize(jr));var Gr=this._getOverlayPositionAndSize(Ur),Wr=Gr.position,Zr=this.size=Gr.size,Yr=Gr.rotate;if(this.onDraw)this.onDraw(Wr,Zr,this.element);else{var ts=this.style;ts.left=Wr.x+"px",ts.top=Wr.y+"px",this.width!==null&&(ts.width=Zr.x+"px"),this.height!==null&&(ts.height=Zr.y+"px");var es=Nr.getCssPropertyWithVendorPrefix("transformOrigin"),ns=Nr.getCssPropertyWithVendorPrefix("transform");es&&ns&&(Yr?(ts[es]=this._getTransformOrigin(),ts[ns]="rotate("+Yr+"deg)"):(ts[es]="",ts[ns]="")),ts.display!=="none"&&(ts.display="block")}},_getOverlayPositionAndSize:function(_r){var Ur=_r.pixelFromPoint(this.location,!0),jr=this._getSizeInPixels(_r);this.adjust(Ur,jr);var Gr=0;if(_r.degrees&&this.rotationMode!==Nr.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===Nr.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var Wr=new Nr.Rect(Ur.x,Ur.y,jr.x,jr.y),Zr=this._getBoundingBox(Wr,_r.degrees);Ur=Zr.getTopLeft(),jr=Zr.getSize()}else Gr=_r.degrees;return{position:Ur,size:jr,rotate:Gr}},_getSizeInPixels:function(_r){var Ur=this.size.x,jr=this.size.y;if(this.width!==null||this.height!==null){var Gr=_r.deltaPixelsFromPointsNoRotate(new Nr.Point(this.width||0,this.height||0),!0);this.width!==null&&(Ur=Gr.x),this.height!==null&&(jr=Gr.y)}if(this.checkResize&&(this.width===null||this.height===null)){var Wr=this.size=Nr.getElementSize(this.element);this.width===null&&(Ur=Wr.x),this.height===null&&(jr=Wr.y)}return new Nr.Point(Ur,jr)},_getBoundingBox:function(_r,Ur){var jr=this._getPlacementPoint(_r);return _r.rotate(Ur,jr).getBoundingBox()},_getPlacementPoint:function(_r){var Ur=new Nr.Point(_r.x,_r.y),jr=Nr.Placement.properties[this.placement];return jr&&(jr.isHorizontallyCentered?Ur.x+=_r.width/2:jr.isRight&&(Ur.x+=_r.width),jr.isVerticallyCentered?Ur.y+=_r.height/2:jr.isBottom&&(Ur.y+=_r.height)),Ur},_getTransformOrigin:function(){var _r="",Ur=Nr.Placement.properties[this.placement];return Ur&&(Ur.isLeft?_r="left":Ur.isRight&&(_r="right"),Ur.isTop?_r+=" top":Ur.isBottom&&(_r+=" bottom")),_r},update:function(_r,Ur){var jr=Nr.isPlainObject(_r)?_r:{location:_r,placement:Ur};this._init({location:jr.location||this.location,placement:jr.placement!==void 0?jr.placement:this.placement,onDraw:jr.onDraw||this.onDraw,checkResize:jr.checkResize||this.checkResize,width:jr.width!==void 0?jr.width:this.width,height:jr.height!==void 0?jr.height:this.height,rotationMode:jr.rotationMode||this.rotationMode})},getBounds:function(_r){Nr.console.assert(_r,"A viewport must now be passed to Overlay.getBounds.");var Ur=this.width,jr=this.height;if(Ur===null||jr===null){var Gr=_r.deltaPointsFromPixelsNoRotate(this.size,!0);Ur===null&&(Ur=Gr.x),jr===null&&(jr=Gr.y)}var Wr=this.location.clone();return this.adjust(Wr,new Nr.Point(Ur,jr)),this._adjustBoundsForRotation(_r,new Nr.Rect(Wr.x,Wr.y,Ur,jr))},_adjustBoundsForRotation:function(_r,Ur){if(!_r||_r.degrees===0||this.rotationMode===Nr.OverlayRotationMode.EXACT)return Ur;if(this.rotationMode===Nr.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return Ur;var jr=this._getOverlayPositionAndSize(_r);return _r.viewerElementToViewportRectangle(new Nr.Rect(jr.position.x,jr.position.y,jr.size.x,jr.size.y))}return Ur.rotate(-_r.degrees,this._getPlacementPoint(Ur))}}}(OpenSeadragon),function(Nr){Nr.Drawer=function(_r){Nr.console.assert(_r.viewer,"[Drawer] options.viewer is required");var Ur=arguments;if(Nr.isPlainObject(_r)||(_r={source:Ur[0],viewport:Ur[1],element:Ur[2]}),Nr.console.assert(_r.viewport,"[Drawer] options.viewport is required"),Nr.console.assert(_r.element,"[Drawer] options.element is required"),_r.source&&Nr.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=_r.viewer,this.viewport=_r.viewport,this.debugGridColor=typeof _r.debugGridColor=="string"?[_r.debugGridColor]:_r.debugGridColor||Nr.DEFAULT_SETTINGS.debugGridColor,_r.opacity&&Nr.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=Nr.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=Nr.getElement(_r.element),this.canvas=Nr.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var jr=this._calculateCanvasSize();this.canvas.width=jr.x,this.canvas.height=jr.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",Nr.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},Nr.Drawer.prototype={addOverlay:function(_r,Ur,jr,Gr){return Nr.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(_r,Ur,jr,Gr),this},updateOverlay:function(_r,Ur,jr){return Nr.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(_r,Ur,jr),this},removeOverlay:function(_r){return Nr.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(_r),this},clearOverlays:function(){return Nr.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(_r){var Ur=this.viewport.pixelFromPointNoRotate(_r,!0);return new Nr.Point(Ur.x*Nr.pixelDensityRatio,Ur.y*Nr.pixelDensityRatio)},clipWithPolygons:function(_r,Ur){if(this.useCanvas){var jr=this._getContext(Ur);jr.beginPath(),_r.forEach(function(Gr){Gr.forEach(function(Wr,Zr){jr[Zr===0?"moveTo":"lineTo"](Wr.x,Wr.y)})}),jr.clip()}},setOpacity:function(_r){Nr.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var Ur=this.viewer.world,jr=0;jr<Ur.getItemCount();jr++)Ur.getItemAt(jr).setOpacity(_r);return this},getOpacity:function(){Nr.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var _r=this.viewer.world,Ur=0,jr=0;jr<_r.getItemCount();jr++){var Gr=_r.getItemAt(jr).getOpacity();Gr>Ur&&(Ur=Gr)}return Ur},needsUpdate:function(){return Nr.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return Nr.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return Nr.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return Nr.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var _r=this._calculateCanvasSize();if((this.canvas.width!=_r.x||this.canvas.height!=_r.y)&&(this.canvas.width=_r.x,this.canvas.height=_r.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var Ur=this._calculateSketchCanvasSize();this.sketchCanvas.width=Ur.x,this.sketchCanvas.height=Ur.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(_r,Ur){if(this.useCanvas){var jr=this._getContext(_r);if(Ur)jr.clearRect(Ur.x,Ur.y,Ur.width,Ur.height);else{var Gr=jr.canvas;jr.clearRect(0,0,Gr.width,Gr.height)}}},viewportToDrawerRectangle:function(_r){var Ur=this.viewport.pixelFromPointNoRotate(_r.getTopLeft(),!0),jr=this.viewport.deltaPixelsFromPointsNoRotate(_r.getSize(),!0);return new Nr.Rect(Ur.x*Nr.pixelDensityRatio,Ur.y*Nr.pixelDensityRatio,jr.x*Nr.pixelDensityRatio,jr.y*Nr.pixelDensityRatio)},drawTile:function(_r,Ur,jr,Gr,Wr){if(Nr.console.assert(_r,"[Drawer.drawTile] tile is required"),Nr.console.assert(Ur,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var Zr=this._getContext(jr);Gr=Gr||1,_r.drawCanvas(Zr,Ur,Gr,Wr)}else _r.drawHTML(this.canvas)},_getContext:function(_r){var Ur=this.context;if(_r){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var jr=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=jr.x,this.sketchCanvas.height=jr.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var Gr=this;this.viewer.addHandler("rotate",function Wr(){if(Gr.viewport.getRotation()!==0){Gr.viewer.removeHandler("rotate",Wr);var Zr=Gr._calculateSketchCanvasSize();Gr.sketchCanvas.width=Zr.x,Gr.sketchCanvas.height=Zr.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}Ur=this.sketchContext}return Ur},saveContext:function(_r){this.useCanvas&&this._getContext(_r).save()},restoreContext:function(_r){this.useCanvas&&this._getContext(_r).restore()},setClip:function(_r,Ur){if(this.useCanvas){var jr=this._getContext(Ur);jr.beginPath(),jr.rect(_r.x,_r.y,_r.width,_r.height),jr.clip()}},drawRectangle:function(_r,Ur,jr){if(this.useCanvas){var Gr=this._getContext(jr);Gr.save(),Gr.fillStyle=Ur,Gr.fillRect(_r.x,_r.y,_r.width,_r.height),Gr.restore()}},blendSketch:function(_r,Ur,jr,Gr){var Wr=_r;if(Nr.isPlainObject(Wr)||(Wr={opacity:_r,scale:Ur,translate:jr,compositeOperation:Gr}),!(!this.useCanvas||!this.sketchCanvas)){_r=Wr.opacity,Gr=Wr.compositeOperation;var Zr=Wr.bounds;if(this.context.save(),this.context.globalAlpha=_r,Gr&&(this.context.globalCompositeOperation=Gr),Zr)Zr.x<0&&(Zr.width+=Zr.x,Zr.x=0),Zr.x+Zr.width>this.canvas.width&&(Zr.width=this.canvas.width-Zr.x),Zr.y<0&&(Zr.height+=Zr.y,Zr.y=0),Zr.y+Zr.height>this.canvas.height&&(Zr.height=this.canvas.height-Zr.y),this.context.drawImage(this.sketchCanvas,Zr.x,Zr.y,Zr.width,Zr.height,Zr.x,Zr.y,Zr.width,Zr.height);else{Ur=Wr.scale||1,jr=Wr.translate;var Yr=jr instanceof Nr.Point?jr:new Nr.Point(0,0),ts=0,es=0;if(jr){var ns=this.sketchCanvas.width-this.canvas.width,Xr=this.sketchCanvas.height-this.canvas.height;ts=Math.round(ns/2),es=Math.round(Xr/2)}this.context.drawImage(this.sketchCanvas,Yr.x-ts*Ur,Yr.y-es*Ur,(this.canvas.width+2*ts)*Ur,(this.canvas.height+2*es)*Ur,-ts,-es,this.canvas.width+2*ts,this.canvas.height+2*es)}this.context.restore()}},drawDebugInfo:function(_r,Ur,jr,Gr){if(this.useCanvas){var Wr=this.viewer.world.getIndexOfItem(Gr)%this.debugGridColor.length,Zr=this.context;Zr.save(),Zr.lineWidth=2*Nr.pixelDensityRatio,Zr.font="small-caps bold "+13*Nr.pixelDensityRatio+"px arial",Zr.strokeStyle=this.debugGridColor[Wr],Zr.fillStyle=this.debugGridColor[Wr],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),Gr.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:Gr.getRotation(!0),point:Gr.viewport.pixelFromPointNoRotate(Gr._getRotationPoint(!0),!0)}),Gr.viewport.degrees===0&&Gr.getRotation(!0)%360===0&&Gr._drawer.viewer.viewport.getFlip()&&Gr._drawer._flip(),Zr.strokeRect(_r.position.x*Nr.pixelDensityRatio,_r.position.y*Nr.pixelDensityRatio,_r.size.x*Nr.pixelDensityRatio,_r.size.y*Nr.pixelDensityRatio);var Yr=(_r.position.x+_r.size.x/2)*Nr.pixelDensityRatio,ts=(_r.position.y+_r.size.y/2)*Nr.pixelDensityRatio;Zr.translate(Yr,ts),Zr.rotate(Math.PI/180*-this.viewport.degrees),Zr.translate(-Yr,-ts),_r.x===0&&_r.y===0&&(Zr.fillText("Zoom: "+this.viewport.getZoom(),_r.position.x*Nr.pixelDensityRatio,(_r.position.y-30)*Nr.pixelDensityRatio),Zr.fillText("Pan: "+this.viewport.getBounds().toString(),_r.position.x*Nr.pixelDensityRatio,(_r.position.y-20)*Nr.pixelDensityRatio)),Zr.fillText("Level: "+_r.level,(_r.position.x+10)*Nr.pixelDensityRatio,(_r.position.y+20)*Nr.pixelDensityRatio),Zr.fillText("Column: "+_r.x,(_r.position.x+10)*Nr.pixelDensityRatio,(_r.position.y+30)*Nr.pixelDensityRatio),Zr.fillText("Row: "+_r.y,(_r.position.x+10)*Nr.pixelDensityRatio,(_r.position.y+40)*Nr.pixelDensityRatio),Zr.fillText("Order: "+jr+" of "+Ur,(_r.position.x+10)*Nr.pixelDensityRatio,(_r.position.y+50)*Nr.pixelDensityRatio),Zr.fillText("Size: "+_r.size.toString(),(_r.position.x+10)*Nr.pixelDensityRatio,(_r.position.y+60)*Nr.pixelDensityRatio),Zr.fillText("Position: "+_r.position.toString(),(_r.position.x+10)*Nr.pixelDensityRatio,(_r.position.y+70)*Nr.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),Gr.getRotation(!0)%360!==0&&this._restoreRotationChanges(),Gr.viewport.degrees===0&&Gr.getRotation(!0)%360===0&&Gr._drawer.viewer.viewport.getFlip()&&Gr._drawer._flip(),Zr.restore()}},debugRect:function(_r){if(this.useCanvas){var Ur=this.context;Ur.save(),Ur.lineWidth=2*Nr.pixelDensityRatio,Ur.strokeStyle=this.debugGridColor[0],Ur.fillStyle=this.debugGridColor[0],Ur.strokeRect(_r.x*Nr.pixelDensityRatio,_r.y*Nr.pixelDensityRatio,_r.width*Nr.pixelDensityRatio,_r.height*Nr.pixelDensityRatio),Ur.restore()}},setImageSmoothingEnabled:function(_r){this.useCanvas&&(this._imageSmoothingEnabled=_r,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(_r){_r.msImageSmoothingEnabled=this._imageSmoothingEnabled,_r.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(_r){var Ur=this._getContext(_r).canvas;return new Nr.Point(Ur.width,Ur.height)},getCanvasCenter:function(){return new Nr.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(_r){var Ur=_r.point?_r.point.times(Nr.pixelDensityRatio):this.getCanvasCenter(),jr=this._getContext(_r.useSketch);jr.save(),jr.translate(Ur.x,Ur.y),this.viewer.viewport.flipped?(jr.rotate(Math.PI/180*-_r.degrees),jr.scale(-1,1)):jr.rotate(Math.PI/180*_r.degrees),jr.translate(-Ur.x,-Ur.y)},_flip:function(_r){_r=_r||{};var Ur=_r.point?_r.point.times(Nr.pixelDensityRatio):this.getCanvasCenter(),jr=this._getContext(_r.useSketch);jr.translate(Ur.x,0),jr.scale(-1,1),jr.translate(-Ur.x,0)},_restoreRotationChanges:function(_r){var Ur=this._getContext(_r);Ur.restore()},_calculateCanvasSize:function(){var _r=Nr.pixelDensityRatio,Ur=this.viewport.getContainerSize();return{x:Math.round(Ur.x*_r),y:Math.round(Ur.y*_r)}},_calculateSketchCanvasSize:function(){var _r=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return _r;var Ur=Math.ceil(Math.sqrt(_r.x*_r.x+_r.y*_r.y));return{x:Ur,y:Ur}}}}(OpenSeadragon),function(Nr){Nr.Viewport=function(_r){var Ur=arguments;Ur.length&&Ur[0]instanceof Nr.Point&&(_r={containerSize:Ur[0],contentSize:Ur[1],config:Ur[2]}),_r.config&&(Nr.extend(!0,_r,_r.config),delete _r.config),this._margins=Nr.extend({left:0,top:0,right:0,bottom:0},_r.margins||{}),delete _r.margins,Nr.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:Nr.DEFAULT_SETTINGS.springStiffness,animationTime:Nr.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:Nr.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:Nr.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:Nr.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:Nr.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:Nr.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:Nr.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:Nr.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:Nr.DEFAULT_SETTINGS.maxZoomLevel,degrees:Nr.DEFAULT_SETTINGS.degrees,flipped:Nr.DEFAULT_SETTINGS.flipped,homeFillsViewer:Nr.DEFAULT_SETTINGS.homeFillsViewer},_r),this._updateContainerInnerSize(),this.centerSpringX=new Nr.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new Nr.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new Nr.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new Nr.Rect(0,0,1,1),1),this.goHome(!0),this.update()},Nr.Viewport.prototype={resetContentSize:function(_r){return Nr.console.assert(_r,"[Viewport.resetContentSize] contentSize is required"),Nr.console.assert(_r instanceof Nr.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),Nr.console.assert(_r.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),Nr.console.assert(_r.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new Nr.Rect(0,0,1,_r.y/_r.x),_r.x),this},setHomeBounds:function(_r,Ur){Nr.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(_r,Ur)},_setContentBounds:function(_r,Ur){Nr.console.assert(_r,"[Viewport._setContentBounds] bounds is required"),Nr.console.assert(_r instanceof Nr.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),Nr.console.assert(_r.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),Nr.console.assert(_r.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=_r.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(Ur),this._contentBounds=_r.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(Ur),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:Ur,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var _r=this._contentAspectRatio/this.getAspectRatio(),Ur;return this.homeFillsViewer?Ur=_r>=1?_r:1:Ur=_r>=1?1:_r,Ur/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var _r=this._contentBounds.getCenter(),Ur=1/this.getHomeZoom(),jr=Ur/this.getAspectRatio();return new Nr.Rect(_r.x-Ur/2,_r.y-jr/2,Ur,jr)},goHome:function(_r){return this.viewer&&this.viewer.raiseEvent("home",{immediately:_r}),this.fitBounds(this.getHomeBounds(),_r)},getMinZoom:function(){var _r=this.getHomeZoom(),Ur=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*_r;return Ur},getMaxZoom:function(){var _r=this.maxZoomLevel;return _r||(_r=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,_r/=this._contentBounds.width),Math.max(_r,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new Nr.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return Nr.extend({},this._margins)},setMargins:function(_r){Nr.console.assert(Nr.type(_r)==="object","[Viewport.setMargins] margins must be an object"),this._margins=Nr.extend({left:0,top:0,right:0,bottom:0},_r),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(_r){return this.getBoundsNoRotate(_r).rotate(-this.getRotation())},getBoundsNoRotate:function(_r){var Ur=this.getCenter(_r),jr=1/this.getZoom(_r),Gr=jr/this.getAspectRatio();return new Nr.Rect(Ur.x-jr/2,Ur.y-Gr/2,jr,Gr)},getBoundsWithMargins:function(_r){return this.getBoundsNoRotateWithMargins(_r).rotate(-this.getRotation(),this.getCenter(_r))},getBoundsNoRotateWithMargins:function(_r){var Ur=this.getBoundsNoRotate(_r),jr=this._containerInnerSize.x*this.getZoom(_r);return Ur.x-=this._margins.left/jr,Ur.y-=this._margins.top/jr,Ur.width+=(this._margins.left+this._margins.right)/jr,Ur.height+=(this._margins.top+this._margins.bottom)/jr,Ur},getCenter:function(_r){var Ur=new Nr.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),jr=new Nr.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),Gr,Wr,Zr,Yr,ts,es,ns,Xr;return _r?Ur:this.zoomPoint?(Gr=this.pixelFromPoint(this.zoomPoint,!0),Wr=this.getZoom(),Zr=1/Wr,Yr=Zr/this.getAspectRatio(),ts=new Nr.Rect(Ur.x-Zr/2,Ur.y-Yr/2,Zr,Yr),es=this._pixelFromPoint(this.zoomPoint,ts),ns=es.minus(Gr),Xr=ns.divide(this._containerInnerSize.x*Wr),jr.plus(Xr)):jr},getZoom:function(_r){return _r?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(_r){return Math.max(Math.min(_r,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(_r){var Ur=new Nr.Rect(_r.x,_r.y,_r.width,_r.height);if(!this.wrapHorizontal){var jr=this.visibilityRatio*Ur.width,Gr=Ur.x+Ur.width,Wr=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,Zr=this._contentBoundsNoRotate.x-Gr+jr,Yr=Wr-Ur.x-jr;jr>this._contentBoundsNoRotate.width?Ur.x+=(Zr+Yr)/2:Yr<0?Ur.x+=Yr:Zr>0&&(Ur.x+=Zr)}if(!this.wrapVertical){var ts=this.visibilityRatio*Ur.height,es=Ur.y+Ur.height,ns=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,Xr=this._contentBoundsNoRotate.y-es+ts,qr=ns-Ur.y-ts;ts>this._contentBoundsNoRotate.height?Ur.y+=(Xr+qr)/2:qr<0?Ur.y+=qr:Xr>0&&(Ur.y+=Xr)}return Ur},_raiseConstraintsEvent:function(_r){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:_r})},applyConstraints:function(_r){var Ur=this.getZoom(),jr=this._applyZoomConstraints(Ur);Ur!==jr&&this.zoomTo(jr,this.zoomPoint,_r);var Gr=this.getBoundsNoRotate(),Wr=this._applyBoundaryConstraints(Gr);return this._raiseConstraintsEvent(_r),(Gr.x!==Wr.x||Gr.y!==Wr.y||_r)&&this.fitBounds(Wr.rotate(-this.getRotation()),_r),this},ensureVisible:function(_r){return this.applyConstraints(_r)},_fitBounds:function(_r,Ur){Ur=Ur||{};var jr=Ur.immediately||!1,Gr=Ur.constraints||!1,Wr=this.getAspectRatio(),Zr=_r.getCenter(),Yr=new Nr.Rect(_r.x,_r.y,_r.width,_r.height,_r.degrees+this.getRotation()).getBoundingBox();Yr.getAspectRatio()>=Wr?Yr.height=Yr.width/Wr:Yr.width=Yr.height*Wr,Yr.x=Zr.x-Yr.width/2,Yr.y=Zr.y-Yr.height/2;var ts=1/Yr.width;if(Gr){var es=Yr.getAspectRatio(),ns=this._applyZoomConstraints(ts);ts!==ns&&(ts=ns,Yr.width=1/ts,Yr.x=Zr.x-Yr.width/2,Yr.height=Yr.width/es,Yr.y=Zr.y-Yr.height/2),Yr=this._applyBoundaryConstraints(Yr),Zr=Yr.getCenter(),this._raiseConstraintsEvent(jr)}if(jr)return this.panTo(Zr,!0),this.zoomTo(ts,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var Xr=this.getBounds(),qr=this.getZoom();if(qr===0||Math.abs(ts/qr-1)<1e-8)return this.zoomTo(ts,!0),this.panTo(Zr,jr);Yr=Yr.rotate(-this.getRotation());var _i=Yr.getTopLeft().times(ts).minus(Xr.getTopLeft().times(qr)).divide(ts-qr);return this.zoomTo(ts,_i,jr)},fitBounds:function(_r,Ur){return this._fitBounds(_r,{immediately:Ur,constraints:!1})},fitBoundsWithConstraints:function(_r,Ur){return this._fitBounds(_r,{immediately:Ur,constraints:!0})},fitVertically:function(_r){var Ur=new Nr.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(Ur,_r)},fitHorizontally:function(_r){var Ur=new Nr.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(Ur,_r)},getConstrainedBounds:function(_r){var Ur,jr;return Ur=this.getBounds(_r),jr=this._applyBoundaryConstraints(Ur),jr},panBy:function(_r,Ur){var jr=new Nr.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(jr.plus(_r),Ur)},panTo:function(_r,Ur){return Ur?(this.centerSpringX.resetTo(_r.x),this.centerSpringY.resetTo(_r.y)):(this.centerSpringX.springTo(_r.x),this.centerSpringY.springTo(_r.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:_r,immediately:Ur}),this},zoomBy:function(_r,Ur,jr){return this.zoomTo(this.zoomSpring.target.value*_r,Ur,jr)},zoomTo:function(_r,Ur,jr){var Gr=this;return this.zoomPoint=Ur instanceof Nr.Point&&!isNaN(Ur.x)&&!isNaN(Ur.y)?Ur:null,jr?this._adjustCenterSpringsForZoomPoint(function(){Gr.zoomSpring.resetTo(_r)}):this.zoomSpring.springTo(_r),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:_r,refPoint:Ur,immediately:jr}),this},setRotation:function(_r){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=Nr.positiveModulo(_r,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:_r}),this)},getRotation:function(){return this.degrees},resize:function(_r,Ur){var jr=this.getBoundsNoRotate(),Gr=jr,Wr;return this.containerSize.x=_r.x,this.containerSize.y=_r.y,this._updateContainerInnerSize(),Ur&&(Wr=_r.x/this.containerSize.x,Gr.width=jr.width*Wr,Gr.height=Gr.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:_r,maintain:Ur}),this.fitBounds(Gr,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new Nr.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var _r=this;this._adjustCenterSpringsForZoomPoint(function(){_r.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var Ur=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,Ur},_adjustCenterSpringsForZoomPoint:function(_r){if(this.zoomPoint){var Ur=this.pixelFromPoint(this.zoomPoint,!0);_r();var jr=this.pixelFromPoint(this.zoomPoint,!0),Gr=jr.minus(Ur),Wr=this.deltaPointsFromPixels(Gr,!0);this.centerSpringX.shiftBy(Wr.x),this.centerSpringY.shiftBy(Wr.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else _r()},deltaPixelsFromPointsNoRotate:function(_r,Ur){return _r.times(this._containerInnerSize.x*this.getZoom(Ur))},deltaPixelsFromPoints:function(_r,Ur){return this.deltaPixelsFromPointsNoRotate(_r.rotate(this.getRotation()),Ur)},deltaPointsFromPixelsNoRotate:function(_r,Ur){return _r.divide(this._containerInnerSize.x*this.getZoom(Ur))},deltaPointsFromPixels:function(_r,Ur){return this.deltaPointsFromPixelsNoRotate(_r,Ur).rotate(-this.getRotation())},pixelFromPointNoRotate:function(_r,Ur){return this._pixelFromPointNoRotate(_r,this.getBoundsNoRotate(Ur))},pixelFromPoint:function(_r,Ur){return this._pixelFromPoint(_r,this.getBoundsNoRotate(Ur))},_pixelFromPointNoRotate:function(_r,Ur){return _r.minus(Ur.getTopLeft()).times(this._containerInnerSize.x/Ur.width).plus(new Nr.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(_r,Ur){return this._pixelFromPointNoRotate(_r.rotate(this.getRotation(),this.getCenter(!0)),Ur)},pointFromPixelNoRotate:function(_r,Ur){var jr=this.getBoundsNoRotate(Ur);return _r.minus(new Nr.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/jr.width).plus(jr.getTopLeft())},pointFromPixel:function(_r,Ur){return this.pointFromPixelNoRotate(_r,Ur).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(_r,Ur){var jr=this._contentBoundsNoRotate.width;return new Nr.Point(_r*this._contentSizeNoRotate.x/jr,Ur*this._contentSizeNoRotate.x/jr)},viewportToImageCoordinates:function(_r,Ur){if(_r instanceof Nr.Point)return this.viewportToImageCoordinates(_r.x,_r.y);if(this.viewer){var jr=this.viewer.world.getItemCount();if(jr>1)Nr.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(jr===1){var Gr=this.viewer.world.getItemAt(0);return Gr.viewportToImageCoordinates(_r,Ur,!0)}}return this._viewportToImageDelta(_r-this._contentBoundsNoRotate.x,Ur-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(_r,Ur){var jr=this._contentBoundsNoRotate.width;return new Nr.Point(_r/this._contentSizeNoRotate.x*jr,Ur/this._contentSizeNoRotate.x*jr)},imageToViewportCoordinates:function(_r,Ur){if(_r instanceof Nr.Point)return this.imageToViewportCoordinates(_r.x,_r.y);if(this.viewer){var jr=this.viewer.world.getItemCount();if(jr>1)Nr.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(jr===1){var Gr=this.viewer.world.getItemAt(0);return Gr.imageToViewportCoordinates(_r,Ur,!0)}}var Wr=this._imageToViewportDelta(_r,Ur);return Wr.x+=this._contentBoundsNoRotate.x,Wr.y+=this._contentBoundsNoRotate.y,Wr},imageToViewportRectangle:function(_r,Ur,jr,Gr){var Wr=_r;if(Wr instanceof Nr.Rect||(Wr=new Nr.Rect(_r,Ur,jr,Gr)),this.viewer){var Zr=this.viewer.world.getItemCount();if(Zr>1)Nr.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(Zr===1){var Yr=this.viewer.world.getItemAt(0);return Yr.imageToViewportRectangle(_r,Ur,jr,Gr,!0)}}var ts=this.imageToViewportCoordinates(Wr.x,Wr.y),es=this._imageToViewportDelta(Wr.width,Wr.height);return new Nr.Rect(ts.x,ts.y,es.x,es.y,Wr.degrees)},viewportToImageRectangle:function(_r,Ur,jr,Gr){var Wr=_r;if(Wr instanceof Nr.Rect||(Wr=new Nr.Rect(_r,Ur,jr,Gr)),this.viewer){var Zr=this.viewer.world.getItemCount();if(Zr>1)Nr.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(Zr===1){var Yr=this.viewer.world.getItemAt(0);return Yr.viewportToImageRectangle(_r,Ur,jr,Gr,!0)}}var ts=this.viewportToImageCoordinates(Wr.x,Wr.y),es=this._viewportToImageDelta(Wr.width,Wr.height);return new Nr.Rect(ts.x,ts.y,es.x,es.y,Wr.degrees)},viewerElementToImageCoordinates:function(_r){var Ur=this.pointFromPixel(_r,!0);return this.viewportToImageCoordinates(Ur)},imageToViewerElementCoordinates:function(_r){var Ur=this.imageToViewportCoordinates(_r);return this.pixelFromPoint(Ur,!0)},windowToImageCoordinates:function(_r){Nr.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var Ur=_r.minus(Nr.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Ur)},imageToWindowCoordinates:function(_r){Nr.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var Ur=this.imageToViewerElementCoordinates(_r);return Ur.plus(Nr.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(_r){return this.pointFromPixel(_r,!0)},viewportToViewerElementCoordinates:function(_r){return this.pixelFromPoint(_r,!0)},viewerElementToViewportRectangle:function(_r){return Nr.Rect.fromSummits(this.pointFromPixel(_r.getTopLeft(),!0),this.pointFromPixel(_r.getTopRight(),!0),this.pointFromPixel(_r.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(_r){return Nr.Rect.fromSummits(this.pixelFromPoint(_r.getTopLeft(),!0),this.pixelFromPoint(_r.getTopRight(),!0),this.pixelFromPoint(_r.getBottomLeft(),!0))},windowToViewportCoordinates:function(_r){Nr.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var Ur=_r.minus(Nr.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(Ur)},viewportToWindowCoordinates:function(_r){Nr.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var Ur=this.viewportToViewerElementCoordinates(_r);return Ur.plus(Nr.getElementPosition(this.viewer.element))},viewportToImageZoom:function(_r){if(this.viewer){var Ur=this.viewer.world.getItemCount();if(Ur>1)Nr.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(Ur===1){var jr=this.viewer.world.getItemAt(0);return jr.viewportToImageZoom(_r)}}var Gr=this._contentSizeNoRotate.x,Wr=this._containerInnerSize.x,Zr=this._contentBoundsNoRotate.width,Yr=Wr/Gr*Zr;return _r*Yr},imageToViewportZoom:function(_r){if(this.viewer){var Ur=this.viewer.world.getItemCount();if(Ur>1)Nr.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(Ur===1){var jr=this.viewer.world.getItemAt(0);return jr.imageToViewportZoom(_r)}}var Gr=this._contentSizeNoRotate.x,Wr=this._containerInnerSize.x,Zr=this._contentBoundsNoRotate.width,Yr=Gr/Wr/Zr;return _r*Yr},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(_r){return this.flipped===_r?this:(this.flipped=_r,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:_r}),this)}}}(OpenSeadragon),function(Nr){Nr.TiledImage=function(ss){var os=this;Nr.console.assert(ss.tileCache,"[TiledImage] options.tileCache is required"),Nr.console.assert(ss.drawer,"[TiledImage] options.drawer is required"),Nr.console.assert(ss.viewer,"[TiledImage] options.viewer is required"),Nr.console.assert(ss.imageLoader,"[TiledImage] options.imageLoader is required"),Nr.console.assert(ss.source,"[TiledImage] options.source is required"),Nr.console.assert(!ss.clip||ss.clip instanceof Nr.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),Nr.EventSource.call(this),this._tileCache=ss.tileCache,delete ss.tileCache,this._drawer=ss.drawer,delete ss.drawer,this._imageLoader=ss.imageLoader,delete ss.imageLoader,ss.clip instanceof Nr.Rect&&(this._clip=ss.clip.clone()),delete ss.clip;var ls=ss.x||0;delete ss.x;var cs=ss.y||0;delete ss.y,this.normHeight=ss.source.dimensions.y/ss.source.dimensions.x,this.contentAspectX=ss.source.dimensions.x/ss.source.dimensions.y;var ds=1;ss.width?(ds=ss.width,delete ss.width,ss.height&&(Nr.console.error("specifying both width and height to a tiledImage is not supported"),delete ss.height)):ss.height&&(ds=ss.height/this.normHeight,delete ss.height);var fs=ss.fitBounds;delete ss.fitBounds;var ms=ss.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete ss.fitBoundsPlacement;var ps=ss.degrees||0;delete ss.degrees,Nr.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:Nr.DEFAULT_SETTINGS.springStiffness,animationTime:Nr.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:Nr.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:Nr.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:Nr.DEFAULT_SETTINGS.wrapVertical,immediateRender:Nr.DEFAULT_SETTINGS.immediateRender,blendTime:Nr.DEFAULT_SETTINGS.blendTime,alwaysBlend:Nr.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:Nr.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:Nr.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:Nr.DEFAULT_SETTINGS.iOSDevice,debugMode:Nr.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:Nr.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:Nr.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:Nr.DEFAULT_SETTINGS.placeholderFillStyle,opacity:Nr.DEFAULT_SETTINGS.opacity,preload:Nr.DEFAULT_SETTINGS.preload,compositeOperation:Nr.DEFAULT_SETTINGS.compositeOperation},ss),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new Nr.Spring({initial:ls,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new Nr.Spring({initial:cs,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new Nr.Spring({initial:ds,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new Nr.Spring({initial:ps,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),fs&&this.fitBounds(fs,ms,!0),this._drawingHandler=function(ys){os.viewer.raiseEvent("tile-drawing",Nr.extend({tiledImage:os},ys))}},Nr.extend(Nr.TiledImage.prototype,Nr.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(ss){ss!==this._fullyLoaded&&(this._fullyLoaded=ss,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=Nr.now(),this._needsDraw=!0},update:function(){var ss=this._xSpring.update(),os=this._ySpring.update(),ls=this._scaleSpring.update(),cs=this._degreesSpring.update();return ss||os||ls||cs?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(ss){return this.getBoundsNoRotate(ss).rotate(this.getRotation(ss),this._getRotationPoint(ss))},getBoundsNoRotate:function(ss){return ss?new Nr.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new Nr.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return Nr.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(ss){var os=this.getBoundsNoRotate(ss);if(this._clip){var ls=ss?this._worldWidthCurrent:this._worldWidthTarget,cs=ls/this.source.dimensions.x,ds=this._clip.times(cs);os=new Nr.Rect(os.x+ds.x,os.y+ds.y,ds.width,ds.height)}return os.rotate(this.getRotation(ss),this._getRotationPoint(ss))},getContentSize:function(){return new Nr.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(ss,os,ls){var cs=ls?this._scaleSpring.current.value:this._scaleSpring.target.value;return new Nr.Point(ss*(this.source.dimensions.x/cs),os*(this.source.dimensions.y*this.contentAspectX/cs))},viewportToImageCoordinates:function(ss,os,ls){var cs;return ss instanceof Nr.Point?(ls=os,cs=ss):cs=new Nr.Point(ss,os),cs=cs.rotate(-this.getRotation(ls),this._getRotationPoint(ls)),ls?this._viewportToImageDelta(cs.x-this._xSpring.current.value,cs.y-this._ySpring.current.value):this._viewportToImageDelta(cs.x-this._xSpring.target.value,cs.y-this._ySpring.target.value)},_imageToViewportDelta:function(ss,os,ls){var cs=ls?this._scaleSpring.current.value:this._scaleSpring.target.value;return new Nr.Point(ss/this.source.dimensions.x*cs,os/this.source.dimensions.y/this.contentAspectX*cs)},imageToViewportCoordinates:function(ss,os,ls){ss instanceof Nr.Point&&(ls=os,os=ss.y,ss=ss.x);var cs=this._imageToViewportDelta(ss,os);return ls?(cs.x+=this._xSpring.current.value,cs.y+=this._ySpring.current.value):(cs.x+=this._xSpring.target.value,cs.y+=this._ySpring.target.value),cs.rotate(this.getRotation(ls),this._getRotationPoint(ls))},imageToViewportRectangle:function(ss,os,ls,cs,ds){var fs=ss;fs instanceof Nr.Rect?ds=os:fs=new Nr.Rect(ss,os,ls,cs);var ms=this.imageToViewportCoordinates(fs.getTopLeft(),ds),ps=this._imageToViewportDelta(fs.width,fs.height,ds);return new Nr.Rect(ms.x,ms.y,ps.x,ps.y,fs.degrees+this.getRotation(ds))},viewportToImageRectangle:function(ss,os,ls,cs,ds){var fs=ss;ss instanceof Nr.Rect?ds=os:fs=new Nr.Rect(ss,os,ls,cs);var ms=this.viewportToImageCoordinates(fs.getTopLeft(),ds),ps=this._viewportToImageDelta(fs.width,fs.height,ds);return new Nr.Rect(ms.x,ms.y,ps.x,ps.y,fs.degrees-this.getRotation(ds))},viewerElementToImageCoordinates:function(ss){var os=this.viewport.pointFromPixel(ss,!0);return this.viewportToImageCoordinates(os)},imageToViewerElementCoordinates:function(ss){var os=this.imageToViewportCoordinates(ss);return this.viewport.pixelFromPoint(os,!0)},windowToImageCoordinates:function(ss){var os=ss.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(os)},imageToWindowCoordinates:function(ss){var os=this.imageToViewerElementCoordinates(ss);return os.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(ss){var os=this._scaleSpring.current.value;return ss=ss.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new Nr.Rect((ss.x-this._xSpring.current.value)/os,(ss.y-this._ySpring.current.value)/os,ss.width/os,ss.height/os,ss.degrees)},viewportToImageZoom:function(ss){var os=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return os*ss},imageToViewportZoom:function(ss){var os=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return ss/os},setPosition:function(ss,os){var ls=this._xSpring.target.value===ss.x&&this._ySpring.target.value===ss.y;if(os){if(ls&&this._xSpring.current.value===ss.x&&this._ySpring.current.value===ss.y)return;this._xSpring.resetTo(ss.x),this._ySpring.resetTo(ss.y),this._needsDraw=!0}else{if(ls)return;this._xSpring.springTo(ss.x),this._ySpring.springTo(ss.y),this._needsDraw=!0}ls||this._raiseBoundsChange()},setWidth:function(ss,os){this._setScale(ss,os)},setHeight:function(ss,os){this._setScale(ss/this.normHeight,os)},setCroppingPolygons:function(ss){var os=function(cs){return cs instanceof Nr.Point||typeof cs.x=="number"&&typeof cs.y=="number"},ls=function(cs){return cs.map(function(ds){try{if(os(ds))return{x:ds.x,y:ds.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!Nr.isArray(ss))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=ss.map(function(cs){return ls(cs)})}catch(cs){Nr.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),Nr.console.error(cs),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(ss,os,ls){os=os||Nr.Placement.CENTER;var cs=Nr.Placement.properties[os],ds=this.contentAspectX,fs=0,ms=0,ps=1,ys=1;if(this._clip&&(ds=this._clip.getAspectRatio(),ps=this._clip.width/this.source.dimensions.x,ys=this._clip.height/this.source.dimensions.y,ss.getAspectRatio()>ds?(fs=this._clip.x/this._clip.height*ss.height,ms=this._clip.y/this._clip.height*ss.height):(fs=this._clip.x/this._clip.width*ss.width,ms=this._clip.y/this._clip.width*ss.width)),ss.getAspectRatio()>ds){var ws=ss.height/ys,xs=0;cs.isHorizontallyCentered?xs=(ss.width-ss.height*ds)/2:cs.isRight&&(xs=ss.width-ss.height*ds),this.setPosition(new Nr.Point(ss.x-fs+xs,ss.y-ms),ls),this.setHeight(ws,ls)}else{var Es=ss.width/ps,Rs=0;cs.isVerticallyCentered?Rs=(ss.height-ss.width/ds)/2:cs.isBottom&&(Rs=ss.height-ss.width/ds),this.setPosition(new Nr.Point(ss.x-fs,ss.y-ms+Rs),ls),this.setWidth(Es,ls)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(ss){Nr.console.assert(!ss||ss instanceof Nr.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),ss instanceof Nr.Rect?this._clip=ss.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(ss){ss!==this.opacity&&(this.opacity=ss,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(ss){this._preload=!!ss,this._needsDraw=!0},getRotation:function(ss){return ss?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(ss,os){this._degreesSpring.target.value===ss&&this._degreesSpring.isAtTargetValue()||(os?this._degreesSpring.resetTo(ss):this._degreesSpring.springTo(ss),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(ss){return this.getBoundsNoRotate(ss).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(ss){ss!==this.compositeOperation&&(this.compositeOperation=ss,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(ss,os){var ls=this._scaleSpring.target.value===ss;if(os){if(ls&&this._scaleSpring.current.value===ss)return;this._scaleSpring.resetTo(ss),this._updateForScale(),this._needsDraw=!0}else{if(ls)return;this._scaleSpring.springTo(ss),this._updateForScale(),this._needsDraw=!0}ls||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var ss=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),os=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,ls=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(os/this.minPixelRatio)/Math.log(2))));return ls=Math.max(ls,this.source.minLevel||0),ss=Math.min(ss,ls),{lowestLevel:ss,highestLevel:ls}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var ss=this.lastDrawn.pop();ss.beingDrawn=!1}var os=this.viewport,ls=this._viewportToTiledImageRectangle(os.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var cs=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(ls=ls.intersection(cs),ls===null)return}for(var ds=this._getLevelsInterval(),fs=ds.lowestLevel,ms=ds.highestLevel,ps=null,ys=!1,ws=Nr.now(),xs=ms;xs>=fs;xs--){var Es=!1,Rs=os.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(xs),!0).x*this._scaleSpring.current.value;if(xs===fs||!ys&&Rs>=this.minPixelRatio)Es=!0,ys=!0;else if(!ys)continue;var _s=os.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(xs),!1).x*this._scaleSpring.current.value,Bs=os.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,vs=this.immediateRender?1:Bs,Cs=Math.min(1,(Rs-.5)/.5),Ss=vs/Math.abs(vs-_s);if(ps=_r(this,ys,Es,xs,Cs,Ss,ls,ws,ps),es(this.coverage,xs))break}rs(this,this.lastDrawn),ps&&!ps.context2D?(Gr(this,ps,ws),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(ss,os,ls){var cs,ds;this.wrapHorizontal?(cs=Nr.positiveModulo(os.x,1),ds=Nr.positiveModulo(ls.x,1)):(cs=Math.max(0,os.x),ds=Math.min(1,ls.x));var fs,ms,ps=1/this.source.aspectRatio;this.wrapVertical?(fs=Nr.positiveModulo(os.y,ps),ms=Nr.positiveModulo(ls.y,ps)):(fs=Math.max(0,os.y),ms=Math.min(ps,ls.y));var ys=this.source.getTileAtPoint(ss,new Nr.Point(cs,fs)),ws=this.source.getTileAtPoint(ss,new Nr.Point(ds,ms)),xs=this.source.getNumTiles(ss);return this.wrapHorizontal&&(ys.x+=xs.x*Math.floor(os.x),ws.x+=xs.x*Math.floor(ls.x)),this.wrapVertical&&(ys.y+=xs.y*Math.floor(os.y/ps),ws.y+=xs.y*Math.floor(ls.y/ps)),{topLeft:ys,bottomRight:ws}}});function _r(ss,os,ls,cs,ds,fs,ms,ps,ys){var ws=ms.getBoundingBox().getTopLeft(),xs=ms.getBoundingBox().getBottomRight();ss.viewer&&ss.viewer.raiseEvent("update-level",{tiledImage:ss,havedrawn:os,level:cs,opacity:ds,visibility:fs,drawArea:ms,topleft:ws,bottomright:xs,currenttime:ps,best:ys}),qr(ss.coverage,cs),qr(ss.loadingCoverage,cs);for(var Es=ss._getCornerTiles(cs,ws,xs),Rs=Es.topLeft,_s=Es.bottomRight,Bs=ss.source.getNumTiles(cs),vs=ss.viewport.pixelFromPoint(ss.viewport.getCenter()),Cs=Rs.x;Cs<=_s.x;Cs++)for(var Ss=Rs.y;Ss<=_s.y;Ss++){if(!ss.wrapHorizontal&&!ss.wrapVertical){var As=ss.source.getTileBounds(cs,Cs,Ss);if(ms.intersection(As)===null)continue}ys=Ur(ss,ls,os,Cs,Ss,cs,ds,fs,vs,Bs,ps,ys)}return ys}function Ur(ss,os,ls,cs,ds,fs,ms,ps,ys,ws,xs,Es){var Rs=jr(cs,ds,fs,ss,ss.source,ss.tilesMatrix,xs,ws,ss._worldWidthCurrent,ss._worldHeightCurrent),_s=ls;ss.viewer&&ss.viewer.raiseEvent("update-tile",{tiledImage:ss,tile:Rs}),Xr(ss.coverage,fs,cs,ds,!1);var Bs=Rs.loaded||Rs.loading||ns(ss.loadingCoverage,fs,cs,ds);if(Xr(ss.loadingCoverage,fs,cs,ds,Bs),!Rs.exists||(os&&!_s&&(ns(ss.coverage,fs,cs,ds)?Xr(ss.coverage,fs,cs,ds,!0):_s=!0),!_s))return Es;if(Yr(Rs,ss.source.tileOverlap,ss.viewport,ys,ps,ss),!Rs.loaded)if(Rs.context2D)Zr(ss,Rs);else{var vs=ss._tileCache.getImageRecord(Rs.cacheKey);if(vs){var Cs=vs.getImage();Zr(ss,Rs,Cs)}}if(Rs.loaded){var Ss=ts(ss,Rs,cs,ds,fs,ms,xs);Ss&&(ss._needsDraw=!0)}else Rs.loading?ss._tilesLoading++:Bs||(Es=_i(Es,Rs));return Es}function jr(ss,os,ls,cs,ds,fs,ms,ps,ys,ws){var xs,Es,Rs,_s,Bs,vs,Cs,Ss,As;return fs[ls]||(fs[ls]={}),fs[ls][ss]||(fs[ls][ss]={}),fs[ls][ss][os]||(xs=(ps.x+ss%ps.x)%ps.x,Es=(ps.y+os%ps.y)%ps.y,Rs=ds.getTileBounds(ls,xs,Es),_s=ds.getTileBounds(ls,xs,Es,!0),Bs=ds.tileExists(ls,xs,Es),vs=ds.getTileUrl(ls,xs,Es),cs.loadTilesWithAjax?(Cs=ds.getTileAjaxHeaders(ls,xs,Es),Nr.isPlainObject(cs.ajaxHeaders)&&(Cs=Nr.extend({},cs.ajaxHeaders,Cs))):Cs=null,Ss=ds.getContext2D?ds.getContext2D(ls,xs,Es):void 0,Rs.x+=(ss-xs)/ps.x,Rs.y+=ws/ys*((os-Es)/ps.y),As=new Nr.Tile(ls,ss,os,Rs,Bs,vs,Ss,cs.loadTilesWithAjax,Cs,_s),xs===ps.x-1&&(As.isRightMost=!0),Es===ps.y-1&&(As.isBottomMost=!0),fs[ls][ss][os]=As),As=fs[ls][ss][os],As.lastTouchTime=ms,As}function Gr(ss,os,ls){os.loading=!0,ss._imageLoader.addJob({src:os.url,loadWithAjax:os.loadWithAjax,ajaxHeaders:os.ajaxHeaders,crossOriginPolicy:ss.crossOriginPolicy,ajaxWithCredentials:ss.ajaxWithCredentials,callback:function(cs,ds,fs){Wr(ss,os,ls,cs,ds,fs)},abort:function(){os.loading=!1}})}function Wr(ss,os,ls,cs,ds,fs){if(!cs){Nr.console.log("Tile %s failed to load: %s - error: %s",os,os.url,ds),ss.viewer.raiseEvent("tile-load-failed",{tile:os,tiledImage:ss,time:ls,message:ds,tileRequest:fs}),os.loading=!1,os.exists=!1;return}if(ls<ss.lastResetTime){Nr.console.log("Ignoring tile %s loaded before reset: %s",os,os.url),os.loading=!1;return}var ms=function(){var ps=ss.source.getClosestLevel();Zr(ss,os,cs,ps,fs)};ss._midDraw?window.setTimeout(ms,1):ms()}function Zr(ss,os,ls,cs,ds){var fs=0;function ms(){return fs++,ps}function ps(){fs--,fs===0&&(os.loading=!1,os.loaded=!0,os.context2D||ss._tileCache.cacheTile({image:ls,tile:os,cutoff:cs,tiledImage:ss}),ss._needsDraw=!0)}ss.viewer.raiseEvent("tile-loaded",{tile:os,tiledImage:ss,tileRequest:ds,image:ls,getCompletionCallback:ms}),ms()()}function Yr(ss,os,ls,cs,ds,fs){var ms=ss.bounds.getTopLeft();ms.x*=fs._scaleSpring.current.value,ms.y*=fs._scaleSpring.current.value,ms.x+=fs._xSpring.current.value,ms.y+=fs._ySpring.current.value;var ps=ss.bounds.getSize();ps.x*=fs._scaleSpring.current.value,ps.y*=fs._scaleSpring.current.value;var ys=ls.pixelFromPointNoRotate(ms,!0),ws=ls.pixelFromPointNoRotate(ms,!1),xs=ls.deltaPixelsFromPointsNoRotate(ps,!0),Es=ls.deltaPixelsFromPointsNoRotate(ps,!1),Rs=ws.plus(Es.divide(2)),_s=cs.squaredDistanceTo(Rs);os||(xs=xs.plus(new Nr.Point(1,1))),ss.isRightMost&&fs.wrapHorizontal&&(xs.x+=.75),ss.isBottomMost&&fs.wrapVertical&&(xs.y+=.75),ss.position=ys,ss.size=xs,ss.squaredDistance=_s,ss.visibility=ds}function ts(ss,os,ls,cs,ds,fs,ms){var ps=1e3*ss.blendTime,ys,ws;if(os.blendStart||(os.blendStart=ms),ys=ms-os.blendStart,ws=ps?Math.min(1,ys/ps):1,ss.alwaysBlend&&(ws*=fs),os.opacity=ws,ss.lastDrawn.push(os),ws===1)Xr(ss.coverage,ds,ls,cs,!0),ss._hasOpaqueTile=!0;else if(ys<ps)return!0;return!1}function es(ss,os,ls,cs){var ds,fs,ms,ps;if(!ss[os])return!1;if(ls===void 0||cs===void 0){ds=ss[os];for(ms in ds)if(Object.prototype.hasOwnProperty.call(ds,ms)){fs=ds[ms];for(ps in fs)if(Object.prototype.hasOwnProperty.call(fs,ps)&&!fs[ps])return!1}return!0}return ss[os][ls]===void 0||ss[os][ls][cs]===void 0||ss[os][ls][cs]===!0}function ns(ss,os,ls,cs){return ls===void 0||cs===void 0?es(ss,os+1):es(ss,os+1,2*ls,2*cs)&&es(ss,os+1,2*ls,2*cs+1)&&es(ss,os+1,2*ls+1,2*cs)&&es(ss,os+1,2*ls+1,2*cs+1)}function Xr(ss,os,ls,cs,ds){if(!ss[os]){Nr.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",os);return}ss[os][ls]||(ss[os][ls]={}),ss[os][ls][cs]=ds}function qr(ss,os){ss[os]={}}function _i(ss,os){return!ss||os.visibility>ss.visibility||os.visibility==ss.visibility&&os.squaredDistance<ss.squaredDistance?os:ss}function rs(ss,os){if(!(ss.opacity===0||os.length===0&&!ss.placeholderFillStyle)){var ls=os[0],cs;ls&&(cs=ss.opacity<1||ss.compositeOperation&&ss.compositeOperation!=="source-over"||!ss._isBottomItem()&&ls._hasTransparencyChannel());var ds,fs,ms=ss.viewport.getZoom(!0),ps=ss.viewportToImageZoom(ms);os.length>1&&ps>ss.smoothTileEdgesMinZoom&&!ss.iOSDevice&&ss.getRotation(!0)%360===0&&Nr.supportsCanvas&&(cs=!0,ds=ls.getScaleForEdgeSmoothing(),fs=ls.getTranslationForEdgeSmoothing(ds,ss._drawer.getCanvasSize(!1),ss._drawer.getCanvasSize(!0)));var ys;cs&&(ds||(ys=ss.viewport.viewportToViewerElementRectangle(ss.getClippedBounds(!0)).getIntegerBoundingBox(),ss._drawer.viewer.viewport.getFlip()&&(ss.viewport.degrees!==0||ss.getRotation(!0)%360!==0)&&(ys.x=ss._drawer.viewer.container.clientWidth-(ys.x+ys.width)),ys=ys.times(Nr.pixelDensityRatio)),ss._drawer._clear(!0,ys)),ds||(ss.viewport.degrees!==0&&ss._drawer._offsetForRotation({degrees:ss.viewport.degrees,useSketch:cs}),ss.getRotation(!0)%360!==0&&ss._drawer._offsetForRotation({degrees:ss.getRotation(!0),point:ss.viewport.pixelFromPointNoRotate(ss._getRotationPoint(!0),!0),useSketch:cs}),ss.viewport.degrees===0&&ss.getRotation(!0)%360===0&&ss._drawer.viewer.viewport.getFlip()&&ss._drawer._flip());var ws=!1;if(ss._clip){ss._drawer.saveContext(cs);var xs=ss.imageToViewportRectangle(ss._clip,!0);xs=xs.rotate(-ss.getRotation(!0),ss._getRotationPoint(!0));var Es=ss._drawer.viewportToDrawerRectangle(xs);ds&&(Es=Es.times(ds)),fs&&(Es=Es.translate(fs)),ss._drawer.setClip(Es,cs),ws=!0}if(ss._croppingPolygons){ss._drawer.saveContext(cs);try{var Rs=ss._croppingPolygons.map(function(Cs){return Cs.map(function(Ss){var As=ss.imageToViewportCoordinates(Ss.x,Ss.y,!0).rotate(-ss.getRotation(!0),ss._getRotationPoint(!0)),Us=ss._drawer.viewportCoordToDrawerCoord(As);return ds&&(Us=Us.times(ds)),Us})});ss._drawer.clipWithPolygons(Rs,cs)}catch(Cs){Nr.console.error(Cs)}ws=!0}if(ss.placeholderFillStyle&&ss._hasOpaqueTile===!1){var _s=ss._drawer.viewportToDrawerRectangle(ss.getBounds(!0));ds&&(_s=_s.times(ds)),fs&&(_s=_s.translate(fs));var Bs=null;typeof ss.placeholderFillStyle=="function"?Bs=ss.placeholderFillStyle(ss,ss._drawer.context):Bs=ss.placeholderFillStyle,ss._drawer.drawRectangle(_s,Bs,cs)}for(var vs=os.length-1;vs>=0;vs--)ls=os[vs],ss._drawer.drawTile(ls,ss._drawingHandler,cs,ds,fs),ls.beingDrawn=!0,ss.viewer&&ss.viewer.raiseEvent("tile-drawn",{tiledImage:ss,tile:ls});ws&&ss._drawer.restoreContext(cs),ds||(ss.getRotation(!0)%360!==0&&ss._drawer._restoreRotationChanges(cs),ss.viewport.degrees!==0&&ss._drawer._restoreRotationChanges(cs)),cs&&(ds&&(ss.viewport.degrees!==0&&ss._drawer._offsetForRotation({degrees:ss.viewport.degrees,useSketch:!1}),ss.getRotation(!0)%360!==0&&ss._drawer._offsetForRotation({degrees:ss.getRotation(!0),point:ss.viewport.pixelFromPointNoRotate(ss._getRotationPoint(!0),!0),useSketch:!1})),ss._drawer.blendSketch({opacity:ss.opacity,scale:ds,translate:fs,compositeOperation:ss.compositeOperation,bounds:ys}),ds&&(ss.getRotation(!0)%360!==0&&ss._drawer._restoreRotationChanges(!1),ss.viewport.degrees!==0&&ss._drawer._restoreRotationChanges(!1))),ds||ss.viewport.degrees===0&&ss.getRotation(!0)%360===0&&ss._drawer.viewer.viewport.getFlip()&&ss._drawer._flip(),is(ss,os)}}function is(ss,os){if(ss.debugMode)for(var ls=os.length-1;ls>=0;ls--){var cs=os[ls];try{ss._drawer.drawDebugInfo(cs,os.length,ls,ss)}catch(ds){Nr.console.error(ds)}}}}(OpenSeadragon),function(Nr){var _r=function(jr){Nr.console.assert(jr,"[TileCache.cacheTile] options is required"),Nr.console.assert(jr.tile,"[TileCache.cacheTile] options.tile is required"),Nr.console.assert(jr.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=jr.tile,this.tiledImage=jr.tiledImage},Ur=function(jr){Nr.console.assert(jr,"[ImageRecord] options is required"),Nr.console.assert(jr.image,"[ImageRecord] options.image is required"),this._image=jr.image,this._tiles=[]};Ur.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var jr=document.createElement("canvas");jr.width=this._image.width,jr.height=this._image.height,this._renderedContext=jr.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(jr){Nr.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=jr},addTile:function(jr){Nr.console.assert(jr,"[ImageRecord.addTile] tile is required"),this._tiles.push(jr)},removeTile:function(jr){for(var Gr=0;Gr<this._tiles.length;Gr++)if(this._tiles[Gr]===jr){this._tiles.splice(Gr,1);return}Nr.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",jr)},getTileCount:function(){return this._tiles.length}},Nr.TileCache=function(jr){jr=jr||{},this._maxImageCacheCount=jr.maxImageCacheCount||Nr.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},Nr.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(jr){Nr.console.assert(jr,"[TileCache.cacheTile] options is required"),Nr.console.assert(jr.tile,"[TileCache.cacheTile] options.tile is required"),Nr.console.assert(jr.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),Nr.console.assert(jr.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var Gr=jr.cutoff||0,Wr=this._tilesLoaded.length,Zr=this._imagesLoaded[jr.tile.cacheKey];if(Zr||(Nr.console.assert(jr.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),Zr=this._imagesLoaded[jr.tile.cacheKey]=new Ur({image:jr.image}),this._imagesLoadedCount++),Zr.addTile(jr.tile),jr.tile.cacheImageRecord=Zr,this._imagesLoadedCount>this._maxImageCacheCount){for(var Yr=null,ts=-1,es=null,ns,Xr,qr,_i,rs,is,ss=this._tilesLoaded.length-1;ss>=0;ss--)if(is=this._tilesLoaded[ss],ns=is.tile,!(ns.level<=Gr||ns.beingDrawn)){if(!Yr){Yr=ns,ts=ss,es=is;continue}_i=ns.lastTouchTime,Xr=Yr.lastTouchTime,rs=ns.level,qr=Yr.level,(_i<Xr||_i==Xr&&rs>qr)&&(Yr=ns,ts=ss,es=is)}Yr&&ts>=0&&(this._unloadTile(es),Wr=ts)}this._tilesLoaded[Wr]=new _r({tile:jr.tile,tiledImage:jr.tiledImage})},clearTilesFor:function(jr){Nr.console.assert(jr,"[TileCache.clearTilesFor] tiledImage is required");for(var Gr,Wr=0;Wr<this._tilesLoaded.length;++Wr)Gr=this._tilesLoaded[Wr],Gr.tiledImage===jr&&(this._unloadTile(Gr),this._tilesLoaded.splice(Wr,1),Wr--)},getImageRecord:function(jr){return Nr.console.assert(jr,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[jr]},_unloadTile:function(jr){Nr.console.assert(jr,"[TileCache._unloadTile] tileRecord is required");var Gr=jr.tile,Wr=jr.tiledImage;Gr.unload(),Gr.cacheImageRecord=null;var Zr=this._imagesLoaded[Gr.cacheKey];Zr.removeTile(Gr),Zr.getTileCount()||(Zr.destroy(),delete this._imagesLoaded[Gr.cacheKey],this._imagesLoadedCount--),Wr.viewer.raiseEvent("tile-unloaded",{tile:Gr,tiledImage:Wr})}}}(OpenSeadragon),function(Nr){Nr.World=function(_r){var Ur=this;Nr.console.assert(_r.viewer,"[World] options.viewer is required"),Nr.EventSource.call(this),this.viewer=_r.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(jr){Ur._autoRefigureSizes?Ur._figureSizes():Ur._needsSizesFigured=!0},this._figureSizes()},Nr.extend(Nr.World.prototype,Nr.EventSource.prototype,{addItem:function(_r,Ur){if(Nr.console.assert(_r,"[World.addItem] item is required"),Nr.console.assert(_r instanceof Nr.TiledImage,"[World.addItem] only TiledImages supported at this time"),Ur=Ur||{},Ur.index!==void 0){var jr=Math.max(0,Math.min(this._items.length,Ur.index));this._items.splice(jr,0,_r)}else this._items.push(_r);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,_r.addHandler("bounds-change",this._delegatedFigureSizes),_r.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:_r})},getItemAt:function(_r){return Nr.console.assert(_r!==void 0,"[World.getItemAt] index is required"),this._items[_r]},getIndexOfItem:function(_r){return Nr.console.assert(_r,"[World.getIndexOfItem] item is required"),Nr.indexOf(this._items,_r)},getItemCount:function(){return this._items.length},setItemIndex:function(_r,Ur){Nr.console.assert(_r,"[World.setItemIndex] item is required"),Nr.console.assert(Ur!==void 0,"[World.setItemIndex] index is required");var jr=this.getIndexOfItem(_r);if(Ur>=this._items.length)throw new Error("Index bigger than number of layers.");Ur===jr||jr===-1||(this._items.splice(jr,1),this._items.splice(Ur,0,_r),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:_r,previousIndex:jr,newIndex:Ur}))},removeItem:function(_r){Nr.console.assert(_r,"[World.removeItem] item is required");var Ur=Nr.indexOf(this._items,_r);Ur!==-1&&(_r.removeHandler("bounds-change",this._delegatedFigureSizes),_r.removeHandler("clip-change",this._delegatedFigureSizes),_r.destroy(),this._items.splice(Ur,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(_r))},removeAll:function(){this.viewer._cancelPendingImages();var _r,Ur;for(Ur=0;Ur<this._items.length;Ur++)_r=this._items[Ur],_r.removeHandler("bounds-change",this._delegatedFigureSizes),_r.removeHandler("clip-change",this._delegatedFigureSizes),_r.destroy();var jr=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,Ur=0;Ur<jr.length;Ur++)_r=jr[Ur],this._raiseRemoveItem(_r)},resetItems:function(){for(var _r=0;_r<this._items.length;_r++)this._items[_r].reset()},update:function(){for(var _r=!1,Ur=0;Ur<this._items.length;Ur++)_r=this._items[Ur].update()||_r;return _r},draw:function(){for(var _r=0;_r<this._items.length;_r++)this._items[_r].draw();this._needsDraw=!1},needsDraw:function(){for(var _r=0;_r<this._items.length;_r++)if(this._items[_r].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(_r){this._autoRefigureSizes=_r,_r&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(_r){_r=_r||{};var Ur=_r.immediately||!1,jr=_r.layout||Nr.DEFAULT_SETTINGS.collectionLayout,Gr=_r.rows||Nr.DEFAULT_SETTINGS.collectionRows,Wr=_r.columns||Nr.DEFAULT_SETTINGS.collectionColumns,Zr=_r.tileSize||Nr.DEFAULT_SETTINGS.collectionTileSize,Yr=_r.tileMargin||Nr.DEFAULT_SETTINGS.collectionTileMargin,ts=Zr+Yr,es;!_r.rows&&Wr?es=Wr:es=Math.ceil(this._items.length/Gr);var ns=0,Xr=0,qr,_i,rs,is,ss;this.setAutoRefigureSizes(!1);for(var os=0;os<this._items.length;os++)os&&os%es===0&&(jr==="horizontal"?(Xr+=ts,ns=0):(ns+=ts,Xr=0)),qr=this._items[os],_i=qr.getBounds(),_i.width>_i.height?rs=Zr:rs=Zr*(_i.width/_i.height),is=rs*(_i.height/_i.width),ss=new Nr.Point(ns+(Zr-rs)/2,Xr+(Zr-is)/2),qr.setPosition(ss,Ur),qr.setWidth(rs,Ur),jr==="horizontal"?ns+=ts:Xr+=ts;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var _r=this._homeBounds?this._homeBounds.clone():null,Ur=this._contentSize?this._contentSize.clone():null,jr=this._contentFactor||0;if(!this._items.length)this._homeBounds=new Nr.Rect(0,0,1,1),this._contentSize=new Nr.Point(1,1),this._contentFactor=1;else{var Gr=this._items[0],Wr=Gr.getBounds();this._contentFactor=Gr.getContentSize().x/Wr.width;for(var Zr=Gr.getClippedBounds().getBoundingBox(),Yr=Zr.x,ts=Zr.y,es=Zr.x+Zr.width,ns=Zr.y+Zr.height,Xr=1;Xr<this._items.length;Xr++)Gr=this._items[Xr],Wr=Gr.getBounds(),this._contentFactor=Math.max(this._contentFactor,Gr.getContentSize().x/Wr.width),Zr=Gr.getClippedBounds().getBoundingBox(),Yr=Math.min(Yr,Zr.x),ts=Math.min(ts,Zr.y),es=Math.max(es,Zr.x+Zr.width),ns=Math.max(ns,Zr.y+Zr.height);this._homeBounds=new Nr.Rect(Yr,ts,es-Yr,ns-ts),this._contentSize=new Nr.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==jr||!this._homeBounds.equals(_r)||!this._contentSize.equals(Ur))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(_r){this.raiseEvent("remove-item",{item:_r})}})}(OpenSeadragon)})(openseadragon);var openseadragonExports=openseadragon.exports;const te=getDefaultExportFromCjs$1(openseadragonExports),$6be4966fd9bbc698$var$SWITCH_NAME="Switch",[$6be4966fd9bbc698$var$createSwitchContext,$6be4966fd9bbc698$export$cf7f5f17f69cbd43]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6be4966fd9bbc698$var$SWITCH_NAME),[$6be4966fd9bbc698$var$SwitchProvider,$6be4966fd9bbc698$var$useSwitchContext]=$6be4966fd9bbc698$var$createSwitchContext($6be4966fd9bbc698$var$SWITCH_NAME),$6be4966fd9bbc698$export$b5d5cf8927ab7262=reactExports.forwardRef((Nr,_r)=>{const{__scopeSwitch:Ur,name:jr,checked:Gr,defaultChecked:Wr,required:Zr,disabled:Yr,value:ts="on",onCheckedChange:es,...ns}=Nr,[Xr,qr]=reactExports.useState(null),_i=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_r,ls=>qr(ls)),rs=reactExports.useRef(!1),is=Xr?!!Xr.closest("form"):!0,[ss=!1,os]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Gr,defaultProp:Wr,onChange:es});return reactExports.createElement($6be4966fd9bbc698$var$SwitchProvider,{scope:Ur,checked:ss,disabled:Yr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"switch","aria-checked":ss,"aria-required":Zr,"data-state":$6be4966fd9bbc698$var$getState(ss),"data-disabled":Yr?"":void 0,disabled:Yr,value:ts},ns,{ref:_i,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Nr.onClick,ls=>{os(cs=>!cs),is&&(rs.current=ls.isPropagationStopped(),rs.current||ls.stopPropagation())})})),is&&reactExports.createElement($6be4966fd9bbc698$var$BubbleInput,{control:Xr,bubbles:!rs.current,name:jr,value:ts,checked:ss,required:Zr,disabled:Yr,style:{transform:"translateX(-100%)"}}))}),$6be4966fd9bbc698$var$THUMB_NAME="SwitchThumb",$6be4966fd9bbc698$export$4d07bf653ea69106=reactExports.forwardRef((Nr,_r)=>{const{__scopeSwitch:Ur,...jr}=Nr,Gr=$6be4966fd9bbc698$var$useSwitchContext($6be4966fd9bbc698$var$THUMB_NAME,Ur);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"data-state":$6be4966fd9bbc698$var$getState(Gr.checked),"data-disabled":Gr.disabled?"":void 0},jr,{ref:_r}))}),$6be4966fd9bbc698$var$BubbleInput=Nr=>{const{control:_r,checked:Ur,bubbles:jr=!0,...Gr}=Nr,Wr=reactExports.useRef(null),Zr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(Ur),Yr=$db6c3485150b8e66$export$1ab7ae714698c4b8(_r);return reactExports.useEffect(()=>{const ts=Wr.current,es=window.HTMLInputElement.prototype,Xr=Object.getOwnPropertyDescriptor(es,"checked").set;if(Zr!==Ur&&Xr){const qr=new Event("click",{bubbles:jr});Xr.call(ts,Ur),ts.dispatchEvent(qr)}},[Zr,Ur,jr]),reactExports.createElement("input",_extends$1({type:"checkbox","aria-hidden":!0,defaultChecked:Ur},Gr,{tabIndex:-1,ref:Wr,style:{...Nr.style,...Yr,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $6be4966fd9bbc698$var$getState(Nr){return Nr?"checked":"unchecked"}const $6be4966fd9bbc698$export$be92b6f5f03c0fe9=$6be4966fd9bbc698$export$b5d5cf8927ab7262,$6be4966fd9bbc698$export$6521433ed15a34db=$6be4966fd9bbc698$export$4d07bf653ea69106,dt=Nr=>{const _r=Nr.toString().split(":"),Ur=Math.ceil(parseInt(_r[0])),jr=Math.ceil(parseInt(_r[1])),Gr=mt(Math.ceil(parseInt(_r[2])),2);let Wr=`${Ur!==0&&jr<10?(jr+"").padStart(2,"0"):jr}:${Gr}`;return Ur!==0&&(Wr=`${Ur}:${Wr}`),Wr},ge=Nr=>{const _r=new Date(Nr*1e3).toISOString().substr(11,8);return dt(_r)},he=(Nr,_r)=>{if(typeof Nr!="object"||Nr===null)return _r;for(const Ur in _r)typeof _r[Ur]=="object"&&_r[Ur]!==null&&!Array.isArray(_r[Ur])?(Nr[Ur]||(Nr[Ur]={}),Nr[Ur]=he(Nr[Ur],_r[Ur])):Nr[Ur]=_r[Ur];return Nr},xe=(Nr,_r)=>Object.hasOwn(Nr,_r)?Nr[_r].toString():void 0,mt=(Nr,_r)=>String(Nr).padStart(_r,"0"),B={background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",ignoreCaptionLabels:[],informationPanel:{open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showIIIFBadge:!0,showTitle:!0,withCredentials:!1};var me;const j={activeCanvas:"",activeManifest:"",collection:{},configOptions:B,informationOpen:(me=B==null?void 0:B.informationPanel)==null?void 0:me.open,isLoaded:!1,vault:new Vault},ve=React$1.createContext(j),be=React$1.createContext(j);function ut(Nr,_r){switch(_r.type){case"updateActiveCanvas":return _r.canvasId||(_r.canvasId=""),{...Nr,activeCanvas:_r.canvasId};case"updateActiveManifest":return{...Nr,activeManifest:_r.manifestId};case"updateCollection":return{...Nr,collection:_r.collection};case"updateConfigOptions":return{...Nr,configOptions:he(Nr.configOptions,_r.configOptions)};case"updateInformationOpen":return{...Nr,informationOpen:_r.informationOpen};case"updateIsLoaded":return{...Nr,isLoaded:_r.isLoaded};default:throw new Error(`Unhandled action type: ${_r.type}`)}}const pt=({initialState:Nr=j,children:_r})=>{const[Ur,jr]=reactExports.useReducer(ut,Nr);return React$1.createElement(ve.Provider,{value:Ur},React$1.createElement(be.Provider,{value:jr},_r))};function I(){const Nr=React$1.useContext(ve);if(Nr===void 0)throw new Error("useViewerState must be used within a ViewerProvider");return Nr}function P(){const Nr=React$1.useContext(be);if(Nr===void 0)throw new Error("useViewerDispatch must be used within a ViewerProvider");return Nr}const ye=(Nr,_r,Ur,jr)=>{var Gr,Wr;const Zr={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]},Yr=ts=>{if(ts){if(!ts.body||!ts.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",ts);return}let es=ts.body;Array.isArray(es)&&(es=es[0]);const ns=Nr.get(es.id);if(!ns)return;switch(Ur){case"painting":return ts.target===_r.id&&ts.motivation&&ts.motivation[0]==="painting"&&jr.includes(ns.type)&&(ts.body=ns),!!ts;case"supplementing":return;default:throw new Error("Invalid annotation motivation.")}}};if(Zr.canvas=Nr.get(_r),Zr.canvas&&(Zr.annotationPage=Nr.get(Zr.canvas.items[0]),Zr.accompanyingCanvas=(Gr=Zr.canvas)!=null&&Gr.accompanyingCanvas?Nr.get((Wr=Zr.canvas)==null?void 0:Wr.accompanyingCanvas):void 0),Zr.annotationPage){const ts=Nr.get(Zr.annotationPage.items).map(ns=>({body:Nr.get(ns.body[0].id),motivation:ns.motivation,type:"Annotation"})),es=[];ts.forEach(ns=>{ns.body.type==="Choice"?ns.body.items.forEach(Xr=>es.push({...ns,id:Xr.id,body:Nr.get(Xr.id)})):es.push(ns)}),Zr.annotations=es.filter(Yr)}return Zr},V=(Nr,_r="en")=>{if(!Nr)return"";if(!Nr[_r]){const Ur=Object.getOwnPropertyNames(Nr);if(Ur.length>0)return Nr[Ur[0]]}return Nr[_r]},O=(Nr,_r)=>{const Ur=ye(Nr,{id:_r,type:"Canvas"},"painting",["Image","Sound","Video"]);if(Ur.annotations.length!==0&&Ur.annotations&&Ur.annotations)return Ur.annotations.map(jr=>jr==null?void 0:jr.body)},ft=(Nr,_r,Ur)=>{const jr=Nr.get({id:_r,type:"Canvas"});if(!(jr!=null&&jr.annotations)||!jr.annotations[0])return[];const Gr=Nr.get(jr.annotations[0]),Wr=Nr.get(Gr.items);return Array.isArray(Wr)?Wr.filter(Zr=>{var Yr;if(Zr.body&&(Yr=Zr.motivation)!=null&&Yr.includes("supplementing")){let ts=Zr.body;Array.isArray(ts)&&(ts=ts[0]);const es=Nr.get(ts.id);if(es.format===Ur)return Zr.body=es,Zr}}).map(Zr=>Zr.body):[]},gt=(Nr,_r,Ur,jr)=>{const Gr=[];if(_r.canvas&&_r.canvas.thumbnail.length>0){const Wr=Nr.get(_r.canvas.thumbnail[0]);Gr.push(Wr)}if(_r.annotations[0]){if(_r.annotations[0].thumbnail&&_r.annotations[0].thumbnail.length>0){const Zr=Nr.get(_r.annotations[0].thumbnail[0]);Gr.push(Zr)}if(!_r.annotations[0].body)return;const Wr=_r.annotations[0].body;Wr.type==="Image"&&Gr.push(Wr)}return Gr.length===0?void 0:{id:Gr[0].id,format:Gr[0].format,type:Gr[0].type,width:Ur,height:jr}},N=209,ht={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${N} 100% 38.2%)`,accentMuted:`hsl(${N} 80% 61.8%)`,accentAlt:`hsl(${N} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},Y={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:m,css:Kr,keyframes:K,createTheme:Jr}=q$1({theme:ht,media:Y}),xt=m("div",{display:"flex",flexDirection:"column",alignItems:"center"}),vt=m("p",{fontWeight:"bold",fontSize:"x-large"}),bt=m("span",{fontSize:"medium"}),yt=({error:Nr})=>{const{message:_r}=Nr;return React$1.createElement(xt,{role:"alert"},React$1.createElement(vt,{"data-testid":"headline"},"Something went wrong"),_r&&React$1.createElement(bt,null,`Error message: ${_r}`," "))},Ee=m("div",{position:"relative",zIndex:"0"}),we=m("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),Ce=m("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),Se=m($409067139f391064$export$41fb9f06171c75f4,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),ke=m($409067139f391064$export$7c6e2c02157bb7d2,{width:"100%",display:"flex"}),Et=m("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),wt=m("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${we}`]:{flexGrow:"1"},[`& ${Ce}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${Ee}`]:{display:"none"},[`& ${Se}`]:{margin:"1rem"},[`& ${ke}`]:{height:"100%"}}}}),Ct=m($69cb30bb0017df05$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),St=m($69cb30bb0017df05$export$54c2e3dc7acea9f5,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),ne=m($69cb30bb0017df05$export$41fb9f06171c75f4,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),re=m($69cb30bb0017df05$export$7c6e2c02157bb7d2,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),kt=m("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),It=m("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),$t=m("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Ie=(Nr,_r="none")=>{if(!Nr)return null;if(typeof Nr=="string")return[Nr];if(!Nr[_r]){const Ur=Object.getOwnPropertyNames(Nr);if(Ur.length>0)return Nr[Ur[0]]}return!Nr[_r]||!Array.isArray(Nr[_r])?null:Nr[_r]},T=(Nr,_r="none",Ur=", ")=>{const jr=Ie(Nr,_r);return Array.isArray(jr)?jr.join(`${Ur}`):jr};function At(Nr){return{__html:Tt(Nr)}}function A(Nr,_r){const Ur=Object.keys(Nr).filter(Gr=>_r.includes(Gr)?null:Gr),jr=new Object;return Ur.forEach(Gr=>{jr[Gr]=Nr[Gr]}),jr}function Tt(Nr){return Qe(Nr,{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})}const Mt=m("span",{}),z$1=Nr=>{const{as:_r,label:Ur}=Nr,jr=A(Nr,["as","label"]);return React$1.createElement(Mt,{as:_r,...jr},T(Ur,jr.lang))},Rt=(Nr,_r="200,",Ur="full")=>{Array.isArray(Nr)&&(Nr=Nr[0]);const{id:jr,service:Gr}=Nr;let Wr;if(!Gr)return jr;if(Array.isArray(Nr.service)&&Nr.service.length>0&&(Wr=Gr[0]),Wr){if(Wr["@id"])return`${Wr["@id"]}/${Ur}/${_r}/0/default.jpg`;if(Wr.id)return`${Wr.id}/${Ur}/${_r}/0/default.jpg`}},oe=m("img",{objectFit:"cover"}),zt=Nr=>{const _r=reactExports.useRef(null),{contentResource:Ur,altAsLabel:jr,region:Gr="full"}=Nr;let Wr;jr&&(Wr=T(jr));const Zr=A(Nr,["contentResource","altAsLabel"]),{type:Yr,id:ts,width:es=200,height:ns=200,duration:Xr}=Ur;reactExports.useEffect(()=>{if(!ts&&!_r.current||["Image"].includes(Yr)||!ts.includes("m3u8"))return;const rs=new Hls;return _r.current&&(rs.attachMedia(_r.current),rs.on(Hls.Events.MEDIA_ATTACHED,function(){rs.loadSource(ts)})),rs.on(Hls.Events.ERROR,function(is,ss){if(ss.fatal)switch(ss.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${is} network error encountered, try to recover`),rs.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${is} media error encountered, try to recover`),rs.recoverMediaError();break;default:rs.destroy();break}}),()=>{rs&&(rs.detachMedia(),rs.destroy())}},[ts,Yr]);const qr=reactExports.useCallback(()=>{if(!_r.current)return;let rs=0,is=30;if(Xr&&(is=Xr),!ts.split("#t=")&&Xr&&(rs=Xr*.1),ts.split("#t=").pop()){const os=ts.split("#t=").pop();os&&(rs=parseInt(os.split(",")[0]))}const ss=_r.current;ss.autoplay=!0,ss.currentTime=rs,setTimeout(()=>qr(),is*1e3)},[Xr,ts]);reactExports.useEffect(()=>qr(),[qr]);const _i=Rt(Ur,`${es},${ns}`,Gr);switch(Yr){case"Image":return React$1.createElement(oe,{as:"img",alt:Wr,css:{width:es,height:ns},key:ts,src:_i,...Zr});case"Video":return React$1.createElement(oe,{as:"video",css:{width:es,height:ns},disablePictureInPicture:!0,key:ts,loop:!0,muted:!0,onPause:qr,ref:_r,src:ts});default:return console.warn(`Resource type: ${Yr} is not valid or not yet supported in Primitives.`),React$1.createElement(React$1.Fragment,null)}},Lt=m("a",{}),Ft=Nr=>{const{children:_r,homepage:Ur}=Nr,jr=A(Nr,["children","homepage"]);return React$1.createElement(React$1.Fragment,null,Ur&&Ur.map(Gr=>{const Wr=T(Gr.label,jr.lang);return React$1.createElement(Lt,{"aria-label":_r?Wr:void 0,href:Gr.id,key:Gr.id,...jr},_r||Wr)}))},Pt={delimiter:", "},J=reactExports.createContext(void 0),$e=()=>{const Nr=reactExports.useContext(J);if(Nr===void 0)throw new Error("usePrimitivesContext must be used with a PrimitivesProvider");return Nr},Q=({children:Nr,initialState:_r=Pt})=>{const Ur=Vt(_r,"delimiter");return React$1.createElement(J.Provider,{value:{delimiter:Ur}},Nr)},Vt=(Nr,_r)=>Object.hasOwn(Nr,_r)?Nr[_r].toString():void 0,Ht=m("span",{}),ae=Nr=>{const{as:_r,markup:Ur}=Nr,{delimiter:jr}=$e();if(!Ur)return React$1.createElement(React$1.Fragment,null);const Gr=A(Nr,["as","markup"]),Wr=At(T(Ur,Gr.lang,jr));return React$1.createElement(Ht,{as:_r,...Gr,dangerouslySetInnerHTML:Wr})},Ae=Nr=>React$1.useContext(J)?React$1.createElement(ae,{...Nr}):React$1.createElement(Q,null,React$1.createElement(ae,{...Nr})),Bt=({as:Nr="dd",lang:_r,value:Ur})=>React$1.createElement(Ae,{markup:Ur,as:Nr,lang:_r}),Ot=m("span",{}),Dt=({as:Nr="dd",customValueContent:_r,lang:Ur,value:jr})=>{var Gr;const{delimiter:Wr}=$e(),Zr=(Gr=Ie(jr,Ur))==null?void 0:Gr.map(Yr=>reactExports.cloneElement(_r,{value:Yr}));return React$1.createElement(Ot,{as:Nr,lang:Ur},Zr==null?void 0:Zr.map((Yr,ts)=>[ts>0&&`${Wr}`,React$1.createElement(reactExports.Fragment,{key:ts},Yr)]))},Te=Nr=>{var _r;const{item:Ur,lang:jr,customValueContent:Gr}=Nr,{label:Wr,value:Zr}=Ur,Yr=(_r=T(Wr))==null?void 0:_r.replace(" ","-").toLowerCase();return React$1.createElement("div",{role:"group","data-label":Yr},React$1.createElement(z$1,{as:"dt",label:Wr,lang:jr}),Gr?React$1.createElement(Dt,{as:"dd",customValueContent:Gr,value:Zr,lang:jr}):React$1.createElement(Bt,{as:"dd",value:Zr,lang:jr}))};function Wt(Nr,_r){const Ur=_r.filter(jr=>{const{matchingLabel:Gr}=jr,Wr=Object.keys(jr.matchingLabel)[0],Zr=T(Gr,Wr);if(T(Nr,Wr)===Zr)return!0}).map(jr=>jr.Content);if(Array.isArray(Ur))return Ur[0]}const jt=m("dl",{}),Nt=Nr=>{const{as:_r,customValueContent:Ur,metadata:jr}=Nr;if(!Array.isArray(jr))return React$1.createElement(React$1.Fragment,null);const Gr=xe(Nr,"customValueDelimiter"),Wr=A(Nr,["as","customValueContent","customValueDelimiter","metadata"]);return React$1.createElement(Q,{...typeof Gr=="string"?{initialState:{delimiter:Gr}}:void 0},jr.length>0&&React$1.createElement(jt,{as:_r,...Wr},jr.map((Zr,Yr)=>{const ts=Ur?Wt(Zr.label,Ur):void 0;return React$1.createElement(Te,{customValueContent:ts,item:Zr,key:Yr,lang:Wr==null?void 0:Wr.lang})})))};m("li",{});m("ul",{});const Gt=m("dl",{}),qt=Nr=>{const{as:_r,requiredStatement:Ur}=Nr;if(!Ur)return React$1.createElement(React$1.Fragment,null);const jr=xe(Nr,"customValueDelimiter"),Gr=A(Nr,["as","customValueDelimiter","requiredStatement"]);return React$1.createElement(Q,{...typeof jr=="string"?{initialState:{delimiter:jr}}:void 0},React$1.createElement(Gt,{as:_r,...Gr},React$1.createElement(Te,{item:Ur,lang:Gr.lang})))},Ut=m("li",{}),_t=m("ul",{}),Zt=Nr=>{const{as:_r,seeAlso:Ur}=Nr,jr=A(Nr,["as","seeAlso"]);return React$1.createElement(_t,{as:_r},Ur&&Ur.map(Gr=>{const Wr=T(Gr.label,jr.lang);return React$1.createElement(Ut,{key:Gr.id},React$1.createElement("a",{href:Gr.id,...jr},Wr||Gr.id))}))},Xt=Nr=>{const{as:_r,summary:Ur}=Nr,jr=A(Nr,["as","customValueDelimiter","summary"]);return React$1.createElement(Ae,{as:_r,markup:Ur,...jr})},Me=Nr=>{const{thumbnail:_r,region:Ur}=Nr,jr=A(Nr,["thumbnail"]);return React$1.createElement(React$1.Fragment,null,_r&&_r.map(Gr=>React$1.createElement(zt,{contentResource:Gr,key:Gr.id,region:Ur,...jr})))},Yt=({homepage:Nr})=>(Nr==null?void 0:Nr.length)===0?React$1.createElement(React$1.Fragment,null):React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},"Homepage"),React$1.createElement(Ft,{homepage:Nr})),Kt=({id:Nr,htmlLabel:_r,parent:Ur="manifest"})=>React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},_r),React$1.createElement("a",{href:Nr,target:"_blank",id:`iiif-${Ur}-id`},Nr)),Jt=({metadata:Nr,parent:_r="manifest"})=>Nr?React$1.createElement(React$1.Fragment,null,React$1.createElement(Nt,{metadata:Nr,id:`iiif-${_r}-metadata`})):React$1.createElement(React$1.Fragment,null),Qt=({requiredStatement:Nr,parent:_r="manifest"})=>Nr?React$1.createElement(React$1.Fragment,null,React$1.createElement(qt,{requiredStatement:Nr,id:`iiif-${_r}-required-statement`})):React$1.createElement(React$1.Fragment,null),en=({rights:Nr})=>Nr?React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},"Rights"),React$1.createElement("a",{href:Nr,target:"_blank"},Nr)):React$1.createElement(React$1.Fragment,null),tn=({seeAlso:Nr})=>(Nr==null?void 0:Nr.length)===0?React$1.createElement(React$1.Fragment,null):React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},"See Also"),React$1.createElement(Zt,{seeAlso:Nr})),nn=({summary:Nr,parent:_r="manifest"})=>Nr?React$1.createElement(React$1.Fragment,null,React$1.createElement(Xt,{summary:Nr,as:"p",id:`iiif-${_r}-summary`})):React$1.createElement(React$1.Fragment,null),rn=({label:Nr,thumbnail:_r})=>(_r==null?void 0:_r.length)===0?React$1.createElement(React$1.Fragment,null):React$1.createElement(React$1.Fragment,null,React$1.createElement(Me,{altAsLabel:Nr||{none:["resource"]},thumbnail:_r,style:{backgroundColor:"#6663",objectFit:"cover"}})),on=()=>{const Nr=I(),{activeManifest:_r,vault:Ur}=Nr,[jr,Gr]=reactExports.useState(),[Wr,Zr]=reactExports.useState([]),[Yr,ts]=reactExports.useState([]),[es,ns]=reactExports.useState([]);return reactExports.useEffect(()=>{var Xr,qr,_i;const rs=Ur.get(_r);Gr(rs),((Xr=rs.homepage)==null?void 0:Xr.length)>0&&Zr(Ur.get(rs.homepage)),((qr=rs.seeAlso)==null?void 0:qr.length)>0&&ts(Ur.get(rs.seeAlso)),((_i=rs.thumbnail)==null?void 0:_i.length)>0&&ns(Ur.get(rs.thumbnail))},[_r,Ur]),jr?React$1.createElement($t,null,React$1.createElement(It,null,React$1.createElement(rn,{thumbnail:es,label:jr.label}),React$1.createElement(nn,{summary:jr.summary}),React$1.createElement(Jt,{metadata:jr.metadata}),React$1.createElement(Qt,{requiredStatement:jr.requiredStatement}),React$1.createElement(en,{rights:jr.rights}),React$1.createElement(Yt,{homepage:Wr}),React$1.createElement(tn,{seeAlso:Yr}),React$1.createElement(Kt,{id:jr.id,htmlLabel:"IIIF Manifest"}))):React$1.createElement(React$1.Fragment,null)},an=()=>{function Nr(Gr){return Gr.map(Wr=>{const Zr=Wr.identifier||v4();return{...Wr,identifier:Zr}})}function _r(Gr){var Wr;const Zr=[],Yr=[],ts=Nr(Gr);for(const es of ts){for(;Yr.length>0&&Yr[Yr.length-1].end<=es.start;)Yr.pop();Yr.length>0?(Yr[Yr.length-1].children||(Yr[Yr.length-1].children=[]),(Wr=Yr[Yr.length-1].children)==null||Wr.push(es),Yr.push(es)):(Zr.push(es),Yr.push(es))}return Zr}function Ur(Gr,Wr=[]){return Wr.some(Zr=>Gr.start>=Zr.start&&Gr.end<=Zr.end)}function jr(Gr=[]){return Gr.sort((Wr,Zr)=>Wr.start-Zr.start)}return{addIdentifiersToParsedCues:Nr,createNestedCues:_r,isChild:Ur,orderCuesByTime:jr}},ie=K({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),ln=m($f99a8c78507165f7$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"column",width:"100%"}),Re=m($f99a8c78507165f7$export$6d08773d2e66f8f2,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:ie,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:ie,boxSizing:"content-box","@sm":{content:"unset"}}}}),sn=({label:Nr,start:_r,end:Ur})=>{const[jr,Gr]=reactExports.useState(!1),Wr=document.getElementById("clover-iiif-video");reactExports.useEffect(()=>(Wr==null||Wr.addEventListener("timeupdate",()=>{const{currentTime:Yr}=Wr;Gr(_r<=Yr&&Yr<Ur)}),()=>document.removeEventListener("timeupdate",()=>{})),[Ur,_r,Wr]);const Zr=()=>{Wr&&(Wr.pause(),Wr.currentTime=_r,Wr.play())};return React$1.createElement(Re,{"aria-checked":jr,"data-testid":"information-panel-cue",onClick:Zr,value:Nr},Nr,React$1.createElement("strong",null,ge(_r)))},cn=m("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${Re}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),ze=({items:Nr})=>React$1.createElement(cn,null,Nr.map(_r=>{const{text:Ur,start:jr,end:Gr,children:Wr,identifier:Zr}=_r;return React$1.createElement("li",{key:Zr},React$1.createElement(sn,{label:Ur,start:jr,end:Gr}),Wr&&React$1.createElement(ze,{items:Wr}))})),dn=({resource:Nr})=>{const[_r,Ur]=React$1.useState([]),{id:jr,label:Gr}=Nr,{createNestedCues:Wr,orderCuesByTime:Zr}=an();return reactExports.useEffect(()=>{jr&&fetch(jr,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(Yr=>Yr.text()).then(Yr=>{const ts=nodeWebvtt.parse(Yr).cues,es=Zr(ts),ns=Wr(es);Ur(ns)}).catch(Yr=>console.error(jr,Yr.toString()))},[Wr,jr,Zr]),React$1.createElement(ln,{"aria-label":`navigate ${V(Gr,"en")}`},React$1.createElement(ze,{items:_r}))},mn=({activeCanvas:Nr,resources:_r})=>{var Ur;const jr=I(),{configOptions:Gr}=jr,{informationPanel:Wr}=Gr,[Zr,Yr]=reactExports.useState(),ts=(Wr==null?void 0:Wr.renderAbout)||((Ur=Gr==null?void 0:Gr.informationPanel)==null?void 0:Ur.renderAbout),es=Wr==null?void 0:Wr.renderSupplementing;reactExports.useEffect(()=>{ts?Yr("manifest-about"):_r&&(_r==null?void 0:_r.length)>0&&!ts&&Yr(_r[0].id)},[Nr,ts,_r]);const ns=Xr=>{Yr(Xr)};return _r?React$1.createElement(Ct,{"data-testid":"information-panel",defaultValue:Zr,onValueChange:ns,orientation:"horizontal",value:Zr},React$1.createElement(St,{"aria-label":"select chapter","data-testid":"information-panel-list"},ts&&React$1.createElement(ne,{value:"manifest-about"},"About"),es&&_r&&_r.map(({id:Xr,label:qr})=>React$1.createElement(ne,{key:Xr,value:Xr},React$1.createElement(z$1,{label:qr})))),React$1.createElement(kt,null,ts&&React$1.createElement(re,{value:"manifest-about"},React$1.createElement(on,null)),es&&_r&&_r.map(Xr=>React$1.createElement(re,{key:Xr.id,value:Xr.id},React$1.createElement(dn,{resource:Xr}))))):React$1.createElement(React$1.Fragment,null)},Le=m("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),un=m("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),G=m("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),pn=m("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),fn=m("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${Le}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),gn=(Nr,_r)=>{reactExports.useEffect(()=>{function Ur(jr){jr.key===Nr&&_r()}return window.addEventListener("keyup",Ur),()=>window.removeEventListener("keyup",Ur)},[])},hn=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Arrow Back"),React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),xn=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Arrow Forward"),React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),vn=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Close"),React$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),bn=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Search"),React$1.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),yn=({handleCanvasToggle:Nr,handleFilter:_r,activeIndex:Ur,canvasLength:jr})=>{const[Gr,Wr]=reactExports.useState(!1),[Zr,Yr]=reactExports.useState(!1),[ts,es]=reactExports.useState(!1);reactExports.useEffect(()=>{es(Ur===0),Ur===jr-1?Yr(!0):Yr(!1)},[Ur,jr]),gn("Escape",()=>{Wr(!1),_r("")});const ns=()=>{Wr(qr=>!qr),_r("")},Xr=qr=>_r(qr.target.value);return React$1.createElement(fn,{isToggle:Gr},React$1.createElement(Le,null,Gr&&React$1.createElement(un,{autoFocus:!0,onChange:Xr,placeholder:"Search"}),!Gr&&React$1.createElement(pn,null,React$1.createElement(G,{onClick:()=>Nr(-1),disabled:ts,type:"button"},React$1.createElement(hn,null)),React$1.createElement("span",null,Ur+1," of ",jr),React$1.createElement(G,{onClick:()=>Nr(1),disabled:Zr,type:"button"},React$1.createElement(xn,null))),React$1.createElement(G,{onClick:ns,type:"button"},Gr?React$1.createElement(vn,null):React$1.createElement(bn,null))))},En=m($f99a8c78507165f7$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),wn=()=>React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),Cn=()=>React$1.createElement(React$1.Fragment,null,React$1.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),React$1.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),React$1.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),Sn=()=>React$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),kn=()=>React$1.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),In=()=>React$1.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"}),Fe=m("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),$n=({children:Nr})=>React$1.createElement("title",null,Nr),k=Nr=>React$1.createElement(Fe,{...Nr,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},Nr.children);k.Title=$n;k.Add=wn;k.Audio=Cn;k.Close=Sn;k.Image=kn;k.Video=In;const An=K({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Tn=K({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Pe=m($cb5cc270b50c6fcd$export$21b07c8f274aebd5,{fill:"$secondaryAlt"}),Mn=m($cb5cc270b50c6fcd$export$f39c2d165cd861fe,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),Rn=m($cb5cc270b50c6fcd$export$7c6e2c02157bb7d2,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:Tn},'&[data-side="bottom"]':{animationName:An},'&[data-align="end"]':{[`& ${Pe}`]:{margin:"0 0.7rem"}}}),zn=m($cb5cc270b50c6fcd$export$41fb9f06171c75f4,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),Ln=m($cb5cc270b50c6fcd$export$be92b6f5f03c0fe9,{boxSizing:"content-box"}),Fn=Nr=>React$1.createElement(zn,{...Nr},Nr.children),Pn=Nr=>React$1.createElement(Rn,{...Nr},React$1.createElement(Pe,null),React$1.createElement(Mn,null,React$1.createElement(k,{isSmall:!0},React$1.createElement(k.Close,null))),Nr.children),H=({children:Nr})=>React$1.createElement(Ln,null,Nr);H.Trigger=Fn;H.Content=Pn;const U=m("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${Fe}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),_=m("span",{display:"flex"}),Vn=m("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),Hn=m("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),Bn=m($f99a8c78507165f7$export$6d08773d2e66f8f2,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${_}`]:{position:"absolute",right:"0",bottom:"0",[`& ${U}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${_}`]:{[`& ${U}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),On=({type:Nr})=>{switch(Nr){case"Sound":return React$1.createElement(k.Audio,null);case"Image":return React$1.createElement(k.Image,null);case"Video":return React$1.createElement(k.Video,null);default:return React$1.createElement(k.Image,null)}},Dn=({canvas:Nr,canvasIndex:_r,isActive:Ur,thumbnail:jr,type:Gr,handleChange:Wr})=>React$1.createElement(Bn,{"aria-checked":Ur,"data-testid":"media-thumbnail","data-canvas":_r,onClick:()=>Wr(Nr.id),value:Nr.id},React$1.createElement("figure",null,React$1.createElement("div",null,(jr==null?void 0:jr.id)&&React$1.createElement("img",{src:jr.id,alt:Nr!=null&&Nr.label?V(Nr.label):""}),React$1.createElement(_,null,React$1.createElement(U,{isIcon:!0,"data-testid":"thumbnail-tag"},React$1.createElement(Vn,null),React$1.createElement(k,{"aria-label":Gr},React$1.createElement(On,{type:Gr})),["Video","Sound"].includes(Gr)&&React$1.createElement(Hn,null,ge(Nr.duration))))),(Nr==null?void 0:Nr.label)&&React$1.createElement("figcaption",{"data-testid":"fig-caption"},React$1.createElement(z$1,{label:Nr.label})))),Wn=Nr=>Nr.body?Nr.body.type:"Image",jn=({items:Nr})=>{const _r=P(),Ur=I(),{activeCanvas:jr,vault:Gr}=Ur,[Wr,Zr]=reactExports.useState(""),[Yr,ts]=reactExports.useState([]),[es,ns]=reactExports.useState(0),Xr=React$1.useRef(null),qr="painting",_i=ss=>{jr!==ss&&_r({type:"updateActiveCanvas",canvasId:ss})};reactExports.useEffect(()=>{if(!Yr.length){const ss=["Image","Sound","Video"],os=Nr.map(ls=>ye(Gr,ls,qr,ss)).filter(ls=>ls.annotations.length>0);ts(os)}},[Nr,Yr.length,Gr]),reactExports.useEffect(()=>{Yr.forEach((ss,os)=>{ss!=null&&ss.canvas&&ss.canvas.id===jr&&ns(os)})},[jr,Yr]),reactExports.useEffect(()=>{const ss=document.querySelector(`[data-canvas="${es}"]`);if(ss instanceof HTMLElement&&Xr.current){const os=ss.offsetLeft-Xr.current.offsetWidth/2+ss.offsetWidth/2;Xr.current.scrollTo({left:os,behavior:"smooth"})}},[es]);const rs=ss=>Zr(ss),is=ss=>{const os=Yr[es+ss];os!=null&&os.canvas&&_i(os.canvas.id)};return React$1.createElement(React$1.Fragment,null,React$1.createElement(yn,{handleFilter:rs,handleCanvasToggle:is,activeIndex:es,canvasLength:Yr.length}),React$1.createElement(En,{"aria-label":"select item","data-testid":"media",ref:Xr},Yr.filter(ss=>{var os;if((os=ss.canvas)!=null&&os.label){const ls=V(ss.canvas.label);if(Array.isArray(ls))return ls[0].toLowerCase().includes(Wr.toLowerCase())}}).map((ss,os)=>{var ls,cs;return React$1.createElement(Dn,{canvas:ss.canvas,canvasIndex:os,handleChange:_i,isActive:jr===((ls=ss==null?void 0:ss.canvas)==null?void 0:ls.id),key:(cs=ss==null?void 0:ss.canvas)==null?void 0:cs.id,thumbnail:gt(Gr,ss,200,200),type:Wn(ss.annotations[0])})})))},Ve=m("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),He=m("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),Be=m(He,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),Nn=m("div",{position:"relative",zIndex:"0",display:"flex",flexDirection:"column",gap:"1rem","&:hover":{[`${Be}`]:{backgroundColor:"$accent"},[`${Ve}`]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}}),Gn=m("div",{}),qn=m("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),Un=m($cc7e05a45900e73f$export$41fb9f06171c75f4,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),_n=m($cc7e05a45900e73f$export$7c6e2c02157bb7d2,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),Zn=m($cc7e05a45900e73f$export$6d08773d2e66f8f2,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),Xn=m($cc7e05a45900e73f$export$b04be29aa201d4f5,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),Oe=m($cc7e05a45900e73f$export$be92b6f5f03c0fe9,{position:"relative",zIndex:"5",width:"100%"}),q=({direction:Nr,title:_r})=>{const Ur=()=>React$1.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),jr=()=>React$1.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"});return React$1.createElement(qn,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",null,_r),Nr==="up"&&React$1.createElement(Ur,null),Nr==="down"&&React$1.createElement(jr,null))},De=({children:Nr,label:_r,maxHeight:Ur,onValueChange:jr,value:Gr})=>React$1.createElement(Oe,{onValueChange:jr,value:Gr},React$1.createElement(Un,{"data-testid":"select-button"},React$1.createElement($cc7e05a45900e73f$export$e288731fd71264f0,{"data-testid":"select-button-value"}),React$1.createElement($cc7e05a45900e73f$export$99b400cabb58c515,null,React$1.createElement(q,{direction:"down",title:"select"}))),React$1.createElement($cc7e05a45900e73f$export$b2af6c9944296213,null,React$1.createElement(_n,{css:{maxHeight:`${Ur} !important`},"data-testid":"select-content"},React$1.createElement($cc7e05a45900e73f$export$d8117927658af6d7,null,React$1.createElement(q,{direction:"up",title:"scroll up for more"})),React$1.createElement($cc7e05a45900e73f$export$9ed6e7b40248d36d,null,React$1.createElement($cc7e05a45900e73f$export$ee25a334c55de1f4,null,_r&&React$1.createElement(Xn,null,React$1.createElement(z$1,{"data-testid":"select-label",label:_r})),Nr)),React$1.createElement($cc7e05a45900e73f$export$ff951e476c12189,null,React$1.createElement(q,{direction:"down",title:"scroll down for more"}))))),We=Nr=>React$1.createElement(Zn,{...Nr},Nr.thumbnail&&React$1.createElement(Me,{thumbnail:Nr.thumbnail}),React$1.createElement($cc7e05a45900e73f$export$3572fb0fb821ff49,null,React$1.createElement(z$1,{label:Nr.label})),React$1.createElement($cc7e05a45900e73f$export$6b9198de19accfe6,null)),Yn=m("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),Kn=m("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Jn=m("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),R=({id:Nr,label:_r,children:Ur})=>React$1.createElement(He,{id:Nr,"data-testid":"openseadragon-button"},React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${Nr}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",{id:`${Nr}-svg-title`},_r),Ur)),Qn=m("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),er=()=>React$1.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),tr=()=>React$1.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),nr=()=>React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),rr=()=>React$1.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),le=()=>React$1.createElement(React$1.Fragment,null,React$1.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),React$1.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),or=({hasPlaceholder:Nr,options:_r})=>React$1.createElement(Qn,{"data-testid":"openseadragon-controls",hasPlaceholder:Nr,id:"openseadragon-controls"},_r.showZoomControl&&React$1.createElement(React$1.Fragment,null,React$1.createElement(R,{id:"zoomIn",label:"zoom in"},React$1.createElement(er,null)),React$1.createElement(R,{id:"zoomOut",label:"zoom out"},React$1.createElement(tr,null))),_r.showFullPageControl&&React$1.createElement(R,{id:"fullPage",label:"full page"},React$1.createElement(nr,null)),_r.showRotationControl&&React$1.createElement(React$1.Fragment,null,React$1.createElement(R,{id:"rotateRight",label:"rotate right"},React$1.createElement(le,null)),React$1.createElement(R,{id:"rotateLeft",label:"rotate left"},React$1.createElement(le,null))),_r.showHomeControl&&React$1.createElement(R,{id:"reset",label:"reset"},React$1.createElement(rr,null))),ar=Nr=>fetch(`${Nr.replace(/\/$/,"")}/info.json`).then(_r=>_r.json()).then(_r=>_r).catch(_r=>{console.error(`The IIIF tilesource ${Nr.replace(/\/$/,"")}/info.json failed to load: ${_r}`)}),ir=Nr=>{let _r,Ur;if(Array.isArray(Nr)&&(_r=Nr[0],_r)){let jr;"@id"in _r?jr=_r["@id"]:jr=_r.id,Ur=jr}return Ur},lr=({uri:Nr,hasPlaceholder:_r,imageType:Ur})=>{const[jr,Gr]=reactExports.useState(),Wr=I(),{configOptions:Zr}=Wr,Yr=v4(),ts={id:`openseadragon-viewport-${Yr}`,loadTilesWithAjax:!0,fullPageButton:"fullPage",homeButton:"reset",rotateLeftButton:"rotateLeft",rotateRightButton:"rotateRight",zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",navigatorId:`openseadragon-navigator-${Yr}`,gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!0},...Zr.openSeadragon,ajaxWithCredentials:Zr.withCredentials};return reactExports.useEffect(()=>{Nr!==jr&&Gr(Nr)},[jr,Nr]),reactExports.useEffect(()=>{if(jr)switch(Ur){case"simpleImage":te(ts).addSimpleImage({url:jr});break;case"tiledImage":ar(jr).then(es=>te(ts).addTiledImage({tileSource:es}));break;default:console.warn(`Unable to render ${jr} in OpenSeadragon as type: "${Ur}"`);break}},[jr]),React$1.createElement(Jn,{css:{backgroundColor:Zr.canvasBackgroundColor,height:Zr.canvasHeight}},React$1.createElement(or,{hasPlaceholder:_r,options:ts}),React$1.createElement(Yn,{id:`openseadragon-navigator-${Yr}`}),React$1.createElement(Kn,{id:`openseadragon-viewport-${Yr}`}))},sr=({painting:Nr,hasPlaceholder:_r})=>{const[Ur,jr]=reactExports.useState(),[Gr,Wr]=reactExports.useState();return reactExports.useEffect(()=>{Array.isArray(Nr==null?void 0:Nr.service)&&(Nr==null?void 0:Nr.service.length)>0?(jr("tiledImage"),Wr(ir(Nr==null?void 0:Nr.service))):(jr("simpleImage"),Wr(Nr==null?void 0:Nr.id))},[Nr]),React$1.createElement(lr,{uri:Gr,key:Gr,hasPlaceholder:_r,imageType:Ur})},cr=({isMedia:Nr,label:_r,placeholderCanvas:Ur,setIsInteractive:jr})=>{const{vault:Gr}=I(),Wr=O(Gr,Ur),Zr=Wr?Wr[0]:void 0,Yr=_r?V(_r):["placeholder image"];return React$1.createElement(Ve,{onClick:()=>jr(!0),isMedia:Nr},React$1.createElement("img",{src:(Zr==null?void 0:Zr.id)||"",alt:Yr.join(),height:Zr==null?void 0:Zr.height,width:Zr==null?void 0:Zr.width}))},dr=m("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),mr=React$1.forwardRef((Nr,_r)=>{const Ur=React$1.useRef(null);React$1.useEffect(()=>{_r&&(_r.current.onplay=jr)},[_r]);function jr(){const Wr=_r.current,Zr=new AudioContext,Yr=Zr.createMediaElementSource(Wr),ts=Zr.createAnalyser(),es=Ur.current;if(!es)return;es.width=Wr.offsetWidth,es.height=Wr.offsetHeight;const ns=es.getContext("2d");Yr.connect(ts),ts.connect(Zr.destination),ts.fftSize=256;const Xr=ts.frequencyBinCount,qr=new Uint8Array(Xr);setInterval(function(){Gr(ts,ns,Xr,qr,es.width,es.height)},20)}function Gr(Wr,Zr,Yr,ts,es,ns){const Xr=es/Yr*2.6;let qr,_i=0;Wr.getByteFrequencyData(ts),Zr.fillStyle="#000000",Zr.fillRect(0,0,es,ns);for(let rs=0;rs<Yr;rs++)qr=ts[rs]*2,Zr.fillStyle="rgba(78, 42, 132, 1)",Zr.fillRect(_i,ns-qr,Xr,qr),_i+=Xr+6}return React$1.createElement(dr,{ref:Ur})}),ur=m("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),pr=({resource:Nr,ignoreCaptionLabels:_r})=>{const Ur=V(Nr.label,"en");return Array.isArray(Ur)&&Ur.some(jr=>_r.includes(jr))?null:React$1.createElement("track",{key:Nr.id,src:Nr.id,label:Array.isArray(Ur)?Ur[0]:Ur,srcLang:"en","data-testid":"player-track"})},fr=({allSources:Nr,resources:_r,painting:Ur})=>{var jr;const[Gr,Wr]=React$1.useState(0),[Zr,Yr]=React$1.useState(),ts=React$1.useRef(null),es=(jr=Ur==null?void 0:Ur.format)==null?void 0:jr.includes("audio/"),ns=I(),{activeCanvas:Xr,configOptions:qr,vault:_i}=ns;return reactExports.useEffect(()=>{if(!Ur.id||!ts.current)return;if(ts!=null&&ts.current){const ss=ts.current;ss.src=Ur.id,ss.load()}if(Ur.id.split(".").pop()!=="m3u8")return;const rs={xhrSetup:function(ss,os){ss.withCredentials=!!qr.withCredentials}},is=new Hls(rs);return is.attachMedia(ts.current),is.on(Hls.Events.MEDIA_ATTACHED,function(){is.loadSource(Ur.id)}),is.on(Hls.Events.ERROR,function(ss,os){if(os.fatal)switch(os.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${ss} network error encountered, try to recover`),is.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${ss} media error encountered, try to recover`),is.recoverMediaError();break;default:is.destroy();break}}),()=>{if(is&&ts.current){const ss=ts.current;is.detachMedia(),is.destroy(),ss.currentTime=0}}},[qr.withCredentials,Ur.id]),reactExports.useEffect(()=>{var rs,is,ss,os;const ls=_i.get(Xr),cs=(rs=ls.accompanyingCanvas)!=null&&rs.id?O(_i,(is=ls.accompanyingCanvas)==null?void 0:is.id):null,ds=(ss=ls.placeholderCanvas)!=null&&ss.id?O(_i,(os=ls.placeholderCanvas)==null?void 0:os.id):null;cs&&ds?Yr(Gr===0?ds[0].id:cs[0].id):(cs&&Yr(cs[0].id),ds&&Yr(ds[0].id))},[Xr,Gr,_i]),reactExports.useEffect(()=>{if(ts!=null&&ts.current){const rs=ts.current;return rs==null||rs.addEventListener("timeupdate",()=>Wr(rs.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),React$1.createElement(ur,{css:{backgroundColor:qr.canvasBackgroundColor,maxHeight:qr.canvasHeight,position:"relative"}},React$1.createElement("video",{id:"clover-iiif-video",key:Ur.id,ref:ts,controls:!0,height:Ur.height,width:Ur.width,crossOrigin:"anonymous",poster:Zr,style:{maxHeight:qr.canvasHeight,position:"relative",zIndex:"0"}},Nr.map(rs=>React$1.createElement("source",{src:rs.id,type:rs.format,key:rs.id})),_r.length>0&&_r.map(rs=>React$1.createElement(pr,{resource:rs,ignoreCaptionLabels:qr.ignoreCaptionLabels||[],key:rs.id})),"Sorry, your browser doesn't support embedded videos."),es&&React$1.createElement(mr,{ref:ts}))},gr=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",{id:"close-svg-title"},"close"),React$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),hr=({isMedia:Nr})=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",{id:"open-svg-title"},"open"),Nr?React$1.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):React$1.createElement(React$1.Fragment,null,React$1.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),React$1.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),xr=({handleToggle:Nr,isInteractive:_r,isMedia:Ur})=>React$1.createElement(Be,{onClick:Nr,isInteractive:_r,isMedia:Ur},_r?React$1.createElement(gr,null):React$1.createElement(hr,{isMedia:Ur})),vr=({activeCanvas:Nr,isMedia:_r,painting:Ur,resources:jr})=>{var Gr,Wr;const[Zr,Yr]=React$1.useState(0),[ts,es]=React$1.useState(!1),{configOptions:ns,vault:Xr}=I(),qr=Xr.get(Nr),_i=(Gr=qr==null?void 0:qr.placeholderCanvas)==null?void 0:Gr.id,rs=!!_i,is=(Ur==null?void 0:Ur.length)>1,ss=_i&&!ts&&!_r,os=()=>es(!ts),ls=cs=>{const ds=Ur.findIndex(fs=>fs.id===cs);Yr(ds)};return React$1.createElement(Nn,null,React$1.createElement(Gn,{style:{backgroundColor:ns.canvasBackgroundColor,maxHeight:ns.canvasHeight}},_i&&!_r&&React$1.createElement(xr,{handleToggle:os,isInteractive:ts,isMedia:_r}),ss&&!_r&&React$1.createElement(cr,{isMedia:_r,label:qr==null?void 0:qr.label,placeholderCanvas:_i,setIsInteractive:es}),!ss&&React$1.createElement("div",null,_r?React$1.createElement(fr,{allSources:Ur,painting:Ur[Zr],resources:jr}):Ur&&React$1.createElement(sr,{painting:Ur[Zr],hasPlaceholder:rs,key:Nr}))),is&&React$1.createElement(De,{value:(Wr=Ur[Zr])==null?void 0:Wr.id,onValueChange:ls,maxHeight:"200px"},Ur==null?void 0:Ur.map(cs=>React$1.createElement(We,{value:cs==null?void 0:cs.id,key:cs==null?void 0:cs.id,label:cs==null?void 0:cs.label}))))},br=({activeCanvas:Nr,painting:_r,resources:Ur,items:jr,isAudioVideo:Gr})=>{const{informationOpen:Wr,configOptions:Zr}=I(),{informationPanel:Yr}=Zr,ts=(Yr==null?void 0:Yr.renderAbout)||(Yr==null?void 0:Yr.renderSupplementing)&&Ur.length>0;return React$1.createElement(we,{className:"clover-content"},React$1.createElement(Ce,null,React$1.createElement(vr,{activeCanvas:Nr,isMedia:Gr,painting:_r,resources:Ur}),ts&&React$1.createElement(Se,null,React$1.createElement("span",null,Wr?"View Items":"More Information")),jr.length>1&&React$1.createElement(Ee,{className:"clover-canvases"},React$1.createElement(jn,{items:jr,activeItem:0}))),Wr&&ts&&React$1.createElement(Et,null,React$1.createElement(ke,null,React$1.createElement(mn,{activeCanvas:Nr,resources:Ur}))))},yr=m(H.Trigger,{width:"30px",padding:"5px"}),Er=m(H.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),wr=m("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),Cr=m("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${Oe}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),Sr=m("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),kr=()=>{var Nr;const _r=P(),Ur=I(),{activeManifest:jr,collection:Gr,configOptions:Wr,vault:Zr}=Ur,Yr=Wr==null?void 0:Wr.canvasHeight,ts=es=>{_r({type:"updateActiveManifest",manifestId:es})};return React$1.createElement("div",{style:{margin:"0.75rem"}},React$1.createElement(De,{label:Gr.label,maxHeight:Yr,value:jr,onValueChange:ts},(Nr=Gr==null?void 0:Gr.items)==null?void 0:Nr.map(es=>React$1.createElement(We,{value:es.id,key:es.id,thumbnail:Zr.get(es==null?void 0:es.thumbnail),label:es.label}))))},Ir=(Nr,_r=2500)=>{const[Ur,jr]=reactExports.useState(),Gr=reactExports.useCallback(()=>{navigator.clipboard.writeText(Nr).then(()=>jr("copied"),()=>jr("failed"))},[Nr]);return reactExports.useEffect(()=>{if(!Ur)return;const Wr=setTimeout(()=>jr(void 0),_r);return()=>clearTimeout(Wr)},[Ur]),[Ur,Gr]},$r=m("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),Ar=({status:Nr})=>Nr?React$1.createElement($r,{"data-copy-status":Nr},Nr):null,se=({textPrompt:Nr,textToCopy:_r})=>{const[Ur,jr]=Ir(_r);return React$1.createElement("button",{onClick:jr},Nr," ",React$1.createElement(Ar,{status:Ur}))},Tr=()=>{const Nr="#ed1d33",_r="#2873ab";return React$1.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},React$1.createElement("title",null,"IIIF Manifest Options"),React$1.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},React$1.createElement("g",{transform:"scale(0.1)"},React$1.createElement("path",{style:{fill:_r},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),React$1.createElement("path",{style:{fill:_r},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),React$1.createElement("path",{style:{fill:Nr},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),React$1.createElement("path",{style:{fill:Nr},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),React$1.createElement("path",{style:{fill:_r},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),React$1.createElement("path",{style:{fill:_r},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),React$1.createElement("path",{style:{fill:Nr},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},Mr=m($6be4966fd9bbc698$export$be92b6f5f03c0fe9,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),Rr=m($6be4966fd9bbc698$export$6521433ed15a34db,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),zr=m("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),Lr=m("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Fr=()=>{var Nr;const{configOptions:_r}=I(),Ur=P(),[jr,Gr]=reactExports.useState((Nr=_r==null?void 0:_r.informationPanel)==null?void 0:Nr.open);return reactExports.useEffect(()=>{Ur({type:"updateInformationOpen",informationOpen:jr})},[jr]),React$1.createElement(Lr,null,React$1.createElement(zr,{htmlFor:"information-toggle",css:jr?{opacity:"1"}:{}},"More Information"),React$1.createElement(Mr,{checked:jr,onCheckedChange:()=>Gr(!jr),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},React$1.createElement(Rr,null)))},je=Nr=>{const _r=()=>window.matchMedia?window.matchMedia(Nr).matches:!1,[Ur,jr]=reactExports.useState(_r);return reactExports.useEffect(()=>{const Gr=()=>jr(_r);return window.addEventListener("resize",Gr),()=>window.removeEventListener("resize",Gr)}),Ur},Pr=({manifestId:Nr,manifestLabel:_r})=>{const Ur=I(),{collection:jr,configOptions:Gr}=Ur,{showTitle:Wr,showIIIFBadge:Zr,informationPanel:Yr}=Gr,ts=Zr||(Yr==null?void 0:Yr.renderToggle),es=je(Y.sm);return React$1.createElement(Cr,{className:"clover-header"},jr!=null&&jr.items?React$1.createElement(kr,null):React$1.createElement(wr,{className:Wr?"":"visually-hidden"},Wr&&React$1.createElement(z$1,{label:_r})),ts&&React$1.createElement(Sr,null,Zr&&React$1.createElement(H,null,React$1.createElement(yr,null,React$1.createElement(Tr,null)),React$1.createElement(Er,null,(jr==null?void 0:jr.items)&&React$1.createElement("button",{onClick:ns=>{ns.preventDefault(),window.open(jr.id,"_blank")}},"View Collection"),React$1.createElement("button",{onClick:ns=>{ns.preventDefault(),window.open(Nr,"_blank")}},"View Manifest")," ",(jr==null?void 0:jr.items)&&React$1.createElement(se,{textPrompt:"Copy Collection URL",textToCopy:jr.id}),React$1.createElement(se,{textPrompt:"Copy Manifest URL",textToCopy:Nr}))),(Yr==null?void 0:Yr.renderToggle)&&!es&&React$1.createElement(Fr,null)))},Vr=(Nr=!1)=>{const[_r,Ur]=reactExports.useState(Nr);return reactExports.useLayoutEffect(()=>{if(!_r)return;const jr=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=jr}},[_r]),reactExports.useEffect(()=>{_r!==Nr&&Ur(Nr)},[Nr]),[_r,Ur]},Hr=({manifest:Nr,theme:_r})=>{var Ur;const jr=I(),Gr=P(),{activeCanvas:Wr,informationOpen:Zr,vault:Yr,configOptions:ts}=jr,[es,ns]=reactExports.useState(!1),[Xr,qr]=reactExports.useState(!1),[_i,rs]=reactExports.useState([]),[is,ss]=reactExports.useState([]),[os,ls]=Vr(!1),cs=je(Y.sm),ds=reactExports.useCallback(fs=>{Gr({type:"updateInformationOpen",informationOpen:fs})},[Gr]);return reactExports.useEffect(()=>{var fs;(fs=ts==null?void 0:ts.informationPanel)!=null&&fs.open&&ds(!cs)},[cs,(Ur=ts==null?void 0:ts.informationPanel)==null?void 0:Ur.open,ds]),reactExports.useEffect(()=>{if(!cs){ls(!1);return}ls(Zr)},[Zr,cs,ls]),reactExports.useEffect(()=>{const fs=O(Yr,Wr),ms=ft(Yr,Wr,"text/vtt");fs&&(qr(["Sound","Video"].indexOf(fs[0].type)>-1),rs(fs)),ss(ms),ns(ms.length!==0)},[Wr,Yr]),React$1.createElement(ErrorBoundary,{FallbackComponent:yt},React$1.createElement(wt,{className:`${_r} clover-iiif`,css:{background:ts==null?void 0:ts.background},"data-body-locked":os,"data-information-panel":es,"data-information-panel-open":Zr},React$1.createElement($409067139f391064$export$be92b6f5f03c0fe9,{open:Zr,onOpenChange:ds},React$1.createElement(Pr,{manifestLabel:Nr.label,manifestId:Nr.id}),React$1.createElement(br,{activeCanvas:Wr,painting:_i,resources:is,items:Nr.items,isAudioVideo:Xr}))))},ce={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function Br(Nr){return{ok:Nr.status>=200&&Nr.status<300,status:Nr.status,statusText:Nr.statusText,headers:Nr.getAllResponseHeaders(),data:Nr.responseText,json:()=>JSON.parse(Nr.responseText)}}function de(Nr,_r=null){return{ok:!1,status:Nr.status,statusText:Nr.statusText,headers:Nr.getAllResponseHeaders(),data:_r||Nr.statusText,json:()=>JSON.parse(_r||Nr.statusText)}}function Or(Nr,_r=ce){const Ur=_r.headers||ce.headers;return new Promise((jr,Gr)=>{const Wr=new XMLHttpRequest;Wr.open("get",Nr),Wr.withCredentials=_r.withCredentials,Ur&&Object.keys(Ur).forEach(Zr=>Wr.setRequestHeader(Zr,Ur[Zr])),Wr.onload=()=>{jr(Br(Wr))},Wr.onerror=()=>{Gr(de(Wr,"Failed to make request."))},Wr.ontimeout=()=>{Gr(de(Wr,"Request took longer than expected."))},Wr.send()})}const Qr=({canvasIdCallback:Nr=()=>{},customTheme:_r,iiifContent:Ur,id:jr,manifestId:Gr,options:Wr})=>{var Zr;let Yr=Ur;return jr&&(Yr=jr),Gr&&(Yr=Gr),React$1.createElement(pt,{initialState:{...j,informationOpen:!!((Zr=Wr==null?void 0:Wr.informationPanel)!=null&&Zr.open),vault:new Vault({customFetcher:ts=>Or(ts,{withCredentials:Wr==null?void 0:Wr.withCredentials,headers:Wr==null?void 0:Wr.requestHeaders}).then(es=>JSON.parse(es.data))})}},React$1.createElement(Dr,{iiifContent:Yr,canvasIdCallback:Nr,customTheme:_r,options:Wr}))},Dr=({canvasIdCallback:Nr,customTheme:_r,iiifContent:Ur,options:jr})=>{const Gr=P(),Wr=I(),{activeCanvas:Zr,activeManifest:Yr,isLoaded:ts,vault:es}=Wr,[ns,Xr]=reactExports.useState(),[qr,_i]=reactExports.useState();let rs={};return _r&&(rs=Q$1("custom",_r)),reactExports.useEffect(()=>{Nr&&Nr(Zr)},[Zr,Nr]),reactExports.useEffect(()=>{Yr&&es.loadManifest(Yr).then(is=>{_i(is),Gr({type:"updateActiveCanvas",canvasId:is.items[0]&&is.items[0].id})}).catch(is=>{console.error(`Manifest failed to load: ${is}`)}).finally(()=>{Gr({type:"updateIsLoaded",isLoaded:!0})})},[Yr,Gr,es]),reactExports.useEffect(()=>{Gr({type:"updateConfigOptions",configOptions:jr}),es.load(Ur).then(is=>{Xr(is)}).catch(is=>{console.error(`The IIIF resource ${Ur} failed to load: ${is}`)})},[Gr,Ur,jr,es]),reactExports.useEffect(()=>{let is=[];(ns==null?void 0:ns.type)==="Collection"?(Gr({type:"updateCollection",collection:ns}),is=ns.items.filter(ss=>ss.type==="Manifest").map(ss=>ss.id),is.length>0&&Gr({type:"updateActiveManifest",manifestId:is[0]})):(ns==null?void 0:ns.type)==="Manifest"&&Gr({type:"updateActiveManifest",manifestId:ns.id})},[Gr,ns]),ts?!qr||!qr.items?(console.log(`The IIIF manifest ${Ur} failed to load.`),React$1.createElement(React$1.Fragment,null)):qr.items.length===0?(console.log(`The IIIF manifest ${Ur} does not contain canvases.`),React$1.createElement(React$1.Fragment,null)):React$1.createElement(Hr,{manifest:qr,theme:rs,key:qr.id}):React$1.createElement(React$1.Fragment,null,"Loading")};function isIdBuilder(Nr){return _r=>typeof _r=="string"&&new RegExp(Nr.source,Nr.flags).test(_r)}const isNumericId=isIdBuilder(/^[1-9][0-9]*$/),isEntityId=isIdBuilder(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),isEntitySchemaId=isIdBuilder(/^E[1-9][0-9]*$/),isItemId=isIdBuilder(/^Q[1-9][0-9]*$/),isPropertyId=isIdBuilder(/^P[1-9][0-9]*$/),isLexemeId=isIdBuilder(/^L[1-9][0-9]*$/),isFormId=isIdBuilder(/^L[1-9][0-9]*-F[1-9][0-9]*$/),isSenseId=isIdBuilder(/^L[1-9][0-9]*-S[1-9][0-9]*$/),isMediaInfoId=isIdBuilder(/^M[1-9][0-9]*$/),isGuid=isIdBuilder(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isHash=isIdBuilder(/^[0-9a-f]{40}$/),isRevisionId=isIdBuilder(/^\d+$/),isNonNestedEntityId=isIdBuilder(/^(Q|P|L|M)[1-9][0-9]*$/);function isPropertyClaimsId(Nr){if(typeof Nr!="string")return!1;const[_r,Ur]=Nr.split("#");return isEntityId(_r)&&isPropertyId(Ur)}function isEntityPageTitle(Nr){return typeof Nr!="string"?!1:Nr.startsWith("Item:")?isItemId(Nr.substring(5)):Nr.startsWith("Lexeme:")?isLexemeId(Nr.substring(7)):Nr.startsWith("Property:")?isPropertyId(Nr.substring(9)):isItemId(Nr)}function getNumericId(Nr){if(!isNonNestedEntityId(Nr))throw new Error(`invalid entity id: ${Nr}`);return Nr.replace(/^(Q|P|L|M)/,"")}function getImageUrl(Nr,_r){let Ur=`https://commons.wikimedia.org/wiki/Special:FilePath/${Nr}`;return typeof _r=="number"&&(Ur+=`?width=${_r}`),Ur}function getEntityIdFromGuid(Nr){const _r=Nr.split(/[$-]/);if(_r.length===6)return _r[0].toUpperCase();if(_r.length===7)return _r.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${Nr}`)}const helpers=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid,getImageUrl,getNumericId,isEntityId,isEntityPageTitle,isEntitySchemaId,isFormId,isGuid,isHash,isItemId,isLexemeId,isMediaInfoId,isNonNestedEntityId,isNumericId,isPropertyClaimsId,isPropertyId,isRevisionId,isSenseId},Symbol.toStringTag,{value:"Module"}));function forceArray(Nr){return typeof Nr=="string"?[Nr]:Array.isArray(Nr)?[...Nr]:[]}function isPlainObject(Nr){return!!Nr&&typeof Nr=="object"&&!Array.isArray(Nr)}const fixedEncodeURIComponent=Nr=>encodeURIComponent(Nr).replace(/[!'()*]/g,encodeCharacter),replaceSpaceByUnderscores=Nr=>Nr.replace(/\s/g,"_");function uniq(Nr){return Array.from(new Set(Nr))}const encodeCharacter=Nr=>"%"+Nr.charCodeAt(0).toString(16);function rejectObsoleteInterface(Nr){if(Nr.length!==1||!isPlainObject(Nr[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function isOfType(Nr,_r){return typeof _r=="string"&&Nr.includes(_r)}function isAKey(Nr,_r){return Object.prototype.hasOwnProperty.call(Nr,_r)}function typedEntries(Nr){return Object.entries(Nr)}function wikibaseTimeToDateObject(Nr){typeof Nr=="object"&&(Nr=Nr.time);const _r=Nr[0];let[Ur,jr]=Nr.slice(1).split("T");Ur=Ur.replace(/-00/g,"-01");const Gr=`${Ur}T${jr}`;return fullDateData(_r,Gr)}const fullDateData=(Nr,_r)=>{const Ur=_r.split("-")[0];return Nr==="-"||Ur.length>4?expandedYearDate(Nr,_r,Ur):new Date(_r)},expandedYearDate=(Nr,_r,Ur)=>{let jr;return Ur.length===4?jr=`${Nr}00${_r}`:Ur.length===5?jr=`${Nr}0${_r}`:jr=Nr+_r,new Date(jr)};function bestEffort(Nr){return _r=>{try{return Nr(_r)}catch{_r=typeof _r=="string"?_r:_r.time;const jr=_r[0];let[Gr,Wr]=_r.slice(1).split("T");if(!jr||!Gr||!Wr)throw new Error("TimeInput is invalid: "+JSON.stringify(_r));return Gr=Gr.replace(/-00/g,"-01"),`${jr}${Gr}T${Wr}`}}}const toEpochTime=Nr=>wikibaseTimeToDateObject(Nr).getTime(),toISOString=Nr=>wikibaseTimeToDateObject(Nr).toISOString(),toSimpleDay=Nr=>{if(typeof Nr=="object"){const{time:_r,precision:Ur}=Nr;Ur===9?Nr=_r.replace("-01-01T","-00-00T"):Ur===10?Nr=_r.replace("-01T","-00T"):Nr=_r}return Nr.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},wikibaseTimeToEpochTime=bestEffort(toEpochTime),wikibaseTimeToISOString=bestEffort(toISOString),wikibaseTimeToSimpleDay=bestEffort(toSimpleDay),timeHelpers=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject,wikibaseTimeToEpochTime,wikibaseTimeToISOString,wikibaseTimeToSimpleDay},Symbol.toStringTag,{value:"Module"})),simple=Nr=>Nr.value,monolingualtext=(Nr,_r)=>_r.keepRichValues?Nr.value:Nr.value.text,entity=(Nr,_r)=>prefixedId(Nr,_r.entityPrefix),entityLetter={item:"Q",lexeme:"L",property:"P"},prefixedId=(Nr,_r)=>{const{value:Ur}=Nr,jr=Ur.id||entityLetter[Ur["entity-type"]]+Ur["numeric-id"];return typeof _r=="string"?`${_r}:${jr}`:jr},quantity=(Nr,_r)=>{const{value:Ur}=Nr,jr=parseFloat(Ur.amount);if(_r.keepRichValues){const Gr={amount:parseFloat(Ur.amount),unit:Ur.unit.replace(/^https?:\/\/.*\/entity\//,"")};return Ur.upperBound!=null&&(Gr.upperBound=parseFloat(Ur.upperBound)),Ur.lowerBound!=null&&(Gr.lowerBound=parseFloat(Ur.lowerBound)),Gr}else return jr},coordinate=(Nr,_r)=>_r.keepRichValues?Nr.value:[Nr.value.latitude,Nr.value.longitude],time=(Nr,_r)=>{let Ur;if(typeof _r.timeConverter=="function"?Ur=_r.timeConverter(Nr.value):Ur=getTimeConverter(_r.timeConverter)(Nr.value),_r.keepRichValues){const{timezone:jr,before:Gr,after:Wr,precision:Zr,calendarmodel:Yr}=Nr.value;return{time:Ur,timezone:jr,before:Gr,after:Wr,precision:Zr,calendarmodel:Yr}}else return Ur},getTimeConverter=(Nr="iso")=>{const _r=timeConverters[Nr];if(!_r)throw new Error(`invalid converter key: ${JSON.stringify(Nr).substring(0,100)}`);return _r},timeConverters={iso:wikibaseTimeToISOString,epoch:wikibaseTimeToEpochTime,"simple-day":wikibaseTimeToSimpleDay,none:Nr=>typeof Nr=="string"?Nr:Nr.time},parsers={commonsMedia:simple,"external-id":simple,"geo-shape":simple,"globe-coordinate":coordinate,math:simple,monolingualtext,"musical-notation":simple,quantity,string:simple,"tabular-data":simple,time,url:simple,"wikibase-entityid":entity,"wikibase-form":entity,"wikibase-item":entity,"wikibase-lexeme":entity,"wikibase-property":entity,"wikibase-sense":entity},normalizeDatatype=Nr=>Nr.toLowerCase().replace(/[\s-]/g,""),normalizedParsers={};for(const[Nr,_r]of Object.entries(parsers))normalizedParsers[normalizeDatatype(Nr)]=_r;function parseClaim(Nr,_r,Ur,jr){Nr=Nr||_r.type;try{const Gr=normalizedParsers[normalizeDatatype(Nr)];return Gr(_r,Ur)}catch(Gr){throw Gr.message==="parsers[datatype] is not a function"&&(Gr.message=`${Nr} claim parser isn't implemented
      Claim id: ${jr}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),Gr}}function truthyPropertyClaims(Nr){const _r={};for(const Ur of Nr){const{rank:jr}=Ur;_r[jr]=_r[jr]||[],_r[jr].push(Ur)}return _r.preferred||_r.normal||[]}function nonDeprecatedPropertyClaims(Nr){return Nr.filter(_r=>_r.rank!=="deprecated")}function truthyClaims(Nr){const _r={};for(const[Ur,jr]of typedEntries(Nr))_r[Ur]=truthyPropertyClaims(jr);return _r}const rankHelpers=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims,truthyClaims,truthyPropertyClaims},Symbol.toStringTag,{value:"Module"}));function simplifySnaks(Nr,_r){const{propertyPrefix:Ur}=_r,jr={};for(let Gr in Nr){const Wr=Nr[Gr];Ur&&(Gr=Ur+":"+Gr),jr[Gr]=simplifyPropertySnaks(Wr,_r)}return jr}function simplifyPropertySnaks(Nr,_r){if(Nr==null||Nr.length===0)return[];const{keepNonTruthy:Ur,keepNonDeprecated:jr,areSubSnaks:Gr}=parseKeepOptions(_r);return jr?Nr=nonDeprecatedPropertyClaims(Nr):Ur||Gr||(Nr=truthyPropertyClaims(Nr)),Nr=Nr.map(Wr=>simplifyClaim(Wr,_r)).filter(Wr=>Wr!==void 0),Nr[0]&&typeof Nr[0]!="object"?uniq(Nr):Nr}function simplifySnak(Nr,_r){const{keepQualifiers:Ur,keepReferences:jr,keepIds:Gr,keepHashes:Wr,keepTypes:Zr,keepSnaktypes:Yr,keepRanks:ts}=parseKeepOptions(_r),{mainsnak:es,rank:ns}=Nr;let Xr,qr,_i,rs,is,ss;if(es?(qr=es.datatype,_i=es.datavalue,rs=es.snaktype):(_i=Nr.datavalue,qr=Nr.datatype,rs=Nr.snaktype,Nr.hash?is=!0:ss=!0),_i)Xr=parseClaim(qr,_i,_r,Nr.id);else if(rs==="somevalue")Xr=_r.somevalueValue;else if(rs==="novalue")Xr=_r.novalueValue;else throw new Error("no datavalue or special snaktype found");if(is){if(!(Wr||Zr||Yr))return Xr;const cs={value:Xr};return Wr&&(cs.hash=Nr.hash),Zr&&(cs.type=qr),Yr&&(cs.snaktype=rs),cs}if(ss)return Zr?{type:qr,value:Xr}:Xr;if(!(Ur||jr||Gr||Zr||Yr||ts))return Xr;const os={value:Xr};Zr&&(os.type=qr),Yr&&(os.snaktype=rs),ts&&(os.rank=ns);const ls=getSubSnakOptions(_r);return ls.keepHashes=Wr,Ur&&(os.qualifiers=simplifyQualifiers(Nr.qualifiers,ls)),jr&&(Nr.references=Nr.references||[],os.references=simplifyReferences(Nr.references,ls)),Gr&&(os.id=Nr.id),os}function simplifyClaims(Nr,_r={}){return simplifySnaks(Nr,_r)}function simplifyPropertyClaims(Nr,_r={}){return simplifyPropertySnaks(Nr,_r)}function simplifyClaim(Nr,_r={}){return simplifySnak(Nr,_r)}function simplifyQualifiers(Nr,_r={}){return simplifySnaks(Nr,getSubSnakOptions(_r))}function simplifyPropertyQualifiers(Nr,_r={}){return simplifyPropertySnaks(Nr,getSubSnakOptions(_r))}function simplifyQualifier(Nr,_r={}){return simplifySnak(Nr,_r)}function simplifyReferences(Nr,_r={}){return Nr.map(Ur=>simplifyReferenceRecord(Ur,_r))}function simplifyReferenceRecord(Nr,_r={}){const Ur=getSubSnakOptions(_r),jr=simplifySnaks(Nr.snaks,Ur);return Ur.keepHashes?{snaks:jr,hash:Nr.hash}:jr}const getSubSnakOptions=(Nr={})=>Nr.areSubSnaks?Nr:Object.assign({},Nr,{areSubSnaks:!0}),keepOptions=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],parseKeepOptions=(Nr={})=>(Nr.keepAll&&keepOptions.forEach(_r=>{Nr[_r]==null&&(Nr[_r]=!0)}),Nr);function singleValue(Nr){const _r={};for(const[Ur,jr]of typedEntries(Nr))_r[Ur]=jr!=null?jr.value:null;return _r}function multiValue(Nr){const _r={};for(const[Ur,jr]of typedEntries(Nr))_r[Ur]=jr!=null?jr.map(Gr=>Gr.value):[];return _r}function simplifyLabels(Nr){return singleValue(Nr)}function simplifyDescriptions(Nr){return singleValue(Nr)}function simplifyAliases(Nr){return multiValue(Nr)}function simplifyLemmas(Nr){return singleValue(Nr)}function simplifyRepresentations(Nr){return singleValue(Nr)}function simplifyGlosses(Nr){return singleValue(Nr)}const simplifyForm=(Nr,_r={})=>{const{id:Ur,representations:jr,grammaticalFeatures:Gr,claims:Wr}=Nr;if(!isFormId(Ur))throw new Error("invalid form object");return{id:Ur,representations:simplifyRepresentations(jr),grammaticalFeatures:Gr,claims:simplifyClaims(Wr,_r)}},simplifyForms=(Nr,_r={})=>Nr.map(Ur=>simplifyForm(Ur,_r)),simplifySense=(Nr,_r={})=>{const{id:Ur,glosses:jr,claims:Gr}=Nr;if(!isSenseId(Ur))throw new Error("invalid sense object");return{id:Ur,glosses:simplifyGlosses(jr),claims:simplifyClaims(Gr,_r)}};function simplifySenses(Nr,_r={}){return Nr.map(Ur=>simplifySense(Ur,_r))}const specialSites={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikimaniawiki:"wikimania"},sites=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwiktionary","blkwiki","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],wikidataBase="https://www.wikidata.org/wiki/";function getSitelinkUrl({site:Nr,title:_r}){if(rejectObsoleteInterface(arguments),!Nr)throw new Error("missing a site");if(!_r)throw new Error("missing a title");if(isAKey(siteUrlBuilders,Nr))return siteUrlBuilders[Nr](_r);const Ur=Nr.replace(/wiki$/,"");if(isAKey(siteUrlBuilders,Ur))return siteUrlBuilders[Ur](_r);const{lang:jr,project:Gr}=getSitelinkData(Nr);return _r=fixedEncodeURIComponent(replaceSpaceByUnderscores(_r)),`https://${jr}.${Gr}.org/wiki/${_r}`}const wikimediaSite=Nr=>_r=>`https://${Nr}.wikimedia.org/wiki/${_r}`,siteUrlBuilders={commons:wikimediaSite("commons"),foundation:wikimediaSite("foundation"),mediawiki:Nr=>`https://www.mediawiki.org/wiki/${Nr}`,meta:wikimediaSite("meta"),outreach:wikimediaSite("outreach"),sources:Nr=>`https://wikisource.org/wiki/${Nr}`,species:wikimediaSite("species"),wikidata:Nr=>{const _r=prefixByEntityLetter[Nr[0]];let Ur=_r?`${_r}:${Nr}`:Nr;return Ur=Ur.replace("-","#"),`${wikidataBase}${Ur}`},wikimania:wikimediaSite("wikimania")},prefixByEntityLetter={E:"EntitySchema",L:"Lexeme",P:"Property"},sitelinkUrlPattern=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function getSitelinkData(Nr){if(Nr.startsWith("http")){const _r=Nr,Ur=_r.match(sitelinkUrlPattern);if(!Ur)throw new Error(`invalid sitelink url: ${_r}`);let[jr,Gr,Wr]=Ur.slice(1);if(Wr=decodeURIComponent(Wr),jr==="commons")return{lang:"en",project:"commons",key:"commons",title:Wr,url:_r};if(!isOfType(projectNames,Gr))throw new Error(`project is unknown: ${Gr}`);if(jr==="www")return{lang:"en",project:Gr,key:Gr,title:Wr,url:_r};const Yr=`${jr.replace(/-/g,"_")}${Gr}`.replace("wikipedia","wiki");return{lang:jr,project:Gr,key:Yr,title:Wr,url:_r}}else{if(isAKey(specialSites,Nr))return{lang:"en",project:specialSites[Nr],key:Nr};if(!isOfType(sites,Nr))throw new Error(`site not found: ${Nr}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[_r,Ur,jr]=Nr.split("wik");if(jr!=null)throw new Error(`invalid sitelink key: ${Nr}`);_r=_r.replace(/_/g,"-");const Gr=projectsBySuffix[Ur];if(!Gr)throw new Error(`sitelink project not found: ${Gr}`);return{lang:_r,project:Gr,key:Nr}}}const isSite=Nr=>isOfType(sites,Nr),isSitelinkKey=isSite,projectsBySuffix={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},projectNames=[...Object.values(projectsBySuffix),...Object.values(specialSites)],sitelinksHelpers=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData,getSitelinkUrl,isSite,isSitelinkKey},Symbol.toStringTag,{value:"Module"}));function simplifySitelinks(Nr,_r={}){let{addUrl:Ur,keepBadges:jr,keepAll:Gr}=_r;return jr=jr||Gr,Object.keys(Nr).reduce(aggregateValues({sitelinks:Nr,addUrl:Ur,keepBadges:jr}),{})}const aggregateValues=({sitelinks:Nr,addUrl:_r,keepBadges:Ur})=>(jr,Gr)=>{if(Nr[Gr]==null)return jr[Gr]=Nr[Gr],jr;const{title:Wr,badges:Zr}=Nr[Gr];return _r||Ur?(jr[Gr]={title:Wr},_r&&(jr[Gr].url=getSitelinkUrl({site:Gr,title:Wr})),Ur&&(jr[Gr].badges=Zr)):jr[Gr]=Wr,jr},simplify$1={labels:simplifyLabels,descriptions:simplifyDescriptions,aliases:simplifyAliases,claims:simplifyClaims,statements:simplifyClaims,sitelinks:simplifySitelinks,lemmas:simplifyLemmas,forms:simplifyForms,senses:simplifySenses},simplifyEntity=(Nr,_r={})=>{const{type:Ur}=Nr,jr={id:Nr.id,type:Ur,modified:Nr.modified};return Ur==="item"?(simplifyIfDefined(Nr,jr,"labels"),simplifyIfDefined(Nr,jr,"descriptions"),simplifyIfDefined(Nr,jr,"aliases"),simplifyIfDefined(Nr,jr,"claims",_r),simplifyIfDefined(Nr,jr,"sitelinks",_r)):Ur==="property"?(jr.datatype=Nr.datatype,simplifyIfDefined(Nr,jr,"labels"),simplifyIfDefined(Nr,jr,"descriptions"),simplifyIfDefined(Nr,jr,"aliases"),simplifyIfDefined(Nr,jr,"claims",_r)):Ur==="lexeme"?(simplifyIfDefined(Nr,jr,"lemmas"),jr.lexicalCategory=Nr.lexicalCategory,jr.language=Nr.language,simplifyIfDefined(Nr,jr,"claims",_r),simplifyIfDefined(Nr,jr,"forms",_r),simplifyIfDefined(Nr,jr,"senses",_r)):Ur==="mediainfo"&&(simplifyIfDefined(Nr,jr,"labels"),simplifyIfDefined(Nr,jr,"descriptions"),simplifyIfDefined(Nr,jr,"statements",_r)),jr},simplifyIfDefined=(Nr,_r,Ur,jr)=>{Nr[Ur]!=null&&(_r[Ur]=simplify$1[Ur](Nr[Ur],jr))},simplifyEntities=(Nr,_r={})=>{Nr.entities&&(Nr=Nr.entities);const{entityPrefix:Ur}=_r,jr={};for(const[Gr,Wr]of Object.entries(Nr)){const Zr=Ur?`${Ur}:${Gr}`:Gr;jr[Zr]=simplifyEntity(Wr,_r)}return jr};function entities(Nr){Nr=Nr.body||Nr;const{entities:_r}=Nr;return simplifyEntities(_r)}function pagesTitles(Nr){return Nr=Nr.body||Nr,Nr.query.search.map(_r=>_r.title)}const parse=Object.freeze(Object.defineProperty({__proto__:null,entities,pagesTitles},Symbol.toStringTag,{value:"Module"}));function simplifySparqlResults(Nr,_r={}){typeof Nr=="string"&&(Nr=JSON.parse(Nr));const{vars:Ur}=Nr.head,jr=Nr.results.bindings;if(Ur.length===1&&_r.minimize){const Yr=Ur[0];return jr.map(ts=>parseValue(ts[Yr])).filter(ts=>ts!=null)}const{richVars:Gr,associatedVars:Wr,standaloneVars:Zr}=identifyVars(Ur);return jr.map(Yr=>getSimplifiedResult(Gr,Wr,Zr,Yr))}function parseValue(Nr){if(!Nr||Nr.type==="bnode")return null;const{value:_r}=Nr;if(Nr.type==="uri")return parseUri(_r);const Ur=(Nr.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return Ur==="decimal"||Ur==="integer"||Ur==="float"||Ur==="double"?parseFloat(_r):Ur==="boolean"?_r==="true":_r}function parseUri(Nr){return Nr.match(/http.*\/entity\/statement\//)?convertStatementUriToGuid(Nr):Nr.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function convertStatementUriToGuid(Nr){Nr=Nr.replace(/^https?:\/\/.*\/entity\/statement\//,"");const _r=Nr.split("-");return _r[0]+"$"+_r.slice(1).join("-")}function identifyVars(Nr){let _r=Nr.filter(Wr=>{const Zr=new RegExp(`^${Wr}[A-Z]\\w+`);return Nr.some(Yr=>Zr.test(Yr))});_r=_r.filter(Wr=>!_r.some(Zr=>Wr!==Zr&&Wr.startsWith(Zr)));const Ur=new RegExp(`^(${_r.join("|")})[A-Z]`),jr=Nr.filter(Wr=>Ur.test(Wr)),Gr=Nr.filter(Wr=>!_r.includes(Wr)&&!Ur.test(Wr));return{richVars:_r,associatedVars:jr,standaloneVars:Gr}}function getSimplifiedResult(Nr,_r,Ur,jr){const Gr={};for(const Wr of Nr){const Zr={},Yr=parseValue(jr[Wr]);Yr!=null&&(Zr.value=Yr);for(const ts of _r)ts.startsWith(Wr)&&addAssociatedValue(jr,Wr,ts,Zr);Object.keys(Zr).length>0&&(Gr[Wr]=Zr)}for(const Wr of Ur){const Zr=parseValue(jr[Wr]);Zr!=null&&(Gr[Wr]=Zr)}return Gr}function addAssociatedValue(Nr,_r,Ur,jr){let Gr=Ur.split(_r)[1];Gr=Gr[0].toLowerCase()+Gr.slice(1),Gr=Gr==="altLabel"?"aliases":Gr;const Wr=Nr[Ur];Wr!=null&&(jr[Gr]=Wr.value)}const simplify=Object.freeze(Object.defineProperty({__proto__:null,aliases:simplifyAliases,claim:simplifyClaim,claims:simplifyClaims,descriptions:simplifyDescriptions,entities:simplifyEntities,entity:simplifyEntity,form:simplifyForm,forms:simplifyForms,glosses:simplifyGlosses,labels:simplifyLabels,lemmas:simplifyLemmas,propertyClaims:simplifyPropertyClaims,propertyQualifiers:simplifyPropertyQualifiers,propertySnaks:simplifyPropertyClaims,qualifier:simplifyQualifier,qualifiers:simplifyQualifiers,references:simplifyReferences,representations:simplifyRepresentations,sense:simplifySense,senses:simplifySenses,sitelinks:simplifySitelinks,snak:simplifyClaim,snaks:simplifyClaims,sparqlResults:simplifySparqlResults},Symbol.toStringTag,{value:"Module"})),namespacePattern=/^\d+[|\d]*$/;function cirrusSearchPagesFactory(Nr){return function(Ur){rejectObsoleteInterface(arguments);for(const[rs,is]of Object.entries(Ur))if(rs.startsWith("sr")){const ss=rs.replace(/^sr/,"");if(Ur[ss]!=null)throw new Error(`${ss} and ${rs} are the same`);Ur[ss]=is}const{search:jr,haswbstatement:Gr,format:Wr="json",limit:Zr,offset:Yr,profile:ts,sort:es}=Ur;let{namespace:ns,prop:Xr}=Ur;if(!(jr||Gr))throw new Error('missing "search" or "haswbstatement" parameter');let qr="";if(jr&&(qr+=jr),Gr){const rs=Gr instanceof Array?Gr:[Gr];for(const is of rs)is[0]==="-"?qr+=` -haswbstatement:${is.slice(1)}`:qr+=` haswbstatement:${is}`}if(Zr!=null&&(typeof Zr!="number"||Zr<1))throw new Error(`invalid limit: ${Zr}`);if(Yr!=null&&(typeof Yr!="number"||Yr<0))throw new Error(`invalid offset: ${Yr}`);if(ns instanceof Array?ns=ns.join("|"):typeof ns=="number"&&(ns=ns.toString()),ns&&!namespacePattern.test(ns))throw new Error(`invalid namespace: ${ns}`);if(ts!=null&&typeof ts!="string")throw new Error(`invalid profile: ${ts} (${typeof ts}, expected string)`);if(es!=null&&typeof es!="string")throw new Error(`invalid sort: ${es} (${typeof es}, expected string)`);let _i;if(Xr!=null){if(Xr instanceof Array&&(Xr=Xr.join("|")),typeof Xr!="string")throw new Error(`invalid prop: ${Xr} (${typeof Xr}, expected string)`);_i=Xr.toString()}return Nr({action:"query",list:"search",srsearch:qr.trim(),format:Wr,srnamespace:ns,srlimit:Zr,sroffset:Yr,srqiprofile:ts,srsort:es,srprop:_i})}}function validate(Nr,_r){return function(Ur){if(!_r(Ur))throw new Error(`invalid ${Nr}: ${Ur} (type: ${typeOf(Ur)})`)}}const entityId=validate("entity id",isEntityId),propertyId=validate("property id",isPropertyId),entityPageTitle=validate("entity page title",isEntityPageTitle),revisionId=validate("revision id",isRevisionId);function typeOf(Nr){const _r=typeof Nr;if(_r==="object"){if(Nr===null)return"null";if(Nr instanceof Array)return"array";if(Nr instanceof Promise)return"promise"}return _r==="number"&&Number.isNaN(Nr)?"NaN":_r}function getEntitiesFactory(Nr){return function({ids:Ur,languages:jr,props:Gr,format:Wr="json",redirects:Zr}){if(rejectObsoleteInterface(arguments),!(Ur&&Ur.length>0))throw new Error("no id provided");Ur=forceArray(Ur),Ur.forEach(ts=>entityId(ts)),Ur.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const Yr={action:"wbgetentities",ids:Ur.join("|"),format:Wr};return Zr===!1&&(Yr.redirects="no"),jr&&(jr=forceArray(jr),Yr.languages=jr.join("|")),Gr&&Gr.length>0&&(Yr.props=forceArray(Gr).join("|")),Nr(Yr)}}function getEntitiesFromSitelinksFactory(Nr){return function({titles:Ur,sites:jr,languages:Gr,props:Wr,format:Zr="json",redirects:Yr}){if(rejectObsoleteInterface(arguments),!(Ur&&Ur.length>0))throw new Error("no titles provided");jr&&jr.length>0||(jr=["enwiki"]),Ur=forceArray(Ur),jr=forceArray(jr).map(parseSite),Wr=forceArray(Wr);const ts={action:"wbgetentities",titles:Ur.join("|"),sites:jr.join("|"),format:Zr};return jr.length===1&&Ur.length===1&&(ts.normalize=!0),Gr&&(Gr=forceArray(Gr),ts.languages=Gr.join("|")),Wr.length>0&&(ts.props=Wr.join("|")),Yr===!1&&(ts.redirects="no"),Nr(ts)}}function parseSite(Nr){return isOfType(sites,Nr)?Nr:Nr.replace(/-/g,"_")+"wiki"}function getEntityRevisionFactory(Nr,_r){return function({id:jr,revision:Gr}){return rejectObsoleteInterface(arguments),entityId(jr),revisionId(Gr),`${Nr}/${_r}/index.php?title=Special:EntityData/${jr}.json&revision=${Gr}`}}function getManyEntitiesFactory(Nr){const _r=getEntitiesFactory(Nr);return function({ids:jr,languages:Gr,props:Wr,format:Zr,redirects:Yr}){if(rejectObsoleteInterface(arguments),!(jr instanceof Array))throw new Error("getManyEntities expects an array of ids");return getChunks(jr).map(ts=>_r({ids:ts,languages:Gr,props:Wr,format:Zr,redirects:Yr}))}}function getChunks(Nr){const _r=[];for(;Nr.length>0;){const Ur=Nr.slice(0,50);Nr=Nr.slice(50),_r.push(Ur)}return _r}function sparqlQueryFactory(Nr){return function(Ur){const jr=fixedEncodeURIComponent(Ur);return`${Nr}?format=json&query=${jr}`}}const itemsOnly="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",getReverseClaimsFactory=Nr=>{const _r=sparqlQueryFactory(Nr);return function(jr){let{properties:Gr}=jr;const{values:Wr,limit:Zr,caseInsensitive:Yr,keepProperties:ts}=jr,es=Yr?caseInsensitiveValueQuery:directValueQuery,ns=ts?"":itemsOnly;Gr=forceArray(Gr),Gr.forEach(_i=>propertyId(_i));let qr=`SELECT DISTINCT ?subject WHERE { ${getValueBlock(Wr,es,Gr,ns)} }`;return Zr&&(qr+=` LIMIT ${Zr}`),_r(qr)}},getValueBlock=(Nr,_r,Ur,jr)=>(Ur=Ur.map(prefixifyProperty).join("|"),Nr instanceof Array?"{ "+Nr.map(getValueString).map(Wr=>_r(Ur,Wr,jr)).join("} UNION {")+" }":_r(Ur,getValueString(Nr),jr)),getValueString=Nr=>(isItemId(Nr)?Nr=`wd:${Nr}`:typeof Nr=="string"&&(Nr=`'${Nr}'`),Nr),directValueQuery=(Nr,_r,Ur)=>`?subject ${Nr} ${_r} .
    ${Ur}`,caseInsensitiveValueQuery=(Nr,_r,Ur)=>`?subject ${Nr} ?value .
    FILTER (lcase(?value) = ${_r.toLowerCase()})
    ${Ur}`,prefixifyProperty=Nr=>"wdt:"+Nr;function getRevisionsFactory(Nr){return function({ids:Ur,format:jr,limit:Gr,start:Wr,end:Zr,prop:Yr,user:ts,excludeuser:es,tag:ns}){rejectObsoleteInterface(arguments),Ur=forceArray(Ur),Ur.forEach(_i=>entityPageTitle(_i));const Xr=Ur.length===1,qr={action:"query",prop:"revisions"};return qr.titles=Ur.join("|"),qr.format=jr||"json",Xr&&(qr.rvlimit=Gr||"max"),Xr&&Wr&&(qr.rvstart=getEpochSeconds(Wr)),Xr&&Zr&&(qr.rvend=getEpochSeconds(Zr)),Yr?qr.rvprop=forceArray(Yr).join("|"):qr.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",qr.rvslots="*",ts&&(qr.rvuser=ts),es&&(qr.rvexcludeuser=es),ns&&(qr.rvtag=ns),Nr(qr)}}const getEpochSeconds=Nr=>typeof Nr=="number"&&Nr<earliestPointInMs?Nr:Math.trunc(new Date(Nr).getTime()/1e3),earliestPointInMs=new Date("2000-01-01").getTime(),EntityTypes=["item","property","lexeme","form","sense"],searchEntitiesFactory=Nr=>function({search:Ur,language:jr="en",uselang:Gr,limit:Wr="20",continue:Zr="0",format:Yr="json",type:ts="item"}){if(rejectObsoleteInterface(arguments),Gr=Gr||jr,!(Ur&&Ur.length>0))throw new Error("search can't be empty");if(!isOfType(EntityTypes,ts))throw new Error(`invalid type: ${ts}`);return Nr({action:"wbsearchentities",search:Ur,language:jr,limit:Wr,continue:Zr,format:Yr,uselang:Gr,type:ts})},isBrowser=typeof location<"u"&&typeof document<"u";function buildUrlFactory(Nr){return _r=>{isBrowser&&(_r=Object.assign(Object.assign({},_r),{origin:"*"}));const Ur=Object.entries(_r).filter(([,Gr])=>Gr!=null).map(([Gr,Wr])=>[Gr,String(Wr)]),jr=new URLSearchParams(Ur).toString();return Nr+"?"+jr}}const tip=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,common=Object.assign(Object.assign(Object.assign(Object.assign({simplify,parse},helpers),sitelinksHelpers),rankHelpers),timeHelpers);function WBK(Nr){if(!isPlainObject(Nr))throw new Error("invalid config");const{instance:_r,sparqlEndpoint:Ur}=Nr;let{wgScriptPath:jr="w"}=Nr;if(jr=jr.replace(/^\//,""),!(_r||Ur))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${tip}`);let Gr,Wr,Zr;if(_r){validateEndpoint("instance",_r),Wr=_r.replace(/\/$/,"").replace(`/${jr}/api.php`,""),Zr=`${Wr}/${jr}/api.php`;const ts=buildUrlFactory(Zr);Gr={searchEntities:searchEntitiesFactory(ts),cirrusSearchPages:cirrusSearchPagesFactory(ts),getEntities:getEntitiesFactory(ts),getManyEntities:getManyEntitiesFactory(ts),getRevisions:getRevisionsFactory(ts),getEntityRevision:getEntityRevisionFactory(_r,jr),getEntitiesFromSitelinks:getEntitiesFromSitelinksFactory(ts)}}else Gr={searchEntities:missingInstance("searchEntities"),cirrusSearchPages:missingInstance("cirrusSearchPages"),getEntities:missingInstance("getEntities"),getManyEntities:missingInstance("getManyEntities"),getRevisions:missingInstance("getRevisions"),getEntityRevision:missingInstance("getEntityRevision"),getEntitiesFromSitelinks:missingInstance("getEntitiesFromSitelinks")};let Yr;return Ur?(validateEndpoint("sparqlEndpoint",Ur),Yr={sparqlQuery:sparqlQueryFactory(Ur),getReverseClaims:getReverseClaimsFactory(Ur)}):Yr={sparqlQuery:missingSparqlEndpoint("sparqlQuery"),getReverseClaims:missingSparqlEndpoint("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:Wr,apiEndpoint:Zr}},common),Gr),Yr)}const validateEndpoint=(Nr,_r)=>{if(!(typeof _r=="string"&&_r.startsWith("http")))throw new Error(`invalid ${Nr}: ${_r}`)},missingConfig=Nr=>_r=>()=>{throw new Error(`${_r} requires ${Nr} to be set at initialization`)},missingSparqlEndpoint=missingConfig("a sparqlEndpoint"),missingInstance=missingConfig("an instance"),api={sparqlQuery:()=>{const Nr=WBK({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),jr=`
    SELECT ?work ?workLabel (YEAR(?inception) as ?year) ?countryLabel ?locationLabel ?iiif
    WHERE
    {
      ?work wdt:P31 wd:Q3305213.
      ?work wdt:P17 ?country.
      ?work wdt:P186 wd:Q12321255.
      ?work wdt:P571 ?inception.
      ?work wdt:P276 ?location.
      ?work wdt:P6108 ?iiif
    FILTER (?country IN ( wd:Q31, wd:Q213, wd:Q35, wd:Q142, wd:Q36, wd:Q39, wd:Q32, wd:Q40, wd:Q55 ) )
    SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en" }
    }
    ORDER BY ?year ?work ?workLabel
    LIMIT 10
    `;return Nr.sparqlQuery(jr)}};var ort_min={exports:{}};/*!
* ONNX Runtime Web v1.16.1
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(Nr,_r){module.exports=_r()})(self,()=>(()=>{var __webpack_modules__={5716:(Nr,_r,Ur)=>{_r.R=void 0;const jr=Ur(6027),Gr=Ur(1723);_r.R=new class{async init(){}async createSessionHandler(Wr,Zr){const Yr=new jr.Session(Zr);return await Yr.loadModel(Wr),new Gr.OnnxjsSessionHandler(Yr)}}},2818:(Nr,_r,Ur)=>{_r.c8=_r.rX=void 0;const jr=Ur(2235),Gr=Ur(5381),Wr=Ur(9544),Zr=Ur(6640);_r.rX=()=>{if((typeof jr.env.wasm.initTimeout!="number"||jr.env.wasm.initTimeout<0)&&(jr.env.wasm.initTimeout=0),typeof jr.env.wasm.simd!="boolean"&&(jr.env.wasm.simd=!0),typeof jr.env.wasm.proxy!="boolean"&&(jr.env.wasm.proxy=!1),typeof jr.env.wasm.numThreads!="number"||!Number.isInteger(jr.env.wasm.numThreads)||jr.env.wasm.numThreads<=0){const Yr=typeof navigator>"u"?(0,Gr.cpus)().length:navigator.hardwareConcurrency;jr.env.wasm.numThreads=Math.min(4,Math.ceil((Yr||1)/2))}},_r.c8=new class{async init(){(0,_r.rX)(),await(0,Wr.initializeWebAssemblyInstance)()}async createSessionHandler(Yr,ts){const es=new Zr.OnnxruntimeWebAssemblySessionHandler;return await es.loadModel(Yr,ts),Promise.resolve(es)}}},1057:function(Nr,_r,Ur){var jr=this&&this.__createBinding||(Object.create?function(Yr,ts,es,ns){ns===void 0&&(ns=es);var Xr=Object.getOwnPropertyDescriptor(ts,es);Xr&&!("get"in Xr?!ts.__esModule:Xr.writable||Xr.configurable)||(Xr={enumerable:!0,get:function(){return ts[es]}}),Object.defineProperty(Yr,ns,Xr)}:function(Yr,ts,es,ns){ns===void 0&&(ns=es),Yr[ns]=ts[es]}),Gr=this&&this.__exportStar||function(Yr,ts){for(var es in Yr)es==="default"||Object.prototype.hasOwnProperty.call(ts,es)||jr(ts,Yr,es)};Object.defineProperty(_r,"__esModule",{value:!0}),Gr(Ur(2235),_r);const Wr=Ur(2235),Zr=Ur(8408);{const Yr=Ur(5716).R;(0,Wr.registerBackend)("webgl",Yr,-10)}{const Yr=Ur(2818).c8;(0,Wr.registerBackend)("cpu",Yr,10),(0,Wr.registerBackend)("wasm",Yr,10),(0,Wr.registerBackend)("xnnpack",Yr,9),(0,Wr.registerBackend)("webnn",Yr,9)}Wr.env.versions.web=Zr.version},4910:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createAttributeWithCacheKey=void 0;class Ur{constructor(Gr){Object.assign(this,Gr)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(Gr=>`${this[Gr]}`).join(";")),this._cacheKey}}_r.createAttributeWithCacheKey=jr=>new Ur(jr)},6874:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.Attribute=void 0;const jr=Ur(5127),Gr=Ur(2446),Wr=Ur(9240),Zr=Ur(7273);var Yr=jr.onnxruntime.experimental.fbs;class ts{constructor(ns){if(this._attributes=new Map,ns!=null){for(const Xr of ns)Xr instanceof Gr.onnx.AttributeProto?this._attributes.set(Xr.name,[ts.getValue(Xr),ts.getType(Xr)]):Xr instanceof Yr.Attribute&&this._attributes.set(Xr.name(),[ts.getValue(Xr),ts.getType(Xr)]);if(this._attributes.size<ns.length)throw new Error("duplicated attribute names")}}set(ns,Xr,qr){this._attributes.set(ns,[qr,Xr])}delete(ns){this._attributes.delete(ns)}getFloat(ns,Xr){return this.get(ns,"float",Xr)}getInt(ns,Xr){return this.get(ns,"int",Xr)}getString(ns,Xr){return this.get(ns,"string",Xr)}getTensor(ns,Xr){return this.get(ns,"tensor",Xr)}getFloats(ns,Xr){return this.get(ns,"floats",Xr)}getInts(ns,Xr){return this.get(ns,"ints",Xr)}getStrings(ns,Xr){return this.get(ns,"strings",Xr)}getTensors(ns,Xr){return this.get(ns,"tensors",Xr)}get(ns,Xr,qr){const _i=this._attributes.get(ns);if(_i===void 0){if(qr!==void 0)return qr;throw new Error(`required attribute not found: ${ns}`)}if(_i[1]!==Xr)throw new Error(`type mismatch: expected ${Xr} but got ${_i[1]}`);return _i[0]}static getType(ns){const Xr=ns instanceof Gr.onnx.AttributeProto?ns.type:ns.type();switch(Xr){case Gr.onnx.AttributeProto.AttributeType.FLOAT:return"float";case Gr.onnx.AttributeProto.AttributeType.INT:return"int";case Gr.onnx.AttributeProto.AttributeType.STRING:return"string";case Gr.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case Gr.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case Gr.onnx.AttributeProto.AttributeType.INTS:return"ints";case Gr.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case Gr.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${Gr.onnx.AttributeProto.AttributeType[Xr]}`)}}static getValue(ns){const Xr=ns instanceof Gr.onnx.AttributeProto?ns.type:ns.type();if(Xr===Gr.onnx.AttributeProto.AttributeType.GRAPH||Xr===Gr.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const qr=this.getValueNoCheck(ns);if(Xr===Gr.onnx.AttributeProto.AttributeType.INT&&Zr.LongUtil.isLong(qr))return Zr.LongUtil.longToNumber(qr);if(Xr===Gr.onnx.AttributeProto.AttributeType.INTS){const _i=qr,rs=new Array(_i.length);for(let is=0;is<_i.length;is++){const ss=_i[is];rs[is]=Zr.LongUtil.longToNumber(ss)}return rs}if(Xr===Gr.onnx.AttributeProto.AttributeType.TENSOR)return ns instanceof Gr.onnx.AttributeProto?Wr.Tensor.fromProto(qr):Wr.Tensor.fromOrtTensor(qr);if(Xr===Gr.onnx.AttributeProto.AttributeType.TENSORS){if(ns instanceof Gr.onnx.AttributeProto)return qr.map(_i=>Wr.Tensor.fromProto(_i));if(ns instanceof Yr.Attribute)return qr.map(_i=>Wr.Tensor.fromOrtTensor(_i))}if(Xr===Gr.onnx.AttributeProto.AttributeType.STRING&&ns instanceof Gr.onnx.AttributeProto){const _i=qr;return(0,Zr.decodeUtf8String)(_i)}return Xr===Gr.onnx.AttributeProto.AttributeType.STRINGS&&ns instanceof Gr.onnx.AttributeProto?qr.map(Zr.decodeUtf8String):qr}static getValueNoCheck(ns){return ns instanceof Gr.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(ns):this.getValueNoCheckFromOrtFormat(ns)}static getValueNoCheckFromOnnxFormat(ns){switch(ns.type){case Gr.onnx.AttributeProto.AttributeType.FLOAT:return ns.f;case Gr.onnx.AttributeProto.AttributeType.INT:return ns.i;case Gr.onnx.AttributeProto.AttributeType.STRING:return ns.s;case Gr.onnx.AttributeProto.AttributeType.TENSOR:return ns.t;case Gr.onnx.AttributeProto.AttributeType.GRAPH:return ns.g;case Gr.onnx.AttributeProto.AttributeType.FLOATS:return ns.floats;case Gr.onnx.AttributeProto.AttributeType.INTS:return ns.ints;case Gr.onnx.AttributeProto.AttributeType.STRINGS:return ns.strings;case Gr.onnx.AttributeProto.AttributeType.TENSORS:return ns.tensors;case Gr.onnx.AttributeProto.AttributeType.GRAPHS:return ns.graphs;default:throw new Error(`unsupported attribute type: ${Gr.onnx.AttributeProto.AttributeType[ns.type]}`)}}static getValueNoCheckFromOrtFormat(ns){switch(ns.type()){case Yr.AttributeType.FLOAT:return ns.f();case Yr.AttributeType.INT:return ns.i();case Yr.AttributeType.STRING:return ns.s();case Yr.AttributeType.TENSOR:return ns.t();case Yr.AttributeType.GRAPH:return ns.g();case Yr.AttributeType.FLOATS:return ns.floatsArray();case Yr.AttributeType.INTS:{const Xr=[];for(let qr=0;qr<ns.intsLength();qr++)Xr.push(ns.ints(qr));return Xr}case Yr.AttributeType.STRINGS:{const Xr=[];for(let qr=0;qr<ns.stringsLength();qr++)Xr.push(ns.strings(qr));return Xr}case Yr.AttributeType.TENSORS:{const Xr=[];for(let qr=0;qr<ns.tensorsLength();qr++)Xr.push(ns.tensors(qr));return Xr}default:throw new Error(`unsupported attribute type: ${Yr.AttributeType[ns.type()]}`)}}}_r.Attribute=ts},1975:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.resolveBackend=_r.backend=void 0;const jr=Ur(4418),Gr=new Map;async function Wr(Zr){const Yr=_r.backend;if(Yr[Zr]!==void 0&&function(ts){const es=ts;return"initialize"in es&&typeof es.initialize=="function"&&"createSessionHandler"in es&&typeof es.createSessionHandler=="function"&&"dispose"in es&&typeof es.dispose=="function"}(Yr[Zr])){const ts=Yr[Zr];let es=ts.initialize();if(typeof es=="object"&&"then"in es&&(es=await es),es)return Gr.set(Zr,ts),ts}}_r.backend={webgl:new jr.WebGLBackend},_r.resolveBackend=async function Zr(Yr){if(!Yr)return Zr(["webgl"]);{const ts=typeof Yr=="string"?[Yr]:Yr;for(const es of ts){const ns=Gr.get(es);if(ns)return ns;const Xr=await Wr(es);if(Xr)return Xr}}throw new Error("no available backend to use")}},4418:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.WebGLBackend=void 0;const jr=Ur(2235),Gr=Ur(1315),Wr=Ur(2171),Zr=Ur(3389);_r.WebGLBackend=class{get contextId(){return jr.env.webgl.contextId}set contextId(Yr){jr.env.webgl.contextId=Yr}get matmulMaxBatchSize(){return jr.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(Yr){jr.env.webgl.matmulMaxBatchSize=Yr}get textureCacheMode(){return jr.env.webgl.textureCacheMode}set textureCacheMode(Yr){jr.env.webgl.textureCacheMode=Yr}get pack(){return jr.env.webgl.pack}set pack(Yr){jr.env.webgl.pack=Yr}get async(){return jr.env.webgl.async}set async(Yr){jr.env.webgl.async=Yr}initialize(){try{return this.glContext=(0,Zr.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),Gr.Logger.setWithEnv(jr.env),Gr.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(Yr){return Gr.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${Yr}`),!1}}createSessionHandler(Yr){return new Wr.WebGLSessionHandler(this,Yr)}dispose(){this.glContext.dispose()}}},6859:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.CoordsGlslLib=void 0;const jr=Ur(7273),Gr=Ur(1997),Wr=Ur(6757),Zr=Ur(7618),Yr=Ur(432);class ts extends Gr.GlslLib{constructor(ns){super(ns)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new Gr.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new Gr.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const ns=this.context.outputTextureLayout;return ns.isPacked?this.getPackedOutputSamplingSnippet(ns):this.getUnpackedOutputSamplingSnippet(ns)}getPackedOutputSamplingSnippet(ns){const Xr=ns.unpackedShape,qr=[ns.width,ns.height],_i={},rs="getOutputCoords";switch(Xr.length){case 0:_i[rs]=this.getOutputScalarCoords();break;case 1:_i[rs]=this.getOutputPacked1DCoords(Xr,qr);break;case 2:_i[rs]=this.getOutputPacked2DCoords(Xr,qr);break;case 3:_i[rs]=this.getOutputPacked3DCoords(Xr,qr);break;default:_i[rs]=this.getOutputPackedNDCoords(Xr,qr)}const is=`
      void setOutput(vec4 val) {
        ${(0,Wr.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return _i.floatTextureSetRGBA=new Gr.GlslLibRoutine(is),_i}getUnpackedOutputSamplingSnippet(ns){const Xr=ns.unpackedShape,qr=[ns.width,ns.height],_i={},rs="getOutputCoords";switch(Xr.length){case 0:_i[rs]=this.getOutputScalarCoords();break;case 1:_i[rs]=this.getOutputUnpacked1DCoords(Xr,qr);break;case 2:_i[rs]=this.getOutputUnpacked2DCoords(Xr,qr);break;case 3:_i[rs]=this.getOutputUnpacked3DCoords(Xr,qr);break;case 4:_i[rs]=this.getOutputUnpacked4DCoords(Xr,qr);break;case 5:_i[rs]=this.getOutputUnpacked5DCoords(Xr,qr);break;case 6:_i[rs]=this.getOutputUnpacked6DCoords(Xr,qr);break;default:throw new Error(`Unsupported output dimensionality: ${Xr.length}`)}const is=`
        void setOutput(float val) {
          ${(0,Wr.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return _i.floatTextureSetR=new Gr.GlslLibRoutine(is),_i}getOutputScalarCoords(){return new Gr.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(ns,Xr){const qr=Xr;let _i="";return qr[0]===1?(_i=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${qr[1]}.0);
          }
        `,new Gr.GlslLibRoutine(_i)):qr[1]===1?(_i=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${qr[0]}.0);
          }
        `,new Gr.GlslLibRoutine(_i)):(_i=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${qr[0]}, ${qr[1]}));
          return 2 * (resTexRC.y * ${qr[0]} + resTexRC.x);
        }
      `,new Gr.GlslLibRoutine(_i))}getOutputPacked2DCoords(ns,Xr){let qr="";if(jr.ArrayUtil.arraysEqual(ns,Xr))return qr=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${Xr[0]}, ${Xr[1]}));
        }
      `,new Gr.GlslLibRoutine(qr);const _i=Xr,rs=Math.ceil(ns[1]/2);return qr=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${_i[0]}, ${_i[1]}));

          int index = resTexRC.y * ${_i[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${rs}) * 2;
          int c = 2 * (index / ${rs});

          return ivec2(r, c);
        }
      `,new Gr.GlslLibRoutine(qr)}getOutputPacked3DCoords(ns,Xr){const qr=[Xr[0],Xr[1]],_i=Math.ceil(ns[2]/2),rs=_i*Math.ceil(ns[1]/2),is=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${qr[0]}, ${qr[1]}));
          int index = resTexRC.y * ${qr[0]} + resTexRC.x;

          int b = index / ${rs};
          index -= b * ${rs};

          // reverse r and c order for packed texture
          int r = imod(index, ${_i}) * 2;
          int c = 2 * (index / ${_i});

          return ivec3(b, r, c);
        }
      `;return new Gr.GlslLibRoutine(is)}getOutputPackedNDCoords(ns,Xr){const qr=[Xr[0],Xr[1]],_i=Math.ceil(ns[ns.length-1]/2),rs=_i*Math.ceil(ns[ns.length-2]/2);let is=rs,ss="",os="b, r, c";for(let cs=2;cs<ns.length-1;cs++)is*=ns[ns.length-cs-1],ss=`
      int b${cs} = index / ${is};
      index -= b${cs} * ${is};
    `+ss,os=`b${cs}, `+os;const ls=`
      ivec${ns.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${qr[0]}, ${qr[1]}));
        int index = resTexRC.y * ${qr[0]} + resTexRC.x;

        ${ss}

        int b = index / ${rs};
        index -= b * ${rs};

        // reverse r and c order for packed texture
        int r = imod(index, ${_i}) * 2;
        int c = 2 * (index / ${_i});

        return ivec${ns.length}(${os});
      }
    `;return new Gr.GlslLibRoutine(ls)}getOutputUnpacked1DCoords(ns,Xr){const qr=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Xr[0]}, ${Xr[1]}));
          return resTexRC.y * ${Xr[0]} + resTexRC.x;
        }
      `;return new Gr.GlslLibRoutine(qr)}getOutputUnpacked2DCoords(ns,Xr){const qr=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Xr[0]}, ${Xr[1]}));
          int index = resTexRC.y * ${Xr[0]} + resTexRC.x;
          int r = index / ${ns[1]};
          int c = index - r * ${ns[1]};
          return ivec2(r, c);
        }
      `;return new Gr.GlslLibRoutine(qr)}getOutputUnpacked3DCoords(ns,Xr){let qr="";const _i=ns.length;let rs=null;_i<2&&(rs=[]),rs=new Array(_i-1),rs[_i-2]=ns[_i-1];for(let os=_i-3;os>=0;--os)rs[os]=rs[os+1]*ns[os+1];const is=["r","c","d"],ss=rs.map((os,ls)=>`int ${is[ls]} = index / ${os}; ${ls===rs.length-1?`int ${is[ls+1]} = index - ${is[ls]} * ${os}`:`index -= ${is[ls]} * ${os}`};`).join("");return qr=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Xr[0]}, ${Xr[1]}));
          int index = resTexRC.y * ${Xr[0]} + resTexRC.x;
          ${ss}
          return ivec3(r, c, d);
        }
      `,new Gr.GlslLibRoutine(qr)}getOutputUnpacked4DCoords(ns,Xr){let qr="";const _i=ns.length;let rs=null;_i<2&&(rs=[]),rs=new Array(_i-1),rs[_i-2]=ns[_i-1];for(let os=_i-3;os>=0;--os)rs[os]=rs[os+1]*ns[os+1];const is=["r","c","d","d2"],ss=rs.map((os,ls)=>`int ${is[ls]} = index / ${os}; ${ls===rs.length-1?`int ${is[ls+1]} = index - ${is[ls]} * ${os}`:`index -= ${is[ls]} * ${os}`};`).join("");return qr=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Xr[0]}, ${Xr[1]}));
          int index = resTexRC.y * ${Xr[0]} + resTexRC.x;
          ${ss}
          return ivec4(r, c, d, d2);
        }
      `,new Gr.GlslLibRoutine(qr)}getOutputUnpacked5DCoords(ns,Xr){let qr="";const _i=ns.length;let rs=null;_i<2&&(rs=[]),rs=new Array(_i-1),rs[_i-2]=ns[_i-1];for(let os=_i-3;os>=0;--os)rs[os]=rs[os+1]*ns[os+1];const is=["r","c","d","d2","d3"],ss=rs.map((os,ls)=>`int ${is[ls]} = index / ${os}; ${ls===rs.length-1?`int ${is[ls+1]} = index - ${is[ls]} * ${os}`:`index -= ${is[ls]} * ${os}`};`).join("");return qr=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Xr[0]}, ${Xr[1]}));
          int index = resTexRC.y * ${Xr[0]} + resTexRC.x;
          ${ss}
          return ivec5(r, c, d, d2, d3);
        }
      `,new Gr.GlslLibRoutine(qr)}getOutputUnpacked6DCoords(ns,Xr){let qr="";const _i=ns.length;let rs=null;_i<2&&(rs=[]),rs=new Array(_i-1),rs[_i-2]=ns[_i-1];for(let os=_i-3;os>=0;--os)rs[os]=rs[os+1]*ns[os+1];const is=["r","c","d","d2","d3","d4"],ss=rs.map((os,ls)=>`int ${is[ls]} = index / ${os}; ${ls===rs.length-1?`int ${is[ls+1]} = index - ${is[ls]} * ${os}`:`index -= ${is[ls]} * ${os}`};`).join("");return qr=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${Xr[0]}, ${Xr[1]}));
         int index = resTexRC.y * ${Xr[0]} + resTexRC.x;
         ${ss}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new Gr.GlslLibRoutine(qr)}getCommonUtilFuncs(){const ns={};let Xr="uvFromFlat";ns[Xr]=new Gr.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),Xr="packedUVfrom1D",ns[Xr]=new Gr.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Xr="packedUVfrom2D",ns[Xr]=new Gr.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Xr="packedUVfrom3D",ns[Xr]=new Gr.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Xr="sampleTexture";const qr=(0,Wr.getGlsl)(this.context.glContext.version);return ns[Xr]=new Gr.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${qr.texture2D}(textureSampler, uv).r;
        }`),ns}getInputsSamplingSnippets(){const ns={},Xr=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((qr,_i)=>{const rs=this.context.inputTextureLayouts[_i],is=(0,Yr.generateShaderFuncNameFromInputSamplerName)(qr);rs.isPacked?ns[is]=this.getPackedSamplerFromInput(is,qr,rs):ns[is]=this.getUnpackedSamplerFromInput(is,qr,rs);const ss=(0,Yr.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(qr);rs.unpackedShape.length<=Xr.unpackedShape.length&&(rs.isPacked?ns[ss]=this.getPackedSamplerAtOutputCoords(ss,rs,Xr,qr):ns[ss]=this.getUnpackedSamplerAtOutputCoords(ss,rs,Xr,qr))}),ns}getPackedSamplerAtOutputCoords(ns,Xr,qr,_i){const rs=Xr.unpackedShape,is=qr.unpackedShape,ss=_i,os=(0,Yr.generateShaderFuncNameFromInputSamplerName)(ss),ls=rs.length,cs=is.length,ds=jr.BroadcastUtil.getBroadcastDims(rs,is),fs=(0,Yr.getCoordsDataType)(cs),ms=cs-ls;let ps;const ys=(0,Yr.getGlChannels)();ps=ls===0?"":cs<2&&ds.length>=1?"coords = 0;":ds.map(Bs=>`coords.${ys[Bs+ms]} = 0;`).join(`
`);let ws="";ws=cs<2&&ls>0?"coords":rs.map((Bs,vs)=>`coords.${ys[vs+ms]}`).join(", ");let xs="return outputValue;";const Es=jr.ShapeUtil.size(rs)===1,Rs=jr.ShapeUtil.size(is)===1;if(ls!==1||Es||Rs){if(Es&&!Rs)xs=cs===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(ds.length){const Bs=ls-2,vs=ls-1;ds.indexOf(Bs)>-1&&ds.indexOf(vs)>-1?xs="return vec4(outputValue.x);":ds.indexOf(Bs)>-1?xs="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":ds.indexOf(vs)>-1&&(xs="return vec4(outputValue.xx, outputValue.zz);")}}else xs=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const _s=`
      vec4 ${ns}() {
        ${fs} coords = getOutputCoords();
        
        int lastDim = coords.${ys[cs-1]};
        coords.${ys[cs-1]} = coords.${ys[cs-2]};
        coords.${ys[cs-2]} = lastDim;
      
        ${ps}
        vec4 outputValue = ${os}(${ws});
        ${xs}
      }
    `;return new Gr.GlslLibRoutine(_s,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(ns,Xr,qr,_i){const rs=[qr.width,qr.height],is=[Xr.width,Xr.height],ss=Xr.unpackedShape.length,os=qr.unpackedShape.length,ls=Xr.unpackedShape,cs=qr.unpackedShape,ds=(0,Yr.generateShaderFuncNameFromInputSamplerName)(_i);if(ss===os&&jr.ArrayUtil.arraysEqual(is,rs)){const Rs=`
          float ${ns}() {
            return sampleTexture(${_i}, TexCoords);
          }
        `;return new Gr.GlslLibRoutine(Rs,["coordinates.sampleTexture"])}const fs=(0,Yr.getCoordsDataType)(os),ms=jr.BroadcastUtil.getBroadcastDims(ls,cs),ps=os-ss;let ys;const ws=(0,Yr.getGlChannels)();ys=ss===0?"":os<2&&ms.length>=1?"coords = 0;":ms.map(Rs=>`coords.${ws[Rs+ps]} = 0;`).join(`
`);let xs="";xs=os<2&&ss>0?"coords":Xr.unpackedShape.map((Rs,_s)=>`coords.${ws[_s+ps]}`).join(", ");const Es=`
        float ${ns}() {
          ${fs} coords = getOutputCoords();
          ${ys}
          return ${ds}(${xs});
        }
      `;return new Gr.GlslLibRoutine(Es,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(ns,Xr,qr){switch(qr.unpackedShape.length){case 0:return this.getPackedSamplerScalar(ns,Xr);case 1:return this.getPackedSampler1D(ns,Xr,qr);case 2:return this.getPackedSampler2D(ns,Xr,qr);case 3:return this.getPackedSampler3D(ns,Xr,qr);default:return this.getPackedSamplerND(ns,Xr,qr)}}getUnpackedSamplerFromInput(ns,Xr,qr){const _i=qr.unpackedShape;switch(_i.length){case 0:return this.getUnpackedSamplerScalar(ns,Xr,qr);case 1:return this.getUnpackedSampler1D(ns,Xr,qr);case 2:return this.getUnpackedSampler2D(ns,Xr,qr);case 3:return this.getUnpackedSampler3D(ns,Xr,qr);case 4:return this.getUnpackedSampler4D(ns,Xr,qr);case 5:return this.getUnpackedSampler5D(ns,Xr,qr);case 6:return this.getUnpackedSampler6D(ns,Xr,qr);default:throw new Error(`Unsupported dimension ${_i.length}-D`)}}getPackedSamplerScalar(ns,Xr){const qr=`
          vec4 ${ns}() {
            return ${(0,Wr.getGlsl)(this.context.glContext.version).texture2D}(${Xr}, halfCR);
          }
        `;return new Gr.GlslLibRoutine(qr)}getPackedSampler1D(ns,Xr,qr){const _i=[qr.width,qr.height],rs=[_i[1],_i[0]],is=(0,Wr.getGlsl)(this.context.glContext.version),ss=`vec4 ${ns}(int index) {
      vec2 uv = packedUVfrom1D(
      ${rs[0]}, ${rs[1]}, index);
      return ${is.texture2D}(${Xr}, uv);
    }`;return new Gr.GlslLibRoutine(ss,["coordinates.packedUVfrom1D"])}getPackedSampler2D(ns,Xr,qr){const _i=qr.unpackedShape,rs=[qr.width,qr.height],is=(0,Wr.getGlsl)(this.context.glContext.version),ss=rs[0],os=rs[1];if(rs!=null&&jr.ArrayUtil.arraysEqual(_i,rs)){const fs=`vec4 ${ns}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${os}.0, ${ss}.0);
        return ${is.texture2D}(${Xr}, uv);
      }`;return new Gr.GlslLibRoutine(fs)}const ls=rs,cs=Math.ceil(_i[1]/2),ds=`vec4 ${ns}(int row, int col) {
      vec2 uv = packedUVfrom2D(${ls[1]}, ${ls[0]}, ${cs}, row, col);
      return ${is.texture2D}(${Xr}, uv);
    }`;return new Gr.GlslLibRoutine(ds,["coordinates.packedUVfrom2D"])}getPackedSampler3D(ns,Xr,qr){const _i=qr.unpackedShape,rs=[qr.width,qr.height],is=[rs[0],rs[1]],ss=(0,Wr.getGlsl)(this.context.glContext.version);if(_i[0]===1){const fs=_i.slice(1),ms=[1,2],ps=(0,Yr.squeezeInputShape)(_i,fs),ys=["b","row","col"],ws=JSON.parse(JSON.stringify(qr));ws.unpackedShape=ps;const xs=this.getPackedSamplerFromInput(ns,Xr,ws),Es=`${xs.routineBody}
      vec4 ${ns}(int b, int row, int col) {
        return ${ns}(${(0,Yr.getSqueezedParams)(ys,ms)});
      } `;return new Gr.GlslLibRoutine(Es,xs.dependencies)}const os=is[0],ls=is[1],cs=Math.ceil(_i[2]/2),ds=`vec4 ${ns}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${ls}, ${os}, ${cs*Math.ceil(_i[1]/2)}, ${cs}, b, row, col);
      return ${ss.texture2D}(${Xr}, uv);}`;return new Gr.GlslLibRoutine(ds,["coordinates.packedUVfrom3D"])}getPackedSamplerND(ns,Xr,qr){const _i=qr.unpackedShape,rs=_i.length,is=[qr.width,qr.height],ss=(0,Wr.getGlsl)(this.context.glContext.version),os=[is[0],is[1]],ls=os[1],cs=os[0],ds=Math.ceil(_i[rs-1]/2);let fs=ds*Math.ceil(_i[rs-2]/2),ms="int b, int row, int col",ps=`b * ${fs} + (row / 2) * ${ds} + (col / 2)`;for(let ws=2;ws<rs-1;ws++)ms=`int b${ws}, `+ms,fs*=_i[rs-ws-1],ps=`b${ws} * ${fs} + `+ps;const ys=`vec4 ${ns}(${ms}) {
      int index = ${ps};
      int texR = index / ${cs};
      int texC = index - texR * ${cs};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${cs}, ${ls});
      return ${ss.texture2D}(${Xr}, uv);
    }`;return new Gr.GlslLibRoutine(ys)}getUnpackedSamplerScalar(ns,Xr,qr){const[_i,rs]=[qr.width,qr.height];if(_i===1&&rs===1){const ss=`
          float ${ns}() {
            return sampleTexture(${Xr}, halfCR);
          }
        `;return new Gr.GlslLibRoutine(ss,["coordinates.sampleTexture"])}const is=`
        float ${ns}() {
          int offset_${Xr} = coordsToOffset(TexCoords, ${_i}, ${rs});
          vec2 uv = uvFromFlat(${_i}, ${rs}, offset_${Xr});
          return sampleTexture(${Xr}, uv);
        }
      `;return new Gr.GlslLibRoutine(is,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(ns,Xr,qr){const _i=qr.width,rs=qr.height;if(rs===1&&_i===1){const ss=`
        float ${ns}(int index) {
          return sampleTexture(${Xr}, halfCR);
        }
      `;return new Gr.GlslLibRoutine(ss,["coordinates.sampleTexture"])}if(rs===1){const ss=`
          float ${ns}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${_i}.0, 0.5);
            return sampleTexture(${Xr}, uv);
          }
        `;return new Gr.GlslLibRoutine(ss,["coordinates.sampleTexture"])}if(_i===1){const ss=`
          float ${ns}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${rs}.0);
            return sampleTexture(${Xr}, uv);
          }
        `;return new Gr.GlslLibRoutine(ss,["coordinates.sampleTexture"])}const is=`
        float ${ns}(int index) {
          vec2 uv = uvFromFlat(${_i}, ${rs}, index);
          return sampleTexture(${Xr}, uv);
        }
      `;return new Gr.GlslLibRoutine(is,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(ns,Xr,qr){const _i=qr.unpackedShape,rs=[qr.height,qr.width];if(rs!=null&&jr.ArrayUtil.arraysEqual(_i,rs)){const fs=`
          float ${ns}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${rs[1]}.0, ${rs[0]}.0);
            return sampleTexture(${Xr}, uv);
          }
        `;return new Gr.GlslLibRoutine(fs,["coordinates.sampleTexture"])}const{newShape:is,keptDims:ss}=(0,Zr.squeezeShape)(_i),os=is;if(os.length<_i.length){const fs=(0,Yr.squeezeInputShape)(_i,os),ms=JSON.parse(JSON.stringify(qr));ms.unpackedShape=fs;const ps=["col","row"],ys=`
          ${this.getUnpackedSamplerFromInput(ns,Xr,ms).routineBody}
          float ${ns}(int row, int col) {
            return ${ns}(${(0,Yr.getSqueezedParams)(ps,ss)});
          }
        `;return new Gr.GlslLibRoutine(ys,["coordinates.sampleTexture"])}const ls=rs[1],cs=rs[0];if(cs===1){const fs=`
          float ${ns}(int row, int col) {
            int offset_${Xr} = coordsToOffset(TexCoords, ${ls}, ${cs});
            float index = dot(vec3(row, col, offset_${Xr}), vec3(${_i[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${ls}.0);
            return sampleTexture(${Xr}, uv);
          }
        `;return new Gr.GlslLibRoutine(fs,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(ls===1){const fs=`
          float ${ns}(int row, int col) {
            int offset_${Xr} = coordsToOffset(TexCoords, ${ls}, ${cs});
            float index = dot(vec3(row, col, offset_${Xr}), vec3(${_i[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${cs}.0, 0.5);
            return sampleTexture(${Xr}, uv);
          }
        `;return new Gr.GlslLibRoutine(fs,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const ds=`
        float ${ns}(int row, int col) {
          int index = col * ${_i[1]} + row;
          vec2 uv = uvFromFlat(${ls}, ${cs}, index);
          return sampleTexture(${Xr}, uv);
        }
      `;return new Gr.GlslLibRoutine(ds,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(ns,Xr,qr){const _i=qr.unpackedShape,rs=_i[1]*_i[2],is=_i[2],{newShape:ss,keptDims:os}=(0,Zr.squeezeShape)(_i),ls=ss;if(ls.length<_i.length){const ds=(0,Yr.squeezeInputShape)(_i,ls),fs=["batch","col","row"],ms=JSON.parse(JSON.stringify(qr));ms.unpackedShape=ds;const ps=this.getUnpackedSamplerFromInput(ns,Xr,ms),ys=os.reverse(),ws=`
          ${ps.routineBody}
          float ${ns}(int batch, int row, int col) {
            return ${ns}(${(0,Yr.getSqueezedParams)(fs,ys)});
          }
        `;return new Gr.GlslLibRoutine(ws,ps.dependencies)}const cs=`
          float ${ns}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${rs} + col * ${is} + row;
            vec2 uv = uvFromFlat(${qr.width}, ${qr.height}, index);
            return sampleTexture(${Xr}, uv);
          }
      `;return new Gr.GlslLibRoutine(cs,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(ns,Xr,qr){const _i=qr.unpackedShape,rs=_i[3],is=_i[2]*rs,ss=`
        float ${ns}(int row, int col, int depth, int depth2) {
          int index = row * ${_i[1]*is} + col * ${is} +
              depth2 * ${rs} + depth;
          vec2 uv = uvFromFlat(${qr.width}, ${qr.height}, index);
          return sampleTexture(${Xr}, uv);
        }
      `;return new Gr.GlslLibRoutine(ss,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(ns,Xr,qr){const _i=qr.unpackedShape,rs=_i[4],is=_i[3]*rs,ss=_i[2]*is,os=_i[1]*ss,{newShape:ls,keptDims:cs}=(0,Zr.squeezeShape)(_i);if(ls.length<_i.length){const fs=(0,Yr.squeezeInputShape)(_i,ls),ms=["row","col","depth","depth2","depth3"],ps=JSON.parse(JSON.stringify(qr));ps.unpackedShape=fs;const ys=`
          ${this.getUnpackedSamplerFromInput(ns,Xr,ps).routineBody}
          float ${ns}(int row, int col, int depth, int depth2, int depth3) {
            return ${ns}(${(0,Yr.getSqueezedParams)(ms,cs)});
          }
        `;return new Gr.GlslLibRoutine(ys,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const ds=`
        float ${ns}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${os} + col * ${ss} + depth * ${is} +
          depth3 * ${rs} + depth2;
          vec2 uv = uvFromFlat(${qr.width}, ${qr.height}, index);
          return sampleTexture(${Xr}, uv);
        }
      `;return new Gr.GlslLibRoutine(ds,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(ns,Xr,qr){const _i=qr.unpackedShape,rs=_i[5],is=_i[4]*rs,ss=_i[3]*is,os=_i[2]*ss,ls=_i[1]*os,{newShape:cs,keptDims:ds}=(0,Zr.squeezeShape)(_i);if(cs.length<_i.length){const ms=(0,Yr.squeezeInputShape)(_i,cs),ps=["row","col","depth","depth2","depth3","depth4"],ys=JSON.parse(JSON.stringify(qr));ys.unpackedShape=ms;const ws=`
            ${this.getUnpackedSamplerFromInput(ns,Xr,ys).routineBody}
            float ${ns}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${ns}(${(0,Yr.getSqueezedParams)(ps,ds)});
            }
          `;return new Gr.GlslLibRoutine(ws,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const fs=`
          float ${ns}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${ls} + col * ${os} + depth * ${ss} +
            depth2 * ${is} + depth3 * ${rs} + depth4;
            vec2 uv = uvFromFlat(${qr.width}, ${qr.height}, index);
            return sampleTexture(${Xr}, uv);
          }
        `;return new Gr.GlslLibRoutine(fs,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const ns=this.context.outputTextureLayout,Xr=ns.shape.length,qr=ns.strides,_i=ns.width,rs=ns.height,is=[];for(let os=0;os<Xr-1;++os)is.push(`
        c[${os}] = offset / ${qr[os]};`),is.push(`
        offset -= c[${os}] * ${qr[os]};`);is.push(`
        c[${Xr-1}] = offset;`);const ss=`
      void toVec(vec2 texCoords, out int c[${Xr}]) {
        int offset = coordsToOffset(texCoords, ${_i}, ${rs});
        ${is.join("")}
      }
      void toVec(int offset, out int c[${Xr}]) {
        ${is.join("")}
      }
    `;return{toVec:new Gr.GlslLibRoutine(ss,["coordinates.coordsToOffset"])}}valueFrom(){const ns={};return this.context.programInfo.inputNames.forEach((Xr,qr)=>{const _i=this.context.inputTextureLayouts[qr],rs=(_i.unpackedShape.length>0?_i.unpackedShape:_i.shape).length;let is=`_${Xr}`;ns[is]=new Gr.GlslLibRoutine(this.getValueFromSingle(Xr,rs,_i.width,_i.height,!1),[`shapeUtils.indicesToOffset${is}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),is+="_T",ns[is]=new Gr.GlslLibRoutine(this.getValueFromSingle(Xr,rs,_i.width,_i.height,!0),[`shapeUtils.indicesToOffset${is}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),ns}getValueFromSingle(ns,Xr,qr,_i,rs){let is=`_${ns}`;return rs&&(is+="_T"),`
        float ${is}(int m[${Xr}]) {
          int offset = indicesToOffset${is}(m);
          vec2 coords = offsetToCoords(offset, ${qr}, ${_i});
          float value = getColorAsFloat(${(0,Wr.getGlsl)(this.context.glContext.version).texture2D}(${ns}, coords));
          return value;
        }
        `}getPackedValueFrom(ns,Xr,qr,_i,rs){let is=`_${ns}_Pack`;return rs&&(is+="_T"),`
        vec4 ${is}(int m[${Xr}]) {
          int offset = indicesToOffset_${ns}(m);
          vec2 coords = offsetToCoords(offset, ${qr}, ${_i});
          return ${(0,Wr.getGlsl)(this.context.glContext.version).texture2D}(${ns}, coords);
        }
        `}}_r.CoordsGlslLib=ts},1997:(Nr,_r)=>{var Ur;Object.defineProperty(_r,"__esModule",{value:!0}),_r.TopologicalSortGlslRoutines=_r.GlslLibRoutineNode=_r.GlslLibRoutine=_r.GlslLib=_r.GlslContext=_r.FunctionType=void 0,(Ur=_r.FunctionType||(_r.FunctionType={}))[Ur.ValueBased=0]="ValueBased",Ur[Ur.Positional=1]="Positional",_r.GlslContext=class{constructor(jr,Gr,Wr,Zr){this.glContext=jr,this.programInfo=Gr,this.inputTextureLayouts=Wr,this.outputTextureLayout=Zr}},_r.GlslLib=class{constructor(jr){this.context=jr}},_r.GlslLibRoutine=class{constructor(jr,Gr){this.routineBody=jr,this.dependencies=Gr}},_r.GlslLibRoutineNode=class{constructor(jr,Gr,Wr){this.name=jr,this.dependencies=Wr||[],Gr&&(this.routineBody=Gr)}addDependency(jr){jr&&this.dependencies.push(jr)}},_r.TopologicalSortGlslRoutines=class{static returnOrderedNodes(jr){if(!jr||jr.length===0)return[];if(jr.length===1)return jr;const Gr=new Set,Wr=new Set,Zr=new Array;return this.createOrderedNodes(jr,Gr,Wr,Zr),Zr}static createOrderedNodes(jr,Gr,Wr,Zr){for(let Yr=0;Yr<jr.length;++Yr)this.dfsTraverse(jr[Yr],Gr,Wr,Zr)}static dfsTraverse(jr,Gr,Wr,Zr){if(!jr||Wr.has(jr.name))return;if(Gr.has(jr.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");Gr.add(jr.name);const Yr=jr.dependencies;if(Yr&&Yr.length>0)for(let ts=0;ts<Yr.length;++ts)this.dfsTraverse(Yr[ts],Gr,Wr,Zr);Zr.push(jr),Wr.add(jr.name),Gr.delete(jr.name)}}},1371:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.EncodingGlslLib=void 0;const jr=Ur(1997);class Gr extends jr.GlslLib{constructor(Zr){super(Zr)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new jr.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new jr.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const Zr=Gr.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new jr.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${Zr}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const Zr=Gr.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new jr.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${Zr}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const Zr=new ArrayBuffer(4),Yr=new Uint32Array(Zr),ts=new Uint8Array(Zr);if(Yr[0]=3735928559,ts[0]===239)return!0;if(ts[0]===222)return!1;throw new Error("unknown endianness")}}_r.EncodingGlslLib=Gr},2691:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.FragColorGlslLib=void 0;const jr=Ur(1997),Gr=Ur(6757);class Wr extends jr.GlslLib{constructor(Yr){super(Yr)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const Yr=(0,Gr.getGlsl)(this.context.glContext.version);return{setFragColor:new jr.GlslLibRoutine(`
        void setFragColor(float value) {
            ${Yr.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new jr.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}_r.FragColorGlslLib=Wr},3878:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.replaceInlines=void 0;const Ur=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;_r.replaceInlines=function(jr){const Gr={};let Wr;for(;(Wr=Ur.exec(jr))!==null;){const Zr=Wr[3].split(",").map(Yr=>{const ts=Yr.trim().split(" ");return ts&&ts.length===2?{type:ts[0],name:ts[1]}:null}).filter(Yr=>Yr!==null);Gr[Wr[2]]={params:Zr,body:Wr[4]}}for(const Zr in Gr){const Yr="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",Zr),ts=new RegExp(Yr,"gm");for(;(Wr=ts.exec(jr))!==null;){const es=Wr[1],ns=Wr[2],Xr=Wr[3].split(","),qr=es?`${es} ${ns};`:"";let _i=Gr[Zr].body,rs="";Gr[Zr].params.forEach((ss,os)=>{ss&&(rs+=`${ss.type} ${ss.name} = ${Xr[os]};
`)}),_i=`${rs}
 ${_i}`,_i=_i.replace("return",`${ns} = `);const is=`
      ${qr}
      {
        ${_i}
      }
      `;jr=jr.replace(Wr[0],is)}}return jr.replace(Ur,"")}},8897:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.GlslPreprocessor=void 0;const jr=Ur(1997),Gr=Ur(3878),Wr=Ur(1248),Zr=Ur(6757);_r.GlslPreprocessor=class{constructor(Yr,ts,es,ns){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new jr.GlslContext(Yr,ts,es,ns),Object.keys(Wr.glslRegistry).forEach(qr=>{const _i=new Wr.glslRegistry[qr](this.context);this.libs[qr]=_i});const Xr=this.glslLibRoutineDependencyGraph;for(const qr in this.libs){const _i=this.libs[qr].getFunctions();for(const rs in _i){const is=qr+"."+rs;let ss;Xr[is]?(ss=Xr[is],ss.routineBody=_i[rs].routineBody):(ss=new jr.GlslLibRoutineNode(is,_i[rs].routineBody),Xr[is]=ss);const os=_i[rs].dependencies;if(os)for(let ls=0;ls<os.length;++ls)if(Xr[os[ls]])ss.addDependency(Xr[os[ls]]);else{const cs=new jr.GlslLibRoutineNode(os[ls]);Xr[os[ls]]=cs,ss.addDependency(cs)}}}}preprocess(){const Yr=this.context.programInfo;let ts=Yr.shaderSource;return this.context.programInfo.hasMain||(ts=`${ts}
      ${(0,Zr.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),ts=(0,Gr.replaceInlines)(ts),`${(0,Zr.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(Yr.inputNames,Yr.variables)}
    ${this.getImports(ts)}
    ${ts}`}getImports(Yr){const ts=this.selectGlslLibRoutinesToBeIncluded(Yr);if(ts.length===0)return"";let es="";for(let ns=0;ns<ts.length;++ns){if(!ts[ns].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${ts[ns].name}`);es+=ts[ns].routineBody+`
`}return es}selectGlslLibRoutinesToBeIncluded(Yr){const ts=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(es=>{const ns=es.split(".")[1];Yr.indexOf(ns)!==-1&&ts.push(this.glslLibRoutineDependencyGraph[es])}),jr.TopologicalSortGlslRoutines.returnOrderedNodes(ts)}getUniforms(Yr,ts){const es=[];if(Yr)for(const ns of Yr)es.push(`uniform sampler2D ${ns};`);if(ts)for(const ns of ts)es.push(`uniform ${ns.type} ${ns.name}${ns.arrayLength?`[${ns.arrayLength}]`:""};`);return es.join(`
`)}}},1248:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.glslRegistry=void 0;const jr=Ur(6859),Gr=Ur(1371),Wr=Ur(2691),Zr=Ur(9183),Yr=Ur(9314);_r.glslRegistry={encoding:Gr.EncodingGlslLib,fragcolor:Wr.FragColorGlslLib,vec:Yr.VecGlslLib,shapeUtils:Zr.ShapeUtilsGlslLib,coordinates:jr.CoordsGlslLib}},9183:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.ShapeUtilsGlslLib=void 0;const jr=Ur(1997);class Gr extends jr.GlslLib{constructor(Zr){super(Zr)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const Zr=this.context.outputTextureLayout.shape.length,Yr={};return this.context.programInfo.inputNames.forEach((ts,es)=>{const ns=this.context.inputTextureLayouts[es].unpackedShape;if(ns.length<=Zr){const Xr=ns.length,qr=Zr-Xr,_i=`bcastIndices_${ts}`;let rs="";for(let ss=0;ss<Xr;++ss)rs+=`
          realIndices[${ss}] = int( mod(float(bcastedIndices[${qr+ss}]), ${ns[ss]}.0) );
          `;const is=`
        void ${_i} (int bcastedIndices[${Zr}], out int realIndices[${Xr}]) {
          ${rs}
        }
        `;Yr[_i]=new jr.GlslLibRoutine(is)}}),Yr}bcastMatmulIndex(){const Zr=this.context.outputTextureLayout.shape.length,Yr={};return this.context.programInfo.inputNames.forEach((ts,es)=>{const ns=this.context.inputTextureLayouts[es].shape;if(!(ns.length<2||ns.length>Zr)){const Xr=ns.length,qr=Zr-Xr,_i=`bcastMatmulIndices_${ts}`;let rs="";for(let ss=0;ss<Xr-2;++ss)rs+=`
          realIndices[${ss}] = int( mod(float(bcastedIndices[${qr+ss}]), ${ns[ss]}.0) );
          `;const is=`
        void ${_i}(int bcastedIndices[${Zr}], out int realIndices[${Xr}]) {
          ${rs}
          realIndices[${Xr-1}] = bcastedIndices[${Zr-1}];
          realIndices[${Xr-2}] = bcastedIndices[${Zr-2}];
        }
        `;Yr[_i]=new jr.GlslLibRoutine(is)}}),Yr}indicesToOffset(){const Zr={};return this.context.programInfo.inputNames.forEach((Yr,ts)=>{const es=this.context.inputTextureLayouts[ts].shape,ns=this.context.inputTextureLayouts[ts].strides,Xr=es.length;let qr=`indicesToOffset_${Yr}`;Zr[qr]=new jr.GlslLibRoutine(Gr.indexToOffsetSingle(qr,Xr,ns)),qr=`indicesToOffset_${Yr}_T`,Zr[qr]=new jr.GlslLibRoutine(Gr.indexToOffsetSingle(qr,Xr,ns.slice().reverse()))}),Zr}static indexToOffsetSingle(Zr,Yr,ts){let es="";for(let ns=Yr-1;ns>=0;--ns)es+=`
        offset += indices[${ns}] * ${ts[ns]};
        `;return`
      int ${Zr}(int indices[${Yr}]) {
        int offset = 0;
        ${es}
        return offset;
      }
      `}offsetToIndices(){const Zr={};return this.context.programInfo.inputNames.forEach((Yr,ts)=>{const es=this.context.inputTextureLayouts[ts].shape,ns=this.context.inputTextureLayouts[ts].strides,Xr=es.length;let qr=`offsetToIndices_${Yr}`;Zr[qr]=new jr.GlslLibRoutine(Gr.offsetToIndicesSingle(qr,Xr,ns)),qr=`offsetToIndices_${Yr}_T`,Zr[qr]=new jr.GlslLibRoutine(Gr.offsetToIndicesSingle(qr,Xr,ns.slice().reverse()))}),Zr}static offsetToIndicesSingle(Zr,Yr,ts){const es=[];for(let ns=0;ns<Yr-1;++ns)es.push(`
      indices[${ns}] = offset / ${ts[ns]};`),es.push(`
        offset -= indices[${ns}] * ${ts[ns]};`);return es.push(`
      indices[${Yr-1}] = offset;`),`
      void ${Zr}(int offset, out int indices[${Yr}]) {
        ${es.join("")}
      }
      `}incrementIndices(){const Zr={};return this.context.programInfo.inputNames.forEach((Yr,ts)=>{const es=this.context.inputTextureLayouts[ts].shape,ns=es.length,Xr=`incrementIndices_${Yr}`;let qr="";for(let rs=0;rs<ns;++rs)qr+=`
        shape[${rs}] = ${es[rs]};`;const _i=`
        void ${Xr}(int axis, out int indices[${ns}]) {
          int shape[${ns}];
          ${qr};
          for(int i = ${ns} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;Zr[Xr]=new jr.GlslLibRoutine(_i)}),Zr}}_r.ShapeUtilsGlslLib=Gr},6757:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.getDefaultFragShaderMain=_r.getFragShaderPreamble=_r.getVertexShaderSource=_r.getGlsl=void 0;const Ur={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},jr={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function Gr(Wr){return Wr===1?Ur:jr}_r.getGlsl=Gr,_r.getVertexShaderSource=function(Wr){const Zr=Gr(Wr);return`${Zr.version}
      precision highp float;
      ${Zr.attribute} vec3 position;
      ${Zr.attribute} vec2 textureCoord;

      ${Zr.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},_r.getFragShaderPreamble=function(Wr){const Zr=Gr(Wr);return`${Zr.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${Zr.varyingFrag} vec2 TexCoords;
    ${Zr.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},_r.getDefaultFragShaderMain=function(Wr,Zr){return`
  void main() {
    int indices[${Zr}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${Gr(Wr).output} = result;
  }
  `}},9314:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.VecGlslLib=void 0;const jr=Ur(1997);class Gr extends jr.GlslLib{constructor(Zr){super(Zr)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const Zr=this.context.outputTextureLayout.shape.length,Yr={add:"+=",sub:"-=",mul:"*=",div:"/="},ts={};for(const es in Yr){const ns=`${es}Vec`;let Xr="";for(let _i=0;_i<Zr;++_i)Xr+=`
          dest[${_i}] ${Yr[es]} src[${_i}];
          `;const qr=`
        void ${ns}(int src[${Zr}], out int dest[${Zr}]) {
          ${Xr}
        }
        `;ts[ns]=new jr.GlslLibRoutine(qr)}return ts}copyVec(){const Zr=this.context.outputTextureLayout.shape.length;let Yr="";for(let es=0;es<Zr;++es)Yr+=`
        dest[${es}] = src[${es}];
        `;const ts=`
      void copyVec(int src[${Zr}], out int dest[${Zr}]) {
        ${Yr}
      }
      `;return{copyVec:new jr.GlslLibRoutine(ts)}}setVecItem(){const Zr=this.context.outputTextureLayout.shape.length;let Yr=`
        if(index < 0)
            index =${Zr} + index;
        if (index == 0)
            m[0] = value;
        `;for(let es=1;es<Zr-1;++es)Yr+=`
        else if (index == ${es})
            m[${es}] = value;
            `;Yr+=`
        else
            m[${Zr-1}] = value;
        `;const ts=`
      void setVecItem(out int m[${Zr}], int index, int value) {
        ${Yr}
      }
        `;return{setVecItem:new jr.GlslLibRoutine(ts)}}getVecItem(){const Zr=this.context.outputTextureLayout.shape.length;let Yr=`
        if(index < 0)
            index = ${Zr} + index;
        if (index == 0)
            return m[0];
      `;for(let es=1;es<Zr-1;++es)Yr+=`
        else if (index == ${es})
            return m[${es}];
      `;Yr+=`
        else
            return m[${Zr-1}];
        `;const ts=`
      int getVecItem(int m[${Zr}], int index) {
        ${Yr}
      }
    `;return{getVecItem:new jr.GlslLibRoutine(ts)}}}_r.VecGlslLib=Gr},7860:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.WebGLInferenceHandler=void 0;const jr=Ur(1315),Gr=Ur(9240),Wr=Ur(7273),Zr=Ur(9),Yr=Ur(7379),ts=Ur(2488),es=Ur(540),ns=Ur(3314),Xr=Ur(5639);_r.WebGLInferenceHandler=class{constructor(qr){this.session=qr,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(qr,_i){return(0,ns.calculateTextureWidthAndHeight)(this.session.layoutStrategy,qr,_i)}executeProgram(qr,_i){if(_i.length<qr.inputNames.length)throw new Error(`Input size mustn't be less than ${qr.inputNames.length}.`);if(qr.inputNames.length!==qr.inputTypes.length)throw new Error("input names size does not match input types");const rs=[];for(let ds=0;ds<qr.inputNames.length;++ds)rs[ds]=this.getOrCreateTextureData(_i[ds],qr.inputTypes[ds]);const is=((ds,fs)=>{const ms=fs.map(ys=>`${ys.unpackedShape.join(",")};${ys.width}x${ys.height}`).join("_");let ps=ds.name;return ds.cacheHint&&(ps+="["+ds.cacheHint+"]"),ps+=":"+ms,ps})(qr,rs);let ss=this.session.programManager.getArtifact(is);const os=ss?ss.programInfo:typeof qr.get=="function"?qr.get():qr,ls=(0,ns.createTextureLayoutFromTextureType)(this.session.layoutStrategy,os.output.dims,os.output.textureType),cs=this.createTextureData(ls,os.output.type);return ss||(ss=this.session.programManager.build(os,rs,cs),this.session.programManager.setArtifact(is,ss)),this.runProgram(ss,rs,cs),cs}run(qr,_i){return this.executeProgram(qr,_i).tensor}runProgram(qr,_i,rs){for(let is=0;is<_i.length;++is)if(!!_i[is].isPacked!=(qr.programInfo.inputTypes[is]===Xr.TextureType.packed))throw new Error(`input[${is}] property packed inconsistent`);if(!!rs.isPacked!=(qr.programInfo.output.textureType===Xr.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(qr,_i,rs)}getOrCreateTextureData(qr,_i){let rs=this.getTextureData(qr.dataId,_i===Xr.TextureType.packed);if(!rs&&(rs=this.getTextureData(qr.dataId,_i!==Xr.TextureType.packed),rs))return _i===Xr.TextureType.packed?this.pack(rs):this.unpack(rs);if(!rs){const is=(0,ns.createTextureLayoutFromTextureType)(this.session.layoutStrategy,qr.dims,_i);if(_i===Xr.TextureType.packedLastDimension){const ls=qr.dims;if(ls.length===4){const cs=[ls[0],Math.ceil(ls[1]*ls[2]*ls[3]/4)],ds=(0,ns.createTextureLayoutFromTextureType)(this.session.layoutStrategy,cs,_i);let fs=qr.numberData;if(ls[1]*ls[2]*ls[3]%4!=0){const ms=ls[0],ps=ls[1]*ls[2]*ls[3],ys=Math.ceil(ps*1/4)*4;fs=new Float32Array(ms*ys);for(let ws=0;ws<ms;++ws){const xs=ws*ps,Es=ws*ys+ws%1*ps;fs.set(qr.numberData.subarray(xs,xs+ps),Es)}}return this.createTextureData(ds,qr.type,fs,qr,1)}}if(_i===Xr.TextureType.packed){const ss=(0,ns.createTextureLayoutFromShape)(this.session.layoutStrategy,qr.dims,1,[],{reverseWH:!0}),os=this.createTextureData(ss,qr.type,qr.numberData,qr,1);rs=this.pack(os)}else rs=this.createTextureData(is,qr.type,qr.numberData,qr,1)}return rs}createTextureDataFromLayoutBindTensor(qr,_i,rs,is){return this.createTextureData(qr,_i,rs,is,1)}createTextureData(qr,_i,rs,is,ss){jr.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(qr)}]`);const os=this.session.textureManager.createTextureFromLayout(_i,qr,rs,ss);return this.createTextureDataFromTexture(qr,_i,os,is)}reshapeUnpacked(qr,_i){const rs=this.getOrCreateTextureData(qr,Xr.TextureType.unpacked),is={channels:rs.channels,height:rs.height,width:rs.width,shape:_i.length!==0?_i:[1],strides:Wr.ShapeUtil.computeStrides(_i),unpackedShape:_i};return this.createTextureDataFromTexture(is,qr.type,rs.texture).tensor}reshapePacked(qr,_i){const rs=this.getOrCreateTextureData(qr,Xr.TextureType.packed);if((0,Yr.isReshapeCheap)(qr.dims,_i)){const cs={channels:rs.channels,height:rs.height,width:rs.width,shape:_i.length!==0?_i:[1],strides:Wr.ShapeUtil.computeStrides(_i),unpackedShape:_i,isPacked:!0};return this.createTextureDataFromTexture(cs,qr.type,rs.texture).tensor}const is=(0,Yr.processDims3D)(qr.dims),ss=(0,Yr.processDims3D)(_i),os=this.reshapePacked(qr,is),ls=this.run((0,Yr.createPackedReshape3DProgramInfoLoader)(this,os,ss),[os]);return this.reshapePacked(ls,_i)}cast(qr,_i){const rs=this.getOrCreateTextureData(qr,Xr.TextureType.unpacked);return this.createTextureDataFromTexture(rs,_i,rs.texture).tensor}createTextureDataFromTexture(qr,_i,rs,is,ss){const os=Object.assign(Object.assign({},qr),{tensor:is||new Gr.Tensor(qr.unpackedShape,_i,ls=>this.readTexture(os),async ls=>this.readTextureAsync(os),void 0,ss),texture:rs});return this.setTextureData(os.tensor.dataId,os,qr.isPacked),os}getTextureData(qr,_i=!1){return this.session.isInitializer(qr)?this.session.getTextureData(qr,_i):_i?this.packedTextureDataCache.get(qr):this.unpackedTextureDataCache.get(qr)}setTextureData(qr,_i,rs=!1){this.session.isInitializer(qr)?this.session.setTextureData(qr,_i,rs):(rs?this.packedTextureDataCache:this.unpackedTextureDataCache).set(qr,_i)}isTextureLayoutCached(qr,_i=!1){return!!this.getTextureData(qr.dataId,_i)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(qr=>this.session.textureManager.releaseTexture(qr)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(qr=>this.session.textureManager.releaseTexture(qr)),this.unpackedTextureDataCache=new Map}readTexture(qr){return qr.isPacked?this.readTexture(this.unpack(qr)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(qr,qr.tensor.type,qr.channels):this.session.textureManager.readUint8TextureAsFloat((0,ts.encodeAsUint8)(this,qr))}async readTextureAsync(qr){return qr.isPacked?this.readTextureAsync(this.unpack(qr)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(qr,qr.tensor.type,qr.channels):this.session.textureManager.readUint8TextureAsFloat((0,ts.encodeAsUint8)(this,qr))}pack(qr){return this.executeProgram((0,Zr.createPackProgramInfoLoader)(this,qr.tensor),[qr.tensor])}unpack(qr){return this.executeProgram((0,es.createUnpackProgramInfoLoader)(this,qr.tensor),[qr.tensor])}}},4110:function(Nr,_r,Ur){var jr=this&&this.__createBinding||(Object.create?function(Ks,Ws,Js,ho){ho===void 0&&(ho=Js);var so=Object.getOwnPropertyDescriptor(Ws,Js);so&&!("get"in so?!Ws.__esModule:so.writable||so.configurable)||(so={enumerable:!0,get:function(){return Ws[Js]}}),Object.defineProperty(Ks,ho,so)}:function(Ks,Ws,Js,ho){ho===void 0&&(ho=Js),Ks[ho]=Ws[Js]}),Gr=this&&this.__setModuleDefault||(Object.create?function(Ks,Ws){Object.defineProperty(Ks,"default",{enumerable:!0,value:Ws})}:function(Ks,Ws){Ks.default=Ws}),Wr=this&&this.__importStar||function(Ks){if(Ks&&Ks.__esModule)return Ks;var Ws={};if(Ks!=null)for(var Js in Ks)Js!=="default"&&Object.prototype.hasOwnProperty.call(Ks,Js)&&jr(Ws,Ks,Js);return Gr(Ws,Ks),Ws};Object.defineProperty(_r,"__esModule",{value:!0}),_r.WEBGL_OP_RESOLVE_RULES=void 0;const Zr=Ur(8817),Yr=Wr(Ur(5194)),ts=Ur(4752),es=Ur(6668),ns=Ur(9754),Xr=Ur(5042),qr=Ur(6742),_i=Ur(4125),rs=Ur(6149),is=Ur(5378),ss=Ur(6981),os=Ur(7413),ls=Ur(7006),cs=Ur(8276),ds=Ur(5565),fs=Ur(2834),ms=Ur(1010),ps=Ur(8126),ys=Ur(2801),ws=Ur(565),xs=Ur(2444),Es=Ur(815),Rs=Ur(564),_s=Ur(5416),Bs=Ur(1240),vs=Ur(5944),Cs=Ur(5707),Ss=Wr(Ur(9087)),As=Ur(7862),Us=Ur(3980);_r.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Ss.abs],["Acos","","7+",Ss.acos],["Add","","7+",Yr.add],["And","","7+",Yr.and],["Asin","","7+",Ss.asin],["Atan","","7+",Ss.atan],["AveragePool","","7+",fs.averagePool,fs.parseAveragePoolAttributes],["BatchNormalization","","7+",Zr.batchNormalization,Zr.parseBatchNormalizationAttributes],["Cast","","6+",ts.cast,ts.parseCastAttributes],["Ceil","","6+",Ss.ceil],["Clip","","6-10",Ss.clip,Ss.parseClipAttributes],["Clip","","11+",Ss.clipV11],["Concat","","4+",es.concat,es.parseConcatAttributes],["Conv","","1+",ns.conv,ns.parseConvAttributes],["ConvTranspose","","1+",Xr.convTranspose,Xr.parseConvTransposeAttributes],["Cos","","7+",Ss.cos],["Div","","7+",Yr.div],["Dropout","","7+",Ss.identity],["DepthToSpace","","1+",qr.depthToSpace,qr.parseDepthToSpaceAttributes],["Equal","","7+",Yr.equal],["Elu","","6+",Ss.elu,Ss.parseEluAttributes],["Exp","","6+",Ss.exp],["Flatten","","1+",_i.flatten,_i.parseFlattenAttributes],["Floor","","6+",Ss.floor],["FusedConv","com.microsoft","1+",ns.conv,ns.parseConvAttributes],["Gather","","1+",rs.gather,rs.parseGatherAttributes],["Gemm","","7-10",is.gemm,is.parseGemmAttributesV7],["Gemm","","11+",is.gemm,is.parseGemmAttributesV11],["GlobalAveragePool","","1+",fs.globalAveragePool,fs.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",fs.globalMaxPool],["Greater","","7+",Yr.greater],["Identity","","1+",Ss.identity],["ImageScaler","","1+",ss.imageScaler,ss.parseImageScalerAttributes],["InstanceNormalization","","6+",os.instanceNormalization,os.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Ss.leakyRelu,Ss.parseLeakyReluAttributes],["Less","","7+",Yr.less],["LRN","","1+",ls.lrn,ls.parseLrnAttributes],["Log","","6+",Ss.log],["MatMul","","1+",cs.matMul,cs.parseMatMulAttributes],["MaxPool","","1+",fs.maxPool,fs.parseMaxPoolAttributes],["Mul","","7+",Yr.mul],["Neg","","6+",Ss.neg],["Not","","1+",Ss.not],["Or","","7+",Yr.or],["Pad","","2-10",ds.padV2,ds.parsePadAttributesV2],["Pad","","11+",ds.padV11,ds.parsePadAttributesV11],["Pow","","7+",Yr.pow],["PRelu","","7+",Yr.pRelu],["ReduceLogSum","","1+",ms.reduceLogSum,ms.parseReduceAttributes],["ReduceMax","","1+",ms.reduceMax,ms.parseReduceAttributes],["ReduceMean","","1+",ms.reduceMean,ms.parseReduceAttributes],["ReduceMin","","1+",ms.reduceMin,ms.parseReduceAttributes],["ReduceProd","","1+",ms.reduceProd,ms.parseReduceAttributes],["ReduceSum","","1-12",ms.reduceSum,ms.parseReduceAttributes],["ReduceSumSquare","","1+",ms.reduceLogSumSquare,ms.parseReduceAttributes],["Relu","","6+",Ss.relu],["Reshape","","5+",ps.reshape],["Resize","","10",ys.resize,ys.parseResizeAttributesV10],["Resize","","11+",ys.resize,ys.parseResizeAttributesV11],["Shape","","1+",ws.shape],["Sigmoid","","6+",Ss.sigmoid],["Sin","","7+",Ss.sin],["Slice","","10+",xs.sliceV10],["Slice","","1-9",xs.slice,xs.parseSliceAttributes],["Softmax","","1-12",Es.softmax,Es.parseSoftmaxAttributes],["Softmax","","13+",Es.softmaxV13,Es.parseSoftmaxAttributesV13],["Split","","2-12",Rs.split,Rs.parseSplitAttributes],["Sqrt","","6+",Ss.sqrt],["Squeeze","","1-12",_s.squeeze,_s.parseSqueezeAttributes],["Squeeze","","13+",_s.squeezeV13],["Sub","","7+",Yr.sub],["Sum","","6+",Bs.sum],["Tan","","7+",Ss.tan],["Tanh","","6+",Ss.tanh],["Tile","","6+",vs.tile],["Transpose","","1+",Cs.transpose,Cs.parseTransposeAttributes],["Upsample","","7-8",Us.upsample,Us.parseUpsampleAttributesV7],["Upsample","","9",Us.upsample,Us.parseUpsampleAttributesV9],["Unsqueeze","","1-12",As.unsqueeze,As.parseUnsqueezeAttributes],["Unsqueeze","","13+",As.unsqueezeV13],["Xor","","7+",Yr.xor]]},8817:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseBatchNormalizationAttributes=_r.batchNormalization=void 0;const jr=Ur(4910),Gr=Ur(6757),Wr=Ur(5639),Zr={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[Wr.TextureType.unpacked,Wr.TextureType.unpacked,Wr.TextureType.unpacked,Wr.TextureType.unpacked,Wr.TextureType.unpacked]};_r.batchNormalization=(es,ns,Xr)=>(ts(ns),[es.run(Object.assign(Object.assign({},Zr),{cacheHint:Xr.cacheKey,get:()=>Yr(es,ns,Xr)}),ns)]),_r.parseBatchNormalizationAttributes=es=>{const ns=es.attributes.getFloat("epsilon",1e-5),Xr=es.attributes.getFloat("momentum",.9),qr=es.attributes.getInt("spatial",1);return(0,jr.createAttributeWithCacheKey)({epsilon:ns,momentum:Xr,spatial:qr})};const Yr=(es,ns,Xr)=>{const qr=(0,Gr.getGlsl)(es.session.backend.glContext.version),_i=ns[0].dims.length,[rs,is]=es.calculateTextureWidthAndHeight(ns[1].dims,Wr.TextureType.unpacked),ss=`
  float process(int[${_i}] indices) {
    vec2 position = offsetToCoords(indices[1], ${rs}, ${is});
    float scale = getColorAsFloat(${qr.texture2D}(Scale, position));
    float mean = getColorAsFloat(${qr.texture2D}(Mean, position));
    float variance = getColorAsFloat(${qr.texture2D}(Variance, position));
    float b = getColorAsFloat(${qr.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${Xr.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},Zr),{output:{dims:ns[0].dims,type:ns[0].type,textureType:Wr.TextureType.unpacked},shaderSource:ss})},ts=es=>{if(!es||es.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const ns=es[0],Xr=es[1],qr=es[2],_i=es[3],rs=es[4];if(ns.dims.length<3||Xr.dims.length!==1||qr.dims.length!==1||_i.dims.length!==1||rs.dims.length!==1)throw new Error("invalid input shape.");if(Xr.dims[0]!==ns.dims[1]||qr.dims[0]!==ns.dims[1]||_i.dims[0]!==ns.dims[1]||rs.dims[0]!==ns.dims[1])throw new Error("invalid input shape.");if(ns.type!=="float32"&&ns.type!=="float64"||Xr.type!=="float32"&&Xr.type!=="float64"||qr.type!=="float32"&&qr.type!=="float64"||_i.type!=="float32"&&_i.type!=="float64"||rs.type!=="float32"&&rs.type!=="float64")throw new Error("invalid input tensor types.")}},5194:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.xor=_r.sub=_r.pRelu=_r.pow=_r.or=_r.mul=_r.less=_r.greater=_r.equal=_r.div=_r.and=_r.add=_r.glslPRelu=_r.glslPow=_r.glslXor=_r.glslOr=_r.glslAnd=_r.glslLess=_r.glslGreater=_r.glslEqual=_r.glslSub=_r.glslMul=_r.glslDiv=_r.glslAdd=void 0;const jr=Ur(7273),Gr=Ur(1997),Wr=Ur(6757),Zr=Ur(5639);function Yr(){const fs="add_";return{body:`
  float ${fs}(float a, float b) {
    return a + b;
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function ts(){const fs="div_";return{body:`
  float ${fs}(float a, float b) {
    return a / b;
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function es(){const fs="mul_";return{body:`
  float ${fs}(float a, float b) {
    return a * b;
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function ns(){const fs="sub_";return{body:`
  float ${fs}(float a, float b) {
    return a - b;
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function Xr(){const fs="equal_";return{body:`
  float ${fs}(float a, float b) {
    return float(a == b);
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function qr(){const fs="greater_";return{body:`
  float ${fs}(float a, float b) {
    return float(a > b);
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function _i(){const fs="less_";return{body:`
  float ${fs}(float a, float b) {
    return float(a < b);
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function rs(){const fs="and_";return{body:`
  float ${fs}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function is(){const fs="or_";return{body:`
  float ${fs}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function ss(){const fs="xor_";return{body:`
  float ${fs}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}function os(){return function(fs){const ms=`${fs}_`;return{body:`
  float ${ms}(float a, float b) {
    return ${fs}(a, b);
  }
  vec4 ${ms}(vec4 v1, vec4 v2) {
    return ${fs}(v1, v2);
  }
  `,name:ms,type:Gr.FunctionType.ValueBased}}("pow")}function ls(){const fs="prelu_";return{body:`
  float ${fs}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${fs}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:fs,type:Gr.FunctionType.ValueBased}}_r.glslAdd=Yr,_r.glslDiv=ts,_r.glslMul=es,_r.glslSub=ns,_r.glslEqual=Xr,_r.glslGreater=qr,_r.glslLess=_i,_r.glslAnd=rs,_r.glslOr=is,_r.glslXor=ss,_r.glslPow=os,_r.glslPRelu=ls;const cs=(fs,ms,ps,ys=ms[0].type,ws)=>{const xs=fs.session.pack?Zr.TextureType.packed:Zr.TextureType.unpacked;return{name:ps.name,inputNames:["A","B"],inputTypes:[xs,xs],cacheHint:ws,get:()=>ds(fs,ms,ps,ys)}},ds=(fs,ms,ps,ys=ms[0].type)=>{const ws=fs.session.pack?Zr.TextureType.packed:Zr.TextureType.unpacked,xs=!jr.ShapeUtil.areEqual(ms[0].dims,ms[1].dims);let Es=ms[0].dims;const Rs=fs.session.pack;if(xs){const vs=jr.BroadcastUtil.calcShape(ms[0].dims,ms[1].dims,!1);if(!vs)throw new Error("Can't perform binary op on the given tensors");Es=vs;const Cs=Es.length,Ss=ms[0].dims.length!==0?ms[0].dims.length:1,As=ms[1].dims.length!==0?ms[1].dims.length:1,Us=ms[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Ks=ms[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Ws=(0,Wr.getGlsl)(fs.session.backend.glContext.version),Js=Rs?`
      ${ps.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${ps.name}(a, b);
        ${Ws.output} = result;
      }`:`
      ${ps.body}
      float process(int indices[${Cs}]) {
        int aindices[${Ss}];
        int bindices[${As}];
        ${Us}
        ${Ks}
        return ${ps.name}(_A(aindices), _B(bindices));
      }`;return{name:ps.name,inputNames:["A","B"],inputTypes:[ws,ws],output:{dims:Es,type:ys,textureType:ws},shaderSource:Js,hasMain:Rs}}const _s=(0,Wr.getGlsl)(fs.session.backend.glContext.version),Bs=`
    ${ps.body}
    void main() {
      vec4 v1 = ${_s.texture2D}(A, TexCoords);
      vec4 v2 = ${_s.texture2D}(B, TexCoords);
      vec4 result = ${ps.name}(v1, v2);
      ${_s.output} = result;
    }
    `;return{name:ps.name,inputNames:["A","B"],inputTypes:[ws,ws],output:{dims:ms[0].dims,type:ys,textureType:ws},shaderSource:Bs,hasMain:!0}};_r.add=(fs,ms)=>[fs.run(cs(fs,ms,Yr()),ms)],_r.and=(fs,ms)=>[fs.run(cs(fs,ms,rs(),"bool"),ms)],_r.div=(fs,ms)=>[fs.run(cs(fs,ms,ts()),ms)],_r.equal=(fs,ms)=>[fs.run(cs(fs,ms,Xr(),"bool"),ms)],_r.greater=(fs,ms)=>[fs.run(cs(fs,ms,qr(),"bool"),ms)],_r.less=(fs,ms)=>[fs.run(cs(fs,ms,_i(),"bool"),ms)],_r.mul=(fs,ms)=>[fs.run(cs(fs,ms,es()),ms)],_r.or=(fs,ms)=>[fs.run(cs(fs,ms,is(),"bool"),ms)],_r.pow=(fs,ms)=>[fs.run(cs(fs,ms,os()),ms)],_r.pRelu=(fs,ms)=>[fs.run(cs(fs,ms,ls()),ms)],_r.sub=(fs,ms)=>[fs.run(cs(fs,ms,ns()),ms)],_r.xor=(fs,ms)=>[fs.run(cs(fs,ms,ss(),"bool"),ms)]},4752:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseCastAttributes=_r.cast=void 0;const jr=Ur(7273);_r.cast=(Wr,Zr,Yr)=>(Gr(Zr),[Wr.cast(Zr[0],Yr)]),_r.parseCastAttributes=Wr=>jr.ProtoUtil.tensorDataTypeFromProto(Wr.attributes.getInt("to"));const Gr=Wr=>{if(!Wr||Wr.length!==1)throw new Error("Cast requires 1 input.");if(Wr[0].type==="string")throw new Error("Invalid input type.")}},4595:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createPackedConcatProgramInfoLoader=void 0;const jr=Ur(6757),Gr=Ur(5639),Wr=Ur(432),Zr=Ur(5614);_r.createPackedConcatProgramInfoLoader=(ts,es,ns)=>{const Xr=(qr=es.length,_i=ns.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:qr},(rs,is)=>`X${is}`),inputTypes:Array(qr).fill(Gr.TextureType.packed),cacheHint:_i});var qr,_i;return Object.assign(Object.assign({},Xr),{get:()=>((rs,is,ss,os)=>{const ls=ss[0].dims.slice();if(os>=ls.length||os<-1*ls.length)throw new Error("axis specified for concat doesn't match input dimensionality");os<0&&(os=ls.length+os);const cs=ls.slice(0);for(let Us=1;Us<ss.length;Us++){const Ks=ss[Us].dims.slice();for(let Ws=0;Ws<ls.length;Ws++)if(Ws===os)cs[os]+=Ks[Ws];else if(ls[Ws]!==Ks[Ws])throw new Error("non concat dimensions must match")}const ds=cs.length,fs=(0,Zr.getChannels)("coords",ds),ms=(0,Wr.getCoordsDataType)(ds),ps=(0,Zr.unpackFromChannel)(),ys=ss.map(Us=>Us.dims),ws=(0,Wr.getGlChannels)(ds),xs=new Array(ys.length-1);xs[0]=ys[0][os];for(let Us=1;Us<xs.length;Us++)xs[Us]=xs[Us-1]+ys[Us][os];const Es=ws[os],Rs=ws.slice(-2),_s=ws.join();let Bs=`if (${Es} < ${xs[0]}) {
        return getChannel(
            getX0(${_s}), vec2(${Rs.join()}));
        }`;for(let Us=1;Us<xs.length;Us++){const Ks=xs[Us-1];Bs+=`
            if (${Es} < ${xs[Us]}  && ${Es} >= ${xs[Us-1]}) {
              return getChannel(
                getX${Us}(${Yr(ws,Es,Ks)}),
                vec2(${Yr(Rs,Es,Ks)}));
            }`}const vs=xs.length,Cs=xs[xs.length-1];Bs+=`
            return getChannel(
              getX${vs}(${Yr(ws,Es,Cs)}),
              vec2(${Yr(Rs,Es,Cs)}));`;const Ss=(0,jr.getGlsl)(rs.session.backend.glContext.version),As=`
          ${ps}
          float getValue(${ws.map(Us=>"int "+Us)}) {
            ${Bs}
          }

          void main() {
            ${ms} coords = getOutputCoords();
            int lastDim = coords.${ws[ds-1]};
            coords.${ws[ds-1]} = coords.${ws[ds-2]};
            coords.${ws[ds-2]} = lastDim;

            vec4 result = vec4(getValue(${fs}), 0., 0., 0.);

            ${fs[ds-1]} = ${fs[ds-1]} + 1;
            if (${fs[ds-1]} < ${cs[ds-1]}) {
              result.g = getValue(${fs});
            }

            ${fs[ds-2]} = ${fs[ds-2]} + 1;
            if (${fs[ds-2]} < ${cs[ds-2]}) {
              result.a = getValue(${fs});
            }

            ${fs[ds-1]} = ${fs[ds-1]} - 1;
            if (${fs[ds-2]} < ${cs[ds-2]} &&
                ${fs[ds-1]} < ${cs[ds-1]}) {
              result.b = getValue(${fs});
            }
            ${Ss.output} = result;
          }
        `;return Object.assign(Object.assign({},is),{output:{dims:cs,type:ss[0].type,textureType:Gr.TextureType.packed},shaderSource:As,hasMain:!0})})(ts,Xr,es,ns.axis)})};const Yr=(ts,es,ns)=>{const Xr=ts.indexOf(es);return ts.map((qr,_i)=>_i===Xr?`${qr} - ${ns}`:qr).join()}},6668:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseConcatAttributes=_r.concat=void 0;const jr=Ur(4910),Gr=Ur(5639),Wr=Ur(4595);_r.concat=(qr,_i,rs)=>(Xr(_i),qr.session.pack&&_i[0].dims.length>1?[qr.run((0,Wr.createPackedConcatProgramInfoLoader)(qr,_i,rs),_i)]:[qr.run(Zr(qr,_i,rs),_i)]);const Zr=(qr,_i,rs)=>{const is=(ss=_i.length,os=rs.cacheKey,{name:"Concat",inputNames:Array.from({length:ss},(ls,cs)=>`X${cs}`),inputTypes:Array(ss).fill(Gr.TextureType.unpacked),cacheHint:os});var ss,os;return Object.assign(Object.assign({},is),{get:()=>((ls,cs,ds,fs)=>{const ms=ds[0].dims.slice();if(fs>=ms.length||fs<-1*ms.length)throw new Error("axis specified for concat doesn't match input dimensionality");fs<0&&(fs=ms.length+fs);const ps=ms.slice(0);for(let _s=1;_s<ds.length;_s++){const Bs=ds[_s].dims.slice();for(let vs=0;vs<ms.length;vs++)if(vs===fs)ps[fs]+=Bs[vs];else if(ms[vs]!==Bs[vs])throw new Error("non concat dimensions must match")}const ys=ps.length,ws=new Array(ds.length);let xs=0;for(let _s=0;_s<ws.length;++_s)xs+=ds[_s].dims[fs],ws[_s]=xs;let Es="";Es=ds.length<5?Yr(ws):ts(ws);const Rs=`
        ${es(ds.length,ys)}
        ${ns(ws)}
        ${Es}
        float process(int indices[${ys}]) {
          int textureIndex = getTextureWhereDataResides (indices[${fs}]);

          if(textureIndex != 0) {
            indices[${fs}] = indices[${fs}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},cs),{output:{dims:ps,type:ds[0].type,textureType:Gr.TextureType.unpacked},shaderSource:Rs})})(0,is,_i,rs.axis)})},Yr=qr=>`int getTextureWhereDataResides(int index) {
      ${qr.map((_i,rs)=>`if(index<${_i}) {return ${rs};}
`).join("")}
    }`,ts=qr=>Yr(qr),es=(qr,_i)=>{const rs=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${_i}]) {`];for(let is=0;is<qr;++is)is===0?rs.push(`	if (textureIndex == ${is}) { return _X${is}(indices); }`):is===qr-1?rs.push(`	else { return _X${is}(indices); }`):rs.push(`	else if (textureIndex == ${is}) { return _X${is}(indices); }`);return rs.push("	}"),rs.join(`
`)},ns=qr=>{const _i=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let rs=0;rs<qr.length;++rs)rs===0?_i.push(`	if (index == ${rs}) { return ${qr[rs]}; }`):rs===qr.length-1?_i.push(`	else { return ${qr[rs]}; }`):_i.push(`	else if (index == ${rs}) { return ${qr[rs]}; }`);return _i.push("	}"),_i.join(`
`)};_r.parseConcatAttributes=qr=>(0,jr.createAttributeWithCacheKey)({axis:qr.attributes.getInt("axis")});const Xr=qr=>{if(!qr||qr.length<1)throw new Error("too few inputs");const _i=qr[0].type,rs=qr[0].dims.length;if(_i==="string")throw new Error("string tensor is not supported yet");for(const is of qr){if(is.type!==_i)throw new Error("input tensors should be one type");if(is.dims.length!==rs)throw new Error("input tensors should have the same shape")}}},7825:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createUnpackedGroupedConvProgramInfoLoader=void 0;const jr=Ur(1315),Gr=Ur(6757),Wr=Ur(5639),Zr=Ur(9754),Yr=Ur(2150);_r.createUnpackedGroupedConvProgramInfoLoader=(ts,es,ns)=>{const Xr=(qr=es.length>2,_i=ns.cacheKey,{name:"GroupedConv",inputNames:qr?["X","W","Bias"]:["X","W"],inputTypes:qr?[Wr.TextureType.unpacked,Wr.TextureType.unpacked,Wr.TextureType.unpacked]:[Wr.TextureType.unpacked,Wr.TextureType.unpacked],cacheHint:_i});var qr,_i;return Object.assign(Object.assign({},Xr),{get:()=>((rs,is,ss,os)=>{const ls=is.length>2?"value += getBias(output_channel);":"",cs=is[0].dims.slice(),ds=is[1].dims.slice(),fs=ds[0]/os.group;jr.Logger.verbose("GroupedConv",`autpPad:${os.autoPad}, dilations:${os.dilations}, group:${os.group}, kernelShape:${os.kernelShape}, pads:${os.pads}, strides:${os.strides}`);const ms=(0,Zr.calculateOutputShape)(cs,ds,os.dilations,os.pads,os.strides),ps=(0,Gr.getGlsl)(rs.session.backend.glContext.version),{activationFunction:ys,applyActivation:ws}=(0,Yr.getActivationSnippet)(os),xs=`
  const ivec2 strides = ivec2(${os.strides[0]}, ${os.strides[1]});
  const ivec2 pads = ivec2(${os.pads[0]}, ${os.pads[1]});
  ${ys}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${fs};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${ds[1]}; wInChannel++) {
      int input_channel = group_id * ${ds[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${ds[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${os.dilations[0]};

        if (xHeight < 0 || xHeight >= ${cs[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${ds[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${os.dilations[1]};
          if (xWidth < 0 || xWidth >= ${cs[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${ls}
    ${ws}
    ${ps.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},ss),{output:{dims:ms,type:is[0].type,textureType:Wr.TextureType.unpacked},shaderSource:xs,hasMain:!0})})(ts,es,Xr,ns)})}},7708:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.conv2DPacked=_r.conv2DPackedPointwise=void 0;const jr=Ur(9754),Gr=Ur(5950),Wr=Ur(5632);_r.conv2DPackedPointwise=(Zr,Yr,ts)=>{const es=Yr[0].dims,ns=Yr[1].dims,Xr=(0,jr.calculateOutputShape)(es,ns,ts.dilations,ts.pads,ts.strides),qr=Zr.reshapePacked(Yr[0],[es[1],es[2]*es[3]]),_i=Zr.reshapePacked(Yr[1],[ns[0],ns[1]]),rs=Yr.length>2?[_i,qr,Yr[2]]:[_i,qr],is=Zr.run((0,Wr.createPackedMatmulProgramInfoLoader)(Zr,rs,ts),rs);return Zr.reshapePacked(is,Xr)},_r.conv2DPacked=(Zr,Yr,ts)=>{const es=Yr[0].dims,ns=Yr[1].dims,Xr=(0,jr.calculateOutputShape)(es,ns,ts.dilations,ts.pads,ts.strides),qr=Zr.run((0,Gr.createPackedIm2ColProgramInfoLoader)(Zr,Yr[0],Yr[1],Xr,ts),[Yr[0]]),_i=Zr.reshapePacked(Yr[1],[ns[0],ns[1]*ns[2]*ns[3]]),rs=Yr.length===3?[_i,qr,Yr[2]]:[_i,qr],is=Zr.run((0,Wr.createPackedMatmulProgramInfoLoader)(Zr,rs,ts),rs);return Zr.reshapePacked(is,Xr)}},5042:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseConvTransposeAttributes=_r.convTranspose=void 0;const jr=Ur(4910),Gr=Ur(6757),Wr=Ur(5639),Zr=Ur(2150),Yr=(_i,rs,is,ss,os,ls)=>(_i-1)*rs+is+(ss-1)*os+1-ls,ts=(_i,rs,is,ss,os)=>{const ls=Math.floor(_i/2);rs==="SAME_UPPER"?(is[ss]=ls,is[os]=_i-ls):rs==="SAME_LOWER"&&(is[ss]=_i-ls,is[os]=ls)};_r.convTranspose=(_i,rs,is)=>(qr(rs,is),es(_i,rs,is));const es=(_i,rs,is)=>{const ss=Xr(is,rs);return[ns(_i,rs,ss)]},ns=(_i,rs,is)=>_i.run(((ss,os,ls)=>{const cs=(ds=os.length>2,fs=ls.cacheKey,{name:"ConvTranspose",inputNames:ds?["X","W","B"]:["X","W"],inputTypes:ds?[Wr.TextureType.unpacked,Wr.TextureType.unpacked,Wr.TextureType.unpacked]:[Wr.TextureType.unpacked,Wr.TextureType.unpacked],cacheHint:fs});var ds,fs;return Object.assign(Object.assign({},cs),{get:()=>((ms,ps,ys,ws)=>{const xs=ps.length>2?"getB(output_channel)":"0.0",Es=ps[0].dims,Rs=ps[1].dims,_s=Rs[1],Bs=Rs[0]/ws.group,vs=[ps[0].dims[0],ps[1].dims[1]*ws.group,...ws.outputShape],Cs=(0,Gr.getGlsl)(ms.session.backend.glContext.version),{activationFunction:Ss,applyActivation:As}=(0,Zr.getActivationSnippet)(ws),Us=`
  const ivec2 strides = ivec2(${ws.strides[0]}, ${ws.strides[1]});
  const ivec2 pads = ivec2(${ws.pads[0]}, ${ws.pads[1]});
  ${Ss}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${_s};
    int wOutChannel = output_channel - group_id * ${_s};

    float value = ${xs};
    for (int inChannelOffset = 0; inChannelOffset < ${Bs}; inChannelOffset++) {
      int input_channel = group_id * ${Bs} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Rs[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Rs[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${ws.dilations[0]}, wHOff * ${ws.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Es[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Es[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${As}
    ${Cs.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},ys),{output:{dims:vs,type:ps[0].type,textureType:Wr.TextureType.unpacked},shaderSource:Us,hasMain:!0})})(ss,os,cs,ls)})})(_i,rs,is),rs),Xr=(_i,rs)=>{const is=_i.kernelShape.slice();if(_i.kernelShape.length===0)for(let cs=2;cs<rs[1].dims.length;++cs)is.push(rs[1].dims[cs]);const ss=_i.pads.slice(),os=_i.outputShape.slice();((cs,ds,fs,ms,ps,ys,ws,xs)=>{const Es=cs.length-2,Rs=xs.length===0;for(let _s=0;_s<Es;++_s){const Bs=Rs?cs[_s+2]*ys[_s]:xs[_s],vs=Yr(cs[_s+2],ys[_s],ps[_s],ds[_s],fs[_s],Bs);ts(vs,ms,ps,_s,_s+Es),Rs&&xs.push(ys[_s]*(cs[_s+2]-1)+ws[_s]+(ds[_s]-1)*fs[_s]+1-ps[_s]-ps[_s+Es])}})(rs[0].dims,is,_i.dilations,_i.autoPad,ss,_i.strides,_i.outputPadding,os);const ls=Object.assign({},_i);return Object.assign(ls,{kernelShape:is,pads:ss,outputShape:os,cacheKey:_i.cacheKey}),ls};_r.parseConvTransposeAttributes=_i=>{const rs=_i.attributes,is=(0,Zr.parseInternalActivationAttributes)(rs),ss=rs.getString("auto_pad","NOTSET"),os=rs.getInts("dilations",[1,1]),ls=rs.getInt("group",1),cs=rs.getInts("kernel_shape",[]),ds=rs.getInts("output_padding",[0,0]),fs=rs.getInts("output_shape",[]),ms=rs.getInts("pads",[0,0,0,0]),ps=rs.getInts("strides",[1,1]);return(0,jr.createAttributeWithCacheKey)(Object.assign({autoPad:ss,dilations:os,group:ls,kernelShape:cs,outputPadding:ds,outputShape:fs,pads:ms,strides:ps},is))};const qr=(_i,rs)=>{if(!_i||_i.length!==2&&_i.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(_i[0].dims.length!==4||_i[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(_i[0].dims[1]!==_i[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const is=_i[1].dims[1]*rs.group;if(_i.length===3&&(_i[2].dims.length!==1||_i[2].dims[0]!==is))throw new Error("invalid bias");const ss=_i[0].dims.length-2;if(rs.dilations.length!==ss)throw new Error(`dilations should be ${ss}D`);if(rs.strides.length!==ss)throw new Error(`strides should be ${ss}D`);if(rs.pads.length!==2*ss)throw new Error(`pads should be ${2*ss}D`);if(rs.outputPadding.length!==ss)throw new Error(`output_padding should be ${ss}D`);if(rs.kernelShape.length!==0&&rs.kernelShape.length!==_i[1].dims.length-2)throw new Error("invalid kernel shape");if(rs.outputShape.length!==0&&rs.outputShape.length!==_i[0].dims.length-2)throw new Error("invalid output shape");if(_i[0].type!=="float32"||_i[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(_i.length===3&&_i[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseConvAttributes=_r.conv=_r.calculateOutputShape=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(7825),Zr=Ur(7708),Yr=Ur(3281),ts=Ur(2150),es=Ur(1625),ns=Ur(8276);_r.calculateOutputShape=(ss,os,ls,cs,ds)=>{const fs=ss[0],ms=ss.slice(2),ps=ms.length,ys=os[0],ws=os.slice(2).map((Es,Rs)=>Es+(Es-1)*(ls[Rs]-1)),xs=ms.map((Es,Rs)=>Es+cs[Rs]+cs[Rs+ps]).map((Es,Rs)=>Math.floor((Es-ws[Rs]+ds[Rs])/ds[Rs]));return[fs,ys].concat(...xs)},_r.conv=(ss,os,ls)=>(is(os,ls),Xr(ss,os,ls));const Xr=(ss,os,ls)=>{const cs=rs(ls,os),ds=ss.session.pack,fs=cs.kernelShape[0]===1&&cs.kernelShape[1]===1;return cs.group>1?[ss.run((0,Wr.createUnpackedGroupedConvProgramInfoLoader)(ss,os,cs),os)]:fs&&ds?[qr(ss,os,cs)]:ds&&os[0].dims.length===4&&os[0].dims[0]===1&&!fs?[(0,Zr.conv2DPacked)(ss,os,cs)]:[_i(ss,os,cs)]},qr=(ss,os,ls)=>{const cs=os[0].dims,ds=os[1].dims,fs=(0,_r.calculateOutputShape)(cs,ds,ls.dilations,ls.pads,ls.strides),ms=ss.reshapeUnpacked(os[0],[cs[1],cs[2]*cs[3]]),ps=ss.reshapeUnpacked(os[1],[ds[0],ds[1]]),ys=os.length>2?[ps,ms,os[2]]:[ps,ms],ws=ss.run((0,ns.createMatmulProgramInfoLoader)(ys,ls),ys);return ss.reshapeUnpacked(ws,fs)},_i=(ss,os,ls)=>{const cs=os[0].dims,ds=os[1].dims,fs=(0,_r.calculateOutputShape)(cs,ds,ls.dilations,ls.pads,ls.strides),ms=ss.run((0,es.createIm2ColProgramInfoLoader)(ss,os[0],os[1],fs,ls),[os[0]]),ps=os.length===3?[ms,os[1],os[2]]:[ms,os[1]];return ss.run((0,Yr.createDotProductProgramInfoLoader)(ss,os,fs,ls),ps)},rs=(ss,os)=>{const ls=ss.kernelShape.slice();if(ss.kernelShape.length===0)for(let fs=2;fs<os[1].dims.length;++fs)ls.push(os[1].dims[fs]);const cs=ss.pads.slice();Gr.PoolConvUtil.adjustPadsBasedOnAutoPad(os[0].dims,ss.strides,ss.dilations,ls,cs,ss.autoPad);const ds=Object.assign({},ss);return Object.assign(ds,{kernelShape:ls,pads:cs,cacheKey:ss.cacheKey}),ds};_r.parseConvAttributes=ss=>{const os=ss.attributes,ls=(0,ts.parseInternalActivationAttributes)(os),cs=os.getString("auto_pad","NOTSET"),ds=os.getInts("dilations",[1,1]),fs=os.getInt("group",1),ms=os.getInts("kernel_shape",[]),ps=os.getInts("pads",[0,0,0,0]),ys=os.getInts("strides",[1,1]);return(0,jr.createAttributeWithCacheKey)(Object.assign({autoPad:cs,dilations:ds,group:fs,kernelShape:ms,pads:ps,strides:ys},ls))};const is=(ss,os)=>{if(!ss||ss.length!==2&&ss.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(ss[0].dims.length!==4||ss[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(ss[0].dims[1]!==ss[1].dims[1]*os.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(ss.length===3&&(ss[2].dims.length!==1||ss[1].dims[0]!==ss[2].dims[0]))throw new Error("invalid bias");const ls=ss[0].dims.length-2;if(os.dilations.length!==ls)throw new Error(`dilations should be ${ls}D`);if(os.strides.length!==ls)throw new Error(`strides should be ${ls}D`);if(os.pads.length!==2*ls)throw new Error(`pads should be ${2*ls}D`);if(os.kernelShape.length!==0&&os.kernelShape.length!==ss[1].dims.length-2)throw new Error("invalid kernel shape");if(ss[0].type!=="float32"||ss[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(ss.length===3&&ss[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},6742:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseDepthToSpaceAttributes=_r.depthToSpace=void 0;const jr=Ur(5707);_r.depthToSpace=(Wr,Zr,Yr)=>{Gr(Zr);const ts=Yr.blocksize,es=ts*ts,ns=Yr.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],Xr=Yr.mode==="DCR"?[Zr[0].dims[0],ts,ts,Zr[0].dims[1]/es,Zr[0].dims[2],Zr[0].dims[3]]:[Zr[0].dims[0],Zr[0].dims[1]/es,ts,ts,Zr[0].dims[2],Zr[0].dims[3]],qr=Wr.reshapeUnpacked(Zr[0],Xr),_i={perm:ns,cacheKey:`${ns}`},[rs]=(0,jr.transpose)(Wr,[qr],_i),is=[Zr[0].dims[0],Zr[0].dims[1]/es,Zr[0].dims[2]*ts,Zr[0].dims[3]*ts];return[Wr.reshapeUnpacked(rs,is)]},_r.parseDepthToSpaceAttributes=Wr=>{const Zr=Wr.attributes.getInt("blocksize");if(Zr<1)throw new Error(`blocksize must be >= 1, but got : ${Zr} for DepthToSpace`);const Yr=Wr.attributes.getString("mode","DCR");if(Yr!=="DCR"&&Yr!=="CRD")throw new Error(`unrecognized mode: ${Yr} for DepthToSpace`);return{mode:Yr,blocksize:Zr}};const Gr=Wr=>{if(Wr.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${Wr.length}`);if(Wr[0].type==="string"||Wr[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createDotProductProgramInfoLoader=void 0;const jr=Ur(7273),Gr=Ur(6757),Wr=Ur(5639),Zr=Ur(2150),Yr=Ur(1625);_r.createDotProductProgramInfoLoader=(ts,es,ns,Xr)=>{const qr=((_i,rs)=>({name:"ConvDotProduct",inputNames:_i?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:_i?[Wr.TextureType.unpacked,Wr.TextureType.packedLastDimension,Wr.TextureType.unpacked]:[Wr.TextureType.unpacked,Wr.TextureType.packedLastDimension],cacheKey:rs.activationCacheKey}))(es.length>2,Xr);return Object.assign(Object.assign({},qr),{get:()=>((_i,rs,is,ss,os)=>{const ls=is[0].dims,cs=is[1].dims,ds=[cs[0],Math.ceil(ls[1]*cs[2]*cs[3]/4)],fs=(0,Yr.calculateIm2ColDims)(ls,cs,ss),[ms,ps]=_i.calculateTextureWidthAndHeight(ds,Wr.TextureType.packedLastDimension),ys=jr.ShapeUtil.computeStrides(fs),[ws,xs]=_i.calculateTextureWidthAndHeight(fs,Wr.TextureType.packedLastDimension),Es=ss.length,Rs=is.length<3?"0.0":"_B(b)",_s=Math.ceil(ls[1]*cs[2]*cs[3]/4),{activationFunction:Bs,applyActivation:vs}=(0,Zr.getActivationSnippet)(os),Cs=(0,Gr.getGlsl)(_i.session.backend.glContext.version),Ss=`
${Bs}
float process(int indices[${Es}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${ys[0]} + im2col[1] * ${ys[1]} + im2col[2] * ${ys[2]};
  int kernelOffset = indices[1] * ${ds[1]};
  float value = ${Rs};
  for (int i = 0; i < ${_s}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${ws}, ${xs});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${ms}, ${ps});
    value += dot(${Cs.texture2D}(Im2Col, im2colCoords), ${Cs.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${vs}
  return value;
}`;return Object.assign(Object.assign({},rs),{output:{dims:ss,type:is[0].type,textureType:Wr.TextureType.unpacked},shaderSource:Ss})})(ts,qr,es,ns,Xr)})}},4125:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseFlattenAttributes=_r.flatten=void 0;const jr=Ur(7273);_r.flatten=(Wr,Zr,Yr)=>{Gr(Zr,Yr);const ts=jr.ShapeUtil.flattenShape(Zr[0].dims,Yr);return[Wr.reshapeUnpacked(Zr[0],ts)]},_r.parseFlattenAttributes=Wr=>Wr.attributes.getInt("axis",1);const Gr=(Wr,Zr)=>{if(!Wr||Wr.length!==1)throw new Error("Flatten requires 1 input.");const Yr=Wr[0].dims.length;if(Yr===0)throw new Error("scalar tensor is not supported.");if(Zr<-Yr||Zr>Yr)throw new Error("Invalid axis");if(Wr[0].type==="string")throw new Error("string tensor is not supported.")}},2150:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseInternalActivationAttributes=_r.getActivationSnippet=void 0;const jr=Ur(7273),Gr=Ur(9087);_r.getActivationSnippet=function(Wr){let Zr;switch(Wr.activation){case"Relu":Zr=(0,Gr.glslRelu)();break;case"Sigmoid":Zr=(0,Gr.glslSigmoid)();break;case"Clip":Zr=(0,Gr.glslClip)(Wr.clipMin,Wr.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const Yr=Zr.name;return{activationFunction:Zr.body,applyActivation:`value = ${Yr}_(value);`}},_r.parseInternalActivationAttributes=Wr=>{const Zr=Wr.getString("activation","");if(Zr==="Clip"){const[Yr,ts]=Wr.getFloats("activation_params",[jr.MIN_CLIP,jr.MAX_CLIP]);return{activation:Zr,clipMax:ts,clipMin:Yr,activationCacheKey:`${Zr}:${Yr},${ts}`}}return{activation:Zr,activationCacheKey:Zr}}},6149:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseGatherAttributes=_r.gather=void 0;const jr=Ur(4910),Gr=Ur(6145),Wr=Ur(7273),Zr=Ur(5639);_r.gather=(ns,Xr,qr)=>(es(Xr,qr.axis),[ns.run(ts(ns,Xr,qr),Xr)]),_r.parseGatherAttributes=ns=>(0,jr.createAttributeWithCacheKey)({axis:ns.attributes.getInt("axis",0)});const Yr={name:"Gather",inputNames:["A","B"],inputTypes:[Zr.TextureType.unpacked,Zr.TextureType.unpacked]},ts=(ns,Xr,qr)=>{const _i=Object.assign(Object.assign({},Yr),{cacheHint:qr.cacheKey});return Object.assign(Object.assign({},_i),{get:()=>((rs,is,ss,os)=>{const ls=ss[0].dims.slice(),cs=ss[1].dims.slice(),ds=new Array(ls.length+cs.length-1);os=Wr.ShapeUtil.normalizeAxis(os,ls.length);const fs=[];for(let ps=0;ps<ds.length;ps++)ps<os?(ds[ps]=ls[ps],fs.push(`inputIdx[${ps}] = outputIdx[${ps}];`)):ps<os+cs.length?(ds[ps]=cs[ps-os],fs.push(`indexDataIdx[${ps-os}] = outputIdx[${ps}];`)):(ds[ps]=ls[ps-cs.length+1],fs.push(`inputIdx[${ps-cs.length+1}] = outputIdx[${ps}];`));const ms=`
      float process(int outputIdx[${ds.length||1}]) {
        int inputIdx[${ls.length}];
        int indexDataIdx[${cs.length||1}];
        indexDataIdx[0] = 0;
        ${fs.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${os}] = idx < 0 ? idx + ${ls[os]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},is),{output:{dims:ds,type:ss[0].type,textureType:Zr.TextureType.unpacked},shaderSource:ms})})(0,_i,Xr,qr.axis)})},es=(ns,Xr)=>{if(!ns||ns.length!==2)throw new Error("Gather requires 2 inputs.");const qr=ns[0].dims.length;if(qr<1)throw new Error("Invalid input shape.");if(Xr<-qr||Xr>qr-1)throw new Error("Invalid axis.");if(Gr.NUMBER_TYPES.indexOf(ns[0].type)===-1)throw new Error("Invaid input type.");if(ns[1].type!=="int32"&&ns[1].type!=="int16")throw new Error("Invaid input type.")}},5378:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseGemmAttributesV11=_r.parseGemmAttributesV7=_r.gemm=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(5639);_r.gemm=(ns,Xr,qr)=>(es(Xr,qr),[ns.run(Yr(Xr,qr),Xr)]);const Zr=(ns,Xr)=>{const qr=ns.attributes.getInt("transA",0)!==0,_i=ns.attributes.getInt("transB",0)!==0,rs=ns.attributes.getFloat("alpha",1),is=ns.attributes.getFloat("beta",1);return(0,jr.createAttributeWithCacheKey)({transA:qr,transB:_i,alpha:rs,beta:is,isOptionalC:Xr})};_r.parseGemmAttributesV7=ns=>Zr(ns,!1),_r.parseGemmAttributesV11=ns=>Zr(ns,!0);const Yr=(ns,Xr)=>{const qr={name:"Gemm",inputNames:ns.length===3?["A","B","C"]:["A","B"],inputTypes:ns.length===3?[Wr.TextureType.unpacked,Wr.TextureType.unpacked,Wr.TextureType.unpacked]:[Wr.TextureType.unpacked,Wr.TextureType.unpacked],key:Xr.cacheKey};return Object.assign(Object.assign({},qr),{get:()=>ts(qr,ns,Xr)})},ts=(ns,Xr,qr)=>{const _i=Xr[0].dims.slice(),rs=Xr[1].dims.slice(),[is,ss]=Gr.GemmUtil.getShapeOfGemmResult(_i,qr.transA,rs,qr.transB,Xr.length===3?Xr[2].dims:void 0),os=[is,ss];if(!os)throw new Error("Can't use gemm on the given tensors");let ls=_i[_i.length-1],cs="";qr.transA&&(ls=_i[0]),qr.transA&&qr.transB?cs="value += _A_T(a) * _B_T(b);":qr.transA&&!qr.transB?cs="value += _A_T(a) * _B(b);":!qr.transA&&qr.transB?cs="value += _A(a) * _B_T(b);":qr.transA||qr.transB||(cs="value += _A(a) * _B(b);");const ds=os.length,fs=`
      float process(int indices[${ds}]) {
          int a[${ds}];
          int b[${ds}];
          ${Xr.length===3?`int c[${Xr[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${Xr.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${ls}; ++k) {
              a[${ds-1}] = k;
              b[${ds-2}] = k;
              ${cs}
          }

          value = value * alpha;
          ${Xr.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},ns),{output:{dims:os,type:Xr[0].type,textureType:Wr.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:qr.alpha},{name:"beta",type:"float",data:qr.beta}],shaderSource:fs})},es=(ns,Xr)=>{if(!ns)throw new Error("Input is missing");if(Xr.isOptionalC&&(ns.length<2||ns.length>3))throw new Error("Invaid input shape.");if(!Xr.isOptionalC&&ns.length!==3)throw new Error("Gemm requires 3 inputs");if(ns.length===3&&ns[2].dims.length!==1&&ns[2].dims.length!==2)throw new Error("Invalid input shape of C");if(ns[0].type!=="float32"&&ns[0].type!=="float64"||ns[1].type!=="float32"&&ns[1].type!=="float64"||ns.length===3&&ns[2].type!=="float32"&&ns[2].type!=="float64")throw new Error("Invalid input type.");if(ns[0].type!==ns[1].type||ns.length===3&&ns[0].type!==ns[2].type)throw new Error("Input types are mismatched")}},5950:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createPackedIm2ColProgramInfoLoader=void 0;const jr=Ur(6757),Gr=Ur(5639),Wr=Ur(5614);_r.createPackedIm2ColProgramInfoLoader=(Zr,Yr,ts,es,ns)=>{const Xr=(qr=ns.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[Gr.TextureType.packed],cacheHint:qr});var qr;return Object.assign(Object.assign({},Xr),{get:()=>((_i,rs,is,ss,os,ls)=>{const cs=is.dims,ds=ss.dims,fs=os.length,ms=[ds[1]*ds[2]*ds[3],os[2]*os[3]],ps=ds[2]*ds[3],ys=(0,Wr.unpackFromChannel)(),ws=(0,jr.getGlsl)(_i.session.backend.glContext.version);let xs="";for(let Rs=0;Rs<=1;Rs++)for(let _s=0;_s<=1;_s++)xs+=`
            blockIndex = rc.x + ${_s};
            pos = rc.y + ${Rs};

            if(blockIndex < ${ms[1]} && pos < ${ms[0]}) {
              offsetY = int(blockIndex / (${os[fs-1]})) * ${ls.strides[0]} -
                ${ls.pads[0]};
              d0 = offsetY + ${ls.dilations[0]} * (imod(pos, ${ps}) / ${ds[2]});

              if(d0 < ${cs[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${os[fs-1]}) * ${ls.strides[1]} -
                  ${ls.pads[1]};
                d1 = offsetX + ${ls.dilations[1]} * imod(imod(pos, ${ps}), ${ds[2]});

                if(d1 < ${cs[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${ps}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Rs+_s}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Es=`
      ${ys}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${xs}
          ${ws.output} = result;
      }
            `;return Object.assign(Object.assign({},rs),{output:{dims:ms,type:is.type,textureType:Gr.TextureType.packed},shaderSource:Es,hasMain:!0})})(Zr,Xr,Yr,ts,es,ns)})}},1625:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.calculateIm2ColDims=_r.createIm2ColProgramInfoLoader=void 0;const jr=Ur(5639);_r.createIm2ColProgramInfoLoader=(Gr,Wr,Zr,Yr,ts)=>{const es=(ns=ts.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[jr.TextureType.unpacked],cacheHint:ns});var ns;return Object.assign(Object.assign({},es),{get:()=>((Xr,qr,_i,rs,is,ss)=>{const os=_i.dims,ls=rs.dims,cs=is.length,ds=(0,_r.calculateIm2ColDims)(os,ls,is,4),fs=`
        const int XC = ${os[1]};
        const int XH = ${os[2]};
        const int XW = ${os[3]};
        const int KH = ${ss.kernelShape[0]};
        const int KW = ${ss.kernelShape[1]};
        const int dilationH = ${ss.dilations[0]};
        const int dilationW = ${ss.dilations[1]};
        const int strideH = ${ss.strides[0]};
        const int strideW = ${ss.strides[1]};
        const int padH = ${ss.pads[0]};
        const int padW = ${ss.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${cs}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${os.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},qr),{output:{dims:ds,type:_i.type,textureType:jr.TextureType.packedLastDimension},shaderSource:fs})})(0,es,Wr,Zr,Yr,ts)})},_r.calculateIm2ColDims=(Gr,Wr,Zr,Yr=4)=>[Zr[0],Zr[2],Zr[3],Math.ceil(Gr[1]*Wr[2]*Wr[3]/Yr)]},6981:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseImageScalerAttributes=_r.imageScaler=void 0;const jr=Ur(4910),Gr=Ur(5639);_r.imageScaler=(es,ns,Xr)=>(ts(ns),[es.run(Zr(es,ns,Xr),ns)]),_r.parseImageScalerAttributes=es=>{const ns=es.attributes.getFloat("scale"),Xr=es.attributes.getFloats("bias");return(0,jr.createAttributeWithCacheKey)({scale:ns,bias:Xr})};const Wr={name:"ImageScaler",inputNames:["X"],inputTypes:[Gr.TextureType.unpacked]},Zr=(es,ns,Xr)=>{const qr=Object.assign(Object.assign({},Wr),{cacheHint:Xr.cacheKey});return Object.assign(Object.assign({},qr),{get:()=>((_i,rs,is,ss)=>{const os=is[0].dims.slice(),ls=os.length,cs=`
      ${Yr(ss.bias.length)}
      float process(int indices[${ls}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},rs),{output:{dims:os,type:is[0].type,textureType:Gr.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:ss.bias.length,data:ss.bias},{name:"scale",type:"float",data:ss.scale}],shaderSource:cs})})(0,qr,ns,Xr)})},Yr=es=>{const ns=[`float getBias(float bias[${es}], int channel) {`];for(let Xr=0;Xr<es;++Xr)Xr===0?ns.push(`	if (channel == ${Xr}) { return bias[${Xr}]; }`):Xr===es-1?ns.push(`	else { return bias[${Xr}]; }`):ns.push(`	else if (channel == ${Xr}) { return bias[${Xr}]; }`);return ns.push("	}"),ns.join(`
`)},ts=es=>{if(!es||es.length!==1)throw new Error("ImageScaler requires 1 input.");if(es[0].dims.length!==4)throw new Error("Invalid input shape.");if(es[0].type!=="float32"&&es[0].type!=="float64")throw new Error("Invalid input type.")}},7413:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseInstanceNormalizationAttributes=_r.instanceNormalization=void 0;const jr=Ur(6757),Gr=Ur(5639);_r.instanceNormalization=(ns,Xr,qr)=>{es(Xr);const _i=ns.run(Zr(Xr[0]),Xr);return[ns.run(ts(ns,Xr[0],qr,_i.dims),[Xr[0],_i,Xr[1],Xr[2]])]},_r.parseInstanceNormalizationAttributes=ns=>ns.attributes.getFloat("epsilon",1e-5);const Wr={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[Gr.TextureType.unpacked]},Zr=ns=>Object.assign(Object.assign({},Wr),{get:()=>((Xr,qr)=>{const _i=qr.dims.slice(),rs=_i[1],is=_i[2]*_i[3],ss=[_i[0],rs],os=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${_i[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${_i[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${is});
        temp = 0.0;
        for(int a2=0; a2<${_i[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${_i[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${is});

        return v;
      }`;return Object.assign(Object.assign({},Xr),{output:{dims:ss,type:qr.type,textureType:Gr.TextureType.packedLastDimension},shaderSource:os})})(Wr,ns)}),Yr={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[Gr.TextureType.unpacked,Gr.TextureType.packedLastDimension,Gr.TextureType.unpacked,Gr.TextureType.unpacked]},ts=(ns,Xr,qr,_i)=>{const rs=Object.assign(Object.assign({},Yr),{cacheHint:`${qr}`});return Object.assign(Object.assign({},rs),{get:()=>((is,ss,os,ls,cs)=>{const ds=(0,jr.getGlsl)(is.session.backend.glContext.version),[fs,ms]=is.calculateTextureWidthAndHeight(cs,Gr.TextureType.packedLastDimension),[ps,ys]=[fs/4,ms],ws=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${ps}, ${ys});
        return ${ds.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},ss),{output:{dims:os.dims,type:os.type,textureType:Gr.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:ls}],shaderSource:ws})})(ns,rs,Xr,qr,_i)})},es=ns=>{if(!ns||ns.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const Xr=ns[0],qr=ns[1],_i=ns[2];if(Xr.dims.length<3||qr.dims.length!==1||_i.dims.length!==1)throw new Error("Invalid input shape.");if(qr.dims[0]!==Xr.dims[1]||_i.dims[0]!==Xr.dims[1])throw new Error("Input shapes are mismatched.");if(Xr.type!=="float32"&&Xr.type!=="float64"||qr.type!=="float32"&&qr.type!=="float64"||_i.type!=="float32"&&_i.type!=="float64")throw new Error("Invalid input type.");if(ns[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},7006:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createLrnProgramInfoLoader=_r.parseLrnAttributes=_r.lrn=void 0;const jr=Ur(4910),Gr=Ur(5639);_r.lrn=(ts,es,ns)=>(Yr(es),[ts.run(Zr(es,ns),es)]),_r.parseLrnAttributes=ts=>{const es=ts.attributes.getFloat("alpha",1e-4),ns=ts.attributes.getFloat("beta",.75),Xr=ts.attributes.getFloat("bias",1),qr=ts.attributes.getInt("size");return(0,jr.createAttributeWithCacheKey)({alpha:es,beta:ns,bias:Xr,size:qr})};const Wr={name:"LRN",inputNames:["X"],inputTypes:[Gr.TextureType.unpacked]};function Zr(ts,es){return Object.assign(Object.assign({},Wr),{cacheHint:es.cacheKey,get:()=>function(ns,Xr){const qr=ns[0].dims[1],_i=ns[0].dims.length,rs=-Math.floor((Xr.size-1)/2),is=Math.ceil((Xr.size-1)/2),ss=`float(${Xr.alpha}) / float(${Xr.size})`,os=`
    float process(int indices[${_i}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${rs}; i <= ${is}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${qr}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(float(${Xr.bias}) + ${ss} * square_sum, float(${Xr.beta}));
    }`;return Object.assign(Object.assign({},Wr),{cacheHint:Xr.cacheKey,output:{dims:ns[0].dims,type:ns[0].type,textureType:Gr.TextureType.unpacked},shaderSource:os})}(ts,es)})}_r.createLrnProgramInfoLoader=Zr;const Yr=ts=>{if(!ts||ts.length!==1)throw new Error("LRN requires 1 input.");if(ts[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(ts[0].type!=="float32")throw new Error("input should be float type")}},5632:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createPackedMatmulProgramInfoLoader=void 0;const jr=Ur(7273),Gr=Ur(6757),Wr=Ur(5639),Zr=Ur(432),Yr=Ur(2150),ts=Ur(8276);_r.createPackedMatmulProgramInfoLoader=(es,ns,Xr)=>{const qr=(_i=ns.length>2,rs=Xr.activationCacheKey,{name:"MatMul (packed)",inputNames:_i?["A","B","Bias"]:["A","B"],inputTypes:_i?[Wr.TextureType.packed,Wr.TextureType.packed,Wr.TextureType.packed]:[Wr.TextureType.packed,Wr.TextureType.packed],cacheHint:rs});var _i,rs;return Object.assign(Object.assign({},qr),{get:()=>((is,ss,os,ls)=>{const cs=os.length>2,ds=cs?"value += getBiasForMatmul();":"",fs=os[0].dims,ms=os[1].dims,ps=jr.BroadcastUtil.calcShape(fs,ms,!0),ys=!jr.ShapeUtil.areEqual(os[0].dims,os[1].dims);if(!ps)throw new Error("Can't use matmul on the given tensors");const ws=fs[fs.length-1],xs=Math.ceil(ws/2),Es=fs.length,Rs=ms.length,_s=(0,Gr.getGlsl)(is.session.backend.glContext.version),Bs=(0,Zr.getCoordsDataType)(ps.length),vs=ps.length,Cs=(0,Zr.getGlChannels)(),{activationFunction:Ss,applyActivation:As}=(0,Yr.getActivationSnippet)(ls),Us=cs?`${(0,ts.getBiasForMatmul)(Bs,Cs,os[2].dims,ps,!0)}`:"",Ks=ys?`${function(so,io,vo,co){let go=[],Eo=[];const Ro=vo[0].dims,Po=vo[1].dims,Oo=Ro.length,Ts=Po.length,Ns=co.length,to=Ns-Oo,ao=Ns-Ts;go=Ro.map((No,Co)=>`coords.${io[Co+to]}`),go[Oo-1]="i*2",go.join(", "),Eo=Po.map((No,Co)=>`coords.${io[Co+ao]}`),Eo[Ts-2]="i*2",Eo.join(", ");const lo=jr.BroadcastUtil.getBroadcastDims(Ro,co),Io=jr.BroadcastUtil.getBroadcastDims(Po,co),po=lo.map(No=>`coords.${io[No+to]} = 0;`).join(`
`),Fo=Io.map(No=>`coords.${io[No+ao]} = 0;`).join(`
`),Do=`int lastDim = coords.${io[Ns-1]};
  coords.${io[Ns-1]} = coords.${io[Ns-2]};
  coords.${io[Ns-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${so} coords = getOutputCoords();
  ${Do}
  ${po}
  vec4 outputValue = getA(${go});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${so} coords = getOutputCoords();
  ${Do}
  ${Fo}
  vec4 outputValue = getB(${Eo});
  return outputValue;
}`}(Bs,Cs,os,ps)}`:"",Ws=ys?"getAAtOutCoordsMatmul(i)":`getA(${function(so,io){let vo="";for(let co=0;co<io-2;co++)vo+=`rc.${so[co]}, `;return vo+=`rc.${so[io-2]}, i*2`,vo}(Cs,Es)})`,Js=ys?"getBAtOutCoordsMatmul(i)":`getB(${function(so,io){let vo="";for(let co=0;co<io-2;co++)vo+=`rc.${so[co]}, `;return vo+=`i*2, rc.${so[io-1]}`,vo}(Cs,Rs)})`,ho=`
            ${Ks}
            ${Us}
            ${Ss}
            void main() {
              ${ys?"":`${Bs} rc =
          getOutputCoords(); int lastDim = rc.${Cs[vs-1]}; rc.${Cs[vs-1]} =
          rc.${Cs[vs-2]}; rc.${Cs[vs-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${xs}; i++) {
                vec4 a = ${Ws};
                vec4 b = ${Js};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${ds}
              ${As}
              ${_s.output} = value;
            }`;return Object.assign(Object.assign({},ss),{output:{dims:ps,type:os[0].type,textureType:Wr.TextureType.packed},shaderSource:ho,hasMain:!0})})(es,qr,ns,Xr)})}},8276:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.getBiasForMatmul=_r.createMatmulProgramInfoLoader=_r.parseMatMulAttributes=_r.matMul=void 0;const jr=Ur(7273),Gr=Ur(5639),Wr=Ur(432),Zr=Ur(2150),Yr=Ur(5632);_r.matMul=(qr,_i,rs)=>(ns(_i),qr.session.pack?[qr.run((0,Yr.createPackedMatmulProgramInfoLoader)(qr,_i,rs),_i)]:[qr.run(es(_i,rs),_i)]),_r.parseMatMulAttributes=qr=>(0,Zr.parseInternalActivationAttributes)(qr.attributes);const ts=(qr,_i)=>({name:"MatMul",inputNames:qr?["A","B","Bias"]:["A","B"],inputTypes:qr?[Gr.TextureType.unpacked,Gr.TextureType.unpacked,Gr.TextureType.unpacked]:[Gr.TextureType.unpacked,Gr.TextureType.unpacked],cacheHint:_i});function es(qr,_i){const rs=ts(qr.length>2,_i.activationCacheKey);return Object.assign(Object.assign({},rs),{get:()=>function(is,ss,os){const ls=ss[0].dims,cs=ss[1].dims,ds=jr.BroadcastUtil.calcShape(ls,cs,!0);if(!ds)throw new Error("Can't use matmul on the given tensors");const fs=(0,Wr.getCoordsDataType)(ds.length),ms=(0,Wr.getGlChannels)(),{activationFunction:ps,applyActivation:ys}=(0,Zr.getActivationSnippet)(os),ws=ss.length>2,xs=ws?"value += getBiasForMatmul();":"",Es=ws?`${Xr(fs,ms,ss[2].dims,ds,!1)}`:"",Rs=ds.length,_s=ls.length,Bs=cs.length,vs=`
    ${ps}
    ${Es}
    float process(int indices[${Rs}]) {
        int a[${_s}];
        int b[${Bs}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${ls[ls.length-1]}; ++k) {
            a[${_s-1}] = k;
            b[${Bs-2}] = k;
            value += _A(a) * _B(b);
        }
        ${xs}
        ${ys}
        return value;
    }`;return Object.assign(Object.assign({},is),{output:{dims:ds,type:ss[0].type,textureType:Gr.TextureType.unpacked},shaderSource:vs})}(rs,qr,_i)})}_r.createMatmulProgramInfoLoader=es;const ns=qr=>{if(!qr||qr.length!==2)throw new Error("MatMul requires 2 inputs.");if(qr[0].dims[qr[0].dims.length-1]!==qr[1].dims[qr[1].dims.length-2])throw new Error("shared dimension does not match.");if(qr[0].type!=="float32"&&qr[0].type!=="float64"||qr[1].type!=="float32"&&qr[1].type!=="float64")throw new Error("inputs should be float type");if(qr[0].type!==qr[1].type)throw new Error("inputs types should match")};function Xr(qr,_i,rs,is,ss){let os="";const ls=rs.length,cs=is.length,ds=cs-ls;os=cs<2&&ls>0?"coords":rs.map((ps,ys)=>`coords.${_i[ys+ds]}`).join(", ");const fs=jr.BroadcastUtil.getBroadcastDims(rs,is).map(ps=>`coords.${_i[ps+ds]} = 0;`).join(`
`);let ms="vec4(outputValue.xx, outputValue.yy)";return jr.ShapeUtil.size(rs)===1&&(ms="vec4(outputValue.x)"),ss?`
vec4 getBiasForMatmul() {
  ${qr} coords = getOutputCoords();
  ${fs}
  vec4 outputValue = getBias(${os});
  return ${ms};
}`:`
float getBiasForMatmul() {
  ${qr} coords = getOutputCoords();
  ${fs}
  return getBias(coords.x);
}`}_r.getBiasForMatmul=Xr},9:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createPackProgramInfoLoader=void 0;const jr=Ur(6757),Gr=Ur(5639),Wr=Ur(432),Zr=Ur(5614),Yr={name:"pack",inputNames:["A"],inputTypes:[Gr.TextureType.unpackedReversed]};_r.createPackProgramInfoLoader=(ts,es)=>Object.assign(Object.assign({},Yr),{get:()=>((ns,Xr)=>{const qr=(0,jr.getGlsl)(ns.session.backend.glContext.version),_i=Xr.dims,rs=_i.length,is=Xr.dims.length,ss=(0,Wr.getCoordsDataType)(is),os=(0,Zr.getChannels)("rc",is),ls=(cs=is,ds=os,fs=_i[_i.length-2],ms=_i[_i.length-1],cs===0||cs===1?"":`
    int r = ${ds[cs-2]};
    int c = ${ds[cs-1]};
    int rp1 = ${ds[cs-2]} + 1;
    int cp1 = ${ds[cs-1]} + 1;
    bool rEdge = rp1 >= ${ms};
    bool cEdge = cp1 >= ${fs};
    `);var cs,ds,fs,ms;let ps;ps=rs===0?[1,1]:rs===1?[_i[0],1]:[_i[is-1],_i[is-2]];const ys=function(Es,Rs,_s){if(Es===0)return"false";if(Es===1)return`rc > ${Rs[0]}`;let Bs="";for(let vs=Es-2;vs<Es;vs++)Bs+=`${_s[vs]} >= ${Rs[vs-Es+2]}`,vs<Es-1&&(Bs+="||");return Bs}(is,ps,os),ws=function(Es,Rs){const _s=Es.length;if(_s===0)return"getA(), 0, 0, 0";if(_s===1)return`getA(rc),
            rc + 1 >= ${Es[0]} ? 0. : getA(rc + 1),
            0, 0`;let Bs="";if(_s>2)for(let vs=0;vs<_s-2;++vs)Bs+=`${Rs[vs]},`;return`getA(${Bs}r, c),
          rEdge ? 0. : getA(${Bs}rp1, c),
          cEdge ? 0. : getA(${Bs}r, cp1),
          rEdge || cEdge ? 0. : getA(${Bs}rp1, cp1)`}(_i,os),xs=`
        void main() {
          ${ss} rc = getOutputCoords();

          if(${ys}) {
            ${qr.output} = vec4(0);
          } else {
            ${ls}

            ${qr.output} = vec4(${ws});
          }
        }
      `;return Object.assign(Object.assign({},Yr),{hasMain:!0,output:{dims:Xr.dims,type:Xr.type,textureType:Gr.TextureType.packed},shaderSource:xs})})(ts,es)})},5614:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.unpackFromChannel=_r.getChannels=_r.getVecChannels=void 0;const jr=Ur(432);function Gr(Wr,Zr){return(0,jr.getGlChannels)(Zr).map(Yr=>`${Wr}.${Yr}`)}_r.getVecChannels=Gr,_r.getChannels=function(Wr,Zr){return Zr===1?[Wr]:Gr(Wr,Zr)},_r.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},5565:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parsePadAttributesV11=_r.padV11=_r.parsePadAttributesV2=_r.padV2=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(6757),Zr=Ur(5639),Yr={name:"Pad",inputNames:["A"],inputTypes:[Zr.TextureType.unpacked]};_r.padV2=(ss,os,ls)=>(ns(os),[ss.run(Object.assign(Object.assign({},Yr),{cacheHint:ls.cacheKey,get:()=>es(ss,os[0],ls)}),os)]),_r.parsePadAttributesV2=ss=>{const os=ss.attributes.getString("mode","constant"),ls=ss.attributes.getFloat("value",0),cs=ss.attributes.getInts("pads");return(0,jr.createAttributeWithCacheKey)({mode:os,value:ls,pads:cs})},_r.padV11=(ss,os,ls)=>{Xr(os);const cs=ts(ss,os,ls);return(0,_r.padV2)(ss,[os[0]],cs)},_r.parsePadAttributesV11=ss=>ss.attributes.getString("mode","constant");const ts=(ss,os,ls)=>{if(!ss.session.isInitializer(os[1].dataId)||os.length>=3&&!ss.session.isInitializer(os[2].dataId))throw new Error("dynamic pad attributes are not allowed");const cs=Array.from(os[1].integerData),ds=os.length>=3?os[2].floatData[0]:0;return(0,jr.createAttributeWithCacheKey)({mode:ls,pads:cs,value:ds})},es=(ss,os,ls)=>{const cs=Gr.ShapeUtil.padShape(os.dims.slice(),ls.pads),ds=cs.length,fs=`
      ${qr(ss,os,ls)}
      float process(int[${ds}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[Zr.TextureType.unpacked],output:{dims:cs,type:os.type,textureType:Zr.TextureType.unpacked},shaderSource:fs}},ns=ss=>{if(!ss||ss.length!==1)throw new Error("Pad requires 1 input");if(ss[0].type!=="float32"&&ss[0].type!=="float64")throw new Error("Invalid input type.")},Xr=ss=>{if(!ss||ss.length!==2&&ss.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(ss[1].type!=="int32")throw new Error("Invalid input type.");if(ss.length>=3&&ss[2].type==="string")throw new Error("Invalid input type.")},qr=(ss,os,ls)=>{const cs=(0,Wr.getGlsl)(ss.session.backend.glContext.version),[ds,fs]=ss.calculateTextureWidthAndHeight(os.dims,Zr.TextureType.unpacked),ms=Gr.ShapeUtil.computeStrides(os.dims);switch(ls.mode){case"constant":return _i(cs,os.dims,ms,ds,fs,ls.pads,ls.value);case"reflect":return rs(cs,os.dims,ms,ds,fs,ls.pads);case"edge":return is(cs,os.dims,ms,ds,fs,ls.pads);default:throw new Error("Invalid mode")}},_i=(ss,os,ls,cs,ds,fs,ms)=>{const ps=os.length;let ys="";for(let ws=ps-1;ws>=0;--ws)ys+=`
        k = m[${ws}] - ${fs[ws]};
        if (k < 0)  return constant;
        if (k >= ${os[ws]}) return constant;
        offset += k * ${ls[ws]};
        `;return`
      float padA(int m[${ps}]) {
        const float constant = float(${ms});
        int offset = 0;
        int k = 0;
        ${ys}
        vec2 coords = offsetToCoords(offset, ${cs}, ${ds});
        float value = getColorAsFloat(${ss.texture2D}(A, coords));
        return value;
      }
      `},rs=(ss,os,ls,cs,ds,fs)=>{const ms=os.length;let ps="";for(let ys=ms-1;ys>=0;--ys)ps+=`
        k = m[${ys}] - ${fs[ys]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(os[ys]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${os[ys]}) { k = _2n_1 - k; }
        }
        offset += k * ${ls[ys]};
        `;return`
      float padA(int m[${ms}]) {
        int offset = 0;
        int k = 0;
        ${ps}
        vec2 coords = offsetToCoords(offset, ${cs}, ${ds});
        float value = getColorAsFloat(${ss.texture2D}(A, coords));
        return value;
      }
      `},is=(ss,os,ls,cs,ds,fs)=>{const ms=os.length;let ps="";for(let ys=ms-1;ys>=0;--ys)ps+=`
        k = m[${ys}] - ${fs[ys]};
        if (k < 0)  k = 0;
        if (k >= ${os[ys]}) k = ${os[ys]-1};
        offset += k * ${ls[ys]};
      `;return`
      float padA(int m[${ms}]) {
        int offset = 0;
        int k = 0;
        ${ps}
        vec2 coords = offsetToCoords(offset, ${cs}, ${ds});
        float value = getColorAsFloat(${ss.texture2D}(A, coords));
        return value;
      }
      `}},2834:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.globalMaxPool=_r.parseMaxPoolAttributes=_r.maxPool=_r.parseGlobalAveragePoolAttributes=_r.globalAveragePool=_r.parseAveragePoolAttributes=_r.averagePool=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(5639);_r.averagePool=(is,ss,os)=>{Xr(ss);const ls={name:"AveragePool",inputNames:["X"],inputTypes:[Wr.TextureType.unpacked],cacheHint:os.cacheKey};return[is.run(Object.assign(Object.assign({},ls),{get:()=>Zr(ss,ls,!1,os)}),ss)]},_r.parseAveragePoolAttributes=is=>{const ss=is.attributes.getString("auto_pad","NOTSET"),os=is.attributes.getInt("ceil_mode",0),ls=is.attributes.getInt("count_include_pad",0)!==0,cs=is.attributes.getInts("kernel_shape"),ds=is.attributes.getInts("strides",[]),fs=is.attributes.getInts("pads",[]);if(os!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,jr.createAttributeWithCacheKey)({autoPad:ss,ceilMode:os,countIncludePad:ls,kernelShape:cs,strides:ds,pads:fs})};const Zr=(is,ss,os,ls)=>{const[cs,ds]=ts(is,ls,os),fs=Gr.ShapeUtil.size(cs.kernelShape);let ms="";cs.countIncludePad?ms+=`value /= float(${fs});`:ms+=`value /= float(${fs} - pad);`;const ps=`
        ${qr(is[0].dims,cs,"value += _X(x);",ms,"0.0")}
      `;return Object.assign(Object.assign({},ss),{output:{dims:ds,type:is[0].type,textureType:Wr.TextureType.unpacked},shaderSource:ps})};_r.globalAveragePool=(is,ss,os)=>{Xr(ss);const ls={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[Wr.TextureType.unpacked],cacheHint:`${os.countIncludePad}`};return[is.run(Object.assign(Object.assign({},ls),{get:()=>Zr(ss,ls,!0,os)}),ss)]},_r.parseGlobalAveragePoolAttributes=is=>{const ss=is.attributes.getInt("count_include_pad",0)!==0;return(0,jr.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:ss,kernelShape:[],strides:[],pads:[]})},_r.maxPool=(is,ss,os)=>{Xr(ss);const ls={name:"MaxPool",inputNames:["X"],inputTypes:[Wr.TextureType.unpacked],cacheHint:os.cacheKey};return[is.run(Object.assign(Object.assign({},ls),{get:()=>Yr(ss,ls,!1,os)}),ss)]},_r.parseMaxPoolAttributes=is=>{const ss=is.attributes.getString("auto_pad","NOTSET"),os=is.attributes.getInt("ceil_mode",0),ls=is.attributes.getInts("kernel_shape"),cs=is.attributes.getInts("strides",[]),ds=is.attributes.getInts("pads",[]),fs=is.attributes.getInt("storage_order",0),ms=is.attributes.getInts("dilations",[]);if(fs!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(os!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,jr.createAttributeWithCacheKey)({autoPad:ss,ceilMode:os,countIncludePad:!1,kernelShape:ls,strides:cs,pads:ds,storageOrder:fs,dilations:ms})};const Yr=(is,ss,os,ls)=>{const[cs,ds]=ts(is,ls,os),fs=`
      ${qr(is[0].dims,cs,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},ss),{output:{dims:ds,type:is[0].type,textureType:Wr.TextureType.unpacked},shaderSource:fs})},ts=(is,ss,os)=>{const ls=is[0].dims.slice(),cs=Object.hasOwnProperty.call(ss,"dilations"),ds=ss.kernelShape.slice(),fs=ss.strides.slice(),ms=cs?ss.dilations.slice():[],ps=ss.pads.slice();Gr.PoolConvUtil.adjustPoolAttributes(os,ls,ds,fs,ms,ps);const ys=Gr.PoolConvUtil.computePoolOutputShape(os,ls,fs,ms,ds,ps,ss.autoPad),ws=Object.assign({},ss);return cs?Object.assign(ws,{kernelShape:ds,strides:fs,pads:ps,dilations:ms,cacheKey:ss.cacheKey}):Object.assign(ws,{kernelShape:ds,strides:fs,pads:ps,cacheKey:ss.cacheKey}),[ws,ys]},es={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},ns={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[Wr.TextureType.unpacked]};_r.globalMaxPool=(is,ss)=>(Xr(ss),[is.run(Object.assign(Object.assign({},ns),{get:()=>Yr(ss,ns,!0,es)}),ss)]);const Xr=is=>{if(!is||is.length!==1)throw new Error("Pool ops requires 1 input.");if(is[0].type!=="float32"&&is[0].type!=="float64")throw new Error("Invalid input type.")},qr=(is,ss,os,ls,cs)=>{const ds=is.length;if(ss.kernelShape.length<=2){const fs=ss.kernelShape[ss.kernelShape.length-1],ms=ss.strides[ss.strides.length-1],ps=ss.pads[ss.pads.length/2-1],ys=ss.pads[ss.pads.length-1],ws=is[ds-1];let xs="",Es="",Rs="";if(xs=ps+ys!==0?`
          for (int i = 0; i < ${fs}; i++) {
            x[${ds} - 1] = indices[${ds} - 1] * ${ms} - ${ps} + i;
            if (x[${ds} - 1] < 0 || x[${ds} - 1] >= ${ws}) {
              pad++;
              continue;
            }
            ${os}
          }`:`
          for (int i = 0; i < ${fs}; i++) {
            x[${ds} - 1] = indices[${ds} - 1] * ${ms} - ${ps} + i;
            ${os}
          }`,ss.kernelShape.length===2){const _s=ss.kernelShape[ss.kernelShape.length-2],Bs=ss.strides[ss.strides.length-2],vs=ss.pads[ss.pads.length/2-2],Cs=ss.pads[ss.pads.length-2],Ss=is[ds-2];Es=vs+Cs!==0?`
            for (int j = 0; j < ${_s}; j++) {
              x[${ds} - 2] = indices[${ds} - 2] * ${Bs} - ${vs} + j;
              if (x[${ds} - 2] < 0 || x[${ds} - 2] >= ${Ss}) {
                pad+= ${fs};
                continue;
              }
          `:`
            for (int j = 0; j < ${_s}; j++) {
              x[${ds} - 2] = indices[${ds} - 2] * ${Bs} - ${vs} + j;
            `,Rs=`
          }
        `}return`
        float process(int indices[${ds}]) {
          int x[${ds}];
          copyVec(indices, x);

          float value = ${cs};
          int pad = 0;
          ${Es}
          ${xs}
          ${Rs}
          ${ls}
          return value;
        }
      `}{const fs=Gr.ShapeUtil.size(ss.kernelShape),ms=Gr.ShapeUtil.computeStrides(ss.kernelShape),ps=ms.length,ys=ss.pads.length,ws=rs(ps),xs=_i(is,"inputDims"),Es=_i(ss.pads,"pads"),Rs=_i(ms,"kernelStrides"),_s=_i(ss.strides,"strides");let Bs="";return Bs=ss.pads.reduce((vs,Cs)=>vs+Cs)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${os}
          }`:`
          }
          ${os}
        `,`
        ${ws}
        float process(int indices[${ds}]) {
          int x[${ds}];
          copyVec(indices, x);
          int offset[${ps}];
          int pads[${ys}];
          int inputDims[${ds}];
          int kernelStrides[${ps}];
          int strides[${ps}];
          ${Es}
          ${xs}
          ${_s}
          ${Rs}

          float value = ${cs};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${fs}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${ds} - ${ps}; j < ${ds}; j++) {
              x[j] = indices[j] * strides[j - ${ds} + ${ps}]
                + offset[j - ${ds} + ${ps}] - pads[j - 2];
              ${Bs}
          }
          ${ls}

          return value;
        }
      `}},_i=(is,ss)=>{let os="";for(let ls=0;ls<is.length;ls++)os+=`
      ${ss}[${ls}] = ${is[ls]};
    `;return os},rs=is=>`
  void offsetToIndices(int offset, int[${is}] strides, out int[${is}] indices) {
    if (${is} == 0) {
      return;
    }
    for (int i = 0; i < ${is} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${is} - 1] = offset;
  }`},1010:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.reduceLogSumSquare=_r.reduceLogSum=_r.reduceProd=_r.reduceMin=_r.reduceMax=_r.reduceMean=_r.reduceSum=_r.parseReduceAttributes=void 0;const jr=Ur(4910),Gr=Ur(6145),Wr=Ur(7273),Zr=Ur(5639),Yr=(ns,Xr,qr,_i,rs)=>{es(Xr);const is={name:_i,inputNames:["A"],inputTypes:[Zr.TextureType.unpacked]};return[ns.run(Object.assign(Object.assign({},is),{cacheHint:qr.cacheKey,get:()=>ts(ns,Xr,qr,_i,rs,is)}),Xr)]};_r.parseReduceAttributes=ns=>{const Xr=ns.attributes.getInts("axes",[]),qr=ns.attributes.getInt("keepdims",1)===1;return(0,jr.createAttributeWithCacheKey)({axes:Xr,keepDims:qr})};const ts=(ns,Xr,qr,_i,rs,is)=>{const ss=[],os=Xr[0].dims.length||1,ls=[],cs=Wr.ShapeUtil.normalizeAxes(qr.axes,Xr[0].dims.length),ds=rs(Xr,cs);let fs=ds[1];for(let ps=0;ps<Xr[0].dims.length;ps++)cs.indexOf(ps)>=0||cs.length===0?(qr.keepDims&&ss.push(1),fs=`
          for(int j${ps} = 0; j${ps} < ${Xr[0].dims[ps]}; j${ps}++) {
            inputIdx[${ps}] = j${ps};
            ${fs}
          }`):(ls.push(`inputIdx[${ps}] = outputIdx[${ss.length}];`),ss.push(Xr[0].dims[ps]));const ms=`
      float process(int outputIdx[${ss.length||1}]) {
        float value;                 // final result
        int inputIdx[${os}];      // addressing input data
        ${ls.join(`
`)}
        ${ds[0]}       // init ops for reduce max/min
        ${fs}
        ${ds[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},is),{output:{dims:ss,type:Xr[0].type,textureType:Zr.TextureType.unpacked},shaderSource:ms})},es=ns=>{if(!ns||ns.length!==1)throw new Error("Reduce op requires 1 input.");if(Gr.NUMBER_TYPES.indexOf(ns[0].type)===-1)throw new Error("Invalid input type.")};_r.reduceSum=(ns,Xr,qr)=>Yr(ns,Xr,qr,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),_r.reduceMean=(ns,Xr,qr)=>Yr(ns,Xr,qr,"ReduceMean",(_i,rs)=>{let is=1;for(let ss=0;ss<_i[0].dims.length;ss++)(rs.indexOf(ss)>=0||rs.length===0)&&(is*=_i[0].dims[ss]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${is}.;`]}),_r.reduceMax=(ns,Xr,qr)=>Yr(ns,Xr,qr,"ReduceMax",(_i,rs)=>{const is=[];for(let ss=0;ss<_i[0].dims.length;ss++)(rs.indexOf(ss)>=0||rs.length===0)&&is.push(`inputIdx[${ss}] = 0;`);return[`${is.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),_r.reduceMin=(ns,Xr,qr)=>Yr(ns,Xr,qr,"ReduceMin",(_i,rs)=>{const is=[];for(let ss=0;ss<_i[0].dims.length;ss++)(rs.indexOf(ss)>=0||rs.length===0)&&is.push(`inputIdx[${ss}] = 0;`);return[`${is.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),_r.reduceProd=(ns,Xr,qr)=>Yr(ns,Xr,qr,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),_r.reduceLogSum=(ns,Xr,qr)=>Yr(ns,Xr,qr,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),_r.reduceLogSumSquare=(ns,Xr,qr)=>Yr(ns,Xr,qr,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7379:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.isReshapeCheap=_r.processDims3D=_r.createPackedReshape3DProgramInfoLoader=void 0;const jr=Ur(7273),Gr=Ur(6757),Wr=Ur(5639),Zr=Ur(5614);_r.createPackedReshape3DProgramInfoLoader=(Yr,ts,es)=>{const ns=(Xr=>({name:"Reshape (packed)",inputTypes:[Wr.TextureType.packed],inputNames:["A"],cacheHint:`${Xr}`}))(es);return Object.assign(Object.assign({},ns),{get:()=>((Xr,qr,_i,rs)=>{const is=qr.dims,ss=rs;let os="";for(let ds=0;ds<4;ds++){let fs="";switch(ds){case 0:fs="outputCoords = rc;";break;case 1:fs="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:fs="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:fs="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}os+=`
        ${fs}
        ${ds>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${ds}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${ds>0?"}":""}
      `}const ls=(0,Gr.getGlsl)(Xr.session.backend.glContext.version),cs=`
      ${function(ds){const fs=jr.ShapeUtil.computeStrides(ds),ms=["b","r","c"],ps="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${fs.map((ys,ws)=>`int ${ms[ws]} = ${ps} / ${ys}; ${ws===fs.length-1?`int ${ms[ws+1]} = ${ps} - ${ms[ws]} * ${ys}`:`index -= ${ms[ws]} * ${ys}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(is)}
      ${function(ds){const fs=jr.ShapeUtil.computeStrides(ds);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${fs[0]} + coords.z * ${fs[1]} + coords.y;
  }
`}(ss)}
      ${(0,Zr.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${ss[2]};
        int cols = ${ss[1]};

        ${os}
        ${ls.output} = result;
      }
    `;return Object.assign(Object.assign({},_i),{output:{dims:ss,type:qr.type,textureType:Wr.TextureType.packed},shaderSource:cs,hasMain:!0})})(Yr,ts,ns,es)})},_r.processDims3D=function(Yr){if(Yr.length===0)return[1,1,1];let ts=1;for(let es=0;es<Yr.length-2;++es)ts*=Yr[es];return[ts,Yr.length>1?Yr[Yr.length-2]:1,Yr[Yr.length-1]]},_r.isReshapeCheap=function(Yr,ts){let es=!1;return es=Yr.length===0||ts.length===0||(Yr.length<2||ts.length<2?Yr[Yr.length-1]===ts[ts.length-1]:Yr[Yr.length-1]===ts[ts.length-1]&&Yr[Yr.length-2]===ts[ts.length-2]),es}},8126:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.reshape=void 0;const jr=Ur(7273);_r.reshape=(Gr,Wr)=>{const Zr=jr.ShapeUtil.calculateReshapedDims(Wr[0].dims,Wr[1].integerData);return Gr.session.pack?[Gr.reshapePacked(Wr[0],Zr)]:[Gr.reshapeUnpacked(Wr[0],Zr)]}},2801:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseResizeAttributesV11=_r.parseResizeAttributesV10=_r.resize=void 0;const jr=Ur(6757),Gr=Ur(5639),Wr=Ur(432),Zr=Ur(5614),Yr=Ur(3980),ts={name:"Resize",inputNames:["A"],inputTypes:[Gr.TextureType.packed]};_r.resize=(_i,rs,is)=>((0,Yr.validateInputs)(rs,is),[_i.run(Object.assign(Object.assign({},ts),{cacheHint:is.cacheKey,get:()=>es(_i,rs,is)}),rs)]),_r.parseResizeAttributesV10=_i=>(0,Yr.parseUpsampleAttributes)(_i,10),_r.parseResizeAttributesV11=_i=>(0,Yr.parseUpsampleAttributes)(_i,11);const es=(_i,rs,is)=>{const ss=(0,jr.getGlsl)(_i.session.backend.glContext.version),[os,ls]=ns(rs,is);if(os.every(Bs=>Bs===1)&&is.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},ts),{output:{dims:ls,type:rs[0].type,textureType:Gr.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${ss.texture2D}(X, TexCoords);
                    ${ss.output} = v;
                }`});const cs=ls.length;if(cs<2)throw new Error(`output dimension should be at least 2, but got ${cs}`);const ds=ls[cs-2],fs=ls[cs-1],ms=rs[0].dims;if(cs!==ms.length)throw new Error(`output dimension should match input ${ms.length}, but got ${cs}`);const ps=ms[cs-2],ys=ms[cs-1],ws=os[cs-2],xs=os[cs-1];let Es="";if(is.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${is.mode}'`);switch(is.coordinateTransformMode){case"asymmetric":Es=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Es=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Es=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${fs}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${ds}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${fs}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${ds}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Es=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${fs}.0 - 1.0, ${ds}.0 - 1.0, ${fs}.0 - 1.0,
                            ${ds}.0 - 1.0);
                        vec4 original = vec4(${ys}.0 - 1.0, ${ps}.0 - 1.0, ${ys}.0 - 1.0,
                            ${ps}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${is.coordinateTransformMode}'`)}const Rs=(0,Wr.getCoordsDataType)(cs),_s=`
            const vec2 inputWH = vec2(${ps}.0, ${ys}.0);
            const vec4 scaleWHWH = vec4(float(${ws}), float(${xs}), float(${ws}), float(${xs}));
            ${(0,Zr.unpackFromChannel)()}
            ${Es}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Rs} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${ds-1};
                bool hasNextCol = rc.z < ${fs-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${ss.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},ts),{output:{dims:ls,type:rs[0].type,textureType:Gr.TextureType.packed},hasMain:!0,shaderSource:_s})},ns=(_i,rs)=>{const is=_i[0].dims;let ss,os=rs.scales;if(os.length===0){const cs=_i[rs.scalesInputIdx];if(cs&&cs.size!==0){if(_i[rs.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");os=Xr(cs,rs.mode,rs.isResize)}else{const ds=_i[rs.sizesInputIdx];if(!ds||ds.size===0)throw new Error("Either scales or sizes MUST be provided as input.");ss=Array.from(ds.integerData),os=qr(ss,is,rs.mode,rs.isResize)}}else if(_i[rs.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const ls=ss||is.map((cs,ds)=>Math.floor(cs*os[ds]));return[os,ls]},Xr=(_i,rs,is)=>{const ss=Array.from(_i.floatData);return(0,Yr.scalesValidation)(ss,rs,is),ss},qr=(_i,rs,is,ss)=>{const os=rs.length,ls=new Array(os);for(let cs=0,ds=os;cs<ds;cs++)if(rs[cs]===0){if(_i[cs]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");ls[cs]=1}else ls[cs]=_i[cs]/rs[cs];return(0,Yr.scalesValidation)(ls,is,ss),ls}},565:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.shape=void 0;const jr=Ur(9240);_r.shape=(Wr,Zr)=>(Gr(Zr),[new jr.Tensor([Zr[0].dims.length],"int32",void 0,void 0,new Int32Array(Zr[0].dims))]);const Gr=Wr=>{if(!Wr||Wr.length!==1)throw new Error("Shape requires 1 input.")}},2444:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.sliceV10=_r.parseSliceAttributes=_r.slice=void 0;const jr=Ur(4910),Gr=Ur(6145),Wr=Ur(7273),Zr=Ur(5639),Yr={name:"Slice",inputNames:["A"],inputTypes:[Zr.TextureType.unpacked]};_r.slice=(qr,_i,rs)=>(es(_i),[qr.run(Object.assign(Object.assign({},Yr),{cacheHint:rs.cacheKey,get:()=>ts(qr,_i[0],rs)}),_i)]),_r.parseSliceAttributes=qr=>{const _i=qr.attributes.getInts("starts"),rs=qr.attributes.getInts("ends"),is=qr.attributes.getInts("axes",[]);return(0,jr.createAttributeWithCacheKey)({starts:_i,ends:rs,axes:is})};const ts=(qr,_i,rs)=>{const is=rs.axes.length===0?_i.dims.slice(0).map((ms,ps)=>ps):rs.axes,ss=Wr.ShapeUtil.normalizeAxes(is,_i.dims.length),os=rs.starts.map((ms,ps)=>ms>_i.dims[ss[ps]]-1?_i.dims[ss[ps]]:Wr.ShapeUtil.normalizeAxis(ms,_i.dims[ss[ps]])),ls=rs.ends.map((ms,ps)=>ms>_i.dims[ss[ps]]-1?_i.dims[ss[ps]]:Wr.ShapeUtil.normalizeAxis(ms,_i.dims[ss[ps]])),cs=_i.dims.slice(),ds=[];for(let ms=0;ms<ss.length;ms++)cs[ss[ms]]=ls[ms]-os[ms],os[ms]>0&&ds.push(`outputIdx[${ss[ms]}] += ${os[ms]};`);const fs=`
      float process(int outputIdx[${cs.length}]) {
        ${ds.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},Yr),{output:{dims:cs,type:_i.type,textureType:Zr.TextureType.unpacked},shaderSource:fs})},es=qr=>{if(!qr||qr.length!==1)throw new Error("Slice requires 1 input.");if(Gr.NUMBER_TYPES.indexOf(qr[0].type)===-1)throw new Error("Invalid input type.")};_r.sliceV10=(qr,_i)=>{Xr(_i);const rs=ns(qr,_i);return[qr.run(Object.assign(Object.assign({},Yr),{cacheHint:rs.cacheKey,get:()=>ts(qr,_i[0],rs)}),[_i[0]])]};const ns=(qr,_i)=>{if(!qr.session.isInitializer(_i[1].dataId)||!qr.session.isInitializer(_i[2].dataId)||_i.length>=4&&!qr.session.isInitializer(_i[3].dataId)||_i.length>=5&&!qr.session.isInitializer(_i[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(_i.length>=5&&_i[4].integerData.some(os=>os!==1))throw new Error("currently non-1 steps is not supported for Slice");const rs=Array.from(_i[1].integerData),is=Array.from(_i[2].integerData),ss=_i.length>=4?Array.from(_i[3].integerData):[];return{starts:rs,ends:is,axes:ss,cacheKey:`${ss};${rs};${is}`}},Xr=qr=>{if(!qr||qr.length<3||qr.length>5)throw new Error("Invalid input number.");if(qr[1].type!=="int32"||qr[1].dims.length!==1)throw new Error("Invalid input type.");if(qr[2].type!=="int32"||qr[2].dims.length!==1)throw new Error("Invalid input type.");if(qr.length>=4&&(qr[3].type!=="int32"||qr[3].dims.length!==1))throw new Error("Invalid input type.");if(qr.length>=5&&(qr[4].type!=="int32"||qr[4].dims.length!==1))throw new Error("Invalid input type.")}},815:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.softmaxV13=_r.parseSoftmaxAttributesV13=_r.parseSoftmaxAttributes=_r.softmax=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(6757),Zr=Ur(5639),Yr=Ur(5707),ts={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[Zr.TextureType.unpacked]},es={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[Zr.TextureType.unpacked,Zr.TextureType.unpacked]},ns={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[Zr.TextureType.unpacked,Zr.TextureType.unpacked,Zr.TextureType.unpacked]};_r.softmax=(ss,os,ls)=>{is(os);const cs=os[0].dims.slice(),ds=Gr.ShapeUtil.normalizeAxis(ls.axis,cs.length),fs=Gr.ShapeUtil.sizeToDimension(cs,ds),ms=Gr.ShapeUtil.sizeFromDimension(cs,ds);return Xr(ss,os,ls,fs,ms)},_r.parseSoftmaxAttributes=ss=>(0,jr.createAttributeWithCacheKey)({axis:ss.attributes.getInt("axis",1)}),_r.parseSoftmaxAttributesV13=ss=>(0,jr.createAttributeWithCacheKey)({axis:ss.attributes.getInt("axis",-1)}),_r.softmaxV13=(ss,os,ls)=>{is(os);const cs=os[0].dims.slice(),ds=Gr.ShapeUtil.normalizeAxis(ls.axis,cs.length),fs=cs.length,ms=ds!==fs-1,ps=[];let ys,ws=[],xs=[];ms&&(ws=Array.from({length:fs}).map((Bs,vs)=>vs),ws[ds]=fs-1,ws[fs-1]=ds,ws.map(Bs=>ps.push(cs[Bs])),ys=(0,jr.createAttributeWithCacheKey)({perm:ws}),xs=(0,Yr.transpose)(ss,os,ys));const Es=ms?Gr.ShapeUtil.sizeToDimension(ps,fs-1):Gr.ShapeUtil.sizeToDimension(cs,fs-1),Rs=ms?Gr.ShapeUtil.sizeFromDimension(ps,fs-1):Gr.ShapeUtil.sizeFromDimension(cs,fs-1),_s=Xr(ss,ms?xs:os,ls,Es,Rs);return ms?(0,Yr.transpose)(ss,_s,ys):_s};const Xr=(ss,os,ls,cs,ds)=>{const fs=qr(ss,os[0],cs,ds,[cs]),ms=ss.run(Object.assign(Object.assign({},ts),{cacheHint:ls.cacheKey,get:()=>fs}),os),ps=_i(ss,os[0],cs,ds,fs.output.dims,[cs]),ys=ss.run(Object.assign(Object.assign({},es),{cacheHint:ls.cacheKey,get:()=>ps}),[os[0],ms]),ws=rs(ss,os[0],cs,ds,fs.output.dims,ps.output.dims);return[ss.run(Object.assign(Object.assign({},ns),{cacheHint:ls.cacheKey,get:()=>ws}),[os[0],ms,ys])]},qr=(ss,os,ls,cs,ds)=>{const[fs,ms]=ss.calculateTextureWidthAndHeight(os.dims,Zr.TextureType.unpacked),ps=ds.length;if(ls<1||cs<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ds.length!==1)throw new Error("Dimensionality of the output should be 1");if(ds[0]!==ls)throw new Error("Shape of the output should be equal to logical row count");const ys=(0,Wr.getGlsl)(ss.session.backend.glContext.version),ws=`
      float process(int[${ps}] indices) {
        int logical_row_start_offset = indices[0] * ${cs};

        float max = getColorAsFloat(${ys.texture2D}(A, offsetToCoords(logical_row_start_offset, ${fs},
        ${ms} )));
        for(int i=1; i<${cs}; ++i)
        {
          float current = getColorAsFloat(${ys.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${fs}, ${ms})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},ts),{output:{dims:ds,type:os.type,textureType:Zr.TextureType.unpacked},shaderSource:ws})},_i=(ss,os,ls,cs,ds,fs)=>{const[ms,ps]=ss.calculateTextureWidthAndHeight(os.dims,Zr.TextureType.unpacked),ys=fs.length;if(ls<1||cs<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(fs.length!==1)throw new Error("Dimensionality of the output should be 1");if(fs[0]!==ls)throw new Error("Shape of the output should be equal to logical row count");if(ds.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ds[0]!==ls)throw new Error("Shape of the intermediate results should be equal to logical row count");const ws=`
      float process(int[${ys}] indices) {
        int logical_row_start_offset = indices[0] * ${cs};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${cs}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,Wr.getGlsl)(ss.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${ms}, ${ps}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},es),{output:{dims:fs,type:os.type,textureType:Zr.TextureType.unpacked},shaderSource:ws})},rs=(ss,os,ls,cs,ds,fs)=>{const[ms,ps]=ss.calculateTextureWidthAndHeight(os.dims,Zr.TextureType.unpacked),ys=os.dims.length;if(ls<1||cs<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ds.length!==1||fs.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ds[0]!==ls||fs[0]!==ls)throw new Error("Shape of the intermediate results should be equal to logical row count");const ws=`
      float process(int[${ys}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${ms}, ${ps});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${cs};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},ns),{output:{dims:os.dims,type:os.type,textureType:Zr.TextureType.unpacked},shaderSource:ws})},is=ss=>{if(!ss||ss.length!==1)throw new Error("Softmax requires 1 input.");if(ss[0].type!=="float32"&&ss[0].type!=="float64")throw new Error("Invalid input type")}},564:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseSplitAttributes=_r.split=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(5639),Zr={name:"Split",inputNames:["A"],inputTypes:[Wr.TextureType.unpacked]};_r.split=(ns,Xr,qr)=>{es(Xr);const _i=Gr.ShapeUtil.normalizeAxis(qr.axis,Xr[0].dims.length),rs=Yr(ns,Xr,_i,qr),is=[];for(let ss=0;ss<rs;++ss)is.push(ns.run(Object.assign(Object.assign({},Zr),{cacheHint:`${qr.cacheKey};${ss}`,get:()=>ts(ns,Xr[0],qr,_i,ss)}),Xr));return is},_r.parseSplitAttributes=ns=>{const Xr=ns.attributes.getInt("axis",0),qr=ns.attributes.getInts("split",[]),_i=ns.outputs.length;return(0,jr.createAttributeWithCacheKey)({axis:Xr,split:qr,numOutputs:_i})};const Yr=(ns,Xr,qr,_i)=>{const[,rs]=Gr.SplitUtil.splitShape(Xr[0].dims,qr,_i.split,_i.numOutputs);return rs.length},ts=(ns,Xr,qr,_i,rs)=>{const[is,ss]=Gr.SplitUtil.splitShape(Xr.dims,_i,qr.split,qr.numOutputs),os=ss[rs],ls=is[rs],cs=`
      float process(int indices[${ls.length}]) {
        indices[${_i}] += ${os};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},Zr),{cacheHint:`${qr.cacheKey}:${rs}`,output:{dims:ls,type:Xr.type,textureType:Wr.TextureType.unpacked},shaderSource:cs})},es=ns=>{if(!ns||ns.length!==1)throw new Error("Split requires one input.");if(ns[0].type!=="int8"&&ns[0].type!=="uint8"&&ns[0].type!=="int16"&&ns[0].type!=="uint16"&&ns[0].type!=="int32"&&ns[0].type!=="uint32"&&ns[0].type!=="float32"&&ns[0].type!=="float64"&&ns[0].type!=="bool")throw new Error("Invalid input type.")}},5416:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseSqueezeAttributes=_r.squeezeV13=_r.squeeze=void 0;const jr=Ur(7273);_r.squeeze=(Zr,Yr,ts)=>{Gr(Yr);const es=jr.ShapeUtil.squeezeShape(Yr[0].dims,ts);return[Zr.reshapeUnpacked(Yr[0],es)]},_r.squeezeV13=(Zr,Yr)=>(Wr(Yr),(0,_r.squeeze)(Zr,[Yr[0]],Array.from(Yr[1].integerData))),_r.parseSqueezeAttributes=Zr=>Zr.attributes.getInts("axes");const Gr=Zr=>{if(!Zr||Zr.length!==1)throw new Error("Squeeze requires 1 input.");if(Zr[0].type==="string")throw new Error("invalid input tensor types.")},Wr=Zr=>{if(!Zr||Zr.length!==2)throw new Error("Squeeze requires 2 inputs.");if(Zr[1].type!=="int32")throw new Error("Invalid input type.")}},1240:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.sum=void 0;const jr=Ur(6757),Gr=Ur(5639);_r.sum=(Yr,ts)=>{Zr(ts);const es={name:"Sum",inputNames:ts.map((ns,Xr)=>`X${Xr}`),inputTypes:new Array(ts.length).fill(Gr.TextureType.unpacked)};return[Yr.run(Object.assign(Object.assign({},es),{get:()=>Wr(Yr,ts,es)}),ts)]};const Wr=(Yr,ts,es)=>{const ns=(0,jr.getGlsl)(Yr.session.backend.glContext.version),Xr=ts[0].dims.slice(),qr=`
      void main() {
        vec4 result = ${ts.map((_i,rs)=>`${ns.texture2D}(X${rs},TexCoords)`).join(" + ")};
        ${ns.output} = result;
      }
    `;return Object.assign(Object.assign({},es),{output:{dims:Xr,type:ts[0].type,textureType:Gr.TextureType.unpacked},hasMain:!0,shaderSource:qr})},Zr=Yr=>{if(!Yr||Yr.length===0)throw new Error("Sum requires inputs.");const ts=Yr[0].dims.length;for(let es=1;es<Yr.length;es++){if(ts!==Yr[es].dims.length)throw new Error("Input shapes are mismatched.");for(let ns=0;ns<ts;ns++)if(Yr[0].dims[ns]!==Yr[es].dims[ns])throw new Error("Input shapes are not matched.")}if(Yr[0].type!=="float32"&&Yr[0].type!=="float64")throw new Error("Invalid input type.");for(let es=1;es<Yr.length;es++)if(Yr[0].type!==Yr[es].type)throw new Error("Input types are not matched.")}},5944:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.tile=void 0;const jr=Ur(6145),Gr=Ur(5639);_r.tile=(Yr,ts)=>{Zr(ts);const es={name:"Tile",inputNames:["A"],inputTypes:[Gr.TextureType.unpacked]};return[Yr.run(Object.assign(Object.assign({},es),{get:()=>Wr(Yr,ts,es)}),ts)]};const Wr=(Yr,ts,es)=>{const ns=ts[0].dims.slice(),Xr=new Array(ns.length),qr=[];for(let is=0;is<ns.length;is++)Xr[is]=ns[is]*ts[1].numberData[is],qr.push(`inputIdx[${is}] = int(mod(float(outputIdx[${is}]), ${ns[is]}.));`);const _i=Xr.length,rs=`
      float process(int outputIdx[${_i}]) {
        int inputIdx[${_i}];
        ${qr.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},es),{output:{dims:Xr,type:ts[0].type,textureType:Gr.TextureType.unpacked},shaderSource:rs})},Zr=Yr=>{if(!Yr||Yr.length!==2)throw new Error("Tile requires 2 input.");if(Yr[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(Yr[1].dims[0]!==Yr[0].dims.length)throw new Error("Invalid input shape.");if(jr.NUMBER_TYPES.indexOf(Yr[0].type)===-1)throw new Error("Invalid input type.");if(Yr[1].type!=="int32"&&Yr[1].type!=="int16")throw new Error("Invalid repeat type.")}},5707:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseTransposeAttributes=_r.transpose=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(5639),Zr={name:"Transpose",inputNames:["A"],inputTypes:[Wr.TextureType.unpacked]};_r.transpose=(qr,_i,rs)=>(Xr(_i),[qr.run(Object.assign(Object.assign({},Zr),{cacheHint:rs.cacheKey,get:()=>Yr(qr,_i[0],rs.perm)}),_i)]),_r.parseTransposeAttributes=qr=>(0,jr.createAttributeWithCacheKey)({perm:qr.attributes.getInts("perm",[])});const Yr=(qr,_i,rs)=>{const is=_i.dims;rs=ts(is,rs);const ss=es(is,rs),os=is.length,ls=`
      ${ns("perm",rs,os)}
      float process(int indices[${os}]) {
        int a[${os}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},Zr),{output:{dims:ss,type:_i.type,textureType:Wr.TextureType.unpacked},shaderSource:ls})},ts=(qr,_i)=>(_i&&_i.length!==qr.length&&(_i=[...qr.keys()].reverse()),_i),es=(qr,_i)=>(_i=ts(qr,_i),Gr.ShapeUtil.sortBasedOnPerm(qr,_i)),ns=(qr,_i,rs)=>{const is=[];is.push(`void ${qr}(out int a[${rs}], int src[${rs}]) {`);for(let ss=0;ss<rs;++ss)is.push(`	a[${_i[ss]}]=src[${ss}];`);return is.push("	}"),is.join(`
`)},Xr=qr=>{if(!qr||qr.length!==1)throw new Error("Transpose requires 1 input.");if(qr[0].type!=="float32"&&qr[0].type!=="float64")throw new Error("input should be float tensor")}},2488:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.encodeAsUint8=void 0;const jr=Ur(6757),Gr=Ur(5639);_r.encodeAsUint8=(Wr,Zr)=>{const Yr=Zr.shape,ts=(0,jr.getGlsl)(Wr.session.backend.glContext.version),es=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${ts.texture2D}(X,TexCoords).r;
      ${ts.output} = encodeAsUint8(value);
    }`,ns={name:"Uint8Encode",inputTypes:[Gr.TextureType.unpacked],inputNames:["X"],output:{dims:Yr,type:Zr.tensor.type,textureType:Gr.TextureType.downloadUint8AsFloat},shaderSource:es,hasMain:!0};return Wr.executeProgram(ns,[Zr.tensor])}},9087:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.tanh=_r.tan=_r.sqrt=_r.sin=_r.sigmoid=_r.relu=_r.not=_r.neg=_r.log=_r.parseLeakyReluAttributes=_r.leakyRelu=_r.identity=_r.floor=_r.exp=_r.parseEluAttributes=_r.elu=_r.cos=_r.ceil=_r.clipV11=_r.parseClipAttributes=_r.clip=_r.atan=_r.asin=_r.acos=_r.abs=_r.glslTanh=_r.glslTan=_r.glslSqrt=_r.glslSigmoid=_r.glslRelu=_r.glslSin=_r.glslNot=_r.glslNeg=_r.glslLog=_r.glslLeakyRelu=_r.glslIdentity=_r.glslClip=_r.glslFloor=_r.glslExp=_r.glslElu=_r.glslCos=_r.glslCeil=_r.glslAtan=_r.glslAsin=_r.glslAcos=_r.glslAbs=void 0;const jr=Ur(4910),Gr=Ur(7273),Wr=Ur(1997),Zr=Ur(6757),Yr=Ur(5639);function ts(){return _s("abs")}function es(){return _s("acos")}function ns(){return _s("asin")}function Xr(){return _s("atan")}function qr(){return _s("ceil")}function _i(){return _s("cos")}function rs(Cs){const Ss="elu";return{body:`
  const float alpha = float(${Cs});

  float ${Ss}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Ss}_(vec4 v) {
    return vec4(${Ss}_(v.x), ${Ss}_(v.y), ${Ss}_(v.z), ${Ss}_(v.w));
  }
  `,name:Ss,type:Wr.FunctionType.ValueBased}}function is(){return _s("exp")}function ss(){return _s("floor")}function os(Cs,Ss){const As="clip";return{body:`
  const float min = float(${Cs});
  const float max = float(${Ss});

  float ${As}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${As}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:As,type:Wr.FunctionType.ValueBased}}function ls(){const Cs="indentity";return{body:`
  float ${Cs}_(float a) {
    return a;
  }
  vec4 ${Cs}_(vec4 v) {
    return v;
  }
  `,name:Cs,type:Wr.FunctionType.ValueBased}}function cs(Cs){const Ss="leakyRelu";return{body:`
  const float alpha = float(${Cs});

  float ${Ss}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Ss}_(vec4 v) {
    return vec4(${Ss}_(v.x), ${Ss}_(v.y), ${Ss}_(v.z), ${Ss}_(v.w));
  }
  `,name:Ss,type:Wr.FunctionType.ValueBased}}function ds(){return _s("log")}function fs(){const Cs="neg";return{body:`
  float ${Cs}_(float a) {
    return -a;
  }
  vec4 ${Cs}_(vec4 v) {
    return -v;
  }
  `,name:Cs,type:Wr.FunctionType.ValueBased}}function ms(){const Cs="not";return{body:`
  float ${Cs}_(float a) {
    return float( ! bool(a) );
  }
  bool ${Cs}_(bool a) {
    return !a;
  }
  vec4 ${Cs}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${Cs}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:Cs,type:Wr.FunctionType.ValueBased}}function ps(){return _s("sin")}function ys(){const Cs="relu";return{body:`
  float ${Cs}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Cs}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Cs,type:Wr.FunctionType.ValueBased}}function ws(){const Cs="sigmoid";return{body:`
  float ${Cs}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Cs}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Cs,type:Wr.FunctionType.ValueBased}}function xs(){return _s("sqrt")}function Es(){return _s("tan")}function Rs(){const Cs="tanh";return{body:`
  float ${Cs}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Cs}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Cs,type:Wr.FunctionType.ValueBased}}function _s(Cs){return{body:`
  float ${Cs}_(float a) {
    return ${Cs}(a);
  }
  vec4 ${Cs}_(vec4 v) {
    return ${Cs}(v);
  }
  `,name:Cs,type:Wr.FunctionType.ValueBased}}_r.glslAbs=ts,_r.glslAcos=es,_r.glslAsin=ns,_r.glslAtan=Xr,_r.glslCeil=qr,_r.glslCos=_i,_r.glslElu=rs,_r.glslExp=is,_r.glslFloor=ss,_r.glslClip=os,_r.glslIdentity=ls,_r.glslLeakyRelu=cs,_r.glslLog=ds,_r.glslNeg=fs,_r.glslNot=ms,_r.glslSin=ps,_r.glslRelu=ys,_r.glslSigmoid=ws,_r.glslSqrt=xs,_r.glslTan=Es,_r.glslTanh=Rs;const Bs=(Cs,Ss,As,Us)=>{const Ks=Cs.session.pack?Yr.TextureType.packed:Yr.TextureType.unpacked,Ws={name:As.name,inputTypes:[Ks],inputNames:["A"],cacheHint:Us};return Object.assign(Object.assign({},Ws),{get:()=>((Js,ho,so,io)=>{const vo=Js.session.pack?Yr.TextureType.packed:Yr.TextureType.unpacked,co=(0,Zr.getGlsl)(Js.session.backend.glContext.version);return Object.assign(Object.assign({},ho),{output:{dims:so.dims,type:so.type,textureType:vo},shaderSource:`
     ${io.body}
     void main() {
       vec4 v = ${co.texture2D}(A, TexCoords);
       v = ${io.name}_(v);
       ${co.output} = v;
     }
     `,hasMain:!0})})(Cs,Ws,Ss,As)})};_r.abs=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ts()),Ss)],_r.acos=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],es()),Ss)],_r.asin=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ns()),Ss)],_r.atan=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],Xr()),Ss)],_r.clip=(Cs,Ss,As)=>[Cs.run(Bs(Cs,Ss[0],os(As.min,As.max),As.cacheKey),Ss)],_r.parseClipAttributes=Cs=>(0,jr.createAttributeWithCacheKey)({min:Cs.attributes.getFloat("min",Gr.MIN_CLIP),max:Cs.attributes.getFloat("max",Gr.MAX_CLIP)}),_r.clipV11=(Cs,Ss)=>{const As=vs(Cs,Ss);return(0,_r.clip)(Cs,[Ss[0]],As)};const vs=(Cs,Ss)=>{if(Ss.length>=3&&(!Cs.session.isInitializer(Ss[1].dataId)||!Cs.session.isInitializer(Ss[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const As=Ss.length>=3?Ss[1].numberData[0]:Gr.MIN_CLIP,Us=Ss.length>=3?Ss[2].numberData[0]:Gr.MAX_CLIP;return(0,jr.createAttributeWithCacheKey)({min:As,max:Us})};_r.ceil=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],qr()),Ss)],_r.cos=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],_i()),Ss)],_r.elu=(Cs,Ss,As)=>[Cs.run(Bs(Cs,Ss[0],rs(As.alpha),As.cacheKey),Ss)],_r.parseEluAttributes=Cs=>(0,jr.createAttributeWithCacheKey)({alpha:Cs.attributes.getFloat("alpha",1)}),_r.exp=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],is()),Ss)],_r.floor=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ss()),Ss)],_r.identity=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ls()),Ss)],_r.leakyRelu=(Cs,Ss,As)=>[Cs.run(Bs(Cs,Ss[0],cs(As.alpha),As.cacheKey),Ss)],_r.parseLeakyReluAttributes=Cs=>(0,jr.createAttributeWithCacheKey)({alpha:Cs.attributes.getFloat("alpha",.01)}),_r.log=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ds()),Ss)],_r.neg=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],fs()),Ss)],_r.not=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ms()),Ss)],_r.relu=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ys()),Ss)],_r.sigmoid=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ws()),Ss)],_r.sin=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],ps()),Ss)],_r.sqrt=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],xs()),Ss)],_r.tan=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],Es()),Ss)],_r.tanh=(Cs,Ss)=>[Cs.run(Bs(Cs,Ss[0],Rs()),Ss)]},540:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createUnpackProgramInfoLoader=_r.createUnpackProgramInfo=void 0;const jr=Ur(6757),Gr=Ur(5639),Wr=Ur(432),Zr=Ur(5614),Yr={name:"unpack",inputNames:["A"],inputTypes:[Gr.TextureType.packed]};_r.createUnpackProgramInfo=(ts,es)=>{const ns=es.dims.length,Xr=(0,Zr.getChannels)("rc",ns),qr=Xr.slice(-2),_i=(0,Wr.getCoordsDataType)(ns),rs=(0,Zr.unpackFromChannel)(),is=es.dims.length===0?"":function(ls,cs){if(ls===1)return"rc";let ds="";for(let fs=0;fs<ls;fs++)ds+=cs[fs],fs<ls-1&&(ds+=",");return ds}(ns,Xr),ss=ns<=1?"rc":`vec2(${qr.join(",")})`,os=`
    ${rs}
    void main() {
      ${_i} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${is});

       ${(0,jr.getGlsl)(ts.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${ss}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},Yr),{hasMain:!0,output:{dims:es.dims,type:es.type,textureType:Gr.TextureType.unpacked},shaderSource:os})},_r.createUnpackProgramInfoLoader=(ts,es)=>Object.assign(Object.assign({},Yr),{get:()=>(0,_r.createUnpackProgramInfo)(ts,es)})},7862:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseUnsqueezeAttributes=_r.unsqueezeV13=_r.unsqueeze=void 0;const jr=Ur(7273);_r.unsqueeze=(Zr,Yr,ts)=>{Gr(Yr);const es=jr.ShapeUtil.unsqueezeShape(Yr[0].dims,ts);return[Zr.reshapeUnpacked(Yr[0],es)]},_r.unsqueezeV13=(Zr,Yr)=>(Wr(Yr),(0,_r.unsqueeze)(Zr,[Yr[0]],Array.from(Yr[1].integerData))),_r.parseUnsqueezeAttributes=Zr=>Zr.attributes.getInts("axes");const Gr=Zr=>{if(!Zr||Zr.length!==1)throw new Error("Unsqueeze requires 1 input.");if(Zr[0].type==="string")throw new Error("invalid input tensor types.")},Wr=Zr=>{if(!Zr||Zr.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(Zr[1].type!=="int32")throw new Error("Invalid input type.")}},3980:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.scalesValidation=_r.validateInputs=_r.parseUpsampleAttributes=_r.parseUpsampleAttributesV9=_r.parseUpsampleAttributesV7=_r.upsample=void 0;const jr=Ur(4910),Gr=Ur(6757),Wr=Ur(5639),Zr={name:"Upsample",inputNames:["X"],inputTypes:[Wr.TextureType.unpacked]};_r.upsample=(ts,es,ns)=>((0,_r.validateInputs)(es,ns),[ts.run(Object.assign(Object.assign({},Zr),{cacheHint:ns.cacheKey,get:()=>Yr(ts,es,ns)}),es)]),_r.parseUpsampleAttributesV7=ts=>(0,_r.parseUpsampleAttributes)(ts,7),_r.parseUpsampleAttributesV9=ts=>(0,_r.parseUpsampleAttributes)(ts,9),_r.parseUpsampleAttributes=(ts,es)=>{const ns=es>=10,Xr=ts.attributes.getString("mode","nearest");if(Xr!=="nearest"&&Xr!=="linear"&&(es<11||Xr!=="cubic"))throw new Error(`unrecognized mode: ${Xr}`);let qr=[];es<9&&(qr=ts.attributes.getFloats("scales"),(0,_r.scalesValidation)(qr,Xr,ns));const _i=ts.attributes.getFloat("extrapolation_value",0),rs=es>10?ts.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(rs)===-1)throw new Error(`coordinate_transform_mode '${rs}' is not supported`);const is=rs==="tf_crop_and_resize",ss=is,os=Xr==="nearest"&&es>=11?ts.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(os)===-1)throw new Error(`nearest_mode '${os}' is not supported`);const ls=ts.attributes.getFloat("cubic_coeff_a",-.75),cs=ts.attributes.getInt("exclude_outside",0)!==0;if(cs&&Xr!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const ds=es<11||Xr==="nearest"&&rs==="asymmetric"&&os==="floor";let fs=0,ms=0,ps=0;return es>10?ts.inputs.length>2?(fs=1,ms=2,ps=3):(ms=1,ps=2):es===9&&(ms=1),(0,jr.createAttributeWithCacheKey)({opset:es,isResize:ns,mode:Xr,scales:qr,extrapolationValue:_i,coordinateTransformMode:rs,useExtrapolation:ss,needRoiInput:is,nearestMode:os,cubicCoefficientA:ls,excludeOutside:cs,useNearest2xOptimization:ds,roiInputIdx:fs,scalesInputIdx:ms,sizesInputIdx:ps})};const Yr=(ts,es,ns)=>{const Xr=(0,Gr.getGlsl)(ts.session.backend.glContext.version),[qr,_i]=ts.calculateTextureWidthAndHeight(es[0].dims,Wr.TextureType.unpacked),rs=es[0].dims.map((ps,ys)=>Math.floor(ps*ns.scales[ys])),[is,ss]=ts.calculateTextureWidthAndHeight(rs,Wr.TextureType.unpacked),os=rs.length,ls=new Array(os),cs=new Array(os);let ds=`
      int output_pitches[${os}];
      int input_pitches[${os}];
      `;for(let ps=os-1;ps>=0;ps--)ls[ps]=ps===os-1?1:ls[ps+1]*rs[ps+1],cs[ps]=ps===os-1?1:cs[ps+1]*es[0].dims[ps+1],ds+=`
        output_pitches[${ps}] = ${ls[ps]};
        input_pitches[${ps}] = ${cs[ps]};
        `;const fs=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${qr}, ${_i});
        float value = getColorAsFloat(${Xr.texture2D}(X, coords));
        return value;
      }
      `,ms=ns.mode==="nearest"?`
    ${fs}
    float process(int indices[${os}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${is}, ${ss});

      ${ds}

      int d, m;
      for (int dim = 0; dim < ${os}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:os===4?`
    ${fs}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${is}, ${ss});

      ${ds}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${es[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${fs}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${is}, ${ss});

      ${ds}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${es[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},Zr),{output:{dims:rs,type:es[0].type,textureType:Wr.TextureType.unpacked},shaderSource:ms,variables:[{name:"scales",type:"int",arrayLength:ns.scales.length,data:ns.scales.map(ps=>Math.ceil(ps))}]})};_r.validateInputs=(ts,es)=>{if(!ts||es.opset<9&&ts.length!==1||es.opset>=9&&es.opset<11&&ts.length!==2||es.opset>=11&&ts.length<2)throw new Error("invalid inputs.");if(es.scales.length>0&&ts[0].dims.length!==es.scales.length)throw new Error("Invalid input shape.");if(ts[0].type==="string")throw new Error("Invalid input tensor types.")},_r.scalesValidation=(ts,es,ns)=>{if(ns){for(const Xr of ts)if(Xr<=0)throw new Error("Scale value should be greater than 0.")}else for(const Xr of ts)if(Xr<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(es!=="linear"&&es!=="cubic"||ts.length===2||ts.length===4&&ts[0]===1&&ts[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${ns?"Resize":"Upsample"} opeartor.`)}},2757:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.ProgramManager=void 0;const jr=Ur(2235),Gr=Ur(1315),Wr=Ur(8897),Zr=Ur(6757);_r.ProgramManager=class{constructor(Yr,ts,es){this.profiler=Yr,this.glContext=ts,this.textureLayoutStrategy=es,this.repo=new Map,this.attributesBound=!1}getArtifact(Yr){return this.repo.get(Yr)}setArtifact(Yr,ts){this.repo.set(Yr,ts)}run(Yr,ts,es){var ns;this.profiler.event("op",`ProgramManager.run ${(ns=Yr.programInfo.name)!==null&&ns!==void 0?ns:"unknown kernel"}`,()=>{var Xr;const qr=this.glContext.gl,_i=Yr.program;qr.useProgram(_i);try{this.bindOutput(es),this.attributesBound||this.bindAttributes(Yr.attribLocations),this.bindUniforms(Yr.uniformLocations,(Xr=Yr.programInfo.variables)!==null&&Xr!==void 0?Xr:[],ts)}catch(rs){throw Gr.Logger.error("ProgramManager",Yr.programInfo.shaderSource),rs}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(Yr=>this.glContext.deleteProgram(Yr.program))}build(Yr,ts,es){return this.profiler.event("backend","ProgramManager.build",()=>{const ns=new Wr.GlslPreprocessor(this.glContext,Yr,ts,es),Xr=ns.preprocess(),qr=this.compile(Xr);return{programInfo:Yr,program:qr,uniformLocations:this.getUniformLocations(qr,ns.context.programInfo.inputNames,ns.context.programInfo.variables),attribLocations:this.getAttribLocations(qr)}})}compile(Yr){if(!this.vertexShader){Gr.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const ns=(0,Zr.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(ns,this.glContext.gl.VERTEX_SHADER)}jr.env.debug&&Gr.Logger.verbose("ProrgramManager",`FragShader:
${Yr}
`);const ts=this.glContext.compileShader(Yr,this.glContext.gl.FRAGMENT_SHADER),es=this.glContext.createProgram(this.vertexShader,ts);return this.glContext.deleteShader(ts),es}bindOutput(Yr){const ts=Yr.width,es=Yr.height;Gr.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${ts}/${es}, shape=${Yr.shape}, type=${Yr.tensor.type}`),this.glContext.attachFramebuffer(Yr.texture,ts,es)}bindAttributes(Yr){const ts=Yr.position,es=Yr.textureCoord;this.glContext.setVertexAttributes(ts,es),this.attributesBound=!0}bindUniforms(Yr,ts,es){var ns;const Xr=this.glContext.gl;let qr=0;for(const{name:_i,type:rs,location:is,arrayLength:ss}of Yr){const os=(ns=ts.find(ls=>ls.name===_i))===null||ns===void 0?void 0:ns.data;if(rs!=="sampler2D"&&!os)throw new Error(`variable '${_i}' does not have data defined in program info`);switch(rs){case"sampler2D":this.bindTexture(es[qr],is,qr),qr++;break;case"float":ss?Xr.uniform1fv(is,os):Xr.uniform1f(is,os);break;case"int":ss?Xr.uniform1iv(is,os):Xr.uniform1i(is,os);break;default:throw new Error(`Uniform not implemented: ${rs}`)}}}bindTexture(Yr,ts,es){this.glContext.bindTextureToUniform(Yr.texture,es,ts)}getAttribLocations(Yr){return{position:this.getAttribLocation(Yr,"position"),textureCoord:this.getAttribLocation(Yr,"textureCoord")}}getUniformLocations(Yr,ts,es){const ns=[];if(ts)for(const Xr of ts)ns.push({name:Xr,type:"sampler2D",location:this.getUniformLocation(Yr,Xr)});if(es)for(const Xr of es)ns.push(Object.assign(Object.assign({},Xr),{location:this.getUniformLocation(Yr,Xr.name)}));return ns}getUniformLocation(Yr,ts){const es=this.glContext.gl.getUniformLocation(Yr,ts);if(es===null)throw new Error(`Uniform ${ts} not found.`);return es}getAttribLocation(Yr,ts){return this.glContext.gl.getAttribLocation(Yr,ts)}}},2171:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.WebGLSessionHandler=void 0;const jr=Ur(1315),Gr=Ur(5881),Wr=Ur(7860),Zr=Ur(4110),Yr=Ur(2757),ts=Ur(7618),es=Ur(5243);_r.WebGLSessionHandler=class{constructor(ns,Xr){this.backend=ns,this.context=Xr,this.layoutStrategy=new ts.PreferLogicalStrategy(ns.glContext.maxTextureSize),this.programManager=new Yr.ProgramManager(this.context.profiler,ns.glContext,this.layoutStrategy),this.textureManager=new es.TextureManager(ns.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:ns.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=ns.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Wr.WebGLInferenceHandler(this)}onGraphInitialized(ns){const Xr=ns.getValues().filter(qr=>qr.from===-1&&qr.tensor).map(qr=>qr.tensor.dataId);this.initializers=new Set(Xr)}isInitializer(ns){return!!this.initializers&&this.initializers.has(ns)}addInitializer(ns){this.initializers.add(ns)}getTextureData(ns,Xr){return Xr?this.packedTextureDataCache.get(ns):this.unpackedTextureDataCache.get(ns)}setTextureData(ns,Xr,qr=!1){jr.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),qr?this.packedTextureDataCache.set(ns,Xr):this.unpackedTextureDataCache.set(ns,Xr)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(ns=>this.textureManager.releaseTexture(ns,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(ns=>this.textureManager.releaseTexture(ns,!0)),this.unpackedTextureDataCache=new Map}resolve(ns,Xr,qr){const _i=(0,Gr.resolveOperator)(ns,Xr,Zr.WEBGL_OP_RESOLVE_RULES);return{impl:_i.opImpl,context:_i.opInit?_i.opInit(ns,qr):ns}}}},9622:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.Uint8DataEncoder=_r.RGBAFloatDataEncoder=_r.RedFloat32DataEncoder=void 0;const jr=Ur(1315);_r.RedFloat32DataEncoder=class{constructor(Gr,Wr=1){if(Wr===1)this.internalFormat=Gr.R32F,this.format=Gr.RED,this.textureType=Gr.FLOAT,this.channelSize=Wr;else{if(Wr!==4)throw new Error(`Invalid number of channels: ${Wr}`);this.internalFormat=Gr.RGBA32F,this.format=Gr.RGBA,this.textureType=Gr.FLOAT,this.channelSize=Wr}}encode(Gr,Wr){let Zr,Yr;return Gr.constructor!==Float32Array&&(jr.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),Yr=new Float32Array(Gr)),Wr*this.channelSize>Gr.length?(jr.Logger.warning("Encoder","Source data too small. Allocating larger array"),Yr=Gr,Zr=this.allocate(Wr*this.channelSize),Yr.forEach((ts,es)=>Zr[es]=ts)):(Yr=Gr,Zr=Yr),Zr}allocate(Gr){return new Float32Array(4*Gr)}decode(Gr,Wr){return this.channelSize===1?Gr.filter((Zr,Yr)=>Yr%4==0).subarray(0,Wr):Gr.subarray(0,Wr)}},_r.RGBAFloatDataEncoder=class{constructor(Gr,Wr=1,Zr){if(Wr!==1&&Wr!==4)throw new Error(`Invalid number of channels: ${Wr}`);this.internalFormat=Gr.RGBA,this.format=Gr.RGBA,this.channelSize=Wr,this.textureType=Zr||Gr.FLOAT}encode(Gr,Wr){let Zr=Gr;return this.channelSize===1&&(jr.Logger.verbose("Encoder","Exploding into a larger array"),Zr=this.allocate(Wr),Gr.forEach((Yr,ts)=>Zr[4*ts]=Yr)),Zr}allocate(Gr){return new Float32Array(4*Gr)}decode(Gr,Wr){return this.channelSize===1?Gr.filter((Zr,Yr)=>Yr%4==0).subarray(0,Wr):Gr.subarray(0,Wr)}},_r.Uint8DataEncoder=class{constructor(Gr,Wr=1){if(this.channelSize=4,Wr===1)this.internalFormat=Gr.ALPHA,this.format=Gr.ALPHA,this.textureType=Gr.UNSIGNED_BYTE,this.channelSize=Wr;else{if(Wr!==4)throw new Error(`Invalid number of channels: ${Wr}`);this.internalFormat=Gr.RGBA,this.format=Gr.RGBA,this.textureType=Gr.UNSIGNED_BYTE,this.channelSize=Wr}}encode(Gr,Wr){return new Uint8Array(Gr.buffer,Gr.byteOffset,Gr.byteLength)}allocate(Gr){return new Uint8Array(Gr*this.channelSize)}decode(Gr,Wr){if(Gr instanceof Uint8Array)return Gr.subarray(0,Wr);throw new Error(`Invalid array type: ${Gr.constructor}`)}}},7618:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.getBatchDim=_r.sizeToSquarishShape=_r.getRowsCols=_r.sizeFromShape=_r.isInt=_r.parseAxisParam=_r.squeezeShape=_r.PreferLogicalStrategy=_r.AlwaysKeepOriginalSizeStrategy=void 0;const jr=Ur(1315),Gr=Ur(7273);function Wr(ns,Xr){const qr=[],_i=[],rs=Xr!=null&&Array.isArray(Xr)&&Xr.length===0,is=Xr==null||rs?null:Zr(Xr,ns).sort();let ss=0;for(let os=0;os<ns.length;++os){if(is!=null){if(is[ss]===os&&ns[os]!==1)throw new Error(`Can't squeeze axis ${os} since its dim '${ns[os]}' is not 1`);(is[ss]==null||is[ss]>os)&&ns[os]===1&&(qr.push(ns[os]),_i.push(os)),is[ss]<=os&&ss++}ns[os]!==1&&(qr.push(ns[os]),_i.push(os))}return{newShape:qr,keptDims:_i}}function Zr(ns,Xr){const qr=Xr.length;return ns=ns==null?Xr.map((_i,rs)=>rs):[].concat(ns),(0,Gr.assert)(ns.every(_i=>_i>=-qr&&_i<qr),()=>`All values in axis param must be in range [-${qr}, ${qr}) but got axis ${ns}`),(0,Gr.assert)(ns.every(Yr),()=>`All values in axis param must be integers but got axis ${ns}`),ns.map(_i=>_i<0?qr+_i:_i)}function Yr(ns){return ns%1==0}function ts(ns){if(ns.length===0)return 1;let Xr=ns[0];for(let qr=1;qr<ns.length;qr++)Xr*=ns[qr];return Xr}function es(ns){const Xr=Math.ceil(Math.sqrt(ns));return[Xr,Math.ceil(ns/Xr)]}_r.AlwaysKeepOriginalSizeStrategy=class{constructor(ns){this.maxTextureSize=ns}computeTextureWH(ns,Xr){if(ns.length===0)return[1,1];const qr=this.maxTextureSize;if(Xr&&Xr.breakAxis!==void 0){const is=Xr.breakAxis>=ns.length?1:ns.slice(Xr.breakAxis).reduce((os,ls)=>os*ls),ss=Xr.breakAxis<=0?1:ns.slice(0,Xr.breakAxis).reduce((os,ls)=>os*ls);if(!(is>qr||ss>qr))return[is,ss];jr.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ns}, breakAxis:${Xr.breakAxis}`)}const _i=ns.reduce((is,ss)=>is*ss);let rs=Math.floor(Math.sqrt(_i));for(;rs<qr&&rs<_i&&_i%rs!=0;rs++);if(rs>=qr||_i%rs!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${ns}`);return[rs,_i/rs]}},_r.PreferLogicalStrategy=class{constructor(ns){this.maxTextureSize=ns}computeTextureWH(ns,Xr){const qr=this.computeTexture(ns,Xr);return Xr&&Xr.isPacked&&(qr[0]/=2,qr[1]/=2),Xr&&Xr.reverseWH?[qr[1],qr[0]]:qr}computeTexture(ns,Xr){const qr=Xr&&Xr.isPacked;if(ns.length===0)return qr?[2,2]:[1,1];let _i=this.maxTextureSize;if(Xr&&Xr.breakAxis!==void 0){const ss=Xr.breakAxis>=ns.length?1:ns.slice(Xr.breakAxis).reduce((ls,cs)=>ls*cs),os=Xr.breakAxis<=0?1:ns.slice(0,Xr.breakAxis).reduce((ls,cs)=>ls*cs);if(!(ss>_i||os>_i))return[ss,os];jr.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ns}, breakAxis:${Xr.breakAxis}`)}let rs=ns.slice(0);qr&&(_i*=2,rs=rs.map((ss,os)=>os>=rs.length-2?rs[os]%2==0?rs[os]:rs[os]+1:rs[os]),rs.length===1&&(rs=[2,rs[0]])),rs.length!==2&&(rs=Wr(rs).newShape);const is=ts(rs);return rs.length<=1&&is<=_i?[1,is]:rs.length===2&&rs[0]<=_i&&rs[1]<=_i?rs:rs.length===3&&rs[0]*rs[1]<=_i&&rs[2]<=_i?[rs[0]*rs[1],rs[2]]:rs.length===3&&rs[0]<=_i&&rs[1]*rs[2]<=_i?[rs[0],rs[1]*rs[2]]:rs.length===4&&rs[0]*rs[1]*rs[2]<=_i&&rs[3]<=_i?[rs[0]*rs[1]*rs[2],rs[3]]:rs.length===4&&rs[0]<=_i&&rs[1]*rs[2]*rs[3]<=_i?[rs[0],rs[1]*rs[2]*rs[3]]:qr?es(is/4).map(ss=>2*ss):es(is)}},_r.squeezeShape=Wr,_r.parseAxisParam=Zr,_r.isInt=Yr,_r.sizeFromShape=ts,_r.getRowsCols=function(ns){if(ns.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[ns.length>1?ns[ns.length-2]:1,ns[ns.length-1]]},_r.sizeToSquarishShape=es,_r.getBatchDim=function(ns,Xr=2){return ts(ns.slice(0,ns.length-Xr))}},3314:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createTextureLayoutFromShape=_r.calculateTextureWidthAndHeight=_r.createTextureLayoutFromTextureType=void 0;const jr=Ur(7273),Gr=Ur(5639);_r.createTextureLayoutFromTextureType=(Wr,Zr,Yr)=>{const ts=Yr===Gr.TextureType.unpacked||Yr===Gr.TextureType.unpackedReversed?1:4,es=Yr===Gr.TextureType.packed,ns=Yr===Gr.TextureType.unpackedReversed||Yr===Gr.TextureType.packed,Xr=Yr===Gr.TextureType.packedLastDimension?Zr.length-1:void 0,qr=Yr===Gr.TextureType.packedLastDimension?Zr.map((_i,rs)=>rs===Zr.length-1?4*_i:_i):void 0;return(0,_r.createTextureLayoutFromShape)(Wr,Zr,ts,qr,{isPacked:es,reverseWH:ns,breakAxis:Xr})},_r.calculateTextureWidthAndHeight=(Wr,Zr,Yr)=>{const ts=(0,_r.createTextureLayoutFromTextureType)(Wr,Zr,Yr);return[ts.width,ts.height]},_r.createTextureLayoutFromShape=(Wr,Zr,Yr=1,ts,es)=>{const ns=!(!es||!es.isPacked),[Xr,qr]=Wr.computeTextureWH(ns&&ts||Zr,es),_i=Zr.length;let rs=Zr.slice(0);if(_i===0&&(rs=[1]),Yr===1)ts=Zr;else if(ns){if(Yr!==4)throw new Error("a packed texture must be 4-channel");ts=Zr,_i>0&&(rs[_i-1]=Math.ceil(rs[_i-1]/2)),_i>1&&(rs[_i-2]=Math.ceil(rs[_i-2]/2))}else if(!ts)throw new Error("Unpacked shape is needed when using channels > 1");return{width:Xr,height:qr,channels:Yr,isPacked:ns,shape:rs,strides:jr.ShapeUtil.computeStrides(rs),unpackedShape:ts,reversedWH:es&&es.reverseWH}}},5243:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.TextureManager=void 0;const jr=Ur(1315);_r.TextureManager=class{constructor(Gr,Wr,Zr,Yr){this.glContext=Gr,this.layoutStrategy=Wr,this.profiler=Zr,this.config=Yr,this.pendingRead=new Map,Yr.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(Gr,Wr,Zr,Yr){const ts=this.toEncoderType(Gr),es=this.glContext.getEncoder(ts,Wr.channels||1,Yr);if(Wr.isPacked&&Yr===1)throw new Error("not implemented");const ns=Wr.width,Xr=Wr.height;let qr,_i;if(this.config.reuseTextures){qr=`${ns}x${Xr}_${es.format}_${es.internalFormat}_${es.textureType}`,_i=this.inUseTextures.get(qr),_i||(_i=[],this.inUseTextures.set(qr,_i));const is=this.idleTextures.get(qr);if(is&&is.length>0){const ss=is.pop();return _i.push(ss),Yr===1&&this.glContext.updateTexture(ss,ns,Xr,es,this.toTextureData(Gr,Zr)),ss}}jr.Logger.verbose("TextureManager",`Creating new texture of size ${Wr.width}x${Wr.height}`);const rs=this.glContext.allocateTexture(ns,Xr,es,this.toTextureData(Gr,Zr));return this.config.reuseTextures&&(_i.push(rs),this.textureLookup.set(rs,qr)),rs}readTexture(Gr,Wr,Zr){return Zr||(Zr=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const Yr=Gr.shape.reduce((es,ns)=>es*ns)*Zr,ts=this.glContext.readTexture(Gr.texture,Gr.width,Gr.height,Yr,this.toEncoderType(Wr),Zr);return this.toTensorData(Wr,ts)})}async readTextureAsync(Gr,Wr,Zr){const Yr=Gr.tensor.dataId;if(Zr||(Zr=1),this.pendingRead.has(Yr)){const ts=this.pendingRead.get(Yr);return new Promise(es=>ts==null?void 0:ts.push(es))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(Yr,[]);const ts=Gr.shape.reduce((qr,_i)=>qr*_i)*Zr;await this.glContext.createAndWaitForFence();const es=this.glContext.readTexture(Gr.texture,Gr.width,Gr.height,ts,this.toEncoderType(Wr),Zr),ns=this.toTensorData(Wr,es),Xr=this.pendingRead.get(Yr);return this.pendingRead.delete(Yr),Xr==null||Xr.forEach(qr=>qr(ns)),ns})}readUint8TextureAsFloat(Gr){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const Wr=Gr.shape.reduce((Yr,ts)=>Yr*ts),Zr=this.glContext.readTexture(Gr.texture,Gr.width,Gr.height,4*Wr,"byte",4);return new Float32Array(Zr.buffer,Zr.byteOffset,Wr)})}releaseTexture(Gr,Wr){let Zr;if(this.config.reuseTextures&&(Zr=this.textureLookup.get(Gr.texture),Zr)){Wr&&this.textureLookup.delete(Zr);const Yr=this.inUseTextures.get(Zr);if(Yr){const ts=Yr.indexOf(Gr.texture);if(ts!==-1){Yr.splice(ts,1);let es=this.idleTextures.get(Zr);es||(es=[],this.idleTextures.set(Zr,es)),es.push(Gr.texture)}}}Zr&&!Wr||(jr.Logger.verbose("TextureManager",`Deleting texture of size ${Gr.width}x${Gr.height}`),this.glContext.deleteTexture(Gr.texture))}toTensorData(Gr,Wr){switch(Gr){case"int16":return Wr instanceof Int16Array?Wr:Int16Array.from(Wr);case"int32":return Wr instanceof Int32Array?Wr:Int32Array.from(Wr);case"int8":return Wr instanceof Int8Array?Wr:Int8Array.from(Wr);case"uint16":return Wr instanceof Uint16Array?Wr:Uint16Array.from(Wr);case"uint32":return Wr instanceof Uint32Array?Wr:Uint32Array.from(Wr);case"uint8":case"bool":return Wr instanceof Uint8Array?Wr:Uint8Array.from(Wr);case"float32":return Wr instanceof Float32Array?Wr:Float32Array.from(Wr);case"float64":return Wr instanceof Float64Array?Wr:Float64Array.from(Wr);default:throw new Error(`TensorData type ${Gr} is not supported`)}}toTextureData(Gr,Wr){if(Wr)return Wr instanceof Float32Array?Wr:new Float32Array(Wr)}toEncoderType(Gr){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},5639:(Nr,_r)=>{var Ur;Object.defineProperty(_r,"__esModule",{value:!0}),_r.TextureType=void 0,(Ur=_r.TextureType||(_r.TextureType={}))[Ur.unpacked=0]="unpacked",Ur[Ur.unpackedReversed=1]="unpackedReversed",Ur[Ur.packed=2]="packed",Ur[Ur.downloadUint8AsFloat=3]="downloadUint8AsFloat",Ur[Ur.packedLastDimension=4]="packedLastDimension"},432:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.getGlChannels=_r.getCoordsDataType=_r.getSqueezedParams=_r.squeezeInputShape=_r.generateShaderFuncNameFromInputSamplerNameAtOutCoords=_r.generateShaderFuncNameFromInputSamplerName=_r.repeatedTry=_r.getPackedShape=void 0;const jr=Ur(7273);_r.getPackedShape=function(Gr){const Wr=Gr.length;return Gr.slice(0,Wr-1).concat(Gr[Wr-1]/4)},_r.repeatedTry=async function(Gr,Wr=Yr=>0,Zr){return new Promise((Yr,ts)=>{let es=0;const ns=()=>{if(Gr())return void Yr();es++;const Xr=Wr(es);Zr!=null&&es>=Zr?ts():setTimeout(ns,Xr)};ns()})},_r.generateShaderFuncNameFromInputSamplerName=function(Gr){return(0,jr.assert)(Gr!==void 0&&Gr.length!==0,()=>"empty string found for sampler name"),"get"+Gr.charAt(0).toUpperCase()+Gr.slice(1)},_r.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(Gr){return(0,jr.assert)(Gr!==void 0&&Gr.length!==0,()=>"empty string found for sampler name"),"get"+Gr.charAt(0).toUpperCase()+Gr.slice(1)+"AtOutCoords"},_r.squeezeInputShape=function(Gr,Wr){let Zr=JSON.parse(JSON.stringify(Gr));return Zr=Wr,Zr},_r.getSqueezedParams=function(Gr,Wr){return Wr.map(Zr=>Gr[Zr]).join(", ")},_r.getCoordsDataType=function(Gr){if(Gr<=1)return"int";if(Gr===2)return"ivec2";if(Gr===3)return"ivec3";if(Gr===4)return"ivec4";if(Gr===5)return"ivec5";if(Gr===6)return"ivec6";throw Error(`GPU for rank ${Gr} is not yet supported`)},_r.getGlChannels=function(Gr=6){return["x","y","z","w","u","v"].slice(0,Gr)}},3389:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.createNewWebGLContext=_r.createWebGLContext=void 0;const jr=Ur(1315),Gr=Ur(3524),Wr={};function Zr(Yr,ts){let es;const ns={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!ts||ts==="webgl2")&&(es=Yr.getContext("webgl2",ns),es))try{return new Gr.WebGLContext(es,2)}catch(Xr){jr.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${Xr}`)}if((!ts||ts==="webgl")&&(es=Yr.getContext("webgl",ns)||Yr.getContext("experimental-webgl",ns),es))try{return new Gr.WebGLContext(es,1)}catch(Xr){jr.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${Xr}`)}throw new Error("WebGL is not supported")}_r.createWebGLContext=function Yr(ts){let es;if(ts&&ts!=="webgl2"||!("webgl2"in Wr)?ts&&ts!=="webgl"||!("webgl"in Wr)||(es=Wr.webgl):es=Wr.webgl2,!es)try{es=Zr(function(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}(),ts)}catch{es=Zr(function(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");const qr=document.createElement("canvas");return qr.width=1,qr.height=1,qr}(),ts)}ts=ts||es.version===1?"webgl":"webgl2";const ns=es.gl;return Wr[ts]=es,ns.isContextLost()?(delete Wr[ts],Yr(ts)):(ns.disable(ns.DEPTH_TEST),ns.disable(ns.STENCIL_TEST),ns.disable(ns.BLEND),ns.disable(ns.DITHER),ns.disable(ns.POLYGON_OFFSET_FILL),ns.disable(ns.SAMPLE_COVERAGE),ns.enable(ns.SCISSOR_TEST),ns.enable(ns.CULL_FACE),ns.cullFace(ns.BACK),es)},_r.createNewWebGLContext=Zr},3524:function(Nr,_r,Ur){var jr=this&&this.__createBinding||(Object.create?function(ns,Xr,qr,_i){_i===void 0&&(_i=qr);var rs=Object.getOwnPropertyDescriptor(Xr,qr);rs&&!("get"in rs?!Xr.__esModule:rs.writable||rs.configurable)||(rs={enumerable:!0,get:function(){return Xr[qr]}}),Object.defineProperty(ns,_i,rs)}:function(ns,Xr,qr,_i){_i===void 0&&(_i=qr),ns[_i]=Xr[qr]}),Gr=this&&this.__setModuleDefault||(Object.create?function(ns,Xr){Object.defineProperty(ns,"default",{enumerable:!0,value:Xr})}:function(ns,Xr){ns.default=Xr}),Wr=this&&this.__importStar||function(ns){if(ns&&ns.__esModule)return ns;var Xr={};if(ns!=null)for(var qr in ns)qr!=="default"&&Object.prototype.hasOwnProperty.call(ns,qr)&&jr(Xr,ns,qr);return Gr(Xr,ns),Xr};Object.defineProperty(_r,"__esModule",{value:!0}),_r.WebGLContext=_r.linearSearchLastTrue=void 0;const Zr=Ur(2235),Yr=Wr(Ur(9622)),ts=Ur(432);function es(ns){let Xr=0;for(;Xr<ns.length&&ns[Xr]();++Xr);return Xr-1}_r.linearSearchLastTrue=es,_r.WebGLContext=class{constructor(ns,Xr){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=ns,this.version=Xr,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(ns,Xr,qr,_i){const rs=this.gl,is=rs.createTexture();rs.bindTexture(rs.TEXTURE_2D,is),rs.texParameteri(rs.TEXTURE_2D,rs.TEXTURE_MIN_FILTER,rs.NEAREST),rs.texParameteri(rs.TEXTURE_2D,rs.TEXTURE_MAG_FILTER,rs.NEAREST),rs.texParameteri(rs.TEXTURE_2D,rs.TEXTURE_WRAP_S,rs.CLAMP_TO_EDGE),rs.texParameteri(rs.TEXTURE_2D,rs.TEXTURE_WRAP_T,rs.CLAMP_TO_EDGE);const ss=_i?qr.encode(_i,ns*Xr):null;return rs.texImage2D(rs.TEXTURE_2D,0,qr.internalFormat,ns,Xr,0,qr.format,qr.textureType,ss),this.checkError(),is}updateTexture(ns,Xr,qr,_i,rs){const is=this.gl;is.bindTexture(is.TEXTURE_2D,ns);const ss=_i.encode(rs,Xr*qr);is.texSubImage2D(is.TEXTURE_2D,0,0,0,Xr,qr,_i.format,_i.textureType,ss),this.checkError()}attachFramebuffer(ns,Xr,qr){const _i=this.gl;_i.bindTexture(_i.TEXTURE_2D,ns),_i.bindFramebuffer(_i.FRAMEBUFFER,this.framebuffer),_i.framebufferTexture2D(_i.FRAMEBUFFER,_i.COLOR_ATTACHMENT0,_i.TEXTURE_2D,ns,0),this.checkError(),_i.viewport(0,0,Xr,qr),_i.scissor(0,0,Xr,qr)}readTexture(ns,Xr,qr,_i,rs,is){const ss=this.gl;is||(is=1),this.frameBufferBound||this.attachFramebuffer(ns,Xr,qr);const os=this.getEncoder(rs,is),ls=os.allocate(Xr*qr);return ss.bindTexture(ss.TEXTURE_2D,ns),ss.framebufferTexture2D(ss.FRAMEBUFFER,ss.COLOR_ATTACHMENT0,ss.TEXTURE_2D,ns,0),ss.readPixels(0,0,Xr,qr,ss.RGBA,os.textureType,ls),this.checkError(),os.decode(ls,_i)}isFramebufferReady(){return!0}getActiveTexture(){const ns=this.gl;return"TEXTURE"+(ns.getParameter(this.gl.ACTIVE_TEXTURE)-ns.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(ns,Xr){const qr=this.gl;qr.vertexAttribPointer(ns,3,qr.FLOAT,!1,20,0),qr.enableVertexAttribArray(ns),Xr!==-1&&(qr.vertexAttribPointer(Xr,2,qr.FLOAT,!1,20,12),qr.enableVertexAttribArray(Xr)),this.checkError()}createProgram(ns,Xr){const qr=this.gl,_i=qr.createProgram();return qr.attachShader(_i,ns),qr.attachShader(_i,Xr),qr.linkProgram(_i),_i}compileShader(ns,Xr){const qr=this.gl,_i=qr.createShader(Xr);if(!_i)throw new Error(`createShader() returned null with type ${Xr}`);if(qr.shaderSource(_i,ns),qr.compileShader(_i),qr.getShaderParameter(_i,qr.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${qr.getShaderInfoLog(_i)}
Shader source:
${ns}`);return _i}deleteShader(ns){this.gl.deleteShader(ns)}bindTextureToUniform(ns,Xr,qr){const _i=this.gl;_i.activeTexture(_i.TEXTURE0+Xr),this.checkError(),_i.bindTexture(_i.TEXTURE_2D,ns),this.checkError(),_i.uniform1i(qr,Xr),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Zr.env.debug){const ns=this.gl,Xr=ns.getError();let qr="";switch(Xr){case ns.NO_ERROR:return;case ns.INVALID_ENUM:qr="INVALID_ENUM";break;case ns.INVALID_VALUE:qr="INVALID_VALUE";break;case ns.INVALID_OPERATION:qr="INVALID_OPERATION";break;case ns.INVALID_FRAMEBUFFER_OPERATION:qr="INVALID_FRAMEBUFFER_OPERATION";break;case ns.OUT_OF_MEMORY:qr="OUT_OF_MEMORY";break;case ns.CONTEXT_LOST_WEBGL:qr="CONTEXT_LOST_WEBGL";break;default:qr=`Unknown WebGL Error: ${Xr.toString(16)}`}throw new Error(qr)}}deleteTexture(ns){this.gl.deleteTexture(ns)}deleteProgram(ns){this.gl.deleteProgram(ns)}getEncoder(ns,Xr,qr=0){if(this.version===2)return new Yr.RedFloat32DataEncoder(this.gl,Xr);switch(ns){case"float":return qr===1||this.isRenderFloat32Supported?new Yr.RGBAFloatDataEncoder(this.gl,Xr):new Yr.RGBAFloatDataEncoder(this.gl,Xr,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Yr.Uint8DataEncoder(this.gl,Xr);default:throw new Error(`Invalid dataType: ${ns}`)}}clearActiveTextures(){const ns=this.gl;for(let Xr=0;Xr<this.maxTextureImageUnits;++Xr)ns.activeTexture(ns.TEXTURE0+Xr),ns.bindTexture(ns.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const ns=this.gl;ns.bindFramebuffer(ns.FRAMEBUFFER,null),ns.deleteFramebuffer(this.framebuffer),ns.bindBuffer(ns.ARRAY_BUFFER,null),ns.deleteBuffer(this.vertexbuffer),ns.bindBuffer(ns.ELEMENT_ARRAY_BUFFER,null),ns.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const ns=this.gl,Xr=ns.createBuffer();if(!Xr)throw new Error("createBuffer() returned null");const qr=this.createDefaultGeometry();return ns.bindBuffer(ns.ARRAY_BUFFER,Xr),ns.bufferData(ns.ARRAY_BUFFER,qr,ns.STATIC_DRAW),this.checkError(),Xr}createFramebuffer(){const ns=this.gl.createFramebuffer();if(!ns)throw new Error("createFramebuffer returned null");return ns}queryVitalParameters(){const ns=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=ns.getParameter(ns.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=ns.getParameter(ns.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const ns=this.gl,Xr=ns.createTexture();ns.bindTexture(ns.TEXTURE_2D,Xr);const qr=this.version===2?ns.RGBA32F:ns.RGBA;ns.texImage2D(ns.TEXTURE_2D,0,qr,1,1,0,ns.RGBA,ns.FLOAT,null);const _i=ns.createFramebuffer();ns.bindFramebuffer(ns.FRAMEBUFFER,_i),ns.framebufferTexture2D(ns.FRAMEBUFFER,ns.COLOR_ATTACHMENT0,ns.TEXTURE_2D,Xr,0);const rs=ns.checkFramebufferStatus(ns.FRAMEBUFFER)===ns.FRAMEBUFFER_COMPLETE;return ns.bindTexture(ns.TEXTURE_2D,null),ns.bindFramebuffer(ns.FRAMEBUFFER,null),ns.deleteTexture(Xr),ns.deleteFramebuffer(_i),rs}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const ns=this.gl;let Xr,qr,_i,rs,is;try{Xr=ns.createTexture(),qr=ns.createFramebuffer(),ns.bindTexture(ns.TEXTURE_2D,Xr);const ss=this.version===2?ns.RGBA32F:ns.RGBA;return ns.texImage2D(ns.TEXTURE_2D,0,ss,1,1,0,ns.RGBA,ns.FLOAT,null),ns.bindFramebuffer(ns.FRAMEBUFFER,qr),ns.framebufferTexture2D(ns.FRAMEBUFFER,ns.COLOR_ATTACHMENT0,ns.TEXTURE_2D,Xr,0),ns.enable(ns.BLEND),_i=ns.createShader(ns.VERTEX_SHADER),!!_i&&(ns.shaderSource(_i,"void main(){}"),ns.compileShader(_i),rs=ns.createShader(ns.FRAGMENT_SHADER),!!rs&&(ns.shaderSource(rs,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),ns.compileShader(rs),is=ns.createProgram(),!!is&&(ns.attachShader(is,_i),ns.attachShader(is,rs),ns.linkProgram(is),ns.useProgram(is),ns.drawArrays(ns.POINTS,0,1),ns.getError()===ns.NO_ERROR)))}finally{ns.disable(ns.BLEND),is&&ns.deleteProgram(is),_i&&ns.deleteShader(_i),rs&&ns.deleteShader(rs),qr&&(ns.bindFramebuffer(ns.FRAMEBUFFER,null),ns.deleteFramebuffer(qr)),Xr&&(ns.bindTexture(ns.TEXTURE_2D,null),ns.deleteTexture(Xr))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const ns=this.gl,Xr=this.disjointTimerQueryWebgl2Extension,qr=ns.createQuery();return ns.beginQuery(Xr.TIME_ELAPSED_EXT,qr),qr}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const ns=this.gl,Xr=this.disjointTimerQueryWebgl2Extension;ns.endQuery(Xr.TIME_ELAPSED_EXT)}}isTimerResultAvailable(ns){let Xr=!1,qr=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const _i=this.gl,rs=this.disjointTimerQueryWebgl2Extension;Xr=_i.getQueryParameter(ns,_i.QUERY_RESULT_AVAILABLE),qr=_i.getParameter(rs.GPU_DISJOINT_EXT)}return Xr&&!qr}getTimerResult(ns){let Xr=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const qr=this.gl;Xr=qr.getQueryParameter(ns,qr.QUERY_RESULT),qr.deleteQuery(ns)}return Xr/1e6}async waitForQueryAndGetTime(ns){return await(0,ts.repeatedTry)(()=>this.isTimerResultAvailable(ns)),this.getTimerResult(ns)}async createAndWaitForFence(){const ns=this.createFence(this.gl);return this.pollFence(ns)}createFence(ns){let Xr;const qr=ns,_i=qr.fenceSync(qr.SYNC_GPU_COMMANDS_COMPLETE,0);return ns.flush(),Xr=_i===null?()=>!0:()=>{const rs=qr.clientWaitSync(_i,0,0);return rs===qr.ALREADY_SIGNALED||rs===qr.CONDITION_SATISFIED},{query:_i,isFencePassed:Xr}}async pollFence(ns){return new Promise(Xr=>{this.addItemToPoll(()=>ns.isFencePassed(),()=>Xr())})}pollItems(){const ns=es(this.itemsToPoll.map(Xr=>Xr.isDoneFn));for(let Xr=0;Xr<=ns;++Xr){const{resolveFn:qr}=this.itemsToPoll[Xr];qr()}this.itemsToPoll=this.itemsToPoll.slice(ns+1)}async addItemToPoll(ns,Xr){this.itemsToPoll.push({isDoneFn:ns,resolveFn:Xr}),this.itemsToPoll.length>1||await(0,ts.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},6496:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.ExecutionPlan=void 0;const jr=Ur(1315);class Gr{constructor(Zr,Yr){this.op=Zr,this.node=Yr}}_r.ExecutionPlan=class{constructor(Wr,Zr,Yr){this.graph=Wr,this.profiler=Yr,this.initialize(Zr)}initialize(Wr){this.profiler.event("session","ExecutionPlan.initialize",()=>{const Zr=this.graph.getNodes();if(Zr.length!==Wr.length)throw new Error("The size of nodes and OPs do not match.");this._ops=Wr.map((Yr,ts)=>new Gr(Yr,Zr[ts])),this.reset(),this._starter=[],this._ops.forEach((Yr,ts)=>{let es=!0;for(const ns of Yr.node.inputs)if(!this._values[ns]&&this.graph.getInputIndices().indexOf(ns)===-1){es=!1;break}es&&this._starter.push(ts)})})}reset(){this._values=this.graph.getValues().map(Wr=>Wr.tensor)}async execute(Wr,Zr){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const Yr=Wr.createInferenceHandler(),ts=this.graph.getInputIndices();if(Zr.length!==ts.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${Zr.length} expected: ${ts.length}`);Zr.forEach((rs,is)=>{const ss=ts[is];this._values[ss]=rs});const es=this._starter.slice(0),ns=this.graph.getValues(),Xr=this.graph.getNodes();let qr=0;for(;qr<es.length;){const rs=es[qr++],is=this._ops[rs],ss=is.node.inputs.map(ds=>this._values[ds]);if(ss.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${is.node}`);const os=ss;jr.Logger.verbose("ExecPlan",`Runing op:${is.node.name} (${os.map((ds,fs)=>`'${is.node.inputs[fs]}': ${ds.type}[${ds.dims.join(",")}]`).join(", ")})`);const ls=await this.profiler.event("node",is.node.name,async()=>is.op.impl(Yr,os,is.op.context));if(ls.length!==is.node.outputs.length)throw new Error("the size of output does not match model definition.");ls.forEach((ds,fs)=>{const ms=is.node.outputs[fs];if(this._values[ms])throw new Error(`output [${ms}] already has value: op:${is.node.name}`);this._values[ms]=ds});const cs=new Set;ls.forEach((ds,fs)=>{const ms=is.node.outputs[fs];for(const ps of ns[ms].to){const ys=Xr[ps];let ws=!0;for(const xs of ys.inputs)if(!this._values[xs]){ws=!1;break}ws&&cs.add(ps)}}),es.push(...cs)}const _i=[];for(let rs=0;rs<this.graph.getOutputIndices().length;rs++){const is=this.graph.getOutputIndices()[rs],ss=this._values[is];if(ss===void 0)throw new Error(`required output [${is}] does not have value`);is===0?await ss.getData():ss.data,_i.push(ss)}return jr.Logger.verbose("ExecPlan","disposing of inferenceHandler"),Yr.dispose(),_i})}}},4662:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.Graph=void 0;const jr=Ur(6874),Gr=Ur(5127),Wr=Ur(2446),Zr=Ur(9240),Yr=Ur(7273);var ts=Gr.onnxruntime.experimental.fbs;_r.Graph={from:(qr,_i)=>new Xr(qr,_i)};class es{constructor(_i){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,_i&&(this.type=Yr.ProtoUtil.tensorValueTypeFromProto(_i.type.tensorType))}get from(){return this._from}get to(){return this._to}}class ns{constructor(_i,rs){_i instanceof Wr.onnx.NodeProto?(this.name=_i.name,this.opType=_i.opType,this.attributes=new jr.Attribute(_i.attribute)):_i instanceof ts.Node&&(this.name=rs??_i.name(),this.opType=_i.opType(),this.attributes=new jr.Attribute(Yr.ProtoUtil.tensorAttributesFromORTFormat(_i))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class Xr{constructor(_i,rs){if(!_i)throw new TypeError("graph is empty");this.buildGraph(_i),this.transformGraph(rs),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(_i){if(_i instanceof Wr.onnx.GraphProto)this.buildGraphFromOnnxFormat(_i);else{if(!(_i instanceof ts.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(_i)}}buildGraphFromOnnxFormat(_i){const rs=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const is=new Map;if(!_i.input)throw new Error("missing information in graph: input");const ss=[];for(const os of _i.input){if(rs.has(os.name))throw new Error(`duplicated input name: ${os.name}`);const ls=this._allData.push(new es(os))-1;rs.set(os.name,ls),ss.push(os.name)}if(!_i.initializer)throw new Error("missing information in graph: initializer");for(const os of _i.initializer){let ls=rs.get(os.name);if(ls===void 0){const cs=new es;cs.type={shape:{dims:Yr.ProtoUtil.tensorDimsFromProto(os.dims)},tensorType:Yr.ProtoUtil.tensorDataTypeFromProto(os.dataType)},ls=this._allData.push(cs)-1,rs.set(os.name,ls)}this._allData[ls]._from=-1,this._allData[ls].tensor=Zr.Tensor.fromProto(os)}for(let os=0;os<this._allData.length;os++)this._allData[os].tensor||(this._allInputIndices.push(os),this._allInputNames.push(ss[os]));if(!_i.output)throw new Error("missing information in graph: output");for(const os of _i.output){if(rs.has(os.name))throw new Error(`duplicated output name: ${os.name}`);const ls=this._allData.push(new es(os))-1;rs.set(os.name,ls),this._allOutputIndices.push(ls),this._allOutputNames.push(os.name)}if(!_i.node)throw new Error("missing information in graph: node");for(const os of _i.node){if(!os.name)for(let cs=0;;cs++){const ds=`unnamed_${os.opType}_${cs}`;if(!is.has(ds)){os.name=ds;break}}if(is.has(os.name))throw new Error(`duplicated node name: ${os.name}`);const ls=this._nodes.push(new ns(os))-1;is.set(os.name,ls)}for(let os=0;os<this._nodes.length;os++){const ls=this._nodes[os],cs=_i.node[os];if(!cs.output)throw new Error(`missing output for node: ${cs.name}`);for(const ds of cs.output){let fs=rs.get(ds);if(fs===void 0&&(fs=this._allData.push(new es)-1,rs.set(ds,fs)),ls.outputs.push(fs),this._allData[fs]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${fs}`);if(this._allData[fs]._from=os,cs.opType==="Constant"){if(!cs.attribute||cs.attribute.length!==1||!cs.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!cs.output||cs.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");ls.outputs.pop(),ls.executeNode=!1,this._allData[fs]._from=-1,this._allData[fs].tensor=Zr.Tensor.fromProto(cs.attribute[0].t)}}}for(let os=0;os<this._nodes.length;os++){const ls=this._nodes[os],cs=_i.node[os];if(!cs.input)throw new Error(`missing input for node: ${cs.name}`);for(const ds of cs.input){const fs=rs.get(ds);if(fs===void 0){if(ds===""&&(cs.input.length===3||cs.input.length===4)&&cs.opType==="Resize")continue;throw new Error(`unrecognized input '${ds}' for node: ${cs.name}`)}ls.inputs.push(fs),this._allData[fs]._to.push(os)}}return!0}buildGraphFromOrtFormat(_i){var rs,is,ss;const os=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ls=new Map,cs=[];for(let ds=0;ds<_i.inputsLength();ds++){const fs=_i.inputs(ds);if(os.has(fs))throw new Error(`duplicated input name: ${fs}`);for(let ms=0;ms<_i.nodeArgsLength();ms++)if(((rs=_i.nodeArgs(ms))===null||rs===void 0?void 0:rs.name())===fs){const ps=new es;if(((ss=(is=_i.nodeArgs(ms))===null||is===void 0?void 0:is.type())===null||ss===void 0?void 0:ss.valueType())!==ts.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const ys=_i.nodeArgs(ms).type().value(new ts.TensorTypeAndShape),ws=Yr.ProtoUtil.tensorDataTypeFromProto(ys.elemType()),xs=ys.shape(),Es=[];for(let _s=0;_s<xs.dimLength();_s++)Es.push(Yr.LongUtil.longToNumber(xs.dim(_s).value().dimValue()));ps.type={shape:{dims:Es},tensorType:ws};const Rs=this._allData.push(ps)-1;os.set(fs,Rs),cs.push(fs)}}for(let ds=0;ds<_i.initializersLength();ds++){const fs=_i.initializers(ds);let ms=os.get(fs.name());if(ms===void 0){const ps=new es,ys=Yr.ProtoUtil.tensorDimsFromORTFormat(fs),ws=Yr.ProtoUtil.tensorDataTypeFromProto(fs.dataType());ps.type={shape:{dims:ys},tensorType:ws},ms=this._allData.push(ps)-1,os.set(fs.name(),ms)}this._allData[ms]._from=-1,this._allData[ms].tensor=Zr.Tensor.fromOrtTensor(fs)}for(let ds=0;ds<this._allData.length;ds++)this._allData[ds].tensor||(this._allInputIndices.push(ds),this._allInputNames.push(cs[ds]));for(let ds=0;ds<_i.outputsLength();ds++){const fs=_i.outputs(ds);if(os.has(fs))throw new Error(`duplicated output name: ${fs}`);const ms=this._allData.push(new es)-1;os.set(fs,ms),this._allOutputIndices.push(ms),this._allOutputNames.push(fs)}if(!_i.nodes)throw new Error("missing information in graph: node");for(let ds=0;ds<_i.nodesLength();ds++){const fs=_i.nodes(ds);let ms=fs.name();if(!ms)for(let ys=0;ms=`unnamed_${fs.opType()}_${ys}`,ls.has(ms);ys++);if(ls.has(ms))throw new Error(`duplicated node name: ${ms}`);const ps=this._nodes.push(new ns(fs,ms))-1;ls.set(ms,ps)}for(let ds=0;ds<this._nodes.length;ds++){const fs=this._nodes[ds],ms=_i.nodes(ds);if(ms==null)throw new Error(`No node exists at index ${ds}`);if((ms==null?void 0:ms.outputsLength())===0)throw new Error(`missing output for node: ${ms.name}`);for(let ps=0;ps<(ms==null?void 0:ms.outputsLength());ps++){const ys=ms==null?void 0:ms.outputs(ps);let ws=os.get(ys);if(ws===void 0&&(ws=this._allData.push(new es)-1,os.set(ys,ws)),fs.outputs.push(ws),this._allData[ws]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${ws}`);if(this._allData[ws]._from=ds,ms.opType()==="Constant"){if(ms.attributesLength()!==1||!ms.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(ms.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");fs.outputs.pop(),fs.executeNode=!1,this._allData[ws]._from=-1,this._allData[ws].tensor=Zr.Tensor.fromOrtTensor(ms.attributes(0).t())}}}for(let ds=0;ds<this._nodes.length;ds++){const fs=this._nodes[ds],ms=_i.nodes(ds);if(ms.inputsLength()===0)throw new Error(`missing input for node: ${ms.name}`);for(let ps=0;ps<ms.inputsLength();ps++){const ys=ms.inputs(ps),ws=os.get(ys);if(ws===void 0)throw new Error(`unrecognized input '${ys}' for node: ${ms.name()}`);fs.inputs.push(ws),this._allData[ws]._to.push(ds)}}}checkIsAcyclic(){const _i=new Set;this._allInputIndices.forEach(ss=>{this._allData[ss]._to.forEach(os=>{_i.add(os)})});const rs=Array.from(_i),is=new Array(this._nodes.length).fill("white");for(;rs.length>0;){const ss=rs.pop();is[ss]==="gray"?is[ss]="black":(rs.push(ss),is[ss]="gray",this._nodes[ss].outputs.forEach(os=>{const ls=this._allData[os];if(ls.tensor!==void 0)throw new Error("node outputs should not be initialized");if(ls._from!==ss)throw new Error("from property of the Value object doesn't match index of Node being processed");ls._to.forEach(cs=>{if(is[cs]==="gray")throw new Error("model graph is cyclic");is[cs]==="white"&&rs.push(cs)})}))}}transformGraph(_i){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),_i&&_i.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let _i=0;const rs=new Array(this._nodes.length,0);let is=0;for(let ss=0;ss<this._nodes.length;ss++)rs[ss]=is,this._nodes[ss].executeNode?(is!==ss&&(this._nodes[is]=this._nodes[ss]),is++):this._nodes[ss].outputs.forEach(os=>{this._allData[os]._from=-2});this._nodes.splice(is,this._nodes.length-is);for(let ss=0;ss<this._allData.length;ss++){const os=this._allData[ss];os._from!==void 0&&os._from!==-1&&os._from!==-2&&(os._from=rs[os._from]);for(let ls=0;ls<os._to.length;ls++){if(!(os._to[ls]>=0))throw new Error("Trying to update a removed node");os._to[ls]=rs[os._to[ls]]}}_i=0;for(let ss=0;ss<this._allData.length;ss++)if(this._allData[ss].from!==-2||this._allOutputIndices.indexOf(ss+_i)!==-1){if(_i>0){let os=-1;this._allData[ss].from!==void 0&&this._allData[ss].from!==-1?(os=this._nodes[this._allData[ss].from].outputs.indexOf(ss+_i),os!==-1&&(this._nodes[this._allData[ss].from].outputs[os]=ss)):(os=this._allInputIndices.indexOf(ss+_i),os!==-1&&(this._allInputIndices[os]=ss)),this._allData[ss].to.forEach(ls=>{os=this._nodes[ls].inputs.indexOf(ss+_i),os!==-1&&(this._nodes[ls].inputs[os]=ss)}),this._allData[ss].to.length===0&&(os=this._allOutputIndices.indexOf(ss+_i),os!==-1&&(this._allOutputIndices[os]=ss))}}else _i++,this._allData.splice(ss,1),ss--}deleteNode(_i){const rs=this._nodes[_i];if(rs.outputs.length>1){for(let cs=1;cs<rs.outputs.length;cs++)if(this._allData[rs.outputs[cs]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}rs.executeNode=!1;const is=rs.inputs[0],ss=rs.outputs[0],os=this._allData[ss].to;for(let cs=0;cs<rs.inputs.length;cs++){const ds=this._allData[rs.inputs[cs]].to.indexOf(_i);if(ds===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[rs.inputs[cs]].to.splice(ds,1)}this._allData[ss]._to=[];const ls=this._allOutputIndices.indexOf(ss);if(ls!==-1&&(this._allOutputIndices[ls]=is),os&&os.length>0)for(const cs of os){const ds=this._nodes[cs].inputs.indexOf(ss);if(ds===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[cs].inputs[ds]=is,this._allData[is].to.push(cs)}}removeAllDropoutNodes(){let _i=0;for(const rs of this._nodes){if(rs.opType==="Dropout"){if(rs.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(rs.outputs.length!==1&&rs.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(rs.outputs.length===2&&this._allData[rs.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(_i)}_i++}}removeAllIdentityNodes(){let _i=0;for(const rs of this._nodes)rs.opType==="Identity"&&this.deleteNode(_i),_i++}isActivation(_i){switch(_i.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const _i of this._nodes)if(_i.opType==="Conv"){const rs=this._allData[_i.outputs[0]]._to;if(rs.length===1&&this.isActivation(this._nodes[rs[0]])){const is=this._nodes[rs[0]];if(is.opType==="Clip")if(is.inputs.length===1)try{_i.attributes.set("activation_params","floats",[is.attributes.getFloat("min"),is.attributes.getFloat("max")])}catch{_i.attributes.set("activation_params","floats",[Yr.MIN_CLIP,Yr.MAX_CLIP])}else{if(!(is.inputs.length>=3&&this._allData[is.inputs[1]].tensor!==void 0&&this._allData[is.inputs[2]].tensor!==void 0))continue;_i.attributes.set("activation_params","floats",[this._allData[is.inputs[1]].tensor.floatData[0],this._allData[is.inputs[2]].tensor.floatData[0]])}_i.attributes.set("activation","string",is.opType),this.deleteNode(rs[0])}}}}},1315:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.now=_r.Profiler=_r.Logger=void 0;const Ur={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},jr={none:new class{log(ns,Xr,qr){}},console:new class{log(ns,Xr,qr){console.log(`${this.color(ns)} ${qr?"\x1B[35m"+qr+"\x1B[0m ":""}${Xr}`)}color(ns){switch(ns){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${ns}`)}}}},Gr={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let Wr={"":Gr};function Zr(ns,Xr,qr,_i){if(Xr===void 0)return rs=ns,{verbose:Zr.verbose.bind(null,rs),info:Zr.info.bind(null,rs),warning:Zr.warning.bind(null,rs),error:Zr.error.bind(null,rs),fatal:Zr.fatal.bind(null,rs)};if(qr===void 0)Yr(ns,Xr);else if(typeof qr=="number"&&_i===void 0)Yr(ns,Xr);else if(typeof qr=="string"&&_i===void 0)Yr(ns,qr,0,Xr);else{if(typeof qr!="string"||typeof _i!="number")throw new TypeError("input is valid");Yr(ns,qr,0,Xr)}var rs}function Yr(ns,Xr,qr,_i){const rs=Wr[_i||""]||Wr[""];Ur[ns]<Ur[rs.minimalSeverity]||(rs.logDateTime&&(Xr=`${new Date().toISOString()}|${Xr}`),rs.logSourceLocation,jr[rs.provider].log(ns,Xr,_i))}(function(ns){function Xr(_i){Wr={},qr("",_i||{})}function qr(_i,rs){if(_i==="*")Xr(rs);else{const is=Wr[_i]||Gr;Wr[_i]={provider:rs.provider||is.provider,minimalSeverity:rs.minimalSeverity||is.minimalSeverity,logDateTime:rs.logDateTime===void 0?is.logDateTime:rs.logDateTime,logSourceLocation:rs.logSourceLocation===void 0?is.logSourceLocation:rs.logSourceLocation}}}ns.verbose=function(_i,rs){ns("verbose",_i,rs)},ns.info=function(_i,rs){ns("info",_i,rs)},ns.warning=function(_i,rs){ns("warning",_i,rs)},ns.error=function(_i,rs){ns("error",_i,rs)},ns.fatal=function(_i,rs){ns("fatal",_i,rs)},ns.reset=Xr,ns.set=qr,ns.setWithEnv=function(_i){const rs={};_i.logLevel&&(rs.minimalSeverity=_i.logLevel),qr("",rs)}})(Zr||(Zr={})),_r.Logger=Zr;class ts{constructor(Xr,qr,_i,rs,is,ss){this.category=Xr,this.name=qr,this.startTime=_i,this.endCallback=rs,this.timer=is,this.ctx=ss}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class es{constructor(Xr,qr,_i,rs){this.category=Xr,this.name=qr,this.startTime=_i,this.endTime=rs}}_r.Profiler=class{static create(ns){return ns===void 0?new this:new this(ns.maxNumberEvents,ns.flushBatchSize,ns.flushIntervalInMilliseconds)}constructor(ns,Xr,qr){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=ns===void 0?1e4:ns,this._flushBatchSize=Xr===void 0?10:Xr,this._flushIntervalInMilliseconds=qr===void 0?5e3:qr}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,_r.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(ns,Xr,qr,_i){const rs=this._started?this.begin(ns,Xr,_i):void 0;let is=!1;const ss=qr();if(ss&&typeof ss.then=="function")return is=!0,new Promise((os,ls)=>{ss.then(async cs=>{rs&&await rs.end(),os(cs)},async cs=>{rs&&await rs.end(),ls(cs)})});if(!is&&rs){const os=rs.end();if(os&&typeof os.then=="function")return new Promise((ls,cs)=>{os.then(()=>{ls(ss)},ds=>{cs(ds)})})}return ss}begin(ns,Xr,qr){if(!this._started)throw new Error("profiler is not started yet");if(qr===void 0){const _i=(0,_r.now)();return this.flush(_i),new ts(ns,Xr,_i,rs=>this.endSync(rs))}{const _i=qr.beginTimer();return new ts(ns,Xr,0,async rs=>this.end(rs),_i,qr)}}async end(ns){const Xr=await ns.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new es(ns.category,ns.name,ns.startTime,Xr)),this.flush(Xr))}endSync(ns){const Xr=(0,_r.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new es(ns.category,ns.name,ns.startTime,Xr)),this.flush(Xr))}logOneEvent(ns){_r.Logger.verbose(`Profiler.${ns.category}`,`${(ns.endTime-ns.startTime).toFixed(2)}ms on event '${ns.name}' at ${ns.endTime.toFixed(2)}`)}flush(ns){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||ns-this._flushTime>=this._flushIntervalInMilliseconds){for(const Xr=this._flushPointer;this._flushPointer<Xr+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,_r.now)()}}get started(){return this._started}},_r.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},1745:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.Model=void 0;const jr=Ur(5686),Gr=Ur(4662),Wr=Ur(5127),Zr=Ur(2446),Yr=Ur(7273);var ts=Wr.onnxruntime.experimental.fbs;_r.Model=class{constructor(){}load(es,ns,Xr){if(!Xr)try{return void this.loadFromOnnxFormat(es,ns)}catch(qr){if(Xr!==void 0)throw qr}this.loadFromOrtFormat(es,ns)}loadFromOnnxFormat(es,ns){const Xr=Zr.onnx.ModelProto.decode(es);if(Yr.LongUtil.longToNumber(Xr.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=Xr.opsetImport.map(qr=>({domain:qr.domain,version:Yr.LongUtil.longToNumber(qr.version)})),this._graph=Gr.Graph.from(Xr.graph,ns)}loadFromOrtFormat(es,ns){const Xr=new jr.flatbuffers.ByteBuffer(es),qr=ts.InferenceSession.getRootAsInferenceSession(Xr).model();if(Yr.LongUtil.longToNumber(qr.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let _i=0;_i<qr.opsetImportLength();_i++){const rs=qr.opsetImport(_i);this._opsets.push({domain:rs==null?void 0:rs.domain(),version:Yr.LongUtil.longToNumber(rs.version())})}this._graph=Gr.Graph.from(qr.graph(),ns)}get graph(){return this._graph}get opsets(){return this._opsets}}},6145:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.FLOAT_TYPES=_r.INT_TYPES=_r.NUMBER_TYPES=void 0,_r.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],_r.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],_r.FLOAT_TYPES=["float32","float64"]},5881:(Nr,_r)=>{function Ur(jr,Gr){if(Gr.endsWith("+")){const Wr=Number.parseInt(Gr.substring(0,Gr.length-1),10);return!isNaN(Wr)&&Wr<=jr}if(Gr.split("-").length===2){const Wr=Gr.split("-"),Zr=Number.parseInt(Wr[0],10),Yr=Number.parseInt(Wr[1],10);return!isNaN(Zr)&&!isNaN(Yr)&&Zr<=jr&&jr<=Yr}return Number.parseInt(Gr,10)===jr}Object.defineProperty(_r,"__esModule",{value:!0}),_r.resolveOperator=void 0,_r.resolveOperator=function(jr,Gr,Wr){for(const Zr of Wr){const Yr=Zr[0],ts=Zr[1],es=Zr[2],ns=Zr[3],Xr=Zr[4];if(jr.opType===Yr){for(const qr of Gr)if((qr.domain===ts||qr.domain==="ai.onnx"&&ts==="")&&Ur(qr.version,es))return{opImpl:ns,opInit:Xr}}}throw new TypeError(`cannot resolve operator '${jr.opType}' with opsets: ${Gr.map(Zr=>`${Zr.domain||"ai.onnx"} v${Zr.version}`).join(", ")}`)}},5127:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.onnxruntime=void 0;const jr=Ur(5686);var Gr,Wr;Gr=_r.onnxruntime||(_r.onnxruntime={}),function(Zr){(function(Yr){Yr[Yr.UNDEFINED=0]="UNDEFINED",Yr[Yr.FLOAT=1]="FLOAT",Yr[Yr.INT=2]="INT",Yr[Yr.STRING=3]="STRING",Yr[Yr.TENSOR=4]="TENSOR",Yr[Yr.GRAPH=5]="GRAPH",Yr[Yr.FLOATS=6]="FLOATS",Yr[Yr.INTS=7]="INTS",Yr[Yr.STRINGS=8]="STRINGS",Yr[Yr.TENSORS=9]="TENSORS",Yr[Yr.GRAPHS=10]="GRAPHS",Yr[Yr.SPARSE_TENSOR=11]="SPARSE_TENSOR",Yr[Yr.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(Zr.AttributeType||(Zr.AttributeType={}))}((Wr=Gr.experimental||(Gr.experimental={})).fbs||(Wr.fbs={})),function(Zr){(function(Yr){(function(ts){(function(es){es[es.UNKNOWN=0]="UNKNOWN",es[es.VALUE=1]="VALUE",es[es.PARAM=2]="PARAM"})(ts.DimensionValueType||(ts.DimensionValueType={}))})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){(function(es){es[es.UNDEFINED=0]="UNDEFINED",es[es.FLOAT=1]="FLOAT",es[es.UINT8=2]="UINT8",es[es.INT8=3]="INT8",es[es.UINT16=4]="UINT16",es[es.INT16=5]="INT16",es[es.INT32=6]="INT32",es[es.INT64=7]="INT64",es[es.STRING=8]="STRING",es[es.BOOL=9]="BOOL",es[es.FLOAT16=10]="FLOAT16",es[es.DOUBLE=11]="DOUBLE",es[es.UINT32=12]="UINT32",es[es.UINT64=13]="UINT64",es[es.COMPLEX64=14]="COMPLEX64",es[es.COMPLEX128=15]="COMPLEX128",es[es.BFLOAT16=16]="BFLOAT16",es[es.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",es[es.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",es[es.FLOAT8E5M2=19]="FLOAT8E5M2",es[es.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"})(ts.TensorDataType||(ts.TensorDataType={}))})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){(function(es){es[es.Primitive=0]="Primitive",es[es.Fused=1]="Fused"})(ts.NodeType||(ts.NodeType={}))})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){(function(es){es[es.NONE=0]="NONE",es[es.tensor_type=1]="tensor_type",es[es.sequence_type=2]="sequence_type",es[es.map_type=3]="map_type"})(ts.TypeInfoValue||(ts.TypeInfoValue={}))})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsShape(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsShape(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}dim(Xr,qr){let _i=this.bb.__offset(this.bb_pos,4);return _i?(qr||new Zr.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}dimLength(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startShape(Xr){Xr.startObject(1)}static addDim(Xr,qr){Xr.addFieldOffset(0,qr,0)}static createDimVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startDimVector(Xr,qr){Xr.startVector(4,qr,4)}static endShape(Xr){return Xr.endObject()}static createShape(Xr,qr){return es.startShape(Xr),es.addDim(Xr,qr),es.endShape(Xr)}}ts.Shape=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsDimension(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsDimension(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}value(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?(Xr||new Zr.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}denotation(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}static startDimension(Xr){Xr.startObject(2)}static addValue(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addDenotation(Xr,qr){Xr.addFieldOffset(1,qr,0)}static endDimension(Xr){return Xr.endObject()}static createDimension(Xr,qr,_i){return es.startDimension(Xr),es.addValue(Xr,qr),es.addDenotation(Xr,_i),es.endDimension(Xr)}}ts.Dimension=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsDimensionValue(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsDimensionValue(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}dimType(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.readInt8(this.bb_pos+Xr):Zr.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.readInt64(this.bb_pos+Xr):this.bb.createLong(0,0)}dimParam(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}static startDimensionValue(Xr){Xr.startObject(3)}static addDimType(Xr,qr){Xr.addFieldInt8(0,qr,Zr.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(Xr,qr){Xr.addFieldInt64(1,qr,Xr.createLong(0,0))}static addDimParam(Xr,qr){Xr.addFieldOffset(2,qr,0)}static endDimensionValue(Xr){return Xr.endObject()}static createDimensionValue(Xr,qr,_i,rs){return es.startDimensionValue(Xr),es.addDimType(Xr,qr),es.addDimValue(Xr,_i),es.addDimParam(Xr,rs),es.endDimensionValue(Xr)}}ts.DimensionValue=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsTensorTypeAndShape(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsTensorTypeAndShape(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}elemType(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.readInt32(this.bb_pos+Xr):Zr.experimental.fbs.TensorDataType.UNDEFINED}shape(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?(Xr||new Zr.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}static startTensorTypeAndShape(Xr){Xr.startObject(2)}static addElemType(Xr,qr){Xr.addFieldInt32(0,qr,Zr.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(Xr,qr){Xr.addFieldOffset(1,qr,0)}static endTensorTypeAndShape(Xr){return Xr.endObject()}static createTensorTypeAndShape(Xr,qr,_i){return es.startTensorTypeAndShape(Xr),es.addElemType(Xr,qr),es.addShape(Xr,_i),es.endTensorTypeAndShape(Xr)}}ts.TensorTypeAndShape=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsMapType(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsMapType(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}keyType(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.readInt32(this.bb_pos+Xr):Zr.experimental.fbs.TensorDataType.UNDEFINED}valueType(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?(Xr||new Zr.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}static startMapType(Xr){Xr.startObject(2)}static addKeyType(Xr,qr){Xr.addFieldInt32(0,qr,Zr.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(Xr,qr){Xr.addFieldOffset(1,qr,0)}static endMapType(Xr){return Xr.endObject()}static createMapType(Xr,qr,_i){return es.startMapType(Xr),es.addKeyType(Xr,qr),es.addValueType(Xr,_i),es.endMapType(Xr)}}ts.MapType=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsSequenceType(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsSequenceType(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}elemType(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?(Xr||new Zr.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}static startSequenceType(Xr){Xr.startObject(1)}static addElemType(Xr,qr){Xr.addFieldOffset(0,qr,0)}static endSequenceType(Xr){return Xr.endObject()}static createSequenceType(Xr,qr){return es.startSequenceType(Xr),es.addElemType(Xr,qr),es.endSequenceType(Xr)}}ts.SequenceType=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(Yr.fbs||(Yr.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(ts,es){return this.bb_pos=ts,this.bb=es,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(ts,es,ns,Xr){return ts.prep(4,12),ts.writeInt32(Xr),ts.writeInt32(ns),ts.writeInt32(es),ts.offset()}}})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsNodeEdge(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsNodeEdge(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}nodeIndex(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.readUint32(this.bb_pos+Xr):0}inputEdges(Xr,qr){let _i=this.bb.__offset(this.bb_pos,6);return _i?(qr||new Zr.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+_i)+12*Xr,this.bb):null}inputEdgesLength(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}outputEdges(Xr,qr){let _i=this.bb.__offset(this.bb_pos,8);return _i?(qr||new Zr.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+_i)+12*Xr,this.bb):null}outputEdgesLength(){let Xr=this.bb.__offset(this.bb_pos,8);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startNodeEdge(Xr){Xr.startObject(3)}static addNodeIndex(Xr,qr){Xr.addFieldInt32(0,qr,0)}static addInputEdges(Xr,qr){Xr.addFieldOffset(1,qr,0)}static startInputEdgesVector(Xr,qr){Xr.startVector(12,qr,4)}static addOutputEdges(Xr,qr){Xr.addFieldOffset(2,qr,0)}static startOutputEdgesVector(Xr,qr){Xr.startVector(12,qr,4)}static endNodeEdge(Xr){return Xr.endObject()}static createNodeEdge(Xr,qr,_i,rs){return es.startNodeEdge(Xr),es.addNodeIndex(Xr,qr),es.addInputEdges(Xr,_i),es.addOutputEdges(Xr,rs),es.endNodeEdge(Xr)}}ts.NodeEdge=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsNode(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsNode(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}name(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}docString(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}domain(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}sinceVersion(){let Xr=this.bb.__offset(this.bb_pos,10);return Xr?this.bb.readInt32(this.bb_pos+Xr):0}index(){let Xr=this.bb.__offset(this.bb_pos,12);return Xr?this.bb.readUint32(this.bb_pos+Xr):0}opType(Xr){let qr=this.bb.__offset(this.bb_pos,14);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}type(){let Xr=this.bb.__offset(this.bb_pos,16);return Xr?this.bb.readInt32(this.bb_pos+Xr):Zr.experimental.fbs.NodeType.Primitive}executionProviderType(Xr){let qr=this.bb.__offset(this.bb_pos,18);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}inputs(Xr,qr){let _i=this.bb.__offset(this.bb_pos,20);return _i?this.bb.__string(this.bb.__vector(this.bb_pos+_i)+4*Xr,qr):null}inputsLength(){let Xr=this.bb.__offset(this.bb_pos,20);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}outputs(Xr,qr){let _i=this.bb.__offset(this.bb_pos,22);return _i?this.bb.__string(this.bb.__vector(this.bb_pos+_i)+4*Xr,qr):null}outputsLength(){let Xr=this.bb.__offset(this.bb_pos,22);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}attributes(Xr,qr){let _i=this.bb.__offset(this.bb_pos,24);return _i?(qr||new Zr.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}attributesLength(){let Xr=this.bb.__offset(this.bb_pos,24);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}inputArgCounts(Xr){let qr=this.bb.__offset(this.bb_pos,26);return qr?this.bb.readInt32(this.bb.__vector(this.bb_pos+qr)+4*Xr):0}inputArgCountsLength(){let Xr=this.bb.__offset(this.bb_pos,26);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}inputArgCountsArray(){let Xr=this.bb.__offset(this.bb_pos,26);return Xr?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Xr),this.bb.__vector_len(this.bb_pos+Xr)):null}implicitInputs(Xr,qr){let _i=this.bb.__offset(this.bb_pos,28);return _i?this.bb.__string(this.bb.__vector(this.bb_pos+_i)+4*Xr,qr):null}implicitInputsLength(){let Xr=this.bb.__offset(this.bb_pos,28);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startNode(Xr){Xr.startObject(13)}static addName(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addDocString(Xr,qr){Xr.addFieldOffset(1,qr,0)}static addDomain(Xr,qr){Xr.addFieldOffset(2,qr,0)}static addSinceVersion(Xr,qr){Xr.addFieldInt32(3,qr,0)}static addIndex(Xr,qr){Xr.addFieldInt32(4,qr,0)}static addOpType(Xr,qr){Xr.addFieldOffset(5,qr,0)}static addType(Xr,qr){Xr.addFieldInt32(6,qr,Zr.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(Xr,qr){Xr.addFieldOffset(7,qr,0)}static addInputs(Xr,qr){Xr.addFieldOffset(8,qr,0)}static createInputsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startInputsVector(Xr,qr){Xr.startVector(4,qr,4)}static addOutputs(Xr,qr){Xr.addFieldOffset(9,qr,0)}static createOutputsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startOutputsVector(Xr,qr){Xr.startVector(4,qr,4)}static addAttributes(Xr,qr){Xr.addFieldOffset(10,qr,0)}static createAttributesVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startAttributesVector(Xr,qr){Xr.startVector(4,qr,4)}static addInputArgCounts(Xr,qr){Xr.addFieldOffset(11,qr,0)}static createInputArgCountsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addInt32(qr[_i]);return Xr.endVector()}static startInputArgCountsVector(Xr,qr){Xr.startVector(4,qr,4)}static addImplicitInputs(Xr,qr){Xr.addFieldOffset(12,qr,0)}static createImplicitInputsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startImplicitInputsVector(Xr,qr){Xr.startVector(4,qr,4)}static endNode(Xr){return Xr.endObject()}static createNode(Xr,qr,_i,rs,is,ss,os,ls,cs,ds,fs,ms,ps,ys){return es.startNode(Xr),es.addName(Xr,qr),es.addDocString(Xr,_i),es.addDomain(Xr,rs),es.addSinceVersion(Xr,is),es.addIndex(Xr,ss),es.addOpType(Xr,os),es.addType(Xr,ls),es.addExecutionProviderType(Xr,cs),es.addInputs(Xr,ds),es.addOutputs(Xr,fs),es.addAttributes(Xr,ms),es.addInputArgCounts(Xr,ps),es.addImplicitInputs(Xr,ys),es.endNode(Xr)}}ts.Node=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsValueInfo(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsValueInfo(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}name(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}docString(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}type(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?(Xr||new Zr.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}static startValueInfo(Xr){Xr.startObject(3)}static addName(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addDocString(Xr,qr){Xr.addFieldOffset(1,qr,0)}static addType(Xr,qr){Xr.addFieldOffset(2,qr,0)}static endValueInfo(Xr){return Xr.endObject()}static createValueInfo(Xr,qr,_i,rs){return es.startValueInfo(Xr),es.addName(Xr,qr),es.addDocString(Xr,_i),es.addType(Xr,rs),es.endValueInfo(Xr)}}ts.ValueInfo=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsTypeInfo(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsTypeInfo(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}denotation(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}valueType(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.readUint8(this.bb_pos+Xr):Zr.experimental.fbs.TypeInfoValue.NONE}value(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?this.bb.__union(Xr,this.bb_pos+qr):null}static startTypeInfo(Xr){Xr.startObject(3)}static addDenotation(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addValueType(Xr,qr){Xr.addFieldInt8(1,qr,Zr.experimental.fbs.TypeInfoValue.NONE)}static addValue(Xr,qr){Xr.addFieldOffset(2,qr,0)}static endTypeInfo(Xr){return Xr.endObject()}static createTypeInfo(Xr,qr,_i,rs){return es.startTypeInfo(Xr),es.addDenotation(Xr,qr),es.addValueType(Xr,_i),es.addValue(Xr,rs),es.endTypeInfo(Xr)}}ts.TypeInfo=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsOperatorSetId(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsOperatorSetId(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}domain(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}version(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.readInt64(this.bb_pos+Xr):this.bb.createLong(0,0)}static startOperatorSetId(Xr){Xr.startObject(2)}static addDomain(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addVersion(Xr,qr){Xr.addFieldInt64(1,qr,Xr.createLong(0,0))}static endOperatorSetId(Xr){return Xr.endObject()}static createOperatorSetId(Xr,qr,_i){return es.startOperatorSetId(Xr),es.addDomain(Xr,qr),es.addVersion(Xr,_i),es.endOperatorSetId(Xr)}}ts.OperatorSetId=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsTensor(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsTensor(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}name(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}docString(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}dims(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?this.bb.readInt64(this.bb.__vector(this.bb_pos+qr)+8*Xr):this.bb.createLong(0,0)}dimsLength(){let Xr=this.bb.__offset(this.bb_pos,8);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}dataType(){let Xr=this.bb.__offset(this.bb_pos,10);return Xr?this.bb.readInt32(this.bb_pos+Xr):Zr.experimental.fbs.TensorDataType.UNDEFINED}rawData(Xr){let qr=this.bb.__offset(this.bb_pos,12);return qr?this.bb.readUint8(this.bb.__vector(this.bb_pos+qr)+Xr):0}rawDataLength(){let Xr=this.bb.__offset(this.bb_pos,12);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}rawDataArray(){let Xr=this.bb.__offset(this.bb_pos,12);return Xr?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Xr),this.bb.__vector_len(this.bb_pos+Xr)):null}stringData(Xr,qr){let _i=this.bb.__offset(this.bb_pos,14);return _i?this.bb.__string(this.bb.__vector(this.bb_pos+_i)+4*Xr,qr):null}stringDataLength(){let Xr=this.bb.__offset(this.bb_pos,14);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startTensor(Xr){Xr.startObject(6)}static addName(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addDocString(Xr,qr){Xr.addFieldOffset(1,qr,0)}static addDims(Xr,qr){Xr.addFieldOffset(2,qr,0)}static createDimsVector(Xr,qr){Xr.startVector(8,qr.length,8);for(let _i=qr.length-1;_i>=0;_i--)Xr.addInt64(qr[_i]);return Xr.endVector()}static startDimsVector(Xr,qr){Xr.startVector(8,qr,8)}static addDataType(Xr,qr){Xr.addFieldInt32(3,qr,Zr.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(Xr,qr){Xr.addFieldOffset(4,qr,0)}static createRawDataVector(Xr,qr){Xr.startVector(1,qr.length,1);for(let _i=qr.length-1;_i>=0;_i--)Xr.addInt8(qr[_i]);return Xr.endVector()}static startRawDataVector(Xr,qr){Xr.startVector(1,qr,1)}static addStringData(Xr,qr){Xr.addFieldOffset(5,qr,0)}static createStringDataVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startStringDataVector(Xr,qr){Xr.startVector(4,qr,4)}static endTensor(Xr){return Xr.endObject()}static createTensor(Xr,qr,_i,rs,is,ss,os){return es.startTensor(Xr),es.addName(Xr,qr),es.addDocString(Xr,_i),es.addDims(Xr,rs),es.addDataType(Xr,is),es.addRawData(Xr,ss),es.addStringData(Xr,os),es.endTensor(Xr)}}ts.Tensor=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsSparseTensor(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsSparseTensor(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}values(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?(Xr||new Zr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}indices(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?(Xr||new Zr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}dims(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?this.bb.readInt64(this.bb.__vector(this.bb_pos+qr)+8*Xr):this.bb.createLong(0,0)}dimsLength(){let Xr=this.bb.__offset(this.bb_pos,8);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startSparseTensor(Xr){Xr.startObject(3)}static addValues(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addIndices(Xr,qr){Xr.addFieldOffset(1,qr,0)}static addDims(Xr,qr){Xr.addFieldOffset(2,qr,0)}static createDimsVector(Xr,qr){Xr.startVector(8,qr.length,8);for(let _i=qr.length-1;_i>=0;_i--)Xr.addInt64(qr[_i]);return Xr.endVector()}static startDimsVector(Xr,qr){Xr.startVector(8,qr,8)}static endSparseTensor(Xr){return Xr.endObject()}static createSparseTensor(Xr,qr,_i,rs){return es.startSparseTensor(Xr),es.addValues(Xr,qr),es.addIndices(Xr,_i),es.addDims(Xr,rs),es.endSparseTensor(Xr)}}ts.SparseTensor=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsAttribute(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsAttribute(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}name(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}docString(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}type(){let Xr=this.bb.__offset(this.bb_pos,8);return Xr?this.bb.readInt32(this.bb_pos+Xr):Zr.experimental.fbs.AttributeType.UNDEFINED}f(){let Xr=this.bb.__offset(this.bb_pos,10);return Xr?this.bb.readFloat32(this.bb_pos+Xr):0}i(){let Xr=this.bb.__offset(this.bb_pos,12);return Xr?this.bb.readInt64(this.bb_pos+Xr):this.bb.createLong(0,0)}s(Xr){let qr=this.bb.__offset(this.bb_pos,14);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}t(Xr){let qr=this.bb.__offset(this.bb_pos,16);return qr?(Xr||new Zr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}g(Xr){let qr=this.bb.__offset(this.bb_pos,18);return qr?(Xr||new Zr.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}floats(Xr){let qr=this.bb.__offset(this.bb_pos,20);return qr?this.bb.readFloat32(this.bb.__vector(this.bb_pos+qr)+4*Xr):0}floatsLength(){let Xr=this.bb.__offset(this.bb_pos,20);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}floatsArray(){let Xr=this.bb.__offset(this.bb_pos,20);return Xr?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Xr),this.bb.__vector_len(this.bb_pos+Xr)):null}ints(Xr){let qr=this.bb.__offset(this.bb_pos,22);return qr?this.bb.readInt64(this.bb.__vector(this.bb_pos+qr)+8*Xr):this.bb.createLong(0,0)}intsLength(){let Xr=this.bb.__offset(this.bb_pos,22);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}strings(Xr,qr){let _i=this.bb.__offset(this.bb_pos,24);return _i?this.bb.__string(this.bb.__vector(this.bb_pos+_i)+4*Xr,qr):null}stringsLength(){let Xr=this.bb.__offset(this.bb_pos,24);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}tensors(Xr,qr){let _i=this.bb.__offset(this.bb_pos,26);return _i?(qr||new Zr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}tensorsLength(){let Xr=this.bb.__offset(this.bb_pos,26);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}graphs(Xr,qr){let _i=this.bb.__offset(this.bb_pos,28);return _i?(qr||new Zr.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}graphsLength(){let Xr=this.bb.__offset(this.bb_pos,28);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startAttribute(Xr){Xr.startObject(13)}static addName(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addDocString(Xr,qr){Xr.addFieldOffset(1,qr,0)}static addType(Xr,qr){Xr.addFieldInt32(2,qr,Zr.experimental.fbs.AttributeType.UNDEFINED)}static addF(Xr,qr){Xr.addFieldFloat32(3,qr,0)}static addI(Xr,qr){Xr.addFieldInt64(4,qr,Xr.createLong(0,0))}static addS(Xr,qr){Xr.addFieldOffset(5,qr,0)}static addT(Xr,qr){Xr.addFieldOffset(6,qr,0)}static addG(Xr,qr){Xr.addFieldOffset(7,qr,0)}static addFloats(Xr,qr){Xr.addFieldOffset(8,qr,0)}static createFloatsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addFloat32(qr[_i]);return Xr.endVector()}static startFloatsVector(Xr,qr){Xr.startVector(4,qr,4)}static addInts(Xr,qr){Xr.addFieldOffset(9,qr,0)}static createIntsVector(Xr,qr){Xr.startVector(8,qr.length,8);for(let _i=qr.length-1;_i>=0;_i--)Xr.addInt64(qr[_i]);return Xr.endVector()}static startIntsVector(Xr,qr){Xr.startVector(8,qr,8)}static addStrings(Xr,qr){Xr.addFieldOffset(10,qr,0)}static createStringsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startStringsVector(Xr,qr){Xr.startVector(4,qr,4)}static addTensors(Xr,qr){Xr.addFieldOffset(11,qr,0)}static createTensorsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startTensorsVector(Xr,qr){Xr.startVector(4,qr,4)}static addGraphs(Xr,qr){Xr.addFieldOffset(12,qr,0)}static createGraphsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startGraphsVector(Xr,qr){Xr.startVector(4,qr,4)}static endAttribute(Xr){return Xr.endObject()}static createAttribute(Xr,qr,_i,rs,is,ss,os,ls,cs,ds,fs,ms,ps,ys){return es.startAttribute(Xr),es.addName(Xr,qr),es.addDocString(Xr,_i),es.addType(Xr,rs),es.addF(Xr,is),es.addI(Xr,ss),es.addS(Xr,os),es.addT(Xr,ls),es.addG(Xr,cs),es.addFloats(Xr,ds),es.addInts(Xr,fs),es.addStrings(Xr,ms),es.addTensors(Xr,ps),es.addGraphs(Xr,ys),es.endAttribute(Xr)}}ts.Attribute=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsGraph(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsGraph(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}initializers(Xr,qr){let _i=this.bb.__offset(this.bb_pos,4);return _i?(qr||new Zr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}initializersLength(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}nodeArgs(Xr,qr){let _i=this.bb.__offset(this.bb_pos,6);return _i?(qr||new Zr.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}nodeArgsLength(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}nodes(Xr,qr){let _i=this.bb.__offset(this.bb_pos,8);return _i?(qr||new Zr.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}nodesLength(){let Xr=this.bb.__offset(this.bb_pos,8);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}maxNodeIndex(){let Xr=this.bb.__offset(this.bb_pos,10);return Xr?this.bb.readUint32(this.bb_pos+Xr):0}nodeEdges(Xr,qr){let _i=this.bb.__offset(this.bb_pos,12);return _i?(qr||new Zr.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}nodeEdgesLength(){let Xr=this.bb.__offset(this.bb_pos,12);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}inputs(Xr,qr){let _i=this.bb.__offset(this.bb_pos,14);return _i?this.bb.__string(this.bb.__vector(this.bb_pos+_i)+4*Xr,qr):null}inputsLength(){let Xr=this.bb.__offset(this.bb_pos,14);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}outputs(Xr,qr){let _i=this.bb.__offset(this.bb_pos,16);return _i?this.bb.__string(this.bb.__vector(this.bb_pos+_i)+4*Xr,qr):null}outputsLength(){let Xr=this.bb.__offset(this.bb_pos,16);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}sparseInitializers(Xr,qr){let _i=this.bb.__offset(this.bb_pos,18);return _i?(qr||new Zr.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}sparseInitializersLength(){let Xr=this.bb.__offset(this.bb_pos,18);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startGraph(Xr){Xr.startObject(8)}static addInitializers(Xr,qr){Xr.addFieldOffset(0,qr,0)}static createInitializersVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startInitializersVector(Xr,qr){Xr.startVector(4,qr,4)}static addNodeArgs(Xr,qr){Xr.addFieldOffset(1,qr,0)}static createNodeArgsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startNodeArgsVector(Xr,qr){Xr.startVector(4,qr,4)}static addNodes(Xr,qr){Xr.addFieldOffset(2,qr,0)}static createNodesVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startNodesVector(Xr,qr){Xr.startVector(4,qr,4)}static addMaxNodeIndex(Xr,qr){Xr.addFieldInt32(3,qr,0)}static addNodeEdges(Xr,qr){Xr.addFieldOffset(4,qr,0)}static createNodeEdgesVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startNodeEdgesVector(Xr,qr){Xr.startVector(4,qr,4)}static addInputs(Xr,qr){Xr.addFieldOffset(5,qr,0)}static createInputsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startInputsVector(Xr,qr){Xr.startVector(4,qr,4)}static addOutputs(Xr,qr){Xr.addFieldOffset(6,qr,0)}static createOutputsVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startOutputsVector(Xr,qr){Xr.startVector(4,qr,4)}static addSparseInitializers(Xr,qr){Xr.addFieldOffset(7,qr,0)}static createSparseInitializersVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startSparseInitializersVector(Xr,qr){Xr.startVector(4,qr,4)}static endGraph(Xr){return Xr.endObject()}static createGraph(Xr,qr,_i,rs,is,ss,os,ls,cs){return es.startGraph(Xr),es.addInitializers(Xr,qr),es.addNodeArgs(Xr,_i),es.addNodes(Xr,rs),es.addMaxNodeIndex(Xr,is),es.addNodeEdges(Xr,ss),es.addInputs(Xr,os),es.addOutputs(Xr,ls),es.addSparseInitializers(Xr,cs),es.endGraph(Xr)}}ts.Graph=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsModel(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsModel(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}irVersion(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.readInt64(this.bb_pos+Xr):this.bb.createLong(0,0)}opsetImport(Xr,qr){let _i=this.bb.__offset(this.bb_pos,6);return _i?(qr||new Zr.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}opsetImportLength(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}producerName(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}producerVersion(Xr){let qr=this.bb.__offset(this.bb_pos,10);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}domain(Xr){let qr=this.bb.__offset(this.bb_pos,12);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}modelVersion(){let Xr=this.bb.__offset(this.bb_pos,14);return Xr?this.bb.readInt64(this.bb_pos+Xr):this.bb.createLong(0,0)}docString(Xr){let qr=this.bb.__offset(this.bb_pos,16);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}graph(Xr){let qr=this.bb.__offset(this.bb_pos,18);return qr?(Xr||new Zr.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}graphDocString(Xr){let qr=this.bb.__offset(this.bb_pos,20);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}static startModel(Xr){Xr.startObject(9)}static addIrVersion(Xr,qr){Xr.addFieldInt64(0,qr,Xr.createLong(0,0))}static addOpsetImport(Xr,qr){Xr.addFieldOffset(1,qr,0)}static createOpsetImportVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startOpsetImportVector(Xr,qr){Xr.startVector(4,qr,4)}static addProducerName(Xr,qr){Xr.addFieldOffset(2,qr,0)}static addProducerVersion(Xr,qr){Xr.addFieldOffset(3,qr,0)}static addDomain(Xr,qr){Xr.addFieldOffset(4,qr,0)}static addModelVersion(Xr,qr){Xr.addFieldInt64(5,qr,Xr.createLong(0,0))}static addDocString(Xr,qr){Xr.addFieldOffset(6,qr,0)}static addGraph(Xr,qr){Xr.addFieldOffset(7,qr,0)}static addGraphDocString(Xr,qr){Xr.addFieldOffset(8,qr,0)}static endModel(Xr){return Xr.endObject()}static createModel(Xr,qr,_i,rs,is,ss,os,ls,cs,ds){return es.startModel(Xr),es.addIrVersion(Xr,qr),es.addOpsetImport(Xr,_i),es.addProducerName(Xr,rs),es.addProducerVersion(Xr,is),es.addDomain(Xr,ss),es.addModelVersion(Xr,os),es.addDocString(Xr,ls),es.addGraph(Xr,cs),es.addGraphDocString(Xr,ds),es.endModel(Xr)}}ts.Model=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsKernelCreateInfos(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsKernelCreateInfos(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}nodeIndices(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.readUint32(this.bb.__vector(this.bb_pos+qr)+4*Xr):0}nodeIndicesLength(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}nodeIndicesArray(){let Xr=this.bb.__offset(this.bb_pos,4);return Xr?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Xr),this.bb.__vector_len(this.bb_pos+Xr)):null}kernelDefHashes(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?this.bb.readUint64(this.bb.__vector(this.bb_pos+qr)+8*Xr):this.bb.createLong(0,0)}kernelDefHashesLength(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startKernelCreateInfos(Xr){Xr.startObject(2)}static addNodeIndices(Xr,qr){Xr.addFieldOffset(0,qr,0)}static createNodeIndicesVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addInt32(qr[_i]);return Xr.endVector()}static startNodeIndicesVector(Xr,qr){Xr.startVector(4,qr,4)}static addKernelDefHashes(Xr,qr){Xr.addFieldOffset(1,qr,0)}static createKernelDefHashesVector(Xr,qr){Xr.startVector(8,qr.length,8);for(let _i=qr.length-1;_i>=0;_i--)Xr.addInt64(qr[_i]);return Xr.endVector()}static startKernelDefHashesVector(Xr,qr){Xr.startVector(8,qr,8)}static endKernelCreateInfos(Xr){return Xr.endObject()}static createKernelCreateInfos(Xr,qr,_i){return es.startKernelCreateInfos(Xr),es.addNodeIndices(Xr,qr),es.addKernelDefHashes(Xr,_i),es.endKernelCreateInfos(Xr)}}ts.KernelCreateInfos=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsSubGraphSessionState(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsSubGraphSessionState(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}graphId(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}sessionState(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?(Xr||new Zr.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}static startSubGraphSessionState(Xr){Xr.startObject(2)}static addGraphId(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addSessionState(Xr,qr){Xr.addFieldOffset(1,qr,0)}static endSubGraphSessionState(Xr){let qr=Xr.endObject();return Xr.requiredField(qr,4),qr}static createSubGraphSessionState(Xr,qr,_i){return es.startSubGraphSessionState(Xr),es.addGraphId(Xr,qr),es.addSessionState(Xr,_i),es.endSubGraphSessionState(Xr)}}ts.SubGraphSessionState=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsSessionState(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsSessionState(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}kernels(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?(Xr||new Zr.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}subGraphSessionStates(Xr,qr){let _i=this.bb.__offset(this.bb_pos,6);return _i?(qr||new Zr.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+_i)+4*Xr),this.bb):null}subGraphSessionStatesLength(){let Xr=this.bb.__offset(this.bb_pos,6);return Xr?this.bb.__vector_len(this.bb_pos+Xr):0}static startSessionState(Xr){Xr.startObject(2)}static addKernels(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addSubGraphSessionStates(Xr,qr){Xr.addFieldOffset(1,qr,0)}static createSubGraphSessionStatesVector(Xr,qr){Xr.startVector(4,qr.length,4);for(let _i=qr.length-1;_i>=0;_i--)Xr.addOffset(qr[_i]);return Xr.endVector()}static startSubGraphSessionStatesVector(Xr,qr){Xr.startVector(4,qr,4)}static endSessionState(Xr){return Xr.endObject()}static createSessionState(Xr,qr,_i){return es.startSessionState(Xr),es.addKernels(Xr,qr),es.addSubGraphSessionStates(Xr,_i),es.endSessionState(Xr)}}ts.SessionState=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={})),function(Zr){(function(Yr){(function(ts){class es{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,qr){return this.bb_pos=Xr,this.bb=qr,this}static getRootAsInferenceSession(Xr,qr){return(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static getSizePrefixedRootAsInferenceSession(Xr,qr){return Xr.setPosition(Xr.position()+jr.flatbuffers.SIZE_PREFIX_LENGTH),(qr||new es).__init(Xr.readInt32(Xr.position())+Xr.position(),Xr)}static bufferHasIdentifier(Xr){return Xr.__has_identifier("ORTM")}ortVersion(Xr){let qr=this.bb.__offset(this.bb_pos,4);return qr?this.bb.__string(this.bb_pos+qr,Xr):null}model(Xr){let qr=this.bb.__offset(this.bb_pos,6);return qr?(Xr||new Zr.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}sessionState(Xr){let qr=this.bb.__offset(this.bb_pos,8);return qr?(Xr||new Zr.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+qr),this.bb):null}static startInferenceSession(Xr){Xr.startObject(3)}static addOrtVersion(Xr,qr){Xr.addFieldOffset(0,qr,0)}static addModel(Xr,qr){Xr.addFieldOffset(1,qr,0)}static addSessionState(Xr,qr){Xr.addFieldOffset(2,qr,0)}static endInferenceSession(Xr){return Xr.endObject()}static finishInferenceSessionBuffer(Xr,qr){Xr.finish(qr,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(Xr,qr){Xr.finish(qr,"ORTM",!0)}static createInferenceSession(Xr,qr,_i,rs){return es.startInferenceSession(Xr),es.addOrtVersion(Xr,qr),es.addModel(Xr,_i),es.addSessionState(Xr,rs),es.endInferenceSession(Xr)}}ts.InferenceSession=es})(Yr.fbs||(Yr.fbs={}))})(Zr.experimental||(Zr.experimental={}))}(_r.onnxruntime||(_r.onnxruntime={}))},1723:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.OnnxjsSessionHandler=void 0;const jr=Ur(2235),Gr=Ur(9240);_r.OnnxjsSessionHandler=class{constructor(Wr){this.session=Wr,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(Wr,Zr,Yr){const ts=new Map;for(const Xr in Wr)if(Object.hasOwnProperty.call(Wr,Xr)){const qr=Wr[Xr];ts.set(Xr,new Gr.Tensor(qr.dims,qr.type,void 0,void 0,qr.data))}const es=await this.session.run(ts),ns={};return es.forEach((Xr,qr)=>{ns[qr]=new jr.Tensor(Xr.type,Xr.data,Xr.dims)}),ns}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6027:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.Session=void 0;const jr=Ur(7067),Gr=Ur(1296),Wr=Ur(1975),Zr=Ur(6496),Yr=Ur(1315),ts=Ur(1745);_r.Session=class{constructor(es={}){this._initialized=!1,this.backendHint=es.backendHint,this.profiler=Yr.Profiler.create(es.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(es,ns,Xr){await this.profiler.event("session","Session.loadModel",async()=>{const qr=await(0,Wr.resolveBackend)(this.backendHint);if(this.sessionHandler=qr.createSessionHandler(this.context),this._model=new ts.Model,typeof es=="string"){const _i=es.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){const rs=await(0,Gr.promisify)(jr.readFile)(es);this.initialize(rs,_i)}else{const rs=await fetch(es),is=await rs.arrayBuffer();this.initialize(new Uint8Array(is),_i)}}else if(ArrayBuffer.isView(es))this.initialize(es);else{const _i=new Uint8Array(es,ns||0,Xr||es.byteLength);this.initialize(_i)}})}initialize(es,ns){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const Xr=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(es,Xr,ns),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new Zr.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(es){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const ns=this.normalizeAndValidateInputs(es),Xr=await this._executionPlan.execute(this.sessionHandler,ns);return this.createOutput(Xr)})}normalizeAndValidateInputs(es){const ns=this._model.graph.getInputNames();if(Array.isArray(es)){if(es.length!==ns.length)throw new Error(`incorrect input array length: expected ${ns.length} but got ${es.length}`)}else{if(es.size!==ns.length)throw new Error(`incorrect input map size: expected ${ns.length} but got ${es.size}`);const Xr=new Array(es.size);let qr=0;for(let _i=0;_i<ns.length;++_i){const rs=es.get(ns[_i]);if(!rs)throw new Error(`missing input tensor for: '${name}'`);Xr[qr++]=rs}es=Xr}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,es,!1);else{const Xr=this._model.graph.getInputIndices(),qr=this._model.graph.getValues(),_i=new Array(Xr.length);for(let rs=0;rs<Xr.length;++rs){const is=qr[Xr[rs]];_i[rs]=is.type.shape.dims,this.context.graphInputTypes.push(is.type.tensorType),this.context.graphInputDims.push(es[rs].dims)}this.validateInputTensorDims(_i,es,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,es),es}validateInputTensorTypes(es,ns){for(let Xr=0;Xr<ns.length;Xr++){const qr=es[Xr],_i=ns[Xr].type;if(qr!==_i)throw new Error(`input tensor[${Xr}] check failed: expected type '${qr}' but got ${_i}`)}}validateInputTensorDims(es,ns,Xr){for(let qr=0;qr<ns.length;qr++){const _i=es[qr],rs=ns[qr].dims;if(!this.compareTensorDims(_i,rs,Xr))throw new Error(`input tensor[${qr}] check failed: expected shape '[${_i.join(",")}]' but got [${rs.join(",")}]`)}}compareTensorDims(es,ns,Xr){if(es.length!==ns.length)return!1;for(let qr=0;qr<es.length;++qr)if(es[qr]!==ns[qr]&&(!Xr||es[qr]!==0))return!1;return!0}createOutput(es){const ns=this._model.graph.getOutputNames();if(es.length!==ns.length)throw new Error("expected number of outputs do not match number of generated outputs");const Xr=new Map;for(let qr=0;qr<ns.length;++qr)Xr.set(ns[qr],es[qr]);return Xr}initializeOps(es){const ns=es.getNodes();this._ops=new Array(ns.length);for(let Xr=0;Xr<ns.length;Xr++)this._ops[Xr]=this.sessionHandler.resolve(ns[Xr],this._model.opsets,es)}}},9240:function(Nr,_r,Ur){var jr=this&&this.__importDefault||function(is){return is&&is.__esModule?is:{default:is}};Object.defineProperty(_r,"__esModule",{value:!0}),_r.Tensor=void 0;const Gr=Ur(3442),Wr=jr(Ur(1583)),Zr=Ur(5127),Yr=Ur(2446),ts=Ur(7273);var es=Zr.onnxruntime.experimental.fbs;class ns{get data(){if(this.cache===void 0){const ss=this.dataProvider(this.dataId);if(ss.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=ss}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(ss){return this.data[ts.ShapeUtil.indicesToOffset(ss,this.strides)]}set(ss,os){this.data[ts.ShapeUtil.indicesToOffset(ss,this.strides)]=os}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=ts.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(ss,os,ls,cs,ds,fs=Gr.Guid.create()){this.dims=ss,this.type=os,this.dataProvider=ls,this.asyncDataProvider=cs,this.cache=ds,this.dataId=fs,this.size=ts.ShapeUtil.validateDimsAndCalcSize(ss);const ms=this.size,ps=ls===void 0&&cs===void 0&&ds===void 0;if(ds!==void 0&&ds.length!==ms)throw new RangeError("Input dims doesn't match data length.");if(os==="string"){if(!(ds===void 0||Array.isArray(ds)&&ds.every(ys=>typeof ys=="string")))throw new TypeError("cache should be a string array");ps&&(this.cache=new Array(ms))}else{if(ds!==void 0){const ys=qr(os);if(!(ds instanceof ys))throw new TypeError(`cache should be type ${ys.name}`)}if(ps){const ys=new ArrayBuffer(ms*function(ws){switch(ws){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${ws}`)}}(os));this.cache=function(ws,xs){return new(qr(xs))(ws)}(ys,os)}}}static fromProto(ss){if(!ss)throw new Error("cannot construct Value from an empty tensor");const os=ts.ProtoUtil.tensorDataTypeFromProto(ss.dataType),ls=ts.ProtoUtil.tensorDimsFromProto(ss.dims),cs=new ns(ls,os);if(os==="string")ss.stringData.forEach((ds,fs)=>{cs.data[fs]=(0,ts.decodeUtf8String)(ds)});else if(ss.rawData&&typeof ss.rawData.byteLength=="number"&&ss.rawData.byteLength>0){const ds=cs.data,fs=new DataView(ss.rawData.buffer,ss.rawData.byteOffset,ss.rawData.byteLength),ms=Xr(ss.dataType),ps=ss.rawData.byteLength/ms;if(ss.rawData.byteLength%ms!=0)throw new Error("invalid buffer length");if(ds.length!==ps)throw new Error("buffer length mismatch");for(let ys=0;ys<ps;ys++){const ws=rs(fs,ss.dataType,ys*ms);ds[ys]=ws}}else{let ds;switch(ss.dataType){case Yr.onnx.TensorProto.DataType.FLOAT:ds=ss.floatData;break;case Yr.onnx.TensorProto.DataType.INT32:case Yr.onnx.TensorProto.DataType.INT16:case Yr.onnx.TensorProto.DataType.UINT16:case Yr.onnx.TensorProto.DataType.INT8:case Yr.onnx.TensorProto.DataType.UINT8:case Yr.onnx.TensorProto.DataType.BOOL:ds=ss.int32Data;break;case Yr.onnx.TensorProto.DataType.INT64:ds=ss.int64Data;break;case Yr.onnx.TensorProto.DataType.DOUBLE:ds=ss.doubleData;break;case Yr.onnx.TensorProto.DataType.UINT32:case Yr.onnx.TensorProto.DataType.UINT64:ds=ss.uint64Data;break;default:throw new Error("unspecific error")}if(ds==null)throw new Error("failed to populate data from a tensorproto value");const fs=cs.data;if(fs.length!==ds.length)throw new Error("array length mismatch");for(let ms=0;ms<ds.length;ms++){const ps=ds[ms];Wr.default.isLong(ps)?fs[ms]=_i(ps,ss.dataType):fs[ms]=ps}}return cs}static fromData(ss,os,ls){return new ns(os,ls,void 0,void 0,ss)}static fromOrtTensor(ss){if(!ss)throw new Error("cannot construct Value from an empty tensor");const os=ts.ProtoUtil.tensorDimsFromORTFormat(ss),ls=ts.ProtoUtil.tensorDataTypeFromProto(ss.dataType()),cs=new ns(os,ls);if(ls==="string")for(let ds=0;ds<ss.stringDataLength();ds++)cs.data[ds]=ss.stringData(ds);else if(ss.rawDataArray()&&typeof ss.rawDataLength()=="number"&&ss.rawDataLength()>0){const ds=cs.data,fs=new DataView(ss.rawDataArray().buffer,ss.rawDataArray().byteOffset,ss.rawDataLength()),ms=Xr(ss.dataType()),ps=ss.rawDataLength()/ms;if(ss.rawDataLength()%ms!=0)throw new Error("invalid buffer length");if(ds.length!==ps)throw new Error("buffer length mismatch");for(let ys=0;ys<ps;ys++){const ws=rs(fs,ss.dataType(),ys*ms);ds[ys]=ws}}return cs}}function Xr(is){switch(is){case Yr.onnx.TensorProto.DataType.UINT8:case Yr.onnx.TensorProto.DataType.INT8:case Yr.onnx.TensorProto.DataType.BOOL:return 1;case Yr.onnx.TensorProto.DataType.UINT16:case Yr.onnx.TensorProto.DataType.INT16:return 2;case Yr.onnx.TensorProto.DataType.FLOAT:case Yr.onnx.TensorProto.DataType.INT32:case Yr.onnx.TensorProto.DataType.UINT32:return 4;case Yr.onnx.TensorProto.DataType.INT64:case Yr.onnx.TensorProto.DataType.DOUBLE:case Yr.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${Yr.onnx.TensorProto.DataType[is]}`)}}function qr(is){switch(is){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function _i(is,ss){if(ss===Yr.onnx.TensorProto.DataType.INT64||ss===es.TensorDataType.INT64){if(is.greaterThanOrEqual(2147483648)||is.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(ss!==Yr.onnx.TensorProto.DataType.UINT32&&ss!==es.TensorDataType.UINT32&&ss!==Yr.onnx.TensorProto.DataType.UINT64&&ss!==es.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${Yr.onnx.TensorProto.DataType[ss]}`);if(is.greaterThanOrEqual(4294967296)||is.lessThan(0))throw new TypeError("uint64 is not supported")}return is.toNumber()}function rs(is,ss,os){switch(ss){case Yr.onnx.TensorProto.DataType.BOOL:case Yr.onnx.TensorProto.DataType.UINT8:return is.getUint8(os);case Yr.onnx.TensorProto.DataType.INT8:return is.getInt8(os);case Yr.onnx.TensorProto.DataType.UINT16:return is.getUint16(os,!0);case Yr.onnx.TensorProto.DataType.INT16:return is.getInt16(os,!0);case Yr.onnx.TensorProto.DataType.FLOAT:return is.getFloat32(os,!0);case Yr.onnx.TensorProto.DataType.INT32:return is.getInt32(os,!0);case Yr.onnx.TensorProto.DataType.UINT32:return is.getUint32(os,!0);case Yr.onnx.TensorProto.DataType.INT64:return _i(Wr.default.fromBits(is.getUint32(os,!0),is.getUint32(os+4,!0),!1),ss);case Yr.onnx.TensorProto.DataType.DOUBLE:return is.getFloat64(os,!0);case Yr.onnx.TensorProto.DataType.UINT64:return _i(Wr.default.fromBits(is.getUint32(os,!0),is.getUint32(os+4,!0),!0),ss);default:throw new Error(`cannot read from DataView for type ${Yr.onnx.TensorProto.DataType[ss]}`)}}_r.Tensor=ns},7273:function(Nr,_r,Ur){var jr=this&&this.__importDefault||function(ss){return ss&&ss.__esModule?ss:{default:ss}};Object.defineProperty(_r,"__esModule",{value:!0}),_r.decodeUtf8String=_r.MAX_CLIP=_r.MIN_CLIP=_r.PoolConvUtil=_r.ReduceUtil=_r.SplitUtil=_r.MathUtil=_r.ShapeUtil=_r.LongUtil=_r.ProtoUtil=_r.GemmUtil=_r.arrayCopyHelper=_r.BroadcastUtil=_r.MatMulUtil=_r.ArrayUtil=_r.assert=_r.checkInputsShape=void 0;const Gr=Ur(5686),Wr=jr(Ur(1583)),Zr=Ur(2446),Yr=Ur(9240);_r.checkInputsShape=function(ss,...os){if(!ss||ss.length!==os.length)return!1;for(let ls=0;ls<ss.length;ls++)if(!ss[ls].dims||ss[ls].dims.length!==os[ls])return!1;return!0},_r.assert=function(ss,os){if(!ss)throw new Error(typeof os=="string"?os:os())},_r.ArrayUtil=class{static arraysEqual(ss,os){if(ss.length!==os.length)return!1;for(let ls=0;ls<ss.length;ls++)if(ss[ls]!==os[ls])return!1;return!0}};class ts{static preprocessInputShapes(os,ls){return[os.length===1?[1,os[0]]:os,ls.length===1?[ls[0],1]:ls]}static postprocessOutputShape(os,ls,cs){ls===1&&os.splice(os.length-2,1),cs===1&&os.pop()}static calcMatMulShape(os,ls){return os[1]!==ls[0]?void 0:[os[0],ls[1]]}}_r.MatMulUtil=ts;class es{static calcShape(os,ls,cs=!1){const ds=os.length,fs=ls.length;if(ds===0)return ls;if(fs===0)return os;const ms=Math.max(os.length,ls.length),ps=new Array(ms);if(cs){if(ds<2||fs<2)return;const ys=ts.calcMatMulShape([os[ds-2],os[ds-1]],[ls[fs-2],ls[fs-1]]);if(ys===void 0)return;[ps[ms-2],ps[ms-1]]=ys}for(let ys=cs?3:1;ys<=ms;ys++){const ws=ds-ys<0?1:os[ds-ys],xs=fs-ys<0?1:ls[fs-ys];if(ws!==xs&&ws>1&&xs>1)return;ps[ms-ys]=Math.max(ws,xs)}return ps}static index(os,ls){const cs=new Array(ls.length);return es.fillIndex(os,ls,cs),cs}static fillIndex(os,ls,cs){const ds=os.length-ls.length;for(let fs=0;fs<ls.length;fs++)cs[fs]=os[ds+fs]%ls[fs]}static calc(os,ls,cs,ds,fs){const ms=es.calcShape(os.dims,ls.dims);if(ms){if(ds&&!qr.areEqual(ms,os.dims))return;const ps=qr.size(ms),ys=ds?os:new Yr.Tensor(ms,fs||os.type);if(ms.length===0)ys.set([],cs(os.get([]),ls.get([])));else{const ws=new Array(ms.length),xs=new Array(os.dims.length),Es=new Array(ls.dims.length);let Rs,_s=0,Bs=0,vs=!1,Cs=!1;os.dims.length===0&&(_s=os.get([]),vs=!0),ls.dims.length===0&&(Bs=ls.get([]),Cs=!0);for(let Ss=0;Ss<ps;Ss++){Rs=Ss;for(let As=ms.length-1;As>=0;As--)ws[As]=Rs%ms[As],Rs=Math.floor(Rs/ms[As]);vs||(es.fillIndex(ws,os.dims,xs),_s=os.get(xs)),Cs||(es.fillIndex(ws,ls.dims,Es),Bs=ls.get(Es)),ys.set(ws,cs(_s,Bs))}}return ys}}static isValidBroadcast(os,ls){const cs=os.length,ds=ls.length;if(cs>ds)return!1;for(let fs=1;fs<=cs;fs++)if(os[cs-fs]!==1&&os[cs-fs]!==ls[ds-fs])return!1;return!0}static getBroadcastDims(os,ls){const cs=os.length,ds=[];for(let fs=0;fs<cs;fs++){const ms=cs-1-fs,ps=os[ms]||1;(ls[ls.length-1-fs]||1)>1&&ps===1&&ds.unshift(ms)}return ds}}_r.BroadcastUtil=es,_r.arrayCopyHelper=function(ss,os,ls,cs,ds){if(cs<0||cs>=os.length)throw new Error("sourceIndex out of bounds");if(ls<0||ls>=ss.length)throw new Error("targetIndex out of bounds");if(cs+ds>os.length)throw new Error("source indices to be copied are outside bounds");if(ls+ds>ss.length)throw new Error("target array is too small to hold result");for(let fs=0;fs<ds;fs++)ss[ls+fs]=os[cs+fs]},_r.GemmUtil=class{static getShapeOfGemmResult(ss,os,ls,cs,ds){if(ss.length!==2||ls.length!==2)throw new Error("shape need to be of size 2");let fs,ms,ps;os?(fs=ss[1],ms=ss[0]):(fs=ss[0],ms=ss[1]);let ys=-1;if(cs?(ps=ls[0],ys=1):(ps=ls[1],ys=0),ls[ys]!==ms)throw new Error("dimension mismatch");if(fs<=0||ps<=0||ms<=0)throw new Error("invalid shape specified");if(ds&&!es.isValidBroadcast(ds,[fs,ps]))throw new Error("gemm: invalid bias shape for broadcast");return[fs,ps,ms]}};class ns{static tensorDataTypeFromProto(os){switch(os){case Zr.onnx.TensorProto.DataType.INT8:return"int8";case Zr.onnx.TensorProto.DataType.UINT8:return"uint8";case Zr.onnx.TensorProto.DataType.BOOL:return"bool";case Zr.onnx.TensorProto.DataType.INT16:return"int16";case Zr.onnx.TensorProto.DataType.UINT16:return"uint16";case Zr.onnx.TensorProto.DataType.INT32:return"int32";case Zr.onnx.TensorProto.DataType.UINT32:return"uint32";case Zr.onnx.TensorProto.DataType.FLOAT:return"float32";case Zr.onnx.TensorProto.DataType.DOUBLE:return"float64";case Zr.onnx.TensorProto.DataType.STRING:return"string";case Zr.onnx.TensorProto.DataType.INT64:return"int32";case Zr.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Zr.onnx.TensorProto.DataType[os]}`)}}static tensorDataTypeStringToEnum(os){switch(os){case"int8":return Zr.onnx.TensorProto.DataType.INT8;case"uint8":return Zr.onnx.TensorProto.DataType.UINT8;case"bool":return Zr.onnx.TensorProto.DataType.BOOL;case"int16":return Zr.onnx.TensorProto.DataType.INT16;case"uint16":return Zr.onnx.TensorProto.DataType.UINT16;case"int32":return Zr.onnx.TensorProto.DataType.INT32;case"uint32":return Zr.onnx.TensorProto.DataType.UINT32;case"float32":return Zr.onnx.TensorProto.DataType.FLOAT;case"float64":return Zr.onnx.TensorProto.DataType.DOUBLE;case"string":return Zr.onnx.TensorProto.DataType.STRING;case"int64":return Zr.onnx.TensorProto.DataType.INT64;case"uint64":return Zr.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${os}`)}}static tensorDimsFromProto(os){return os.map(ls=>Wr.default.isLong(ls)?ls.toNumber():ls)}static tensorValueTypeFromProto(os){return{tensorType:ns.tensorDataTypeFromProto(os.elemType),shape:{dims:ns.tensorDimsFromProto(os.shape.dim.map(ls=>ls.dimValue))}}}static tensorDimsFromORTFormat(os){const ls=[];for(let cs=0;cs<os.dimsLength();cs++)ls.push(Xr.longToNumber(os.dims(cs)));return ls}static tensorAttributesFromORTFormat(os){const ls=[];for(let cs=0;cs<os.attributesLength();cs++)ls.push(os.attributes(cs));return ls}}_r.ProtoUtil=ns;class Xr{static longToNumber(os,ls){return Wr.default.isLong(os)?os.toNumber():os instanceof Gr.flatbuffers.Long?Wr.default.fromValue({low:os.low,high:os.high,unsigned:ls!=null&&ls}).toNumber():os}static isLong(os){return Wr.default.isLong(os)||os instanceof Gr.flatbuffers.Long}}_r.LongUtil=Xr;class qr{static size(os){return qr.getSizeFromDimensionRange(os,0,os.length)}static sizeFromDimension(os,ls){if(ls<0||ls>os.length)throw new Error(`invalid dimension of ${ls} for sizeFromDimension as Tensor has ${os.length} dimensions.`);return qr.getSizeFromDimensionRange(os,ls,os.length)}static sizeToDimension(os,ls){if(ls<0||ls>os.length)throw new Error(`invalid dimension of ${ls} for sizeToDimension as Tensor has ${os.length} dimensions.`);return qr.getSizeFromDimensionRange(os,0,ls)}static getSizeFromDimensionRange(os,ls,cs){let ds=1;for(let fs=ls;fs<cs;fs++){if(os[fs]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");ds*=os[fs]}return ds}static computeStrides(os){const ls=os.length;if(ls===0)return[];if(ls===1)return[1];const cs=new Array(ls);cs[ls-1]=1,cs[ls-2]=os[ls-1];for(let ds=ls-3;ds>=0;--ds)cs[ds]=cs[ds+1]*os[ds+1];return cs}static transpose(os){return os.slice().reverse()}static indicesToOffset(os,ls,cs){cs===void 0&&(cs=os.length);let ds=0;for(let fs=0;fs<cs;++fs)ds+=ls[fs]*os[fs];return ds}static offsetToIndices(os,ls){const cs=ls.length;if(cs===0)return[];if(cs===1)return[os*ls[0]];const ds=new Array(ls.length);for(let fs=0;fs<ds.length-1;++fs)ds[fs]=Math.floor(os/ls[fs]),os-=ds[fs]*ls[fs];return ds[ds.length-1]=os,ds}static normalizeAxis(os,ls){if(os<-ls&&os>=ls)throw new Error("unsupported axis for this operation.");return os<0?os+ls:os}static normalizeAxes(os,ls){return os.map(cs=>this.normalizeAxis(cs,ls))}static incrementIndex(os,ls,cs){if(ls.length===0||os.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(cs===void 0)cs=ls.length;else if(cs<=0||cs>ls.length)throw new Error("Incorrect axis to increment on");for(let ds=cs-1;ds>=0&&(os[ds]++,!(os[ds]<ls[ds]));--ds)os[ds]=0}static calculateReshapedDims(os,ls){if(ls.length===0){if(os.length===0||qr.size(os)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const cs=ls.length,ds=new Array(cs);let fs=-1,ms=1;for(let ys=0;ys<cs;ys++){if(ls[ys]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(ls[ys]===-1){if(fs!==-1)throw new Error("at most one dimension in shape hints can be -1");fs=ys}else{if(ls[ys]===0){if(ys>=os.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");ds[ys]=os[ys]}else ds[ys]=ls[ys];ms*=ds[ys]}}const ps=qr.size(os);if(fs!==-1){if(ps%ms!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${os}] Output shape: [${ls}]`);ds[fs]=ps/ms}else if(ms!==ps)throw new Error("reshapedDims and originalDims don't have matching sizes");return ds}static sortBasedOnPerm(os,ls){return ls?ls.map(cs=>os[cs]):os.slice().reverse()}static padShape(os,ls){const cs=os.length;return os.map((ds,fs)=>ds+ls[fs]+ls[fs+cs])}static areEqual(os,ls){return os.length===ls.length&&os.every((cs,ds)=>cs===ls[ds])}static validateDimsAndCalcSize(os){if(os.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let ls=1;for(const cs of os){if(!Number.isInteger(cs))throw new TypeError(`Invalid shape: ${cs} is not an integer`);if(cs<0||cs>2147483647)throw new TypeError(`Invalid shape: length ${cs} is not allowed`);ls*=cs}return ls}static flattenShape(os,ls){ls<0&&(ls+=os.length);const cs=os.reduce((fs,ms)=>fs*ms,1),ds=os.slice(ls).reduce((fs,ms)=>fs*ms,1);return[cs/ds,ds]}static squeezeShape(os,ls){const cs=new Array;ls=qr.normalizeAxes(ls,os.length);for(let ds=0;ds<os.length;ds++){const fs=ls.indexOf(ds)>=0;if(fs&&os[ds]!==1)throw new Error("squeeze an axis of size different than 1");(ls.length===0&&os[ds]>1||ls.length>0&&!fs)&&cs.push(os[ds])}return cs}static unsqueezeShape(os,ls){const cs=new Array(os.length+ls.length);cs.fill(0);for(let fs=0;fs<ls.length;fs++){const ms=qr.normalizeAxis(ls[fs],cs.length);if(ms>=cs.length)throw new Error("'axes' has an out of range axis");if(cs[ms]!==0)throw new Error("'axes' has a duplicate axis");cs[ms]=1}let ds=0;for(let fs=0;fs<cs.length;fs++)cs[fs]===0&&(cs[fs]=os[ds++]);if(ds!==os.length)throw new Error("the unsqueezed dimension could not be established");return cs}}_r.ShapeUtil=qr,_r.MathUtil=class{static sqr(ss,os,ls,cs,ds){if(cs<0||cs>=os.length)throw new Error("sourceIndex out of bounds");if(ls<0||ls>=ss.length)throw new Error("targetIndex out of bounds");if(cs+ds>os.length)throw new Error("source indices to be copied are outside bounds");if(ls+ds>ss.length)throw new Error("target array is too small to hold result");for(let fs=0;fs<ds;fs++)ss[ls+fs]+=Math.pow(os[cs+fs],2)}static axpy(ss,os,ls,cs,ds,fs){if(cs<0||cs>=os.length)throw new Error("sourceIndex out of bounds");if(ls<0||ls>=ss.length)throw new Error("targetIndex out of bounds");if(cs+ds>os.length)throw new Error("source indices to be copied are outside bounds");if(ls+ds>ss.length)throw new Error("target array is too small to hold result");for(let ms=0;ms<ds;ms++)ss[ls+ms]+=fs*os[cs+ms]}static powx(ss,os,ls,cs,ds,fs){if(cs<0||cs>=os.length)throw new Error("sourceIndex out of bounds");if(ls<0||ls>=ss.length)throw new Error("targetIndex out of bounds");if(cs+ds>os.length)throw new Error("source indices to be copied are outside bounds");if(ls+ds>ss.length)throw new Error("target array is too small to hold result");for(let ms=0;ms<ds;ms++)ss[ls+ms]=Math.pow(os[cs+ms],fs)}static mul(ss,os,ls,cs,ds){if(cs<0||cs>=os.length)throw new Error("sourceIndex out of bounds");if(ls<0||ls>=ss.length)throw new Error("targetIndex out of bounds");if(cs+ds>os.length)throw new Error("source indices to be copied are outside bounds");if(ls+ds>ss.length)throw new Error("target array is too small to hold result");for(let fs=0;fs<ds;fs++)ss[ls+fs]=os[cs+fs]*ss[ls+fs]}};class _i{static splitShape(os,ls,cs,ds){if(cs.length===0){if(!ds)throw new Error("need to know number of outputs when the 'split' attribute is not specified");_i.determineSplit(os[ls],ds,cs)}const fs=[],ms=[0];for(let ps=0;ps<cs.length;++ps){ps!==0&&ms.push(ms[ps-1]+cs[ps-1]);const ys=os.slice();ys[ls]=cs[ps],fs.push(ys)}return[fs,ms]}static determineSplit(os,ls,cs){if(os%ls!=0)throw new Error("cannot split tensor to equal sized parts");for(let ds=0;ds<ls;++ds)cs.push(os/ls)}}_r.SplitUtil=_i;class rs{static calcReduce(os,ls,cs,ds,fs){const ms=os.dims.slice(0);ls.length===0&&ms.forEach((_s,Bs)=>ls.push(Bs));const ps=rs.calcReduceShape(ms,ls,!0),ys=qr.size(ps),ws=new Yr.Tensor(ps,os.type),xs=qr.computeStrides(ps),Es=qr.computeStrides(ms),Rs=new Array(ms.length);for(let _s=0;_s<ys;_s++){const Bs=qr.offsetToIndices(_s,xs);es.fillIndex(Bs,ms,Rs),ws.set(Bs,rs.calcReduceByAxis(os.numberData,ls,ms,0,qr.indicesToOffset(Rs,Es),ds,fs))}return cs?ws:new Yr.Tensor(rs.calcReduceShape(ms,ls,cs),ws.type,void 0,void 0,ws.data,ws.dataId)}static calcReduceByAxis(os,ls,cs,ds,fs,ms,ps){let ys=0;if(ds>=ls.length)return ms(os[fs]);const ws=ls[ds],xs=ws>=cs.length?1:qr.size(cs.slice(ws+1));for(let Es=0;Es<cs[ws];Es++)ys=Es===0?rs.calcReduceByAxis(os,ls,cs,ds+1,fs,ms,ps):ps(ys,rs.calcReduceByAxis(os,ls,cs,ds+1,fs,ms,ps)),fs+=xs;return ys}static calcReduceShape(os,ls,cs){const ds=os.slice();for(let fs=0;fs<ls.length;fs++)ds[ls[fs]]=cs?1:0;return ds.filter(fs=>fs!==0)}}_r.ReduceUtil=rs;class is{static adjustPoolAttributes(os,ls,cs,ds,fs,ms){if(!os&&cs.length!==ls.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(os)for(let ps=0;ps<ls.length-2;ps++)ps>=cs.length?cs.push(ls[ps+2]):cs[ps]=ls[ps+2];for(let ps=0;ps<cs.length;ps++)if(ps<ds.length){if(ds[ps]<0)throw new Error("strides should be greater than or equal to 1")}else ds.push(1);for(let ps=0;ps<cs.length;ps++)if(ps<fs.length){if(fs[ps]<0)throw new Error("dilations should be greater than or equal to 1")}else fs.push(1);for(let ps=0;ps<2*cs.length;ps++)if(ps<ms.length){if(ms[ps]<0)throw new Error("pad should be greater than or equal to 1")}else ms.push(0);for(let ps=0;ps<cs.length;ps++){if(cs[ps]<=0)throw new Error("kernel shapes need to be greater than 0");if(ms[ps]>=cs[ps]||ms[ps+cs.length]>=cs[ps])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(os,ls,cs,ds,fs,ms){if(ms){if(fs.length!==2*(os.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(ls.length!==os.length-2)throw new Error("length of strides should be the length of data dimensions");if(ds.length!==os.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let ps=0;ps<os.length-2;ps++)is.adjustPadAndReturnShape(os[ps+2],ls[ps],cs[ps],ds[ps],fs,ps,ps+os.length-2,ms)}}static computePoolOutputShape(os,ls,cs,ds,fs,ms,ps){if(ls.length<=0)throw new Error("input shape must be of size greater than 0");const ys=[ls[0],ls[1]];return is.computeShapeHelper(os,ls,ys,cs,ds,fs,ms,ps),ys}static computeConvOutputShape(os,ls,cs,ds,fs,ms,ps){if(os.length<=0||ls.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const ys=[os[0],ls[0]];return is.computeShapeHelper(!1,os,ys,cs,ds,fs,ms,ps),ys}static computeShapeHelper(os,ls,cs,ds,fs,ms,ps,ys){if(os)for(let ws=0;ws<ls.length-2;ws++)cs.push(1);else for(let ws=0;ws<ls.length-2;ws++)cs.push(is.adjustPadAndReturnShape(ls[ws+2],ds[ws],fs[ws],ms[ws],ps,ws,ws+ls.length-2,ys))}static adjustPadAndReturnShape(os,ls,cs,ds,fs,ms,ps,ys){const ws=cs*(ds-1)+1;if(!ys||ys==="NOTSET")return Math.floor((os+fs[ms]+fs[ps]-ws)/ls+1);switch(ys){case"VALID":return fs[ms]=0,fs[ps]=0,Math.floor((os-ws)/ls+1);case"SAME_LOWER":case"SAME_UPPER":if(cs!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const xs=((os+ls-1)/ls-1)*ls+ds-os;return fs[ms]=Math.floor(ys==="SAME_LOWER"?(xs+1)/2:xs/2),fs[ps]=xs-fs[ms],Math.floor((os+xs-ds)/ls+1)}default:throw new Error("Unsupported AutoPad type")}}}_r.PoolConvUtil=is,_r.MIN_CLIP=-34028234663852886e22,_r.MAX_CLIP=34028234663852886e22,_r.decodeUtf8String=function(ss){return new TextDecoder().decode(ss)}},8408:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.version=void 0,_r.version="1.16.1"},9544:function(Nr,_r,Ur){var jr,Gr=this&&this.__createBinding||(Object.create?function(xs,Es,Rs,_s){_s===void 0&&(_s=Rs);var Bs=Object.getOwnPropertyDescriptor(Es,Rs);Bs&&!("get"in Bs?!Es.__esModule:Bs.writable||Bs.configurable)||(Bs={enumerable:!0,get:function(){return Es[Rs]}}),Object.defineProperty(xs,_s,Bs)}:function(xs,Es,Rs,_s){_s===void 0&&(_s=Rs),xs[_s]=Es[Rs]}),Wr=this&&this.__setModuleDefault||(Object.create?function(xs,Es){Object.defineProperty(xs,"default",{enumerable:!0,value:Es})}:function(xs,Es){xs.default=Es}),Zr=this&&this.__importStar||function(xs){if(xs&&xs.__esModule)return xs;var Es={};if(xs!=null)for(var Rs in xs)Rs!=="default"&&Object.prototype.hasOwnProperty.call(xs,Rs)&&Gr(Es,xs,Rs);return Wr(Es,xs),Es};Object.defineProperty(_r,"__esModule",{value:!0}),_r.endProfiling=_r.run=_r.releaseSession=_r.createSession=_r.createSessionFinalize=_r.createSessionAllocate=_r.initializeRuntime=_r.initializeWebAssemblyInstance=void 0;const Yr=Ur(2235),ts=Zr(Ur(1259)),es=Ur(263),ns=()=>!!Yr.env.wasm.proxy&&typeof document<"u";let Xr,qr,_i,rs=!1,is=!1,ss=!1;const os=[],ls=[],cs=[],ds=[],fs=[],ms=[],ps=()=>{if(rs||!is||ss||!Xr)throw new Error("worker not ready")},ys=xs=>{switch(xs.data.type){case"init-wasm":rs=!1,xs.data.err?(ss=!0,qr[1](xs.data.err)):(is=!0,qr[0]());break;case"init-ort":xs.data.err?_i[1](xs.data.err):_i[0]();break;case"create_allocate":xs.data.err?os.shift()[1](xs.data.err):os.shift()[0](xs.data.out);break;case"create_finalize":xs.data.err?ls.shift()[1](xs.data.err):ls.shift()[0](xs.data.out);break;case"create":xs.data.err?cs.shift()[1](xs.data.err):cs.shift()[0](xs.data.out);break;case"release":xs.data.err?ds.shift()[1](xs.data.err):ds.shift()[0]();break;case"run":xs.data.err?fs.shift()[1](xs.data.err):fs.shift()[0](xs.data.out);break;case"end-profiling":xs.data.err?ms.shift()[1](xs.data.err):ms.shift()[0]()}},ws=typeof document<"u"?(jr=document==null?void 0:document.currentScript)===null||jr===void 0?void 0:jr.src:void 0;_r.initializeWebAssemblyInstance=async()=>{if(ns()){if(is)return;if(rs)throw new Error("multiple calls to 'initWasm()' detected.");if(ss)throw new Error("previous call to 'initWasm()' failed.");return rs=!0,Yr.env.wasm.wasmPaths===void 0&&ws&&ws.indexOf("blob:")!==0&&(Yr.env.wasm.wasmPaths=ws.substr(0,+ws.lastIndexOf("/")+1)),new Promise((xs,Es)=>{Xr==null||Xr.terminate(),Xr=Ur(8050).Z(),Xr.onmessage=ys,qr=[xs,Es];const Rs={type:"init-wasm",in:Yr.env.wasm};Xr.postMessage(Rs)})}return(0,es.initializeWebAssembly)(Yr.env.wasm)},_r.initializeRuntime=async xs=>{if(ns())return ps(),new Promise((Es,Rs)=>{_i=[Es,Rs];const _s={type:"init-ort",in:xs};Xr.postMessage(_s)});await ts.initRuntime(xs)},_r.createSessionAllocate=async xs=>ns()?(ps(),new Promise((Es,Rs)=>{os.push([Es,Rs]);const _s={type:"create_allocate",in:{model:xs}};Xr.postMessage(_s,[xs.buffer])})):ts.createSessionAllocate(xs),_r.createSessionFinalize=async(xs,Es)=>ns()?(ps(),new Promise((Rs,_s)=>{ls.push([Rs,_s]);const Bs={type:"create_finalize",in:{modeldata:xs,options:Es}};Xr.postMessage(Bs)})):ts.createSessionFinalize(xs,Es),_r.createSession=async(xs,Es)=>ns()?(ps(),new Promise((Rs,_s)=>{cs.push([Rs,_s]);const Bs={type:"create",in:{model:xs,options:Es}};Xr.postMessage(Bs,[xs.buffer])})):ts.createSession(xs,Es),_r.releaseSession=async xs=>{if(ns())return ps(),new Promise((Es,Rs)=>{ds.push([Es,Rs]);const _s={type:"release",in:xs};Xr.postMessage(_s)});ts.releaseSession(xs)},_r.run=async(xs,Es,Rs,_s,Bs)=>ns()?(ps(),new Promise((vs,Cs)=>{fs.push([vs,Cs]);const Ss={type:"run",in:{sessionId:xs,inputIndices:Es,inputs:Rs,outputIndices:_s,options:Bs}};Xr.postMessage(Ss,ts.extractTransferableBuffers(Rs))})):ts.run(xs,Es,Rs,_s,Bs),_r.endProfiling=async xs=>{if(ns())return ps(),new Promise((Es,Rs)=>{ms.push([Es,Rs]);const _s={type:"end-profiling",in:xs};Xr.postMessage(_s)});ts.endProfiling(xs)}},7918:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.setRunOptions=void 0;const jr=Ur(263),Gr=Ur(1497);_r.setRunOptions=Wr=>{const Zr=(0,jr.getInstance)();let Yr=0;const ts=[],es=Wr||{};try{if((Wr==null?void 0:Wr.logSeverityLevel)===void 0)es.logSeverityLevel=2;else if(typeof Wr.logSeverityLevel!="number"||!Number.isInteger(Wr.logSeverityLevel)||Wr.logSeverityLevel<0||Wr.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${Wr.logSeverityLevel}`);if((Wr==null?void 0:Wr.logVerbosityLevel)===void 0)es.logVerbosityLevel=0;else if(typeof Wr.logVerbosityLevel!="number"||!Number.isInteger(Wr.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${Wr.logVerbosityLevel}`);(Wr==null?void 0:Wr.terminate)===void 0&&(es.terminate=!1);let ns=0;return(Wr==null?void 0:Wr.tag)!==void 0&&(ns=(0,Gr.allocWasmString)(Wr.tag,ts)),Yr=Zr._OrtCreateRunOptions(es.logSeverityLevel,es.logVerbosityLevel,!!es.terminate,ns),Yr===0&&(0,Gr.checkLastError)("Can't create run options."),(Wr==null?void 0:Wr.extra)!==void 0&&(0,Gr.iterateExtraOptions)(Wr.extra,"",new WeakSet,(Xr,qr)=>{const _i=(0,Gr.allocWasmString)(Xr,ts),rs=(0,Gr.allocWasmString)(qr,ts);Zr._OrtAddRunConfigEntry(Yr,_i,rs)!==0&&(0,Gr.checkLastError)(`Can't set a run config entry: ${Xr} - ${qr}.`)}),[Yr,ts]}catch(ns){throw Yr!==0&&Zr._OrtReleaseRunOptions(Yr),ts.forEach(Xr=>Zr._free(Xr)),ns}}},6640:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.OnnxruntimeWebAssemblySessionHandler=void 0;const jr=Ur(2806),Gr=Ur(2235),Wr=Ur(2850),Zr=Ur(9544);let Yr;_r.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(ts){const es=await fetch(ts);if(es.status!==200)throw new Error(`failed to load model: ${ts}`);const ns=await es.arrayBuffer();return(0,Zr.createSessionAllocate)(new Uint8Array(ns))}async loadModel(ts,es){if(Yr||(await(0,Zr.initializeRuntime)(Gr.env),Yr=!0),typeof ts=="string")if(typeof process<"u"&&process.versions&&process.versions.node){const ns=await(0,Wr.promisify)(jr.readFile)(ts);[this.sessionId,this.inputNames,this.outputNames]=await(0,Zr.createSession)(ns,es)}else{const ns=await this.createSessionAllocate(ts);[this.sessionId,this.inputNames,this.outputNames]=await(0,Zr.createSessionFinalize)(ns,es)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,Zr.createSession)(ts,es)}async dispose(){return(0,Zr.releaseSession)(this.sessionId)}async run(ts,es,ns){const Xr=[],qr=[];Object.entries(ts).forEach(ss=>{const os=ss[0],ls=ss[1],cs=this.inputNames.indexOf(os);if(cs===-1)throw new Error(`invalid input '${os}'`);Xr.push(ls),qr.push(cs)});const _i=[];Object.entries(es).forEach(ss=>{const os=ss[0],ls=this.outputNames.indexOf(os);if(ls===-1)throw new Error(`invalid output '${os}'`);_i.push(ls)});const rs=await(0,Zr.run)(this.sessionId,qr,Xr.map(ss=>[ss.type,ss.dims,ss.data]),_i,ns),is={};for(let ss=0;ss<rs.length;ss++)is[this.outputNames[_i[ss]]]=new Gr.Tensor(rs[ss][0],rs[ss][2],rs[ss][1]);return is}startProfiling(){}endProfiling(){(0,Zr.endProfiling)(this.sessionId)}}},7622:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.setSessionOptions=void 0;const jr=Ur(263),Gr=Ur(1497);_r.setSessionOptions=Wr=>{var Zr,Yr,ts,es;const ns=(0,jr.getInstance)();let Xr=0;const qr=[],_i=Wr||{};(rs=>{rs.extra||(rs.extra={}),rs.extra.session||(rs.extra.session={});const is=rs.extra.session;is.use_ort_model_bytes_directly||(is.use_ort_model_bytes_directly="1"),rs.executionProviders&&rs.executionProviders.some(ss=>(typeof ss=="string"?ss:ss.name)==="webgpu")&&(rs.enableMemPattern=!1)})(_i);try{const rs=(ds=>{switch(ds){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${ds}`)}})((Zr=_i.graphOptimizationLevel)!==null&&Zr!==void 0?Zr:"all"),is=(ds=>{switch(ds){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${ds}`)}})((Yr=_i.executionMode)!==null&&Yr!==void 0?Yr:"sequential"),ss=typeof _i.logId=="string"?(0,Gr.allocWasmString)(_i.logId,qr):0,os=(ts=_i.logSeverityLevel)!==null&&ts!==void 0?ts:2;if(!Number.isInteger(os)||os<0||os>4)throw new Error(`log serverity level is not valid: ${os}`);const ls=(es=_i.logVerbosityLevel)!==null&&es!==void 0?es:0;if(!Number.isInteger(ls)||ls<0||ls>4)throw new Error(`log verbosity level is not valid: ${ls}`);const cs=typeof _i.optimizedModelFilePath=="string"?(0,Gr.allocWasmString)(_i.optimizedModelFilePath,qr):0;return Xr=ns._OrtCreateSessionOptions(rs,!!_i.enableCpuMemArena,!!_i.enableMemPattern,is,!!_i.enableProfiling,0,ss,os,ls,cs),Xr===0&&(0,Gr.checkLastError)("Can't create session options."),_i.executionProviders&&((ds,fs,ms)=>{for(const ps of fs){let ys=typeof ps=="string"?ps:ps.name;switch(ys){case"xnnpack":ys="XNNPACK";break;case"webnn":if(ys="WEBNN",typeof ps!="string"){const xs=ps;if(xs!=null&&xs.deviceType){const Es=(0,Gr.allocWasmString)("deviceType",ms),Rs=(0,Gr.allocWasmString)(xs.deviceType,ms);(0,jr.getInstance)()._OrtAddSessionConfigEntry(ds,Es,Rs)!==0&&(0,Gr.checkLastError)(`Can't set a session config entry: 'deviceType' - ${xs.deviceType}.`)}if(xs!=null&&xs.powerPreference){const Es=(0,Gr.allocWasmString)("powerPreference",ms),Rs=(0,Gr.allocWasmString)(xs.powerPreference,ms);(0,jr.getInstance)()._OrtAddSessionConfigEntry(ds,Es,Rs)!==0&&(0,Gr.checkLastError)(`Can't set a session config entry: 'powerPreference' - ${xs.powerPreference}.`)}}break;case"webgpu":ys="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${ys}`)}const ws=(0,Gr.allocWasmString)(ys,ms);(0,jr.getInstance)()._OrtAppendExecutionProvider(ds,ws)!==0&&(0,Gr.checkLastError)(`Can't append execution provider: ${ys}.`)}})(Xr,_i.executionProviders,qr),_i.extra!==void 0&&(0,Gr.iterateExtraOptions)(_i.extra,"",new WeakSet,(ds,fs)=>{const ms=(0,Gr.allocWasmString)(ds,qr),ps=(0,Gr.allocWasmString)(fs,qr);ns._OrtAddSessionConfigEntry(Xr,ms,ps)!==0&&(0,Gr.checkLastError)(`Can't set a session config entry: ${ds} - ${fs}.`)}),[Xr,qr]}catch(rs){throw Xr!==0&&ns._OrtReleaseSessionOptions(Xr),qr.forEach(is=>ns._free(is)),rs}}},7917:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.logLevelStringToEnum=_r.tensorTypeToTypedArrayConstructor=_r.getTensorElementSize=_r.tensorDataTypeEnumToString=_r.tensorDataTypeStringToEnum=void 0,_r.tensorDataTypeStringToEnum=Ur=>{switch(Ur){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${Ur}`)}},_r.tensorDataTypeEnumToString=Ur=>{switch(Ur){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${Ur}`)}},_r.getTensorElementSize=Ur=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][Ur],_r.tensorTypeToTypedArrayConstructor=Ur=>{switch(Ur){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${Ur}`)}},_r.logLevelStringToEnum=Ur=>{switch(Ur){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${Ur}`)}}},1259:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.extractTransferableBuffers=_r.endProfiling=_r.run=_r.releaseSession=_r.createSession=_r.createSessionFinalize=_r.createSessionAllocate=_r.initRuntime=void 0;const jr=Ur(7918),Gr=Ur(7622),Wr=Ur(7917),Zr=Ur(263),Yr=Ur(1497);_r.initRuntime=async es=>{var ns,Xr;ns=es.wasm.numThreads,Xr=(0,Wr.logLevelStringToEnum)(es.logLevel),(0,Zr.getInstance)()._OrtInit(ns,Xr)!==0&&(0,Yr.checkLastError)("Can't initialize onnxruntime.")};const ts=new Map;_r.createSessionAllocate=es=>{const ns=(0,Zr.getInstance)(),Xr=ns._malloc(es.byteLength);if(Xr===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${es.byteLength}.`);return ns.HEAPU8.set(es,Xr),[Xr,es.byteLength]},_r.createSessionFinalize=(es,ns)=>{const Xr=(0,Zr.getInstance)();let qr=0,_i=0,rs=[];const is=[],ss=[];try{[_i,rs]=(0,Gr.setSessionOptions)(ns),qr=Xr._OrtCreateSession(es[0],es[1],_i),qr===0&&(0,Yr.checkLastError)("Can't create a session.");const[os,ls]=(fs=>{const ms=(0,Zr.getInstance)(),ps=ms.stackSave();try{const ys=ms.stackAlloc(8);return ms._OrtGetInputOutputCount(fs,ys,ys+4)!==0&&(0,Yr.checkLastError)("Can't get session input/output count."),[ms.HEAP32[ys/4],ms.HEAP32[ys/4+1]]}finally{ms.stackRestore(ps)}})(qr),cs=[],ds=[];for(let fs=0;fs<os;fs++){const ms=Xr._OrtGetInputName(qr,fs);ms===0&&(0,Yr.checkLastError)("Can't get an input name."),is.push(ms),cs.push(Xr.UTF8ToString(ms))}for(let fs=0;fs<ls;fs++){const ms=Xr._OrtGetOutputName(qr,fs);ms===0&&(0,Yr.checkLastError)("Can't get an output name."),ss.push(ms),ds.push(Xr.UTF8ToString(ms))}return ts.set(qr,[qr,is,ss]),[qr,cs,ds]}catch(os){throw is.forEach(ls=>Xr._OrtFree(ls)),ss.forEach(ls=>Xr._OrtFree(ls)),qr!==0&&Xr._OrtReleaseSession(qr),os}finally{Xr._free(es[0]),_i!==0&&Xr._OrtReleaseSessionOptions(_i),rs.forEach(os=>Xr._free(os))}},_r.createSession=(es,ns)=>{const Xr=(0,_r.createSessionAllocate)(es);return(0,_r.createSessionFinalize)(Xr,ns)},_r.releaseSession=es=>{const ns=(0,Zr.getInstance)(),Xr=ts.get(es);if(!Xr)throw new Error(`cannot release session. invalid session id: ${es}`);const[qr,_i,rs]=Xr;_i.forEach(is=>ns._OrtFree(is)),rs.forEach(is=>ns._OrtFree(is)),ns._OrtReleaseSession(qr),ts.delete(es)},_r.run=async(es,ns,Xr,qr,_i)=>{const rs=(0,Zr.getInstance)(),is=ts.get(es);if(!is)throw new Error(`cannot run inference. invalid session id: ${es}`);const[ss,os,ls]=is,cs=ns.length,ds=qr.length;let fs=0,ms=[];const ps=[],ys=[];try{[fs,ms]=(0,jr.setRunOptions)(_i);for(let Bs=0;Bs<cs;Bs++){const vs=Xr[Bs][0],Cs=Xr[Bs][1],Ss=Xr[Bs][2];let As,Us;if(Array.isArray(Ss)){Us=4*Ss.length,As=rs._malloc(Us),ys.push(As);let Js=As/4;for(let ho=0;ho<Ss.length;ho++){if(typeof Ss[ho]!="string")throw new TypeError(`tensor data at index ${ho} is not a string`);rs.HEAPU32[Js++]=(0,Yr.allocWasmString)(Ss[ho],ys)}}else Us=Ss.byteLength,As=rs._malloc(Us),ys.push(As),rs.HEAPU8.set(new Uint8Array(Ss.buffer,Ss.byteOffset,Us),As);const Ks=rs.stackSave(),Ws=rs.stackAlloc(4*Cs.length);try{let Js=Ws/4;Cs.forEach(so=>rs.HEAP32[Js++]=so);const ho=rs._OrtCreateTensor((0,Wr.tensorDataTypeStringToEnum)(vs),As,Us,Ws,Cs.length);ho===0&&(0,Yr.checkLastError)(`Can't create tensor for input[${Bs}].`),ps.push(ho)}finally{rs.stackRestore(Ks)}}const ws=rs.stackSave(),xs=rs.stackAlloc(4*cs),Es=rs.stackAlloc(4*cs),Rs=rs.stackAlloc(4*ds),_s=rs.stackAlloc(4*ds);try{let Bs=xs/4,vs=Es/4,Cs=Rs/4,Ss=_s/4;for(let Ws=0;Ws<cs;Ws++)rs.HEAPU32[Bs++]=ps[Ws],rs.HEAPU32[vs++]=os[ns[Ws]];for(let Ws=0;Ws<ds;Ws++)rs.HEAPU32[Cs++]=0,rs.HEAPU32[Ss++]=ls[qr[Ws]];let As=rs._OrtRun(ss,Es,xs,cs,_s,ds,Rs,fs);const Us=rs.jsepRunPromise;Us&&Us.then!==void 0&&(As=await Us);const Ks=[];As!==0&&(0,Yr.checkLastError)("failed to call OrtRun().");for(let Ws=0;Ws<ds;Ws++){const Js=rs.HEAPU32[Rs/4+Ws],ho=rs.stackSave(),so=rs.stackAlloc(16);let io,vo=0;try{As=rs._OrtGetTensorData(Js,so,so+4,so+8,so+12),As!==0&&(0,Yr.checkLastError)(`Can't access output tensor data on index ${Ws}.`);let co=so/4;const go=rs.HEAPU32[co++];vo=rs.HEAPU32[co++];const Eo=rs.HEAPU32[co++],Ro=rs.HEAPU32[co++],Po=[];for(let Ts=0;Ts<Ro;Ts++)Po.push(rs.HEAPU32[Eo/4+Ts]);rs._OrtFree(Eo);const Oo=Po.length===0?1:Po.reduce((Ts,Ns)=>Ts*Ns);if(io=(0,Wr.tensorDataTypeEnumToString)(go),io==="string"){const Ts=[];let Ns=vo/4;for(let to=0;to<Oo;to++){const ao=rs.HEAPU32[Ns++],lo=to===Oo-1?void 0:rs.HEAPU32[Ns]-ao;Ts.push(rs.UTF8ToString(ao,lo))}Ks.push([io,Po,Ts])}else{const Ts=new((0,Wr.tensorTypeToTypedArrayConstructor)(io))(Oo);new Uint8Array(Ts.buffer,Ts.byteOffset,Ts.byteLength).set(rs.HEAPU8.subarray(vo,vo+Ts.byteLength)),Ks.push([io,Po,Ts])}}finally{rs.stackRestore(ho),io==="string"&&vo&&rs._free(vo),rs._OrtReleaseTensor(Js)}}return Ks}finally{rs.stackRestore(ws)}}finally{ps.forEach(ws=>rs._OrtReleaseTensor(ws)),ys.forEach(ws=>rs._free(ws)),fs!==0&&rs._OrtReleaseRunOptions(fs),ms.forEach(ws=>rs._free(ws))}},_r.endProfiling=es=>{const ns=(0,Zr.getInstance)(),Xr=ts.get(es);if(!Xr)throw new Error("invalid session id");const qr=Xr[0],_i=ns._OrtEndProfiling(qr);_i===0&&(0,Yr.checkLastError)("Can't get an profile file name."),ns._OrtFree(_i)},_r.extractTransferableBuffers=es=>{const ns=[];for(const Xr of es){const qr=Xr[2];!Array.isArray(qr)&&qr.buffer&&ns.push(qr.buffer)}return ns}},263:function(Nr,_r,Ur){var jr=this&&this.__createBinding||(Object.create?function(_i,rs,is,ss){ss===void 0&&(ss=is);var os=Object.getOwnPropertyDescriptor(rs,is);os&&!("get"in os?!rs.__esModule:os.writable||os.configurable)||(os={enumerable:!0,get:function(){return rs[is]}}),Object.defineProperty(_i,ss,os)}:function(_i,rs,is,ss){ss===void 0&&(ss=is),_i[ss]=rs[is]}),Gr=this&&this.__setModuleDefault||(Object.create?function(_i,rs){Object.defineProperty(_i,"default",{enumerable:!0,value:rs})}:function(_i,rs){_i.default=rs}),Wr=this&&this.__importStar||function(_i){if(_i&&_i.__esModule)return _i;var rs={};if(_i!=null)for(var is in _i)is!=="default"&&Object.prototype.hasOwnProperty.call(_i,is)&&jr(rs,_i,is);return Gr(rs,_i),rs};Object.defineProperty(_r,"__esModule",{value:!0}),_r.dispose=_r.getInstance=_r.initializeWebAssembly=void 0;const Zr=Wr(Ur(6449)),Yr=Ur(932),ts=Ur(3474);let es,ns=!1,Xr=!1,qr=!1;_r.initializeWebAssembly=async _i=>{if(ns)return Promise.resolve();if(Xr)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(qr)throw new Error("previous call to 'initializeWebAssembly()' failed.");Xr=!0;const rs=_i.initTimeout,is=_i.numThreads,ss=_i.simd,os=is>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),ls=ss&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),cs=_i.wasmPaths,ds=typeof cs=="string"?cs:void 0,fs=((ws,xs)=>xs?ws?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":ws?"ort-wasm-simd.wasm":"ort-wasm.wasm")(ls,os),ms=typeof cs=="object"?cs[fs]:void 0;let ps=!1;const ys=[];if(rs>0&&ys.push(new Promise(ws=>{setTimeout(()=>{ps=!0,ws()},rs)})),ys.push(new Promise((ws,xs)=>{const Es=os?ts:Yr,Rs={locateFile:(_s,Bs)=>os&&_s.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Ur(4154)],{type:"text/javascript"})):_s.endsWith(".wasm")?ms||(ds??Bs)+fs:Bs+_s};if(os)if(typeof Blob>"u")Rs.mainScriptUrlOrBlob=Zr.join(__dirname,"ort-wasm-threaded.js");else{const _s=`var ortWasmThreaded=(function(){var _scriptDir;return ${Es.toString()}})();`;Rs.mainScriptUrlOrBlob=new Blob([_s],{type:"text/javascript"})}Es(Rs).then(_s=>{Xr=!1,ns=!0,es=_s,ws()},_s=>{Xr=!1,qr=!0,xs(_s)})})),await Promise.race(ys),ps)throw new Error(`WebAssembly backend initializing failed due to timeout: ${rs}ms`)},_r.getInstance=()=>{if(ns&&es)return es;throw new Error("WebAssembly is not initialized yet.")},_r.dispose=()=>{var _i;!ns||Xr||qr||(Xr=!0,(_i=es.PThread)===null||_i===void 0||_i.terminateAllThreads(),es=void 0,Xr=!1,ns=!1,qr=!0)}},1497:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.checkLastError=_r.iterateExtraOptions=_r.allocWasmString=void 0;const jr=Ur(263);_r.allocWasmString=(Gr,Wr)=>{const Zr=(0,jr.getInstance)(),Yr=Zr.lengthBytesUTF8(Gr)+1,ts=Zr._malloc(Yr);return Zr.stringToUTF8(Gr,ts,Yr),Wr.push(ts),ts},_r.iterateExtraOptions=(Gr,Wr,Zr,Yr)=>{if(typeof Gr=="object"&&Gr!==null){if(Zr.has(Gr))throw new Error("Circular reference in options");Zr.add(Gr)}Object.entries(Gr).forEach(([ts,es])=>{const ns=Wr?Wr+ts:ts;if(typeof es=="object")(0,_r.iterateExtraOptions)(es,ns+".",Zr,Yr);else if(typeof es=="string"||typeof es=="number")Yr(ns,es.toString());else{if(typeof es!="boolean")throw new Error("Can't handle extra config type: "+typeof es);Yr(ns,es?"1":"0")}})},_r.checkLastError=Gr=>{const Wr=(0,jr.getInstance)(),Zr=Wr.stackSave();try{const Yr=Wr.stackAlloc(8);Wr._OrtGetLastError(Yr,Yr+4);const ts=Wr.HEAP32[Yr/4],es=Wr.HEAPU32[Yr/4+1],ns=es?Wr.UTF8ToString(es):"";throw new Error(`${Gr} ERROR_CODE: ${ts}, ERROR_MESSAGE: ${ns}`)}finally{Wr.stackRestore(Zr)}}},8050:(Nr,_r,Ur)=>{Ur.d(_r,{Z:()=>Wr});var jr=Ur(6614),Gr=Ur.n(jr);function Wr(){return Gr()('/*!\n* ONNX Runtime Web v1.16.1\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var e={918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const n=r(263),a=r(497);t.setRunOptions=e=>{const t=(0,n.getInstance)();let r=0;const o=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);let n=0;return void 0!==(null==e?void 0:e.tag)&&(n=(0,a.allocWasmString)(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,n),0===r&&(0,a.checkLastError)("Can\'t create run options."),void 0!==(null==e?void 0:e.extra)&&(0,a.iterateExtraOptions)(e.extra,"",new WeakSet,((e,n)=>{const i=(0,a.allocWasmString)(e,o),s=(0,a.allocWasmString)(n,o);0!==t._OrtAddRunConfigEntry(r,i,s)&&(0,a.checkLastError)(`Can\'t set a run config entry: ${e} - ${n}.`)})),[r,o]}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),o.forEach((e=>t._free(e))),e}}},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const n=r(263),a=r(497);t.setSessionOptions=e=>{var t,r,o,i;const s=(0,n.getInstance)();let u=0;const c=[],l=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)})(l);try{const e=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(null!==(t=l.graphOptimizationLevel)&&void 0!==t?t:"all"),f=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(null!==(r=l.executionMode)&&void 0!==r?r:"sequential"),d="string"==typeof l.logId?(0,a.allocWasmString)(l.logId,c):0,p=null!==(o=l.logSeverityLevel)&&void 0!==o?o:2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);const g=null!==(i=l.logVerbosityLevel)&&void 0!==i?i:0;if(!Number.isInteger(g)||g<0||g>4)throw new Error(`log verbosity level is not valid: ${g}`);const h="string"==typeof l.optimizedModelFilePath?(0,a.allocWasmString)(l.optimizedModelFilePath,c):0;return u=s._OrtCreateSessionOptions(e,!!l.enableCpuMemArena,!!l.enableMemPattern,f,!!l.enableProfiling,0,d,p,g,h),0===u&&(0,a.checkLastError)("Can\'t create session options."),l.executionProviders&&((e,t,r)=>{for(const o of t){let t="string"==typeof o?o:o.name;switch(t){case"xnnpack":t="XNNPACK";break;case"webnn":if(t="WEBNN","string"!=typeof o){const t=o;if(null==t?void 0:t.deviceType){const o=(0,a.allocWasmString)("deviceType",r),i=(0,a.allocWasmString)(t.deviceType,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'deviceType\' - ${t.deviceType}.`)}if(null==t?void 0:t.powerPreference){const o=(0,a.allocWasmString)("powerPreference",r),i=(0,a.allocWasmString)(t.powerPreference,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'powerPreference\' - ${t.powerPreference}.`)}}break;case"webgpu":t="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${t}`)}const i=(0,a.allocWasmString)(t,r);0!==(0,n.getInstance)()._OrtAppendExecutionProvider(e,i)&&(0,a.checkLastError)(`Can\'t append execution provider: ${t}.`)}})(u,l.executionProviders,c),void 0!==l.extra&&(0,a.iterateExtraOptions)(l.extra,"",new WeakSet,((e,t)=>{const r=(0,a.allocWasmString)(e,c),n=(0,a.allocWasmString)(t,c);0!==s._OrtAddSessionConfigEntry(u,r,n)&&(0,a.checkLastError)(`Can\'t set a session config entry: ${e} - ${t}.`)})),[u,c]}catch(e){throw 0!==u&&s._OrtReleaseSessionOptions(u),c.forEach((e=>s._free(e))),e}}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},t.tensorDataTypeEnumToString=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},t.getTensorElementSize=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],t.tensorTypeToTypedArrayConstructor=e=>{switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},t.logLevelStringToEnum=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}}},259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;const n=r(918),a=r(622),o=r(917),i=r(263),s=r(497);t.initRuntime=async e=>{var t,r;t=e.wasm.numThreads,r=(0,o.logLevelStringToEnum)(e.logLevel),0!==(0,i.getInstance)()._OrtInit(t,r)&&(0,s.checkLastError)("Can\'t initialize onnxruntime.")};const u=new Map;t.createSessionAllocate=e=>{const t=(0,i.getInstance)(),r=t._malloc(e.byteLength);if(0===r)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},t.createSessionFinalize=(e,t)=>{const r=(0,i.getInstance)();let n=0,o=0,c=[];const l=[],f=[];try{[o,c]=(0,a.setSessionOptions)(t),n=r._OrtCreateSession(e[0],e[1],o),0===n&&(0,s.checkLastError)("Can\'t create a session.");const[d,p]=(e=>{const t=(0,i.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,s.checkLastError)("Can\'t get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(r)}})(n),g=[],h=[];for(let e=0;e<d;e++){const t=r._OrtGetInputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an input name."),l.push(t),g.push(r.UTF8ToString(t))}for(let e=0;e<p;e++){const t=r._OrtGetOutputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an output name."),f.push(t),h.push(r.UTF8ToString(t))}return u.set(n,[n,l,f]),[n,g,h]}catch(e){throw l.forEach((e=>r._OrtFree(e))),f.forEach((e=>r._OrtFree(e))),0!==n&&r._OrtReleaseSession(n),e}finally{r._free(e[0]),0!==o&&r._OrtReleaseSessionOptions(o),c.forEach((e=>r._free(e)))}},t.createSession=(e,r)=>{const n=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(n,r)},t.releaseSession=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);const[n,a,o]=r;a.forEach((e=>t._OrtFree(e))),o.forEach((e=>t._OrtFree(e))),t._OrtReleaseSession(n),u.delete(e)},t.run=async(e,t,r,a,c)=>{const l=(0,i.getInstance)(),f=u.get(e);if(!f)throw new Error(`cannot run inference. invalid session id: ${e}`);const[d,p,g]=f,h=t.length,m=a.length;let y=0,v=[];const b=[],w=[];try{[y,v]=(0,n.setRunOptions)(c);for(let e=0;e<h;e++){const t=r[e][0],n=r[e][1],a=r[e][2];let i,u;if(Array.isArray(a)){u=4*a.length,i=l._malloc(u),w.push(i);let e=i/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw new TypeError(`tensor data at index ${t} is not a string`);l.HEAPU32[e++]=(0,s.allocWasmString)(a[t],w)}}else u=a.byteLength,i=l._malloc(u),w.push(i),l.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),i);const c=l.stackSave(),f=l.stackAlloc(4*n.length);try{let r=f/4;n.forEach((e=>l.HEAP32[r++]=e));const a=l._OrtCreateTensor((0,o.tensorDataTypeStringToEnum)(t),i,u,f,n.length);0===a&&(0,s.checkLastError)(`Can\'t create tensor for input[${e}].`),b.push(a)}finally{l.stackRestore(c)}}const e=l.stackSave(),i=l.stackAlloc(4*h),u=l.stackAlloc(4*h),f=l.stackAlloc(4*m),_=l.stackAlloc(4*m);try{let e=i/4,r=u/4,n=f/4,c=_/4;for(let n=0;n<h;n++)l.HEAPU32[e++]=b[n],l.HEAPU32[r++]=p[t[n]];for(let e=0;e<m;e++)l.HEAPU32[n++]=0,l.HEAPU32[c++]=g[a[e]];let v=l._OrtRun(d,u,i,h,_,m,f,y);const w=l.jsepRunPromise;w&&void 0!==w.then&&(v=await w);const O=[];0!==v&&(0,s.checkLastError)("failed to call OrtRun().");for(let e=0;e<m;e++){const t=l.HEAPU32[f/4+e],r=l.stackSave(),n=l.stackAlloc(16);let a,i=0;try{v=l._OrtGetTensorData(t,n,n+4,n+8,n+12),0!==v&&(0,s.checkLastError)(`Can\'t access output tensor data on index ${e}.`);let r=n/4;const u=l.HEAPU32[r++];i=l.HEAPU32[r++];const c=l.HEAPU32[r++],f=l.HEAPU32[r++],d=[];for(let e=0;e<f;e++)d.push(l.HEAPU32[c/4+e]);l._OrtFree(c);const p=0===d.length?1:d.reduce(((e,t)=>e*t));if(a=(0,o.tensorDataTypeEnumToString)(u),"string"===a){const e=[];let t=i/4;for(let r=0;r<p;r++){const n=l.HEAPU32[t++],a=r===p-1?void 0:l.HEAPU32[t]-n;e.push(l.UTF8ToString(n,a))}O.push([a,d,e])}else{const e=new((0,o.tensorTypeToTypedArrayConstructor)(a))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(l.HEAPU8.subarray(i,i+e.byteLength)),O.push([a,d,e])}}finally{l.stackRestore(r),"string"===a&&i&&l._free(i),l._OrtReleaseTensor(t)}}return O}finally{l.stackRestore(e)}}finally{b.forEach((e=>l._OrtReleaseTensor(e))),w.forEach((e=>l._free(e))),0!==y&&l._OrtReleaseRunOptions(y),v.forEach((e=>l._free(e)))}},t.endProfiling=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error("invalid session id");const n=r[0],a=t._OrtEndProfiling(n);0===a&&(0,s.checkLastError)("Can\'t get an profile file name."),t._OrtFree(a)},t.extractTransferableBuffers=e=>{const t=[];for(const r of e){const e=r[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},263:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const i=o(r(449)),s=r(932),u=r(474);let c,l=!1,f=!1,d=!1;t.initializeWebAssembly=async e=>{if(l)return Promise.resolve();if(f)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(d)throw new Error("previous call to \'initializeWebAssembly()\' failed.");f=!0;const t=e.initTimeout,n=e.numThreads,a=e.simd,o=n>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),p=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),g=e.wasmPaths,h="string"==typeof g?g:void 0,m=((e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm")(p,o),y="object"==typeof g?g[m]:void 0;let v=!1;const b=[];if(t>0&&b.push(new Promise((e=>{setTimeout((()=>{v=!0,e()}),t)}))),b.push(new Promise(((e,t)=>{const n=o?u:s,a={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([r(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=h?h:t)+m:t+e};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=i.join(__dirname,"ort-wasm-threaded.js");else{const e=`var ortWasmThreaded=(function(){var _scriptDir;return ${n.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}n(a).then((t=>{f=!1,l=!0,c=t,e()}),(e=>{f=!1,d=!0,t(e)}))}))),await Promise.race(b),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(l&&c)return c;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!l||f||d||(f=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,f=!1,l=!1,d=!0)}},497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;const n=r(263);t.allocWasmString=(e,t)=>{const r=(0,n.getInstance)(),a=r.lengthBytesUTF8(e)+1,o=r._malloc(a);return r.stringToUTF8(e,o,a),t.push(o),o},t.iterateExtraOptions=(e,r,n,a)=>{if("object"==typeof e&&null!==e){if(n.has(e))throw new Error("Circular reference in options");n.add(e)}Object.entries(e).forEach((([e,o])=>{const i=r?r+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,i+".",n,a);else if("string"==typeof o||"number"==typeof o)a(i,o.toString());else{if("boolean"!=typeof o)throw new Error("Can\'t handle extra config type: "+typeof o);a(i,o?"1":"0")}}))},t.checkLastError=e=>{const t=(0,n.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);const n=t.HEAP32[r/4],a=t.HEAPU32[r/4+1],o=a?t.UTF8ToString(a):"";throw new Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${o}`)}finally{t.stackRestore(r)}}},474:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function t(){return k.buffer!=x.buffer&&Y(),x}function n(){return k.buffer!=x.buffer&&Y(),I}function a(){return k.buffer!=x.buffer&&Y(),U}function o(){return k.buffer!=x.buffer&&Y(),L}function i(){return k.buffer!=x.buffer&&Y(),W}var s,u,c=e;c.ready=new Promise(((e,t)=>{s=e,u=t}));var l,f,d,p=Object.assign({},c),g="./this.program",h=(e,t)=>{throw t},m="object"==typeof window,y="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=c.ENVIRONMENT_IS_PTHREAD||!1,w="";function _(e){return c.locateFile?c.locateFile(e,w):w+e}if(v){var O=r(384),S=r(908);let t;w=y?S.dirname(w)+"/":__dirname+"/",l=(e,t)=>(e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFileSync(e,t?void 0:"utf8")),d=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!c.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(e,t)=>{throw process.exitCode=e,t},c.inspect=()=>"[Emscripten Module object]";try{t=r(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}global.Worker=t.Worker}else(m||y)&&(y?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}));v&&"undefined"==typeof performance&&(global.performance=r(953).performance);var E=console.log.bind(console),A=console.error.bind(console);v&&(E=(...e)=>O.writeSync(1,e.join(" ")+"\\n"),A=(...e)=>O.writeSync(2,e.join(" ")+"\\n"));var T,M=c.print||E,R=c.printErr||A;Object.assign(c,p),p=null,c.thisProgram&&(g=c.thisProgram),c.quit&&(h=c.quit),c.wasmBinary&&(T=c.wasmBinary);var F=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&te("no native wasm support detected");var k,C,P,D,x,I,U,L,W,H=!1;function Y(){var e=k.buffer;c.HEAP8=x=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=U=new Int32Array(e),c.HEAPU8=I=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=L=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=W=new Float64Array(e)}var j=c.INITIAL_MEMORY||16777216;if(5242880<=j||te("INITIAL_MEMORY should be larger than STACK_SIZE, was "+j+"! (STACK_SIZE=5242880)"),b)k=c.wasmMemory;else if(c.wasmMemory)k=c.wasmMemory;else if(!((k=new WebAssembly.Memory({initial:j/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw R("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&R("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),j=k.buffer.byteLength;var z,G=[],N=[],B=[],$=0;function q(){return F||0<$}var V,J,X=0,K=null,Z=null;function Q(){X++,c.monitorRunDependencies&&c.monitorRunDependencies(X)}function ee(){if(X--,c.monitorRunDependencies&&c.monitorRunDependencies(X),0==X&&(null!==K&&(clearInterval(K),K=null),Z)){var e=Z;Z=null,e()}}function te(e){throw c.onAbort&&c.onAbort(e),R(e="Aborted("+e+")"),H=!0,D=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),u(e),e}function re(e){return e.startsWith("data:application/octet-stream;base64,")}function ne(e){if(e==V&&T)return new Uint8Array(T);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}function ae(e,t,r){return function(e){if(!T&&(m||y)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>ne(e)));if(f)return new Promise(((t,r)=>{f(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>ne(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{R("failed to asynchronously prepare wasm: "+e),te(e)}))}function oe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function ie(e){e.terminate(),e.onmessage=()=>{}}function se(e){(e=ge.Fa[e])||te(),ge.fb(e)}function ue(e){var t=ge.Za();if(!t)return 6;ge.Ia.push(t),ge.Fa[e.Ha]=t,t.Ha=e.Ha;var r={cmd:"run",start_routine:e.gb,arg:e.Ya,pthread_ptr:e.Ha};return v&&t.unref(),t.postMessage(r,e.mb),0}re(V="ort-wasm-threaded.wasm")||(V=_(V));var ce="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,le=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&ce)return ce.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},fe=(e,t)=>(e>>>=0)?le(n(),e,t):"";function de(e){if(b)return qe(1,1,e);D=e,q()||(ge.hb(),c.onExit&&c.onExit(e),H=!0),h(e,new oe(e))}var pe=e=>{if(D=e,b)throw me(e),"unwind";de(e)},ge={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){b?ge.ab():ge.$a()},$a:function(){G.unshift((()=>{Q(),ge.bb((()=>ee()))}))},ab:function(){ge.receiveObjectTransfer=ge.eb,ge.threadInitTLS=ge.Sa,ge.setExitStatus=ge.Ra,F=!1},Ra:function(e){D=e},rb:["$terminateWorker"],hb:function(){for(var e of ge.Ia)ie(e);for(e of ge.La)ie(e);ge.La=[],ge.Ia=[],ge.Fa=[]},fb:function(e){var t=e.Ha;delete ge.Fa[t],ge.La.push(e),ge.Ia.splice(ge.Ia.indexOf(e),1),e.Ha=0,yt(t)},eb:function(){},Sa:function(){ge.Ta.forEach((e=>e()))},cb:e=>new Promise((t=>{e.onmessage=r=>{var n=(r=r.data).cmd;if(r.targetThread&&r.targetThread!=dt()){var a=ge.Fa[r.qb];a?a.postMessage(r,r.transferList):R(\'Internal error! Worker sent a message "\'+n+\'" to target pthread \'+r.targetThread+", but that thread no longer exists!")}else"checkMailbox"===n?He():"spawnThread"===n?ue(r):"cleanupThread"===n?se(r.thread):"killThread"===n?(r=r.thread,n=ge.Fa[r],delete ge.Fa[r],ie(n),yt(r),ge.Ia.splice(ge.Ia.indexOf(n),1),n.Ha=0):"cancelThread"===n?ge.Fa[r.thread].postMessage({cmd:"cancel"}):"loaded"===n?(e.loaded=!0,t(e)):"alert"===n?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===n?c[r.handler](...r.args):n&&R("worker sent an unknown command "+n)},e.onerror=e=>{throw R("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},v&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})));var r,n=[];for(r of["onExit","onAbort","print","printErr"])c.hasOwnProperty(r)&&n.push(r);e.postMessage({cmd:"load",handlers:n,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:k,wasmModule:P})})),bb:function(e){e()},Xa:function(){var e=_("ort-wasm-threaded.worker.js");e=new Worker(e),ge.La.push(e)},Za:function(){return 0==ge.La.length&&(ge.Xa(),ge.cb(ge.La[0])),ge.La.pop()}};c.PThread=ge;var he=e=>{for(;0<e.length;)e.shift()(c)};function me(e){if(b)return qe(2,0,e);pe(e)}c.establishStackSpace=function(){var e=dt(),t=a()[e+52>>2>>>0];e=a()[e+56>>2>>>0],_t(t,t-e),St(t)};var ye=[];function ve(e){this.Oa=e-24,this.Wa=function(e){o()[this.Oa+4>>2>>>0]=e},this.Va=function(e){o()[this.Oa+8>>2>>>0]=e},this.Pa=function(e,t){this.Ua(),this.Wa(e),this.Va(t)},this.Ua=function(){o()[this.Oa+16>>2>>>0]=0}}function be(e,t,r,n){return b?qe(3,1,e,t,r,n):we(e,t,r,n)}function we(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,"undefined"==typeof SharedArrayBuffer)return R("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return b&&0===a.length?be(e,t,r,n):(e={gb:r,Ha:e,Ya:n,mb:a},b?(e.ob="spawnThread",postMessage(e,a),0):ue(e))}function _e(e,t,r){return b?qe(4,1,e,t,r):0}function Oe(e,t){if(b)return qe(5,1,e,t)}c.invokeEntryPoint=function(e,t){var r=ye[e];r||(e>=ye.length&&(ye.length=e+1),ye[e]=r=z.get(e)),e=r(t),q()?ge.Ra(e):vt(e)};var Se=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},Ee=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Ae=(e,t,r)=>Ee(e,n(),t,r);function Te(e,t){if(b)return qe(6,1,e,t)}function Me(e,t,r){if(b)return qe(7,1,e,t,r)}function Re(e,t,r){return b?qe(8,1,e,t,r):0}function Fe(e,t){if(b)return qe(9,1,e,t)}function ke(e,t,r){if(b)return qe(10,1,e,t,r)}function Ce(e,t,r,n){if(b)return qe(11,1,e,t,r,n)}function Pe(e,t,r,n){if(b)return qe(12,1,e,t,r,n)}function De(e,t,r,n){if(b)return qe(13,1,e,t,r,n)}function xe(e){if(b)return qe(14,1,e)}function Ie(e,t){if(b)return qe(15,1,e,t)}function Ue(e,t,r){if(b)return qe(16,1,e,t,r)}var Le=e=>{if(!H)try{if(e(),!q())try{b?vt(D):pe(D)}catch(e){e instanceof oe||"unwind"==e||h(1,e)}}catch(e){e instanceof oe||"unwind"==e||h(1,e)}};function We(e){e>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(a(),e>>2,e).value.then(He),e+=128,Atomics.store(a(),e>>2,1))}function He(){var e=dt();e&&(We(e),Le((()=>bt())))}c.__emscripten_thread_mailbox_await=We,c.checkMailbox=He;var Ye=e=>0==e%4&&(0!=e%100||0==e%400),je=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334];function Ge(e,t,r,n,a,o,i,s){return b?qe(17,1,e,t,r,n,a,o,i,s):-52}function Ne(e,t,r,n,a,o,i){if(b)return qe(18,1,e,t,r,n,a,o,i)}var Be=e=>{var t=Se(e)+1,r=pt(t);return r&&Ae(e,r,t),r},$e=e=>{var t=Ot();return e=e(),St(t),e};function qe(e,t){var r=arguments.length-2,n=arguments;return $e((()=>{for(var a=Et(8*r),o=a>>3,s=0;s<r;s++){var u=n[2+s];i()[o+s>>>0]=u}return mt(e,r,a,t)}))}var Ve,Je=[],Xe={},Ke=()=>{if(!Ve){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(e in Xe)void 0===Xe[e]?delete t[e]:t[e]=Xe[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);Ve=r}return Ve};function Ze(e,r){if(b)return qe(19,1,e,r);e>>>=0,r>>>=0;var n=0;return Ke().forEach((function(a,i){var s=r+n;for(i=o()[e+4*i>>2>>>0]=s,s=0;s<a.length;++s)t()[i++>>0>>>0]=a.charCodeAt(s);t()[i>>0>>>0]=0,n+=a.length+1})),0}function Qe(e,t){if(b)return qe(20,1,e,t);e>>>=0,t>>>=0;var r=Ke();o()[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),o()[t>>2>>>0]=n,0}function et(e){return b?qe(21,1,e):52}function tt(e,t,r,n){return b?qe(22,1,e,t,r,n):52}function rt(e,t,r,n,a){return b?qe(23,1,e,t,r,n,a):70}var nt=[null,[],[]];function at(e,t,r,a){if(b)return qe(24,1,e,t,r,a);t>>>=0,r>>>=0,a>>>=0;for(var i=0,s=0;s<r;s++){var u=o()[t>>2>>>0],c=o()[t+4>>2>>>0];t+=8;for(var l=0;l<c;l++){var f=n()[u+l>>>0],d=nt[e];0===f||10===f?((1===e?M:R)(le(d,0)),d.length=0):d.push(f)}i+=c}return o()[a>>2>>>0]=i,0}var ot=e=>(ot=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>(e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e);if(v)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}te("initRandomDevice")})())(e),it=[31,29,31,30,31,30,31,31,30,31,30,31],st=[31,28,31,30,31,30,31,31,30,31,30,31],ut=(e,r)=>{t().set(e,r>>>0)};function ct(e,t,r,n){function o(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function i(e,t){return o(e,t,"0")}function s(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.Ja;for(e=new Date(new Date(e.Ka+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Ye(e.getFullYear())?it:st)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=u(new Date(e.getFullYear(),0,4)),r=u(r),0>=s(t,e)?0>=s(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0,n>>>=0;var l=a()[n+40>>2>>>0];for(var f in n={kb:a()[n>>2>>>0],jb:a()[n+4>>2>>>0],Ma:a()[n+8>>2>>>0],Qa:a()[n+12>>2>>>0],Na:a()[n+16>>2>>>0],Ka:a()[n+20>>2>>>0],Ga:a()[n+24>>2>>>0],Ja:a()[n+28>>2>>>0],sb:a()[n+32>>2>>>0],ib:a()[n+36>>2>>>0],lb:l?fe(l):""},r=fe(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(f,"g"),l[f]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(f in l={"%a":e=>d[e.Ga].substring(0,3),"%A":e=>d[e.Ga],"%b":e=>p[e.Na].substring(0,3),"%B":e=>p[e.Na],"%C":e=>i((e.Ka+1900)/100|0,2),"%d":e=>i(e.Qa,2),"%e":e=>o(e.Qa,2," "),"%g":e=>c(e).toString().substring(2),"%G":e=>c(e),"%H":e=>i(e.Ma,2),"%I":e=>(0==(e=e.Ma)?e=12:12<e&&(e-=12),i(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.Na-1;t+=(Ye(e.Ka+1900)?it:st)[r++]);return i(e.Qa+t,3)},"%m":e=>i(e.Na+1,2),"%M":e=>i(e.jb,2),"%n":()=>"\\n","%p":e=>0<=e.Ma&&12>e.Ma?"AM":"PM","%S":e=>i(e.kb,2),"%t":()=>"\\t","%u":e=>e.Ga||7,"%U":e=>i(Math.floor((e.Ja+7-e.Ga)/7),2),"%V":e=>{var t=Math.floor((e.Ja+7-(e.Ga+6)%7)/7);if(2>=(e.Ga+371-e.Ja-2)%7&&t++,t)53==t&&(4==(r=(e.Ga+371-e.Ja)%7)||3==r&&Ye(e.Ka)||(t=1));else{t=52;var r=(e.Ga+7-e.Ja-1)%7;(4==r||5==r&&Ye(e.Ka%400-1))&&t++}return i(t,2)},"%w":e=>e.Ga,"%W":e=>i(Math.floor((e.Ja+7-(e.Ga+6)%7)/7),2),"%y":e=>(e.Ka+1900).toString().substring(2),"%Y":e=>e.Ka+1900,"%z":e=>{var t=0<=(e=e.ib);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.lb,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),l)r.includes(f)&&(r=r.replace(new RegExp(f,"g"),l[f](n)));return f=function(e){var t=Array(Se(e)+1);return Ee(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),f.length>t?0:(ut(f,e),f.length-1)}ge.Pa();var lt=[null,de,me,be,_e,Oe,Te,Me,Re,Fe,ke,Ce,Pe,De,xe,Ie,Ue,Ge,Ne,Ze,Qe,et,tt,rt,at],ft={b:function(e,t,r){throw new ve(e>>>=0).Pa(t>>>0,r>>>0),e},N:function(e){gt(e>>>0,!y,1,!m,131072,!1),ge.Sa()},k:function(e){e>>>=0,b?postMessage({cmd:"cleanupThread",thread:e}):se(e)},I:we,h:_e,T:Oe,E:Te,G:Me,U:Re,R:Fe,J:ke,Q:Ce,o:Pe,F:De,C:xe,S:Ie,D:Ue,q:()=>!0,A:function(e,t){(e>>>=0)==t>>>0?setTimeout((()=>He())):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=ge.Fa[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:We,p:function(e){v&&ge.Fa[e>>>0].ref()},t:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getUTCSeconds(),a()[r+4>>2>>>0]=e.getUTCMinutes(),a()[r+8>>2>>>0]=e.getUTCHours(),a()[r+12>>2>>>0]=e.getUTCDate(),a()[r+16>>2>>>0]=e.getUTCMonth(),a()[r+20>>2>>>0]=e.getUTCFullYear()-1900,a()[r+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[r+28>>2>>>0]=e},u:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getSeconds(),a()[r+4>>2>>>0]=e.getMinutes(),a()[r+8>>2>>>0]=e.getHours(),a()[r+12>>2>>>0]=e.getDate(),a()[r+16>>2>>>0]=e.getMonth(),a()[r+20>>2>>>0]=e.getFullYear()-1900,a()[r+24>>2>>>0]=e.getDay(),t=(Ye(e.getFullYear())?je:ze)[e.getMonth()]+e.getDate()-1|0,a()[r+28>>2>>>0]=t,a()[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t)),a()[r+32>>2>>>0]=e},v:function(e){e>>>=0;var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),r=a()[e+32>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,o);return 0>r?a()[e+32>>2>>>0]=Number(o!=i&&s==n):0<r!=(s==n)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<r?s:o)-n))),a()[e+24>>2>>>0]=t.getDay(),r=(Ye(t.getFullYear())?je:ze)[t.getMonth()]+t.getDate()-1|0,a()[e+28>>2>>>0]=r,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,wt((J=e,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)),e>>>0},r:Ge,s:Ne,z:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}e>>>=0,t>>>=0,r>>>=0;var i=(new Date).getFullYear(),s=new Date(i,0,1),u=new Date(i,6,1);i=s.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);o()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=c),e=n(s),t=n(u),e=Be(e),t=Be(t),c<i?(o()[r>>2>>>0]=e,o()[r+4>>2>>>0]=t):(o()[r>>2>>>0]=t,o()[r+4>>2>>>0]=e)},c:()=>{te("")},l:function(){},i:function(){return Date.now()},V:()=>{throw $+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return v?r(993).cpus().length:navigator.hardwareConcurrency},K:function(e,t,r,n){for(ge.pb=t>>>0,Je.length=r,t=n>>>0>>3,n=0;n<r;n++)Je[n]=i()[t+n>>>0];return lt[e].apply(null,Je)},y:function(e){e>>>=0;var t=n().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var a=t*(1+.2/r);a=Math.min(a,e+100663296);var o=Math;a=Math.max(e,a);e:{o=o.min.call(o,4294901760,a+(65536-a%65536)%65536)-k.buffer.byteLength+65535>>>16;try{k.grow(o),Y();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},O:Ze,P:Qe,j:pe,g:et,n:tt,w:rt,m:at,x:function(e,t){return e>>>=0,t>>>=0,ot(n().subarray(e>>>0,e+t>>>0)),0},a:k||c.wasmMemory,H:ct,d:function(e,t,r,n){return ct(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e,t){return e=e.exports,C=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.pthread_self=t(e.pthread_self),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),ge.Ta.push(C.sa),z=C.ta,N.unshift(C.W),P=t,ee(),e}var t={a:ft};if(Q(),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(e){R("Module.instantiateWasm callback failed with error: "+e),u(e)}(function(e,t){var r=V;return T||"function"!=typeof WebAssembly.instantiateStreaming||re(r)||r.startsWith("file://")||v||"function"!=typeof fetch?ae(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return R("wasm streaming compile failed: "+n),R("falling back to ArrayBuffer instantiation"),ae(r,e,t)}))))})(t,(function(t){e(t.instance,t.module)})).catch(u)}(),c._OrtInit=(e,t)=>(c._OrtInit=C.X)(e,t),c._OrtGetLastError=(e,t)=>(c._OrtGetLastError=C.Y)(e,t),c._OrtCreateSessionOptions=(e,t,r,n,a,o,i,s,u,l)=>(c._OrtCreateSessionOptions=C.Z)(e,t,r,n,a,o,i,s,u,l),c._OrtAppendExecutionProvider=(e,t)=>(c._OrtAppendExecutionProvider=C._)(e,t),c._OrtAddSessionConfigEntry=(e,t,r)=>(c._OrtAddSessionConfigEntry=C.$)(e,t,r),c._OrtReleaseSessionOptions=e=>(c._OrtReleaseSessionOptions=C.aa)(e),c._OrtCreateSession=(e,t,r)=>(c._OrtCreateSession=C.ba)(e,t,r),c._OrtReleaseSession=e=>(c._OrtReleaseSession=C.ca)(e),c._OrtGetInputOutputCount=(e,t,r)=>(c._OrtGetInputOutputCount=C.da)(e,t,r),c._OrtGetInputName=(e,t)=>(c._OrtGetInputName=C.ea)(e,t),c._OrtGetOutputName=(e,t)=>(c._OrtGetOutputName=C.fa)(e,t),c._OrtFree=e=>(c._OrtFree=C.ga)(e),c._OrtCreateTensor=(e,t,r,n,a)=>(c._OrtCreateTensor=C.ha)(e,t,r,n,a),c._OrtGetTensorData=(e,t,r,n,a)=>(c._OrtGetTensorData=C.ia)(e,t,r,n,a),c._OrtReleaseTensor=e=>(c._OrtReleaseTensor=C.ja)(e),c._OrtCreateRunOptions=(e,t,r,n)=>(c._OrtCreateRunOptions=C.ka)(e,t,r,n),c._OrtAddRunConfigEntry=(e,t,r)=>(c._OrtAddRunConfigEntry=C.la)(e,t,r),c._OrtReleaseRunOptions=e=>(c._OrtReleaseRunOptions=C.ma)(e),c._OrtRun=(e,t,r,n,a,o,i,s)=>(c._OrtRun=C.na)(e,t,r,n,a,o,i,s),c._OrtEndProfiling=e=>(c._OrtEndProfiling=C.oa)(e);var dt=c._pthread_self=()=>(dt=c._pthread_self=C.pa)(),pt=c._malloc=e=>(pt=c._malloc=C.qa)(e);c._free=e=>(c._free=C.ra)(e),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=C.sa)();var gt=c.__emscripten_thread_init=(e,t,r,n,a,o)=>(gt=c.__emscripten_thread_init=C.ua)(e,t,r,n,a,o);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=C.va)();var ht,mt=(e,t,r,n)=>(mt=C.wa)(e,t,r,n),yt=e=>(yt=C.xa)(e),vt=c.__emscripten_thread_exit=e=>(vt=c.__emscripten_thread_exit=C.ya)(e),bt=c.__emscripten_check_mailbox=()=>(bt=c.__emscripten_check_mailbox=C.za)(),wt=e=>(wt=C.Aa)(e),_t=(e,t)=>(_t=C.Ba)(e,t),Ot=()=>(Ot=C.Ca)(),St=e=>(St=C.Da)(e),Et=e=>(Et=C.Ea)(e);function At(){function e(){if(!ht&&(ht=!0,c.calledRun=!0,!H)&&(b||he(N),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!b)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();B.unshift(e)}he(B)}}if(!(0<X))if(b)s(c),b||he(N),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)G.unshift(c.preRun.shift());he(G),0<X||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),e()}),1)):e())}}if(c.keepRuntimeAlive=q,c.wasmMemory=k,c.stackAlloc=Et,c.stackSave=Ot,c.stackRestore=St,c.UTF8ToString=fe,c.stringToUTF8=Ae,c.lengthBytesUTF8=Se,c.ExitStatus=oe,c.PThread=ge,Z=function e(){ht||At(),ht||(Z=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return At(),e.ready});e.exports=n},932:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,n,a=e;a.ready=new Promise(((e,r)=>{t=e,n=r}));var o,i,s,u=Object.assign({},a),c="./this.program",l=(e,t)=>{throw t},f="object"==typeof window,d="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g="";if(p){var h=r(384),m=r(908);g=d?m.dirname(g)+"/":__dirname+"/",o=(e,t)=>(e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFileSync(e,t?void 0:"utf8")),s=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!a.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),l=(e,t)=>{throw process.exitCode=e,t},a.inspect=()=>"[Emscripten Module object]"}else(f||d)&&(d?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),_scriptDir&&(g=_scriptDir),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var y,v=a.print||console.log.bind(console),b=a.printErr||console.error.bind(console);Object.assign(a,u),u=null,a.thisProgram&&(c=a.thisProgram),a.quit&&(l=a.quit),a.wasmBinary&&(y=a.wasmBinary);var w=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&W("no native wasm support detected");var _,O,S,E,A,T,M=!1;function R(){var e=_.buffer;a.HEAP8=S=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=E=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=T=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var F=[],k=[],C=[];function P(){var e=a.preRun.shift();F.unshift(e)}var D,x,I=0,U=null,L=null;function W(e){throw a.onAbort&&a.onAbort(e),b(e="Aborted("+e+")"),M=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}if(!H(D="ort-wasm.wasm")){var Y=D;D=a.locateFile?a.locateFile(Y,g):g+Y}function j(e){if(e==D&&y)return new Uint8Array(y);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}function z(e,t,r){return function(e){if(!y&&(f||d)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>j(e)));if(i)return new Promise(((t,r)=>{i(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>j(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{b("failed to asynchronously prepare wasm: "+e),W(e)}))}function G(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var N=e=>{for(;0<e.length;)e.shift()(a)};function B(e){this.qa=e-24,this.va=function(e){T[this.qa+4>>2>>>0]=e},this.ua=function(e){T[this.qa+8>>2>>>0]=e},this.sa=function(e,t){this.ta(),this.va(e),this.ua(t)},this.ta=function(){T[this.qa+16>>2>>>0]=0}}var $,q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,V=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&q)return q.decode(e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},J=(e,t)=>(e>>>=0)?V(E,e,t):"",X=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},K=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Z=e=>0==e%4&&(0!=e%100||0==e%400),Q=[0,31,60,91,121,152,182,213,244,274,305,335],ee=[0,31,59,90,120,151,181,212,243,273,304,334],te=e=>{var t=X(e)+1,r=le(t);return r&&K(e,E,r,t),r},re={},ne=()=>{if(!$){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in re)void 0===re[e]?delete t[e]:t[e]=re[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);$=r}return $},ae=[null,[],[]],oe=e=>(oe=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);if(p)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}W("initRandomDevice")})())(e),ie=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function ue(e,t,r,n){function a(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.ma;for(e=new Date(new Date(e.na+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Z(e.getFullYear())?ie:se)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=i(t,e)?0>=i(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0;var c=A[40+(n>>>=0)>>2>>>0];for(var l in n={ya:A[n>>2>>>0],xa:A[n+4>>2>>>0],oa:A[n+8>>2>>>0],ra:A[n+12>>2>>>0],pa:A[n+16>>2>>>0],na:A[n+20>>2>>>0],ha:A[n+24>>2>>>0],ma:A[n+28>>2>>>0],Aa:A[n+32>>2>>>0],wa:A[n+36>>2>>>0],za:c?J(c):""},r=J(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(l in c={"%a":e=>f[e.ha].substring(0,3),"%A":e=>f[e.ha],"%b":e=>d[e.pa].substring(0,3),"%B":e=>d[e.pa],"%C":e=>o((e.na+1900)/100|0,2),"%d":e=>o(e.ra,2),"%e":e=>a(e.ra,2," "),"%g":e=>u(e).toString().substring(2),"%G":e=>u(e),"%H":e=>o(e.oa,2),"%I":e=>(0==(e=e.oa)?e=12:12<e&&(e-=12),o(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.pa-1;t+=(Z(e.na+1900)?ie:se)[r++]);return o(e.ra+t,3)},"%m":e=>o(e.pa+1,2),"%M":e=>o(e.xa,2),"%n":()=>"\\n","%p":e=>0<=e.oa&&12>e.oa?"AM":"PM","%S":e=>o(e.ya,2),"%t":()=>"\\t","%u":e=>e.ha||7,"%U":e=>o(Math.floor((e.ma+7-e.ha)/7),2),"%V":e=>{var t=Math.floor((e.ma+7-(e.ha+6)%7)/7);if(2>=(e.ha+371-e.ma-2)%7&&t++,t)53==t&&(4==(r=(e.ha+371-e.ma)%7)||3==r&&Z(e.na)||(t=1));else{t=52;var r=(e.ha+7-e.ma-1)%7;(4==r||5==r&&Z(e.na%400-1))&&t++}return o(t,2)},"%w":e=>e.ha,"%W":e=>o(Math.floor((e.ma+7-(e.ha+6)%7)/7),2),"%y":e=>(e.na+1900).toString().substring(2),"%Y":e=>e.na+1900,"%z":e=>{var t=0<=(e=e.wa);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.za,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),c)r.includes(l)&&(r=r.replace(new RegExp(l,"g"),c[l](n)));return l=function(e){var t=Array(X(e)+1);return K(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),l.length>t?0:(S.set(l,e>>>0),l.length-1)}var ce={a:function(e,t,r){throw new B(e>>>=0).sa(t>>>0,r>>>0),e},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getUTCSeconds(),A[r+4>>2>>>0]=e.getUTCMinutes(),A[r+8>>2>>>0]=e.getUTCHours(),A[r+12>>2>>>0]=e.getUTCDate(),A[r+16>>2>>>0]=e.getUTCMonth(),A[r+20>>2>>>0]=e.getUTCFullYear()-1900,A[r+24>>2>>>0]=e.getUTCDay(),A[r+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getSeconds(),A[r+4>>2>>>0]=e.getMinutes(),A[r+8>>2>>>0]=e.getHours(),A[r+12>>2>>>0]=e.getDate(),A[r+16>>2>>>0]=e.getMonth(),A[r+20>>2>>>0]=e.getFullYear()-1900,A[r+24>>2>>>0]=e.getDay(),A[r+28>>2>>>0]=(Z(e.getFullYear())?Q:ee)[e.getMonth()]+e.getDate()-1|0,A[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[r+32>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t))},p:function(e){e>>>=0;var t=new Date(A[e+20>>2>>>0]+1900,A[e+16>>2>>>0],A[e+12>>2>>>0],A[e+8>>2>>>0],A[e+4>>2>>>0],A[e>>2>>>0],0),r=A[e+32>>2>>>0],n=t.getTimezoneOffset(),a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>r?A[e+32>>2>>>0]=Number(a!=o&&i==n):0<r!=(i==n)&&(a=Math.max(o,a),t.setTime(t.getTime()+6e4*((0<r?i:a)-n))),A[e+24>>2>>>0]=t.getDay(),A[e+28>>2>>>0]=(Z(t.getFullYear())?Q:ee)[t.getMonth()]+t.getDate()-1|0,A[e>>2>>>0]=t.getSeconds(),A[e+4>>2>>>0]=t.getMinutes(),A[e+8>>2>>>0]=t.getHours(),A[e+12>>2>>>0]=t.getDate(),A[e+16>>2>>>0]=t.getMonth(),A[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,de((x=e,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)),e>>>0},l:function(){return-52},m:function(){},u:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}r>>>=0;var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var s=i.getTimezoneOffset();T[e>>>0>>2>>>0]=60*Math.max(a,s),A[t>>>0>>2>>>0]=Number(a!=s),e=n(o),t=n(i),e=te(e),t=te(t),s<a?(T[r>>2>>>0]=e,T[r+4>>2>>>0]=t):(T[r>>2>>>0]=t,T[r+4>>2>>>0]=e)},d:()=>{W("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(e,t,r){return t>>>=0,E.copyWithin(e>>>0>>>0,t>>>0,t+(r>>>0)>>>0)},t:function(e){e>>>=0;var t=E.length;if(4294901760<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var a=Math;n=Math.max(e,n);e:{a=a.min.call(a,4294901760,n+(65536-n%65536)%65536)-_.buffer.byteLength+65535>>>16;try{_.grow(a),R();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},D:function(e,t){e>>>=0,t>>>=0;var r=0;return ne().forEach((function(n,a){var o=t+r;for(a=T[e+4*a>>2>>>0]=o,o=0;o<n.length;++o)S[a++>>0>>>0]=n.charCodeAt(o);S[a>>0>>>0]=0,r+=n.length+1})),0},E:function(e,t){e>>>=0,t>>>=0;var r=ne();T[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),T[t>>2>>>0]=n,0},s:e=>{w||(a.onExit&&a.onExit(e),M=!0),l(e,new G(e))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(e,t,r,n){t>>>=0,r>>>=0,n>>>=0;for(var a=0,o=0;o<r;o++){var i=T[t>>2>>>0],s=T[t+4>>2>>>0];t+=8;for(var u=0;u<s;u++){var c=E[i+u>>>0],l=ae[e];0===c||10===c?((1===e?v:b)(V(l,0)),l.length=0):l.push(c)}a+=s}return T[n>>2>>>0]=a,0},r:function(e,t){return e>>>=0,oe(E.subarray(e>>>0,e+(t>>>0)>>>0)),0},C:ue,c:function(e,t,r,n){return ue(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e){if(e=e.exports,O=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),_=O.L,R(),k.unshift(O.M),I--,a.monitorRunDependencies&&a.monitorRunDependencies(I),0==I&&(null!==U&&(clearInterval(U),U=null),L)){var t=L;L=null,t()}return e}var t={a:ce};if(I++,a.monitorRunDependencies&&a.monitorRunDependencies(I),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var r=D;return y||"function"!=typeof WebAssembly.instantiateStreaming||H(r)||r.startsWith("file://")||p||"function"!=typeof fetch?z(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return b("wasm streaming compile failed: "+n),b("falling back to ArrayBuffer instantiation"),z(r,e,t)}))))})(t,(function(t){e(t.instance)})).catch(n)}(),a._OrtInit=(e,t)=>(a._OrtInit=O.N)(e,t),a._OrtGetLastError=(e,t)=>(a._OrtGetLastError=O.O)(e,t),a._OrtCreateSessionOptions=(e,t,r,n,o,i,s,u,c,l)=>(a._OrtCreateSessionOptions=O.P)(e,t,r,n,o,i,s,u,c,l),a._OrtAppendExecutionProvider=(e,t)=>(a._OrtAppendExecutionProvider=O.Q)(e,t),a._OrtAddSessionConfigEntry=(e,t,r)=>(a._OrtAddSessionConfigEntry=O.R)(e,t,r),a._OrtReleaseSessionOptions=e=>(a._OrtReleaseSessionOptions=O.S)(e),a._OrtCreateSession=(e,t,r)=>(a._OrtCreateSession=O.T)(e,t,r),a._OrtReleaseSession=e=>(a._OrtReleaseSession=O.U)(e),a._OrtGetInputOutputCount=(e,t,r)=>(a._OrtGetInputOutputCount=O.V)(e,t,r),a._OrtGetInputName=(e,t)=>(a._OrtGetInputName=O.W)(e,t),a._OrtGetOutputName=(e,t)=>(a._OrtGetOutputName=O.X)(e,t),a._OrtFree=e=>(a._OrtFree=O.Y)(e),a._OrtCreateTensor=(e,t,r,n,o)=>(a._OrtCreateTensor=O.Z)(e,t,r,n,o),a._OrtGetTensorData=(e,t,r,n,o)=>(a._OrtGetTensorData=O._)(e,t,r,n,o),a._OrtReleaseTensor=e=>(a._OrtReleaseTensor=O.$)(e),a._OrtCreateRunOptions=(e,t,r,n)=>(a._OrtCreateRunOptions=O.aa)(e,t,r,n),a._OrtAddRunConfigEntry=(e,t,r)=>(a._OrtAddRunConfigEntry=O.ba)(e,t,r),a._OrtReleaseRunOptions=e=>(a._OrtReleaseRunOptions=O.ca)(e),a._OrtRun=(e,t,r,n,o,i,s,u)=>(a._OrtRun=O.da)(e,t,r,n,o,i,s,u),a._OrtEndProfiling=e=>(a._OrtEndProfiling=O.ea)(e);var le=a._malloc=e=>(le=a._malloc=O.fa)(e);a._free=e=>(a._free=O.ga)(e);var fe,de=e=>(de=O.ia)(e),pe=()=>(pe=O.ja)(),ge=e=>(ge=O.ka)(e),he=e=>(he=O.la)(e);function me(){function e(){if(!fe&&(fe=!0,a.calledRun=!0,!M)){if(N(k),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var e=a.postRun.shift();C.unshift(e)}N(C)}}if(!(0<I)){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)P();N(F),0<I||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),e()}),1)):e())}}if(a.stackAlloc=he,a.stackSave=pe,a.stackRestore=ge,a.UTF8ToString=J,a.stringToUTF8=(e,t,r)=>K(e,E,t,r),a.lengthBytesUTF8=X,L=function e(){fe||me(),fe||(L=e)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return me(),e.ready});e.exports=n},154:e=>{"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},760:()=>{},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";const e=r(259),t=r(263);self.onmessage=r=>{switch(r.data.type){case"init-wasm":try{(0,t.initializeWebAssembly)(r.data.in).then((()=>postMessage({type:"init-wasm"})),(e=>postMessage({type:"init-wasm",err:e})))}catch(e){postMessage({type:"init-wasm",err:e})}break;case"init-ort":try{(0,e.initRuntime)(r.data.in).then((()=>postMessage({type:"init-ort"})),(e=>postMessage({type:"init-ort",err:e}))),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{const{model:t}=r.data.in,n=(0,e.createSessionAllocate)(t);postMessage({type:"create_allocate",out:n})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{const{modeldata:t,options:n}=r.data.in,a=(0,e.createSessionFinalize)(t,n);postMessage({type:"create_finalize",out:a})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{const{model:t,options:n}=r.data.in,a=(0,e.createSession)(t,n);postMessage({type:"create",out:a})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{const t=r.data.in;(0,e.releaseSession)(t),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{const{sessionId:t,inputIndices:n,inputs:a,outputIndices:o,options:i}=r.data.in;(0,e.run)(t,n,a,o,i).then((t=>{postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(e=>{postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{const t=r.data.in;(0,e.endProfiling)(t),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}})()})();\n',"Worker",void 0,void 0)}},6614:Nr=>{Nr.exports=function(_r,Ur,jr,Gr){var Wr=self||window;try{try{var Zr;try{Zr=new Wr.Blob([_r])}catch{(Zr=new(Wr.BlobBuilder||Wr.WebKitBlobBuilder||Wr.MozBlobBuilder||Wr.MSBlobBuilder)).append(_r),Zr=Zr.getBlob()}var Yr=Wr.URL||Wr.webkitURL,ts=Yr.createObjectURL(Zr),es=new Wr[Ur](ts,jr);return Yr.revokeObjectURL(ts),es}catch{return new Wr[Ur]("data:application/javascript,".concat(encodeURIComponent(_r)),jr)}}catch{if(!Gr)throw Error("Inline worker is not supported");return new Wr[Ur](Gr,jr)}}},2446:(Nr,_r,Ur)=>{var jr,Gr,Wr,Zr=Ur(2100),Yr=Zr.Reader,ts=Zr.Writer,es=Zr.util,ns=Zr.roots.default||(Zr.roots.default={});ns.onnx=((Wr={}).Version=(jr={},(Gr=Object.create(jr))[jr[0]="_START_VERSION"]=0,Gr[jr[1]="IR_VERSION_2017_10_10"]=1,Gr[jr[2]="IR_VERSION_2017_10_30"]=2,Gr[jr[3]="IR_VERSION_2017_11_3"]=3,Gr[jr[4]="IR_VERSION_2019_1_22"]=4,Gr[jr[5]="IR_VERSION_2019_3_18"]=5,Gr[jr[6]="IR_VERSION_2019_9_19"]=6,Gr[jr[7]="IR_VERSION_2020_5_8"]=7,Gr[jr[8]="IR_VERSION_2021_7_30"]=8,Gr[jr[9]="IR_VERSION"]=9,Gr),Wr.AttributeProto=function(){function Xr(qr){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.name="",Xr.prototype.refAttrName="",Xr.prototype.docString="",Xr.prototype.type=0,Xr.prototype.f=0,Xr.prototype.i=es.Long?es.Long.fromBits(0,0,!1):0,Xr.prototype.s=es.newBuffer([]),Xr.prototype.t=null,Xr.prototype.g=null,Xr.prototype.sparseTensor=null,Xr.prototype.tp=null,Xr.prototype.floats=es.emptyArray,Xr.prototype.ints=es.emptyArray,Xr.prototype.strings=es.emptyArray,Xr.prototype.tensors=es.emptyArray,Xr.prototype.graphs=es.emptyArray,Xr.prototype.sparseTensors=es.emptyArray,Xr.prototype.typeProtos=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.name!=null&&Object.hasOwnProperty.call(qr,"name")&&_i.uint32(10).string(qr.name),qr.f!=null&&Object.hasOwnProperty.call(qr,"f")&&_i.uint32(21).float(qr.f),qr.i!=null&&Object.hasOwnProperty.call(qr,"i")&&_i.uint32(24).int64(qr.i),qr.s!=null&&Object.hasOwnProperty.call(qr,"s")&&_i.uint32(34).bytes(qr.s),qr.t!=null&&Object.hasOwnProperty.call(qr,"t")&&ns.onnx.TensorProto.encode(qr.t,_i.uint32(42).fork()).ldelim(),qr.g!=null&&Object.hasOwnProperty.call(qr,"g")&&ns.onnx.GraphProto.encode(qr.g,_i.uint32(50).fork()).ldelim(),qr.floats!=null&&qr.floats.length){_i.uint32(58).fork();for(var rs=0;rs<qr.floats.length;++rs)_i.float(qr.floats[rs]);_i.ldelim()}if(qr.ints!=null&&qr.ints.length){for(_i.uint32(66).fork(),rs=0;rs<qr.ints.length;++rs)_i.int64(qr.ints[rs]);_i.ldelim()}if(qr.strings!=null&&qr.strings.length)for(rs=0;rs<qr.strings.length;++rs)_i.uint32(74).bytes(qr.strings[rs]);if(qr.tensors!=null&&qr.tensors.length)for(rs=0;rs<qr.tensors.length;++rs)ns.onnx.TensorProto.encode(qr.tensors[rs],_i.uint32(82).fork()).ldelim();if(qr.graphs!=null&&qr.graphs.length)for(rs=0;rs<qr.graphs.length;++rs)ns.onnx.GraphProto.encode(qr.graphs[rs],_i.uint32(90).fork()).ldelim();if(qr.docString!=null&&Object.hasOwnProperty.call(qr,"docString")&&_i.uint32(106).string(qr.docString),qr.tp!=null&&Object.hasOwnProperty.call(qr,"tp")&&ns.onnx.TypeProto.encode(qr.tp,_i.uint32(114).fork()).ldelim(),qr.typeProtos!=null&&qr.typeProtos.length)for(rs=0;rs<qr.typeProtos.length;++rs)ns.onnx.TypeProto.encode(qr.typeProtos[rs],_i.uint32(122).fork()).ldelim();if(qr.type!=null&&Object.hasOwnProperty.call(qr,"type")&&_i.uint32(160).int32(qr.type),qr.refAttrName!=null&&Object.hasOwnProperty.call(qr,"refAttrName")&&_i.uint32(170).string(qr.refAttrName),qr.sparseTensor!=null&&Object.hasOwnProperty.call(qr,"sparseTensor")&&ns.onnx.SparseTensorProto.encode(qr.sparseTensor,_i.uint32(178).fork()).ldelim(),qr.sparseTensors!=null&&qr.sparseTensors.length)for(rs=0;rs<qr.sparseTensors.length;++rs)ns.onnx.SparseTensorProto.encode(qr.sparseTensors[rs],_i.uint32(186).fork()).ldelim();return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.AttributeProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.name=qr.string();break;case 21:is.refAttrName=qr.string();break;case 13:is.docString=qr.string();break;case 20:is.type=qr.int32();break;case 2:is.f=qr.float();break;case 3:is.i=qr.int64();break;case 4:is.s=qr.bytes();break;case 5:is.t=ns.onnx.TensorProto.decode(qr,qr.uint32());break;case 6:is.g=ns.onnx.GraphProto.decode(qr,qr.uint32());break;case 22:is.sparseTensor=ns.onnx.SparseTensorProto.decode(qr,qr.uint32());break;case 14:is.tp=ns.onnx.TypeProto.decode(qr,qr.uint32());break;case 7:if(is.floats&&is.floats.length||(is.floats=[]),(7&ss)==2)for(var os=qr.uint32()+qr.pos;qr.pos<os;)is.floats.push(qr.float());else is.floats.push(qr.float());break;case 8:if(is.ints&&is.ints.length||(is.ints=[]),(7&ss)==2)for(os=qr.uint32()+qr.pos;qr.pos<os;)is.ints.push(qr.int64());else is.ints.push(qr.int64());break;case 9:is.strings&&is.strings.length||(is.strings=[]),is.strings.push(qr.bytes());break;case 10:is.tensors&&is.tensors.length||(is.tensors=[]),is.tensors.push(ns.onnx.TensorProto.decode(qr,qr.uint32()));break;case 11:is.graphs&&is.graphs.length||(is.graphs=[]),is.graphs.push(ns.onnx.GraphProto.decode(qr,qr.uint32()));break;case 23:is.sparseTensors&&is.sparseTensors.length||(is.sparseTensors=[]),is.sparseTensors.push(ns.onnx.SparseTensorProto.decode(qr,qr.uint32()));break;case 15:is.typeProtos&&is.typeProtos.length||(is.typeProtos=[]),is.typeProtos.push(ns.onnx.TypeProto.decode(qr,qr.uint32()));break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.name!=null&&qr.hasOwnProperty("name")&&!es.isString(qr.name))return"name: string expected";if(qr.refAttrName!=null&&qr.hasOwnProperty("refAttrName")&&!es.isString(qr.refAttrName))return"refAttrName: string expected";if(qr.docString!=null&&qr.hasOwnProperty("docString")&&!es.isString(qr.docString))return"docString: string expected";if(qr.type!=null&&qr.hasOwnProperty("type"))switch(qr.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(qr.f!=null&&qr.hasOwnProperty("f")&&typeof qr.f!="number")return"f: number expected";if(qr.i!=null&&qr.hasOwnProperty("i")&&!(es.isInteger(qr.i)||qr.i&&es.isInteger(qr.i.low)&&es.isInteger(qr.i.high)))return"i: integer|Long expected";if(qr.s!=null&&qr.hasOwnProperty("s")&&!(qr.s&&typeof qr.s.length=="number"||es.isString(qr.s)))return"s: buffer expected";if(qr.t!=null&&qr.hasOwnProperty("t")&&(rs=ns.onnx.TensorProto.verify(qr.t)))return"t."+rs;if(qr.g!=null&&qr.hasOwnProperty("g")&&(rs=ns.onnx.GraphProto.verify(qr.g)))return"g."+rs;if(qr.sparseTensor!=null&&qr.hasOwnProperty("sparseTensor")&&(rs=ns.onnx.SparseTensorProto.verify(qr.sparseTensor)))return"sparseTensor."+rs;if(qr.tp!=null&&qr.hasOwnProperty("tp")&&(rs=ns.onnx.TypeProto.verify(qr.tp)))return"tp."+rs;if(qr.floats!=null&&qr.hasOwnProperty("floats")){if(!Array.isArray(qr.floats))return"floats: array expected";for(var _i=0;_i<qr.floats.length;++_i)if(typeof qr.floats[_i]!="number")return"floats: number[] expected"}if(qr.ints!=null&&qr.hasOwnProperty("ints")){if(!Array.isArray(qr.ints))return"ints: array expected";for(_i=0;_i<qr.ints.length;++_i)if(!(es.isInteger(qr.ints[_i])||qr.ints[_i]&&es.isInteger(qr.ints[_i].low)&&es.isInteger(qr.ints[_i].high)))return"ints: integer|Long[] expected"}if(qr.strings!=null&&qr.hasOwnProperty("strings")){if(!Array.isArray(qr.strings))return"strings: array expected";for(_i=0;_i<qr.strings.length;++_i)if(!(qr.strings[_i]&&typeof qr.strings[_i].length=="number"||es.isString(qr.strings[_i])))return"strings: buffer[] expected"}if(qr.tensors!=null&&qr.hasOwnProperty("tensors")){if(!Array.isArray(qr.tensors))return"tensors: array expected";for(_i=0;_i<qr.tensors.length;++_i)if(rs=ns.onnx.TensorProto.verify(qr.tensors[_i]))return"tensors."+rs}if(qr.graphs!=null&&qr.hasOwnProperty("graphs")){if(!Array.isArray(qr.graphs))return"graphs: array expected";for(_i=0;_i<qr.graphs.length;++_i)if(rs=ns.onnx.GraphProto.verify(qr.graphs[_i]))return"graphs."+rs}if(qr.sparseTensors!=null&&qr.hasOwnProperty("sparseTensors")){if(!Array.isArray(qr.sparseTensors))return"sparseTensors: array expected";for(_i=0;_i<qr.sparseTensors.length;++_i)if(rs=ns.onnx.SparseTensorProto.verify(qr.sparseTensors[_i]))return"sparseTensors."+rs}if(qr.typeProtos!=null&&qr.hasOwnProperty("typeProtos")){if(!Array.isArray(qr.typeProtos))return"typeProtos: array expected";for(_i=0;_i<qr.typeProtos.length;++_i){var rs;if(rs=ns.onnx.TypeProto.verify(qr.typeProtos[_i]))return"typeProtos."+rs}}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.AttributeProto)return qr;var _i=new ns.onnx.AttributeProto;switch(qr.name!=null&&(_i.name=String(qr.name)),qr.refAttrName!=null&&(_i.refAttrName=String(qr.refAttrName)),qr.docString!=null&&(_i.docString=String(qr.docString)),qr.type){default:if(typeof qr.type=="number"){_i.type=qr.type;break}break;case"UNDEFINED":case 0:_i.type=0;break;case"FLOAT":case 1:_i.type=1;break;case"INT":case 2:_i.type=2;break;case"STRING":case 3:_i.type=3;break;case"TENSOR":case 4:_i.type=4;break;case"GRAPH":case 5:_i.type=5;break;case"SPARSE_TENSOR":case 11:_i.type=11;break;case"TYPE_PROTO":case 13:_i.type=13;break;case"FLOATS":case 6:_i.type=6;break;case"INTS":case 7:_i.type=7;break;case"STRINGS":case 8:_i.type=8;break;case"TENSORS":case 9:_i.type=9;break;case"GRAPHS":case 10:_i.type=10;break;case"SPARSE_TENSORS":case 12:_i.type=12;break;case"TYPE_PROTOS":case 14:_i.type=14}if(qr.f!=null&&(_i.f=Number(qr.f)),qr.i!=null&&(es.Long?(_i.i=es.Long.fromValue(qr.i)).unsigned=!1:typeof qr.i=="string"?_i.i=parseInt(qr.i,10):typeof qr.i=="number"?_i.i=qr.i:typeof qr.i=="object"&&(_i.i=new es.LongBits(qr.i.low>>>0,qr.i.high>>>0).toNumber())),qr.s!=null&&(typeof qr.s=="string"?es.base64.decode(qr.s,_i.s=es.newBuffer(es.base64.length(qr.s)),0):qr.s.length>=0&&(_i.s=qr.s)),qr.t!=null){if(typeof qr.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");_i.t=ns.onnx.TensorProto.fromObject(qr.t)}if(qr.g!=null){if(typeof qr.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");_i.g=ns.onnx.GraphProto.fromObject(qr.g)}if(qr.sparseTensor!=null){if(typeof qr.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");_i.sparseTensor=ns.onnx.SparseTensorProto.fromObject(qr.sparseTensor)}if(qr.tp!=null){if(typeof qr.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");_i.tp=ns.onnx.TypeProto.fromObject(qr.tp)}if(qr.floats){if(!Array.isArray(qr.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");_i.floats=[];for(var rs=0;rs<qr.floats.length;++rs)_i.floats[rs]=Number(qr.floats[rs])}if(qr.ints){if(!Array.isArray(qr.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(_i.ints=[],rs=0;rs<qr.ints.length;++rs)es.Long?(_i.ints[rs]=es.Long.fromValue(qr.ints[rs])).unsigned=!1:typeof qr.ints[rs]=="string"?_i.ints[rs]=parseInt(qr.ints[rs],10):typeof qr.ints[rs]=="number"?_i.ints[rs]=qr.ints[rs]:typeof qr.ints[rs]=="object"&&(_i.ints[rs]=new es.LongBits(qr.ints[rs].low>>>0,qr.ints[rs].high>>>0).toNumber())}if(qr.strings){if(!Array.isArray(qr.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(_i.strings=[],rs=0;rs<qr.strings.length;++rs)typeof qr.strings[rs]=="string"?es.base64.decode(qr.strings[rs],_i.strings[rs]=es.newBuffer(es.base64.length(qr.strings[rs])),0):qr.strings[rs].length>=0&&(_i.strings[rs]=qr.strings[rs])}if(qr.tensors){if(!Array.isArray(qr.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(_i.tensors=[],rs=0;rs<qr.tensors.length;++rs){if(typeof qr.tensors[rs]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");_i.tensors[rs]=ns.onnx.TensorProto.fromObject(qr.tensors[rs])}}if(qr.graphs){if(!Array.isArray(qr.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(_i.graphs=[],rs=0;rs<qr.graphs.length;++rs){if(typeof qr.graphs[rs]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");_i.graphs[rs]=ns.onnx.GraphProto.fromObject(qr.graphs[rs])}}if(qr.sparseTensors){if(!Array.isArray(qr.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(_i.sparseTensors=[],rs=0;rs<qr.sparseTensors.length;++rs){if(typeof qr.sparseTensors[rs]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");_i.sparseTensors[rs]=ns.onnx.SparseTensorProto.fromObject(qr.sparseTensors[rs])}}if(qr.typeProtos){if(!Array.isArray(qr.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(_i.typeProtos=[],rs=0;rs<qr.typeProtos.length;++rs){if(typeof qr.typeProtos[rs]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");_i.typeProtos[rs]=ns.onnx.TypeProto.fromObject(qr.typeProtos[rs])}}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.floats=[],rs.ints=[],rs.strings=[],rs.tensors=[],rs.graphs=[],rs.typeProtos=[],rs.sparseTensors=[]),_i.defaults){if(rs.name="",rs.f=0,es.Long){var is=new es.Long(0,0,!1);rs.i=_i.longs===String?is.toString():_i.longs===Number?is.toNumber():is}else rs.i=_i.longs===String?"0":0;_i.bytes===String?rs.s="":(rs.s=[],_i.bytes!==Array&&(rs.s=es.newBuffer(rs.s))),rs.t=null,rs.g=null,rs.docString="",rs.tp=null,rs.type=_i.enums===String?"UNDEFINED":0,rs.refAttrName="",rs.sparseTensor=null}if(qr.name!=null&&qr.hasOwnProperty("name")&&(rs.name=qr.name),qr.f!=null&&qr.hasOwnProperty("f")&&(rs.f=_i.json&&!isFinite(qr.f)?String(qr.f):qr.f),qr.i!=null&&qr.hasOwnProperty("i")&&(typeof qr.i=="number"?rs.i=_i.longs===String?String(qr.i):qr.i:rs.i=_i.longs===String?es.Long.prototype.toString.call(qr.i):_i.longs===Number?new es.LongBits(qr.i.low>>>0,qr.i.high>>>0).toNumber():qr.i),qr.s!=null&&qr.hasOwnProperty("s")&&(rs.s=_i.bytes===String?es.base64.encode(qr.s,0,qr.s.length):_i.bytes===Array?Array.prototype.slice.call(qr.s):qr.s),qr.t!=null&&qr.hasOwnProperty("t")&&(rs.t=ns.onnx.TensorProto.toObject(qr.t,_i)),qr.g!=null&&qr.hasOwnProperty("g")&&(rs.g=ns.onnx.GraphProto.toObject(qr.g,_i)),qr.floats&&qr.floats.length){rs.floats=[];for(var ss=0;ss<qr.floats.length;++ss)rs.floats[ss]=_i.json&&!isFinite(qr.floats[ss])?String(qr.floats[ss]):qr.floats[ss]}if(qr.ints&&qr.ints.length)for(rs.ints=[],ss=0;ss<qr.ints.length;++ss)typeof qr.ints[ss]=="number"?rs.ints[ss]=_i.longs===String?String(qr.ints[ss]):qr.ints[ss]:rs.ints[ss]=_i.longs===String?es.Long.prototype.toString.call(qr.ints[ss]):_i.longs===Number?new es.LongBits(qr.ints[ss].low>>>0,qr.ints[ss].high>>>0).toNumber():qr.ints[ss];if(qr.strings&&qr.strings.length)for(rs.strings=[],ss=0;ss<qr.strings.length;++ss)rs.strings[ss]=_i.bytes===String?es.base64.encode(qr.strings[ss],0,qr.strings[ss].length):_i.bytes===Array?Array.prototype.slice.call(qr.strings[ss]):qr.strings[ss];if(qr.tensors&&qr.tensors.length)for(rs.tensors=[],ss=0;ss<qr.tensors.length;++ss)rs.tensors[ss]=ns.onnx.TensorProto.toObject(qr.tensors[ss],_i);if(qr.graphs&&qr.graphs.length)for(rs.graphs=[],ss=0;ss<qr.graphs.length;++ss)rs.graphs[ss]=ns.onnx.GraphProto.toObject(qr.graphs[ss],_i);if(qr.docString!=null&&qr.hasOwnProperty("docString")&&(rs.docString=qr.docString),qr.tp!=null&&qr.hasOwnProperty("tp")&&(rs.tp=ns.onnx.TypeProto.toObject(qr.tp,_i)),qr.typeProtos&&qr.typeProtos.length)for(rs.typeProtos=[],ss=0;ss<qr.typeProtos.length;++ss)rs.typeProtos[ss]=ns.onnx.TypeProto.toObject(qr.typeProtos[ss],_i);if(qr.type!=null&&qr.hasOwnProperty("type")&&(rs.type=_i.enums===String?ns.onnx.AttributeProto.AttributeType[qr.type]===void 0?qr.type:ns.onnx.AttributeProto.AttributeType[qr.type]:qr.type),qr.refAttrName!=null&&qr.hasOwnProperty("refAttrName")&&(rs.refAttrName=qr.refAttrName),qr.sparseTensor!=null&&qr.hasOwnProperty("sparseTensor")&&(rs.sparseTensor=ns.onnx.SparseTensorProto.toObject(qr.sparseTensor,_i)),qr.sparseTensors&&qr.sparseTensors.length)for(rs.sparseTensors=[],ss=0;ss<qr.sparseTensors.length;++ss)rs.sparseTensors[ss]=ns.onnx.SparseTensorProto.toObject(qr.sparseTensors[ss],_i);return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.AttributeProto"},Xr.AttributeType=function(){var qr={},_i=Object.create(qr);return _i[qr[0]="UNDEFINED"]=0,_i[qr[1]="FLOAT"]=1,_i[qr[2]="INT"]=2,_i[qr[3]="STRING"]=3,_i[qr[4]="TENSOR"]=4,_i[qr[5]="GRAPH"]=5,_i[qr[11]="SPARSE_TENSOR"]=11,_i[qr[13]="TYPE_PROTO"]=13,_i[qr[6]="FLOATS"]=6,_i[qr[7]="INTS"]=7,_i[qr[8]="STRINGS"]=8,_i[qr[9]="TENSORS"]=9,_i[qr[10]="GRAPHS"]=10,_i[qr[12]="SPARSE_TENSORS"]=12,_i[qr[14]="TYPE_PROTOS"]=14,_i}(),Xr}(),Wr.ValueInfoProto=function(){function Xr(qr){if(qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.name="",Xr.prototype.type=null,Xr.prototype.docString="",Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){return _i||(_i=ts.create()),qr.name!=null&&Object.hasOwnProperty.call(qr,"name")&&_i.uint32(10).string(qr.name),qr.type!=null&&Object.hasOwnProperty.call(qr,"type")&&ns.onnx.TypeProto.encode(qr.type,_i.uint32(18).fork()).ldelim(),qr.docString!=null&&Object.hasOwnProperty.call(qr,"docString")&&_i.uint32(26).string(qr.docString),_i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.ValueInfoProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.name=qr.string();break;case 2:is.type=ns.onnx.TypeProto.decode(qr,qr.uint32());break;case 3:is.docString=qr.string();break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.name!=null&&qr.hasOwnProperty("name")&&!es.isString(qr.name))return"name: string expected";if(qr.type!=null&&qr.hasOwnProperty("type")){var _i=ns.onnx.TypeProto.verify(qr.type);if(_i)return"type."+_i}return qr.docString!=null&&qr.hasOwnProperty("docString")&&!es.isString(qr.docString)?"docString: string expected":null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.ValueInfoProto)return qr;var _i=new ns.onnx.ValueInfoProto;if(qr.name!=null&&(_i.name=String(qr.name)),qr.type!=null){if(typeof qr.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");_i.type=ns.onnx.TypeProto.fromObject(qr.type)}return qr.docString!=null&&(_i.docString=String(qr.docString)),_i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};return _i.defaults&&(rs.name="",rs.type=null,rs.docString=""),qr.name!=null&&qr.hasOwnProperty("name")&&(rs.name=qr.name),qr.type!=null&&qr.hasOwnProperty("type")&&(rs.type=ns.onnx.TypeProto.toObject(qr.type,_i)),qr.docString!=null&&qr.hasOwnProperty("docString")&&(rs.docString=qr.docString),rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.ValueInfoProto"},Xr}(),Wr.NodeProto=function(){function Xr(qr){if(this.input=[],this.output=[],this.attribute=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.input=es.emptyArray,Xr.prototype.output=es.emptyArray,Xr.prototype.name="",Xr.prototype.opType="",Xr.prototype.domain="",Xr.prototype.attribute=es.emptyArray,Xr.prototype.docString="",Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.input!=null&&qr.input.length)for(var rs=0;rs<qr.input.length;++rs)_i.uint32(10).string(qr.input[rs]);if(qr.output!=null&&qr.output.length)for(rs=0;rs<qr.output.length;++rs)_i.uint32(18).string(qr.output[rs]);if(qr.name!=null&&Object.hasOwnProperty.call(qr,"name")&&_i.uint32(26).string(qr.name),qr.opType!=null&&Object.hasOwnProperty.call(qr,"opType")&&_i.uint32(34).string(qr.opType),qr.attribute!=null&&qr.attribute.length)for(rs=0;rs<qr.attribute.length;++rs)ns.onnx.AttributeProto.encode(qr.attribute[rs],_i.uint32(42).fork()).ldelim();return qr.docString!=null&&Object.hasOwnProperty.call(qr,"docString")&&_i.uint32(50).string(qr.docString),qr.domain!=null&&Object.hasOwnProperty.call(qr,"domain")&&_i.uint32(58).string(qr.domain),_i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.NodeProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.input&&is.input.length||(is.input=[]),is.input.push(qr.string());break;case 2:is.output&&is.output.length||(is.output=[]),is.output.push(qr.string());break;case 3:is.name=qr.string();break;case 4:is.opType=qr.string();break;case 7:is.domain=qr.string();break;case 5:is.attribute&&is.attribute.length||(is.attribute=[]),is.attribute.push(ns.onnx.AttributeProto.decode(qr,qr.uint32()));break;case 6:is.docString=qr.string();break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.input!=null&&qr.hasOwnProperty("input")){if(!Array.isArray(qr.input))return"input: array expected";for(var _i=0;_i<qr.input.length;++_i)if(!es.isString(qr.input[_i]))return"input: string[] expected"}if(qr.output!=null&&qr.hasOwnProperty("output")){if(!Array.isArray(qr.output))return"output: array expected";for(_i=0;_i<qr.output.length;++_i)if(!es.isString(qr.output[_i]))return"output: string[] expected"}if(qr.name!=null&&qr.hasOwnProperty("name")&&!es.isString(qr.name))return"name: string expected";if(qr.opType!=null&&qr.hasOwnProperty("opType")&&!es.isString(qr.opType))return"opType: string expected";if(qr.domain!=null&&qr.hasOwnProperty("domain")&&!es.isString(qr.domain))return"domain: string expected";if(qr.attribute!=null&&qr.hasOwnProperty("attribute")){if(!Array.isArray(qr.attribute))return"attribute: array expected";for(_i=0;_i<qr.attribute.length;++_i){var rs=ns.onnx.AttributeProto.verify(qr.attribute[_i]);if(rs)return"attribute."+rs}}return qr.docString!=null&&qr.hasOwnProperty("docString")&&!es.isString(qr.docString)?"docString: string expected":null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.NodeProto)return qr;var _i=new ns.onnx.NodeProto;if(qr.input){if(!Array.isArray(qr.input))throw TypeError(".onnx.NodeProto.input: array expected");_i.input=[];for(var rs=0;rs<qr.input.length;++rs)_i.input[rs]=String(qr.input[rs])}if(qr.output){if(!Array.isArray(qr.output))throw TypeError(".onnx.NodeProto.output: array expected");for(_i.output=[],rs=0;rs<qr.output.length;++rs)_i.output[rs]=String(qr.output[rs])}if(qr.name!=null&&(_i.name=String(qr.name)),qr.opType!=null&&(_i.opType=String(qr.opType)),qr.domain!=null&&(_i.domain=String(qr.domain)),qr.attribute){if(!Array.isArray(qr.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(_i.attribute=[],rs=0;rs<qr.attribute.length;++rs){if(typeof qr.attribute[rs]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");_i.attribute[rs]=ns.onnx.AttributeProto.fromObject(qr.attribute[rs])}}return qr.docString!=null&&(_i.docString=String(qr.docString)),_i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.input=[],rs.output=[],rs.attribute=[]),_i.defaults&&(rs.name="",rs.opType="",rs.docString="",rs.domain=""),qr.input&&qr.input.length){rs.input=[];for(var is=0;is<qr.input.length;++is)rs.input[is]=qr.input[is]}if(qr.output&&qr.output.length)for(rs.output=[],is=0;is<qr.output.length;++is)rs.output[is]=qr.output[is];if(qr.name!=null&&qr.hasOwnProperty("name")&&(rs.name=qr.name),qr.opType!=null&&qr.hasOwnProperty("opType")&&(rs.opType=qr.opType),qr.attribute&&qr.attribute.length)for(rs.attribute=[],is=0;is<qr.attribute.length;++is)rs.attribute[is]=ns.onnx.AttributeProto.toObject(qr.attribute[is],_i);return qr.docString!=null&&qr.hasOwnProperty("docString")&&(rs.docString=qr.docString),qr.domain!=null&&qr.hasOwnProperty("domain")&&(rs.domain=qr.domain),rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.NodeProto"},Xr}(),Wr.TrainingInfoProto=function(){function Xr(qr){if(this.initializationBinding=[],this.updateBinding=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.initialization=null,Xr.prototype.algorithm=null,Xr.prototype.initializationBinding=es.emptyArray,Xr.prototype.updateBinding=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.initialization!=null&&Object.hasOwnProperty.call(qr,"initialization")&&ns.onnx.GraphProto.encode(qr.initialization,_i.uint32(10).fork()).ldelim(),qr.algorithm!=null&&Object.hasOwnProperty.call(qr,"algorithm")&&ns.onnx.GraphProto.encode(qr.algorithm,_i.uint32(18).fork()).ldelim(),qr.initializationBinding!=null&&qr.initializationBinding.length)for(var rs=0;rs<qr.initializationBinding.length;++rs)ns.onnx.StringStringEntryProto.encode(qr.initializationBinding[rs],_i.uint32(26).fork()).ldelim();if(qr.updateBinding!=null&&qr.updateBinding.length)for(rs=0;rs<qr.updateBinding.length;++rs)ns.onnx.StringStringEntryProto.encode(qr.updateBinding[rs],_i.uint32(34).fork()).ldelim();return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.TrainingInfoProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.initialization=ns.onnx.GraphProto.decode(qr,qr.uint32());break;case 2:is.algorithm=ns.onnx.GraphProto.decode(qr,qr.uint32());break;case 3:is.initializationBinding&&is.initializationBinding.length||(is.initializationBinding=[]),is.initializationBinding.push(ns.onnx.StringStringEntryProto.decode(qr,qr.uint32()));break;case 4:is.updateBinding&&is.updateBinding.length||(is.updateBinding=[]),is.updateBinding.push(ns.onnx.StringStringEntryProto.decode(qr,qr.uint32()));break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.initialization!=null&&qr.hasOwnProperty("initialization")&&(rs=ns.onnx.GraphProto.verify(qr.initialization)))return"initialization."+rs;if(qr.algorithm!=null&&qr.hasOwnProperty("algorithm")&&(rs=ns.onnx.GraphProto.verify(qr.algorithm)))return"algorithm."+rs;if(qr.initializationBinding!=null&&qr.hasOwnProperty("initializationBinding")){if(!Array.isArray(qr.initializationBinding))return"initializationBinding: array expected";for(var _i=0;_i<qr.initializationBinding.length;++_i)if(rs=ns.onnx.StringStringEntryProto.verify(qr.initializationBinding[_i]))return"initializationBinding."+rs}if(qr.updateBinding!=null&&qr.hasOwnProperty("updateBinding")){if(!Array.isArray(qr.updateBinding))return"updateBinding: array expected";for(_i=0;_i<qr.updateBinding.length;++_i){var rs;if(rs=ns.onnx.StringStringEntryProto.verify(qr.updateBinding[_i]))return"updateBinding."+rs}}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.TrainingInfoProto)return qr;var _i=new ns.onnx.TrainingInfoProto;if(qr.initialization!=null){if(typeof qr.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");_i.initialization=ns.onnx.GraphProto.fromObject(qr.initialization)}if(qr.algorithm!=null){if(typeof qr.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");_i.algorithm=ns.onnx.GraphProto.fromObject(qr.algorithm)}if(qr.initializationBinding){if(!Array.isArray(qr.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");_i.initializationBinding=[];for(var rs=0;rs<qr.initializationBinding.length;++rs){if(typeof qr.initializationBinding[rs]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");_i.initializationBinding[rs]=ns.onnx.StringStringEntryProto.fromObject(qr.initializationBinding[rs])}}if(qr.updateBinding){if(!Array.isArray(qr.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(_i.updateBinding=[],rs=0;rs<qr.updateBinding.length;++rs){if(typeof qr.updateBinding[rs]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");_i.updateBinding[rs]=ns.onnx.StringStringEntryProto.fromObject(qr.updateBinding[rs])}}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.initializationBinding=[],rs.updateBinding=[]),_i.defaults&&(rs.initialization=null,rs.algorithm=null),qr.initialization!=null&&qr.hasOwnProperty("initialization")&&(rs.initialization=ns.onnx.GraphProto.toObject(qr.initialization,_i)),qr.algorithm!=null&&qr.hasOwnProperty("algorithm")&&(rs.algorithm=ns.onnx.GraphProto.toObject(qr.algorithm,_i)),qr.initializationBinding&&qr.initializationBinding.length){rs.initializationBinding=[];for(var is=0;is<qr.initializationBinding.length;++is)rs.initializationBinding[is]=ns.onnx.StringStringEntryProto.toObject(qr.initializationBinding[is],_i)}if(qr.updateBinding&&qr.updateBinding.length)for(rs.updateBinding=[],is=0;is<qr.updateBinding.length;++is)rs.updateBinding[is]=ns.onnx.StringStringEntryProto.toObject(qr.updateBinding[is],_i);return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.TrainingInfoProto"},Xr}(),Wr.ModelProto=function(){function Xr(qr){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.irVersion=es.Long?es.Long.fromBits(0,0,!1):0,Xr.prototype.opsetImport=es.emptyArray,Xr.prototype.producerName="",Xr.prototype.producerVersion="",Xr.prototype.domain="",Xr.prototype.modelVersion=es.Long?es.Long.fromBits(0,0,!1):0,Xr.prototype.docString="",Xr.prototype.graph=null,Xr.prototype.metadataProps=es.emptyArray,Xr.prototype.trainingInfo=es.emptyArray,Xr.prototype.functions=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.irVersion!=null&&Object.hasOwnProperty.call(qr,"irVersion")&&_i.uint32(8).int64(qr.irVersion),qr.producerName!=null&&Object.hasOwnProperty.call(qr,"producerName")&&_i.uint32(18).string(qr.producerName),qr.producerVersion!=null&&Object.hasOwnProperty.call(qr,"producerVersion")&&_i.uint32(26).string(qr.producerVersion),qr.domain!=null&&Object.hasOwnProperty.call(qr,"domain")&&_i.uint32(34).string(qr.domain),qr.modelVersion!=null&&Object.hasOwnProperty.call(qr,"modelVersion")&&_i.uint32(40).int64(qr.modelVersion),qr.docString!=null&&Object.hasOwnProperty.call(qr,"docString")&&_i.uint32(50).string(qr.docString),qr.graph!=null&&Object.hasOwnProperty.call(qr,"graph")&&ns.onnx.GraphProto.encode(qr.graph,_i.uint32(58).fork()).ldelim(),qr.opsetImport!=null&&qr.opsetImport.length)for(var rs=0;rs<qr.opsetImport.length;++rs)ns.onnx.OperatorSetIdProto.encode(qr.opsetImport[rs],_i.uint32(66).fork()).ldelim();if(qr.metadataProps!=null&&qr.metadataProps.length)for(rs=0;rs<qr.metadataProps.length;++rs)ns.onnx.StringStringEntryProto.encode(qr.metadataProps[rs],_i.uint32(114).fork()).ldelim();if(qr.trainingInfo!=null&&qr.trainingInfo.length)for(rs=0;rs<qr.trainingInfo.length;++rs)ns.onnx.TrainingInfoProto.encode(qr.trainingInfo[rs],_i.uint32(162).fork()).ldelim();if(qr.functions!=null&&qr.functions.length)for(rs=0;rs<qr.functions.length;++rs)ns.onnx.FunctionProto.encode(qr.functions[rs],_i.uint32(202).fork()).ldelim();return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.ModelProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.irVersion=qr.int64();break;case 8:is.opsetImport&&is.opsetImport.length||(is.opsetImport=[]),is.opsetImport.push(ns.onnx.OperatorSetIdProto.decode(qr,qr.uint32()));break;case 2:is.producerName=qr.string();break;case 3:is.producerVersion=qr.string();break;case 4:is.domain=qr.string();break;case 5:is.modelVersion=qr.int64();break;case 6:is.docString=qr.string();break;case 7:is.graph=ns.onnx.GraphProto.decode(qr,qr.uint32());break;case 14:is.metadataProps&&is.metadataProps.length||(is.metadataProps=[]),is.metadataProps.push(ns.onnx.StringStringEntryProto.decode(qr,qr.uint32()));break;case 20:is.trainingInfo&&is.trainingInfo.length||(is.trainingInfo=[]),is.trainingInfo.push(ns.onnx.TrainingInfoProto.decode(qr,qr.uint32()));break;case 25:is.functions&&is.functions.length||(is.functions=[]),is.functions.push(ns.onnx.FunctionProto.decode(qr,qr.uint32()));break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.irVersion!=null&&qr.hasOwnProperty("irVersion")&&!(es.isInteger(qr.irVersion)||qr.irVersion&&es.isInteger(qr.irVersion.low)&&es.isInteger(qr.irVersion.high)))return"irVersion: integer|Long expected";if(qr.opsetImport!=null&&qr.hasOwnProperty("opsetImport")){if(!Array.isArray(qr.opsetImport))return"opsetImport: array expected";for(var _i=0;_i<qr.opsetImport.length;++_i)if(rs=ns.onnx.OperatorSetIdProto.verify(qr.opsetImport[_i]))return"opsetImport."+rs}if(qr.producerName!=null&&qr.hasOwnProperty("producerName")&&!es.isString(qr.producerName))return"producerName: string expected";if(qr.producerVersion!=null&&qr.hasOwnProperty("producerVersion")&&!es.isString(qr.producerVersion))return"producerVersion: string expected";if(qr.domain!=null&&qr.hasOwnProperty("domain")&&!es.isString(qr.domain))return"domain: string expected";if(qr.modelVersion!=null&&qr.hasOwnProperty("modelVersion")&&!(es.isInteger(qr.modelVersion)||qr.modelVersion&&es.isInteger(qr.modelVersion.low)&&es.isInteger(qr.modelVersion.high)))return"modelVersion: integer|Long expected";if(qr.docString!=null&&qr.hasOwnProperty("docString")&&!es.isString(qr.docString))return"docString: string expected";if(qr.graph!=null&&qr.hasOwnProperty("graph")&&(rs=ns.onnx.GraphProto.verify(qr.graph)))return"graph."+rs;if(qr.metadataProps!=null&&qr.hasOwnProperty("metadataProps")){if(!Array.isArray(qr.metadataProps))return"metadataProps: array expected";for(_i=0;_i<qr.metadataProps.length;++_i)if(rs=ns.onnx.StringStringEntryProto.verify(qr.metadataProps[_i]))return"metadataProps."+rs}if(qr.trainingInfo!=null&&qr.hasOwnProperty("trainingInfo")){if(!Array.isArray(qr.trainingInfo))return"trainingInfo: array expected";for(_i=0;_i<qr.trainingInfo.length;++_i)if(rs=ns.onnx.TrainingInfoProto.verify(qr.trainingInfo[_i]))return"trainingInfo."+rs}if(qr.functions!=null&&qr.hasOwnProperty("functions")){if(!Array.isArray(qr.functions))return"functions: array expected";for(_i=0;_i<qr.functions.length;++_i){var rs;if(rs=ns.onnx.FunctionProto.verify(qr.functions[_i]))return"functions."+rs}}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.ModelProto)return qr;var _i=new ns.onnx.ModelProto;if(qr.irVersion!=null&&(es.Long?(_i.irVersion=es.Long.fromValue(qr.irVersion)).unsigned=!1:typeof qr.irVersion=="string"?_i.irVersion=parseInt(qr.irVersion,10):typeof qr.irVersion=="number"?_i.irVersion=qr.irVersion:typeof qr.irVersion=="object"&&(_i.irVersion=new es.LongBits(qr.irVersion.low>>>0,qr.irVersion.high>>>0).toNumber())),qr.opsetImport){if(!Array.isArray(qr.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");_i.opsetImport=[];for(var rs=0;rs<qr.opsetImport.length;++rs){if(typeof qr.opsetImport[rs]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");_i.opsetImport[rs]=ns.onnx.OperatorSetIdProto.fromObject(qr.opsetImport[rs])}}if(qr.producerName!=null&&(_i.producerName=String(qr.producerName)),qr.producerVersion!=null&&(_i.producerVersion=String(qr.producerVersion)),qr.domain!=null&&(_i.domain=String(qr.domain)),qr.modelVersion!=null&&(es.Long?(_i.modelVersion=es.Long.fromValue(qr.modelVersion)).unsigned=!1:typeof qr.modelVersion=="string"?_i.modelVersion=parseInt(qr.modelVersion,10):typeof qr.modelVersion=="number"?_i.modelVersion=qr.modelVersion:typeof qr.modelVersion=="object"&&(_i.modelVersion=new es.LongBits(qr.modelVersion.low>>>0,qr.modelVersion.high>>>0).toNumber())),qr.docString!=null&&(_i.docString=String(qr.docString)),qr.graph!=null){if(typeof qr.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");_i.graph=ns.onnx.GraphProto.fromObject(qr.graph)}if(qr.metadataProps){if(!Array.isArray(qr.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(_i.metadataProps=[],rs=0;rs<qr.metadataProps.length;++rs){if(typeof qr.metadataProps[rs]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");_i.metadataProps[rs]=ns.onnx.StringStringEntryProto.fromObject(qr.metadataProps[rs])}}if(qr.trainingInfo){if(!Array.isArray(qr.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(_i.trainingInfo=[],rs=0;rs<qr.trainingInfo.length;++rs){if(typeof qr.trainingInfo[rs]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");_i.trainingInfo[rs]=ns.onnx.TrainingInfoProto.fromObject(qr.trainingInfo[rs])}}if(qr.functions){if(!Array.isArray(qr.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(_i.functions=[],rs=0;rs<qr.functions.length;++rs){if(typeof qr.functions[rs]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");_i.functions[rs]=ns.onnx.FunctionProto.fromObject(qr.functions[rs])}}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.opsetImport=[],rs.metadataProps=[],rs.trainingInfo=[],rs.functions=[]),_i.defaults){if(es.Long){var is=new es.Long(0,0,!1);rs.irVersion=_i.longs===String?is.toString():_i.longs===Number?is.toNumber():is}else rs.irVersion=_i.longs===String?"0":0;rs.producerName="",rs.producerVersion="",rs.domain="",es.Long?(is=new es.Long(0,0,!1),rs.modelVersion=_i.longs===String?is.toString():_i.longs===Number?is.toNumber():is):rs.modelVersion=_i.longs===String?"0":0,rs.docString="",rs.graph=null}if(qr.irVersion!=null&&qr.hasOwnProperty("irVersion")&&(typeof qr.irVersion=="number"?rs.irVersion=_i.longs===String?String(qr.irVersion):qr.irVersion:rs.irVersion=_i.longs===String?es.Long.prototype.toString.call(qr.irVersion):_i.longs===Number?new es.LongBits(qr.irVersion.low>>>0,qr.irVersion.high>>>0).toNumber():qr.irVersion),qr.producerName!=null&&qr.hasOwnProperty("producerName")&&(rs.producerName=qr.producerName),qr.producerVersion!=null&&qr.hasOwnProperty("producerVersion")&&(rs.producerVersion=qr.producerVersion),qr.domain!=null&&qr.hasOwnProperty("domain")&&(rs.domain=qr.domain),qr.modelVersion!=null&&qr.hasOwnProperty("modelVersion")&&(typeof qr.modelVersion=="number"?rs.modelVersion=_i.longs===String?String(qr.modelVersion):qr.modelVersion:rs.modelVersion=_i.longs===String?es.Long.prototype.toString.call(qr.modelVersion):_i.longs===Number?new es.LongBits(qr.modelVersion.low>>>0,qr.modelVersion.high>>>0).toNumber():qr.modelVersion),qr.docString!=null&&qr.hasOwnProperty("docString")&&(rs.docString=qr.docString),qr.graph!=null&&qr.hasOwnProperty("graph")&&(rs.graph=ns.onnx.GraphProto.toObject(qr.graph,_i)),qr.opsetImport&&qr.opsetImport.length){rs.opsetImport=[];for(var ss=0;ss<qr.opsetImport.length;++ss)rs.opsetImport[ss]=ns.onnx.OperatorSetIdProto.toObject(qr.opsetImport[ss],_i)}if(qr.metadataProps&&qr.metadataProps.length)for(rs.metadataProps=[],ss=0;ss<qr.metadataProps.length;++ss)rs.metadataProps[ss]=ns.onnx.StringStringEntryProto.toObject(qr.metadataProps[ss],_i);if(qr.trainingInfo&&qr.trainingInfo.length)for(rs.trainingInfo=[],ss=0;ss<qr.trainingInfo.length;++ss)rs.trainingInfo[ss]=ns.onnx.TrainingInfoProto.toObject(qr.trainingInfo[ss],_i);if(qr.functions&&qr.functions.length)for(rs.functions=[],ss=0;ss<qr.functions.length;++ss)rs.functions[ss]=ns.onnx.FunctionProto.toObject(qr.functions[ss],_i);return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.ModelProto"},Xr}(),Wr.StringStringEntryProto=function(){function Xr(qr){if(qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.key="",Xr.prototype.value="",Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){return _i||(_i=ts.create()),qr.key!=null&&Object.hasOwnProperty.call(qr,"key")&&_i.uint32(10).string(qr.key),qr.value!=null&&Object.hasOwnProperty.call(qr,"value")&&_i.uint32(18).string(qr.value),_i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.StringStringEntryProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.key=qr.string();break;case 2:is.value=qr.string();break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){return typeof qr!="object"||qr===null?"object expected":qr.key!=null&&qr.hasOwnProperty("key")&&!es.isString(qr.key)?"key: string expected":qr.value!=null&&qr.hasOwnProperty("value")&&!es.isString(qr.value)?"value: string expected":null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.StringStringEntryProto)return qr;var _i=new ns.onnx.StringStringEntryProto;return qr.key!=null&&(_i.key=String(qr.key)),qr.value!=null&&(_i.value=String(qr.value)),_i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};return _i.defaults&&(rs.key="",rs.value=""),qr.key!=null&&qr.hasOwnProperty("key")&&(rs.key=qr.key),qr.value!=null&&qr.hasOwnProperty("value")&&(rs.value=qr.value),rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.StringStringEntryProto"},Xr}(),Wr.TensorAnnotation=function(){function Xr(qr){if(this.quantParameterTensorNames=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.tensorName="",Xr.prototype.quantParameterTensorNames=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.tensorName!=null&&Object.hasOwnProperty.call(qr,"tensorName")&&_i.uint32(10).string(qr.tensorName),qr.quantParameterTensorNames!=null&&qr.quantParameterTensorNames.length)for(var rs=0;rs<qr.quantParameterTensorNames.length;++rs)ns.onnx.StringStringEntryProto.encode(qr.quantParameterTensorNames[rs],_i.uint32(18).fork()).ldelim();return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.TensorAnnotation;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.tensorName=qr.string();break;case 2:is.quantParameterTensorNames&&is.quantParameterTensorNames.length||(is.quantParameterTensorNames=[]),is.quantParameterTensorNames.push(ns.onnx.StringStringEntryProto.decode(qr,qr.uint32()));break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.tensorName!=null&&qr.hasOwnProperty("tensorName")&&!es.isString(qr.tensorName))return"tensorName: string expected";if(qr.quantParameterTensorNames!=null&&qr.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(qr.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var _i=0;_i<qr.quantParameterTensorNames.length;++_i){var rs=ns.onnx.StringStringEntryProto.verify(qr.quantParameterTensorNames[_i]);if(rs)return"quantParameterTensorNames."+rs}}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.TensorAnnotation)return qr;var _i=new ns.onnx.TensorAnnotation;if(qr.tensorName!=null&&(_i.tensorName=String(qr.tensorName)),qr.quantParameterTensorNames){if(!Array.isArray(qr.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");_i.quantParameterTensorNames=[];for(var rs=0;rs<qr.quantParameterTensorNames.length;++rs){if(typeof qr.quantParameterTensorNames[rs]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");_i.quantParameterTensorNames[rs]=ns.onnx.StringStringEntryProto.fromObject(qr.quantParameterTensorNames[rs])}}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.quantParameterTensorNames=[]),_i.defaults&&(rs.tensorName=""),qr.tensorName!=null&&qr.hasOwnProperty("tensorName")&&(rs.tensorName=qr.tensorName),qr.quantParameterTensorNames&&qr.quantParameterTensorNames.length){rs.quantParameterTensorNames=[];for(var is=0;is<qr.quantParameterTensorNames.length;++is)rs.quantParameterTensorNames[is]=ns.onnx.StringStringEntryProto.toObject(qr.quantParameterTensorNames[is],_i)}return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.TensorAnnotation"},Xr}(),Wr.GraphProto=function(){function Xr(qr){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.node=es.emptyArray,Xr.prototype.name="",Xr.prototype.initializer=es.emptyArray,Xr.prototype.sparseInitializer=es.emptyArray,Xr.prototype.docString="",Xr.prototype.input=es.emptyArray,Xr.prototype.output=es.emptyArray,Xr.prototype.valueInfo=es.emptyArray,Xr.prototype.quantizationAnnotation=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.node!=null&&qr.node.length)for(var rs=0;rs<qr.node.length;++rs)ns.onnx.NodeProto.encode(qr.node[rs],_i.uint32(10).fork()).ldelim();if(qr.name!=null&&Object.hasOwnProperty.call(qr,"name")&&_i.uint32(18).string(qr.name),qr.initializer!=null&&qr.initializer.length)for(rs=0;rs<qr.initializer.length;++rs)ns.onnx.TensorProto.encode(qr.initializer[rs],_i.uint32(42).fork()).ldelim();if(qr.docString!=null&&Object.hasOwnProperty.call(qr,"docString")&&_i.uint32(82).string(qr.docString),qr.input!=null&&qr.input.length)for(rs=0;rs<qr.input.length;++rs)ns.onnx.ValueInfoProto.encode(qr.input[rs],_i.uint32(90).fork()).ldelim();if(qr.output!=null&&qr.output.length)for(rs=0;rs<qr.output.length;++rs)ns.onnx.ValueInfoProto.encode(qr.output[rs],_i.uint32(98).fork()).ldelim();if(qr.valueInfo!=null&&qr.valueInfo.length)for(rs=0;rs<qr.valueInfo.length;++rs)ns.onnx.ValueInfoProto.encode(qr.valueInfo[rs],_i.uint32(106).fork()).ldelim();if(qr.quantizationAnnotation!=null&&qr.quantizationAnnotation.length)for(rs=0;rs<qr.quantizationAnnotation.length;++rs)ns.onnx.TensorAnnotation.encode(qr.quantizationAnnotation[rs],_i.uint32(114).fork()).ldelim();if(qr.sparseInitializer!=null&&qr.sparseInitializer.length)for(rs=0;rs<qr.sparseInitializer.length;++rs)ns.onnx.SparseTensorProto.encode(qr.sparseInitializer[rs],_i.uint32(122).fork()).ldelim();return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.GraphProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.node&&is.node.length||(is.node=[]),is.node.push(ns.onnx.NodeProto.decode(qr,qr.uint32()));break;case 2:is.name=qr.string();break;case 5:is.initializer&&is.initializer.length||(is.initializer=[]),is.initializer.push(ns.onnx.TensorProto.decode(qr,qr.uint32()));break;case 15:is.sparseInitializer&&is.sparseInitializer.length||(is.sparseInitializer=[]),is.sparseInitializer.push(ns.onnx.SparseTensorProto.decode(qr,qr.uint32()));break;case 10:is.docString=qr.string();break;case 11:is.input&&is.input.length||(is.input=[]),is.input.push(ns.onnx.ValueInfoProto.decode(qr,qr.uint32()));break;case 12:is.output&&is.output.length||(is.output=[]),is.output.push(ns.onnx.ValueInfoProto.decode(qr,qr.uint32()));break;case 13:is.valueInfo&&is.valueInfo.length||(is.valueInfo=[]),is.valueInfo.push(ns.onnx.ValueInfoProto.decode(qr,qr.uint32()));break;case 14:is.quantizationAnnotation&&is.quantizationAnnotation.length||(is.quantizationAnnotation=[]),is.quantizationAnnotation.push(ns.onnx.TensorAnnotation.decode(qr,qr.uint32()));break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.node!=null&&qr.hasOwnProperty("node")){if(!Array.isArray(qr.node))return"node: array expected";for(var _i=0;_i<qr.node.length;++_i)if(rs=ns.onnx.NodeProto.verify(qr.node[_i]))return"node."+rs}if(qr.name!=null&&qr.hasOwnProperty("name")&&!es.isString(qr.name))return"name: string expected";if(qr.initializer!=null&&qr.hasOwnProperty("initializer")){if(!Array.isArray(qr.initializer))return"initializer: array expected";for(_i=0;_i<qr.initializer.length;++_i)if(rs=ns.onnx.TensorProto.verify(qr.initializer[_i]))return"initializer."+rs}if(qr.sparseInitializer!=null&&qr.hasOwnProperty("sparseInitializer")){if(!Array.isArray(qr.sparseInitializer))return"sparseInitializer: array expected";for(_i=0;_i<qr.sparseInitializer.length;++_i)if(rs=ns.onnx.SparseTensorProto.verify(qr.sparseInitializer[_i]))return"sparseInitializer."+rs}if(qr.docString!=null&&qr.hasOwnProperty("docString")&&!es.isString(qr.docString))return"docString: string expected";if(qr.input!=null&&qr.hasOwnProperty("input")){if(!Array.isArray(qr.input))return"input: array expected";for(_i=0;_i<qr.input.length;++_i)if(rs=ns.onnx.ValueInfoProto.verify(qr.input[_i]))return"input."+rs}if(qr.output!=null&&qr.hasOwnProperty("output")){if(!Array.isArray(qr.output))return"output: array expected";for(_i=0;_i<qr.output.length;++_i)if(rs=ns.onnx.ValueInfoProto.verify(qr.output[_i]))return"output."+rs}if(qr.valueInfo!=null&&qr.hasOwnProperty("valueInfo")){if(!Array.isArray(qr.valueInfo))return"valueInfo: array expected";for(_i=0;_i<qr.valueInfo.length;++_i)if(rs=ns.onnx.ValueInfoProto.verify(qr.valueInfo[_i]))return"valueInfo."+rs}if(qr.quantizationAnnotation!=null&&qr.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(qr.quantizationAnnotation))return"quantizationAnnotation: array expected";for(_i=0;_i<qr.quantizationAnnotation.length;++_i){var rs;if(rs=ns.onnx.TensorAnnotation.verify(qr.quantizationAnnotation[_i]))return"quantizationAnnotation."+rs}}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.GraphProto)return qr;var _i=new ns.onnx.GraphProto;if(qr.node){if(!Array.isArray(qr.node))throw TypeError(".onnx.GraphProto.node: array expected");_i.node=[];for(var rs=0;rs<qr.node.length;++rs){if(typeof qr.node[rs]!="object")throw TypeError(".onnx.GraphProto.node: object expected");_i.node[rs]=ns.onnx.NodeProto.fromObject(qr.node[rs])}}if(qr.name!=null&&(_i.name=String(qr.name)),qr.initializer){if(!Array.isArray(qr.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(_i.initializer=[],rs=0;rs<qr.initializer.length;++rs){if(typeof qr.initializer[rs]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");_i.initializer[rs]=ns.onnx.TensorProto.fromObject(qr.initializer[rs])}}if(qr.sparseInitializer){if(!Array.isArray(qr.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(_i.sparseInitializer=[],rs=0;rs<qr.sparseInitializer.length;++rs){if(typeof qr.sparseInitializer[rs]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");_i.sparseInitializer[rs]=ns.onnx.SparseTensorProto.fromObject(qr.sparseInitializer[rs])}}if(qr.docString!=null&&(_i.docString=String(qr.docString)),qr.input){if(!Array.isArray(qr.input))throw TypeError(".onnx.GraphProto.input: array expected");for(_i.input=[],rs=0;rs<qr.input.length;++rs){if(typeof qr.input[rs]!="object")throw TypeError(".onnx.GraphProto.input: object expected");_i.input[rs]=ns.onnx.ValueInfoProto.fromObject(qr.input[rs])}}if(qr.output){if(!Array.isArray(qr.output))throw TypeError(".onnx.GraphProto.output: array expected");for(_i.output=[],rs=0;rs<qr.output.length;++rs){if(typeof qr.output[rs]!="object")throw TypeError(".onnx.GraphProto.output: object expected");_i.output[rs]=ns.onnx.ValueInfoProto.fromObject(qr.output[rs])}}if(qr.valueInfo){if(!Array.isArray(qr.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(_i.valueInfo=[],rs=0;rs<qr.valueInfo.length;++rs){if(typeof qr.valueInfo[rs]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");_i.valueInfo[rs]=ns.onnx.ValueInfoProto.fromObject(qr.valueInfo[rs])}}if(qr.quantizationAnnotation){if(!Array.isArray(qr.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(_i.quantizationAnnotation=[],rs=0;rs<qr.quantizationAnnotation.length;++rs){if(typeof qr.quantizationAnnotation[rs]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");_i.quantizationAnnotation[rs]=ns.onnx.TensorAnnotation.fromObject(qr.quantizationAnnotation[rs])}}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.node=[],rs.initializer=[],rs.input=[],rs.output=[],rs.valueInfo=[],rs.quantizationAnnotation=[],rs.sparseInitializer=[]),_i.defaults&&(rs.name="",rs.docString=""),qr.node&&qr.node.length){rs.node=[];for(var is=0;is<qr.node.length;++is)rs.node[is]=ns.onnx.NodeProto.toObject(qr.node[is],_i)}if(qr.name!=null&&qr.hasOwnProperty("name")&&(rs.name=qr.name),qr.initializer&&qr.initializer.length)for(rs.initializer=[],is=0;is<qr.initializer.length;++is)rs.initializer[is]=ns.onnx.TensorProto.toObject(qr.initializer[is],_i);if(qr.docString!=null&&qr.hasOwnProperty("docString")&&(rs.docString=qr.docString),qr.input&&qr.input.length)for(rs.input=[],is=0;is<qr.input.length;++is)rs.input[is]=ns.onnx.ValueInfoProto.toObject(qr.input[is],_i);if(qr.output&&qr.output.length)for(rs.output=[],is=0;is<qr.output.length;++is)rs.output[is]=ns.onnx.ValueInfoProto.toObject(qr.output[is],_i);if(qr.valueInfo&&qr.valueInfo.length)for(rs.valueInfo=[],is=0;is<qr.valueInfo.length;++is)rs.valueInfo[is]=ns.onnx.ValueInfoProto.toObject(qr.valueInfo[is],_i);if(qr.quantizationAnnotation&&qr.quantizationAnnotation.length)for(rs.quantizationAnnotation=[],is=0;is<qr.quantizationAnnotation.length;++is)rs.quantizationAnnotation[is]=ns.onnx.TensorAnnotation.toObject(qr.quantizationAnnotation[is],_i);if(qr.sparseInitializer&&qr.sparseInitializer.length)for(rs.sparseInitializer=[],is=0;is<qr.sparseInitializer.length;++is)rs.sparseInitializer[is]=ns.onnx.SparseTensorProto.toObject(qr.sparseInitializer[is],_i);return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.GraphProto"},Xr}(),Wr.TensorProto=function(){function Xr(qr){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.dims=es.emptyArray,Xr.prototype.dataType=0,Xr.prototype.segment=null,Xr.prototype.floatData=es.emptyArray,Xr.prototype.int32Data=es.emptyArray,Xr.prototype.stringData=es.emptyArray,Xr.prototype.int64Data=es.emptyArray,Xr.prototype.name="",Xr.prototype.docString="",Xr.prototype.rawData=es.newBuffer([]),Xr.prototype.externalData=es.emptyArray,Xr.prototype.dataLocation=0,Xr.prototype.doubleData=es.emptyArray,Xr.prototype.uint64Data=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.dims!=null&&qr.dims.length){_i.uint32(10).fork();for(var rs=0;rs<qr.dims.length;++rs)_i.int64(qr.dims[rs]);_i.ldelim()}if(qr.dataType!=null&&Object.hasOwnProperty.call(qr,"dataType")&&_i.uint32(16).int32(qr.dataType),qr.segment!=null&&Object.hasOwnProperty.call(qr,"segment")&&ns.onnx.TensorProto.Segment.encode(qr.segment,_i.uint32(26).fork()).ldelim(),qr.floatData!=null&&qr.floatData.length){for(_i.uint32(34).fork(),rs=0;rs<qr.floatData.length;++rs)_i.float(qr.floatData[rs]);_i.ldelim()}if(qr.int32Data!=null&&qr.int32Data.length){for(_i.uint32(42).fork(),rs=0;rs<qr.int32Data.length;++rs)_i.int32(qr.int32Data[rs]);_i.ldelim()}if(qr.stringData!=null&&qr.stringData.length)for(rs=0;rs<qr.stringData.length;++rs)_i.uint32(50).bytes(qr.stringData[rs]);if(qr.int64Data!=null&&qr.int64Data.length){for(_i.uint32(58).fork(),rs=0;rs<qr.int64Data.length;++rs)_i.int64(qr.int64Data[rs]);_i.ldelim()}if(qr.name!=null&&Object.hasOwnProperty.call(qr,"name")&&_i.uint32(66).string(qr.name),qr.rawData!=null&&Object.hasOwnProperty.call(qr,"rawData")&&_i.uint32(74).bytes(qr.rawData),qr.doubleData!=null&&qr.doubleData.length){for(_i.uint32(82).fork(),rs=0;rs<qr.doubleData.length;++rs)_i.double(qr.doubleData[rs]);_i.ldelim()}if(qr.uint64Data!=null&&qr.uint64Data.length){for(_i.uint32(90).fork(),rs=0;rs<qr.uint64Data.length;++rs)_i.uint64(qr.uint64Data[rs]);_i.ldelim()}if(qr.docString!=null&&Object.hasOwnProperty.call(qr,"docString")&&_i.uint32(98).string(qr.docString),qr.externalData!=null&&qr.externalData.length)for(rs=0;rs<qr.externalData.length;++rs)ns.onnx.StringStringEntryProto.encode(qr.externalData[rs],_i.uint32(106).fork()).ldelim();return qr.dataLocation!=null&&Object.hasOwnProperty.call(qr,"dataLocation")&&_i.uint32(112).int32(qr.dataLocation),_i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.TensorProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:if(is.dims&&is.dims.length||(is.dims=[]),(7&ss)==2)for(var os=qr.uint32()+qr.pos;qr.pos<os;)is.dims.push(qr.int64());else is.dims.push(qr.int64());break;case 2:is.dataType=qr.int32();break;case 3:is.segment=ns.onnx.TensorProto.Segment.decode(qr,qr.uint32());break;case 4:if(is.floatData&&is.floatData.length||(is.floatData=[]),(7&ss)==2)for(os=qr.uint32()+qr.pos;qr.pos<os;)is.floatData.push(qr.float());else is.floatData.push(qr.float());break;case 5:if(is.int32Data&&is.int32Data.length||(is.int32Data=[]),(7&ss)==2)for(os=qr.uint32()+qr.pos;qr.pos<os;)is.int32Data.push(qr.int32());else is.int32Data.push(qr.int32());break;case 6:is.stringData&&is.stringData.length||(is.stringData=[]),is.stringData.push(qr.bytes());break;case 7:if(is.int64Data&&is.int64Data.length||(is.int64Data=[]),(7&ss)==2)for(os=qr.uint32()+qr.pos;qr.pos<os;)is.int64Data.push(qr.int64());else is.int64Data.push(qr.int64());break;case 8:is.name=qr.string();break;case 12:is.docString=qr.string();break;case 9:is.rawData=qr.bytes();break;case 13:is.externalData&&is.externalData.length||(is.externalData=[]),is.externalData.push(ns.onnx.StringStringEntryProto.decode(qr,qr.uint32()));break;case 14:is.dataLocation=qr.int32();break;case 10:if(is.doubleData&&is.doubleData.length||(is.doubleData=[]),(7&ss)==2)for(os=qr.uint32()+qr.pos;qr.pos<os;)is.doubleData.push(qr.double());else is.doubleData.push(qr.double());break;case 11:if(is.uint64Data&&is.uint64Data.length||(is.uint64Data=[]),(7&ss)==2)for(os=qr.uint32()+qr.pos;qr.pos<os;)is.uint64Data.push(qr.uint64());else is.uint64Data.push(qr.uint64());break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.dims!=null&&qr.hasOwnProperty("dims")){if(!Array.isArray(qr.dims))return"dims: array expected";for(var _i=0;_i<qr.dims.length;++_i)if(!(es.isInteger(qr.dims[_i])||qr.dims[_i]&&es.isInteger(qr.dims[_i].low)&&es.isInteger(qr.dims[_i].high)))return"dims: integer|Long[] expected"}if(qr.dataType!=null&&qr.hasOwnProperty("dataType")&&!es.isInteger(qr.dataType))return"dataType: integer expected";if(qr.segment!=null&&qr.hasOwnProperty("segment")&&(rs=ns.onnx.TensorProto.Segment.verify(qr.segment)))return"segment."+rs;if(qr.floatData!=null&&qr.hasOwnProperty("floatData")){if(!Array.isArray(qr.floatData))return"floatData: array expected";for(_i=0;_i<qr.floatData.length;++_i)if(typeof qr.floatData[_i]!="number")return"floatData: number[] expected"}if(qr.int32Data!=null&&qr.hasOwnProperty("int32Data")){if(!Array.isArray(qr.int32Data))return"int32Data: array expected";for(_i=0;_i<qr.int32Data.length;++_i)if(!es.isInteger(qr.int32Data[_i]))return"int32Data: integer[] expected"}if(qr.stringData!=null&&qr.hasOwnProperty("stringData")){if(!Array.isArray(qr.stringData))return"stringData: array expected";for(_i=0;_i<qr.stringData.length;++_i)if(!(qr.stringData[_i]&&typeof qr.stringData[_i].length=="number"||es.isString(qr.stringData[_i])))return"stringData: buffer[] expected"}if(qr.int64Data!=null&&qr.hasOwnProperty("int64Data")){if(!Array.isArray(qr.int64Data))return"int64Data: array expected";for(_i=0;_i<qr.int64Data.length;++_i)if(!(es.isInteger(qr.int64Data[_i])||qr.int64Data[_i]&&es.isInteger(qr.int64Data[_i].low)&&es.isInteger(qr.int64Data[_i].high)))return"int64Data: integer|Long[] expected"}if(qr.name!=null&&qr.hasOwnProperty("name")&&!es.isString(qr.name))return"name: string expected";if(qr.docString!=null&&qr.hasOwnProperty("docString")&&!es.isString(qr.docString))return"docString: string expected";if(qr.rawData!=null&&qr.hasOwnProperty("rawData")&&!(qr.rawData&&typeof qr.rawData.length=="number"||es.isString(qr.rawData)))return"rawData: buffer expected";if(qr.externalData!=null&&qr.hasOwnProperty("externalData")){if(!Array.isArray(qr.externalData))return"externalData: array expected";for(_i=0;_i<qr.externalData.length;++_i){var rs;if(rs=ns.onnx.StringStringEntryProto.verify(qr.externalData[_i]))return"externalData."+rs}}if(qr.dataLocation!=null&&qr.hasOwnProperty("dataLocation"))switch(qr.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(qr.doubleData!=null&&qr.hasOwnProperty("doubleData")){if(!Array.isArray(qr.doubleData))return"doubleData: array expected";for(_i=0;_i<qr.doubleData.length;++_i)if(typeof qr.doubleData[_i]!="number")return"doubleData: number[] expected"}if(qr.uint64Data!=null&&qr.hasOwnProperty("uint64Data")){if(!Array.isArray(qr.uint64Data))return"uint64Data: array expected";for(_i=0;_i<qr.uint64Data.length;++_i)if(!(es.isInteger(qr.uint64Data[_i])||qr.uint64Data[_i]&&es.isInteger(qr.uint64Data[_i].low)&&es.isInteger(qr.uint64Data[_i].high)))return"uint64Data: integer|Long[] expected"}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.TensorProto)return qr;var _i=new ns.onnx.TensorProto;if(qr.dims){if(!Array.isArray(qr.dims))throw TypeError(".onnx.TensorProto.dims: array expected");_i.dims=[];for(var rs=0;rs<qr.dims.length;++rs)es.Long?(_i.dims[rs]=es.Long.fromValue(qr.dims[rs])).unsigned=!1:typeof qr.dims[rs]=="string"?_i.dims[rs]=parseInt(qr.dims[rs],10):typeof qr.dims[rs]=="number"?_i.dims[rs]=qr.dims[rs]:typeof qr.dims[rs]=="object"&&(_i.dims[rs]=new es.LongBits(qr.dims[rs].low>>>0,qr.dims[rs].high>>>0).toNumber())}if(qr.dataType!=null&&(_i.dataType=0|qr.dataType),qr.segment!=null){if(typeof qr.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");_i.segment=ns.onnx.TensorProto.Segment.fromObject(qr.segment)}if(qr.floatData){if(!Array.isArray(qr.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(_i.floatData=[],rs=0;rs<qr.floatData.length;++rs)_i.floatData[rs]=Number(qr.floatData[rs])}if(qr.int32Data){if(!Array.isArray(qr.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(_i.int32Data=[],rs=0;rs<qr.int32Data.length;++rs)_i.int32Data[rs]=0|qr.int32Data[rs]}if(qr.stringData){if(!Array.isArray(qr.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(_i.stringData=[],rs=0;rs<qr.stringData.length;++rs)typeof qr.stringData[rs]=="string"?es.base64.decode(qr.stringData[rs],_i.stringData[rs]=es.newBuffer(es.base64.length(qr.stringData[rs])),0):qr.stringData[rs].length>=0&&(_i.stringData[rs]=qr.stringData[rs])}if(qr.int64Data){if(!Array.isArray(qr.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(_i.int64Data=[],rs=0;rs<qr.int64Data.length;++rs)es.Long?(_i.int64Data[rs]=es.Long.fromValue(qr.int64Data[rs])).unsigned=!1:typeof qr.int64Data[rs]=="string"?_i.int64Data[rs]=parseInt(qr.int64Data[rs],10):typeof qr.int64Data[rs]=="number"?_i.int64Data[rs]=qr.int64Data[rs]:typeof qr.int64Data[rs]=="object"&&(_i.int64Data[rs]=new es.LongBits(qr.int64Data[rs].low>>>0,qr.int64Data[rs].high>>>0).toNumber())}if(qr.name!=null&&(_i.name=String(qr.name)),qr.docString!=null&&(_i.docString=String(qr.docString)),qr.rawData!=null&&(typeof qr.rawData=="string"?es.base64.decode(qr.rawData,_i.rawData=es.newBuffer(es.base64.length(qr.rawData)),0):qr.rawData.length>=0&&(_i.rawData=qr.rawData)),qr.externalData){if(!Array.isArray(qr.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(_i.externalData=[],rs=0;rs<qr.externalData.length;++rs){if(typeof qr.externalData[rs]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");_i.externalData[rs]=ns.onnx.StringStringEntryProto.fromObject(qr.externalData[rs])}}switch(qr.dataLocation){default:if(typeof qr.dataLocation=="number"){_i.dataLocation=qr.dataLocation;break}break;case"DEFAULT":case 0:_i.dataLocation=0;break;case"EXTERNAL":case 1:_i.dataLocation=1}if(qr.doubleData){if(!Array.isArray(qr.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(_i.doubleData=[],rs=0;rs<qr.doubleData.length;++rs)_i.doubleData[rs]=Number(qr.doubleData[rs])}if(qr.uint64Data){if(!Array.isArray(qr.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(_i.uint64Data=[],rs=0;rs<qr.uint64Data.length;++rs)es.Long?(_i.uint64Data[rs]=es.Long.fromValue(qr.uint64Data[rs])).unsigned=!0:typeof qr.uint64Data[rs]=="string"?_i.uint64Data[rs]=parseInt(qr.uint64Data[rs],10):typeof qr.uint64Data[rs]=="number"?_i.uint64Data[rs]=qr.uint64Data[rs]:typeof qr.uint64Data[rs]=="object"&&(_i.uint64Data[rs]=new es.LongBits(qr.uint64Data[rs].low>>>0,qr.uint64Data[rs].high>>>0).toNumber(!0))}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.dims=[],rs.floatData=[],rs.int32Data=[],rs.stringData=[],rs.int64Data=[],rs.doubleData=[],rs.uint64Data=[],rs.externalData=[]),_i.defaults&&(rs.dataType=0,rs.segment=null,rs.name="",_i.bytes===String?rs.rawData="":(rs.rawData=[],_i.bytes!==Array&&(rs.rawData=es.newBuffer(rs.rawData))),rs.docString="",rs.dataLocation=_i.enums===String?"DEFAULT":0),qr.dims&&qr.dims.length){rs.dims=[];for(var is=0;is<qr.dims.length;++is)typeof qr.dims[is]=="number"?rs.dims[is]=_i.longs===String?String(qr.dims[is]):qr.dims[is]:rs.dims[is]=_i.longs===String?es.Long.prototype.toString.call(qr.dims[is]):_i.longs===Number?new es.LongBits(qr.dims[is].low>>>0,qr.dims[is].high>>>0).toNumber():qr.dims[is]}if(qr.dataType!=null&&qr.hasOwnProperty("dataType")&&(rs.dataType=qr.dataType),qr.segment!=null&&qr.hasOwnProperty("segment")&&(rs.segment=ns.onnx.TensorProto.Segment.toObject(qr.segment,_i)),qr.floatData&&qr.floatData.length)for(rs.floatData=[],is=0;is<qr.floatData.length;++is)rs.floatData[is]=_i.json&&!isFinite(qr.floatData[is])?String(qr.floatData[is]):qr.floatData[is];if(qr.int32Data&&qr.int32Data.length)for(rs.int32Data=[],is=0;is<qr.int32Data.length;++is)rs.int32Data[is]=qr.int32Data[is];if(qr.stringData&&qr.stringData.length)for(rs.stringData=[],is=0;is<qr.stringData.length;++is)rs.stringData[is]=_i.bytes===String?es.base64.encode(qr.stringData[is],0,qr.stringData[is].length):_i.bytes===Array?Array.prototype.slice.call(qr.stringData[is]):qr.stringData[is];if(qr.int64Data&&qr.int64Data.length)for(rs.int64Data=[],is=0;is<qr.int64Data.length;++is)typeof qr.int64Data[is]=="number"?rs.int64Data[is]=_i.longs===String?String(qr.int64Data[is]):qr.int64Data[is]:rs.int64Data[is]=_i.longs===String?es.Long.prototype.toString.call(qr.int64Data[is]):_i.longs===Number?new es.LongBits(qr.int64Data[is].low>>>0,qr.int64Data[is].high>>>0).toNumber():qr.int64Data[is];if(qr.name!=null&&qr.hasOwnProperty("name")&&(rs.name=qr.name),qr.rawData!=null&&qr.hasOwnProperty("rawData")&&(rs.rawData=_i.bytes===String?es.base64.encode(qr.rawData,0,qr.rawData.length):_i.bytes===Array?Array.prototype.slice.call(qr.rawData):qr.rawData),qr.doubleData&&qr.doubleData.length)for(rs.doubleData=[],is=0;is<qr.doubleData.length;++is)rs.doubleData[is]=_i.json&&!isFinite(qr.doubleData[is])?String(qr.doubleData[is]):qr.doubleData[is];if(qr.uint64Data&&qr.uint64Data.length)for(rs.uint64Data=[],is=0;is<qr.uint64Data.length;++is)typeof qr.uint64Data[is]=="number"?rs.uint64Data[is]=_i.longs===String?String(qr.uint64Data[is]):qr.uint64Data[is]:rs.uint64Data[is]=_i.longs===String?es.Long.prototype.toString.call(qr.uint64Data[is]):_i.longs===Number?new es.LongBits(qr.uint64Data[is].low>>>0,qr.uint64Data[is].high>>>0).toNumber(!0):qr.uint64Data[is];if(qr.docString!=null&&qr.hasOwnProperty("docString")&&(rs.docString=qr.docString),qr.externalData&&qr.externalData.length)for(rs.externalData=[],is=0;is<qr.externalData.length;++is)rs.externalData[is]=ns.onnx.StringStringEntryProto.toObject(qr.externalData[is],_i);return qr.dataLocation!=null&&qr.hasOwnProperty("dataLocation")&&(rs.dataLocation=_i.enums===String?ns.onnx.TensorProto.DataLocation[qr.dataLocation]===void 0?qr.dataLocation:ns.onnx.TensorProto.DataLocation[qr.dataLocation]:qr.dataLocation),rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.TensorProto"},Xr.DataType=function(){var qr={},_i=Object.create(qr);return _i[qr[0]="UNDEFINED"]=0,_i[qr[1]="FLOAT"]=1,_i[qr[2]="UINT8"]=2,_i[qr[3]="INT8"]=3,_i[qr[4]="UINT16"]=4,_i[qr[5]="INT16"]=5,_i[qr[6]="INT32"]=6,_i[qr[7]="INT64"]=7,_i[qr[8]="STRING"]=8,_i[qr[9]="BOOL"]=9,_i[qr[10]="FLOAT16"]=10,_i[qr[11]="DOUBLE"]=11,_i[qr[12]="UINT32"]=12,_i[qr[13]="UINT64"]=13,_i[qr[14]="COMPLEX64"]=14,_i[qr[15]="COMPLEX128"]=15,_i[qr[16]="BFLOAT16"]=16,_i[qr[17]="FLOAT8E4M3FN"]=17,_i[qr[18]="FLOAT8E4M3FNUZ"]=18,_i[qr[19]="FLOAT8E5M2"]=19,_i[qr[20]="FLOAT8E5M2FNUZ"]=20,_i}(),Xr.Segment=function(){function qr(_i){if(_i)for(var rs=Object.keys(_i),is=0;is<rs.length;++is)_i[rs[is]]!=null&&(this[rs[is]]=_i[rs[is]])}return qr.prototype.begin=es.Long?es.Long.fromBits(0,0,!1):0,qr.prototype.end=es.Long?es.Long.fromBits(0,0,!1):0,qr.create=function(_i){return new qr(_i)},qr.encode=function(_i,rs){return rs||(rs=ts.create()),_i.begin!=null&&Object.hasOwnProperty.call(_i,"begin")&&rs.uint32(8).int64(_i.begin),_i.end!=null&&Object.hasOwnProperty.call(_i,"end")&&rs.uint32(16).int64(_i.end),rs},qr.encodeDelimited=function(_i,rs){return this.encode(_i,rs).ldelim()},qr.decode=function(_i,rs){_i instanceof Yr||(_i=Yr.create(_i));for(var is=rs===void 0?_i.len:_i.pos+rs,ss=new ns.onnx.TensorProto.Segment;_i.pos<is;){var os=_i.uint32();switch(os>>>3){case 1:ss.begin=_i.int64();break;case 2:ss.end=_i.int64();break;default:_i.skipType(7&os)}}return ss},qr.decodeDelimited=function(_i){return _i instanceof Yr||(_i=new Yr(_i)),this.decode(_i,_i.uint32())},qr.verify=function(_i){return typeof _i!="object"||_i===null?"object expected":_i.begin!=null&&_i.hasOwnProperty("begin")&&!(es.isInteger(_i.begin)||_i.begin&&es.isInteger(_i.begin.low)&&es.isInteger(_i.begin.high))?"begin: integer|Long expected":_i.end!=null&&_i.hasOwnProperty("end")&&!(es.isInteger(_i.end)||_i.end&&es.isInteger(_i.end.low)&&es.isInteger(_i.end.high))?"end: integer|Long expected":null},qr.fromObject=function(_i){if(_i instanceof ns.onnx.TensorProto.Segment)return _i;var rs=new ns.onnx.TensorProto.Segment;return _i.begin!=null&&(es.Long?(rs.begin=es.Long.fromValue(_i.begin)).unsigned=!1:typeof _i.begin=="string"?rs.begin=parseInt(_i.begin,10):typeof _i.begin=="number"?rs.begin=_i.begin:typeof _i.begin=="object"&&(rs.begin=new es.LongBits(_i.begin.low>>>0,_i.begin.high>>>0).toNumber())),_i.end!=null&&(es.Long?(rs.end=es.Long.fromValue(_i.end)).unsigned=!1:typeof _i.end=="string"?rs.end=parseInt(_i.end,10):typeof _i.end=="number"?rs.end=_i.end:typeof _i.end=="object"&&(rs.end=new es.LongBits(_i.end.low>>>0,_i.end.high>>>0).toNumber())),rs},qr.toObject=function(_i,rs){rs||(rs={});var is={};if(rs.defaults){if(es.Long){var ss=new es.Long(0,0,!1);is.begin=rs.longs===String?ss.toString():rs.longs===Number?ss.toNumber():ss}else is.begin=rs.longs===String?"0":0;es.Long?(ss=new es.Long(0,0,!1),is.end=rs.longs===String?ss.toString():rs.longs===Number?ss.toNumber():ss):is.end=rs.longs===String?"0":0}return _i.begin!=null&&_i.hasOwnProperty("begin")&&(typeof _i.begin=="number"?is.begin=rs.longs===String?String(_i.begin):_i.begin:is.begin=rs.longs===String?es.Long.prototype.toString.call(_i.begin):rs.longs===Number?new es.LongBits(_i.begin.low>>>0,_i.begin.high>>>0).toNumber():_i.begin),_i.end!=null&&_i.hasOwnProperty("end")&&(typeof _i.end=="number"?is.end=rs.longs===String?String(_i.end):_i.end:is.end=rs.longs===String?es.Long.prototype.toString.call(_i.end):rs.longs===Number?new es.LongBits(_i.end.low>>>0,_i.end.high>>>0).toNumber():_i.end),is},qr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},qr.getTypeUrl=function(_i){return _i===void 0&&(_i="type.googleapis.com"),_i+"/onnx.TensorProto.Segment"},qr}(),Xr.DataLocation=function(){var qr={},_i=Object.create(qr);return _i[qr[0]="DEFAULT"]=0,_i[qr[1]="EXTERNAL"]=1,_i}(),Xr}(),Wr.SparseTensorProto=function(){function Xr(qr){if(this.dims=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.values=null,Xr.prototype.indices=null,Xr.prototype.dims=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.values!=null&&Object.hasOwnProperty.call(qr,"values")&&ns.onnx.TensorProto.encode(qr.values,_i.uint32(10).fork()).ldelim(),qr.indices!=null&&Object.hasOwnProperty.call(qr,"indices")&&ns.onnx.TensorProto.encode(qr.indices,_i.uint32(18).fork()).ldelim(),qr.dims!=null&&qr.dims.length){_i.uint32(26).fork();for(var rs=0;rs<qr.dims.length;++rs)_i.int64(qr.dims[rs]);_i.ldelim()}return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.SparseTensorProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.values=ns.onnx.TensorProto.decode(qr,qr.uint32());break;case 2:is.indices=ns.onnx.TensorProto.decode(qr,qr.uint32());break;case 3:if(is.dims&&is.dims.length||(is.dims=[]),(7&ss)==2)for(var os=qr.uint32()+qr.pos;qr.pos<os;)is.dims.push(qr.int64());else is.dims.push(qr.int64());break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";var _i;if(qr.values!=null&&qr.hasOwnProperty("values")&&(_i=ns.onnx.TensorProto.verify(qr.values)))return"values."+_i;if(qr.indices!=null&&qr.hasOwnProperty("indices")&&(_i=ns.onnx.TensorProto.verify(qr.indices)))return"indices."+_i;if(qr.dims!=null&&qr.hasOwnProperty("dims")){if(!Array.isArray(qr.dims))return"dims: array expected";for(var rs=0;rs<qr.dims.length;++rs)if(!(es.isInteger(qr.dims[rs])||qr.dims[rs]&&es.isInteger(qr.dims[rs].low)&&es.isInteger(qr.dims[rs].high)))return"dims: integer|Long[] expected"}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.SparseTensorProto)return qr;var _i=new ns.onnx.SparseTensorProto;if(qr.values!=null){if(typeof qr.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");_i.values=ns.onnx.TensorProto.fromObject(qr.values)}if(qr.indices!=null){if(typeof qr.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");_i.indices=ns.onnx.TensorProto.fromObject(qr.indices)}if(qr.dims){if(!Array.isArray(qr.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");_i.dims=[];for(var rs=0;rs<qr.dims.length;++rs)es.Long?(_i.dims[rs]=es.Long.fromValue(qr.dims[rs])).unsigned=!1:typeof qr.dims[rs]=="string"?_i.dims[rs]=parseInt(qr.dims[rs],10):typeof qr.dims[rs]=="number"?_i.dims[rs]=qr.dims[rs]:typeof qr.dims[rs]=="object"&&(_i.dims[rs]=new es.LongBits(qr.dims[rs].low>>>0,qr.dims[rs].high>>>0).toNumber())}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.dims=[]),_i.defaults&&(rs.values=null,rs.indices=null),qr.values!=null&&qr.hasOwnProperty("values")&&(rs.values=ns.onnx.TensorProto.toObject(qr.values,_i)),qr.indices!=null&&qr.hasOwnProperty("indices")&&(rs.indices=ns.onnx.TensorProto.toObject(qr.indices,_i)),qr.dims&&qr.dims.length){rs.dims=[];for(var is=0;is<qr.dims.length;++is)typeof qr.dims[is]=="number"?rs.dims[is]=_i.longs===String?String(qr.dims[is]):qr.dims[is]:rs.dims[is]=_i.longs===String?es.Long.prototype.toString.call(qr.dims[is]):_i.longs===Number?new es.LongBits(qr.dims[is].low>>>0,qr.dims[is].high>>>0).toNumber():qr.dims[is]}return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.SparseTensorProto"},Xr}(),Wr.TensorShapeProto=function(){function Xr(qr){if(this.dim=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.dim=es.emptyArray,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.dim!=null&&qr.dim.length)for(var rs=0;rs<qr.dim.length;++rs)ns.onnx.TensorShapeProto.Dimension.encode(qr.dim[rs],_i.uint32(10).fork()).ldelim();return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.TensorShapeProto;qr.pos<rs;){var ss=qr.uint32();ss>>>3==1?(is.dim&&is.dim.length||(is.dim=[]),is.dim.push(ns.onnx.TensorShapeProto.Dimension.decode(qr,qr.uint32()))):qr.skipType(7&ss)}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.dim!=null&&qr.hasOwnProperty("dim")){if(!Array.isArray(qr.dim))return"dim: array expected";for(var _i=0;_i<qr.dim.length;++_i){var rs=ns.onnx.TensorShapeProto.Dimension.verify(qr.dim[_i]);if(rs)return"dim."+rs}}return null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.TensorShapeProto)return qr;var _i=new ns.onnx.TensorShapeProto;if(qr.dim){if(!Array.isArray(qr.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");_i.dim=[];for(var rs=0;rs<qr.dim.length;++rs){if(typeof qr.dim[rs]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");_i.dim[rs]=ns.onnx.TensorShapeProto.Dimension.fromObject(qr.dim[rs])}}return _i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.dim=[]),qr.dim&&qr.dim.length){rs.dim=[];for(var is=0;is<qr.dim.length;++is)rs.dim[is]=ns.onnx.TensorShapeProto.Dimension.toObject(qr.dim[is],_i)}return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.TensorShapeProto"},Xr.Dimension=function(){function qr(rs){if(rs)for(var is=Object.keys(rs),ss=0;ss<is.length;++ss)rs[is[ss]]!=null&&(this[is[ss]]=rs[is[ss]])}var _i;return qr.prototype.dimValue=null,qr.prototype.dimParam=null,qr.prototype.denotation="",Object.defineProperty(qr.prototype,"value",{get:es.oneOfGetter(_i=["dimValue","dimParam"]),set:es.oneOfSetter(_i)}),qr.create=function(rs){return new qr(rs)},qr.encode=function(rs,is){return is||(is=ts.create()),rs.dimValue!=null&&Object.hasOwnProperty.call(rs,"dimValue")&&is.uint32(8).int64(rs.dimValue),rs.dimParam!=null&&Object.hasOwnProperty.call(rs,"dimParam")&&is.uint32(18).string(rs.dimParam),rs.denotation!=null&&Object.hasOwnProperty.call(rs,"denotation")&&is.uint32(26).string(rs.denotation),is},qr.encodeDelimited=function(rs,is){return this.encode(rs,is).ldelim()},qr.decode=function(rs,is){rs instanceof Yr||(rs=Yr.create(rs));for(var ss=is===void 0?rs.len:rs.pos+is,os=new ns.onnx.TensorShapeProto.Dimension;rs.pos<ss;){var ls=rs.uint32();switch(ls>>>3){case 1:os.dimValue=rs.int64();break;case 2:os.dimParam=rs.string();break;case 3:os.denotation=rs.string();break;default:rs.skipType(7&ls)}}return os},qr.decodeDelimited=function(rs){return rs instanceof Yr||(rs=new Yr(rs)),this.decode(rs,rs.uint32())},qr.verify=function(rs){if(typeof rs!="object"||rs===null)return"object expected";var is={};if(rs.dimValue!=null&&rs.hasOwnProperty("dimValue")&&(is.value=1,!(es.isInteger(rs.dimValue)||rs.dimValue&&es.isInteger(rs.dimValue.low)&&es.isInteger(rs.dimValue.high))))return"dimValue: integer|Long expected";if(rs.dimParam!=null&&rs.hasOwnProperty("dimParam")){if(is.value===1)return"value: multiple values";if(is.value=1,!es.isString(rs.dimParam))return"dimParam: string expected"}return rs.denotation!=null&&rs.hasOwnProperty("denotation")&&!es.isString(rs.denotation)?"denotation: string expected":null},qr.fromObject=function(rs){if(rs instanceof ns.onnx.TensorShapeProto.Dimension)return rs;var is=new ns.onnx.TensorShapeProto.Dimension;return rs.dimValue!=null&&(es.Long?(is.dimValue=es.Long.fromValue(rs.dimValue)).unsigned=!1:typeof rs.dimValue=="string"?is.dimValue=parseInt(rs.dimValue,10):typeof rs.dimValue=="number"?is.dimValue=rs.dimValue:typeof rs.dimValue=="object"&&(is.dimValue=new es.LongBits(rs.dimValue.low>>>0,rs.dimValue.high>>>0).toNumber())),rs.dimParam!=null&&(is.dimParam=String(rs.dimParam)),rs.denotation!=null&&(is.denotation=String(rs.denotation)),is},qr.toObject=function(rs,is){is||(is={});var ss={};return is.defaults&&(ss.denotation=""),rs.dimValue!=null&&rs.hasOwnProperty("dimValue")&&(typeof rs.dimValue=="number"?ss.dimValue=is.longs===String?String(rs.dimValue):rs.dimValue:ss.dimValue=is.longs===String?es.Long.prototype.toString.call(rs.dimValue):is.longs===Number?new es.LongBits(rs.dimValue.low>>>0,rs.dimValue.high>>>0).toNumber():rs.dimValue,is.oneofs&&(ss.value="dimValue")),rs.dimParam!=null&&rs.hasOwnProperty("dimParam")&&(ss.dimParam=rs.dimParam,is.oneofs&&(ss.value="dimParam")),rs.denotation!=null&&rs.hasOwnProperty("denotation")&&(ss.denotation=rs.denotation),ss},qr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},qr.getTypeUrl=function(rs){return rs===void 0&&(rs="type.googleapis.com"),rs+"/onnx.TensorShapeProto.Dimension"},qr}(),Xr}(),Wr.TypeProto=function(){function Xr(_i){if(_i)for(var rs=Object.keys(_i),is=0;is<rs.length;++is)_i[rs[is]]!=null&&(this[rs[is]]=_i[rs[is]])}var qr;return Xr.prototype.tensorType=null,Xr.prototype.sequenceType=null,Xr.prototype.mapType=null,Xr.prototype.optionalType=null,Xr.prototype.sparseTensorType=null,Xr.prototype.denotation="",Object.defineProperty(Xr.prototype,"value",{get:es.oneOfGetter(qr=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:es.oneOfSetter(qr)}),Xr.create=function(_i){return new Xr(_i)},Xr.encode=function(_i,rs){return rs||(rs=ts.create()),_i.tensorType!=null&&Object.hasOwnProperty.call(_i,"tensorType")&&ns.onnx.TypeProto.Tensor.encode(_i.tensorType,rs.uint32(10).fork()).ldelim(),_i.sequenceType!=null&&Object.hasOwnProperty.call(_i,"sequenceType")&&ns.onnx.TypeProto.Sequence.encode(_i.sequenceType,rs.uint32(34).fork()).ldelim(),_i.mapType!=null&&Object.hasOwnProperty.call(_i,"mapType")&&ns.onnx.TypeProto.Map.encode(_i.mapType,rs.uint32(42).fork()).ldelim(),_i.denotation!=null&&Object.hasOwnProperty.call(_i,"denotation")&&rs.uint32(50).string(_i.denotation),_i.sparseTensorType!=null&&Object.hasOwnProperty.call(_i,"sparseTensorType")&&ns.onnx.TypeProto.SparseTensor.encode(_i.sparseTensorType,rs.uint32(66).fork()).ldelim(),_i.optionalType!=null&&Object.hasOwnProperty.call(_i,"optionalType")&&ns.onnx.TypeProto.Optional.encode(_i.optionalType,rs.uint32(74).fork()).ldelim(),rs},Xr.encodeDelimited=function(_i,rs){return this.encode(_i,rs).ldelim()},Xr.decode=function(_i,rs){_i instanceof Yr||(_i=Yr.create(_i));for(var is=rs===void 0?_i.len:_i.pos+rs,ss=new ns.onnx.TypeProto;_i.pos<is;){var os=_i.uint32();switch(os>>>3){case 1:ss.tensorType=ns.onnx.TypeProto.Tensor.decode(_i,_i.uint32());break;case 4:ss.sequenceType=ns.onnx.TypeProto.Sequence.decode(_i,_i.uint32());break;case 5:ss.mapType=ns.onnx.TypeProto.Map.decode(_i,_i.uint32());break;case 9:ss.optionalType=ns.onnx.TypeProto.Optional.decode(_i,_i.uint32());break;case 8:ss.sparseTensorType=ns.onnx.TypeProto.SparseTensor.decode(_i,_i.uint32());break;case 6:ss.denotation=_i.string();break;default:_i.skipType(7&os)}}return ss},Xr.decodeDelimited=function(_i){return _i instanceof Yr||(_i=new Yr(_i)),this.decode(_i,_i.uint32())},Xr.verify=function(_i){if(typeof _i!="object"||_i===null)return"object expected";var rs={};if(_i.tensorType!=null&&_i.hasOwnProperty("tensorType")&&(rs.value=1,is=ns.onnx.TypeProto.Tensor.verify(_i.tensorType)))return"tensorType."+is;if(_i.sequenceType!=null&&_i.hasOwnProperty("sequenceType")){if(rs.value===1)return"value: multiple values";if(rs.value=1,is=ns.onnx.TypeProto.Sequence.verify(_i.sequenceType))return"sequenceType."+is}if(_i.mapType!=null&&_i.hasOwnProperty("mapType")){if(rs.value===1)return"value: multiple values";if(rs.value=1,is=ns.onnx.TypeProto.Map.verify(_i.mapType))return"mapType."+is}if(_i.optionalType!=null&&_i.hasOwnProperty("optionalType")){if(rs.value===1)return"value: multiple values";if(rs.value=1,is=ns.onnx.TypeProto.Optional.verify(_i.optionalType))return"optionalType."+is}if(_i.sparseTensorType!=null&&_i.hasOwnProperty("sparseTensorType")){if(rs.value===1)return"value: multiple values";var is;if(rs.value=1,is=ns.onnx.TypeProto.SparseTensor.verify(_i.sparseTensorType))return"sparseTensorType."+is}return _i.denotation!=null&&_i.hasOwnProperty("denotation")&&!es.isString(_i.denotation)?"denotation: string expected":null},Xr.fromObject=function(_i){if(_i instanceof ns.onnx.TypeProto)return _i;var rs=new ns.onnx.TypeProto;if(_i.tensorType!=null){if(typeof _i.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");rs.tensorType=ns.onnx.TypeProto.Tensor.fromObject(_i.tensorType)}if(_i.sequenceType!=null){if(typeof _i.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");rs.sequenceType=ns.onnx.TypeProto.Sequence.fromObject(_i.sequenceType)}if(_i.mapType!=null){if(typeof _i.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");rs.mapType=ns.onnx.TypeProto.Map.fromObject(_i.mapType)}if(_i.optionalType!=null){if(typeof _i.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");rs.optionalType=ns.onnx.TypeProto.Optional.fromObject(_i.optionalType)}if(_i.sparseTensorType!=null){if(typeof _i.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");rs.sparseTensorType=ns.onnx.TypeProto.SparseTensor.fromObject(_i.sparseTensorType)}return _i.denotation!=null&&(rs.denotation=String(_i.denotation)),rs},Xr.toObject=function(_i,rs){rs||(rs={});var is={};return rs.defaults&&(is.denotation=""),_i.tensorType!=null&&_i.hasOwnProperty("tensorType")&&(is.tensorType=ns.onnx.TypeProto.Tensor.toObject(_i.tensorType,rs),rs.oneofs&&(is.value="tensorType")),_i.sequenceType!=null&&_i.hasOwnProperty("sequenceType")&&(is.sequenceType=ns.onnx.TypeProto.Sequence.toObject(_i.sequenceType,rs),rs.oneofs&&(is.value="sequenceType")),_i.mapType!=null&&_i.hasOwnProperty("mapType")&&(is.mapType=ns.onnx.TypeProto.Map.toObject(_i.mapType,rs),rs.oneofs&&(is.value="mapType")),_i.denotation!=null&&_i.hasOwnProperty("denotation")&&(is.denotation=_i.denotation),_i.sparseTensorType!=null&&_i.hasOwnProperty("sparseTensorType")&&(is.sparseTensorType=ns.onnx.TypeProto.SparseTensor.toObject(_i.sparseTensorType,rs),rs.oneofs&&(is.value="sparseTensorType")),_i.optionalType!=null&&_i.hasOwnProperty("optionalType")&&(is.optionalType=ns.onnx.TypeProto.Optional.toObject(_i.optionalType,rs),rs.oneofs&&(is.value="optionalType")),is},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(_i){return _i===void 0&&(_i="type.googleapis.com"),_i+"/onnx.TypeProto"},Xr.Tensor=function(){function _i(rs){if(rs)for(var is=Object.keys(rs),ss=0;ss<is.length;++ss)rs[is[ss]]!=null&&(this[is[ss]]=rs[is[ss]])}return _i.prototype.elemType=0,_i.prototype.shape=null,_i.create=function(rs){return new _i(rs)},_i.encode=function(rs,is){return is||(is=ts.create()),rs.elemType!=null&&Object.hasOwnProperty.call(rs,"elemType")&&is.uint32(8).int32(rs.elemType),rs.shape!=null&&Object.hasOwnProperty.call(rs,"shape")&&ns.onnx.TensorShapeProto.encode(rs.shape,is.uint32(18).fork()).ldelim(),is},_i.encodeDelimited=function(rs,is){return this.encode(rs,is).ldelim()},_i.decode=function(rs,is){rs instanceof Yr||(rs=Yr.create(rs));for(var ss=is===void 0?rs.len:rs.pos+is,os=new ns.onnx.TypeProto.Tensor;rs.pos<ss;){var ls=rs.uint32();switch(ls>>>3){case 1:os.elemType=rs.int32();break;case 2:os.shape=ns.onnx.TensorShapeProto.decode(rs,rs.uint32());break;default:rs.skipType(7&ls)}}return os},_i.decodeDelimited=function(rs){return rs instanceof Yr||(rs=new Yr(rs)),this.decode(rs,rs.uint32())},_i.verify=function(rs){if(typeof rs!="object"||rs===null)return"object expected";if(rs.elemType!=null&&rs.hasOwnProperty("elemType")&&!es.isInteger(rs.elemType))return"elemType: integer expected";if(rs.shape!=null&&rs.hasOwnProperty("shape")){var is=ns.onnx.TensorShapeProto.verify(rs.shape);if(is)return"shape."+is}return null},_i.fromObject=function(rs){if(rs instanceof ns.onnx.TypeProto.Tensor)return rs;var is=new ns.onnx.TypeProto.Tensor;if(rs.elemType!=null&&(is.elemType=0|rs.elemType),rs.shape!=null){if(typeof rs.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");is.shape=ns.onnx.TensorShapeProto.fromObject(rs.shape)}return is},_i.toObject=function(rs,is){is||(is={});var ss={};return is.defaults&&(ss.elemType=0,ss.shape=null),rs.elemType!=null&&rs.hasOwnProperty("elemType")&&(ss.elemType=rs.elemType),rs.shape!=null&&rs.hasOwnProperty("shape")&&(ss.shape=ns.onnx.TensorShapeProto.toObject(rs.shape,is)),ss},_i.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},_i.getTypeUrl=function(rs){return rs===void 0&&(rs="type.googleapis.com"),rs+"/onnx.TypeProto.Tensor"},_i}(),Xr.Sequence=function(){function _i(rs){if(rs)for(var is=Object.keys(rs),ss=0;ss<is.length;++ss)rs[is[ss]]!=null&&(this[is[ss]]=rs[is[ss]])}return _i.prototype.elemType=null,_i.create=function(rs){return new _i(rs)},_i.encode=function(rs,is){return is||(is=ts.create()),rs.elemType!=null&&Object.hasOwnProperty.call(rs,"elemType")&&ns.onnx.TypeProto.encode(rs.elemType,is.uint32(10).fork()).ldelim(),is},_i.encodeDelimited=function(rs,is){return this.encode(rs,is).ldelim()},_i.decode=function(rs,is){rs instanceof Yr||(rs=Yr.create(rs));for(var ss=is===void 0?rs.len:rs.pos+is,os=new ns.onnx.TypeProto.Sequence;rs.pos<ss;){var ls=rs.uint32();ls>>>3==1?os.elemType=ns.onnx.TypeProto.decode(rs,rs.uint32()):rs.skipType(7&ls)}return os},_i.decodeDelimited=function(rs){return rs instanceof Yr||(rs=new Yr(rs)),this.decode(rs,rs.uint32())},_i.verify=function(rs){if(typeof rs!="object"||rs===null)return"object expected";if(rs.elemType!=null&&rs.hasOwnProperty("elemType")){var is=ns.onnx.TypeProto.verify(rs.elemType);if(is)return"elemType."+is}return null},_i.fromObject=function(rs){if(rs instanceof ns.onnx.TypeProto.Sequence)return rs;var is=new ns.onnx.TypeProto.Sequence;if(rs.elemType!=null){if(typeof rs.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");is.elemType=ns.onnx.TypeProto.fromObject(rs.elemType)}return is},_i.toObject=function(rs,is){is||(is={});var ss={};return is.defaults&&(ss.elemType=null),rs.elemType!=null&&rs.hasOwnProperty("elemType")&&(ss.elemType=ns.onnx.TypeProto.toObject(rs.elemType,is)),ss},_i.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},_i.getTypeUrl=function(rs){return rs===void 0&&(rs="type.googleapis.com"),rs+"/onnx.TypeProto.Sequence"},_i}(),Xr.Map=function(){function _i(rs){if(rs)for(var is=Object.keys(rs),ss=0;ss<is.length;++ss)rs[is[ss]]!=null&&(this[is[ss]]=rs[is[ss]])}return _i.prototype.keyType=0,_i.prototype.valueType=null,_i.create=function(rs){return new _i(rs)},_i.encode=function(rs,is){return is||(is=ts.create()),rs.keyType!=null&&Object.hasOwnProperty.call(rs,"keyType")&&is.uint32(8).int32(rs.keyType),rs.valueType!=null&&Object.hasOwnProperty.call(rs,"valueType")&&ns.onnx.TypeProto.encode(rs.valueType,is.uint32(18).fork()).ldelim(),is},_i.encodeDelimited=function(rs,is){return this.encode(rs,is).ldelim()},_i.decode=function(rs,is){rs instanceof Yr||(rs=Yr.create(rs));for(var ss=is===void 0?rs.len:rs.pos+is,os=new ns.onnx.TypeProto.Map;rs.pos<ss;){var ls=rs.uint32();switch(ls>>>3){case 1:os.keyType=rs.int32();break;case 2:os.valueType=ns.onnx.TypeProto.decode(rs,rs.uint32());break;default:rs.skipType(7&ls)}}return os},_i.decodeDelimited=function(rs){return rs instanceof Yr||(rs=new Yr(rs)),this.decode(rs,rs.uint32())},_i.verify=function(rs){if(typeof rs!="object"||rs===null)return"object expected";if(rs.keyType!=null&&rs.hasOwnProperty("keyType")&&!es.isInteger(rs.keyType))return"keyType: integer expected";if(rs.valueType!=null&&rs.hasOwnProperty("valueType")){var is=ns.onnx.TypeProto.verify(rs.valueType);if(is)return"valueType."+is}return null},_i.fromObject=function(rs){if(rs instanceof ns.onnx.TypeProto.Map)return rs;var is=new ns.onnx.TypeProto.Map;if(rs.keyType!=null&&(is.keyType=0|rs.keyType),rs.valueType!=null){if(typeof rs.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");is.valueType=ns.onnx.TypeProto.fromObject(rs.valueType)}return is},_i.toObject=function(rs,is){is||(is={});var ss={};return is.defaults&&(ss.keyType=0,ss.valueType=null),rs.keyType!=null&&rs.hasOwnProperty("keyType")&&(ss.keyType=rs.keyType),rs.valueType!=null&&rs.hasOwnProperty("valueType")&&(ss.valueType=ns.onnx.TypeProto.toObject(rs.valueType,is)),ss},_i.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},_i.getTypeUrl=function(rs){return rs===void 0&&(rs="type.googleapis.com"),rs+"/onnx.TypeProto.Map"},_i}(),Xr.Optional=function(){function _i(rs){if(rs)for(var is=Object.keys(rs),ss=0;ss<is.length;++ss)rs[is[ss]]!=null&&(this[is[ss]]=rs[is[ss]])}return _i.prototype.elemType=null,_i.create=function(rs){return new _i(rs)},_i.encode=function(rs,is){return is||(is=ts.create()),rs.elemType!=null&&Object.hasOwnProperty.call(rs,"elemType")&&ns.onnx.TypeProto.encode(rs.elemType,is.uint32(10).fork()).ldelim(),is},_i.encodeDelimited=function(rs,is){return this.encode(rs,is).ldelim()},_i.decode=function(rs,is){rs instanceof Yr||(rs=Yr.create(rs));for(var ss=is===void 0?rs.len:rs.pos+is,os=new ns.onnx.TypeProto.Optional;rs.pos<ss;){var ls=rs.uint32();ls>>>3==1?os.elemType=ns.onnx.TypeProto.decode(rs,rs.uint32()):rs.skipType(7&ls)}return os},_i.decodeDelimited=function(rs){return rs instanceof Yr||(rs=new Yr(rs)),this.decode(rs,rs.uint32())},_i.verify=function(rs){if(typeof rs!="object"||rs===null)return"object expected";if(rs.elemType!=null&&rs.hasOwnProperty("elemType")){var is=ns.onnx.TypeProto.verify(rs.elemType);if(is)return"elemType."+is}return null},_i.fromObject=function(rs){if(rs instanceof ns.onnx.TypeProto.Optional)return rs;var is=new ns.onnx.TypeProto.Optional;if(rs.elemType!=null){if(typeof rs.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");is.elemType=ns.onnx.TypeProto.fromObject(rs.elemType)}return is},_i.toObject=function(rs,is){is||(is={});var ss={};return is.defaults&&(ss.elemType=null),rs.elemType!=null&&rs.hasOwnProperty("elemType")&&(ss.elemType=ns.onnx.TypeProto.toObject(rs.elemType,is)),ss},_i.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},_i.getTypeUrl=function(rs){return rs===void 0&&(rs="type.googleapis.com"),rs+"/onnx.TypeProto.Optional"},_i}(),Xr.SparseTensor=function(){function _i(rs){if(rs)for(var is=Object.keys(rs),ss=0;ss<is.length;++ss)rs[is[ss]]!=null&&(this[is[ss]]=rs[is[ss]])}return _i.prototype.elemType=0,_i.prototype.shape=null,_i.create=function(rs){return new _i(rs)},_i.encode=function(rs,is){return is||(is=ts.create()),rs.elemType!=null&&Object.hasOwnProperty.call(rs,"elemType")&&is.uint32(8).int32(rs.elemType),rs.shape!=null&&Object.hasOwnProperty.call(rs,"shape")&&ns.onnx.TensorShapeProto.encode(rs.shape,is.uint32(18).fork()).ldelim(),is},_i.encodeDelimited=function(rs,is){return this.encode(rs,is).ldelim()},_i.decode=function(rs,is){rs instanceof Yr||(rs=Yr.create(rs));for(var ss=is===void 0?rs.len:rs.pos+is,os=new ns.onnx.TypeProto.SparseTensor;rs.pos<ss;){var ls=rs.uint32();switch(ls>>>3){case 1:os.elemType=rs.int32();break;case 2:os.shape=ns.onnx.TensorShapeProto.decode(rs,rs.uint32());break;default:rs.skipType(7&ls)}}return os},_i.decodeDelimited=function(rs){return rs instanceof Yr||(rs=new Yr(rs)),this.decode(rs,rs.uint32())},_i.verify=function(rs){if(typeof rs!="object"||rs===null)return"object expected";if(rs.elemType!=null&&rs.hasOwnProperty("elemType")&&!es.isInteger(rs.elemType))return"elemType: integer expected";if(rs.shape!=null&&rs.hasOwnProperty("shape")){var is=ns.onnx.TensorShapeProto.verify(rs.shape);if(is)return"shape."+is}return null},_i.fromObject=function(rs){if(rs instanceof ns.onnx.TypeProto.SparseTensor)return rs;var is=new ns.onnx.TypeProto.SparseTensor;if(rs.elemType!=null&&(is.elemType=0|rs.elemType),rs.shape!=null){if(typeof rs.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");is.shape=ns.onnx.TensorShapeProto.fromObject(rs.shape)}return is},_i.toObject=function(rs,is){is||(is={});var ss={};return is.defaults&&(ss.elemType=0,ss.shape=null),rs.elemType!=null&&rs.hasOwnProperty("elemType")&&(ss.elemType=rs.elemType),rs.shape!=null&&rs.hasOwnProperty("shape")&&(ss.shape=ns.onnx.TensorShapeProto.toObject(rs.shape,is)),ss},_i.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},_i.getTypeUrl=function(rs){return rs===void 0&&(rs="type.googleapis.com"),rs+"/onnx.TypeProto.SparseTensor"},_i}(),Xr}(),Wr.OperatorSetIdProto=function(){function Xr(qr){if(qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.domain="",Xr.prototype.version=es.Long?es.Long.fromBits(0,0,!1):0,Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){return _i||(_i=ts.create()),qr.domain!=null&&Object.hasOwnProperty.call(qr,"domain")&&_i.uint32(10).string(qr.domain),qr.version!=null&&Object.hasOwnProperty.call(qr,"version")&&_i.uint32(16).int64(qr.version),_i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.OperatorSetIdProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.domain=qr.string();break;case 2:is.version=qr.int64();break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){return typeof qr!="object"||qr===null?"object expected":qr.domain!=null&&qr.hasOwnProperty("domain")&&!es.isString(qr.domain)?"domain: string expected":qr.version!=null&&qr.hasOwnProperty("version")&&!(es.isInteger(qr.version)||qr.version&&es.isInteger(qr.version.low)&&es.isInteger(qr.version.high))?"version: integer|Long expected":null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.OperatorSetIdProto)return qr;var _i=new ns.onnx.OperatorSetIdProto;return qr.domain!=null&&(_i.domain=String(qr.domain)),qr.version!=null&&(es.Long?(_i.version=es.Long.fromValue(qr.version)).unsigned=!1:typeof qr.version=="string"?_i.version=parseInt(qr.version,10):typeof qr.version=="number"?_i.version=qr.version:typeof qr.version=="object"&&(_i.version=new es.LongBits(qr.version.low>>>0,qr.version.high>>>0).toNumber())),_i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if(_i.defaults)if(rs.domain="",es.Long){var is=new es.Long(0,0,!1);rs.version=_i.longs===String?is.toString():_i.longs===Number?is.toNumber():is}else rs.version=_i.longs===String?"0":0;return qr.domain!=null&&qr.hasOwnProperty("domain")&&(rs.domain=qr.domain),qr.version!=null&&qr.hasOwnProperty("version")&&(typeof qr.version=="number"?rs.version=_i.longs===String?String(qr.version):qr.version:rs.version=_i.longs===String?es.Long.prototype.toString.call(qr.version):_i.longs===Number?new es.LongBits(qr.version.low>>>0,qr.version.high>>>0).toNumber():qr.version),rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.OperatorSetIdProto"},Xr}(),Wr.OperatorStatus=function(){var Xr={},qr=Object.create(Xr);return qr[Xr[0]="EXPERIMENTAL"]=0,qr[Xr[1]="STABLE"]=1,qr}(),Wr.FunctionProto=function(){function Xr(qr){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],qr)for(var _i=Object.keys(qr),rs=0;rs<_i.length;++rs)qr[_i[rs]]!=null&&(this[_i[rs]]=qr[_i[rs]])}return Xr.prototype.name="",Xr.prototype.input=es.emptyArray,Xr.prototype.output=es.emptyArray,Xr.prototype.attribute=es.emptyArray,Xr.prototype.attributeProto=es.emptyArray,Xr.prototype.node=es.emptyArray,Xr.prototype.docString="",Xr.prototype.opsetImport=es.emptyArray,Xr.prototype.domain="",Xr.create=function(qr){return new Xr(qr)},Xr.encode=function(qr,_i){if(_i||(_i=ts.create()),qr.name!=null&&Object.hasOwnProperty.call(qr,"name")&&_i.uint32(10).string(qr.name),qr.input!=null&&qr.input.length)for(var rs=0;rs<qr.input.length;++rs)_i.uint32(34).string(qr.input[rs]);if(qr.output!=null&&qr.output.length)for(rs=0;rs<qr.output.length;++rs)_i.uint32(42).string(qr.output[rs]);if(qr.attribute!=null&&qr.attribute.length)for(rs=0;rs<qr.attribute.length;++rs)_i.uint32(50).string(qr.attribute[rs]);if(qr.node!=null&&qr.node.length)for(rs=0;rs<qr.node.length;++rs)ns.onnx.NodeProto.encode(qr.node[rs],_i.uint32(58).fork()).ldelim();if(qr.docString!=null&&Object.hasOwnProperty.call(qr,"docString")&&_i.uint32(66).string(qr.docString),qr.opsetImport!=null&&qr.opsetImport.length)for(rs=0;rs<qr.opsetImport.length;++rs)ns.onnx.OperatorSetIdProto.encode(qr.opsetImport[rs],_i.uint32(74).fork()).ldelim();if(qr.domain!=null&&Object.hasOwnProperty.call(qr,"domain")&&_i.uint32(82).string(qr.domain),qr.attributeProto!=null&&qr.attributeProto.length)for(rs=0;rs<qr.attributeProto.length;++rs)ns.onnx.AttributeProto.encode(qr.attributeProto[rs],_i.uint32(90).fork()).ldelim();return _i},Xr.encodeDelimited=function(qr,_i){return this.encode(qr,_i).ldelim()},Xr.decode=function(qr,_i){qr instanceof Yr||(qr=Yr.create(qr));for(var rs=_i===void 0?qr.len:qr.pos+_i,is=new ns.onnx.FunctionProto;qr.pos<rs;){var ss=qr.uint32();switch(ss>>>3){case 1:is.name=qr.string();break;case 4:is.input&&is.input.length||(is.input=[]),is.input.push(qr.string());break;case 5:is.output&&is.output.length||(is.output=[]),is.output.push(qr.string());break;case 6:is.attribute&&is.attribute.length||(is.attribute=[]),is.attribute.push(qr.string());break;case 11:is.attributeProto&&is.attributeProto.length||(is.attributeProto=[]),is.attributeProto.push(ns.onnx.AttributeProto.decode(qr,qr.uint32()));break;case 7:is.node&&is.node.length||(is.node=[]),is.node.push(ns.onnx.NodeProto.decode(qr,qr.uint32()));break;case 8:is.docString=qr.string();break;case 9:is.opsetImport&&is.opsetImport.length||(is.opsetImport=[]),is.opsetImport.push(ns.onnx.OperatorSetIdProto.decode(qr,qr.uint32()));break;case 10:is.domain=qr.string();break;default:qr.skipType(7&ss)}}return is},Xr.decodeDelimited=function(qr){return qr instanceof Yr||(qr=new Yr(qr)),this.decode(qr,qr.uint32())},Xr.verify=function(qr){if(typeof qr!="object"||qr===null)return"object expected";if(qr.name!=null&&qr.hasOwnProperty("name")&&!es.isString(qr.name))return"name: string expected";if(qr.input!=null&&qr.hasOwnProperty("input")){if(!Array.isArray(qr.input))return"input: array expected";for(var _i=0;_i<qr.input.length;++_i)if(!es.isString(qr.input[_i]))return"input: string[] expected"}if(qr.output!=null&&qr.hasOwnProperty("output")){if(!Array.isArray(qr.output))return"output: array expected";for(_i=0;_i<qr.output.length;++_i)if(!es.isString(qr.output[_i]))return"output: string[] expected"}if(qr.attribute!=null&&qr.hasOwnProperty("attribute")){if(!Array.isArray(qr.attribute))return"attribute: array expected";for(_i=0;_i<qr.attribute.length;++_i)if(!es.isString(qr.attribute[_i]))return"attribute: string[] expected"}if(qr.attributeProto!=null&&qr.hasOwnProperty("attributeProto")){if(!Array.isArray(qr.attributeProto))return"attributeProto: array expected";for(_i=0;_i<qr.attributeProto.length;++_i)if(rs=ns.onnx.AttributeProto.verify(qr.attributeProto[_i]))return"attributeProto."+rs}if(qr.node!=null&&qr.hasOwnProperty("node")){if(!Array.isArray(qr.node))return"node: array expected";for(_i=0;_i<qr.node.length;++_i)if(rs=ns.onnx.NodeProto.verify(qr.node[_i]))return"node."+rs}if(qr.docString!=null&&qr.hasOwnProperty("docString")&&!es.isString(qr.docString))return"docString: string expected";if(qr.opsetImport!=null&&qr.hasOwnProperty("opsetImport")){if(!Array.isArray(qr.opsetImport))return"opsetImport: array expected";for(_i=0;_i<qr.opsetImport.length;++_i){var rs;if(rs=ns.onnx.OperatorSetIdProto.verify(qr.opsetImport[_i]))return"opsetImport."+rs}}return qr.domain!=null&&qr.hasOwnProperty("domain")&&!es.isString(qr.domain)?"domain: string expected":null},Xr.fromObject=function(qr){if(qr instanceof ns.onnx.FunctionProto)return qr;var _i=new ns.onnx.FunctionProto;if(qr.name!=null&&(_i.name=String(qr.name)),qr.input){if(!Array.isArray(qr.input))throw TypeError(".onnx.FunctionProto.input: array expected");_i.input=[];for(var rs=0;rs<qr.input.length;++rs)_i.input[rs]=String(qr.input[rs])}if(qr.output){if(!Array.isArray(qr.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(_i.output=[],rs=0;rs<qr.output.length;++rs)_i.output[rs]=String(qr.output[rs])}if(qr.attribute){if(!Array.isArray(qr.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(_i.attribute=[],rs=0;rs<qr.attribute.length;++rs)_i.attribute[rs]=String(qr.attribute[rs])}if(qr.attributeProto){if(!Array.isArray(qr.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(_i.attributeProto=[],rs=0;rs<qr.attributeProto.length;++rs){if(typeof qr.attributeProto[rs]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");_i.attributeProto[rs]=ns.onnx.AttributeProto.fromObject(qr.attributeProto[rs])}}if(qr.node){if(!Array.isArray(qr.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(_i.node=[],rs=0;rs<qr.node.length;++rs){if(typeof qr.node[rs]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");_i.node[rs]=ns.onnx.NodeProto.fromObject(qr.node[rs])}}if(qr.docString!=null&&(_i.docString=String(qr.docString)),qr.opsetImport){if(!Array.isArray(qr.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(_i.opsetImport=[],rs=0;rs<qr.opsetImport.length;++rs){if(typeof qr.opsetImport[rs]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");_i.opsetImport[rs]=ns.onnx.OperatorSetIdProto.fromObject(qr.opsetImport[rs])}}return qr.domain!=null&&(_i.domain=String(qr.domain)),_i},Xr.toObject=function(qr,_i){_i||(_i={});var rs={};if((_i.arrays||_i.defaults)&&(rs.input=[],rs.output=[],rs.attribute=[],rs.node=[],rs.opsetImport=[],rs.attributeProto=[]),_i.defaults&&(rs.name="",rs.docString="",rs.domain=""),qr.name!=null&&qr.hasOwnProperty("name")&&(rs.name=qr.name),qr.input&&qr.input.length){rs.input=[];for(var is=0;is<qr.input.length;++is)rs.input[is]=qr.input[is]}if(qr.output&&qr.output.length)for(rs.output=[],is=0;is<qr.output.length;++is)rs.output[is]=qr.output[is];if(qr.attribute&&qr.attribute.length)for(rs.attribute=[],is=0;is<qr.attribute.length;++is)rs.attribute[is]=qr.attribute[is];if(qr.node&&qr.node.length)for(rs.node=[],is=0;is<qr.node.length;++is)rs.node[is]=ns.onnx.NodeProto.toObject(qr.node[is],_i);if(qr.docString!=null&&qr.hasOwnProperty("docString")&&(rs.docString=qr.docString),qr.opsetImport&&qr.opsetImport.length)for(rs.opsetImport=[],is=0;is<qr.opsetImport.length;++is)rs.opsetImport[is]=ns.onnx.OperatorSetIdProto.toObject(qr.opsetImport[is],_i);if(qr.domain!=null&&qr.hasOwnProperty("domain")&&(rs.domain=qr.domain),qr.attributeProto&&qr.attributeProto.length)for(rs.attributeProto=[],is=0;is<qr.attributeProto.length;++is)rs.attributeProto[is]=ns.onnx.AttributeProto.toObject(qr.attributeProto[is],_i);return rs},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},Xr.getTypeUrl=function(qr){return qr===void 0&&(qr="type.googleapis.com"),qr+"/onnx.FunctionProto"},Xr}(),Wr),Nr.exports=ns},3474:(Nr,_r,Ur)=>{var jr,Gr=(jr=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(jr=jr||__filename),function(Wr={}){function Zr(){return As.buffer!=Js.buffer&&go(),Js}function Yr(){return As.buffer!=Js.buffer&&go(),ho}function ts(){return As.buffer!=Js.buffer&&go(),so}function es(){return As.buffer!=Js.buffer&&go(),io}function ns(){return As.buffer!=Js.buffer&&go(),vo}var Xr,qr,_i=Wr;_i.ready=new Promise((gs,$s)=>{Xr=gs,qr=$s});var rs,is,ss,os=Object.assign({},_i),ls="./this.program",cs=(gs,$s)=>{throw $s},ds=typeof window=="object",fs=typeof importScripts=="function",ms=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ps=_i.ENVIRONMENT_IS_PTHREAD||!1,ys="";function ws(gs){return _i.locateFile?_i.locateFile(gs,ys):ys+gs}if(ms){var xs=Ur(1384),Es=Ur(908);let gs;ys=fs?Es.dirname(ys)+"/":__dirname+"/",rs=($s,Ds)=>($s=$s.startsWith("file://")?new URL($s):Es.normalize($s),xs.readFileSync($s,Ds?void 0:"utf8")),ss=$s=>(($s=rs($s,!0)).buffer||($s=new Uint8Array($s)),$s),is=($s,Ds,js,Vs=!0)=>{$s=$s.startsWith("file://")?new URL($s):Es.normalize($s),xs.readFile($s,Vs?void 0:"utf8",(no,uo)=>{no?js(no):Ds(Vs?uo.buffer:uo)})},!_i.thisProgram&&1<process.argv.length&&(ls=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),cs=($s,Ds)=>{throw process.exitCode=$s,Ds},_i.inspect=()=>"[Emscripten Module object]";try{gs=Ur(9925)}catch($s){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),$s}commonjsGlobal.Worker=gs.Worker}else(ds||fs)&&(fs?ys=self.location.href:typeof document<"u"&&document.currentScript&&(ys=document.currentScript.src),jr&&(ys=jr),ys=ys.indexOf("blob:")!==0?ys.substr(0,ys.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ms||(rs=gs=>{var $s=new XMLHttpRequest;return $s.open("GET",gs,!1),$s.send(null),$s.responseText},fs&&(ss=gs=>{var $s=new XMLHttpRequest;return $s.open("GET",gs,!1),$s.responseType="arraybuffer",$s.send(null),new Uint8Array($s.response)}),is=(gs,$s,Ds)=>{var js=new XMLHttpRequest;js.open("GET",gs,!0),js.responseType="arraybuffer",js.onload=()=>{js.status==200||js.status==0&&js.response?$s(js.response):Ds()},js.onerror=Ds,js.send(null)}));ms&&typeof performance>"u"&&(commonjsGlobal.performance=Ur(6953).performance);var Rs=console.log.bind(console),_s=console.error.bind(console);ms&&(Rs=(...gs)=>xs.writeSync(1,gs.join(" ")+`
`),_s=(...gs)=>xs.writeSync(2,gs.join(" ")+`
`));var Bs,vs=_i.print||Rs,Cs=_i.printErr||_s;Object.assign(_i,os),os=null,_i.thisProgram&&(ls=_i.thisProgram),_i.quit&&(cs=_i.quit),_i.wasmBinary&&(Bs=_i.wasmBinary);var Ss=_i.noExitRuntime||!0;typeof WebAssembly!="object"&&No("no native wasm support detected");var As,Us,Ks,Ws,Js,ho,so,io,vo,co=!1;function go(){var gs=As.buffer;_i.HEAP8=Js=new Int8Array(gs),_i.HEAP16=new Int16Array(gs),_i.HEAP32=so=new Int32Array(gs),_i.HEAPU8=ho=new Uint8Array(gs),_i.HEAPU16=new Uint16Array(gs),_i.HEAPU32=io=new Uint32Array(gs),_i.HEAPF32=new Float32Array(gs),_i.HEAPF64=vo=new Float64Array(gs)}var Eo=_i.INITIAL_MEMORY||16777216;if(5242880<=Eo||No("INITIAL_MEMORY should be larger than STACK_SIZE, was "+Eo+"! (STACK_SIZE=5242880)"),ps)As=_i.wasmMemory;else if(_i.wasmMemory)As=_i.wasmMemory;else if(!((As=new WebAssembly.Memory({initial:Eo/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Cs("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),ms&&Cs("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");go(),Eo=As.buffer.byteLength;var Ro,Po=[],Oo=[],Ts=[],Ns=0;function to(){return Ss||0<Ns}var ao,lo,Io=0,po=null;function Fo(){Io++,_i.monitorRunDependencies&&_i.monitorRunDependencies(Io)}function Do(){if(Io--,_i.monitorRunDependencies&&_i.monitorRunDependencies(Io),Io==0&&po){var gs=po;po=null,gs()}}function No(gs){throw _i.onAbort&&_i.onAbort(gs),Cs(gs="Aborted("+gs+")"),co=!0,Ws=1,gs=new WebAssembly.RuntimeError(gs+". Build with -sASSERTIONS for more info."),qr(gs),gs}function Co(gs){return gs.startsWith("data:application/octet-stream;base64,")}function qo(gs){if(gs==ao&&Bs)return new Uint8Array(Bs);if(ss)return ss(gs);throw"both async and sync fetching of the wasm failed"}function Mo(gs,$s,Ds){return function(js){if(!Bs&&(ds||fs)){if(typeof fetch=="function"&&!js.startsWith("file://"))return fetch(js,{credentials:"same-origin"}).then(Vs=>{if(!Vs.ok)throw"failed to load wasm binary file at '"+js+"'";return Vs.arrayBuffer()}).catch(()=>qo(js));if(is)return new Promise((Vs,no)=>{is(js,uo=>Vs(new Uint8Array(uo)),no)})}return Promise.resolve().then(()=>qo(js))}(gs).then(js=>WebAssembly.instantiate(js,$s)).then(js=>js).then(Ds,js=>{Cs("failed to asynchronously prepare wasm: "+js),No(js)})}function _l(gs){this.name="ExitStatus",this.message=`Program terminated with exit(${gs})`,this.status=gs}function Al(gs){gs.terminate(),gs.onmessage=()=>{}}function Yl(gs){(gs=Ps.Fa[gs])||No(),Ps.fb(gs)}function Ul(gs){var $s=Ps.Za();if(!$s)return 6;Ps.Ia.push($s),Ps.Fa[gs.Ha]=$s,$s.Ha=gs.Ha;var Ds={cmd:"run",start_routine:gs.gb,arg:gs.Ya,pthread_ptr:gs.Ha};return ms&&$s.unref(),$s.postMessage(Ds,gs.mb),0}Co(ao="ort-wasm-threaded.wasm")||(ao=ws(ao));var eu=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,du=(gs,$s,Ds)=>{var js=($s>>>=0)+Ds;for(Ds=$s;gs[Ds]&&!(Ds>=js);)++Ds;if(16<Ds-$s&&gs.buffer&&eu)return eu.decode(gs.buffer instanceof SharedArrayBuffer?gs.slice($s,Ds):gs.subarray($s,Ds));for(js="";$s<Ds;){var Vs=gs[$s++];if(128&Vs){var no=63&gs[$s++];if((224&Vs)==192)js+=String.fromCharCode((31&Vs)<<6|no);else{var uo=63&gs[$s++];65536>(Vs=(240&Vs)==224?(15&Vs)<<12|no<<6|uo:(7&Vs)<<18|no<<12|uo<<6|63&gs[$s++])?js+=String.fromCharCode(Vs):(Vs-=65536,js+=String.fromCharCode(55296|Vs>>10,56320|1023&Vs))}}else js+=String.fromCharCode(Vs)}return js},ru=(gs,$s)=>(gs>>>=0)?du(Yr(),gs,$s):"";function tu(gs){if(ps)return Ol(1,1,gs);Ws=gs,to()||(Ps.hb(),_i.onExit&&_i.onExit(gs),co=!0),cs(gs,new _l(gs))}var $l=gs=>{if(Ws=gs,ps)throw Gs(gs),"unwind";tu(gs)},Ps={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){ps?Ps.ab():Ps.$a()},$a:function(){Po.unshift(()=>{Fo(),Ps.bb(()=>Do())})},ab:function(){Ps.receiveObjectTransfer=Ps.eb,Ps.threadInitTLS=Ps.Sa,Ps.setExitStatus=Ps.Ra,Ss=!1},Ra:function(gs){Ws=gs},rb:["$terminateWorker"],hb:function(){for(var gs of Ps.Ia)Al(gs);for(gs of Ps.La)Al(gs);Ps.La=[],Ps.Ia=[],Ps.Fa=[]},fb:function(gs){var $s=gs.Ha;delete Ps.Fa[$s],Ps.La.push(gs),Ps.Ia.splice(Ps.Ia.indexOf(gs),1),gs.Ha=0,_p($s)},eb:function(){},Sa:function(){Ps.Ta.forEach(gs=>gs())},cb:gs=>new Promise($s=>{gs.onmessage=Vs=>{var no=(Vs=Vs.data).cmd;if(Vs.targetThread&&Vs.targetThread!=fp()){var uo=Ps.Fa[Vs.qb];uo?uo.postMessage(Vs,Vs.transferList):Cs('Internal error! Worker sent a message "'+no+'" to target pthread '+Vs.targetThread+", but that thread no longer exists!")}else no==="checkMailbox"?Ku():no==="spawnThread"?Ul(Vs):no==="cleanupThread"?Yl(Vs.thread):no==="killThread"?(Vs=Vs.thread,no=Ps.Fa[Vs],delete Ps.Fa[Vs],Al(no),_p(Vs),Ps.Ia.splice(Ps.Ia.indexOf(no),1),no.Ha=0):no==="cancelThread"?Ps.Fa[Vs.thread].postMessage({cmd:"cancel"}):no==="loaded"?(gs.loaded=!0,$s(gs)):no==="alert"?alert("Thread "+Vs.threadId+": "+Vs.text):Vs.target==="setimmediate"?gs.postMessage(Vs):no==="callHandler"?_i[Vs.handler](...Vs.args):no&&Cs("worker sent an unknown command "+no)},gs.onerror=Vs=>{throw Cs("worker sent an error! "+Vs.filename+":"+Vs.lineno+": "+Vs.message),Vs},ms&&(gs.on("message",function(Vs){gs.onmessage({data:Vs})}),gs.on("error",function(Vs){gs.onerror(Vs)}));var Ds,js=[];for(Ds of["onExit","onAbort","print","printErr"])_i.hasOwnProperty(Ds)&&js.push(Ds);gs.postMessage({cmd:"load",handlers:js,urlOrBlob:_i.mainScriptUrlOrBlob||jr,wasmMemory:As,wasmModule:Ks})}),bb:function(gs){gs()},Xa:function(){var gs=ws("ort-wasm-threaded.worker.js");gs=new Worker(gs),Ps.La.push(gs)},Za:function(){return Ps.La.length==0&&(Ps.Xa(),Ps.cb(Ps.La[0])),Ps.La.pop()}};_i.PThread=Ps;var Os=gs=>{for(;0<gs.length;)gs.shift()(_i)};function Gs(gs){if(ps)return Ol(2,0,gs);$l(gs)}_i.establishStackSpace=function(){var gs=fp(),$s=ts()[gs+52>>2>>>0];gs=ts()[gs+56>>2>>>0],Cp($s,$s-gs),Ru($s)};var Is=[];function zs(gs){this.Oa=gs-24,this.Wa=function($s){es()[this.Oa+4>>2>>>0]=$s},this.Va=function($s){es()[this.Oa+8>>2>>>0]=$s},this.Pa=function($s,Ds){this.Ua(),this.Wa($s),this.Va(Ds)},this.Ua=function(){es()[this.Oa+16>>2>>>0]=0}}function qs(gs,$s,Ds,js){return ps?Ol(3,1,gs,$s,Ds,js):Ys(gs,$s,Ds,js)}function Ys(gs,$s,Ds,js){if(gs>>>=0,$s>>>=0,Ds>>>=0,js>>>=0,typeof SharedArrayBuffer>"u")return Cs("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Vs=[];return ps&&Vs.length===0?qs(gs,$s,Ds,js):(gs={gb:Ds,Ha:gs,Ya:js,mb:Vs},ps?(gs.ob="spawnThread",postMessage(gs,Vs),0):Ul(gs))}function Xs(gs,$s,Ds){return ps?Ol(4,1,gs,$s,Ds):0}function xo(gs,$s){if(ps)return Ol(5,1,gs,$s)}_i.invokeEntryPoint=function(gs,$s){var Ds=Is[gs];Ds||(gs>=Is.length&&(Is.length=gs+1),Is[gs]=Ds=Ro.get(gs)),gs=Ds($s),to()?Ps.Ra(gs):tp(gs)};var To=gs=>{for(var $s=0,Ds=0;Ds<gs.length;++Ds){var js=gs.charCodeAt(Ds);127>=js?$s++:2047>=js?$s+=2:55296<=js&&57343>=js?($s+=4,++Ds):$s+=3}return $s},jo=(gs,$s,Ds,js)=>{if(!(0<js))return 0;var Vs=Ds>>>=0;js=Ds+js-1;for(var no=0;no<gs.length;++no){var uo=gs.charCodeAt(no);if(55296<=uo&&57343>=uo&&(uo=65536+((1023&uo)<<10)|1023&gs.charCodeAt(++no)),127>=uo){if(Ds>=js)break;$s[Ds++>>>0]=uo}else{if(2047>=uo){if(Ds+1>=js)break;$s[Ds++>>>0]=192|uo>>6}else{if(65535>=uo){if(Ds+2>=js)break;$s[Ds++>>>0]=224|uo>>12}else{if(Ds+3>=js)break;$s[Ds++>>>0]=240|uo>>18,$s[Ds++>>>0]=128|uo>>12&63}$s[Ds++>>>0]=128|uo>>6&63}$s[Ds++>>>0]=128|63&uo}}return $s[Ds>>>0]=0,Ds-Vs},Xo=(gs,$s,Ds)=>jo(gs,Yr(),$s,Ds);function Uo(gs,$s){if(ps)return Ol(6,1,gs,$s)}function Ml(gs,$s,Ds){if(ps)return Ol(7,1,gs,$s,Ds)}function fu(gs,$s,Ds){return ps?Ol(8,1,gs,$s,Ds):0}function xu(gs,$s){if(ps)return Ol(9,1,gs,$s)}function fo(gs,$s,Ds){if(ps)return Ol(10,1,gs,$s,Ds)}function xl(gs,$s,Ds,js){if(ps)return Ol(11,1,gs,$s,Ds,js)}function Pl(gs,$s,Ds,js){if(ps)return Ol(12,1,gs,$s,Ds,js)}function wu(gs,$s,Ds,js){if(ps)return Ol(13,1,gs,$s,Ds,js)}function lp(gs){if(ps)return Ol(14,1,gs)}function qu(gs,$s){if(ps)return Ol(15,1,gs,$s)}function up(gs,$s,Ds){if(ps)return Ol(16,1,gs,$s,Ds)}var wm=gs=>{if(!co)try{if(gs(),!to())try{ps?tp(Ws):$l(Ws)}catch($s){$s instanceof _l||$s=="unwind"||cs(1,$s)}}catch($s){$s instanceof _l||$s=="unwind"||cs(1,$s)}};function ou(gs){gs>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(ts(),gs>>2,gs).value.then(Ku),gs+=128,Atomics.store(ts(),gs>>2,1))}function Ku(){var gs=fp();gs&&(ou(gs),wm(()=>$p()))}_i.__emscripten_thread_mailbox_await=ou,_i.checkMailbox=Ku;var Mu=gs=>gs%4==0&&(gs%100!=0||gs%400==0),Zu=[0,31,60,91,121,152,182,213,244,274,305,335],rm=[0,31,59,90,120,151,181,212,243,273,304,334];function nm(gs,$s,Ds,js,Vs,no,uo,So){return ps?Ol(17,1,gs,$s,Ds,js,Vs,no,uo,So):-52}function im(gs,$s,Ds,js,Vs,no,uo){if(ps)return Ol(18,1,gs,$s,Ds,js,Vs,no,uo)}var Fp=gs=>{var $s=To(gs)+1,Ds=hp($s);return Ds&&Xo(gs,Ds,$s),Ds},Em=gs=>{var $s=Fu();return gs=gs(),Ru($s),gs};function Ol(gs,$s){var Ds=arguments.length-2,js=arguments;return Em(()=>{for(var Vs=Xu(8*Ds),no=Vs>>3,uo=0;uo<Ds;uo++){var So=js[2+uo];ns()[no+uo>>>0]=So}return ep(gs,Ds,Vs,$s)})}var Yu,cp=[],Eu={},Rl=()=>{if(!Yu){var gs,$s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ls||"./this.program"};for(gs in Eu)Eu[gs]===void 0?delete $s[gs]:$s[gs]=Eu[gs];var Ds=[];for(gs in $s)Ds.push(`${gs}=${$s[gs]}`);Yu=Ds}return Yu};function Bp(gs,$s){if(ps)return Ol(19,1,gs,$s);gs>>>=0,$s>>>=0;var Ds=0;return Rl().forEach(function(js,Vs){var no=$s+Ds;for(Vs=es()[gs+4*Vs>>2>>>0]=no,no=0;no<js.length;++no)Zr()[Vs++>>0>>>0]=js.charCodeAt(no);Zr()[Vs>>0>>>0]=0,Ds+=js.length+1}),0}function sm(gs,$s){if(ps)return Ol(20,1,gs,$s);gs>>>=0,$s>>>=0;var Ds=Rl();es()[gs>>2>>>0]=Ds.length;var js=0;return Ds.forEach(function(Vs){js+=Vs.length+1}),es()[$s>>2>>>0]=js,0}function Up(gs){return ps?Ol(21,1,gs):52}function dp(gs,$s,Ds,js){return ps?Ol(22,1,gs,$s,Ds,js):52}function jp(gs,$s,Ds,js,Vs){return ps?Ol(23,1,gs,$s,Ds,js,Vs):70}var zp=[null,[],[]];function om(gs,$s,Ds,js){if(ps)return Ol(24,1,gs,$s,Ds,js);$s>>>=0,Ds>>>=0,js>>>=0;for(var Vs=0,no=0;no<Ds;no++){var uo=es()[$s>>2>>>0],So=es()[$s+4>>2>>>0];$s+=8;for(var _o=0;_o<So;_o++){var Ho=Yr()[uo+_o>>>0],Lo=zp[gs];Ho===0||Ho===10?((gs===1?vs:Cs)(du(Lo,0)),Lo.length=0):Lo.push(Ho)}Vs+=So}return es()[js>>2>>>0]=Vs,0}var Hp=gs=>(Hp=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return js=>(js.set(crypto.getRandomValues(new Uint8Array(js.byteLength))),js);if(ms)try{var $s=Ur(760);if($s.randomFillSync)return js=>$s.randomFillSync(js);var Ds=$s.randomBytes;return js=>(js.set(Ds(js.byteLength)),js)}catch{}No("initRandomDevice")})())(gs),Sp=[31,29,31,30,31,30,31,31,30,31,30,31],Vp=[31,28,31,30,31,30,31,31,30,31,30,31],am=(gs,$s)=>{Zr().set(gs,$s>>>0)};function Gp(gs,$s,Ds,js){function Vs(ro,$o,ko){for(ro=typeof ro=="number"?ro.toString():ro||"";ro.length<$o;)ro=ko[0]+ro;return ro}function no(ro,$o){return Vs(ro,$o,"0")}function uo(ro,$o){function ko(na){return 0>na?-1:0<na?1:0}var zo;return(zo=ko(ro.getFullYear()-$o.getFullYear()))===0&&(zo=ko(ro.getMonth()-$o.getMonth()))===0&&(zo=ko(ro.getDate()-$o.getDate())),zo}function So(ro){switch(ro.getDay()){case 0:return new Date(ro.getFullYear()-1,11,29);case 1:return ro;case 2:return new Date(ro.getFullYear(),0,3);case 3:return new Date(ro.getFullYear(),0,2);case 4:return new Date(ro.getFullYear(),0,1);case 5:return new Date(ro.getFullYear()-1,11,31);case 6:return new Date(ro.getFullYear()-1,11,30)}}function _o(ro){var $o=ro.Ja;for(ro=new Date(new Date(ro.Ka+1900,0,1).getTime());0<$o;){var ko=ro.getMonth(),zo=(Mu(ro.getFullYear())?Sp:Vp)[ko];if(!($o>zo-ro.getDate())){ro.setDate(ro.getDate()+$o);break}$o-=zo-ro.getDate()+1,ro.setDate(1),11>ko?ro.setMonth(ko+1):(ro.setMonth(0),ro.setFullYear(ro.getFullYear()+1))}return ko=new Date(ro.getFullYear()+1,0,4),$o=So(new Date(ro.getFullYear(),0,4)),ko=So(ko),0>=uo($o,ro)?0>=uo(ko,ro)?ro.getFullYear()+1:ro.getFullYear():ro.getFullYear()-1}gs>>>=0,$s>>>=0,Ds>>>=0,js>>>=0;var Ho=ts()[js+40>>2>>>0];for(var Lo in js={kb:ts()[js>>2>>>0],jb:ts()[js+4>>2>>>0],Ma:ts()[js+8>>2>>>0],Qa:ts()[js+12>>2>>>0],Na:ts()[js+16>>2>>>0],Ka:ts()[js+20>>2>>>0],Ga:ts()[js+24>>2>>>0],Ja:ts()[js+28>>2>>>0],sb:ts()[js+32>>2>>>0],ib:ts()[js+36>>2>>>0],lb:Ho?ru(Ho):""},Ds=ru(Ds),Ho={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Ds=Ds.replace(new RegExp(Lo,"g"),Ho[Lo]);var ba="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Jo="January February March April May June July August September October November December".split(" ");for(Lo in Ho={"%a":ro=>ba[ro.Ga].substring(0,3),"%A":ro=>ba[ro.Ga],"%b":ro=>Jo[ro.Na].substring(0,3),"%B":ro=>Jo[ro.Na],"%C":ro=>no((ro.Ka+1900)/100|0,2),"%d":ro=>no(ro.Qa,2),"%e":ro=>Vs(ro.Qa,2," "),"%g":ro=>_o(ro).toString().substring(2),"%G":ro=>_o(ro),"%H":ro=>no(ro.Ma,2),"%I":ro=>((ro=ro.Ma)==0?ro=12:12<ro&&(ro-=12),no(ro,2)),"%j":ro=>{for(var $o=0,ko=0;ko<=ro.Na-1;$o+=(Mu(ro.Ka+1900)?Sp:Vp)[ko++]);return no(ro.Qa+$o,3)},"%m":ro=>no(ro.Na+1,2),"%M":ro=>no(ro.jb,2),"%n":()=>`
`,"%p":ro=>0<=ro.Ma&&12>ro.Ma?"AM":"PM","%S":ro=>no(ro.kb,2),"%t":()=>"	","%u":ro=>ro.Ga||7,"%U":ro=>no(Math.floor((ro.Ja+7-ro.Ga)/7),2),"%V":ro=>{var $o=Math.floor((ro.Ja+7-(ro.Ga+6)%7)/7);if(2>=(ro.Ga+371-ro.Ja-2)%7&&$o++,$o)$o==53&&((ko=(ro.Ga+371-ro.Ja)%7)==4||ko==3&&Mu(ro.Ka)||($o=1));else{$o=52;var ko=(ro.Ga+7-ro.Ja-1)%7;(ko==4||ko==5&&Mu(ro.Ka%400-1))&&$o++}return no($o,2)},"%w":ro=>ro.Ga,"%W":ro=>no(Math.floor((ro.Ja+7-(ro.Ga+6)%7)/7),2),"%y":ro=>(ro.Ka+1900).toString().substring(2),"%Y":ro=>ro.Ka+1900,"%z":ro=>{var $o=0<=(ro=ro.ib);return ro=Math.abs(ro)/60,($o?"+":"-")+("0000"+(ro/60*100+ro%60)).slice(-4)},"%Z":ro=>ro.lb,"%%":()=>"%"},Ds=Ds.replace(/%%/g,"\0\0"),Ho)Ds.includes(Lo)&&(Ds=Ds.replace(new RegExp(Lo,"g"),Ho[Lo](js)));return Lo=function(ro){var $o=Array(To(ro)+1);return jo(ro,$o,0,$o.length),$o}(Ds=Ds.replace(/\0\0/g,"%")),Lo.length>$s?0:(am(Lo,gs),Lo.length-1)}Ps.Pa();var Wp=[null,tu,Gs,qs,Xs,xo,Uo,Ml,fu,xu,fo,xl,Pl,wu,lp,qu,up,nm,im,Bp,sm,Up,dp,jp,om],Tm={b:function(gs,$s,Ds){throw new zs(gs>>>=0).Pa($s>>>0,Ds>>>0),gs},N:function(gs){Fl(gs>>>0,!fs,1,!ds,131072,!1),Ps.Sa()},k:function(gs){gs>>>=0,ps?postMessage({cmd:"cleanupThread",thread:gs}):Yl(gs)},I:Ys,h:Xs,T:xo,E:Uo,G:Ml,U:fu,R:xu,J:fo,Q:xl,o:Pl,F:wu,C:lp,S:qu,D:up,q:()=>!0,A:function(gs,$s){(gs>>>=0)==$s>>>0?setTimeout(()=>Ku()):ps?postMessage({targetThread:gs,cmd:"checkMailbox"}):(gs=Ps.Fa[gs])&&gs.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:ou,p:function(gs){ms&&Ps.Fa[gs>>>0].ref()},t:function(gs,$s,Ds){gs=$s+2097152>>>0<4194305-!!gs?(gs>>>0)+4294967296*$s:NaN,Ds>>>=0,gs=new Date(1e3*gs),ts()[Ds>>2>>>0]=gs.getUTCSeconds(),ts()[Ds+4>>2>>>0]=gs.getUTCMinutes(),ts()[Ds+8>>2>>>0]=gs.getUTCHours(),ts()[Ds+12>>2>>>0]=gs.getUTCDate(),ts()[Ds+16>>2>>>0]=gs.getUTCMonth(),ts()[Ds+20>>2>>>0]=gs.getUTCFullYear()-1900,ts()[Ds+24>>2>>>0]=gs.getUTCDay(),gs=(gs.getTime()-Date.UTC(gs.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,ts()[Ds+28>>2>>>0]=gs},u:function(gs,$s,Ds){gs=$s+2097152>>>0<4194305-!!gs?(gs>>>0)+4294967296*$s:NaN,Ds>>>=0,gs=new Date(1e3*gs),ts()[Ds>>2>>>0]=gs.getSeconds(),ts()[Ds+4>>2>>>0]=gs.getMinutes(),ts()[Ds+8>>2>>>0]=gs.getHours(),ts()[Ds+12>>2>>>0]=gs.getDate(),ts()[Ds+16>>2>>>0]=gs.getMonth(),ts()[Ds+20>>2>>>0]=gs.getFullYear()-1900,ts()[Ds+24>>2>>>0]=gs.getDay(),$s=(Mu(gs.getFullYear())?Zu:rm)[gs.getMonth()]+gs.getDate()-1|0,ts()[Ds+28>>2>>>0]=$s,ts()[Ds+36>>2>>>0]=-60*gs.getTimezoneOffset(),$s=new Date(gs.getFullYear(),6,1).getTimezoneOffset();var js=new Date(gs.getFullYear(),0,1).getTimezoneOffset();gs=0|($s!=js&&gs.getTimezoneOffset()==Math.min(js,$s)),ts()[Ds+32>>2>>>0]=gs},v:function(gs){gs>>>=0;var $s=new Date(ts()[gs+20>>2>>>0]+1900,ts()[gs+16>>2>>>0],ts()[gs+12>>2>>>0],ts()[gs+8>>2>>>0],ts()[gs+4>>2>>>0],ts()[gs>>2>>>0],0),Ds=ts()[gs+32>>2>>>0],js=$s.getTimezoneOffset(),Vs=new Date($s.getFullYear(),6,1).getTimezoneOffset(),no=new Date($s.getFullYear(),0,1).getTimezoneOffset(),uo=Math.min(no,Vs);return 0>Ds?ts()[gs+32>>2>>>0]=+(Vs!=no&&uo==js):0<Ds!=(uo==js)&&(Vs=Math.max(no,Vs),$s.setTime($s.getTime()+6e4*((0<Ds?uo:Vs)-js))),ts()[gs+24>>2>>>0]=$s.getDay(),Ds=(Mu($s.getFullYear())?Zu:rm)[$s.getMonth()]+$s.getDate()-1|0,ts()[gs+28>>2>>>0]=Ds,ts()[gs>>2>>>0]=$s.getSeconds(),ts()[gs+4>>2>>>0]=$s.getMinutes(),ts()[gs+8>>2>>>0]=$s.getHours(),ts()[gs+12>>2>>>0]=$s.getDate(),ts()[gs+16>>2>>>0]=$s.getMonth(),ts()[gs+20>>2>>>0]=$s.getYear(),gs=$s.getTime()/1e3,qp((lo=gs,1<=+Math.abs(lo)?0<lo?+Math.floor(lo/4294967296)>>>0:~~+Math.ceil((lo-+(~~lo>>>0))/4294967296)>>>0:0)),gs>>>0},r:nm,s:im,z:function(gs,$s,Ds){function js(Ho){return(Ho=Ho.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ho[1]:"GMT"}gs>>>=0,$s>>>=0,Ds>>>=0;var Vs=new Date().getFullYear(),no=new Date(Vs,0,1),uo=new Date(Vs,6,1);Vs=no.getTimezoneOffset();var So=uo.getTimezoneOffset(),_o=Math.max(Vs,So);es()[gs>>2>>>0]=60*_o,ts()[$s>>2>>>0]=+(Vs!=So),gs=js(no),$s=js(uo),gs=Fp(gs),$s=Fp($s),So<Vs?(es()[Ds>>2>>>0]=gs,es()[Ds+4>>2>>>0]=$s):(es()[Ds>>2>>>0]=$s,es()[Ds+4>>2>>>0]=gs)},c:()=>{No("")},l:function(){},i:function(){return Date.now()},V:()=>{throw Ns+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return ms?Ur(3993).cpus().length:navigator.hardwareConcurrency},K:function(gs,$s,Ds,js){for(Ps.pb=$s>>>0,cp.length=Ds,$s=js>>>0>>3,js=0;js<Ds;js++)cp[js]=ns()[$s+js>>>0];return Wp[gs].apply(null,cp)},y:function(gs){gs>>>=0;var $s=Yr().length;if(gs<=$s||4294901760<gs)return!1;for(var Ds=1;4>=Ds;Ds*=2){var js=$s*(1+.2/Ds);js=Math.min(js,gs+100663296);var Vs=Math;js=Math.max(gs,js);e:{Vs=Vs.min.call(Vs,4294901760,js+(65536-js%65536)%65536)-As.buffer.byteLength+65535>>>16;try{As.grow(Vs),go();var no=1;break e}catch{}no=void 0}if(no)return!0}return!1},O:Bp,P:sm,j:$l,g:Up,n:dp,w:jp,m:om,x:function(gs,$s){return gs>>>=0,$s>>>=0,Hp(Yr().subarray(gs>>>0,gs+$s>>>0)),0},a:As||_i.wasmMemory,H:Gp,d:function(gs,$s,Ds,js){return Gp(gs>>>0,$s>>>0,Ds>>>0,js>>>0)}};(function(){function gs(Ds,js){return Ds=Ds.exports,Us=Ds=function(Vs){var no=So=>()=>So()>>>0,uo=So=>_o=>So(_o)>>>0;return(Vs=Object.assign({},Vs)).__errno_location=no(Vs.__errno_location),Vs.pthread_self=no(Vs.pthread_self),Vs.malloc=uo(Vs.malloc),Vs.stackSave=no(Vs.stackSave),Vs.stackAlloc=uo(Vs.stackAlloc),Vs}(Ds),Ps.Ta.push(Us.sa),Ro=Us.ta,Oo.unshift(Us.W),Ks=js,Do(),Ds}var $s={a:Tm};if(Fo(),_i.instantiateWasm)try{return _i.instantiateWasm($s,gs)}catch(Ds){Cs("Module.instantiateWasm callback failed with error: "+Ds),qr(Ds)}(function(Ds,js){var Vs=ao;return Bs||typeof WebAssembly.instantiateStreaming!="function"||Co(Vs)||Vs.startsWith("file://")||ms||typeof fetch!="function"?Mo(Vs,Ds,js):fetch(Vs,{credentials:"same-origin"}).then(no=>WebAssembly.instantiateStreaming(no,Ds).then(js,function(uo){return Cs("wasm streaming compile failed: "+uo),Cs("falling back to ArrayBuffer instantiation"),Mo(Vs,Ds,js)}))})($s,function(Ds){gs(Ds.instance,Ds.module)}).catch(qr)})(),_i._OrtInit=(gs,$s)=>(_i._OrtInit=Us.X)(gs,$s),_i._OrtGetLastError=(gs,$s)=>(_i._OrtGetLastError=Us.Y)(gs,$s),_i._OrtCreateSessionOptions=(gs,$s,Ds,js,Vs,no,uo,So,_o,Ho)=>(_i._OrtCreateSessionOptions=Us.Z)(gs,$s,Ds,js,Vs,no,uo,So,_o,Ho),_i._OrtAppendExecutionProvider=(gs,$s)=>(_i._OrtAppendExecutionProvider=Us._)(gs,$s),_i._OrtAddSessionConfigEntry=(gs,$s,Ds)=>(_i._OrtAddSessionConfigEntry=Us.$)(gs,$s,Ds),_i._OrtReleaseSessionOptions=gs=>(_i._OrtReleaseSessionOptions=Us.aa)(gs),_i._OrtCreateSession=(gs,$s,Ds)=>(_i._OrtCreateSession=Us.ba)(gs,$s,Ds),_i._OrtReleaseSession=gs=>(_i._OrtReleaseSession=Us.ca)(gs),_i._OrtGetInputOutputCount=(gs,$s,Ds)=>(_i._OrtGetInputOutputCount=Us.da)(gs,$s,Ds),_i._OrtGetInputName=(gs,$s)=>(_i._OrtGetInputName=Us.ea)(gs,$s),_i._OrtGetOutputName=(gs,$s)=>(_i._OrtGetOutputName=Us.fa)(gs,$s),_i._OrtFree=gs=>(_i._OrtFree=Us.ga)(gs),_i._OrtCreateTensor=(gs,$s,Ds,js,Vs)=>(_i._OrtCreateTensor=Us.ha)(gs,$s,Ds,js,Vs),_i._OrtGetTensorData=(gs,$s,Ds,js,Vs)=>(_i._OrtGetTensorData=Us.ia)(gs,$s,Ds,js,Vs),_i._OrtReleaseTensor=gs=>(_i._OrtReleaseTensor=Us.ja)(gs),_i._OrtCreateRunOptions=(gs,$s,Ds,js)=>(_i._OrtCreateRunOptions=Us.ka)(gs,$s,Ds,js),_i._OrtAddRunConfigEntry=(gs,$s,Ds)=>(_i._OrtAddRunConfigEntry=Us.la)(gs,$s,Ds),_i._OrtReleaseRunOptions=gs=>(_i._OrtReleaseRunOptions=Us.ma)(gs),_i._OrtRun=(gs,$s,Ds,js,Vs,no,uo,So)=>(_i._OrtRun=Us.na)(gs,$s,Ds,js,Vs,no,uo,So),_i._OrtEndProfiling=gs=>(_i._OrtEndProfiling=Us.oa)(gs);var fp=_i._pthread_self=()=>(fp=_i._pthread_self=Us.pa)(),hp=_i._malloc=gs=>(hp=_i._malloc=Us.qa)(gs);_i._free=gs=>(_i._free=Us.ra)(gs),_i.__emscripten_tls_init=()=>(_i.__emscripten_tls_init=Us.sa)();var Fl=_i.__emscripten_thread_init=(gs,$s,Ds,js,Vs,no)=>(Fl=_i.__emscripten_thread_init=Us.ua)(gs,$s,Ds,js,Vs,no);_i.__emscripten_thread_crashed=()=>(_i.__emscripten_thread_crashed=Us.va)();var Nu,ep=(gs,$s,Ds,js)=>(ep=Us.wa)(gs,$s,Ds,js),_p=gs=>(_p=Us.xa)(gs),tp=_i.__emscripten_thread_exit=gs=>(tp=_i.__emscripten_thread_exit=Us.ya)(gs),$p=_i.__emscripten_check_mailbox=()=>($p=_i.__emscripten_check_mailbox=Us.za)(),qp=gs=>(qp=Us.Aa)(gs),Cp=(gs,$s)=>(Cp=Us.Ba)(gs,$s),Fu=()=>(Fu=Us.Ca)(),Ru=gs=>(Ru=Us.Da)(gs),Xu=gs=>(Xu=Us.Ea)(gs);function ks(){function gs(){if(!Nu&&(Nu=!0,_i.calledRun=!0,!co)&&(ps||Os(Oo),Xr(_i),_i.onRuntimeInitialized&&_i.onRuntimeInitialized(),!ps)){if(_i.postRun)for(typeof _i.postRun=="function"&&(_i.postRun=[_i.postRun]);_i.postRun.length;){var $s=_i.postRun.shift();Ts.unshift($s)}Os(Ts)}}if(!(0<Io))if(ps)Xr(_i),ps||Os(Oo),startWorker(_i);else{if(_i.preRun)for(typeof _i.preRun=="function"&&(_i.preRun=[_i.preRun]);_i.preRun.length;)Po.unshift(_i.preRun.shift());Os(Po),0<Io||(_i.setStatus?(_i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){_i.setStatus("")},1),gs()},1)):gs())}}if(_i.keepRuntimeAlive=to,_i.wasmMemory=As,_i.stackAlloc=Xu,_i.stackSave=Fu,_i.stackRestore=Ru,_i.UTF8ToString=ru,_i.stringToUTF8=Xo,_i.lengthBytesUTF8=To,_i.ExitStatus=_l,_i.PThread=Ps,po=function gs(){Nu||ks(),Nu||(po=gs)},_i.preInit)for(typeof _i.preInit=="function"&&(_i.preInit=[_i.preInit]);0<_i.preInit.length;)_i.preInit.pop()();return ks(),Wr.ready});Nr.exports=Gr},932:(Nr,_r,Ur)=>{var jr,Gr=(jr=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(jr=jr||__filename),function(Wr={}){var Zr,Yr,ts=Wr;ts.ready=new Promise((Is,zs)=>{Zr=Is,Yr=zs});var es,ns,Xr,qr=Object.assign({},ts),_i="./this.program",rs=(Is,zs)=>{throw zs},is=typeof window=="object",ss=typeof importScripts=="function",os=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ls="";if(os){var cs=Ur(1384),ds=Ur(908);ls=ss?ds.dirname(ls)+"/":__dirname+"/",es=(Is,zs)=>(Is=Is.startsWith("file://")?new URL(Is):ds.normalize(Is),cs.readFileSync(Is,zs?void 0:"utf8")),Xr=Is=>((Is=es(Is,!0)).buffer||(Is=new Uint8Array(Is)),Is),ns=(Is,zs,qs,Ys=!0)=>{Is=Is.startsWith("file://")?new URL(Is):ds.normalize(Is),cs.readFile(Is,Ys?void 0:"utf8",(Xs,xo)=>{Xs?qs(Xs):zs(Ys?xo.buffer:xo)})},!ts.thisProgram&&1<process.argv.length&&(_i=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),rs=(Is,zs)=>{throw process.exitCode=Is,zs},ts.inspect=()=>"[Emscripten Module object]"}else(is||ss)&&(ss?ls=self.location.href:typeof document<"u"&&document.currentScript&&(ls=document.currentScript.src),jr&&(ls=jr),ls=ls.indexOf("blob:")!==0?ls.substr(0,ls.replace(/[?#].*/,"").lastIndexOf("/")+1):"",es=Is=>{var zs=new XMLHttpRequest;return zs.open("GET",Is,!1),zs.send(null),zs.responseText},ss&&(Xr=Is=>{var zs=new XMLHttpRequest;return zs.open("GET",Is,!1),zs.responseType="arraybuffer",zs.send(null),new Uint8Array(zs.response)}),ns=(Is,zs,qs)=>{var Ys=new XMLHttpRequest;Ys.open("GET",Is,!0),Ys.responseType="arraybuffer",Ys.onload=()=>{Ys.status==200||Ys.status==0&&Ys.response?zs(Ys.response):qs()},Ys.onerror=qs,Ys.send(null)});var fs,ms=ts.print||console.log.bind(console),ps=ts.printErr||console.error.bind(console);Object.assign(ts,qr),qr=null,ts.thisProgram&&(_i=ts.thisProgram),ts.quit&&(rs=ts.quit),ts.wasmBinary&&(fs=ts.wasmBinary);var ys=ts.noExitRuntime||!0;typeof WebAssembly!="object"&&io("no native wasm support detected");var ws,xs,Es,Rs,_s,Bs,vs=!1;function Cs(){var Is=ws.buffer;ts.HEAP8=Es=new Int8Array(Is),ts.HEAP16=new Int16Array(Is),ts.HEAP32=_s=new Int32Array(Is),ts.HEAPU8=Rs=new Uint8Array(Is),ts.HEAPU16=new Uint16Array(Is),ts.HEAPU32=Bs=new Uint32Array(Is),ts.HEAPF32=new Float32Array(Is),ts.HEAPF64=new Float64Array(Is)}var Ss=[],As=[],Us=[];function Ks(){var Is=ts.preRun.shift();Ss.unshift(Is)}var Ws,Js,ho=0,so=null;function io(Is){throw ts.onAbort&&ts.onAbort(Is),ps(Is="Aborted("+Is+")"),vs=!0,Is=new WebAssembly.RuntimeError(Is+". Build with -sASSERTIONS for more info."),Yr(Is),Is}function vo(Is){return Is.startsWith("data:application/octet-stream;base64,")}if(!vo(Ws="ort-wasm.wasm")){var co=Ws;Ws=ts.locateFile?ts.locateFile(co,ls):ls+co}function go(Is){if(Is==Ws&&fs)return new Uint8Array(fs);if(Xr)return Xr(Is);throw"both async and sync fetching of the wasm failed"}function Eo(Is,zs,qs){return function(Ys){if(!fs&&(is||ss)){if(typeof fetch=="function"&&!Ys.startsWith("file://"))return fetch(Ys,{credentials:"same-origin"}).then(Xs=>{if(!Xs.ok)throw"failed to load wasm binary file at '"+Ys+"'";return Xs.arrayBuffer()}).catch(()=>go(Ys));if(ns)return new Promise((Xs,xo)=>{ns(Ys,To=>Xs(new Uint8Array(To)),xo)})}return Promise.resolve().then(()=>go(Ys))}(Is).then(Ys=>WebAssembly.instantiate(Ys,zs)).then(Ys=>Ys).then(qs,Ys=>{ps("failed to asynchronously prepare wasm: "+Ys),io(Ys)})}function Ro(Is){this.name="ExitStatus",this.message=`Program terminated with exit(${Is})`,this.status=Is}var Po=Is=>{for(;0<Is.length;)Is.shift()(ts)};function Oo(Is){this.qa=Is-24,this.va=function(zs){Bs[this.qa+4>>2>>>0]=zs},this.ua=function(zs){Bs[this.qa+8>>2>>>0]=zs},this.sa=function(zs,qs){this.ta(),this.va(zs),this.ua(qs)},this.ta=function(){Bs[this.qa+16>>2>>>0]=0}}var Ts,Ns=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,to=(Is,zs,qs)=>{var Ys=(zs>>>=0)+qs;for(qs=zs;Is[qs]&&!(qs>=Ys);)++qs;if(16<qs-zs&&Is.buffer&&Ns)return Ns.decode(Is.subarray(zs,qs));for(Ys="";zs<qs;){var Xs=Is[zs++];if(128&Xs){var xo=63&Is[zs++];if((224&Xs)==192)Ys+=String.fromCharCode((31&Xs)<<6|xo);else{var To=63&Is[zs++];65536>(Xs=(240&Xs)==224?(15&Xs)<<12|xo<<6|To:(7&Xs)<<18|xo<<12|To<<6|63&Is[zs++])?Ys+=String.fromCharCode(Xs):(Xs-=65536,Ys+=String.fromCharCode(55296|Xs>>10,56320|1023&Xs))}}else Ys+=String.fromCharCode(Xs)}return Ys},ao=(Is,zs)=>(Is>>>=0)?to(Rs,Is,zs):"",lo=Is=>{for(var zs=0,qs=0;qs<Is.length;++qs){var Ys=Is.charCodeAt(qs);127>=Ys?zs++:2047>=Ys?zs+=2:55296<=Ys&&57343>=Ys?(zs+=4,++qs):zs+=3}return zs},Io=(Is,zs,qs,Ys)=>{if(!(0<Ys))return 0;var Xs=qs>>>=0;Ys=qs+Ys-1;for(var xo=0;xo<Is.length;++xo){var To=Is.charCodeAt(xo);if(55296<=To&&57343>=To&&(To=65536+((1023&To)<<10)|1023&Is.charCodeAt(++xo)),127>=To){if(qs>=Ys)break;zs[qs++>>>0]=To}else{if(2047>=To){if(qs+1>=Ys)break;zs[qs++>>>0]=192|To>>6}else{if(65535>=To){if(qs+2>=Ys)break;zs[qs++>>>0]=224|To>>12}else{if(qs+3>=Ys)break;zs[qs++>>>0]=240|To>>18,zs[qs++>>>0]=128|To>>12&63}zs[qs++>>>0]=128|To>>6&63}zs[qs++>>>0]=128|63&To}}return zs[qs>>>0]=0,qs-Xs},po=Is=>Is%4==0&&(Is%100!=0||Is%400==0),Fo=[0,31,60,91,121,152,182,213,244,274,305,335],Do=[0,31,59,90,120,151,181,212,243,273,304,334],No=Is=>{var zs=lo(Is)+1,qs=du(zs);return qs&&Io(Is,Rs,qs,zs),qs},Co={},qo=()=>{if(!Ts){var Is,zs={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_i||"./this.program"};for(Is in Co)Co[Is]===void 0?delete zs[Is]:zs[Is]=Co[Is];var qs=[];for(Is in zs)qs.push(`${Is}=${zs[Is]}`);Ts=qs}return Ts},Mo=[null,[],[]],_l=Is=>(_l=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return Ys=>crypto.getRandomValues(Ys);if(os)try{var zs=Ur(760);if(zs.randomFillSync)return Ys=>zs.randomFillSync(Ys);var qs=zs.randomBytes;return Ys=>(Ys.set(qs(Ys.byteLength)),Ys)}catch{}io("initRandomDevice")})())(Is),Al=[31,29,31,30,31,30,31,31,30,31,30,31],Yl=[31,28,31,30,31,30,31,31,30,31,30,31];function Ul(Is,zs,qs,Ys){function Xs(fo,xl,Pl){for(fo=typeof fo=="number"?fo.toString():fo||"";fo.length<xl;)fo=Pl[0]+fo;return fo}function xo(fo,xl){return Xs(fo,xl,"0")}function To(fo,xl){function Pl(lp){return 0>lp?-1:0<lp?1:0}var wu;return(wu=Pl(fo.getFullYear()-xl.getFullYear()))===0&&(wu=Pl(fo.getMonth()-xl.getMonth()))===0&&(wu=Pl(fo.getDate()-xl.getDate())),wu}function jo(fo){switch(fo.getDay()){case 0:return new Date(fo.getFullYear()-1,11,29);case 1:return fo;case 2:return new Date(fo.getFullYear(),0,3);case 3:return new Date(fo.getFullYear(),0,2);case 4:return new Date(fo.getFullYear(),0,1);case 5:return new Date(fo.getFullYear()-1,11,31);case 6:return new Date(fo.getFullYear()-1,11,30)}}function Xo(fo){var xl=fo.ma;for(fo=new Date(new Date(fo.na+1900,0,1).getTime());0<xl;){var Pl=fo.getMonth(),wu=(po(fo.getFullYear())?Al:Yl)[Pl];if(!(xl>wu-fo.getDate())){fo.setDate(fo.getDate()+xl);break}xl-=wu-fo.getDate()+1,fo.setDate(1),11>Pl?fo.setMonth(Pl+1):(fo.setMonth(0),fo.setFullYear(fo.getFullYear()+1))}return Pl=new Date(fo.getFullYear()+1,0,4),xl=jo(new Date(fo.getFullYear(),0,4)),Pl=jo(Pl),0>=To(xl,fo)?0>=To(Pl,fo)?fo.getFullYear()+1:fo.getFullYear():fo.getFullYear()-1}Is>>>=0,zs>>>=0,qs>>>=0;var Uo=_s[40+(Ys>>>=0)>>2>>>0];for(var Ml in Ys={ya:_s[Ys>>2>>>0],xa:_s[Ys+4>>2>>>0],oa:_s[Ys+8>>2>>>0],ra:_s[Ys+12>>2>>>0],pa:_s[Ys+16>>2>>>0],na:_s[Ys+20>>2>>>0],ha:_s[Ys+24>>2>>>0],ma:_s[Ys+28>>2>>>0],Aa:_s[Ys+32>>2>>>0],wa:_s[Ys+36>>2>>>0],za:Uo?ao(Uo):""},qs=ao(qs),Uo={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})qs=qs.replace(new RegExp(Ml,"g"),Uo[Ml]);var fu="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),xu="January February March April May June July August September October November December".split(" ");for(Ml in Uo={"%a":fo=>fu[fo.ha].substring(0,3),"%A":fo=>fu[fo.ha],"%b":fo=>xu[fo.pa].substring(0,3),"%B":fo=>xu[fo.pa],"%C":fo=>xo((fo.na+1900)/100|0,2),"%d":fo=>xo(fo.ra,2),"%e":fo=>Xs(fo.ra,2," "),"%g":fo=>Xo(fo).toString().substring(2),"%G":fo=>Xo(fo),"%H":fo=>xo(fo.oa,2),"%I":fo=>((fo=fo.oa)==0?fo=12:12<fo&&(fo-=12),xo(fo,2)),"%j":fo=>{for(var xl=0,Pl=0;Pl<=fo.pa-1;xl+=(po(fo.na+1900)?Al:Yl)[Pl++]);return xo(fo.ra+xl,3)},"%m":fo=>xo(fo.pa+1,2),"%M":fo=>xo(fo.xa,2),"%n":()=>`
`,"%p":fo=>0<=fo.oa&&12>fo.oa?"AM":"PM","%S":fo=>xo(fo.ya,2),"%t":()=>"	","%u":fo=>fo.ha||7,"%U":fo=>xo(Math.floor((fo.ma+7-fo.ha)/7),2),"%V":fo=>{var xl=Math.floor((fo.ma+7-(fo.ha+6)%7)/7);if(2>=(fo.ha+371-fo.ma-2)%7&&xl++,xl)xl==53&&((Pl=(fo.ha+371-fo.ma)%7)==4||Pl==3&&po(fo.na)||(xl=1));else{xl=52;var Pl=(fo.ha+7-fo.ma-1)%7;(Pl==4||Pl==5&&po(fo.na%400-1))&&xl++}return xo(xl,2)},"%w":fo=>fo.ha,"%W":fo=>xo(Math.floor((fo.ma+7-(fo.ha+6)%7)/7),2),"%y":fo=>(fo.na+1900).toString().substring(2),"%Y":fo=>fo.na+1900,"%z":fo=>{var xl=0<=(fo=fo.wa);return fo=Math.abs(fo)/60,(xl?"+":"-")+("0000"+(fo/60*100+fo%60)).slice(-4)},"%Z":fo=>fo.za,"%%":()=>"%"},qs=qs.replace(/%%/g,"\0\0"),Uo)qs.includes(Ml)&&(qs=qs.replace(new RegExp(Ml,"g"),Uo[Ml](Ys)));return Ml=function(fo){var xl=Array(lo(fo)+1);return Io(fo,xl,0,xl.length),xl}(qs=qs.replace(/\0\0/g,"%")),Ml.length>zs?0:(Es.set(Ml,Is>>>0),Ml.length-1)}var eu={a:function(Is,zs,qs){throw new Oo(Is>>>=0).sa(zs>>>0,qs>>>0),Is},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(Is,zs,qs){Is=zs+2097152>>>0<4194305-!!Is?(Is>>>0)+4294967296*zs:NaN,qs>>>=0,Is=new Date(1e3*Is),_s[qs>>2>>>0]=Is.getUTCSeconds(),_s[qs+4>>2>>>0]=Is.getUTCMinutes(),_s[qs+8>>2>>>0]=Is.getUTCHours(),_s[qs+12>>2>>>0]=Is.getUTCDate(),_s[qs+16>>2>>>0]=Is.getUTCMonth(),_s[qs+20>>2>>>0]=Is.getUTCFullYear()-1900,_s[qs+24>>2>>>0]=Is.getUTCDay(),_s[qs+28>>2>>>0]=(Is.getTime()-Date.UTC(Is.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(Is,zs,qs){Is=zs+2097152>>>0<4194305-!!Is?(Is>>>0)+4294967296*zs:NaN,qs>>>=0,Is=new Date(1e3*Is),_s[qs>>2>>>0]=Is.getSeconds(),_s[qs+4>>2>>>0]=Is.getMinutes(),_s[qs+8>>2>>>0]=Is.getHours(),_s[qs+12>>2>>>0]=Is.getDate(),_s[qs+16>>2>>>0]=Is.getMonth(),_s[qs+20>>2>>>0]=Is.getFullYear()-1900,_s[qs+24>>2>>>0]=Is.getDay(),_s[qs+28>>2>>>0]=(po(Is.getFullYear())?Fo:Do)[Is.getMonth()]+Is.getDate()-1|0,_s[qs+36>>2>>>0]=-60*Is.getTimezoneOffset(),zs=new Date(Is.getFullYear(),6,1).getTimezoneOffset();var Ys=new Date(Is.getFullYear(),0,1).getTimezoneOffset();_s[qs+32>>2>>>0]=0|(zs!=Ys&&Is.getTimezoneOffset()==Math.min(Ys,zs))},p:function(Is){Is>>>=0;var zs=new Date(_s[Is+20>>2>>>0]+1900,_s[Is+16>>2>>>0],_s[Is+12>>2>>>0],_s[Is+8>>2>>>0],_s[Is+4>>2>>>0],_s[Is>>2>>>0],0),qs=_s[Is+32>>2>>>0],Ys=zs.getTimezoneOffset(),Xs=new Date(zs.getFullYear(),6,1).getTimezoneOffset(),xo=new Date(zs.getFullYear(),0,1).getTimezoneOffset(),To=Math.min(xo,Xs);return 0>qs?_s[Is+32>>2>>>0]=+(Xs!=xo&&To==Ys):0<qs!=(To==Ys)&&(Xs=Math.max(xo,Xs),zs.setTime(zs.getTime()+6e4*((0<qs?To:Xs)-Ys))),_s[Is+24>>2>>>0]=zs.getDay(),_s[Is+28>>2>>>0]=(po(zs.getFullYear())?Fo:Do)[zs.getMonth()]+zs.getDate()-1|0,_s[Is>>2>>>0]=zs.getSeconds(),_s[Is+4>>2>>>0]=zs.getMinutes(),_s[Is+8>>2>>>0]=zs.getHours(),_s[Is+12>>2>>>0]=zs.getDate(),_s[Is+16>>2>>>0]=zs.getMonth(),_s[Is+20>>2>>>0]=zs.getYear(),Is=zs.getTime()/1e3,tu((Js=Is,1<=+Math.abs(Js)?0<Js?+Math.floor(Js/4294967296)>>>0:~~+Math.ceil((Js-+(~~Js>>>0))/4294967296)>>>0:0)),Is>>>0},l:function(){return-52},m:function(){},u:function(Is,zs,qs){function Ys(Xo){return(Xo=Xo.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Xo[1]:"GMT"}qs>>>=0;var Xs=new Date().getFullYear(),xo=new Date(Xs,0,1),To=new Date(Xs,6,1);Xs=xo.getTimezoneOffset();var jo=To.getTimezoneOffset();Bs[Is>>>0>>2>>>0]=60*Math.max(Xs,jo),_s[zs>>>0>>2>>>0]=+(Xs!=jo),Is=Ys(xo),zs=Ys(To),Is=No(Is),zs=No(zs),jo<Xs?(Bs[qs>>2>>>0]=Is,Bs[qs+4>>2>>>0]=zs):(Bs[qs>>2>>>0]=zs,Bs[qs+4>>2>>>0]=Is)},d:()=>{io("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(Is,zs,qs){return zs>>>=0,Rs.copyWithin(Is>>>0>>>0,zs>>>0,zs+(qs>>>0)>>>0)},t:function(Is){Is>>>=0;var zs=Rs.length;if(4294901760<Is)return!1;for(var qs=1;4>=qs;qs*=2){var Ys=zs*(1+.2/qs);Ys=Math.min(Ys,Is+100663296);var Xs=Math;Ys=Math.max(Is,Ys);e:{Xs=Xs.min.call(Xs,4294901760,Ys+(65536-Ys%65536)%65536)-ws.buffer.byteLength+65535>>>16;try{ws.grow(Xs),Cs();var xo=1;break e}catch{}xo=void 0}if(xo)return!0}return!1},D:function(Is,zs){Is>>>=0,zs>>>=0;var qs=0;return qo().forEach(function(Ys,Xs){var xo=zs+qs;for(Xs=Bs[Is+4*Xs>>2>>>0]=xo,xo=0;xo<Ys.length;++xo)Es[Xs++>>0>>>0]=Ys.charCodeAt(xo);Es[Xs>>0>>>0]=0,qs+=Ys.length+1}),0},E:function(Is,zs){Is>>>=0,zs>>>=0;var qs=qo();Bs[Is>>2>>>0]=qs.length;var Ys=0;return qs.forEach(function(Xs){Ys+=Xs.length+1}),Bs[zs>>2>>>0]=Ys,0},s:Is=>{ys||(ts.onExit&&ts.onExit(Is),vs=!0),rs(Is,new Ro(Is))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(Is,zs,qs,Ys){zs>>>=0,qs>>>=0,Ys>>>=0;for(var Xs=0,xo=0;xo<qs;xo++){var To=Bs[zs>>2>>>0],jo=Bs[zs+4>>2>>>0];zs+=8;for(var Xo=0;Xo<jo;Xo++){var Uo=Rs[To+Xo>>>0],Ml=Mo[Is];Uo===0||Uo===10?((Is===1?ms:ps)(to(Ml,0)),Ml.length=0):Ml.push(Uo)}Xs+=jo}return Bs[Ys>>2>>>0]=Xs,0},r:function(Is,zs){return Is>>>=0,_l(Rs.subarray(Is>>>0,Is+(zs>>>0)>>>0)),0},C:Ul,c:function(Is,zs,qs,Ys){return Ul(Is>>>0,zs>>>0,qs>>>0,Ys>>>0)}};(function(){function Is(qs){if(qs=qs.exports,xs=qs=function(Xs){var xo=jo=>()=>jo()>>>0,To=jo=>Xo=>jo(Xo)>>>0;return(Xs=Object.assign({},Xs)).__errno_location=xo(Xs.__errno_location),Xs.malloc=To(Xs.malloc),Xs.stackSave=xo(Xs.stackSave),Xs.stackAlloc=To(Xs.stackAlloc),Xs}(qs),ws=xs.L,Cs(),As.unshift(xs.M),ho--,ts.monitorRunDependencies&&ts.monitorRunDependencies(ho),ho==0&&so){var Ys=so;so=null,Ys()}return qs}var zs={a:eu};if(ho++,ts.monitorRunDependencies&&ts.monitorRunDependencies(ho),ts.instantiateWasm)try{return ts.instantiateWasm(zs,Is)}catch(qs){ps("Module.instantiateWasm callback failed with error: "+qs),Yr(qs)}(function(qs,Ys){var Xs=Ws;return fs||typeof WebAssembly.instantiateStreaming!="function"||vo(Xs)||Xs.startsWith("file://")||os||typeof fetch!="function"?Eo(Xs,qs,Ys):fetch(Xs,{credentials:"same-origin"}).then(xo=>WebAssembly.instantiateStreaming(xo,qs).then(Ys,function(To){return ps("wasm streaming compile failed: "+To),ps("falling back to ArrayBuffer instantiation"),Eo(Xs,qs,Ys)}))})(zs,function(qs){Is(qs.instance)}).catch(Yr)})(),ts._OrtInit=(Is,zs)=>(ts._OrtInit=xs.N)(Is,zs),ts._OrtGetLastError=(Is,zs)=>(ts._OrtGetLastError=xs.O)(Is,zs),ts._OrtCreateSessionOptions=(Is,zs,qs,Ys,Xs,xo,To,jo,Xo,Uo)=>(ts._OrtCreateSessionOptions=xs.P)(Is,zs,qs,Ys,Xs,xo,To,jo,Xo,Uo),ts._OrtAppendExecutionProvider=(Is,zs)=>(ts._OrtAppendExecutionProvider=xs.Q)(Is,zs),ts._OrtAddSessionConfigEntry=(Is,zs,qs)=>(ts._OrtAddSessionConfigEntry=xs.R)(Is,zs,qs),ts._OrtReleaseSessionOptions=Is=>(ts._OrtReleaseSessionOptions=xs.S)(Is),ts._OrtCreateSession=(Is,zs,qs)=>(ts._OrtCreateSession=xs.T)(Is,zs,qs),ts._OrtReleaseSession=Is=>(ts._OrtReleaseSession=xs.U)(Is),ts._OrtGetInputOutputCount=(Is,zs,qs)=>(ts._OrtGetInputOutputCount=xs.V)(Is,zs,qs),ts._OrtGetInputName=(Is,zs)=>(ts._OrtGetInputName=xs.W)(Is,zs),ts._OrtGetOutputName=(Is,zs)=>(ts._OrtGetOutputName=xs.X)(Is,zs),ts._OrtFree=Is=>(ts._OrtFree=xs.Y)(Is),ts._OrtCreateTensor=(Is,zs,qs,Ys,Xs)=>(ts._OrtCreateTensor=xs.Z)(Is,zs,qs,Ys,Xs),ts._OrtGetTensorData=(Is,zs,qs,Ys,Xs)=>(ts._OrtGetTensorData=xs._)(Is,zs,qs,Ys,Xs),ts._OrtReleaseTensor=Is=>(ts._OrtReleaseTensor=xs.$)(Is),ts._OrtCreateRunOptions=(Is,zs,qs,Ys)=>(ts._OrtCreateRunOptions=xs.aa)(Is,zs,qs,Ys),ts._OrtAddRunConfigEntry=(Is,zs,qs)=>(ts._OrtAddRunConfigEntry=xs.ba)(Is,zs,qs),ts._OrtReleaseRunOptions=Is=>(ts._OrtReleaseRunOptions=xs.ca)(Is),ts._OrtRun=(Is,zs,qs,Ys,Xs,xo,To,jo)=>(ts._OrtRun=xs.da)(Is,zs,qs,Ys,Xs,xo,To,jo),ts._OrtEndProfiling=Is=>(ts._OrtEndProfiling=xs.ea)(Is);var du=ts._malloc=Is=>(du=ts._malloc=xs.fa)(Is);ts._free=Is=>(ts._free=xs.ga)(Is);var ru,tu=Is=>(tu=xs.ia)(Is),$l=()=>($l=xs.ja)(),Ps=Is=>(Ps=xs.ka)(Is),Os=Is=>(Os=xs.la)(Is);function Gs(){function Is(){if(!ru&&(ru=!0,ts.calledRun=!0,!vs)){if(Po(As),Zr(ts),ts.onRuntimeInitialized&&ts.onRuntimeInitialized(),ts.postRun)for(typeof ts.postRun=="function"&&(ts.postRun=[ts.postRun]);ts.postRun.length;){var zs=ts.postRun.shift();Us.unshift(zs)}Po(Us)}}if(!(0<ho)){if(ts.preRun)for(typeof ts.preRun=="function"&&(ts.preRun=[ts.preRun]);ts.preRun.length;)Ks();Po(Ss),0<ho||(ts.setStatus?(ts.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ts.setStatus("")},1),Is()},1)):Is())}}if(ts.stackAlloc=Os,ts.stackSave=$l,ts.stackRestore=Ps,ts.UTF8ToString=ao,ts.stringToUTF8=(Is,zs,qs)=>Io(Is,Rs,zs,qs),ts.lengthBytesUTF8=lo,so=function Is(){ru||Gs(),ru||(so=Is)},ts.preInit)for(typeof ts.preInit=="function"&&(ts.preInit=[ts.preInit]);0<ts.preInit.length;)ts.preInit.pop()();return Gs(),Wr.ready});Nr.exports=Gr},4537:Nr=>{Nr.exports=function(_r,Ur){for(var jr=new Array(arguments.length-1),Gr=0,Wr=2,Zr=!0;Wr<arguments.length;)jr[Gr++]=arguments[Wr++];return new Promise(function(Yr,ts){jr[Gr]=function(es){if(Zr)if(Zr=!1,es)ts(es);else{for(var ns=new Array(arguments.length-1),Xr=0;Xr<ns.length;)ns[Xr++]=arguments[Xr];Yr.apply(null,ns)}};try{_r.apply(Ur||null,jr)}catch(es){Zr&&(Zr=!1,ts(es))}})}},7419:(Nr,_r)=>{var Ur=_r;Ur.length=function(Yr){var ts=Yr.length;if(!ts)return 0;for(var es=0;--ts%4>1&&Yr.charAt(ts)==="=";)++es;return Math.ceil(3*Yr.length)/4-es};for(var jr=new Array(64),Gr=new Array(123),Wr=0;Wr<64;)Gr[jr[Wr]=Wr<26?Wr+65:Wr<52?Wr+71:Wr<62?Wr-4:Wr-59|43]=Wr++;Ur.encode=function(Yr,ts,es){for(var ns,Xr=null,qr=[],_i=0,rs=0;ts<es;){var is=Yr[ts++];switch(rs){case 0:qr[_i++]=jr[is>>2],ns=(3&is)<<4,rs=1;break;case 1:qr[_i++]=jr[ns|is>>4],ns=(15&is)<<2,rs=2;break;case 2:qr[_i++]=jr[ns|is>>6],qr[_i++]=jr[63&is],rs=0}_i>8191&&((Xr||(Xr=[])).push(String.fromCharCode.apply(String,qr)),_i=0)}return rs&&(qr[_i++]=jr[ns],qr[_i++]=61,rs===1&&(qr[_i++]=61)),Xr?(_i&&Xr.push(String.fromCharCode.apply(String,qr.slice(0,_i))),Xr.join("")):String.fromCharCode.apply(String,qr.slice(0,_i))};var Zr="invalid encoding";Ur.decode=function(Yr,ts,es){for(var ns,Xr=es,qr=0,_i=0;_i<Yr.length;){var rs=Yr.charCodeAt(_i++);if(rs===61&&qr>1)break;if((rs=Gr[rs])===void 0)throw Error(Zr);switch(qr){case 0:ns=rs,qr=1;break;case 1:ts[es++]=ns<<2|(48&rs)>>4,ns=rs,qr=2;break;case 2:ts[es++]=(15&ns)<<4|(60&rs)>>2,ns=rs,qr=3;break;case 3:ts[es++]=(3&ns)<<6|rs,qr=0}}if(qr===1)throw Error(Zr);return es-Xr},Ur.test=function(Yr){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Yr)}},9211:Nr=>{function _r(){this._listeners={}}Nr.exports=_r,_r.prototype.on=function(Ur,jr,Gr){return(this._listeners[Ur]||(this._listeners[Ur]=[])).push({fn:jr,ctx:Gr||this}),this},_r.prototype.off=function(Ur,jr){if(Ur===void 0)this._listeners={};else if(jr===void 0)this._listeners[Ur]=[];else for(var Gr=this._listeners[Ur],Wr=0;Wr<Gr.length;)Gr[Wr].fn===jr?Gr.splice(Wr,1):++Wr;return this},_r.prototype.emit=function(Ur){var jr=this._listeners[Ur];if(jr){for(var Gr=[],Wr=1;Wr<arguments.length;)Gr.push(arguments[Wr++]);for(Wr=0;Wr<jr.length;)jr[Wr].fn.apply(jr[Wr++].ctx,Gr)}return this}},945:Nr=>{function _r(Zr){return typeof Float32Array<"u"?function(){var Yr=new Float32Array([-0]),ts=new Uint8Array(Yr.buffer),es=ts[3]===128;function ns(rs,is,ss){Yr[0]=rs,is[ss]=ts[0],is[ss+1]=ts[1],is[ss+2]=ts[2],is[ss+3]=ts[3]}function Xr(rs,is,ss){Yr[0]=rs,is[ss]=ts[3],is[ss+1]=ts[2],is[ss+2]=ts[1],is[ss+3]=ts[0]}function qr(rs,is){return ts[0]=rs[is],ts[1]=rs[is+1],ts[2]=rs[is+2],ts[3]=rs[is+3],Yr[0]}function _i(rs,is){return ts[3]=rs[is],ts[2]=rs[is+1],ts[1]=rs[is+2],ts[0]=rs[is+3],Yr[0]}Zr.writeFloatLE=es?ns:Xr,Zr.writeFloatBE=es?Xr:ns,Zr.readFloatLE=es?qr:_i,Zr.readFloatBE=es?_i:qr}():function(){function Yr(es,ns,Xr,qr){var _i=ns<0?1:0;if(_i&&(ns=-ns),ns===0)es(1/ns>0?0:2147483648,Xr,qr);else if(isNaN(ns))es(2143289344,Xr,qr);else if(ns>34028234663852886e22)es((_i<<31|2139095040)>>>0,Xr,qr);else if(ns<11754943508222875e-54)es((_i<<31|Math.round(ns/1401298464324817e-60))>>>0,Xr,qr);else{var rs=Math.floor(Math.log(ns)/Math.LN2);es((_i<<31|rs+127<<23|8388607&Math.round(ns*Math.pow(2,-rs)*8388608))>>>0,Xr,qr)}}function ts(es,ns,Xr){var qr=es(ns,Xr),_i=2*(qr>>31)+1,rs=qr>>>23&255,is=8388607&qr;return rs===255?is?NaN:_i*(1/0):rs===0?1401298464324817e-60*_i*is:_i*Math.pow(2,rs-150)*(is+8388608)}Zr.writeFloatLE=Yr.bind(null,Ur),Zr.writeFloatBE=Yr.bind(null,jr),Zr.readFloatLE=ts.bind(null,Gr),Zr.readFloatBE=ts.bind(null,Wr)}(),typeof Float64Array<"u"?function(){var Yr=new Float64Array([-0]),ts=new Uint8Array(Yr.buffer),es=ts[7]===128;function ns(rs,is,ss){Yr[0]=rs,is[ss]=ts[0],is[ss+1]=ts[1],is[ss+2]=ts[2],is[ss+3]=ts[3],is[ss+4]=ts[4],is[ss+5]=ts[5],is[ss+6]=ts[6],is[ss+7]=ts[7]}function Xr(rs,is,ss){Yr[0]=rs,is[ss]=ts[7],is[ss+1]=ts[6],is[ss+2]=ts[5],is[ss+3]=ts[4],is[ss+4]=ts[3],is[ss+5]=ts[2],is[ss+6]=ts[1],is[ss+7]=ts[0]}function qr(rs,is){return ts[0]=rs[is],ts[1]=rs[is+1],ts[2]=rs[is+2],ts[3]=rs[is+3],ts[4]=rs[is+4],ts[5]=rs[is+5],ts[6]=rs[is+6],ts[7]=rs[is+7],Yr[0]}function _i(rs,is){return ts[7]=rs[is],ts[6]=rs[is+1],ts[5]=rs[is+2],ts[4]=rs[is+3],ts[3]=rs[is+4],ts[2]=rs[is+5],ts[1]=rs[is+6],ts[0]=rs[is+7],Yr[0]}Zr.writeDoubleLE=es?ns:Xr,Zr.writeDoubleBE=es?Xr:ns,Zr.readDoubleLE=es?qr:_i,Zr.readDoubleBE=es?_i:qr}():function(){function Yr(es,ns,Xr,qr,_i,rs){var is=qr<0?1:0;if(is&&(qr=-qr),qr===0)es(0,_i,rs+ns),es(1/qr>0?0:2147483648,_i,rs+Xr);else if(isNaN(qr))es(0,_i,rs+ns),es(2146959360,_i,rs+Xr);else if(qr>17976931348623157e292)es(0,_i,rs+ns),es((is<<31|2146435072)>>>0,_i,rs+Xr);else{var ss;if(qr<22250738585072014e-324)es((ss=qr/5e-324)>>>0,_i,rs+ns),es((is<<31|ss/4294967296)>>>0,_i,rs+Xr);else{var os=Math.floor(Math.log(qr)/Math.LN2);os===1024&&(os=1023),es(4503599627370496*(ss=qr*Math.pow(2,-os))>>>0,_i,rs+ns),es((is<<31|os+1023<<20|1048576*ss&1048575)>>>0,_i,rs+Xr)}}}function ts(es,ns,Xr,qr,_i){var rs=es(qr,_i+ns),is=es(qr,_i+Xr),ss=2*(is>>31)+1,os=is>>>20&2047,ls=4294967296*(1048575&is)+rs;return os===2047?ls?NaN:ss*(1/0):os===0?5e-324*ss*ls:ss*Math.pow(2,os-1075)*(ls+4503599627370496)}Zr.writeDoubleLE=Yr.bind(null,Ur,0,4),Zr.writeDoubleBE=Yr.bind(null,jr,4,0),Zr.readDoubleLE=ts.bind(null,Gr,0,4),Zr.readDoubleBE=ts.bind(null,Wr,4,0)}(),Zr}function Ur(Zr,Yr,ts){Yr[ts]=255&Zr,Yr[ts+1]=Zr>>>8&255,Yr[ts+2]=Zr>>>16&255,Yr[ts+3]=Zr>>>24}function jr(Zr,Yr,ts){Yr[ts]=Zr>>>24,Yr[ts+1]=Zr>>>16&255,Yr[ts+2]=Zr>>>8&255,Yr[ts+3]=255&Zr}function Gr(Zr,Yr){return(Zr[Yr]|Zr[Yr+1]<<8|Zr[Yr+2]<<16|Zr[Yr+3]<<24)>>>0}function Wr(Zr,Yr){return(Zr[Yr]<<24|Zr[Yr+1]<<16|Zr[Yr+2]<<8|Zr[Yr+3])>>>0}Nr.exports=_r(_r)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Nr){}return null}module.exports=inquire},6662:Nr=>{Nr.exports=function(_r,Ur,jr){var Gr=jr||8192,Wr=Gr>>>1,Zr=null,Yr=Gr;return function(ts){if(ts<1||ts>Wr)return _r(ts);Yr+ts>Gr&&(Zr=_r(Gr),Yr=0);var es=Ur.call(Zr,Yr,Yr+=ts);return 7&Yr&&(Yr=1+(7|Yr)),es}}},4997:(Nr,_r)=>{var Ur=_r;Ur.length=function(jr){for(var Gr=0,Wr=0,Zr=0;Zr<jr.length;++Zr)(Wr=jr.charCodeAt(Zr))<128?Gr+=1:Wr<2048?Gr+=2:(64512&Wr)==55296&&(64512&jr.charCodeAt(Zr+1))==56320?(++Zr,Gr+=4):Gr+=3;return Gr},Ur.read=function(jr,Gr,Wr){if(Wr-Gr<1)return"";for(var Zr,Yr=null,ts=[],es=0;Gr<Wr;)(Zr=jr[Gr++])<128?ts[es++]=Zr:Zr>191&&Zr<224?ts[es++]=(31&Zr)<<6|63&jr[Gr++]:Zr>239&&Zr<365?(Zr=((7&Zr)<<18|(63&jr[Gr++])<<12|(63&jr[Gr++])<<6|63&jr[Gr++])-65536,ts[es++]=55296+(Zr>>10),ts[es++]=56320+(1023&Zr)):ts[es++]=(15&Zr)<<12|(63&jr[Gr++])<<6|63&jr[Gr++],es>8191&&((Yr||(Yr=[])).push(String.fromCharCode.apply(String,ts)),es=0);return Yr?(es&&Yr.push(String.fromCharCode.apply(String,ts.slice(0,es))),Yr.join("")):String.fromCharCode.apply(String,ts.slice(0,es))},Ur.write=function(jr,Gr,Wr){for(var Zr,Yr,ts=Wr,es=0;es<jr.length;++es)(Zr=jr.charCodeAt(es))<128?Gr[Wr++]=Zr:Zr<2048?(Gr[Wr++]=Zr>>6|192,Gr[Wr++]=63&Zr|128):(64512&Zr)==55296&&(64512&(Yr=jr.charCodeAt(es+1)))==56320?(Zr=65536+((1023&Zr)<<10)+(1023&Yr),++es,Gr[Wr++]=Zr>>18|240,Gr[Wr++]=Zr>>12&63|128,Gr[Wr++]=Zr>>6&63|128,Gr[Wr++]=63&Zr|128):(Gr[Wr++]=Zr>>12|224,Gr[Wr++]=Zr>>6&63|128,Gr[Wr++]=63&Zr|128);return Wr-ts}},3442:(Nr,_r)=>{_r.__esModule=!0;var Ur=function(){function jr(Gr){if(!Gr)throw new TypeError("Invalid argument; `value` has no value.");this.value=jr.EMPTY,Gr&&jr.isGuid(Gr)&&(this.value=Gr)}return jr.isGuid=function(Gr){var Wr=Gr.toString();return Gr&&(Gr instanceof jr||jr.validator.test(Wr))},jr.create=function(){return new jr([jr.gen(2),jr.gen(1),jr.gen(1),jr.gen(1),jr.gen(3)].join("-"))},jr.createEmpty=function(){return new jr("emptyguid")},jr.parse=function(Gr){return new jr(Gr)},jr.raw=function(){return[jr.gen(2),jr.gen(1),jr.gen(1),jr.gen(1),jr.gen(3)].join("-")},jr.gen=function(Gr){for(var Wr="",Zr=0;Zr<Gr;Zr++)Wr+=(65536*(1+Math.random())|0).toString(16).substring(1);return Wr},jr.prototype.equals=function(Gr){return jr.isGuid(Gr)&&this.value===Gr.toString()},jr.prototype.isEmpty=function(){return this.value===jr.EMPTY},jr.prototype.toString=function(){return this.value},jr.prototype.toJSON=function(){return{value:this.value}},jr.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),jr.EMPTY="00000000-0000-0000-0000-000000000000",jr}();_r.Guid=Ur},2100:(Nr,_r,Ur)=>{Nr.exports=Ur(9482)},9482:(Nr,_r,Ur)=>{var jr=_r;function Gr(){jr.util._configure(),jr.Writer._configure(jr.BufferWriter),jr.Reader._configure(jr.BufferReader)}jr.build="minimal",jr.Writer=Ur(1173),jr.BufferWriter=Ur(3155),jr.Reader=Ur(1408),jr.BufferReader=Ur(593),jr.util=Ur(9693),jr.rpc=Ur(5994),jr.roots=Ur(5054),jr.configure=Gr,Gr()},1408:(Nr,_r,Ur)=>{Nr.exports=ts;var jr,Gr=Ur(9693),Wr=Gr.LongBits,Zr=Gr.utf8;function Yr(is,ss){return RangeError("index out of range: "+is.pos+" + "+(ss||1)+" > "+is.len)}function ts(is){this.buf=is,this.pos=0,this.len=is.length}var es,ns=typeof Uint8Array<"u"?function(is){if(is instanceof Uint8Array||Array.isArray(is))return new ts(is);throw Error("illegal buffer")}:function(is){if(Array.isArray(is))return new ts(is);throw Error("illegal buffer")},Xr=function(){return Gr.Buffer?function(is){return(ts.create=function(ss){return Gr.Buffer.isBuffer(ss)?new jr(ss):ns(ss)})(is)}:ns};function qr(){var is=new Wr(0,0),ss=0;if(!(this.len-this.pos>4)){for(;ss<3;++ss){if(this.pos>=this.len)throw Yr(this);if(is.lo=(is.lo|(127&this.buf[this.pos])<<7*ss)>>>0,this.buf[this.pos++]<128)return is}return is.lo=(is.lo|(127&this.buf[this.pos++])<<7*ss)>>>0,is}for(;ss<4;++ss)if(is.lo=(is.lo|(127&this.buf[this.pos])<<7*ss)>>>0,this.buf[this.pos++]<128)return is;if(is.lo=(is.lo|(127&this.buf[this.pos])<<28)>>>0,is.hi=(is.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return is;if(ss=0,this.len-this.pos>4){for(;ss<5;++ss)if(is.hi=(is.hi|(127&this.buf[this.pos])<<7*ss+3)>>>0,this.buf[this.pos++]<128)return is}else for(;ss<5;++ss){if(this.pos>=this.len)throw Yr(this);if(is.hi=(is.hi|(127&this.buf[this.pos])<<7*ss+3)>>>0,this.buf[this.pos++]<128)return is}throw Error("invalid varint encoding")}function _i(is,ss){return(is[ss-4]|is[ss-3]<<8|is[ss-2]<<16|is[ss-1]<<24)>>>0}function rs(){if(this.pos+8>this.len)throw Yr(this,8);return new Wr(_i(this.buf,this.pos+=4),_i(this.buf,this.pos+=4))}ts.create=Xr(),ts.prototype._slice=Gr.Array.prototype.subarray||Gr.Array.prototype.slice,ts.prototype.uint32=(es=4294967295,function(){if(es=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(es=(es|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(es=(es|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(es=(es|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(es=(es|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return es;if((this.pos+=5)>this.len)throw this.pos=this.len,Yr(this,10);return es}),ts.prototype.int32=function(){return 0|this.uint32()},ts.prototype.sint32=function(){var is=this.uint32();return is>>>1^-(1&is)|0},ts.prototype.bool=function(){return this.uint32()!==0},ts.prototype.fixed32=function(){if(this.pos+4>this.len)throw Yr(this,4);return _i(this.buf,this.pos+=4)},ts.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Yr(this,4);return 0|_i(this.buf,this.pos+=4)},ts.prototype.float=function(){if(this.pos+4>this.len)throw Yr(this,4);var is=Gr.float.readFloatLE(this.buf,this.pos);return this.pos+=4,is},ts.prototype.double=function(){if(this.pos+8>this.len)throw Yr(this,4);var is=Gr.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,is},ts.prototype.bytes=function(){var is=this.uint32(),ss=this.pos,os=this.pos+is;if(os>this.len)throw Yr(this,is);return this.pos+=is,Array.isArray(this.buf)?this.buf.slice(ss,os):ss===os?new this.buf.constructor(0):this._slice.call(this.buf,ss,os)},ts.prototype.string=function(){var is=this.bytes();return Zr.read(is,0,is.length)},ts.prototype.skip=function(is){if(typeof is=="number"){if(this.pos+is>this.len)throw Yr(this,is);this.pos+=is}else do if(this.pos>=this.len)throw Yr(this);while(128&this.buf[this.pos++]);return this},ts.prototype.skipType=function(is){switch(is){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(is=7&this.uint32())!=4;)this.skipType(is);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+is+" at offset "+this.pos)}return this},ts._configure=function(is){jr=is,ts.create=Xr(),jr._configure();var ss=Gr.Long?"toLong":"toNumber";Gr.merge(ts.prototype,{int64:function(){return qr.call(this)[ss](!1)},uint64:function(){return qr.call(this)[ss](!0)},sint64:function(){return qr.call(this).zzDecode()[ss](!1)},fixed64:function(){return rs.call(this)[ss](!0)},sfixed64:function(){return rs.call(this)[ss](!1)}})}},593:(Nr,_r,Ur)=>{Nr.exports=Wr;var jr=Ur(1408);(Wr.prototype=Object.create(jr.prototype)).constructor=Wr;var Gr=Ur(9693);function Wr(Zr){jr.call(this,Zr)}Wr._configure=function(){Gr.Buffer&&(Wr.prototype._slice=Gr.Buffer.prototype.slice)},Wr.prototype.string=function(){var Zr=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+Zr,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+Zr,this.len))},Wr._configure()},5054:Nr=>{Nr.exports={}},5994:(Nr,_r,Ur)=>{_r.Service=Ur(7948)},7948:(Nr,_r,Ur)=>{Nr.exports=Gr;var jr=Ur(9693);function Gr(Wr,Zr,Yr){if(typeof Wr!="function")throw TypeError("rpcImpl must be a function");jr.EventEmitter.call(this),this.rpcImpl=Wr,this.requestDelimited=!!Zr,this.responseDelimited=!!Yr}(Gr.prototype=Object.create(jr.EventEmitter.prototype)).constructor=Gr,Gr.prototype.rpcCall=function Wr(Zr,Yr,ts,es,ns){if(!es)throw TypeError("request must be specified");var Xr=this;if(!ns)return jr.asPromise(Wr,Xr,Zr,Yr,ts,es);if(Xr.rpcImpl)try{return Xr.rpcImpl(Zr,Yr[Xr.requestDelimited?"encodeDelimited":"encode"](es).finish(),function(qr,_i){if(qr)return Xr.emit("error",qr,Zr),ns(qr);if(_i!==null){if(!(_i instanceof ts))try{_i=ts[Xr.responseDelimited?"decodeDelimited":"decode"](_i)}catch(rs){return Xr.emit("error",rs,Zr),ns(rs)}return Xr.emit("data",_i,Zr),ns(null,_i)}Xr.end(!0)})}catch(qr){return Xr.emit("error",qr,Zr),void setTimeout(function(){ns(qr)},0)}else setTimeout(function(){ns(Error("already ended"))},0)},Gr.prototype.end=function(Wr){return this.rpcImpl&&(Wr||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(Nr,_r,Ur)=>{Nr.exports=Gr;var jr=Ur(9693);function Gr(ts,es){this.lo=ts>>>0,this.hi=es>>>0}var Wr=Gr.zero=new Gr(0,0);Wr.toNumber=function(){return 0},Wr.zzEncode=Wr.zzDecode=function(){return this},Wr.length=function(){return 1};var Zr=Gr.zeroHash="\0\0\0\0\0\0\0\0";Gr.fromNumber=function(ts){if(ts===0)return Wr;var es=ts<0;es&&(ts=-ts);var ns=ts>>>0,Xr=(ts-ns)/4294967296>>>0;return es&&(Xr=~Xr>>>0,ns=~ns>>>0,++ns>4294967295&&(ns=0,++Xr>4294967295&&(Xr=0))),new Gr(ns,Xr)},Gr.from=function(ts){if(typeof ts=="number")return Gr.fromNumber(ts);if(jr.isString(ts)){if(!jr.Long)return Gr.fromNumber(parseInt(ts,10));ts=jr.Long.fromString(ts)}return ts.low||ts.high?new Gr(ts.low>>>0,ts.high>>>0):Wr},Gr.prototype.toNumber=function(ts){if(!ts&&this.hi>>>31){var es=1+~this.lo>>>0,ns=~this.hi>>>0;return es||(ns=ns+1>>>0),-(es+4294967296*ns)}return this.lo+4294967296*this.hi},Gr.prototype.toLong=function(ts){return jr.Long?new jr.Long(0|this.lo,0|this.hi,!!ts):{low:0|this.lo,high:0|this.hi,unsigned:!!ts}};var Yr=String.prototype.charCodeAt;Gr.fromHash=function(ts){return ts===Zr?Wr:new Gr((Yr.call(ts,0)|Yr.call(ts,1)<<8|Yr.call(ts,2)<<16|Yr.call(ts,3)<<24)>>>0,(Yr.call(ts,4)|Yr.call(ts,5)<<8|Yr.call(ts,6)<<16|Yr.call(ts,7)<<24)>>>0)},Gr.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Gr.prototype.zzEncode=function(){var ts=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ts)>>>0,this.lo=(this.lo<<1^ts)>>>0,this},Gr.prototype.zzDecode=function(){var ts=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^ts)>>>0,this.hi=(this.hi>>>1^ts)>>>0,this},Gr.prototype.length=function(){var ts=this.lo,es=(this.lo>>>28|this.hi<<4)>>>0,ns=this.hi>>>24;return ns===0?es===0?ts<16384?ts<128?1:2:ts<2097152?3:4:es<16384?es<128?5:6:es<2097152?7:8:ns<128?9:10}},9693:function(Nr,_r,Ur){var jr=_r;function Gr(Zr,Yr,ts){for(var es=Object.keys(Yr),ns=0;ns<es.length;++ns)Zr[es[ns]]!==void 0&&ts||(Zr[es[ns]]=Yr[es[ns]]);return Zr}function Wr(Zr){function Yr(ts,es){if(!(this instanceof Yr))return new Yr(ts,es);Object.defineProperty(this,"message",{get:function(){return ts}}),Error.captureStackTrace?Error.captureStackTrace(this,Yr):Object.defineProperty(this,"stack",{value:new Error().stack||""}),es&&Gr(this,es)}return Yr.prototype=Object.create(Error.prototype,{constructor:{value:Yr,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return Zr},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),Yr}jr.asPromise=Ur(4537),jr.base64=Ur(7419),jr.EventEmitter=Ur(9211),jr.float=Ur(945),jr.inquire=Ur(7199),jr.utf8=Ur(4997),jr.pool=Ur(6662),jr.LongBits=Ur(1945),jr.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),jr.global=jr.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||this,jr.emptyArray=Object.freeze?Object.freeze([]):[],jr.emptyObject=Object.freeze?Object.freeze({}):{},jr.isInteger=Number.isInteger||function(Zr){return typeof Zr=="number"&&isFinite(Zr)&&Math.floor(Zr)===Zr},jr.isString=function(Zr){return typeof Zr=="string"||Zr instanceof String},jr.isObject=function(Zr){return Zr&&typeof Zr=="object"},jr.isset=jr.isSet=function(Zr,Yr){var ts=Zr[Yr];return!(ts==null||!Zr.hasOwnProperty(Yr))&&(typeof ts!="object"||(Array.isArray(ts)?ts.length:Object.keys(ts).length)>0)},jr.Buffer=function(){try{var Zr=jr.inquire("buffer").Buffer;return Zr.prototype.utf8Write?Zr:null}catch{return null}}(),jr._Buffer_from=null,jr._Buffer_allocUnsafe=null,jr.newBuffer=function(Zr){return typeof Zr=="number"?jr.Buffer?jr._Buffer_allocUnsafe(Zr):new jr.Array(Zr):jr.Buffer?jr._Buffer_from(Zr):typeof Uint8Array>"u"?Zr:new Uint8Array(Zr)},jr.Array=typeof Uint8Array<"u"?Uint8Array:Array,jr.Long=jr.global.dcodeIO&&jr.global.dcodeIO.Long||jr.global.Long||jr.inquire("long"),jr.key2Re=/^true|false|0|1$/,jr.key32Re=/^-?(?:0|[1-9][0-9]*)$/,jr.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,jr.longToHash=function(Zr){return Zr?jr.LongBits.from(Zr).toHash():jr.LongBits.zeroHash},jr.longFromHash=function(Zr,Yr){var ts=jr.LongBits.fromHash(Zr);return jr.Long?jr.Long.fromBits(ts.lo,ts.hi,Yr):ts.toNumber(!!Yr)},jr.merge=Gr,jr.lcFirst=function(Zr){return Zr.charAt(0).toLowerCase()+Zr.substring(1)},jr.newError=Wr,jr.ProtocolError=Wr("ProtocolError"),jr.oneOfGetter=function(Zr){for(var Yr={},ts=0;ts<Zr.length;++ts)Yr[Zr[ts]]=1;return function(){for(var es=Object.keys(this),ns=es.length-1;ns>-1;--ns)if(Yr[es[ns]]===1&&this[es[ns]]!==void 0&&this[es[ns]]!==null)return es[ns]}},jr.oneOfSetter=function(Zr){return function(Yr){for(var ts=0;ts<Zr.length;++ts)Zr[ts]!==Yr&&delete this[Zr[ts]]}},jr.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},jr._configure=function(){var Zr=jr.Buffer;Zr?(jr._Buffer_from=Zr.from!==Uint8Array.from&&Zr.from||function(Yr,ts){return new Zr(Yr,ts)},jr._Buffer_allocUnsafe=Zr.allocUnsafe||function(Yr){return new Zr(Yr)}):jr._Buffer_from=jr._Buffer_allocUnsafe=null}},1173:(Nr,_r,Ur)=>{Nr.exports=Xr;var jr,Gr=Ur(9693),Wr=Gr.LongBits,Zr=Gr.base64,Yr=Gr.utf8;function ts(ls,cs,ds){this.fn=ls,this.len=cs,this.next=void 0,this.val=ds}function es(){}function ns(ls){this.head=ls.head,this.tail=ls.tail,this.len=ls.len,this.next=ls.states}function Xr(){this.len=0,this.head=new ts(es,0,0),this.tail=this.head,this.states=null}var qr=function(){return Gr.Buffer?function(){return(Xr.create=function(){return new jr})()}:function(){return new Xr}};function _i(ls,cs,ds){cs[ds]=255&ls}function rs(ls,cs){this.len=ls,this.next=void 0,this.val=cs}function is(ls,cs,ds){for(;ls.hi;)cs[ds++]=127&ls.lo|128,ls.lo=(ls.lo>>>7|ls.hi<<25)>>>0,ls.hi>>>=7;for(;ls.lo>127;)cs[ds++]=127&ls.lo|128,ls.lo=ls.lo>>>7;cs[ds++]=ls.lo}function ss(ls,cs,ds){cs[ds]=255&ls,cs[ds+1]=ls>>>8&255,cs[ds+2]=ls>>>16&255,cs[ds+3]=ls>>>24}Xr.create=qr(),Xr.alloc=function(ls){return new Gr.Array(ls)},Gr.Array!==Array&&(Xr.alloc=Gr.pool(Xr.alloc,Gr.Array.prototype.subarray)),Xr.prototype._push=function(ls,cs,ds){return this.tail=this.tail.next=new ts(ls,cs,ds),this.len+=cs,this},rs.prototype=Object.create(ts.prototype),rs.prototype.fn=function(ls,cs,ds){for(;ls>127;)cs[ds++]=127&ls|128,ls>>>=7;cs[ds]=ls},Xr.prototype.uint32=function(ls){return this.len+=(this.tail=this.tail.next=new rs((ls>>>=0)<128?1:ls<16384?2:ls<2097152?3:ls<268435456?4:5,ls)).len,this},Xr.prototype.int32=function(ls){return ls<0?this._push(is,10,Wr.fromNumber(ls)):this.uint32(ls)},Xr.prototype.sint32=function(ls){return this.uint32((ls<<1^ls>>31)>>>0)},Xr.prototype.uint64=function(ls){var cs=Wr.from(ls);return this._push(is,cs.length(),cs)},Xr.prototype.int64=Xr.prototype.uint64,Xr.prototype.sint64=function(ls){var cs=Wr.from(ls).zzEncode();return this._push(is,cs.length(),cs)},Xr.prototype.bool=function(ls){return this._push(_i,1,ls?1:0)},Xr.prototype.fixed32=function(ls){return this._push(ss,4,ls>>>0)},Xr.prototype.sfixed32=Xr.prototype.fixed32,Xr.prototype.fixed64=function(ls){var cs=Wr.from(ls);return this._push(ss,4,cs.lo)._push(ss,4,cs.hi)},Xr.prototype.sfixed64=Xr.prototype.fixed64,Xr.prototype.float=function(ls){return this._push(Gr.float.writeFloatLE,4,ls)},Xr.prototype.double=function(ls){return this._push(Gr.float.writeDoubleLE,8,ls)};var os=Gr.Array.prototype.set?function(ls,cs,ds){cs.set(ls,ds)}:function(ls,cs,ds){for(var fs=0;fs<ls.length;++fs)cs[ds+fs]=ls[fs]};Xr.prototype.bytes=function(ls){var cs=ls.length>>>0;if(!cs)return this._push(_i,1,0);if(Gr.isString(ls)){var ds=Xr.alloc(cs=Zr.length(ls));Zr.decode(ls,ds,0),ls=ds}return this.uint32(cs)._push(os,cs,ls)},Xr.prototype.string=function(ls){var cs=Yr.length(ls);return cs?this.uint32(cs)._push(Yr.write,cs,ls):this._push(_i,1,0)},Xr.prototype.fork=function(){return this.states=new ns(this),this.head=this.tail=new ts(es,0,0),this.len=0,this},Xr.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ts(es,0,0),this.len=0),this},Xr.prototype.ldelim=function(){var ls=this.head,cs=this.tail,ds=this.len;return this.reset().uint32(ds),ds&&(this.tail.next=ls.next,this.tail=cs,this.len+=ds),this},Xr.prototype.finish=function(){for(var ls=this.head.next,cs=this.constructor.alloc(this.len),ds=0;ls;)ls.fn(ls.val,cs,ds),ds+=ls.len,ls=ls.next;return cs},Xr._configure=function(ls){jr=ls,Xr.create=qr(),jr._configure()}},3155:(Nr,_r,Ur)=>{Nr.exports=Wr;var jr=Ur(1173);(Wr.prototype=Object.create(jr.prototype)).constructor=Wr;var Gr=Ur(9693);function Wr(){jr.call(this)}function Zr(Yr,ts,es){Yr.length<40?Gr.utf8.write(Yr,ts,es):ts.utf8Write?ts.utf8Write(Yr,es):ts.write(Yr,es)}Wr._configure=function(){Wr.alloc=Gr._Buffer_allocUnsafe,Wr.writeBytesBuffer=Gr.Buffer&&Gr.Buffer.prototype instanceof Uint8Array&&Gr.Buffer.prototype.set.name==="set"?function(Yr,ts,es){ts.set(Yr,es)}:function(Yr,ts,es){if(Yr.copy)Yr.copy(ts,es,0,Yr.length);else for(var ns=0;ns<Yr.length;)ts[es++]=Yr[ns++]}},Wr.prototype.bytes=function(Yr){Gr.isString(Yr)&&(Yr=Gr._Buffer_from(Yr,"base64"));var ts=Yr.length>>>0;return this.uint32(ts),ts&&this._push(Wr.writeBytesBuffer,ts,Yr),this},Wr.prototype.string=function(Yr){var ts=Gr.Buffer.byteLength(Yr);return this.uint32(ts),ts&&this._push(Zr,ts,Yr),this},Wr._configure()},4154:Nr=>{Nr.exports=`"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};
`},7067:()=>{},1296:()=>{},760:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},685:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.resolveBackend=_r.registerBackend=void 0;const Ur={},jr=[];_r.registerBackend=(Gr,Wr,Zr)=>{if(!Wr||typeof Wr.init!="function"||typeof Wr.createSessionHandler!="function")throw new TypeError("not a valid backend");{const Yr=Ur[Gr];if(Yr===void 0)Ur[Gr]={backend:Wr,priority:Zr};else{if(Yr.priority>Zr)return;if(Yr.priority===Zr&&Yr.backend!==Wr)throw new Error(`cannot register backend "${Gr}" using priority ${Zr}`)}if(Zr>=0){const ts=jr.indexOf(Gr);ts!==-1&&jr.splice(ts,1);for(let es=0;es<jr.length;es++)if(Ur[jr[es]].priority<=Zr)return void jr.splice(es,0,Gr);jr.push(Gr)}}},_r.resolveBackend=async Gr=>{const Wr=Gr.length===0?jr:Gr,Zr=[];for(const Yr of Wr){const ts=Ur[Yr];if(ts){if(ts.initialized)return ts.backend;if(ts.aborted)continue;const es=!!ts.initPromise;try{return es||(ts.initPromise=ts.backend.init()),await ts.initPromise,ts.initialized=!0,ts.backend}catch(ns){es||Zr.push({name:Yr,err:ns}),ts.aborted=!0}finally{delete ts.initPromise}}}throw new Error(`no available backend found. ERR: ${Zr.map(Yr=>`[${Yr.name}] ${Yr.err}`).join(", ")}`)}},4798:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.registerBackend=void 0;var jr=Ur(685);Object.defineProperty(_r,"registerBackend",{enumerable:!0,get:function(){return jr.registerBackend}})},3121:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.env=void 0;const jr=Ur(9104);let Gr="warning";_r.env={wasm:{},webgl:{},webgpu:{},versions:{common:jr.version},set logLevel(Wr){if(Wr!==void 0){if(typeof Wr!="string"||["verbose","info","warning","error","fatal"].indexOf(Wr)===-1)throw new Error(`Unsupported logging level: ${Wr}`);Gr=Wr}},get logLevel(){return Gr}},Object.defineProperty(_r.env,"logLevel",{enumerable:!0})},2457:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.env=void 0;const jr=Ur(3121);_r.env=jr.env},2235:function(Nr,_r,Ur){var jr=this&&this.__createBinding||(Object.create?function(Wr,Zr,Yr,ts){ts===void 0&&(ts=Yr);var es=Object.getOwnPropertyDescriptor(Zr,Yr);es&&!("get"in es?!Zr.__esModule:es.writable||es.configurable)||(es={enumerable:!0,get:function(){return Zr[Yr]}}),Object.defineProperty(Wr,ts,es)}:function(Wr,Zr,Yr,ts){ts===void 0&&(ts=Yr),Wr[ts]=Zr[Yr]}),Gr=this&&this.__exportStar||function(Wr,Zr){for(var Yr in Wr)Yr==="default"||Object.prototype.hasOwnProperty.call(Zr,Yr)||jr(Zr,Wr,Yr)};Object.defineProperty(_r,"__esModule",{value:!0}),Gr(Ur(4798),_r),Gr(Ur(2457),_r),Gr(Ur(3974),_r),Gr(Ur(963),_r),Gr(Ur(7852),_r)},8036:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.InferenceSession=void 0;const jr=Ur(685),Gr=Ur(963);class Wr{constructor(Yr){this.handler=Yr}async run(Yr,ts,es){const ns={};let Xr={};if(typeof Yr!="object"||Yr===null||Yr instanceof Gr.Tensor||Array.isArray(Yr))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let qr=!0;if(typeof ts=="object"){if(ts===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(ts instanceof Gr.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(ts)){if(ts.length===0)throw new TypeError("'fetches' cannot be an empty array.");qr=!1;for(const is of ts){if(typeof is!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(is)===-1)throw new RangeError(`'fetches' contains invalid output name: ${is}.`);ns[is]=null}if(typeof es=="object"&&es!==null)Xr=es;else if(es!==void 0)throw new TypeError("'options' must be an object.")}else{let is=!1;const ss=Object.getOwnPropertyNames(ts);for(const os of this.outputNames)if(ss.indexOf(os)!==-1){const ls=ts[os];(ls===null||ls instanceof Gr.Tensor)&&(is=!0,qr=!1,ns[os]=ls)}if(is){if(typeof es=="object"&&es!==null)Xr=es;else if(es!==void 0)throw new TypeError("'options' must be an object.")}else Xr=ts}}else if(ts!==void 0)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const is of this.inputNames)if(Yr[is]===void 0)throw new Error(`input '${is}' is missing in 'feeds'.`);if(qr)for(const is of this.outputNames)ns[is]=null;const _i=await this.handler.run(Yr,ns,Xr),rs={};for(const is in _i)Object.hasOwnProperty.call(_i,is)&&(rs[is]=new Gr.Tensor(_i[is].type,_i[is].data,_i[is].dims));return rs}async release(){return this.handler.dispose()}static async create(Yr,ts,es,ns){let Xr,qr={};if(typeof Yr=="string"){if(Xr=Yr,typeof ts=="object"&&ts!==null)qr=ts;else if(ts!==void 0)throw new TypeError("'options' must be an object.")}else if(Yr instanceof Uint8Array){if(Xr=Yr,typeof ts=="object"&&ts!==null)qr=ts;else if(ts!==void 0)throw new TypeError("'options' must be an object.")}else{if(!(Yr instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&Yr instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const ss=Yr;let os=0,ls=Yr.byteLength;if(typeof ts=="object"&&ts!==null)qr=ts;else if(typeof ts=="number"){if(os=ts,!Number.isSafeInteger(os))throw new RangeError("'byteOffset' must be an integer.");if(os<0||os>=ss.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${ss.byteLength}).`);if(ls=Yr.byteLength-os,typeof es=="number"){if(ls=es,!Number.isSafeInteger(ls))throw new RangeError("'byteLength' must be an integer.");if(ls<=0||os+ls>ss.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${ss.byteLength-os}].`);if(typeof ns=="object"&&ns!==null)qr=ns;else if(ns!==void 0)throw new TypeError("'options' must be an object.")}else if(es!==void 0)throw new TypeError("'byteLength' must be a number.")}else if(ts!==void 0)throw new TypeError("'options' must be an object.");Xr=new Uint8Array(ss,os,ls)}}const _i=(qr.executionProviders||[]).map(ss=>typeof ss=="string"?ss:ss.name),rs=await(0,jr.resolveBackend)(_i),is=await rs.createSessionHandler(Xr,qr);return new Wr(is)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}_r.InferenceSession=Wr},3974:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.InferenceSession=void 0;const jr=Ur(8036);_r.InferenceSession=jr.InferenceSession},7852:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0})},2350:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.tensorToImageData=_r.tensorToDataURL=void 0,_r.tensorToDataURL=(Ur,jr)=>{const Gr=document.createElement("canvas");Gr.width=Ur.dims[3],Gr.height=Ur.dims[2];const Wr=Gr.getContext("2d");if(Wr!=null){let Zr,Yr;(jr==null?void 0:jr.tensorLayout)!==void 0&&jr.tensorLayout==="NHWC"?(Zr=Ur.dims[2],Yr=Ur.dims[3]):(Zr=Ur.dims[3],Yr=Ur.dims[2]);const ts=(jr==null?void 0:jr.format)!==void 0?jr.format:"RGB",es=jr==null?void 0:jr.norm;let ns,Xr;es===void 0||es.mean===void 0?ns=[255,255,255,255]:typeof es.mean=="number"?ns=[es.mean,es.mean,es.mean,es.mean]:(ns=[es.mean[0],es.mean[1],es.mean[2],0],es.mean[3]!==void 0&&(ns[3]=es.mean[3])),es===void 0||es.bias===void 0?Xr=[0,0,0,0]:typeof es.bias=="number"?Xr=[es.bias,es.bias,es.bias,es.bias]:(Xr=[es.bias[0],es.bias[1],es.bias[2],0],es.bias[3]!==void 0&&(Xr[3]=es.bias[3]));const qr=Yr*Zr;let _i=0,rs=qr,is=2*qr,ss=-1;ts==="RGBA"?(_i=0,rs=qr,is=2*qr,ss=3*qr):ts==="RGB"?(_i=0,rs=qr,is=2*qr):ts==="RBG"&&(_i=0,is=qr,rs=2*qr);for(let os=0;os<Yr;os++)for(let ls=0;ls<Zr;ls++){const cs=(Ur.data[_i++]-Xr[0])*ns[0],ds=(Ur.data[rs++]-Xr[1])*ns[1],fs=(Ur.data[is++]-Xr[2])*ns[2],ms=ss===-1?255:(Ur.data[ss++]-Xr[3])*ns[3];Wr.fillStyle="rgba("+cs+","+ds+","+fs+","+ms+")",Wr.fillRect(ls,os,1,1)}return Gr.toDataURL()}throw new Error("Can not access image data")},_r.tensorToImageData=(Ur,jr)=>{const Gr=document.createElement("canvas").getContext("2d");let Wr;if(Gr==null)throw new Error("Can not access image data");{let Zr,Yr,ts;(jr==null?void 0:jr.tensorLayout)!==void 0&&jr.tensorLayout==="NHWC"?(Zr=Ur.dims[2],Yr=Ur.dims[1],ts=Ur.dims[3]):(Zr=Ur.dims[3],Yr=Ur.dims[2],ts=Ur.dims[1]);const es=jr!==void 0&&jr.format!==void 0?jr.format:"RGB",ns=jr==null?void 0:jr.norm;let Xr,qr;ns===void 0||ns.mean===void 0?Xr=[255,255,255,255]:typeof ns.mean=="number"?Xr=[ns.mean,ns.mean,ns.mean,ns.mean]:(Xr=[ns.mean[0],ns.mean[1],ns.mean[2],255],ns.mean[3]!==void 0&&(Xr[3]=ns.mean[3])),ns===void 0||ns.bias===void 0?qr=[0,0,0,0]:typeof ns.bias=="number"?qr=[ns.bias,ns.bias,ns.bias,ns.bias]:(qr=[ns.bias[0],ns.bias[1],ns.bias[2],0],ns.bias[3]!==void 0&&(qr[3]=ns.bias[3]));const _i=Yr*Zr;if(jr!==void 0&&(jr.format!==void 0&&ts===4&&jr.format!=="RGBA"||ts===3&&jr.format!=="RGB"&&jr.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const rs=4;let is=0,ss=1,os=2,ls=3,cs=0,ds=_i,fs=2*_i,ms=-1;es==="RGBA"?(cs=0,ds=_i,fs=2*_i,ms=3*_i):es==="RGB"?(cs=0,ds=_i,fs=2*_i):es==="RBG"&&(cs=0,fs=_i,ds=2*_i),Wr=Gr.createImageData(Zr,Yr);for(let ps=0;ps<Yr*Zr;is+=rs,ss+=rs,os+=rs,ls+=rs,ps++)Wr.data[is]=(Ur.data[cs++]-qr[0])*Xr[0],Wr.data[ss]=(Ur.data[ds++]-qr[1])*Xr[1],Wr.data[os]=(Ur.data[fs++]-qr[2])*Xr[2],Wr.data[ls]=ms===-1?255:(Ur.data[ms++]-qr[3])*Xr[3]}return Wr}},4866:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.tensorFromImage=_r.bufferToTensor=void 0;const jr=Ur(963);_r.bufferToTensor=(Gr,Wr)=>{if(Gr===void 0)throw new Error("Image buffer must be defined");if(Wr.height===void 0||Wr.width===void 0)throw new Error("Image height and width must be defined");if(Wr.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:Zr,width:Yr}=Wr,ts=Wr.norm??{mean:255,bias:0};let es,ns;es=typeof ts.mean=="number"?[ts.mean,ts.mean,ts.mean,ts.mean]:[ts.mean[0],ts.mean[1],ts.mean[2],ts.mean[3]??255],ns=typeof ts.bias=="number"?[ts.bias,ts.bias,ts.bias,ts.bias]:[ts.bias[0],ts.bias[1],ts.bias[2],ts.bias[3]??0];const Xr=Wr.format!==void 0?Wr.format:"RGBA",qr=Wr.tensorFormat!==void 0&&Wr.tensorFormat!==void 0?Wr.tensorFormat:"RGB",_i=Zr*Yr,rs=qr==="RGBA"?new Float32Array(4*_i):new Float32Array(3*_i);let is=4,ss=0,os=1,ls=2,cs=3,ds=0,fs=_i,ms=2*_i,ps=-1;Xr==="RGB"&&(is=3,ss=0,os=1,ls=2,cs=-1),qr==="RGBA"?ps=3*_i:qr==="RBG"?(ds=0,ms=_i,fs=2*_i):qr==="BGR"&&(ms=0,fs=_i,ds=2*_i);for(let ys=0;ys<_i;ys++,ss+=is,ls+=is,os+=is,cs+=is)rs[ds++]=(Gr[ss]+ns[0])/es[0],rs[fs++]=(Gr[os]+ns[1])/es[1],rs[ms++]=(Gr[ls]+ns[2])/es[2],ps!==-1&&cs!==-1&&(rs[ps++]=(Gr[cs]+ns[3])/es[3]);return qr==="RGBA"?new jr.Tensor("float32",rs,[1,4,Zr,Yr]):new jr.Tensor("float32",rs,[1,3,Zr,Yr])},_r.tensorFromImage=async(Gr,Wr)=>{const Zr=typeof HTMLImageElement<"u"&&Gr instanceof HTMLImageElement,Yr=typeof ImageData<"u"&&Gr instanceof ImageData,ts=typeof ImageBitmap<"u"&&Gr instanceof ImageBitmap,es=typeof Gr=="string";let ns,Xr=Wr??{};if(Zr){const qr=document.createElement("canvas");qr.width=Gr.width,qr.height=Gr.height;const _i=qr.getContext("2d");if(_i==null)throw new Error("Can not access image data");{let rs=Gr.height,is=Gr.width;if(Wr!==void 0&&Wr.resizedHeight!==void 0&&Wr.resizedWidth!==void 0&&(rs=Wr.resizedHeight,is=Wr.resizedWidth),Wr!==void 0){if(Xr=Wr,Wr.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");Xr.tensorFormat="RGBA",Xr.height=rs,Xr.width=is}else Xr.tensorFormat="RGBA",Xr.height=rs,Xr.width=is;_i.drawImage(Gr,0,0),ns=_i.getImageData(0,0,is,rs).data}}else{if(!Yr){if(ts){if(Wr===void 0)throw new Error("Please provide image config with format for Imagebitmap");const qr=document.createElement("canvas");qr.width=Gr.width,qr.height=Gr.height;const _i=qr.getContext("2d");if(_i!=null){const rs=Gr.height,is=Gr.width;return _i.drawImage(Gr,0,0,is,rs),ns=_i.getImageData(0,0,is,rs).data,Xr.height=rs,Xr.width=is,(0,_r.bufferToTensor)(ns,Xr)}throw new Error("Can not access image data")}if(es)return new Promise((qr,_i)=>{const rs=document.createElement("canvas"),is=rs.getContext("2d");if(!Gr||!is)return _i();const ss=new Image;ss.crossOrigin="Anonymous",ss.src=Gr,ss.onload=()=>{rs.width=ss.width,rs.height=ss.height,is.drawImage(ss,0,0,rs.width,rs.height);const os=is.getImageData(0,0,rs.width,rs.height);Xr.height=rs.height,Xr.width=rs.width,qr((0,_r.bufferToTensor)(os.data,Xr))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let qr,_i;if(Wr!==void 0&&Wr.resizedWidth!==void 0&&Wr.resizedHeight!==void 0?(qr=Wr.resizedHeight,_i=Wr.resizedWidth):(qr=Gr.height,_i=Gr.width),Wr!==void 0&&(Xr=Wr),Xr.format="RGBA",Xr.height=qr,Xr.width=_i,Wr!==void 0){const rs=document.createElement("canvas");rs.width=_i,rs.height=qr;const is=rs.getContext("2d");if(is==null)throw new Error("Can not access image data");is.putImageData(Gr,0,0),ns=is.getImageData(0,0,_i,qr).data}else ns=Gr.data}}if(ns!==void 0)return(0,_r.bufferToTensor)(ns,Xr);throw new Error("Input data provided is not supported - aborted tensor creation")}},5957:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.Tensor=void 0;const jr=Ur(2350),Gr=Ur(4866),Wr=Ur(106),Zr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Yr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let ts=!1;_r.Tensor=class{constructor(es,ns,Xr){let qr,_i,rs;if((()=>{if(!ts){ts=!0;const ss=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",os=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";ss&&(Zr.set("int64",BigInt64Array),Yr.set(BigInt64Array,"int64")),os&&(Zr.set("uint64",BigUint64Array),Yr.set(BigUint64Array,"uint64"))}})(),typeof es=="string")if(qr=es,rs=Xr,es==="string"){if(!Array.isArray(ns))throw new TypeError("A string tensor's data must be a string array.");_i=ns}else{const ss=Zr.get(es);if(ss===void 0)throw new TypeError(`Unsupported tensor type: ${es}.`);if(Array.isArray(ns)){if(es==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");_i=es==="uint64"||es==="int64"?ss.from(ns,BigInt):ss.from(ns)}else{if(!(ns instanceof ss))throw new TypeError(`A ${qr} tensor's data must be type of ${ss}`);_i=ns}}else if(rs=ns,Array.isArray(es)){if(es.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const ss=typeof es[0];if(ss==="string")qr="string",_i=es;else{if(ss!=="boolean")throw new TypeError(`Invalid element type of data array: ${ss}.`);qr="bool",_i=Uint8Array.from(es)}}else{const ss=Yr.get(es.constructor);if(ss===void 0)throw new TypeError(`Unsupported type for tensor data: ${es.constructor}.`);qr=ss,_i=es}if(rs===void 0)rs=[_i.length];else if(!Array.isArray(rs))throw new TypeError("A tensor's dims must be a number array");const is=(0,Wr.calculateSize)(rs);if(is!==_i.length)throw new Error(`Tensor's size(${is}) does not match data length(${_i.length}).`);this.dims=rs,this.type=qr,this.data=_i,this.size=is}static async fromImage(es,ns){return(0,Gr.tensorFromImage)(es,ns)}toDataURL(es){return(0,jr.tensorToDataURL)(this,es)}toImageData(es){return(0,jr.tensorToImageData)(this,es)}reshape(es){return(0,Wr.tensorReshape)(this,es)}}},106:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.tensorReshape=_r.calculateSize=void 0;const jr=Ur(963);_r.calculateSize=Gr=>{let Wr=1;for(let Zr=0;Zr<Gr.length;Zr++){const Yr=Gr[Zr];if(typeof Yr!="number"||!Number.isSafeInteger(Yr))throw new TypeError(`dims[${Zr}] must be an integer, got: ${Yr}`);if(Yr<0)throw new RangeError(`dims[${Zr}] must be a non-negative integer, got: ${Yr}`);Wr*=Yr}return Wr},_r.tensorReshape=(Gr,Wr)=>new jr.Tensor(Gr.type,Gr.data,Wr)},963:(Nr,_r,Ur)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.Tensor=void 0;const jr=Ur(5957);_r.Tensor=jr.Tensor},9104:(Nr,_r)=>{Object.defineProperty(_r,"__esModule",{value:!0}),_r.version=void 0,_r.version="1.16.1"},1583:(Nr,_r)=>{var Ur,jr=function(Gr){Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.default=void 0;var Wr=null;try{Wr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Zr(vs,Cs,Ss){this.low=0|vs,this.high=0|Cs,this.unsigned=!!Ss}function Yr(vs){return(vs&&vs.__isLong__)===!0}function ts(vs){var Cs=Math.clz32(vs&-vs);return vs?31-Cs:Cs}Zr.prototype.__isLong__,Object.defineProperty(Zr.prototype,"__isLong__",{value:!0}),Zr.isLong=Yr;var es={},ns={};function Xr(vs,Cs){var Ss,As,Us;return Cs?(Us=0<=(vs>>>=0)&&vs<256)&&(As=ns[vs])?As:(Ss=_i(vs,0,!0),Us&&(ns[vs]=Ss),Ss):(Us=-128<=(vs|=0)&&vs<128)&&(As=es[vs])?As:(Ss=_i(vs,vs<0?-1:0,!1),Us&&(es[vs]=Ss),Ss)}function qr(vs,Cs){if(isNaN(vs))return Cs?ms:fs;if(Cs){if(vs<0)return ms;if(vs>=ls)return Es}else{if(vs<=-cs)return Rs;if(vs+1>=cs)return xs}return vs<0?qr(-vs,Cs).neg():_i(vs%os|0,vs/os|0,Cs)}function _i(vs,Cs,Ss){return new Zr(vs,Cs,Ss)}Zr.fromInt=Xr,Zr.fromNumber=qr,Zr.fromBits=_i;var rs=Math.pow;function is(vs,Cs,Ss){if(vs.length===0)throw Error("empty string");if(typeof Cs=="number"?(Ss=Cs,Cs=!1):Cs=!!Cs,vs==="NaN"||vs==="Infinity"||vs==="+Infinity"||vs==="-Infinity")return Cs?ms:fs;if((Ss=Ss||10)<2||36<Ss)throw RangeError("radix");var As;if((As=vs.indexOf("-"))>0)throw Error("interior hyphen");if(As===0)return is(vs.substring(1),Cs,Ss).neg();for(var Us=qr(rs(Ss,8)),Ks=fs,Ws=0;Ws<vs.length;Ws+=8){var Js=Math.min(8,vs.length-Ws),ho=parseInt(vs.substring(Ws,Ws+Js),Ss);if(Js<8){var so=qr(rs(Ss,Js));Ks=Ks.mul(so).add(qr(ho))}else Ks=(Ks=Ks.mul(Us)).add(qr(ho))}return Ks.unsigned=Cs,Ks}function ss(vs,Cs){return typeof vs=="number"?qr(vs,Cs):typeof vs=="string"?is(vs,Cs):_i(vs.low,vs.high,typeof Cs=="boolean"?Cs:vs.unsigned)}Zr.fromString=is,Zr.fromValue=ss;var os=4294967296,ls=os*os,cs=ls/2,ds=Xr(1<<24),fs=Xr(0);Zr.ZERO=fs;var ms=Xr(0,!0);Zr.UZERO=ms;var ps=Xr(1);Zr.ONE=ps;var ys=Xr(1,!0);Zr.UONE=ys;var ws=Xr(-1);Zr.NEG_ONE=ws;var xs=_i(-1,2147483647,!1);Zr.MAX_VALUE=xs;var Es=_i(-1,-1,!0);Zr.MAX_UNSIGNED_VALUE=Es;var Rs=_i(0,-2147483648,!1);Zr.MIN_VALUE=Rs;var _s=Zr.prototype;_s.toInt=function(){return this.unsigned?this.low>>>0:this.low},_s.toNumber=function(){return this.unsigned?(this.high>>>0)*os+(this.low>>>0):this.high*os+(this.low>>>0)},_s.toString=function(vs){if((vs=vs||10)<2||36<vs)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Rs)){var Cs=qr(vs),Ss=this.div(Cs),As=Ss.mul(Cs).sub(this);return Ss.toString(vs)+As.toInt().toString(vs)}return"-"+this.neg().toString(vs)}for(var Us=qr(rs(vs,6),this.unsigned),Ks=this,Ws="";;){var Js=Ks.div(Us),ho=(Ks.sub(Js.mul(Us)).toInt()>>>0).toString(vs);if((Ks=Js).isZero())return ho+Ws;for(;ho.length<6;)ho="0"+ho;Ws=""+ho+Ws}},_s.getHighBits=function(){return this.high},_s.getHighBitsUnsigned=function(){return this.high>>>0},_s.getLowBits=function(){return this.low},_s.getLowBitsUnsigned=function(){return this.low>>>0},_s.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Rs)?64:this.neg().getNumBitsAbs();for(var vs=this.high!=0?this.high:this.low,Cs=31;Cs>0&&!(vs&1<<Cs);Cs--);return this.high!=0?Cs+33:Cs+1},_s.isZero=function(){return this.high===0&&this.low===0},_s.eqz=_s.isZero,_s.isNegative=function(){return!this.unsigned&&this.high<0},_s.isPositive=function(){return this.unsigned||this.high>=0},_s.isOdd=function(){return(1&this.low)==1},_s.isEven=function(){return(1&this.low)==0},_s.equals=function(vs){return Yr(vs)||(vs=ss(vs)),(this.unsigned===vs.unsigned||this.high>>>31!=1||vs.high>>>31!=1)&&this.high===vs.high&&this.low===vs.low},_s.eq=_s.equals,_s.notEquals=function(vs){return!this.eq(vs)},_s.neq=_s.notEquals,_s.ne=_s.notEquals,_s.lessThan=function(vs){return this.comp(vs)<0},_s.lt=_s.lessThan,_s.lessThanOrEqual=function(vs){return this.comp(vs)<=0},_s.lte=_s.lessThanOrEqual,_s.le=_s.lessThanOrEqual,_s.greaterThan=function(vs){return this.comp(vs)>0},_s.gt=_s.greaterThan,_s.greaterThanOrEqual=function(vs){return this.comp(vs)>=0},_s.gte=_s.greaterThanOrEqual,_s.ge=_s.greaterThanOrEqual,_s.compare=function(vs){if(Yr(vs)||(vs=ss(vs)),this.eq(vs))return 0;var Cs=this.isNegative(),Ss=vs.isNegative();return Cs&&!Ss?-1:!Cs&&Ss?1:this.unsigned?vs.high>>>0>this.high>>>0||vs.high===this.high&&vs.low>>>0>this.low>>>0?-1:1:this.sub(vs).isNegative()?-1:1},_s.comp=_s.compare,_s.negate=function(){return!this.unsigned&&this.eq(Rs)?Rs:this.not().add(ps)},_s.neg=_s.negate,_s.add=function(vs){Yr(vs)||(vs=ss(vs));var Cs=this.high>>>16,Ss=65535&this.high,As=this.low>>>16,Us=65535&this.low,Ks=vs.high>>>16,Ws=65535&vs.high,Js=vs.low>>>16,ho=0,so=0,io=0,vo=0;return io+=(vo+=Us+(65535&vs.low))>>>16,so+=(io+=As+Js)>>>16,ho+=(so+=Ss+Ws)>>>16,ho+=Cs+Ks,_i((io&=65535)<<16|(vo&=65535),(ho&=65535)<<16|(so&=65535),this.unsigned)},_s.subtract=function(vs){return Yr(vs)||(vs=ss(vs)),this.add(vs.neg())},_s.sub=_s.subtract,_s.multiply=function(vs){if(this.isZero())return this;if(Yr(vs)||(vs=ss(vs)),Wr)return _i(Wr.mul(this.low,this.high,vs.low,vs.high),Wr.get_high(),this.unsigned);if(vs.isZero())return this.unsigned?ms:fs;if(this.eq(Rs))return vs.isOdd()?Rs:fs;if(vs.eq(Rs))return this.isOdd()?Rs:fs;if(this.isNegative())return vs.isNegative()?this.neg().mul(vs.neg()):this.neg().mul(vs).neg();if(vs.isNegative())return this.mul(vs.neg()).neg();if(this.lt(ds)&&vs.lt(ds))return qr(this.toNumber()*vs.toNumber(),this.unsigned);var Cs=this.high>>>16,Ss=65535&this.high,As=this.low>>>16,Us=65535&this.low,Ks=vs.high>>>16,Ws=65535&vs.high,Js=vs.low>>>16,ho=65535&vs.low,so=0,io=0,vo=0,co=0;return vo+=(co+=Us*ho)>>>16,io+=(vo+=As*ho)>>>16,vo&=65535,io+=(vo+=Us*Js)>>>16,so+=(io+=Ss*ho)>>>16,io&=65535,so+=(io+=As*Js)>>>16,io&=65535,so+=(io+=Us*Ws)>>>16,so+=Cs*ho+Ss*Js+As*Ws+Us*Ks,_i((vo&=65535)<<16|(co&=65535),(so&=65535)<<16|(io&=65535),this.unsigned)},_s.mul=_s.multiply,_s.divide=function(vs){if(Yr(vs)||(vs=ss(vs)),vs.isZero())throw Error("division by zero");var Cs,Ss,As;if(Wr)return this.unsigned||this.high!==-2147483648||vs.low!==-1||vs.high!==-1?_i((this.unsigned?Wr.div_u:Wr.div_s)(this.low,this.high,vs.low,vs.high),Wr.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ms:fs;if(this.unsigned){if(vs.unsigned||(vs=vs.toUnsigned()),vs.gt(this))return ms;if(vs.gt(this.shru(1)))return ys;As=ms}else{if(this.eq(Rs))return vs.eq(ps)||vs.eq(ws)?Rs:vs.eq(Rs)?ps:(Cs=this.shr(1).div(vs).shl(1)).eq(fs)?vs.isNegative()?ps:ws:(Ss=this.sub(vs.mul(Cs)),As=Cs.add(Ss.div(vs)));if(vs.eq(Rs))return this.unsigned?ms:fs;if(this.isNegative())return vs.isNegative()?this.neg().div(vs.neg()):this.neg().div(vs).neg();if(vs.isNegative())return this.div(vs.neg()).neg();As=fs}for(Ss=this;Ss.gte(vs);){Cs=Math.max(1,Math.floor(Ss.toNumber()/vs.toNumber()));for(var Us=Math.ceil(Math.log(Cs)/Math.LN2),Ks=Us<=48?1:rs(2,Us-48),Ws=qr(Cs),Js=Ws.mul(vs);Js.isNegative()||Js.gt(Ss);)Js=(Ws=qr(Cs-=Ks,this.unsigned)).mul(vs);Ws.isZero()&&(Ws=ps),As=As.add(Ws),Ss=Ss.sub(Js)}return As},_s.div=_s.divide,_s.modulo=function(vs){return Yr(vs)||(vs=ss(vs)),Wr?_i((this.unsigned?Wr.rem_u:Wr.rem_s)(this.low,this.high,vs.low,vs.high),Wr.get_high(),this.unsigned):this.sub(this.div(vs).mul(vs))},_s.mod=_s.modulo,_s.rem=_s.modulo,_s.not=function(){return _i(~this.low,~this.high,this.unsigned)},_s.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},_s.clz=_s.countLeadingZeros,_s.countTrailingZeros=function(){return this.low?ts(this.low):ts(this.high)+32},_s.ctz=_s.countTrailingZeros,_s.and=function(vs){return Yr(vs)||(vs=ss(vs)),_i(this.low&vs.low,this.high&vs.high,this.unsigned)},_s.or=function(vs){return Yr(vs)||(vs=ss(vs)),_i(this.low|vs.low,this.high|vs.high,this.unsigned)},_s.xor=function(vs){return Yr(vs)||(vs=ss(vs)),_i(this.low^vs.low,this.high^vs.high,this.unsigned)},_s.shiftLeft=function(vs){return Yr(vs)&&(vs=vs.toInt()),(vs&=63)==0?this:vs<32?_i(this.low<<vs,this.high<<vs|this.low>>>32-vs,this.unsigned):_i(0,this.low<<vs-32,this.unsigned)},_s.shl=_s.shiftLeft,_s.shiftRight=function(vs){return Yr(vs)&&(vs=vs.toInt()),(vs&=63)==0?this:vs<32?_i(this.low>>>vs|this.high<<32-vs,this.high>>vs,this.unsigned):_i(this.high>>vs-32,this.high>=0?0:-1,this.unsigned)},_s.shr=_s.shiftRight,_s.shiftRightUnsigned=function(vs){return Yr(vs)&&(vs=vs.toInt()),(vs&=63)==0?this:vs<32?_i(this.low>>>vs|this.high<<32-vs,this.high>>>vs,this.unsigned):_i(vs===32?this.high:this.high>>>vs-32,0,this.unsigned)},_s.shru=_s.shiftRightUnsigned,_s.shr_u=_s.shiftRightUnsigned,_s.rotateLeft=function(vs){var Cs;return Yr(vs)&&(vs=vs.toInt()),(vs&=63)==0?this:vs===32?_i(this.high,this.low,this.unsigned):vs<32?(Cs=32-vs,_i(this.low<<vs|this.high>>>Cs,this.high<<vs|this.low>>>Cs,this.unsigned)):(Cs=32-(vs-=32),_i(this.high<<vs|this.low>>>Cs,this.low<<vs|this.high>>>Cs,this.unsigned))},_s.rotl=_s.rotateLeft,_s.rotateRight=function(vs){var Cs;return Yr(vs)&&(vs=vs.toInt()),(vs&=63)==0?this:vs===32?_i(this.high,this.low,this.unsigned):vs<32?(Cs=32-vs,_i(this.high<<Cs|this.low>>>vs,this.low<<Cs|this.high>>>vs,this.unsigned)):(Cs=32-(vs-=32),_i(this.low<<Cs|this.high>>>vs,this.high<<Cs|this.low>>>vs,this.unsigned))},_s.rotr=_s.rotateRight,_s.toSigned=function(){return this.unsigned?_i(this.low,this.high,!1):this},_s.toUnsigned=function(){return this.unsigned?this:_i(this.low,this.high,!0)},_s.toBytes=function(vs){return vs?this.toBytesLE():this.toBytesBE()},_s.toBytesLE=function(){var vs=this.high,Cs=this.low;return[255&Cs,Cs>>>8&255,Cs>>>16&255,Cs>>>24,255&vs,vs>>>8&255,vs>>>16&255,vs>>>24]},_s.toBytesBE=function(){var vs=this.high,Cs=this.low;return[vs>>>24,vs>>>16&255,vs>>>8&255,255&vs,Cs>>>24,Cs>>>16&255,Cs>>>8&255,255&Cs]},Zr.fromBytes=function(vs,Cs,Ss){return Ss?Zr.fromBytesLE(vs,Cs):Zr.fromBytesBE(vs,Cs)},Zr.fromBytesLE=function(vs,Cs){return new Zr(vs[0]|vs[1]<<8|vs[2]<<16|vs[3]<<24,vs[4]|vs[5]<<8|vs[6]<<16|vs[7]<<24,Cs)},Zr.fromBytesBE=function(vs,Cs){return new Zr(vs[4]<<24|vs[5]<<16|vs[6]<<8|vs[7],vs[0]<<24|vs[1]<<16|vs[2]<<8|vs[3],Cs)};var Bs=Zr;return Gr.default=Bs,"default"in Gr?Gr.default:Gr}({});(Ur=(function(){return jr}).apply(_r,[]))===void 0||(Nr.exports=Ur)},5686:(Nr,_r,Ur)=>{Ur.r(_r),Ur.d(_r,{flatbuffers:()=>jr});var jr={};jr.Offset,jr.Table,jr.SIZEOF_SHORT=2,jr.SIZEOF_INT=4,jr.FILE_IDENTIFIER_LENGTH=4,jr.SIZE_PREFIX_LENGTH=4,jr.Encoding={UTF8_BYTES:1,UTF16_STRING:2},jr.int32=new Int32Array(2),jr.float32=new Float32Array(jr.int32.buffer),jr.float64=new Float64Array(jr.int32.buffer),jr.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,jr.Long=function(Gr,Wr){this.low=0|Gr,this.high=0|Wr},jr.Long.create=function(Gr,Wr){return Gr==0&&Wr==0?jr.Long.ZERO:new jr.Long(Gr,Wr)},jr.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},jr.Long.prototype.equals=function(Gr){return this.low==Gr.low&&this.high==Gr.high},jr.Long.ZERO=new jr.Long(0,0),jr.Builder=function(Gr){if(Gr)Wr=Gr;else var Wr=1024;this.bb=jr.ByteBuffer.allocate(Wr),this.space=Wr,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},jr.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},jr.Builder.prototype.forceDefaults=function(Gr){this.force_defaults=Gr},jr.Builder.prototype.dataBuffer=function(){return this.bb},jr.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},jr.Builder.prototype.prep=function(Gr,Wr){Gr>this.minalign&&(this.minalign=Gr);for(var Zr=1+~(this.bb.capacity()-this.space+Wr)&Gr-1;this.space<Zr+Gr+Wr;){var Yr=this.bb.capacity();this.bb=jr.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-Yr}this.pad(Zr)},jr.Builder.prototype.pad=function(Gr){for(var Wr=0;Wr<Gr;Wr++)this.bb.writeInt8(--this.space,0)},jr.Builder.prototype.writeInt8=function(Gr){this.bb.writeInt8(this.space-=1,Gr)},jr.Builder.prototype.writeInt16=function(Gr){this.bb.writeInt16(this.space-=2,Gr)},jr.Builder.prototype.writeInt32=function(Gr){this.bb.writeInt32(this.space-=4,Gr)},jr.Builder.prototype.writeInt64=function(Gr){this.bb.writeInt64(this.space-=8,Gr)},jr.Builder.prototype.writeFloat32=function(Gr){this.bb.writeFloat32(this.space-=4,Gr)},jr.Builder.prototype.writeFloat64=function(Gr){this.bb.writeFloat64(this.space-=8,Gr)},jr.Builder.prototype.addInt8=function(Gr){this.prep(1,0),this.writeInt8(Gr)},jr.Builder.prototype.addInt16=function(Gr){this.prep(2,0),this.writeInt16(Gr)},jr.Builder.prototype.addInt32=function(Gr){this.prep(4,0),this.writeInt32(Gr)},jr.Builder.prototype.addInt64=function(Gr){this.prep(8,0),this.writeInt64(Gr)},jr.Builder.prototype.addFloat32=function(Gr){this.prep(4,0),this.writeFloat32(Gr)},jr.Builder.prototype.addFloat64=function(Gr){this.prep(8,0),this.writeFloat64(Gr)},jr.Builder.prototype.addFieldInt8=function(Gr,Wr,Zr){(this.force_defaults||Wr!=Zr)&&(this.addInt8(Wr),this.slot(Gr))},jr.Builder.prototype.addFieldInt16=function(Gr,Wr,Zr){(this.force_defaults||Wr!=Zr)&&(this.addInt16(Wr),this.slot(Gr))},jr.Builder.prototype.addFieldInt32=function(Gr,Wr,Zr){(this.force_defaults||Wr!=Zr)&&(this.addInt32(Wr),this.slot(Gr))},jr.Builder.prototype.addFieldInt64=function(Gr,Wr,Zr){!this.force_defaults&&Wr.equals(Zr)||(this.addInt64(Wr),this.slot(Gr))},jr.Builder.prototype.addFieldFloat32=function(Gr,Wr,Zr){(this.force_defaults||Wr!=Zr)&&(this.addFloat32(Wr),this.slot(Gr))},jr.Builder.prototype.addFieldFloat64=function(Gr,Wr,Zr){(this.force_defaults||Wr!=Zr)&&(this.addFloat64(Wr),this.slot(Gr))},jr.Builder.prototype.addFieldOffset=function(Gr,Wr,Zr){(this.force_defaults||Wr!=Zr)&&(this.addOffset(Wr),this.slot(Gr))},jr.Builder.prototype.addFieldStruct=function(Gr,Wr,Zr){Wr!=Zr&&(this.nested(Wr),this.slot(Gr))},jr.Builder.prototype.nested=function(Gr){if(Gr!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},jr.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},jr.Builder.prototype.slot=function(Gr){this.vtable[Gr]=this.offset()},jr.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},jr.Builder.growByteBuffer=function(Gr){var Wr=Gr.capacity();if(3221225472&Wr)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var Zr=Wr<<1,Yr=jr.ByteBuffer.allocate(Zr);return Yr.setPosition(Zr-Wr),Yr.bytes().set(Gr.bytes(),Zr-Wr),Yr},jr.Builder.prototype.addOffset=function(Gr){this.prep(jr.SIZEOF_INT,0),this.writeInt32(this.offset()-Gr+jr.SIZEOF_INT)},jr.Builder.prototype.startObject=function(Gr){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=Gr;for(var Wr=0;Wr<Gr;Wr++)this.vtable[Wr]=0;this.isNested=!0,this.object_start=this.offset()},jr.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var Gr=this.offset(),Wr=this.vtable_in_use-1;Wr>=0&&this.vtable[Wr]==0;Wr--);for(var Zr=Wr+1;Wr>=0;Wr--)this.addInt16(this.vtable[Wr]!=0?Gr-this.vtable[Wr]:0);this.addInt16(Gr-this.object_start);var Yr=(Zr+2)*jr.SIZEOF_SHORT;this.addInt16(Yr);var ts=0,es=this.space;e:for(Wr=0;Wr<this.vtables.length;Wr++){var ns=this.bb.capacity()-this.vtables[Wr];if(Yr==this.bb.readInt16(ns)){for(var Xr=jr.SIZEOF_SHORT;Xr<Yr;Xr+=jr.SIZEOF_SHORT)if(this.bb.readInt16(es+Xr)!=this.bb.readInt16(ns+Xr))continue e;ts=this.vtables[Wr];break}}return ts?(this.space=this.bb.capacity()-Gr,this.bb.writeInt32(this.space,ts-Gr)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-Gr,this.offset()-Gr)),this.isNested=!1,Gr},jr.Builder.prototype.finish=function(Gr,Wr,Zr){var Yr=Zr?jr.SIZE_PREFIX_LENGTH:0;if(Wr){var ts=Wr;if(this.prep(this.minalign,jr.SIZEOF_INT+jr.FILE_IDENTIFIER_LENGTH+Yr),ts.length!=jr.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+jr.FILE_IDENTIFIER_LENGTH);for(var es=jr.FILE_IDENTIFIER_LENGTH-1;es>=0;es--)this.writeInt8(ts.charCodeAt(es))}this.prep(this.minalign,jr.SIZEOF_INT+Yr),this.addOffset(Gr),Yr&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},jr.Builder.prototype.finishSizePrefixed=function(Gr,Wr){this.finish(Gr,Wr,!0)},jr.Builder.prototype.requiredField=function(Gr,Wr){var Zr=this.bb.capacity()-Gr,Yr=Zr-this.bb.readInt32(Zr);if(this.bb.readInt16(Yr+Wr)==0)throw new Error("FlatBuffers: field "+Wr+" must be set")},jr.Builder.prototype.startVector=function(Gr,Wr,Zr){this.notNested(),this.vector_num_elems=Wr,this.prep(jr.SIZEOF_INT,Gr*Wr),this.prep(Zr,Gr*Wr)},jr.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},jr.Builder.prototype.createString=function(Gr){if(Gr instanceof Uint8Array)var Wr=Gr;else{Wr=[];for(var Zr=0;Zr<Gr.length;){var Yr,ts=Gr.charCodeAt(Zr++);(Yr=ts<55296||ts>=56320?ts:(ts<<10)+Gr.charCodeAt(Zr++)+-56613888)<128?Wr.push(Yr):(Yr<2048?Wr.push(Yr>>6&31|192):(Yr<65536?Wr.push(Yr>>12&15|224):Wr.push(Yr>>18&7|240,Yr>>12&63|128),Wr.push(Yr>>6&63|128)),Wr.push(63&Yr|128))}}this.addInt8(0),this.startVector(1,Wr.length,1),this.bb.setPosition(this.space-=Wr.length),Zr=0;for(var es=this.space,ns=this.bb.bytes();Zr<Wr.length;Zr++)ns[es++]=Wr[Zr];return this.endVector()},jr.Builder.prototype.createLong=function(Gr,Wr){return jr.Long.create(Gr,Wr)},jr.ByteBuffer=function(Gr){this.bytes_=Gr,this.position_=0},jr.ByteBuffer.allocate=function(Gr){return new jr.ByteBuffer(new Uint8Array(Gr))},jr.ByteBuffer.prototype.clear=function(){this.position_=0},jr.ByteBuffer.prototype.bytes=function(){return this.bytes_},jr.ByteBuffer.prototype.position=function(){return this.position_},jr.ByteBuffer.prototype.setPosition=function(Gr){this.position_=Gr},jr.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},jr.ByteBuffer.prototype.readInt8=function(Gr){return this.readUint8(Gr)<<24>>24},jr.ByteBuffer.prototype.readUint8=function(Gr){return this.bytes_[Gr]},jr.ByteBuffer.prototype.readInt16=function(Gr){return this.readUint16(Gr)<<16>>16},jr.ByteBuffer.prototype.readUint16=function(Gr){return this.bytes_[Gr]|this.bytes_[Gr+1]<<8},jr.ByteBuffer.prototype.readInt32=function(Gr){return this.bytes_[Gr]|this.bytes_[Gr+1]<<8|this.bytes_[Gr+2]<<16|this.bytes_[Gr+3]<<24},jr.ByteBuffer.prototype.readUint32=function(Gr){return this.readInt32(Gr)>>>0},jr.ByteBuffer.prototype.readInt64=function(Gr){return new jr.Long(this.readInt32(Gr),this.readInt32(Gr+4))},jr.ByteBuffer.prototype.readUint64=function(Gr){return new jr.Long(this.readUint32(Gr),this.readUint32(Gr+4))},jr.ByteBuffer.prototype.readFloat32=function(Gr){return jr.int32[0]=this.readInt32(Gr),jr.float32[0]},jr.ByteBuffer.prototype.readFloat64=function(Gr){return jr.int32[jr.isLittleEndian?0:1]=this.readInt32(Gr),jr.int32[jr.isLittleEndian?1:0]=this.readInt32(Gr+4),jr.float64[0]},jr.ByteBuffer.prototype.writeInt8=function(Gr,Wr){this.bytes_[Gr]=Wr},jr.ByteBuffer.prototype.writeUint8=function(Gr,Wr){this.bytes_[Gr]=Wr},jr.ByteBuffer.prototype.writeInt16=function(Gr,Wr){this.bytes_[Gr]=Wr,this.bytes_[Gr+1]=Wr>>8},jr.ByteBuffer.prototype.writeUint16=function(Gr,Wr){this.bytes_[Gr]=Wr,this.bytes_[Gr+1]=Wr>>8},jr.ByteBuffer.prototype.writeInt32=function(Gr,Wr){this.bytes_[Gr]=Wr,this.bytes_[Gr+1]=Wr>>8,this.bytes_[Gr+2]=Wr>>16,this.bytes_[Gr+3]=Wr>>24},jr.ByteBuffer.prototype.writeUint32=function(Gr,Wr){this.bytes_[Gr]=Wr,this.bytes_[Gr+1]=Wr>>8,this.bytes_[Gr+2]=Wr>>16,this.bytes_[Gr+3]=Wr>>24},jr.ByteBuffer.prototype.writeInt64=function(Gr,Wr){this.writeInt32(Gr,Wr.low),this.writeInt32(Gr+4,Wr.high)},jr.ByteBuffer.prototype.writeUint64=function(Gr,Wr){this.writeUint32(Gr,Wr.low),this.writeUint32(Gr+4,Wr.high)},jr.ByteBuffer.prototype.writeFloat32=function(Gr,Wr){jr.float32[0]=Wr,this.writeInt32(Gr,jr.int32[0])},jr.ByteBuffer.prototype.writeFloat64=function(Gr,Wr){jr.float64[0]=Wr,this.writeInt32(Gr,jr.int32[jr.isLittleEndian?0:1]),this.writeInt32(Gr+4,jr.int32[jr.isLittleEndian?1:0])},jr.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+jr.SIZEOF_INT+jr.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var Gr="",Wr=0;Wr<jr.FILE_IDENTIFIER_LENGTH;Wr++)Gr+=String.fromCharCode(this.readInt8(this.position_+jr.SIZEOF_INT+Wr));return Gr},jr.ByteBuffer.prototype.__offset=function(Gr,Wr){var Zr=Gr-this.readInt32(Gr);return Wr<this.readInt16(Zr)?this.readInt16(Zr+Wr):0},jr.ByteBuffer.prototype.__union=function(Gr,Wr){return Gr.bb_pos=Wr+this.readInt32(Wr),Gr.bb=this,Gr},jr.ByteBuffer.prototype.__string=function(Gr,Wr){Gr+=this.readInt32(Gr);var Zr=this.readInt32(Gr),Yr="",ts=0;if(Gr+=jr.SIZEOF_INT,Wr===jr.Encoding.UTF8_BYTES)return this.bytes_.subarray(Gr,Gr+Zr);for(;ts<Zr;){var es,ns=this.readUint8(Gr+ts++);if(ns<192)es=ns;else{var Xr=this.readUint8(Gr+ts++);if(ns<224)es=(31&ns)<<6|63&Xr;else{var qr=this.readUint8(Gr+ts++);es=ns<240?(15&ns)<<12|(63&Xr)<<6|63&qr:(7&ns)<<18|(63&Xr)<<12|(63&qr)<<6|63&this.readUint8(Gr+ts++)}}es<65536?Yr+=String.fromCharCode(es):(es-=65536,Yr+=String.fromCharCode(55296+(es>>10),56320+(1023&es)))}return Yr},jr.ByteBuffer.prototype.__indirect=function(Gr){return Gr+this.readInt32(Gr)},jr.ByteBuffer.prototype.__vector=function(Gr){return Gr+this.readInt32(Gr)+jr.SIZEOF_INT},jr.ByteBuffer.prototype.__vector_len=function(Gr){return this.readInt32(Gr+this.readInt32(Gr))},jr.ByteBuffer.prototype.__has_identifier=function(Gr){if(Gr.length!=jr.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+jr.FILE_IDENTIFIER_LENGTH);for(var Wr=0;Wr<jr.FILE_IDENTIFIER_LENGTH;Wr++)if(Gr.charCodeAt(Wr)!=this.readInt8(this.position_+jr.SIZEOF_INT+Wr))return!1;return!0},jr.ByteBuffer.prototype.createLong=function(Gr,Wr){return jr.Long.create(Gr,Wr)}}},__webpack_module_cache__={};function __webpack_require__(Nr){var _r=__webpack_module_cache__[Nr];if(_r!==void 0)return _r.exports;var Ur=__webpack_module_cache__[Nr]={exports:{}};return __webpack_modules__[Nr].call(Ur.exports,Ur,Ur.exports,__webpack_require__),Ur.exports}__webpack_require__.n=Nr=>{var _r=Nr&&Nr.__esModule?()=>Nr.default:()=>Nr;return __webpack_require__.d(_r,{a:_r}),_r},__webpack_require__.d=(Nr,_r)=>{for(var Ur in _r)__webpack_require__.o(_r,Ur)&&!__webpack_require__.o(Nr,Ur)&&Object.defineProperty(Nr,Ur,{enumerable:!0,get:_r[Ur]})},__webpack_require__.o=(Nr,_r)=>Object.prototype.hasOwnProperty.call(Nr,_r),__webpack_require__.r=Nr=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Nr,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Nr,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__})())})(ort_min);var ort_minExports=ort_min.exports,__create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(Nr,_r)=>function(){return _r||(0,Nr[__getOwnPropNames(Nr)[0]])((_r={exports:{}}).exports,_r),_r.exports},__copyProps=(Nr,_r,Ur,jr)=>{if(_r&&typeof _r=="object"||typeof _r=="function")for(let Gr of __getOwnPropNames(_r))!__hasOwnProp.call(Nr,Gr)&&Gr!==Ur&&__defProp(Nr,Gr,{get:()=>_r[Gr],enumerable:!(jr=__getOwnPropDesc(_r,Gr))||jr.enumerable});return Nr},__toESM=(Nr,_r,Ur)=>(Ur=Nr!=null?__create(__getProtoOf(Nr)):{},__copyProps(_r||!Nr||!Nr.__esModule?__defProp(Ur,"default",{value:Nr,enumerable:!0}):Ur,Nr)),require_iota=__commonJS({"node_modules/iota-array/iota.js"(Nr,_r){function Ur(jr){for(var Gr=new Array(jr),Wr=0;Wr<jr;++Wr)Gr[Wr]=Wr;return Gr}_r.exports=Ur}}),require_is_buffer=__commonJS({"node_modules/is-buffer/index.js"(Nr,_r){_r.exports=function(Gr){return Gr!=null&&(Ur(Gr)||jr(Gr)||!!Gr._isBuffer)};function Ur(Gr){return!!Gr.constructor&&typeof Gr.constructor.isBuffer=="function"&&Gr.constructor.isBuffer(Gr)}function jr(Gr){return typeof Gr.readFloatLE=="function"&&typeof Gr.slice=="function"&&Ur(Gr.slice(0,0))}}}),require_ndarray=__commonJS({"node_modules/ndarray/ndarray.js"(Nr,_r){var Ur=require_iota(),jr=require_is_buffer(),Gr=typeof Float64Array<"u";function Wr(Xr,qr){return Xr[0]-qr[0]}function Zr(){var Xr=this.stride,qr=new Array(Xr.length),_i;for(_i=0;_i<qr.length;++_i)qr[_i]=[Math.abs(Xr[_i]),_i];qr.sort(Wr);var rs=new Array(qr.length);for(_i=0;_i<rs.length;++_i)rs[_i]=qr[_i][1];return rs}function Yr(Xr,qr){var _i=["View",qr,"d",Xr].join("");qr<0&&(_i="View_Nil"+Xr);var rs=Xr==="generic";if(qr===-1){var is="function "+_i+"(a){this.data=a;};var proto="+_i+".prototype;proto.dtype='"+Xr+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+_i+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+_i+"(a){return new "+_i+"(a);}",xs=new Function(is);return xs()}else if(qr===0){var is="function "+_i+"(a,d) {this.data = a;this.offset = d};var proto="+_i+".prototype;proto.dtype='"+Xr+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+_i+"_copy() {return new "+_i+"(this.data,this.offset)};proto.pick=function "+_i+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+_i+"_get(){return "+(rs?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+_i+"_set(v){return "+(rs?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+_i+"(a,b,c,d){return new "+_i+"(a,d)}",xs=new Function("TrivialArray",is);return xs(es[Xr][0])}var is=["'use strict'"],ss=Ur(qr),os=ss.map(function(Es){return"i"+Es}),ls="this.offset+"+ss.map(function(Es){return"this.stride["+Es+"]*i"+Es}).join("+"),cs=ss.map(function(Es){return"b"+Es}).join(","),ds=ss.map(function(Es){return"c"+Es}).join(",");is.push("function "+_i+"(a,"+cs+","+ds+",d){this.data=a","this.shape=["+cs+"]","this.stride=["+ds+"]","this.offset=d|0}","var proto="+_i+".prototype","proto.dtype='"+Xr+"'","proto.dimension="+qr),is.push("Object.defineProperty(proto,'size',{get:function "+_i+"_size(){return "+ss.map(function(Es){return"this.shape["+Es+"]"}).join("*"),"}})"),qr===1?is.push("proto.order=[0]"):(is.push("Object.defineProperty(proto,'order',{get:"),qr<4?(is.push("function "+_i+"_order(){"),qr===2?is.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):qr===3&&is.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):is.push("ORDER})")),is.push("proto.set=function "+_i+"_set("+os.join(",")+",v){"),rs?is.push("return this.data.set("+ls+",v)}"):is.push("return this.data["+ls+"]=v}"),is.push("proto.get=function "+_i+"_get("+os.join(",")+"){"),rs?is.push("return this.data.get("+ls+")}"):is.push("return this.data["+ls+"]}"),is.push("proto.index=function "+_i+"_index(",os.join(),"){return "+ls+"}"),is.push("proto.hi=function "+_i+"_hi("+os.join(",")+"){return new "+_i+"(this.data,"+ss.map(function(Es){return["(typeof i",Es,"!=='number'||i",Es,"<0)?this.shape[",Es,"]:i",Es,"|0"].join("")}).join(",")+","+ss.map(function(Es){return"this.stride["+Es+"]"}).join(",")+",this.offset)}");var fs=ss.map(function(Es){return"a"+Es+"=this.shape["+Es+"]"}),ms=ss.map(function(Es){return"c"+Es+"=this.stride["+Es+"]"});is.push("proto.lo=function "+_i+"_lo("+os.join(",")+"){var b=this.offset,d=0,"+fs.join(",")+","+ms.join(","));for(var ps=0;ps<qr;++ps)is.push("if(typeof i"+ps+"==='number'&&i"+ps+">=0){d=i"+ps+"|0;b+=c"+ps+"*d;a"+ps+"-=d}");is.push("return new "+_i+"(this.data,"+ss.map(function(Es){return"a"+Es}).join(",")+","+ss.map(function(Es){return"c"+Es}).join(",")+",b)}"),is.push("proto.step=function "+_i+"_step("+os.join(",")+"){var "+ss.map(function(Es){return"a"+Es+"=this.shape["+Es+"]"}).join(",")+","+ss.map(function(Es){return"b"+Es+"=this.stride["+Es+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var ps=0;ps<qr;++ps)is.push("if(typeof i"+ps+"==='number'){d=i"+ps+"|0;if(d<0){c+=b"+ps+"*(a"+ps+"-1);a"+ps+"=ceil(-a"+ps+"/d)}else{a"+ps+"=ceil(a"+ps+"/d)}b"+ps+"*=d}");is.push("return new "+_i+"(this.data,"+ss.map(function(Es){return"a"+Es}).join(",")+","+ss.map(function(Es){return"b"+Es}).join(",")+",c)}");for(var ys=new Array(qr),ws=new Array(qr),ps=0;ps<qr;++ps)ys[ps]="a[i"+ps+"]",ws[ps]="b[i"+ps+"]";is.push("proto.transpose=function "+_i+"_transpose("+os+"){"+os.map(function(Es,Rs){return Es+"=("+Es+"===undefined?"+Rs+":"+Es+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+_i+"(this.data,"+ys.join(",")+","+ws.join(",")+",this.offset)}"),is.push("proto.pick=function "+_i+"_pick("+os+"){var a=[],b=[],c=this.offset");for(var ps=0;ps<qr;++ps)is.push("if(typeof i"+ps+"==='number'&&i"+ps+">=0){c=(c+this.stride["+ps+"]*i"+ps+")|0}else{a.push(this.shape["+ps+"]);b.push(this.stride["+ps+"])}");is.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),is.push("return function construct_"+_i+"(data,shape,stride,offset){return new "+_i+"(data,"+ss.map(function(Es){return"shape["+Es+"]"}).join(",")+","+ss.map(function(Es){return"stride["+Es+"]"}).join(",")+",offset)}");var xs=new Function("CTOR_LIST","ORDER",is.join(`
`));return xs(es[Xr],Zr)}function ts(Xr){if(jr(Xr))return"buffer";if(Gr)switch(Object.prototype.toString.call(Xr)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(Xr)?"array":"generic"}var es={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function ns(Xr,qr,_i,rs){if(Xr===void 0){var ds=es.array[0];return ds([])}else typeof Xr=="number"&&(Xr=[Xr]);qr===void 0&&(qr=[Xr.length]);var is=qr.length;if(_i===void 0){_i=new Array(is);for(var ss=is-1,os=1;ss>=0;--ss)_i[ss]=os,os*=qr[ss]}if(rs===void 0){rs=0;for(var ss=0;ss<is;++ss)_i[ss]<0&&(rs-=(qr[ss]-1)*_i[ss])}for(var ls=ts(Xr),cs=es[ls];cs.length<=is+1;)cs.push(Yr(ls,cs.length-1));var ds=cs[is+1];return ds(Xr,qr,_i,rs)}_r.exports=ns}}),require_lodash=__commonJS({"node_modules/lodash/lodash.js"(Nr,_r){(function(){var Ur,jr="4.17.21",Gr=200,Wr="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Zr="Expected a function",Yr="Invalid `variable` option passed into `_.template`",ts="__lodash_hash_undefined__",es=500,ns="__lodash_placeholder__",Xr=1,qr=2,_i=4,rs=1,is=2,ss=1,os=2,ls=4,cs=8,ds=16,fs=32,ms=64,ps=128,ys=256,ws=512,xs=30,Es="...",Rs=800,_s=16,Bs=1,vs=2,Cs=3,Ss=1/0,As=9007199254740991,Us=17976931348623157e292,Ks=0/0,Ws=4294967295,Js=Ws-1,ho=Ws>>>1,so=[["ary",ps],["bind",ss],["bindKey",os],["curry",cs],["curryRight",ds],["flip",ws],["partial",fs],["partialRight",ms],["rearg",ys]],io="[object Arguments]",vo="[object Array]",co="[object AsyncFunction]",go="[object Boolean]",Eo="[object Date]",Ro="[object DOMException]",Po="[object Error]",Oo="[object Function]",Ts="[object GeneratorFunction]",Ns="[object Map]",to="[object Number]",ao="[object Null]",lo="[object Object]",Io="[object Promise]",po="[object Proxy]",Fo="[object RegExp]",Do="[object Set]",No="[object String]",Co="[object Symbol]",qo="[object Undefined]",Mo="[object WeakMap]",_l="[object WeakSet]",Al="[object ArrayBuffer]",Yl="[object DataView]",Ul="[object Float32Array]",eu="[object Float64Array]",du="[object Int8Array]",ru="[object Int16Array]",tu="[object Int32Array]",$l="[object Uint8Array]",Ps="[object Uint8ClampedArray]",Os="[object Uint16Array]",Gs="[object Uint32Array]",Is=/\b__p \+= '';/g,zs=/\b(__p \+=) '' \+/g,qs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ys=/&(?:amp|lt|gt|quot|#39);/g,Xs=/[&<>"']/g,xo=RegExp(Ys.source),To=RegExp(Xs.source),jo=/<%-([\s\S]+?)%>/g,Xo=/<%([\s\S]+?)%>/g,Uo=/<%=([\s\S]+?)%>/g,Ml=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fu=/^\w*$/,xu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fo=/[\\^$.*+?()[\]{}|]/g,xl=RegExp(fo.source),Pl=/^\s+/,wu=/\s/,lp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qu=/\{\n\/\* \[wrapped with (.+)\] \*/,up=/,? & /,wm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ou=/[()=,{}\[\]\/\s]/,Ku=/\\(\\)?/g,Mu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zu=/\w*$/,rm=/^[-+]0x[0-9a-f]+$/i,nm=/^0b[01]+$/i,im=/^\[object .+?Constructor\]$/,Fp=/^0o[0-7]+$/i,Em=/^(?:0|[1-9]\d*)$/,Ol=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yu=/($^)/,cp=/['\n\r\u2028\u2029\\]/g,Eu="\\ud800-\\udfff",Rl="\\u0300-\\u036f",Bp="\\ufe20-\\ufe2f",sm="\\u20d0-\\u20ff",Up=Rl+Bp+sm,dp="\\u2700-\\u27bf",jp="a-z\\xdf-\\xf6\\xf8-\\xff",zp="\\xac\\xb1\\xd7\\xf7",om="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hp="\\u2000-\\u206f",Sp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vp="A-Z\\xc0-\\xd6\\xd8-\\xde",am="\\ufe0e\\ufe0f",Gp=zp+om+Hp+Sp,Wp="[']",Tm="["+Eu+"]",fp="["+Gp+"]",hp="["+Up+"]",Fl="\\d+",Nu="["+dp+"]",ep="["+jp+"]",_p="[^"+Eu+Gp+Fl+dp+jp+Vp+"]",tp="\\ud83c[\\udffb-\\udfff]",$p="(?:"+hp+"|"+tp+")",qp="[^"+Eu+"]",Cp="(?:\\ud83c[\\udde6-\\uddff]){2}",Fu="[\\ud800-\\udbff][\\udc00-\\udfff]",Ru="["+Vp+"]",Xu="\\u200d",ks="(?:"+ep+"|"+_p+")",gs="(?:"+Ru+"|"+_p+")",$s="(?:"+Wp+"(?:d|ll|m|re|s|t|ve))?",Ds="(?:"+Wp+"(?:D|LL|M|RE|S|T|VE))?",js=$p+"?",Vs="["+am+"]?",no="(?:"+Xu+"(?:"+[qp,Cp,Fu].join("|")+")"+Vs+js+")*",uo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",So="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_o=Vs+js+no,Ho="(?:"+[Nu,Cp,Fu].join("|")+")"+_o,Lo="(?:"+[qp+hp+"?",hp,Cp,Fu,Tm].join("|")+")",ba=RegExp(Wp,"g"),Jo=RegExp(hp,"g"),ro=RegExp(tp+"(?="+tp+")|"+Lo+_o,"g"),$o=RegExp([Ru+"?"+ep+"+"+$s+"(?="+[fp,Ru,"$"].join("|")+")",gs+"+"+Ds+"(?="+[fp,Ru+ks,"$"].join("|")+")",Ru+"?"+ks+"+"+$s,Ru+"+"+Ds,So,uo,Fl,Ho].join("|"),"g"),ko=RegExp("["+Xu+Eu+Up+am+"]"),zo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,na=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qo=-1,Go={};Go[Ul]=Go[eu]=Go[du]=Go[ru]=Go[tu]=Go[$l]=Go[Ps]=Go[Os]=Go[Gs]=!0,Go[io]=Go[vo]=Go[Al]=Go[go]=Go[Yl]=Go[Eo]=Go[Po]=Go[Oo]=Go[Ns]=Go[to]=Go[lo]=Go[Fo]=Go[Do]=Go[No]=Go[Mo]=!1;var ga={};ga[io]=ga[vo]=ga[Al]=ga[Yl]=ga[go]=ga[Eo]=ga[Ul]=ga[eu]=ga[du]=ga[ru]=ga[tu]=ga[Ns]=ga[to]=ga[lo]=ga[Fo]=ga[Do]=ga[No]=ga[Co]=ga[$l]=ga[Ps]=ga[Os]=ga[Gs]=!0,ga[Po]=ga[Oo]=ga[Mo]=!1;var Tu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},zl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Su=parseFloat,gu=parseInt,Bu=typeof global=="object"&&global&&global.Object===Object&&global,Qu=typeof self=="object"&&self&&self.Object===Object&&self,Vo=Bu||Qu||Function("return this")(),El=typeof Nr=="object"&&Nr&&!Nr.nodeType&&Nr,Gl=El&&typeof _r=="object"&&_r&&!_r.nodeType&&_r,au=Gl&&Gl.exports===El,Xl=au&&Bu.process,Hl=function(){try{var Qs=Gl&&Gl.require&&Gl.require("util").types;return Qs||Xl&&Xl.binding&&Xl.binding("util")}catch{}}(),Uu=Hl&&Hl.isArrayBuffer,jm=Hl&&Hl.isDate,rp=Hl&&Hl.isMap,zm=Hl&&Hl.isRegExp,Sm=Hl&&Hl.isSet,_u=Hl&&Hl.isTypedArray;function nu(Qs,mo,oo){switch(oo.length){case 0:return Qs.call(mo);case 1:return Qs.call(mo,oo[0]);case 2:return Qs.call(mo,oo[0],oo[1]);case 3:return Qs.call(mo,oo[0],oo[1],oo[2])}return Qs.apply(mo,oo)}function np(Qs,mo,oo,Bo){for(var xa=-1,Ll=Qs==null?0:Qs.length;++xa<Ll;){var iu=Qs[xa];mo(Bo,iu,oo(iu),Qs)}return Bo}function uu(Qs,mo){for(var oo=-1,Bo=Qs==null?0:Qs.length;++oo<Bo&&mo(Qs[oo],oo,Qs)!==!1;);return Qs}function pp(Qs,mo){for(var oo=Qs==null?0:Qs.length;oo--&&mo(Qs[oo],oo,Qs)!==!1;);return Qs}function lm(Qs,mo){for(var oo=-1,Bo=Qs==null?0:Qs.length;++oo<Bo;)if(!mo(Qs[oo],oo,Qs))return!1;return!0}function Ip(Qs,mo){for(var oo=-1,Bo=Qs==null?0:Qs.length,xa=0,Ll=[];++oo<Bo;){var iu=Qs[oo];mo(iu,oo,Qs)&&(Ll[xa++]=iu)}return Ll}function Hm(Qs,mo){var oo=Qs==null?0:Qs.length;return!!oo&&um(Qs,mo,0)>-1}function R0(Qs,mo,oo){for(var Bo=-1,xa=Qs==null?0:Qs.length;++Bo<xa;)if(oo(mo,Qs[Bo]))return!0;return!1}function Vl(Qs,mo){for(var oo=-1,Bo=Qs==null?0:Qs.length,xa=Array(Bo);++oo<Bo;)xa[oo]=mo(Qs[oo],oo,Qs);return xa}function Ap(Qs,mo){for(var oo=-1,Bo=mo.length,xa=Qs.length;++oo<Bo;)Qs[xa+oo]=mo[oo];return Qs}function P0(Qs,mo,oo,Bo){var xa=-1,Ll=Qs==null?0:Qs.length;for(Bo&&Ll&&(oo=Qs[++xa]);++xa<Ll;)oo=mo(oo,Qs[xa],xa,Qs);return oo}function V1(Qs,mo,oo,Bo){var xa=Qs==null?0:Qs.length;for(Bo&&xa&&(oo=Qs[--xa]);xa--;)oo=mo(oo,Qs[xa],xa,Qs);return oo}function k0(Qs,mo){for(var oo=-1,Bo=Qs==null?0:Qs.length;++oo<Bo;)if(mo(Qs[oo],oo,Qs))return!0;return!1}var G1=O0("length");function W1(Qs){return Qs.split("")}function q1(Qs){return Qs.match(wm)||[]}function Fy(Qs,mo,oo){var Bo;return oo(Qs,function(xa,Ll,iu){if(mo(xa,Ll,iu))return Bo=Ll,!1}),Bo}function Vm(Qs,mo,oo,Bo){for(var xa=Qs.length,Ll=oo+(Bo?1:-1);Bo?Ll--:++Ll<xa;)if(mo(Qs[Ll],Ll,Qs))return Ll;return-1}function um(Qs,mo,oo){return mo===mo?ix(Qs,mo,oo):Vm(Qs,By,oo)}function K1(Qs,mo,oo,Bo){for(var xa=oo-1,Ll=Qs.length;++xa<Ll;)if(Bo(Qs[xa],mo))return xa;return-1}function By(Qs){return Qs!==Qs}function Uy(Qs,mo){var oo=Qs==null?0:Qs.length;return oo?D0(Qs,mo)/oo:Ks}function O0(Qs){return function(mo){return mo==null?Ur:mo[Qs]}}function L0(Qs){return function(mo){return Qs==null?Ur:Qs[mo]}}function jy(Qs,mo,oo,Bo,xa){return xa(Qs,function(Ll,iu,Bl){oo=Bo?(Bo=!1,Ll):mo(oo,Ll,iu,Bl)}),oo}function Z1(Qs,mo){var oo=Qs.length;for(Qs.sort(mo);oo--;)Qs[oo]=Qs[oo].value;return Qs}function D0(Qs,mo){for(var oo,Bo=-1,xa=Qs.length;++Bo<xa;){var Ll=mo(Qs[Bo]);Ll!==Ur&&(oo=oo===Ur?Ll:oo+Ll)}return oo}function M0(Qs,mo){for(var oo=-1,Bo=Array(Qs);++oo<Qs;)Bo[oo]=mo(oo);return Bo}function Y1(Qs,mo){return Vl(mo,function(oo){return[oo,Qs[oo]]})}function zy(Qs){return Qs&&Qs.slice(0,Wy(Qs)+1).replace(Pl,"")}function Pu(Qs){return function(mo){return Qs(mo)}}function N0(Qs,mo){return Vl(mo,function(oo){return Qs[oo]})}function _m(Qs,mo){return Qs.has(mo)}function Hy(Qs,mo){for(var oo=-1,Bo=Qs.length;++oo<Bo&&um(mo,Qs[oo],0)>-1;);return oo}function Vy(Qs,mo){for(var oo=Qs.length;oo--&&um(mo,Qs[oo],0)>-1;);return oo}function X1(Qs,mo){for(var oo=Qs.length,Bo=0;oo--;)Qs[oo]===mo&&++Bo;return Bo}var Q1=L0(Tu),J1=L0(zl);function _b(Qs){return"\\"+Kl[Qs]}function ex(Qs,mo){return Qs==null?Ur:Qs[mo]}function cm(Qs){return ko.test(Qs)}function tx(Qs){return zo.test(Qs)}function rx(Qs){for(var mo,oo=[];!(mo=Qs.next()).done;)oo.push(mo.value);return oo}function F0(Qs){var mo=-1,oo=Array(Qs.size);return Qs.forEach(function(Bo,xa){oo[++mo]=[xa,Bo]}),oo}function Gy(Qs,mo){return function(oo){return Qs(mo(oo))}}function Rp(Qs,mo){for(var oo=-1,Bo=Qs.length,xa=0,Ll=[];++oo<Bo;){var iu=Qs[oo];(iu===mo||iu===ns)&&(Qs[oo]=ns,Ll[xa++]=oo)}return Ll}function Gm(Qs){var mo=-1,oo=Array(Qs.size);return Qs.forEach(function(Bo){oo[++mo]=Bo}),oo}function nx(Qs){var mo=-1,oo=Array(Qs.size);return Qs.forEach(function(Bo){oo[++mo]=[Bo,Bo]}),oo}function ix(Qs,mo,oo){for(var Bo=oo-1,xa=Qs.length;++Bo<xa;)if(Qs[Bo]===mo)return Bo;return-1}function sx(Qs,mo,oo){for(var Bo=oo+1;Bo--;)if(Qs[Bo]===mo)return Bo;return Bo}function dm(Qs){return cm(Qs)?ax(Qs):G1(Qs)}function Ju(Qs){return cm(Qs)?lx(Qs):W1(Qs)}function Wy(Qs){for(var mo=Qs.length;mo--&&wu.test(Qs.charAt(mo)););return mo}var ox=L0(hu);function ax(Qs){for(var mo=ro.lastIndex=0;ro.test(Qs);)++mo;return mo}function lx(Qs){return Qs.match(ro)||[]}function ux(Qs){return Qs.match($o)||[]}var cx=function Qs(mo){mo=mo==null?Vo:Pp.defaults(Vo.Object(),mo,Pp.pick(Vo,na));var oo=mo.Array,Bo=mo.Date,xa=mo.Error,Ll=mo.Function,iu=mo.Math,Bl=mo.Object,B0=mo.RegExp,dx=mo.String,ju=mo.TypeError,Wm=oo.prototype,fx=Ll.prototype,fm=Bl.prototype,qm=mo["__core-js_shared__"],Km=fx.toString,Nl=fm.hasOwnProperty,hx=0,qy=function(){var as=/[^.]+$/.exec(qm&&qm.keys&&qm.keys.IE_PROTO||"");return as?"Symbol(src)_1."+as:""}(),Zm=fm.toString,px=Km.call(Bl),mx=Vo._,gx=B0("^"+Km.call(Nl).replace(fo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ym=au?mo.Buffer:Ur,kp=mo.Symbol,Xm=mo.Uint8Array,Ky=Ym?Ym.allocUnsafe:Ur,Qm=Gy(Bl.getPrototypeOf,Bl),Zy=Bl.create,Yy=fm.propertyIsEnumerable,Jm=Wm.splice,Xy=kp?kp.isConcatSpreadable:Ur,$m=kp?kp.iterator:Ur,Kp=kp?kp.toStringTag:Ur,e0=function(){try{var as=Jp(Bl,"defineProperty");return as({},"",{}),as}catch{}}(),yx=mo.clearTimeout!==Vo.clearTimeout&&mo.clearTimeout,vx=Bo&&Bo.now!==Vo.Date.now&&Bo.now,bx=mo.setTimeout!==Vo.setTimeout&&mo.setTimeout,t0=iu.ceil,r0=iu.floor,U0=Bl.getOwnPropertySymbols,xx=Ym?Ym.isBuffer:Ur,Qy=mo.isFinite,wx=Wm.join,Ex=Gy(Bl.keys,Bl),su=iu.max,pu=iu.min,Tx=Bo.now,Sx=mo.parseInt,Jy=iu.random,_x=Wm.reverse,j0=Jp(mo,"DataView"),Cm=Jp(mo,"Map"),z0=Jp(mo,"Promise"),hm=Jp(mo,"Set"),Im=Jp(mo,"WeakMap"),Am=Jp(Bl,"create"),n0=Im&&new Im,pm={},$x=em(j0),Cx=em(Cm),Ix=em(z0),Ax=em(hm),Rx=em(Im),i0=kp?kp.prototype:Ur,Rm=i0?i0.valueOf:Ur,ev=i0?i0.toString:Ur;function Ms(as){if(Zl(as)&&!_a(as)&&!(as instanceof Cl)){if(as instanceof zu)return as;if(Nl.call(as,"__wrapped__"))return t1(as)}return new zu(as)}var mm=function(){function as(){}return function(us){if(!Wl(us))return{};if(Zy)return Zy(us);as.prototype=us;var hs=new as;return as.prototype=Ur,hs}}();function s0(){}function zu(as,us){this.__wrapped__=as,this.__actions__=[],this.__chain__=!!us,this.__index__=0,this.__values__=Ur}Ms.templateSettings={escape:jo,evaluate:Xo,interpolate:Uo,variable:"",imports:{_:Ms}},Ms.prototype=s0.prototype,Ms.prototype.constructor=Ms,zu.prototype=mm(s0.prototype),zu.prototype.constructor=zu;function Cl(as){this.__wrapped__=as,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ws,this.__views__=[]}function Px(){var as=new Cl(this.__wrapped__);return as.__actions__=$u(this.__actions__),as.__dir__=this.__dir__,as.__filtered__=this.__filtered__,as.__iteratees__=$u(this.__iteratees__),as.__takeCount__=this.__takeCount__,as.__views__=$u(this.__views__),as}function kx(){if(this.__filtered__){var as=new Cl(this);as.__dir__=-1,as.__filtered__=!0}else as=this.clone(),as.__dir__*=-1;return as}function Ox(){var as=this.__wrapped__.value(),us=this.__dir__,hs=_a(as),bs=us<0,Ls=hs?as.length:0,Fs=Gw(0,Ls,this.__views__),Hs=Fs.start,Zs=Fs.end,eo=Zs-Hs,yo=bs?Zs:Hs-1,bo=this.__iteratees__,wo=bo.length,Ao=0,Wo=pu(eo,this.__takeCount__);if(!hs||!bs&&Ls==eo&&Wo==eo)return Sv(as,this.__actions__);var Zo=[];e:for(;eo--&&Ao<Wo;){yo+=us;for(var yl=-1,Yo=as[yo];++yl<wo;){var Sl=bo[yl],Il=Sl.iteratee,Lu=Sl.type,bu=Il(Yo);if(Lu==vs)Yo=bu;else if(!bu){if(Lu==Bs)continue e;break e}}Zo[Ao++]=Yo}return Zo}Cl.prototype=mm(s0.prototype),Cl.prototype.constructor=Cl;function Zp(as){var us=-1,hs=as==null?0:as.length;for(this.clear();++us<hs;){var bs=as[us];this.set(bs[0],bs[1])}}function Lx(){this.__data__=Am?Am(null):{},this.size=0}function Dx(as){var us=this.has(as)&&delete this.__data__[as];return this.size-=us?1:0,us}function Mx(as){var us=this.__data__;if(Am){var hs=us[as];return hs===ts?Ur:hs}return Nl.call(us,as)?us[as]:Ur}function Nx(as){var us=this.__data__;return Am?us[as]!==Ur:Nl.call(us,as)}function Fx(as,us){var hs=this.__data__;return this.size+=this.has(as)?0:1,hs[as]=Am&&us===Ur?ts:us,this}Zp.prototype.clear=Lx,Zp.prototype.delete=Dx,Zp.prototype.get=Mx,Zp.prototype.has=Nx,Zp.prototype.set=Fx;function mp(as){var us=-1,hs=as==null?0:as.length;for(this.clear();++us<hs;){var bs=as[us];this.set(bs[0],bs[1])}}function Bx(){this.__data__=[],this.size=0}function Ux(as){var us=this.__data__,hs=o0(us,as);if(hs<0)return!1;var bs=us.length-1;return hs==bs?us.pop():Jm.call(us,hs,1),--this.size,!0}function jx(as){var us=this.__data__,hs=o0(us,as);return hs<0?Ur:us[hs][1]}function zx(as){return o0(this.__data__,as)>-1}function Hx(as,us){var hs=this.__data__,bs=o0(hs,as);return bs<0?(++this.size,hs.push([as,us])):hs[bs][1]=us,this}mp.prototype.clear=Bx,mp.prototype.delete=Ux,mp.prototype.get=jx,mp.prototype.has=zx,mp.prototype.set=Hx;function gp(as){var us=-1,hs=as==null?0:as.length;for(this.clear();++us<hs;){var bs=as[us];this.set(bs[0],bs[1])}}function Vx(){this.size=0,this.__data__={hash:new Zp,map:new(Cm||mp),string:new Zp}}function Gx(as){var us=v0(this,as).delete(as);return this.size-=us?1:0,us}function Wx(as){return v0(this,as).get(as)}function qx(as){return v0(this,as).has(as)}function Kx(as,us){var hs=v0(this,as),bs=hs.size;return hs.set(as,us),this.size+=hs.size==bs?0:1,this}gp.prototype.clear=Vx,gp.prototype.delete=Gx,gp.prototype.get=Wx,gp.prototype.has=qx,gp.prototype.set=Kx;function Yp(as){var us=-1,hs=as==null?0:as.length;for(this.__data__=new gp;++us<hs;)this.add(as[us])}function Zx(as){return this.__data__.set(as,ts),this}function Yx(as){return this.__data__.has(as)}Yp.prototype.add=Yp.prototype.push=Zx,Yp.prototype.has=Yx;function _c(as){var us=this.__data__=new mp(as);this.size=us.size}function Xx(){this.__data__=new mp,this.size=0}function Qx(as){var us=this.__data__,hs=us.delete(as);return this.size=us.size,hs}function Jx(as){return this.__data__.get(as)}function ew(as){return this.__data__.has(as)}function tw(as,us){var hs=this.__data__;if(hs instanceof mp){var bs=hs.__data__;if(!Cm||bs.length<Gr-1)return bs.push([as,us]),this.size=++hs.size,this;hs=this.__data__=new gp(bs)}return hs.set(as,us),this.size=hs.size,this}_c.prototype.clear=Xx,_c.prototype.delete=Qx,_c.prototype.get=Jx,_c.prototype.has=ew,_c.prototype.set=tw;function tv(as,us){var hs=_a(as),bs=!hs&&tm(as),Ls=!hs&&!bs&&Np(as),Fs=!hs&&!bs&&!Ls&&bm(as),Hs=hs||bs||Ls||Fs,Zs=Hs?M0(as.length,dx):[],eo=Zs.length;for(var yo in as)(us||Nl.call(as,yo))&&!(Hs&&(yo=="length"||Ls&&(yo=="offset"||yo=="parent")||Fs&&(yo=="buffer"||yo=="byteLength"||yo=="byteOffset")||xp(yo,eo)))&&Zs.push(yo);return Zs}function rv(as){var us=as.length;return us?as[J0(0,us-1)]:Ur}function rw(as,us){return b0($u(as),Xp(us,0,as.length))}function nw(as){return b0($u(as))}function H0(as,us,hs){(hs!==Ur&&!_d(as[us],hs)||hs===Ur&&!(us in as))&&yp(as,us,hs)}function Pm(as,us,hs){var bs=as[us];(!(Nl.call(as,us)&&_d(bs,hs))||hs===Ur&&!(us in as))&&yp(as,us,hs)}function o0(as,us){for(var hs=as.length;hs--;)if(_d(as[hs][0],us))return hs;return-1}function iw(as,us,hs,bs){return Op(as,function(Ls,Fs,Hs){us(bs,Ls,hs(Ls),Hs)}),bs}function nv(as,us){return as&&sp(us,lu(us),as)}function sw(as,us){return as&&sp(us,Iu(us),as)}function yp(as,us,hs){us=="__proto__"&&e0?e0(as,us,{configurable:!0,enumerable:!0,value:hs,writable:!0}):as[us]=hs}function V0(as,us){for(var hs=-1,bs=us.length,Ls=oo(bs),Fs=as==null;++hs<bs;)Ls[hs]=Fs?Ur:Sy(as,us[hs]);return Ls}function Xp(as,us,hs){return as===as&&(hs!==Ur&&(as=as<=hs?as:hs),us!==Ur&&(as=as>=us?as:us)),as}function Hu(as,us,hs,bs,Ls,Fs){var Hs,Zs=us&Xr,eo=us&qr,yo=us&_i;if(hs&&(Hs=Ls?hs(as,bs,Ls,Fs):hs(as)),Hs!==Ur)return Hs;if(!Wl(as))return as;var bo=_a(as);if(bo){if(Hs=qw(as),!Zs)return $u(as,Hs)}else{var wo=mu(as),Ao=wo==Oo||wo==Ts;if(Np(as))return Cv(as,Zs);if(wo==lo||wo==io||Ao&&!Ls){if(Hs=eo||Ao?{}:Wv(as),!Zs)return eo?Mw(as,sw(Hs,as)):Dw(as,nv(Hs,as))}else{if(!ga[wo])return Ls?as:{};Hs=Kw(as,wo,Zs)}}Fs||(Fs=new _c);var Wo=Fs.get(as);if(Wo)return Wo;Fs.set(as,Hs),w1(as)?as.forEach(function(Yo){Hs.add(Hu(Yo,us,hs,Yo,as,Fs))}):b1(as)&&as.forEach(function(Yo,Sl){Hs.set(Sl,Hu(Yo,us,hs,Sl,as,Fs))});var Zo=yo?eo?uy:ly:eo?Iu:lu,yl=bo?Ur:Zo(as);return uu(yl||as,function(Yo,Sl){yl&&(Sl=Yo,Yo=as[Sl]),Pm(Hs,Sl,Hu(Yo,us,hs,Sl,as,Fs))}),Hs}function ow(as){var us=lu(as);return function(hs){return iv(hs,as,us)}}function iv(as,us,hs){var bs=hs.length;if(as==null)return!bs;for(as=Bl(as);bs--;){var Ls=hs[bs],Fs=us[Ls],Hs=as[Ls];if(Hs===Ur&&!(Ls in as)||!Fs(Hs))return!1}return!0}function sv(as,us,hs){if(typeof as!="function")throw new ju(Zr);return Fm(function(){as.apply(Ur,hs)},us)}function km(as,us,hs,bs){var Ls=-1,Fs=Hm,Hs=!0,Zs=as.length,eo=[],yo=us.length;if(!Zs)return eo;hs&&(us=Vl(us,Pu(hs))),bs?(Fs=R0,Hs=!1):us.length>=Gr&&(Fs=_m,Hs=!1,us=new Yp(us));e:for(;++Ls<Zs;){var bo=as[Ls],wo=hs==null?bo:hs(bo);if(bo=bs||bo!==0?bo:0,Hs&&wo===wo){for(var Ao=yo;Ao--;)if(us[Ao]===wo)continue e;eo.push(bo)}else Fs(us,wo,bs)||eo.push(bo)}return eo}var Op=kv(ip),ov=kv(W0,!0);function aw(as,us){var hs=!0;return Op(as,function(bs,Ls,Fs){return hs=!!us(bs,Ls,Fs),hs}),hs}function a0(as,us,hs){for(var bs=-1,Ls=as.length;++bs<Ls;){var Fs=as[bs],Hs=us(Fs);if(Hs!=null&&(Zs===Ur?Hs===Hs&&!Ou(Hs):hs(Hs,Zs)))var Zs=Hs,eo=Fs}return eo}function lw(as,us,hs,bs){var Ls=as.length;for(hs=$a(hs),hs<0&&(hs=-hs>Ls?0:Ls+hs),bs=bs===Ur||bs>Ls?Ls:$a(bs),bs<0&&(bs+=Ls),bs=hs>bs?0:T1(bs);hs<bs;)as[hs++]=us;return as}function av(as,us){var hs=[];return Op(as,function(bs,Ls,Fs){us(bs,Ls,Fs)&&hs.push(bs)}),hs}function cu(as,us,hs,bs,Ls){var Fs=-1,Hs=as.length;for(hs||(hs=Yw),Ls||(Ls=[]);++Fs<Hs;){var Zs=as[Fs];us>0&&hs(Zs)?us>1?cu(Zs,us-1,hs,bs,Ls):Ap(Ls,Zs):bs||(Ls[Ls.length]=Zs)}return Ls}var G0=Ov(),lv=Ov(!0);function ip(as,us){return as&&G0(as,us,lu)}function W0(as,us){return as&&lv(as,us,lu)}function l0(as,us){return Ip(us,function(hs){return wp(as[hs])})}function Qp(as,us){us=Dp(us,as);for(var hs=0,bs=us.length;as!=null&&hs<bs;)as=as[op(us[hs++])];return hs&&hs==bs?as:Ur}function uv(as,us,hs){var bs=us(as);return _a(as)?bs:Ap(bs,hs(as))}function yu(as){return as==null?as===Ur?qo:ao:Kp&&Kp in Bl(as)?Vw(as):nE(as)}function q0(as,us){return as>us}function uw(as,us){return as!=null&&Nl.call(as,us)}function cw(as,us){return as!=null&&us in Bl(as)}function dw(as,us,hs){return as>=pu(us,hs)&&as<su(us,hs)}function K0(as,us,hs){for(var bs=hs?R0:Hm,Ls=as[0].length,Fs=as.length,Hs=Fs,Zs=oo(Fs),eo=1/0,yo=[];Hs--;){var bo=as[Hs];Hs&&us&&(bo=Vl(bo,Pu(us))),eo=pu(bo.length,eo),Zs[Hs]=!hs&&(us||Ls>=120&&bo.length>=120)?new Yp(Hs&&bo):Ur}bo=as[0];var wo=-1,Ao=Zs[0];e:for(;++wo<Ls&&yo.length<eo;){var Wo=bo[wo],Zo=us?us(Wo):Wo;if(Wo=hs||Wo!==0?Wo:0,!(Ao?_m(Ao,Zo):bs(yo,Zo,hs))){for(Hs=Fs;--Hs;){var yl=Zs[Hs];if(!(yl?_m(yl,Zo):bs(as[Hs],Zo,hs)))continue e}Ao&&Ao.push(Zo),yo.push(Wo)}}return yo}function fw(as,us,hs,bs){return ip(as,function(Ls,Fs,Hs){us(bs,hs(Ls),Fs,Hs)}),bs}function Om(as,us,hs){us=Dp(us,as),as=Yv(as,us);var bs=as==null?as:as[op(Gu(us))];return bs==null?Ur:nu(bs,as,hs)}function cv(as){return Zl(as)&&yu(as)==io}function hw(as){return Zl(as)&&yu(as)==Al}function pw(as){return Zl(as)&&yu(as)==Eo}function Lm(as,us,hs,bs,Ls){return as===us?!0:as==null||us==null||!Zl(as)&&!Zl(us)?as!==as&&us!==us:mw(as,us,hs,bs,Lm,Ls)}function mw(as,us,hs,bs,Ls,Fs){var Hs=_a(as),Zs=_a(us),eo=Hs?vo:mu(as),yo=Zs?vo:mu(us);eo=eo==io?lo:eo,yo=yo==io?lo:yo;var bo=eo==lo,wo=yo==lo,Ao=eo==yo;if(Ao&&Np(as)){if(!Np(us))return!1;Hs=!0,bo=!1}if(Ao&&!bo)return Fs||(Fs=new _c),Hs||bm(as)?Hv(as,us,hs,bs,Ls,Fs):zw(as,us,eo,hs,bs,Ls,Fs);if(!(hs&rs)){var Wo=bo&&Nl.call(as,"__wrapped__"),Zo=wo&&Nl.call(us,"__wrapped__");if(Wo||Zo){var yl=Wo?as.value():as,Yo=Zo?us.value():us;return Fs||(Fs=new _c),Ls(yl,Yo,hs,bs,Fs)}}return Ao?(Fs||(Fs=new _c),Hw(as,us,hs,bs,Ls,Fs)):!1}function gw(as){return Zl(as)&&mu(as)==Ns}function Z0(as,us,hs,bs){var Ls=hs.length,Fs=Ls,Hs=!bs;if(as==null)return!Fs;for(as=Bl(as);Ls--;){var Zs=hs[Ls];if(Hs&&Zs[2]?Zs[1]!==as[Zs[0]]:!(Zs[0]in as))return!1}for(;++Ls<Fs;){Zs=hs[Ls];var eo=Zs[0],yo=as[eo],bo=Zs[1];if(Hs&&Zs[2]){if(yo===Ur&&!(eo in as))return!1}else{var wo=new _c;if(bs)var Ao=bs(yo,bo,eo,as,us,wo);if(!(Ao===Ur?Lm(bo,yo,rs|is,bs,wo):Ao))return!1}}return!0}function dv(as){if(!Wl(as)||Qw(as))return!1;var us=wp(as)?gx:im;return us.test(em(as))}function yw(as){return Zl(as)&&yu(as)==Fo}function vw(as){return Zl(as)&&mu(as)==Do}function bw(as){return Zl(as)&&_0(as.length)&&!!Go[yu(as)]}function fv(as){return typeof as=="function"?as:as==null?Au:typeof as=="object"?_a(as)?mv(as[0],as[1]):pv(as):L1(as)}function Y0(as){if(!Nm(as))return Ex(as);var us=[];for(var hs in Bl(as))Nl.call(as,hs)&&hs!="constructor"&&us.push(hs);return us}function xw(as){if(!Wl(as))return rE(as);var us=Nm(as),hs=[];for(var bs in as)bs=="constructor"&&(us||!Nl.call(as,bs))||hs.push(bs);return hs}function X0(as,us){return as<us}function hv(as,us){var hs=-1,bs=Cu(as)?oo(as.length):[];return Op(as,function(Ls,Fs,Hs){bs[++hs]=us(Ls,Fs,Hs)}),bs}function pv(as){var us=dy(as);return us.length==1&&us[0][2]?Kv(us[0][0],us[0][1]):function(hs){return hs===as||Z0(hs,as,us)}}function mv(as,us){return hy(as)&&qv(us)?Kv(op(as),us):function(hs){var bs=Sy(hs,as);return bs===Ur&&bs===us?_y(hs,as):Lm(us,bs,rs|is)}}function u0(as,us,hs,bs,Ls){as!==us&&G0(us,function(Fs,Hs){if(Ls||(Ls=new _c),Wl(Fs))ww(as,us,Hs,hs,u0,bs,Ls);else{var Zs=bs?bs(gy(as,Hs),Fs,Hs+"",as,us,Ls):Ur;Zs===Ur&&(Zs=Fs),H0(as,Hs,Zs)}},Iu)}function ww(as,us,hs,bs,Ls,Fs,Hs){var Zs=gy(as,hs),eo=gy(us,hs),yo=Hs.get(eo);if(yo){H0(as,hs,yo);return}var bo=Fs?Fs(Zs,eo,hs+"",as,us,Hs):Ur,wo=bo===Ur;if(wo){var Ao=_a(eo),Wo=!Ao&&Np(eo),Zo=!Ao&&!Wo&&bm(eo);bo=eo,Ao||Wo||Zo?_a(Zs)?bo=Zs:Ql(Zs)?bo=$u(Zs):Wo?(wo=!1,bo=Cv(eo,!0)):Zo?(wo=!1,bo=Iv(eo,!0)):bo=[]:Bm(eo)||tm(eo)?(bo=Zs,tm(Zs)?bo=S1(Zs):(!Wl(Zs)||wp(Zs))&&(bo=Wv(eo))):wo=!1}wo&&(Hs.set(eo,bo),Ls(bo,eo,bs,Fs,Hs),Hs.delete(eo)),H0(as,hs,bo)}function gv(as,us){var hs=as.length;if(hs)return us+=us<0?hs:0,xp(us,hs)?as[us]:Ur}function yv(as,us,hs){us.length?us=Vl(us,function(Fs){return _a(Fs)?function(Hs){return Qp(Hs,Fs.length===1?Fs[0]:Fs)}:Fs}):us=[Au];var bs=-1;us=Vl(us,Pu(Ko()));var Ls=hv(as,function(Fs,Hs,Zs){var eo=Vl(us,function(yo){return yo(Fs)});return{criteria:eo,index:++bs,value:Fs}});return Z1(Ls,function(Fs,Hs){return Lw(Fs,Hs,hs)})}function Ew(as,us){return vv(as,us,function(hs,bs){return _y(as,bs)})}function vv(as,us,hs){for(var bs=-1,Ls=us.length,Fs={};++bs<Ls;){var Hs=us[bs],Zs=Qp(as,Hs);hs(Zs,Hs)&&Dm(Fs,Dp(Hs,as),Zs)}return Fs}function Tw(as){return function(us){return Qp(us,as)}}function Q0(as,us,hs,bs){var Ls=bs?K1:um,Fs=-1,Hs=us.length,Zs=as;for(as===us&&(us=$u(us)),hs&&(Zs=Vl(as,Pu(hs)));++Fs<Hs;)for(var eo=0,yo=us[Fs],bo=hs?hs(yo):yo;(eo=Ls(Zs,bo,eo,bs))>-1;)Zs!==as&&Jm.call(Zs,eo,1),Jm.call(as,eo,1);return as}function bv(as,us){for(var hs=as?us.length:0,bs=hs-1;hs--;){var Ls=us[hs];if(hs==bs||Ls!==Fs){var Fs=Ls;xp(Ls)?Jm.call(as,Ls,1):ty(as,Ls)}}return as}function J0(as,us){return as+r0(Jy()*(us-as+1))}function Sw(as,us,hs,bs){for(var Ls=-1,Fs=su(t0((us-as)/(hs||1)),0),Hs=oo(Fs);Fs--;)Hs[bs?Fs:++Ls]=as,as+=hs;return Hs}function _g(as,us){var hs="";if(!as||us<1||us>As)return hs;do us%2&&(hs+=as),us=r0(us/2),us&&(as+=as);while(us);return hs}function Tl(as,us){return yy(Zv(as,us,Au),as+"")}function _w(as){return rv(xm(as))}function $w(as,us){var hs=xm(as);return b0(hs,Xp(us,0,hs.length))}function Dm(as,us,hs,bs){if(!Wl(as))return as;us=Dp(us,as);for(var Ls=-1,Fs=us.length,Hs=Fs-1,Zs=as;Zs!=null&&++Ls<Fs;){var eo=op(us[Ls]),yo=hs;if(eo==="__proto__"||eo==="constructor"||eo==="prototype")return as;if(Ls!=Hs){var bo=Zs[eo];yo=bs?bs(bo,eo,Zs):Ur,yo===Ur&&(yo=Wl(bo)?bo:xp(us[Ls+1])?[]:{})}Pm(Zs,eo,yo),Zs=Zs[eo]}return as}var xv=n0?function(as,us){return n0.set(as,us),as}:Au,Cw=e0?function(as,us){return e0(as,"toString",{configurable:!0,enumerable:!1,value:Cy(us),writable:!0})}:Au;function Iw(as){return b0(xm(as))}function Vu(as,us,hs){var bs=-1,Ls=as.length;us<0&&(us=-us>Ls?0:Ls+us),hs=hs>Ls?Ls:hs,hs<0&&(hs+=Ls),Ls=us>hs?0:hs-us>>>0,us>>>=0;for(var Fs=oo(Ls);++bs<Ls;)Fs[bs]=as[bs+us];return Fs}function Aw(as,us){var hs;return Op(as,function(bs,Ls,Fs){return hs=us(bs,Ls,Fs),!hs}),!!hs}function c0(as,us,hs){var bs=0,Ls=as==null?bs:as.length;if(typeof us=="number"&&us===us&&Ls<=ho){for(;bs<Ls;){var Fs=bs+Ls>>>1,Hs=as[Fs];Hs!==null&&!Ou(Hs)&&(hs?Hs<=us:Hs<us)?bs=Fs+1:Ls=Fs}return Ls}return ey(as,us,Au,hs)}function ey(as,us,hs,bs){var Ls=0,Fs=as==null?0:as.length;if(Fs===0)return 0;us=hs(us);for(var Hs=us!==us,Zs=us===null,eo=Ou(us),yo=us===Ur;Ls<Fs;){var bo=r0((Ls+Fs)/2),wo=hs(as[bo]),Ao=wo!==Ur,Wo=wo===null,Zo=wo===wo,yl=Ou(wo);if(Hs)var Yo=bs||Zo;else yo?Yo=Zo&&(bs||Ao):Zs?Yo=Zo&&Ao&&(bs||!Wo):eo?Yo=Zo&&Ao&&!Wo&&(bs||!yl):Wo||yl?Yo=!1:Yo=bs?wo<=us:wo<us;Yo?Ls=bo+1:Fs=bo}return pu(Fs,Js)}function wv(as,us){for(var hs=-1,bs=as.length,Ls=0,Fs=[];++hs<bs;){var Hs=as[hs],Zs=us?us(Hs):Hs;if(!hs||!_d(Zs,eo)){var eo=Zs;Fs[Ls++]=Hs===0?0:Hs}}return Fs}function Ev(as){return typeof as=="number"?as:Ou(as)?Ks:+as}function ku(as){if(typeof as=="string")return as;if(_a(as))return Vl(as,ku)+"";if(Ou(as))return ev?ev.call(as):"";var us=as+"";return us=="0"&&1/as==-Ss?"-0":us}function Lp(as,us,hs){var bs=-1,Ls=Hm,Fs=as.length,Hs=!0,Zs=[],eo=Zs;if(hs)Hs=!1,Ls=R0;else if(Fs>=Gr){var yo=us?null:Uw(as);if(yo)return Gm(yo);Hs=!1,Ls=_m,eo=new Yp}else eo=us?[]:Zs;e:for(;++bs<Fs;){var bo=as[bs],wo=us?us(bo):bo;if(bo=hs||bo!==0?bo:0,Hs&&wo===wo){for(var Ao=eo.length;Ao--;)if(eo[Ao]===wo)continue e;us&&eo.push(wo),Zs.push(bo)}else Ls(eo,wo,hs)||(eo!==Zs&&eo.push(wo),Zs.push(bo))}return Zs}function ty(as,us){return us=Dp(us,as),as=Yv(as,us),as==null||delete as[op(Gu(us))]}function Tv(as,us,hs,bs){return Dm(as,us,hs(Qp(as,us)),bs)}function d0(as,us,hs,bs){for(var Ls=as.length,Fs=bs?Ls:-1;(bs?Fs--:++Fs<Ls)&&us(as[Fs],Fs,as););return hs?Vu(as,bs?0:Fs,bs?Fs+1:Ls):Vu(as,bs?Fs+1:0,bs?Ls:Fs)}function Sv(as,us){var hs=as;return hs instanceof Cl&&(hs=hs.value()),P0(us,function(bs,Ls){return Ls.func.apply(Ls.thisArg,Ap([bs],Ls.args))},hs)}function ry(as,us,hs){var bs=as.length;if(bs<2)return bs?Lp(as[0]):[];for(var Ls=-1,Fs=oo(bs);++Ls<bs;)for(var Hs=as[Ls],Zs=-1;++Zs<bs;)Zs!=Ls&&(Fs[Ls]=km(Fs[Ls]||Hs,as[Zs],us,hs));return Lp(cu(Fs,1),us,hs)}function _v(as,us,hs){for(var bs=-1,Ls=as.length,Fs=us.length,Hs={};++bs<Ls;){var Zs=bs<Fs?us[bs]:Ur;hs(Hs,as[bs],Zs)}return Hs}function ny(as){return Ql(as)?as:[]}function iy(as){return typeof as=="function"?as:Au}function Dp(as,us){return _a(as)?as:hy(as,us)?[as]:e1(Dl(as))}var Rw=Tl;function Mp(as,us,hs){var bs=as.length;return hs=hs===Ur?bs:hs,!us&&hs>=bs?as:Vu(as,us,hs)}var $v=yx||function(as){return Vo.clearTimeout(as)};function Cv(as,us){if(us)return as.slice();var hs=as.length,bs=Ky?Ky(hs):new as.constructor(hs);return as.copy(bs),bs}function sy(as){var us=new as.constructor(as.byteLength);return new Xm(us).set(new Xm(as)),us}function Pw(as,us){var hs=us?sy(as.buffer):as.buffer;return new as.constructor(hs,as.byteOffset,as.byteLength)}function kw(as){var us=new as.constructor(as.source,Zu.exec(as));return us.lastIndex=as.lastIndex,us}function Ow(as){return Rm?Bl(Rm.call(as)):{}}function Iv(as,us){var hs=us?sy(as.buffer):as.buffer;return new as.constructor(hs,as.byteOffset,as.length)}function Av(as,us){if(as!==us){var hs=as!==Ur,bs=as===null,Ls=as===as,Fs=Ou(as),Hs=us!==Ur,Zs=us===null,eo=us===us,yo=Ou(us);if(!Zs&&!yo&&!Fs&&as>us||Fs&&Hs&&eo&&!Zs&&!yo||bs&&Hs&&eo||!hs&&eo||!Ls)return 1;if(!bs&&!Fs&&!yo&&as<us||yo&&hs&&Ls&&!bs&&!Fs||Zs&&hs&&Ls||!Hs&&Ls||!eo)return-1}return 0}function Lw(as,us,hs){for(var bs=-1,Ls=as.criteria,Fs=us.criteria,Hs=Ls.length,Zs=hs.length;++bs<Hs;){var eo=Av(Ls[bs],Fs[bs]);if(eo){if(bs>=Zs)return eo;var yo=hs[bs];return eo*(yo=="desc"?-1:1)}}return as.index-us.index}function Rv(as,us,hs,bs){for(var Ls=-1,Fs=as.length,Hs=hs.length,Zs=-1,eo=us.length,yo=su(Fs-Hs,0),bo=oo(eo+yo),wo=!bs;++Zs<eo;)bo[Zs]=us[Zs];for(;++Ls<Hs;)(wo||Ls<Fs)&&(bo[hs[Ls]]=as[Ls]);for(;yo--;)bo[Zs++]=as[Ls++];return bo}function Pv(as,us,hs,bs){for(var Ls=-1,Fs=as.length,Hs=-1,Zs=hs.length,eo=-1,yo=us.length,bo=su(Fs-Zs,0),wo=oo(bo+yo),Ao=!bs;++Ls<bo;)wo[Ls]=as[Ls];for(var Wo=Ls;++eo<yo;)wo[Wo+eo]=us[eo];for(;++Hs<Zs;)(Ao||Ls<Fs)&&(wo[Wo+hs[Hs]]=as[Ls++]);return wo}function $u(as,us){var hs=-1,bs=as.length;for(us||(us=oo(bs));++hs<bs;)us[hs]=as[hs];return us}function sp(as,us,hs,bs){var Ls=!hs;hs||(hs={});for(var Fs=-1,Hs=us.length;++Fs<Hs;){var Zs=us[Fs],eo=bs?bs(hs[Zs],as[Zs],Zs,hs,as):Ur;eo===Ur&&(eo=as[Zs]),Ls?yp(hs,Zs,eo):Pm(hs,Zs,eo)}return hs}function Dw(as,us){return sp(as,fy(as),us)}function Mw(as,us){return sp(as,Vv(as),us)}function f0(as,us){return function(hs,bs){var Ls=_a(hs)?np:iw,Fs=us?us():{};return Ls(hs,as,Ko(bs,2),Fs)}}function gm(as){return Tl(function(us,hs){var bs=-1,Ls=hs.length,Fs=Ls>1?hs[Ls-1]:Ur,Hs=Ls>2?hs[2]:Ur;for(Fs=as.length>3&&typeof Fs=="function"?(Ls--,Fs):Ur,Hs&&vu(hs[0],hs[1],Hs)&&(Fs=Ls<3?Ur:Fs,Ls=1),us=Bl(us);++bs<Ls;){var Zs=hs[bs];Zs&&as(us,Zs,bs,Fs)}return us})}function kv(as,us){return function(hs,bs){if(hs==null)return hs;if(!Cu(hs))return as(hs,bs);for(var Ls=hs.length,Fs=us?Ls:-1,Hs=Bl(hs);(us?Fs--:++Fs<Ls)&&bs(Hs[Fs],Fs,Hs)!==!1;);return hs}}function Ov(as){return function(us,hs,bs){for(var Ls=-1,Fs=Bl(us),Hs=bs(us),Zs=Hs.length;Zs--;){var eo=Hs[as?Zs:++Ls];if(hs(Fs[eo],eo,Fs)===!1)break}return us}}function Nw(as,us,hs){var bs=us&ss,Ls=Mm(as);function Fs(){var Hs=this&&this!==Vo&&this instanceof Fs?Ls:as;return Hs.apply(bs?hs:this,arguments)}return Fs}function Lv(as){return function(us){us=Dl(us);var hs=cm(us)?Ju(us):Ur,bs=hs?hs[0]:us.charAt(0),Ls=hs?Mp(hs,1).join(""):us.slice(1);return bs[as]()+Ls}}function ym(as){return function(us){return P0(k1(P1(us).replace(ba,"")),as,"")}}function Mm(as){return function(){var us=arguments;switch(us.length){case 0:return new as;case 1:return new as(us[0]);case 2:return new as(us[0],us[1]);case 3:return new as(us[0],us[1],us[2]);case 4:return new as(us[0],us[1],us[2],us[3]);case 5:return new as(us[0],us[1],us[2],us[3],us[4]);case 6:return new as(us[0],us[1],us[2],us[3],us[4],us[5]);case 7:return new as(us[0],us[1],us[2],us[3],us[4],us[5],us[6])}var hs=mm(as.prototype),bs=as.apply(hs,us);return Wl(bs)?bs:hs}}function Fw(as,us,hs){var bs=Mm(as);function Ls(){for(var Fs=arguments.length,Hs=oo(Fs),Zs=Fs,eo=vm(Ls);Zs--;)Hs[Zs]=arguments[Zs];var yo=Fs<3&&Hs[0]!==eo&&Hs[Fs-1]!==eo?[]:Rp(Hs,eo);if(Fs-=yo.length,Fs<hs)return Bv(as,us,h0,Ls.placeholder,Ur,Hs,yo,Ur,Ur,hs-Fs);var bo=this&&this!==Vo&&this instanceof Ls?bs:as;return nu(bo,this,Hs)}return Ls}function Dv(as){return function(us,hs,bs){var Ls=Bl(us);if(!Cu(us)){var Fs=Ko(hs,3);us=lu(us),hs=function(Zs){return Fs(Ls[Zs],Zs,Ls)}}var Hs=as(us,hs,bs);return Hs>-1?Ls[Fs?us[Hs]:Hs]:Ur}}function Mv(as){return bp(function(us){var hs=us.length,bs=hs,Ls=zu.prototype.thru;for(as&&us.reverse();bs--;){var Fs=us[bs];if(typeof Fs!="function")throw new ju(Zr);if(Ls&&!Hs&&y0(Fs)=="wrapper")var Hs=new zu([],!0)}for(bs=Hs?bs:hs;++bs<hs;){Fs=us[bs];var Zs=y0(Fs),eo=Zs=="wrapper"?cy(Fs):Ur;eo&&py(eo[0])&&eo[1]==(ps|cs|fs|ys)&&!eo[4].length&&eo[9]==1?Hs=Hs[y0(eo[0])].apply(Hs,eo[3]):Hs=Fs.length==1&&py(Fs)?Hs[Zs]():Hs.thru(Fs)}return function(){var yo=arguments,bo=yo[0];if(Hs&&yo.length==1&&_a(bo))return Hs.plant(bo).value();for(var wo=0,Ao=hs?us[wo].apply(this,yo):bo;++wo<hs;)Ao=us[wo].call(this,Ao);return Ao}})}function h0(as,us,hs,bs,Ls,Fs,Hs,Zs,eo,yo){var bo=us&ps,wo=us&ss,Ao=us&os,Wo=us&(cs|ds),Zo=us&ws,yl=Ao?Ur:Mm(as);function Yo(){for(var Sl=arguments.length,Il=oo(Sl),Lu=Sl;Lu--;)Il[Lu]=arguments[Lu];if(Wo)var bu=vm(Yo),Du=X1(Il,bu);if(bs&&(Il=Rv(Il,bs,Ls,Wo)),Fs&&(Il=Pv(Il,Fs,Hs,Wo)),Sl-=Du,Wo&&Sl<yo){var Jl=Rp(Il,bu);return Bv(as,us,h0,Yo.placeholder,hs,Il,Jl,Zs,eo,yo-Sl)}var _f=wo?hs:this,Tp=Ao?_f[as]:as;return Sl=Il.length,Zs?Il=iE(Il,Zs):Zo&&Sl>1&&Il.reverse(),bo&&eo<Sl&&(Il.length=eo),this&&this!==Vo&&this instanceof Yo&&(Tp=yl||Mm(Tp)),Tp.apply(_f,Il)}return Yo}function Nv(as,us){return function(hs,bs){return fw(hs,as,us(bs),{})}}function p0(as,us){return function(hs,bs){var Ls;if(hs===Ur&&bs===Ur)return us;if(hs!==Ur&&(Ls=hs),bs!==Ur){if(Ls===Ur)return bs;typeof hs=="string"||typeof bs=="string"?(hs=ku(hs),bs=ku(bs)):(hs=Ev(hs),bs=Ev(bs)),Ls=as(hs,bs)}return Ls}}function oy(as){return bp(function(us){return us=Vl(us,Pu(Ko())),Tl(function(hs){var bs=this;return as(us,function(Ls){return nu(Ls,bs,hs)})})})}function m0(as,us){us=us===Ur?" ":ku(us);var hs=us.length;if(hs<2)return hs?_g(us,as):us;var bs=_g(us,t0(as/dm(us)));return cm(us)?Mp(Ju(bs),0,as).join(""):bs.slice(0,as)}function Bw(as,us,hs,bs){var Ls=us&ss,Fs=Mm(as);function Hs(){for(var Zs=-1,eo=arguments.length,yo=-1,bo=bs.length,wo=oo(bo+eo),Ao=this&&this!==Vo&&this instanceof Hs?Fs:as;++yo<bo;)wo[yo]=bs[yo];for(;eo--;)wo[yo++]=arguments[++Zs];return nu(Ao,Ls?hs:this,wo)}return Hs}function Fv(as){return function(us,hs,bs){return bs&&typeof bs!="number"&&vu(us,hs,bs)&&(hs=bs=Ur),us=Ep(us),hs===Ur?(hs=us,us=0):hs=Ep(hs),bs=bs===Ur?us<hs?1:-1:Ep(bs),Sw(us,hs,bs,as)}}function g0(as){return function(us,hs){return typeof us=="string"&&typeof hs=="string"||(us=Wu(us),hs=Wu(hs)),as(us,hs)}}function Bv(as,us,hs,bs,Ls,Fs,Hs,Zs,eo,yo){var bo=us&cs,wo=bo?Hs:Ur,Ao=bo?Ur:Hs,Wo=bo?Fs:Ur,Zo=bo?Ur:Fs;us|=bo?fs:ms,us&=~(bo?ms:fs),us&ls||(us&=~(ss|os));var yl=[as,us,Ls,Wo,wo,Zo,Ao,Zs,eo,yo],Yo=hs.apply(Ur,yl);return py(as)&&Xv(Yo,yl),Yo.placeholder=bs,Qv(Yo,as,us)}function ay(as){var us=iu[as];return function(hs,bs){if(hs=Wu(hs),bs=bs==null?0:pu($a(bs),292),bs&&Qy(hs)){var Ls=(Dl(hs)+"e").split("e"),Fs=us(Ls[0]+"e"+(+Ls[1]+bs));return Ls=(Dl(Fs)+"e").split("e"),+(Ls[0]+"e"+(+Ls[1]-bs))}return us(hs)}}var Uw=hm&&1/Gm(new hm([,-0]))[1]==Ss?function(as){return new hm(as)}:Ry;function Uv(as){return function(us){var hs=mu(us);return hs==Ns?F0(us):hs==Do?nx(us):Y1(us,as(us))}}function vp(as,us,hs,bs,Ls,Fs,Hs,Zs){var eo=us&os;if(!eo&&typeof as!="function")throw new ju(Zr);var yo=bs?bs.length:0;if(yo||(us&=~(fs|ms),bs=Ls=Ur),Hs=Hs===Ur?Hs:su($a(Hs),0),Zs=Zs===Ur?Zs:$a(Zs),yo-=Ls?Ls.length:0,us&ms){var bo=bs,wo=Ls;bs=Ls=Ur}var Ao=eo?Ur:cy(as),Wo=[as,us,hs,bs,Ls,bo,wo,Fs,Hs,Zs];if(Ao&&tE(Wo,Ao),as=Wo[0],us=Wo[1],hs=Wo[2],bs=Wo[3],Ls=Wo[4],Zs=Wo[9]=Wo[9]===Ur?eo?0:as.length:su(Wo[9]-yo,0),!Zs&&us&(cs|ds)&&(us&=~(cs|ds)),!us||us==ss)var Zo=Nw(as,us,hs);else us==cs||us==ds?Zo=Fw(as,us,Zs):(us==fs||us==(ss|fs))&&!Ls.length?Zo=Bw(as,us,hs,bs):Zo=h0.apply(Ur,Wo);var yl=Ao?xv:Xv;return Qv(yl(Zo,Wo),as,us)}function jv(as,us,hs,bs){return as===Ur||_d(as,fm[hs])&&!Nl.call(bs,hs)?us:as}function zv(as,us,hs,bs,Ls,Fs){return Wl(as)&&Wl(us)&&(Fs.set(us,as),u0(as,us,Ur,zv,Fs),Fs.delete(us)),as}function jw(as){return Bm(as)?Ur:as}function Hv(as,us,hs,bs,Ls,Fs){var Hs=hs&rs,Zs=as.length,eo=us.length;if(Zs!=eo&&!(Hs&&eo>Zs))return!1;var yo=Fs.get(as),bo=Fs.get(us);if(yo&&bo)return yo==us&&bo==as;var wo=-1,Ao=!0,Wo=hs&is?new Yp:Ur;for(Fs.set(as,us),Fs.set(us,as);++wo<Zs;){var Zo=as[wo],yl=us[wo];if(bs)var Yo=Hs?bs(yl,Zo,wo,us,as,Fs):bs(Zo,yl,wo,as,us,Fs);if(Yo!==Ur){if(Yo)continue;Ao=!1;break}if(Wo){if(!k0(us,function(Sl,Il){if(!_m(Wo,Il)&&(Zo===Sl||Ls(Zo,Sl,hs,bs,Fs)))return Wo.push(Il)})){Ao=!1;break}}else if(!(Zo===yl||Ls(Zo,yl,hs,bs,Fs))){Ao=!1;break}}return Fs.delete(as),Fs.delete(us),Ao}function zw(as,us,hs,bs,Ls,Fs,Hs){switch(hs){case Yl:if(as.byteLength!=us.byteLength||as.byteOffset!=us.byteOffset)return!1;as=as.buffer,us=us.buffer;case Al:return!(as.byteLength!=us.byteLength||!Fs(new Xm(as),new Xm(us)));case go:case Eo:case to:return _d(+as,+us);case Po:return as.name==us.name&&as.message==us.message;case Fo:case No:return as==us+"";case Ns:var Zs=F0;case Do:var eo=bs&rs;if(Zs||(Zs=Gm),as.size!=us.size&&!eo)return!1;var yo=Hs.get(as);if(yo)return yo==us;bs|=is,Hs.set(as,us);var bo=Hv(Zs(as),Zs(us),bs,Ls,Fs,Hs);return Hs.delete(as),bo;case Co:if(Rm)return Rm.call(as)==Rm.call(us)}return!1}function Hw(as,us,hs,bs,Ls,Fs){var Hs=hs&rs,Zs=ly(as),eo=Zs.length,yo=ly(us),bo=yo.length;if(eo!=bo&&!Hs)return!1;for(var wo=eo;wo--;){var Ao=Zs[wo];if(!(Hs?Ao in us:Nl.call(us,Ao)))return!1}var Wo=Fs.get(as),Zo=Fs.get(us);if(Wo&&Zo)return Wo==us&&Zo==as;var yl=!0;Fs.set(as,us),Fs.set(us,as);for(var Yo=Hs;++wo<eo;){Ao=Zs[wo];var Sl=as[Ao],Il=us[Ao];if(bs)var Lu=Hs?bs(Il,Sl,Ao,us,as,Fs):bs(Sl,Il,Ao,as,us,Fs);if(!(Lu===Ur?Sl===Il||Ls(Sl,Il,hs,bs,Fs):Lu)){yl=!1;break}Yo||(Yo=Ao=="constructor")}if(yl&&!Yo){var bu=as.constructor,Du=us.constructor;bu!=Du&&"constructor"in as&&"constructor"in us&&!(typeof bu=="function"&&bu instanceof bu&&typeof Du=="function"&&Du instanceof Du)&&(yl=!1)}return Fs.delete(as),Fs.delete(us),yl}function bp(as){return yy(Zv(as,Ur,i1),as+"")}function ly(as){return uv(as,lu,fy)}function uy(as){return uv(as,Iu,Vv)}var cy=n0?function(as){return n0.get(as)}:Ry;function y0(as){for(var us=as.name+"",hs=pm[us],bs=Nl.call(pm,us)?hs.length:0;bs--;){var Ls=hs[bs],Fs=Ls.func;if(Fs==null||Fs==as)return Ls.name}return us}function vm(as){var us=Nl.call(Ms,"placeholder")?Ms:as;return us.placeholder}function Ko(){var as=Ms.iteratee||Iy;return as=as===Iy?fv:as,arguments.length?as(arguments[0],arguments[1]):as}function v0(as,us){var hs=as.__data__;return Xw(us)?hs[typeof us=="string"?"string":"hash"]:hs.map}function dy(as){for(var us=lu(as),hs=us.length;hs--;){var bs=us[hs],Ls=as[bs];us[hs]=[bs,Ls,qv(Ls)]}return us}function Jp(as,us){var hs=ex(as,us);return dv(hs)?hs:Ur}function Vw(as){var us=Nl.call(as,Kp),hs=as[Kp];try{as[Kp]=Ur;var bs=!0}catch{}var Ls=Zm.call(as);return bs&&(us?as[Kp]=hs:delete as[Kp]),Ls}var fy=U0?function(as){return as==null?[]:(as=Bl(as),Ip(U0(as),function(us){return Yy.call(as,us)}))}:Py,Vv=U0?function(as){for(var us=[];as;)Ap(us,fy(as)),as=Qm(as);return us}:Py,mu=yu;(j0&&mu(new j0(new ArrayBuffer(1)))!=Yl||Cm&&mu(new Cm)!=Ns||z0&&mu(z0.resolve())!=Io||hm&&mu(new hm)!=Do||Im&&mu(new Im)!=Mo)&&(mu=function(as){var us=yu(as),hs=us==lo?as.constructor:Ur,bs=hs?em(hs):"";if(bs)switch(bs){case $x:return Yl;case Cx:return Ns;case Ix:return Io;case Ax:return Do;case Rx:return Mo}return us});function Gw(as,us,hs){for(var bs=-1,Ls=hs.length;++bs<Ls;){var Fs=hs[bs],Hs=Fs.size;switch(Fs.type){case"drop":as+=Hs;break;case"dropRight":us-=Hs;break;case"take":us=pu(us,as+Hs);break;case"takeRight":as=su(as,us-Hs);break}}return{start:as,end:us}}function Ww(as){var us=as.match(qu);return us?us[1].split(up):[]}function Gv(as,us,hs){us=Dp(us,as);for(var bs=-1,Ls=us.length,Fs=!1;++bs<Ls;){var Hs=op(us[bs]);if(!(Fs=as!=null&&hs(as,Hs)))break;as=as[Hs]}return Fs||++bs!=Ls?Fs:(Ls=as==null?0:as.length,!!Ls&&_0(Ls)&&xp(Hs,Ls)&&(_a(as)||tm(as)))}function qw(as){var us=as.length,hs=new as.constructor(us);return us&&typeof as[0]=="string"&&Nl.call(as,"index")&&(hs.index=as.index,hs.input=as.input),hs}function Wv(as){return typeof as.constructor=="function"&&!Nm(as)?mm(Qm(as)):{}}function Kw(as,us,hs){var bs=as.constructor;switch(us){case Al:return sy(as);case go:case Eo:return new bs(+as);case Yl:return Pw(as,hs);case Ul:case eu:case du:case ru:case tu:case $l:case Ps:case Os:case Gs:return Iv(as,hs);case Ns:return new bs;case to:case No:return new bs(as);case Fo:return kw(as);case Do:return new bs;case Co:return Ow(as)}}function Zw(as,us){var hs=us.length;if(!hs)return as;var bs=hs-1;return us[bs]=(hs>1?"& ":"")+us[bs],us=us.join(hs>2?", ":" "),as.replace(lp,`{
/* [wrapped with `+us+`] */
`)}function Yw(as){return _a(as)||tm(as)||!!(Xy&&as&&as[Xy])}function xp(as,us){var hs=typeof as;return us=us??As,!!us&&(hs=="number"||hs!="symbol"&&Em.test(as))&&as>-1&&as%1==0&&as<us}function vu(as,us,hs){if(!Wl(hs))return!1;var bs=typeof us;return(bs=="number"?Cu(hs)&&xp(us,hs.length):bs=="string"&&us in hs)?_d(hs[us],as):!1}function hy(as,us){if(_a(as))return!1;var hs=typeof as;return hs=="number"||hs=="symbol"||hs=="boolean"||as==null||Ou(as)?!0:fu.test(as)||!Ml.test(as)||us!=null&&as in Bl(us)}function Xw(as){var us=typeof as;return us=="string"||us=="number"||us=="symbol"||us=="boolean"?as!=="__proto__":as===null}function py(as){var us=y0(as),hs=Ms[us];if(typeof hs!="function"||!(us in Cl.prototype))return!1;if(as===hs)return!0;var bs=cy(hs);return!!bs&&as===bs[0]}function Qw(as){return!!qy&&qy in as}var Jw=qm?wp:ky;function Nm(as){var us=as&&as.constructor,hs=typeof us=="function"&&us.prototype||fm;return as===hs}function qv(as){return as===as&&!Wl(as)}function Kv(as,us){return function(hs){return hs==null?!1:hs[as]===us&&(us!==Ur||as in Bl(hs))}}function eE(as){var us=T0(as,function(bs){return hs.size===es&&hs.clear(),bs}),hs=us.cache;return us}function tE(as,us){var hs=as[1],bs=us[1],Ls=hs|bs,Fs=Ls<(ss|os|ps),Hs=bs==ps&&hs==cs||bs==ps&&hs==ys&&as[7].length<=us[8]||bs==(ps|ys)&&us[7].length<=us[8]&&hs==cs;if(!(Fs||Hs))return as;bs&ss&&(as[2]=us[2],Ls|=hs&ss?0:ls);var Zs=us[3];if(Zs){var eo=as[3];as[3]=eo?Rv(eo,Zs,us[4]):Zs,as[4]=eo?Rp(as[3],ns):us[4]}return Zs=us[5],Zs&&(eo=as[5],as[5]=eo?Pv(eo,Zs,us[6]):Zs,as[6]=eo?Rp(as[5],ns):us[6]),Zs=us[7],Zs&&(as[7]=Zs),bs&ps&&(as[8]=as[8]==null?us[8]:pu(as[8],us[8])),as[9]==null&&(as[9]=us[9]),as[0]=us[0],as[1]=Ls,as}function rE(as){var us=[];if(as!=null)for(var hs in Bl(as))us.push(hs);return us}function nE(as){return Zm.call(as)}function Zv(as,us,hs){return us=su(us===Ur?as.length-1:us,0),function(){for(var bs=arguments,Ls=-1,Fs=su(bs.length-us,0),Hs=oo(Fs);++Ls<Fs;)Hs[Ls]=bs[us+Ls];Ls=-1;for(var Zs=oo(us+1);++Ls<us;)Zs[Ls]=bs[Ls];return Zs[us]=hs(Hs),nu(as,this,Zs)}}function Yv(as,us){return us.length<2?as:Qp(as,Vu(us,0,-1))}function iE(as,us){for(var hs=as.length,bs=pu(us.length,hs),Ls=$u(as);bs--;){var Fs=us[bs];as[bs]=xp(Fs,hs)?Ls[Fs]:Ur}return as}function gy(as,us){if(!(us==="constructor"&&typeof as[us]=="function")&&us!="__proto__")return as[us]}var Xv=Jv(xv),Fm=bx||function(as,us){return Vo.setTimeout(as,us)},yy=Jv(Cw);function Qv(as,us,hs){var bs=us+"";return yy(as,Zw(bs,sE(Ww(bs),hs)))}function Jv(as){var us=0,hs=0;return function(){var bs=Tx(),Ls=_s-(bs-hs);if(hs=bs,Ls>0){if(++us>=Rs)return arguments[0]}else us=0;return as.apply(Ur,arguments)}}function b0(as,us){var hs=-1,bs=as.length,Ls=bs-1;for(us=us===Ur?bs:us;++hs<us;){var Fs=J0(hs,Ls),Hs=as[Fs];as[Fs]=as[hs],as[hs]=Hs}return as.length=us,as}var e1=eE(function(as){var us=[];return as.charCodeAt(0)===46&&us.push(""),as.replace(xu,function(hs,bs,Ls,Fs){us.push(Ls?Fs.replace(Ku,"$1"):bs||hs)}),us});function op(as){if(typeof as=="string"||Ou(as))return as;var us=as+"";return us=="0"&&1/as==-Ss?"-0":us}function em(as){if(as!=null){try{return Km.call(as)}catch{}try{return as+""}catch{}}return""}function sE(as,us){return uu(so,function(hs){var bs="_."+hs[0];us&hs[1]&&!Hm(as,bs)&&as.push(bs)}),as.sort()}function t1(as){if(as instanceof Cl)return as.clone();var us=new zu(as.__wrapped__,as.__chain__);return us.__actions__=$u(as.__actions__),us.__index__=as.__index__,us.__values__=as.__values__,us}function oE(as,us,hs){(hs?vu(as,us,hs):us===Ur)?us=1:us=su($a(us),0);var bs=as==null?0:as.length;if(!bs||us<1)return[];for(var Ls=0,Fs=0,Hs=oo(t0(bs/us));Ls<bs;)Hs[Fs++]=Vu(as,Ls,Ls+=us);return Hs}function aE(as){for(var us=-1,hs=as==null?0:as.length,bs=0,Ls=[];++us<hs;){var Fs=as[us];Fs&&(Ls[bs++]=Fs)}return Ls}function lE(){var as=arguments.length;if(!as)return[];for(var us=oo(as-1),hs=arguments[0],bs=as;bs--;)us[bs-1]=arguments[bs];return Ap(_a(hs)?$u(hs):[hs],cu(us,1))}var uE=Tl(function(as,us){return Ql(as)?km(as,cu(us,1,Ql,!0)):[]}),cE=Tl(function(as,us){var hs=Gu(us);return Ql(hs)&&(hs=Ur),Ql(as)?km(as,cu(us,1,Ql,!0),Ko(hs,2)):[]}),dE=Tl(function(as,us){var hs=Gu(us);return Ql(hs)&&(hs=Ur),Ql(as)?km(as,cu(us,1,Ql,!0),Ur,hs):[]});function fE(as,us,hs){var bs=as==null?0:as.length;return bs?(us=hs||us===Ur?1:$a(us),Vu(as,us<0?0:us,bs)):[]}function hE(as,us,hs){var bs=as==null?0:as.length;return bs?(us=hs||us===Ur?1:$a(us),us=bs-us,Vu(as,0,us<0?0:us)):[]}function pE(as,us){return as&&as.length?d0(as,Ko(us,3),!0,!0):[]}function mE(as,us){return as&&as.length?d0(as,Ko(us,3),!0):[]}function gE(as,us,hs,bs){var Ls=as==null?0:as.length;return Ls?(hs&&typeof hs!="number"&&vu(as,us,hs)&&(hs=0,bs=Ls),lw(as,us,hs,bs)):[]}function r1(as,us,hs){var bs=as==null?0:as.length;if(!bs)return-1;var Ls=hs==null?0:$a(hs);return Ls<0&&(Ls=su(bs+Ls,0)),Vm(as,Ko(us,3),Ls)}function n1(as,us,hs){var bs=as==null?0:as.length;if(!bs)return-1;var Ls=bs-1;return hs!==Ur&&(Ls=$a(hs),Ls=hs<0?su(bs+Ls,0):pu(Ls,bs-1)),Vm(as,Ko(us,3),Ls,!0)}function i1(as){var us=as==null?0:as.length;return us?cu(as,1):[]}function yE(as){var us=as==null?0:as.length;return us?cu(as,Ss):[]}function vE(as,us){var hs=as==null?0:as.length;return hs?(us=us===Ur?1:$a(us),cu(as,us)):[]}function bE(as){for(var us=-1,hs=as==null?0:as.length,bs={};++us<hs;){var Ls=as[us];bs[Ls[0]]=Ls[1]}return bs}function s1(as){return as&&as.length?as[0]:Ur}function xE(as,us,hs){var bs=as==null?0:as.length;if(!bs)return-1;var Ls=hs==null?0:$a(hs);return Ls<0&&(Ls=su(bs+Ls,0)),um(as,us,Ls)}function wE(as){var us=as==null?0:as.length;return us?Vu(as,0,-1):[]}var EE=Tl(function(as){var us=Vl(as,ny);return us.length&&us[0]===as[0]?K0(us):[]}),TE=Tl(function(as){var us=Gu(as),hs=Vl(as,ny);return us===Gu(hs)?us=Ur:hs.pop(),hs.length&&hs[0]===as[0]?K0(hs,Ko(us,2)):[]}),SE=Tl(function(as){var us=Gu(as),hs=Vl(as,ny);return us=typeof us=="function"?us:Ur,us&&hs.pop(),hs.length&&hs[0]===as[0]?K0(hs,Ur,us):[]});function _E(as,us){return as==null?"":wx.call(as,us)}function Gu(as){var us=as==null?0:as.length;return us?as[us-1]:Ur}function $E(as,us,hs){var bs=as==null?0:as.length;if(!bs)return-1;var Ls=bs;return hs!==Ur&&(Ls=$a(hs),Ls=Ls<0?su(bs+Ls,0):pu(Ls,bs-1)),us===us?sx(as,us,Ls):Vm(as,By,Ls,!0)}function CE(as,us){return as&&as.length?gv(as,$a(us)):Ur}var IE=Tl(o1);function o1(as,us){return as&&as.length&&us&&us.length?Q0(as,us):as}function AE(as,us,hs){return as&&as.length&&us&&us.length?Q0(as,us,Ko(hs,2)):as}function RE(as,us,hs){return as&&as.length&&us&&us.length?Q0(as,us,Ur,hs):as}var PE=bp(function(as,us){var hs=as==null?0:as.length,bs=V0(as,us);return bv(as,Vl(us,function(Ls){return xp(Ls,hs)?+Ls:Ls}).sort(Av)),bs});function kE(as,us){var hs=[];if(!(as&&as.length))return hs;var bs=-1,Ls=[],Fs=as.length;for(us=Ko(us,3);++bs<Fs;){var Hs=as[bs];us(Hs,bs,as)&&(hs.push(Hs),Ls.push(bs))}return bv(as,Ls),hs}function vy(as){return as==null?as:_x.call(as)}function OE(as,us,hs){var bs=as==null?0:as.length;return bs?(hs&&typeof hs!="number"&&vu(as,us,hs)?(us=0,hs=bs):(us=us==null?0:$a(us),hs=hs===Ur?bs:$a(hs)),Vu(as,us,hs)):[]}function LE(as,us){return c0(as,us)}function DE(as,us,hs){return ey(as,us,Ko(hs,2))}function ME(as,us){var hs=as==null?0:as.length;if(hs){var bs=c0(as,us);if(bs<hs&&_d(as[bs],us))return bs}return-1}function NE(as,us){return c0(as,us,!0)}function FE(as,us,hs){return ey(as,us,Ko(hs,2),!0)}function BE(as,us){var hs=as==null?0:as.length;if(hs){var bs=c0(as,us,!0)-1;if(_d(as[bs],us))return bs}return-1}function UE(as){return as&&as.length?wv(as):[]}function jE(as,us){return as&&as.length?wv(as,Ko(us,2)):[]}function zE(as){var us=as==null?0:as.length;return us?Vu(as,1,us):[]}function HE(as,us,hs){return as&&as.length?(us=hs||us===Ur?1:$a(us),Vu(as,0,us<0?0:us)):[]}function VE(as,us,hs){var bs=as==null?0:as.length;return bs?(us=hs||us===Ur?1:$a(us),us=bs-us,Vu(as,us<0?0:us,bs)):[]}function GE(as,us){return as&&as.length?d0(as,Ko(us,3),!1,!0):[]}function WE(as,us){return as&&as.length?d0(as,Ko(us,3)):[]}var qE=Tl(function(as){return Lp(cu(as,1,Ql,!0))}),KE=Tl(function(as){var us=Gu(as);return Ql(us)&&(us=Ur),Lp(cu(as,1,Ql,!0),Ko(us,2))}),ZE=Tl(function(as){var us=Gu(as);return us=typeof us=="function"?us:Ur,Lp(cu(as,1,Ql,!0),Ur,us)});function YE(as){return as&&as.length?Lp(as):[]}function XE(as,us){return as&&as.length?Lp(as,Ko(us,2)):[]}function QE(as,us){return us=typeof us=="function"?us:Ur,as&&as.length?Lp(as,Ur,us):[]}function by(as){if(!(as&&as.length))return[];var us=0;return as=Ip(as,function(hs){if(Ql(hs))return us=su(hs.length,us),!0}),M0(us,function(hs){return Vl(as,O0(hs))})}function a1(as,us){if(!(as&&as.length))return[];var hs=by(as);return us==null?hs:Vl(hs,function(bs){return nu(us,Ur,bs)})}var JE=Tl(function(as,us){return Ql(as)?km(as,us):[]}),eT=Tl(function(as){return ry(Ip(as,Ql))}),tT=Tl(function(as){var us=Gu(as);return Ql(us)&&(us=Ur),ry(Ip(as,Ql),Ko(us,2))}),rT=Tl(function(as){var us=Gu(as);return us=typeof us=="function"?us:Ur,ry(Ip(as,Ql),Ur,us)}),nT=Tl(by);function iT(as,us){return _v(as||[],us||[],Pm)}function sT(as,us){return _v(as||[],us||[],Dm)}var oT=Tl(function(as){var us=as.length,hs=us>1?as[us-1]:Ur;return hs=typeof hs=="function"?(as.pop(),hs):Ur,a1(as,hs)});function l1(as){var us=Ms(as);return us.__chain__=!0,us}function aT(as,us){return us(as),as}function x0(as,us){return us(as)}var lT=bp(function(as){var us=as.length,hs=us?as[0]:0,bs=this.__wrapped__,Ls=function(Fs){return V0(Fs,as)};return us>1||this.__actions__.length||!(bs instanceof Cl)||!xp(hs)?this.thru(Ls):(bs=bs.slice(hs,+hs+(us?1:0)),bs.__actions__.push({func:x0,args:[Ls],thisArg:Ur}),new zu(bs,this.__chain__).thru(function(Fs){return us&&!Fs.length&&Fs.push(Ur),Fs}))});function uT(){return l1(this)}function cT(){return new zu(this.value(),this.__chain__)}function dT(){this.__values__===Ur&&(this.__values__=E1(this.value()));var as=this.__index__>=this.__values__.length,us=as?Ur:this.__values__[this.__index__++];return{done:as,value:us}}function fT(){return this}function hT(as){for(var us,hs=this;hs instanceof s0;){var bs=t1(hs);bs.__index__=0,bs.__values__=Ur,us?Ls.__wrapped__=bs:us=bs;var Ls=bs;hs=hs.__wrapped__}return Ls.__wrapped__=as,us}function pT(){var as=this.__wrapped__;if(as instanceof Cl){var us=as;return this.__actions__.length&&(us=new Cl(this)),us=us.reverse(),us.__actions__.push({func:x0,args:[vy],thisArg:Ur}),new zu(us,this.__chain__)}return this.thru(vy)}function mT(){return Sv(this.__wrapped__,this.__actions__)}var gT=f0(function(as,us,hs){Nl.call(as,hs)?++as[hs]:yp(as,hs,1)});function yT(as,us,hs){var bs=_a(as)?lm:aw;return hs&&vu(as,us,hs)&&(us=Ur),bs(as,Ko(us,3))}function vT(as,us){var hs=_a(as)?Ip:av;return hs(as,Ko(us,3))}var bT=Dv(r1),xT=Dv(n1);function wT(as,us){return cu(w0(as,us),1)}function ET(as,us){return cu(w0(as,us),Ss)}function TT(as,us,hs){return hs=hs===Ur?1:$a(hs),cu(w0(as,us),hs)}function u1(as,us){var hs=_a(as)?uu:Op;return hs(as,Ko(us,3))}function c1(as,us){var hs=_a(as)?pp:ov;return hs(as,Ko(us,3))}var ST=f0(function(as,us,hs){Nl.call(as,hs)?as[hs].push(us):yp(as,hs,[us])});function _T(as,us,hs,bs){as=Cu(as)?as:xm(as),hs=hs&&!bs?$a(hs):0;var Ls=as.length;return hs<0&&(hs=su(Ls+hs,0)),$0(as)?hs<=Ls&&as.indexOf(us,hs)>-1:!!Ls&&um(as,us,hs)>-1}var $T=Tl(function(as,us,hs){var bs=-1,Ls=typeof us=="function",Fs=Cu(as)?oo(as.length):[];return Op(as,function(Hs){Fs[++bs]=Ls?nu(us,Hs,hs):Om(Hs,us,hs)}),Fs}),CT=f0(function(as,us,hs){yp(as,hs,us)});function w0(as,us){var hs=_a(as)?Vl:hv;return hs(as,Ko(us,3))}function IT(as,us,hs,bs){return as==null?[]:(_a(us)||(us=us==null?[]:[us]),hs=bs?Ur:hs,_a(hs)||(hs=hs==null?[]:[hs]),yv(as,us,hs))}var RT=f0(function(as,us,hs){as[hs?0:1].push(us)},function(){return[[],[]]});function PT(as,us,hs){var bs=_a(as)?P0:jy,Ls=arguments.length<3;return bs(as,Ko(us,4),hs,Ls,Op)}function kT(as,us,hs){var bs=_a(as)?V1:jy,Ls=arguments.length<3;return bs(as,Ko(us,4),hs,Ls,ov)}function OT(as,us){var hs=_a(as)?Ip:av;return hs(as,S0(Ko(us,3)))}function LT(as){var us=_a(as)?rv:_w;return us(as)}function DT(as,us,hs){(hs?vu(as,us,hs):us===Ur)?us=1:us=$a(us);var bs=_a(as)?rw:$w;return bs(as,us)}function MT(as){var us=_a(as)?nw:Iw;return us(as)}function NT(as){if(as==null)return 0;if(Cu(as))return $0(as)?dm(as):as.length;var us=mu(as);return us==Ns||us==Do?as.size:Y0(as).length}function FT(as,us,hs){var bs=_a(as)?k0:Aw;return hs&&vu(as,us,hs)&&(us=Ur),bs(as,Ko(us,3))}var BT=Tl(function(as,us){if(as==null)return[];var hs=us.length;return hs>1&&vu(as,us[0],us[1])?us=[]:hs>2&&vu(us[0],us[1],us[2])&&(us=[us[0]]),yv(as,cu(us,1),[])}),E0=vx||function(){return Vo.Date.now()};function UT(as,us){if(typeof us!="function")throw new ju(Zr);return as=$a(as),function(){if(--as<1)return us.apply(this,arguments)}}function d1(as,us,hs){return us=hs?Ur:us,us=as&&us==null?as.length:us,vp(as,ps,Ur,Ur,Ur,Ur,us)}function f1(as,us){var hs;if(typeof us!="function")throw new ju(Zr);return as=$a(as),function(){return--as>0&&(hs=us.apply(this,arguments)),as<=1&&(us=Ur),hs}}var xy=Tl(function(as,us,hs){var bs=ss;if(hs.length){var Ls=Rp(hs,vm(xy));bs|=fs}return vp(as,bs,us,hs,Ls)}),h1=Tl(function(as,us,hs){var bs=ss|os;if(hs.length){var Ls=Rp(hs,vm(h1));bs|=fs}return vp(us,bs,as,hs,Ls)});function p1(as,us,hs){us=hs?Ur:us;var bs=vp(as,cs,Ur,Ur,Ur,Ur,Ur,us);return bs.placeholder=p1.placeholder,bs}function m1(as,us,hs){us=hs?Ur:us;var bs=vp(as,ds,Ur,Ur,Ur,Ur,Ur,us);return bs.placeholder=m1.placeholder,bs}function g1(as,us,hs){var bs,Ls,Fs,Hs,Zs,eo,yo=0,bo=!1,wo=!1,Ao=!0;if(typeof as!="function")throw new ju(Zr);us=Wu(us)||0,Wl(hs)&&(bo=!!hs.leading,wo="maxWait"in hs,Fs=wo?su(Wu(hs.maxWait)||0,us):Fs,Ao="trailing"in hs?!!hs.trailing:Ao);function Wo(Jl){var _f=bs,Tp=Ls;return bs=Ls=Ur,yo=Jl,Hs=as.apply(Tp,_f),Hs}function Zo(Jl){return yo=Jl,Zs=Fm(Sl,us),bo?Wo(Jl):Hs}function yl(Jl){var _f=Jl-eo,Tp=Jl-yo,D1=us-_f;return wo?pu(D1,Fs-Tp):D1}function Yo(Jl){var _f=Jl-eo,Tp=Jl-yo;return eo===Ur||_f>=us||_f<0||wo&&Tp>=Fs}function Sl(){var Jl=E0();if(Yo(Jl))return Il(Jl);Zs=Fm(Sl,yl(Jl))}function Il(Jl){return Zs=Ur,Ao&&bs?Wo(Jl):(bs=Ls=Ur,Hs)}function Lu(){Zs!==Ur&&$v(Zs),yo=0,bs=eo=Ls=Zs=Ur}function bu(){return Zs===Ur?Hs:Il(E0())}function Du(){var Jl=E0(),_f=Yo(Jl);if(bs=arguments,Ls=this,eo=Jl,_f){if(Zs===Ur)return Zo(eo);if(wo)return $v(Zs),Zs=Fm(Sl,us),Wo(eo)}return Zs===Ur&&(Zs=Fm(Sl,us)),Hs}return Du.cancel=Lu,Du.flush=bu,Du}var jT=Tl(function(as,us){return sv(as,1,us)}),zT=Tl(function(as,us,hs){return sv(as,Wu(us)||0,hs)});function HT(as){return vp(as,ws)}function T0(as,us){if(typeof as!="function"||us!=null&&typeof us!="function")throw new ju(Zr);var hs=function(){var bs=arguments,Ls=us?us.apply(this,bs):bs[0],Fs=hs.cache;if(Fs.has(Ls))return Fs.get(Ls);var Hs=as.apply(this,bs);return hs.cache=Fs.set(Ls,Hs)||Fs,Hs};return hs.cache=new(T0.Cache||gp),hs}T0.Cache=gp;function S0(as){if(typeof as!="function")throw new ju(Zr);return function(){var us=arguments;switch(us.length){case 0:return!as.call(this);case 1:return!as.call(this,us[0]);case 2:return!as.call(this,us[0],us[1]);case 3:return!as.call(this,us[0],us[1],us[2])}return!as.apply(this,us)}}function VT(as){return f1(2,as)}var GT=Rw(function(as,us){us=us.length==1&&_a(us[0])?Vl(us[0],Pu(Ko())):Vl(cu(us,1),Pu(Ko()));var hs=us.length;return Tl(function(bs){for(var Ls=-1,Fs=pu(bs.length,hs);++Ls<Fs;)bs[Ls]=us[Ls].call(this,bs[Ls]);return nu(as,this,bs)})}),wy=Tl(function(as,us){var hs=Rp(us,vm(wy));return vp(as,fs,Ur,us,hs)}),y1=Tl(function(as,us){var hs=Rp(us,vm(y1));return vp(as,ms,Ur,us,hs)}),WT=bp(function(as,us){return vp(as,ys,Ur,Ur,Ur,us)});function qT(as,us){if(typeof as!="function")throw new ju(Zr);return us=us===Ur?us:$a(us),Tl(as,us)}function KT(as,us){if(typeof as!="function")throw new ju(Zr);return us=us==null?0:su($a(us),0),Tl(function(hs){var bs=hs[us],Ls=Mp(hs,0,us);return bs&&Ap(Ls,bs),nu(as,this,Ls)})}function ZT(as,us,hs){var bs=!0,Ls=!0;if(typeof as!="function")throw new ju(Zr);return Wl(hs)&&(bs="leading"in hs?!!hs.leading:bs,Ls="trailing"in hs?!!hs.trailing:Ls),g1(as,us,{leading:bs,maxWait:us,trailing:Ls})}function YT(as){return d1(as,1)}function XT(as,us){return wy(iy(us),as)}function QT(){if(!arguments.length)return[];var as=arguments[0];return _a(as)?as:[as]}function JT(as){return Hu(as,_i)}function e2(as,us){return us=typeof us=="function"?us:Ur,Hu(as,_i,us)}function t2(as){return Hu(as,Xr|_i)}function r2(as,us){return us=typeof us=="function"?us:Ur,Hu(as,Xr|_i,us)}function n2(as,us){return us==null||iv(as,us,lu(us))}function _d(as,us){return as===us||as!==as&&us!==us}var i2=g0(q0),s2=g0(function(as,us){return as>=us}),tm=cv(function(){return arguments}())?cv:function(as){return Zl(as)&&Nl.call(as,"callee")&&!Yy.call(as,"callee")},_a=oo.isArray,o2=Uu?Pu(Uu):hw;function Cu(as){return as!=null&&_0(as.length)&&!wp(as)}function Ql(as){return Zl(as)&&Cu(as)}function a2(as){return as===!0||as===!1||Zl(as)&&yu(as)==go}var Np=xx||ky,l2=jm?Pu(jm):pw;function u2(as){return Zl(as)&&as.nodeType===1&&!Bm(as)}function c2(as){if(as==null)return!0;if(Cu(as)&&(_a(as)||typeof as=="string"||typeof as.splice=="function"||Np(as)||bm(as)||tm(as)))return!as.length;var us=mu(as);if(us==Ns||us==Do)return!as.size;if(Nm(as))return!Y0(as).length;for(var hs in as)if(Nl.call(as,hs))return!1;return!0}function d2(as,us){return Lm(as,us)}function f2(as,us,hs){hs=typeof hs=="function"?hs:Ur;var bs=hs?hs(as,us):Ur;return bs===Ur?Lm(as,us,Ur,hs):!!bs}function Ey(as){if(!Zl(as))return!1;var us=yu(as);return us==Po||us==Ro||typeof as.message=="string"&&typeof as.name=="string"&&!Bm(as)}function h2(as){return typeof as=="number"&&Qy(as)}function wp(as){if(!Wl(as))return!1;var us=yu(as);return us==Oo||us==Ts||us==co||us==po}function v1(as){return typeof as=="number"&&as==$a(as)}function _0(as){return typeof as=="number"&&as>-1&&as%1==0&&as<=As}function Wl(as){var us=typeof as;return as!=null&&(us=="object"||us=="function")}function Zl(as){return as!=null&&typeof as=="object"}var b1=rp?Pu(rp):gw;function p2(as,us){return as===us||Z0(as,us,dy(us))}function m2(as,us,hs){return hs=typeof hs=="function"?hs:Ur,Z0(as,us,dy(us),hs)}function g2(as){return x1(as)&&as!=+as}function y2(as){if(Jw(as))throw new xa(Wr);return dv(as)}function v2(as){return as===null}function b2(as){return as==null}function x1(as){return typeof as=="number"||Zl(as)&&yu(as)==to}function Bm(as){if(!Zl(as)||yu(as)!=lo)return!1;var us=Qm(as);if(us===null)return!0;var hs=Nl.call(us,"constructor")&&us.constructor;return typeof hs=="function"&&hs instanceof hs&&Km.call(hs)==px}var Ty=zm?Pu(zm):yw;function x2(as){return v1(as)&&as>=-As&&as<=As}var w1=Sm?Pu(Sm):vw;function $0(as){return typeof as=="string"||!_a(as)&&Zl(as)&&yu(as)==No}function Ou(as){return typeof as=="symbol"||Zl(as)&&yu(as)==Co}var bm=_u?Pu(_u):bw;function w2(as){return as===Ur}function E2(as){return Zl(as)&&mu(as)==Mo}function T2(as){return Zl(as)&&yu(as)==_l}var S2=g0(X0),_2=g0(function(as,us){return as<=us});function E1(as){if(!as)return[];if(Cu(as))return $0(as)?Ju(as):$u(as);if($m&&as[$m])return rx(as[$m]());var us=mu(as),hs=us==Ns?F0:us==Do?Gm:xm;return hs(as)}function Ep(as){if(!as)return as===0?as:0;if(as=Wu(as),as===Ss||as===-Ss){var us=as<0?-1:1;return us*Us}return as===as?as:0}function $a(as){var us=Ep(as),hs=us%1;return us===us?hs?us-hs:us:0}function T1(as){return as?Xp($a(as),0,Ws):0}function Wu(as){if(typeof as=="number")return as;if(Ou(as))return Ks;if(Wl(as)){var us=typeof as.valueOf=="function"?as.valueOf():as;as=Wl(us)?us+"":us}if(typeof as!="string")return as===0?as:+as;as=zy(as);var hs=nm.test(as);return hs||Fp.test(as)?gu(as.slice(2),hs?2:8):rm.test(as)?Ks:+as}function S1(as){return sp(as,Iu(as))}function $2(as){return as?Xp($a(as),-As,As):as===0?as:0}function Dl(as){return as==null?"":ku(as)}var C2=gm(function(as,us){if(Nm(us)||Cu(us)){sp(us,lu(us),as);return}for(var hs in us)Nl.call(us,hs)&&Pm(as,hs,us[hs])}),_1=gm(function(as,us){sp(us,Iu(us),as)}),C0=gm(function(as,us,hs,bs){sp(us,Iu(us),as,bs)}),I2=gm(function(as,us,hs,bs){sp(us,lu(us),as,bs)}),A2=bp(V0);function R2(as,us){var hs=mm(as);return us==null?hs:nv(hs,us)}var P2=Tl(function(as,us){as=Bl(as);var hs=-1,bs=us.length,Ls=bs>2?us[2]:Ur;for(Ls&&vu(us[0],us[1],Ls)&&(bs=1);++hs<bs;)for(var Fs=us[hs],Hs=Iu(Fs),Zs=-1,eo=Hs.length;++Zs<eo;){var yo=Hs[Zs],bo=as[yo];(bo===Ur||_d(bo,fm[yo])&&!Nl.call(as,yo))&&(as[yo]=Fs[yo])}return as}),k2=Tl(function(as){return as.push(Ur,zv),nu($1,Ur,as)});function O2(as,us){return Fy(as,Ko(us,3),ip)}function L2(as,us){return Fy(as,Ko(us,3),W0)}function D2(as,us){return as==null?as:G0(as,Ko(us,3),Iu)}function M2(as,us){return as==null?as:lv(as,Ko(us,3),Iu)}function N2(as,us){return as&&ip(as,Ko(us,3))}function F2(as,us){return as&&W0(as,Ko(us,3))}function B2(as){return as==null?[]:l0(as,lu(as))}function U2(as){return as==null?[]:l0(as,Iu(as))}function Sy(as,us,hs){var bs=as==null?Ur:Qp(as,us);return bs===Ur?hs:bs}function j2(as,us){return as!=null&&Gv(as,us,uw)}function _y(as,us){return as!=null&&Gv(as,us,cw)}var z2=Nv(function(as,us,hs){us!=null&&typeof us.toString!="function"&&(us=Zm.call(us)),as[us]=hs},Cy(Au)),H2=Nv(function(as,us,hs){us!=null&&typeof us.toString!="function"&&(us=Zm.call(us)),Nl.call(as,us)?as[us].push(hs):as[us]=[hs]},Ko),V2=Tl(Om);function lu(as){return Cu(as)?tv(as):Y0(as)}function Iu(as){return Cu(as)?tv(as,!0):xw(as)}function G2(as,us){var hs={};return us=Ko(us,3),ip(as,function(bs,Ls,Fs){yp(hs,us(bs,Ls,Fs),bs)}),hs}function W2(as,us){var hs={};return us=Ko(us,3),ip(as,function(bs,Ls,Fs){yp(hs,Ls,us(bs,Ls,Fs))}),hs}var q2=gm(function(as,us,hs){u0(as,us,hs)}),$1=gm(function(as,us,hs,bs){u0(as,us,hs,bs)}),K2=bp(function(as,us){var hs={};if(as==null)return hs;var bs=!1;us=Vl(us,function(Fs){return Fs=Dp(Fs,as),bs||(bs=Fs.length>1),Fs}),sp(as,uy(as),hs),bs&&(hs=Hu(hs,Xr|qr|_i,jw));for(var Ls=us.length;Ls--;)ty(hs,us[Ls]);return hs});function Z2(as,us){return C1(as,S0(Ko(us)))}var Y2=bp(function(as,us){return as==null?{}:Ew(as,us)});function C1(as,us){if(as==null)return{};var hs=Vl(uy(as),function(bs){return[bs]});return us=Ko(us),vv(as,hs,function(bs,Ls){return us(bs,Ls[0])})}function X2(as,us,hs){us=Dp(us,as);var bs=-1,Ls=us.length;for(Ls||(Ls=1,as=Ur);++bs<Ls;){var Fs=as==null?Ur:as[op(us[bs])];Fs===Ur&&(bs=Ls,Fs=hs),as=wp(Fs)?Fs.call(as):Fs}return as}function Q2(as,us,hs){return as==null?as:Dm(as,us,hs)}function J2(as,us,hs,bs){return bs=typeof bs=="function"?bs:Ur,as==null?as:Dm(as,us,hs,bs)}var I1=Uv(lu),A1=Uv(Iu);function eS(as,us,hs){var bs=_a(as),Ls=bs||Np(as)||bm(as);if(us=Ko(us,4),hs==null){var Fs=as&&as.constructor;Ls?hs=bs?new Fs:[]:Wl(as)?hs=wp(Fs)?mm(Qm(as)):{}:hs={}}return(Ls?uu:ip)(as,function(Hs,Zs,eo){return us(hs,Hs,Zs,eo)}),hs}function tS(as,us){return as==null?!0:ty(as,us)}function rS(as,us,hs){return as==null?as:Tv(as,us,iy(hs))}function nS(as,us,hs,bs){return bs=typeof bs=="function"?bs:Ur,as==null?as:Tv(as,us,iy(hs),bs)}function xm(as){return as==null?[]:N0(as,lu(as))}function iS(as){return as==null?[]:N0(as,Iu(as))}function sS(as,us,hs){return hs===Ur&&(hs=us,us=Ur),hs!==Ur&&(hs=Wu(hs),hs=hs===hs?hs:0),us!==Ur&&(us=Wu(us),us=us===us?us:0),Xp(Wu(as),us,hs)}function oS(as,us,hs){return us=Ep(us),hs===Ur?(hs=us,us=0):hs=Ep(hs),as=Wu(as),dw(as,us,hs)}function aS(as,us,hs){if(hs&&typeof hs!="boolean"&&vu(as,us,hs)&&(us=hs=Ur),hs===Ur&&(typeof us=="boolean"?(hs=us,us=Ur):typeof as=="boolean"&&(hs=as,as=Ur)),as===Ur&&us===Ur?(as=0,us=1):(as=Ep(as),us===Ur?(us=as,as=0):us=Ep(us)),as>us){var bs=as;as=us,us=bs}if(hs||as%1||us%1){var Ls=Jy();return pu(as+Ls*(us-as+Su("1e-"+((Ls+"").length-1))),us)}return J0(as,us)}var lS=ym(function(as,us,hs){return us=us.toLowerCase(),as+(hs?R1(us):us)});function R1(as){return $y(Dl(as).toLowerCase())}function P1(as){return as=Dl(as),as&&as.replace(Ol,Q1).replace(Jo,"")}function uS(as,us,hs){as=Dl(as),us=ku(us);var bs=as.length;hs=hs===Ur?bs:Xp($a(hs),0,bs);var Ls=hs;return hs-=us.length,hs>=0&&as.slice(hs,Ls)==us}function cS(as){return as=Dl(as),as&&To.test(as)?as.replace(Xs,J1):as}function dS(as){return as=Dl(as),as&&xl.test(as)?as.replace(fo,"\\$&"):as}var fS=ym(function(as,us,hs){return as+(hs?"-":"")+us.toLowerCase()}),hS=ym(function(as,us,hs){return as+(hs?" ":"")+us.toLowerCase()}),pS=Lv("toLowerCase");function mS(as,us,hs){as=Dl(as),us=$a(us);var bs=us?dm(as):0;if(!us||bs>=us)return as;var Ls=(us-bs)/2;return m0(r0(Ls),hs)+as+m0(t0(Ls),hs)}function gS(as,us,hs){as=Dl(as),us=$a(us);var bs=us?dm(as):0;return us&&bs<us?as+m0(us-bs,hs):as}function yS(as,us,hs){as=Dl(as),us=$a(us);var bs=us?dm(as):0;return us&&bs<us?m0(us-bs,hs)+as:as}function vS(as,us,hs){return hs||us==null?us=0:us&&(us=+us),Sx(Dl(as).replace(Pl,""),us||0)}function bS(as,us,hs){return(hs?vu(as,us,hs):us===Ur)?us=1:us=$a(us),_g(Dl(as),us)}function xS(){var as=arguments,us=Dl(as[0]);return as.length<3?us:us.replace(as[1],as[2])}var wS=ym(function(as,us,hs){return as+(hs?"_":"")+us.toLowerCase()});function ES(as,us,hs){return hs&&typeof hs!="number"&&vu(as,us,hs)&&(us=hs=Ur),hs=hs===Ur?Ws:hs>>>0,hs?(as=Dl(as),as&&(typeof us=="string"||us!=null&&!Ty(us))&&(us=ku(us),!us&&cm(as))?Mp(Ju(as),0,hs):as.split(us,hs)):[]}var TS=ym(function(as,us,hs){return as+(hs?" ":"")+$y(us)});function SS(as,us,hs){return as=Dl(as),hs=hs==null?0:Xp($a(hs),0,as.length),us=ku(us),as.slice(hs,hs+us.length)==us}function _S(as,us,hs){var bs=Ms.templateSettings;hs&&vu(as,us,hs)&&(us=Ur),as=Dl(as),us=C0({},us,bs,jv);var Ls=C0({},us.imports,bs.imports,jv),Fs=lu(Ls),Hs=N0(Ls,Fs),Zs,eo,yo=0,bo=us.interpolate||Yu,wo="__p += '",Ao=B0((us.escape||Yu).source+"|"+bo.source+"|"+(bo===Uo?Mu:Yu).source+"|"+(us.evaluate||Yu).source+"|$","g"),Wo="//# sourceURL="+(Nl.call(us,"sourceURL")?(us.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qo+"]")+`
`;as.replace(Ao,function(Yo,Sl,Il,Lu,bu,Du){return Il||(Il=Lu),wo+=as.slice(yo,Du).replace(cp,_b),Sl&&(Zs=!0,wo+=`' +
__e(`+Sl+`) +
'`),bu&&(eo=!0,wo+=`';
`+bu+`;
__p += '`),Il&&(wo+=`' +
((__t = (`+Il+`)) == null ? '' : __t) +
'`),yo=Du+Yo.length,Yo}),wo+=`';
`;var Zo=Nl.call(us,"variable")&&us.variable;if(!Zo)wo=`with (obj) {
`+wo+`
}
`;else if(ou.test(Zo))throw new xa(Yr);wo=(eo?wo.replace(Is,""):wo).replace(zs,"$1").replace(qs,"$1;"),wo="function("+(Zo||"obj")+`) {
`+(Zo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Zs?", __e = _.escape":"")+(eo?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+wo+`return __p
}`;var yl=O1(function(){return Ll(Fs,Wo+"return "+wo).apply(Ur,Hs)});if(yl.source=wo,Ey(yl))throw yl;return yl}function $S(as){return Dl(as).toLowerCase()}function CS(as){return Dl(as).toUpperCase()}function IS(as,us,hs){if(as=Dl(as),as&&(hs||us===Ur))return zy(as);if(!as||!(us=ku(us)))return as;var bs=Ju(as),Ls=Ju(us),Fs=Hy(bs,Ls),Hs=Vy(bs,Ls)+1;return Mp(bs,Fs,Hs).join("")}function AS(as,us,hs){if(as=Dl(as),as&&(hs||us===Ur))return as.slice(0,Wy(as)+1);if(!as||!(us=ku(us)))return as;var bs=Ju(as),Ls=Vy(bs,Ju(us))+1;return Mp(bs,0,Ls).join("")}function RS(as,us,hs){if(as=Dl(as),as&&(hs||us===Ur))return as.replace(Pl,"");if(!as||!(us=ku(us)))return as;var bs=Ju(as),Ls=Hy(bs,Ju(us));return Mp(bs,Ls).join("")}function PS(as,us){var hs=xs,bs=Es;if(Wl(us)){var Ls="separator"in us?us.separator:Ls;hs="length"in us?$a(us.length):hs,bs="omission"in us?ku(us.omission):bs}as=Dl(as);var Fs=as.length;if(cm(as)){var Hs=Ju(as);Fs=Hs.length}if(hs>=Fs)return as;var Zs=hs-dm(bs);if(Zs<1)return bs;var eo=Hs?Mp(Hs,0,Zs).join(""):as.slice(0,Zs);if(Ls===Ur)return eo+bs;if(Hs&&(Zs+=eo.length-Zs),Ty(Ls)){if(as.slice(Zs).search(Ls)){var yo,bo=eo;for(Ls.global||(Ls=B0(Ls.source,Dl(Zu.exec(Ls))+"g")),Ls.lastIndex=0;yo=Ls.exec(bo);)var wo=yo.index;eo=eo.slice(0,wo===Ur?Zs:wo)}}else if(as.indexOf(ku(Ls),Zs)!=Zs){var Ao=eo.lastIndexOf(Ls);Ao>-1&&(eo=eo.slice(0,Ao))}return eo+bs}function kS(as){return as=Dl(as),as&&xo.test(as)?as.replace(Ys,ox):as}var OS=ym(function(as,us,hs){return as+(hs?" ":"")+us.toUpperCase()}),$y=Lv("toUpperCase");function k1(as,us,hs){return as=Dl(as),us=hs?Ur:us,us===Ur?tx(as)?ux(as):q1(as):as.match(us)||[]}var O1=Tl(function(as,us){try{return nu(as,Ur,us)}catch(hs){return Ey(hs)?hs:new xa(hs)}}),LS=bp(function(as,us){return uu(us,function(hs){hs=op(hs),yp(as,hs,xy(as[hs],as))}),as});function DS(as){var us=as==null?0:as.length,hs=Ko();return as=us?Vl(as,function(bs){if(typeof bs[1]!="function")throw new ju(Zr);return[hs(bs[0]),bs[1]]}):[],Tl(function(bs){for(var Ls=-1;++Ls<us;){var Fs=as[Ls];if(nu(Fs[0],this,bs))return nu(Fs[1],this,bs)}})}function MS(as){return ow(Hu(as,Xr))}function Cy(as){return function(){return as}}function NS(as,us){return as==null||as!==as?us:as}var FS=Mv(),BS=Mv(!0);function Au(as){return as}function Iy(as){return fv(typeof as=="function"?as:Hu(as,Xr))}function US(as){return pv(Hu(as,Xr))}function jS(as,us){return mv(as,Hu(us,Xr))}var zS=Tl(function(as,us){return function(hs){return Om(hs,as,us)}}),HS=Tl(function(as,us){return function(hs){return Om(as,hs,us)}});function Ay(as,us,hs){var bs=lu(us),Ls=l0(us,bs);hs==null&&!(Wl(us)&&(Ls.length||!bs.length))&&(hs=us,us=as,as=this,Ls=l0(us,lu(us)));var Fs=!(Wl(hs)&&"chain"in hs)||!!hs.chain,Hs=wp(as);return uu(Ls,function(Zs){var eo=us[Zs];as[Zs]=eo,Hs&&(as.prototype[Zs]=function(){var yo=this.__chain__;if(Fs||yo){var bo=as(this.__wrapped__),wo=bo.__actions__=$u(this.__actions__);return wo.push({func:eo,args:arguments,thisArg:as}),bo.__chain__=yo,bo}return eo.apply(as,Ap([this.value()],arguments))})}),as}function VS(){return Vo._===this&&(Vo._=mx),this}function Ry(){}function GS(as){return as=$a(as),Tl(function(us){return gv(us,as)})}var WS=oy(Vl),qS=oy(lm),KS=oy(k0);function L1(as){return hy(as)?O0(op(as)):Tw(as)}function ZS(as){return function(us){return as==null?Ur:Qp(as,us)}}var YS=Fv(),XS=Fv(!0);function Py(){return[]}function ky(){return!1}function QS(){return{}}function JS(){return""}function e_(){return!0}function t_(as,us){if(as=$a(as),as<1||as>As)return[];var hs=Ws,bs=pu(as,Ws);us=Ko(us),as-=Ws;for(var Ls=M0(bs,us);++hs<as;)us(hs);return Ls}function r_(as){return _a(as)?Vl(as,op):Ou(as)?[as]:$u(e1(Dl(as)))}function n_(as){var us=++hx;return Dl(as)+us}var i_=p0(function(as,us){return as+us},0),s_=ay("ceil"),o_=p0(function(as,us){return as/us},1),a_=ay("floor");function l_(as){return as&&as.length?a0(as,Au,q0):Ur}function u_(as,us){return as&&as.length?a0(as,Ko(us,2),q0):Ur}function c_(as){return Uy(as,Au)}function d_(as,us){return Uy(as,Ko(us,2))}function f_(as){return as&&as.length?a0(as,Au,X0):Ur}function h_(as,us){return as&&as.length?a0(as,Ko(us,2),X0):Ur}var p_=p0(function(as,us){return as*us},1),m_=ay("round"),g_=p0(function(as,us){return as-us},0);function y_(as){return as&&as.length?D0(as,Au):0}function v_(as,us){return as&&as.length?D0(as,Ko(us,2)):0}return Ms.after=UT,Ms.ary=d1,Ms.assign=C2,Ms.assignIn=_1,Ms.assignInWith=C0,Ms.assignWith=I2,Ms.at=A2,Ms.before=f1,Ms.bind=xy,Ms.bindAll=LS,Ms.bindKey=h1,Ms.castArray=QT,Ms.chain=l1,Ms.chunk=oE,Ms.compact=aE,Ms.concat=lE,Ms.cond=DS,Ms.conforms=MS,Ms.constant=Cy,Ms.countBy=gT,Ms.create=R2,Ms.curry=p1,Ms.curryRight=m1,Ms.debounce=g1,Ms.defaults=P2,Ms.defaultsDeep=k2,Ms.defer=jT,Ms.delay=zT,Ms.difference=uE,Ms.differenceBy=cE,Ms.differenceWith=dE,Ms.drop=fE,Ms.dropRight=hE,Ms.dropRightWhile=pE,Ms.dropWhile=mE,Ms.fill=gE,Ms.filter=vT,Ms.flatMap=wT,Ms.flatMapDeep=ET,Ms.flatMapDepth=TT,Ms.flatten=i1,Ms.flattenDeep=yE,Ms.flattenDepth=vE,Ms.flip=HT,Ms.flow=FS,Ms.flowRight=BS,Ms.fromPairs=bE,Ms.functions=B2,Ms.functionsIn=U2,Ms.groupBy=ST,Ms.initial=wE,Ms.intersection=EE,Ms.intersectionBy=TE,Ms.intersectionWith=SE,Ms.invert=z2,Ms.invertBy=H2,Ms.invokeMap=$T,Ms.iteratee=Iy,Ms.keyBy=CT,Ms.keys=lu,Ms.keysIn=Iu,Ms.map=w0,Ms.mapKeys=G2,Ms.mapValues=W2,Ms.matches=US,Ms.matchesProperty=jS,Ms.memoize=T0,Ms.merge=q2,Ms.mergeWith=$1,Ms.method=zS,Ms.methodOf=HS,Ms.mixin=Ay,Ms.negate=S0,Ms.nthArg=GS,Ms.omit=K2,Ms.omitBy=Z2,Ms.once=VT,Ms.orderBy=IT,Ms.over=WS,Ms.overArgs=GT,Ms.overEvery=qS,Ms.overSome=KS,Ms.partial=wy,Ms.partialRight=y1,Ms.partition=RT,Ms.pick=Y2,Ms.pickBy=C1,Ms.property=L1,Ms.propertyOf=ZS,Ms.pull=IE,Ms.pullAll=o1,Ms.pullAllBy=AE,Ms.pullAllWith=RE,Ms.pullAt=PE,Ms.range=YS,Ms.rangeRight=XS,Ms.rearg=WT,Ms.reject=OT,Ms.remove=kE,Ms.rest=qT,Ms.reverse=vy,Ms.sampleSize=DT,Ms.set=Q2,Ms.setWith=J2,Ms.shuffle=MT,Ms.slice=OE,Ms.sortBy=BT,Ms.sortedUniq=UE,Ms.sortedUniqBy=jE,Ms.split=ES,Ms.spread=KT,Ms.tail=zE,Ms.take=HE,Ms.takeRight=VE,Ms.takeRightWhile=GE,Ms.takeWhile=WE,Ms.tap=aT,Ms.throttle=ZT,Ms.thru=x0,Ms.toArray=E1,Ms.toPairs=I1,Ms.toPairsIn=A1,Ms.toPath=r_,Ms.toPlainObject=S1,Ms.transform=eS,Ms.unary=YT,Ms.union=qE,Ms.unionBy=KE,Ms.unionWith=ZE,Ms.uniq=YE,Ms.uniqBy=XE,Ms.uniqWith=QE,Ms.unset=tS,Ms.unzip=by,Ms.unzipWith=a1,Ms.update=rS,Ms.updateWith=nS,Ms.values=xm,Ms.valuesIn=iS,Ms.without=JE,Ms.words=k1,Ms.wrap=XT,Ms.xor=eT,Ms.xorBy=tT,Ms.xorWith=rT,Ms.zip=nT,Ms.zipObject=iT,Ms.zipObjectDeep=sT,Ms.zipWith=oT,Ms.entries=I1,Ms.entriesIn=A1,Ms.extend=_1,Ms.extendWith=C0,Ay(Ms,Ms),Ms.add=i_,Ms.attempt=O1,Ms.camelCase=lS,Ms.capitalize=R1,Ms.ceil=s_,Ms.clamp=sS,Ms.clone=JT,Ms.cloneDeep=t2,Ms.cloneDeepWith=r2,Ms.cloneWith=e2,Ms.conformsTo=n2,Ms.deburr=P1,Ms.defaultTo=NS,Ms.divide=o_,Ms.endsWith=uS,Ms.eq=_d,Ms.escape=cS,Ms.escapeRegExp=dS,Ms.every=yT,Ms.find=bT,Ms.findIndex=r1,Ms.findKey=O2,Ms.findLast=xT,Ms.findLastIndex=n1,Ms.findLastKey=L2,Ms.floor=a_,Ms.forEach=u1,Ms.forEachRight=c1,Ms.forIn=D2,Ms.forInRight=M2,Ms.forOwn=N2,Ms.forOwnRight=F2,Ms.get=Sy,Ms.gt=i2,Ms.gte=s2,Ms.has=j2,Ms.hasIn=_y,Ms.head=s1,Ms.identity=Au,Ms.includes=_T,Ms.indexOf=xE,Ms.inRange=oS,Ms.invoke=V2,Ms.isArguments=tm,Ms.isArray=_a,Ms.isArrayBuffer=o2,Ms.isArrayLike=Cu,Ms.isArrayLikeObject=Ql,Ms.isBoolean=a2,Ms.isBuffer=Np,Ms.isDate=l2,Ms.isElement=u2,Ms.isEmpty=c2,Ms.isEqual=d2,Ms.isEqualWith=f2,Ms.isError=Ey,Ms.isFinite=h2,Ms.isFunction=wp,Ms.isInteger=v1,Ms.isLength=_0,Ms.isMap=b1,Ms.isMatch=p2,Ms.isMatchWith=m2,Ms.isNaN=g2,Ms.isNative=y2,Ms.isNil=b2,Ms.isNull=v2,Ms.isNumber=x1,Ms.isObject=Wl,Ms.isObjectLike=Zl,Ms.isPlainObject=Bm,Ms.isRegExp=Ty,Ms.isSafeInteger=x2,Ms.isSet=w1,Ms.isString=$0,Ms.isSymbol=Ou,Ms.isTypedArray=bm,Ms.isUndefined=w2,Ms.isWeakMap=E2,Ms.isWeakSet=T2,Ms.join=_E,Ms.kebabCase=fS,Ms.last=Gu,Ms.lastIndexOf=$E,Ms.lowerCase=hS,Ms.lowerFirst=pS,Ms.lt=S2,Ms.lte=_2,Ms.max=l_,Ms.maxBy=u_,Ms.mean=c_,Ms.meanBy=d_,Ms.min=f_,Ms.minBy=h_,Ms.stubArray=Py,Ms.stubFalse=ky,Ms.stubObject=QS,Ms.stubString=JS,Ms.stubTrue=e_,Ms.multiply=p_,Ms.nth=CE,Ms.noConflict=VS,Ms.noop=Ry,Ms.now=E0,Ms.pad=mS,Ms.padEnd=gS,Ms.padStart=yS,Ms.parseInt=vS,Ms.random=aS,Ms.reduce=PT,Ms.reduceRight=kT,Ms.repeat=bS,Ms.replace=xS,Ms.result=X2,Ms.round=m_,Ms.runInContext=Qs,Ms.sample=LT,Ms.size=NT,Ms.snakeCase=wS,Ms.some=FT,Ms.sortedIndex=LE,Ms.sortedIndexBy=DE,Ms.sortedIndexOf=ME,Ms.sortedLastIndex=NE,Ms.sortedLastIndexBy=FE,Ms.sortedLastIndexOf=BE,Ms.startCase=TS,Ms.startsWith=SS,Ms.subtract=g_,Ms.sum=y_,Ms.sumBy=v_,Ms.template=_S,Ms.times=t_,Ms.toFinite=Ep,Ms.toInteger=$a,Ms.toLength=T1,Ms.toLower=$S,Ms.toNumber=Wu,Ms.toSafeInteger=$2,Ms.toString=Dl,Ms.toUpper=CS,Ms.trim=IS,Ms.trimEnd=AS,Ms.trimStart=RS,Ms.truncate=PS,Ms.unescape=kS,Ms.uniqueId=n_,Ms.upperCase=OS,Ms.upperFirst=$y,Ms.each=u1,Ms.eachRight=c1,Ms.first=s1,Ay(Ms,function(){var as={};return ip(Ms,function(us,hs){Nl.call(Ms.prototype,hs)||(as[hs]=us)}),as}(),{chain:!1}),Ms.VERSION=jr,uu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(as){Ms[as].placeholder=Ms}),uu(["drop","take"],function(as,us){Cl.prototype[as]=function(hs){hs=hs===Ur?1:su($a(hs),0);var bs=this.__filtered__&&!us?new Cl(this):this.clone();return bs.__filtered__?bs.__takeCount__=pu(hs,bs.__takeCount__):bs.__views__.push({size:pu(hs,Ws),type:as+(bs.__dir__<0?"Right":"")}),bs},Cl.prototype[as+"Right"]=function(hs){return this.reverse()[as](hs).reverse()}}),uu(["filter","map","takeWhile"],function(as,us){var hs=us+1,bs=hs==Bs||hs==Cs;Cl.prototype[as]=function(Ls){var Fs=this.clone();return Fs.__iteratees__.push({iteratee:Ko(Ls,3),type:hs}),Fs.__filtered__=Fs.__filtered__||bs,Fs}}),uu(["head","last"],function(as,us){var hs="take"+(us?"Right":"");Cl.prototype[as]=function(){return this[hs](1).value()[0]}}),uu(["initial","tail"],function(as,us){var hs="drop"+(us?"":"Right");Cl.prototype[as]=function(){return this.__filtered__?new Cl(this):this[hs](1)}}),Cl.prototype.compact=function(){return this.filter(Au)},Cl.prototype.find=function(as){return this.filter(as).head()},Cl.prototype.findLast=function(as){return this.reverse().find(as)},Cl.prototype.invokeMap=Tl(function(as,us){return typeof as=="function"?new Cl(this):this.map(function(hs){return Om(hs,as,us)})}),Cl.prototype.reject=function(as){return this.filter(S0(Ko(as)))},Cl.prototype.slice=function(as,us){as=$a(as);var hs=this;return hs.__filtered__&&(as>0||us<0)?new Cl(hs):(as<0?hs=hs.takeRight(-as):as&&(hs=hs.drop(as)),us!==Ur&&(us=$a(us),hs=us<0?hs.dropRight(-us):hs.take(us-as)),hs)},Cl.prototype.takeRightWhile=function(as){return this.reverse().takeWhile(as).reverse()},Cl.prototype.toArray=function(){return this.take(Ws)},ip(Cl.prototype,function(as,us){var hs=/^(?:filter|find|map|reject)|While$/.test(us),bs=/^(?:head|last)$/.test(us),Ls=Ms[bs?"take"+(us=="last"?"Right":""):us],Fs=bs||/^find/.test(us);Ls&&(Ms.prototype[us]=function(){var Hs=this.__wrapped__,Zs=bs?[1]:arguments,eo=Hs instanceof Cl,yo=Zs[0],bo=eo||_a(Hs),wo=function(Sl){var Il=Ls.apply(Ms,Ap([Sl],Zs));return bs&&Ao?Il[0]:Il};bo&&hs&&typeof yo=="function"&&yo.length!=1&&(eo=bo=!1);var Ao=this.__chain__,Wo=!!this.__actions__.length,Zo=Fs&&!Ao,yl=eo&&!Wo;if(!Fs&&bo){Hs=yl?Hs:new Cl(this);var Yo=as.apply(Hs,Zs);return Yo.__actions__.push({func:x0,args:[wo],thisArg:Ur}),new zu(Yo,Ao)}return Zo&&yl?as.apply(this,Zs):(Yo=this.thru(wo),Zo?bs?Yo.value()[0]:Yo.value():Yo)})}),uu(["pop","push","shift","sort","splice","unshift"],function(as){var us=Wm[as],hs=/^(?:push|sort|unshift)$/.test(as)?"tap":"thru",bs=/^(?:pop|shift)$/.test(as);Ms.prototype[as]=function(){var Ls=arguments;if(bs&&!this.__chain__){var Fs=this.value();return us.apply(_a(Fs)?Fs:[],Ls)}return this[hs](function(Hs){return us.apply(_a(Hs)?Hs:[],Ls)})}}),ip(Cl.prototype,function(as,us){var hs=Ms[us];if(hs){var bs=hs.name+"";Nl.call(pm,bs)||(pm[bs]=[]),pm[bs].push({name:us,func:hs})}}),pm[h0(Ur,os).name]=[{name:"wrapper",func:Ur}],Cl.prototype.clone=Px,Cl.prototype.reverse=kx,Cl.prototype.value=Ox,Ms.prototype.at=lT,Ms.prototype.chain=uT,Ms.prototype.commit=cT,Ms.prototype.next=dT,Ms.prototype.plant=hT,Ms.prototype.reverse=pT,Ms.prototype.toJSON=Ms.prototype.valueOf=Ms.prototype.value=mT,Ms.prototype.first=Ms.prototype.head,$m&&(Ms.prototype[$m]=fT),Ms},Pp=cx();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Vo._=Pp,define(function(){return Pp})):Gl?((Gl.exports=Pp)._=Pp,El._=Pp):Vo._=Pp}).call(Nr)}}),import_ndarray2=__toESM(require_ndarray()),import_ndarray=__toESM(require_ndarray());async function imageDecode(Nr){const _r=await createImageBitmap(Nr),Ur=imageBitmapToImageData(_r);return(0,import_ndarray.default)(Ur.data,[Ur.height,Ur.width,4])}async function imageEncode(Nr,_r=.8,Ur="image/png"){const[jr,Gr,Wr]=Nr.shape,Zr=new ImageData(new Uint8ClampedArray(Nr.data),Gr,jr);var Yr=new OffscreenCanvas(Zr.width,Zr.height),ts=Yr.getContext("2d");return ts.putImageData(Zr,0,0),Yr.convertToBlob({quality:_r,type:Ur})}function imageBitmapToImageData(Nr){var _r=new OffscreenCanvas(Nr.width,Nr.height),Ur=_r.getContext("2d");return Ur.drawImage(Nr,0,0),Ur.getImageData(0,0,_r.width,_r.height)}async function tensorResize(Nr,_r,Ur){const[jr,Gr,Wr]=Nr.shape,Zr=Gr/_r,Yr=jr/Ur,ts=(0,import_ndarray2.default)(new Uint8Array(Wr*_r*Ur),[Ur,_r,Wr]);for(let es=0;es<Ur;es++)for(let ns=0;ns<_r;ns++)for(let Xr=0;Xr<Wr;Xr++){const qr=ns*Zr,_i=es*Yr,rs=Math.floor(qr),is=Math.ceil(qr),ss=Math.floor(_i),os=Math.ceil(_i),ls=qr-rs,cs=_i-ss,ds=Nr.get(ss,rs,Xr),fs=Nr.get(ss,is,Xr),ms=Nr.get(os,rs,Xr),ps=Nr.get(os,is,Xr),ys=(1-ls)*(1-cs)*ds+ls*(1-cs)*fs+(1-ls)*cs*ms+ls*cs*ps;ts.set(es,ns,Xr,Math.round(ys))}return ts}function tensorHWCtoBCHW(Nr,_r=[128,128,128],Ur=[256,256,256]){var jr=Nr.data;const[Gr,Wr,Zr]=Nr.shape,Yr=Gr*Wr,ts=new Float32Array(3*Yr);for(let es=0,ns=0;es<jr.length;es+=4,ns+=1)ts[ns]=(jr[es]-_r[0])/Ur[0],ts[ns+Yr]=(jr[es+1]-_r[1])/Ur[1],ts[ns+Yr+Yr]=(jr[es+2]-_r[2])/Ur[2];return(0,import_ndarray2.default)(ts,[1,3,Gr,Wr])}function calculateProportionalSize(Nr,_r,Ur,jr){const Gr=Ur/Nr,Wr=jr/_r,Zr=Math.min(Gr,Wr),Yr=Math.floor(Nr*Zr),ts=Math.floor(_r*Zr);return[Yr,ts]}var import_ndarray3=__toESM(require_ndarray());async function loadAsUrl(Nr,_r){return URL.createObjectURL(await loadAsBlob(Nr,_r))}async function loadAsBlob(Nr,_r){const Ur=new URL("resources.json",_r.publicPath),jr=await fetch(Ur);if(!jr.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const Wr=(await jr.json())[Nr];if(!Wr)throw new Error(`Resource ${Nr} not found. Ensure that the config.publicPath is configured correctly.`);let Zr=Object.keys(Wr.chunks);const ts=(await Promise.all(Zr.map(async ns=>{_r.publicPath&&(ns=new URL(ns,_r.publicPath).toString());const Xr=await fetch(ns,_r.fetchArgs);return _r.progress?await fetchChunked(Xr,Wr,_r,Nr):[await Xr.blob()]}))).flat(),es=new Blob(ts,{type:Wr.mime});if(es.size!==Wr.size)throw new Error(`Failed to fetch ${Nr} with size ${Wr.size} but got ${es.size}`);return es}async function fetchChunked(Nr,_r,Ur,jr){const Gr=Nr.body.getReader(),Wr=_r.size??0;let Zr=0,Yr=[];for(;;){const{done:ts,value:es}=await Gr.read();if(ts)break;Yr.push(es),Zr+=es.length,Ur.progress&&Ur.progress(`fetch:${jr}`,Zr,Wr)}return Yr}var simd=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async Nr=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(Nr)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));async function createOnnxSession(Nr,_r){const Ur={simd:await simd(),threads:await threads(),numThreads:navigator.hardwareConcurrency??4,webgpu:navigator.gpu!==void 0};_r.debug&&(console.debug("Capabilities:",Ur),ort_minExports.env.debug=!0,ort_minExports.env.logLevel="verbose"),ort_minExports.env.wasm.numThreads=Ur.numThreads,ort_minExports.env.wasm.simd=Ur.simd,ort_minExports.env.wasm.proxy=_r.proxyToWorker,ort_minExports.env.wasm.wasmPaths={"ort-wasm-simd-threaded.wasm":Ur.simd&&Ur.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-simd-threaded.wasm",_r):void 0,"ort-wasm-simd.wasm":Ur.simd&&!Ur.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-simd.wasm",_r):void 0,"ort-wasm-threaded.wasm":!Ur.simd&&Ur.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-threaded.wasm",_r):void 0,"ort-wasm.wasm":!Ur.simd&&!Ur.threads?await loadAsUrl("/onnxruntime-web/ort-wasm.wasm",_r):void 0},_r.debug&&console.debug("ort.env.wasm:",ort_minExports.env.wasm);const jr={executionProviders:["wasm"],graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await ort_minExports.InferenceSession.create(Nr,jr).catch(Wr=>{throw new Error(`Failed to create session: ${Wr}. Please check if the publicPath is set correctly.`)})}async function runOnnxSession(Nr,_r,Ur){const jr={};for(const[Zr,Yr]of _r)jr[Zr]=new ort_minExports.Tensor("float32",new Float32Array(Yr.data),Yr.shape);const Gr=await Nr.run(jr,{}),Wr=[];for(const Zr of Ur){const Yr=Gr[Zr],ts=Yr.dims,es=Yr.data,ns=(0,import_ndarray3.default)(es,ts);Wr.push(ns)}return Wr}var util;(function(Nr){Nr.assertEqual=Gr=>Gr;function _r(Gr){}Nr.assertIs=_r;function Ur(Gr){throw new Error}Nr.assertNever=Ur,Nr.arrayToEnum=Gr=>{const Wr={};for(const Zr of Gr)Wr[Zr]=Zr;return Wr},Nr.getValidEnumValues=Gr=>{const Wr=Nr.objectKeys(Gr).filter(Yr=>typeof Gr[Gr[Yr]]!="number"),Zr={};for(const Yr of Wr)Zr[Yr]=Gr[Yr];return Nr.objectValues(Zr)},Nr.objectValues=Gr=>Nr.objectKeys(Gr).map(function(Wr){return Gr[Wr]}),Nr.objectKeys=typeof Object.keys=="function"?Gr=>Object.keys(Gr):Gr=>{const Wr=[];for(const Zr in Gr)Object.prototype.hasOwnProperty.call(Gr,Zr)&&Wr.push(Zr);return Wr},Nr.find=(Gr,Wr)=>{for(const Zr of Gr)if(Wr(Zr))return Zr},Nr.isInteger=typeof Number.isInteger=="function"?Gr=>Number.isInteger(Gr):Gr=>typeof Gr=="number"&&isFinite(Gr)&&Math.floor(Gr)===Gr;function jr(Gr,Wr=" | "){return Gr.map(Zr=>typeof Zr=="string"?`'${Zr}'`:Zr).join(Wr)}Nr.joinValues=jr,Nr.jsonStringifyReplacer=(Gr,Wr)=>typeof Wr=="bigint"?Wr.toString():Wr})(util||(util={}));var objectUtil;(function(Nr){Nr.mergeShapes=(_r,Ur)=>({..._r,...Ur})})(objectUtil||(objectUtil={}));var ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=Nr=>{switch(typeof Nr){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(Nr)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(Nr)?ZodParsedType.array:Nr===null?ZodParsedType.null:Nr.then&&typeof Nr.then=="function"&&Nr.catch&&typeof Nr.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&Nr instanceof Map?ZodParsedType.map:typeof Set<"u"&&Nr instanceof Set?ZodParsedType.set:typeof Date<"u"&&Nr instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=Nr=>JSON.stringify(Nr,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError=class extends Error{constructor(Nr){super(),this.issues=[],this.addIssue=Ur=>{this.issues=[...this.issues,Ur]},this.addIssues=(Ur=[])=>{this.issues=[...this.issues,...Ur]};const _r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,_r):this.__proto__=_r,this.name="ZodError",this.issues=Nr}get errors(){return this.issues}format(Nr){const _r=Nr||function(Gr){return Gr.message},Ur={_errors:[]},jr=Gr=>{for(const Wr of Gr.issues)if(Wr.code==="invalid_union")Wr.unionErrors.map(jr);else if(Wr.code==="invalid_return_type")jr(Wr.returnTypeError);else if(Wr.code==="invalid_arguments")jr(Wr.argumentsError);else if(Wr.path.length===0)Ur._errors.push(_r(Wr));else{let Zr=Ur,Yr=0;for(;Yr<Wr.path.length;){const ts=Wr.path[Yr];Yr===Wr.path.length-1?(Zr[ts]=Zr[ts]||{_errors:[]},Zr[ts]._errors.push(_r(Wr))):Zr[ts]=Zr[ts]||{_errors:[]},Zr=Zr[ts],Yr++}}};return jr(this),Ur}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(Nr=_r=>_r.message){const _r={},Ur=[];for(const jr of this.issues)jr.path.length>0?(_r[jr.path[0]]=_r[jr.path[0]]||[],_r[jr.path[0]].push(Nr(jr))):Ur.push(Nr(jr));return{formErrors:Ur,fieldErrors:_r}}get formErrors(){return this.flatten()}};ZodError.create=Nr=>new ZodError(Nr);var errorMap=(Nr,_r)=>{let Ur;switch(Nr.code){case ZodIssueCode.invalid_type:Nr.received===ZodParsedType.undefined?Ur="Required":Ur=`Expected ${Nr.expected}, received ${Nr.received}`;break;case ZodIssueCode.invalid_literal:Ur=`Invalid literal value, expected ${JSON.stringify(Nr.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:Ur=`Unrecognized key(s) in object: ${util.joinValues(Nr.keys,", ")}`;break;case ZodIssueCode.invalid_union:Ur="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:Ur=`Invalid discriminator value. Expected ${util.joinValues(Nr.options)}`;break;case ZodIssueCode.invalid_enum_value:Ur=`Invalid enum value. Expected ${util.joinValues(Nr.options)}, received '${Nr.received}'`;break;case ZodIssueCode.invalid_arguments:Ur="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:Ur="Invalid function return type";break;case ZodIssueCode.invalid_date:Ur="Invalid date";break;case ZodIssueCode.invalid_string:typeof Nr.validation=="object"?"includes"in Nr.validation?(Ur=`Invalid input: must include "${Nr.validation.includes}"`,typeof Nr.validation.position=="number"&&(Ur=`${Ur} at one or more positions greater than or equal to ${Nr.validation.position}`)):"startsWith"in Nr.validation?Ur=`Invalid input: must start with "${Nr.validation.startsWith}"`:"endsWith"in Nr.validation?Ur=`Invalid input: must end with "${Nr.validation.endsWith}"`:util.assertNever(Nr.validation):Nr.validation!=="regex"?Ur=`Invalid ${Nr.validation}`:Ur="Invalid";break;case ZodIssueCode.too_small:Nr.type==="array"?Ur=`Array must contain ${Nr.exact?"exactly":Nr.inclusive?"at least":"more than"} ${Nr.minimum} element(s)`:Nr.type==="string"?Ur=`String must contain ${Nr.exact?"exactly":Nr.inclusive?"at least":"over"} ${Nr.minimum} character(s)`:Nr.type==="number"?Ur=`Number must be ${Nr.exact?"exactly equal to ":Nr.inclusive?"greater than or equal to ":"greater than "}${Nr.minimum}`:Nr.type==="date"?Ur=`Date must be ${Nr.exact?"exactly equal to ":Nr.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(Nr.minimum))}`:Ur="Invalid input";break;case ZodIssueCode.too_big:Nr.type==="array"?Ur=`Array must contain ${Nr.exact?"exactly":Nr.inclusive?"at most":"less than"} ${Nr.maximum} element(s)`:Nr.type==="string"?Ur=`String must contain ${Nr.exact?"exactly":Nr.inclusive?"at most":"under"} ${Nr.maximum} character(s)`:Nr.type==="number"?Ur=`Number must be ${Nr.exact?"exactly":Nr.inclusive?"less than or equal to":"less than"} ${Nr.maximum}`:Nr.type==="bigint"?Ur=`BigInt must be ${Nr.exact?"exactly":Nr.inclusive?"less than or equal to":"less than"} ${Nr.maximum}`:Nr.type==="date"?Ur=`Date must be ${Nr.exact?"exactly":Nr.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(Nr.maximum))}`:Ur="Invalid input";break;case ZodIssueCode.custom:Ur="Invalid input";break;case ZodIssueCode.invalid_intersection_types:Ur="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:Ur=`Number must be a multiple of ${Nr.multipleOf}`;break;case ZodIssueCode.not_finite:Ur="Number must be finite";break;default:Ur=_r.defaultError,util.assertNever(Nr)}return{message:Ur}},overrideErrorMap=errorMap;function setErrorMap(Nr){overrideErrorMap=Nr}function getErrorMap(){return overrideErrorMap}var makeIssue=Nr=>{const{data:_r,path:Ur,errorMaps:jr,issueData:Gr}=Nr,Wr=[...Ur,...Gr.path||[]],Zr={...Gr,path:Wr};let Yr="";const ts=jr.filter(es=>!!es).slice().reverse();for(const es of ts)Yr=es(Zr,{data:_r,defaultError:Yr}).message;return{...Gr,path:Wr,message:Gr.message||Yr}},EMPTY_PATH=[];function addIssueToContext(Nr,_r){const Ur=makeIssue({issueData:_r,data:Nr.data,path:Nr.path,errorMaps:[Nr.common.contextualErrorMap,Nr.schemaErrorMap,getErrorMap(),errorMap].filter(jr=>!!jr)});Nr.common.issues.push(Ur)}var ParseStatus=class B1{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(_r,Ur){const jr=[];for(const Gr of Ur){if(Gr.status==="aborted")return INVALID;Gr.status==="dirty"&&_r.dirty(),jr.push(Gr.value)}return{status:_r.value,value:jr}}static async mergeObjectAsync(_r,Ur){const jr=[];for(const Gr of Ur)jr.push({key:await Gr.key,value:await Gr.value});return B1.mergeObjectSync(_r,jr)}static mergeObjectSync(_r,Ur){const jr={};for(const Gr of Ur){const{key:Wr,value:Zr}=Gr;if(Wr.status==="aborted"||Zr.status==="aborted")return INVALID;Wr.status==="dirty"&&_r.dirty(),Zr.status==="dirty"&&_r.dirty(),(typeof Zr.value<"u"||Gr.alwaysSet)&&(jr[Wr.value]=Zr.value)}return{status:_r.value,value:jr}}},INVALID=Object.freeze({status:"aborted"}),DIRTY=Nr=>({status:"dirty",value:Nr}),OK=Nr=>({status:"valid",value:Nr}),isAborted=Nr=>Nr.status==="aborted",isDirty=Nr=>Nr.status==="dirty",isValid=Nr=>Nr.status==="valid",isAsync=Nr=>typeof Promise<"u"&&Nr instanceof Promise,errorUtil;(function(Nr){Nr.errToObj=_r=>typeof _r=="string"?{message:_r}:_r||{},Nr.toString=_r=>typeof _r=="string"?_r:_r==null?void 0:_r.message})(errorUtil||(errorUtil={}));var ParseInputLazyPath=class{constructor(Nr,_r,Ur,jr){this._cachedPath=[],this.parent=Nr,this.data=_r,this._path=Ur,this._key=jr}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},handleResult=(Nr,_r)=>{if(isValid(_r))return{success:!0,data:_r.value};if(!Nr.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const Ur=new ZodError(Nr.common.issues);return this._error=Ur,this._error}}};function processCreateParams(Nr){if(!Nr)return{};const{errorMap:_r,invalid_type_error:Ur,required_error:jr,description:Gr}=Nr;if(_r&&(Ur||jr))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return _r?{errorMap:_r,description:Gr}:{errorMap:(Zr,Yr)=>Zr.code!=="invalid_type"?{message:Yr.defaultError}:typeof Yr.data>"u"?{message:jr??Yr.defaultError}:{message:Ur??Yr.defaultError},description:Gr}}var ZodType=class{constructor(Nr){this.spa=this.safeParseAsync,this._def=Nr,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(Nr){return getParsedType(Nr.data)}_getOrReturnCtx(Nr,_r){return _r||{common:Nr.parent.common,data:Nr.data,parsedType:getParsedType(Nr.data),schemaErrorMap:this._def.errorMap,path:Nr.path,parent:Nr.parent}}_processInputParams(Nr){return{status:new ParseStatus,ctx:{common:Nr.parent.common,data:Nr.data,parsedType:getParsedType(Nr.data),schemaErrorMap:this._def.errorMap,path:Nr.path,parent:Nr.parent}}}_parseSync(Nr){const _r=this._parse(Nr);if(isAsync(_r))throw new Error("Synchronous parse encountered promise.");return _r}_parseAsync(Nr){const _r=this._parse(Nr);return Promise.resolve(_r)}parse(Nr,_r){const Ur=this.safeParse(Nr,_r);if(Ur.success)return Ur.data;throw Ur.error}safeParse(Nr,_r){var Ur;const jr={common:{issues:[],async:(Ur=_r==null?void 0:_r.async)!==null&&Ur!==void 0?Ur:!1,contextualErrorMap:_r==null?void 0:_r.errorMap},path:(_r==null?void 0:_r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:Nr,parsedType:getParsedType(Nr)},Gr=this._parseSync({data:Nr,path:jr.path,parent:jr});return handleResult(jr,Gr)}async parseAsync(Nr,_r){const Ur=await this.safeParseAsync(Nr,_r);if(Ur.success)return Ur.data;throw Ur.error}async safeParseAsync(Nr,_r){const Ur={common:{issues:[],contextualErrorMap:_r==null?void 0:_r.errorMap,async:!0},path:(_r==null?void 0:_r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:Nr,parsedType:getParsedType(Nr)},jr=this._parse({data:Nr,path:Ur.path,parent:Ur}),Gr=await(isAsync(jr)?jr:Promise.resolve(jr));return handleResult(Ur,Gr)}refine(Nr,_r){const Ur=jr=>typeof _r=="string"||typeof _r>"u"?{message:_r}:typeof _r=="function"?_r(jr):_r;return this._refinement((jr,Gr)=>{const Wr=Nr(jr),Zr=()=>Gr.addIssue({code:ZodIssueCode.custom,...Ur(jr)});return typeof Promise<"u"&&Wr instanceof Promise?Wr.then(Yr=>Yr?!0:(Zr(),!1)):Wr?!0:(Zr(),!1)})}refinement(Nr,_r){return this._refinement((Ur,jr)=>Nr(Ur)?!0:(jr.addIssue(typeof _r=="function"?_r(Ur,jr):_r),!1))}_refinement(Nr){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:Nr}})}superRefine(Nr){return this._refinement(Nr)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(Nr){return ZodUnion.create([this,Nr],this._def)}and(Nr){return ZodIntersection.create(this,Nr,this._def)}transform(Nr){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:Nr}})}default(Nr){const _r=typeof Nr=="function"?Nr:()=>Nr;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:_r,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(Nr){const _r=typeof Nr=="function"?Nr:()=>Nr;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:_r,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(Nr){const _r=this.constructor;return new _r({...this._def,description:Nr})}pipe(Nr){return ZodPipeline.create(this,Nr)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[a-z][a-z0-9]*$/,ulidRegex=/[0-9A-HJKMNP-TV-Z]{26}/,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,emojiRegex=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,ipv4Regex=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=Nr=>Nr.precision?Nr.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${Nr.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${Nr.precision}}Z$`):Nr.precision===0?Nr.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):Nr.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(Nr,_r){return!!((_r==="v4"||!_r)&&ipv4Regex.test(Nr)||(_r==="v6"||!_r)&&ipv6Regex.test(Nr))}var ZodString=class Um extends ZodType{constructor(){super(...arguments),this._regex=(_r,Ur,jr)=>this.refinement(Gr=>_r.test(Gr),{validation:Ur,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(jr)}),this.nonempty=_r=>this.min(1,errorUtil.errToObj(_r)),this.trim=()=>new Um({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Um({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Um({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(_r){if(this._def.coerce&&(_r.data=String(_r.data)),this._getType(_r)!==ZodParsedType.string){const Wr=this._getOrReturnCtx(_r);return addIssueToContext(Wr,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:Wr.parsedType}),INVALID}const jr=new ParseStatus;let Gr;for(const Wr of this._def.checks)if(Wr.kind==="min")_r.data.length<Wr.value&&(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.too_small,minimum:Wr.value,type:"string",inclusive:!0,exact:!1,message:Wr.message}),jr.dirty());else if(Wr.kind==="max")_r.data.length>Wr.value&&(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.too_big,maximum:Wr.value,type:"string",inclusive:!0,exact:!1,message:Wr.message}),jr.dirty());else if(Wr.kind==="length"){const Zr=_r.data.length>Wr.value,Yr=_r.data.length<Wr.value;(Zr||Yr)&&(Gr=this._getOrReturnCtx(_r,Gr),Zr?addIssueToContext(Gr,{code:ZodIssueCode.too_big,maximum:Wr.value,type:"string",inclusive:!0,exact:!0,message:Wr.message}):Yr&&addIssueToContext(Gr,{code:ZodIssueCode.too_small,minimum:Wr.value,type:"string",inclusive:!0,exact:!0,message:Wr.message}),jr.dirty())}else if(Wr.kind==="email")emailRegex.test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"email",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty());else if(Wr.kind==="emoji")emojiRegex.test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"emoji",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty());else if(Wr.kind==="uuid")uuidRegex.test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"uuid",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty());else if(Wr.kind==="cuid")cuidRegex.test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"cuid",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty());else if(Wr.kind==="cuid2")cuid2Regex.test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty());else if(Wr.kind==="ulid")ulidRegex.test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"ulid",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty());else if(Wr.kind==="url")try{new URL(_r.data)}catch{Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"url",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty()}else Wr.kind==="regex"?(Wr.regex.lastIndex=0,Wr.regex.test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"regex",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty())):Wr.kind==="trim"?_r.data=_r.data.trim():Wr.kind==="includes"?_r.data.includes(Wr.value,Wr.position)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.invalid_string,validation:{includes:Wr.value,position:Wr.position},message:Wr.message}),jr.dirty()):Wr.kind==="toLowerCase"?_r.data=_r.data.toLowerCase():Wr.kind==="toUpperCase"?_r.data=_r.data.toUpperCase():Wr.kind==="startsWith"?_r.data.startsWith(Wr.value)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.invalid_string,validation:{startsWith:Wr.value},message:Wr.message}),jr.dirty()):Wr.kind==="endsWith"?_r.data.endsWith(Wr.value)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.invalid_string,validation:{endsWith:Wr.value},message:Wr.message}),jr.dirty()):Wr.kind==="datetime"?datetimeRegex(Wr).test(_r.data)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.invalid_string,validation:"datetime",message:Wr.message}),jr.dirty()):Wr.kind==="ip"?isValidIP(_r.data,Wr.version)||(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{validation:"ip",code:ZodIssueCode.invalid_string,message:Wr.message}),jr.dirty()):util.assertNever(Wr);return{status:jr.value,value:_r.data}}_addCheck(_r){return new Um({...this._def,checks:[...this._def.checks,_r]})}email(_r){return this._addCheck({kind:"email",...errorUtil.errToObj(_r)})}url(_r){return this._addCheck({kind:"url",...errorUtil.errToObj(_r)})}emoji(_r){return this._addCheck({kind:"emoji",...errorUtil.errToObj(_r)})}uuid(_r){return this._addCheck({kind:"uuid",...errorUtil.errToObj(_r)})}cuid(_r){return this._addCheck({kind:"cuid",...errorUtil.errToObj(_r)})}cuid2(_r){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(_r)})}ulid(_r){return this._addCheck({kind:"ulid",...errorUtil.errToObj(_r)})}ip(_r){return this._addCheck({kind:"ip",...errorUtil.errToObj(_r)})}datetime(_r){var Ur;return typeof _r=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:_r}):this._addCheck({kind:"datetime",precision:typeof(_r==null?void 0:_r.precision)>"u"?null:_r==null?void 0:_r.precision,offset:(Ur=_r==null?void 0:_r.offset)!==null&&Ur!==void 0?Ur:!1,...errorUtil.errToObj(_r==null?void 0:_r.message)})}regex(_r,Ur){return this._addCheck({kind:"regex",regex:_r,...errorUtil.errToObj(Ur)})}includes(_r,Ur){return this._addCheck({kind:"includes",value:_r,position:Ur==null?void 0:Ur.position,...errorUtil.errToObj(Ur==null?void 0:Ur.message)})}startsWith(_r,Ur){return this._addCheck({kind:"startsWith",value:_r,...errorUtil.errToObj(Ur)})}endsWith(_r,Ur){return this._addCheck({kind:"endsWith",value:_r,...errorUtil.errToObj(Ur)})}min(_r,Ur){return this._addCheck({kind:"min",value:_r,...errorUtil.errToObj(Ur)})}max(_r,Ur){return this._addCheck({kind:"max",value:_r,...errorUtil.errToObj(Ur)})}length(_r,Ur){return this._addCheck({kind:"length",value:_r,...errorUtil.errToObj(Ur)})}get isDatetime(){return!!this._def.checks.find(_r=>_r.kind==="datetime")}get isEmail(){return!!this._def.checks.find(_r=>_r.kind==="email")}get isURL(){return!!this._def.checks.find(_r=>_r.kind==="url")}get isEmoji(){return!!this._def.checks.find(_r=>_r.kind==="emoji")}get isUUID(){return!!this._def.checks.find(_r=>_r.kind==="uuid")}get isCUID(){return!!this._def.checks.find(_r=>_r.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(_r=>_r.kind==="cuid2")}get isULID(){return!!this._def.checks.find(_r=>_r.kind==="ulid")}get isIP(){return!!this._def.checks.find(_r=>_r.kind==="ip")}get minLength(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="min"&&(_r===null||Ur.value>_r)&&(_r=Ur.value);return _r}get maxLength(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="max"&&(_r===null||Ur.value<_r)&&(_r=Ur.value);return _r}};ZodString.create=Nr=>{var _r;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(_r=Nr==null?void 0:Nr.coerce)!==null&&_r!==void 0?_r:!1,...processCreateParams(Nr)})};function floatSafeRemainder(Nr,_r){const Ur=(Nr.toString().split(".")[1]||"").length,jr=(_r.toString().split(".")[1]||"").length,Gr=Ur>jr?Ur:jr,Wr=parseInt(Nr.toFixed(Gr).replace(".","")),Zr=parseInt(_r.toFixed(Gr).replace(".",""));return Wr%Zr/Math.pow(10,Gr)}var ZodNumber=class Oy extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(_r){if(this._def.coerce&&(_r.data=Number(_r.data)),this._getType(_r)!==ZodParsedType.number){const Wr=this._getOrReturnCtx(_r);return addIssueToContext(Wr,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:Wr.parsedType}),INVALID}let jr;const Gr=new ParseStatus;for(const Wr of this._def.checks)Wr.kind==="int"?util.isInteger(_r.data)||(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:Wr.message}),Gr.dirty()):Wr.kind==="min"?(Wr.inclusive?_r.data<Wr.value:_r.data<=Wr.value)&&(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.too_small,minimum:Wr.value,type:"number",inclusive:Wr.inclusive,exact:!1,message:Wr.message}),Gr.dirty()):Wr.kind==="max"?(Wr.inclusive?_r.data>Wr.value:_r.data>=Wr.value)&&(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.too_big,maximum:Wr.value,type:"number",inclusive:Wr.inclusive,exact:!1,message:Wr.message}),Gr.dirty()):Wr.kind==="multipleOf"?floatSafeRemainder(_r.data,Wr.value)!==0&&(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.not_multiple_of,multipleOf:Wr.value,message:Wr.message}),Gr.dirty()):Wr.kind==="finite"?Number.isFinite(_r.data)||(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.not_finite,message:Wr.message}),Gr.dirty()):util.assertNever(Wr);return{status:Gr.value,value:_r.data}}gte(_r,Ur){return this.setLimit("min",_r,!0,errorUtil.toString(Ur))}gt(_r,Ur){return this.setLimit("min",_r,!1,errorUtil.toString(Ur))}lte(_r,Ur){return this.setLimit("max",_r,!0,errorUtil.toString(Ur))}lt(_r,Ur){return this.setLimit("max",_r,!1,errorUtil.toString(Ur))}setLimit(_r,Ur,jr,Gr){return new Oy({...this._def,checks:[...this._def.checks,{kind:_r,value:Ur,inclusive:jr,message:errorUtil.toString(Gr)}]})}_addCheck(_r){return new Oy({...this._def,checks:[...this._def.checks,_r]})}int(_r){return this._addCheck({kind:"int",message:errorUtil.toString(_r)})}positive(_r){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(_r)})}negative(_r){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(_r)})}nonpositive(_r){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(_r)})}nonnegative(_r){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(_r)})}multipleOf(_r,Ur){return this._addCheck({kind:"multipleOf",value:_r,message:errorUtil.toString(Ur)})}finite(_r){return this._addCheck({kind:"finite",message:errorUtil.toString(_r)})}safe(_r){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(_r)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(_r)})}get minValue(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="min"&&(_r===null||Ur.value>_r)&&(_r=Ur.value);return _r}get maxValue(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="max"&&(_r===null||Ur.value<_r)&&(_r=Ur.value);return _r}get isInt(){return!!this._def.checks.find(_r=>_r.kind==="int"||_r.kind==="multipleOf"&&util.isInteger(_r.value))}get isFinite(){let _r=null,Ur=null;for(const jr of this._def.checks){if(jr.kind==="finite"||jr.kind==="int"||jr.kind==="multipleOf")return!0;jr.kind==="min"?(Ur===null||jr.value>Ur)&&(Ur=jr.value):jr.kind==="max"&&(_r===null||jr.value<_r)&&(_r=jr.value)}return Number.isFinite(Ur)&&Number.isFinite(_r)}};ZodNumber.create=Nr=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(Nr==null?void 0:Nr.coerce)||!1,...processCreateParams(Nr)});var ZodBigInt=class Ly extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(_r){if(this._def.coerce&&(_r.data=BigInt(_r.data)),this._getType(_r)!==ZodParsedType.bigint){const Wr=this._getOrReturnCtx(_r);return addIssueToContext(Wr,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:Wr.parsedType}),INVALID}let jr;const Gr=new ParseStatus;for(const Wr of this._def.checks)Wr.kind==="min"?(Wr.inclusive?_r.data<Wr.value:_r.data<=Wr.value)&&(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.too_small,type:"bigint",minimum:Wr.value,inclusive:Wr.inclusive,message:Wr.message}),Gr.dirty()):Wr.kind==="max"?(Wr.inclusive?_r.data>Wr.value:_r.data>=Wr.value)&&(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.too_big,type:"bigint",maximum:Wr.value,inclusive:Wr.inclusive,message:Wr.message}),Gr.dirty()):Wr.kind==="multipleOf"?_r.data%Wr.value!==BigInt(0)&&(jr=this._getOrReturnCtx(_r,jr),addIssueToContext(jr,{code:ZodIssueCode.not_multiple_of,multipleOf:Wr.value,message:Wr.message}),Gr.dirty()):util.assertNever(Wr);return{status:Gr.value,value:_r.data}}gte(_r,Ur){return this.setLimit("min",_r,!0,errorUtil.toString(Ur))}gt(_r,Ur){return this.setLimit("min",_r,!1,errorUtil.toString(Ur))}lte(_r,Ur){return this.setLimit("max",_r,!0,errorUtil.toString(Ur))}lt(_r,Ur){return this.setLimit("max",_r,!1,errorUtil.toString(Ur))}setLimit(_r,Ur,jr,Gr){return new Ly({...this._def,checks:[...this._def.checks,{kind:_r,value:Ur,inclusive:jr,message:errorUtil.toString(Gr)}]})}_addCheck(_r){return new Ly({...this._def,checks:[...this._def.checks,_r]})}positive(_r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(_r)})}negative(_r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(_r)})}nonpositive(_r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(_r)})}nonnegative(_r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(_r)})}multipleOf(_r,Ur){return this._addCheck({kind:"multipleOf",value:_r,message:errorUtil.toString(Ur)})}get minValue(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="min"&&(_r===null||Ur.value>_r)&&(_r=Ur.value);return _r}get maxValue(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="max"&&(_r===null||Ur.value<_r)&&(_r=Ur.value);return _r}};ZodBigInt.create=Nr=>{var _r;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(_r=Nr==null?void 0:Nr.coerce)!==null&&_r!==void 0?_r:!1,...processCreateParams(Nr)})};var ZodBoolean=class extends ZodType{_parse(Nr){if(this._def.coerce&&(Nr.data=!!Nr.data),this._getType(Nr)!==ZodParsedType.boolean){const Ur=this._getOrReturnCtx(Nr);return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:Ur.parsedType}),INVALID}return OK(Nr.data)}};ZodBoolean.create=Nr=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(Nr==null?void 0:Nr.coerce)||!1,...processCreateParams(Nr)});var ZodDate=class U1 extends ZodType{_parse(_r){if(this._def.coerce&&(_r.data=new Date(_r.data)),this._getType(_r)!==ZodParsedType.date){const Wr=this._getOrReturnCtx(_r);return addIssueToContext(Wr,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:Wr.parsedType}),INVALID}if(isNaN(_r.data.getTime())){const Wr=this._getOrReturnCtx(_r);return addIssueToContext(Wr,{code:ZodIssueCode.invalid_date}),INVALID}const jr=new ParseStatus;let Gr;for(const Wr of this._def.checks)Wr.kind==="min"?_r.data.getTime()<Wr.value&&(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.too_small,message:Wr.message,inclusive:!0,exact:!1,minimum:Wr.value,type:"date"}),jr.dirty()):Wr.kind==="max"?_r.data.getTime()>Wr.value&&(Gr=this._getOrReturnCtx(_r,Gr),addIssueToContext(Gr,{code:ZodIssueCode.too_big,message:Wr.message,inclusive:!0,exact:!1,maximum:Wr.value,type:"date"}),jr.dirty()):util.assertNever(Wr);return{status:jr.value,value:new Date(_r.data.getTime())}}_addCheck(_r){return new U1({...this._def,checks:[...this._def.checks,_r]})}min(_r,Ur){return this._addCheck({kind:"min",value:_r.getTime(),message:errorUtil.toString(Ur)})}max(_r,Ur){return this._addCheck({kind:"max",value:_r.getTime(),message:errorUtil.toString(Ur)})}get minDate(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="min"&&(_r===null||Ur.value>_r)&&(_r=Ur.value);return _r!=null?new Date(_r):null}get maxDate(){let _r=null;for(const Ur of this._def.checks)Ur.kind==="max"&&(_r===null||Ur.value<_r)&&(_r=Ur.value);return _r!=null?new Date(_r):null}};ZodDate.create=Nr=>new ZodDate({checks:[],coerce:(Nr==null?void 0:Nr.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(Nr)});var ZodSymbol=class extends ZodType{_parse(Nr){if(this._getType(Nr)!==ZodParsedType.symbol){const Ur=this._getOrReturnCtx(Nr);return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:Ur.parsedType}),INVALID}return OK(Nr.data)}};ZodSymbol.create=Nr=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(Nr)});var ZodUndefined=class extends ZodType{_parse(Nr){if(this._getType(Nr)!==ZodParsedType.undefined){const Ur=this._getOrReturnCtx(Nr);return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:Ur.parsedType}),INVALID}return OK(Nr.data)}};ZodUndefined.create=Nr=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(Nr)});var ZodNull=class extends ZodType{_parse(Nr){if(this._getType(Nr)!==ZodParsedType.null){const Ur=this._getOrReturnCtx(Nr);return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:Ur.parsedType}),INVALID}return OK(Nr.data)}};ZodNull.create=Nr=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(Nr)});var ZodAny=class extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(Nr){return OK(Nr.data)}};ZodAny.create=Nr=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(Nr)});var ZodUnknown=class extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(Nr){return OK(Nr.data)}};ZodUnknown.create=Nr=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(Nr)});var ZodNever=class extends ZodType{_parse(Nr){const _r=this._getOrReturnCtx(Nr);return addIssueToContext(_r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:_r.parsedType}),INVALID}};ZodNever.create=Nr=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(Nr)});var ZodVoid=class extends ZodType{_parse(Nr){if(this._getType(Nr)!==ZodParsedType.undefined){const Ur=this._getOrReturnCtx(Nr);return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:Ur.parsedType}),INVALID}return OK(Nr.data)}};ZodVoid.create=Nr=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(Nr)});var ZodArray=class I0 extends ZodType{_parse(_r){const{ctx:Ur,status:jr}=this._processInputParams(_r),Gr=this._def;if(Ur.parsedType!==ZodParsedType.array)return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:Ur.parsedType}),INVALID;if(Gr.exactLength!==null){const Zr=Ur.data.length>Gr.exactLength.value,Yr=Ur.data.length<Gr.exactLength.value;(Zr||Yr)&&(addIssueToContext(Ur,{code:Zr?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:Yr?Gr.exactLength.value:void 0,maximum:Zr?Gr.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Gr.exactLength.message}),jr.dirty())}if(Gr.minLength!==null&&Ur.data.length<Gr.minLength.value&&(addIssueToContext(Ur,{code:ZodIssueCode.too_small,minimum:Gr.minLength.value,type:"array",inclusive:!0,exact:!1,message:Gr.minLength.message}),jr.dirty()),Gr.maxLength!==null&&Ur.data.length>Gr.maxLength.value&&(addIssueToContext(Ur,{code:ZodIssueCode.too_big,maximum:Gr.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Gr.maxLength.message}),jr.dirty()),Ur.common.async)return Promise.all([...Ur.data].map((Zr,Yr)=>Gr.type._parseAsync(new ParseInputLazyPath(Ur,Zr,Ur.path,Yr)))).then(Zr=>ParseStatus.mergeArray(jr,Zr));const Wr=[...Ur.data].map((Zr,Yr)=>Gr.type._parseSync(new ParseInputLazyPath(Ur,Zr,Ur.path,Yr)));return ParseStatus.mergeArray(jr,Wr)}get element(){return this._def.type}min(_r,Ur){return new I0({...this._def,minLength:{value:_r,message:errorUtil.toString(Ur)}})}max(_r,Ur){return new I0({...this._def,maxLength:{value:_r,message:errorUtil.toString(Ur)}})}length(_r,Ur){return new I0({...this._def,exactLength:{value:_r,message:errorUtil.toString(Ur)}})}nonempty(_r){return this.min(1,_r)}};ZodArray.create=(Nr,_r)=>new ZodArray({type:Nr,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(_r)});function deepPartialify(Nr){if(Nr instanceof ZodObject){const _r={};for(const Ur in Nr.shape){const jr=Nr.shape[Ur];_r[Ur]=ZodOptional.create(deepPartialify(jr))}return new ZodObject({...Nr._def,shape:()=>_r})}else return Nr instanceof ZodArray?new ZodArray({...Nr._def,type:deepPartialify(Nr.element)}):Nr instanceof ZodOptional?ZodOptional.create(deepPartialify(Nr.unwrap())):Nr instanceof ZodNullable?ZodNullable.create(deepPartialify(Nr.unwrap())):Nr instanceof ZodTuple?ZodTuple.create(Nr.items.map(_r=>deepPartialify(_r))):Nr}var ZodObject=class _h extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const _r=this._def.shape(),Ur=util.objectKeys(_r);return this._cached={shape:_r,keys:Ur}}_parse(_r){if(this._getType(_r)!==ZodParsedType.object){const es=this._getOrReturnCtx(_r);return addIssueToContext(es,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:es.parsedType}),INVALID}const{status:jr,ctx:Gr}=this._processInputParams(_r),{shape:Wr,keys:Zr}=this._getCached(),Yr=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const es in Gr.data)Zr.includes(es)||Yr.push(es);const ts=[];for(const es of Zr){const ns=Wr[es],Xr=Gr.data[es];ts.push({key:{status:"valid",value:es},value:ns._parse(new ParseInputLazyPath(Gr,Xr,Gr.path,es)),alwaysSet:es in Gr.data})}if(this._def.catchall instanceof ZodNever){const es=this._def.unknownKeys;if(es==="passthrough")for(const ns of Yr)ts.push({key:{status:"valid",value:ns},value:{status:"valid",value:Gr.data[ns]}});else if(es==="strict")Yr.length>0&&(addIssueToContext(Gr,{code:ZodIssueCode.unrecognized_keys,keys:Yr}),jr.dirty());else if(es!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const es=this._def.catchall;for(const ns of Yr){const Xr=Gr.data[ns];ts.push({key:{status:"valid",value:ns},value:es._parse(new ParseInputLazyPath(Gr,Xr,Gr.path,ns)),alwaysSet:ns in Gr.data})}}return Gr.common.async?Promise.resolve().then(async()=>{const es=[];for(const ns of ts){const Xr=await ns.key;es.push({key:Xr,value:await ns.value,alwaysSet:ns.alwaysSet})}return es}).then(es=>ParseStatus.mergeObjectSync(jr,es)):ParseStatus.mergeObjectSync(jr,ts)}get shape(){return this._def.shape()}strict(_r){return errorUtil.errToObj,new _h({...this._def,unknownKeys:"strict",..._r!==void 0?{errorMap:(Ur,jr)=>{var Gr,Wr,Zr,Yr;const ts=(Zr=(Wr=(Gr=this._def).errorMap)===null||Wr===void 0?void 0:Wr.call(Gr,Ur,jr).message)!==null&&Zr!==void 0?Zr:jr.defaultError;return Ur.code==="unrecognized_keys"?{message:(Yr=errorUtil.errToObj(_r).message)!==null&&Yr!==void 0?Yr:ts}:{message:ts}}}:{}})}strip(){return new _h({...this._def,unknownKeys:"strip"})}passthrough(){return new _h({...this._def,unknownKeys:"passthrough"})}extend(_r){return new _h({...this._def,shape:()=>({...this._def.shape(),..._r})})}merge(_r){return new _h({unknownKeys:_r._def.unknownKeys,catchall:_r._def.catchall,shape:()=>({...this._def.shape(),..._r._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(_r,Ur){return this.augment({[_r]:Ur})}catchall(_r){return new _h({...this._def,catchall:_r})}pick(_r){const Ur={};return util.objectKeys(_r).forEach(jr=>{_r[jr]&&this.shape[jr]&&(Ur[jr]=this.shape[jr])}),new _h({...this._def,shape:()=>Ur})}omit(_r){const Ur={};return util.objectKeys(this.shape).forEach(jr=>{_r[jr]||(Ur[jr]=this.shape[jr])}),new _h({...this._def,shape:()=>Ur})}deepPartial(){return deepPartialify(this)}partial(_r){const Ur={};return util.objectKeys(this.shape).forEach(jr=>{const Gr=this.shape[jr];_r&&!_r[jr]?Ur[jr]=Gr:Ur[jr]=Gr.optional()}),new _h({...this._def,shape:()=>Ur})}required(_r){const Ur={};return util.objectKeys(this.shape).forEach(jr=>{if(_r&&!_r[jr])Ur[jr]=this.shape[jr];else{let Wr=this.shape[jr];for(;Wr instanceof ZodOptional;)Wr=Wr._def.innerType;Ur[jr]=Wr}}),new _h({...this._def,shape:()=>Ur})}keyof(){return createZodEnum(util.objectKeys(this.shape))}};ZodObject.create=(Nr,_r)=>new ZodObject({shape:()=>Nr,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(_r)});ZodObject.strictCreate=(Nr,_r)=>new ZodObject({shape:()=>Nr,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(_r)});ZodObject.lazycreate=(Nr,_r)=>new ZodObject({shape:Nr,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(_r)});var ZodUnion=class extends ZodType{_parse(Nr){const{ctx:_r}=this._processInputParams(Nr),Ur=this._def.options;function jr(Gr){for(const Zr of Gr)if(Zr.result.status==="valid")return Zr.result;for(const Zr of Gr)if(Zr.result.status==="dirty")return _r.common.issues.push(...Zr.ctx.common.issues),Zr.result;const Wr=Gr.map(Zr=>new ZodError(Zr.ctx.common.issues));return addIssueToContext(_r,{code:ZodIssueCode.invalid_union,unionErrors:Wr}),INVALID}if(_r.common.async)return Promise.all(Ur.map(async Gr=>{const Wr={..._r,common:{..._r.common,issues:[]},parent:null};return{result:await Gr._parseAsync({data:_r.data,path:_r.path,parent:Wr}),ctx:Wr}})).then(jr);{let Gr;const Wr=[];for(const Yr of Ur){const ts={..._r,common:{..._r.common,issues:[]},parent:null},es=Yr._parseSync({data:_r.data,path:_r.path,parent:ts});if(es.status==="valid")return es;es.status==="dirty"&&!Gr&&(Gr={result:es,ctx:ts}),ts.common.issues.length&&Wr.push(ts.common.issues)}if(Gr)return _r.common.issues.push(...Gr.ctx.common.issues),Gr.result;const Zr=Wr.map(Yr=>new ZodError(Yr));return addIssueToContext(_r,{code:ZodIssueCode.invalid_union,unionErrors:Zr}),INVALID}}get options(){return this._def.options}};ZodUnion.create=(Nr,_r)=>new ZodUnion({options:Nr,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(_r)});var getDiscriminator=Nr=>Nr instanceof ZodLazy?getDiscriminator(Nr.schema):Nr instanceof ZodEffects?getDiscriminator(Nr.innerType()):Nr instanceof ZodLiteral?[Nr.value]:Nr instanceof ZodEnum?Nr.options:Nr instanceof ZodNativeEnum?Object.keys(Nr.enum):Nr instanceof ZodDefault?getDiscriminator(Nr._def.innerType):Nr instanceof ZodUndefined?[void 0]:Nr instanceof ZodNull?[null]:null,ZodDiscriminatedUnion=class j1 extends ZodType{_parse(_r){const{ctx:Ur}=this._processInputParams(_r);if(Ur.parsedType!==ZodParsedType.object)return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:Ur.parsedType}),INVALID;const jr=this.discriminator,Gr=Ur.data[jr],Wr=this.optionsMap.get(Gr);return Wr?Ur.common.async?Wr._parseAsync({data:Ur.data,path:Ur.path,parent:Ur}):Wr._parseSync({data:Ur.data,path:Ur.path,parent:Ur}):(addIssueToContext(Ur,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[jr]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(_r,Ur,jr){const Gr=new Map;for(const Wr of Ur){const Zr=getDiscriminator(Wr.shape[_r]);if(!Zr)throw new Error(`A discriminator value for key \`${_r}\` could not be extracted from all schema options`);for(const Yr of Zr){if(Gr.has(Yr))throw new Error(`Discriminator property ${String(_r)} has duplicate value ${String(Yr)}`);Gr.set(Yr,Wr)}}return new j1({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:_r,options:Ur,optionsMap:Gr,...processCreateParams(jr)})}};function mergeValues(Nr,_r){const Ur=getParsedType(Nr),jr=getParsedType(_r);if(Nr===_r)return{valid:!0,data:Nr};if(Ur===ZodParsedType.object&&jr===ZodParsedType.object){const Gr=util.objectKeys(_r),Wr=util.objectKeys(Nr).filter(Yr=>Gr.indexOf(Yr)!==-1),Zr={...Nr,..._r};for(const Yr of Wr){const ts=mergeValues(Nr[Yr],_r[Yr]);if(!ts.valid)return{valid:!1};Zr[Yr]=ts.data}return{valid:!0,data:Zr}}else if(Ur===ZodParsedType.array&&jr===ZodParsedType.array){if(Nr.length!==_r.length)return{valid:!1};const Gr=[];for(let Wr=0;Wr<Nr.length;Wr++){const Zr=Nr[Wr],Yr=_r[Wr],ts=mergeValues(Zr,Yr);if(!ts.valid)return{valid:!1};Gr.push(ts.data)}return{valid:!0,data:Gr}}else return Ur===ZodParsedType.date&&jr===ZodParsedType.date&&+Nr==+_r?{valid:!0,data:Nr}:{valid:!1}}var ZodIntersection=class extends ZodType{_parse(Nr){const{status:_r,ctx:Ur}=this._processInputParams(Nr),jr=(Gr,Wr)=>{if(isAborted(Gr)||isAborted(Wr))return INVALID;const Zr=mergeValues(Gr.value,Wr.value);return Zr.valid?((isDirty(Gr)||isDirty(Wr))&&_r.dirty(),{status:_r.value,value:Zr.data}):(addIssueToContext(Ur,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return Ur.common.async?Promise.all([this._def.left._parseAsync({data:Ur.data,path:Ur.path,parent:Ur}),this._def.right._parseAsync({data:Ur.data,path:Ur.path,parent:Ur})]).then(([Gr,Wr])=>jr(Gr,Wr)):jr(this._def.left._parseSync({data:Ur.data,path:Ur.path,parent:Ur}),this._def.right._parseSync({data:Ur.data,path:Ur.path,parent:Ur}))}};ZodIntersection.create=(Nr,_r,Ur)=>new ZodIntersection({left:Nr,right:_r,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(Ur)});var ZodTuple=class z1 extends ZodType{_parse(_r){const{status:Ur,ctx:jr}=this._processInputParams(_r);if(jr.parsedType!==ZodParsedType.array)return addIssueToContext(jr,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:jr.parsedType}),INVALID;if(jr.data.length<this._def.items.length)return addIssueToContext(jr,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&jr.data.length>this._def.items.length&&(addIssueToContext(jr,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ur.dirty());const Wr=[...jr.data].map((Zr,Yr)=>{const ts=this._def.items[Yr]||this._def.rest;return ts?ts._parse(new ParseInputLazyPath(jr,Zr,jr.path,Yr)):null}).filter(Zr=>!!Zr);return jr.common.async?Promise.all(Wr).then(Zr=>ParseStatus.mergeArray(Ur,Zr)):ParseStatus.mergeArray(Ur,Wr)}get items(){return this._def.items}rest(_r){return new z1({...this._def,rest:_r})}};ZodTuple.create=(Nr,_r)=>{if(!Array.isArray(Nr))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:Nr,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(_r)})};var ZodRecord=class Dy extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(_r){const{status:Ur,ctx:jr}=this._processInputParams(_r);if(jr.parsedType!==ZodParsedType.object)return addIssueToContext(jr,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:jr.parsedType}),INVALID;const Gr=[],Wr=this._def.keyType,Zr=this._def.valueType;for(const Yr in jr.data)Gr.push({key:Wr._parse(new ParseInputLazyPath(jr,Yr,jr.path,Yr)),value:Zr._parse(new ParseInputLazyPath(jr,jr.data[Yr],jr.path,Yr))});return jr.common.async?ParseStatus.mergeObjectAsync(Ur,Gr):ParseStatus.mergeObjectSync(Ur,Gr)}get element(){return this._def.valueType}static create(_r,Ur,jr){return Ur instanceof ZodType?new Dy({keyType:_r,valueType:Ur,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(jr)}):new Dy({keyType:ZodString.create(),valueType:_r,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(Ur)})}},ZodMap=class extends ZodType{_parse(Nr){const{status:_r,ctx:Ur}=this._processInputParams(Nr);if(Ur.parsedType!==ZodParsedType.map)return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:Ur.parsedType}),INVALID;const jr=this._def.keyType,Gr=this._def.valueType,Wr=[...Ur.data.entries()].map(([Zr,Yr],ts)=>({key:jr._parse(new ParseInputLazyPath(Ur,Zr,Ur.path,[ts,"key"])),value:Gr._parse(new ParseInputLazyPath(Ur,Yr,Ur.path,[ts,"value"]))}));if(Ur.common.async){const Zr=new Map;return Promise.resolve().then(async()=>{for(const Yr of Wr){const ts=await Yr.key,es=await Yr.value;if(ts.status==="aborted"||es.status==="aborted")return INVALID;(ts.status==="dirty"||es.status==="dirty")&&_r.dirty(),Zr.set(ts.value,es.value)}return{status:_r.value,value:Zr}})}else{const Zr=new Map;for(const Yr of Wr){const ts=Yr.key,es=Yr.value;if(ts.status==="aborted"||es.status==="aborted")return INVALID;(ts.status==="dirty"||es.status==="dirty")&&_r.dirty(),Zr.set(ts.value,es.value)}return{status:_r.value,value:Zr}}}};ZodMap.create=(Nr,_r,Ur)=>new ZodMap({valueType:_r,keyType:Nr,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(Ur)});var ZodSet=class My extends ZodType{_parse(_r){const{status:Ur,ctx:jr}=this._processInputParams(_r);if(jr.parsedType!==ZodParsedType.set)return addIssueToContext(jr,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:jr.parsedType}),INVALID;const Gr=this._def;Gr.minSize!==null&&jr.data.size<Gr.minSize.value&&(addIssueToContext(jr,{code:ZodIssueCode.too_small,minimum:Gr.minSize.value,type:"set",inclusive:!0,exact:!1,message:Gr.minSize.message}),Ur.dirty()),Gr.maxSize!==null&&jr.data.size>Gr.maxSize.value&&(addIssueToContext(jr,{code:ZodIssueCode.too_big,maximum:Gr.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Gr.maxSize.message}),Ur.dirty());const Wr=this._def.valueType;function Zr(ts){const es=new Set;for(const ns of ts){if(ns.status==="aborted")return INVALID;ns.status==="dirty"&&Ur.dirty(),es.add(ns.value)}return{status:Ur.value,value:es}}const Yr=[...jr.data.values()].map((ts,es)=>Wr._parse(new ParseInputLazyPath(jr,ts,jr.path,es)));return jr.common.async?Promise.all(Yr).then(ts=>Zr(ts)):Zr(Yr)}min(_r,Ur){return new My({...this._def,minSize:{value:_r,message:errorUtil.toString(Ur)}})}max(_r,Ur){return new My({...this._def,maxSize:{value:_r,message:errorUtil.toString(Ur)}})}size(_r,Ur){return this.min(_r,Ur).max(_r,Ur)}nonempty(_r){return this.min(1,_r)}};ZodSet.create=(Nr,_r)=>new ZodSet({valueType:Nr,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(_r)});var ZodFunction=class A0 extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(_r){const{ctx:Ur}=this._processInputParams(_r);if(Ur.parsedType!==ZodParsedType.function)return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:Ur.parsedType}),INVALID;function jr(Yr,ts){return makeIssue({data:Yr,path:Ur.path,errorMaps:[Ur.common.contextualErrorMap,Ur.schemaErrorMap,getErrorMap(),errorMap].filter(es=>!!es),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:ts}})}function Gr(Yr,ts){return makeIssue({data:Yr,path:Ur.path,errorMaps:[Ur.common.contextualErrorMap,Ur.schemaErrorMap,getErrorMap(),errorMap].filter(es=>!!es),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:ts}})}const Wr={errorMap:Ur.common.contextualErrorMap},Zr=Ur.data;return this._def.returns instanceof ZodPromise?OK(async(...Yr)=>{const ts=new ZodError([]),es=await this._def.args.parseAsync(Yr,Wr).catch(qr=>{throw ts.addIssue(jr(Yr,qr)),ts}),ns=await Zr(...es);return await this._def.returns._def.type.parseAsync(ns,Wr).catch(qr=>{throw ts.addIssue(Gr(ns,qr)),ts})}):OK((...Yr)=>{const ts=this._def.args.safeParse(Yr,Wr);if(!ts.success)throw new ZodError([jr(Yr,ts.error)]);const es=Zr(...ts.data),ns=this._def.returns.safeParse(es,Wr);if(!ns.success)throw new ZodError([Gr(es,ns.error)]);return ns.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(..._r){return new A0({...this._def,args:ZodTuple.create(_r).rest(ZodUnknown.create())})}returns(_r){return new A0({...this._def,returns:_r})}implement(_r){return this.parse(_r)}strictImplement(_r){return this.parse(_r)}static create(_r,Ur,jr){return new A0({args:_r||ZodTuple.create([]).rest(ZodUnknown.create()),returns:Ur||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(jr)})}},ZodLazy=class extends ZodType{get schema(){return this._def.getter()}_parse(Nr){const{ctx:_r}=this._processInputParams(Nr);return this._def.getter()._parse({data:_r.data,path:_r.path,parent:_r})}};ZodLazy.create=(Nr,_r)=>new ZodLazy({getter:Nr,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(_r)});var ZodLiteral=class extends ZodType{_parse(Nr){if(Nr.data!==this._def.value){const _r=this._getOrReturnCtx(Nr);return addIssueToContext(_r,{received:_r.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:Nr.data}}get value(){return this._def.value}};ZodLiteral.create=(Nr,_r)=>new ZodLiteral({value:Nr,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(_r)});function createZodEnum(Nr,_r){return new ZodEnum({values:Nr,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(_r)})}var ZodEnum=class Ny extends ZodType{_parse(_r){if(typeof _r.data!="string"){const Ur=this._getOrReturnCtx(_r),jr=this._def.values;return addIssueToContext(Ur,{expected:util.joinValues(jr),received:Ur.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(_r.data)===-1){const Ur=this._getOrReturnCtx(_r),jr=this._def.values;return addIssueToContext(Ur,{received:Ur.data,code:ZodIssueCode.invalid_enum_value,options:jr}),INVALID}return OK(_r.data)}get options(){return this._def.values}get enum(){const _r={};for(const Ur of this._def.values)_r[Ur]=Ur;return _r}get Values(){const _r={};for(const Ur of this._def.values)_r[Ur]=Ur;return _r}get Enum(){const _r={};for(const Ur of this._def.values)_r[Ur]=Ur;return _r}extract(_r){return Ny.create(_r)}exclude(_r){return Ny.create(this.options.filter(Ur=>!_r.includes(Ur)))}};ZodEnum.create=createZodEnum;var ZodNativeEnum=class extends ZodType{_parse(Nr){const _r=util.getValidEnumValues(this._def.values),Ur=this._getOrReturnCtx(Nr);if(Ur.parsedType!==ZodParsedType.string&&Ur.parsedType!==ZodParsedType.number){const jr=util.objectValues(_r);return addIssueToContext(Ur,{expected:util.joinValues(jr),received:Ur.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(_r.indexOf(Nr.data)===-1){const jr=util.objectValues(_r);return addIssueToContext(Ur,{received:Ur.data,code:ZodIssueCode.invalid_enum_value,options:jr}),INVALID}return OK(Nr.data)}get enum(){return this._def.values}};ZodNativeEnum.create=(Nr,_r)=>new ZodNativeEnum({values:Nr,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(_r)});var ZodPromise=class extends ZodType{unwrap(){return this._def.type}_parse(Nr){const{ctx:_r}=this._processInputParams(Nr);if(_r.parsedType!==ZodParsedType.promise&&_r.common.async===!1)return addIssueToContext(_r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:_r.parsedType}),INVALID;const Ur=_r.parsedType===ZodParsedType.promise?_r.data:Promise.resolve(_r.data);return OK(Ur.then(jr=>this._def.type.parseAsync(jr,{path:_r.path,errorMap:_r.common.contextualErrorMap})))}};ZodPromise.create=(Nr,_r)=>new ZodPromise({type:Nr,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(_r)});var ZodEffects=class extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(Nr){const{status:_r,ctx:Ur}=this._processInputParams(Nr),jr=this._def.effect||null;if(jr.type==="preprocess"){const Wr=jr.transform(Ur.data);return Ur.common.async?Promise.resolve(Wr).then(Zr=>this._def.schema._parseAsync({data:Zr,path:Ur.path,parent:Ur})):this._def.schema._parseSync({data:Wr,path:Ur.path,parent:Ur})}const Gr={addIssue:Wr=>{addIssueToContext(Ur,Wr),Wr.fatal?_r.abort():_r.dirty()},get path(){return Ur.path}};if(Gr.addIssue=Gr.addIssue.bind(Gr),jr.type==="refinement"){const Wr=Zr=>{const Yr=jr.refinement(Zr,Gr);if(Ur.common.async)return Promise.resolve(Yr);if(Yr instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return Zr};if(Ur.common.async===!1){const Zr=this._def.schema._parseSync({data:Ur.data,path:Ur.path,parent:Ur});return Zr.status==="aborted"?INVALID:(Zr.status==="dirty"&&_r.dirty(),Wr(Zr.value),{status:_r.value,value:Zr.value})}else return this._def.schema._parseAsync({data:Ur.data,path:Ur.path,parent:Ur}).then(Zr=>Zr.status==="aborted"?INVALID:(Zr.status==="dirty"&&_r.dirty(),Wr(Zr.value).then(()=>({status:_r.value,value:Zr.value}))))}if(jr.type==="transform")if(Ur.common.async===!1){const Wr=this._def.schema._parseSync({data:Ur.data,path:Ur.path,parent:Ur});if(!isValid(Wr))return Wr;const Zr=jr.transform(Wr.value,Gr);if(Zr instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:_r.value,value:Zr}}else return this._def.schema._parseAsync({data:Ur.data,path:Ur.path,parent:Ur}).then(Wr=>isValid(Wr)?Promise.resolve(jr.transform(Wr.value,Gr)).then(Zr=>({status:_r.value,value:Zr})):Wr);util.assertNever(jr)}};ZodEffects.create=(Nr,_r,Ur)=>new ZodEffects({schema:Nr,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:_r,...processCreateParams(Ur)});ZodEffects.createWithPreprocess=(Nr,_r,Ur)=>new ZodEffects({schema:_r,effect:{type:"preprocess",transform:Nr},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(Ur)});var ZodOptional=class extends ZodType{_parse(Nr){return this._getType(Nr)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(Nr)}unwrap(){return this._def.innerType}};ZodOptional.create=(Nr,_r)=>new ZodOptional({innerType:Nr,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(_r)});var ZodNullable=class extends ZodType{_parse(Nr){return this._getType(Nr)===ZodParsedType.null?OK(null):this._def.innerType._parse(Nr)}unwrap(){return this._def.innerType}};ZodNullable.create=(Nr,_r)=>new ZodNullable({innerType:Nr,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(_r)});var ZodDefault=class extends ZodType{_parse(Nr){const{ctx:_r}=this._processInputParams(Nr);let Ur=_r.data;return _r.parsedType===ZodParsedType.undefined&&(Ur=this._def.defaultValue()),this._def.innerType._parse({data:Ur,path:_r.path,parent:_r})}removeDefault(){return this._def.innerType}};ZodDefault.create=(Nr,_r)=>new ZodDefault({innerType:Nr,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof _r.default=="function"?_r.default:()=>_r.default,...processCreateParams(_r)});var ZodCatch=class extends ZodType{_parse(Nr){const{ctx:_r}=this._processInputParams(Nr),Ur={..._r,common:{..._r.common,issues:[]}},jr=this._def.innerType._parse({data:Ur.data,path:Ur.path,parent:{...Ur}});return isAsync(jr)?jr.then(Gr=>({status:"valid",value:Gr.status==="valid"?Gr.value:this._def.catchValue({get error(){return new ZodError(Ur.common.issues)},input:Ur.data})})):{status:"valid",value:jr.status==="valid"?jr.value:this._def.catchValue({get error(){return new ZodError(Ur.common.issues)},input:Ur.data})}}removeCatch(){return this._def.innerType}};ZodCatch.create=(Nr,_r)=>new ZodCatch({innerType:Nr,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof _r.catch=="function"?_r.catch:()=>_r.catch,...processCreateParams(_r)});var ZodNaN=class extends ZodType{_parse(Nr){if(this._getType(Nr)!==ZodParsedType.nan){const Ur=this._getOrReturnCtx(Nr);return addIssueToContext(Ur,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:Ur.parsedType}),INVALID}return{status:"valid",value:Nr.data}}};ZodNaN.create=Nr=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(Nr)});var BRAND=Symbol("zod_brand"),ZodBranded=class extends ZodType{_parse(Nr){const{ctx:_r}=this._processInputParams(Nr),Ur=_r.data;return this._def.type._parse({data:Ur,path:_r.path,parent:_r})}unwrap(){return this._def.type}},ZodPipeline=class H1 extends ZodType{_parse(_r){const{status:Ur,ctx:jr}=this._processInputParams(_r);if(jr.common.async)return(async()=>{const Wr=await this._def.in._parseAsync({data:jr.data,path:jr.path,parent:jr});return Wr.status==="aborted"?INVALID:Wr.status==="dirty"?(Ur.dirty(),DIRTY(Wr.value)):this._def.out._parseAsync({data:Wr.value,path:jr.path,parent:jr})})();{const Gr=this._def.in._parseSync({data:jr.data,path:jr.path,parent:jr});return Gr.status==="aborted"?INVALID:Gr.status==="dirty"?(Ur.dirty(),{status:"dirty",value:Gr.value}):this._def.out._parseSync({data:Gr.value,path:jr.path,parent:jr})}}static create(_r,Ur){return new H1({in:_r,out:Ur,typeName:ZodFirstPartyTypeKind.ZodPipeline})}},custom=(Nr,_r={},Ur)=>Nr?ZodAny.create().superRefine((jr,Gr)=>{var Wr,Zr;if(!Nr(jr)){const Yr=typeof _r=="function"?_r(jr):typeof _r=="string"?{message:_r}:_r,ts=(Zr=(Wr=Yr.fatal)!==null&&Wr!==void 0?Wr:Ur)!==null&&Zr!==void 0?Zr:!0,es=typeof Yr=="string"?{message:Yr}:Yr;Gr.addIssue({code:"custom",...es,fatal:ts})}}):ZodAny.create(),late={object:ZodObject.lazycreate},ZodFirstPartyTypeKind;(function(Nr){Nr.ZodString="ZodString",Nr.ZodNumber="ZodNumber",Nr.ZodNaN="ZodNaN",Nr.ZodBigInt="ZodBigInt",Nr.ZodBoolean="ZodBoolean",Nr.ZodDate="ZodDate",Nr.ZodSymbol="ZodSymbol",Nr.ZodUndefined="ZodUndefined",Nr.ZodNull="ZodNull",Nr.ZodAny="ZodAny",Nr.ZodUnknown="ZodUnknown",Nr.ZodNever="ZodNever",Nr.ZodVoid="ZodVoid",Nr.ZodArray="ZodArray",Nr.ZodObject="ZodObject",Nr.ZodUnion="ZodUnion",Nr.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Nr.ZodIntersection="ZodIntersection",Nr.ZodTuple="ZodTuple",Nr.ZodRecord="ZodRecord",Nr.ZodMap="ZodMap",Nr.ZodSet="ZodSet",Nr.ZodFunction="ZodFunction",Nr.ZodLazy="ZodLazy",Nr.ZodLiteral="ZodLiteral",Nr.ZodEnum="ZodEnum",Nr.ZodEffects="ZodEffects",Nr.ZodNativeEnum="ZodNativeEnum",Nr.ZodOptional="ZodOptional",Nr.ZodNullable="ZodNullable",Nr.ZodDefault="ZodDefault",Nr.ZodCatch="ZodCatch",Nr.ZodPromise="ZodPromise",Nr.ZodBranded="ZodBranded",Nr.ZodPipeline="ZodPipeline"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));var instanceOfType=(Nr,_r={message:`Input not instance of ${Nr.name}`})=>custom(Ur=>Ur instanceof Nr,_r),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:Nr=>ZodString.create({...Nr,coerce:!0}),number:Nr=>ZodNumber.create({...Nr,coerce:!0}),boolean:Nr=>ZodBoolean.create({...Nr,coerce:!0}),bigint:Nr=>ZodBigInt.create({...Nr,coerce:!0}),date:Nr=>ZodDate.create({...Nr,coerce:!0})},NEVER=INVALID,z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),package_default={name:"@imgly/background-removal",version:"1.1.5",description:"Background Removal in the Browser",keywords:["background-removal","client-side","data-privacy","image-segmentation","image-matting","onnx"],repository:{type:"git",url:"git+https://github.com/imgly/background-removal-js.git"},license:"SEE LICENSE IN LICENSE.md",author:{name:"IMG.LY GmbH",email:"support@img.ly",url:"https://img.ly"},bugs:{email:"support@img.ly"},source:"./src/index.ts",main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/index.d.ts",exports:{".":{require:"./dist/index.cjs",import:"./dist/index.mjs",types:"./dist/index.d.ts"}},homepage:"https://img.ly/showcases/cesdk/web/background-removal",files:["LICENSE.md","README.md","dist/"],scripts:{start:"npm run watch",clean:"npx rimraf dist",test:"true",resources:"node ../../scripts/package-resources.mjs",build:"npm run clean && npm run resources && node scripts/build.mjs",watch:"npm run clean && npm run resources && node scripts/watch.mjs",publish:"npm run build && npm publish --access public",lint:"npx prettier --write ."},dependencies:{"onnxruntime-web":"^1.16.0"},devDependencies:{"@types/lodash":"^4.14.195","@types/node":"^20.3.1",lodash:"^4.17.21",ndarray:"^1.0.19",zod:"^3.21.4",assert:"^2.0.0",esbuild:"^0.18.18",glob:"^10.3.3","npm-dts":"^1.3.12",process:"^0.11.10","ts-loader":"^9.4.3",tslib:"^2.5.3",typescript:"^5.1.3",util:"^0.12.5",webpack:"^5.85.1","webpack-cli":"^5.1.4"}},ConfigSchema=z.object({publicPath:z.string().optional().describe("The public path to the wasm files and the onnx model.").default(`https://unpkg.com/${package_default.name}@${package_default.version}/dist/`),debug:z.boolean().default(!1).describe("Whether to enable debug logging."),proxyToWorker:z.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z.object({}).default({}).describe("Arguments to pass to fetch when loading the model."),progress:z.function().args(z.string(),z.number(),z.number()).returns(z.undefined()).describe("Progress callback.").optional(),model:z.enum(["small","medium"]).default("medium")}).default({});function validateConfig(Nr){const _r=ConfigSchema.parse(Nr??{});return _r.debug&&console.log("Config:",_r),_r}var import_ndarray4=__toESM(require_ndarray());async function initInference(Nr){Nr=validateConfig(Nr),Nr.debug&&console.debug("Loading model...");const _r=Nr.model,jr=await(await loadAsBlob(`/models/${_r}`,Nr)).arrayBuffer(),Gr=await createOnnxSession(jr,Nr);return{config:Nr,session:Gr}}async function runInference(Nr,_r,Ur){_r.progress&&_r.progress("compute:inference",0,1);const jr=1024,[Gr,Wr,Zr]=Nr.shape;let Yr=await tensorResize(Nr,jr,jr);const ts=tensorHWCtoBCHW(Yr),es=await runOnnxSession(Ur,[["input",ts]],["output"]),ns=jr*jr;for(let is=0;is<4*ns;is+=4){let ss=is/4,os=es[0].data[ss];Yr.data[is+3]=os*255}const[Xr,qr]=calculateProportionalSize(Wr,Gr,jr,jr),_i=Math.min(Xr,Wr),rs=Math.min(qr,Gr);return Yr=await tensorResize(Yr,_i,rs),_r.progress&&_r.progress("compute:inference",1,1),(0,import_ndarray4.default)(Yr.data,[rs,_i,4])}var import_lodash=__toESM(require_lodash());function isAbsoluteURI(Nr){return new RegExp("^(?:[a-z+]+:)?//","i").test(Nr)}function ensureAbsoluteURI(Nr,_r){return isAbsoluteURI(Nr)?Nr:new URL(Nr,_r).href}var src_default=removeBackground,init=(0,import_lodash.memoize)(initInference,Nr=>JSON.stringify(Nr));async function removeBackground(Nr,_r){const{config:Ur,session:jr}=await init(_r);Ur.debug&&(Ur.progress=Ur.progress??((Wr,Zr,Yr)=>{console.debug(`Downloading ${Wr}: ${Zr} of ${Yr}`)}),crossOriginIsolated||console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),Nr=await imageSourceToImageData(Nr,Ur);const Gr=await runInference(Nr,Ur,jr);return await imageEncode(Gr)}async function imageSourceToImageData(Nr,_r){return typeof Nr=="string"&&(Nr=ensureAbsoluteURI(Nr,_r.publicPath),Nr=new URL(Nr)),Nr instanceof URL&&(Nr=await(await fetch(Nr,{})).blob()),(Nr instanceof ArrayBuffer||ArrayBuffer.isView(Nr))&&(Nr=new Blob([Nr])),Nr instanceof Blob&&(Nr=await imageDecode(Nr)),Nr}/*! Bundled license information:

is-buffer/index.js:
  (*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/const config={model:"small",progress:(Nr,_r,Ur)=>{console.log(`Downloading ${Nr}: ${_r} of ${Ur}`)}};async function findIIIFImageURL(Nr){try{const _r=await fetch(Nr);if(!_r.ok)throw new Error(_r.statusText);const Ur=await _r.json();return"@type"in Ur?Ur["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+Ur["@type"]),null):loadv2(Ur):"type"in Ur?Ur.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+Ur.type),null):loadv3(Ur):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(_r){return console.log("I was unable to get the Manifest you supplied due to: "+_r),null}}function isObject(Nr){return typeof Nr=="object"&&!Array.isArray(Nr)&&Nr!==null}function loadv2(Nr){var _r,Ur,jr;if("sequences"in Nr){let Gr=Nr.sequences;isObject(Gr)&&(Gr=[Gr]);let Wr=!1;for(const Zr of Gr)if("canvases"in Zr){Wr=!0;for(const Yr of Zr.canvases){const ts=(jr=(Ur=(_r=Yr.images[0])==null?void 0:_r.resource)==null?void 0:Ur.service)==null?void 0:jr["@id"];if(ts)return ts}}else Wr||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function loadv3(Nr){if("items"in Nr){const _r=Nr.items;for(const Ur of _r){const jr=Ur.items[0].items[0].body.service[0]["@id"];if(jr)return jr}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function getStyle(Nr,_r){return parseFloat(window.getComputedStyle(Nr).getPropertyValue(_r))}function getImageSelectionData(Nr,_r){const Ur=_r.width,jr=_r.height,Gr=1280;let Wr="full";const Zr="0",Yr="default",ts=".jpg",es=document.getElementsByClassName("displayregioncontainer")[0],ns=document.getElementsByClassName("displayregion")[0],Xr=Ur*es.clientHeight/jr,qr=(es.clientWidth-Xr)/2,_i=Ur/Xr;console.log("Multiplier: ",_i),console.log(`Image resolution (width, height): ${Ur},${jr}`),console.log(`Canvas resolution (width, height): ${Xr},${es.clientHeight}`);const rs=9,is=getStyle(ns,"left"),ss=getStyle(ns,"top"),os=Math.round(ns.clientWidth+rs),ls=Math.round(ns.clientHeight+rs);console.log(`Selection region (x, y, width, height): ${is},${ss},${os},${ls}`);const cs=Math.max(Math.round((is-qr)*_i),0),ds=Math.max(Math.round(ss*_i),0),fs=Math.min(Math.round(os*_i),Ur),ms=Math.min(Math.round(ls*_i),jr);return Wr=`${cs},${ds},${fs},${ms}`,console.log(`Calculated selection region (x, y, width, height): ${cs},${ds},${fs},${ms}`),`${Nr}/${Wr}/${Gr},/${Zr}/${Yr}${ts}`}const utils={bgRemoval:async Nr=>{const _r=Date.now();try{const Ur=await src_default(Nr,config),jr=URL.createObjectURL(Ur),Gr=(Date.now()-_r)/1e3;return console.log("Duration for background removal: ",Gr),console.log("Object URL: ",jr),jr}catch(Ur){throw console.error(Ur),Ur}},getIIIFImageURL:async Nr=>{try{return await findIIIFImageURL(Nr)}catch(_r){return console.error(_r),null}},getCroppedImagePath:async Nr=>{console.log("Image URL: ",Nr);try{const _r=Nr+"/info.json",Ur=await fetch(_r);if(!Ur.ok)throw new Error(Ur.statusText);const jr=await Ur.json();return getImageSelectionData(Nr,jr)}catch(_r){console.error(_r)}}},options={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1},showTitle:!1,showZoomControl:!1};function Collect({setImageURL:Nr}){const[_r,Ur]=reactExports.useState(0),[jr,Gr]=reactExports.useState([]),Wr=reactExports.useRef(_r),Zr=reactExports.useRef(null),Yr=reactExports.useCallback(async cs=>{if(!cs)return;const ds=async ys=>{try{const ws=await utils.getIIIFImageURL(ys);return console.log("Image URL: ",ws),ws}catch(ws){return console.error("Error:",ws),null}},fs=cs.map(async ys=>{const ws=await ds(ys.iiif.value);return ws!==null?{id:ys.work.value,name:ys.workLabel.value,year:ys.year.value,country:ys.countryLabel.value,location:ys.locationLabel.value,url:ys.iiif.value,image:ws}:null}),ps=(await Promise.all(fs)).filter(ys=>ys!==null);console.log("Data elements: ",cs),console.log("Data images: ",ps),Gr(ps)},[]);reactExports.useEffect(()=>{(async()=>{try{const{data:ds}=await axios$1.get(api.sparqlQuery());Yr(ds.results.bindings)}catch(ds){console.error(ds)}})()},[Yr]);const ts=cs=>{Ur(cs),Wr.current=cs},es=_r<jr.length+1,ns=_r>=0,Xr=cs=>{ts(cs+1)},qr=(cs,ds)=>{var fs;console.log(`${cs} (${ds}) left the screen!`,Wr.current),Wr.current>=ds&&((fs=Zr.current)==null||fs.restoreCard())},_i=async cs=>{var ds;ns&&_r<jr.length&&await((ds=Zr.current)==null?void 0:ds.swipe(cs))},rs=async()=>{var ds;if(!es)return;const cs=_r-1;ts(cs),await((ds=Zr.current)==null?void 0:ds.restoreCard())},is=jr[_r],ss=cs=>{cs&&console.log("Active canvas ID: ",cs)},os=async cs=>{try{const ds=await utils.getCroppedImagePath(cs);console.log("Cropped image path: ",ds),ds&&ls(ds)}catch(ds){console.error("Error:",ds)}},ls=async cs=>{try{const ds=await utils.bgRemoval(cs);Nr(ds),console.log("Resulting image URL: ",ds)}catch(ds){console.error("Error:",ds)}};return jsxRuntimeExports.jsxs(Card,{className:"h-full rounded-none",margin:0,children:[is&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TinderCard$1,{ref:Zr,className:"swipe relative h-full",onSwipe:()=>Xr(_r),onCardLeftScreen:()=>qr(is.name,_r),preventSwipe:["up","down"],children:jsxRuntimeExports.jsx(Qr,{iiifContent:is.url,options,canvasIdCallback:ss})},is.id),jsxRuntimeExports.jsxs("p",{className:"px-4 py-2 space-x-2",children:[is.name," (",is.year,") - ",is.location," ",is.country]})]}),jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 space-x-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>os(jr[_r].image),rounded:!0,inline:!0,children:"Lift subject"}),jsxRuntimeExports.jsx(Button,{onClick:()=>_i("left"),rounded:!0,inline:!0,outline:!0,children:"Left"}),jsxRuntimeExports.jsx(Button,{onClick:()=>rs(),rounded:!0,inline:!0,outline:!0,children:"Undo"}),jsxRuntimeExports.jsx(Button,{onClick:()=>_i("right"),rounded:!0,inline:!0,outline:!0,children:"Right"})]})]})}function Create({imageURL:Nr}){return jsxRuntimeExports.jsxs(Block,{className:"flex flex-col gap-16 container mx-auto justify-center content-evenly",children:[jsxRuntimeExports.jsx("h1",{className:"neon neonFont",children:"GLAMorouS Europe"}),Nr&&jsxRuntimeExports.jsx("img",{src:Nr,alt:"Background Removed"})]})}function Start(){return jsxRuntimeExports.jsxs(Block,{className:"flex flex-col gap-16 container mx-auto justify-center content-evenly",children:[jsxRuntimeExports.jsx("h1",{className:"neon neonFont",children:"GLAMorouS Europe"}),jsxRuntimeExports.jsx(Link,{to:"/collect",component:NavLink,children:jsxRuntimeExports.jsx(Button,{large:!0,rounded:!0,className:"k-color-brand-secondary",children:"Collect the items"})})]})}function App(){const[Nr,_r]=reactExports.useState("");return jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Start,{})}),jsxRuntimeExports.jsx(Route,{path:"collect",element:jsxRuntimeExports.jsx(Collect,{setImageURL:_r})}),jsxRuntimeExports.jsx(Route,{path:"create",element:jsxRuntimeExports.jsx(Create,{imageURL:Nr})})]})})}const index="";createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
