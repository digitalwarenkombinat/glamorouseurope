function Qk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ki(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function DU(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var IR={exports:{}},f1={},TR={exports:{}},Gt={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Xh=Symbol.for("react.element"),LU=Symbol.for("react.portal"),FU=Symbol.for("react.fragment"),BU=Symbol.for("react.strict_mode"),zU=Symbol.for("react.profiler"),jU=Symbol.for("react.provider"),VU=Symbol.for("react.context"),UU=Symbol.for("react.forward_ref"),WU=Symbol.for("react.suspense"),GU=Symbol.for("react.memo"),HU=Symbol.for("react.lazy"),NR=Symbol.iterator;function qU(t){return t===null||typeof t!="object"?null:(t=NR&&t[NR]||t["@@iterator"],typeof t=="function"?t:null)}var _R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RR=Object.assign,$R={};function Dd(t,e,n){this.props=t,this.context=e,this.refs=$R,this.updater=n||_R}Dd.prototype.isReactComponent={},Dd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Dd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OR(){}OR.prototype=Dd.prototype;function Zk(t,e,n){this.props=t,this.context=e,this.refs=$R,this.updater=n||_R}var Jk=Zk.prototype=new OR;Jk.constructor=Zk,RR(Jk,Dd.prototype),Jk.isPureReactComponent=!0;var MR=Array.isArray,PR=Object.prototype.hasOwnProperty,eS={current:null},AR={key:!0,ref:!0,__self:!0,__source:!0};function DR(t,e,n){var r,a={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)PR.call(e,r)&&!AR.hasOwnProperty(r)&&(a[r]=e[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Xh,type:t,key:i,ref:o,props:a,_owner:eS.current}}function KU(t,e){return{$$typeof:Xh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xh}function XU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LR=/\/+/g;function nS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XU(""+t.key):e.toString(36)}function g1(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xh:case LU:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+nS(o,0):r,MR(a)?(n="",t!=null&&(n=t.replace(LR,"$&/")+"/"),g1(a,e,n,"",function(u){return u})):a!=null&&(tS(a)&&(a=KU(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(LR,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",MR(t))for(var s=0;s<t.length;s++){i=t[s];var l=r+nS(i,s);o+=g1(i,e,n,l,a)}else if(l=qU(t),typeof l=="function")for(t=l.call(t),s=0;!(i=t.next()).done;)i=i.value,l=r+nS(i,s++),o+=g1(i,e,n,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function m1(t,e,n){if(t==null)return t;var r=[],a=0;return g1(t,r,"","",function(i){return e.call(n,i,a++)}),r}function YU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ha={current:null},y1={transition:null},QU={ReactCurrentDispatcher:Ha,ReactCurrentBatchConfig:y1,ReactCurrentOwner:eS};Gt.Children={map:m1,forEach:function(t,e,n){m1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return m1(t,function(){e++}),e},toArray:function(t){return m1(t,function(e){return e})||[]},only:function(t){if(!tS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},Gt.Component=Dd,Gt.Fragment=FU,Gt.Profiler=zU,Gt.PureComponent=Zk,Gt.StrictMode=BU,Gt.Suspense=WU,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QU,Gt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=RR({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=eS.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)PR.call(e,l)&&!AR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Xh,type:t.type,key:a,ref:i,props:r,_owner:o}},Gt.createContext=function(t){return t={$$typeof:VU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jU,_context:t},t.Consumer=t},Gt.createElement=DR,Gt.createFactory=function(t){var e=DR.bind(null,t);return e.type=t,e},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(t){return{$$typeof:UU,render:t}},Gt.isValidElement=tS,Gt.lazy=function(t){return{$$typeof:HU,_payload:{_status:-1,_result:t},_init:YU}},Gt.memo=function(t,e){return{$$typeof:GU,type:t,compare:e===void 0?null:e}},Gt.startTransition=function(t){var e=y1.transition;y1.transition={};try{t()}finally{y1.transition=e}},Gt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Gt.useCallback=function(t,e){return Ha.current.useCallback(t,e)},Gt.useContext=function(t){return Ha.current.useContext(t)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(t){return Ha.current.useDeferredValue(t)},Gt.useEffect=function(t,e){return Ha.current.useEffect(t,e)},Gt.useId=function(){return Ha.current.useId()},Gt.useImperativeHandle=function(t,e,n){return Ha.current.useImperativeHandle(t,e,n)},Gt.useInsertionEffect=function(t,e){return Ha.current.useInsertionEffect(t,e)},Gt.useLayoutEffect=function(t,e){return Ha.current.useLayoutEffect(t,e)},Gt.useMemo=function(t,e){return Ha.current.useMemo(t,e)},Gt.useReducer=function(t,e,n){return Ha.current.useReducer(t,e,n)},Gt.useRef=function(t){return Ha.current.useRef(t)},Gt.useState=function(t){return Ha.current.useState(t)},Gt.useSyncExternalStore=function(t,e,n){return Ha.current.useSyncExternalStore(t,e,n)},Gt.useTransition=function(){return Ha.current.useTransition()},Gt.version="18.2.0",TR.exports=Gt;var R=TR.exports;const G=Ki(R),FR=Qk({__proto__:null,default:G},[R]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var ZU=R,JU=Symbol.for("react.element"),eW=Symbol.for("react.fragment"),tW=Object.prototype.hasOwnProperty,nW=ZU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rW={key:!0,ref:!0,__self:!0,__source:!0};function BR(t,e,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tW.call(e,r)&&!rW.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:JU,type:t,key:i,ref:o,props:a,_owner:nW.current}}f1.Fragment=eW,f1.jsx=BR,f1.jsxs=BR,IR.exports=f1;var re=IR.exports;const aW={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let iW=class Y_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||aW,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Y_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Y_(this.logger,e)}};var os=new iW;class b1{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(n)||0;this.observers[r].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o.apply(o,[e,...r])})}}function Yh(){let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n}function zR(t){return t==null?"":""+t}function oW(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const sW=/###/g;function Qh(t,e,n){function r(s){return s&&s.indexOf("###")>-1?s.replace(sW,"."):s}function a(){return!t||typeof t=="string"}const i=typeof e!="string"?e:e.split(".");let o=0;for(;o<i.length-1;){if(a())return{};const s=r(i[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return a()?{}:{obj:t,k:r(i[o])}}function jR(t,e,n){const{obj:r,k:a}=Qh(t,e,Object);if(r!==void 0||e.length===1){r[a]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),s=Qh(t,o,Object);for(;s.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),s=Qh(t,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${i}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${i}`]=n}function lW(t,e,n,r){const{obj:a,k:i}=Qh(t,e,Object);a[i]=a[i]||[],r&&(a[i]=a[i].concat(n)),r||a[i].push(n)}function v1(t,e){const{obj:n,k:r}=Qh(t,e);if(n)return n[r]}function uW(t,e,n){const r=v1(t,n);return r!==void 0?r:v1(e,n)}function VR(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):VR(t[r],e[r],n):t[r]=e[r]);return t}function Ld(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var cW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function dW(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>cW[e]):t}class pW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const hW=[" ",",","?","!",";"],fW=new pW(20);function gW(t,e,n){e=e||"",n=n||"";const r=hW.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const a=fW.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(n);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i}function rS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,s="";for(let l=i;l<r.length;++l)if(l!==i&&(s+=n),s+=r[l],o=a[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}a=o}return a}function x1(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class UR extends b1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):typeof r=="string"&&i?s.push(...r.split(i)):s.push(r)));const l=v1(this.data,s);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||typeof r!="string"?l:rS(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),a=n,n=s[1]),this.addNamespaces(n),jR(this.data,s,a),i.silent||this.emit("added",e,n,r,a)}addResources(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(typeof r[i]=="string"||Object.prototype.toString.apply(r[i])==="[object Array]")&&this.addResource(e,n,i,r[i],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),a=r,r=n,n=s[1]),this.addNamespaces(n);let l=v1(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?VR(l,r,i):l={...l,...r},jR(this.data,s,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var WR={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,a){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,a))}),e}};const GR={};class H2 extends b1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),oW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=os.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!gW(e,r,a);if(o&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(a)}return typeof i=="string"&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],n),l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const w=n.nsSeparator||this.options.nsSeparator;return a?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let p=d&&d.res;const f=d&&d.usedKey||o,m=d&&d.exactUsedKey||o,y=Object.prototype.toString.apply(p),v=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&p&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&v.indexOf(y)<0&&!(typeof b=="string"&&y==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...n,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(d.res=w,d.usedParams=this.getUsedParamsDetails(n),d):w}if(i){const w=y==="[object Array]",S=w?[]:{},C=w?m:f;for(const E in p)if(Object.prototype.hasOwnProperty.call(p,E)){const _=`${C}${i}${E}`;S[E]=this.translate(_,{...n,joinArrays:!1,ns:s}),S[E]===_&&(S[E]=p[E])}p=S}}else if(x&&typeof b=="string"&&y==="[object Array]")p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let w=!1,S=!1;const C=n.count!==void 0&&typeof n.count!="string",E=H2.hasDefaultValue(n),_=C?this.pluralResolver.getSuffix(u,n.count,n):"",N=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",M=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),P=M&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${N}`]||n.defaultValue;!this.isValidLookup(p)&&E&&(w=!0,p=P),this.isValidLookup(p)||(S=!0,p=o);const L=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:p,j=E&&P!==p&&this.options.updateMissing;if(S||w||j){if(this.logger.log(j?"updateKey":"missingKey",u,l,o,j?P:p),i){const Z=this.resolve(o,{...n,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let B=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let Z=0;Z<K.length;Z++)B.push(K[Z]);else this.options.saveMissingTo==="all"?B=this.languageUtils.toResolveHierarchy(n.lng||this.language):B.push(n.lng||this.language);const X=(Z,H,F)=>{const Y=E&&F!==p?F:L;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,l,H,Y,j,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Z,l,H,Y,j,n),this.emit("missingKey",Z,l,H,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?B.forEach(Z=>{const H=this.pluralResolver.getSuffixes(Z,n);M&&n[`defaultValue${this.options.pluralSeparator}zero`]&&H.indexOf(`${this.options.pluralSeparator}zero`)<0&&H.push(`${this.options.pluralSeparator}zero`),H.forEach(F=>{X([Z],o+F,n[`defaultValue${F}`]||P)})}):X(B,o,P))}p=this.extendTranslation(p,e,n,d,r),S&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(S||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?p:void 0):p=this.options.parseMissingKeyHandler(p))}return a?(d.res=p,d.usedParams=this.getUsedParamsDetails(n),d):p}extendTranslation(e,n,r,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const p=e.match(this.interpolator.nestingRegexp);c=p&&p.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),u){const p=e.match(this.interpolator.nestingRegexp),f=p&&p.length;c<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,f=new Array(p),m=0;m<p;m++)f[m]=arguments[m];return i&&i[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=WR.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,s;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;a=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",f=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),m=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(v=>{this.isValidLookup(r)||(s=v,!GR[`${y[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(GR[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${y.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(r))return;o=b;const x=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,b,v,n);else{let S;p&&(S=this.pluralResolver.getSuffix(b,n.count,n));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(x.push(c+S),n.ordinal&&S.indexOf(E)===0&&x.push(c+S.replace(E,this.options.pluralSeparator)),f&&x.push(c+C)),m){const _=`${c}${this.options.contextSeparator}${n.context}`;x.push(_),p&&(x.push(_+S),n.ordinal&&S.indexOf(E)===0&&x.push(_+S.replace(E,this.options.pluralSeparator)),f&&x.push(_+C))}}let w;for(;w=x.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(b,v,w,n))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,a):this.resourceStore.getResource(e,n,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function aS(t){return t.charAt(0).toUpperCase()+t.slice(1)}class HR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=os.create("languageUtils")}getScriptPartFromCode(e){if(e=x1(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=x1(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=aS(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=aS(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=aS(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(i=>{if(i===a||!(i.indexOf("-")<0&&a.indexOf("-")<0)&&i.indexOf(a)===0)return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):typeof e=="string"&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}let mW=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],yW={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const bW=["v1","v2","v3"],vW=["v4"],qR={zero:0,one:1,two:2,few:3,many:4,other:5};function xW(){const t={};return mW.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:yW[e.fc]}})}),t}class wW{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=os.create("pluralResolver"),(!this.options.compatibilityJSON||vW.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=xW()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(x1(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${n}${a}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,i)=>qR[a]-qR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(e,a,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let a=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const i=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!bW.includes(this.options.compatibilityJSON)}}function KR(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=uW(t,e,n);return!i&&a&&typeof n=="string"&&(i=rS(t,n,r),i===void 0&&(i=rS(e,n,r))),i}class kW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=os.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:dW,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Ld(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Ld(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Ld(n.nestingPrefix):n.nestingPrefixEscaped||Ld("$t("),this.nestingSuffix=n.nestingSuffix?Ld(n.nestingSuffix):n.nestingSuffixEscaped||Ld(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,a){let i,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(f){return f.replace(/\$/g,"$$$$")}const c=f=>{if(f.indexOf(this.formatSeparator)<0){const b=KR(n,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...a,...n,interpolationkey:f}):b}const m=f.split(this.formatSeparator),y=m.shift().trim(),v=m.join(this.formatSeparator).trim();return this.format(KR(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...a,...n,interpolationkey:y})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>u(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?u(this.escape(f)):u(f)}].forEach(f=>{for(s=0;i=f.regex.exec(e);){const m=i[1].trim();if(o=c(m),o===void 0)if(typeof d=="function"){const v=d(e,i,a);o=typeof v=="string"?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,m))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=zR(o));const y=f.safeValue(o);if(e=e.replace(i[0],y),p?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;function s(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let p=`{${d[1]}`;l=d[0],p=this.interpolate(p,o);const f=p.match(/'/g),m=p.match(/"/g);(f&&f.length%2===0&&!m||m.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${p}`}return delete o.defaultValue,l}for(;a=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const c=a[1].split(this.formatSeparator).map(d=>d.trim());a[1]=c.shift(),l=c,u=!0}if(i=n(s.call(this,a[1].trim(),o),o),i&&a[0]===e&&typeof i!="string")return i;typeof i!="string"&&(i=zR(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((c,d)=>this.format(c,d,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}function SW(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(i=>{if(!i)return;const[o,...s]=i.split(":"),l=s.join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=l),l==="false"&&(n[o.trim()]=!1),l==="true"&&(n[o.trim()]=!0),isNaN(l)||(n[o.trim()]=parseInt(l,10))})}return{formatName:e,formatOptions:n}}function Fd(t){const e={};return function(n,r,a){const i=r+JSON.stringify(a);let o=e[i];return o||(o=t(x1(r),a),e[i]=o),o(n)}}class CW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=os.create("formatter"),this.options=e,this.formats={number:Fd((n,r)=>{const a=new Intl.NumberFormat(n,{...r});return i=>a.format(i)}),currency:Fd((n,r)=>{const a=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>a.format(i)}),datetime:Fd((n,r)=>{const a=new Intl.DateTimeFormat(n,{...r});return i=>a.format(i)}),relativetime:Fd((n,r)=>{const a=new Intl.RelativeTimeFormat(n,{...r});return i=>a.format(i,r.range||"day")}),list:Fd((n,r)=>{const a=new Intl.ListFormat(n,{...r});return i=>a.format(i)})},this.init(e)}init(e){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Fd(n)}format(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((i,o)=>{const{formatName:s,formatOptions:l}=SW(o);if(this.formats[s]){let u=i;try{const c=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},d=c.locale||c.lng||a.locale||a.lng||r;u=this.formats[s](i,d,{...l,...a,...c})}catch(c){this.logger.warn(c)}return u}else this.logger.warn(`there was no format function for ${s}`);return i},e)}}function EW(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class IW extends b1{constructor(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=os.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(e,n,r,a){const i={},o={},s={},l={};return e.forEach(u=>{let c=!0;n.forEach(d=>{const p=`${u}|${d}`;!r.reload&&this.store.hasResourceBundle(u,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,c=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const a=e.split("|"),i=a[0],o=a[1];n&&this.emit("failedLoading",i,o,n),r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const s={};this.queue.forEach(l=>{lW(l.loaded,[i],o),EW(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,a+1,i*2,o)},i);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const i=this.queueLoad(e,n,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,o),!o&&s&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,s),this.loaded(e,o,s)})}saveMissing(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,n,r,a,l):c=u(e,n,r,a),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(e,n,r,a,s,l)}!e||!e[0]||this.store.addResource(e[0],n,r,a)}}}function XR(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function YR(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function w1(){}function TW(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{typeof t[e]=="function"&&(t[e]=t[e].bind(t))})}class _0 extends b1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=YR(e),this.services={},this.logger=os,this.modules={external:[]},TW(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=XR();this.options={...a,...this.options,...YR(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function i(l){return l?typeof l=="function"?new l:l:null}if(!this.options.isClone){this.modules.logger?os.init(i(this.modules.logger),this.options):os.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=CW);const u=new HR(this.options);this.store=new UR(this.options.resources,this.options);const c=this.services;c.logger=os,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new wW(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=i(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new kW(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new IW(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),m=1;m<p;m++)f[m-1]=arguments[m];e.emit(d,...f)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new H2(this.services,this.options),this.translator.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),m=1;m<p;m++)f[m-1]=arguments[m];e.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=w1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const o=Yh(),s=()=>{const l=(u,c)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(c),r(u,c)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w1;const r=typeof e=="string"?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],i=o=>{!o||o==="cimode"||this.services.languageUtils.toResolveHierarchy(o).forEach(s=>{s!=="cimode"&&a.indexOf(s)<0&&a.push(s)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>i(o)),this.options.preload&&this.options.preload.forEach(o=>i(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,n,r){const a=Yh();return e||(e=this.languages),n||(n=this.options.ns),r||(r=w1),this.services.backendConnector.reload(e,n,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&WR.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const a=Yh();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),a}getFixedT(e,n,r){var a=this;const i=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=a.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix=l.keyPrefix||r||i.keyPrefix;const p=a.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(m=>`${l.keyPrefix}${p}${m}`):f=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,a.t(f,l)};return typeof e=="string"?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,n){const r=Yh();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Yh();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0);return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new HR(XR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new _0(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w1;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new _0(a);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new UR(this.store.data,a),i.services.resourceStore=i.store),i.translator=new H2(i.services,a),i.translator.on("*",function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];i.emit(o,...l)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const oa=_0.createInstance();oa.createInstance=_0.createInstance,oa.createInstance,oa.dir,oa.init,oa.loadResources,oa.reloadResources,oa.use,oa.changeLanguage,oa.getFixedT,oa.t,oa.exists,oa.setDefaultNamespace,oa.hasLoadedNamespace,oa.loadNamespaces,oa.loadLanguages;function QR(t){let e=null;return()=>(e==null&&(e=t()),e)}function NW(t,e){return t.filter(n=>n!==e)}function _W(t,e){const n=new Set,r=i=>n.add(i);t.forEach(r),e.forEach(r);const a=[];return n.forEach(i=>a.push(i)),a}class RW{enter(e){const n=this.entered.length,r=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=_W(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=NW(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class $W{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const a=this.config.exposeProperties[r];a!=null&&(n[r]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const ZR="__NATIVE_FILE__",JR="__NATIVE_URL__",e$="__NATIVE_TEXT__",t$="__NATIVE_HTML__",n$=Object.freeze(Object.defineProperty({__proto__:null,FILE:ZR,HTML:t$,TEXT:e$,URL:JR},Symbol.toStringTag,{value:"Module"}));function iS(t,e,n){return e.reduce((a,i)=>a||t.getData(i),"")??n}const oS={[ZR]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[t$]:{exposeProperties:{html:(t,e)=>iS(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[JR]:{exposeProperties:{urls:(t,e)=>iS(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[e$]:{exposeProperties:{text:(t,e)=>iS(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function OW(t,e){const n=oS[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new $W(n);return r.loadDataTransfer(e),r}function sS(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(oS).filter(n=>{const r=oS[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const MW=QR(()=>/firefox/i.test(navigator.userAgent)),r$=QR(()=>!!window.safari);class a${interpolate(e){const{xs:n,ys:r,c1s:a,c2s:i,c3s:o}=this;let s=n.length-1;if(e===n[s])return r[s];let l=0,u=o.length-1,c;for(;l<=u;){c=Math.floor(.5*(l+u));const f=n[c];if(f<e)l=c+1;else if(f>e)u=c-1;else return r[c]}s=Math.max(0,u);const d=e-n[s],p=d*d;return r[s]+a[s]*d+i[s]*p+o[s]*d*p}constructor(e,n){const{length:r}=e,a=[];for(let f=0;f<r;f++)a.push(f);a.sort((f,m)=>e[f]<e[m]?-1:1);const i=[],o=[];let s,l;for(let f=0;f<r-1;f++)s=e[f+1]-e[f],l=n[f+1]-n[f],i.push(s),o.push(l/s);const u=[o[0]];for(let f=0;f<i.length-1;f++){const m=o[f],y=o[f+1];if(m*y<=0)u.push(0);else{s=i[f];const v=i[f+1],b=s+v;u.push(3*b/((b+v)/m+(b+s)/y))}}u.push(o[o.length-1]);const c=[],d=[];let p;for(let f=0;f<u.length-1;f++){p=o[f];const m=u[f],y=1/i[f],v=m+u[f+1]-p-p;c.push((p-m-v)*y),d.push(v*y*y)}this.xs=e,this.ys=n,this.c1s=u,this.c2s=c,this.c3s=d}}const PW=1;function i$(t){const e=t.nodeType===PW?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function k1(t){return{x:t.clientX,y:t.clientY}}function AW(t){var e;return t.nodeName==="IMG"&&(MW()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function DW(t,e,n,r){let a=t?e.width:n,i=t?e.height:r;return r$()&&t&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function LW(t,e,n,r,a){const i=AW(e),o=i$(i?t:e),s={x:n.x-o.x,y:n.y-o.y},{offsetWidth:l,offsetHeight:u}=t,{anchorX:c,anchorY:d}=r,{dragPreviewWidth:p,dragPreviewHeight:f}=DW(i,e,l,u),m=()=>{let S=new a$([0,.5,1],[s.y,s.y/u*f,s.y+f-u]).interpolate(d);return r$()&&i&&(S+=(window.devicePixelRatio-1)*f),S},y=()=>new a$([0,.5,1],[s.x,s.x/l*p,s.x+p-l]).interpolate(c),{offsetX:v,offsetY:b}=a,x=v===0||v,w=b===0||b;return{x:x?v:y(),y:w?b:m()}}let FW=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,e){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=e}};function BW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){BW(t,a,n[a])})}return t}class zW{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const a=o=>this.handleDragStart(o,e),i=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",i),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),a=o=>this.handleDragOver(o,e),i=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",a),n.addEventListener("drop",i),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",a),n.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return o$({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return o$({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(n$).some(n=>n$[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=OW(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&i$(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=k1(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,l=sS(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const c=this.monitor.getSourceId(),d=this.sourceNodes.get(c),p=this.sourcePreviewNodes.get(c)||d;if(p){const{anchorX:f,anchorY:m,offsetX:y,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),b=LW(d,p,o,{anchorX:f,anchorY:m},{offsetX:y,offsetY:v});s.setDragImage(p,b.x,b.y)}}try{s?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:o}=a,s=sS(o);s&&this.beginDragNativeItem(s,o)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:k1(a)}),i.some(o=>this.monitor.canDropOnTarget(o))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=k1(a),this.scheduleHover(i),(i||[]).some(o=>this.monitor.canDropOnTarget(o))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else sS(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:k1(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new FW(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new RW(this.isNodeInDocument)}}const jW=function(t,e,n){return new zW(t,e,n)};var s$=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},mt=(t,e,n)=>(s$(t,e,"read from private field"),n?n.call(t):e.get(t)),Xi=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ac=(t,e,n,r)=>(s$(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ic,VW=class{constructor(){Xi(this,ic,void 0),this.register=t=>{mt(this,ic).push(t)},this.unregister=t=>{let e;for(;(e=mt(this,ic).indexOf(t))!==-1;)mt(this,ic).splice(e,1)},this.backendChanged=t=>{for(let e of mt(this,ic))e.backendChanged(t)},ac(this,ic,[])}};ic=new WeakMap;var Ci,Zh,Ei,zs,Bl,lS,uS,cS,S1,C1,Jh,l$=class G2{constructor(e,n,r){if(Xi(this,Ci,void 0),Xi(this,Zh,void 0),Xi(this,Ei,void 0),Xi(this,zs,void 0),Xi(this,Bl,void 0),Xi(this,lS,(a,i,o)=>{if(!o.backend)throw new Error(`You must specify a 'backend' property in your Backend entry: ${JSON.stringify(o)}`);let s=o.backend(a,i,o.options),l=o.id,u=!o.id&&s&&s.constructor;if(u&&(l=s.constructor.name),l)u&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error(`You must specify an 'id' property in your Backend entry: ${JSON.stringify(o)}
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`);if(mt(this,Ei)[l])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        ${JSON.stringify(o)} (conflicts with: ${JSON.stringify(mt(this,Ei)[l])})`);return{id:l,instance:s,preview:o.preview??!1,transition:o.transition,skipDispatchOnTransition:o.skipDispatchOnTransition??!1}}),this.setup=()=>{if(!(typeof window>"u")){if(G2.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");G2.isSetUp=!0,mt(this,uS).call(this,window),mt(this,Ei)[mt(this,Ci)].instance.setup()}},this.teardown=()=>{typeof window>"u"||(G2.isSetUp=!1,mt(this,cS).call(this,window),mt(this,Ei)[mt(this,Ci)].instance.teardown())},this.connectDragSource=(a,i,o)=>mt(this,Jh).call(this,"connectDragSource",a,i,o),this.connectDragPreview=(a,i,o)=>mt(this,Jh).call(this,"connectDragPreview",a,i,o),this.connectDropTarget=(a,i,o)=>mt(this,Jh).call(this,"connectDropTarget",a,i,o),this.profile=()=>mt(this,Ei)[mt(this,Ci)].instance.profile(),this.previewEnabled=()=>mt(this,Ei)[mt(this,Ci)].preview,this.previewsList=()=>mt(this,Zh),this.backendsList=()=>mt(this,zs),Xi(this,uS,a=>{mt(this,zs).forEach(i=>{i.transition&&a.addEventListener(i.transition.event,mt(this,S1))})}),Xi(this,cS,a=>{mt(this,zs).forEach(i=>{i.transition&&a.removeEventListener(i.transition.event,mt(this,S1))})}),Xi(this,S1,a=>{var i;let o=mt(this,Ci);if(mt(this,zs).some(s=>s.id!==mt(this,Ci)&&s.transition&&s.transition.check(a)?(ac(this,Ci,s.id),!0):!1),mt(this,Ci)!==o){mt(this,Ei)[o].instance.teardown(),Object.keys(mt(this,Bl)).forEach(c=>{let d=mt(this,Bl)[c];d.unsubscribe(),d.unsubscribe=mt(this,C1).call(this,d.func,...d.args)}),mt(this,Zh).backendChanged(this);let s=mt(this,Ei)[mt(this,Ci)];if(s.instance.setup(),s.skipDispatchOnTransition)return;let l=a.constructor,u=new l(a.type,a);(i=a.target)==null||i.dispatchEvent(u)}}),Xi(this,C1,(a,i,o,s)=>mt(this,Ei)[mt(this,Ci)].instance[a](i,o,s)),Xi(this,Jh,(a,i,o,s)=>{let l=`${a}_${i}`,u=mt(this,C1).call(this,a,i,o,s);return mt(this,Bl)[l]={func:a,args:[i,o,s],unsubscribe:u},()=>{mt(this,Bl)[l].unsubscribe(),delete mt(this,Bl)[l]}}),!r||!r.backends||r.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);ac(this,Zh,new VW),ac(this,Ei,{}),ac(this,zs,[]),r.backends.forEach(a=>{let i=mt(this,lS).call(this,e,n,a);mt(this,Ei)[i.id]=i,mt(this,zs).push(i)}),ac(this,Ci,mt(this,zs)[0].id),ac(this,Bl,{})}};Ci=new WeakMap,Zh=new WeakMap,Ei=new WeakMap,zs=new WeakMap,Bl=new WeakMap,lS=new WeakMap,uS=new WeakMap,cS=new WeakMap,S1=new WeakMap,C1=new WeakMap,Jh=new WeakMap,l$.isSetUp=!1;var UW=l$,WW=(t,e,n)=>new UW(t,e,n),u$=(t,e)=>({event:t,check:e}),GW=u$("touchstart",t=>{let e=t;return e.touches!==null&&e.touches!==void 0}),HW=u$("mousedown",t=>t.type.indexOf("touch")===-1&&t.type.indexOf("mouse")!==-1);const dS=R.createContext({dragDropManager:void 0});function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function qW(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KW(t){var e=qW(t,"string");return ef(e)=="symbol"?e:String(e)}function XW(t,e,n){return e=KW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function d$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(n),!0).forEach(function(r){XW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ea(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var p$=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),pS=function(){return Math.random().toString(36).substring(7).split("").join(".")},E1={INIT:"@@redux/INIT"+pS(),REPLACE:"@@redux/REPLACE"+pS(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+pS()}};function YW(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function hS(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ea(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ea(1));return n(hS)(t,e)}if(typeof t!="function")throw new Error(Ea(2));var a=t,i=e,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(Ea(3));return i}function d(y){if(typeof y!="function")throw new Error(Ea(4));if(l)throw new Error(Ea(5));var v=!0;return u(),s.push(y),function(){if(v){if(l)throw new Error(Ea(6));v=!1,u();var b=s.indexOf(y);s.splice(b,1),o=null}}}function p(y){if(!YW(y))throw new Error(Ea(7));if(typeof y.type>"u")throw new Error(Ea(8));if(l)throw new Error(Ea(9));try{l=!0,i=a(i,y)}finally{l=!1}for(var v=o=s,b=0;b<v.length;b++){var x=v[b];x()}return y}function f(y){if(typeof y!="function")throw new Error(Ea(10));a=y,p({type:E1.REPLACE})}function m(){var y,v=d;return y={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ea(11));function x(){b.next&&b.next(c())}x();var w=v(x);return{unsubscribe:w}}},y[p$]=function(){return this},y}return p({type:E1.INIT}),r={dispatch:p,subscribe:d,getState:c,replaceReducer:f},r[p$]=m,r}function QW(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:E1.INIT});if(typeof r>"u")throw new Error(Ea(12));if(typeof n(void 0,{type:E1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ea(13))})}function ZW(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];typeof t[a]=="function"&&(n[a]=t[a])}var i=Object.keys(n),o;try{QW(n)}catch(s){o=s}return function(s,l){if(s===void 0&&(s={}),o)throw o;for(var u=!1,c={},d=0;d<i.length;d++){var p=i[d],f=n[p],m=s[p],y=f(m,l);if(typeof y>"u")throw l&&l.type,new Error(Ea(14));c[p]=y,u=u||y!==m}return u=u||i.length!==Object.keys(s).length,u?c:s}}function h$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,a){return function(){return r(a.apply(void 0,arguments))}})}function JW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var a=r.apply(void 0,arguments),i=function(){throw new Error(Ea(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map(function(l){return l(o)});return i=h$.apply(void 0,s)(a.dispatch),d$(d$({},a),{},{dispatch:i})}}}function Nt(t,e,...n){if(eG()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;r=new Error(e.replace(/%s/g,function(){return n[a++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function eG(){return typeof process<"u"&&!0}function tG(t,e,n){return e.split(".").reduce((r,a)=>r&&r[a]?r[a]:n||null,t)}function nG(t,e){return t.filter(n=>n!==e)}function f$(t){return typeof t=="object"}function rG(t,e){const n=new Map,r=i=>{n.set(i,n.has(i)?n.get(i)+1:1)};t.forEach(r),e.forEach(r);const a=[];return n.forEach((i,o)=>{i===1&&a.push(o)}),a}function aG(t,e){return t.filter(n=>e.indexOf(n)>-1)}const fS="dnd-core/INIT_COORDS",I1="dnd-core/BEGIN_DRAG",gS="dnd-core/PUBLISH_DRAG_SOURCE",T1="dnd-core/HOVER",N1="dnd-core/DROP",_1="dnd-core/END_DRAG";function g$(t,e){return{type:fS,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const iG={type:fS,payload:{clientOffset:null,sourceClientOffset:null}};function oG(t){return function(e=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:a,getSourceClientOffset:i}=n,o=t.getMonitor(),s=t.getRegistry();t.dispatch(g$(a)),sG(e,o,s);const l=cG(e,o);if(l==null){t.dispatch(iG);return}let u=null;if(a){if(!i)throw new Error("getSourceClientOffset must be defined");lG(i),u=i(l)}t.dispatch(g$(a,u));const c=s.getSource(l).beginDrag(o,l);if(c==null)return;uG(c),s.pinSource(l);const d=s.getSourceType(l);return{type:I1,payload:{itemType:d,item:c,sourceId:l,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!r}}}}function sG(t,e,n){Nt(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){Nt(n.getSource(r),"Expected sourceIds to be registered.")})}function lG(t){Nt(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function uG(t){Nt(f$(t),"Item must be an object.")}function cG(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function dG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){dG(t,a,n[a])})}return t}function hG(t){return function(e={}){const n=t.getMonitor(),r=t.getRegistry();fG(n),yG(n).forEach((a,i)=>{const o=gG(a,i,r,n),s={type:N1,payload:{dropResult:pG({},e,o)}};t.dispatch(s)})}}function fG(t){Nt(t.isDragging(),"Cannot call drop while not dragging."),Nt(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function gG(t,e,n,r){const a=n.getTarget(t);let i=a?a.drop(r,t):void 0;return mG(i),typeof i>"u"&&(i=e===0?{}:r.getDropResult()),i}function mG(t){Nt(typeof t>"u"||f$(t),"Drop result must either be an object or undefined.")}function yG(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function bG(t){return function(){const e=t.getMonitor(),n=t.getRegistry();vG(e);const r=e.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(e,r),n.unpinSource()),{type:_1}}}function vG(t){Nt(t.isDragging(),"Cannot call endDrag while not dragging.")}function mS(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function xG(t){return function(e,{clientOffset:n}={}){wG(e);const r=e.slice(0),a=t.getMonitor(),i=t.getRegistry(),o=a.getItemType();return SG(r,i,o),kG(r,a,i),CG(r,a,i),{type:T1,payload:{targetIds:r,clientOffset:n||null}}}}function wG(t){Nt(Array.isArray(t),"Expected targetIds to be an array.")}function kG(t,e,n){Nt(e.isDragging(),"Cannot call hover while not dragging."),Nt(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const a=t[r];Nt(t.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array.");const i=n.getTarget(a);Nt(i,"Expected targetIds to be registered.")}}function SG(t,e,n){for(let r=t.length-1;r>=0;r--){const a=t[r],i=e.getTargetType(a);mS(i,n)||t.splice(r,1)}}function CG(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function EG(t){return function(){if(t.getMonitor().isDragging())return{type:gS}}}function IG(t){return{beginDrag:oG(t),publishDragSource:EG(t),hover:xG(t),drop:hG(t),endDrag:bG(t)}}class TG{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(i){return(...o)=>{const s=i.apply(e,o);typeof s<"u"&&n(s)}}const a=IG(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=r(s),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function NG(t,e){return{x:t.x+e.x,y:t.y+e.y}}function m$(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _G(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:m$(NG(e,r),n)}function RG(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:m$(e,n)}const tf=[],yS=[];tf.__IS_NONE__=!0,yS.__IS_ALL__=!0;function $G(t,e){return t===tf?!1:t===yS||typeof e>"u"?!0:aG(e,t).length>0}class OG{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;Nt(typeof e=="function","listener must be a function."),Nt(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!$G(o.dirtyHandlerIds,r)||e()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(e){Nt(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const a=this.store.getState().dragOffset;a!==n&&(n=a,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Nt(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Nt(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),a=this.getItemType();return mS(r,a)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Nt(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),a=this.getItemType();return r!==a?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),i=this.getItemType();if(i&&!mS(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return _G(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return RG(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const y$=typeof global<"u"?global:self,b$=y$.MutationObserver||y$.WebKitMutationObserver;function v$(t){return function(){const e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}function MG(t){let e=1;const n=new b$(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const PG=typeof b$=="function"?MG:v$;class AG{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,a=e.length-this.index;r<a;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=PG(this.flush),this.requestErrorThrow=v$(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class DG{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class LG{create(e){const n=this.freeTasks,r=n.length?n.pop():new DG(this.onError,a=>n[n.length]=a);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const x$=new AG,FG=new LG(x$.registerPendingError);function BG(t){x$.enqueueTask(FG.create(t))}const bS="dnd-core/ADD_SOURCE",vS="dnd-core/ADD_TARGET",xS="dnd-core/REMOVE_SOURCE",R1="dnd-core/REMOVE_TARGET";function zG(t){return{type:bS,payload:{sourceId:t}}}function jG(t){return{type:vS,payload:{targetId:t}}}function VG(t){return{type:xS,payload:{sourceId:t}}}function UG(t){return{type:R1,payload:{targetId:t}}}function WG(t){Nt(typeof t.canDrag=="function","Expected canDrag to be a function."),Nt(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Nt(typeof t.endDrag=="function","Expected endDrag to be a function.")}function GG(t){Nt(typeof t.canDrop=="function","Expected canDrop to be a function."),Nt(typeof t.hover=="function","Expected hover to be a function."),Nt(typeof t.drop=="function","Expected beginDrag to be a function.")}function wS(t,e){if(e&&Array.isArray(t)){t.forEach(n=>wS(n,!1));return}Nt(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Yi;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Yi||(Yi={}));let HG=0;function qG(){return HG++}function KG(t){const e=qG().toString();switch(t){case Yi.SOURCE:return`S${e}`;case Yi.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function w$(t){switch(t[0]){case"S":return Yi.SOURCE;case"T":return Yi.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function k$(t,e){const n=t.entries();let r=!1;do{const{done:a,value:[,i]}=n.next();if(i===e)return!0;r=!!a}while(!r);return!1}class XG{addSource(e,n){wS(e),WG(n);const r=this.addHandler(Yi.SOURCE,e,n);return this.store.dispatch(zG(r)),r}addTarget(e,n){wS(e,!0),GG(n);const r=this.addHandler(Yi.TARGET,e,n);return this.store.dispatch(jG(r)),r}containsHandler(e){return k$(this.dragSources,e)||k$(this.dropTargets,e)}getSource(e,n=!1){return Nt(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Nt(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Nt(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Nt(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return w$(e)===Yi.SOURCE}isTargetId(e){return w$(e)===Yi.TARGET}removeSource(e){Nt(this.getSource(e),"Expected an existing source."),this.store.dispatch(VG(e)),BG(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Nt(this.getTarget(e),"Expected an existing target."),this.store.dispatch(UG(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Nt(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Nt(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const a=KG(e);return this.types.set(a,n),e===Yi.SOURCE?this.dragSources.set(a,r):e===Yi.TARGET&&this.dropTargets.set(a,r),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const YG=(t,e)=>t===e;function QG(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function ZG(t,e,n=YG){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function JG(t=tf,e){switch(e.type){case T1:break;case bS:case vS:case R1:case xS:return tf;case I1:case gS:case _1:case N1:default:return yS}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,a=rG(n,r);if(!(a.length>0||!ZG(n,r)))return tf;const i=r[r.length-1],o=n[n.length-1];return i!==o&&(i&&a.push(i),o&&a.push(o)),a}function eH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){eH(t,a,n[a])})}return t}const S$={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function nH(t=S$,e){const{payload:n}=e;switch(e.type){case fS:case I1:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case T1:return QG(t.clientOffset,n.clientOffset)?t:tH({},t,{clientOffset:n.clientOffset});case _1:case N1:return S$;default:return t}}function rH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){rH(t,a,n[a])})}return t}const aH={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function iH(t=aH,e){const{payload:n}=e;switch(e.type){case I1:return Bd({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case gS:return Bd({},t,{isSourcePublic:!0});case T1:return Bd({},t,{targetIds:n.targetIds});case R1:return t.targetIds.indexOf(n.targetId)===-1?t:Bd({},t,{targetIds:nG(t.targetIds,n.targetId)});case N1:return Bd({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case _1:return Bd({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function oH(t=0,e){switch(e.type){case bS:case vS:return t+1;case xS:case R1:return t-1;default:return t}}function sH(t=0){return t+1}function lH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){lH(t,a,n[a])})}return t}function cH(t={},e){return{dirtyHandlerIds:JG(t.dirtyHandlerIds,{type:e.type,payload:uH({},e.payload,{prevTargetIds:tG(t,"dragOperation.targetIds",[])})}),dragOffset:nH(t.dragOffset,e),refCount:oH(t.refCount,e),dragOperation:iH(t.dragOperation,e),stateId:sH(t.stateId)}}function dH(t,e=void 0,n={},r=!1){const a=pH(r),i=new OG(a,new XG(a)),o=new TG(a,i),s=t(o,e,n);return o.receiveBackend(s),o}function pH(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return hS(cH,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function hH(t,e){if(t==null)return{};var n=fH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}let C$=0;const $1=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var gH=R.memo(function(t){var{children:e}=t,n=hH(t,["children"]);const[r,a]=mH(n);return R.useEffect(()=>{if(a){const i=E$();return++C$,()=>{--C$===0&&(i[$1]=null)}}},[]),re.jsx(dS.Provider,{value:r,children:e})});function mH(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=yH(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function yH(t,e=E$(),n,r){const a=e;return a[$1]||(a[$1]={dragDropManager:dH(t,e,n,r)}),a[$1]}function E$(){return typeof global<"u"?global:window}const bH=R.memo(function({connect:t,src:e}){return R.useEffect(()=>{if(typeof Image>"u")return;let n=!1;const r=new Image;return r.src=e,r.onload=()=>{t(r),n=!0},()=>{n&&t(null)}}),null});var vH=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!==0;){var o=i[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const xH=Ki(vH),oc=typeof window<"u"?R.useLayoutEffect:R.useEffect;function I$(t,e,n){const[r,a]=R.useState(()=>e(t)),i=R.useCallback(()=>{const o=e(t);xH(r,o)||(a(o),n&&n())},[r,t,n]);return oc(i),[r,i]}function wH(t,e,n){const[r,a]=I$(t,e,n);return oc(function(){const i=t.getHandlerId();if(i!=null)return t.subscribeToStateChange(a,{handlerIds:[i]})},[t,a]),r}function T$(t,e,n){return wH(e,t||(()=>({})),()=>n.reconnect())}function N$(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),R.useMemo(()=>typeof t=="function"?t():t,n)}function kH(t){return R.useMemo(()=>t.hooks.dragSource(),[t])}function SH(t){return R.useMemo(()=>t.hooks.dragPreview(),[t])}let kS=!1,SS=!1;class CH{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Nt(!kS,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return kS=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{kS=!1}}isDragging(){if(!this.sourceId)return!1;Nt(!SS,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return SS=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{SS=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let CS=!1;class EH{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Nt(!CS,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return CS=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{CS=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function IH(t,e,n){const r=n.getRegistry(),a=r.addTarget(t,e);return[a,()=>r.removeTarget(a)]}function TH(t,e,n){const r=n.getRegistry(),a=r.addSource(t,e);return[a,()=>r.removeSource(a)]}function ES(t,e,n,r){let a=n?n.call(r,t,e):void 0;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<i.length;l++){const u=i[l];if(!s(u))return!1;const c=t[u],d=e[u];if(a=n?n.call(r,c,d,u):void 0,a===!1||a===void 0&&c!==d)return!1}return!0}function IS(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function NH(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function _H(t){return(e=null,n=null)=>{if(!R.isValidElement(e)){const a=e;return t(a,n),a}const r=e;return NH(r),RH(r,n?a=>t(a,n):t)}}function _$(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const a=_H(r);e[n]=()=>a}}),e}function R$(t,e){typeof t=="function"?t(e):t.current=e}function RH(t,e){const n=t.ref;return Nt(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?R.cloneElement(t,{ref:r=>{R$(n,r),R$(e,r)}}):R.cloneElement(t,{ref:e})}class $H{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ES(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ES(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=_$({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,IS(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,IS(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class OH{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ES(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=_$({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,IS(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function sc(){const{dragDropManager:t}=R.useContext(dS);return Nt(t!=null,"Expected drag drop context"),t}function MH(t,e){const n=sc(),r=R.useMemo(()=>new $H(n.getBackend()),[n]);return oc(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),oc(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function PH(){const t=sc();return R.useMemo(()=>new CH(t),[t])}class AH{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,a=this.monitor,{isDragging:i}=r;return i?i(a):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:a}=e;a&&a(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function DH(t,e,n){const r=R.useMemo(()=>new AH(t,e,n),[e,n]);return R.useEffect(()=>{r.spec=t},[t]),r}function LH(t){return R.useMemo(()=>{const e=t.type;return Nt(e!=null,"spec.type must be defined"),e},[t])}function FH(t,e,n){const r=sc(),a=DH(t,e,n),i=LH(t);oc(function(){if(i!=null){const[o,s]=TH(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s}},[r,e,n,a,i])}function BH(t,e){const n=N$(t,e);Nt(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=PH(),a=MH(n.options,n.previewOptions);return FH(n,r,a),[T$(n.collect,r,a),kH(a),SH(a)]}function zH(t){const e=sc().getMonitor(),[n,r]=I$(e,t);return R.useEffect(()=>e.subscribeToOffsetChange(r)),R.useEffect(()=>e.subscribeToStateChange(r)),n}function jH(t){return R.useMemo(()=>t.hooks.dropTarget(),[t])}function VH(t){const e=sc(),n=R.useMemo(()=>new OH(e.getBackend()),[e]);return oc(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function UH(){const t=sc();return R.useMemo(()=>new EH(t),[t])}function WH(t){const{accept:e}=t;return R.useMemo(()=>(Nt(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class GH{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function HH(t,e){const n=R.useMemo(()=>new GH(t,e),[e]);return R.useEffect(()=>{n.spec=t},[t]),n}function qH(t,e,n){const r=sc(),a=HH(t,e),i=WH(t);oc(function(){const[o,s]=IH(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s},[r,e,a,n,i.map(o=>o.toString()).join("|")])}function KH(t,e){const n=N$(t,e),r=UH(),a=VH(n.options);return qH(n,r,a),[T$(n.collect,r,a),jH(a)]}var $$={exports:{}},Ii={},O$={exports:{}},M$={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(F,Y){var Q=F.length;F.push(Y);e:for(;0<Q;){var ne=Q-1>>>1,se=F[ne];if(0<a(se,Y))F[ne]=Y,F[Q]=se,Q=ne;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],Q=F.pop();if(Q!==Y){F[0]=Q;e:for(var ne=0,se=F.length,pe=se>>>1;ne<pe;){var de=2*(ne+1)-1,ie=F[de],xe=de+1,q=F[xe];if(0>a(ie,Q))xe<se&&0>a(q,ie)?(F[ne]=q,F[xe]=Q,ne=xe):(F[ne]=ie,F[de]=Q,ne=de);else if(xe<se&&0>a(q,Q))F[ne]=q,F[xe]=Q,ne=xe;else break e}}return Y}function a(F,Y){var Q=F.sortIndex-Y.sortIndex;return Q!==0?Q:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,p=3,f=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=F)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function S(F){if(y=!1,w(F),!m)if(n(l)!==null)m=!0,Z(C);else{var Y=n(u);Y!==null&&H(S,Y.startTime-F)}}function C(F,Y){m=!1,y&&(y=!1,b(N),N=-1),f=!0;var Q=p;try{for(w(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||F&&!L());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var se=ne(d.expirationTime<=Y);Y=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),w(Y)}else r(l);d=n(l)}if(d!==null)var pe=!0;else{var de=n(u);de!==null&&H(S,de.startTime-Y),pe=!1}return pe}finally{d=null,p=Q,f=!1}}var E=!1,_=null,N=-1,M=5,P=-1;function L(){return!(t.unstable_now()-P<M)}function j(){if(_!==null){var F=t.unstable_now();P=F;var Y=!0;try{Y=_(!0,F)}finally{Y?B():(E=!1,_=null)}}else E=!1}var B;if(typeof x=="function")B=function(){x(j)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,X=K.port2;K.port1.onmessage=j,B=function(){X.postMessage(null)}}else B=function(){v(j,0)};function Z(F){_=F,E||(E=!0,B())}function H(F,Y){N=v(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,Z(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Q=p;p=Y;try{return F()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=p;p=F;try{return Y()}finally{p=Q}},t.unstable_scheduleCallback=function(F,Y,Q){var ne=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Q+se,F={id:c++,callback:Y,priorityLevel:F,startTime:Q,expirationTime:se,sortIndex:-1},Q>ne?(F.sortIndex=Q,e(u,F),n(l)===null&&F===n(u)&&(y?(b(N),N=-1):y=!0,H(S,Q-ne))):(F.sortIndex=se,e(l,F),m||f||(m=!0,Z(C))),F},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(F){var Y=p;return function(){var Q=p;p=Y;try{return F.apply(this,arguments)}finally{p=Q}}}})(M$),O$.exports=M$;var nf=O$.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var P$=R,Ti=nf;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$=new Set,rf={};function lc(t,e){zd(t,e),zd(t+"Capture",e)}function zd(t,e){for(rf[t]=e,t=0;t<e.length;t++)A$.add(e[t])}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),TS=Object.prototype.hasOwnProperty,XH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D$={},L$={};function YH(t){return TS.call(L$,t)?!0:TS.call(D$,t)?!1:XH.test(t)?L$[t]=!0:(D$[t]=!0,!1)}function QH(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZH(t,e,n,r){if(e===null||typeof e>"u"||QH(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qa(t,e,n,r,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var sa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sa[t]=new qa(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sa[e]=new qa(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){sa[t]=new qa(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sa[t]=new qa(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sa[t]=new qa(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){sa[t]=new qa(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){sa[t]=new qa(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){sa[t]=new qa(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){sa[t]=new qa(t,5,!1,t.toLowerCase(),null,!1,!1)});var NS=/[\-:]([a-z])/g;function _S(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(NS,_S);sa[e]=new qa(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(NS,_S);sa[e]=new qa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(NS,_S);sa[e]=new qa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){sa[t]=new qa(t,1,!1,t.toLowerCase(),null,!1,!1)}),sa.xlinkHref=new qa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){sa[t]=new qa(t,1,!1,t.toLowerCase(),null,!0,!0)});function RS(t,e,n,r){var a=sa.hasOwnProperty(e)?sa[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZH(e,n,a,r)&&(n=null),r||a===null?YH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vs=P$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O1=Symbol.for("react.element"),jd=Symbol.for("react.portal"),Vd=Symbol.for("react.fragment"),$S=Symbol.for("react.strict_mode"),OS=Symbol.for("react.profiler"),F$=Symbol.for("react.provider"),B$=Symbol.for("react.context"),MS=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),AS=Symbol.for("react.suspense_list"),DS=Symbol.for("react.memo"),zl=Symbol.for("react.lazy"),z$=Symbol.for("react.offscreen"),j$=Symbol.iterator;function af(t){return t===null||typeof t!="object"?null:(t=j$&&t[j$]||t["@@iterator"],typeof t=="function"?t:null)}var Jn=Object.assign,LS;function of(t){if(LS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);LS=e&&e[1]||""}return`
`+LS+t}var FS=!1;function BS(t,e){if(!t||FS)return"";FS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{FS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?of(t):""}function JH(t){switch(t.tag){case 5:return of(t.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return t=BS(t.type,!1),t;case 11:return t=BS(t.type.render,!1),t;case 1:return t=BS(t.type,!0),t;default:return""}}function zS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vd:return"Fragment";case jd:return"Portal";case OS:return"Profiler";case $S:return"StrictMode";case PS:return"Suspense";case AS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case B$:return(t.displayName||"Context")+".Consumer";case F$:return(t._context.displayName||"Context")+".Provider";case MS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case DS:return e=t.displayName||null,e!==null?e:zS(t.type)||"Memo";case zl:e=t._payload,t=t._init;try{return zS(t(e))}catch{}}return null}function eq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zS(e);case 8:return e===$S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function V$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tq(t){var e=V$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function M1(t){t._valueTracker||(t._valueTracker=tq(t))}function U$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=V$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function P1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jS(t,e){var n=e.checked;return Jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function W$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G$(t,e){e=e.checked,e!=null&&RS(t,"checked",e,!1)}function VS(t,e){G$(t,e);var n=jl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?US(t,e.type,n):e.hasOwnProperty("defaultValue")&&US(t,e.type,jl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function H$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function US(t,e,n){(e!=="number"||P1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sf=Array.isArray;function Ud(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jl(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function WS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return Jn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function q$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(sf(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jl(n)}}function K$(t,e){var n=jl(e.value),r=jl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function X$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Y$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function GS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Y$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var A1,Q$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(A1=A1||document.createElement("div"),A1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=A1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nq=["Webkit","ms","Moz","O"];Object.keys(uf).forEach(function(t){nq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uf[e]=uf[t]})});function Z$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uf.hasOwnProperty(t)&&uf[t]?(""+e).trim():e+"px"}function J$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Z$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var rq=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HS(t,e){if(e){if(rq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function qS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KS=null;function XS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var YS=null,Wd=null,Gd=null;function eO(t){if(t=$f(t)){if(typeof YS!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=ay(e),YS(t.stateNode,t.type,e))}}function tO(t){Wd?Gd?Gd.push(t):Gd=[t]:Wd=t}function nO(){if(Wd){var t=Wd,e=Gd;if(Gd=Wd=null,eO(t),e)for(t=0;t<e.length;t++)eO(e[t])}}function rO(t,e){return t(e)}function aO(){}var QS=!1;function iO(t,e,n){if(QS)return t(e,n);QS=!0;try{return rO(t,e,n)}finally{QS=!1,(Wd!==null||Gd!==null)&&(aO(),nO())}}function cf(t,e){var n=t.stateNode;if(n===null)return null;var r=ay(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var ZS=!1;if(js)try{var df={};Object.defineProperty(df,"passive",{get:function(){ZS=!0}}),window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{ZS=!1}function aq(t,e,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var pf=!1,D1=null,L1=!1,JS=null,iq={onError:function(t){pf=!0,D1=t}};function oq(t,e,n,r,a,i,o,s,l){pf=!1,D1=null,aq.apply(iq,arguments)}function sq(t,e,n,r,a,i,o,s,l){if(oq.apply(this,arguments),pf){if(pf){var u=D1;pf=!1,D1=null}else throw Error(Te(198));L1||(L1=!0,JS=u)}}function uc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sO(t){if(uc(t)!==t)throw Error(Te(188))}function lq(t){var e=t.alternate;if(!e){if(e=uc(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return sO(a),t;if(i===r)return sO(a),e;i=i.sibling}throw Error(Te(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(Te(189))}}if(n.alternate!==r)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function lO(t){return t=lq(t),t!==null?uO(t):null}function uO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uO(t);if(e!==null)return e;t=t.sibling}return null}var cO=Ti.unstable_scheduleCallback,dO=Ti.unstable_cancelCallback,uq=Ti.unstable_shouldYield,cq=Ti.unstable_requestPaint,mr=Ti.unstable_now,dq=Ti.unstable_getCurrentPriorityLevel,eC=Ti.unstable_ImmediatePriority,pO=Ti.unstable_UserBlockingPriority,F1=Ti.unstable_NormalPriority,pq=Ti.unstable_LowPriority,hO=Ti.unstable_IdlePriority,B1=null,ss=null;function hq(t){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(B1,t,void 0,(t.current.flags&128)===128)}catch{}}var Ro=Math.clz32?Math.clz32:mq,fq=Math.log,gq=Math.LN2;function mq(t){return t>>>=0,t===0?32:31-(fq(t)/gq|0)|0}var z1=64,j1=4194304;function hf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function V1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=hf(s):(i&=o,i!==0&&(r=hf(i)))}else o=n&~a,o!==0?r=hf(o):i!==0&&(r=hf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ro(e),a=1<<n,r|=t[n],e&=~a;return r}function yq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ro(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=yq(s,e)):l<=e&&(t.expiredLanes|=s),i&=~s}}function tC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fO(){var t=z1;return z1<<=1,!(z1&4194240)&&(z1=64),t}function nC(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ff(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ro(e),t[e]=n}function vq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Ro(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function rC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ro(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var yn=0;function gO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mO,aC,yO,bO,vO,iC=!1,U1=[],Vl=null,Ul=null,Wl=null,gf=new Map,mf=new Map,Gl=[],xq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xO(t,e){switch(t){case"focusin":case"focusout":Vl=null;break;case"dragenter":case"dragleave":Ul=null;break;case"mouseover":case"mouseout":Wl=null;break;case"pointerover":case"pointerout":gf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mf.delete(e.pointerId)}}function yf(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=$f(e),e!==null&&aC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function wq(t,e,n,r,a){switch(e){case"focusin":return Vl=yf(Vl,t,e,n,r,a),!0;case"dragenter":return Ul=yf(Ul,t,e,n,r,a),!0;case"mouseover":return Wl=yf(Wl,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return gf.set(i,yf(gf.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,mf.set(i,yf(mf.get(i)||null,t,e,n,r,a)),!0}return!1}function wO(t){var e=cc(t.target);if(e!==null){var n=uc(e);if(n!==null){if(e=n.tag,e===13){if(e=oO(n),e!==null){t.blockedOn=e,vO(t.priority,function(){yO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function W1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);KS=r,n.target.dispatchEvent(r),KS=null}else return e=$f(n),e!==null&&aC(e),t.blockedOn=n,!1;e.shift()}return!0}function kO(t,e,n){W1(t)&&n.delete(e)}function kq(){iC=!1,Vl!==null&&W1(Vl)&&(Vl=null),Ul!==null&&W1(Ul)&&(Ul=null),Wl!==null&&W1(Wl)&&(Wl=null),gf.forEach(kO),mf.forEach(kO)}function bf(t,e){t.blockedOn===e&&(t.blockedOn=null,iC||(iC=!0,Ti.unstable_scheduleCallback(Ti.unstable_NormalPriority,kq)))}function vf(t){function e(a){return bf(a,t)}if(0<U1.length){bf(U1[0],t);for(var n=1;n<U1.length;n++){var r=U1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vl!==null&&bf(Vl,t),Ul!==null&&bf(Ul,t),Wl!==null&&bf(Wl,t),gf.forEach(e),mf.forEach(e),n=0;n<Gl.length;n++)r=Gl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gl.length&&(n=Gl[0],n.blockedOn===null);)wO(n),n.blockedOn===null&&Gl.shift()}var Hd=Vs.ReactCurrentBatchConfig,G1=!0;function Sq(t,e,n,r){var a=yn,i=Hd.transition;Hd.transition=null;try{yn=1,oC(t,e,n,r)}finally{yn=a,Hd.transition=i}}function Cq(t,e,n,r){var a=yn,i=Hd.transition;Hd.transition=null;try{yn=4,oC(t,e,n,r)}finally{yn=a,Hd.transition=i}}function oC(t,e,n,r){if(G1){var a=sC(t,e,n,r);if(a===null)CC(t,e,r,H1,n),xO(t,r);else if(wq(a,t,e,n,r))r.stopPropagation();else if(xO(t,r),e&4&&-1<xq.indexOf(t)){for(;a!==null;){var i=$f(a);if(i!==null&&mO(i),i=sC(t,e,n,r),i===null&&CC(t,e,r,H1,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else CC(t,e,r,null,n)}}var H1=null;function sC(t,e,n,r){if(H1=null,t=XS(r),t=cc(t),t!==null)if(e=uc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return H1=t,null}function SO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dq()){case eC:return 1;case pO:return 4;case F1:case pq:return 16;case hO:return 536870912;default:return 16}default:return 16}}var Hl=null,lC=null,q1=null;function CO(){if(q1)return q1;var t,e=lC,n=e.length,r,a="value"in Hl?Hl.value:Hl.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[i-r];r++);return q1=a.slice(t,1<r?1-r:void 0)}function K1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function X1(){return!0}function EO(){return!1}function Ni(t){function e(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?X1:EO,this.isPropagationStopped=EO,this}return Jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=X1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=X1)},persist:function(){},isPersistent:X1}),e}var qd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uC=Ni(qd),xf=Jn({},qd,{view:0,detail:0}),Eq=Ni(xf),cC,dC,wf,Y1=Jn({},xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wf&&(wf&&t.type==="mousemove"?(cC=t.screenX-wf.screenX,dC=t.screenY-wf.screenY):dC=cC=0,wf=t),cC)},movementY:function(t){return"movementY"in t?t.movementY:dC}}),IO=Ni(Y1),Iq=Jn({},Y1,{dataTransfer:0}),Tq=Ni(Iq),Nq=Jn({},xf,{relatedTarget:0}),pC=Ni(Nq),_q=Jn({},qd,{animationName:0,elapsedTime:0,pseudoElement:0}),Rq=Ni(_q),$q=Jn({},qd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Oq=Ni($q),Mq=Jn({},qd,{data:0}),TO=Ni(Mq),Pq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Aq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dq[t])?!!e[t]:!1}function hC(){return Lq}var Fq=Jn({},xf,{key:function(t){if(t.key){var e=Pq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=K1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Aq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hC,charCode:function(t){return t.type==="keypress"?K1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?K1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bq=Ni(Fq),zq=Jn({},Y1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NO=Ni(zq),jq=Jn({},xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hC}),Vq=Ni(jq),Uq=Jn({},qd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wq=Ni(Uq),Gq=Jn({},Y1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hq=Ni(Gq),qq=[9,13,27,32],fC=js&&"CompositionEvent"in window,kf=null;js&&"documentMode"in document&&(kf=document.documentMode);var Kq=js&&"TextEvent"in window&&!kf,_O=js&&(!fC||kf&&8<kf&&11>=kf),RO=" ",$O=!1;function OO(t,e){switch(t){case"keyup":return qq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kd=!1;function Xq(t,e){switch(t){case"compositionend":return MO(e);case"keypress":return e.which!==32?null:($O=!0,RO);case"textInput":return t=e.data,t===RO&&$O?null:t;default:return null}}function Yq(t,e){if(Kd)return t==="compositionend"||!fC&&OO(t,e)?(t=CO(),q1=lC=Hl=null,Kd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _O&&e.locale!=="ko"?null:e.data;default:return null}}var Qq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qq[t.type]:e==="textarea"}function AO(t,e,n,r){tO(r),e=ty(e,"onChange"),0<e.length&&(n=new uC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Sf=null,Cf=null;function Zq(t){JO(t,0)}function Q1(t){var e=Jd(t);if(U$(e))return t}function Jq(t,e){if(t==="change")return e}var DO=!1;if(js){var gC;if(js){var mC="oninput"in document;if(!mC){var LO=document.createElement("div");LO.setAttribute("oninput","return;"),mC=typeof LO.oninput=="function"}gC=mC}else gC=!1;DO=gC&&(!document.documentMode||9<document.documentMode)}function FO(){Sf&&(Sf.detachEvent("onpropertychange",BO),Cf=Sf=null)}function BO(t){if(t.propertyName==="value"&&Q1(Cf)){var e=[];AO(e,Cf,t,XS(t)),iO(Zq,e)}}function eK(t,e,n){t==="focusin"?(FO(),Sf=e,Cf=n,Sf.attachEvent("onpropertychange",BO)):t==="focusout"&&FO()}function tK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Q1(Cf)}function nK(t,e){if(t==="click")return Q1(e)}function rK(t,e){if(t==="input"||t==="change")return Q1(e)}function aK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $o=typeof Object.is=="function"?Object.is:aK;function Ef(t,e){if($o(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!TS.call(e,a)||!$o(t[a],e[a]))return!1}return!0}function zO(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jO(t,e){var n=zO(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zO(n)}}function VO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UO(){for(var t=window,e=P1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=P1(t.document)}return e}function yC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iK(t){var e=UO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&VO(n.ownerDocument.documentElement,n)){if(r!==null&&yC(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=jO(n,i);var o=jO(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oK=js&&"documentMode"in document&&11>=document.documentMode,Xd=null,bC=null,If=null,vC=!1;function WO(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vC||Xd==null||Xd!==P1(r)||(r=Xd,"selectionStart"in r&&yC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),If&&Ef(If,r)||(If=r,r=ty(bC,"onSelect"),0<r.length&&(e=new uC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xd)))}function Z1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yd={animationend:Z1("Animation","AnimationEnd"),animationiteration:Z1("Animation","AnimationIteration"),animationstart:Z1("Animation","AnimationStart"),transitionend:Z1("Transition","TransitionEnd")},xC={},GO={};js&&(GO=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function J1(t){if(xC[t])return xC[t];if(!Yd[t])return t;var e=Yd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in GO)return xC[t]=e[n];return t}var HO=J1("animationend"),qO=J1("animationiteration"),KO=J1("animationstart"),XO=J1("transitionend"),YO=new Map,QO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ql(t,e){YO.set(t,e),lc(e,[t])}for(var wC=0;wC<QO.length;wC++){var kC=QO[wC],sK=kC.toLowerCase(),lK=kC[0].toUpperCase()+kC.slice(1);ql(sK,"on"+lK)}ql(HO,"onAnimationEnd"),ql(qO,"onAnimationIteration"),ql(KO,"onAnimationStart"),ql("dblclick","onDoubleClick"),ql("focusin","onFocus"),ql("focusout","onBlur"),ql(XO,"onTransitionEnd"),zd("onMouseEnter",["mouseout","mouseover"]),zd("onMouseLeave",["mouseout","mouseover"]),zd("onPointerEnter",["pointerout","pointerover"]),zd("onPointerLeave",["pointerout","pointerover"]),lc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lc("onBeforeInput",["compositionend","keypress","textInput","paste"]),lc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uK=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tf));function ZO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sq(r,e,void 0,t),t.currentTarget=null}function JO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;ZO(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;ZO(a,s,u),i=l}}}if(L1)throw t=JS,L1=!1,JS=null,t}function Fn(t,e){var n=e[RC];n===void 0&&(n=e[RC]=new Set);var r=t+"__bubble";n.has(r)||(eM(e,t,2,!1),n.add(r))}function SC(t,e,n){var r=0;e&&(r|=4),eM(n,t,r,e)}var ey="_reactListening"+Math.random().toString(36).slice(2);function Nf(t){if(!t[ey]){t[ey]=!0,A$.forEach(function(n){n!=="selectionchange"&&(uK.has(n)||SC(n,!1,t),SC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ey]||(e[ey]=!0,SC("selectionchange",!1,e))}}function eM(t,e,n,r){switch(SO(e)){case 1:var a=Sq;break;case 4:a=Cq;break;default:a=oC}n=a.bind(null,e,n,t),a=void 0,!ZS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function CC(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=cc(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}iO(function(){var u=i,c=XS(n),d=[];e:{var p=YO.get(t);if(p!==void 0){var f=uC,m=t;switch(t){case"keypress":if(K1(n)===0)break e;case"keydown":case"keyup":f=Bq;break;case"focusin":m="focus",f=pC;break;case"focusout":m="blur",f=pC;break;case"beforeblur":case"afterblur":f=pC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=IO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Tq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Vq;break;case HO:case qO:case KO:f=Rq;break;case XO:f=Wq;break;case"scroll":f=Eq;break;case"wheel":f=Hq;break;case"copy":case"cut":case"paste":f=Oq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=NO}var y=(e&4)!==0,v=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var x=u,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=cf(x,b),S!=null&&y.push(_f(x,S,w)))),v)break;x=x.return}0<y.length&&(p=new f(p,m,null,n,c),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==KS&&(m=n.relatedTarget||n.fromElement)&&(cc(m)||m[Us]))break e;if((f||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=u,m=m?cc(m):null,m!==null&&(v=uc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(y=IO,S="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=NO,S="onPointerLeave",b="onPointerEnter",x="pointer"),v=f==null?p:Jd(f),w=m==null?p:Jd(m),p=new y(S,x+"leave",f,n,c),p.target=v,p.relatedTarget=w,S=null,cc(c)===u&&(y=new y(b,x+"enter",m,n,c),y.target=w,y.relatedTarget=v,S=y),v=S,f&&m)t:{for(y=f,b=m,x=0,w=y;w;w=Qd(w))x++;for(w=0,S=b;S;S=Qd(S))w++;for(;0<x-w;)y=Qd(y),x--;for(;0<w-x;)b=Qd(b),w--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=Qd(y),b=Qd(b)}y=null}else y=null;f!==null&&tM(d,p,f,y,!1),m!==null&&v!==null&&tM(d,v,m,y,!0)}}e:{if(p=u?Jd(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var C=Jq;else if(PO(p))if(DO)C=rK;else{C=tK;var E=eK}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=nK);if(C&&(C=C(t,u))){AO(d,C,n,c);break e}E&&E(t,p,u),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&US(p,"number",p.value)}switch(E=u?Jd(u):window,t){case"focusin":(PO(E)||E.contentEditable==="true")&&(Xd=E,bC=u,If=null);break;case"focusout":If=bC=Xd=null;break;case"mousedown":vC=!0;break;case"contextmenu":case"mouseup":case"dragend":vC=!1,WO(d,n,c);break;case"selectionchange":if(oK)break;case"keydown":case"keyup":WO(d,n,c)}var _;if(fC)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Kd?OO(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(_O&&n.locale!=="ko"&&(Kd||N!=="onCompositionStart"?N==="onCompositionEnd"&&Kd&&(_=CO()):(Hl=c,lC="value"in Hl?Hl.value:Hl.textContent,Kd=!0)),E=ty(u,N),0<E.length&&(N=new TO(N,t,null,n,c),d.push({event:N,listeners:E}),_?N.data=_:(_=MO(n),_!==null&&(N.data=_)))),(_=Kq?Xq(t,n):Yq(t,n))&&(u=ty(u,"onBeforeInput"),0<u.length&&(c=new TO("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=_))}JO(d,e)})}function _f(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ty(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=cf(t,n),i!=null&&r.unshift(_f(t,i,a)),i=cf(t,e),i!=null&&r.push(_f(t,i,a))),t=t.return}return r}function Qd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tM(t,e,n,r,a){for(var i=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=cf(n,i),l!=null&&o.unshift(_f(n,l,s))):a||(l=cf(n,i),l!=null&&o.push(_f(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cK=/\r\n?/g,dK=/\u0000|\uFFFD/g;function nM(t){return(typeof t=="string"?t:""+t).replace(cK,`
`).replace(dK,"")}function ny(t,e,n){if(e=nM(e),nM(t)!==e&&n)throw Error(Te(425))}function ry(){}var EC=null,IC=null;function TC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var NC=typeof setTimeout=="function"?setTimeout:void 0,pK=typeof clearTimeout=="function"?clearTimeout:void 0,rM=typeof Promise=="function"?Promise:void 0,hK=typeof queueMicrotask=="function"?queueMicrotask:typeof rM<"u"?function(t){return rM.resolve(null).then(t).catch(fK)}:NC;function fK(t){setTimeout(function(){throw t})}function _C(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),vf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);vf(e)}function Kl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zd=Math.random().toString(36).slice(2),ls="__reactFiber$"+Zd,Rf="__reactProps$"+Zd,Us="__reactContainer$"+Zd,RC="__reactEvents$"+Zd,gK="__reactListeners$"+Zd,mK="__reactHandles$"+Zd;function cc(t){var e=t[ls];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Us]||n[ls]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aM(t);t!==null;){if(n=t[ls])return n;t=aM(t)}return e}t=n,n=t.parentNode}return null}function $f(t){return t=t[ls]||t[Us],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function ay(t){return t[Rf]||null}var $C=[],ep=-1;function Xl(t){return{current:t}}function Bn(t){0>ep||(t.current=$C[ep],$C[ep]=null,ep--)}function On(t,e){ep++,$C[ep]=t.current,t.current=e}var Yl={},Ia=Xl(Yl),ii=Xl(!1),dc=Yl;function tp(t,e){var n=t.type.contextTypes;if(!n)return Yl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function oi(t){return t=t.childContextTypes,t!=null}function iy(){Bn(ii),Bn(Ia)}function iM(t,e,n){if(Ia.current!==Yl)throw Error(Te(168));On(Ia,e),On(ii,n)}function oM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(Te(108,eq(t)||"Unknown",a));return Jn({},n,r)}function oy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yl,dc=Ia.current,On(Ia,t),On(ii,ii.current),!0}function sM(t,e,n){var r=t.stateNode;if(!r)throw Error(Te(169));n?(t=oM(t,e,dc),r.__reactInternalMemoizedMergedChildContext=t,Bn(ii),Bn(Ia),On(Ia,t)):Bn(ii),On(ii,n)}var Ws=null,sy=!1,OC=!1;function lM(t){Ws===null?Ws=[t]:Ws.push(t)}function yK(t){sy=!0,lM(t)}function Ql(){if(!OC&&Ws!==null){OC=!0;var t=0,e=yn;try{var n=Ws;for(yn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ws=null,sy=!1}catch(a){throw Ws!==null&&(Ws=Ws.slice(t+1)),cO(eC,Ql),a}finally{yn=e,OC=!1}}return null}var np=[],rp=0,ly=null,uy=0,Qi=[],Zi=0,pc=null,Gs=1,Hs="";function hc(t,e){np[rp++]=uy,np[rp++]=ly,ly=t,uy=e}function uM(t,e,n){Qi[Zi++]=Gs,Qi[Zi++]=Hs,Qi[Zi++]=pc,pc=t;var r=Gs;t=Hs;var a=32-Ro(r)-1;r&=~(1<<a),n+=1;var i=32-Ro(e)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Gs=1<<32-Ro(e)+a|n<<a|r,Hs=i+t}else Gs=1<<i|n<<a|r,Hs=t}function MC(t){t.return!==null&&(hc(t,1),uM(t,1,0))}function PC(t){for(;t===ly;)ly=np[--rp],np[rp]=null,uy=np[--rp],np[rp]=null;for(;t===pc;)pc=Qi[--Zi],Qi[Zi]=null,Hs=Qi[--Zi],Qi[Zi]=null,Gs=Qi[--Zi],Qi[Zi]=null}var _i=null,Ri=null,Gn=!1,Oo=null;function cM(t,e){var n=no(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dM(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_i=t,Ri=Kl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_i=t,Ri=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pc!==null?{id:Gs,overflow:Hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=no(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_i=t,Ri=null,!0):!1;default:return!1}}function AC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function DC(t){if(Gn){var e=Ri;if(e){var n=e;if(!dM(t,e)){if(AC(t))throw Error(Te(418));e=Kl(n.nextSibling);var r=_i;e&&dM(t,e)?cM(r,n):(t.flags=t.flags&-4097|2,Gn=!1,_i=t)}}else{if(AC(t))throw Error(Te(418));t.flags=t.flags&-4097|2,Gn=!1,_i=t}}}function pM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_i=t}function cy(t){if(t!==_i)return!1;if(!Gn)return pM(t),Gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!TC(t.type,t.memoizedProps)),e&&(e=Ri)){if(AC(t))throw hM(),Error(Te(418));for(;e;)cM(t,e),e=Kl(e.nextSibling)}if(pM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ri=Kl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ri=null}}else Ri=_i?Kl(t.stateNode.nextSibling):null;return!0}function hM(){for(var t=Ri;t;)t=Kl(t.nextSibling)}function ap(){Ri=_i=null,Gn=!1}function LC(t){Oo===null?Oo=[t]:Oo.push(t)}var bK=Vs.ReactCurrentBatchConfig;function Mo(t,e){if(t&&t.defaultProps){e=Jn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var dy=Xl(null),py=null,ip=null,FC=null;function BC(){FC=ip=py=null}function zC(t){var e=dy.current;Bn(dy),t._currentValue=e}function jC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function op(t,e){py=t,FC=ip=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(si=!0),t.firstContext=null)}function Ji(t){var e=t._currentValue;if(FC!==t)if(t={context:t,memoizedValue:e,next:null},ip===null){if(py===null)throw Error(Te(308));ip=t,py.dependencies={lanes:0,firstContext:t}}else ip=ip.next=t;return e}var fc=null;function VC(t){fc===null?fc=[t]:fc.push(t)}function fM(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,VC(e)):(n.next=a.next,a.next=n),e.interleaved=n,qs(t,r)}function qs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zl=!1;function UC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Jt&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,qs(t,n)}return a=r.interleaved,a===null?(e.next=e,VC(r)):(e.next=a.next,a.next=e),r.interleaved=e,qs(t,n)}function hy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rC(t,n)}}function mM(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fy(t,e,n,r){var a=t.updateQueue;Zl=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,c=u=l=null,s=i;do{var p=s.lane,f=s.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=t,y=s;switch(p=e,f=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(f,d,p);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,p=typeof m=="function"?m.call(f,d,p):m,p==null)break e;d=Jn({},d,p);break e;case 2:Zl=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(c===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);yc|=o,t.lanes=o,t.memoizedState=d}}function yM(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Te(191,a));a.call(r)}}}var bM=new P$.Component().refs;function WC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gy={isMounted:function(t){return(t=t._reactInternals)?uc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xa(),a=ru(t),i=Ks(r,a);i.payload=e,n!=null&&(i.callback=n),e=Jl(t,i,a),e!==null&&(Do(e,t,a,r),hy(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xa(),a=ru(t),i=Ks(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Jl(t,i,a),e!==null&&(Do(e,t,a,r),hy(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xa(),r=ru(t),a=Ks(n,r);a.tag=2,e!=null&&(a.callback=e),e=Jl(t,a,r),e!==null&&(Do(e,t,r,n),hy(e,t,r))}};function vM(t,e,n,r,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ef(n,r)||!Ef(a,i):!0}function xM(t,e,n){var r=!1,a=Yl,i=e.contextType;return typeof i=="object"&&i!==null?i=Ji(i):(a=oi(e)?dc:Ia.current,r=e.contextTypes,i=(r=r!=null)?tp(t,a):Yl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function wM(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gy.enqueueReplaceState(e,e.state,null)}function GC(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=bM,UC(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=Ji(i):(i=oi(e)?dc:Ia.current,a.context=tp(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(WC(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&gy.enqueueReplaceState(a,a.state,null),fy(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Of(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var r=n.stateNode}if(!r)throw Error(Te(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=a.refs;s===bM&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function my(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kM(t){var e=t._init;return e(t._payload)}function SM(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=iu(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,x,w,S){return x===null||x.tag!==6?(x=TE(w,b.mode,S),x.return=b,x):(x=a(x,w),x.return=b,x)}function l(b,x,w,S){var C=w.type;return C===Vd?c(b,x,w.props.children,S,w.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zl&&kM(C)===x.type)?(S=a(x,w.props),S.ref=Of(b,x,w),S.return=b,S):(S=Ay(w.type,w.key,w.props,null,b.mode,S),S.ref=Of(b,x,w),S.return=b,S)}function u(b,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=NE(w,b.mode,S),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function c(b,x,w,S,C){return x===null||x.tag!==7?(x=wc(w,b.mode,S,C),x.return=b,x):(x=a(x,w),x.return=b,x)}function d(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=TE(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case O1:return w=Ay(x.type,x.key,x.props,null,b.mode,w),w.ref=Of(b,null,x),w.return=b,w;case jd:return x=NE(x,b.mode,w),x.return=b,x;case zl:var S=x._init;return d(b,S(x._payload),w)}if(sf(x)||af(x))return x=wc(x,b.mode,w,null),x.return=b,x;my(b,x)}return null}function p(b,x,w,S){var C=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:s(b,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case O1:return w.key===C?l(b,x,w,S):null;case jd:return w.key===C?u(b,x,w,S):null;case zl:return C=w._init,p(b,x,C(w._payload),S)}if(sf(w)||af(w))return C!==null?null:c(b,x,w,S,null);my(b,w)}return null}function f(b,x,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,s(x,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case O1:return b=b.get(S.key===null?w:S.key)||null,l(x,b,S,C);case jd:return b=b.get(S.key===null?w:S.key)||null,u(x,b,S,C);case zl:var E=S._init;return f(b,x,w,E(S._payload),C)}if(sf(S)||af(S))return b=b.get(w)||null,c(x,b,S,C,null);my(x,S)}return null}function m(b,x,w,S){for(var C=null,E=null,_=x,N=x=0,M=null;_!==null&&N<w.length;N++){_.index>N?(M=_,_=null):M=_.sibling;var P=p(b,_,w[N],S);if(P===null){_===null&&(_=M);break}t&&_&&P.alternate===null&&e(b,_),x=i(P,x,N),E===null?C=P:E.sibling=P,E=P,_=M}if(N===w.length)return n(b,_),Gn&&hc(b,N),C;if(_===null){for(;N<w.length;N++)_=d(b,w[N],S),_!==null&&(x=i(_,x,N),E===null?C=_:E.sibling=_,E=_);return Gn&&hc(b,N),C}for(_=r(b,_);N<w.length;N++)M=f(_,b,N,w[N],S),M!==null&&(t&&M.alternate!==null&&_.delete(M.key===null?N:M.key),x=i(M,x,N),E===null?C=M:E.sibling=M,E=M);return t&&_.forEach(function(L){return e(b,L)}),Gn&&hc(b,N),C}function y(b,x,w,S){var C=af(w);if(typeof C!="function")throw Error(Te(150));if(w=C.call(w),w==null)throw Error(Te(151));for(var E=C=null,_=x,N=x=0,M=null,P=w.next();_!==null&&!P.done;N++,P=w.next()){_.index>N?(M=_,_=null):M=_.sibling;var L=p(b,_,P.value,S);if(L===null){_===null&&(_=M);break}t&&_&&L.alternate===null&&e(b,_),x=i(L,x,N),E===null?C=L:E.sibling=L,E=L,_=M}if(P.done)return n(b,_),Gn&&hc(b,N),C;if(_===null){for(;!P.done;N++,P=w.next())P=d(b,P.value,S),P!==null&&(x=i(P,x,N),E===null?C=P:E.sibling=P,E=P);return Gn&&hc(b,N),C}for(_=r(b,_);!P.done;N++,P=w.next())P=f(_,b,N,P.value,S),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?N:P.key),x=i(P,x,N),E===null?C=P:E.sibling=P,E=P);return t&&_.forEach(function(j){return e(b,j)}),Gn&&hc(b,N),C}function v(b,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Vd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case O1:e:{for(var C=w.key,E=x;E!==null;){if(E.key===C){if(C=w.type,C===Vd){if(E.tag===7){n(b,E.sibling),x=a(E,w.props.children),x.return=b,b=x;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zl&&kM(C)===E.type){n(b,E.sibling),x=a(E,w.props),x.ref=Of(b,E,w),x.return=b,b=x;break e}n(b,E);break}else e(b,E);E=E.sibling}w.type===Vd?(x=wc(w.props.children,b.mode,S,w.key),x.return=b,b=x):(S=Ay(w.type,w.key,w.props,null,b.mode,S),S.ref=Of(b,x,w),S.return=b,b=S)}return o(b);case jd:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=NE(w,b.mode,S),x.return=b,b=x}return o(b);case zl:return E=w._init,v(b,x,E(w._payload),S)}if(sf(w))return m(b,x,w,S);if(af(w))return y(b,x,w,S);my(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=a(x,w),x.return=b,b=x):(n(b,x),x=TE(w,b.mode,S),x.return=b,b=x),o(b)):n(b,x)}return v}var sp=SM(!0),CM=SM(!1),Mf={},us=Xl(Mf),Pf=Xl(Mf),Af=Xl(Mf);function gc(t){if(t===Mf)throw Error(Te(174));return t}function HC(t,e){switch(On(Af,e),On(Pf,t),On(us,Mf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:GS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=GS(e,t)}Bn(us),On(us,e)}function lp(){Bn(us),Bn(Pf),Bn(Af)}function EM(t){gc(Af.current);var e=gc(us.current),n=GS(e,t.type);e!==n&&(On(Pf,t),On(us,n))}function qC(t){Pf.current===t&&(Bn(us),Bn(Pf))}var er=Xl(0);function yy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var KC=[];function XC(){for(var t=0;t<KC.length;t++)KC[t]._workInProgressVersionPrimary=null;KC.length=0}var by=Vs.ReactCurrentDispatcher,YC=Vs.ReactCurrentBatchConfig,mc=0,tr=null,Pr=null,qr=null,vy=!1,Df=!1,Lf=0,vK=0;function Ta(){throw Error(Te(321))}function QC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$o(t[n],e[n]))return!1;return!0}function ZC(t,e,n,r,a,i){if(mc=i,tr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,by.current=t===null||t.memoizedState===null?SK:CK,t=n(r,a),Df){i=0;do{if(Df=!1,Lf=0,25<=i)throw Error(Te(301));i+=1,qr=Pr=null,e.updateQueue=null,by.current=EK,t=n(r,a)}while(Df)}if(by.current=ky,e=Pr!==null&&Pr.next!==null,mc=0,qr=Pr=tr=null,vy=!1,e)throw Error(Te(300));return t}function JC(){var t=Lf!==0;return Lf=0,t}function cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?tr.memoizedState=qr=t:qr=qr.next=t,qr}function eo(){if(Pr===null){var t=tr.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=qr===null?tr.memoizedState:qr.next;if(e!==null)qr=e,Pr=t;else{if(t===null)throw Error(Te(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},qr===null?tr.memoizedState=qr=t:qr=qr.next=t}return qr}function Ff(t,e){return typeof e=="function"?e(t):e}function eE(t){var e=eo(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=Pr,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((mc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,tr.lanes|=c,yc|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,$o(r,e.memoizedState)||(si=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,tr.lanes|=i,yc|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tE(t){var e=eo(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);$o(i,e.memoizedState)||(si=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function IM(){}function TM(t,e){var n=tr,r=eo(),a=e(),i=!$o(r.memoizedState,a);if(i&&(r.memoizedState=a,si=!0),r=r.queue,nE(RM.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qr!==null&&qr.memoizedState.tag&1){if(n.flags|=2048,Bf(9,_M.bind(null,n,r,a,e),void 0,null),Kr===null)throw Error(Te(349));mc&30||NM(n,e,a)}return a}function NM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _M(t,e,n,r){e.value=n,e.getSnapshot=r,$M(e)&&OM(t)}function RM(t,e,n){return n(function(){$M(e)&&OM(t)})}function $M(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$o(t,n)}catch{return!0}}function OM(t){var e=qs(t,1);e!==null&&Do(e,t,1,-1)}function MM(t){var e=cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ff,lastRenderedState:t},e.queue=t,t=t.dispatch=kK.bind(null,tr,t),[e.memoizedState,t]}function Bf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PM(){return eo().memoizedState}function xy(t,e,n,r){var a=cs();tr.flags|=t,a.memoizedState=Bf(1|e,n,void 0,r===void 0?null:r)}function wy(t,e,n,r){var a=eo();r=r===void 0?null:r;var i=void 0;if(Pr!==null){var o=Pr.memoizedState;if(i=o.destroy,r!==null&&QC(r,o.deps)){a.memoizedState=Bf(e,n,i,r);return}}tr.flags|=t,a.memoizedState=Bf(1|e,n,i,r)}function AM(t,e){return xy(8390656,8,t,e)}function nE(t,e){return wy(2048,8,t,e)}function DM(t,e){return wy(4,2,t,e)}function LM(t,e){return wy(4,4,t,e)}function FM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BM(t,e,n){return n=n!=null?n.concat([t]):null,wy(4,4,FM.bind(null,e,t),n)}function rE(){}function zM(t,e){var n=eo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&QC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jM(t,e){var n=eo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&QC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VM(t,e,n){return mc&21?($o(n,e)||(n=fO(),tr.lanes|=n,yc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,si=!0),t.memoizedState=n)}function xK(t,e){var n=yn;yn=n!==0&&4>n?n:4,t(!0);var r=YC.transition;YC.transition={};try{t(!1),e()}finally{yn=n,YC.transition=r}}function UM(){return eo().memoizedState}function wK(t,e,n){var r=ru(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},WM(t))GM(e,n);else if(n=fM(t,e,n,r),n!==null){var a=Xa();Do(n,t,r,a),HM(n,e,r)}}function kK(t,e,n){var r=ru(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(WM(t))GM(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,$o(s,o)){var l=e.interleaved;l===null?(a.next=a,VC(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}n=fM(t,e,a,r),n!==null&&(a=Xa(),Do(n,t,r,a),HM(n,e,r))}}function WM(t){var e=t.alternate;return t===tr||e!==null&&e===tr}function GM(t,e){Df=vy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rC(t,n)}}var ky={readContext:Ji,useCallback:Ta,useContext:Ta,useEffect:Ta,useImperativeHandle:Ta,useInsertionEffect:Ta,useLayoutEffect:Ta,useMemo:Ta,useReducer:Ta,useRef:Ta,useState:Ta,useDebugValue:Ta,useDeferredValue:Ta,useTransition:Ta,useMutableSource:Ta,useSyncExternalStore:Ta,useId:Ta,unstable_isNewReconciler:!1},SK={readContext:Ji,useCallback:function(t,e){return cs().memoizedState=[t,e===void 0?null:e],t},useContext:Ji,useEffect:AM,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xy(4194308,4,FM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xy(4194308,4,t,e)},useInsertionEffect:function(t,e){return xy(4,2,t,e)},useMemo:function(t,e){var n=cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wK.bind(null,tr,t),[r.memoizedState,t]},useRef:function(t){var e=cs();return t={current:t},e.memoizedState=t},useState:MM,useDebugValue:rE,useDeferredValue:function(t){return cs().memoizedState=t},useTransition:function(){var t=MM(!1),e=t[0];return t=xK.bind(null,t[1]),cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tr,a=cs();if(Gn){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),Kr===null)throw Error(Te(349));mc&30||NM(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,AM(RM.bind(null,r,i,t),[t]),r.flags|=2048,Bf(9,_M.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cs(),e=Kr.identifierPrefix;if(Gn){var n=Hs,r=Gs;n=(r&~(1<<32-Ro(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vK++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CK={readContext:Ji,useCallback:zM,useContext:Ji,useEffect:nE,useImperativeHandle:BM,useInsertionEffect:DM,useLayoutEffect:LM,useMemo:jM,useReducer:eE,useRef:PM,useState:function(){return eE(Ff)},useDebugValue:rE,useDeferredValue:function(t){var e=eo();return VM(e,Pr.memoizedState,t)},useTransition:function(){var t=eE(Ff)[0],e=eo().memoizedState;return[t,e]},useMutableSource:IM,useSyncExternalStore:TM,useId:UM,unstable_isNewReconciler:!1},EK={readContext:Ji,useCallback:zM,useContext:Ji,useEffect:nE,useImperativeHandle:BM,useInsertionEffect:DM,useLayoutEffect:LM,useMemo:jM,useReducer:tE,useRef:PM,useState:function(){return tE(Ff)},useDebugValue:rE,useDeferredValue:function(t){var e=eo();return Pr===null?e.memoizedState=t:VM(e,Pr.memoizedState,t)},useTransition:function(){var t=tE(Ff)[0],e=eo().memoizedState;return[t,e]},useMutableSource:IM,useSyncExternalStore:TM,useId:UM,unstable_isNewReconciler:!1};function up(t,e){try{var n="",r=e;do n+=JH(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function aE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function iE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IK=typeof WeakMap=="function"?WeakMap:Map;function qM(t,e,n){n=Ks(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_y||(_y=!0,vE=r),iE(t,e)},n}function KM(t,e,n){n=Ks(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){iE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){iE(t,e),typeof r!="function"&&(tu===null?tu=new Set([this]):tu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IK;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=zK.bind(null,t,e,n),e.then(t,t))}function YM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function QM(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ks(-1,1),e.tag=2,Jl(n,e,1))),n.lanes|=1),t)}var TK=Vs.ReactCurrentOwner,si=!1;function Ka(t,e,n,r){e.child=t===null?CM(e,null,n,r):sp(e,t.child,n,r)}function ZM(t,e,n,r,a){n=n.render;var i=e.ref;return op(e,a),r=ZC(t,e,n,r,i,a),n=JC(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Xs(t,e,a)):(Gn&&n&&MC(e),e.flags|=1,Ka(t,e,r,a),e.child)}function JM(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!IE(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,e6(t,e,i,r,a)):(t=Ay(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ef,n(o,r)&&t.ref===e.ref)return Xs(t,e,a)}return e.flags|=1,t=iu(i,r),t.ref=e.ref,t.return=e,e.child=t}function e6(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(Ef(i,r)&&t.ref===e.ref)if(si=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(si=!0);else return e.lanes=t.lanes,Xs(t,e,a)}return oE(t,e,n,r,a)}function t6(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(dp,$i),$i|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,On(dp,$i),$i|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,On(dp,$i),$i|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,On(dp,$i),$i|=r;return Ka(t,e,a,n),e.child}function n6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oE(t,e,n,r,a){var i=oi(n)?dc:Ia.current;return i=tp(e,i),op(e,a),n=ZC(t,e,n,r,i,a),r=JC(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Xs(t,e,a)):(Gn&&r&&MC(e),e.flags|=1,Ka(t,e,n,a),e.child)}function r6(t,e,n,r,a){if(oi(n)){var i=!0;oy(e)}else i=!1;if(op(e,a),e.stateNode===null)Cy(t,e),xM(e,n,r),GC(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ji(u):(u=oi(n)?dc:Ia.current,u=tp(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&wM(e,o,r,u),Zl=!1;var p=e.memoizedState;o.state=p,fy(e,r,o,a),l=e.memoizedState,s!==r||p!==l||ii.current||Zl?(typeof c=="function"&&(WC(e,n,c,r),l=e.memoizedState),(s=Zl||vM(e,n,s,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gM(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Mo(e.type,s),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ji(l):(l=oi(n)?dc:Ia.current,l=tp(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==l)&&wM(e,o,r,l),Zl=!1,p=e.memoizedState,o.state=p,fy(e,r,o,a);var m=e.memoizedState;s!==d||p!==m||ii.current||Zl?(typeof f=="function"&&(WC(e,n,f,r),m=e.memoizedState),(u=Zl||vM(e,n,u,r,p,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return sE(t,e,n,r,i,a)}function sE(t,e,n,r,a,i){n6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&sM(e,n,!1),Xs(t,e,i);r=e.stateNode,TK.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sp(e,t.child,null,i),e.child=sp(e,null,s,i)):Ka(t,e,s,i),e.memoizedState=r.state,a&&sM(e,n,!0),e.child}function a6(t){var e=t.stateNode;e.pendingContext?iM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iM(t,e.context,!1),HC(t,e.containerInfo)}function i6(t,e,n,r,a){return ap(),LC(a),e.flags|=256,Ka(t,e,n,r),e.child}var lE={dehydrated:null,treeContext:null,retryLane:0};function uE(t){return{baseLanes:t,cachePool:null,transitions:null}}function o6(t,e,n){var r=e.pendingProps,a=er.current,i=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(a&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),On(er,a&1),t===null)return DC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Dy(o,r,0,null),t=wc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uE(n),e.memoizedState=lE,t):cE(e,o));if(a=t.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return NK(t,e,o,r,s,a,n);if(i){i=r.fallback,o=e.mode,a=t.child,s=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=iu(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=iu(s,i):(i=wc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?uE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lE,r}return i=t.child,t=i.sibling,r=iu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cE(t,e){return e=Dy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sy(t,e,n,r){return r!==null&&LC(r),sp(e,t.child,null,n),t=cE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NK(t,e,n,r,a,i,o){if(n)return e.flags&256?(e.flags&=-257,r=aE(Error(Te(422))),Sy(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=Dy({mode:"visible",children:r.children},a,0,null),i=wc(i,a,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&sp(e,t.child,null,o),e.child.memoizedState=uE(o),e.memoizedState=lE,i);if(!(e.mode&1))return Sy(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(Te(419)),r=aE(i,r,void 0),Sy(t,e,o,r)}if(s=(o&t.childLanes)!==0,si||s){if(r=Kr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,qs(t,a),Do(r,t,a,-1))}return EE(),r=aE(Error(Te(421))),Sy(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=jK.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Ri=Kl(a.nextSibling),_i=e,Gn=!0,Oo=null,t!==null&&(Qi[Zi++]=Gs,Qi[Zi++]=Hs,Qi[Zi++]=pc,Gs=t.id,Hs=t.overflow,pc=e),e=cE(e,r.children),e.flags|=4096,e)}function s6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jC(t.return,e,n)}function dE(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function l6(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(Ka(t,e,r.children,n),r=er.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s6(t,n,e);else if(t.tag===19)s6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(On(er,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&yy(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),dE(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&yy(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}dE(e,!0,n,null,i);break;case"together":dE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=iu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=iu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _K(t,e,n){switch(e.tag){case 3:a6(e),ap();break;case 5:EM(e);break;case 1:oi(e.type)&&oy(e);break;case 4:HC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;On(dy,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(On(er,er.current&1),e.flags|=128,null):n&e.child.childLanes?o6(t,e,n):(On(er,er.current&1),t=Xs(t,e,n),t!==null?t.sibling:null);On(er,er.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return l6(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),On(er,er.current),r)break;return null;case 22:case 23:return e.lanes=0,t6(t,e,n)}return Xs(t,e,n)}var u6,pE,c6,d6;u6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},pE=function(){},c6=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,gc(us.current);var i=null;switch(n){case"input":a=jS(t,a),r=jS(t,r),i=[];break;case"select":a=Jn({},a,{value:void 0}),r=Jn({},r,{value:void 0}),i=[];break;case"textarea":a=WS(t,a),r=WS(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ry)}HS(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rf.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a?.[u],r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Fn("scroll",t),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}},d6=function(t,e,n,r){n!==r&&(e.flags|=4)};function zf(t,e){if(!Gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Na(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RK(t,e,n){var r=e.pendingProps;switch(PC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Na(e),null;case 1:return oi(e.type)&&iy(),Na(e),null;case 3:return r=e.stateNode,lp(),Bn(ii),Bn(Ia),XC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Oo!==null&&(kE(Oo),Oo=null))),pE(t,e),Na(e),null;case 5:qC(e);var a=gc(Af.current);if(n=e.type,t!==null&&e.stateNode!=null)c6(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return Na(e),null}if(t=gc(us.current),cy(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ls]=e,r[Rf]=i,t=(e.mode&1)!==0,n){case"dialog":Fn("cancel",r),Fn("close",r);break;case"iframe":case"object":case"embed":Fn("load",r);break;case"video":case"audio":for(a=0;a<Tf.length;a++)Fn(Tf[a],r);break;case"source":Fn("error",r);break;case"img":case"image":case"link":Fn("error",r),Fn("load",r);break;case"details":Fn("toggle",r);break;case"input":W$(r,i),Fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fn("invalid",r);break;case"textarea":q$(r,i),Fn("invalid",r)}HS(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&ny(r.textContent,s,t),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&ny(r.textContent,s,t),a=["children",""+s]):rf.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Fn("scroll",r)}switch(n){case"input":M1(r),H$(r,i,!0);break;case"textarea":M1(r),X$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ry)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Y$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ls]=e,t[Rf]=r,u6(t,e,!1,!1),e.stateNode=t;e:{switch(o=qS(n,r),n){case"dialog":Fn("cancel",t),Fn("close",t),a=r;break;case"iframe":case"object":case"embed":Fn("load",t),a=r;break;case"video":case"audio":for(a=0;a<Tf.length;a++)Fn(Tf[a],t);a=r;break;case"source":Fn("error",t),a=r;break;case"img":case"image":case"link":Fn("error",t),Fn("load",t),a=r;break;case"details":Fn("toggle",t),a=r;break;case"input":W$(t,r),a=jS(t,r),Fn("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Jn({},r,{value:void 0}),Fn("invalid",t);break;case"textarea":q$(t,r),a=WS(t,r),Fn("invalid",t);break;default:a=r}HS(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?J$(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Q$(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&lf(t,l):typeof l=="number"&&lf(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Fn("scroll",t):l!=null&&RS(t,i,l,o))}switch(n){case"input":M1(t),H$(t,r,!1);break;case"textarea":M1(t),X$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ud(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ud(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ry)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Na(e),null;case 6:if(t&&e.stateNode!=null)d6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(n=gc(Af.current),gc(us.current),cy(e)){if(r=e.stateNode,n=e.memoizedProps,r[ls]=e,(i=r.nodeValue!==n)&&(t=_i,t!==null))switch(t.tag){case 3:ny(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ny(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ls]=e,e.stateNode=r}return Na(e),null;case 13:if(Bn(er),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gn&&Ri!==null&&e.mode&1&&!(e.flags&128))hM(),ap(),e.flags|=98560,i=!1;else if(i=cy(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Te(317));i[ls]=e}else ap(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Na(e),i=!1}else Oo!==null&&(kE(Oo),Oo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||er.current&1?Ar===0&&(Ar=3):EE())),e.updateQueue!==null&&(e.flags|=4),Na(e),null);case 4:return lp(),pE(t,e),t===null&&Nf(e.stateNode.containerInfo),Na(e),null;case 10:return zC(e.type._context),Na(e),null;case 17:return oi(e.type)&&iy(),Na(e),null;case 19:if(Bn(er),i=e.memoizedState,i===null)return Na(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)zf(i,!1);else{if(Ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yy(t),o!==null){for(e.flags|=128,zf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return On(er,er.current&1|2),e.child}t=t.sibling}i.tail!==null&&mr()>pp&&(e.flags|=128,r=!0,zf(i,!1),e.lanes=4194304)}else{if(!r)if(t=yy(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Gn)return Na(e),null}else 2*mr()-i.renderingStartTime>pp&&n!==1073741824&&(e.flags|=128,r=!0,zf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mr(),e.sibling=null,n=er.current,On(er,r?n&1|2:n&1),e):(Na(e),null);case 22:case 23:return CE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$i&1073741824&&(Na(e),e.subtreeFlags&6&&(e.flags|=8192)):Na(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function $K(t,e){switch(PC(e),e.tag){case 1:return oi(e.type)&&iy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lp(),Bn(ii),Bn(Ia),XC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qC(e),null;case 13:if(Bn(er),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));ap()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bn(er),null;case 4:return lp(),null;case 10:return zC(e.type._context),null;case 22:case 23:return CE(),null;case 24:return null;default:return null}}var Ey=!1,_a=!1,OK=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function cp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){sr(t,e,r)}else n.current=null}function p6(t,e,n){try{n()}catch(r){sr(t,e,r)}}var h6=!1;function MK(t,e){if(EC=G1,t=UO(),yC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,p=null;t:for(;;){for(var f;d!==n||a!==0&&d.nodeType!==3||(s=o+a),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===n&&++u===a&&(s=o),p===i&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(IC={focusedElem:t,selectionRange:n},G1=!1,Ue=e;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Mo(e.type,y),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(S){sr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return m=h6,h6=!1,m}function jf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&p6(e,n,i)}a=a.next}while(a!==r)}}function Iy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f6(t){var e=t.alternate;e!==null&&(t.alternate=null,f6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ls],delete e[Rf],delete e[RC],delete e[gK],delete e[mK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function g6(t){return t.tag===5||t.tag===3||t.tag===4}function m6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ry));else if(r!==4&&(t=t.child,t!==null))for(fE(t,e,n),t=t.sibling;t!==null;)fE(t,e,n),t=t.sibling}function gE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gE(t,e,n),t=t.sibling;t!==null;)gE(t,e,n),t=t.sibling}var la=null,Po=!1;function eu(t,e,n){for(n=n.child;n!==null;)y6(t,e,n),n=n.sibling}function y6(t,e,n){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(B1,n)}catch{}switch(n.tag){case 5:_a||cp(n,e);case 6:var r=la,a=Po;la=null,eu(t,e,n),la=r,Po=a,la!==null&&(Po?(t=la,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):la.removeChild(n.stateNode));break;case 18:la!==null&&(Po?(t=la,n=n.stateNode,t.nodeType===8?_C(t.parentNode,n):t.nodeType===1&&_C(t,n),vf(t)):_C(la,n.stateNode));break;case 4:r=la,a=Po,la=n.stateNode.containerInfo,Po=!0,eu(t,e,n),la=r,Po=a;break;case 0:case 11:case 14:case 15:if(!_a&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&p6(n,e,o),a=a.next}while(a!==r)}eu(t,e,n);break;case 1:if(!_a&&(cp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){sr(n,e,s)}eu(t,e,n);break;case 21:eu(t,e,n);break;case 22:n.mode&1?(_a=(r=_a)||n.memoizedState!==null,eu(t,e,n),_a=r):eu(t,e,n);break;default:eu(t,e,n)}}function b6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OK),e.forEach(function(r){var a=VK.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Ao(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:la=s.stateNode,Po=!1;break e;case 3:la=s.stateNode.containerInfo,Po=!0;break e;case 4:la=s.stateNode.containerInfo,Po=!0;break e}s=s.return}if(la===null)throw Error(Te(160));y6(i,o,a),la=null,Po=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){sr(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)v6(e,t),e=e.sibling}function v6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ao(e,t),ds(t),r&4){try{jf(3,t,t.return),Iy(3,t)}catch(y){sr(t,t.return,y)}try{jf(5,t,t.return)}catch(y){sr(t,t.return,y)}}break;case 1:Ao(e,t),ds(t),r&512&&n!==null&&cp(n,n.return);break;case 5:if(Ao(e,t),ds(t),r&512&&n!==null&&cp(n,n.return),t.flags&32){var a=t.stateNode;try{lf(a,"")}catch(y){sr(t,t.return,y)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&G$(a,i),qS(s,o);var u=qS(s,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?J$(a,d):c==="dangerouslySetInnerHTML"?Q$(a,d):c==="children"?lf(a,d):RS(a,c,d,u)}switch(s){case"input":VS(a,i);break;case"textarea":K$(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ud(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ud(a,!!i.multiple,i.defaultValue,!0):Ud(a,!!i.multiple,i.multiple?[]:"",!1))}a[Rf]=i}catch(y){sr(t,t.return,y)}}break;case 6:if(Ao(e,t),ds(t),r&4){if(t.stateNode===null)throw Error(Te(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(y){sr(t,t.return,y)}}break;case 3:if(Ao(e,t),ds(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vf(e.containerInfo)}catch(y){sr(t,t.return,y)}break;case 4:Ao(e,t),ds(t);break;case 13:Ao(e,t),ds(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(bE=mr())),r&4&&b6(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(_a=(u=_a)||c,Ao(e,t),_a=u):Ao(e,t),ds(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ue=t,c=t.child;c!==null;){for(d=Ue=c;Ue!==null;){switch(p=Ue,f=p.child,p.tag){case 0:case 11:case 14:case 15:jf(4,p,p.return);break;case 1:cp(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){sr(r,n,y)}}break;case 5:cp(p,p.return);break;case 22:if(p.memoizedState!==null){k6(d);continue}}f!==null?(f.return=p,Ue=f):k6(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Z$("display",o))}catch(y){sr(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){sr(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ao(e,t),ds(t),r&4&&b6(t);break;case 21:break;default:Ao(e,t),ds(t)}}function ds(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(g6(n)){var r=n;break e}n=n.return}throw Error(Te(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(lf(a,""),r.flags&=-33);var i=m6(t);gE(t,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=m6(t);fE(t,s,o);break;default:throw Error(Te(161))}}catch(l){sr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PK(t,e,n){Ue=t,x6(t)}function x6(t,e,n){for(var r=(t.mode&1)!==0;Ue!==null;){var a=Ue,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Ey;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||_a;s=Ey;var u=_a;if(Ey=o,(_a=l)&&!u)for(Ue=a;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?S6(a):l!==null?(l.return=o,Ue=l):S6(a);for(;i!==null;)Ue=i,x6(i),i=i.sibling;Ue=a,Ey=s,_a=u}w6(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ue=i):w6(t)}}function w6(t){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_a||Iy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_a)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Mo(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yM(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yM(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&vf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}_a||e.flags&512&&hE(e)}catch(p){sr(e,e.return,p)}}if(e===t){Ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function k6(t){for(;Ue!==null;){var e=Ue;if(e===t){Ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function S6(t){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iy(4,e)}catch(l){sr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(l){sr(e,a,l)}}var i=e.return;try{hE(e)}catch(l){sr(e,i,l)}break;case 5:var o=e.return;try{hE(e)}catch(l){sr(e,o,l)}}}catch(l){sr(e,e.return,l)}if(e===t){Ue=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ue=s;break}Ue=e.return}}var AK=Math.ceil,Ty=Vs.ReactCurrentDispatcher,mE=Vs.ReactCurrentOwner,to=Vs.ReactCurrentBatchConfig,Jt=0,Kr=null,Ir=null,ua=0,$i=0,dp=Xl(0),Ar=0,Vf=null,yc=0,Ny=0,yE=0,Uf=null,li=null,bE=0,pp=1/0,Ys=null,_y=!1,vE=null,tu=null,Ry=!1,nu=null,$y=0,Wf=0,xE=null,Oy=-1,My=0;function Xa(){return Jt&6?mr():Oy!==-1?Oy:Oy=mr()}function ru(t){return t.mode&1?Jt&2&&ua!==0?ua&-ua:bK.transition!==null?(My===0&&(My=fO()),My):(t=yn,t!==0||(t=window.event,t=t===void 0?16:SO(t.type)),t):1}function Do(t,e,n,r){if(50<Wf)throw Wf=0,xE=null,Error(Te(185));ff(t,n,r),(!(Jt&2)||t!==Kr)&&(t===Kr&&(!(Jt&2)&&(Ny|=n),Ar===4&&au(t,ua)),ui(t,r),n===1&&Jt===0&&!(e.mode&1)&&(pp=mr()+500,sy&&Ql()))}function ui(t,e){var n=t.callbackNode;bq(t,e);var r=V1(t,t===Kr?ua:0);if(r===0)n!==null&&dO(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dO(n),e===1)t.tag===0?yK(E6.bind(null,t)):lM(E6.bind(null,t)),hK(function(){!(Jt&6)&&Ql()}),n=null;else{switch(gO(r)){case 1:n=eC;break;case 4:n=pO;break;case 16:n=F1;break;case 536870912:n=hO;break;default:n=F1}n=M6(n,C6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C6(t,e){if(Oy=-1,My=0,Jt&6)throw Error(Te(327));var n=t.callbackNode;if(hp()&&t.callbackNode!==n)return null;var r=V1(t,t===Kr?ua:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Py(t,r);else{e=r;var a=Jt;Jt|=2;var i=T6();(Kr!==t||ua!==e)&&(Ys=null,pp=mr()+500,vc(t,e));do try{FK();break}catch(s){I6(t,s)}while(!0);BC(),Ty.current=i,Jt=a,Ir!==null?e=0:(Kr=null,ua=0,e=Ar)}if(e!==0){if(e===2&&(a=tC(t),a!==0&&(r=a,e=wE(t,a))),e===1)throw n=Vf,vc(t,0),au(t,r),ui(t,mr()),n;if(e===6)au(t,r);else{if(a=t.current.alternate,!(r&30)&&!DK(a)&&(e=Py(t,r),e===2&&(i=tC(t),i!==0&&(r=i,e=wE(t,i))),e===1))throw n=Vf,vc(t,0),au(t,r),ui(t,mr()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:xc(t,li,Ys);break;case 3:if(au(t,r),(r&130023424)===r&&(e=bE+500-mr(),10<e)){if(V1(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Xa(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=NC(xc.bind(null,t,li,Ys),e);break}xc(t,li,Ys);break;case 4:if(au(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-Ro(r);i=1<<o,o=e[o],o>a&&(a=o),r&=~i}if(r=a,r=mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AK(r/1960))-r,10<r){t.timeoutHandle=NC(xc.bind(null,t,li,Ys),r);break}xc(t,li,Ys);break;case 5:xc(t,li,Ys);break;default:throw Error(Te(329))}}}return ui(t,mr()),t.callbackNode===n?C6.bind(null,t):null}function wE(t,e){var n=Uf;return t.current.memoizedState.isDehydrated&&(vc(t,e).flags|=256),t=Py(t,e),t!==2&&(e=li,li=n,e!==null&&kE(e)),t}function kE(t){li===null?li=t:li.push.apply(li,t)}function DK(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!$o(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function au(t,e){for(e&=~yE,e&=~Ny,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ro(e),r=1<<n;t[n]=-1,e&=~r}}function E6(t){if(Jt&6)throw Error(Te(327));hp();var e=V1(t,0);if(!(e&1))return ui(t,mr()),null;var n=Py(t,e);if(t.tag!==0&&n===2){var r=tC(t);r!==0&&(e=r,n=wE(t,r))}if(n===1)throw n=Vf,vc(t,0),au(t,e),ui(t,mr()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,li,Ys),ui(t,mr()),null}function SE(t,e){var n=Jt;Jt|=1;try{return t(e)}finally{Jt=n,Jt===0&&(pp=mr()+500,sy&&Ql())}}function bc(t){nu!==null&&nu.tag===0&&!(Jt&6)&&hp();var e=Jt;Jt|=1;var n=to.transition,r=yn;try{if(to.transition=null,yn=1,t)return t()}finally{yn=r,to.transition=n,Jt=e,!(Jt&6)&&Ql()}}function CE(){$i=dp.current,Bn(dp)}function vc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pK(n)),Ir!==null)for(n=Ir.return;n!==null;){var r=n;switch(PC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&iy();break;case 3:lp(),Bn(ii),Bn(Ia),XC();break;case 5:qC(r);break;case 4:lp();break;case 13:Bn(er);break;case 19:Bn(er);break;case 10:zC(r.type._context);break;case 22:case 23:CE()}n=n.return}if(Kr=t,Ir=t=iu(t.current,null),ua=$i=e,Ar=0,Vf=null,yE=Ny=yc=0,li=Uf=null,fc!==null){for(e=0;e<fc.length;e++)if(n=fc[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}fc=null}return t}function I6(t,e){do{var n=Ir;try{if(BC(),by.current=ky,vy){for(var r=tr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}vy=!1}if(mc=0,qr=Pr=tr=null,Df=!1,Lf=0,mE.current=null,n===null||n.return===null){Ar=1,Vf=e,Ir=null;break}e:{var i=t,o=n.return,s=n,l=e;if(e=ua,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=YM(o);if(f!==null){f.flags&=-257,QM(f,o,s,i,e),f.mode&1&&XM(i,u,e),e=f,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){XM(i,u,e),EE();break e}l=Error(Te(426))}}else if(Gn&&s.mode&1){var v=YM(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),QM(v,o,s,i,e),LC(up(l,s));break e}}i=l=up(l,s),Ar!==4&&(Ar=2),Uf===null?Uf=[i]:Uf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=qM(i,l,e);mM(i,b);break e;case 1:s=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(tu===null||!tu.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=KM(i,s,e);mM(i,S);break e}}i=i.return}while(i!==null)}_6(n)}catch(C){e=C,Ir===n&&n!==null&&(Ir=n=n.return);continue}break}while(!0)}function T6(){var t=Ty.current;return Ty.current=ky,t===null?ky:t}function EE(){(Ar===0||Ar===3||Ar===2)&&(Ar=4),Kr===null||!(yc&268435455)&&!(Ny&268435455)||au(Kr,ua)}function Py(t,e){var n=Jt;Jt|=2;var r=T6();(Kr!==t||ua!==e)&&(Ys=null,vc(t,e));do try{LK();break}catch(a){I6(t,a)}while(!0);if(BC(),Jt=n,Ty.current=r,Ir!==null)throw Error(Te(261));return Kr=null,ua=0,Ar}function LK(){for(;Ir!==null;)N6(Ir)}function FK(){for(;Ir!==null&&!uq();)N6(Ir)}function N6(t){var e=O6(t.alternate,t,$i);t.memoizedProps=t.pendingProps,e===null?_6(t):Ir=e,mE.current=null}function _6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$K(n,e),n!==null){n.flags&=32767,Ir=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ar=6,Ir=null;return}}else if(n=RK(n,e,$i),n!==null){Ir=n;return}if(e=e.sibling,e!==null){Ir=e;return}Ir=e=t}while(e!==null);Ar===0&&(Ar=5)}function xc(t,e,n){var r=yn,a=to.transition;try{to.transition=null,yn=1,BK(t,e,n,r)}finally{to.transition=a,yn=r}return null}function BK(t,e,n,r){do hp();while(nu!==null);if(Jt&6)throw Error(Te(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(vq(t,i),t===Kr&&(Ir=Kr=null,ua=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ry||(Ry=!0,M6(F1,function(){return hp(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=to.transition,to.transition=null;var o=yn;yn=1;var s=Jt;Jt|=4,mE.current=null,MK(t,n),v6(n,t),iK(IC),G1=!!EC,IC=EC=null,t.current=n,PK(n),cq(),Jt=s,yn=o,to.transition=i}else t.current=n;if(Ry&&(Ry=!1,nu=t,$y=a),i=t.pendingLanes,i===0&&(tu=null),hq(n.stateNode),ui(t,mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(_y)throw _y=!1,t=vE,vE=null,t;return $y&1&&t.tag!==0&&hp(),i=t.pendingLanes,i&1?t===xE?Wf++:(Wf=0,xE=t):Wf=0,Ql(),null}function hp(){if(nu!==null){var t=gO($y),e=to.transition,n=yn;try{if(to.transition=null,yn=16>t?16:t,nu===null)var r=!1;else{if(t=nu,nu=null,$y=0,Jt&6)throw Error(Te(331));var a=Jt;for(Jt|=4,Ue=t.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ue=u;Ue!==null;){var c=Ue;switch(c.tag){case 0:case 11:case 15:jf(8,c,i)}var d=c.child;if(d!==null)d.return=c,Ue=d;else for(;Ue!==null;){c=Ue;var p=c.sibling,f=c.return;if(f6(c),c===u){Ue=null;break}if(p!==null){p.return=f,Ue=p;break}Ue=f}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jf(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Ue=b;break e}Ue=i.return}}var x=t.current;for(Ue=x;Ue!==null;){o=Ue;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ue=w;else e:for(o=x;Ue!==null;){if(s=Ue,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Iy(9,s)}}catch(C){sr(s,s.return,C)}if(s===o){Ue=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Ue=S;break e}Ue=s.return}}if(Jt=a,Ql(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(B1,t)}catch{}r=!0}return r}finally{yn=n,to.transition=e}}return!1}function R6(t,e,n){e=up(n,e),e=qM(t,e,1),t=Jl(t,e,1),e=Xa(),t!==null&&(ff(t,1,e),ui(t,e))}function sr(t,e,n){if(t.tag===3)R6(t,t,n);else for(;e!==null;){if(e.tag===3){R6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tu===null||!tu.has(r))){t=up(n,t),t=KM(e,t,1),e=Jl(e,t,1),t=Xa(),e!==null&&(ff(e,1,t),ui(e,t));break}}e=e.return}}function zK(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xa(),t.pingedLanes|=t.suspendedLanes&n,Kr===t&&(ua&n)===n&&(Ar===4||Ar===3&&(ua&130023424)===ua&&500>mr()-bE?vc(t,0):yE|=n),ui(t,e)}function $6(t,e){e===0&&(t.mode&1?(e=j1,j1<<=1,!(j1&130023424)&&(j1=4194304)):e=1);var n=Xa();t=qs(t,e),t!==null&&(ff(t,e,n),ui(t,n))}function jK(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$6(t,n)}function VK(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),$6(t,n)}var O6;O6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ii.current)si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return si=!1,_K(t,e,n);si=!!(t.flags&131072)}else si=!1,Gn&&e.flags&1048576&&uM(e,uy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cy(t,e),t=e.pendingProps;var a=tp(e,Ia.current);op(e,n),a=ZC(null,e,r,t,a,n);var i=JC();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oi(r)?(i=!0,oy(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,UC(e),a.updater=gy,e.stateNode=a,a._reactInternals=e,GC(e,r,t,n),e=sE(null,e,r,!0,i,n)):(e.tag=0,Gn&&i&&MC(e),Ka(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cy(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=WK(r),t=Mo(r,t),a){case 0:e=oE(null,e,r,t,n);break e;case 1:e=r6(null,e,r,t,n);break e;case 11:e=ZM(null,e,r,t,n);break e;case 14:e=JM(null,e,r,Mo(r.type,t),n);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Mo(r,a),oE(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Mo(r,a),r6(t,e,r,a,n);case 3:e:{if(a6(e),t===null)throw Error(Te(387));r=e.pendingProps,i=e.memoizedState,a=i.element,gM(t,e),fy(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=up(Error(Te(423)),e),e=i6(t,e,r,n,a);break e}else if(r!==a){a=up(Error(Te(424)),e),e=i6(t,e,r,n,a);break e}else for(Ri=Kl(e.stateNode.containerInfo.firstChild),_i=e,Gn=!0,Oo=null,n=CM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ap(),r===a){e=Xs(t,e,n);break e}Ka(t,e,r,n)}e=e.child}return e;case 5:return EM(e),t===null&&DC(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,TC(r,a)?o=null:i!==null&&TC(r,i)&&(e.flags|=32),n6(t,e),Ka(t,e,o,n),e.child;case 6:return t===null&&DC(e),null;case 13:return o6(t,e,n);case 4:return HC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sp(e,null,r,n):Ka(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Mo(r,a),ZM(t,e,r,a,n);case 7:return Ka(t,e,e.pendingProps,n),e.child;case 8:return Ka(t,e,e.pendingProps.children,n),e.child;case 12:return Ka(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,On(dy,r._currentValue),r._currentValue=o,i!==null)if($o(i.value,o)){if(i.children===a.children&&!ii.current){e=Xs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ks(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),jC(i.return,n,e),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Te(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),jC(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ka(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,op(e,n),a=Ji(a),r=r(a),e.flags|=1,Ka(t,e,r,n),e.child;case 14:return r=e.type,a=Mo(r,e.pendingProps),a=Mo(r.type,a),JM(t,e,r,a,n);case 15:return e6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Mo(r,a),Cy(t,e),e.tag=1,oi(r)?(t=!0,oy(e)):t=!1,op(e,n),xM(e,r,a),GC(e,r,a,n),sE(null,e,r,!0,t,n);case 19:return l6(t,e,n);case 22:return t6(t,e,n)}throw Error(Te(156,e.tag))};function M6(t,e){return cO(t,e)}function UK(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(t,e,n,r){return new UK(t,e,n,r)}function IE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WK(t){if(typeof t=="function")return IE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===MS)return 11;if(t===DS)return 14}return 2}function iu(t,e){var n=t.alternate;return n===null?(n=no(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ay(t,e,n,r,a,i){var o=2;if(r=t,typeof t=="function")IE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vd:return wc(n.children,a,i,e);case $S:o=8,a|=8;break;case OS:return t=no(12,n,e,a|2),t.elementType=OS,t.lanes=i,t;case PS:return t=no(13,n,e,a),t.elementType=PS,t.lanes=i,t;case AS:return t=no(19,n,e,a),t.elementType=AS,t.lanes=i,t;case z$:return Dy(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F$:o=10;break e;case B$:o=9;break e;case MS:o=11;break e;case DS:o=14;break e;case zl:o=16,r=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=no(o,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function wc(t,e,n,r){return t=no(7,t,r,e),t.lanes=n,t}function Dy(t,e,n,r){return t=no(22,t,r,e),t.elementType=z$,t.lanes=n,t.stateNode={isHidden:!1},t}function TE(t,e,n){return t=no(6,t,null,e),t.lanes=n,t}function NE(t,e,n){return e=no(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GK(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nC(0),this.expirationTimes=nC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nC(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _E(t,e,n,r,a,i,o,s,l){return t=new GK(t,e,n,s,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=no(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UC(i),t}function HK(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function P6(t){if(!t)return Yl;t=t._reactInternals;e:{if(uc(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(oi(n))return oM(t,n,e)}return e}function A6(t,e,n,r,a,i,o,s,l){return t=_E(n,r,!0,t,a,i,o,s,l),t.context=P6(null),n=t.current,r=Xa(),a=ru(n),i=Ks(r,a),i.callback=e??null,Jl(n,i,a),t.current.lanes=a,ff(t,a,r),ui(t,r),t}function Ly(t,e,n,r){var a=e.current,i=Xa(),o=ru(a);return n=P6(n),e.context===null?e.context=n:e.pendingContext=n,e=Ks(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jl(a,e,o),t!==null&&(Do(t,a,o,i),hy(t,a,o)),o}function Fy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function RE(t,e){D6(t,e),(t=t.alternate)&&D6(t,e)}function qK(){return null}var L6=typeof reportError=="function"?reportError:function(t){console.error(t)};function $E(t){this._internalRoot=t}By.prototype.render=$E.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));Ly(t,e,null,null)},By.prototype.unmount=$E.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bc(function(){Ly(null,t,null,null)}),e[Us]=null}};function By(t){this._internalRoot=t}By.prototype.unstable_scheduleHydration=function(t){if(t){var e=bO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gl.length&&e!==0&&e<Gl[n].priority;n++);Gl.splice(n,0,t),n===0&&wO(t)}};function OE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F6(){}function KK(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Fy(o);i.call(u)}}var o=A6(e,r,t,0,null,!1,!1,"",F6);return t._reactRootContainer=o,t[Us]=o.current,Nf(t.nodeType===8?t.parentNode:t),bc(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=Fy(l);s.call(u)}}var l=_E(t,0,!1,null,null,!1,!1,"",F6);return t._reactRootContainer=l,t[Us]=l.current,Nf(t.nodeType===8?t.parentNode:t),bc(function(){Ly(e,l,n,r)}),l}function jy(t,e,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Fy(o);s.call(l)}}Ly(e,o,t,a)}else o=KK(n,e,t,a,r);return Fy(o)}mO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hf(e.pendingLanes);n!==0&&(rC(e,n|1),ui(e,mr()),!(Jt&6)&&(pp=mr()+500,Ql()))}break;case 13:bc(function(){var r=qs(t,1);if(r!==null){var a=Xa();Do(r,t,1,a)}}),RE(t,1)}},aC=function(t){if(t.tag===13){var e=qs(t,134217728);if(e!==null){var n=Xa();Do(e,t,134217728,n)}RE(t,134217728)}},yO=function(t){if(t.tag===13){var e=ru(t),n=qs(t,e);if(n!==null){var r=Xa();Do(n,t,e,r)}RE(t,e)}},bO=function(){return yn},vO=function(t,e){var n=yn;try{return yn=t,e()}finally{yn=n}},YS=function(t,e,n){switch(e){case"input":if(VS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=ay(r);if(!a)throw Error(Te(90));U$(r),VS(r,a)}}}break;case"textarea":K$(t,n);break;case"select":e=n.value,e!=null&&Ud(t,!!n.multiple,e,!1)}},rO=SE,aO=bc;var XK={usingClientEntryPoint:!1,Events:[$f,Jd,ay,tO,nO,SE]},Gf={findFiberByHostInstance:cc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},YK={bundleType:Gf.bundleType,version:Gf.version,rendererPackageName:Gf.rendererPackageName,rendererConfig:Gf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lO(t),t===null?null:t.stateNode},findFiberByHostInstance:Gf.findFiberByHostInstance||qK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vy.isDisabled&&Vy.supportsFiber)try{B1=Vy.inject(YK),ss=Vy}catch{}}Ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XK,Ii.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OE(e))throw Error(Te(200));return HK(t,e,null,n)},Ii.createRoot=function(t,e){if(!OE(t))throw Error(Te(299));var n=!1,r="",a=L6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=_E(t,1,!1,null,null,n,!1,r,a),t[Us]=e.current,Nf(t.nodeType===8?t.parentNode:t),new $E(e)},Ii.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=lO(e),t=t===null?null:t.stateNode,t},Ii.flushSync=function(t){return bc(t)},Ii.hydrate=function(t,e,n){if(!zy(e))throw Error(Te(200));return jy(null,t,e,!0,n)},Ii.hydrateRoot=function(t,e,n){if(!OE(t))throw Error(Te(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=L6;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=A6(e,null,t,1,n??null,a,!1,i,o),t[Us]=e.current,Nf(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new By(e)},Ii.render=function(t,e,n){if(!zy(e))throw Error(Te(200));return jy(null,t,e,!1,n)},Ii.unmountComponentAtNode=function(t){if(!zy(t))throw Error(Te(40));return t._reactRootContainer?(bc(function(){jy(null,null,t,!1,function(){t._reactRootContainer=null,t[Us]=null})}),!0):!1},Ii.unstable_batchedUpdates=SE,Ii.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zy(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return jy(t,e,n,!1,r)},Ii.version="18.2.0-next-9e3b772b8-20220608";function B6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B6)}catch(t){console.error(t)}}B6(),$$.exports=Ii;var fp=$$.exports;const z6=Ki(fp),QK=Qk({__proto__:null,default:z6},[fp]);var ME=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),ZK=t=>{let e=t.getInitialClientOffset(),n=t.getInitialSourceClientOffset();return e===null||n===null?{x:0,y:0}:ME(e,n)},JK=(t,e)=>{let n=t.getClientOffset();if(n===null)return null;if(!e.current||!e.current.getBoundingClientRect)return ME(n,ZK(t));let r=e.current.getBoundingClientRect(),a={x:r.width/2,y:r.height/2};return ME(n,a)},eX=t=>{let e=`translate(${t.x.toFixed(1)}px, ${t.y.toFixed(1)}px)`;return{pointerEvents:"none",position:"fixed",top:0,left:0,transform:e,WebkitTransform:e}},tX=()=>{let t=R.useRef(null),e=zH(n=>({currentOffset:JK(n,t),isDragging:n.isDragging(),itemType:n.getItemType(),item:n.getItem(),monitor:n}));return!e.isDragging||e.currentOffset===null?{display:!1}:{display:!0,itemType:e.itemType,item:e.item,style:eX(e.currentOffset),monitor:e.monitor,ref:t}},j6=R.createContext(void 0),nX=t=>{let e=tX();if(!e.display)return null;let{display:n,...r}=e,a;return"children"in t?typeof t.children=="function"?a=t.children(r):a=t.children:a=t.generator(r),G.createElement(j6.Provider,{value:r},a)},V6=R.createContext(null),rX=({portal:t,...e})=>{let[n,r]=R.useState(null);return G.createElement(V6.Provider,{value:t??n},G.createElement(gH,{backend:WW,...e}),t?null:G.createElement("div",{ref:r}))},aX=()=>{let[t,e]=R.useState(!1),n=R.useContext(dS);return R.useEffect(()=>{var r;let a=(r=n?.dragDropManager)==null?void 0:r.getBackend(),i={backendChanged:o=>{e(o.previewEnabled())}};return e(a.previewEnabled()),a.previewsList().register(i),()=>{a.previewsList().unregister(i)}},[n,n.dragDropManager]),t},U6=t=>{let e=aX(),n=R.useContext(V6);if(!e)return null;let r=G.createElement(nX,{...t});return n!==null?fp.createPortal(r,n):r};U6.Context=j6;var ou;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(ou||(ou={}));class iX{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get delayMouseStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function oX(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function sX(t,e,n,r,a){if(!a)return!1;const i=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<a.length;++o){const s=a[o];if(s&&(s.start==null||i>=s.start)&&(s.end==null||i<=s.end))return!0}return!1}const lX={Left:1,Right:2,Center:4},uX={Left:0,Center:1,Right:2};function PE(t){return t.button===void 0||t.button===uX.Left}function cX(t){return t.buttons===void 0||(t.buttons&lX.Left)===0}function W6(t){return!!t.targetTouches}const dX=1;function pX(t){const e=t.nodeType===dX?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function hX(t,e){if(t.targetTouches.length===1)return Uy(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return Uy(t.touches[0])}function Uy(t,e){return W6(t)?hX(t,e):{x:t.clientX,y:t.clientY}}const G6=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Hf={[ou.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[ou.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[ou.keyboard]:{keydown:"keydown"}};class N0{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(Nt(!N0.isSetUp,"Cannot have two Touch backends at the same time."),N0.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(N0.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,a=!1){const i=G6?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Hf[o][n];s&&e.addEventListener(s,r,i)})}removeEventListener(e,n,r,a=!1){const i=G6?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Hf[o][n];s&&e.removeEventListener(s,r,i)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const a=i=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(i.type){case Hf.mouse.move:o={x:i.clientX,y:i.clientY};break;case Hf.touch.move:var s,l;o={x:((s=i.touches[0])===null||s===void 0?void 0:s.clientX)||0,y:((l=i.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,c=u&&n.contains(u);if(u===n||c)return this.handleMove(i,e)};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",a))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&pX(i)},this.handleTopMoveStartCapture=a=>{PE(a)&&(this.moveStartSourceIds=[])},this.handleMoveStart=a=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(a)},this.handleTopMoveStart=a=>{if(!PE(a))return;const i=Uy(a);i&&(W6(a)&&(this.lastTargetTouchFallback=a.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=a=>{if(!PE(a))return;const i=a.type===Hf.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,a),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(a,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=a=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:i,dragOverTargetIds:o}=this,s=this.options.enableHoverOutsideTarget,l=Uy(a,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&sX(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&oX(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),a.cancelable&&a.preventDefault();const c=(o||[]).map(m=>this.targetNodes.get(m)).filter(m=>!!m),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,c):this.document.elementsFromPoint(l.x,l.y),p=[];for(const m in d){if(!d.hasOwnProperty(m))continue;let y=d[m];for(y!=null&&p.push(y);y;)y=y.parentElement,y&&p.indexOf(y)===-1&&p.push(y)}const f=p.filter(m=>c.indexOf(m)>-1).map(m=>this._getDropTargetId(m)).filter(m=>!!m).filter((m,y,v)=>v.indexOf(m)===y);if(s)for(const m in this.targetNodes){const y=this.targetNodes.get(m);if(u&&y&&y.contains(u)&&f.indexOf(m)===-1){f.unshift(m);break}}f.reverse(),this.actions.hover(f,{clientOffset:l})},this._getDropTargetId=a=>{const i=this.targetNodes.keys();let o=i.next();for(;o.done===!1;){const s=o.value;if(a===this.targetNodes.get(s))return s;o=i.next()}},this.handleTopMoveEndCapture=a=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!cX(a)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}a.cancelable&&a.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=a=>{a.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new iX(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(ou.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(ou.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(ou.keyboard)}}const fX=function(t,e={},n={}){return new N0(t,e,n)};var H6,q6=fp;H6=q6.createRoot,q6.hydrateRoot;function gX(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const K6={};function AE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&K6[e[0]]||(typeof e[0]=="string"&&(K6[e[0]]=new Date),gX(...e))}const X6=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function Y6(t,e,n){t.loadNamespaces(e,X6(t,n))}function Q6(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,X6(t,r))}function mX(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],a=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=e.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!a||o(i,t)))}function yX(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(AE("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,t))return!1}}):mX(t,e,n)}const bX=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,vX={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},xX=t=>vX[t],wX=t=>t.replace(bX,xX);let kX={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:wX};function SX(){return kX}let CX;function EX(){return CX}const Z6=R.createContext();class IX{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const TX=(t,e)=>{const n=R.useRef();return R.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function J6(t,e,n,r){return t.getFixedT(e,n,r)}function NX(t,e,n,r){return R.useCallback(J6(t,e,n,r),[t,e,n,r])}function su(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:a}=R.useContext(Z6)||{},i=n||r||EX();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new IX),!i){AE("You will need to pass in an i18next instance by using initReactI18next");const C=(_,N)=>typeof N=="string"?N:N&&typeof N=="object"&&typeof N.defaultValue=="string"?N.defaultValue:Array.isArray(_)?_[_.length-1]:_,E=[C,{},!1];return E.t=C,E.i18n={},E.ready=!1,E}i.options.react&&i.options.react.wait!==void 0&&AE("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...SX(),...i.options.react,...e},{useSuspense:s,keyPrefix:l}=o;let u=t||a||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(C=>yX(C,i,o)),d=NX(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),p=()=>d,f=()=>J6(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),[m,y]=R.useState(p);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const b=TX(v),x=R.useRef(!0);R.useEffect(()=>{const{bindI18n:C,bindI18nStore:E}=o;x.current=!0,!c&&!s&&(e.lng?Q6(i,e.lng,u,()=>{x.current&&y(f)}):Y6(i,u,()=>{x.current&&y(f)})),c&&b&&b!==v&&x.current&&y(f);function _(){x.current&&y(f)}return C&&i&&i.on(C,_),E&&i&&i.store.on(E,_),()=>{x.current=!1,C&&i&&C.split(" ").forEach(N=>i.off(N,_)),E&&i&&E.split(" ").forEach(N=>i.store.off(N,_))}},[i,v]);const w=R.useRef(!0);R.useEffect(()=>{x.current&&!w.current&&y(p),w.current=!1},[i,l]);const S=[m,i,c];if(S.t=m,S.i18n=i,S.ready=c,c||!c&&!s)return S;throw new Promise(C=>{e.lng?Q6(i,e.lng,u,()=>C()):Y6(i,u,()=>C())})}function _X(t){let{i18n:e,defaultNS:n,children:r}=t;const a=R.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return R.createElement(Z6.Provider,{value:a},r)}/**
* @remix-run/router v1.15.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function lr(){return lr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lr.apply(this,arguments)}var yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yr||(yr={}));const eP="popstate";function RX(t){t===void 0&&(t={});function e(r,a){let{pathname:i,search:o,hash:s}=r.location;return qf("",{pathname:i,search:o,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:kc(a)}return OX(e,n,null,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $X(){return Math.random().toString(36).substr(2,8)}function tP(t,e){return{usr:t.state,key:t.key,idx:e}}function qf(t,e,n,r){return n===void 0&&(n=null),lr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qs(e):e,{state:n,key:e&&e.key||r||$X()})}function kc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OX(t,e,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s=yr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(lr({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=yr.Pop;let v=c(),b=v==null?null:v-u;u=v,l&&l({action:s,location:y.location,delta:b})}function p(v,b){s=yr.Push;let x=qf(y.location,v,b);n&&n(x,v),u=c()+1;let w=tP(x,u),S=y.createHref(x);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&l&&l({action:s,location:y.location,delta:1})}function f(v,b){s=yr.Replace;let x=qf(y.location,v,b);n&&n(x,v),u=c();let w=tP(x,u),S=y.createHref(x);o.replaceState(w,"",S),i&&l&&l({action:s,location:y.location,delta:0})}function m(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:kc(v);return x=x.replace(/ $/,"%20"),St(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let y={get action(){return s},get location(){return t(a,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(eP,d),l=v,()=>{a.removeEventListener(eP,d),l=null}},createHref(v){return e(a,v)},createURL:m,encodeLocation(v){let b=m(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:f,go(v){return o.go(v)}};return y}var ur;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ur||(ur={}));const MX=new Set(["lazy","caseSensitive","path","id","index","children"]);function PX(t){return t.index===!0}function DE(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((a,i)=>{let o=[...n,i],s=typeof a.id=="string"?a.id:o.join("-");if(St(a.index!==!0||!a.children,"Cannot specify children on an index route"),St(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),PX(a)){let l=lr({},a,e(a),{id:s});return r[s]=l,l}else{let l=lr({},a,e(a),{id:s,children:void 0});return r[s]=l,a.children&&(l.children=DE(a.children,e,o,r)),l}})}function mp(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Qs(e):e,a=ps(r.pathname||"/",n);if(a==null)return null;let i=rP(t);AX(i);let o=null;for(let s=0;o==null&&s<i.length;++s){let l=HX(a);o=WX(i[s],l)}return o}function nP(t,e){let{route:n,pathname:r,params:a}=t;return{id:n.id,pathname:r,params:a,data:e[n.id],handle:n.handle}}function rP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(St(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Zs([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(St(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rP(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:VX(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of aP(i.path))a(i,o,l)}),e}function aP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=aP(r.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function AX(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UX(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DX=/^:[\w-]+$/,LX=3,FX=2,BX=1,zX=10,jX=-2,iP=t=>t==="*";function VX(t,e){let n=t.split("/"),r=n.length;return n.some(iP)&&(r+=jX),e&&(r+=FX),n.filter(a=>!iP(a)).reduce((a,i)=>a+(DX.test(i)?LX:i===""?BX:zX),r)}function UX(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function WX(t,e){let{routesMeta:n}=t,r={},a="/",i=[];for(let o=0;o<n.length;++o){let s=n[o],l=o===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",c=Wy({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=s.route;i.push({params:r,pathname:Zs([a,c.pathname]),pathnameBase:XX(Zs([a,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(a=Zs([a,c.pathnameBase]))}return i}function Wy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GX(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((l,u,c)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let m=s[c]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const f=s[c];return p&&!f?l[d]=void 0:l[d]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function GX(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,s)=>(r.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function HX(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ps(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qX(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Qs(t):t;return{pathname:n?n.startsWith("/")?n:KX(n,e):e,search:YX(r),hash:QX(a)}}function KX(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function LE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FE(t,e){let n=oP(t);return e?n.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function BE(t,e,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=Qs(t):(a=lr({},t),St(!a.pathname||!a.pathname.includes("?"),LE("?","pathname","search",a)),St(!a.pathname||!a.pathname.includes("#"),LE("#","pathname","hash",a)),St(!a.search||!a.search.includes("#"),LE("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;a.pathname=p.join("/")}s=d>=0?e[d]:"/"}let l=qX(a,s),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Zs=t=>t.join("/").replace(/\/\/+/g,"/"),XX=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),YX=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QX=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class zE{constructor(e,n,r,a){a===void 0&&(a=!1),this.status=e,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function sP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lP=["post","put","patch","delete"],ZX=new Set(lP),JX=["get",...lP],eY=new Set(JX),tY=new Set([301,302,303,307,308]),nY=new Set([307,308]),jE={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rY={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Kf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},uP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aY=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),cP="remix-router-transitions";function iY(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;St(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let ue=t.detectErrorBoundary;a=ge=>({hasErrorBoundary:ue(ge)})}else a=aY;let i={},o=DE(t.routes,a,void 0,i),s,l=t.basename||"/",u=lr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,p=null,f=null,m=null,y=t.hydrationData!=null,v=mp(o,t.history.location,l),b=null;if(v==null){let ue=ro(404,{pathname:t.history.location.pathname}),{matches:ge,route:ke}=vP(o);v=ge,b={[ke.id]:ue}}let x,w=v.some(ue=>ue.route.lazy),S=v.some(ue=>ue.route.loader);if(w)x=!1;else if(!S)x=!0;else if(u.v7_partialHydration){let ue=t.hydrationData?t.hydrationData.loaderData:null,ge=t.hydrationData?t.hydrationData.errors:null;x=v.every(ke=>ke.route.loader&&ke.route.loader.hydrate!==!0&&(ue&&ue[ke.route.id]!==void 0||ge&&ge[ke.route.id]!==void 0))}else x=t.hydrationData!=null;let C,E={historyAction:t.history.action,location:t.history.location,matches:v,initialized:x,navigation:jE,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},_=yr.Pop,N=!1,M,P=!1,L=new Map,j=null,B=!1,K=!1,X=[],Z=[],H=new Map,F=0,Y=-1,Q=new Map,ne=new Set,se=new Map,pe=new Map,de=new Set,ie=new Map,xe=new Map,q=!1;function oe(){if(c=t.history.listen(ue=>{let{action:ge,location:ke,delta:Me}=ue;if(q){q=!1;return}gp(xe.size===0||Me!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ge=wi({currentLocation:E.location,nextLocation:ke,historyAction:ge});if(Ge&&Me!=null){q=!0,t.history.go(Me*-1),xi(Ge,{state:"blocked",location:ke,proceed(){xi(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:ke}),t.history.go(Me)},reset(){let bt=new Map(E.blockers);bt.set(Ge,Kf),Ie({blockers:bt})}});return}return Oe(ge,ke)}),n){mY(e,L);let ue=()=>yY(e,L);e.addEventListener("pagehide",ue),j=()=>e.removeEventListener("pagehide",ue)}return E.initialized||Oe(yr.Pop,E.location,{initialHydration:!0}),C}function he(){c&&c(),j&&j(),d.clear(),M&&M.abort(),E.fetchers.forEach((ue,ge)=>Yn(ge)),E.blockers.forEach((ue,ge)=>Ja(ge))}function Ee(ue){return d.add(ue),()=>d.delete(ue)}function Ie(ue,ge){ge===void 0&&(ge={}),E=lr({},E,ue);let ke=[],Me=[];u.v7_fetcherPersist&&E.fetchers.forEach((Ge,bt)=>{Ge.state==="idle"&&(de.has(bt)?Me.push(bt):ke.push(bt))}),[...d].forEach(Ge=>Ge(E,{deletedFetchers:Me,unstable_viewTransitionOpts:ge.viewTransitionOpts,unstable_flushSync:ge.flushSync===!0})),u.v7_fetcherPersist&&(ke.forEach(Ge=>E.fetchers.delete(Ge)),Me.forEach(Ge=>Yn(Ge)))}function _e(ue,ge,ke){var Me,Ge;let{flushSync:bt}=ke===void 0?{}:ke,ut=E.actionData!=null&&E.navigation.formMethod!=null&&Lo(E.navigation.formMethod)&&E.navigation.state==="loading"&&((Me=ue.state)==null?void 0:Me._isRedirect)!==!0,ot;ge.actionData?Object.keys(ge.actionData).length>0?ot=ge.actionData:ot=null:ut?ot=E.actionData:ot=null;let tt=ge.loaderData?bP(E.loaderData,ge.loaderData,ge.matches||[],ge.errors):E.loaderData,Mt=E.blockers;Mt.size>0&&(Mt=new Map(Mt),Mt.forEach((cn,gn)=>Mt.set(gn,Kf)));let An=N===!0||E.navigation.formMethod!=null&&Lo(E.navigation.formMethod)&&((Ge=ue.state)==null?void 0:Ge._isRedirect)!==!0;s&&(o=s,s=void 0),B||_===yr.Pop||(_===yr.Push?t.history.push(ue,ue.state):_===yr.Replace&&t.history.replace(ue,ue.state));let xt;if(_===yr.Pop){let cn=L.get(E.location.pathname);cn&&cn.has(ue.pathname)?xt={currentLocation:E.location,nextLocation:ue}:L.has(ue.pathname)&&(xt={currentLocation:ue,nextLocation:E.location})}else if(P){let cn=L.get(E.location.pathname);cn?cn.add(ue.pathname):(cn=new Set([ue.pathname]),L.set(E.location.pathname,cn)),xt={currentLocation:E.location,nextLocation:ue}}Ie(lr({},ge,{actionData:ot,loaderData:tt,historyAction:_,location:ue,initialized:!0,navigation:jE,revalidation:"idle",restoreScrollPosition:Yo(ue,ge.matches||E.matches),preventScrollReset:An,blockers:Mt}),{viewTransitionOpts:xt,flushSync:bt===!0}),_=yr.Pop,N=!1,P=!1,B=!1,K=!1,X=[],Z=[]}async function Fe(ue,ge){if(typeof ue=="number"){t.history.go(ue);return}let ke=VE(E.location,E.matches,l,u.v7_prependBasename,ue,u.v7_relativeSplatPath,ge?.fromRouteId,ge?.relative),{path:Me,submission:Ge,error:bt}=dP(u.v7_normalizeFormMethod,!1,ke,ge),ut=E.location,ot=qf(E.location,Me,ge&&ge.state);ot=lr({},ot,t.history.encodeLocation(ot));let tt=ge&&ge.replace!=null?ge.replace:void 0,Mt=yr.Push;tt===!0?Mt=yr.Replace:tt===!1||Ge!=null&&Lo(Ge.formMethod)&&Ge.formAction===E.location.pathname+E.location.search&&(Mt=yr.Replace);let An=ge&&"preventScrollReset"in ge?ge.preventScrollReset===!0:void 0,xt=(ge&&ge.unstable_flushSync)===!0,cn=wi({currentLocation:ut,nextLocation:ot,historyAction:Mt});if(cn){xi(cn,{state:"blocked",location:ot,proceed(){xi(cn,{state:"proceeding",proceed:void 0,reset:void 0,location:ot}),Fe(ue,ge)},reset(){let gn=new Map(E.blockers);gn.set(cn,Kf),Ie({blockers:gn})}});return}return await Oe(Mt,ot,{submission:Ge,pendingError:bt,preventScrollReset:An,replace:ge&&ge.replace,enableViewTransition:ge&&ge.unstable_viewTransition,flushSync:xt})}function Xe(){if(Zt(),Ie({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){Oe(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}Oe(_||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation})}}async function Oe(ue,ge,ke){M&&M.abort(),M=null,_=ue,B=(ke&&ke.startUninterruptedRevalidation)===!0,Sd(E.location,E.matches),N=(ke&&ke.preventScrollReset)===!0,P=(ke&&ke.enableViewTransition)===!0;let Me=s||o,Ge=ke&&ke.overrideNavigation,bt=mp(Me,ge,l),ut=(ke&&ke.flushSync)===!0;if(!bt){let gn=ro(404,{pathname:ge.pathname}),{matches:$r,route:ar}=vP(Me);_s(),_e(ge,{matches:$r,loaderData:{},errors:{[ar.id]:gn}},{flushSync:ut});return}if(E.initialized&&!K&&cY(E.location,ge)&&!(ke&&ke.submission&&Lo(ke.submission.formMethod))){_e(ge,{matches:bt},{flushSync:ut});return}M=new AbortController;let ot=Yf(t.history,ge,M.signal,ke&&ke.submission),tt,Mt;if(ke&&ke.pendingError)Mt={[Qf(bt).route.id]:ke.pendingError};else if(ke&&ke.submission&&Lo(ke.submission.formMethod)){let gn=await lt(ot,ge,ke.submission,bt,{replace:ke.replace,flushSync:ut});if(gn.shortCircuited)return;tt=gn.pendingActionData,Mt=gn.pendingActionError,Ge=HE(ge,ke.submission),ut=!1,ot=new Request(ot.url,{signal:ot.signal})}let{shortCircuited:An,loaderData:xt,errors:cn}=await Je(ot,ge,bt,Ge,ke&&ke.submission,ke&&ke.fetcherSubmission,ke&&ke.replace,ke&&ke.initialHydration===!0,ut,tt,Mt);An||(M=null,_e(ge,lr({matches:bt},tt?{actionData:tt}:{},{loaderData:xt,errors:cn})))}async function lt(ue,ge,ke,Me,Ge){Ge===void 0&&(Ge={}),Zt();let bt=fY(ge,ke);Ie({navigation:bt},{flushSync:Ge.flushSync===!0});let ut,ot=GE(Me,ge);if(!ot.route.action&&!ot.route.lazy)ut={type:ur.error,error:ro(405,{method:ue.method,pathname:ge.pathname,routeId:ot.route.id})};else if(ut=await Xf("action",ue,ot,Me,i,a,l,u.v7_relativeSplatPath),ue.signal.aborted)return{shortCircuited:!0};if(Cc(ut)){let tt;return Ge&&Ge.replace!=null?tt=Ge.replace:tt=ut.location===E.location.pathname+E.location.search,await Vt(E,ut,{submission:ke,replace:tt}),{shortCircuited:!0}}if(yp(ut)){let tt=Qf(Me,ot.route.id);return(Ge&&Ge.replace)!==!0&&(_=yr.Push),{pendingActionData:{},pendingActionError:{[tt.route.id]:ut.error}}}if(Sc(ut))throw ro(400,{type:"defer-action"});return{pendingActionData:{[ot.route.id]:ut.data}}}async function Je(ue,ge,ke,Me,Ge,bt,ut,ot,tt,Mt,An){let xt=Me||HE(ge,Ge),cn=Ge||bt||CP(xt),gn=s||o,[$r,ar]=pP(t.history,E,ke,cn,ge,u.v7_partialHydration&&ot===!0,K,X,Z,de,se,ne,gn,l,Mt,An);if(_s(nn=>!(ke&&ke.some(dn=>dn.route.id===nn))||$r&&$r.some(dn=>dn.route.id===nn)),Y=++F,$r.length===0&&ar.length===0){let nn=wo();return _e(ge,lr({matches:ke,loaderData:{},errors:An||null},Mt?{actionData:Mt}:{},nn?{fetchers:new Map(E.fetchers)}:{}),{flushSync:tt}),{shortCircuited:!0}}if(!B&&(!u.v7_partialHydration||!ot)){ar.forEach(dn=>{let wr=E.fetchers.get(dn.key),Dt=Zf(void 0,wr?wr.data:void 0);E.fetchers.set(dn.key,Dt)});let nn=Mt||E.actionData;Ie(lr({navigation:xt},nn?Object.keys(nn).length===0?{actionData:null}:{actionData:nn}:{},ar.length>0?{fetchers:new Map(E.fetchers)}:{}),{flushSync:tt})}ar.forEach(nn=>{H.has(nn.key)&&Rn(nn.key),nn.controller&&H.set(nn.key,nn.controller)});let fr=()=>ar.forEach(nn=>Rn(nn.key));M&&M.signal.addEventListener("abort",fr);let{results:Qo,loaderResults:zi,fetcherResults:ya}=await Qt(E.matches,ke,$r,ar,ue);if(ue.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",fr),ar.forEach(nn=>H.delete(nn.key));let ko=xP(Qo);if(ko){if(ko.idx>=$r.length){let nn=ar[ko.idx-$r.length].key;ne.add(nn)}return await Vt(E,ko.result,{replace:ut}),{shortCircuited:!0}}let{loaderData:Hu,errors:qu}=yP(E,ke,$r,zi,An,ar,ya,ie);ie.forEach((nn,dn)=>{nn.subscribe(wr=>{(wr||nn.done)&&ie.delete(dn)})});let Tl=wo(),Zo=vi(Y),So=Tl||Zo||ar.length>0;return lr({loaderData:Hu,errors:qu},So?{fetchers:new Map(E.fetchers)}:{})}function nt(ue,ge,ke,Me){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(ue)&&Rn(ue);let Ge=(Me&&Me.unstable_flushSync)===!0,bt=s||o,ut=VE(E.location,E.matches,l,u.v7_prependBasename,ke,u.v7_relativeSplatPath,ge,Me?.relative),ot=mp(bt,ut,l);if(!ot){Et(ue,ge,ro(404,{pathname:ut}),{flushSync:Ge});return}let{path:tt,submission:Mt,error:An}=dP(u.v7_normalizeFormMethod,!0,ut,Me);if(An){Et(ue,ge,An,{flushSync:Ge});return}let xt=GE(ot,tt);if(N=(Me&&Me.preventScrollReset)===!0,Mt&&Lo(Mt.formMethod)){et(ue,ge,tt,xt,ot,Ge,Mt);return}se.set(ue,{routeId:ge,path:tt}),sn(ue,ge,tt,xt,ot,Ge,Mt)}async function et(ue,ge,ke,Me,Ge,bt,ut){if(Zt(),se.delete(ue),!Me.route.action&&!Me.route.lazy){let dn=ro(405,{method:ut.formMethod,pathname:ke,routeId:ge});Et(ue,ge,dn,{flushSync:bt});return}let ot=E.fetchers.get(ue);Ot(ue,gY(ut,ot),{flushSync:bt});let tt=new AbortController,Mt=Yf(t.history,ke,tt.signal,ut);H.set(ue,tt);let An=F,xt=await Xf("action",Mt,Me,Ge,i,a,l,u.v7_relativeSplatPath);if(Mt.signal.aborted){H.get(ue)===tt&&H.delete(ue);return}if(u.v7_fetcherPersist&&de.has(ue)){if(Cc(xt)||yp(xt)){Ot(ue,lu(void 0));return}}else{if(Cc(xt))if(H.delete(ue),Y>An){Ot(ue,lu(void 0));return}else return ne.add(ue),Ot(ue,Zf(ut)),Vt(E,xt,{fetcherSubmission:ut});if(yp(xt)){Et(ue,ge,xt.error);return}}if(Sc(xt))throw ro(400,{type:"defer-action"});let cn=E.navigation.location||E.location,gn=Yf(t.history,cn,tt.signal),$r=s||o,ar=E.navigation.state!=="idle"?mp($r,E.navigation.location,l):E.matches;St(ar,"Didn't find any matches after fetcher action");let fr=++F;Q.set(ue,fr);let Qo=Zf(ut,xt.data);E.fetchers.set(ue,Qo);let[zi,ya]=pP(t.history,E,ar,ut,cn,!1,K,X,Z,de,se,ne,$r,l,{[Me.route.id]:xt.data},void 0);ya.filter(dn=>dn.key!==ue).forEach(dn=>{let wr=dn.key,Dt=E.fetchers.get(wr),Nl=Zf(void 0,Dt?Dt.data:void 0);E.fetchers.set(wr,Nl),H.has(wr)&&Rn(wr),dn.controller&&H.set(wr,dn.controller)}),Ie({fetchers:new Map(E.fetchers)});let ko=()=>ya.forEach(dn=>Rn(dn.key));tt.signal.addEventListener("abort",ko);let{results:Hu,loaderResults:qu,fetcherResults:Tl}=await Qt(E.matches,ar,zi,ya,gn);if(tt.signal.aborted)return;tt.signal.removeEventListener("abort",ko),Q.delete(ue),H.delete(ue),ya.forEach(dn=>H.delete(dn.key));let Zo=xP(Hu);if(Zo){if(Zo.idx>=zi.length){let dn=ya[Zo.idx-zi.length].key;ne.add(dn)}return Vt(E,Zo.result)}let{loaderData:So,errors:nn}=yP(E,E.matches,zi,qu,void 0,ya,Tl,ie);if(E.fetchers.has(ue)){let dn=lu(xt.data);E.fetchers.set(ue,dn)}vi(fr),E.navigation.state==="loading"&&fr>Y?(St(_,"Expected pending action"),M&&M.abort(),_e(E.navigation.location,{matches:ar,loaderData:So,errors:nn,fetchers:new Map(E.fetchers)})):(Ie({errors:nn,loaderData:bP(E.loaderData,So,ar,nn),fetchers:new Map(E.fetchers)}),K=!1)}async function sn(ue,ge,ke,Me,Ge,bt,ut){let ot=E.fetchers.get(ue);Ot(ue,Zf(ut,ot?ot.data:void 0),{flushSync:bt});let tt=new AbortController,Mt=Yf(t.history,ke,tt.signal);H.set(ue,tt);let An=F,xt=await Xf("loader",Mt,Me,Ge,i,a,l,u.v7_relativeSplatPath);if(Sc(xt)&&(xt=await SP(xt,Mt.signal,!0)||xt),H.get(ue)===tt&&H.delete(ue),!Mt.signal.aborted){if(de.has(ue)){Ot(ue,lu(void 0));return}if(Cc(xt))if(Y>An){Ot(ue,lu(void 0));return}else{ne.add(ue),await Vt(E,xt);return}if(yp(xt)){Et(ue,ge,xt.error);return}St(!Sc(xt),"Unhandled fetcher deferred data"),Ot(ue,lu(xt.data))}}async function Vt(ue,ge,ke){let{submission:Me,fetcherSubmission:Ge,replace:bt}=ke===void 0?{}:ke;ge.revalidate&&(K=!0);let ut=qf(ue.location,ge.location,{_isRedirect:!0});if(St(ut,"Expected a location on the redirect navigation"),n){let cn=!1;if(ge.reloadDocument)cn=!0;else if(uP.test(ge.location)){const gn=t.history.createURL(ge.location);cn=gn.origin!==e.location.origin||ps(gn.pathname,l)==null}if(cn){bt?e.location.replace(ge.location):e.location.assign(ge.location);return}}M=null;let ot=bt===!0?yr.Replace:yr.Push,{formMethod:tt,formAction:Mt,formEncType:An}=ue.navigation;!Me&&!Ge&&tt&&Mt&&An&&(Me=CP(ue.navigation));let xt=Me||Ge;if(nY.has(ge.status)&&xt&&Lo(xt.formMethod))await Oe(ot,ut,{submission:lr({},xt,{formAction:ge.location}),preventScrollReset:N});else{let cn=HE(ut,Me);await Oe(ot,ut,{overrideNavigation:cn,fetcherSubmission:Ge,preventScrollReset:N})}}async function Qt(ue,ge,ke,Me,Ge){let bt=await Promise.all([...ke.map(tt=>Xf("loader",Ge,tt,ge,i,a,l,u.v7_relativeSplatPath)),...Me.map(tt=>tt.matches&&tt.match&&tt.controller?Xf("loader",Yf(t.history,tt.path,tt.controller.signal),tt.match,tt.matches,i,a,l,u.v7_relativeSplatPath):{type:ur.error,error:ro(404,{pathname:tt.path})})]),ut=bt.slice(0,ke.length),ot=bt.slice(ke.length);return await Promise.all([kP(ue,ke,ut,ut.map(()=>Ge.signal),!1,E.loaderData),kP(ue,Me.map(tt=>tt.match),ot,Me.map(tt=>tt.controller?tt.controller.signal:null),!0)]),{results:bt,loaderResults:ut,fetcherResults:ot}}function Zt(){K=!0,X.push(..._s()),se.forEach((ue,ge)=>{H.has(ge)&&(Z.push(ge),Rn(ge))})}function Ot(ue,ge,ke){ke===void 0&&(ke={}),E.fetchers.set(ue,ge),Ie({fetchers:new Map(E.fetchers)},{flushSync:(ke&&ke.flushSync)===!0})}function Et(ue,ge,ke,Me){Me===void 0&&(Me={});let Ge=Qf(E.matches,ge);Yn(ue),Ie({errors:{[Ge.route.id]:ke},fetchers:new Map(E.fetchers)},{flushSync:(Me&&Me.flushSync)===!0})}function jn(ue){return u.v7_fetcherPersist&&(pe.set(ue,(pe.get(ue)||0)+1),de.has(ue)&&de.delete(ue)),E.fetchers.get(ue)||rY}function Yn(ue){let ge=E.fetchers.get(ue);H.has(ue)&&!(ge&&ge.state==="loading"&&Q.has(ue))&&Rn(ue),se.delete(ue),Q.delete(ue),ne.delete(ue),de.delete(ue),E.fetchers.delete(ue)}function ja(ue){if(u.v7_fetcherPersist){let ge=(pe.get(ue)||0)-1;ge<=0?(pe.delete(ue),de.add(ue)):pe.set(ue,ge)}else Yn(ue);Ie({fetchers:new Map(E.fetchers)})}function Rn(ue){let ge=H.get(ue);St(ge,"Expected fetch controller: "+ue),ge.abort(),H.delete(ue)}function Za(ue){for(let ge of ue){let ke=jn(ge),Me=lu(ke.data);E.fetchers.set(ge,Me)}}function wo(){let ue=[],ge=!1;for(let ke of ne){let Me=E.fetchers.get(ke);St(Me,"Expected fetcher: "+ke),Me.state==="loading"&&(ne.delete(ke),ue.push(ke),ge=!0)}return Za(ue),ge}function vi(ue){let ge=[];for(let[ke,Me]of Q)if(Me<ue){let Ge=E.fetchers.get(ke);St(Ge,"Expected fetcher: "+ke),Ge.state==="loading"&&(Rn(ke),Q.delete(ke),ge.push(ke))}return Za(ge),ge.length>0}function fn(ue,ge){let ke=E.blockers.get(ue)||Kf;return xe.get(ue)!==ge&&xe.set(ue,ge),ke}function Ja(ue){E.blockers.delete(ue),xe.delete(ue)}function xi(ue,ge){let ke=E.blockers.get(ue)||Kf;St(ke.state==="unblocked"&&ge.state==="blocked"||ke.state==="blocked"&&ge.state==="blocked"||ke.state==="blocked"&&ge.state==="proceeding"||ke.state==="blocked"&&ge.state==="unblocked"||ke.state==="proceeding"&&ge.state==="unblocked","Invalid blocker state transition: "+ke.state+" -> "+ge.state);let Me=new Map(E.blockers);Me.set(ue,ge),Ie({blockers:Me})}function wi(ue){let{currentLocation:ge,nextLocation:ke,historyAction:Me}=ue;if(xe.size===0)return;xe.size>1&&gp(!1,"A router only supports one blocker at a time");let Ge=Array.from(xe.entries()),[bt,ut]=Ge[Ge.length-1],ot=E.blockers.get(bt);if(!(ot&&ot.state==="proceeding")&&ut({currentLocation:ge,nextLocation:ke,historyAction:Me}))return bt}function _s(ue){let ge=[];return ie.forEach((ke,Me)=>{(!ue||ue(Me))&&(ke.cancel(),ge.push(Me),ie.delete(Me))}),ge}function ma(ue,ge,ke){if(p=ue,m=ge,f=ke||null,!y&&E.navigation===jE){y=!0;let Me=Yo(E.location,E.matches);Me!=null&&Ie({restoreScrollPosition:Me})}return()=>{p=null,m=null,f=null}}function Il(ue,ge){return f&&f(ue,ge.map(ke=>nP(ke,E.loaderData)))||ue.key}function Sd(ue,ge){if(p&&m){let ke=Il(ue,ge);p[ke]=m()}}function Yo(ue,ge){if(p){let ke=Il(ue,ge),Me=p[ke];if(typeof Me=="number")return Me}return null}function Ut(ue){i={},s=DE(ue,a,void 0,i)}return C={get basename(){return l},get future(){return u},get state(){return E},get routes(){return o},get window(){return e},initialize:oe,subscribe:Ee,enableScrollRestoration:ma,navigate:Fe,fetch:nt,revalidate:Xe,createHref:ue=>t.history.createHref(ue),encodeLocation:ue=>t.history.encodeLocation(ue),getFetcher:jn,deleteFetcher:ja,dispose:he,getBlocker:fn,deleteBlocker:Ja,_internalFetchControllers:H,_internalActiveDeferreds:ie,_internalSetRoutes:Ut},C}function oY(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function VE(t,e,n,r,a,i,o,s){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let c=BE(a||".",FE(l,i),ps(t.pathname,n)||t.pathname,s==="path");return a==null&&(c.search=t.search,c.hash=t.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!WE(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:Zs([n,c.pathname])),kc(c)}function dP(t,e,n,r){if(!r||!oY(r))return{path:n};if(r.formMethod&&!hY(r.formMethod))return{path:n,error:ro(405,{method:r.formMethod})};let a=()=>({path:n,error:ro(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),s=wP(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Lo(o))return a();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,m)=>{let[y,v]=m;return""+f+y+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Lo(o))return a();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return a()}}}St(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=UE(r.formData),u=r.formData;else if(r.body instanceof FormData)l=UE(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=mP(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=mP(l)}catch{return a()}let c={formMethod:o,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Lo(c.formMethod))return{path:n,submission:c};let d=Qs(n);return e&&d.search&&WE(d.search)&&l.append("index",""),d.search="?"+l,{path:kc(d),submission:c}}function sY(t,e){let n=t;if(e){let r=t.findIndex(a=>a.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function pP(t,e,n,r,a,i,o,s,l,u,c,d,p,f,m,y){let v=y?Object.values(y)[0]:m?Object.values(m)[0]:void 0,b=t.createURL(e.location),x=t.createURL(a),w=y?Object.keys(y)[0]:void 0,S=sY(n,w).filter((E,_)=>{let{route:N}=E;if(N.lazy)return!0;if(N.loader==null)return!1;if(i)return N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(lY(e.loaderData,e.matches[_],E)||s.some(L=>L===E.route.id))return!0;let M=e.matches[_],P=E;return fP(E,lr({currentUrl:b,currentParams:M.params,nextUrl:x,nextParams:P.params},r,{actionResult:v,defaultShouldRevalidate:o||b.pathname+b.search===x.pathname+x.search||b.search!==x.search||hP(M,P)}))}),C=[];return c.forEach((E,_)=>{if(i||!n.some(j=>j.route.id===E.routeId)||u.has(_))return;let N=mp(p,E.path,f);if(!N){C.push({key:_,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let M=e.fetchers.get(_),P=GE(N,E.path),L=!1;d.has(_)?L=!1:l.includes(_)?L=!0:M&&M.state!=="idle"&&M.data===void 0?L=o:L=fP(P,lr({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})),L&&C.push({key:_,routeId:E.routeId,path:E.path,matches:N,match:P,controller:new AbortController})}),[S,C]}function lY(t,e,n){let r=!e||n.route.id!==e.route.id,a=t[n.route.id]===void 0;return r||a}function hP(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function fP(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function gP(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let a=n[t.id];St(a,"No route found in manifest");let i={};for(let o in r){let s=a[o]!==void 0&&o!=="hasErrorBoundary";gp(!s,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!s&&!MX.has(o)&&(i[o]=r[o])}Object.assign(a,i),Object.assign(a,lr({},e(a),{lazy:void 0}))}async function Xf(t,e,n,r,a,i,o,s,l){l===void 0&&(l={});let u,c,d,p=y=>{let v,b=new Promise((x,w)=>v=w);return d=()=>v(),e.signal.addEventListener("abort",d),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let v,b=await Promise.all([p(y).catch(x=>{v=x}),gP(n.route,i,a)]);if(v)throw v;c=b[0]}else if(await gP(n.route,i,a),y=n.route[t],y)c=await p(y);else if(t==="action"){let v=new URL(e.url),b=v.pathname+v.search;throw ro(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:ur.data,data:void 0};else if(y)c=await p(y);else{let v=new URL(e.url),b=v.pathname+v.search;throw ro(404,{pathname:b})}St(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){u=ur.error,c=y}finally{d&&e.signal.removeEventListener("abort",d)}if(pY(c)){let y=c.status;if(tY.has(y)){let b=c.headers.get("Location");if(St(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!uP.test(b))b=VE(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,s);else if(!l.isStaticRequest){let x=new URL(e.url),w=b.startsWith("//")?new URL(x.protocol+b):new URL(b),S=ps(w.pathname,o)!=null;w.origin===x.origin&&S&&(b=w.pathname+w.search+w.hash)}if(l.isStaticRequest)throw c.headers.set("Location",b),c;return{type:ur.redirect,status:y,location:b,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===ur.error?ur.error:ur.data,response:c};let v;try{let b=c.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?c.body==null?v=null:v=await c.json():v=await c.text()}catch(b){return{type:ur.error,error:b}}return u===ur.error?{type:u,error:new zE(y,c.statusText,v),headers:c.headers}:{type:ur.data,data:v,statusCode:c.status,headers:c.headers}}if(u===ur.error)return{type:u,error:c};if(dY(c)){var f,m;return{type:ur.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((m=c.init)==null?void 0:m.headers)&&new Headers(c.init.headers)}}return{type:ur.data,data:c}}function Yf(t,e,n,r){let a=t.createURL(wP(e)).toString(),i={signal:n};if(r&&Lo(r.formMethod)){let{formMethod:o,formEncType:s}=r;i.method=o.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=UE(r.formData):i.body=r.formData}return new Request(a,i)}function UE(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function mP(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function uY(t,e,n,r,a){let i={},o=null,s,l=!1,u={};return n.forEach((c,d)=>{let p=e[d].route.id;if(St(!Cc(c),"Cannot handle redirect results in processLoaderData"),yp(c)){let f=Qf(t,p),m=c.error;r&&(m=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=m),i[p]=void 0,l||(l=!0,s=sP(c.error)?c.error.status:500),c.headers&&(u[p]=c.headers)}else Sc(c)?(a.set(p,c.deferredData),i[p]=c.deferredData.data):i[p]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(s=c.statusCode),c.headers&&(u[p]=c.headers)}),r&&(o=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:o,statusCode:s||200,loaderHeaders:u}}function yP(t,e,n,r,a,i,o,s){let{loaderData:l,errors:u}=uY(e,n,r,a,s);for(let c=0;c<i.length;c++){let{key:d,match:p,controller:f}=i[c];St(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let m=o[c];if(!(f&&f.signal.aborted))if(yp(m)){let y=Qf(t.matches,p?.route.id);u&&u[y.route.id]||(u=lr({},u,{[y.route.id]:m.error})),t.fetchers.delete(d)}else if(Cc(m))St(!1,"Unhandled fetcher revalidation redirect");else if(Sc(m))St(!1,"Unhandled fetcher deferred data");else{let y=lu(m.data);t.fetchers.set(d,y)}}return{loaderData:l,errors:u}}function bP(t,e,n,r){let a=lr({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(a[o]=e[o]):t[o]!==void 0&&i.route.loader&&(a[o]=t[o]),r&&r.hasOwnProperty(o))break}return a}function Qf(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function vP(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ro(t,e){let{pathname:n,routeId:r,method:a,type:i}=e===void 0?{}:e,o="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(o="Bad Request",a&&n&&r?s="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?s="defer() is not supported in actions":i==="invalid-body"&&(s="Unable to encode submission body")):t===403?(o="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",s='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",a&&n&&r?s="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new zE(t||500,o,new Error(s),!0)}function xP(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Cc(n))return{result:n,idx:e}}}function wP(t){let e=typeof t=="string"?Qs(t):t;return kc(lr({},e,{hash:""}))}function cY(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Sc(t){return t.type===ur.deferred}function yp(t){return t.type===ur.error}function Cc(t){return(t&&t.type)===ur.redirect}function dY(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function pY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function hY(t){return eY.has(t.toLowerCase())}function Lo(t){return ZX.has(t.toLowerCase())}async function kP(t,e,n,r,a,i){for(let o=0;o<n.length;o++){let s=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!hP(u,l)&&(i&&i[l.route.id])!==void 0;if(Sc(s)&&(a||c)){let d=r[o];St(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await SP(s,d,a).then(p=>{p&&(n[o]=p||n[o])})}}}async function SP(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ur.data,data:t.deferredData.unwrappedData}}catch(r){return{type:ur.error,error:r}}return{type:ur.data,data:t.deferredData.data}}}function WE(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function GE(t,e){let n=typeof e=="string"?Qs(e).search:e.search;if(t[t.length-1].route.index&&WE(n||""))return t[t.length-1];let r=oP(t);return r[r.length-1]}function CP(t){let{formMethod:e,formAction:n,formEncType:r,text:a,formData:i,json:o}=t;if(!(!e||!n||!r)){if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function HE(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function fY(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Zf(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function gY(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function lu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function mY(t,e){try{let n=t.sessionStorage.getItem(cP);if(n){let r=JSON.parse(n);for(let[a,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(a,new Set(i||[]))}}catch{}}function yY(t,e){if(e.size>0){let n={};for(let[r,a]of e)n[r]=[...a];try{t.sessionStorage.setItem(cP,JSON.stringify(n))}catch(r){gp(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
* React Router v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jf.apply(this,arguments)}const eg=R.createContext(null),Gy=R.createContext(null),Js=R.createContext(null),Hy=R.createContext(null),uu=R.createContext({outlet:null,matches:[],isDataRoute:!1}),EP=R.createContext(null);function bY(t,e){let{relative:n}=e===void 0?{}:e;bp()||St(!1);let{basename:r,navigator:a}=R.useContext(Js),{hash:i,pathname:o,search:s}=ao(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Zs([r,o])),a.createHref({pathname:l,search:s,hash:i})}function bp(){return R.useContext(Hy)!=null}function Ec(){return bp()||St(!1),R.useContext(Hy).location}function cu(t){bp()||St(!1);let{pathname:e}=Ec();return R.useMemo(()=>Wy(t,e),[e,t])}function IP(t){R.useContext(Js).static||R.useLayoutEffect(t)}function vY(){let{isDataRoute:t}=R.useContext(uu);return t?PY():xY()}function xY(){bp()||St(!1);let t=R.useContext(eg),{basename:e,future:n,navigator:r}=R.useContext(Js),{matches:a}=R.useContext(uu),{pathname:i}=Ec(),o=JSON.stringify(FE(a,n.v7_relativeSplatPath)),s=R.useRef(!1);return IP(()=>{s.current=!0}),R.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let c=BE(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Zs([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,o,i,t])}const wY=R.createContext(null);function kY(t){let e=R.useContext(uu).outlet;return e&&R.createElement(wY.Provider,{value:t},e)}function ao(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Js),{matches:a}=R.useContext(uu),{pathname:i}=Ec(),o=JSON.stringify(FE(a,r.v7_relativeSplatPath));return R.useMemo(()=>BE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function SY(t,e,n,r){bp()||St(!1);let{navigator:a}=R.useContext(Js),{matches:i}=R.useContext(uu),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Ec(),c;if(e){var d;let v=typeof e=="string"?Qs(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||St(!1),c=v}else c=u;let p=c.pathname||"/",f=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=mp(t,{pathname:f}),y=NY(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Zs([l,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Zs([l,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?R.createElement(Hy.Provider,{value:{location:Jf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:yr.Pop}},y):y}function CY(){let t=MY(),e=sP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:r},n):null,null)}const EY=R.createElement(CY,null);class IY extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(uu.Provider,{value:this.props.routeContext},R.createElement(EP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TY(t){let{routeContext:e,match:n,children:r}=t,a=R.useContext(eg);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(uu.Provider,{value:e},r)}function NY(t,e,n,r){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(a=n)==null?void 0:a.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&s?.[d.route.id]);c>=0||St(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:f}=n,m=d.route.loader&&p[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,p)=>{let f,m=!1,y=null,v=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||EY,l&&(u<0&&p===0?(AY("route-fallback",!1),m=!0,v=null):u===p&&(m=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),x=()=>{let w;return f?w=y:m?w=v:d.route.Component?w=R.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,R.createElement(TY,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(IY,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var TP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(TP||{}),vp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vp||{});function _Y(t){let e=R.useContext(eg);return e||St(!1),e}function qE(t){let e=R.useContext(Gy);return e||St(!1),e}function RY(t){let e=R.useContext(uu);return e||St(!1),e}function NP(t){let e=RY(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function $Y(){return qE(vp.UseNavigation).navigation}function OY(){let{matches:t,loaderData:e}=qE(vp.UseMatches);return R.useMemo(()=>t.map(n=>nP(n,e)),[t,e])}function MY(){var t;let e=R.useContext(EP),n=qE(vp.UseRouteError),r=NP(vp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PY(){let{router:t}=_Y(TP.UseNavigateStable),e=NP(vp.UseNavigateStable),n=R.useRef(!1);return IP(()=>{n.current=!0}),R.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Jf({fromRouteId:e},a)))},[t,e])}const _P={};function AY(t,e,n){!e&&!_P[t]&&(_P[t]=!0)}function DY(t){return kY(t.context)}function xp(t){St(!1)}function LY(t){let{basename:e="/",children:n=null,location:r,navigationType:a=yr.Pop,navigator:i,static:o=!1,future:s}=t;bp()&&St(!1);let l=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:i,static:o,future:Jf({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof r=="string"&&(r=Qs(r));let{pathname:c="/",search:d="",hash:p="",state:f=null,key:m="default"}=r,y=R.useMemo(()=>{let v=ps(c,l);return v==null?null:{location:{pathname:v,search:d,hash:p,state:f,key:m},navigationType:a}},[l,c,d,p,f,m,a]);return y==null?null:R.createElement(Js.Provider,{value:u},R.createElement(Hy.Provider,{children:n,value:y}))}new Promise(()=>{});function KE(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,a)=>{if(!R.isValidElement(r))return;let i=[...e,a];if(r.type===R.Fragment){n.push.apply(n,KE(r.props.children,i));return}r.type!==xp&&St(!1),!r.props.index||!r.props.children||St(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=KE(r.props.children,i)),n.push(o)}),n}function FY(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:R.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:R.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:R.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
* React Router DOM v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Ic(){return Ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ic.apply(this,arguments)}function RP(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function BY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zY(t,e){return t.button===0&&(!e||e==="_self")&&!BY(t)}const jY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],VY=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],UY="6";try{window.__reactRouterVersion=UY}catch{}function WY(t,e){return iY({basename:e?.basename,future:Ic({},e?.future,{v7_prependBasename:!0}),history:RX({window:e?.window}),hydrationData:e?.hydrationData||GY(),routes:t,mapRouteProperties:FY,window:e?.window}).initialize()}function GY(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ic({},e,{errors:HY(e.errors)})),e}function HY(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,a]of e)if(a&&a.__type==="RouteErrorResponse")n[r]=new zE(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(a.message);i.stack="",n[r]=i}}else n[r]=a;return n}const $P=R.createContext({isTransitioning:!1}),qY=R.createContext(new Map),KY="startTransition",OP=FR[KY],XY="flushSync",MP=QK[XY];function YY(t){OP?OP(t):t()}function tg(t){MP?MP(t):t()}class QY{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function ZY(t){let{fallbackElement:e,router:n,future:r}=t,[a,i]=R.useState(n.state),[o,s]=R.useState(),[l,u]=R.useState({isTransitioning:!1}),[c,d]=R.useState(),[p,f]=R.useState(),[m,y]=R.useState(),v=R.useRef(new Map),{v7_startTransition:b}=r||{},x=R.useCallback(_=>{b?YY(_):_()},[b]),w=R.useCallback((_,N)=>{let{deletedFetchers:M,unstable_flushSync:P,unstable_viewTransitionOpts:L}=N;M.forEach(B=>v.current.delete(B)),_.fetchers.forEach((B,K)=>{B.data!==void 0&&v.current.set(K,B.data)});let j=n.window==null||typeof n.window.document.startViewTransition!="function";if(!L||j){P?tg(()=>i(_)):x(()=>i(_));return}if(P){tg(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let B=n.window.document.startViewTransition(()=>{tg(()=>i(_))});B.finished.finally(()=>{tg(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})})}),tg(()=>f(B));return}p?(c&&c.resolve(),p.skipTransition(),y({state:_,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(s(_),u({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,p,c,v,x]);R.useLayoutEffect(()=>n.subscribe(w),[n,w]),R.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new QY)},[l]),R.useEffect(()=>{if(c&&o&&n.window){let _=o,N=c.promise,M=n.window.document.startViewTransition(async()=>{x(()=>i(_)),await N});M.finished.finally(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})}),f(M)}},[x,o,c,n.window]),R.useEffect(()=>{c&&o&&a.location.key===o.location.key&&c.resolve()},[c,p,a.location,o]),R.useEffect(()=>{!l.isTransitioning&&m&&(s(m.state),u({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),y(void 0))},[l.isTransitioning,m]),R.useEffect(()=>{},[]);let S=R.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:_=>n.navigate(_),push:(_,N,M)=>n.navigate(_,{state:N,preventScrollReset:M?.preventScrollReset}),replace:(_,N,M)=>n.navigate(_,{replace:!0,state:N,preventScrollReset:M?.preventScrollReset})}),[n]),C=n.basename||"/",E=R.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return R.createElement(R.Fragment,null,R.createElement(eg.Provider,{value:E},R.createElement(Gy.Provider,{value:a},R.createElement(qY.Provider,{value:v.current},R.createElement($P.Provider,{value:l},R.createElement(LY,{basename:C,location:a.location,navigationType:a.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},a.initialized||n.future.v7_partialHydration?R.createElement(JY,{routes:n.routes,future:n.future,state:a}):e))))),null)}function JY(t){let{routes:e,future:n,state:r}=t;return SY(e,void 0,r,n)}const eQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XE=R.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:a,replace:i,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=t,d=RP(t,jY),{basename:p}=R.useContext(Js),f,m=!1;if(typeof l=="string"&&tQ.test(l)&&(f=l,eQ))try{let x=new URL(window.location.href),w=l.startsWith("//")?new URL(x.protocol+l):new URL(l),S=ps(w.pathname,p);w.origin===x.origin&&S!=null?l=S+w.search+w.hash:m=!0}catch{}let y=bY(l,{relative:r}),v=aQ(l,{replace:i,state:o,target:s,preventScrollReset:u,relative:r,unstable_viewTransition:c});function b(x){n&&n(x),x.defaultPrevented||v(x)}return R.createElement("a",Ic({},d,{href:f||y,onClick:m||a?n:b,ref:e,target:s}))}),qy=R.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:o,to:s,unstable_viewTransition:l,children:u}=t,c=RP(t,VY),d=ao(s,{relative:c.relative}),p=Ec(),f=R.useContext(Gy),{navigator:m,basename:y}=R.useContext(Js),v=f!=null&&sQ(d)&&l===!0,b=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,x=p.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=ps(w,y)||w);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=x===b||!i&&x.startsWith(b)&&x.charAt(S)==="/",E=w!=null&&(w===b||!i&&w.startsWith(b)&&w.charAt(b.length)==="/"),_={isActive:C,isPending:E,isTransitioning:v},N=C?n:void 0,M;typeof a=="function"?M=a(_):M=[a,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(_):o;return R.createElement(XE,Ic({},c,{"aria-current":N,className:M,ref:e,style:P,to:s,unstable_viewTransition:l}),typeof u=="function"?u(_):u)});function nQ(t){let{getKey:e,storageKey:n}=t;return iQ({getKey:e,storageKey:n}),null}var Ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ky||(Ky={}));var YE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(YE||(YE={}));function PP(t){let e=R.useContext(eg);return e||St(!1),e}function rQ(t){let e=R.useContext(Gy);return e||St(!1),e}function aQ(t,e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=vY(),u=Ec(),c=ao(t,{relative:o});return R.useCallback(d=>{if(zY(d,n)){d.preventDefault();let p=r!==void 0?r:kc(u)===kc(c);l(t,{replace:p,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s})}},[u,l,c,r,a,n,t,i,o,s])}const AP="react-router-scroll-positions";let Xy={};function iQ(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=PP(Ky.UseScrollRestoration),{restoreScrollPosition:a,preventScrollReset:i}=rQ(YE.UseScrollRestoration),{basename:o}=R.useContext(Js),s=Ec(),l=OY(),u=$Y();R.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),oQ(R.useCallback(()=>{if(u.state==="idle"){let c=(e?e(s,l):null)||s.key;Xy[c]=window.scrollY}try{sessionStorage.setItem(n||AP,JSON.stringify(Xy))}catch{}window.history.scrollRestoration="auto"},[n,e,u.state,s,l])),typeof document<"u"&&(R.useLayoutEffect(()=>{try{let c=sessionStorage.getItem(n||AP);c&&(Xy=JSON.parse(c))}catch{}},[n]),R.useLayoutEffect(()=>{let c=e&&o!=="/"?(p,f)=>e(Ic({},p,{pathname:ps(p.pathname,o)||p.pathname}),f):e,d=r?.enableScrollRestoration(Xy,()=>window.scrollY,c);return()=>d&&d()},[r,o,e]),R.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(s.hash){let c=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(c){c.scrollIntoView();return}}i!==!0&&window.scrollTo(0,0)}},[s,a,i]))}function oQ(t,e){let{capture:n}=e||{};R.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function sQ(t,e){e===void 0&&(e={});let n=R.useContext($P);n==null&&St(!1);let{basename:r}=PP(Ky.useViewTransitionState),a=ao(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ps(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ps(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wy(a.pathname,o)!=null||Wy(a.pathname,i)!=null}const lQ="modulepreload",uQ=function(t){return"/"+t},DP={},LP=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link");r=Promise.all(e.map(i=>{if(i=uQ(i),i in DP)return;DP[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(n)for(let u=a.length-1;u>=0;u--){const c=a[u];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":lQ,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,c)=>{l.addEventListener("load",u),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})}))}return r.then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})};function cQ(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:a,onRegisteredSW:i,onRegisterError:o}=t;let s,l;const u=async(d=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(s=await LP(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),T0([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o?.(d)}),!s)return;s.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),s.addEventListener("installed",d=>{d.isUpdate===!1&&r?.()}),s.register({immediate:e}).then(d=>{i?i("/sw.js",d):a?.(d)}).catch(d=>{o?.(d)})}}return l=c(),u}const ng=G.createContext({theme:"material",dark:!0,touchRipple:!0});function dQ(t,e){return typeof window>"u"?R.useEffect(t,e):R.useLayoutEffect(t,e)}const FP=function(t,e){e===void 0&&(e=!0);const[n,r]=R.useState(t);return dQ(()=>{if(e){if(t==="ios"||t==="material")n!==t&&r(t);else if(n==="parent"&&typeof window<"u"&&typeof document<"u"){const a=document.documentElement;a&&(a.classList.contains("ios")?r("ios"):(a.classList.contains("md")||a.classList.contains("material"))&&r("material"))}}},[t]),e?n:t},pQ=t=>{const{theme:e,dark:n,touchRipple:r=!0,autoThemeDetection:a=!0,children:i}=t,o=FP(e,a);return G.createElement(ng.Provider,{value:{theme:o,dark:n,touchRipple:r}},i)};function A(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>{typeof i=="object"&&i.constructor===Object?Object.keys(i).forEach(o=>{i[o]&&t.push(o)}):Array.isArray(i)?t.push(...i):typeof i=="function"?t.push(i()):i&&i.value?t.push(i.value):i&&t.push(i)});const a=[];return t.forEach(i=>{a.indexOf(i)<0&&a.push(i)}),a.filter(i=>!!i).join(" ")}const nr=function(t,e){return e===void 0&&(e=""),!e||typeof e!="string"?t:["static","relative","absolute","fixed","sticky"].filter(n=>e.indexOf(n)>=0).length>0?"":t},hQ=(t,e,n)=>{const{safeAreas:r}=t;return A(e==="ios"&&"k-ios",e==="material"&&"k-material","k-app w-full h-full min-h-screen",r&&"safe-areas",nr("relative",n),n)};function QE(){return QE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QE.apply(this,arguments)}const BP=R.forwardRef((t,e)=>{const{component:n="div",className:r,theme:a="material",dark:i=!0,touchRipple:o=!0,safeAreas:s=!0,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=FP(a),m=hQ({...t,safeAreas:s},f,r);return G.createElement(pQ,{theme:f,dark:i,touchRipple:o,autoThemeDetection:!1},G.createElement(d,QE({ref:c,className:m},p),l))});BP.displayName="App";const ZE=(t,e,n)=>{if(typeof t=="string")return t;const r=[t.common,t[e]];return n&&t[n]&&(typeof t[n]=="string"?r.push(t[n]):r.push(t[n].common,t[n][e])),r},fQ=(t,e,n)=>{const r={},a=["common","ios","material"];return Object.keys(t).forEach(i=>{const o=i==="base"?n:"";if(!(typeof t[i]!="string"&&Object.keys(t[i]).filter(l=>!a.includes(l)).length>0)){r[i]=A(ZE(t[i],e),o);return}r[i]={};const s=ZE(t[i],e);r[i].default=A(s,o),Object.keys(t[i]).filter(l=>!a.includes(l)).forEach(l=>{r[i][l]=A(s,ZE(t[i],e,l),o)})}),r},it=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=R.useContext(ng).theme||"ios";return e&&(r="ios"),n&&(r="material"),(a,i)=>fQ(a,r,i)},gQ=(t,e)=>({base:{common:A("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",nr("fixed",e)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JE.apply(this,arguments)}const mQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,opened:o,backdrop:s=!0,onBackdropClick:l,children:u,...c}=t,d=R.useRef(null);R.useImperativeHandle(e,()=>({el:d.current}));const p=o?"opened":"closed",f=n,m={...c},y=it({ios:a,material:i})(gQ(t,r),r);return G.createElement(G.Fragment,null,s&&G.createElement("div",{className:y.backdrop[p],onClick:l}),G.createElement(f,JE({ref:d,className:y.base[p]},m),u))});mQ.displayName="Actions";const yQ=t=>{const{dividers:e}=t;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:A(e&&"hairline-b")}}};function eI(){return eI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eI.apply(this,arguments)}const bQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,dividers:o=!0,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=it({ios:a,material:i})(yQ({dividers:o,...t}),r);return G.createElement(c,eI({ref:u,className:p.base},d),s)});bQ.displayName="ActionsGroup";const bn=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=R.useContext(ng).theme||"ios";return e&&(r="ios"),n&&(r="material"),r};class vQ{constructor(e,n,r){const a=this;if(!e)return;a.el=e;const{left:i,top:o,width:s,height:l}=e.getBoundingClientRect(),u={x:n-i,y:r-o};let c=Math.max((l**2+s**2)**.5,48);const d=e.classList.contains("k-touch-ripple-inset");d&&(c=Math.max(Math.min(s,l),48));const p=typeof window<"u"&&window.getComputedStyle(e,null).getPropertyValue("overflow")==="hidden";if(!d&&p){const m=((u.x-s/2)**2+(u.y-l/2)**2)**.5,y=(c/2+m)/(c/2);a.rippleTransform=`translate3d(0px, 0px, 0) scale(${y})`}else a.rippleTransform=`translate3d(${-u.x+s/2}px, ${-u.y+l/2}px, 0) scale(1)`;a.rippleWaveEl=document.createElement("span"),a.rippleWaveEl.classList.add("k-touch-ripple-wave"),a.rippleWaveEl.setAttribute("hidden",""),a.rippleWaveEl.style=`
      width: ${c}px;
      height: ${c}px;
      margin-top:-${c/2}px;
      margin-left:-${c/2}px;
      left:${u.x}px;
      top:${u.y}px; --k-ripple-transform: ${a.rippleTransform}`,e.insertAdjacentElement("afterbegin",a.rippleWaveEl);const f=()=>{a.rippleWaveEl.removeEventListener("animationend",f),a.rippleWaveEl&&(a.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(a.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),a.shouldBeRemoved&&a.out()))};return a.rippleWaveEl.addEventListener("animationend",f),a}destroy(){let e=this;e.rippleWaveEl&&e.el.removeChild(e.rippleWaveEl),Object.keys(e).forEach(n=>{e[n]=null,delete e[n]}),e=null}out(){const e=this,{rippleWaveEl:n}=this;clearTimeout(e.removeTimeout),n.classList.add("k-touch-ripple-wave-out"),e.removeTimeout=setTimeout(()=>{e.destroy()},300);const r=()=>{e.rippleWaveEl.removeEventListener("animationend",r),clearTimeout(e.removeTimeout),e.destroy()};e.rippleWaveEl.addEventListener("animationend",r)}remove(){const e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout(()=>{e.destroy()},400),e.shouldBeRemoved=!0,e.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&e.out())}}const Fo=(t,e,n)=>{const r=R.useContext(ng);n||(n=t);const a=R.useRef(null),i=()=>{a.current&&a.current.remove(),a.current=null},o=f=>{a.current=new vQ(t.current,f.pageX,f.pageY)},s=()=>{i()},l=()=>{i()},u=()=>{if(!r.touchRipple)return;const f=n.current;f.addEventListener("pointerdown",o),f.addEventListener("pointermove",s),f.addEventListener("pointerup",l),f.addEventListener("pointercancel",l),f.addEventListener("contextmenu",l)},c=()=>{const f=n.current;f.removeEventListener("pointerdown",o),f.removeEventListener("pointermove",s),f.removeEventListener("pointerup",l),f.removeEventListener("pointercancel",l),f.removeEventListener("contextmenu",l)},d=()=>{!n||!n.current||!e||u()},p=()=>{!n||!n.current||!e||c()};R.useEffect(()=>(d(),()=>p()))},_t=()=>{const t=R.useContext(ng);return e=>t.dark?e:""},xQ=(t,e,n)=>{const{fontSizeIos:r,fontSizeMaterial:a,bold:i,dividers:o}=t;return{base:{common:A("flex items-center w-full px-4 relative z-10 overflow-hidden",o&&"hairline-b"),ios:A("h-14",e.textIos,e.bgIos,e.activeBgIos,r,"first:rounded-t-xl last:rounded-b-xl justify-center",i&&"font-semibold"),material:A("h-12",e.textMaterial,e.bgMaterial,e.activeBgMaterial,a,"justify-start",n("dark:touch-ripple-white"),i&&"font-medium")}}},wQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),activeBgIos:A("active:bg-neutral-200",e("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function tI(){return tI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tI.apply(this,arguments)}const kQ=R.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,bold:s,boldIos:l=!1,boldMaterial:u=!1,fontSizeIos:c="text-xl",fontSizeMaterial:d="text-base",href:p,touchRipple:f=!0,dividers:m=void 0,children:y,...v}=t,b=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));let x=n;typeof t.component>"u"&&(p||p==="")&&(x="a");const w={href:p,...v},S=bn({ios:i,material:o}),C=it({ios:i,material:o}),E=_t();Fo(b,S==="material"&&f);const _=wQ(a,E),N=C(xQ({fontSizeIos:c,fontSizeMaterial:d,bold:typeof s>"u"?S==="ios"?l:u:s,dividers:typeof m>"u"?S==="ios":m,...t},_,E),r);return G.createElement(x,tI({ref:b,role:"button",tabIndex:"0",className:N.base},w),y)});kQ.displayName="ActionsButton";const SQ=(t,e)=>{const{fontSizeIos:n,fontSizeMaterial:r,dividers:a}=t;return{base:{common:A(`flex items-center w-full px-4 relative z-10 overflow-hidden ${e.activeBg}`,a&&"hairline-b"),ios:A("h-14",e.bgIos,e.textIos,n,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:A("h-12",e.bgMaterial,e.textMaterial,r,"font-medium","justify-start")}}},CQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function nI(){return nI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nI.apply(this,arguments)}const EQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,fontSizeIos:s="text-sm",fontSizeMaterial:l="text-sm",dividers:u=void 0,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=n,m={...d},y=bn({ios:i,material:o}),v=it({ios:i,material:o}),b=_t(),x=CQ(a,b),w=v(SQ({fontSizeIos:s,fontSizeMaterial:l,dividers:typeof u>"u"?y==="ios":u,...t},x),r);return G.createElement(f,nI({ref:p,className:w.base},m),c)});EQ.displayName="ActionsLabel";const IQ=(t,e)=>({base:{common:`${e.text} ${e.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),TQ=function(t){return t===void 0&&(t={}),{bg:"bg-primary",text:"text-white",...t}};function rI(){return rI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rI.apply(this,arguments)}const zP=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,small:i,ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:o,material:s}),m=TQ(a),y=i?"sm":"md",v=f(IQ(t,m),r);return G.createElement(d,rI({ref:c,className:v.base[y]},p),l)});zP.displayName="Badge";const NQ=(t,e,n)=>{const{inset:r,nested:a,margin:i,padding:o,strong:s,outline:l}=t;return{base:{common:A("text-sm z-10",nr("relative",n),!r&&!a&&l&&"hairline-t hairline-b",r&&l&&"border",r&&"px-4",!r&&"pl-4-safe pr-4-safe",!a&&i,(s||l)&&o),ios:A(e.textIos,s&&e.strongBgIos,r&&l&&e.outlineIos),material:A(e.textMaterial,s&&e.strongBgMaterial,r&&l&&e.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},_Q=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function aI(){return aI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aI.apply(this,arguments)}const io=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",padding:o="py-4",inset:s,insetIos:l,insetMaterial:u,strong:c,strongIos:d,strongMaterial:p,outline:f,outlineIos:m,outlineMaterial:y,nested:v,ios:b,material:x,children:w,...S}=t,C=R.useRef(null);R.useImperativeHandle(e,()=>({el:C.current}));const E=n,_={...S},N=bn({ios:b,material:x}),M=it({ios:b,material:x}),P=_t(),L=_Q(a,P),j=typeof c>"u"?N==="ios"?d:p:c,B=typeof f>"u"?N==="ios"?m:y:f,K=typeof s>"u"?N==="ios"?l:u:s,X=M(NQ({...t,margin:i,padding:o,inset:K,strong:j,outline:B},L,r)),Z=A(X.base,K&&X.inset,r);return G.createElement(E,aI({ref:C,className:Z},_),w)});io.displayName="Block";const RQ=(t,e)=>{const{inset:n}=t;return{base:{common:A("mb-8 flex items-center -mt-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},$Q=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-75",e("dark:text-white dark:text-opacity-75")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iI.apply(this,arguments)}const OQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=bn(),m=typeof s>"u"?f==="ios"?l:u:s,y=n,v={...d},b=it({ios:i,material:o}),x=_t(),w=$Q(a,x),S=b(RQ({...t,inset:m},w),r);return G.createElement(y,iI({ref:p,className:S.base},v),c)});OQ.displayName="BlockFooter";const MQ=(t,e)=>{const{inset:n}=t;return{base:{common:A("mt-8 flex items-center -mb-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},PQ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oI.apply(this,arguments)}const AQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=n,m={...d},y=bn(),v=typeof s>"u"?y==="ios"?l:u:s,b=it({ios:i,material:o}),x=_t(),w=PQ(a,x),S=b(MQ({...t,inset:v},w),r);return G.createElement(f,oI({ref:p,className:S.base},m),c)});AQ.displayName="BlockHeader";const DQ=(t,e)=>{const{withBlock:n,medium:r,large:a}=t;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${n?"-mb-6":"mb-2"}`,ios:A(`font-semibold ${e.textIos}`,a&&"text-[1.5rem]",r&&"text-[1.125rem]",!r&&!a&&"text-[1rem]"),material:A(`font-medium ${e.textMaterial}`,a&&"text-[1.375rem]",r&&"text-[1rem]",!r&&!a&&"text-[0.875rem]")}}},LQ=function(t,e){return t===void 0&&(t={}),{textIos:"",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function sI(){return sI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sI.apply(this,arguments)}const FQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,withBlock:i=!0,medium:o,large:s,ios:l,material:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=n,m={...d},y=it({ios:l,material:u}),v=_t(),b=LQ(a,v),x=y(DQ({...t,withBlock:i},b),r);return G.createElement(f,sI({ref:p,className:x.base},m),c)});FQ.displayName="BlockTitle";const BQ=t=>{const{fontSizeIos:e,fontSizeMaterial:n}=t;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:e,material:n}}};function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lI.apply(this,arguments)}const zQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,fontSizeIos:a="text-[17px]",fontSizeMaterial:i="text-[14px]",ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:o,material:s})(BQ({...t,fontSizeIos:a,fontSizeMaterial:i}),r);return G.createElement(d,lI({ref:c,className:f.base},p),l)});zQ.displayName="Breadcrumbs";const jQ=(t,e)=>{const{active:n}=t;return{base:{common:A("flex items-center overflow-hidden"),ios:A(e.textIos,e.bgIos,n?e.textActiveIos:e.textIos,n&&"font-semibold"),material:A("font-medium px-2 py-1 rounded-lg",e.bgMaterial,n?e.textActiveMaterial:e.textMaterial)}}},VQ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),textActiveIos:A("text-black",e("dark:text-white")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),...t}};function uI(){return uI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uI.apply(this,arguments)}const UQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,colors:o,active:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:a,material:i}),m=_t(),y=VQ(o,m),v=f(jQ({...t},y),r);return G.createElement(d,uI({ref:c,className:v.base,role:"menuitem",tabIndex:"0"},p),l)});UQ.displayName="BreadcrumbsItem";const WQ=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function cI(){return cI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cI.apply(this,arguments)}const jP=t=>G.createElement("svg",cI({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},t),G.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dI.apply(this,arguments)}const GQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,children:o,...s}=t,l=R.useRef(null);R.useImperativeHandle(e,()=>({el:l.current}));const u=n,c={...s},d=it({ios:a,material:i})(WQ({...t}),r);return G.createElement(u,dI({ref:l,className:d.base},c),G.createElement(jP,{className:d.icon}),o)});GQ.displayName="BreadcrumbsSeparator";const HQ=(t,e)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${e.bg}`,ios:A("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",e.bgIos),material:A("py-3 px-2 rounded-lg",e.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${e.dotBg}`,ios:e.dotBgIos,material:e.dotBgMaterial}}),qQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-15",e("dark:bg-white dark:bg-opacity-15")),bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),dotBgIos:A("bg-black",e("dark:bg-white")),dotBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pI.apply(this,arguments)}const KQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=_t(),d=qQ(a,c),p=n,f={...l},m=it({ios:i,material:o})(HQ({...t},d),r);return G.createElement(p,pI({ref:u,role:"button",tabIndex:"0",className:m.base},f),G.createElement("span",{className:m.dot}),G.createElement("span",{className:m.dot}),G.createElement("span",{className:m.dot}),s)});KQ.displayName="BreadcrumbsCollapsed";const XQ=(t,e,n,r)=>{const{inline:a,segmented:i,segmentedStrong:o,segmentedActive:s,disabled:l}=t;return{base:{common:A("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",a?"inline-flex":"w-full flex",nr("relative",n),l&&"pointer-events-none",o&&s&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:i&&!o?"first:rounded-s last:rounded-e":"rounded",material:i&&!o?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:i&&!o?"":"rounded-full"},style:{fill:{common:A(l&&A(e.disabledBg,e.disabledText)),ios:A(l?A(e.disabledBg,e.disabledText):`${e.fillTextIos} ${e.fillBgIos} ${e.fillActiveBgIos}`),material:A(l?A(e.disabledBg,e.disabledText):A(e.fillTextMaterial,e.fillBgMaterial,e.fillActiveBgMaterial,e.fillTouchRipple))},outline:{common:A(l?A(e.disabledText,e.disabledBorder):A("active:bg-opacity-15",e.touchRipple)),ios:A(!i&&"border-2",!l&&!i&&e.outlineBorderIos,!l&&A(e.textIos,e.activeBgIos)),material:A(!i&&"border",!l&&!i&&e.outlineBorderMaterial,!l&&A(e.textMaterial,e.activeBgMaterial))},clear:{common:A(l?e.disabledText:`active:bg-opacity-15 ${e.touchRipple}`),ios:!l&&A(e.textIos,e.activeBgIos),material:!l&&A(e.textMaterial,e.activeBgMaterial)},tonal:{common:l?A(e.disabledBg,e.disabledText):A(e.touchRipple),ios:!l&&A(e.tonalTextIos,e.tonalBgIos,e.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!l&&A(e.tonalTextMaterial,e.tonalBgMaterial,e.activeBgMaterial)},segmentedStrong:A("active:bg-black active:bg-opacity-10",r("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},YQ=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),disabledBg:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),disabledBorder:A("border-black border-opacity-10",e("dark:border-white dark:border-opacity-10")),...t}};function hI(){return hI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hI.apply(this,arguments)}const br=R.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,href:l,outline:u,outlineIos:c,outlineMaterial:d,clear:p,clearIos:f,clearMaterial:m,tonal:y,tonalIos:v,tonalMaterial:b,rounded:x,roundedIos:w,roundedMaterial:S,small:C,smallIos:E,smallMaterial:_,large:N,largeIos:M,largeMaterial:P,raised:L,raisedIos:j,raisedMaterial:B,inline:K,segmented:X,segmentedStrong:Z,segmentedActive:H,touchRipple:F=!0,children:Y,...Q}=t,ne=R.useRef(null);R.useImperativeHandle(e,()=>({el:ne.current}));let se=n;typeof t.component>"u"&&(l||l==="")&&(se="a");const pe={href:l,...Q},de=bn({ios:i,material:o}),ie=it({ios:i,material:o}),xe=_t();Fo(ne,de==="material"&&F);const q=(Fe=>{const Xe={};return Object.keys(Fe).forEach(Oe=>{Xe[Oe]=typeof Fe[Oe]>"u"?de==="ios"?t[`${Oe}Ios`]:t[`${Oe}Material`]:Fe[Oe]}),Xe})({outline:u,clear:p,tonal:y,rounded:x,small:C,large:N,raised:L}),oe=q.large?"large":q.small?"small":"medium";let he=q.outline?"outline":q.clear||X&&!H?"clear":q.tonal?"tonal":"fill";Z&&(he="segmentedStrong"),Z&&H&&(he="segmentedStrongActive");const Ee=YQ(a,xe),Ie=ie(XQ({...t,...q},Ee,r,xe)),_e=A(Ie.base[q.rounded?"rounded":"square"],Ie.style[he],Ie.size[oe],q.raised&&Ie.raised,r);return G.createElement(se,hI({ref:ne,className:_e,disabled:s,role:"button",tabIndex:"0"},pe),Y)});br.displayName="Button";const QQ=(t,e)=>{const{margin:n,headerDivider:r,footerDivider:a,contentWrapPadding:i}=t;return{base:{common:A(n,"overflow-hidden"),ios:A("rounded-lg",e.bgIos,e.textIos),material:A("rounded-2xl",e.bgMaterial,e.textMaterial),plain:"",raised:"shadow",outline:{common:A("border"),ios:e.outlineIos,material:e.outlineMaterial}},header:{common:A(r&&"border-b","p-4"),ios:A(r&&e.outlineIos,t.headerFontSizeIos),material:A(r&&e.outlineMaterial,t.headerFontSizeMaterial)},content:A(i,"text-sm"),footer:{common:A(r&&"border-t","text-sm p-4"),ios:A(e.footerTextIos,a&&e.outlineIos),material:A(e.footerTextMaterial,a&&e.outlineMaterial)}}},ZQ=function(t,e){return t===void 0&&(t={}),{textIos:A(""),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),bgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),bgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),footerTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),footerTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function fI(){return fI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fI.apply(this,arguments)}const VP=R.forwardRef((t,e)=>{const{component:n="div",className:r,margin:a="m-4",colors:i,header:o,footer:s,ios:l,material:u,headerFontSizeIos:c="text-[17px]",headerFontSizeMaterial:d="text-[22px]",contentWrap:p=!0,contentWrapPadding:f="p-4",raised:m,raisedIos:y,raisedMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,headerDivider:S=!1,footerDivider:C=!1,children:E,..._}=t,N=R.useRef(null);R.useImperativeHandle(e,()=>({el:N.current}));const M=n,P={..._},L=bn(),j=it({ios:l,material:u}),B=_t(),K=ZQ(i,B),X=typeof b>"u"?L==="ios"?x:w:b,Z=typeof m>"u"?L==="ios"?y:v:m,H=X?"outline":Z?"raised":"plain",F=j(QQ({...t,margin:a,contentWrapPadding:f,headerDivider:S,footerDivider:C,headerFontSizeIos:c,headerFontSizeMaterial:d,outline:X,raised:Z},K),r);return G.createElement(M,fI({ref:N,className:F.base[H]},P),o&&G.createElement("div",{className:F.header},o),p?G.createElement("div",{className:F.content},E):E,s&&G.createElement("div",{className:F.footer},s))});VP.displayName="Card";const JQ=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",nr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:A("flex items-center justify-center text-white",r("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:`${e.bgCheckedIos} ${e.borderCheckedIos}`,material:`${e.bgCheckedMaterial} ${e.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:A("bg-white w-3/4",r("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),eZ=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function Yy(){return Yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yy.apply(this,arguments)}const UP=t=>{const{ios:e,material:n,fill:r,...a}=t;return bn({ios:e,material:n})==="ios"?G.createElement("svg",Yy({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},a),G.createElement("path",{fill:r||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):G.createElement("svg",Yy({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},a),G.createElement("polygon",{fill:r,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function gI(){return gI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gI.apply(this,arguments)}const tZ=R.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,indeterminate:s,name:l,value:u,disabled:c,readOnly:d,onChange:p,ios:f,material:m,touchRipple:y=!0,children:v,...b}=t,x=R.useRef(null),w=R.useRef(null);R.useImperativeHandle(e,()=>({el:w.current,inputEl:x.current}));const S=n,C={...b},E=bn({ios:f,material:m}),_=it({ios:f,material:m}),N=_t();Fo(w,E==="material"&&y);const M=eZ(a,N),P=o||i&&!p||s?"checked":"notChecked",L=_(JQ(t,M,r,N),r);return R.useEffect(()=>{x.current&&(x.current.indeterminate=!!s)},[s]),G.createElement(S,gI({ref:w,className:L.base},C),G.createElement("input",{ref:x,type:"checkbox",name:l,value:u,disabled:c,readOnly:d,checked:o,defaultChecked:i,onChange:p,className:L.input}),G.createElement("i",{className:L.iconWrap[P]},s?G.createElement("span",{className:L.indeterminateIcon}):G.createElement(UP,{ios:f,material:m,className:L.icon[P]})),v)});tZ.displayName="Checkbox";const nZ=(t,e)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:A(e.fillBg||e.fillBgIos,e.fillText||e.fillTextIos),material:A(e.fillBg||e.fillBgMaterial,e.fillText||e.fillTextMaterial)},outline:{common:"border",ios:A(e.outlineText||e.outlineTextIos,e.outlineBorder||e.outlineBorderIos),material:A(e.outlineText||e.outlineTextMaterial,e.outlineBorder||e.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),rZ=function(t,e){return t===void 0&&(t={}),{fillTextIos:"text-current",fillTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),fillBgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),outlineTextIos:A("text-current"),outlineTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),outlineBorderIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qy.apply(this,arguments)}const rg=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",Qy({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},n),G.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):G.createElement("svg",Qy({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function mI(){return mI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mI.apply(this,arguments)}const aZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,media:i,deleteButton:o,onDelete:s,ios:l,material:u,outline:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const m=n,y={...p},v=it({ios:l,material:u}),b=bn({ios:l,material:u}),x=_t(),w=c?"outline":"fill",S=rZ(a,x),C=v(nZ(t,S),r);return G.createElement(m,mI({ref:f,className:C.base[w]},y),i&&G.createElement("div",{className:C.media},i),d,o&&G.createElement("div",{className:C.deleteButton,role:"button",tabIndex:"0",onClick:s},G.createElement(rg,{theme:b,className:"h-4 w-4"})))});aZ.displayName="Chip";const iZ=(t,e,n,r)=>{let{hasButtons:a}=r;const{titleFontSizeMaterial:i,titleFontSizeIos:o,translucent:s,sizeIos:l,sizeMaterial:u}=t;return{base:{common:A("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",nr("fixed",n)),ios:A("rounded-xl max-w-full",l,e.bgIos,s&&"translucent"),material:A("rounded-[1.75rem] p-6 max-w-[90%]",u,e.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:A("p-4 space-y-1 relative",a&&"hairline-b")},title:{common:A("w-full"),ios:A(e.titleIos,o,"font-semibold text-center"),material:A(e.titleMaterial,i)},content:{common:A("text-sm w-full"),ios:A(e.contentTextIos,"text-center"),material:A(e.contentTextMaterial)},buttons:{common:"flex items-center",ios:A("justify-center last-child-hairline-r-none"),material:A("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},oZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function yI(){return yI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yI.apply(this,arguments)}const sZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,translucent:l=!0,sizeIos:u="w-[16.875rem]",sizeMaterial:c="w-[19.5rem]",titleFontSizeIos:d="text-[18px]",titleFontSizeMaterial:p="text-[24px]",title:f,content:m,buttons:y,ios:v,material:b,children:x,...w}=t,S=R.useRef(null);R.useImperativeHandle(e,()=>({el:S.current}));const C=i?"opened":"closed",E=n,_={...w},N=it({ios:v,material:b}),M=_t(),P=oZ(a,M),L=N(iZ({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,translucent:l,sizeIos:u,sizeMaterial:c},P,r,{hasButtons:!!y}),r);return G.createElement(G.Fragment,null,o&&G.createElement("div",{className:L.backdrop[C],onClick:s}),G.createElement(E,yI({ref:S,className:L.base[C]},_),G.createElement("div",{className:L.contentWrap},f&&G.createElement("div",{className:L.title},f),(m||x)&&G.createElement("div",{className:L.content},m,x)),y&&G.createElement("div",{className:L.buttons},y)))});sZ.displayName="Dialog";const lZ=(t,e)=>{const{strong:n,disabled:r}=t;return{base:{ios:A("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",r?e.disabledTextIos:e.textIos,n&&"font-semibold",!r&&e.activeBgIos)}}},uZ=function(t,e){return t===void 0&&(t={}),{activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),...t}};function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zy.apply(this,arguments)}const cZ=R.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,strong:l,strongIos:u,strongMaterial:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const m={...p},y=bn({ios:i,material:o}),v=it({ios:i,material:o}),b=_t(),x=uZ(a,b),w=typeof l>"u"?y==="ios"?u:c:l,S=v(lZ({...t,strong:w},x),r),C=n;return y==="ios"?G.createElement(C,Zy({className:S.base,disabled:s,role:"button",tabIndex:"0"},m),d):G.createElement(br,Zy({component:n,inline:!0,rounded:!0,disabled:s,clear:!w,className:r},m),d)});cZ.displayName="DialogButton";const dZ=(t,e)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${e.bgIos} ${e.activeBgIos} ${e.textIos}`,material:`duration-300 rounded-2xl shadow ${e.bgMaterial} ${e.activeBgMaterial} ${e.textMaterial} ${e.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),pZ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary-container",e("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:A("text-md-light-on-primary-container",e("dark:text-md-dark-on-primary-container")),touchRipple:A("touch-ripple-primary",e("dark:touch-ripple-white")),...t}};function bI(){return bI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bI.apply(this,arguments)}const hZ=R.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,href:i,text:o,textPosition:s="after",icon:l,ios:u,material:c,touchRipple:d=!0,children:p,...f}=t,m=R.useRef(null);R.useImperativeHandle(e,()=>({el:m.current}));const y=n,v={...f},b=bn({ios:u,material:c}),x=it({ios:u,material:c}),w=_t();Fo(m,b==="material"&&d);const S=pZ(a,w),C=x(dZ(t,S),r);return G.createElement(y,bI({className:o?C.base.withText:C.base.iconOnly,href:i,ref:m,role:"button",tabIndex:"0"},v),o&&s==="before"&&G.createElement("span",{className:C.text},o),l&&G.createElement("span",{className:C.icon},l),o&&s==="after"&&G.createElement("span",{className:C.text},o),p)});hZ.displayName="Fab";const fZ=(t,e)=>({base:`${nr("relative",e)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function vI(){return vI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vI.apply(this,arguments)}const Ra=R.forwardRef((t,e)=>{const{component:n="i",className:r,ios:a,material:i,badge:o,badgeColors:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it(),m=bn(),y=f(fZ(t,r),r);return G.createElement(d,vI({ref:c,className:y.base},p),m==="ios"?a:i,typeof o<"u"&&o!==null&&G.createElement(zP,{small:!0,className:y.badge,colors:s},o),l)});Ra.displayName="Icon";const gZ=(t,e,n)=>{let{textColor:r,needsTouchRipple:a}=e;const{iconOnly:i,tabbar:o}=t;return{base:{common:A(!o&&r,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",a&&`touch-ripple-primary ${nr("relative",n)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:a?"":"active:opacity-55"}},tabbar:{common:A(nr("relative",n),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3"}}},mZ=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",...t}};function xI(){return xI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xI.apply(this,arguments)}const wp=R.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,navbar:i,toolbar:o,iconOnly:s,linkProps:l={},tabbar:u,tabbarActive:c,touchRipple:d=void 0,ios:p,material:f,onClick:m,children:y,...v}=t,b=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...l,...v},S=bn({ios:p,material:f}),C=it({ios:p,material:f}),E=_t(),_=S==="material"&&(d||(o||u||i)&&typeof d>"u");Fo(b,_);const N=mZ(a,E),M=t.navbar?S==="material"?N.navbarTextMaterial:N.navbarTextIos:S==="material"?N.textMaterial:N.textIos,P=u&&!c?N.tabbarInactive:M,L=c?"active":"inactive",j=C(gZ(t,{textColor:P,needsTouchRipple:_},r)),B=A(j.base[u?"default":"notTabbar"],o&&j.toolbar,i&&j.navbar,u&&j.tabbar[L],r);return G.createElement(x,xI({ref:b,className:B},w,{role:"link",tabIndex:"0",onClick:m}),y)});wp.displayName="Link";const yZ=(t,e,n)=>{const{nested:r,margin:a,inset:i,strong:o,outline:s}=t;return{base:{common:A(!r&&a,!i&&!r&&s&&"hairline-t hairline-b",i&&s&&"border",nr("relative",n),"z-10"),ios:A(o&&e.strongBgIos,i&&s&&e.outlineIos),material:A(o&&e.strongBgMaterial,i&&s&&e.outlineMaterial)},ul:{common:A(i&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},bZ=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),...t}},WP=G.createContext(!1);function wI(){return wI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wI.apply(this,arguments)}const kp=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",nested:o,menuList:s,dividers:l,dividersIos:u=!0,dividersMaterial:c=!1,inset:d,insetIos:p,insetMaterial:f,strong:m,strongIos:y,strongMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,ios:S,material:C,children:E,..._}=t,N=R.useRef(null);R.useImperativeHandle(e,()=>({el:N.current}));const M=n,P={..._},L=bn(),j=it({ios:S,material:C}),B=_t(),K=typeof l>"u"?L==="ios"?u:c:l,X=typeof m>"u"?L==="ios"?y:v:m,Z=typeof b>"u"?L==="ios"?x:w:b,H=typeof d>"u"?L==="ios"?p:f:d,F=bZ(a,B),Y=j(yZ({...t,margin:i,inset:H,strong:X,outline:Z},F,r)),Q=A(Y.base,H&&Y.inset,s&&Y.menuList,r);return G.createElement(WP.Provider,{value:K},G.createElement(M,wI({ref:N,className:Q},P),G.createElement("ul",{className:Y.ul},E)))});kp.displayName="List";function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kI.apply(this,arguments)}const vZ=R.forwardRef((t,e)=>{const{children:n,...r}=t,a=R.useRef(null);R.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return G.createElement("li",{ref:a},G.createElement(kp,kI({nested:!0},i),n))});vZ.displayName="ListGroup";const xZ=(t,e,n)=>{const{dividers:r}=t;return{base:"",button:{common:A(nr("relative",n),r&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${e.touchRipple} overflow-hidden select-none`),ios:A("h-11",e.textIos,e.activeBgIos,e.activeBgIos),material:A("h-12",e.textMaterial,e.activeBgMaterial)}}},wZ=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",...t}},GP=()=>R.useContext(WP);function Jy(){return Jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jy.apply(this,arguments)}const kZ=R.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,href:i,target:o,type:s,value:l,linkComponent:u="a",linkProps:c={},ios:d,material:p,touchRipple:f=!0,children:m,...y}=t,v=R.useRef(null),b=R.useRef(null),x=GP();R.useImperativeHandle(e,()=>({el:v.current}));const w=n,S={...y},C=bn({ios:d,material:p}),E=it({ios:d,material:p});Fo(b,C==="material"&&f);const _=_t(),N=wZ(a,_),M=E(xZ({...t,dividers:x},N,r),r),P=!!i||i==="",L={href:!P||i===!0||i===!1?void 0:i||"",target:o,type:s,value:l,...c},j=P?u:"button";return G.createElement(w,Jy({ref:v,className:M.base},S),G.createElement(j,Jy({ref:b,className:M.button},L),m))});kZ.displayName="ListButton";const SZ=(t,e,n)=>{let{className:r,isMediaItem:a,theme:i,textColor:o,needsTouchRipple:s,isMenuListItemActive:l,autoStrongTitle:u}=n;const{menuListItem:c,dividers:d,mediaClassName:p="",mediaClass:f="",innerClassName:m="",innerClass:y="",contentClassName:v="",contentClass:b="",titleWrapClassName:x="",titleWrapClass:w="",titleFontSizeIos:S,titleFontSizeMaterial:C,strongTitle:E,contacts:_}=t;return{base:{common:c?`${o} py-1`:"",material:_&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:A(`flex items-center ${v||b}`),ios:A(!c&&A(e.primaryTextIos,"ps-4-safe"),c&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:A(!c&&A(e.primaryTextMaterial,a?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",_&&"ml-10"),c&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:A("duration-300 active:duration-0 cursor-pointer select-none",d&&i==="ios"&&"active:hairline-transparent",s&&A("relative overflow-hidden z-10",e.touchRipple),A(l?i==="ios"?e.menuListItemActiveBgIos:e.menuListItemActiveBgMaterial:c?i==="ios"?e.menuListItemBgIos:e.menuListItemBgMaterial:i==="ios"?e.activeBgIos:e.activeBgMaterial))},media:{common:`shrink-0 flex ${p||f}`,ios:"py-2 me-4",material:A("py-3",c?"me-3":"me-4")},inner:{common:A("w-full relative",!c&&d&&"hairline-b",m||y),ios:"py-2.5 pe-4-safe",material:A("py-3",a&&!c?"pe-2":"pe-4-safe")},titleWrap:{common:A(`flex justify-between items-center ${x||w}`),ios:A(!c&&S),material:A(!c&&C)},title:{common:"shrink",menuListItem:A("text-sm",E===!0||u?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:A("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:e.secondaryTextIos,material:A(e.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:A("text-sm line-clamp-2"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:e.secondaryTextIos,material:e.secondaryTextMaterial},footer:{common:A("text-xs mt-0.5"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},groupTitle:{common:A("pl-4-safe pr-4-safe py-1 flex items-center z-20",nr("relative",r)),ios:`h-8${d?" hairline-t":""} -mt-px ${S} ${e.secondaryTextIos} ${e.groupTitleBgIos} ${_&&A("font-semibold top-11-safe sticky",e.groupTitleContactsTextIos,e.groupTitleContactsBgIos)}`,material:`h-12 ${C} ${e.secondaryTextMaterial} ${e.groupTitleBgMaterial} ${_&&A("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",e.groupTitleContactsTextMaterial,e.groupTitleContactsBgMaterial)}`}}},CZ=function(t,e){return t===void 0&&(t={}),{primaryTextIos:A("text-black",e("dark:text-white")),primaryTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),secondaryTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:A("bg-ios-light-surface-variant",e("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),menuListItemTextIos:A("text-black",e("dark:text-white")),menuListItemTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:A("text-primary",e("dark:text-white")),menuListItemActiveTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:A("bg-primary bg-opacity-15",e("dark:bg-primary")),menuListItemActiveBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),touchRipple:A("touch-ripple-black",e("dark:touch-ripple-white")),groupTitleContactsTextIos:A("text-opacity-90",e("dark:text-opacity-90")),groupTitleContactsTextMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),groupTitleContactsBgIos:A(e("dark:bg-[#323234]")),groupTitleContactsBgMaterial:A("bg-transparent",e("dark:bg-transparent")),...t}};function eb(){return eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eb.apply(this,arguments)}const Sp=R.forwardRef((t,e)=>{const{component:n="li",colors:r,className:a,mediaClassName:i="",innerClassName:o="",innerChildren:s,contentClassName:l="",contentChildren:u,titleWrapClassName:c="",titleFontSizeIos:d="text-[17px]",titleFontSizeMaterial:p="text-[16px]",title:f,subtitle:m,text:y,after:v,media:b,header:x,footer:w,menuListItem:S,menuListItemActive:C,groupTitle:E,strongTitle:_="auto",label:N,chevron:M=void 0,chevronIos:P=!0,chevronMaterial:L=!0,chevronIcon:j,href:B,target:K,link:X,linkComponent:Z="a",linkProps:H={},dividers:F,contacts:Y,ios:Q,material:ne,touchRipple:se=!0,children:pe,...de}=t,ie=R.useRef(null),xe=R.useRef(null);R.useImperativeHandle(e,()=>({el:xe.current}));const q=n,oe={...de},he=typeof F>"u"?GP():F,Ee=bn({ios:Q,material:ne}),Ie=it({ios:Q,material:ne}),_e=_t(),Fe=typeof M>"u"?Ee==="ios"?P:L:M,Xe=CZ(r,_e),Oe=S&&C,lt=Xe[`${Oe?"menuListItemActiveText":S?"menuListItemText":"text"}${Ee==="ios"?"Ios":"Material"}`],Je=!!B||B===""||S||X,nt=!!N,et=Ee==="material"&&(nt||Je)&&se;Fo(ie,et);const sn=B===!0||B===!1||typeof B>"u"?void 0:B||"",Vt=Je?Z:nt?"label":"div",Qt=Je?{href:sn,target:K,...H}:{},Zt=f&&(m||y),Ot=_==="auto"&&Zt,Et=Ie(SZ({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,dividers:he,strongTitle:_,mediaClassName:i,innerClassName:o,contentClassName:l,titleWrapClassName:c},Xe,{isMediaItem:Zt,theme:Ee,textColor:lt,needsTouchRipple:et,isMenuListItemActive:Oe,darkClasses:_e,autoStrongTitle:Ot,className:a}),a),jn=Je||nt?Et.itemContent.link:Et.itemContent.default,Yn=S?Et.title.menuListItem:_===!0||Ot?Et.title.strong:Et.title.default;return E?G.createElement(q,{className:A(Et.groupTitle,a)},f,pe):G.createElement(q,eb({ref:xe,className:Et.base},oe),G.createElement(Vt,eb({ref:ie,className:jn},Qt),b&&G.createElement("div",{className:Et.media},b),G.createElement("div",{className:Et.inner},x&&G.createElement("div",{className:Et.header},x),(f||v)&&G.createElement("div",{className:Et.titleWrap},f&&G.createElement("div",{className:Yn},f),v&&G.createElement("div",{className:Et.after},v),Je&&Fe&&!S&&(j||G.createElement(jP,{className:Et.chevron}))),m&&G.createElement("div",{className:Et.subtitle},m),y&&G.createElement("div",{className:Et.text},y),w&&G.createElement("div",{className:Et.footer},w),s),u),pe)});Sp.displayName="ListItem";function SI(){return SI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SI.apply(this,arguments)}const EZ=t=>G.createElement("svg",SI({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},t),G.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),IZ=(t,e,n)=>{let{isFloatingTransformed:r,isFocused:a,darkClasses:i,getLabelColor:o,hasLabel:s}=n;const{error:l,type:u,outline:c,inputClassName:d="",inputClass:p=""}=t;return{base:{common:"",ios:A(c&&"my-4"),material:A("py-2")},itemContent:{common:"relative",ios:A(c&&"ml-4 mr-4 rounded-lg",!c&&e.bgIos),material:A("min-h-[56px] ml-4 mr-4",c?A("rounded"):A(e.bgMaterial,"rounded-t relative "))},inner:{common:"",material:A(c?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:A("duration-200 text-xs",o(),c&&"flex"),ios:A(c&&"-mt-4"),material:A(c&&"-mt-4"),stacked:"",floating:{common:A("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",r&&"scale-133"),ios:r?c?"translate-y-6":"translate-y-4":"",material:r?c?"translate-y-8":"translate-y-3":""}},labelText:{common:A(c&&"relative p-1 block -m-1"),ios:A(c&&A("-top-1",e.outlineLabelBgIos)),material:A(c&&A("-top-2",e.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:A((!s||c)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${o()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${d||p}`,ios:"h-10",material:"h-6",notFloating:{common:A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30")),material:A(u==="textarea"&&"py-1"),ios:A(u==="textarea"&&"py-2")},floating:r?"placeholder-transparent":A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:e.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:A("w-3.5 h-3.5 opacity-45 active:opacity-30",e.labelTextIos),material:A("w-6 h-6 active:opacity-55",e.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:c&&A(l?e.errorBorder:a?e.outlineBorderFocusIos:e.outlineBorderIos,"h-full border rounded-lg -z-10"),material:A(l?e.errorBorder:a?e.outlineBorderFocusMaterial:e.outlineBorderMaterial,c&&A("h-full border rounded -z-10",a&&"border-2"),!c&&A("border-b h-px origin-bottom",a&&"scale-y-[2]"))}}},TZ=function(t,e){return t===void 0&&(t={}),{bgIos:"",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),outlineBorderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:A("border-md-light-on-surface",e("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),outlineLabelBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",...t}};function CI(){return CI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CI.apply(this,arguments)}const NZ=R.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,label:i,floatingLabel:o,outline:s,outlineIos:l,outlineMaterial:u,media:c,input:d,info:p,error:f,clearButton:m,dropdown:y,inputId:v,inputStyle:b,inputClassName:x="",name:w,value:S,defaultValue:C,type:E="text",inputMode:_,readOnly:N,required:M,disabled:P,placeholder:L,size:j,accept:B,autoComplete:K,autoCorrect:X,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Y,max:Q,min:ne,step:se,maxLength:pe,minLength:de,multiple:ie,pattern:xe,tabIndex:q,onInput:oe,onChange:he,onFocus:Ee,onBlur:Ie,onClear:_e,ios:Fe,material:Xe,children:Oe,...lt}=t,Je=R.useRef(null),nt=R.useRef(null);R.useImperativeHandle(e,()=>({el:nt.current,inputEl:Je.current}));const[et,sn]=R.useState(!1),Vt=bn({ios:Fe,material:Xe}),Qt=it({ios:Fe,material:Xe}),Zt=_t(),Ot=TZ(a,Zt),Et=i&&o?"floating":"stacked",jn=Et==="floating"?"floating":"notFloating",Yn=()=>{if(Je.current)return Je.current.value},ja=i&&o&&!(()=>{const ma=Yn();return typeof S>"u"?ma||ma===0:S||S===0})()&&!et,Rn=()=>f?Ot.errorText:Vt==="material"?et?Ot.labelTextFocusMaterial:Ot.labelTextMaterial:Vt==="ios"?et?Ot.labelTextFocusIos:Ot.labelTextIos:"",Za=ma=>{sn(!0),Ee&&Ee(ma)},wo=ma=>{sn(!1),Ie&&Ie(ma)},vi=typeof s>"u"?Vt==="ios"?l:u:s,fn=Qt(IZ({...t,outline:vi},Ot,{isFloatingTransformed:ja,isFocused:et,darkClasses:Zt,getLabelColor:Rn,inputClassName:x,hasLabel:!!i})),Ja={...lt},xi=()=>{if(d)return d;const ma=E==="select"||E==="textarea"?E:"input",Il=ma==="input";return G.createElement(ma,{id:v,ref:Je,className:fn.input[jn],style:b,name:w,type:Il?E:void 0,placeholder:L,inputMode:_,size:j,accept:B,autoComplete:K,autoCorrect:X,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Y,disabled:P,max:Q,maxLength:pe,min:ne,minLength:de,step:se,multiple:ie,readOnly:N,required:M,pattern:xe,tabIndex:q,value:S,defaultValue:C,onInput:oe,onChange:he,onFocus:Za,onBlur:wo},E==="select"?Oe:null)},wi=G.createElement(G.Fragment,null,f&&f!==!0&&G.createElement("div",{className:A(fn.errorInfo,fn.error)},f),p&&!f&&G.createElement("div",{className:A(fn.errorInfo,fn.info)},p)),_s=G.createElement(G.Fragment,null,i&&G.createElement("div",{className:fn.label[Et]},G.createElement("div",{className:fn.labelText},i)),G.createElement("div",{className:fn.inputWrap[Et]},xi(),m&&G.createElement(rg,{theme:Vt,onClick:_e,className:fn.clearButton}),y&&G.createElement(EZ,{className:fn.dropdown})),wi);return G.createElement(Sp,CI({ref:nt,component:n,media:c,className:fn.base,title:null,mediaClassName:fn.media,innerClassName:fn.inner[Et],contentClassName:fn.itemContent,titleWrapClassName:fn.titleWrap,innerChildren:_s,contentChildren:(vi||Vt==="material")&&G.createElement("span",{className:fn.border}),dividers:Vt==="material"||vi?!1:void 0},Ja),E!=="select"?Oe:null)});NZ.displayName="ListInput";function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}const _Z=R.forwardRef((t,e)=>{const{children:n,...r}=t,a=R.useRef(null);R.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return G.createElement(kp,EI({ref:a,menuList:!0},i),n)});_Z.displayName="MenuList";function II(){return II=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},II.apply(this,arguments)}const RZ=R.forwardRef((t,e)=>{const{active:n,href:r,children:a,...i}=t,o=R.useRef(null);R.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return G.createElement(Sp,II({ref:o,menuListItem:!0,menuListItemActive:n,href:r||!1},s),a)});RZ.displayName="MenuListItem";const $Z=(t,e)=>{const{type:n}=t;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:A("self-end",e.messageSent)},messageReceived:{common:e.messageReceived},messageName:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageHeader:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageFooter:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageAvatar:{common:A("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...n==="sent"&&{ios:A("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleSentIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",e.bubbleSentMd)},...n==="received"&&{ios:A("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleReceivedIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",e.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},OZ=function(t,e){return t===void 0&&(t={}),{messageSent:"text-white",messageReceived:"text-inherit",messageNameIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),messageNameMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),bubbleSentIos:A("bg-primary"),bubbleSentMd:A("bg-md-light-primary",e("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:A("bg-[#e5e5ea]",e("dark:bg-[#252525]")),bubbleReceivedMd:A(e("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),...t}};function TI(){return TI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TI.apply(this,arguments)}const MZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,text:o,name:s,type:l="sent",header:u,footer:c,textHeader:d,textFooter:p,avatar:f,ios:m,material:y,children:v,...b}=t,x=R.useRef(null);R.useImperativeHandle(e,()=>({el:x.current}));const w=it({ios:m,material:y}),S=_t(),C=OZ(a,S),E=w($Z({...t},C)),_=n,N={...b},M=A(r,E.message,{[E.messageSent]:l==="sent",[E.messageReceived]:l==="received"});return G.createElement(_,TI({id:i,ref:x,className:M},N),f&&G.createElement("div",{className:E.messageAvatar},f),G.createElement("div",{className:E.messageContent},s&&G.createElement("div",{className:E.messageName},s),u&&G.createElement("div",{className:E.messageHeader},u),G.createElement("div",{className:E.messageBubble},d&&G.createElement("div",{className:E.messageTextHeader},d),o&&G.createElement("div",{className:E.messageText},o),p&&G.createElement("div",{className:E.messageTextFooter},p)),c&&G.createElement("div",{className:E.messageFooter},c)))});MZ.displayName="Message";const PZ=(t,e,n)=>{let{isFocused:r}=n;const{rightClassName:a="",rightClass:i="",leftClassName:o="",leftClass:s=""}=t;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:e.bgMessage},left:{common:A("mt-1 -ms-2",o||s),ios:A("px-2",e.toolbarIconIos),material:A("",e.toolbarIconMd)},right:{common:A("mt-1 -me-2",a||i),ios:A("px-2",e.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:A("block w-full focus:outline-none resize-none",r&&"outline-offset-0"),ios:A("border h-8 rounded-3xl px-4 leading-4 py-1.5",e.inputBgIos,e.borderIos,e.placeholderIos),material:A("rounded-3xl h-12 px-4 py-4 leading-4 ",e.inputBgMd,e.placeholderMd)}}},AZ=function(t,e){return t===void 0&&(t={}),{toolbarIconIos:A("fill-primary",e("dark:fill-md-dark-primary")),toolbarIconMd:A("fill-black"),inputBgIos:A("bg-transparent"),borderIos:A("border-[#c8c8cd]",e("dark:border-white dark:border-opacity-30")),inputBgMd:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-variant")),placeholderIos:A(e("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}},DZ=(t,e,n)=>{const{bgClassName:r="",bgClass:a="",outline:i,translucent:o,innerClassName:s="",innerClass:l="",tabbar:u,tabbarIcons:c,top:d}=t;return{base:{common:A("w-full z-20",nr("relative",n),!d&&"pb-safe")},bg:{common:A("absolute w-full h-full left-0 top-0",i&&(d?"hairline-b":"hairline-t"),r||a),ios:A(e.bgIos,o&&"translucent"),material:A(`${e.bgMaterial}`)},inner:{common:A("flex relative justify-between items-center w-full overflow-hidden",s||l),ios:A("pl-2-safe pr-2-safe",c?"h-12.5":"h-11"),material:A(u?"":"pl-2-safe pr-2-safe",c?"h-20":"h-14")},highlight:{common:A(d?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:e.tabbarHighlightBgIos,material:e.tabbarHighlightBgMaterial}}},LZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NI.apply(this,arguments)}const _I=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,bgClassName:o="",innerClassName:s="",outline:l,tabbar:u,tabbarIcons:c,tabbarLabels:d,top:p,ios:f,material:m,children:y,...v}=t,b=R.useRef(null),x=R.useRef(null);R.useImperativeHandle(e,()=>({el:x.current}));const w=n,[S,C]=R.useState({transform:"",width:""}),E=bn({ios:f,material:m}),_=it({ios:f,material:m}),N=_t(),M={...v},P=LZ(a,N),L=_(DZ({...t,outline:typeof l>"u"?E==="ios":l,translucent:i,bgClassName:o,innerClassName:s},P,r),r),j=E==="material"&&u&&!c;return R.useEffect(()=>{if(j&&b.current){const B=b.current.previousElementSibling,K=1/B.children.length*100,X=[...B.children].indexOf(B.querySelector(".k-tabbar-link-active"));C({...S,width:`${K}%`,transform:`translateX(${X*100}%)`})}},[y]),G.createElement(w,NI({ref:x,className:L.base},M),G.createElement("div",{className:L.bg}),G.createElement("div",{className:L.inner},y),j&&G.createElement("span",{className:L.highlight,style:S,ref:b}))});_I.displayName="Toolbar";function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RI.apply(this,arguments)}const FZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,style:o,name:s,placeholder:l="Message",value:u,outline:c=!1,leftClassName:d="",rightClassName:p="",textareaId:f,disabled:m,size:y,left:v,right:b,ios:x,material:w,onInput:S,onChange:C,onFocus:E,children:_,...N}=t,M=R.useRef(null),P=R.useRef(null);R.useImperativeHandle(e,()=>({el:M.current,areaElRef:P.current}));const[L,j]=R.useState(!1),B=it({ios:x,material:w}),K=_t(),X=AZ(a,K),Z=Q=>{j(!0),E&&E(Q)},H=B(PZ({...t},X,{isFocused:L})),F=n,Y={...N};return G.createElement(F,RI({ref:M,id:i,style:o,className:H.base},Y),G.createElement(_I,{colors:X,outline:c},v&&G.createElement("div",{className:H.left},v),G.createElement("div",{className:H.messagebarArea},G.createElement("textarea",{id:f,ref:P,type:"textarea",className:H.messagebarInput,placeholder:l,name:s,size:y,disabled:m,onInput:S,onChange:C,onFocus:Z,value:u})),b&&G.createElement("div",{className:H.right},b)))});FZ.displayName="Messagebar";const BZ=()=>({base:{common:A("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}const zZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:o,material:s})(BZ({...t})),p=n,f={...u};return G.createElement(p,$I({id:i,className:d.base,ref:c},f),l)});zZ.displayName="Messages";const jZ=(t,e)=>({base:{common:A("text-center text-xs leading-none"),ios:A("w-full mt-2.5",e.titleIos),material:A("mt-4",e.titleMd)}}),VZ=function(t,e){return t===void 0&&(t={}),{titleIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),titleMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OI.apply(this,arguments)}const UZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,id:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:i,material:o}),p=_t(),f=VZ(a,p),m=d(jZ({...t},f)),y=n,v={...u};return G.createElement(y,OI({id:s,className:m.base,ref:c},v),l)});UZ.displayName="MessagesTitle";const WZ=(t,e,n)=>{const{outline:r,translucent:a,large:i,medium:o,transparent:s,left:l,right:u,fontSizeIos:c,fontSizeMaterial:d,titleFontSizeIos:p,titleFontSizeMaterial:f,titleLargeFontSizeIos:m,titleLargeFontSizeMaterial:y,titleMediumFontSizeIos:v,titleMediumFontSizeMaterial:b,bgClassName:x="",bgClass:w="",subnavbarClassName:S="",subnavbarClass:C="",innerClassName:E="",innerClass:_="",leftClassName:N="",leftClass:M="",titleClassName:P="",titleClass:L="",subtitleClassName:j="",subtitleClass:B="",rightClassName:K="",rightClass:X="",centerTitle:Z}=t;return{base:{common:A("w-full z-20 top-0 pt-safe",(i||o)&&"pointer-events-none",nr("sticky",n)),ios:A(c,e.textIos),material:A(d,e.textMaterial)},bg:{common:A("absolute w-full h-full left-0 top-0",r&&"hairline-b",x||w),ios:A(e.bgIos,a&&"translucent"),material:`${e.bgMaterial}`},subnavbar:{common:A("relative flex items-center",S||C,(i||o)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:A("flex relative items-center w-full overflow-hidden",E||_,(i||o)&&"pointer-events-auto z-10"),ios:A("pl-2-safe pr-2-safe h-11",!l&&u?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:A("flex items-center px-4 relative",(i||o)&&"pointer-events-auto"),ios:A(o&&A(v,"h-11 font-semibold"),i&&A(m,"h-13 font-bold")),material:A(o&&A(b,"h-12 pb-4"),i&&A(y,"h-[5.5rem]"))},left:{common:A("flex justify-center items-center h-full",N||M),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:A("whitespace-nowrap leading-tight",P||L,(i||o||s)&&"opacity-0",Z?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:A(`${p} font-semibold`,!Z&&"first:mx-2"),material:A(`${f} font-normal`,!Z&&"first:mx-4")},subtitle:{common:A("font-normal leading-none",j||B),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:A("flex justify-center items-center h-full",K||X),ios:A("transform transform-gpu",Z?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},GZ=(t,e)=>({bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t});function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}const tb=R.forwardRef((t,e)=>{const{component:n="div",className:r,bgClassName:a="",innerClassName:i="",leftClassName:o="",titleClassName:s="",subtitleClassName:l="",rightClassName:u="",subnavbarClassName:c="",centerTitle:d,colors:p,translucent:f=!0,outline:m,medium:y,large:v,transparent:b,fontSizeIos:x="text-[17px]",fontSizeMaterial:w="text-[16px]",titleFontSizeIos:S="text-[17px]",titleFontSizeMaterial:C="text-[22px]",titleMediumFontSizeIos:E="text-[24px]",titleMediumFontSizeMaterial:_="text-[24px]",titleLargeFontSizeIos:N="text-[34px]",titleLargeFontSizeMaterial:M="text-[28px]",scrollEl:P,left:L,title:j,subtitle:B,right:K,subnavbar:X,ios:Z,material:H,children:F,...Y}=t,Q=R.useRef(null),ne=R.useRef(0),se=R.useRef(null),pe=R.useRef(null),de=R.useRef(null),ie=R.useRef(null),xe=R.useRef(null),q=R.useRef(null);R.useImperativeHandle(e,()=>({el:Q.current}));const oe=n,he=bn({ios:Z,material:H}),Ee=it({ios:Z,material:H}),Ie=_t(),_e={...Y},Fe=GZ(p,Ie),Xe=et=>{const{scrollTop:sn}=et.target;if(!b&&!v&&!y){q.current&&(ie.current&&(ie.current.style.opacity=""),se.current&&(se.current.style.opacity=""));return}const Vt=ne.current,Qt=Math.max(Math.min(sn/Vt,1),0);se.current.style.opacity=b?-.5+Qt*1.5:"",(y||v)&&(se.current.style.transform=`translateY(-${Qt*Vt}px)`),de.current&&(de.current.style.transform=`translateY(-${Qt*Vt}px)`,de.current.style.opacity=1-Qt*2),ie.current&&(ie.current.style.opacity=-.5+Qt*1.5),(y||v)&&xe.current&&(xe.current.style.transform=`translateY(-${Qt*Vt}px)`)},Oe=()=>typeof P>"u"?Q.current&&Q.current.parentNode:P.current||P,lt=()=>{if(!v&&!y&&!b){q.current&&(Xe({target:{scrollTop:0}}),q.current=!1);return}q.current=!0,de.current?ne.current=de.current.offsetHeight:ne.current=pe.current.offsetHeight;const et=Oe();et?(et.addEventListener("scroll",Xe),Xe({target:et})):Xe({target:{scrollTop:0}})},Je=()=>{const et=Oe();et&&et.removeEventListener("scroll",Xe)};R.useEffect(()=>(lt(),Je));const nt=Ee(WZ({...t,centerTitle:typeof d>"u"?he==="ios":d,translucent:f,outline:typeof m>"u"?he==="ios":m,fontSizeIos:x,fontSizeMaterial:w,titleFontSizeIos:S,titleFontSizeMaterial:C,titleMediumFontSizeIos:E,titleMediumFontSizeMaterial:_,titleLargeFontSizeIos:N,titleLargeFontSizeMaterial:M,bgClassName:a,innerClassName:i,leftClassName:o,titleClassName:s,subtitleClassName:l,rightClassName:u,subnavbarClassName:c},Fe,r),r);return G.createElement(oe,MI({ref:Q,className:nt.base},_e),G.createElement("div",{className:nt.bg,ref:se}),G.createElement("div",{className:nt.inner,ref:pe},L&&G.createElement("div",{className:nt.left},L),(j||B)&&G.createElement("div",{className:nt.title,ref:ie},j,B&&G.createElement("div",{className:nt.subtitle},B)),K&&G.createElement("div",{className:nt.right},K),F),(v||y)&&G.createElement("div",{className:nt.titleContainer,ref:de},j),X&&G.createElement("div",{className:nt.subnavbar,ref:xe},X))});tb.displayName="Navbar";function nb(){return nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nb.apply(this,arguments)}const HP=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",nb({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},n),G.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):G.createElement("svg",nb({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},n),G.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},HZ=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}const qZ=R.forwardRef((t,e)=>{const{component:n="a",className:r,text:a="Back",showText:i="auto",ios:o,material:s,onClick:l,children:u,...c}=t,d=R.useRef(null);R.useImperativeHandle(e,()=>({el:d.current}));const p={...c},f=bn({ios:o,material:s}),m=it({ios:o,material:s}),y=i==="auto"&&f==="ios"||i===!0,v=m(HZ(),r);return G.createElement(wp,PI({ref:d,component:n,className:v.base,navbar:!0},p,{onClick:l}),G.createElement("span",{className:v.icon},G.createElement(HP,{theme:f})),y&&G.createElement("span",null,a),u)});qZ.displayName="NavbarBackLink";const KZ=(t,e,n)=>{const{opened:r,translucent:a}=t;return{base:{common:A(nr("absolute",n),"z-50 transform transition-transform-opacity box-border duration-500",!r&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:A("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",e.bgIos,a&&"translucent"),material:A("rounded-2xl py-5 px-4 start-4 end-4 top-4",e.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:A("mt-2")},header:{common:A("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:A("me-2"),material:"me-4"},contentTitle:{material:A("flex flex-row items-center")},title:{ios:A("tracking-wide text-[13px] uppercase",e.titleIos),material:A("font-medium")},titleRightText:{ios:A("me-1 ms-auto text-[13px]",e.titleRightIos),material:A("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",e.titleRightMd)},button:{ios:A("me-1 ms-auto cursor-pointer"),material:A("ms-auto cursor-pointer")},deleteIcon:{ios:A("w-5 h-5",e.deleteIconIos),material:A("w-6 h-6",e.deleteIconMd)},subtitle:{ios:A("text-[15px] font-semibold",e.subtitleIos),material:A("text-sm")},text:{ios:A("text-[15px]"),material:A("text-sm",e.textMaterial)}}},XZ=(t,e)=>({bgIos:A("bg-white",e("dark:bg-[#1e1e1e]")),bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),titleIos:A("text-black",e("dark:text-white")),titleRightIos:A("text-opacity-45 text-black",e("dark:text-white dark:text-opacity-45")),titleRightMd:A("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:A("text-black ",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant ")),deleteIconIos:A("fill-stone-400 active:fill-stone-200",e("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t});function rb(){return rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rb.apply(this,arguments)}const YZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,button:i,icon:o,title:s,titleRightText:l,subtitle:u,text:c,translucent:d=!0,opened:p,onClose:f,ios:m,material:y,children:v,...b}=t,x=R.useRef(null);R.useImperativeHandle(e,()=>({el:x.current}));const w=n,S={...b},C=bn({ios:m,material:y}),E=it({ios:m,material:y}),_=_t(),N=XZ(a,_),M=E(KZ({...t,translucent:d},N,r),r);return C==="ios"?G.createElement(w,rb({ref:x,className:M.base},S),G.createElement("div",{className:M.header},o&&G.createElement("div",{className:M.icon},o),s&&G.createElement("div",{className:M.title},s),l&&G.createElement("div",{className:M.titleRightText},l),i&&G.createElement("div",{className:M.button,role:"button",tabIndex:"0",onClick:f},G.createElement(rg,{theme:C,className:M.deleteIcon}))),G.createElement("div",{className:M.content},u&&G.createElement("div",{className:M.subtitle},u),c&&G.createElement("div",{className:M.text},c),v)):G.createElement(w,rb({ref:x,className:M.base},S),G.createElement("div",{className:M.header},o&&G.createElement("div",{className:M.icon},o),G.createElement("div",{className:M.contentWrapper},G.createElement("div",{className:M.contentTitle},s&&G.createElement("div",{className:M.title},s),l&&G.createElement("div",{className:M.titleRightText},l)),G.createElement("div",{className:M.content},u&&G.createElement("div",{className:M.subtitle},u),c&&G.createElement("div",{className:M.text},c),v)),i&&G.createElement("div",{className:M.button,role:"button",tabIndex:"0",onClick:f},G.createElement(rg,{theme:C,className:M.deleteIcon}))))});YZ.displayName="Notification";const QZ=(t,e,n)=>({base:{common:A("h-full w-full left-0 top-0 overflow-auto",nr("absolute",n)),ios:e.bgIos,material:e.bgMaterial}}),ZZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface",e("dark:bg-ios-dark-surface")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AI.apply(this,arguments)}const ab=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=it({ios:i,material:o}),f=_t(),m=ZZ(a,f),y=p(QZ(t,m,r),r);return G.createElement(c,AI({ref:u,className:y.base},d),s)});ab.displayName="Page";const JZ=(t,e,n)=>{const{size:r,floating:a}=t;return{base:{common:A("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",a?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",e.bg,nr("fixed",n),r),ios:"",material:"ease-material-in"},left:{common:A("no-safe-areas-right",a?"right-full -mr-2 rounded-2xl":"right-full"),material:A(!a&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:A("no-safe-areas-left",a?"left-full -ml-2 rounded-2xl":"left-full"),material:A(!a&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},eJ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DI.apply(this,arguments)}const qP=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-72 h-screen",side:o="left",opened:s,backdrop:l=!0,floating:u=!1,onBackdropClick:c,ios:d,material:p,children:f,...m}=t,y=R.useRef(null);R.useImperativeHandle(e,()=>({el:y.current}));const v=s?"opened":"closed",b=n,x={...m},w=it({ios:d,material:p}),S=_t(),C=eJ(a,S),E=w(JZ({...t,size:i,floating:u},C,r),r),_=A(E.base,E[o][v]);return G.createElement(G.Fragment,null,l&&G.createElement("div",{className:E.backdrop[v],onClick:c}),G.createElement(b,DI({ref:y,className:_},x),f))});qP.displayName="Panel";const tJ=t=>{let{popoverEl:e,targetEl:n,angleEl:r,needsAngle:a,targetX:i,targetY:o,targetWidth:s=0,targetHeight:l=0,theme:u}=t;n.current?n=n.current:n.value?n=n.value:n.el?n=n.el:n.$el&&(n=n.$el),typeof n=="string"&&(n=document.querySelector(n));let c=document.body.offsetWidth,d=document.body.offsetHeight;c===0&&(c=window.innerWidth),d===0&&(d=window.innerHeight);const[p,f]=[e.offsetWidth,e.offsetHeight];let m=0,y,v,b="";a&&(m=r.offsetWidth/2);let x,w;const S=window.getComputedStyle(n);let C=parseInt(S.getPropertyValue("--k-safe-area-top"),10)||0,E=parseInt(S.getPropertyValue("--k-safe-area-left"),10)||0,_=parseInt(S.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(C)&&(C=0),Number.isNaN(E)&&(E=0),Number.isNaN(_)&&(_=0),n){s=n.offsetWidth,l=n.offsetHeight;const X=n.getBoundingClientRect();x=X.left,w=X.top}else typeof i<"u"&&o!=="undefined"&&(x=i,w=o);let[N,M,P]=[0,0,0];const L=u==="ios"?13:23;let j="top";f+m<w-C?M=w-f-m:f+m<d-w-l?(j="bottom",M=w+l+m):(j="middle",M=l/2+w-f/2,P=M,M=Math.max(5,Math.min(M,d-f-5)),P-=M),j==="top"||j==="bottom"?(N=s/2+x-p/2,P=N,N=Math.max(5,Math.min(N,c-p-5)),E&&(N=Math.max(N,E)),_&&N+p>c-5-_&&(N=c-5-_-p),j==="top"&&(b="bottom"),j==="bottom"&&(b="top"),P-=N,y=p/2-m+P,y=Math.max(Math.min(y,p-m*2-L),L)):j==="middle"&&(N=x-p-m,b="right",(N<5||N+p+_>c||N<E)&&(N<5&&(N=x+s+m),N+p+_>c&&(N=c-p-5-_),N<E&&(N=E),b="left"),v=f/2-m+P,v=Math.max(Math.min(v,f-m*2-L),L));const B=j,K=N<x?"left":"right";return{set:!0,angleTop:typeof v>"u"?void 0:`${v}px`,angleLeft:typeof y>"u"?void 0:`${y}px`,anglePosition:b,popoverTop:`${M}px`,popoverLeft:`${N}px`,popoverPosition:`${B}-${K}`}},nJ=(t,e,n)=>{const{size:r,translucent:a,angleClassName:i,angleClass:o}=t;return{base:{common:A("transition-transform-opacity z-40 no-safe-areas",nr("fixed",n),r),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:A("overflow-hidden relative"),ios:A("rounded-xl",a&&"translucent",e.bgIos),material:A("rounded-[1.75rem]",e.bgMaterial)},angleWrap:{common:A(i||o||"","pointer-events-none"),ios:A("absolute w-6.5 h-6.5 z-50 overflow-hidden",a&&"opacity-80"),material:A("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:A("absolute rounded w-full h-full transform rotate-45"),ios:e.bgIos,material:e.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},rJ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-3",e("dark:bg-ios-dark-surface-3")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),...t}};function LI(){return LI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LI.apply(this,arguments)}const aJ=R.forwardRef((t,e)=>{const{component:n="div",className:r,angle:a=!0,angleClassName:i="",colors:o,size:s="w-64",opened:l,backdrop:u=!0,onBackdropClick:c,target:d,targetX:p,targetY:f,targetWidth:m,targetHeight:y,translucent:v=!0,ios:b,material:x,children:w,style:S={},...C}=t,E=R.useRef(null),_=R.useRef(null),[N,M]=R.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});R.useImperativeHandle(e,()=>({el:E.current}));const P=l?"opened":"closed",L=n,j={...C},B=bn({ios:b,material:x}),K=it({ios:b,material:x}),X=_t(),Z=rJ(o,X),H=K(nJ({...t,size:s,angleClassName:i,translucent:v},Z,r),r),F=()=>{!d||!E.current||!l||M(tJ({popoverEl:E.current,targetEl:d,angleEl:_.current,needsAngle:a,targetX:p,targetY:f,targetHeight:y,targetWidth:m,theme:B}))},Y=()=>{typeof window>"u"||window.addEventListener("resize",F)},Q=()=>{typeof window>"u"||window.removeEventListener("resize",F)};R.useEffect(()=>(Y(),()=>Q())),R.useEffect(()=>{F()},[l]);const ne=N.set?{...S||{},left:N.popoverLeft,top:N.popoverTop}:S,se=N.set?{left:N.angleLeft,top:N.angleTop}:void 0,pe={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},de=A(H.base[P],B==="material"&&pe[N.popoverPosition]);return G.createElement(G.Fragment,null,u&&G.createElement("div",{className:H.backdrop[P],onClick:c}),G.createElement(L,LI({ref:E,className:de,style:ne},j),a&&G.createElement("div",{ref:_,style:se,className:H.angleWrap[N.anglePosition]},G.createElement("div",{className:H.angleArrow[N.anglePosition]})),G.createElement("div",{className:H.inner},w)))});aJ.displayName="Popover";const iJ=(t,e,n)=>{const{size:r}=t;return{base:{common:A("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",e.bg,nr("fixed",n),r),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:A("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},oJ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FI.apply(this,arguments)}const KP=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-screen h-screen md:w-160 md:h-160",opened:o,backdrop:s=!0,onBackdropClick:l,ios:u,material:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const m=o?"opened":"closed",y=n,v={...p},b=it({ios:u,material:c}),x=_t(),w=oJ(a,x),S=b(iJ({...t,size:i},w,r),r);return G.createElement(G.Fragment,null,s&&G.createElement("div",{className:S.backdrop[m],onClick:l}),G.createElement(y,FI({ref:f,className:S.base[m]},v),d))});KP.displayName="Popup";function BI(){return BI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BI.apply(this,arguments)}const sJ=t=>G.createElement("svg",BI({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},t),G.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),G.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),G.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),G.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),G.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),G.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),G.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),G.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}const lJ=t=>G.createElement("svg",zI({viewBox:"0 0 36 36"},t,{fill:"none",stroke:"currentcolor"}),G.createElement("circle",{cx:"18",cy:"18",r:"16"})),uJ=(t,e,n)=>{const{size:r}=t;return{base:{common:A(n==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${r}`),ios:e.iconIos,material:`stroke-4 ${e.iconMaterial}`},inner:{common:"block w-full h-full"}}},cJ=function(t,e){return t===void 0&&(t={}),{iconIos:"text-primary",iconMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function jI(){return jI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jI.apply(this,arguments)}const dJ=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,size:i="w-8 h-8",ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=bn({ios:o,material:s}),m=it({ios:o,material:s}),y=_t(),v=cJ(a,y),b=f==="ios"?sJ:lJ,x=m(uJ({...t,size:i},v,f),r);return G.createElement(d,jI({ref:c,className:x.base},p),G.createElement("span",{className:x.inner},G.createElement(b,{className:"w-full h-full"})),l)});dJ.displayName="Preloader";const pJ=t=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:t.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:t.bgIos,material:t.bgMaterial}}),hJ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VI.apply(this,arguments)}const fJ=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,ios:i,material:o,progress:s=0,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:i,material:o}),m=_t(),y=hJ(a,m),v=f(pJ(y),r);return G.createElement(d,VI({ref:c,className:v.base},p),G.createElement("span",{className:v.inner,style:{transform:`translateX(-${100-s/1*100}%)`}}),l)});fJ.displayName="Progressbar";const gJ=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",nr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:e.borderCheckedIos,material:e.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${e.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),mJ=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}const yJ=R.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,ios:p,material:f,touchRipple:m=!0,children:y,...v}=t,b=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...v},S=bn({ios:p,material:f}),C=it({ios:p,material:f}),E=_t();Fo(b,S==="material"&&m);const _=mJ(a,E),N=o||i&&!d?"checked":"notChecked",M=C(gJ(t,_,r,E),r);return G.createElement(x,UI({ref:b,className:M.base},w),G.createElement("input",{type:"radio",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:M.input}),G.createElement("i",{className:M.iconWrap[N]},S==="ios"?G.createElement(UP,{className:M.icon[N]}):G.createElement("span",{className:M.icon[N]})),y)});yJ.displayName="Radio";const bJ=(t,e,n)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:A("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",n("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${e.valueBgIos}`,material:`h-0.5 ${e.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${e.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${e.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),vJ=function(t,e){return t===void 0&&(t={}),{valueBgIos:"bg-primary",valueBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:A("range-thumb:bg-md-light-primary",e("dark:range-thumb:bg-md-dark-primary")),...t}};function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WI.apply(this,arguments)}const ib=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,inputId:l,name:u,value:c=void 0,defaultValue:d,readOnly:p,disabled:f,step:m=1,min:y=0,max:v=100,onInput:b,onChange:x,onFocus:w,onBlur:S,...C}=t,E=R.useRef(null);R.useImperativeHandle(e,()=>({el:E.current}));const _=n,N={...C},M=it({ios:i,material:o}),P=_t(),L=vJ(a,P),j=M(bJ(t,L,P),r),B=((c||0)-y)/(v-y)*100;return G.createElement(_,WI({ref:E,className:j.base},N),G.createElement("span",{className:j.trackBg}),G.createElement("span",{className:j.trackValue,style:{width:`${B}%`}}),G.createElement("input",{className:A(j.input,j.inputThumb,j.inputTrack),type:"range",id:l,name:u,min:y,max:v,step:m,value:c,defaultValue:d,readOnly:p,disabled:f,onInput:b,onChange:x,onFocus:w,onBlur:S}))});ib.displayName="Range";const xJ=(t,e,n)=>{let{isEnabled:r,darkClasses:a}=n;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:A("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",a("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),e.placeholderIos,e.inputBgIos),material:A("h-12 ps-12 pe-4 rounded-full",e.placeholderMaterial,e.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:A("w-4 h-4 opacity-45"),material:A("w-5 h-5 z-30",r?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:A("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",r?"":"opacity-0"),material:A("absolute left-4 cursor-pointer",r?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},wJ=function(t,e){return t===void 0&&(t={}),{inputBgIos:"",inputBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),...t}};function ob(){return ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ob.apply(this,arguments)}const kJ=t=>{let{theme:e,...n}=t;return e==="ios"?G.createElement("svg",ob({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},n),G.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):G.createElement("svg",ob({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},n),G.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GI.apply(this,arguments)}const SJ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,placeholder:i="Search",value:o,inputId:s,inputStyle:l,disableButton:u=!1,disableButtonText:c="Cancel",clearButton:d=!0,onInput:p,onChange:f,onFocus:m,onBlur:y,onClear:v,onDisable:b,ios:x,material:w,...S}=t,C=R.useRef(null),E=R.useRef(null),_=R.useRef(null),[N,M]=R.useState(0),P=R.useRef(null),L=R.useRef(!1);R.useImperativeHandle(e,()=>({el:E.current,searchEl:C.current}));const[j,B]=R.useState(!1),K=bn({ios:x,material:w}),X=it({ios:x,material:w}),Z=_t(),H=wJ(a,Z),F=he=>{p&&p(he)},Y=he=>{f&&f(he)},Q=he=>{B(!0),m&&m(he)},ne=he=>{y&&y(he)},se=()=>{o||(P.current=setTimeout(()=>{B(!1)}))},pe=()=>{clearTimeout(P.current)},de=he=>{he.preventDefault(),B(!1),C.current&&C.current.blur(),b&&b(),v&&v()};R.useEffect(()=>{_.current&&M(_.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{L.current=!0})})},[]);const ie=X(xJ({...t},H,{isEnabled:j,darkClasses:Z})),xe=K==="ios"?G.createElement("button",{type:"button",ref:_,style:{marginRight:j?0:`-${N}px`,transitionDuration:L.current?"":"0ms"},className:ie.cancelButton,onClick:de,onPointerDown:he=>he.preventDefault()},c):G.createElement(HP,{theme:K,onClick:de,className:A(ie.cancelButton),onPointerDown:he=>he.preventDefault()}),q=n,oe={...S};return G.createElement(q,GI({ref:E,className:ie.base},oe,{onBlurCapture:se,onFocusCapture:pe}),G.createElement("div",{className:ie.inner},G.createElement("span",{className:ie.searchIconWrap},G.createElement(kJ,{ios:x,material:w,className:ie.searchIcon})),G.createElement("input",{id:s,ref:C,className:A(ie.input),style:l,type:"text",name:"search",placeholder:i,value:o,onInput:F,onChange:Y,onFocus:Q,onBlur:ne}),o&&d&&G.createElement("button",{className:ie.clearButton,onClick:v,type:"button"},G.createElement(rg,{theme:K,className:ie.deleteIcon}))),u&&xe)});SJ.displayName="Searchbar";const CJ=(t,e,n)=>{const{outline:r,rounded:a}=t;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:r?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${e.borderIos} border-2`,material:`${e.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${e.divideIos}`,material:`divide-x ${e.divideMaterial}`},strong:{common:A("p-0.5 space-x-1 relative"),ios:e.strongBgIos,material:e.strongBgMaterial},strongHighlight:{common:A("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",a&&"rounded-full","bg-white shadow",n("dark:bg-opacity-15 dark:touch-ripple-white")),ios:A(!a&&"rounded"),material:A(!a&&"rounded-md")}}},EJ=function(t,e){return t===void 0&&(t={}),{strongBgIos:A("bg-black bg-opacity-5",e("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:A("divide-md-light-outline",e("dark:divide-md-dark-outline")),...t}};function HI(){return HI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HI.apply(this,arguments)}const IJ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,raised:s,outline:l,strong:u,rounded:c,children:d,...p}=t,f=R.useRef(null),m=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const[y,v]=R.useState({transform:"",width:""}),b=n,x={...p},w=it({ios:i,material:o}),S=_t(),C=EJ(a,S),E=w(CJ(t,C,S)),_=A(c?E.base.rounded:E.base.square,s&&E.raised,l&&E.outline,u&&E.strong,r);return R.useEffect(()=>{if(u&&m.current){const N=m.current.parentElement,M=N.children.length-1,P=[...N.children].indexOf(N.querySelector(".k-segmented-strong-button-active")),L="4px";v({...y,width:`calc((100% - 2px * 2 - ${L} * (${M} - 1)) / ${M})`,transform:`translateX(calc((${P} * 100% + ${P} * ${L}) * var(--k-rtl-reverse)))`})}},[d]),G.createElement(b,HI({ref:f,className:_},x),l?G.createElement("span",{className:E.outlineInner},d):d,u&&G.createElement("span",{ref:m,className:E.strongHighlight,style:y}))});IJ.displayName="Segmented";function qI(){return qI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qI.apply(this,arguments)}const TJ=R.forwardRef((t,e)=>{const{active:n,children:r,outline:a,strong:i,clear:o,rounded:s,...l}=t,u=R.useRef(null);return R.useImperativeHandle(e,()=>({el:u.current})),G.createElement(br,qI({ref:u,segmented:!0,segmentedActive:n,segmentedStrong:i,rounded:s&&i},l),r)});TJ.displayName="SegmentedButton";const NJ=(t,e,n)=>({base:{common:A("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",nr("fixed",n)),ios:"",material:`rounded-t-2xl ease-material-in ${e.bgIos}`,opened:`-translate-y-full ${e.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),_J=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function KI(){return KI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KI.apply(this,arguments)}const RJ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,ios:l,material:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=i?"opened":"closed",m=n,y={...d},v=it({ios:l,material:u}),b=_t(),x=_J(a,b),w=v(NJ(t,x,r),r);return G.createElement(G.Fragment,null,o&&G.createElement("div",{className:w.backdrop[f],onClick:s}),G.createElement(m,KI({ref:p,className:w.base[f]},y),c))});RJ.displayName="Sheet";const $J=(t,e)=>{const{buttonsOnly:n}=t;return{base:`${e.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:A(e.fillTouchRipple,n&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:A(e.fillBgIos,e.fillTextIos,e.fillActiveBgIos),material:A(e.fillBgMaterial,e.fillTextMaterial,e.fillActiveBgMaterial)},outline:{common:A(e.touchRipple,"active:bg-opacity-15",n&&"first:border-r-0 rtl:last:border-r-0"),ios:A("border-2",e.textIos,e.activeBgIos,e.outlineBorderIos,n&&"rtl:first:border-r-2"),material:A("border",e.textMaterial,e.activeBgMaterial,e.outlineBorderMaterial,n&&"rtl:first:border-r")},clear:{common:`${e.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:A(e.textIos,e.activeBgIos),material:A(e.textMaterial,e.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${e.textIos}`,material:`text-sm ${e.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},OJ=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",...t}};function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XI.apply(this,arguments)}const MJ=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,value:i=0,defaultValue:o,input:s=!1,inputType:l="text",inputPlaceholder:u,inputDisabled:c,inputReadOnly:d,buttonsOnly:p,rounded:f,roundedIos:m,roundedMaterial:y,small:v,smallIos:b,smallMaterial:x,large:w,largeIos:S,largeMaterial:C,raised:E,raisedIos:_,raisedMaterial:N,outline:M,outlineIos:P,outlineMaterial:L,onInput:j,onChange:B,onFocus:K,onBlur:X,onMinus:Z,onPlus:H,ios:F,material:Y,touchRipple:Q=!0,children:ne,...se}=t,pe=R.useRef(null),de=R.useRef(null),ie=R.useRef(null);R.useImperativeHandle(e,()=>({el:pe.current}));const xe=n,q=bn({ios:F,material:Y}),oe=it({ios:F,material:Y});Fo(de,q==="material"&&Q),Fo(ie,q==="material"&&Q);const he=typeof f>"u"?q==="ios"?m:y:f,Ee=typeof v>"u"?q==="ios"?b:x:v,Ie=typeof w>"u"?q==="ios"?S:C:w,_e=typeof E>"u"?q==="ios"?_:N:E,Fe=typeof M>"u"?q==="ios"?P:L:M,Xe=_t(),Oe=OJ(a,Xe),lt=Ie?"large":Ee?"small":"medium",Je=Fe&&_e?"clear":Fe?"outline":"fill",nt=he?"rounded":"square",et=oe($J({...t,rounded:he,small:Ee,large:Ie,raised:_e,outline:Fe},Oe)),sn={...se},Vt=A(et.base,_e&&et.raised,et.size[lt],et.shape[nt],r),Qt=A(et.button,et.buttonStyle[Je],et.buttonLeftShape[nt]),Zt=A(et.button,et.buttonStyle[Je],et.buttonRightShape[nt]),Ot=A(s&&et.input,et.value[Je]);return G.createElement(xe,XI({ref:pe,className:Vt},sn),G.createElement("span",{ref:de,className:Qt,role:"button",tabIndex:"0",onClick:Z},G.createElement("span",{className:et.hBar})),s&&!p&&G.createElement("input",{className:Ot,placeholder:u,type:l,value:i,defaultValue:o,disabled:c,readOnly:d,onInput:j,onChange:B,onFocus:K,onBlur:X}),!s&&!p&&G.createElement("span",{className:Ot},i),G.createElement("span",{ref:ie,className:Zt,role:"button",tabIndex:"0",onClick:H},G.createElement("span",{className:et.hBar}),G.createElement("span",{className:et.vBar})))});MJ.displayName="Stepper";function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YI.apply(this,arguments)}const XP=R.forwardRef((t,e)=>{const{labels:n,icons:r,children:a,...i}=t,o=R.useRef(null);R.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return G.createElement(_I,YI({ref:o,tabbar:!0,tabbarIcons:r,tabbarLabels:n},s),a)});XP.displayName="Tabbar";const PJ=function(t,e){let{hasIcon:n,hasLabel:r,active:a}=t===void 0?{}:t;return e===void 0&&(e={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:A("py-1",a?e.textActiveIos:e.textIos),material:A("py-2",n&&r&&"space-y-1",a?e.textActiveMaterial:e.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:A("w-7 h-7"),material:A("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:A(a?e.iconBgActiveIos:e.iconBgIos),material:A(a?e.iconBgActiveMaterial:e.iconBgMaterial,!a&&"scale-x-[0.5] opacity-0")},label:{ios:A(n?"text-xs font-medium":"",""),material:A(n?"text-xs":"text-sm","font-medium")}}},AJ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-40",e("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),...t}};function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QI.apply(this,arguments)}const ag=R.forwardRef((t,e)=>{const{className:n,active:r,ios:a,material:i,colors:o,linkProps:s={},icon:l,label:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f={...s,...d},m=_t(),y=AJ(o,m),v=it({ios:a,material:i}),b=!!l,x=u||c&&c.length,w=v(PJ({hasLabel:x,hasIcon:b,active:r},y));return G.createElement(wp,QI({ref:p,tabbar:!0,tabbarActive:r,className:n},f),G.createElement("span",{className:w.content},l&&G.createElement("span",{className:w.iconContainer},G.createElement("span",{className:w.iconBg}),l),(u||c&&c.length)&&G.createElement("span",{className:w.label},u,c)))});ag.displayName="TabbarLink";const DJ=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function ZI(){return ZI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZI.apply(this,arguments)}const LJ=R.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=R.useRef(null);R.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(DJ({...t})),u={...o};return G.createElement("table",ZI({className:l.base,ref:s},u),i)});LJ.displayName="Table";const FJ=()=>({base:{common:"text-sm",ios:"",material:""}});function JI(){return JI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JI.apply(this,arguments)}const BJ=R.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=R.useRef(null);R.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(FJ({...t})),u={...o};return G.createElement("tbody",JI({className:l.base,ref:s},u),i)});BJ.displayName="TableBody";const zJ=(t,e,n)=>{const{header:r}=t;return{base:{common:A("align-middle",n),ios:A(r?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${e.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:A(r?`${e.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},jJ=function(t,e){return t===void 0&&(t={}),{textHeaderIos:A("text-black/45",e("dark:text-white/55")),textHeaderMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function e3(){return e3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e3.apply(this,arguments)}const VJ=R.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=a?"th":"td",d=it({ios:i,material:o}),p=_t(),f=jJ(r,p),m=d(zJ({...t},f,n)),y={...l};return G.createElement(c,e3({className:m.base,ref:u},y),s)});VJ.displayName="TableCell";const UJ=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function t3(){return t3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t3.apply(this,arguments)}const WJ=R.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=R.useRef(null);R.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(UJ({...t})),u={...o};return G.createElement("thead",t3({className:l.base,ref:s},u),i)});WJ.displayName="TableHead";const GJ=(t,e)=>{const{header:n}=t;return{base:{common:"align-middle relative",ios:n?"":A(e.bgIos,"hairline-b last:hairline-transparent"),material:n?"":A(e.bgMaterial,`border-t ${e.dividerMaterial}`)}}},HJ=function(t,e){return t===void 0&&(t={}),{bgIos:A("hover:bg-black/5",e("dark:hover:bg-white/10")),bgMaterial:A("hover:bg-md-light-secondary-container",e("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function n3(){return n3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n3.apply(this,arguments)}const qJ=R.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=it({ios:i,material:o}),d=_t(),p=HJ(r,d),f=c(GJ({...t},p)),m={...l};return G.createElement("tr",n3({className:f.base,ref:u},m),s)});qJ.displayName="TableRow";const KJ=(t,e,n)=>{const{translucent:r,opened:a}=t;return{base:{common:A(nr("fixed",n),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!a&&"translate-y-full opacity-0 pointer-events-none"),ios:A("sm:rounded-lg duration-300",e.textIos,e.bgIos,r&&"translucent"),material:A("sm:rounded-2xl duration-200",e.textMaterial,e.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},XJ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-black",bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function r3(){return r3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r3.apply(this,arguments)}const YJ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,button:o,position:s="left",opened:l,ios:u,material:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const m=n,y={...p},v=it({ios:u,material:c}),b=_t(),x=XJ(a,b),w=v(KJ({...t,translucent:i},x,r),r);return G.createElement(m,r3({ref:f,className:w.base[s]},y),G.createElement("div",{className:w.content},d,o&&G.createElement("div",{className:w.button},o)))});YJ.displayName="Toast";const QJ=(t,e,n,r)=>({base:{common:A(nr("relative",n),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",r("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:e.bgIos,material:A(e.bgMaterial,e.borderMaterial)},checked:{ios:`${e.checkedBgIos}`,material:A(e.checkedBgMaterial,e.checkedBorderMaterial)}},inner:{ios:A("w-full h-full bg-white rounded-full block duration-300 transform",r("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:A("translate-x-5 rtl:!-translate-x-5"),material:A("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:A(e.checkedThumbBgIos),material:A(e.checkedThumbBgMaterial)},notChecked:{ios:e.thumbBgIos,material:A("scale-[0.666]",e.thumbBgMaterial)}},input:{common:"hidden"}}),ZJ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),checkedBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),checkedBorderMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),thumbBgMaterial:A("bg-md-light-outline",e("dark:bg-md-dark-outline")),checkedThumbBgMaterial:A("bg-md-light-on-primary",e("dark:bg-md-dark-on-primary")),...t}};function a3(){return a3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a3.apply(this,arguments)}const YP=R.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,touchRipple:p=!0,ios:f,material:m,children:y,...v}=t,b=R.useRef(null),x=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));const w=n,S={...v},C=bn({ios:f,material:m}),E=it({ios:f,material:m}),_=_t();Fo(x,C==="material"&&p,b);const N=ZJ(a,_),M=o||i&&!d?"checked":"notChecked",P=E(QJ(t,N,r,_),r);return G.createElement(w,a3({ref:b,className:P.base[M]},S),G.createElement("input",{type:"checkbox",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:P.input}),G.createElement("span",{className:P.inner[M]}),G.createElement("span",{ref:x,className:P.thumbWrap[M]},G.createElement("span",{className:P.thumb[M]})),y)});YP.displayName="Toggle";var JJ={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const QP=t=>{let e;const n=new Set,r=(s,l)=>{const u=typeof s=="function"?s(e):s;if(!Object.is(u,e)){const c=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(d=>d(e,c))}},a=()=>e,i={setState:r,getState:a,getInitialState:()=>o,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(JJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=e=t(r,a,i);return i},eee=t=>t?QP(t):QP;var ZP={exports:{}},JP={},eA={exports:{}},tA={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Cp=R;function tee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nee=typeof Object.is=="function"?Object.is:tee,ree=Cp.useState,aee=Cp.useEffect,iee=Cp.useLayoutEffect,oee=Cp.useDebugValue;function see(t,e){var n=e(),r=ree({inst:{value:n,getSnapshot:e}}),a=r[0].inst,i=r[1];return iee(function(){a.value=n,a.getSnapshot=e,i3(a)&&i({inst:a})},[t,n,e]),aee(function(){return i3(a)&&i({inst:a}),t(function(){i3(a)&&i({inst:a})})},[t]),oee(n),n}function i3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nee(t,n)}catch{return!0}}function lee(t,e){return e()}var uee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lee:see;tA.useSyncExternalStore=Cp.useSyncExternalStore!==void 0?Cp.useSyncExternalStore:uee,eA.exports=tA;var cee=eA.exports;/**
* @license React
* use-sync-external-store-shim/with-selector.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var sb=R,dee=cee;function pee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hee=typeof Object.is=="function"?Object.is:pee,fee=dee.useSyncExternalStore,gee=sb.useRef,mee=sb.useEffect,yee=sb.useMemo,bee=sb.useDebugValue;JP.useSyncExternalStoreWithSelector=function(t,e,n,r,a){var i=gee(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=yee(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),a!==void 0&&o.hasValue){var m=o.value;if(a(m,f))return d=m}return d=f}if(m=d,hee(c,f))return m;var y=r(f);return a!==void 0&&a(m,y)?m:(c=f,d=y)}var u=!1,c,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,a]);var s=fee(t,i[0],i[1]);return mee(function(){o.hasValue=!0,o.value=s},[s]),bee(s),s},ZP.exports=JP;var vee=ZP.exports;const xee=Ki(vee);var nA={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:wee}=G,{useSyncExternalStoreWithSelector:kee}=xee;let rA=!1;const See=t=>t;function Cee(t,e=See,n){(nA?"production":void 0)!=="production"&&n&&!rA&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),rA=!0);const r=kee(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return wee(r),r}const aA=t=>{(nA?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?eee(t):t,n=(r,a)=>Cee(e,r,a);return Object.assign(n,e),n},Eee=t=>t?aA(t):aA;var lb={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const o3=new Map,ub=t=>{const e=o3.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},Iee=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=o3.get(n.name);if(r)return{type:"tracked",store:t,...r};const a={connection:e.connect(n),stores:{}};return o3.set(n.name,a),{type:"tracked",store:t,...a}},Tee=(t,e={})=>(n,r,a)=>{const{enabled:i,anonymousActionType:o,store:s,...l}=e;let u;try{u=(i??(lb?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(lb?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,a);const{connection:c,...d}=Iee(s,u,l);let p=!0;a.setState=(y,v,b)=>{const x=n(y,v);if(!p)return x;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return s===void 0?(c?.send(w,r()),x):(c?.send({...w,type:`${s}/${w.type}`},{...ub(l.name),[s]:a.getState()}),x)};const f=(...y)=>{const v=p;p=!1,n(...y),p=v},m=t(a.setState,r,a);if(d.type==="untracked"?c?.init(m):(d.stores[d.store]=a,c?.init(Object.fromEntries(Object.entries(d.stores).map(([y,v])=>[y,y===d.store?m:v.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let y=!1;const v=a.dispatch;a.dispatch=(...b)=>{(lb?"production":void 0)!=="production"&&b[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),v(...b)}}return c.subscribe(y=>{var v;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return s3(y.payload,b=>{if(b.type==="__setState"){if(s===void 0){f(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=b.state[s];if(x==null)return;JSON.stringify(a.getState())!==JSON.stringify(x)&&f(x);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(b)});case"DISPATCH":switch(y.payload.type){case"RESET":return f(m),s===void 0?c?.init(a.getState()):c?.init(ub(l.name));case"COMMIT":if(s===void 0){c?.init(a.getState());return}return c?.init(ub(l.name));case"ROLLBACK":return s3(y.state,b=>{if(s===void 0){f(b),c?.init(a.getState());return}f(b[s]),c?.init(ub(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return s3(y.state,b=>{if(s===void 0){f(b);return}JSON.stringify(a.getState())!==JSON.stringify(b[s])&&f(b[s])});case"IMPORT_STATE":{const{nextLiftedState:b}=y.payload,x=(v=b.computedStates.slice(-1)[0])==null?void 0:v.state;if(!x)return;f(s===void 0?x:x[s]),c?.send(null,b);return}case"PAUSE_RECORDING":return p=!p}return}}),m},Nee=Tee,s3=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function _ee(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const i=s=>s===null?null:JSON.parse(s,e?.reviver),o=(a=n.getItem(r))!=null?a:null;return o instanceof Promise?o.then(i):i(o)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,e?.replacer)),removeItem:r=>n.removeItem(r)}}const ig=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return ig(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ig(r)(n)}}}},Ree=(t,e)=>(n,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...e},o=!1;const s=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,a);const c=ig(i.serialize),d=()=>{const v=i.partialize({...r()});let b;const x=c({state:v,version:i.version}).then(w=>u.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return x},p=a.setState;a.setState=(v,b)=>{p(v,b),d()};const f=t((...v)=>{n(...v),d()},r,a);let m;const y=()=>{var v;if(!u)return;o=!1,s.forEach(x=>x(r()));const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return ig(u.getItem.bind(u))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return m=i.merge(x,(w=r())!=null?w:f),n(m,!0),d()}).then(()=>{b?.(m,void 0),o=!0,l.forEach(x=>x(m))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},y(),m||f},$ee=(t,e)=>(n,r,a)=>{let i={storage:_ee(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...e},o=!1;const s=new Set,l=new Set;let u=i.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const c=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},d=a.setState;a.setState=(y,v)=>{d(y,v),c()};const p=t((...y)=>{n(...y),c()},r,a);a.getInitialState=()=>p;let f;const m=()=>{var y,v;if(!u)return;o=!1,s.forEach(x=>{var w;return x((w=r())!=null?w:p)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=r())!=null?y:p))||void 0;return ig(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return f=i.merge(x,(w=r())!=null?w:p),n(f,!0),c()}).then(()=>{b?.(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||m(),f||p},Oee=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((lb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ree(t,e)):$ee(t,e),Mee=Oee,iA=[{id:1,image:"./frame/frame_1.png",front:"./frame/frame_1_front.png"},{id:2,image:"./frame/frame_2.png",front:"./frame/frame_2_front.png"},{id:3,image:"./frame/frame_3.png",front:"./frame/frame_3_front.png"},{id:4,image:"./frame/frame_4.png",front:"./frame/frame_4_front.png"},{id:5,image:"./frame/frame_5.png",front:"./frame/frame_5_front.png"}],Pee=[{id:"Betende_Frau_Maria",image:"./sticker/Betende_Frau_Maria.png"},{id:"Blumentopf",image:"./sticker/Blumentopf.png"},{id:"Blume",image:"./sticker/Blume.png"},{id:"Frau_in_gelbem_Kleid",image:"./sticker/Frau_in_gelbem_Kleid.png"},{id:"Magd",image:"./sticker/Magd.png"},{id:"Mann_liegend",image:"./sticker/Mann_liegend.png"},{id:"Mann",image:"./sticker/Mann.png"},{id:"Mucha_Dekor",image:"./sticker/Mucha_Dekor.png"},{id:"The_Hare",image:"./sticker/The_Hare.png"},{id:"Wasserspeier",image:"./sticker/Wasserspeier.png"}],Aee=[{id:"http://www.wikidata.org/entity/Q20355536",name:"A Street in Torello, Italy",year:"1890",country:"Denmark",location:"Statens Museum for Kunst",creator:"Peder Severin Kr\xF8yer",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS1435",identifier:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q20537703",name:"At the French Windows. The Artist's Wife",year:"1897",country:"Denmark",location:"Statens Museum for Kunst",creator:"Laurits Andersen Ring",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS3716",identifier:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297795",name:"Brot! (Bread!)",year:"1924",country:"Germany",location:"Vanderbilt University Fine Arts Gallery",creator:"K\xE4the Kollwitz",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1977/1977.011.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297971",name:"Business-Man, ffrom Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Belgium",location:"Vanderbilt University Fine Arts Gallery",creator:"Frans Masereel",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.032.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103300860",name:"Half-Figure Prophet",year:"1450",country:"France",location:"Vanderbilt University Fine Arts Gallery",creator:"http://www.wikidata.org/.well-known/genid/d7c4865c9fae865605be887d7277ab75",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1975/1975.005.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102967848",name:"Landscape with Shepherds",year:"",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Jan Both",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0195P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q106582838",name:"The Blacksmith Worker",year:"",country:"Switzerland",location:"Vanderbilt University Fine Arts Gallery",creator:"Antonello da Messina",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.036.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q104032628",name:"The Empty Jug",year:"1653",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Adriaen van Ostade",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0845P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102975484",name:"Trostung (Consolation), from Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Austria",location:"Vanderbilt University Fine Arts Gallery",creator:"Georg Ehrlich",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.031.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/100,100/0/default.jpg"}],oA={artworkList:Pee,frame:iA[1],imageList:Aee.sort(()=>Math.random()-.5),canvasList:[],imageLikeList:[]},Tc=Eee()(Nee(Mee(t=>({...oA,addToArtwork:(e,n)=>t(r=>({artworkList:[{id:e,image:n},...r.artworkList]})),addToCanvas:(e,n,r)=>t(a=>({canvasList:[...a.canvasList,{brightness:0,contrast:0,height:400,id:`${a.canvasList.length+1}`,image:e,isDragging:!1,opacity:1,width:400,x:n,y:r}]})),addToImageList:e=>t(n=>({imageList:[...n.imageList,...e]})),removeFromImageList:e=>t(n=>({imageList:n.imageList.filter(r=>r.id!==e)})),likeImage:e=>t(n=>({imageLikeList:[...n.imageLikeList,e]})),resetState:()=>t(oA),removeFromCanvas:e=>t(n=>({canvasList:n.canvasList.filter(r=>r.id!==e)})),setFrame:e=>t(()=>({frame:iA.find(n=>n.id===e)})),transformCanvasImage:e=>t(n=>({canvasList:n.canvasList.map(r=>r.id!==e.id?r:{...r,height:e.height,width:e.width,x:e.x,y:e.y,brightness:e.brightness,contrast:e.contrast,opacity:e.opacity})})),moveCanvasImage:(e,n)=>t(r=>{const a=r.canvasList.findIndex(i=>i.id===e);if(a!==-1){const i=n?a+1:a-1;if(i>=0&&i<r.canvasList.length){const o=[...r.canvasList],[s]=o.splice(a,1);return o.splice(i,0,s),{canvasList:o}}}return{}})}),{name:"glamStore",version:1})));function Dee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Lee=R.forwardRef(Dee),Fee=Lee;function Bee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"}))}const zee=R.forwardRef(Bee),jee=zee;function Vee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"}))}const Uee=R.forwardRef(Vee),Wee=Uee;function Gee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Hee=R.forwardRef(Gee),qee=Hee;function Kee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Xee=R.forwardRef(Kee),Yee=Xee;function Qee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Zee=R.forwardRef(Qee),Jee=Zee;function ete({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const tte=R.forwardRef(ete),nte=tte;function rte({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const ate=R.forwardRef(rte),ite=ate;function ote({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const ste=R.forwardRef(ote),lte=ste;function ute({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const cte=R.forwardRef(ute),dte=cte;function pte({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const hte=R.forwardRef(pte),fte=hte;function gte({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const mte=R.forwardRef(gte),yte=mte;function bte({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 8.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v8.25A2.25 2.25 0 0 0 6 16.5h2.25m8.25-8.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-7.5A2.25 2.25 0 0 1 8.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 0 0-2.25 2.25v6"}))}const vte=R.forwardRef(bte),xte=vte;function wte({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const kte=R.forwardRef(wte),Ste=kte;function Cte({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ete=R.forwardRef(Cte),Ite=Ete;function Tte({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Nte=R.forwardRef(Tte),_te=Nte;function sA(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Rte=["color"],$te=R.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=sA(t,Rte);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),R.createElement("path",{d:"M3 9C3 6.5 4.5 4.25 7.5 1.5C10.5 4.25 12 6.5 12 9C12 11.4853 9.98528 13.5 7.5 13.5C5.01472 13.5 3 11.4853 3 9ZM10.9524 8.30307C9.67347 7.82121 8.2879 8.46208 6.98956 9.06259C5.9327 9.55142 4.93365 10.0135 4.09695 9.82153C4.03357 9.55804 4 9.28294 4 9C4 7.11203 5.02686 5.27195 7.5 2.87357C9.66837 4.97639 10.725 6.65004 10.9524 8.30307Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ote=["color"],Mte=R.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=sA(t,Ote);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),R.createElement("path",{d:"M7.85367 1.48956C7.65841 1.29429 7.34182 1.29429 7.14656 1.48956L1.48971 7.14641C1.29445 7.34167 1.29445 7.65825 1.48971 7.85352L7.14656 13.5104C7.34182 13.7056 7.65841 13.7056 7.85367 13.5104L13.5105 7.85352C13.7058 7.65825 13.7058 7.34167 13.5105 7.14641L7.85367 1.48956ZM7.5 2.55033L2.55037 7.49996L7.5 12.4496V2.55033Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),lA={exports:{}};(function(t,e){(function(n,r){r()})(Ga,function(){function n(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,d){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){l(p.response,c,d)},p.onerror=function(){console.error("could not download file")},p.send()}function a(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ga=="object"&&Ga.global===Ga?Ga:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,d){var p=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?i(f):a(f.href)?r(u,c,d):i(f,f.target="_blank")):(f.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,d){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,d),c);else if(a(u))r(u,c,d);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){i(p)})}}:function(u,c,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,d);var f=u.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&m||s)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var w=v.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=w:location=w,p=null},v.readAsDataURL(u)}else{var b=o.URL||o.webkitURL,x=b.createObjectURL(u);p?p.location=x:location.href=x,p=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(lA);var Pte=lA.exports,l3={exports:{}},cb={},db={},Lt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Ga<"u"?Ga:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.3",isBrowser:n(),isUnminified:/param/.test(function(a){}.toString()),dblClickWindow:400,getAngle(a){return t.Konva.angleDeg?a*e:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(a){t.glob.Konva=a}};const r=a=>{t.Konva[a.prototype.getClassName()]=a};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Lt);var rr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Lt;class n{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){var C=this.m;return{x:C[0]*S.x+C[2]*S.y+C[4],y:C[1]*S.x+C[3]*S.y+C[5]}}translate(S,C){return this.m[4]+=this.m[0]*S+this.m[2]*C,this.m[5]+=this.m[1]*S+this.m[3]*C,this}scale(S,C){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=C,this.m[3]*=C,this}rotate(S){var C=Math.cos(S),E=Math.sin(S),_=this.m[0]*C+this.m[2]*E,N=this.m[1]*C+this.m[3]*E,M=this.m[0]*-E+this.m[2]*C,P=this.m[1]*-E+this.m[3]*C;return this.m[0]=_,this.m[1]=N,this.m[2]=M,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,C){var E=this.m[0]+this.m[2]*C,_=this.m[1]+this.m[3]*C,N=this.m[2]+this.m[0]*S,M=this.m[3]+this.m[1]*S;return this.m[0]=E,this.m[1]=_,this.m[2]=N,this.m[3]=M,this}multiply(S){var C=this.m[0]*S.m[0]+this.m[2]*S.m[1],E=this.m[1]*S.m[0]+this.m[3]*S.m[1],_=this.m[0]*S.m[2]+this.m[2]*S.m[3],N=this.m[1]*S.m[2]+this.m[3]*S.m[3],M=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],P=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=C,this.m[1]=E,this.m[2]=_,this.m[3]=N,this.m[4]=M,this.m[5]=P,this}invert(){var S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*S,E=-this.m[1]*S,_=-this.m[2]*S,N=this.m[0]*S,M=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=E,this.m[2]=_,this.m[3]=N,this.m[4]=M,this.m[5]=P,this}getMatrix(){return this.m}decompose(){var S=this.m[0],C=this.m[1],E=this.m[2],_=this.m[3],N=this.m[4],M=this.m[5],P=S*_-C*E;let L={x:N,y:M,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||C!=0){var j=Math.sqrt(S*S+C*C);L.rotation=C>0?Math.acos(S/j):-Math.acos(S/j),L.scaleX=j,L.scaleY=P/j,L.skewX=(S*E+C*_)/P,L.skewY=0}else if(E!=0||_!=0){var B=Math.sqrt(E*E+_*_);L.rotation=Math.PI/2-(_>0?Math.acos(-E/B):-Math.acos(E/B)),L.scaleX=P/B,L.scaleY=B,L.skewX=0,L.skewY=(S*E+C*_)/P}return L.rotation=t.Util._getRotation(L.rotation),L}}t.Transform=n;var r="[object Array]",a="[object Number]",i="[object String]",o="[object Boolean]",s=Math.PI/180,l=180/Math.PI,u="#",c="",d="0",p="Konva warning: ",f="Konva error: ",m="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,b=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};t.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===r},_isNumber(w){return Object.prototype.toString.call(w)===a&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===i},_isBoolean(w){return Object.prototype.toString.call(w)===o},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;var S=w[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){b.push(w),b.length===1&&x(function(){const S=b;b=[],S.forEach(function(C){C()})})},createCanvasElement(){var w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,S){var C=t.Util.createImageElement();C.onload=function(){S(C)},C.src=w},_rgbToHex(w,S,C){return((1<<24)+(w<<16)+(S<<8)+C).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,c);var S=parseInt(w,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){for(var w=(Math.random()*16777215<<0).toString(16);w.length<6;)w=d+w;return u+w},getRGB(w){var S;return w in y?(S=y[w],{r:S[0],g:S[1],b:S[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===m?(S=v.exec(w.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",t.Util._namedColorToRBA(w)||t.Util._hex3ColorToRGBA(w)||t.Util._hex4ColorToRGBA(w)||t.Util._hex6ColorToRGBA(w)||t.Util._hex8ColorToRGBA(w)||t.Util._rgbColorToRGBA(w)||t.Util._rgbaColorToRGBA(w)||t.Util._hslColorToRGBA(w)},_namedColorToRBA(w){var S=y[w.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];var S=w.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];var S=w.split(/ *, */).map((C,E)=>C.slice(-1)==="%"?E===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[S,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),E=Number(C[0])/360,_=Number(C[1])/100,N=Number(C[2])/100;let M,P,L;if(_===0)return L=N*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};N<.5?M=N*(1+_):M=N+_-N*_;const j=2*N-M,B=[0,0,0];for(let K=0;K<3;K++)P=E+1/3*-(K-1),P<0&&P++,P>1&&P--,6*P<1?L=j+(M-j)*6*P:2*P<1?L=M:3*P<2?L=j+(M-j)*(2/3-P)*6:L=j,B[K]=L*255;return{r:Math.round(B[0]),g:Math.round(B[1]),b:Math.round(B[2]),a:1}}},haveIntersection(w,S){return!(S.x>w.x+w.width||S.x+S.width<w.x||S.y>w.y+w.height||S.y+S.height<w.y)},cloneObject(w){var S={};for(var C in w)this._isPlainObject(w[C])?S[C]=this.cloneObject(w[C]):this._isArray(w[C])?S[C]=this.cloneArray(w[C]):S[C]=w[C];return S},cloneArray(w){return w.slice(0)},degToRad(w){return w*s},radToDeg(w){return w*l},_degToRad(w){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(w)},_radToDeg(w){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(w)},_getRotation(w){return e.Konva.angleDeg?t.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(f+w)},error(w){console.error(f+w)},warn(w){e.Konva.showWarnings&&console.warn(p+w)},each(w,S){for(var C in w)S(C,w[C])},_inRange(w,S,C){return S<=w&&w<C},_getProjectionToSegment(w,S,C,E,_,N){var M,P,L,j=(w-C)*(w-C)+(S-E)*(S-E);if(j==0)M=w,P=S,L=(_-C)*(_-C)+(N-E)*(N-E);else{var B=((_-w)*(C-w)+(N-S)*(E-S))/j;B<0?(M=w,P=S,L=(w-_)*(w-_)+(S-N)*(S-N)):B>1?(M=C,P=E,L=(C-_)*(C-_)+(E-N)*(E-N)):(M=w+B*(C-w),P=S+B*(E-S),L=(M-_)*(M-_)+(P-N)*(P-N))}return[M,P,L]},_getProjectionToLine(w,S,C){var E=t.Util.cloneObject(w),_=Number.MAX_VALUE;return S.forEach(function(N,M){if(!(!C&&M===S.length-1)){var P=S[(M+1)%S.length],L=t.Util._getProjectionToSegment(N.x,N.y,P.x,P.y,w.x,w.y),j=L[0],B=L[1],K=L[2];K<_&&(E.x=j,E.y=B,_=K)}}),E},_prepareArrayForTween(w,S,C){var E,_=[],N=[];if(w.length>S.length){var M=S;S=w,w=M}for(E=0;E<w.length;E+=2)_.push({x:w[E],y:w[E+1]});for(E=0;E<S.length;E+=2)N.push({x:S[E],y:S[E+1]});var P=[];return N.forEach(function(L){var j=t.Util._getProjectionToLine(L,_,C);P.push(j.x),P.push(j.y)}),P},_prepareToStringify(w){var S;w.visitedByCircularReferenceRemoval=!0;for(var C in w)if(w.hasOwnProperty(C)&&w[C]&&typeof w[C]=="object"){if(S=Object.getOwnPropertyDescriptor(w,C),w[C].visitedByCircularReferenceRemoval||t.Util._isElement(w[C]))if(S.configurable)delete w[C];else return null;else if(t.Util._prepareToStringify(w[C])===null)if(S.configurable)delete w[C];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,S){for(var C in S)w[C]=S[C];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){e.Konva.releaseCanvasOnDestroy&&w.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(w,S,C,E){let _=0,N=0,M=0,P=0;typeof E=="number"?_=N=M=P=Math.min(E,S/2,C/2):(_=Math.min(E[0]||0,S/2,C/2),N=Math.min(E[1]||0,S/2,C/2),P=Math.min(E[2]||0,S/2,C/2),M=Math.min(E[3]||0,S/2,C/2)),w.moveTo(_,0),w.lineTo(S-N,0),w.arc(S-N,N,N,Math.PI*3/2,0,!1),w.lineTo(S,C-P),w.arc(S-P,C-P,P,0,Math.PI/2,!1),w.lineTo(M,C),w.arc(M,C-M,M,Math.PI/2,Math.PI,!1),w.lineTo(0,_),w.arc(_,_,_,Math.PI,Math.PI*3/2,!1)}}})(rr);var Hn={},Ft={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.getComponentValidator=Qe.getBooleanValidator=Qe.getNumberArrayValidator=Qe.getFunctionValidator=Qe.getStringOrGradientValidator=Qe.getStringValidator=Qe.getNumberOrAutoValidator=Qe.getNumberOrArrayOfNumbersValidator=Qe.getNumberValidator=Qe.alphaComponent=Qe.RGBComponent=void 0;const el=Lt,cr=rr;function tl(t){return cr.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||cr.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function Ate(t){return t>255?255:t<0?0:Math.round(t)}Qe.RGBComponent=Ate;function Dte(t){return t>1?1:t<1e-4?1e-4:t}Qe.alphaComponent=Dte;function Lte(){if(el.Konva.isUnminified)return function(t,e){return cr.Util._isNumber(t)||cr.Util.warn(tl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}Qe.getNumberValidator=Lte;function Fte(t){if(el.Konva.isUnminified)return function(e,n){let r=cr.Util._isNumber(e),a=cr.Util._isArray(e)&&e.length==t;return!r&&!a&&cr.Util.warn(tl(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}Qe.getNumberOrArrayOfNumbersValidator=Fte;function Bte(){if(el.Konva.isUnminified)return function(t,e){var n=cr.Util._isNumber(t),r=t==="auto";return n||r||cr.Util.warn(tl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}Qe.getNumberOrAutoValidator=Bte;function zte(){if(el.Konva.isUnminified)return function(t,e){return cr.Util._isString(t)||cr.Util.warn(tl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}Qe.getStringValidator=zte;function jte(){if(el.Konva.isUnminified)return function(t,e){const n=cr.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||cr.Util.warn(tl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}Qe.getStringOrGradientValidator=jte;function Vte(){if(el.Konva.isUnminified)return function(t,e){return cr.Util._isFunction(t)||cr.Util.warn(tl(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}Qe.getFunctionValidator=Vte;function Ute(){if(el.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(cr.Util._isArray(t)?t.forEach(function(r){cr.Util._isNumber(r)||cr.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):cr.Util.warn(tl(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}Qe.getNumberArrayValidator=Ute;function Wte(){if(el.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||cr.Util.warn(tl(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}Qe.getBooleanValidator=Wte;function Gte(t){if(el.Konva.isUnminified)return function(e,n){return e==null||cr.Util.isObject(e)||cr.Util.warn(tl(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}Qe.getComponentValidator=Gte,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=rr,n=Qe;var r="get",a="set";t.Factory={addGetterSetter(i,o,s,l,u){t.Factory.addGetter(i,o,s),t.Factory.addSetter(i,o,l,u),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,s){var l=r+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||t.Factory.overWriteSetter(i,o,s,l)},overWriteSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(i,o,s,l,u){var c=s.length,d=e.Util._capitalize,p=r+d(o),f=a+d(o),m,y;i.prototype[p]=function(){var b={};for(m=0;m<c;m++)y=s[m],b[y]=this.getAttr(o+d(y));return b};var v=(0,n.getComponentValidator)(s);i.prototype[f]=function(b){var x=this.attrs[o],w;l&&(b=l.call(this,b)),v&&v.call(this,b,o);for(w in b)b.hasOwnProperty(w)&&this._setAttr(o+d(w),b[w]);return b||s.forEach(S=>{this._setAttr(o+d(S),void 0)}),this._fireChangeEvent(o,x,b),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){var s=e.Util._capitalize(o),l=a+s,u=r+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=r+e.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(c);var d=this.attrs[o];return d===void 0?s:d},t.Factory.addSetter(i,o,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],c=r+e.Util._capitalize(s),d=a+e.Util._capitalize(s);function p(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=p,i.prototype[c]=p,i.prototype[d]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(Ft);var Bo={},nl={};Object.defineProperty(nl,"__esModule",{value:!0}),nl.HitContext=nl.SceneContext=nl.Context=void 0;const uA=rr,Hte=Lt;function qte(t){var e=[],n=t.length,r=uA.Util,a,i;for(a=0;a<n;a++)i=t[a],r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i);return e}var cA=",",Kte="(",Xte=")",Yte="([",Qte="])",Zte=";",Jte="()",ene="=",dA=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],tne=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const nne=100;class pb{constructor(e){this.canvas=e,Hte.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,a=r.length,i="",o,s,l,u;for(o=0;o<a;o++)s=r[o],l=s.method,l?(u=s.args,i+=l,e?i+=Jte:uA.Util._isArray(u[0])?i+=Yte+u.join(cA)+Qte:(n&&(u=u.map(c=>typeof c=="number"?Math.floor(c):c)),i+=Kte+u.join(cA)+Xte)):(i+=s.property,e||(i+=ene+s.val)),i+=Zte;return i}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=nne&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,a,i,o){this._context.arc(e,n,r,a,i,o)}arcTo(e,n,r,a,i){this._context.arcTo(e,n,r,a,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,a,i,o){this._context.bezierCurveTo(e,n,r,a,i,o)}clearRect(e,n,r,a){this._context.clearRect(e,n,r,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,a){return this._context.createLinearGradient(e,n,r,a)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,a,i,o){return this._context.createRadialGradient(e,n,r,a,i,o)}drawImage(e,n,r,a,i,o,s,l,u){var c=arguments,d=this._context;c.length===3?d.drawImage(e,n,r):c.length===5?d.drawImage(e,n,r,a,i):c.length===9&&d.drawImage(e,n,r,a,i,o,s,l,u)}ellipse(e,n,r,a,i,o,s,l){this._context.ellipse(e,n,r,a,i,o,s,l)}isPointInPath(e,n,r,a){return r?this._context.isPointInPath(r,e,n,a):this._context.isPointInPath(e,n,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,a){this._context.fillRect(e,n,r,a)}strokeRect(e,n,r,a){this._context.strokeRect(e,n,r,a)}fillText(e,n,r,a){a?this._context.fillText(e,n,r,a):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,a){return this._context.getImageData(e,n,r,a)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,a){this._context.rect(e,n,r,a)}roundRect(e,n,r,a,i){this._context.roundRect(e,n,r,a,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,a){this._context.quadraticCurveTo(e,n,r,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,a,i,o){this._context.setTransform(e,n,r,a,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,a){this._context.strokeText(e,n,r,a)}transform(e,n,r,a,i,o){this._context.transform(e,n,r,a,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=dA.length,r=this.setAttr,a,i,o=function(s){var l=e[s],u;e[s]=function(){return i=qte(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:s,args:i}),u}};for(a=0;a<n;a++)o(dA[a]);e.setAttr=function(){r.apply(e,arguments);var s=arguments[0],l=arguments[1];(s==="shadowOffsetX"||s==="shadowOffsetY"||s==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:s,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}nl.Context=pb,tne.forEach(function(t){Object.defineProperty(pb.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class rne extends pb{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const a=e.getFillPatternImage();if(a&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):a?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(a){for(var o=0;o<a.length;o+=2)i.addColorStop(a[o],a[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var i=e.getStrokeLinearGradientColorStops();i?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,a,i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,s=(a=e.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),c=l.x*u,d=l.y*u;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*d)}}nl.SceneContext=rne;class ane extends pb{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),a=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}nl.HitContext=ane,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.HitCanvas=Bo.SceneCanvas=Bo.Canvas=void 0;const hb=rr,pA=nl,hA=Lt,ine=Ft,one=Qe;var fb;function sne(){if(fb)return fb;var t=hb.Util.createCanvasElement(),e=t.getContext("2d");return fb=function(){var n=hA.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),hb.Util.releaseCanvas(t),fb}class gb{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||hA.Konva.pixelRatio||sne();this.pixelRatio=r,this._canvas=hb.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return hb.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Bo.Canvas=gb,ine.Factory.addGetterSetter(gb,"pixelRatio",void 0,(0,one.getNumberValidator)());class lne extends gb{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new pA.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Bo.SceneCanvas=lne;class une extends gb{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new pA.HitContext(this),this.setSize(e.width,e.height)}}Bo.HitCanvas=une;var mb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Lt,n=rr;t.DD={get isDragging(){var r=!1;return t.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return t.DD._dragElements.forEach(a=>{r=a.node}),r},_dragElements:new Map,_drag(r){const a=[];t.DD._dragElements.forEach((i,o)=>{const{node:s}=i,l=s.getStage();l.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(p=>p.id===i.pointerId);if(u){if(i.dragStatus!=="dragging"){var c=s.dragDistance(),d=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(d<c||(s.startDrag({evt:r}),!s.isDragging()))return}s._setDragPosition(r,i),a.push(s)}}),a.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const a=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,s=o.getStage();if(r&&s.setPointersPositions(r),!s._changedPointerPositions.find(u=>u.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const l=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;l&&a.indexOf(l)===-1&&a.push(l)}),a.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((a,i)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:r},!0),a.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))})(mb),Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.Node=void 0;const Ht=rr,og=Ft,sg=Bo,Nc=Lt,oo=mb,vr=Qe;var yb="absoluteOpacity",bb="allEventListeners",rl="absoluteTransform",fA="absoluteScale",_c="canvas",cne="Change",dne="children",pne="konva",u3="listening",gA="mouseenter",mA="mouseleave",yA="set",bA="Shape",vb=" ",vA="stage",du="transform",hne="Stage",c3="visible",fne=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(vb);let gne=1;class yt{constructor(e){this._id=gne++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===du||e===rl)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),a=e===du||e===rl,i=r===void 0||a&&r.dirty===!0;return i&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const a=n.map(i=>i+"Change.konva").join(vb);this.on(a,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(_c)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===rl&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(_c)){const{scene:e,filter:n,hit:r}=this._cache.get(_c);Ht.Util.releaseCanvas(e,n,r),this._cache.delete(_c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,s=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,c=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!a||!i){Ht.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const p=Math.abs(Math.round(r.x)-s)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;a+=u*2+p,i+=u*2+f,s-=u,l-=u;var m=new sg.SceneCanvas({pixelRatio:o,width:a,height:i}),y=new sg.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new sg.HitCanvas({pixelRatio:d,width:a,height:i}),b=m.getContext(),x=v.getContext();return v.isCache=!0,m.isCache=!0,this._cache.delete(_c),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(m.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),b.save(),x.save(),b.translate(-s,-l),x.translate(-s,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(yb),this._clearSelfAndDescendantCache(fA),this.drawScene(m,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),x.restore(),c&&(b.save(),b.beginPath(),b.rect(0,0,a,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(_c,{scene:m,filter:y,hit:v,x:s,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(_c)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=1/0,i=1/0,o=-1/0,s=-1/0,l=this.getAbsoluteTransform(n);return r.forEach(function(u){var c=l.point(u);a===void 0&&(a=o=c.x,i=s=c.y),a=Math.min(a,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}),{x:a,y:i,width:o-a,height:s-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),a=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/a,r.height/a),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,a=n.filter,i=a.getContext(),o,s,l,u;if(e){if(!this._filterUpToDate){var c=r.pixelRatio;a.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),s=i.getImageData(0,0,a.getWidth(),a.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){Ht.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,s),i.putImageData(s,0,0)}}catch(d){Ht.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return a}return r}on(e,n){if(this._cache&&this._cache.delete(bb),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(vb),a=r.length,i,o,s,l,u;for(i=0;i<a;i++)o=r[i],s=o.split("."),l=s[0],u=s[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){var r=(e||"").split(vb),a=r.length,i,o,s,l,u,c;if(this._cache&&this._cache.delete(bb),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<a;i++)if(s=r[i],l=s.split("."),u=l[0],c=l[1],u)this.eventListeners[u]&&this._off(u,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var a=this;this.on(e,function(i){for(var o=i.target.findAncestors(n,!0,a),s=0;s<o.length;s++)i=Ht.Util.cloneObject(i),i.currentTarget=o[s],r.call(o[s],i)})}remove(){return this.isDragging()&&this.stopDrag(),oo.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(rl),this._clearSelfAndDescendantCache(yb),this._clearSelfAndDescendantCache(fA),this._clearSelfAndDescendantCache(vA),this._clearSelfAndDescendantCache(c3),this._clearSelfAndDescendantCache(u3)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Ht.Util._capitalize(e);return Ht.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==dne&&(r=yA+Ht.Util._capitalize(n),Ht.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(u3,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(c3,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),a=!1;oo.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(a=!0)});var i=!n&&!Nc.Konva.hitOnDragEnabled&&a;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,a,i,o,s;function l(c){for(a=[],i=c.length,o=0;o<i;o++)s=c[o],r++,s.nodeType!==bA&&(a=a.concat(s.getChildren().slice())),s._id===n._id&&(o=i);a.length>0&&a[0].getDepth()<=e&&l(a)}const u=this.getStage();return n.nodeType!==hne&&u&&l(u.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(du),this._clearSelfAndDescendantCache(rl)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var a=this.getAbsoluteTransform(e).getMatrix(),i=new Ht.Transform,o=this.offset();return i.m=a.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...a}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(du);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(du),this._clearSelfAndDescendantCache(rl),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,a=this.x(),i=this.y();return n!==void 0&&(a+=n),r!==void 0&&(i+=r),this.setPosition({x:a,y:i}),this}_eachAncestorReverse(e,n){var r=[],a=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);a&&(!n||a._id!==n._id);)r.unshift(a),a=a.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Ht.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Ht.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Ht.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Ht.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Ht.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Ht.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(yb,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,r,a,i,o;const s={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=Ht.Util.isObject(r)&&!Ht.Util._isPlainObject(r)&&!Ht.Util._isArray(r),!o&&(a=typeof this[n]=="function"&&this[n],delete e[n],i=a?a.call(this):null,e[n]=r,i!==r&&(s.attrs[n]=r));return Ht.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var a=[];n&&this._isMatch(e)&&a.push(this);for(var i=this.parent;i;){if(i===r)return a;i._isMatch(e)&&a.push(i),i=i.parent}return a}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,a,i;for(a=0;a<r;a++)if(i=n[a],Ht.Util.isValidSelector(i)||(Ht.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Ht.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Ht.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(vA,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(rl,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Ht.Transform,this._eachAncestorReverse(function(a){var i=a.transformsEnabled();i==="all"?n.multiply(a.getTransform()):i==="position"&&n.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},e),n;n=this._cache.get(rl)||new Ht.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const a=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,s=this.attrs.offsetY||0;n.translate(a-o,i-s)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(du,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(du)||new Ht.Transform;r.reset();var a=this.x(),i=this.y(),o=Nc.Konva.getAngle(this.rotation()),s=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(a!==0||i!==0)&&r.translate(a,i),o!==0&&r.rotate(o),(u!==0||c!==0)&&r.skew(u,c),(s!==1||l!==1)&&r.scale(s,l),(d!==0||p!==0)&&r.translate(-1*d,-1*p),r.dirty=!1,r}clone(e){var n=Ht.Util.cloneObject(this.attrs),r,a,i,o,s;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(a=this.eventListeners[r],i=a.length,o=0;o<i;o++)s=a[o],s.name.indexOf(pne)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(s));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),a=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,s=new sg.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=s.getContext();const u=new sg.SceneCanvas({width:s.width/s.pixelRatio+Math.abs(a),height:s.height/s.pixelRatio+Math.abs(i),pixelRatio:s.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(a||i)&&l.translate(-1*a,-1*i),this.drawScene(s,void 0,u),l.restore(),s}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(a),a}toImage(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,Ht.Util._urlToImage(this.toDataURL(e),function(i){n(i),a?.(i)})}catch(a){r(a)}})}toBlob(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),a?.(i)},e?.mimeType,e?.quality)}catch(a){r(a)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Nc.Konva.dragDistance}_off(e,n,r){var a=this.eventListeners[e],i,o,s;for(i=0;i<a.length;i++)if(o=a[i].name,s=a[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===s)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+cne,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[yA+Ht.Util._capitalize(e)];return Ht.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Nc.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!Ht.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var a;r!==void 0&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,a,r))}_fireAndBubble(e,n,r){n&&this.nodeType===bA&&(n.target=this);var a=(e===gA||e===mA)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!a){this._fire(e,n);var i=(e===gA||e===mA)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,a;const i=(n=this._cache.get(bb))!==null&&n!==void 0?n:{};let o=i?.[e];if(o===void 0){o=[];let s=Object.getPrototypeOf(this);for(;s;){const l=(a=(r=s.eventListeners)===null||r===void 0?void 0:r[e])!==null&&a!==void 0?a:[];o.push(...l),s=Object.getPrototypeOf(s)}i[e]=o,this._cache.set(bb,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var a=0;a<r.length;a++)r[a].handler.call(this,n);const i=this.eventListeners[e];if(i)for(var a=0;a<i.length;a++)i[a].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),a=this.getAbsolutePosition();if(r){var i=r._getPointerById(n)||r._changedPointerPositions[0]||a;oo.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-a.x,y:i.y-a.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){oo.DD._dragElements.has(this._id)||this._createDragElement(e);const r=oo.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var a={x:r.x-n.offset.x,y:r.y-n.offset.y},i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,a,e);o?a=o:Ht.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(e){const n=oo.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),oo.DD._endDragBefore(e),oo.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=oo.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||Nc.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var a=!1;oo.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(a=!0)}),a||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=oo.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",a=n&&n.dragStatus==="ready";r?this.stopDrag():a&&oo.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Ht.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return Ht.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=yt.prototype.getClassName.call(e),a=e.children,i,o,s;n&&(e.attrs.container=n),Nc.Konva[r]||(Ht.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=Nc.Konva[r];if(i=new l(e.attrs),a)for(o=a.length,s=0;s<o;s++)i.add(yt._createNode(a[s]));return i}}Hn.Node=yt,yt.prototype.nodeType="Node",yt.prototype._attrsAffectingSize=[],yt.prototype.eventListeners={},yt.prototype.on.call(yt.prototype,fne,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(du),this._clearSelfAndDescendantCache(rl)}),yt.prototype.on.call(yt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(c3)}),yt.prototype.on.call(yt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(u3)}),yt.prototype.on.call(yt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(yb)});const Cn=og.Factory.addGetterSetter;Cn(yt,"zIndex"),Cn(yt,"absolutePosition"),Cn(yt,"position"),Cn(yt,"x",0,(0,vr.getNumberValidator)()),Cn(yt,"y",0,(0,vr.getNumberValidator)()),Cn(yt,"globalCompositeOperation","source-over",(0,vr.getStringValidator)()),Cn(yt,"opacity",1,(0,vr.getNumberValidator)()),Cn(yt,"name","",(0,vr.getStringValidator)()),Cn(yt,"id","",(0,vr.getStringValidator)()),Cn(yt,"rotation",0,(0,vr.getNumberValidator)()),og.Factory.addComponentsGetterSetter(yt,"scale",["x","y"]),Cn(yt,"scaleX",1,(0,vr.getNumberValidator)()),Cn(yt,"scaleY",1,(0,vr.getNumberValidator)()),og.Factory.addComponentsGetterSetter(yt,"skew",["x","y"]),Cn(yt,"skewX",0,(0,vr.getNumberValidator)()),Cn(yt,"skewY",0,(0,vr.getNumberValidator)()),og.Factory.addComponentsGetterSetter(yt,"offset",["x","y"]),Cn(yt,"offsetX",0,(0,vr.getNumberValidator)()),Cn(yt,"offsetY",0,(0,vr.getNumberValidator)()),Cn(yt,"dragDistance",null,(0,vr.getNumberValidator)()),Cn(yt,"width",0,(0,vr.getNumberValidator)()),Cn(yt,"height",0,(0,vr.getNumberValidator)()),Cn(yt,"listening",!0,(0,vr.getBooleanValidator)()),Cn(yt,"preventDefault",!0,(0,vr.getBooleanValidator)()),Cn(yt,"filters",null,function(t){return this._filterUpToDate=!1,t}),Cn(yt,"visible",!0,(0,vr.getBooleanValidator)()),Cn(yt,"transformsEnabled","all",(0,vr.getStringValidator)()),Cn(yt,"size"),Cn(yt,"dragBoundFunc"),Cn(yt,"draggable",!1,(0,vr.getBooleanValidator)()),og.Factory.backCompat(yt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.Container=void 0;const Ep=Ft,d3=Hn,xb=Qe;class $c extends d3.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(a){e(a)&&r.push(a)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(a=>{const i=a._isMatch(e);return i&&r.push(a),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const a of r)if(n=e(a),n||a.hasChildren()&&(n=a._descendants(e),n))return!0;return!1}toObject(){var e=d3.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=d3.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){var a=this.getLayer(),i=e||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),a=e||r&&r.hitCanvas,i=a&&a.getContext(),o=this._getCanvasCache(),s=o&&o.hit;if(s){i.save();var l=this.getAbsoluteTransform(n).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",a,n);return this}_drawChildren(e,n,r,a){var i,o=n&&n.getContext(),s=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),c=s&&l||u;const d=r===this;if(c){o.save();var p=this.getAbsoluteTransform(r),f=p.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let b;if(u)b=u.call(this,o,this);else{var m=this.clipX(),y=this.clipY();o.rect(m,y,s,l)}o.clip.apply(o,b),f=p.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var v=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(b){b[e](n,r,a)}),v&&o.restore(),c&&o.restore()}getClientRect(e={}){var n,r=e.skipTransform,a=e.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(y.visible()){var v=y.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});v.width===0&&v.height===0||(i===void 0?(i=v.x,o=v.y,s=v.x+v.width,l=v.y+v.height):(i=Math.min(i,v.x),o=Math.min(o,v.y),s=Math.max(s,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var d=this.find("Shape"),p=!1,f=0;f<d.length;f++){var m=d[f];if(m._isVisible(this)){p=!0;break}}return p&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,a)}}Rc.Container=$c,Ep.Factory.addComponentsGetterSetter($c,"clip",["x","y","width","height"]),Ep.Factory.addGetterSetter($c,"clipX",void 0,(0,xb.getNumberValidator)()),Ep.Factory.addGetterSetter($c,"clipY",void 0,(0,xb.getNumberValidator)()),Ep.Factory.addGetterSetter($c,"clipWidth",void 0,(0,xb.getNumberValidator)()),Ep.Factory.addGetterSetter($c,"clipHeight",void 0,(0,xb.getNumberValidator)()),Ep.Factory.addGetterSetter($c,"clipFunc");var xA={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.releaseCapture=Oi.setPointerCapture=Oi.hasPointerCapture=Oi.createEvent=Oi.getCapturedShape=void 0;const mne=Lt,lg=new Map,wA=mne.Konva._global.PointerEvent!==void 0;function yne(t){return lg.get(t)}Oi.getCapturedShape=yne;function p3(t){return{evt:t,pointerId:t.pointerId}}Oi.createEvent=p3;function bne(t,e){return lg.get(t)===e}Oi.hasPointerCapture=bne;function vne(t,e){kA(t),e.getStage()&&(lg.set(t,e),wA&&e._fire("gotpointercapture",p3(new PointerEvent("gotpointercapture"))))}Oi.setPointerCapture=vne;function kA(t,e){const n=lg.get(t);if(!n)return;const r=n.getStage();r&&r.content,lg.delete(t),wA&&n._fire("lostpointercapture",p3(new PointerEvent("lostpointercapture")))}Oi.releaseCapture=kA,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=rr,n=Ft,r=Rc,a=Lt,i=Bo,o=mb,s=Lt,l=Oi;var u="Stage",c="string",d="px",p="mouseout",f="mouseleave",m="mouseover",y="mouseenter",v="mousemove",b="mousedown",x="mouseup",w="pointermove",S="pointerdown",C="pointerup",E="pointercancel",_="lostpointercapture",N="pointerout",M="pointerleave",P="pointerover",L="pointerenter",j="contextmenu",B="touchstart",K="touchend",X="touchmove",Z="touchcancel",H="wheel",F=5,Y=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[f,"_pointerleave"],[B,"_pointerdown"],[X,"_pointermove"],[K,"_pointerup"],[Z,"_pointercancel"],[m,"_pointerover"],[H,"_wheel"],[j,"_contextmenu"],[S,"_pointerdown"],[w,"_pointermove"],[C,"_pointerup"],[E,"_pointercancel"],[_,"_lostpointercapture"]];const Q={mouse:{[N]:p,[M]:f,[P]:m,[L]:y,[w]:v,[S]:b,[C]:x,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[N]:"touchout",[M]:"touchleave",[P]:"touchover",[L]:"touchenter",[w]:X,[S]:B,[C]:K,[E]:Z,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[N]:N,[M]:M,[P]:P,[L]:L,[w]:w,[S]:S,[C]:C,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ne=xe=>xe.indexOf("pointer")>=0?"pointer":xe.indexOf("touch")>=0?"touch":"mouse",se=xe=>{const q=ne(xe);if(q==="pointer")return a.Konva.pointerEventsEnabled&&Q.pointer;if(q==="touch")return Q.touch;if(q==="mouse")return Q.mouse};function pe(xe={}){return(xe.clipFunc||xe.clipWidth||xe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),xe}const de="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ie extends r.Container{constructor(q){super(pe(q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{pe(this.attrs)}),this._checkVisibility()}_validateAdd(q){const oe=q.getType()==="Layer",he=q.getType()==="FastLayer";oe||he||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const q=this.visible()?"":"none";this.content.style.display=q}setContainer(q){if(typeof q===c){if(q.charAt(0)==="."){var oe=q.slice(1);q=document.getElementsByClassName(oe)[0]}else{var he;q.charAt(0)!=="#"?he=q:he=q.slice(1),q=document.getElementById(he)}if(!q)throw"Can not find container in document with id "+he}return this._setAttr("container",q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var q=this.children,oe=q.length,he;for(he=0;he<oe;he++)q[he].clear();return this}clone(q){return q||(q={}),q.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,q)}destroy(){super.destroy();var q=this.content;q&&e.Util._isInDocument(q)&&this.container().removeChild(q);var oe=t.stages.indexOf(this);return oe>-1&&t.stages.splice(oe,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const q=this._pointerPositions[0]||this._changedPointerPositions[0];return q?{x:q.x,y:q.y}:(e.Util.warn(de),null)}_getPointerById(q){return this._pointerPositions.find(oe=>oe.id===q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(q){q=q||{},q.x=q.x||0,q.y=q.y||0,q.width=q.width||this.width(),q.height=q.height||this.height();var oe=new i.SceneCanvas({width:q.width,height:q.height,pixelRatio:q.pixelRatio||1}),he=oe.getContext()._context,Ee=this.children;return(q.x||q.y)&&he.translate(-1*q.x,-1*q.y),Ee.forEach(function(Ie){if(Ie.isVisible()){var _e=Ie._toKonvaCanvas(q);he.drawImage(_e._canvas,q.x,q.y,_e.getWidth()/_e.getPixelRatio(),_e.getHeight()/_e.getPixelRatio())}}),oe}getIntersection(q){if(!q)return null;var oe=this.children,he=oe.length,Ee=he-1,Ie;for(Ie=Ee;Ie>=0;Ie--){const _e=oe[Ie].getIntersection(q);if(_e)return _e}return null}_resizeDOM(){var q=this.width(),oe=this.height();this.content&&(this.content.style.width=q+d,this.content.style.height=oe+d),this.bufferCanvas.setSize(q,oe),this.bufferHitCanvas.setSize(q,oe),this.children.forEach(he=>{he.setSize({width:q,height:oe}),he.draw()})}add(q,...oe){if(arguments.length>1){for(var he=0;he<arguments.length;he++)this.add(arguments[he]);return this}super.add(q);var Ee=this.children.length;return Ee>F&&e.Util.warn("The stage has "+Ee+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),q.setSize({width:this.width(),height:this.height()}),q.draw(),a.Konva.isBrowser&&this.content.appendChild(q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(q){return l.hasPointerCapture(q,this)}setPointerCapture(q){l.setPointerCapture(q,this)}releaseCapture(q){l.releaseCapture(q,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&Y.forEach(([q,oe])=>{this.content.addEventListener(q,he=>{this[oe](he)},{passive:!1})})}_pointerenter(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerenter,{evt:q,target:this,currentTarget:this})}_pointerover(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this})}_getTargetShape(q){let oe=this[q+"targetShape"];return oe&&!oe.getStage()&&(oe=null),oe}_pointerleave(q){const oe=se(q.type),he=ne(q.type);if(oe){this.setPointersPositions(q);var Ee=this._getTargetShape(he),Ie=!o.DD.isDragging||a.Konva.hitOnDragEnabled;Ee&&Ie?(Ee._fireAndBubble(oe.pointerout,{evt:q}),Ee._fireAndBubble(oe.pointerleave,{evt:q}),this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this[he+"targetShape"]=null):Ie&&(this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this._fire(oe.pointerout,{evt:q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(q){const oe=se(q.type),he=ne(q.type);if(oe){this.setPointersPositions(q);var Ee=!1;this._changedPointerPositions.forEach(Ie=>{var _e=this.getIntersection(Ie);if(o.DD.justDragged=!1,a.Konva["_"+he+"ListenClick"]=!0,!_e||!_e.isListening())return;a.Konva.capturePointerEventsEnabled&&_e.setPointerCapture(Ie.id),this[he+"ClickStartShape"]=_e,_e._fireAndBubble(oe.pointerdown,{evt:q,pointerId:Ie.id}),Ee=!0;const Fe=q.type.indexOf("touch")>=0;_e.preventDefault()&&q.cancelable&&Fe&&q.preventDefault()}),Ee||this._fire(oe.pointerdown,{evt:q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(q){const oe=se(q.type),he=ne(q.type);if(!oe)return;o.DD.isDragging&&o.DD.node.preventDefault()&&q.cancelable&&q.preventDefault(),this.setPointersPositions(q);var Ee=!o.DD.isDragging||a.Konva.hitOnDragEnabled;if(!Ee)return;var Ie={};let _e=!1;var Fe=this._getTargetShape(he);this._changedPointerPositions.forEach(Xe=>{const Oe=l.getCapturedShape(Xe.id)||this.getIntersection(Xe),lt=Xe.id,Je={evt:q,pointerId:lt};var nt=Fe!==Oe;if(nt&&Fe&&(Fe._fireAndBubble(oe.pointerout,{...Je},Oe),Fe._fireAndBubble(oe.pointerleave,{...Je},Oe)),Oe){if(Ie[Oe._id])return;Ie[Oe._id]=!0}Oe&&Oe.isListening()?(_e=!0,nt&&(Oe._fireAndBubble(oe.pointerover,{...Je},Fe),Oe._fireAndBubble(oe.pointerenter,{...Je},Fe),this[he+"targetShape"]=Oe),Oe._fireAndBubble(oe.pointermove,{...Je})):Fe&&(this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this,pointerId:lt}),this[he+"targetShape"]=null)}),_e||this._fire(oe.pointermove,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(q){const oe=se(q.type),he=ne(q.type);if(!oe)return;this.setPointersPositions(q);const Ee=this[he+"ClickStartShape"],Ie=this[he+"ClickEndShape"];var _e={};let Fe=!1;this._changedPointerPositions.forEach(Xe=>{const Oe=l.getCapturedShape(Xe.id)||this.getIntersection(Xe);if(Oe){if(Oe.releaseCapture(Xe.id),_e[Oe._id])return;_e[Oe._id]=!0}const lt=Xe.id,Je={evt:q,pointerId:lt};let nt=!1;a.Konva["_"+he+"InDblClickWindow"]?(nt=!0,clearTimeout(this[he+"DblTimeout"])):o.DD.justDragged||(a.Konva["_"+he+"InDblClickWindow"]=!0,clearTimeout(this[he+"DblTimeout"])),this[he+"DblTimeout"]=setTimeout(function(){a.Konva["_"+he+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),Oe&&Oe.isListening()?(Fe=!0,this[he+"ClickEndShape"]=Oe,Oe._fireAndBubble(oe.pointerup,{...Je}),a.Konva["_"+he+"ListenClick"]&&Ee&&Ee===Oe&&(Oe._fireAndBubble(oe.pointerclick,{...Je}),nt&&Ie&&Ie===Oe&&Oe._fireAndBubble(oe.pointerdblclick,{...Je}))):(this[he+"ClickEndShape"]=null,a.Konva["_"+he+"ListenClick"]&&this._fire(oe.pointerclick,{evt:q,target:this,currentTarget:this,pointerId:lt}),nt&&this._fire(oe.pointerdblclick,{evt:q,target:this,currentTarget:this,pointerId:lt}))}),Fe||this._fire(oe.pointerup,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+he+"ListenClick"]=!1,q.cancelable&&he!=="touch"&&q.preventDefault()}_contextmenu(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(j,{evt:q}):this._fire(j,{evt:q,target:this,currentTarget:this})}_wheel(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(H,{evt:q}):this._fire(H,{evt:q,target:this,currentTarget:this})}_pointercancel(q){this.setPointersPositions(q);const oe=l.getCapturedShape(q.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(C,l.createEvent(q)),l.releaseCapture(q.pointerId)}_lostpointercapture(q){l.releaseCapture(q.pointerId)}setPointersPositions(q){var oe=this._getContentPosition(),he=null,Ee=null;q=q||window.event,q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(q.touches,Ie=>{this._pointerPositions.push({id:Ie.identifier,x:(Ie.clientX-oe.left)/oe.scaleX,y:(Ie.clientY-oe.top)/oe.scaleY})}),Array.prototype.forEach.call(q.changedTouches||q.touches,Ie=>{this._changedPointerPositions.push({id:Ie.identifier,x:(Ie.clientX-oe.left)/oe.scaleX,y:(Ie.clientY-oe.top)/oe.scaleY})})):(he=(q.clientX-oe.left)/oe.scaleX,Ee=(q.clientY-oe.top)/oe.scaleY,this.pointerPos={x:he,y:Ee},this._pointerPositions=[{x:he,y:Ee,id:e.Util._getFirstPointerId(q)}],this._changedPointerPositions=[{x:he,y:Ee,id:e.Util._getFirstPointerId(q)}])}_setPointerPosition(q){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var q=this.content.getBoundingClientRect();return{top:q.top,left:q.left,scaleX:q.width/this.content.clientWidth||1,scaleY:q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!a.Konva.isBrowser){var q=this.container();if(!q)throw"Stage has no container. A container is required.";q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),q.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(q){q.batchDraw()}),this}}t.Stage=ie,ie.prototype.nodeType=u,(0,s._registerNode)(ie),n.Factory.addGetterSetter(ie,"container")}(xA);var ug={},Dr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Lt,n=rr,r=Ft,a=Hn,i=Qe,o=Lt,s=Oi;var l="hasShadow",u="shadowRGBA",c="patternImage",d="linearGradient",p="radialGradient";let f;function m(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y(M){const P=this.attrs.fillRule;P?M.fill(P):M.fill()}function v(M){M.stroke()}function b(M){M.fill()}function x(M){M.stroke()}function w(){this._clearCache(l)}function S(){this._clearCache(u)}function C(){this._clearCache(c)}function E(){this._clearCache(d)}function _(){this._clearCache(p)}class N extends a.Node{constructor(P){super(P);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in t.shapes)););this.colorKey=L,t.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var P=m();const L=P.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const j=new n.Transform;j.translate(this.fillPatternX(),this.fillPatternY()),j.rotate(e.Konva.getAngle(this.fillPatternRotation())),j.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),j.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const B=j.getMatrix(),K=typeof DOMMatrix>"u"?{a:B[0],b:B[1],c:B[2],d:B[3],e:B[4],f:B[5]}:new DOMMatrix(B);L.setTransform(K)}return L}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var P=this.fillLinearGradientColorStops();if(P){for(var L=m(),j=this.fillLinearGradientStartPoint(),B=this.fillLinearGradientEndPoint(),K=L.createLinearGradient(j.x,j.y,B.x,B.y),X=0;X<P.length;X+=2)K.addColorStop(P[X],P[X+1]);return K}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var P=this.fillRadialGradientColorStops();if(P){for(var L=m(),j=this.fillRadialGradientStartPoint(),B=this.fillRadialGradientEndPoint(),K=L.createRadialGradient(j.x,j.y,this.fillRadialGradientStartRadius(),B.x,B.y,this.fillRadialGradientEndRadius()),X=0;X<P.length;X+=2)K.addColorStop(P[X],P[X+1]);return K}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){var L=this.getStage();if(!L)return!1;const j=L.bufferHitCanvas;return j.getContext().clear(),this.drawHit(j,void 0,!0),j.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var L;if(!(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0)||L))return!1;const j=P||this.hasFill(),B=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(j&&B&&K)return!0;const X=this.hasShadow(),Z=this.shadowForStrokeEnabled();return!!(j&&B&&X&&Z)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){const L=P.skipTransform,j=P.relativeTo,B=this.getSelfRect(),K=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,X=B.width+K,Z=B.height+K,H=!P.skipShadow&&this.hasShadow(),F=H?this.shadowOffsetX():0,Y=H?this.shadowOffsetY():0,Q=X+Math.abs(F),ne=Z+Math.abs(Y),se=H&&this.shadowBlur()||0,pe=Q+se*2,de=ne+se*2,ie={width:pe,height:de,x:-(K/2+se)+Math.min(F,0)+B.x,y:-(K/2+se)+Math.min(Y,0)+B.y};return L?ie:this._transformedRect(ie,j)}drawScene(P,L,j){var B=this.getLayer(),K=P||B.getCanvas(),X=K.getContext(),Z=this._getCanvasCache(),H=this.getSceneFunc(),F=this.hasShadow(),Y,Q,ne=K.isCache,se=L===this;if(!this.isVisible()&&!se)return this;if(Z){X.save();var pe=this.getAbsoluteTransform(L).getMatrix();return X.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5]),this._drawCachedSceneCanvas(X),X.restore(),this}if(!H)return this;if(X.save(),this._useBufferCanvas()&&!ne){Y=this.getStage();const xe=j||Y.bufferCanvas;Q=xe.getContext(),Q.clear(),Q.save(),Q._applyLineJoin(this);var de=this.getAbsoluteTransform(L).getMatrix();Q.transform(de[0],de[1],de[2],de[3],de[4],de[5]),H.call(this,Q,this),Q.restore();var ie=xe.pixelRatio;F&&X._applyShadow(this),X._applyOpacity(this),X._applyGlobalCompositeOperation(this),X.drawImage(xe._canvas,0,0,xe.width/ie,xe.height/ie)}else{if(X._applyLineJoin(this),!se){var de=this.getAbsoluteTransform(L).getMatrix();X.transform(de[0],de[1],de[2],de[3],de[4],de[5]),X._applyOpacity(this),X._applyGlobalCompositeOperation(this)}F&&X._applyShadow(this),H.call(this,X,this)}return X.restore(),this}drawHit(P,L,j=!1){if(!this.shouldDrawHit(L,j))return this;var B=this.getLayer(),K=P||B.hitCanvas,X=K&&K.getContext(),Z=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),F=H&&H.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),F){X.save();var Y=this.getAbsoluteTransform(L).getMatrix();return X.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedHitCanvas(X),X.restore(),this}if(!Z)return this;if(X.save(),X._applyLineJoin(this),this!==L){var Q=this.getAbsoluteTransform(L).getMatrix();X.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return Z.call(this,X,this),X.restore(),this}drawHitFromCache(P=0){var L=this._getCanvasCache(),j=this._getCachedSceneCanvas(),B=L.hit,K=B.getContext(),X=B.getWidth(),Z=B.getHeight(),H,F,Y,Q,ne,se;K.clear(),K.drawImage(j._canvas,0,0,X,Z);try{for(H=K.getImageData(0,0,X,Z),F=H.data,Y=F.length,Q=n.Util._hexToRgb(this.colorKey),ne=0;ne<Y;ne+=4)se=F[ne+3],se>P?(F[ne]=Q.r,F[ne+1]=Q.g,F[ne+2]=Q.b,F[ne+3]=255):F[ne+3]=0;K.putImageData(H,0,0)}catch(pe){n.Util.error("Unable to draw hit graph from cached scene canvas. "+pe.message)}return this}hasPointerCapture(P){return s.hasPointerCapture(P,this)}setPointerCapture(P){s.setPointerCapture(P,this)}releaseCapture(P){s.releaseCapture(P,this)}}t.Shape=N,N.prototype._fillFunc=y,N.prototype._strokeFunc=v,N.prototype._fillFuncHit=b,N.prototype._strokeFuncHit=x,N.prototype._centroid=!1,N.prototype.nodeType="Shape",(0,o._registerNode)(N),N.prototype.eventListeners={},N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_),r.Factory.addGetterSetter(N,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(N,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(N,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(N,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(N,"lineJoin"),r.Factory.addGetterSetter(N,"lineCap"),r.Factory.addGetterSetter(N,"sceneFunc"),r.Factory.addGetterSetter(N,"hitFunc"),r.Factory.addGetterSetter(N,"dash"),r.Factory.addGetterSetter(N,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(N,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(N,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternImage"),r.Factory.addGetterSetter(N,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(N,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(N,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(N,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(N,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(N,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(N,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(N,"fillEnabled",!0),r.Factory.addGetterSetter(N,"strokeEnabled",!0),r.Factory.addGetterSetter(N,"shadowEnabled",!0),r.Factory.addGetterSetter(N,"dashEnabled",!0),r.Factory.addGetterSetter(N,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(N,"fillPriority","color"),r.Factory.addComponentsGetterSetter(N,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(N,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(N,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(N,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(N,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(N,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(N,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(N,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(N,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(N,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(N,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(N,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(N,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(N,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(N,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(N,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(N,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(N,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(N,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(N,"fillPatternRotation",0),r.Factory.addGetterSetter(N,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(N,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Dr),Object.defineProperty(ug,"__esModule",{value:!0}),ug.Layer=void 0;const al=rr,h3=Rc,Ip=Hn,f3=Ft,SA=Bo,xne=Qe,wne=Dr,kne=Lt;var Sne="#",Cne="beforeDraw",Ene="draw",CA=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Ine=CA.length;let Tp=class extends h3.Container{constructor(t){super(t),this.canvas=new SA.SceneCanvas,this.hitCanvas=new SA.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ip.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Ip.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ip.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ip.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Ip.Node.prototype.remove.call(this),t&&t.parentNode&&al.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&al.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Ip.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){al.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){al.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,al.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let r=0;r<Ine;r++){const a=CA[r],i=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),o=i.shape;if(o)return o;if(n=!!i.antialiased,!i.antialiased)break}if(n)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(r===255){const a=al.Util._rgbToHex(n[0],n[1],n[2]),i=wne.shapes[Sne+a];return i?{shape:i}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire(Cne,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),h3.Container.prototype.drawScene.call(this,r,e),this._fire(Ene,{node:this}),this}drawHit(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),h3.Container.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){al.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return al.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return al.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};ug.Layer=Tp,Tp.prototype.nodeType="Layer",(0,kne._registerNode)(Tp),f3.Factory.addGetterSetter(Tp,"imageSmoothingEnabled",!0),f3.Factory.addGetterSetter(Tp,"clearBeforeDraw",!0),f3.Factory.addGetterSetter(Tp,"hitGraphEnabled",!0,(0,xne.getBooleanValidator)());var wb={};Object.defineProperty(wb,"__esModule",{value:!0}),wb.FastLayer=void 0;const Tne=rr,Nne=ug,_ne=Lt;class g3 extends Nne.Layer{constructor(e){super(e),this.listening(!1),Tne.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}wb.FastLayer=g3,g3.prototype.nodeType="FastLayer",(0,_ne._registerNode)(g3);var Np={};Object.defineProperty(Np,"__esModule",{value:!0}),Np.Group=void 0;const Rne=rr,$ne=Rc,One=Lt;class m3 extends $ne.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Rne.Util.throw("You may only add groups and shapes to groups.")}}Np.Group=m3,m3.prototype.nodeType="Group",(0,One._registerNode)(m3);var _p={};Object.defineProperty(_p,"__esModule",{value:!0}),_p.Animation=void 0;const y3=Lt,EA=rr,b3=function(){return y3.glob.performance&&y3.glob.performance.now?function(){return y3.glob.performance.now()}:function(){return new Date().getTime()}}();class Ns{constructor(e,n){this.id=Ns.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:b3(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let a=0;a<r;a++)if(n[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Ns.animations,n=e.length;for(let r=0;r<n;r++)if(e[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=b3(),Ns._addAnimation(this),this}stop(){return Ns._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,a=r.length;for(let i=0;i<a;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const a=n[r],i=a.layers,o=a.func;a._updateFrameObject(b3());const s=i.length;let l;if(o?l=o.call(a,a.frame)!==!1:l=!0,!!l)for(let u=0;u<s;u++){const c=i[u];c._id!==void 0&&(e[c._id]=c)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Ns;e.animations.length?(e._runFrames(),EA.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,EA.Util.requestAnimFrame(this._animationLoop))}}_p.Animation=Ns,Ns.animations=[],Ns.animIdCounter=0,Ns.animRunning=!1;var IA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=rr,n=_p,r=Hn,a=Lt;var i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,c=["fill","stroke","shadowColor"];class d{constructor(m,y,v,b,x,w,S){this.prop=m,this.propFunc=y,this.begin=b,this._pos=b,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=x-this.begin,this.pause()}fire(m){var y=this[m];y&&y()}setTime(m){m>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():m<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=m,this.update())}getTime(){return this._time}setPosition(m){this.prevPos=this._pos,this.propFunc(m),this._pos=m}getPosition(m){return m===void 0&&(m=this._time),this.func(m,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(m){this.pause(),this._time=m,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var m=this.getTimer()-this._startTime;this.state===s?this.setTime(m):this.state===l&&this.setTime(this.duration-m)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(m){var y=this,v=m.node,b=v._id,x,w=m.easing||t.Easings.Linear,S=!!m.yoyo,C;typeof m.duration>"u"?x=.3:m.duration===0?x=.001:x=m.duration,this.node=v,this._id=u++;var E=v.getLayer()||(v instanceof a.Konva.Stage?v.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},E),this.tween=new d(C,function(_){y._tweenFunc(_)},w,0,1,x*1e3,S),this._addListeners(),p.attrs[b]||(p.attrs[b]={}),p.attrs[b][this._id]||(p.attrs[b][this._id]={}),p.tweens[b]||(p.tweens[b]={});for(C in m)i[C]===void 0&&this._addAttr(C,m[C]);this.reset(),this.onFinish=m.onFinish,this.onReset=m.onReset,this.onUpdate=m.onUpdate}_addAttr(m,y){var v=this.node,b=v._id,x,w,S,C,E,_,N,M;if(S=p.tweens[b][m],S&&delete p.attrs[b][S][m],x=v.getAttr(m),e.Util._isArray(y))if(w=[],E=Math.max(y.length,x.length),m==="points"&&y.length!==x.length&&(y.length>x.length?(N=x,x=e.Util._prepareArrayForTween(x,y,v.closed())):(_=y,y=e.Util._prepareArrayForTween(y,x,v.closed()))),m.indexOf("fill")===0)for(C=0;C<E;C++)if(C%2===0)w.push(y[C]-x[C]);else{var P=e.Util.colorToRGBA(x[C]);M=e.Util.colorToRGBA(y[C]),x[C]=P,w.push({r:M.r-P.r,g:M.g-P.g,b:M.b-P.b,a:M.a-P.a})}else for(C=0;C<E;C++)w.push(y[C]-x[C]);else c.indexOf(m)!==-1?(x=e.Util.colorToRGBA(x),M=e.Util.colorToRGBA(y),w={r:M.r-x.r,g:M.g-x.g,b:M.b-x.b,a:M.a-x.a}):w=y-x;p.attrs[b][this._id][m]={start:x,diff:w,end:y,trueEnd:_,trueStart:N},p.tweens[b][m]=this._id}_tweenFunc(m){var y=this.node,v=p.attrs[y._id][this._id],b,x,w,S,C,E,_,N;for(b in v){if(x=v[b],w=x.start,S=x.diff,N=x.end,e.Util._isArray(w))if(C=[],_=Math.max(w.length,N.length),b.indexOf("fill")===0)for(E=0;E<_;E++)E%2===0?C.push((w[E]||0)+S[E]*m):C.push("rgba("+Math.round(w[E].r+S[E].r*m)+","+Math.round(w[E].g+S[E].g*m)+","+Math.round(w[E].b+S[E].b*m)+","+(w[E].a+S[E].a*m)+")");else for(E=0;E<_;E++)C.push((w[E]||0)+S[E]*m);else c.indexOf(b)!==-1?C="rgba("+Math.round(w.r+S.r*m)+","+Math.round(w.g+S.g*m)+","+Math.round(w.b+S.b*m)+","+(w.a+S.a*m)+")":C=w+S*m;y.setAttr(b,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var m=this.node,y=p.attrs[m._id][this._id];y.points&&y.points.trueEnd&&m.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var m=this.node,y=p.attrs[m._id][this._id];y.points&&y.points.trueStart&&m.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(m){return this.tween.seek(m*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var m=this.node._id,y=this._id,v=p.tweens[m],b;this.pause();for(b in v)delete p.tweens[m][b];delete p.attrs[m][y]}}t.Tween=p,p.attrs={},p.tweens={},r.Node.prototype.to=function(f){var m=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),m&&m()};var y=new p(f);y.play()},t.Easings={BackEaseIn(f,m,y,v){var b=1.70158;return y*(f/=v)*f*((b+1)*f-b)+m},BackEaseOut(f,m,y,v){var b=1.70158;return y*((f=f/v-1)*f*((b+1)*f+b)+1)+m},BackEaseInOut(f,m,y,v){var b=1.70158;return(f/=v/2)<1?y/2*(f*f*(((b*=1.525)+1)*f-b))+m:y/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+m},ElasticEaseIn(f,m,y,v,b,x){var w=0;return f===0?m:(f/=v)===1?m+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+m)},ElasticEaseOut(f,m,y,v,b,x){var w=0;return f===0?m:(f/=v)===1?m+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),b*Math.pow(2,-10*f)*Math.sin((f*v-w)*(2*Math.PI)/x)+y+m)},ElasticEaseInOut(f,m,y,v,b,x){var w=0;return f===0?m:(f/=v/2)===2?m+y:(x||(x=v*(.3*1.5)),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+m:b*Math.pow(2,-10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x)*.5+y+m)},BounceEaseOut(f,m,y,v){return(f/=v)<1/2.75?y*(7.5625*f*f)+m:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+m:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+m:y*(7.5625*(f-=2.625/2.75)*f+.984375)+m},BounceEaseIn(f,m,y,v){return y-t.Easings.BounceEaseOut(v-f,0,y,v)+m},BounceEaseInOut(f,m,y,v){return f<v/2?t.Easings.BounceEaseIn(f*2,0,y,v)*.5+m:t.Easings.BounceEaseOut(f*2-v,0,y,v)*.5+y*.5+m},EaseIn(f,m,y,v){return y*(f/=v)*f+m},EaseOut(f,m,y,v){return-y*(f/=v)*(f-2)+m},EaseInOut(f,m,y,v){return(f/=v/2)<1?y/2*f*f+m:-y/2*(--f*(f-2)-1)+m},StrongEaseIn(f,m,y,v){return y*(f/=v)*f*f*f*f+m},StrongEaseOut(f,m,y,v){return y*((f=f/v-1)*f*f*f*f+1)+m},StrongEaseInOut(f,m,y,v){return(f/=v/2)<1?y/2*f*f*f*f*f+m:y/2*((f-=2)*f*f*f*f+2)+m},Linear(f,m,y,v){return y*f/v+m}}})(IA),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Lt,n=rr,r=Hn,a=Rc,i=xA,o=ug,s=wb,l=Np,u=mb,c=Dr,d=_p,p=IA,f=nl,m=Bo;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:a.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:s.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:d.Animation,Tween:p.Tween,Easings:p.Easings,Context:f.Context,Canvas:m.Canvas}),t.default=t.Konva}(db);var kb={};Object.defineProperty(kb,"__esModule",{value:!0}),kb.Arc=void 0;const Sb=Ft,Mne=Dr,TA=Lt,Cb=Qe,Pne=Lt;class il extends Mne.Shape{_sceneFunc(e){var n=TA.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),a=TA.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(a,Math.PI)),o=1,s=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),l=Math.sin(Math.min(a,Math.PI/2)),u=i*(i>0?e:n),c=o*n,d=s*(s>0?e:n),p=l*(l>0?n:e);return{x:u,y:r?-1*p:d,width:c-u,height:p-d}}}kb.Arc=il,il.prototype._centroid=!0,il.prototype.className="Arc",il.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Pne._registerNode)(il),Sb.Factory.addGetterSetter(il,"innerRadius",0,(0,Cb.getNumberValidator)()),Sb.Factory.addGetterSetter(il,"outerRadius",0,(0,Cb.getNumberValidator)()),Sb.Factory.addGetterSetter(il,"angle",0,(0,Cb.getNumberValidator)()),Sb.Factory.addGetterSetter(il,"clockwise",!1,(0,Cb.getBooleanValidator)());var Eb={},cg={};Object.defineProperty(cg,"__esModule",{value:!0}),cg.Line=void 0;const Ib=Ft,Ane=Dr,NA=Qe,Dne=Lt;function v3(t,e,n,r,a,i,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(a-n,2)+Math.pow(i-r,2)),u=o*s/(s+l),c=o*l/(s+l),d=n-u*(a-t),p=r-u*(i-e),f=n+c*(a-t),m=r+c*(i-e);return[d,p,f,m]}function _A(t,e){var n=t.length,r=[],a,i;for(a=2;a<n-2;a+=2)i=v3(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],e),!isNaN(i[0])&&(r.push(i[0]),r.push(i[1]),r.push(t[a]),r.push(t[a+1]),r.push(i[2]),r.push(i[3]));return r}class pu extends Ane.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,a=this.tension(),i=this.closed(),o=this.bezier(),s,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),a!==0&&r>4){for(s=this.getTensionPoints(),l=s.length,u=i?0:4,i||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);u<l-2;)e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]);i||e.quadraticCurveTo(s[l-2],s[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():_A(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),a=v3(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=v3(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=_A(e,r),s=[a[2],a[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],a[0],a[1],e[0],e[1]]);return s}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);return{x:n,y:a,width:r-n,height:i-a}}}cg.Line=pu,pu.prototype.className="Line",pu.prototype._attrsAffectingSize=["points","bezier","tension"],(0,Dne._registerNode)(pu),Ib.Factory.addGetterSetter(pu,"closed",!1),Ib.Factory.addGetterSetter(pu,"bezier",!1),Ib.Factory.addGetterSetter(pu,"tension",0,(0,NA.getNumberValidator)()),Ib.Factory.addGetterSetter(pu,"points",[],(0,NA.getNumberArrayValidator)());var Rp={},RA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,s,l)=>{let u,c,d;u=l/2,c=0;for(let p=0;p<20;p++)d=u*t.tValues[20][p]+u,c+=t.cValues[20][p]*r(o,s,d);return u*c};t.getCubicArcLength=e;const n=(o,s,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],c=s[0]-2*s[1]+s[2],d=2*o[1]-2*o[0],p=2*s[1]-2*s[0],f=4*(u*u+c*c),m=4*(u*d+c*p),y=d*d+p*p;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(s[2]-s[0],2));const v=m/(2*f),b=y/f,x=l+v,w=b-v*v,S=x*x+w>0?Math.sqrt(x*x+w):0,C=v*v+w>0?Math.sqrt(v*v+w):0,E=v+Math.sqrt(v*v+w)!==0?w*Math.log(Math.abs((x+S)/(v+C))):0;return Math.sqrt(f)/2*(x*S-v*C+E)};t.getQuadraticArcLength=n;function r(o,s,l){const u=a(1,l,o),c=a(1,l,s),d=u*u+c*c;return Math.sqrt(d)}const a=(o,s,l)=>{const u=l.length-1;let c,d;if(u===0)return 0;if(o===0){d=0;for(let p=0;p<=u;p++)d+=t.binomialCoefficients[u][p]*Math.pow(1-s,u-p)*Math.pow(s,p)*l[p];return d}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return a(o-1,s,c)}},i=(o,s,l)=>{let u=1,c=o/s,d=(o-l(c))/s,p=0;for(;u>.001;){const f=l(c+d),m=Math.abs(o-f)/s;if(m<u)u=m,c+=d;else{const y=l(c-d),v=Math.abs(o-y)/s;v<u?(u=v,c-=d):d/=2}if(p++,p>500)break}return c};t.t2length=i})(RA),Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.Path=void 0;const Lne=Ft,Fne=Dr,Bne=Lt,$p=RA;class Vr extends Fne.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Vr.parsePathData(this.data()),this.pathLength=Vr.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,a=0;a<n.length;a++){var i=n[a].command,o=n[a].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],f=o[6],m=o[7],y=u>c?u:c,v=u>c?1:u/c,b=u>c?c/u:1;e.translate(s,l),e.rotate(f),e.scale(v,b),e.arc(0,0,y,d,d+p,1-m),e.scale(1/v,1/b),e.rotate(-f),e.translate(-s,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(u){if(u.command==="A"){var c=u.points[4],d=u.points[5],p=u.points[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),d<0)for(let m=c-f;m>p;m-=f){const y=Vr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],m,0);e.push(y.x,y.y)}else for(let m=c+f;m<p;m+=f){const y=Vr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],m,0);e.push(y.x,y.y)}}else if(u.command==="C")for(let m=0;m<=1;m+=.01){const y=Vr.getPointOnCubicBezier(m,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(y.x,y.y)}else e=e.concat(u.points)});for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(s)||(a=Math.min(a,s),i=Math.max(i,s));return{x:n,y:a,width:r-n,height:i-a}}getLength(){return this.pathLength}getPointAtLength(e){return Vr.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,a){return Math.sqrt((r-e)*(r-e)+(a-n)*(a-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,a=0,i=n.length;if(!i)return null;for(;a<i&&e>n[a].pathLength;)e-=n[a].pathLength,++a;if(a===i)return r=n[a-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[a].points.slice(0,2),{x:r[0],y:r[1]};var o=n[a],s=o.points;switch(o.command){case"L":return Vr.getPointOnLine(e,o.start.x,o.start.y,s[0],s[1]);case"C":return Vr.getPointOnCubicBezier((0,$p.t2length)(e,Vr.getPathLength(n),y=>(0,$p.getCubicArcLength)([o.start.x,s[0],s[2],s[4]],[o.start.y,s[1],s[3],s[5]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return Vr.getPointOnQuadraticBezier((0,$p.t2length)(e,Vr.getPathLength(n),y=>(0,$p.getQuadraticArcLength)([o.start.x,s[0],s[2]],[o.start.y,s[1],s[3]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],c=s[2],d=s[3],p=s[4],f=s[5],m=s[6];return p+=f*e/o.pathLength,Vr.getPointOnEllipticalArc(l,u,c,d,p,m)}return null}static getPointOnLine(e,n,r,a,i,o,s){o===void 0&&(o=n),s===void 0&&(s=r);var l=(i-r)/(a-n+1e-8),u=Math.sqrt(e*e/(1+l*l));a<n&&(u*=-1);var c=l*u,d;if(a===n)d={x:o,y:s+c};else if((s-r)/(o-n+1e-8)===l)d={x:o+u,y:s+c};else{var p,f,m=this.getLineLength(n,r,a,i),y=(o-n)*(a-n)+(s-r)*(i-r);y=y/(m*m),p=n+y*(a-n),f=r+y*(i-r);var v=this.getLineLength(o,s,p,f),b=Math.sqrt(e*e-v*v);u=Math.sqrt(b*b/(1+l*l)),a<n&&(u*=-1),c=l*u,d={x:p+u,y:f+c}}return d}static getPointOnCubicBezier(e,n,r,a,i,o,s,l,u){function c(v){return v*v*v}function d(v){return 3*v*v*(1-v)}function p(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}var m=l*c(e)+o*d(e)+a*p(e)+n*f(e),y=u*c(e)+s*d(e)+i*p(e)+r*f(e);return{x:m,y}}static getPointOnQuadraticBezier(e,n,r,a,i,o,s){function l(f){return f*f}function u(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}var d=o*l(e)+a*u(e)+n*c(e),p=s*l(e)+i*u(e)+r*c(e);return{x:d,y:p}}static getPointOnEllipticalArc(e,n,r,a,i,o){var s=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(i),y:a*Math.sin(i)};return{x:e+(u.x*s-u.y*l),y:n+(u.x*l+u.y*s)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var a=0;a<r.length;a++)n=n.replace(new RegExp(r[a],"g"),"|"+r[a]);var i=n.split("|"),o=[],s=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(a=1;a<i.length;a++){var p=i[a],f=p.charAt(0);for(p=p.slice(1),s.length=0;d=c.exec(p);)s.push(d[0]);for(var m=[],y=0,v=s.length;y<v;y++){if(s[y]==="00"){m.push(0,0);continue}var b=parseFloat(s[y]);isNaN(b)?m.push(0):m.push(b)}for(;m.length>0&&!isNaN(m[0]);){var x="",w=[],S=l,C=u,E,_,N,M,P,L,j,B,K,X;switch(f){case"l":l+=m.shift(),u+=m.shift(),x="L",w.push(l,u);break;case"L":l=m.shift(),u=m.shift(),w.push(l,u);break;case"m":var Z=m.shift(),H=m.shift();if(l+=Z,u+=H,x="M",o.length>2&&o[o.length-1].command==="z"){for(var F=o.length-2;F>=0;F--)if(o[F].command==="M"){l=o[F].points[0]+Z,u=o[F].points[1]+H;break}}w.push(l,u),f="l";break;case"M":l=m.shift(),u=m.shift(),x="M",w.push(l,u),f="L";break;case"h":l+=m.shift(),x="L",w.push(l,u);break;case"H":l=m.shift(),x="L",w.push(l,u);break;case"v":u+=m.shift(),x="L",w.push(l,u);break;case"V":u=m.shift(),x="L",w.push(l,u);break;case"C":w.push(m.shift(),m.shift(),m.shift(),m.shift()),l=m.shift(),u=m.shift(),w.push(l,u);break;case"c":w.push(l+m.shift(),u+m.shift(),l+m.shift(),u+m.shift()),l+=m.shift(),u+=m.shift(),x="C",w.push(l,u);break;case"S":_=l,N=u,E=o[o.length-1],E.command==="C"&&(_=l+(l-E.points[2]),N=u+(u-E.points[3])),w.push(_,N,m.shift(),m.shift()),l=m.shift(),u=m.shift(),x="C",w.push(l,u);break;case"s":_=l,N=u,E=o[o.length-1],E.command==="C"&&(_=l+(l-E.points[2]),N=u+(u-E.points[3])),w.push(_,N,l+m.shift(),u+m.shift()),l+=m.shift(),u+=m.shift(),x="C",w.push(l,u);break;case"Q":w.push(m.shift(),m.shift()),l=m.shift(),u=m.shift(),w.push(l,u);break;case"q":w.push(l+m.shift(),u+m.shift()),l+=m.shift(),u+=m.shift(),x="Q",w.push(l,u);break;case"T":_=l,N=u,E=o[o.length-1],E.command==="Q"&&(_=l+(l-E.points[0]),N=u+(u-E.points[1])),l=m.shift(),u=m.shift(),x="Q",w.push(_,N,l,u);break;case"t":_=l,N=u,E=o[o.length-1],E.command==="Q"&&(_=l+(l-E.points[0]),N=u+(u-E.points[1])),l+=m.shift(),u+=m.shift(),x="Q",w.push(_,N,l,u);break;case"A":M=m.shift(),P=m.shift(),L=m.shift(),j=m.shift(),B=m.shift(),K=l,X=u,l=m.shift(),u=m.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,X,l,u,j,B,M,P,L);break;case"a":M=m.shift(),P=m.shift(),L=m.shift(),j=m.shift(),B=m.shift(),K=l,X=u,l+=m.shift(),u+=m.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,X,l,u,j,B,M,P,L);break}o.push({command:x||f,points:w,start:{x:S,y:C},pathLength:this.calcLength(S,C,x||f,w)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,a){var i,o,s,l,u=Vr;switch(r){case"L":return u.getLineLength(e,n,a[0],a[1]);case"C":return(0,$p.getCubicArcLength)([e,a[0],a[2],a[4]],[n,a[1],a[3],a[5]],1);case"Q":return(0,$p.getQuadraticArcLength)([e,a[0],a[2]],[n,a[1],a[3]],1);case"A":i=0;var c=a[4],d=a[5],p=a[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),o=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],c,0),d<0)for(l=c-f;l>p;l-=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(l=c+f;l<p;l+=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],p,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,a,i,o,s,l,u){var c=u*(Math.PI/180),d=Math.cos(c)*(e-r)/2+Math.sin(c)*(n-a)/2,p=-1*Math.sin(c)*(e-r)/2+Math.cos(c)*(n-a)/2,f=d*d/(s*s)+p*p/(l*l);f>1&&(s*=Math.sqrt(f),l*=Math.sqrt(f));var m=Math.sqrt((s*s*(l*l)-s*s*(p*p)-l*l*(d*d))/(s*s*(p*p)+l*l*(d*d)));i===o&&(m*=-1),isNaN(m)&&(m=0);var y=m*s*p/l,v=m*-l*d/s,b=(e+r)/2+Math.cos(c)*y-Math.sin(c)*v,x=(n+a)/2+Math.sin(c)*y+Math.cos(c)*v,w=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},S=function(P,L){return(P[0]*L[0]+P[1]*L[1])/(w(P)*w(L))},C=function(P,L){return(P[0]*L[1]<P[1]*L[0]?-1:1)*Math.acos(S(P,L))},E=C([1,0],[(d-y)/s,(p-v)/l]),_=[(d-y)/s,(p-v)/l],N=[(-1*d-y)/s,(-1*p-v)/l],M=C(_,N);return S(_,N)<=-1&&(M=Math.PI),S(_,N)>=1&&(M=0),o===0&&M>0&&(M=M-2*Math.PI),o===1&&M<0&&(M=M+2*Math.PI),[b,x,s,l,E,M,c,o]}}Rp.Path=Vr,Vr.prototype.className="Path",Vr.prototype._attrsAffectingSize=["data"],(0,Bne._registerNode)(Vr),Lne.Factory.addGetterSetter(Vr,"data"),Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.Arrow=void 0;const Tb=Ft,zne=cg,$A=Qe,jne=Lt,OA=Rp;class Oc extends zne.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),a=r,i=this.tension()!==0&&r.length>4;i&&(a=this.getTensionPoints());var o=this.pointerLength(),s=r.length,l,u;if(i){const p=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],r[s-2],r[s-1]],f=OA.Path.calcLength(a[a.length-4],a[a.length-3],"C",p),m=OA.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),p[0],p[1],p[2],p[3],p[4],p[5]);l=r[s-2]-m.x,u=r[s-1]-m.y}else l=r[s-2]-r[s-4],u=r[s-1]-r[s-3];var c=(Math.atan2(u,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[s-2],r[s-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(l=(a[0]+a[2])/2-r[0],u=(a[1]+a[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Eb.Arrow=Oc,Oc.prototype.className="Arrow",(0,jne._registerNode)(Oc),Tb.Factory.addGetterSetter(Oc,"pointerLength",10,(0,$A.getNumberValidator)()),Tb.Factory.addGetterSetter(Oc,"pointerWidth",10,(0,$A.getNumberValidator)()),Tb.Factory.addGetterSetter(Oc,"pointerAtBeginning",!1),Tb.Factory.addGetterSetter(Oc,"pointerAtEnding",!0);var Nb={};Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.Circle=void 0;const Vne=Ft,Une=Dr,Wne=Qe,Gne=Lt;class Op extends Une.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Nb.Circle=Op,Op.prototype._centroid=!0,Op.prototype.className="Circle",Op.prototype._attrsAffectingSize=["radius"],(0,Gne._registerNode)(Op),Vne.Factory.addGetterSetter(Op,"radius",0,(0,Wne.getNumberValidator)());var _b={};Object.defineProperty(_b,"__esModule",{value:!0}),_b.Ellipse=void 0;const x3=Ft,Hne=Dr,MA=Qe,qne=Lt;class hu extends Hne.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}_b.Ellipse=hu,hu.prototype.className="Ellipse",hu.prototype._centroid=!0,hu.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,qne._registerNode)(hu),x3.Factory.addComponentsGetterSetter(hu,"radius",["x","y"]),x3.Factory.addGetterSetter(hu,"radiusX",0,(0,MA.getNumberValidator)()),x3.Factory.addGetterSetter(hu,"radiusY",0,(0,MA.getNumberValidator)());var Rb={};Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.Image=void 0;const w3=rr,Mc=Ft,Kne=Dr,Xne=Lt,dg=Qe;let hs=class rU extends Kne.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),a=this.cornerRadius(),i=this.attrs.image;let o;if(i){const s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||a)&&(e.beginPath(),a?w3.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(a&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var n=this.width(),r=this.height(),a=this.cornerRadius();e.beginPath(),a?w3.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var a=w3.Util.createImageElement();a.onload=function(){var i=new rU({image:a});n(i)},a.onerror=r,a.crossOrigin="Anonymous",a.src=e}};Rb.Image=hs,hs.prototype.className="Image",(0,Xne._registerNode)(hs),Mc.Factory.addGetterSetter(hs,"cornerRadius",0,(0,dg.getNumberOrArrayOfNumbersValidator)(4)),Mc.Factory.addGetterSetter(hs,"image"),Mc.Factory.addComponentsGetterSetter(hs,"crop",["x","y","width","height"]),Mc.Factory.addGetterSetter(hs,"cropX",0,(0,dg.getNumberValidator)()),Mc.Factory.addGetterSetter(hs,"cropY",0,(0,dg.getNumberValidator)()),Mc.Factory.addGetterSetter(hs,"cropWidth",0,(0,dg.getNumberValidator)()),Mc.Factory.addGetterSetter(hs,"cropHeight",0,(0,dg.getNumberValidator)());var Mp={};Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.Tag=Mp.Label=void 0;const $b=Ft,Yne=Dr,Qne=Np,k3=Qe,PA=Lt;var AA=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Zne="Change.konva",Jne="none",S3="up",C3="right",E3="down",I3="left",ere=AA.length;class T3 extends Qne.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,a=function(){n._sync()};for(r=0;r<ere;r++)e.on(AA[r]+Zne,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,a,i,o,s,l,u;if(e&&n){switch(r=e.width(),a=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),s=0,l=0,i){case S3:s=r/2,l=-1*u;break;case C3:s=r+o,l=a/2;break;case E3:s=r/2,l=a+u;break;case I3:s=-1*o,l=a/2;break}n.setAttrs({x:-1*s,y:-1*l,width:r,height:a}),e.setAttrs({x:-1*s,y:-1*l})}}}Mp.Label=T3,T3.prototype.className="Label",(0,PA._registerNode)(T3);class Pc extends Yne.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),a=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius();let l=0,u=0,c=0,d=0;typeof s=="number"?l=u=c=d=Math.min(s,n/2,r/2):(l=Math.min(s[0]||0,n/2,r/2),u=Math.min(s[1]||0,n/2,r/2),d=Math.min(s[2]||0,n/2,r/2),c=Math.min(s[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),a===S3&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),a===C3&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),a===E3&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(c,r),e.arc(c,r-c,c,Math.PI/2,Math.PI,!1),a===I3&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),a=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),s=this.height();return i===S3?(n-=a,s+=a):i===E3?s+=a:i===I3?(e-=r*1.5,o+=r):i===C3&&(o+=r*1.5),{x:e,y:n,width:o,height:s}}}Mp.Tag=Pc,Pc.prototype.className="Tag",(0,PA._registerNode)(Pc),$b.Factory.addGetterSetter(Pc,"pointerDirection",Jne),$b.Factory.addGetterSetter(Pc,"pointerWidth",0,(0,k3.getNumberValidator)()),$b.Factory.addGetterSetter(Pc,"pointerHeight",0,(0,k3.getNumberValidator)()),$b.Factory.addGetterSetter(Pc,"cornerRadius",0,(0,k3.getNumberOrArrayOfNumbersValidator)(4));var pg={};Object.defineProperty(pg,"__esModule",{value:!0}),pg.Rect=void 0;const tre=Ft,nre=Dr,rre=Lt,are=rr,ire=Qe;class Ob extends nre.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),a=this.height();e.beginPath(),n?are.Util.drawRoundedRectPath(e,r,a,n):e.rect(0,0,r,a),e.closePath(),e.fillStrokeShape(this)}}pg.Rect=Ob,Ob.prototype.className="Rect",(0,rre._registerNode)(Ob),tre.Factory.addGetterSetter(Ob,"cornerRadius",0,(0,ire.getNumberOrArrayOfNumbersValidator)(4));var Mb={};Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.RegularPolygon=void 0;const DA=Ft,ore=Dr,LA=Qe,sre=Lt;class Ac extends ore.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var a=0;a<e;a++)r.push({x:n*Math.sin(a*2*Math.PI/e),y:-1*n*Math.cos(a*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,a=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),a=Math.min(a,o.y),i=Math.max(i,o.y)}),{x:n,y:a,width:r-n,height:i-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Mb.RegularPolygon=Ac,Ac.prototype.className="RegularPolygon",Ac.prototype._centroid=!0,Ac.prototype._attrsAffectingSize=["radius"],(0,sre._registerNode)(Ac),DA.Factory.addGetterSetter(Ac,"radius",0,(0,LA.getNumberValidator)()),DA.Factory.addGetterSetter(Ac,"sides",0,(0,LA.getNumberValidator)());var Pb={};Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.Ring=void 0;const FA=Ft,lre=Dr,BA=Qe,ure=Lt;var zA=Math.PI*2;class Dc extends lre.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,zA,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),zA,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Pb.Ring=Dc,Dc.prototype.className="Ring",Dc.prototype._centroid=!0,Dc.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,ure._registerNode)(Dc),FA.Factory.addGetterSetter(Dc,"innerRadius",0,(0,BA.getNumberValidator)()),FA.Factory.addGetterSetter(Dc,"outerRadius",0,(0,BA.getNumberValidator)());var Ab={};Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.Sprite=void 0;const Lc=Ft,cre=Dr,dre=_p,jA=Qe,pre=Lt;class fs extends cre.Shape{constructor(e){super(e),this._updated=!0,this.anim=new dre.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+0],l=i[a+1],u=i[a+2],c=i[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,c),e.closePath(),e.fillStrokeShape(this)),d)if(o){var p=o[n],f=r*2;e.drawImage(d,s,l,u,c,p[f+0],p[f+1],u,c)}else e.drawImage(d,s,l,u,c,0,0,u,c)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+2],l=i[a+3];if(e.beginPath(),o){var u=o[n],c=r*2;e.rect(u[c+0],u[c+1],s,l)}else e.rect(0,0,s,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),a=r[n],i=a.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}Ab.Sprite=fs,fs.prototype.className="Sprite",(0,pre._registerNode)(fs),Lc.Factory.addGetterSetter(fs,"animation"),Lc.Factory.addGetterSetter(fs,"animations"),Lc.Factory.addGetterSetter(fs,"frameOffsets"),Lc.Factory.addGetterSetter(fs,"image"),Lc.Factory.addGetterSetter(fs,"frameIndex",0,(0,jA.getNumberValidator)()),Lc.Factory.addGetterSetter(fs,"frameRate",17,(0,jA.getNumberValidator)()),Lc.Factory.backCompat(fs,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Db={};Object.defineProperty(Db,"__esModule",{value:!0}),Db.Star=void 0;const N3=Ft,hre=Dr,_3=Qe,fre=Lt;class fu extends hre.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var i=1;i<a*2;i++){var o=i%2===0?r:n,s=o*Math.sin(i*Math.PI/a),l=-1*o*Math.cos(i*Math.PI/a);e.lineTo(s,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Db.Star=fu,fu.prototype.className="Star",fu.prototype._centroid=!0,fu.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,fre._registerNode)(fu),N3.Factory.addGetterSetter(fu,"numPoints",5,(0,_3.getNumberValidator)()),N3.Factory.addGetterSetter(fu,"innerRadius",0,(0,_3.getNumberValidator)()),N3.Factory.addGetterSetter(fu,"outerRadius",0,(0,_3.getNumberValidator)());var Fc={};Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.Text=Fc.stringToArray=void 0;const R3=rr,$a=Ft,gre=Dr,gu=Qe,mre=Lt;function VA(t){return Array.from(t)}Fc.stringToArray=VA;var Pp="auto",yre="center",UA="inherit",hg="justify",bre="Change.konva",vre="2d",WA="-",GA="left",xre="text",wre="Text",kre="top",Sre="bottom",HA="middle",qA="normal",Cre="px ",Lb=" ",Ere="right",KA="rtl",Ire="word",Tre="char",XA="none",$3="\u2026",YA=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Nre=YA.length;function _re(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var O3;function M3(){return O3||(O3=R3.Util.createCanvasElement().getContext(vre),O3)}function Rre(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function $re(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Ore(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class dr extends gre.Shape{constructor(e){super(Ore(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<Nre;n++)this.on(YA[n]+bre,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var a=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,s=this.verticalAlign(),l=this.direction(),u=0,c=this.align(),d=this.getWidth(),p=this.letterSpacing(),f=this.fill(),m=this.textDecoration(),y=m.indexOf("underline")!==-1,v=m.indexOf("line-through")!==-1,b;l=l===UA?e.direction:l;var x=0,x=o/2,w=0,S=0;for(l===KA&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",HA),e.setAttr("textAlign",GA),s===HA?u=(this.getHeight()-r*o-a*2)/2:s===Sre&&(u=this.getHeight()-r*o-a*2),e.translate(a,u+a),b=0;b<r;b++){var w=0,S=0,C=n[b],E=C.text,_=C.width,N=C.lastInParagraph,M,P,L;if(e.save(),c===Ere?w+=d-_-a*2:c===yre&&(w+=(d-_-a*2)/2),y){e.save(),e.beginPath(),e.moveTo(w,x+S+Math.round(i/2)),M=E.split(" ").length-1,P=M===0,L=c===hg&&!N?d-a*2:_,e.lineTo(w+Math.round(L),x+S+Math.round(i/2)),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(v){e.save(),e.beginPath(),e.moveTo(w,x+S),M=E.split(" ").length-1,P=M===0,L=c===hg&&N&&!P?d-a*2:_,e.lineTo(w+Math.round(L),x+S),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(l!==KA&&(p!==0||c===hg)){M=E.split(" ").length-1;for(var j=VA(E),B=0;B<j.length;B++){var K=j[B];K===" "&&!N&&c===hg&&(w+=(d-a*2-_)/M),this._partialTextX=w,this._partialTextY=x+S,this._partialText=K,e.fillStrokeShape(this),w+=this.measureSize(K).width+p}}else p!==0&&e.setAttr("letterSpacing",`${p}px`),this._partialTextX=w,this._partialTextY=x+S,this._partialText=E,e.fillStrokeShape(this);e.restore(),r>1&&(x+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=R3.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(xre,n),this}getWidth(){var e=this.attrs.width===Pp||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Pp||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return R3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=M3(),r=this.fontSize(),a;return n.save(),n.font=this._getContextFont(),a=n.measureText(e),n.restore(),{width:a.width,height:r}}_getContextFont(){return this.fontStyle()+Lb+this.fontVariant()+Lb+(this.fontSize()+Cre)+_re(this.fontFamily())}_addTextLine(e){this.align()===hg&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return M3().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,a=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,s=i!==Pp&&i!==void 0,l=o!==Pp&&o!==void 0,u=this.padding(),c=i-u*2,d=o-u*2,p=0,f=this.wrap(),m=f!==XA,y=f!==Tre&&m,v=this.ellipsis();this.textArr=[],M3().font=this._getContextFont();for(var b=v?this._getTextWidth($3):0,x=0,w=e.length;x<w;++x){var S=e[x],C=this._getTextWidth(S);if(s&&C>c)for(;S.length>0;){for(var E=0,_=S.length,N="",M=0;E<_;){var P=E+_>>>1,L=S.slice(0,P+1),j=this._getTextWidth(L)+b;j<=c?(E=P+1,N=L,M=j):_=P}if(N){if(y){var B,K=S[N.length],X=K===Lb||K===WA;X&&M<=c?B=N.length:B=Math.max(N.lastIndexOf(Lb),N.lastIndexOf(WA))+1,B>0&&(E=B,N=N.slice(0,E),M=this._getTextWidth(N))}N=N.trimRight(),this._addTextLine(N),r=Math.max(r,M),p+=a;var Z=this._shouldHandleEllipsis(p);if(Z){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(E),S=S.trimLeft(),S.length>0&&(C=this._getTextWidth(S),C<=c)){this._addTextLine(S),p+=a,r=Math.max(r,C);break}}else break}else this._addTextLine(S),p+=a,r=Math.max(r,C),this._shouldHandleEllipsis(p)&&x<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&p+a>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,a=this.attrs.height,i=a!==Pp&&a!==void 0,o=this.padding(),s=a-o*2,l=this.wrap(),u=l!==XA;return!u||i&&e+r>s}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Pp&&e!==void 0,r=this.padding(),a=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!i)){if(n){var s=this._getTextWidth(o.text+$3)<a;s||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+$3)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}Fc.Text=dr,dr.prototype._fillFunc=Rre,dr.prototype._strokeFunc=$re,dr.prototype.className=wre,dr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,mre._registerNode)(dr),$a.Factory.overWriteSetter(dr,"width",(0,gu.getNumberOrAutoValidator)()),$a.Factory.overWriteSetter(dr,"height",(0,gu.getNumberOrAutoValidator)()),$a.Factory.addGetterSetter(dr,"direction",UA),$a.Factory.addGetterSetter(dr,"fontFamily","Arial"),$a.Factory.addGetterSetter(dr,"fontSize",12,(0,gu.getNumberValidator)()),$a.Factory.addGetterSetter(dr,"fontStyle",qA),$a.Factory.addGetterSetter(dr,"fontVariant",qA),$a.Factory.addGetterSetter(dr,"padding",0,(0,gu.getNumberValidator)()),$a.Factory.addGetterSetter(dr,"align",GA),$a.Factory.addGetterSetter(dr,"verticalAlign",kre),$a.Factory.addGetterSetter(dr,"lineHeight",1,(0,gu.getNumberValidator)()),$a.Factory.addGetterSetter(dr,"wrap",Ire),$a.Factory.addGetterSetter(dr,"ellipsis",!1,(0,gu.getBooleanValidator)()),$a.Factory.addGetterSetter(dr,"letterSpacing",0,(0,gu.getNumberValidator)()),$a.Factory.addGetterSetter(dr,"text","",(0,gu.getStringValidator)()),$a.Factory.addGetterSetter(dr,"textDecoration","");var Fb={};Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.TextPath=void 0;const P3=rr,zo=Ft,Mre=Dr,fg=Rp,A3=Fc,QA=Qe,Pre=Lt;var Are="",ZA="normal";function JA(t){t.fillText(this.partialText,0,0)}function eD(t){t.strokeText(this.partialText,0,0)}class Lr extends Mre.Shape{constructor(e){super(e),this.dummyCanvas=P3.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return fg.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:fg.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=fg.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),a=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<i.length;o++){e.save();var s=i[o].p0;e.translate(s.x,s.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,a/2+1),e.lineTo(a,a/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=a/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var a=0;a<n.length;a++){var i=n[a].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return P3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return A3.Text.prototype.setText.call(this,e)}_getContextFont(){return A3.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var a=r.measureText(e);return r.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),a=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let s=0;a==="center"&&(s=Math.max(0,this.pathLength/2-o/2)),a==="right"&&(s=Math.max(0,this.pathLength-o));const l=(0,A3.stringToArray)(this.text());let u=s;for(var c=0;c<l.length;c++){const d=this._getPointAtLength(u);if(!d)return;let p=this._getTextSize(l[c]).width+r;if(l[c]===" "&&a==="justify"){const x=this.text().split(" ").length-1;p+=(this.pathLength-o)/x}const f=this._getPointAtLength(u+p);if(!f)return;const m=fg.Path.getLineLength(d.x,d.y,f.x,f.y);let y=0;if(i)try{y=i(l[c-1],l[c])*this.fontSize()}catch{y=0}d.x+=y,f.x+=y,this.textWidth+=y;const v=fg.Path.getPointOnLine(y+m/2,d.x,d.y,f.x,f.y),b=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[c],rotation:b,p0:d,p1:f}),u+=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});for(var n=e[0]||0,r=e[0]||0,a=e[1]||0,i=e[1]||0,o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);var u=this.fontSize();return{x:n-u/2,y:a-u/2,width:r-n+u,height:i-a+u}}destroy(){return P3.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Fb.TextPath=Lr,Lr.prototype._fillFunc=JA,Lr.prototype._strokeFunc=eD,Lr.prototype._fillFuncHit=JA,Lr.prototype._strokeFuncHit=eD,Lr.prototype.className="TextPath",Lr.prototype._attrsAffectingSize=["text","fontSize","data"],(0,Pre._registerNode)(Lr),zo.Factory.addGetterSetter(Lr,"data"),zo.Factory.addGetterSetter(Lr,"fontFamily","Arial"),zo.Factory.addGetterSetter(Lr,"fontSize",12,(0,QA.getNumberValidator)()),zo.Factory.addGetterSetter(Lr,"fontStyle",ZA),zo.Factory.addGetterSetter(Lr,"align","left"),zo.Factory.addGetterSetter(Lr,"letterSpacing",0,(0,QA.getNumberValidator)()),zo.Factory.addGetterSetter(Lr,"textBaseline","middle"),zo.Factory.addGetterSetter(Lr,"fontVariant",ZA),zo.Factory.addGetterSetter(Lr,"text",Are),zo.Factory.addGetterSetter(Lr,"textDecoration",null),zo.Factory.addGetterSetter(Lr,"kerningFunc",null);var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.Transformer=void 0;const vn=rr,ln=Ft,tD=Hn,Dre=Dr,Lre=pg,nD=Np,jo=Lt,mu=Qe,Fre=Lt;var rD="tr-konva",Bre=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${rD}`).join(" "),aD="nodesRect",zre=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],jre={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Vre="ontouchstart"in jo.Konva._global;function Ure(t,e,n){if(t==="rotater")return n;e+=vn.Util.degToRad(jre[t]||0);var r=(vn.Util.radToDeg(e)%360+360)%360;return vn.Util._inRange(r,315+22.5,360)||vn.Util._inRange(r,0,22.5)?"ns-resize":vn.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":vn.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":vn.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":vn.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":vn.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":vn.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":vn.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(vn.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var zb=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],iD=1e8;function Wre(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function oD(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),a=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:a}}function Gre(t,e){const n=Wre(t);return oD(t,e,n)}function Hre(t,e,n){let r=e;for(let a=0;a<t.length;a++){const i=jo.Konva.getAngle(t[a]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let Xt=class extends nD.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Bre,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return vn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return rD+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(r=>r.isAncestorOf(this)?(vn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},i=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(i,a),r.on(zre.map(o=>o+`.${this._getEventNamespace()}`).join(" "),a),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,n=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!e)return;const r=t.getAbsolutePosition(),a=r.x-e.x,i=r.y-e.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const s=o.getAbsolutePosition();o.setAbsolutePosition({x:s.x+a,y:s.y+i}),o.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(aD),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(aD,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(n),i=t.getAbsolutePosition(n),o=r.x*a.x-t.offsetX()*a.x,s=r.y*a.y-t.offsetY()*a.y;const l=(jo.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:i.x+o*Math.cos(l)+s*Math.sin(-l),y:i.y+s*Math.cos(l)+o*Math.sin(l),width:r.width*a.x,height:r.height*a.y,rotation:l};return oD(u,-jo.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-iD,y:-iD,width:0,height:0,rotation:0};const e=[];this.nodes().map(l=>{const u=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var c=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],d=l.getAbsoluteTransform();c.forEach(function(p){var f=d.point(p);e.push(f)})});const n=new vn.Transform;n.rotate(-jo.Konva.getAngle(this.rotation()));var r=1/0,a=1/0,i=-1/0,o=-1/0;e.forEach(function(l){var u=n.point(l);r===void 0&&(r=i=u.x,a=o=u.y),r=Math.min(r,u.x),a=Math.min(a,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}),n.invert();const s=n.point({x:r,y:a});return{x:s.x,y:s.y,width:i-r,height:o-a,rotation:jo.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),zb.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new Lre.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Vre?10:"auto"}),n=this;e.on("mousedown touchstart",function(r){n._handleMouseDown(r)}),e.on("dragstart",r=>{e.stopDrag(),r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),e.on("mouseenter",()=>{var r=jo.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),i=Ure(t,r,a);e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new Dre.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,n){var r=n.getParent(),a=r.padding();e.beginPath(),e.rect(-a,-a,n.width()+a*2,n.height()+a*2),e.moveTo(n.width()/2,-a),r.rotateEnabled()&&r.rotateLineVisible()&&e.lineTo(n.width()/2,-r.rotateAnchorOffset()*vn.Util._sign(n.height())-a),e.fillStrokeShape(n)},hitFunc:(e,n)=>{if(this.shouldOverdrawWholeArea()){var r=this.padding();e.beginPath(),e.rect(-r,-r,n.width()+r*2,n.height()+r*2),e.fillStrokeShape(n)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/a),this.cos=Math.abs(n/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var i=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-i.x,y:o.y-i.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(s=>{s._fire("transformstart",{evt:t.evt,target:s})})}_handleMouseMove(t){var e,n,r,a=this.findOne("."+this._movingAnchorName),i=a.getStage();i.setPointersPositions(t);const o=i.getPointerPosition();let s={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,t)),a.setAbsolutePosition(s);const u=a.getAbsolutePosition();if(!(l.x===u.x&&l.y===u.y)){if(this._movingAnchorName==="rotater"){var c=this._getNodeRect();e=a.x()-c.width/2,n=-a.y()+c.height/2;let j=Math.atan2(-n,e)+Math.PI/2;c.height<0&&(j-=Math.PI);var d=jo.Konva.getAngle(this.rotation());const B=d+j,K=jo.Konva.getAngle(this.rotationSnapTolerance()),X=Hre(this.rotationSnaps(),B,K)-c.rotation,Z=Gre(c,X);this._fitNodesInto(Z,t);return}var p=this.shiftBehavior(),f;p==="inverted"?f=this.keepRatio()&&!t.shiftKey:p==="none"?f=this.keepRatio():f=this.keepRatio()||t.shiftKey;var x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(m.x-a.x(),2)+Math.pow(m.y-a.y(),2));var y=this.findOne(".top-left").x()>m.x?-1:1,v=this.findOne(".top-left").y()>m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-left").x(m.x-e),this.findOne(".top-left").y(m.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(a.x()-m.x,2)+Math.pow(m.y-a.y(),2));var y=this.findOne(".top-right").x()<m.x?-1:1,v=this.findOne(".top-right").y()>m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-right").x(m.x+e),this.findOne(".top-right").y(m.y-n)}var b=a.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(m.x-a.x(),2)+Math.pow(a.y()-m.y,2));var y=m.x<a.x()?-1:1,v=a.y()<m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,a.x(m.x-e),a.y(m.y+n)}b=a.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(f){var m=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(a.x()-m.x,2)+Math.pow(a.y()-m.y,2));var y=this.findOne(".bottom-right").x()<m.x?-1:1,v=this.findOne(".bottom-right").y()<m.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".bottom-right").x(m.x+e),this.findOne(".bottom-right").y(m.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var x=this.centeredScaling()||t.altKey;if(x){var w=this.findOne(".top-left"),S=this.findOne(".bottom-right"),C=w.x(),E=w.y(),_=this.getWidth()-S.x(),N=this.getHeight()-S.y();S.move({x:-C,y:-E}),w.move({x:_,y:N})}var M=this.findOne(".top-left").getAbsolutePosition();e=M.x,n=M.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),L=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:P,height:L,rotation:jo.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(n=>{n._fire("transformend",{evt:t,target:n})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();const r=1;if(vn.Util._inRange(t.width,-this.padding()*2-r,r)){this.update();return}if(vn.Util._inRange(t.height,-this.padding()*2-r,r)){this.update();return}var a=new vn.Transform;if(a.rotate(jo.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=a.point({x:-this.padding()*2,y:0});t.x+=d.x,t.y+=d.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=a.point({x:0,y:-this.padding()*2});t.x+=d.x,t.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(n,t);d?t=d:vn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const i=1e7,o=new vn.Transform;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/i,n.height/i);const s=new vn.Transform,l=t.width/i,u=t.height/i;this.flipEnabled()===!1?(s.translate(t.x,t.y),s.rotate(t.rotation),s.translate(t.width<0?t.width:0,t.height<0?t.height:0),s.scale(Math.abs(l),Math.abs(u))):(s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(l,u));const c=s.multiply(o.invert());this._nodes.forEach(d=>{var p;const f=d.getParent().getAbsoluteTransform(),m=d.getTransform().copy();m.translate(d.offsetX(),d.offsetY());const y=new vn.Transform;y.multiply(f.copy().invert()).multiply(c).multiply(f).multiply(m);const v=y.decompose();d.setAttrs(v),this._fire("transform",{evt:e,target:d}),d._fire("transform",{evt:e,target:d}),(p=d.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(vn.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(vn.Util._getRotation(e.rotation));var n=e.width,r=e.height,a=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();const l=this.find("._anchor");l.forEach(c=>{c.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:i&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:i&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:i&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:i&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:i&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:i&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*vn.Util._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const u=this.anchorStyleFunc();u&&l.forEach(c=>{u(c)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),nD.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return tD.Node.prototype.toObject.call(this)}clone(t){var e=tD.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Bb.Transformer=Xt;function qre(t){return t instanceof Array||vn.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){zb.indexOf(e)===-1&&vn.Util.warn("Unknown anchor name: "+e+". Available names are: "+zb.join(", "))}),t||[]}Xt.prototype.className="Transformer",(0,Fre._registerNode)(Xt),ln.Factory.addGetterSetter(Xt,"enabledAnchors",zb,qre),ln.Factory.addGetterSetter(Xt,"flipEnabled",!0,(0,mu.getBooleanValidator)()),ln.Factory.addGetterSetter(Xt,"resizeEnabled",!0),ln.Factory.addGetterSetter(Xt,"anchorSize",10,(0,mu.getNumberValidator)()),ln.Factory.addGetterSetter(Xt,"rotateEnabled",!0),ln.Factory.addGetterSetter(Xt,"rotateLineVisible",!0),ln.Factory.addGetterSetter(Xt,"rotationSnaps",[]),ln.Factory.addGetterSetter(Xt,"rotateAnchorOffset",50,(0,mu.getNumberValidator)()),ln.Factory.addGetterSetter(Xt,"rotateAnchorCursor","crosshair"),ln.Factory.addGetterSetter(Xt,"rotationSnapTolerance",5,(0,mu.getNumberValidator)()),ln.Factory.addGetterSetter(Xt,"borderEnabled",!0),ln.Factory.addGetterSetter(Xt,"anchorStroke","rgb(0, 161, 255)"),ln.Factory.addGetterSetter(Xt,"anchorStrokeWidth",1,(0,mu.getNumberValidator)()),ln.Factory.addGetterSetter(Xt,"anchorFill","white"),ln.Factory.addGetterSetter(Xt,"anchorCornerRadius",0,(0,mu.getNumberValidator)()),ln.Factory.addGetterSetter(Xt,"borderStroke","rgb(0, 161, 255)"),ln.Factory.addGetterSetter(Xt,"borderStrokeWidth",1,(0,mu.getNumberValidator)()),ln.Factory.addGetterSetter(Xt,"borderDash"),ln.Factory.addGetterSetter(Xt,"keepRatio",!0),ln.Factory.addGetterSetter(Xt,"shiftBehavior","default"),ln.Factory.addGetterSetter(Xt,"centeredScaling",!1),ln.Factory.addGetterSetter(Xt,"ignoreStroke",!1),ln.Factory.addGetterSetter(Xt,"padding",0,(0,mu.getNumberValidator)()),ln.Factory.addGetterSetter(Xt,"node"),ln.Factory.addGetterSetter(Xt,"nodes"),ln.Factory.addGetterSetter(Xt,"boundBoxFunc"),ln.Factory.addGetterSetter(Xt,"anchorDragBoundFunc"),ln.Factory.addGetterSetter(Xt,"anchorStyleFunc"),ln.Factory.addGetterSetter(Xt,"shouldOverdrawWholeArea",!1),ln.Factory.addGetterSetter(Xt,"useSingleNodeRotation",!0),ln.Factory.backCompat(Xt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var jb={};Object.defineProperty(jb,"__esModule",{value:!0}),jb.Wedge=void 0;const Vb=Ft,Kre=Dr,Xre=Lt,sD=Qe,Yre=Lt;class ol extends Kre.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Xre.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}jb.Wedge=ol,ol.prototype.className="Wedge",ol.prototype._centroid=!0,ol.prototype._attrsAffectingSize=["radius"],(0,Yre._registerNode)(ol),Vb.Factory.addGetterSetter(ol,"radius",0,(0,sD.getNumberValidator)()),Vb.Factory.addGetterSetter(ol,"angle",0,(0,sD.getNumberValidator)()),Vb.Factory.addGetterSetter(ol,"clockwise",!1),Vb.Factory.backCompat(ol,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Ub={};Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.Blur=void 0;const lD=Ft,Qre=Hn,Zre=Qe;function uD(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Jre=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],eae=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function tae(t,e){var n=t.data,r=t.width,a=t.height,i,o,s,l,u,c,d,p,f,m,y,v,b,x,w,S,C,E,_,N,M,P,L,j,B=e+e+1,K=r-1,X=a-1,Z=e+1,H=Z*(Z+1)/2,F=new uD,Y=null,Q=F,ne=null,se=null,pe=Jre[e],de=eae[e];for(s=1;s<B;s++)Q=Q.next=new uD,s===Z&&(Y=Q);for(Q.next=F,d=c=0,o=0;o<a;o++){for(S=C=E=_=p=f=m=y=0,v=Z*(N=n[c]),b=Z*(M=n[c+1]),x=Z*(P=n[c+2]),w=Z*(L=n[c+3]),p+=H*N,f+=H*M,m+=H*P,y+=H*L,Q=F,s=0;s<Z;s++)Q.r=N,Q.g=M,Q.b=P,Q.a=L,Q=Q.next;for(s=1;s<Z;s++)l=c+((K<s?K:s)<<2),p+=(Q.r=N=n[l])*(j=Z-s),f+=(Q.g=M=n[l+1])*j,m+=(Q.b=P=n[l+2])*j,y+=(Q.a=L=n[l+3])*j,S+=N,C+=M,E+=P,_+=L,Q=Q.next;for(ne=F,se=Y,i=0;i<r;i++)n[c+3]=L=y*pe>>de,L!==0?(L=255/L,n[c]=(p*pe>>de)*L,n[c+1]=(f*pe>>de)*L,n[c+2]=(m*pe>>de)*L):n[c]=n[c+1]=n[c+2]=0,p-=v,f-=b,m-=x,y-=w,v-=ne.r,b-=ne.g,x-=ne.b,w-=ne.a,l=d+((l=i+e+1)<K?l:K)<<2,S+=ne.r=n[l],C+=ne.g=n[l+1],E+=ne.b=n[l+2],_+=ne.a=n[l+3],p+=S,f+=C,m+=E,y+=_,ne=ne.next,v+=N=se.r,b+=M=se.g,x+=P=se.b,w+=L=se.a,S-=N,C-=M,E-=P,_-=L,se=se.next,c+=4;d+=r}for(i=0;i<r;i++){for(C=E=_=S=f=m=y=p=0,c=i<<2,v=Z*(N=n[c]),b=Z*(M=n[c+1]),x=Z*(P=n[c+2]),w=Z*(L=n[c+3]),p+=H*N,f+=H*M,m+=H*P,y+=H*L,Q=F,s=0;s<Z;s++)Q.r=N,Q.g=M,Q.b=P,Q.a=L,Q=Q.next;for(u=r,s=1;s<=e;s++)c=u+i<<2,p+=(Q.r=N=n[c])*(j=Z-s),f+=(Q.g=M=n[c+1])*j,m+=(Q.b=P=n[c+2])*j,y+=(Q.a=L=n[c+3])*j,S+=N,C+=M,E+=P,_+=L,Q=Q.next,s<X&&(u+=r);for(c=i,ne=F,se=Y,o=0;o<a;o++)l=c<<2,n[l+3]=L=y*pe>>de,L>0?(L=255/L,n[l]=(p*pe>>de)*L,n[l+1]=(f*pe>>de)*L,n[l+2]=(m*pe>>de)*L):n[l]=n[l+1]=n[l+2]=0,p-=v,f-=b,m-=x,y-=w,v-=ne.r,b-=ne.g,x-=ne.b,w-=ne.a,l=i+((l=o+Z)<X?l:X)*r<<2,p+=S+=ne.r=n[l],f+=C+=ne.g=n[l+1],m+=E+=ne.b=n[l+2],y+=_+=ne.a=n[l+3],ne=ne.next,v+=N=se.r,b+=M=se.g,x+=P=se.b,w+=L=se.a,S-=N,C-=M,E-=P,_-=L,se=se.next,c+=r}}const nae=function(t){var e=Math.round(this.blurRadius());e>0&&tae(t,e)};Ub.Blur=nae,lD.Factory.addGetterSetter(Qre.Node,"blurRadius",0,(0,Zre.getNumberValidator)(),lD.Factory.afterSetFilter);var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.Brighten=void 0;const cD=Ft,rae=Hn,aae=Qe,iae=function(t){var e=this.brightness()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=4)n[a]+=e,n[a+1]+=e,n[a+2]+=e};Wb.Brighten=iae,cD.Factory.addGetterSetter(rae.Node,"brightness",0,(0,aae.getNumberValidator)(),cD.Factory.afterSetFilter);var Gb={};Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.Contrast=void 0;const dD=Ft,oae=Hn,sae=Qe,lae=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,a=150,i=150,o=150,s;for(s=0;s<r;s+=4)a=n[s],i=n[s+1],o=n[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[s]=a,n[s+1]=i,n[s+2]=o};Gb.Contrast=lae,dD.Factory.addGetterSetter(oae.Node,"contrast",0,(0,sae.getNumberValidator)(),dD.Factory.afterSetFilter);var Hb={};Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.Emboss=void 0;const yu=Ft,qb=Hn,uae=rr,pD=Qe,cae=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=t.data,l=t.width,u=t.height,c=l*4,d=u;switch(r){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:uae.Util.error("Unknown emboss direction: "+r)}do{var p=(d-1)*c,f=i;d+f<1&&(f=0),d+f>u&&(f=0);var m=(d-1+f)*l*4,y=l;do{var v=p+(y-1)*4,b=o;y+b<1&&(b=0),y+b>l&&(b=0);var x=m+(y-1+b)*4,w=s[v]-s[x],S=s[v+1]-s[x+1],C=s[v+2]-s[x+2],E=w,_=E>0?E:-E,N=S>0?S:-S,M=C>0?C:-C;if(N>_&&(E=S),M>_&&(E=C),E*=e,a){var P=s[v]+E,L=s[v+1]+E,j=s[v+2]+E;s[v]=P>255?255:P<0?0:P,s[v+1]=L>255?255:L<0?0:L,s[v+2]=j>255?255:j<0?0:j}else{var B=n-E;B<0?B=0:B>255&&(B=255),s[v]=s[v+1]=s[v+2]=B}}while(--y)}while(--d)};Hb.Emboss=cae,yu.Factory.addGetterSetter(qb.Node,"embossStrength",.5,(0,pD.getNumberValidator)(),yu.Factory.afterSetFilter),yu.Factory.addGetterSetter(qb.Node,"embossWhiteLevel",.5,(0,pD.getNumberValidator)(),yu.Factory.afterSetFilter),yu.Factory.addGetterSetter(qb.Node,"embossDirection","top-left",null,yu.Factory.afterSetFilter),yu.Factory.addGetterSetter(qb.Node,"embossBlend",!1,null,yu.Factory.afterSetFilter);var Kb={};Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.Enhance=void 0;const hD=Ft,dae=Hn,pae=Qe;function D3(t,e,n,r,a){var i=n-e,o=a-r,s;return i===0?r+o/2:o===0?r:(s=(t-e)/i,s=o*s+r,s)}const hae=function(t){var e=t.data,n=e.length,r=e[0],a=r,i,o=e[1],s=o,l,u=e[2],c=u,d,p,f=this.enhance();if(f!==0){for(p=0;p<n;p+=4)i=e[p+0],i<r?r=i:i>a&&(a=i),l=e[p+1],l<o?o=l:l>s&&(s=l),d=e[p+2],d<u?u=d:d>c&&(c=d);a===r&&(a=255,r=0),s===o&&(s=255,o=0),c===u&&(c=255,u=0);var m,y,v,b,x,w,S,C,E;for(f>0?(y=a+f*(255-a),v=r-f*(r-0),x=s+f*(255-s),w=o-f*(o-0),C=c+f*(255-c),E=u-f*(u-0)):(m=(a+r)*.5,y=a+f*(a-m),v=r+f*(r-m),b=(s+o)*.5,x=s+f*(s-b),w=o+f*(o-b),S=(c+u)*.5,C=c+f*(c-S),E=u+f*(u-S)),p=0;p<n;p+=4)e[p+0]=D3(e[p+0],r,a,v,y),e[p+1]=D3(e[p+1],o,s,w,x),e[p+2]=D3(e[p+2],u,c,E,C)}};Kb.Enhance=hae,hD.Factory.addGetterSetter(dae.Node,"enhance",0,(0,pae.getNumberValidator)(),hD.Factory.afterSetFilter);var Xb={};Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.Grayscale=void 0;const fae=function(t){var e=t.data,n=e.length,r,a;for(r=0;r<n;r+=4)a=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=a,e[r+1]=a,e[r+2]=a};Xb.Grayscale=fae;var Yb={};Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.HSL=void 0;const Ap=Ft,L3=Hn,F3=Qe;Ap.Factory.addGetterSetter(L3.Node,"hue",0,(0,F3.getNumberValidator)(),Ap.Factory.afterSetFilter),Ap.Factory.addGetterSetter(L3.Node,"saturation",0,(0,F3.getNumberValidator)(),Ap.Factory.afterSetFilter),Ap.Factory.addGetterSetter(L3.Node,"luminance",0,(0,F3.getNumberValidator)(),Ap.Factory.afterSetFilter);const gae=function(t){var e=t.data,n=e.length,r=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=r*a*Math.cos(i*Math.PI/180),u=r*a*Math.sin(i*Math.PI/180),c=.299*r+.701*l+.167*u,d=.587*r-.587*l+.33*u,p=.114*r-.114*l-.497*u,f=.299*r-.299*l-.328*u,m=.587*r+.413*l+.035*u,y=.114*r-.114*l+.293*u,v=.299*r-.3*l+1.25*u,b=.587*r-.586*l-1.05*u,x=.114*r+.886*l-.2*u,w,S,C,E;for(s=0;s<n;s+=4)w=e[s+0],S=e[s+1],C=e[s+2],E=e[s+3],e[s+0]=c*w+d*S+p*C+o,e[s+1]=f*w+m*S+y*C+o,e[s+2]=v*w+b*S+x*C+o,e[s+3]=E};Yb.HSL=gae;var Qb={};Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.HSV=void 0;const Dp=Ft,B3=Hn,z3=Qe,mae=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=r*a*Math.cos(i*Math.PI/180),l=r*a*Math.sin(i*Math.PI/180),u=.299*r+.701*s+.167*l,c=.587*r-.587*s+.33*l,d=.114*r-.114*s-.497*l,p=.299*r-.299*s-.328*l,f=.587*r+.413*s+.035*l,m=.114*r-.114*s+.293*l,y=.299*r-.3*s+1.25*l,v=.587*r-.586*s-1.05*l,b=.114*r+.886*s-.2*l,x,w,S,C;for(o=0;o<n;o+=4)x=e[o+0],w=e[o+1],S=e[o+2],C=e[o+3],e[o+0]=u*x+c*w+d*S,e[o+1]=p*x+f*w+m*S,e[o+2]=y*x+v*w+b*S,e[o+3]=C};Qb.HSV=mae,Dp.Factory.addGetterSetter(B3.Node,"hue",0,(0,z3.getNumberValidator)(),Dp.Factory.afterSetFilter),Dp.Factory.addGetterSetter(B3.Node,"saturation",0,(0,z3.getNumberValidator)(),Dp.Factory.afterSetFilter),Dp.Factory.addGetterSetter(B3.Node,"value",0,(0,z3.getNumberValidator)(),Dp.Factory.afterSetFilter);var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.Invert=void 0;const yae=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};Zb.Invert=yae;var Jb={};Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.Kaleidoscope=void 0;const ev=Ft,fD=Hn,gD=rr,mD=Qe;var bae=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p=0,f=0,m=0,y=0,v,b=Math.sqrt(s*s+l*l);c=i-s,d=o-l,v=Math.sqrt(c*c+d*d),b=v>b?v:b;var x=o,w=i,S,C,E=360/w*Math.PI/180,_,N;for(C=0;C<w;C+=1)for(_=Math.sin(C*E),N=Math.cos(C*E),S=0;S<x;S+=1)c=Math.floor(s+b*S/x*N),d=Math.floor(l+b*S/x*_),u=(d*i+c)*4,p=r[u+0],f=r[u+1],m=r[u+2],y=r[u+3],u=(C+S*i)*4,a[u+0]=p,a[u+1]=f,a[u+2]=m,a[u+3]=y},vae=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p,f,m=0,y=0,v=0,b=0,x,w=Math.sqrt(s*s+l*l);c=i-s,d=o-l,x=Math.sqrt(c*c+d*d),w=x>w?x:w;var S=o,C=i,E,_,N=n.polarRotation||0,M,P;for(c=0;c<i;c+=1)for(d=0;d<o;d+=1)p=c-s,f=d-l,E=Math.sqrt(p*p+f*f)*S/w,_=(Math.atan2(f,p)*180/Math.PI+360+N)%360,_=_*C/360,M=Math.floor(_),P=Math.floor(E),u=(P*i+M)*4,m=r[u+0],y=r[u+1],v=r[u+2],b=r[u+3],u=(d*i+c)*4,a[u+0]=m,a[u+1]=y,a[u+2]=v,a[u+3]=b};const xae=function(t){var e=t.width,n=t.height,r,a,i,o,s,l,u,c,d,p,f=Math.round(this.kaleidoscopePower()),m=Math.round(this.kaleidoscopeAngle()),y=Math.floor(e*(m%360)/360);if(!(f<1)){var v=gD.Util.createCanvasElement();v.width=e,v.height=n;var b=v.getContext("2d").getImageData(0,0,e,n);gD.Util.releaseCanvas(v),bae(t,b,{polarCenterX:e/2,polarCenterY:n/2});for(var x=e/Math.pow(2,f);x<=8;)x=x*2,f-=1;x=Math.ceil(x);var w=x,S=0,C=w,E=1;for(y+x>e&&(S=w,C=0,E=-1),a=0;a<n;a+=1)for(r=S;r!==C;r+=E)i=Math.round(r+y)%e,d=(e*a+i)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+r)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;for(a=0;a<n;a+=1)for(w=Math.floor(x),o=0;o<f;o+=1){for(r=0;r<w+1;r+=1)d=(e*a+r)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+w*2-r-1)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;w*=2}vae(b,t,{polarRotation:0})}};Jb.Kaleidoscope=xae,ev.Factory.addGetterSetter(fD.Node,"kaleidoscopePower",2,(0,mD.getNumberValidator)(),ev.Factory.afterSetFilter),ev.Factory.addGetterSetter(fD.Node,"kaleidoscopeAngle",0,(0,mD.getNumberValidator)(),ev.Factory.afterSetFilter);var tv={};Object.defineProperty(tv,"__esModule",{value:!0}),tv.Mask=void 0;const yD=Ft,wae=Hn,kae=Qe;function nv(t,e,n){var r=(n*t.width+e)*4,a=[];return a.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),a}function gg(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function Sae(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function Cae(t,e){var n=nv(t,0,0),r=nv(t,t.width-1,0),a=nv(t,0,t.height-1),i=nv(t,t.width-1,t.height-1),o=e||10;if(gg(n,r)<o&&gg(r,i)<o&&gg(i,a)<o&&gg(a,n)<o){for(var s=Sae([r,n,i,a]),l=[],u=0;u<t.width*t.height;u++){var c=gg(s,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=c<o?0:255}return l}}function Eae(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function Iae(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,m=l+p-i;if(f>=0&&f<n&&m>=0&&m<e){var y=f*e+m,v=r[d*a+p];c+=t[y]*v}}o[u]=c===255*8?255:0}return o}function Tae(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,m=l+p-i;if(f>=0&&f<n&&m>=0&&m<e){var y=f*e+m,v=r[d*a+p];c+=t[y]*v}}o[u]=c>=255*4?255:0}return o}function Nae(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,m=l+p-i;if(f>=0&&f<n&&m>=0&&m<e){var y=f*e+m,v=r[d*a+p];c+=t[y]*v}}o[u]=c}return o}const _ae=function(t){var e=this.threshold(),n=Cae(t,e);return n&&(n=Iae(n,t.width,t.height),n=Tae(n,t.width,t.height),n=Nae(n,t.width,t.height),Eae(t,n)),t};tv.Mask=_ae,yD.Factory.addGetterSetter(wae.Node,"threshold",0,(0,kae.getNumberValidator)(),yD.Factory.afterSetFilter);var rv={};Object.defineProperty(rv,"__esModule",{value:!0}),rv.Noise=void 0;const bD=Ft,Rae=Hn,$ae=Qe,Oae=function(t){var e=this.noise()*255,n=t.data,r=n.length,a=e/2,i;for(i=0;i<r;i+=4)n[i+0]+=a-2*a*Math.random(),n[i+1]+=a-2*a*Math.random(),n[i+2]+=a-2*a*Math.random()};rv.Noise=Oae,bD.Factory.addGetterSetter(Rae.Node,"noise",.2,(0,$ae.getNumberValidator)(),bD.Factory.afterSetFilter);var av={};Object.defineProperty(av,"__esModule",{value:!0}),av.Pixelate=void 0;const vD=Ft,Mae=rr,Pae=Hn,Aae=Qe,Dae=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,a,i,o,s,l,u,c,d=Math.ceil(n/e),p=Math.ceil(r/e),f,m,y,v,b,x,w,S=t.data;if(e<=0){Mae.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<d;b+=1)for(x=0;x<p;x+=1){for(s=0,l=0,u=0,c=0,f=b*e,m=f+e,y=x*e,v=y+e,w=0,a=f;a<m;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,s+=S[o+0],l+=S[o+1],u+=S[o+2],c+=S[o+3],w+=1);for(s=s/w,l=l/w,u=u/w,c=c/w,a=f;a<m;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,S[o+0]=s,S[o+1]=l,S[o+2]=u,S[o+3]=c)}};av.Pixelate=Dae,vD.Factory.addGetterSetter(Pae.Node,"pixelSize",8,(0,Aae.getNumberValidator)(),vD.Factory.afterSetFilter);var iv={};Object.defineProperty(iv,"__esModule",{value:!0}),iv.Posterize=void 0;const xD=Ft,Lae=Hn,Fae=Qe,Bae=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,a=255/e,i;for(i=0;i<r;i+=1)n[i]=Math.floor(n[i]/a)*a};iv.Posterize=Bae,xD.Factory.addGetterSetter(Lae.Node,"levels",.5,(0,Fae.getNumberValidator)(),xD.Factory.afterSetFilter);var ov={};Object.defineProperty(ov,"__esModule",{value:!0}),ov.RGB=void 0;const sv=Ft,j3=Hn,zae=Qe,jae=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<n;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*r,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};ov.RGB=jae,sv.Factory.addGetterSetter(j3.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),sv.Factory.addGetterSetter(j3.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),sv.Factory.addGetterSetter(j3.Node,"blue",0,zae.RGBComponent,sv.Factory.afterSetFilter);var lv={};Object.defineProperty(lv,"__esModule",{value:!0}),lv.RGBA=void 0;const mg=Ft,uv=Hn,Vae=Qe,Uae=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<n;s+=4)l=1-o,e[s]=r*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};lv.RGBA=Uae,mg.Factory.addGetterSetter(uv.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),mg.Factory.addGetterSetter(uv.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),mg.Factory.addGetterSetter(uv.Node,"blue",0,Vae.RGBComponent,mg.Factory.afterSetFilter),mg.Factory.addGetterSetter(uv.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var cv={};Object.defineProperty(cv,"__esModule",{value:!0}),cv.Sepia=void 0;const Wae=function(t){var e=t.data,n=e.length,r,a,i,o;for(r=0;r<n;r+=4)a=e[r+0],i=e[r+1],o=e[r+2],e[r+0]=Math.min(255,a*.393+i*.769+o*.189),e[r+1]=Math.min(255,a*.349+i*.686+o*.168),e[r+2]=Math.min(255,a*.272+i*.534+o*.131)};cv.Sepia=Wae;var dv={};Object.defineProperty(dv,"__esModule",{value:!0}),dv.Solarize=void 0;const Gae=function(t){var e=t.data,n=t.width,r=t.height,a=n*4,i=r;do{var o=(i-1)*a,s=n;do{var l=o+(s-1)*4,u=e[l],c=e[l+1],d=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),d>127&&(d=255-d),e[l]=u,e[l+1]=c,e[l+2]=d}while(--s)}while(--i)};dv.Solarize=Gae;var pv={};Object.defineProperty(pv,"__esModule",{value:!0}),pv.Threshold=void 0;const wD=Ft,Hae=Hn,qae=Qe,Kae=function(t){var e=this.threshold()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=1)n[a]=n[a]<e?0:255};pv.Threshold=Kae,wD.Factory.addGetterSetter(Hae.Node,"threshold",.5,(0,qae.getNumberValidator)(),wD.Factory.afterSetFilter),Object.defineProperty(cb,"__esModule",{value:!0}),cb.Konva=void 0;const kD=db,Xae=kb,Yae=Eb,Qae=Nb,Zae=_b,Jae=Rb,SD=Mp,eie=cg,tie=Rp,nie=pg,rie=Mb,aie=Pb,iie=Ab,oie=Db,sie=Fc,lie=Fb,uie=Bb,cie=jb,die=Ub,pie=Wb,hie=Gb,fie=Hb,gie=Kb,mie=Xb,yie=Yb,bie=Qb,vie=Zb,xie=Jb,wie=tv,kie=rv,Sie=av,Cie=iv,Eie=ov,Iie=lv,Tie=cv,Nie=dv,_ie=pv;cb.Konva=kD.Konva.Util._assign(kD.Konva,{Arc:Xae.Arc,Arrow:Yae.Arrow,Circle:Qae.Circle,Ellipse:Zae.Ellipse,Image:Jae.Image,Label:SD.Label,Tag:SD.Tag,Line:eie.Line,Path:tie.Path,Rect:nie.Rect,RegularPolygon:rie.RegularPolygon,Ring:aie.Ring,Sprite:iie.Sprite,Star:oie.Star,Text:sie.Text,TextPath:lie.TextPath,Transformer:uie.Transformer,Wedge:cie.Wedge,Filters:{Blur:die.Blur,Brighten:pie.Brighten,Contrast:hie.Contrast,Emboss:fie.Emboss,Enhance:gie.Enhance,Grayscale:mie.Grayscale,HSL:yie.HSL,HSV:bie.HSV,Invert:vie.Invert,Kaleidoscope:xie.Kaleidoscope,Mask:wie.Mask,Noise:kie.Noise,Pixelate:Sie.Pixelate,Posterize:Cie.Posterize,RGB:Eie.RGB,RGBA:Iie.RGBA,Sepia:Tie.Sepia,Solarize:Nie.Solarize,Threshold:_ie.Threshold}});var Rie=l3.exports;Object.defineProperty(Rie,"__esModule",{value:!0});const $ie=cb;l3.exports=$ie.Konva;var Oie=l3.exports;const CD=Ki(Oie);var V3={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=db;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=db;t.exports=r.Konva})(V3,V3.exports);var Mie=V3.exports;const yg=Ki(Mie);var ED={exports:{}};/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Pie=function(t){var e={},n=R,r=nf,a=Object.assign;function i(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)g+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=S&&h[S]||h["@@iterator"],typeof h=="function"?h:null)}function E(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case c:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case f:return(h.displayName||"Context")+".Consumer";case p:return(h._context.displayName||"Context")+".Provider";case m:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case b:return g=h.displayName||null,g!==null?g:E(h.type)||"Memo";case x:g=h._payload,h=h._init;try{return E(h(g))}catch{}}return null}function _(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(g);case 8:return g===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function N(h){var g=h,k=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,g.flags&4098&&(k=g.return),h=g.return;while(h)}return g.tag===3?k:null}function M(h){if(N(h)!==h)throw Error(i(188))}function P(h){var g=h.alternate;if(!g){if(g=N(h),g===null)throw Error(i(188));return g!==h?null:h}for(var k=h,I=g;;){var T=k.return;if(T===null)break;var O=T.alternate;if(O===null){if(I=T.return,I!==null){k=I;continue}break}if(T.child===O.child){for(O=T.child;O;){if(O===k)return M(T),h;if(O===I)return M(T),g;O=O.sibling}throw Error(i(188))}if(k.return!==I.return)k=T,I=O;else{for(var W=!1,le=T.child;le;){if(le===k){W=!0,k=T,I=O;break}if(le===I){W=!0,I=T,k=O;break}le=le.sibling}if(!W){for(le=O.child;le;){if(le===k){W=!0,k=O,I=T;break}if(le===I){W=!0,I=O,k=T;break}le=le.sibling}if(!W)throw Error(i(189))}}if(k.alternate!==I)throw Error(i(190))}if(k.tag!==3)throw Error(i(188));return k.stateNode.current===k?h:g}function L(h){return h=P(h),h!==null?j(h):null}function j(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=j(h);if(g!==null)return g;h=h.sibling}return null}function B(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var g=B(h);if(g!==null)return g}h=h.sibling}return null}var K=Array.isArray,X=t.getPublicInstance,Z=t.getRootHostContext,H=t.getChildHostContext,F=t.prepareForCommit,Y=t.resetAfterCommit,Q=t.createInstance,ne=t.appendInitialChild,se=t.finalizeInitialChildren,pe=t.prepareUpdate,de=t.shouldSetTextContent,ie=t.createTextInstance,xe=t.scheduleTimeout,q=t.cancelTimeout,oe=t.noTimeout,he=t.isPrimaryRenderer,Ee=t.supportsMutation,Ie=t.supportsPersistence,_e=t.supportsHydration,Fe=t.getInstanceFromNode,Xe=t.preparePortalMount,Oe=t.getCurrentEventPriority,lt=t.detachDeletedInstance,Je=t.supportsMicrotasks,nt=t.scheduleMicrotask,et=t.supportsTestSelectors,sn=t.findFiberRoot,Vt=t.getBoundingRect,Qt=t.getTextContent,Zt=t.isHiddenSubtree,Ot=t.matchAccessibilityRole,Et=t.setFocusIfFocusable,jn=t.setupIntersectionObserver,Yn=t.appendChild,ja=t.appendChildToContainer,Rn=t.commitTextUpdate,Za=t.commitMount,wo=t.commitUpdate,vi=t.insertBefore,fn=t.insertInContainerBefore,Ja=t.removeChild,xi=t.removeChildFromContainer,wi=t.resetTextContent,_s=t.hideInstance,ma=t.hideTextInstance,Il=t.unhideInstance,Sd=t.unhideTextInstance,Yo=t.clearContainer,Ut=t.cloneInstance,ue=t.createContainerChildSet,ge=t.appendChildToContainerChildSet,ke=t.finalizeContainerChildren,Me=t.replaceContainerChildren,Ge=t.cloneHiddenInstance,bt=t.cloneHiddenTextInstance,ut=t.canHydrateInstance,ot=t.canHydrateTextInstance,tt=t.canHydrateSuspenseInstance,Mt=t.isSuspenseInstancePending,An=t.isSuspenseInstanceFallback,xt=t.getSuspenseInstanceFallbackErrorDetails,cn=t.registerSuspenseInstanceRetry,gn=t.getNextHydratableSibling,$r=t.getFirstHydratableChild,ar=t.getFirstHydratableChildWithinContainer,fr=t.getFirstHydratableChildWithinSuspenseInstance,Qo=t.hydrateInstance,zi=t.hydrateTextInstance,ya=t.hydrateSuspenseInstance,ko=t.getNextHydratableInstanceAfterSuspenseInstance,Hu=t.commitHydratedContainer,qu=t.commitHydratedSuspenseInstance,Tl=t.clearSuspenseBoundary,Zo=t.clearSuspenseBoundaryFromContainer,So=t.shouldDeleteUnhydratedTailInstances,nn=t.didNotMatchHydratedContainerTextInstance,dn=t.didNotMatchHydratedTextInstance,wr;function Dt(h){if(wr===void 0)try{throw Error()}catch(k){var g=k.stack.trim().match(/\n( *(at )?)/);wr=g&&g[1]||""}return`
`+wr+h}var Nl=!1;function $h(h,g){if(!h||Nl)return"";Nl=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Re){var I=Re}Reflect.construct(h,[],g)}else{try{g.call()}catch(Re){I=Re}h.call(g.prototype)}else{try{throw Error()}catch(Re){I=Re}h()}}catch(Re){if(Re&&I&&typeof Re.stack=="string"){for(var T=Re.stack.split(`
`),O=I.stack.split(`
`),W=T.length-1,le=O.length-1;1<=W&&0<=le&&T[W]!==O[le];)le--;for(;1<=W&&0<=le;W--,le--)if(T[W]!==O[le]){if(W!==1||le!==1)do if(W--,le--,0>le||T[W]!==O[le]){var ye=`
`+T[W].replace(" at new "," at ");return h.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",h.displayName)),ye}while(1<=W&&0<=le);break}}}finally{Nl=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?Dt(h):""}var Q2=Object.prototype.hasOwnProperty,Ku=[],_l=-1;function ji(h){return{current:h}}function kn(h){0>_l||(h.current=Ku[_l],Ku[_l]=null,_l--)}function mn(h,g){_l++,Ku[_l]=h.current,h.current=g}var Vi={},Ur=ji(Vi),ba=ji(!1),Rs=Vi;function Rl(h,g){var k=h.type.contextTypes;if(!k)return Vi;var I=h.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===g)return I.__reactInternalMemoizedMaskedChildContext;var T={},O;for(O in k)T[O]=g[O];return I&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=T),T}function va(h){return h=h.childContextTypes,h!=null}function Cd(){kn(ba),kn(Ur)}function R0(h,g,k){if(Ur.current!==Vi)throw Error(i(168));mn(Ur,g),mn(ba,k)}function Vn(h,g,k){var I=h.stateNode;if(g=g.childContextTypes,typeof I.getChildContext!="function")return k;I=I.getChildContext();for(var T in I)if(!(T in g))throw Error(i(108,_(h)||"Unknown",T));return a({},k,I)}function Jo(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Vi,Rs=Ur.current,mn(Ur,h),mn(ba,ba.current),!0}function Xu(h,g,k){var I=h.stateNode;if(!I)throw Error(i(169));k?(h=Vn(h,g,Rs),I.__reactInternalMemoizedMergedChildContext=h,kn(ba),kn(Ur),mn(Ur,h)):kn(ba),mn(ba,k)}var ki=Math.clz32?Math.clz32:Z2,$0=Math.log,Oh=Math.LN2;function Z2(h){return h>>>=0,h===0?32:31-($0(h)/Oh|0)|0}var Ed=64,$s=4194304;function Yu(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Os(h,g){var k=h.pendingLanes;if(k===0)return 0;var I=0,T=h.suspendedLanes,O=h.pingedLanes,W=k&268435455;if(W!==0){var le=W&~T;le!==0?I=Yu(le):(O&=W,O!==0&&(I=Yu(O)))}else W=k&~T,W!==0?I=Yu(W):O!==0&&(I=Yu(O));if(I===0)return 0;if(g!==0&&g!==I&&!(g&T)&&(T=I&-I,O=g&-g,T>=O||T===16&&(O&4194240)!==0))return g;if(I&4&&(I|=k&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=I;0<g;)k=31-ki(g),T=1<<k,I|=h[k],g&=~T;return I}function D(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(h,g){for(var k=h.suspendedLanes,I=h.pingedLanes,T=h.expirationTimes,O=h.pendingLanes;0<O;){var W=31-ki(O),le=1<<W,ye=T[W];ye===-1?(!(le&k)||le&I)&&(T[W]=D(le,g)):ye<=g&&(h.expiredLanes|=le),O&=~le}}function J(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function ae(){var h=Ed;return Ed<<=1,!(Ed&4194240)&&(Ed=64),h}function ve(h){for(var g=[],k=0;31>k;k++)g.push(h);return g}function Ce(h,g,k){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-ki(g),h[g]=k}function Ae(h,g){var k=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var I=h.eventTimes;for(h=h.expirationTimes;0<k;){var T=31-ki(k),O=1<<T;g[T]=0,I[T]=-1,h[T]=-1,k&=~O}}function $e(h,g){var k=h.entangledLanes|=g;for(h=h.entanglements;k;){var I=31-ki(k),T=1<<I;T&g|h[I]&g&&(h[I]|=g),k&=~T}}var Ne=0;function je(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var gt=r.unstable_scheduleCallback,rt=r.unstable_cancelCallback,$t=r.unstable_shouldYield,wt=r.unstable_requestPaint,Ke=r.unstable_now,ct=r.unstable_ImmediatePriority,pt=r.unstable_UserBlockingPriority,at=r.unstable_NormalPriority,kt=r.unstable_IdlePriority,st=null,vt=null;function ir(h){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(st,h,void 0,(h.current.flags&128)===128)}catch{}}function ei(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Wt=typeof Object.is=="function"?Object.is:ei,Un=null,Dn=!1,xa=!1;function Va(h){Un===null?Un=[h]:Un.push(h)}function Co(h){Dn=!0,Va(h)}function kr(){if(!xa&&Un!==null){xa=!0;var h=0,g=Ne;try{var k=Un;for(Ne=1;h<k.length;h++){var I=k[h];do I=I(!0);while(I!==null)}Un=null,Dn=!1}catch(T){throw Un!==null&&(Un=Un.slice(h+1)),gt(ct,kr),T}finally{Ne=g,xa=!1}}return null}var ht=[],Rt=0,Sr=null,Cr=0,pn=[],$n=0,ta=null,Eo=1,na="";function Ms(h,g){ht[Rt++]=Cr,ht[Rt++]=Sr,Sr=h,Cr=g}function Mh(h,g,k){pn[$n++]=Eo,pn[$n++]=na,pn[$n++]=ta,ta=h;var I=Eo;h=na;var T=32-ki(I)-1;I&=~(1<<T),k+=1;var O=32-ki(g)+T;if(30<O){var W=T-T%5;O=(I&(1<<W)-1).toString(32),I>>=W,T-=W,Eo=1<<32-ki(g)+T|k<<T|I,na=O+h}else Eo=1<<O|k<<T|I,na=h}function Ua(h){h.return!==null&&(Ms(h,1),Mh(h,1,0))}function Ps(h){for(;h===Sr;)Sr=ht[--Rt],ht[Rt]=null,Cr=ht[--Rt],ht[Rt]=null;for(;h===ta;)ta=pn[--$n],pn[$n]=null,na=pn[--$n],pn[$n]=null,Eo=pn[--$n],pn[$n]=null}var or=null,ra=null,rn=!1,As=!1,Io=null;function Q_(h,g){var k=qi(5,null,null,0);k.elementType="DELETED",k.stateNode=g,k.return=h,g=h.deletions,g===null?(h.deletions=[k],h.flags|=16):g.push(k)}function Z_(h,g){switch(h.tag){case 5:return g=ut(g,h.type,h.pendingProps),g!==null?(h.stateNode=g,or=h,ra=$r(g),!0):!1;case 6:return g=ot(g,h.pendingProps),g!==null?(h.stateNode=g,or=h,ra=null,!0):!1;case 13:if(g=tt(g),g!==null){var k=ta!==null?{id:Eo,overflow:na}:null;return h.memoizedState={dehydrated:g,treeContext:k,retryLane:1073741824},k=qi(18,null,null,0),k.stateNode=g,k.return=h,h.child=k,or=h,ra=null,!0}return!1;default:return!1}}function J2(h){return(h.mode&1)!==0&&(h.flags&128)===0}function ek(h){if(rn){var g=ra;if(g){var k=g;if(!Z_(h,g)){if(J2(h))throw Error(i(418));g=gn(k);var I=or;g&&Z_(h,g)?Q_(I,k):(h.flags=h.flags&-4097|2,rn=!1,or=h)}}else{if(J2(h))throw Error(i(418));h.flags=h.flags&-4097|2,rn=!1,or=h}}}function J_(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;or=h}function O0(h){if(!_e||h!==or)return!1;if(!rn)return J_(h),rn=!0,!1;if(h.tag!==3&&(h.tag!==5||So(h.type)&&!de(h.type,h.memoizedProps))){var g=ra;if(g){if(J2(h))throw e5(),Error(i(418));for(;g;)Q_(h,g),g=gn(g)}}if(J_(h),h.tag===13){if(!_e)throw Error(i(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));ra=ko(h)}else ra=or?gn(h.stateNode):null;return!0}function e5(){for(var h=ra;h;)h=gn(h)}function Id(){_e&&(ra=or=null,As=rn=!1)}function tk(h){Io===null?Io=[h]:Io.push(h)}var aU=o.ReactCurrentBatchConfig;function M0(h,g){if(Wt(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var k=Object.keys(h),I=Object.keys(g);if(k.length!==I.length)return!1;for(I=0;I<k.length;I++){var T=k[I];if(!Q2.call(g,T)||!Wt(h[T],g[T]))return!1}return!0}function iU(h){switch(h.tag){case 5:return Dt(h.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 2:case 15:return h=$h(h.type,!1),h;case 11:return h=$h(h.type.render,!1),h;case 1:return h=$h(h.type,!0),h;default:return""}}function To(h,g){if(h&&h.defaultProps){g=a({},g),h=h.defaultProps;for(var k in h)g[k]===void 0&&(g[k]=h[k]);return g}return g}var P0=ji(null),A0=null,Td=null,nk=null;function rk(){nk=Td=A0=null}function t5(h,g,k){he?(mn(P0,g._currentValue),g._currentValue=k):(mn(P0,g._currentValue2),g._currentValue2=k)}function ak(h){var g=P0.current;kn(P0),he?h._currentValue=g:h._currentValue2=g}function ik(h,g,k){for(;h!==null;){var I=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),h===k)break;h=h.return}}function Nd(h,g){A0=h,nk=Td=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&g&&(ti=!0),h.firstContext=null)}function Ui(h){var g=he?h._currentValue:h._currentValue2;if(nk!==h)if(h={context:h,memoizedValue:g,next:null},Td===null){if(A0===null)throw Error(i(308));Td=h,A0.dependencies={lanes:0,firstContext:h}}else Td=Td.next=h;return g}var Qu=null;function ok(h){Qu===null?Qu=[h]:Qu.push(h)}function n5(h,g,k,I){var T=g.interleaved;return T===null?(k.next=k,ok(g)):(k.next=T.next,T.next=k),g.interleaved=k,es(h,I)}function es(h,g){h.lanes|=g;var k=h.alternate;for(k!==null&&(k.lanes|=g),k=h,h=h.return;h!==null;)h.childLanes|=g,k=h.alternate,k!==null&&(k.childLanes|=g),k=h,h=h.return;return k.tag===3?k.stateNode:null}var $l=!1;function sk(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r5(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Ds(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function Ol(h,g,k){var I=h.updateQueue;if(I===null)return null;if(I=I.shared,zt&2){var T=I.pending;return T===null?g.next=g:(g.next=T.next,T.next=g),I.pending=g,es(h,k)}return T=I.interleaved,T===null?(g.next=g,ok(I)):(g.next=T.next,T.next=g),I.interleaved=g,es(h,k)}function D0(h,g,k){if(g=g.updateQueue,g!==null&&(g=g.shared,(k&4194240)!==0)){var I=g.lanes;I&=h.pendingLanes,k|=I,g.lanes=k,$e(h,k)}}function a5(h,g){var k=h.updateQueue,I=h.alternate;if(I!==null&&(I=I.updateQueue,k===I)){var T=null,O=null;if(k=k.firstBaseUpdate,k!==null){do{var W={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};O===null?T=O=W:O=O.next=W,k=k.next}while(k!==null);O===null?T=O=g:O=O.next=g}else T=O=g;k={baseState:I.baseState,firstBaseUpdate:T,lastBaseUpdate:O,shared:I.shared,effects:I.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=g:h.next=g,k.lastBaseUpdate=g}function L0(h,g,k,I){var T=h.updateQueue;$l=!1;var O=T.firstBaseUpdate,W=T.lastBaseUpdate,le=T.shared.pending;if(le!==null){T.shared.pending=null;var ye=le,Re=ye.next;ye.next=null,W===null?O=Re:W.next=Re,W=ye;var qe=h.alternate;qe!==null&&(qe=qe.updateQueue,le=qe.lastBaseUpdate,le!==W&&(le===null?qe.firstBaseUpdate=Re:le.next=Re,qe.lastBaseUpdate=ye))}if(O!==null){var It=T.baseState;W=0,qe=Re=ye=null,le=O;do{var Be=le.lane,Ln=le.eventTime;if((I&Be)===Be){qe!==null&&(qe=qe.next={eventTime:Ln,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var Sn=h,ai=le;switch(Be=g,Ln=k,ai.tag){case 1:if(Sn=ai.payload,typeof Sn=="function"){It=Sn.call(Ln,It,Be);break e}It=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=ai.payload,Be=typeof Sn=="function"?Sn.call(Ln,It,Be):Sn,Be==null)break e;It=a({},It,Be);break e;case 2:$l=!0}}le.callback!==null&&le.lane!==0&&(h.flags|=64,Be=T.effects,Be===null?T.effects=[le]:Be.push(le))}else Ln={eventTime:Ln,lane:Be,tag:le.tag,payload:le.payload,callback:le.callback,next:null},qe===null?(Re=qe=Ln,ye=It):qe=qe.next=Ln,W|=Be;if(le=le.next,le===null){if(le=T.shared.pending,le===null)break;Be=le,le=Be.next,Be.next=null,T.lastBaseUpdate=Be,T.shared.pending=null}}while(!0);if(qe===null&&(ye=It),T.baseState=ye,T.firstBaseUpdate=Re,T.lastBaseUpdate=qe,g=T.shared.interleaved,g!==null){T=g;do W|=T.lane,T=T.next;while(T!==g)}else O===null&&(T.shared.lanes=0);Ju|=W,h.lanes=W,h.memoizedState=It}}function i5(h,g,k){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var I=h[g],T=I.callback;if(T!==null){if(I.callback=null,I=k,typeof T!="function")throw Error(i(191,T));T.call(I)}}}var o5=new n.Component().refs;function lk(h,g,k,I){g=h.memoizedState,k=k(I,g),k=k==null?g:a({},g,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var F0={isMounted:function(h){return(h=h._reactInternals)?N(h)===h:!1},enqueueSetState:function(h,g,k){h=h._reactInternals;var I=Ca(),T=Al(h),O=Ds(I,T);O.payload=g,k!=null&&(O.callback=k),g=Ol(h,O,T),g!==null&&(Hi(g,h,T,I),D0(g,h,T))},enqueueReplaceState:function(h,g,k){h=h._reactInternals;var I=Ca(),T=Al(h),O=Ds(I,T);O.tag=1,O.payload=g,k!=null&&(O.callback=k),g=Ol(h,O,T),g!==null&&(Hi(g,h,T,I),D0(g,h,T))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var k=Ca(),I=Al(h),T=Ds(k,I);T.tag=2,g!=null&&(T.callback=g),g=Ol(h,T,I),g!==null&&(Hi(g,h,I,k),D0(g,h,I))}};function s5(h,g,k,I,T,O,W){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(I,O,W):g.prototype&&g.prototype.isPureReactComponent?!M0(k,I)||!M0(T,O):!0}function l5(h,g,k){var I=!1,T=Vi,O=g.contextType;return typeof O=="object"&&O!==null?O=Ui(O):(T=va(g)?Rs:Ur.current,I=g.contextTypes,O=(I=I!=null)?Rl(h,T):Vi),g=new g(k,O),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=F0,h.stateNode=g,g._reactInternals=h,I&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=T,h.__reactInternalMemoizedMaskedChildContext=O),g}function u5(h,g,k,I){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(k,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(k,I),g.state!==h&&F0.enqueueReplaceState(g,g.state,null)}function uk(h,g,k,I){var T=h.stateNode;T.props=k,T.state=h.memoizedState,T.refs=o5,sk(h);var O=g.contextType;typeof O=="object"&&O!==null?T.context=Ui(O):(O=va(g)?Rs:Ur.current,T.context=Rl(h,O)),T.state=h.memoizedState,O=g.getDerivedStateFromProps,typeof O=="function"&&(lk(h,g,O,k),T.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(g=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),g!==T.state&&F0.enqueueReplaceState(T,T.state,null),L0(h,k,T,I),T.state=h.memoizedState),typeof T.componentDidMount=="function"&&(h.flags|=4194308)}function Ph(h,g,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(i(309));var I=k.stateNode}if(!I)throw Error(i(147,h));var T=I,O=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===O?g.ref:(g=function(W){var le=T.refs;le===o5&&(le=T.refs={}),W===null?delete le[O]:le[O]=W},g._stringRef=O,g)}if(typeof h!="string")throw Error(i(284));if(!k._owner)throw Error(i(290,h))}return h}function B0(h,g){throw h=Object.prototype.toString.call(g),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function c5(h){var g=h._init;return g(h._payload)}function d5(h){function g(me,ce){if(h){var we=me.deletions;we===null?(me.deletions=[ce],me.flags|=16):we.push(ce)}}function k(me,ce){if(!h)return null;for(;ce!==null;)g(me,ce),ce=ce.sibling;return null}function I(me,ce){for(me=new Map;ce!==null;)ce.key!==null?me.set(ce.key,ce):me.set(ce.index,ce),ce=ce.sibling;return me}function T(me,ce){return me=Ll(me,ce),me.index=0,me.sibling=null,me}function O(me,ce,we){return me.index=we,h?(we=me.alternate,we!==null?(we=we.index,we<ce?(me.flags|=2,ce):we):(me.flags|=2,ce)):(me.flags|=1048576,ce)}function W(me){return h&&me.alternate===null&&(me.flags|=2),me}function le(me,ce,we,ze){return ce===null||ce.tag!==6?(ce=Xk(we,me.mode,ze),ce.return=me,ce):(ce=T(ce,we),ce.return=me,ce)}function ye(me,ce,we,ze){var dt=we.type;return dt===u?qe(me,ce,we.props.children,ze,we.key):ce!==null&&(ce.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&c5(dt)===ce.type)?(ze=T(ce,we.props),ze.ref=Ph(me,ce,we),ze.return=me,ze):(ze=d1(we.type,we.key,we.props,null,me.mode,ze),ze.ref=Ph(me,ce,we),ze.return=me,ze)}function Re(me,ce,we,ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==we.containerInfo||ce.stateNode.implementation!==we.implementation?(ce=Yk(we,me.mode,ze),ce.return=me,ce):(ce=T(ce,we.children||[]),ce.return=me,ce)}function qe(me,ce,we,ze,dt){return ce===null||ce.tag!==7?(ce=rc(we,me.mode,ze,dt),ce.return=me,ce):(ce=T(ce,we),ce.return=me,ce)}function It(me,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Xk(""+ce,me.mode,we),ce.return=me,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case s:return we=d1(ce.type,ce.key,ce.props,null,me.mode,we),we.ref=Ph(me,null,ce),we.return=me,we;case l:return ce=Yk(ce,me.mode,we),ce.return=me,ce;case x:var ze=ce._init;return It(me,ze(ce._payload),we)}if(K(ce)||C(ce))return ce=rc(ce,me.mode,we,null),ce.return=me,ce;B0(me,ce)}return null}function Be(me,ce,we,ze){var dt=ce!==null?ce.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return dt!==null?null:le(me,ce,""+we,ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case s:return we.key===dt?ye(me,ce,we,ze):null;case l:return we.key===dt?Re(me,ce,we,ze):null;case x:return dt=we._init,Be(me,ce,dt(we._payload),ze)}if(K(we)||C(we))return dt!==null?null:qe(me,ce,we,ze,null);B0(me,we)}return null}function Ln(me,ce,we,ze,dt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return me=me.get(we)||null,le(ce,me,""+ze,dt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case s:return me=me.get(ze.key===null?we:ze.key)||null,ye(ce,me,ze,dt);case l:return me=me.get(ze.key===null?we:ze.key)||null,Re(ce,me,ze,dt);case x:var Pt=ze._init;return Ln(me,ce,we,Pt(ze._payload),dt)}if(K(ze)||C(ze))return me=me.get(we)||null,qe(ce,me,ze,dt,null);B0(ce,ze)}return null}function Sn(me,ce,we,ze){for(var dt=null,Pt=null,Tt=ce,an=ce=0,Hr=null;Tt!==null&&an<we.length;an++){Tt.index>an?(Hr=Tt,Tt=null):Hr=Tt.sibling;var on=Be(me,Tt,we[an],ze);if(on===null){Tt===null&&(Tt=Hr);break}h&&Tt&&on.alternate===null&&g(me,Tt),ce=O(on,ce,an),Pt===null?dt=on:Pt.sibling=on,Pt=on,Tt=Hr}if(an===we.length)return k(me,Tt),rn&&Ms(me,an),dt;if(Tt===null){for(;an<we.length;an++)Tt=It(me,we[an],ze),Tt!==null&&(ce=O(Tt,ce,an),Pt===null?dt=Tt:Pt.sibling=Tt,Pt=Tt);return rn&&Ms(me,an),dt}for(Tt=I(me,Tt);an<we.length;an++)Hr=Ln(Tt,me,an,we[an],ze),Hr!==null&&(h&&Hr.alternate!==null&&Tt.delete(Hr.key===null?an:Hr.key),ce=O(Hr,ce,an),Pt===null?dt=Hr:Pt.sibling=Hr,Pt=Hr);return h&&Tt.forEach(function(Fl){return g(me,Fl)}),rn&&Ms(me,an),dt}function ai(me,ce,we,ze){var dt=C(we);if(typeof dt!="function")throw Error(i(150));if(we=dt.call(we),we==null)throw Error(i(151));for(var Pt=dt=null,Tt=ce,an=ce=0,Hr=null,on=we.next();Tt!==null&&!on.done;an++,on=we.next()){Tt.index>an?(Hr=Tt,Tt=null):Hr=Tt.sibling;var Fl=Be(me,Tt,on.value,ze);if(Fl===null){Tt===null&&(Tt=Hr);break}h&&Tt&&Fl.alternate===null&&g(me,Tt),ce=O(Fl,ce,an),Pt===null?dt=Fl:Pt.sibling=Fl,Pt=Fl,Tt=Hr}if(on.done)return k(me,Tt),rn&&Ms(me,an),dt;if(Tt===null){for(;!on.done;an++,on=we.next())on=It(me,on.value,ze),on!==null&&(ce=O(on,ce,an),Pt===null?dt=on:Pt.sibling=on,Pt=on);return rn&&Ms(me,an),dt}for(Tt=I(me,Tt);!on.done;an++,on=we.next())on=Ln(Tt,me,an,on.value,ze),on!==null&&(h&&on.alternate!==null&&Tt.delete(on.key===null?an:on.key),ce=O(on,ce,an),Pt===null?dt=on:Pt.sibling=on,Pt=on);return h&&Tt.forEach(function(AU){return g(me,AU)}),rn&&Ms(me,an),dt}function Bs(me,ce,we,ze){if(typeof we=="object"&&we!==null&&we.type===u&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case s:e:{for(var dt=we.key,Pt=ce;Pt!==null;){if(Pt.key===dt){if(dt=we.type,dt===u){if(Pt.tag===7){k(me,Pt.sibling),ce=T(Pt,we.props.children),ce.return=me,me=ce;break e}}else if(Pt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&c5(dt)===Pt.type){k(me,Pt.sibling),ce=T(Pt,we.props),ce.ref=Ph(me,Pt,we),ce.return=me,me=ce;break e}k(me,Pt);break}else g(me,Pt);Pt=Pt.sibling}we.type===u?(ce=rc(we.props.children,me.mode,ze,we.key),ce.return=me,me=ce):(ze=d1(we.type,we.key,we.props,null,me.mode,ze),ze.ref=Ph(me,ce,we),ze.return=me,me=ze)}return W(me);case l:e:{for(Pt=we.key;ce!==null;){if(ce.key===Pt)if(ce.tag===4&&ce.stateNode.containerInfo===we.containerInfo&&ce.stateNode.implementation===we.implementation){k(me,ce.sibling),ce=T(ce,we.children||[]),ce.return=me,me=ce;break e}else{k(me,ce);break}else g(me,ce);ce=ce.sibling}ce=Yk(we,me.mode,ze),ce.return=me,me=ce}return W(me);case x:return Pt=we._init,Bs(me,ce,Pt(we._payload),ze)}if(K(we))return Sn(me,ce,we,ze);if(C(we))return ai(me,ce,we,ze);B0(me,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ce!==null&&ce.tag===6?(k(me,ce.sibling),ce=T(ce,we),ce.return=me,me=ce):(k(me,ce),ce=Xk(we,me.mode,ze),ce.return=me,me=ce),W(me)):k(me,ce)}return Bs}var _d=d5(!0),p5=d5(!1),Ah={},Wi=ji(Ah),Dh=ji(Ah),Rd=ji(Ah);function ts(h){if(h===Ah)throw Error(i(174));return h}function ck(h,g){mn(Rd,g),mn(Dh,h),mn(Wi,Ah),h=Z(g),kn(Wi),mn(Wi,h)}function $d(){kn(Wi),kn(Dh),kn(Rd)}function h5(h){var g=ts(Rd.current),k=ts(Wi.current);g=H(k,h.type,g),k!==g&&(mn(Dh,h),mn(Wi,g))}function dk(h){Dh.current===h&&(kn(Wi),kn(Dh))}var Qn=ji(0);function z0(h){for(var g=h;g!==null;){if(g.tag===13){var k=g.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||Mt(k)||An(k)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var pk=[];function hk(){for(var h=0;h<pk.length;h++){var g=pk[h];he?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}pk.length=0}var j0=o.ReactCurrentDispatcher,fk=o.ReactCurrentBatchConfig,Zu=0,Zn=null,Or=null,Wr=null,V0=!1,Lh=!1,Fh=0,oU=0;function wa(){throw Error(i(321))}function gk(h,g){if(g===null)return!1;for(var k=0;k<g.length&&k<h.length;k++)if(!Wt(h[k],g[k]))return!1;return!0}function mk(h,g,k,I,T,O){if(Zu=O,Zn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,j0.current=h===null||h.memoizedState===null?cU:dU,h=k(I,T),Lh){O=0;do{if(Lh=!1,Fh=0,25<=O)throw Error(i(301));O+=1,Wr=Or=null,g.updateQueue=null,j0.current=pU,h=k(I,T)}while(Lh)}if(j0.current=G0,g=Or!==null&&Or.next!==null,Zu=0,Wr=Or=Zn=null,V0=!1,g)throw Error(i(300));return h}function yk(){var h=Fh!==0;return Fh=0,h}function ns(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?Zn.memoizedState=Wr=h:Wr=Wr.next=h,Wr}function Gi(){if(Or===null){var h=Zn.alternate;h=h!==null?h.memoizedState:null}else h=Or.next;var g=Wr===null?Zn.memoizedState:Wr.next;if(g!==null)Wr=g,Or=h;else{if(h===null)throw Error(i(310));Or=h,h={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Wr===null?Zn.memoizedState=Wr=h:Wr=Wr.next=h}return Wr}function Bh(h,g){return typeof g=="function"?g(h):g}function bk(h){var g=Gi(),k=g.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var I=Or,T=I.baseQueue,O=k.pending;if(O!==null){if(T!==null){var W=T.next;T.next=O.next,O.next=W}I.baseQueue=T=O,k.pending=null}if(T!==null){O=T.next,I=I.baseState;var le=W=null,ye=null,Re=O;do{var qe=Re.lane;if((Zu&qe)===qe)ye!==null&&(ye=ye.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),I=Re.hasEagerState?Re.eagerState:h(I,Re.action);else{var It={lane:qe,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ye===null?(le=ye=It,W=I):ye=ye.next=It,Zn.lanes|=qe,Ju|=qe}Re=Re.next}while(Re!==null&&Re!==O);ye===null?W=I:ye.next=le,Wt(I,g.memoizedState)||(ti=!0),g.memoizedState=I,g.baseState=W,g.baseQueue=ye,k.lastRenderedState=I}if(h=k.interleaved,h!==null){T=h;do O=T.lane,Zn.lanes|=O,Ju|=O,T=T.next;while(T!==h)}else T===null&&(k.lanes=0);return[g.memoizedState,k.dispatch]}function vk(h){var g=Gi(),k=g.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var I=k.dispatch,T=k.pending,O=g.memoizedState;if(T!==null){k.pending=null;var W=T=T.next;do O=h(O,W.action),W=W.next;while(W!==T);Wt(O,g.memoizedState)||(ti=!0),g.memoizedState=O,g.baseQueue===null&&(g.baseState=O),k.lastRenderedState=O}return[O,I]}function f5(){}function g5(h,g){var k=Zn,I=Gi(),T=g(),O=!Wt(I.memoizedState,T);if(O&&(I.memoizedState=T,ti=!0),I=I.queue,xk(b5.bind(null,k,I,h),[h]),I.getSnapshot!==g||O||Wr!==null&&Wr.memoizedState.tag&1){if(k.flags|=2048,zh(9,y5.bind(null,k,I,T,g),void 0,null),Gr===null)throw Error(i(349));Zu&30||m5(k,g,T)}return T}function m5(h,g,k){h.flags|=16384,h={getSnapshot:g,value:k},g=Zn.updateQueue,g===null?(g={lastEffect:null,stores:null},Zn.updateQueue=g,g.stores=[h]):(k=g.stores,k===null?g.stores=[h]:k.push(h))}function y5(h,g,k,I){g.value=k,g.getSnapshot=I,v5(g)&&x5(h)}function b5(h,g,k){return k(function(){v5(g)&&x5(h)})}function v5(h){var g=h.getSnapshot;h=h.value;try{var k=g();return!Wt(h,k)}catch{return!0}}function x5(h){var g=es(h,1);g!==null&&Hi(g,h,1,-1)}function w5(h){var g=ns();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:h},g.queue=h,h=h.dispatch=uU.bind(null,Zn,h),[g.memoizedState,h]}function zh(h,g,k,I){return h={tag:h,create:g,destroy:k,deps:I,next:null},g=Zn.updateQueue,g===null?(g={lastEffect:null,stores:null},Zn.updateQueue=g,g.lastEffect=h.next=h):(k=g.lastEffect,k===null?g.lastEffect=h.next=h:(I=k.next,k.next=h,h.next=I,g.lastEffect=h)),h}function k5(){return Gi().memoizedState}function U0(h,g,k,I){var T=ns();Zn.flags|=h,T.memoizedState=zh(1|g,k,void 0,I===void 0?null:I)}function W0(h,g,k,I){var T=Gi();I=I===void 0?null:I;var O=void 0;if(Or!==null){var W=Or.memoizedState;if(O=W.destroy,I!==null&&gk(I,W.deps)){T.memoizedState=zh(g,k,O,I);return}}Zn.flags|=h,T.memoizedState=zh(1|g,k,O,I)}function S5(h,g){return U0(8390656,8,h,g)}function xk(h,g){return W0(2048,8,h,g)}function C5(h,g){return W0(4,2,h,g)}function E5(h,g){return W0(4,4,h,g)}function I5(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function T5(h,g,k){return k=k!=null?k.concat([h]):null,W0(4,4,I5.bind(null,g,h),k)}function wk(){}function N5(h,g){var k=Gi();g=g===void 0?null:g;var I=k.memoizedState;return I!==null&&g!==null&&gk(g,I[1])?I[0]:(k.memoizedState=[h,g],h)}function _5(h,g){var k=Gi();g=g===void 0?null:g;var I=k.memoizedState;return I!==null&&g!==null&&gk(g,I[1])?I[0]:(h=h(),k.memoizedState=[h,g],h)}function R5(h,g,k){return Zu&21?(Wt(k,g)||(k=ae(),Zn.lanes|=k,Ju|=k,h.baseState=!0),g):(h.baseState&&(h.baseState=!1,ti=!0),h.memoizedState=k)}function sU(h,g){var k=Ne;Ne=k!==0&&4>k?k:4,h(!0);var I=fk.transition;fk.transition={};try{h(!1),g()}finally{Ne=k,fk.transition=I}}function $5(){return Gi().memoizedState}function lU(h,g,k){var I=Al(h);if(k={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null},O5(h))M5(g,k);else if(k=n5(h,g,k,I),k!==null){var T=Ca();Hi(k,h,I,T),P5(k,g,I)}}function uU(h,g,k){var I=Al(h),T={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null};if(O5(h))M5(g,T);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=g.lastRenderedReducer,O!==null))try{var W=g.lastRenderedState,le=O(W,k);if(T.hasEagerState=!0,T.eagerState=le,Wt(le,W)){var ye=g.interleaved;ye===null?(T.next=T,ok(g)):(T.next=ye.next,ye.next=T),g.interleaved=T;return}}catch{}finally{}k=n5(h,g,T,I),k!==null&&(T=Ca(),Hi(k,h,I,T),P5(k,g,I))}}function O5(h){var g=h.alternate;return h===Zn||g!==null&&g===Zn}function M5(h,g){Lh=V0=!0;var k=h.pending;k===null?g.next=g:(g.next=k.next,k.next=g),h.pending=g}function P5(h,g,k){if(k&4194240){var I=g.lanes;I&=h.pendingLanes,k|=I,g.lanes=k,$e(h,k)}}var G0={readContext:Ui,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},cU={readContext:Ui,useCallback:function(h,g){return ns().memoizedState=[h,g===void 0?null:g],h},useContext:Ui,useEffect:S5,useImperativeHandle:function(h,g,k){return k=k!=null?k.concat([h]):null,U0(4194308,4,I5.bind(null,g,h),k)},useLayoutEffect:function(h,g){return U0(4194308,4,h,g)},useInsertionEffect:function(h,g){return U0(4,2,h,g)},useMemo:function(h,g){var k=ns();return g=g===void 0?null:g,h=h(),k.memoizedState=[h,g],h},useReducer:function(h,g,k){var I=ns();return g=k!==void 0?k(g):g,I.memoizedState=I.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},I.queue=h,h=h.dispatch=lU.bind(null,Zn,h),[I.memoizedState,h]},useRef:function(h){var g=ns();return h={current:h},g.memoizedState=h},useState:w5,useDebugValue:wk,useDeferredValue:function(h){return ns().memoizedState=h},useTransition:function(){var h=w5(!1),g=h[0];return h=sU.bind(null,h[1]),ns().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,k){var I=Zn,T=ns();if(rn){if(k===void 0)throw Error(i(407));k=k()}else{if(k=g(),Gr===null)throw Error(i(349));Zu&30||m5(I,g,k)}T.memoizedState=k;var O={value:k,getSnapshot:g};return T.queue=O,S5(b5.bind(null,I,O,h),[h]),I.flags|=2048,zh(9,y5.bind(null,I,O,k,g),void 0,null),k},useId:function(){var h=ns(),g=Gr.identifierPrefix;if(rn){var k=na,I=Eo;k=(I&~(1<<32-ki(I)-1)).toString(32)+k,g=":"+g+"R"+k,k=Fh++,0<k&&(g+="H"+k.toString(32)),g+=":"}else k=oU++,g=":"+g+"r"+k.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},dU={readContext:Ui,useCallback:N5,useContext:Ui,useEffect:xk,useImperativeHandle:T5,useInsertionEffect:C5,useLayoutEffect:E5,useMemo:_5,useReducer:bk,useRef:k5,useState:function(){return bk(Bh)},useDebugValue:wk,useDeferredValue:function(h){var g=Gi();return R5(g,Or.memoizedState,h)},useTransition:function(){var h=bk(Bh)[0],g=Gi().memoizedState;return[h,g]},useMutableSource:f5,useSyncExternalStore:g5,useId:$5,unstable_isNewReconciler:!1},pU={readContext:Ui,useCallback:N5,useContext:Ui,useEffect:xk,useImperativeHandle:T5,useInsertionEffect:C5,useLayoutEffect:E5,useMemo:_5,useReducer:vk,useRef:k5,useState:function(){return vk(Bh)},useDebugValue:wk,useDeferredValue:function(h){var g=Gi();return Or===null?g.memoizedState=h:R5(g,Or.memoizedState,h)},useTransition:function(){var h=vk(Bh)[0],g=Gi().memoizedState;return[h,g]},useMutableSource:f5,useSyncExternalStore:g5,useId:$5,unstable_isNewReconciler:!1};function Od(h,g){try{var k="",I=g;do k+=iU(I),I=I.return;while(I);var T=k}catch(O){T=`
Error generating stack: `+O.message+`
`+O.stack}return{value:h,source:g,stack:T,digest:null}}function kk(h,g,k){return{value:h,source:null,stack:k??null,digest:g??null}}function Sk(h,g){try{console.error(g.value)}catch(k){setTimeout(function(){throw k})}}var hU=typeof WeakMap=="function"?WeakMap:Map;function A5(h,g,k){k=Ds(-1,k),k.tag=3,k.payload={element:null};var I=g.value;return k.callback=function(){i1||(i1=!0,Vk=I),Sk(h,g)},k}function D5(h,g,k){k=Ds(-1,k),k.tag=3;var I=h.type.getDerivedStateFromError;if(typeof I=="function"){var T=g.value;k.payload=function(){return I(T)},k.callback=function(){Sk(h,g)}}var O=h.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(k.callback=function(){Sk(h,g),typeof I!="function"&&(Ml===null?Ml=new Set([this]):Ml.add(this));var W=g.stack;this.componentDidCatch(g.value,{componentStack:W!==null?W:""})}),k}function L5(h,g,k){var I=h.pingCache;if(I===null){I=h.pingCache=new hU;var T=new Set;I.set(g,T)}else T=I.get(g),T===void 0&&(T=new Set,I.set(g,T));T.has(k)||(T.add(k),h=TU.bind(null,h,g,k),g.then(h,h))}function F5(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function B5(h,g,k,I,T){return h.mode&1?(h.flags|=65536,h.lanes=T,h):(h===g?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(g=Ds(-1,1),g.tag=2,Ol(k,g,1))),k.lanes|=1),h)}var fU=o.ReactCurrentOwner,ti=!1;function Wa(h,g,k,I){g.child=h===null?p5(g,null,k,I):_d(g,h.child,k,I)}function z5(h,g,k,I,T){k=k.render;var O=g.ref;return Nd(g,T),I=mk(h,g,k,I,O,T),k=yk(),h!==null&&!ti?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~T,Ls(h,g,T)):(rn&&k&&Ua(g),g.flags|=1,Wa(h,g,I,T),g.child)}function j5(h,g,k,I,T){if(h===null){var O=k.type;return typeof O=="function"&&!Kk(O)&&O.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(g.tag=15,g.type=O,V5(h,g,O,I,T)):(h=d1(k.type,null,I,g,g.mode,T),h.ref=g.ref,h.return=g,g.child=h)}if(O=h.child,!(h.lanes&T)){var W=O.memoizedProps;if(k=k.compare,k=k!==null?k:M0,k(W,I)&&h.ref===g.ref)return Ls(h,g,T)}return g.flags|=1,h=Ll(O,I),h.ref=g.ref,h.return=g,g.child=h}function V5(h,g,k,I,T){if(h!==null){var O=h.memoizedProps;if(M0(O,I)&&h.ref===g.ref)if(ti=!1,g.pendingProps=I=O,(h.lanes&T)!==0)h.flags&131072&&(ti=!0);else return g.lanes=h.lanes,Ls(h,g,T)}return Ck(h,g,k,I,T)}function U5(h,g,k){var I=g.pendingProps,T=I.children,O=h!==null?h.memoizedState:null;if(I.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(Pd,Si),Si|=k;else{if(!(k&1073741824))return h=O!==null?O.baseLanes|k:k,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,mn(Pd,Si),Si|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=O!==null?O.baseLanes:k,mn(Pd,Si),Si|=I}else O!==null?(I=O.baseLanes|k,g.memoizedState=null):I=k,mn(Pd,Si),Si|=I;return Wa(h,g,T,k),g.child}function W5(h,g){var k=g.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(g.flags|=512,g.flags|=2097152)}function Ck(h,g,k,I,T){var O=va(k)?Rs:Ur.current;return O=Rl(g,O),Nd(g,T),k=mk(h,g,k,I,O,T),I=yk(),h!==null&&!ti?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~T,Ls(h,g,T)):(rn&&I&&Ua(g),g.flags|=1,Wa(h,g,k,T),g.child)}function G5(h,g,k,I,T){if(va(k)){var O=!0;Jo(g)}else O=!1;if(Nd(g,T),g.stateNode===null)q0(h,g),l5(g,k,I),uk(g,k,I,T),I=!0;else if(h===null){var W=g.stateNode,le=g.memoizedProps;W.props=le;var ye=W.context,Re=k.contextType;typeof Re=="object"&&Re!==null?Re=Ui(Re):(Re=va(k)?Rs:Ur.current,Re=Rl(g,Re));var qe=k.getDerivedStateFromProps,It=typeof qe=="function"||typeof W.getSnapshotBeforeUpdate=="function";It||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==I||ye!==Re)&&u5(g,W,I,Re),$l=!1;var Be=g.memoizedState;W.state=Be,L0(g,I,W,T),ye=g.memoizedState,le!==I||Be!==ye||ba.current||$l?(typeof qe=="function"&&(lk(g,k,qe,I),ye=g.memoizedState),(le=$l||s5(g,k,le,I,Be,ye,Re))?(It||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(g.flags|=4194308)):(typeof W.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=ye),W.props=I,W.state=ye,W.context=Re,I=le):(typeof W.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{W=g.stateNode,r5(h,g),le=g.memoizedProps,Re=g.type===g.elementType?le:To(g.type,le),W.props=Re,It=g.pendingProps,Be=W.context,ye=k.contextType,typeof ye=="object"&&ye!==null?ye=Ui(ye):(ye=va(k)?Rs:Ur.current,ye=Rl(g,ye));var Ln=k.getDerivedStateFromProps;(qe=typeof Ln=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==It||Be!==ye)&&u5(g,W,I,ye),$l=!1,Be=g.memoizedState,W.state=Be,L0(g,I,W,T);var Sn=g.memoizedState;le!==It||Be!==Sn||ba.current||$l?(typeof Ln=="function"&&(lk(g,k,Ln,I),Sn=g.memoizedState),(Re=$l||s5(g,k,Re,I,Be,Sn,ye)||!1)?(qe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(I,Sn,ye),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(I,Sn,ye)),typeof W.componentDidUpdate=="function"&&(g.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof W.componentDidUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(g.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=Sn),W.props=I,W.state=Sn,W.context=ye,I=Re):(typeof W.componentDidUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(g.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(g.flags|=1024),I=!1)}return Ek(h,g,k,I,O,T)}function Ek(h,g,k,I,T,O){W5(h,g);var W=(g.flags&128)!==0;if(!I&&!W)return T&&Xu(g,k,!1),Ls(h,g,O);I=g.stateNode,fU.current=g;var le=W&&typeof k.getDerivedStateFromError!="function"?null:I.render();return g.flags|=1,h!==null&&W?(g.child=_d(g,h.child,null,O),g.child=_d(g,null,le,O)):Wa(h,g,le,O),g.memoizedState=I.state,T&&Xu(g,k,!0),g.child}function H5(h){var g=h.stateNode;g.pendingContext?R0(h,g.pendingContext,g.pendingContext!==g.context):g.context&&R0(h,g.context,!1),ck(h,g.containerInfo)}function q5(h,g,k,I,T){return Id(),tk(T),g.flags|=256,Wa(h,g,k,I),g.child}var Ik={dehydrated:null,treeContext:null,retryLane:0};function Tk(h){return{baseLanes:h,cachePool:null,transitions:null}}function K5(h,g,k){var I=g.pendingProps,T=Qn.current,O=!1,W=(g.flags&128)!==0,le;if((le=W)||(le=h!==null&&h.memoizedState===null?!1:(T&2)!==0),le?(O=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(T|=1),mn(Qn,T&1),h===null)return ek(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(g.mode&1?An(h)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(W=I.children,h=I.fallback,O?(I=g.mode,O=g.child,W={mode:"hidden",children:W},!(I&1)&&O!==null?(O.childLanes=0,O.pendingProps=W):O=p1(W,I,0,null),h=rc(h,I,k,null),O.return=g,h.return=g,O.sibling=h,g.child=O,g.child.memoizedState=Tk(k),g.memoizedState=Ik,h):Nk(g,W));if(T=h.memoizedState,T!==null&&(le=T.dehydrated,le!==null))return gU(h,g,W,I,le,T,k);if(O){O=I.fallback,W=g.mode,T=h.child,le=T.sibling;var ye={mode:"hidden",children:I.children};return!(W&1)&&g.child!==T?(I=g.child,I.childLanes=0,I.pendingProps=ye,g.deletions=null):(I=Ll(T,ye),I.subtreeFlags=T.subtreeFlags&14680064),le!==null?O=Ll(le,O):(O=rc(O,W,k,null),O.flags|=2),O.return=g,I.return=g,I.sibling=O,g.child=I,I=O,O=g.child,W=h.child.memoizedState,W=W===null?Tk(k):{baseLanes:W.baseLanes|k,cachePool:null,transitions:W.transitions},O.memoizedState=W,O.childLanes=h.childLanes&~k,g.memoizedState=Ik,I}return O=h.child,h=O.sibling,I=Ll(O,{mode:"visible",children:I.children}),!(g.mode&1)&&(I.lanes=k),I.return=g,I.sibling=null,h!==null&&(k=g.deletions,k===null?(g.deletions=[h],g.flags|=16):k.push(h)),g.child=I,g.memoizedState=null,I}function Nk(h,g){return g=p1({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function H0(h,g,k,I){return I!==null&&tk(I),_d(g,h.child,null,k),h=Nk(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function gU(h,g,k,I,T,O,W){if(k)return g.flags&256?(g.flags&=-257,I=kk(Error(i(422))),H0(h,g,W,I)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(O=I.fallback,T=g.mode,I=p1({mode:"visible",children:I.children},T,0,null),O=rc(O,T,W,null),O.flags|=2,I.return=g,O.return=g,I.sibling=O,g.child=I,g.mode&1&&_d(g,h.child,null,W),g.child.memoizedState=Tk(W),g.memoizedState=Ik,O);if(!(g.mode&1))return H0(h,g,W,null);if(An(T))return I=xt(T).digest,O=Error(i(419)),I=kk(O,I,void 0),H0(h,g,W,I);if(k=(W&h.childLanes)!==0,ti||k){if(I=Gr,I!==null){switch(W&-W){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=T&(I.suspendedLanes|W)?0:T,T!==0&&T!==O.retryLane&&(O.retryLane=T,es(h,T),Hi(I,h,T,-1))}return qk(),I=kk(Error(i(421))),H0(h,g,W,I)}return Mt(T)?(g.flags|=128,g.child=h.child,g=NU.bind(null,h),cn(T,g),null):(h=O.treeContext,_e&&(ra=fr(T),or=g,rn=!0,Io=null,As=!1,h!==null&&(pn[$n++]=Eo,pn[$n++]=na,pn[$n++]=ta,Eo=h.id,na=h.overflow,ta=g)),g=Nk(g,I.children),g.flags|=4096,g)}function X5(h,g,k){h.lanes|=g;var I=h.alternate;I!==null&&(I.lanes|=g),ik(h.return,g,k)}function _k(h,g,k,I,T){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:k,tailMode:T}:(O.isBackwards=g,O.rendering=null,O.renderingStartTime=0,O.last=I,O.tail=k,O.tailMode=T)}function Y5(h,g,k){var I=g.pendingProps,T=I.revealOrder,O=I.tail;if(Wa(h,g,I.children,k),I=Qn.current,I&2)I=I&1|2,g.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&X5(h,k,g);else if(h.tag===19)X5(h,k,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}I&=1}if(mn(Qn,I),!(g.mode&1))g.memoizedState=null;else switch(T){case"forwards":for(k=g.child,T=null;k!==null;)h=k.alternate,h!==null&&z0(h)===null&&(T=k),k=k.sibling;k=T,k===null?(T=g.child,g.child=null):(T=k.sibling,k.sibling=null),_k(g,!1,T,k,O);break;case"backwards":for(k=null,T=g.child,g.child=null;T!==null;){if(h=T.alternate,h!==null&&z0(h)===null){g.child=T;break}h=T.sibling,T.sibling=k,k=T,T=h}_k(g,!0,k,null,O);break;case"together":_k(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function q0(h,g){!(g.mode&1)&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function Ls(h,g,k){if(h!==null&&(g.dependencies=h.dependencies),Ju|=g.lanes,!(k&g.childLanes))return null;if(h!==null&&g.child!==h.child)throw Error(i(153));if(g.child!==null){for(h=g.child,k=Ll(h,h.pendingProps),g.child=k,k.return=g;h.sibling!==null;)h=h.sibling,k=k.sibling=Ll(h,h.pendingProps),k.return=g;k.sibling=null}return g.child}function mU(h,g,k){switch(g.tag){case 3:H5(g),Id();break;case 5:h5(g);break;case 1:va(g.type)&&Jo(g);break;case 4:ck(g,g.stateNode.containerInfo);break;case 10:t5(g,g.type._context,g.memoizedProps.value);break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(mn(Qn,Qn.current&1),g.flags|=128,null):k&g.child.childLanes?K5(h,g,k):(mn(Qn,Qn.current&1),h=Ls(h,g,k),h!==null?h.sibling:null);mn(Qn,Qn.current&1);break;case 19:if(I=(k&g.childLanes)!==0,h.flags&128){if(I)return Y5(h,g,k);g.flags|=128}var T=g.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),mn(Qn,Qn.current),I)break;return null;case 22:case 23:return g.lanes=0,U5(h,g,k)}return Ls(h,g,k)}function rs(h){h.flags|=4}function Q5(h,g){if(h!==null&&h.child===g.child)return!0;if(g.flags&16)return!1;for(h=g.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var jh,Vh,K0,X0;if(Ee)jh=function(h,g){for(var k=g.child;k!==null;){if(k.tag===5||k.tag===6)ne(h,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===g)break;for(;k.sibling===null;){if(k.return===null||k.return===g)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Vh=function(){},K0=function(h,g,k,I,T){if(h=h.memoizedProps,h!==I){var O=g.stateNode,W=ts(Wi.current);k=pe(O,k,h,I,T,W),(g.updateQueue=k)&&rs(g)}},X0=function(h,g,k,I){k!==I&&rs(g)};else if(Ie){jh=function(h,g,k,I){for(var T=g.child;T!==null;){if(T.tag===5){var O=T.stateNode;k&&I&&(O=Ge(O,T.type,T.memoizedProps,T)),ne(h,O)}else if(T.tag===6)O=T.stateNode,k&&I&&(O=bt(O,T.memoizedProps,T)),ne(h,O);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)O=T.child,O!==null&&(O.return=T),jh(h,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===g)break;for(;T.sibling===null;){if(T.return===null||T.return===g)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var Z5=function(h,g,k,I){for(var T=g.child;T!==null;){if(T.tag===5){var O=T.stateNode;k&&I&&(O=Ge(O,T.type,T.memoizedProps,T)),ge(h,O)}else if(T.tag===6)O=T.stateNode,k&&I&&(O=bt(O,T.memoizedProps,T)),ge(h,O);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)O=T.child,O!==null&&(O.return=T),Z5(h,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===g)break;for(;T.sibling===null;){if(T.return===null||T.return===g)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Vh=function(h,g){var k=g.stateNode;if(!Q5(h,g)){h=k.containerInfo;var I=ue(h);Z5(I,g,!1,!1),k.pendingChildren=I,rs(g),ke(h,I)}},K0=function(h,g,k,I,T){var O=h.stateNode,W=h.memoizedProps;if((h=Q5(h,g))&&W===I)g.stateNode=O;else{var le=g.stateNode,ye=ts(Wi.current),Re=null;W!==I&&(Re=pe(le,k,W,I,T,ye)),h&&Re===null?g.stateNode=O:(O=Ut(O,Re,k,W,I,g,h,le),se(O,k,I,T,ye)&&rs(g),g.stateNode=O,h?rs(g):jh(O,g,!1,!1))}},X0=function(h,g,k,I){k!==I?(h=ts(Rd.current),k=ts(Wi.current),g.stateNode=ie(I,h,k,g),rs(g)):g.stateNode=h.stateNode}}else Vh=function(){},K0=function(){},X0=function(){};function Uh(h,g){if(!rn)switch(h.tailMode){case"hidden":g=h.tail;for(var k=null;g!==null;)g.alternate!==null&&(k=g),g=g.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var I=null;k!==null;)k.alternate!==null&&(I=k),k=k.sibling;I===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:I.sibling=null}}function ka(h){var g=h.alternate!==null&&h.alternate.child===h.child,k=0,I=0;if(g)for(var T=h.child;T!==null;)k|=T.lanes|T.childLanes,I|=T.subtreeFlags&14680064,I|=T.flags&14680064,T.return=h,T=T.sibling;else for(T=h.child;T!==null;)k|=T.lanes|T.childLanes,I|=T.subtreeFlags,I|=T.flags,T.return=h,T=T.sibling;return h.subtreeFlags|=I,h.childLanes=k,g}function yU(h,g,k){var I=g.pendingProps;switch(Ps(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ka(g),null;case 1:return va(g.type)&&Cd(),ka(g),null;case 3:return k=g.stateNode,$d(),kn(ba),kn(Ur),hk(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(O0(g)?rs(g):h===null||h.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Io!==null&&(Gk(Io),Io=null))),Vh(h,g),ka(g),null;case 5:dk(g),k=ts(Rd.current);var T=g.type;if(h!==null&&g.stateNode!=null)K0(h,g,T,I,k),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!I){if(g.stateNode===null)throw Error(i(166));return ka(g),null}if(h=ts(Wi.current),O0(g)){if(!_e)throw Error(i(175));h=Qo(g.stateNode,g.type,g.memoizedProps,k,h,g,!As),g.updateQueue=h,h!==null&&rs(g)}else{var O=Q(T,I,k,h,g);jh(O,g,!1,!1),g.stateNode=O,se(O,T,I,k,h)&&rs(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return ka(g),null;case 6:if(h&&g.stateNode!=null)X0(h,g,h.memoizedProps,I);else{if(typeof I!="string"&&g.stateNode===null)throw Error(i(166));if(h=ts(Rd.current),k=ts(Wi.current),O0(g)){if(!_e)throw Error(i(176));if(h=g.stateNode,k=g.memoizedProps,(I=zi(h,k,g,!As))&&(T=or,T!==null))switch(T.tag){case 3:nn(T.stateNode.containerInfo,h,k,(T.mode&1)!==0);break;case 5:dn(T.type,T.memoizedProps,T.stateNode,h,k,(T.mode&1)!==0)}I&&rs(g)}else g.stateNode=ie(I,h,k,g)}return ka(g),null;case 13:if(kn(Qn),I=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(rn&&ra!==null&&g.mode&1&&!(g.flags&128))e5(),Id(),g.flags|=98560,T=!1;else if(T=O0(g),I!==null&&I.dehydrated!==null){if(h===null){if(!T)throw Error(i(318));if(!_e)throw Error(i(344));if(T=g.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));ya(T,g)}else Id(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;ka(g),T=!1}else Io!==null&&(Gk(Io),Io=null),T=!0;if(!T)return g.flags&65536?g:null}return g.flags&128?(g.lanes=k,g):(k=I!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(g.child.flags|=8192,g.mode&1&&(h===null||Qn.current&1?Mr===0&&(Mr=3):qk())),g.updateQueue!==null&&(g.flags|=4),ka(g),null);case 4:return $d(),Vh(h,g),h===null&&Xe(g.stateNode.containerInfo),ka(g),null;case 10:return ak(g.type._context),ka(g),null;case 17:return va(g.type)&&Cd(),ka(g),null;case 19:if(kn(Qn),T=g.memoizedState,T===null)return ka(g),null;if(I=(g.flags&128)!==0,O=T.rendering,O===null)if(I)Uh(T,!1);else{if(Mr!==0||h!==null&&h.flags&128)for(h=g.child;h!==null;){if(O=z0(h),O!==null){for(g.flags|=128,Uh(T,!1),h=O.updateQueue,h!==null&&(g.updateQueue=h,g.flags|=4),g.subtreeFlags=0,h=k,k=g.child;k!==null;)I=k,T=h,I.flags&=14680066,O=I.alternate,O===null?(I.childLanes=0,I.lanes=T,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=O.childLanes,I.lanes=O.lanes,I.child=O.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=O.memoizedProps,I.memoizedState=O.memoizedState,I.updateQueue=O.updateQueue,I.type=O.type,T=O.dependencies,I.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),k=k.sibling;return mn(Qn,Qn.current&1|2),g.child}h=h.sibling}T.tail!==null&&Ke()>jk&&(g.flags|=128,I=!0,Uh(T,!1),g.lanes=4194304)}else{if(!I)if(h=z0(O),h!==null){if(g.flags|=128,I=!0,h=h.updateQueue,h!==null&&(g.updateQueue=h,g.flags|=4),Uh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!rn)return ka(g),null}else 2*Ke()-T.renderingStartTime>jk&&k!==1073741824&&(g.flags|=128,I=!0,Uh(T,!1),g.lanes=4194304);T.isBackwards?(O.sibling=g.child,g.child=O):(h=T.last,h!==null?h.sibling=O:g.child=O,T.last=O)}return T.tail!==null?(g=T.tail,T.rendering=g,T.tail=g.sibling,T.renderingStartTime=Ke(),g.sibling=null,h=Qn.current,mn(Qn,I?h&1|2:h&1),g):(ka(g),null);case 22:case 23:return Hk(),k=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(g.flags|=8192),k&&g.mode&1?Si&1073741824&&(ka(g),Ee&&g.subtreeFlags&6&&(g.flags|=8192)):ka(g),null;case 24:return null;case 25:return null}throw Error(i(156,g.tag))}function bU(h,g){switch(Ps(g),g.tag){case 1:return va(g.type)&&Cd(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return $d(),kn(ba),kn(Ur),hk(),h=g.flags,h&65536&&!(h&128)?(g.flags=h&-65537|128,g):null;case 5:return dk(g),null;case 13:if(kn(Qn),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Id()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return kn(Qn),null;case 4:return $d(),null;case 10:return ak(g.type._context),null;case 22:case 23:return Hk(),null;case 24:return null;default:return null}}var Y0=!1,Sa=!1,vU=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Md(h,g){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(I){Wn(h,g,I)}else k.current=null}function J5(h,g,k){try{k()}catch(I){Wn(h,g,I)}}var eR=!1;function xU(h,g){for(F(h.containerInfo),Ve=g;Ve!==null;)if(h=Ve,g=h.child,(h.subtreeFlags&1028)!==0&&g!==null)g.return=h,Ve=g;else for(;Ve!==null;){h=Ve;try{var k=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var I=k.memoizedProps,T=k.memoizedState,O=h.stateNode,W=O.getSnapshotBeforeUpdate(h.elementType===h.type?I:To(h.type,I),T);O.__reactInternalSnapshotBeforeUpdate=W}break;case 3:Ee&&Yo(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(le){Wn(h,h.return,le)}if(g=h.sibling,g!==null){g.return=h.return,Ve=g;break}Ve=h.return}return k=eR,eR=!1,k}function Wh(h,g,k){var I=g.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var T=I=I.next;do{if((T.tag&h)===h){var O=T.destroy;T.destroy=void 0,O!==void 0&&J5(g,k,O)}T=T.next}while(T!==I)}}function Q0(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var k=g=g.next;do{if((k.tag&h)===h){var I=k.create;k.destroy=I()}k=k.next}while(k!==g)}}function Rk(h){var g=h.ref;if(g!==null){var k=h.stateNode;switch(h.tag){case 5:h=X(k);break;default:h=k}typeof g=="function"?g(h):g.current=h}}function tR(h){var g=h.alternate;g!==null&&(h.alternate=null,tR(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&lt(g)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function nR(h){return h.tag===5||h.tag===3||h.tag===4}function rR(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||nR(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function $k(h,g,k){var I=h.tag;if(I===5||I===6)h=h.stateNode,g?fn(k,h,g):ja(k,h);else if(I!==4&&(h=h.child,h!==null))for($k(h,g,k),h=h.sibling;h!==null;)$k(h,g,k),h=h.sibling}function Ok(h,g,k){var I=h.tag;if(I===5||I===6)h=h.stateNode,g?vi(k,h,g):Yn(k,h);else if(I!==4&&(h=h.child,h!==null))for(Ok(h,g,k),h=h.sibling;h!==null;)Ok(h,g,k),h=h.sibling}var aa=null,No=!1;function as(h,g,k){for(k=k.child;k!==null;)Mk(h,g,k),k=k.sibling}function Mk(h,g,k){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(st,k)}catch{}switch(k.tag){case 5:Sa||Md(k,g);case 6:if(Ee){var I=aa,T=No;aa=null,as(h,g,k),aa=I,No=T,aa!==null&&(No?xi(aa,k.stateNode):Ja(aa,k.stateNode))}else as(h,g,k);break;case 18:Ee&&aa!==null&&(No?Zo(aa,k.stateNode):Tl(aa,k.stateNode));break;case 4:Ee?(I=aa,T=No,aa=k.stateNode.containerInfo,No=!0,as(h,g,k),aa=I,No=T):(Ie&&(I=k.stateNode.containerInfo,T=ue(I),Me(I,T)),as(h,g,k));break;case 0:case 11:case 14:case 15:if(!Sa&&(I=k.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){T=I=I.next;do{var O=T,W=O.destroy;O=O.tag,W!==void 0&&(O&2||O&4)&&J5(k,g,W),T=T.next}while(T!==I)}as(h,g,k);break;case 1:if(!Sa&&(Md(k,g),I=k.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=k.memoizedProps,I.state=k.memoizedState,I.componentWillUnmount()}catch(le){Wn(k,g,le)}as(h,g,k);break;case 21:as(h,g,k);break;case 22:k.mode&1?(Sa=(I=Sa)||k.memoizedState!==null,as(h,g,k),Sa=I):as(h,g,k);break;default:as(h,g,k)}}function aR(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new vU),g.forEach(function(I){var T=_U.bind(null,h,I);k.has(I)||(k.add(I),I.then(T,T))})}}function _o(h,g){var k=g.deletions;if(k!==null)for(var I=0;I<k.length;I++){var T=k[I];try{var O=h,W=g;if(Ee){var le=W;e:for(;le!==null;){switch(le.tag){case 5:aa=le.stateNode,No=!1;break e;case 3:aa=le.stateNode.containerInfo,No=!0;break e;case 4:aa=le.stateNode.containerInfo,No=!0;break e}le=le.return}if(aa===null)throw Error(i(160));Mk(O,W,T),aa=null,No=!1}else Mk(O,W,T);var ye=T.alternate;ye!==null&&(ye.return=null),T.return=null}catch(Re){Wn(T,g,Re)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)iR(g,h),g=g.sibling}function iR(h,g){var k=h.alternate,I=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(_o(g,h),is(h),I&4){try{Wh(3,h,h.return),Q0(3,h)}catch(Be){Wn(h,h.return,Be)}try{Wh(5,h,h.return)}catch(Be){Wn(h,h.return,Be)}}break;case 1:_o(g,h),is(h),I&512&&k!==null&&Md(k,k.return);break;case 5:if(_o(g,h),is(h),I&512&&k!==null&&Md(k,k.return),Ee){if(h.flags&32){var T=h.stateNode;try{wi(T)}catch(Be){Wn(h,h.return,Be)}}if(I&4&&(T=h.stateNode,T!=null)){var O=h.memoizedProps;if(k=k!==null?k.memoizedProps:O,I=h.type,g=h.updateQueue,h.updateQueue=null,g!==null)try{wo(T,g,I,k,O,h)}catch(Be){Wn(h,h.return,Be)}}}break;case 6:if(_o(g,h),is(h),I&4&&Ee){if(h.stateNode===null)throw Error(i(162));T=h.stateNode,O=h.memoizedProps,k=k!==null?k.memoizedProps:O;try{Rn(T,k,O)}catch(Be){Wn(h,h.return,Be)}}break;case 3:if(_o(g,h),is(h),I&4){if(Ee&&_e&&k!==null&&k.memoizedState.isDehydrated)try{Hu(g.containerInfo)}catch(Be){Wn(h,h.return,Be)}if(Ie){T=g.containerInfo,O=g.pendingChildren;try{Me(T,O)}catch(Be){Wn(h,h.return,Be)}}}break;case 4:if(_o(g,h),is(h),I&4&&Ie){O=h.stateNode,T=O.containerInfo,O=O.pendingChildren;try{Me(T,O)}catch(Be){Wn(h,h.return,Be)}}break;case 13:_o(g,h),is(h),T=h.child,T.flags&8192&&(O=T.memoizedState!==null,T.stateNode.isHidden=O,!O||T.alternate!==null&&T.alternate.memoizedState!==null||(zk=Ke())),I&4&&aR(h);break;case 22:var W=k!==null&&k.memoizedState!==null;if(h.mode&1?(Sa=(k=Sa)||W,_o(g,h),Sa=k):_o(g,h),is(h),I&8192){if(k=h.memoizedState!==null,(h.stateNode.isHidden=k)&&!W&&h.mode&1)for(Ve=h,I=h.child;I!==null;){for(g=Ve=I;Ve!==null;){W=Ve;var le=W.child;switch(W.tag){case 0:case 11:case 14:case 15:Wh(4,W,W.return);break;case 1:Md(W,W.return);var ye=W.stateNode;if(typeof ye.componentWillUnmount=="function"){var Re=W,qe=W.return;try{var It=Re;ye.props=It.memoizedProps,ye.state=It.memoizedState,ye.componentWillUnmount()}catch(Be){Wn(Re,qe,Be)}}break;case 5:Md(W,W.return);break;case 22:if(W.memoizedState!==null){lR(g);continue}}le!==null?(le.return=W,Ve=le):lR(g)}I=I.sibling}if(Ee){e:if(I=null,Ee)for(g=h;;){if(g.tag===5){if(I===null){I=g;try{T=g.stateNode,k?_s(T):Il(g.stateNode,g.memoizedProps)}catch(Be){Wn(h,h.return,Be)}}}else if(g.tag===6){if(I===null)try{O=g.stateNode,k?ma(O):Sd(O,g.memoizedProps)}catch(Be){Wn(h,h.return,Be)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===h)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break e;for(;g.sibling===null;){if(g.return===null||g.return===h)break e;I===g&&(I=null),g=g.return}I===g&&(I=null),g.sibling.return=g.return,g=g.sibling}}}break;case 19:_o(g,h),is(h),I&4&&aR(h);break;case 21:break;default:_o(g,h),is(h)}}function is(h){var g=h.flags;if(g&2){try{if(Ee){e:{for(var k=h.return;k!==null;){if(nR(k)){var I=k;break e}k=k.return}throw Error(i(160))}switch(I.tag){case 5:var T=I.stateNode;I.flags&32&&(wi(T),I.flags&=-33);var O=rR(h);Ok(h,O,T);break;case 3:case 4:var W=I.stateNode.containerInfo,le=rR(h);$k(h,le,W);break;default:throw Error(i(161))}}}catch(ye){Wn(h,h.return,ye)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function wU(h,g,k){Ve=h,oR(h)}function oR(h,g,k){for(var I=(h.mode&1)!==0;Ve!==null;){var T=Ve,O=T.child;if(T.tag===22&&I){var W=T.memoizedState!==null||Y0;if(!W){var le=T.alternate,ye=le!==null&&le.memoizedState!==null||Sa;le=Y0;var Re=Sa;if(Y0=W,(Sa=ye)&&!Re)for(Ve=T;Ve!==null;)W=Ve,ye=W.child,W.tag===22&&W.memoizedState!==null?uR(T):ye!==null?(ye.return=W,Ve=ye):uR(T);for(;O!==null;)Ve=O,oR(O),O=O.sibling;Ve=T,Y0=le,Sa=Re}sR(h)}else T.subtreeFlags&8772&&O!==null?(O.return=T,Ve=O):sR(h)}}function sR(h){for(;Ve!==null;){var g=Ve;if(g.flags&8772){var k=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:Sa||Q0(5,g);break;case 1:var I=g.stateNode;if(g.flags&4&&!Sa)if(k===null)I.componentDidMount();else{var T=g.elementType===g.type?k.memoizedProps:To(g.type,k.memoizedProps);I.componentDidUpdate(T,k.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var O=g.updateQueue;O!==null&&i5(g,O,I);break;case 3:var W=g.updateQueue;if(W!==null){if(k=null,g.child!==null)switch(g.child.tag){case 5:k=X(g.child.stateNode);break;case 1:k=g.child.stateNode}i5(g,W,k)}break;case 5:var le=g.stateNode;k===null&&g.flags&4&&Za(le,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&g.memoizedState===null){var ye=g.alternate;if(ye!==null){var Re=ye.memoizedState;if(Re!==null){var qe=Re.dehydrated;qe!==null&&qu(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Sa||g.flags&512&&Rk(g)}catch(It){Wn(g,g.return,It)}}if(g===h){Ve=null;break}if(k=g.sibling,k!==null){k.return=g.return,Ve=k;break}Ve=g.return}}function lR(h){for(;Ve!==null;){var g=Ve;if(g===h){Ve=null;break}var k=g.sibling;if(k!==null){k.return=g.return,Ve=k;break}Ve=g.return}}function uR(h){for(;Ve!==null;){var g=Ve;try{switch(g.tag){case 0:case 11:case 15:var k=g.return;try{Q0(4,g)}catch(ye){Wn(g,k,ye)}break;case 1:var I=g.stateNode;if(typeof I.componentDidMount=="function"){var T=g.return;try{I.componentDidMount()}catch(ye){Wn(g,T,ye)}}var O=g.return;try{Rk(g)}catch(ye){Wn(g,O,ye)}break;case 5:var W=g.return;try{Rk(g)}catch(ye){Wn(g,W,ye)}}}catch(ye){Wn(g,g.return,ye)}if(g===h){Ve=null;break}var le=g.sibling;if(le!==null){le.return=g.return,Ve=le;break}Ve=g.return}}var Z0=0,J0=1,e1=2,t1=3,n1=4;if(typeof Symbol=="function"&&Symbol.for){var Gh=Symbol.for;Z0=Gh("selector.component"),J0=Gh("selector.has_pseudo_class"),e1=Gh("selector.role"),t1=Gh("selector.test_id"),n1=Gh("selector.text")}function Pk(h){var g=Fe(h);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(i(364));return g}if(h=sn(h),h===null)throw Error(i(362));return h.stateNode.current}function Ak(h,g){switch(g.$$typeof){case Z0:if(h.type===g.value)return!0;break;case J0:e:{g=g.value,h=[h,0];for(var k=0;k<h.length;){var I=h[k++],T=h[k++],O=g[T];if(I.tag!==5||!Zt(I)){for(;O!=null&&Ak(I,O);)T++,O=g[T];if(T===g.length){g=!0;break e}else for(I=I.child;I!==null;)h.push(I,T),I=I.sibling}}g=!1}return g;case e1:if(h.tag===5&&Ot(h.stateNode,g.value))return!0;break;case n1:if((h.tag===5||h.tag===6)&&(h=Qt(h),h!==null&&0<=h.indexOf(g.value)))return!0;break;case t1:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Dk(h){switch(h.$$typeof){case Z0:return"<"+(E(h.value)||"Unknown")+">";case J0:return":has("+(Dk(h)||"")+")";case e1:return'[role="'+h.value+'"]';case n1:return'"'+h.value+'"';case t1:return'[data-testname="'+h.value+'"]';default:throw Error(i(365))}}function cR(h,g){var k=[];h=[h,0];for(var I=0;I<h.length;){var T=h[I++],O=h[I++],W=g[O];if(T.tag!==5||!Zt(T)){for(;W!=null&&Ak(T,W);)O++,W=g[O];if(O===g.length)k.push(T);else for(T=T.child;T!==null;)h.push(T,O),T=T.sibling}}return k}function Lk(h,g){if(!et)throw Error(i(363));h=Pk(h),h=cR(h,g),g=[],h=Array.from(h);for(var k=0;k<h.length;){var I=h[k++];if(I.tag===5)Zt(I)||g.push(I.stateNode);else for(I=I.child;I!==null;)h.push(I),I=I.sibling}return g}var kU=Math.ceil,r1=o.ReactCurrentDispatcher,Fk=o.ReactCurrentOwner,gr=o.ReactCurrentBatchConfig,zt=0,Gr=null,Er=null,ia=0,Si=0,Pd=ji(0),Mr=0,Hh=null,Ju=0,a1=0,Bk=0,qh=null,ni=null,zk=0,jk=1/0,Fs=null;function Ad(){jk=Ke()+500}var i1=!1,Vk=null,Ml=null,o1=!1,Pl=null,s1=0,Kh=0,Uk=null,l1=-1,u1=0;function Ca(){return zt&6?Ke():l1!==-1?l1:l1=Ke()}function Al(h){return h.mode&1?zt&2&&ia!==0?ia&-ia:aU.transition!==null?(u1===0&&(u1=ae()),u1):(h=Ne,h!==0?h:Oe()):1}function Hi(h,g,k,I){if(50<Kh)throw Kh=0,Uk=null,Error(i(185));Ce(h,k,I),(!(zt&2)||h!==Gr)&&(h===Gr&&(!(zt&2)&&(a1|=k),Mr===4&&Dl(h,ia)),ri(h,I),k===1&&zt===0&&!(g.mode&1)&&(Ad(),Dn&&kr()))}function ri(h,g){var k=h.callbackNode;U(h,g);var I=Os(h,h===Gr?ia:0);if(I===0)k!==null&&rt(k),h.callbackNode=null,h.callbackPriority=0;else if(g=I&-I,h.callbackPriority!==g){if(k!=null&&rt(k),g===1)h.tag===0?Co(pR.bind(null,h)):Va(pR.bind(null,h)),Je?nt(function(){!(zt&6)&&kr()}):gt(ct,kr),k=null;else{switch(je(I)){case 1:k=ct;break;case 4:k=pt;break;case 16:k=at;break;case 536870912:k=kt;break;default:k=at}k=wR(k,dR.bind(null,h))}h.callbackPriority=g,h.callbackNode=k}}function dR(h,g){if(l1=-1,u1=0,zt&6)throw Error(i(327));var k=h.callbackNode;if(nc()&&h.callbackNode!==k)return null;var I=Os(h,h===Gr?ia:0);if(I===0)return null;if(I&30||I&h.expiredLanes||g)g=c1(h,I);else{g=I;var T=zt;zt|=2;var O=gR();(Gr!==h||ia!==g)&&(Fs=null,Ad(),ec(h,g));do try{EU();break}catch(le){fR(h,le)}while(!0);rk(),r1.current=O,zt=T,Er!==null?g=0:(Gr=null,ia=0,g=Mr)}if(g!==0){if(g===2&&(T=J(h),T!==0&&(I=T,g=Wk(h,T))),g===1)throw k=Hh,ec(h,0),Dl(h,I),ri(h,Ke()),k;if(g===6)Dl(h,I);else{if(T=h.current.alternate,!(I&30)&&!SU(T)&&(g=c1(h,I),g===2&&(O=J(h),O!==0&&(I=O,g=Wk(h,O))),g===1))throw k=Hh,ec(h,0),Dl(h,I),ri(h,Ke()),k;switch(h.finishedWork=T,h.finishedLanes=I,g){case 0:case 1:throw Error(i(345));case 2:tc(h,ni,Fs);break;case 3:if(Dl(h,I),(I&130023424)===I&&(g=zk+500-Ke(),10<g)){if(Os(h,0)!==0)break;if(T=h.suspendedLanes,(T&I)!==I){Ca(),h.pingedLanes|=h.suspendedLanes&T;break}h.timeoutHandle=xe(tc.bind(null,h,ni,Fs),g);break}tc(h,ni,Fs);break;case 4:if(Dl(h,I),(I&4194240)===I)break;for(g=h.eventTimes,T=-1;0<I;){var W=31-ki(I);O=1<<W,W=g[W],W>T&&(T=W),I&=~O}if(I=T,I=Ke()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*kU(I/1960))-I,10<I){h.timeoutHandle=xe(tc.bind(null,h,ni,Fs),I);break}tc(h,ni,Fs);break;case 5:tc(h,ni,Fs);break;default:throw Error(i(329))}}}return ri(h,Ke()),h.callbackNode===k?dR.bind(null,h):null}function Wk(h,g){var k=qh;return h.current.memoizedState.isDehydrated&&(ec(h,g).flags|=256),h=c1(h,g),h!==2&&(g=ni,ni=k,g!==null&&Gk(g)),h}function Gk(h){ni===null?ni=h:ni.push.apply(ni,h)}function SU(h){for(var g=h;;){if(g.flags&16384){var k=g.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var I=0;I<k.length;I++){var T=k[I],O=T.getSnapshot;T=T.value;try{if(!Wt(O(),T))return!1}catch{return!1}}}if(k=g.child,g.subtreeFlags&16384&&k!==null)k.return=g,g=k;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Dl(h,g){for(g&=~Bk,g&=~a1,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var k=31-ki(g),I=1<<k;h[k]=-1,g&=~I}}function pR(h){if(zt&6)throw Error(i(327));nc();var g=Os(h,0);if(!(g&1))return ri(h,Ke()),null;var k=c1(h,g);if(h.tag!==0&&k===2){var I=J(h);I!==0&&(g=I,k=Wk(h,I))}if(k===1)throw k=Hh,ec(h,0),Dl(h,g),ri(h,Ke()),k;if(k===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,tc(h,ni,Fs),ri(h,Ke()),null}function hR(h){Pl!==null&&Pl.tag===0&&!(zt&6)&&nc();var g=zt;zt|=1;var k=gr.transition,I=Ne;try{if(gr.transition=null,Ne=1,h)return h()}finally{Ne=I,gr.transition=k,zt=g,!(zt&6)&&kr()}}function Hk(){Si=Pd.current,kn(Pd)}function ec(h,g){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==oe&&(h.timeoutHandle=oe,q(k)),Er!==null)for(k=Er.return;k!==null;){var I=k;switch(Ps(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Cd();break;case 3:$d(),kn(ba),kn(Ur),hk();break;case 5:dk(I);break;case 4:$d();break;case 13:kn(Qn);break;case 19:kn(Qn);break;case 10:ak(I.type._context);break;case 22:case 23:Hk()}k=k.return}if(Gr=h,Er=h=Ll(h.current,null),ia=Si=g,Mr=0,Hh=null,Bk=a1=Ju=0,ni=qh=null,Qu!==null){for(g=0;g<Qu.length;g++)if(k=Qu[g],I=k.interleaved,I!==null){k.interleaved=null;var T=I.next,O=k.pending;if(O!==null){var W=O.next;O.next=T,I.next=W}k.pending=I}Qu=null}return h}function fR(h,g){do{var k=Er;try{if(rk(),j0.current=G0,V0){for(var I=Zn.memoizedState;I!==null;){var T=I.queue;T!==null&&(T.pending=null),I=I.next}V0=!1}if(Zu=0,Wr=Or=Zn=null,Lh=!1,Fh=0,Fk.current=null,k===null||k.return===null){Mr=1,Hh=g,Er=null;break}e:{var O=h,W=k.return,le=k,ye=g;if(g=ia,le.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Re=ye,qe=le,It=qe.tag;if(!(qe.mode&1)&&(It===0||It===11||It===15)){var Be=qe.alternate;Be?(qe.updateQueue=Be.updateQueue,qe.memoizedState=Be.memoizedState,qe.lanes=Be.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Ln=F5(W);if(Ln!==null){Ln.flags&=-257,B5(Ln,W,le,O,g),Ln.mode&1&&L5(O,Re,g),g=Ln,ye=Re;var Sn=g.updateQueue;if(Sn===null){var ai=new Set;ai.add(ye),g.updateQueue=ai}else Sn.add(ye);break e}else{if(!(g&1)){L5(O,Re,g),qk();break e}ye=Error(i(426))}}else if(rn&&le.mode&1){var Bs=F5(W);if(Bs!==null){!(Bs.flags&65536)&&(Bs.flags|=256),B5(Bs,W,le,O,g),tk(Od(ye,le));break e}}O=ye=Od(ye,le),Mr!==4&&(Mr=2),qh===null?qh=[O]:qh.push(O),O=W;do{switch(O.tag){case 3:O.flags|=65536,g&=-g,O.lanes|=g;var me=A5(O,ye,g);a5(O,me);break e;case 1:le=ye;var ce=O.type,we=O.stateNode;if(!(O.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(Ml===null||!Ml.has(we)))){O.flags|=65536,g&=-g,O.lanes|=g;var ze=D5(O,le,g);a5(O,ze);break e}}O=O.return}while(O!==null)}yR(k)}catch(dt){g=dt,Er===k&&k!==null&&(Er=k=k.return);continue}break}while(!0)}function gR(){var h=r1.current;return r1.current=G0,h===null?G0:h}function qk(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),Gr===null||!(Ju&268435455)&&!(a1&268435455)||Dl(Gr,ia)}function c1(h,g){var k=zt;zt|=2;var I=gR();(Gr!==h||ia!==g)&&(Fs=null,ec(h,g));do try{CU();break}catch(T){fR(h,T)}while(!0);if(rk(),zt=k,r1.current=I,Er!==null)throw Error(i(261));return Gr=null,ia=0,Mr}function CU(){for(;Er!==null;)mR(Er)}function EU(){for(;Er!==null&&!$t();)mR(Er)}function mR(h){var g=xR(h.alternate,h,Si);h.memoizedProps=h.pendingProps,g===null?yR(h):Er=g,Fk.current=null}function yR(h){var g=h;do{var k=g.alternate;if(h=g.return,g.flags&32768){if(k=bU(k,g),k!==null){k.flags&=32767,Er=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Mr=6,Er=null;return}}else if(k=yU(k,g,Si),k!==null){Er=k;return}if(g=g.sibling,g!==null){Er=g;return}Er=g=h}while(g!==null);Mr===0&&(Mr=5)}function tc(h,g,k){var I=Ne,T=gr.transition;try{gr.transition=null,Ne=1,IU(h,g,k,I)}finally{gr.transition=T,Ne=I}return null}function IU(h,g,k,I){do nc();while(Pl!==null);if(zt&6)throw Error(i(327));k=h.finishedWork;var T=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var O=k.lanes|k.childLanes;if(Ae(h,O),h===Gr&&(Er=Gr=null,ia=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||o1||(o1=!0,wR(at,function(){return nc(),null})),O=(k.flags&15990)!==0,k.subtreeFlags&15990||O){O=gr.transition,gr.transition=null;var W=Ne;Ne=1;var le=zt;zt|=4,Fk.current=null,xU(h,k),iR(k,h),Y(h.containerInfo),h.current=k,wU(k),wt(),zt=le,Ne=W,gr.transition=O}else h.current=k;if(o1&&(o1=!1,Pl=h,s1=T),O=h.pendingLanes,O===0&&(Ml=null),ir(k.stateNode),ri(h,Ke()),g!==null)for(I=h.onRecoverableError,k=0;k<g.length;k++)T=g[k],I(T.value,{componentStack:T.stack,digest:T.digest});if(i1)throw i1=!1,h=Vk,Vk=null,h;return s1&1&&h.tag!==0&&nc(),O=h.pendingLanes,O&1?h===Uk?Kh++:(Kh=0,Uk=h):Kh=0,kr(),null}function nc(){if(Pl!==null){var h=je(s1),g=gr.transition,k=Ne;try{if(gr.transition=null,Ne=16>h?16:h,Pl===null)var I=!1;else{if(h=Pl,Pl=null,s1=0,zt&6)throw Error(i(331));var T=zt;for(zt|=4,Ve=h.current;Ve!==null;){var O=Ve,W=O.child;if(Ve.flags&16){var le=O.deletions;if(le!==null){for(var ye=0;ye<le.length;ye++){var Re=le[ye];for(Ve=Re;Ve!==null;){var qe=Ve;switch(qe.tag){case 0:case 11:case 15:Wh(8,qe,O)}var It=qe.child;if(It!==null)It.return=qe,Ve=It;else for(;Ve!==null;){qe=Ve;var Be=qe.sibling,Ln=qe.return;if(tR(qe),qe===Re){Ve=null;break}if(Be!==null){Be.return=Ln,Ve=Be;break}Ve=Ln}}}var Sn=O.alternate;if(Sn!==null){var ai=Sn.child;if(ai!==null){Sn.child=null;do{var Bs=ai.sibling;ai.sibling=null,ai=Bs}while(ai!==null)}}Ve=O}}if(O.subtreeFlags&2064&&W!==null)W.return=O,Ve=W;else e:for(;Ve!==null;){if(O=Ve,O.flags&2048)switch(O.tag){case 0:case 11:case 15:Wh(9,O,O.return)}var me=O.sibling;if(me!==null){me.return=O.return,Ve=me;break e}Ve=O.return}}var ce=h.current;for(Ve=ce;Ve!==null;){W=Ve;var we=W.child;if(W.subtreeFlags&2064&&we!==null)we.return=W,Ve=we;else e:for(W=ce;Ve!==null;){if(le=Ve,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:Q0(9,le)}}catch(dt){Wn(le,le.return,dt)}if(le===W){Ve=null;break e}var ze=le.sibling;if(ze!==null){ze.return=le.return,Ve=ze;break e}Ve=le.return}}if(zt=T,kr(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(st,h)}catch{}I=!0}return I}finally{Ne=k,gr.transition=g}}return!1}function bR(h,g,k){g=Od(k,g),g=A5(h,g,1),h=Ol(h,g,1),g=Ca(),h!==null&&(Ce(h,1,g),ri(h,g))}function Wn(h,g,k){if(h.tag===3)bR(h,h,k);else for(;g!==null;){if(g.tag===3){bR(g,h,k);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Ml===null||!Ml.has(I))){h=Od(k,h),h=D5(g,h,1),g=Ol(g,h,1),h=Ca(),g!==null&&(Ce(g,1,h),ri(g,h));break}}g=g.return}}function TU(h,g,k){var I=h.pingCache;I!==null&&I.delete(g),g=Ca(),h.pingedLanes|=h.suspendedLanes&k,Gr===h&&(ia&k)===k&&(Mr===4||Mr===3&&(ia&130023424)===ia&&500>Ke()-zk?ec(h,0):Bk|=k),ri(h,g)}function vR(h,g){g===0&&(h.mode&1?(g=$s,$s<<=1,!($s&130023424)&&($s=4194304)):g=1);var k=Ca();h=es(h,g),h!==null&&(Ce(h,g,k),ri(h,k))}function NU(h){var g=h.memoizedState,k=0;g!==null&&(k=g.retryLane),vR(h,k)}function _U(h,g){var k=0;switch(h.tag){case 13:var I=h.stateNode,T=h.memoizedState;T!==null&&(k=T.retryLane);break;case 19:I=h.stateNode;break;default:throw Error(i(314))}I!==null&&I.delete(g),vR(h,k)}var xR;xR=function(h,g,k){if(h!==null)if(h.memoizedProps!==g.pendingProps||ba.current)ti=!0;else{if(!(h.lanes&k)&&!(g.flags&128))return ti=!1,mU(h,g,k);ti=!!(h.flags&131072)}else ti=!1,rn&&g.flags&1048576&&Mh(g,Cr,g.index);switch(g.lanes=0,g.tag){case 2:var I=g.type;q0(h,g),h=g.pendingProps;var T=Rl(g,Ur.current);Nd(g,k),T=mk(null,g,I,h,T,k);var O=yk();return g.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,va(I)?(O=!0,Jo(g)):O=!1,g.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,sk(g),T.updater=F0,g.stateNode=T,T._reactInternals=g,uk(g,I,h,k),g=Ek(null,g,I,!0,O,k)):(g.tag=0,rn&&O&&Ua(g),Wa(null,g,T,k),g=g.child),g;case 16:I=g.elementType;e:{switch(q0(h,g),h=g.pendingProps,T=I._init,I=T(I._payload),g.type=I,T=g.tag=$U(I),h=To(I,h),T){case 0:g=Ck(null,g,I,h,k);break e;case 1:g=G5(null,g,I,h,k);break e;case 11:g=z5(null,g,I,h,k);break e;case 14:g=j5(null,g,I,To(I.type,h),k);break e}throw Error(i(306,I,""))}return g;case 0:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:To(I,T),Ck(h,g,I,T,k);case 1:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:To(I,T),G5(h,g,I,T,k);case 3:e:{if(H5(g),h===null)throw Error(i(387));I=g.pendingProps,O=g.memoizedState,T=O.element,r5(h,g),L0(g,I,null,k);var W=g.memoizedState;if(I=W.element,_e&&O.isDehydrated)if(O={element:I,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},g.updateQueue.baseState=O,g.memoizedState=O,g.flags&256){T=Od(Error(i(423)),g),g=q5(h,g,I,k,T);break e}else if(I!==T){T=Od(Error(i(424)),g),g=q5(h,g,I,k,T);break e}else for(_e&&(ra=ar(g.stateNode.containerInfo),or=g,rn=!0,Io=null,As=!1),k=p5(g,null,I,k),g.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Id(),I===T){g=Ls(h,g,k);break e}Wa(h,g,I,k)}g=g.child}return g;case 5:return h5(g),h===null&&ek(g),I=g.type,T=g.pendingProps,O=h!==null?h.memoizedProps:null,W=T.children,de(I,T)?W=null:O!==null&&de(I,O)&&(g.flags|=32),W5(h,g),Wa(h,g,W,k),g.child;case 6:return h===null&&ek(g),null;case 13:return K5(h,g,k);case 4:return ck(g,g.stateNode.containerInfo),I=g.pendingProps,h===null?g.child=_d(g,null,I,k):Wa(h,g,I,k),g.child;case 11:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:To(I,T),z5(h,g,I,T,k);case 7:return Wa(h,g,g.pendingProps,k),g.child;case 8:return Wa(h,g,g.pendingProps.children,k),g.child;case 12:return Wa(h,g,g.pendingProps.children,k),g.child;case 10:e:{if(I=g.type._context,T=g.pendingProps,O=g.memoizedProps,W=T.value,t5(g,I,W),O!==null)if(Wt(O.value,W)){if(O.children===T.children&&!ba.current){g=Ls(h,g,k);break e}}else for(O=g.child,O!==null&&(O.return=g);O!==null;){var le=O.dependencies;if(le!==null){W=O.child;for(var ye=le.firstContext;ye!==null;){if(ye.context===I){if(O.tag===1){ye=Ds(-1,k&-k),ye.tag=2;var Re=O.updateQueue;if(Re!==null){Re=Re.shared;var qe=Re.pending;qe===null?ye.next=ye:(ye.next=qe.next,qe.next=ye),Re.pending=ye}}O.lanes|=k,ye=O.alternate,ye!==null&&(ye.lanes|=k),ik(O.return,k,g),le.lanes|=k;break}ye=ye.next}}else if(O.tag===10)W=O.type===g.type?null:O.child;else if(O.tag===18){if(W=O.return,W===null)throw Error(i(341));W.lanes|=k,le=W.alternate,le!==null&&(le.lanes|=k),ik(W,k,g),W=O.sibling}else W=O.child;if(W!==null)W.return=O;else for(W=O;W!==null;){if(W===g){W=null;break}if(O=W.sibling,O!==null){O.return=W.return,W=O;break}W=W.return}O=W}Wa(h,g,T.children,k),g=g.child}return g;case 9:return T=g.type,I=g.pendingProps.children,Nd(g,k),T=Ui(T),I=I(T),g.flags|=1,Wa(h,g,I,k),g.child;case 14:return I=g.type,T=To(I,g.pendingProps),T=To(I.type,T),j5(h,g,I,T,k);case 15:return V5(h,g,g.type,g.pendingProps,k);case 17:return I=g.type,T=g.pendingProps,T=g.elementType===I?T:To(I,T),q0(h,g),g.tag=1,va(I)?(h=!0,Jo(g)):h=!1,Nd(g,k),l5(g,I,T),uk(g,I,T,k),Ek(null,g,I,!0,h,k);case 19:return Y5(h,g,k);case 22:return U5(h,g,k)}throw Error(i(156,g.tag))};function wR(h,g){return gt(h,g)}function RU(h,g,k,I){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(h,g,k,I){return new RU(h,g,k,I)}function Kk(h){return h=h.prototype,!(!h||!h.isReactComponent)}function $U(h){if(typeof h=="function")return Kk(h)?1:0;if(h!=null){if(h=h.$$typeof,h===m)return 11;if(h===b)return 14}return 2}function Ll(h,g){var k=h.alternate;return k===null?(k=qi(h.tag,g,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=g,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,g=h.dependencies,k.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function d1(h,g,k,I,T,O){var W=2;if(I=h,typeof h=="function")Kk(h)&&(W=1);else if(typeof h=="string")W=5;else e:switch(h){case u:return rc(k.children,T,O,g);case c:W=8,T|=8;break;case d:return h=qi(12,k,g,T|2),h.elementType=d,h.lanes=O,h;case y:return h=qi(13,k,g,T),h.elementType=y,h.lanes=O,h;case v:return h=qi(19,k,g,T),h.elementType=v,h.lanes=O,h;case w:return p1(k,T,O,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case p:W=10;break e;case f:W=9;break e;case m:W=11;break e;case b:W=14;break e;case x:W=16,I=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return g=qi(W,k,g,T),g.elementType=h,g.type=I,g.lanes=O,g}function rc(h,g,k,I){return h=qi(7,h,I,g),h.lanes=k,h}function p1(h,g,k,I){return h=qi(22,h,I,g),h.elementType=w,h.lanes=k,h.stateNode={isHidden:!1},h}function Xk(h,g,k){return h=qi(6,h,null,g),h.lanes=k,h}function Yk(h,g,k){return g=qi(4,h.children!==null?h.children:[],h.key,g),g.lanes=k,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function OU(h,g,k,I,T){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=I,this.onRecoverableError=T,_e&&(this.mutableSourceEagerHydrationData=null)}function kR(h,g,k,I,T,O,W,le,ye){return h=new OU(h,g,k,le,ye),g===1?(g=1,O===!0&&(g|=8)):g=0,O=qi(3,null,null,g),h.current=O,O.stateNode=h,O.memoizedState={element:I,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},sk(O),h}function SR(h){if(!h)return Vi;h=h._reactInternals;e:{if(N(h)!==h||h.tag!==1)throw Error(i(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(va(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(i(171))}if(h.tag===1){var k=h.type;if(va(k))return Vn(h,k,g)}return g}function CR(h){var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=L(g),h===null?null:h.stateNode}function ER(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<g?k:g}}function h1(h,g){ER(h,g),(h=h.alternate)&&ER(h,g)}function MU(h){return h=L(h),h===null?null:h.stateNode}function PU(){return null}return e.attemptContinuousHydration=function(h){if(h.tag===13){var g=es(h,134217728);if(g!==null){var k=Ca();Hi(g,h,134217728,k)}h1(h,134217728)}},e.attemptDiscreteHydration=function(h){if(h.tag===13){var g=es(h,1);if(g!==null){var k=Ca();Hi(g,h,1,k)}h1(h,1)}},e.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var g=Al(h),k=es(h,g);if(k!==null){var I=Ca();Hi(k,h,g,I)}h1(h,g)}},e.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var k=Yu(g.pendingLanes);k!==0&&($e(g,k|1),ri(g,Ke()),!(zt&6)&&(Ad(),kr()))}break;case 13:hR(function(){var I=es(h,1);if(I!==null){var T=Ca();Hi(I,h,1,T)}}),h1(h,1)}},e.batchedUpdates=function(h,g){var k=zt;zt|=1;try{return h(g)}finally{zt=k,zt===0&&(Ad(),Dn&&kr())}},e.createComponentSelector=function(h){return{$$typeof:Z0,value:h}},e.createContainer=function(h,g,k,I,T,O,W){return kR(h,g,!1,null,k,I,T,O,W)},e.createHasPseudoClassSelector=function(h){return{$$typeof:J0,value:h}},e.createHydrationContainer=function(h,g,k,I,T,O,W,le,ye){return h=kR(k,I,!0,h,T,O,W,le,ye),h.context=SR(null),k=h.current,I=Ca(),T=Al(k),O=Ds(I,T),O.callback=g??null,Ol(k,O,T),h.current.lanes=T,Ce(h,T,I),ri(h,I),h},e.createPortal=function(h,g,k){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:h,containerInfo:g,implementation:k}},e.createRoleSelector=function(h){return{$$typeof:e1,value:h}},e.createTestNameSelector=function(h){return{$$typeof:t1,value:h}},e.createTextSelector=function(h){return{$$typeof:n1,value:h}},e.deferredUpdates=function(h){var g=Ne,k=gr.transition;try{return gr.transition=null,Ne=16,h()}finally{Ne=g,gr.transition=k}},e.discreteUpdates=function(h,g,k,I,T){var O=Ne,W=gr.transition;try{return gr.transition=null,Ne=1,h(g,k,I,T)}finally{Ne=O,gr.transition=W,zt===0&&Ad()}},e.findAllNodes=Lk,e.findBoundingRects=function(h,g){if(!et)throw Error(i(363));g=Lk(h,g),h=[];for(var k=0;k<g.length;k++)h.push(Vt(g[k]));for(g=h.length-1;0<g;g--){k=h[g];for(var I=k.x,T=I+k.width,O=k.y,W=O+k.height,le=g-1;0<=le;le--)if(g!==le){var ye=h[le],Re=ye.x,qe=Re+ye.width,It=ye.y,Be=It+ye.height;if(I>=Re&&O>=It&&T<=qe&&W<=Be){h.splice(g,1);break}else if(I!==Re||k.width!==ye.width||Be<O||It>W){if(!(O!==It||k.height!==ye.height||qe<I||Re>T)){Re>I&&(ye.width+=Re-I,ye.x=I),qe<T&&(ye.width=T-Re),h.splice(g,1);break}}else{It>O&&(ye.height+=It-O,ye.y=O),Be<W&&(ye.height=W-It),h.splice(g,1);break}}}return h},e.findHostInstance=CR,e.findHostInstanceWithNoPortals=function(h){return h=P(h),h=h!==null?B(h):null,h===null?null:h.stateNode},e.findHostInstanceWithWarning=function(h){return CR(h)},e.flushControlled=function(h){var g=zt;zt|=1;var k=gr.transition,I=Ne;try{gr.transition=null,Ne=1,h()}finally{Ne=I,gr.transition=k,zt=g,zt===0&&(Ad(),kr())}},e.flushPassiveEffects=nc,e.flushSync=hR,e.focusWithin=function(h,g){if(!et)throw Error(i(363));for(h=Pk(h),g=cR(h,g),g=Array.from(g),h=0;h<g.length;){var k=g[h++];if(!Zt(k)){if(k.tag===5&&Et(k.stateNode))return!0;for(k=k.child;k!==null;)g.push(k),k=k.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ne},e.getFindAllNodesFailureDescription=function(h,g){if(!et)throw Error(i(363));var k=0,I=[];h=[Pk(h),0];for(var T=0;T<h.length;){var O=h[T++],W=h[T++],le=g[W];if((O.tag!==5||!Zt(O))&&(Ak(O,le)&&(I.push(Dk(le)),W++,W>k&&(k=W)),W<g.length))for(O=O.child;O!==null;)h.push(O,W),O=O.sibling}if(k<g.length){for(h=[];k<g.length;k++)h.push(Dk(g[k]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},e.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return X(h.child.stateNode);default:return h.child.stateNode}},e.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:MU,findFiberByHostInstance:h.findFiberByHostInstance||PU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)h=!0;else{try{st=g.inject(h),vt=g}catch{}h=!!g.checkDCE}}return h},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(h,g,k,I){if(!et)throw Error(i(363));h=Lk(h,g);var T=jn(h,k,I).disconnect;return{disconnect:function(){T()}}},e.registerMutableSourceForHydration=function(h,g){var k=g._getVersion;k=k(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,k]:h.mutableSourceEagerHydrationData.push(g,k)},e.runWithPriority=function(h,g){var k=Ne;try{return Ne=h,g()}finally{Ne=k}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(h,g,k,I){var T=g.current,O=Ca(),W=Al(T);return k=SR(k),g.context===null?g.context=k:g.pendingContext=k,g=Ds(O,W),g.payload={element:h},I=I===void 0?null:I,I!==null&&(g.callback=I),h=Ol(T,g,W),h!==null&&(Hi(h,T,W,O),D0(h,T,W)),W},e};ED.exports=Pie;var Aie=ED.exports;const Die=Ki(Aie);var ID={exports:{}},Bc={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/Bc.ConcurrentRoot=1,Bc.ContinuousEventPriority=4,Bc.DefaultEventPriority=16,Bc.DiscreteEventPriority=1,Bc.IdleEventPriority=536870912,Bc.LegacyRoot=0,ID.exports=Bc;var TD=ID.exports;const ND={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let _D=!1,RD=!1;const U3=".react-konva-event",Lie=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Fie=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Bie={};function hv(t,e,n=Bie){if(!_D&&"zIndex"in e&&(console.warn(Fie),_D=!0),!RD&&e.draggable){var r=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;r&&!a&&(console.warn(Lie),RD=!0)}for(var i in n)if(!ND[i]){var o=i.slice(0,2)==="on",s=n[i]!==e[i];if(o&&s){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[i])}var u=!e.hasOwnProperty(i);u&&t.setAttr(i,void 0)}var c=e._useStrictMode,d={},p=!1;const f={};for(var i in e)if(!ND[i]){var o=i.slice(0,2)==="on",m=n[i]!==e[i];if(o&&m){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[i]&&(f[l]=e[i])}!o&&(e[i]!==n[i]||c&&e[i]!==t.getAttr(i))&&(p=!0,d[i]=e[i])}p&&(t.setAttrs(d),bu(t));for(var l in f)t.on(l+U3,f[l])}function bu(t){if(!Lt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const $D={},zie={};yg.Node.prototype._applyProps=hv;function jie(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),bu(t)}function Vie(t,e,n){let r=yg[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=yg.Group);const a={},i={};for(var o in e){var s=o.slice(0,2)==="on";s?i[o]=e[o]:a[o]=e[o]}const l=new r(a);return hv(l,i),l}function Uie(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function Wie(t,e,n){return!1}function Gie(t){return t}function Hie(){return null}function qie(){return null}function Kie(t,e,n,r){return zie}function Xie(){}function Yie(t){}function Qie(t,e){return!1}function Zie(){return $D}function Jie(){return $D}const eoe=setTimeout,toe=clearTimeout,noe=-1;function roe(t,e){return!1}const aoe=!1,ioe=!0,ooe=!0;function soe(t,e){e.parent===t?e.moveToTop():t.add(e),bu(t)}function loe(t,e){e.parent===t?e.moveToTop():t.add(e),bu(t)}function OD(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),bu(t)}function uoe(t,e,n){OD(t,e,n)}function coe(t,e){e.destroy(),e.off(U3),bu(t)}function doe(t,e){e.destroy(),e.off(U3),bu(t)}function poe(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function hoe(t,e,n){}function foe(t,e,n,r,a){hv(t,a,r)}function goe(t){t.hide(),bu(t)}function moe(t){}function yoe(t,e){(e.visible==null||e.visible)&&t.show()}function boe(t,e){}function voe(t){}function xoe(){}const woe=()=>TD.DefaultEventPriority,koe=Object.freeze(Object.defineProperty({__proto__:null,appendChild:soe,appendChildToContainer:loe,appendInitialChild:jie,cancelTimeout:toe,clearContainer:voe,commitMount:hoe,commitTextUpdate:poe,commitUpdate:foe,createInstance:Vie,createTextInstance:Uie,detachDeletedInstance:xoe,finalizeInitialChildren:Wie,getChildHostContext:Jie,getCurrentEventPriority:woe,getPublicInstance:Gie,getRootHostContext:Zie,hideInstance:goe,hideTextInstance:moe,idlePriority:nf.unstable_IdlePriority,insertBefore:OD,insertInContainerBefore:uoe,isPrimaryRenderer:aoe,noTimeout:noe,now:nf.unstable_now,prepareForCommit:Hie,preparePortalMount:qie,prepareUpdate:Kie,removeChild:coe,removeChildFromContainer:doe,resetAfterCommit:Xie,resetTextContent:Yie,run:nf.unstable_runWithPriority,scheduleTimeout:eoe,shouldDeprioritizeSubtree:Qie,shouldSetTextContent:roe,supportsMutation:ooe,unhideInstance:yoe,unhideTextInstance:boe,warnsIfNotActing:ioe},Symbol.toStringTag,{value:"Module"}));var Soe=Object.defineProperty,Coe=Object.defineProperties,Eoe=Object.getOwnPropertyDescriptors,MD=Object.getOwnPropertySymbols,Ioe=Object.prototype.hasOwnProperty,Toe=Object.prototype.propertyIsEnumerable,PD=(t,e,n)=>e in t?Soe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AD=(t,e)=>{for(var n in e||(e={}))Ioe.call(e,n)&&PD(t,n,e[n]);if(MD)for(var n of MD(e))Toe.call(e,n)&&PD(t,n,e[n]);return t},Noe=(t,e)=>Coe(t,Eoe(e));function DD(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const a=DD(r,e,n);if(a)return a;r=e?null:r.sibling}}function LD(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const W3=LD(R.createContext(null));class FD extends R.Component{render(){return R.createElement(W3.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:BD,ReactCurrentDispatcher:zD}=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _oe(){const t=R.useContext(W3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const n of[BD?.current,t,t?.alternate]){if(!n)continue;const r=DD(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===e)return!0;i=i.next}});if(r)return r}},[t,e])}function Roe(){var t,e;const n=_oe(),[r]=R.useState(()=>new Map);r.clear();let a=n;for(;a;){const i=(t=a.type)==null?void 0:t._context;i&&i!==W3&&!r.has(i)&&r.set(i,(e=zD?.current)==null?void 0:e.readContext(LD(i))),a=a.return}return r}function $oe(){const t=Roe();return R.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>R.createElement(e,null,R.createElement(n.Provider,Noe(AD({},r),{value:t.get(n)}))),e=>R.createElement(FD,AD({},e))),[t])}function Ooe(t){const e=G.useRef({});return G.useLayoutEffect(()=>{e.current=t}),G.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Moe=t=>{const e=G.useRef(),n=G.useRef(),r=G.useRef(),a=Ooe(t),i=$oe(),o=s=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(s):l.current=s)};return G.useLayoutEffect(()=>(n.current=new yg.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=bg.createContainer(n.current,TD.LegacyRoot,!1,null),bg.updateContainer(G.createElement(i,{},t.children),r.current),()=>{yg.isBrowser&&(o(null),bg.updateContainer(null,r.current,null),n.current.destroy())}),[]),G.useLayoutEffect(()=>{o(n.current),hv(n.current,t,a),bg.updateContainer(G.createElement(i,{},t.children),r.current,null)}),G.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},G3="Layer",jD="Image",Poe="Transformer",bg=Die(koe);bg.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:G.version,rendererPackageName:"react-konva"});const Aoe=G.forwardRef((t,e)=>G.createElement(FD,{},G.createElement(Moe,{...t,forwardedRef:e})));var zc=R,Doe=function(t,e,n){const r=zc.useRef("loading"),a=zc.useRef(),[i,o]=zc.useState(0),s=zc.useRef(),l=zc.useRef(),u=zc.useRef();return(s.current!==t||l.current!==e||u.current!==n)&&(r.current="loading",a.current=void 0,s.current=t,l.current=e,u.current=n),zc.useLayoutEffect(function(){if(!t)return;var c=document.createElement("img");function d(){r.current="loaded",a.current=c,o(Math.random())}function p(){r.current="failed",a.current=void 0,o(Math.random())}return c.addEventListener("load",d),c.addEventListener("error",p),e&&(c.crossOrigin=e),n&&(c.referrerPolicy=n),c.src=t,function(){c.removeEventListener("load",d),c.removeEventListener("error",p)}},[t,e,n]),[a.current,r.current]};const VD=Ki(Doe),UD=({front:t})=>{const{frame:e}=Tc(),[n]=VD(t?e.front:e.image,"anonymous");return re.jsx(jD,{image:n,draggable:!1})},Loe=({canvasImage:t,isSelected:e,onSelect:n})=>{const r=R.useRef(),a=R.useRef(),[i]=VD(t.image,"anonymous"),o=Tc(c=>c.transformCanvasImage);R.useEffect(()=>{var c;e&&(a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw())},[e]),R.useEffect(()=>{i&&r.current.cache()},[i]);const s=()=>{o({...t,isDragging:!0})},l=c=>{o({...t,isDragging:!1,x:c.target.x(),y:c.target.y()})},u=()=>{var c;const d=r.current,p=d.scaleX(),f=d.scaleY(),m=Math.max(5,d.width()*p),y=Math.max(d.height()*f);o({...t,x:d.x(),y:d.y(),width:m,height:y}),a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw()};return re.jsxs(re.Fragment,{children:[re.jsx(jD,{brightness:t.brightness,contrast:t.contrast,draggable:!0,filters:[CD.Filters.Brighten,CD.Filters.Contrast],id:t.id,image:i,onClick:n,onDragEnd:l,onDragStart:s,onTap:n,onTransformEnd:u,opacity:t.opacity||1,ref:r,scaleX:.5,scaleY:.5,x:t.x,y:t.y},t.id),e&&re.jsx(Poe,{ref:a,flipEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],borderStroke:"#BC13FE"})]})},Foe=()=>{const{addToCanvas:t,artworkList:e,canvasList:n,frame:r,moveCanvasImage:a,removeFromCanvas:i,setFrame:o,transformCanvasImage:s}=Tc(),{t:l}=su(),u=R.useRef(null),[c,d]=R.useState(null),[p,f]=R.useState(0),[m,y]=R.useState(0),[v,b]=R.useState(1),[x,w]=R.useState(!1),[S,C]=R.useState(!1),[E,_]=R.useState(!1),N=1080,M=1080;R.useEffect(()=>{const ie=()=>{const xe=(window.innerWidth*.9||0)/N;u.current&&(u.current.width(N*xe),u.current.height(M*xe),u.current.scale({x:xe,y:xe}))};return ie(),window.addEventListener("resize",ie),()=>{window.removeEventListener("resize",ie)}},[]);const P=ie=>{ie.target===ie.target.getStage()&&d(null)},L=ie=>{d(ie),f(ie.brightness),y(ie.contrast),b(ie.opacity)},j=ie=>{c&&a(c.id,ie)},B=(ie,xe)=>{if(!c)return;const q={...c,[xe]:ie};switch(s(q),xe){case"brightness":f(ie);break;case"contrast":y(ie);break;case"opacity":b(ie);break}},K=()=>{c&&(i(c.id),d(null))},X=async()=>{if(navigator.share)try{const ie=u.current;if(!ie){console.error("Canvas element not found");return}const xe=await fetch(ie.toDataURL()).then(q=>q.blob());if(!xe){console.error("Failed to create blob from canvas");return}await navigator.share({files:[new File([xe],"canvas.png",{type:"image/png"})],title:"GLAMorous Europe",text:"Check out my GLAMorous Europe artwork!"}),console.log("Share successful")}catch(ie){console.error("Error sharing:",ie)}else console.log("Web Share API not supported")},Z=()=>{var ie;const xe=(ie=u.current)==null?void 0:ie.toDataURL();xe&&Pte.saveAs(xe,"GLAMorousEurope.png")},H=()=>{w(!x),_(!1),C(!1)},F=()=>{C(!S),_(!1),w(!1)},Y=()=>{_(!E),C(!1),w(!1)},[{canDrop:Q,isOver:ne},se]=KH(()=>({accept:"artwork",drop:(ie,xe)=>{const q=xe.getClientOffset();if(ie&&q){const oe=e.find(he=>he.id===ie.id);if(oe){const he=u.current;if(he){const Ee=q.x-he.container().getBoundingClientRect().left,Ie=q.y-he.container().getBoundingClientRect().top;t(oe.image,Ee,Ie)}}}},collect:ie=>({isOver:ie.isOver(),canDrop:ie.canDrop()})})),pe=Q&&ne;let de="transparent";return pe&&(de="#ebb2ff"),re.jsxs(re.Fragment,{children:[re.jsxs(io,{margin:"my-0",className:"flex flex-wrap gap-1 container justify-center content-center text-center mx-auto",children:[re.jsx(br,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:X,children:re.jsx(Ra,{material:re.jsx(yte,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:Z,children:re.jsx(Ra,{material:re.jsx(Fee,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-4 text-xl text-black",rounded:!0,inline:!0,onClick:()=>o(Math.max(1,r.id-1)),children:re.jsx(Ra,{material:re.jsx(Yee,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-4 text-xl text-black",rounded:!0,inline:!0,onClick:()=>o(Math.min(5,r.id+1)),children:re.jsx(Ra,{material:re.jsx(Jee,{className:"w-6 h-6"})})}),c&&re.jsxs(re.Fragment,{children:[re.jsx(br,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:()=>j(!0),children:re.jsx(Ra,{material:re.jsx(Wee,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:()=>j(!1),children:re.jsx(Ra,{material:re.jsx(jee,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:K,children:re.jsx(Ra,{material:re.jsx(Ite,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-2 text-black",style:{backgroundColor:E&&"#BC13FE"},rounded:!0,inline:!0,onClick:Y,children:re.jsx(Ra,{material:re.jsx($te,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-2 text-black",style:{backgroundColor:x&&"#BC13FE"},rounded:!0,inline:!0,onClick:H,children:re.jsx(Ra,{material:re.jsx(Ste,{className:"w-6 h-6"})})}),re.jsx(br,{className:"p-2 text-black",style:{backgroundColor:S&&"#BC13FE"},rounded:!0,inline:!0,onClick:F,children:re.jsx(Ra,{material:re.jsx(Mte,{className:"w-6 h-6"})})}),E&&re.jsx(kp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:re.jsx(Sp,{innerClassName:"flex space-x-4 w-6",innerChildren:re.jsxs(re.Fragment,{children:[re.jsx("p",{children:l("artworkCanvasOpacity")}),re.jsx(ib,{value:v,min:0,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"opacity")})]})})}),x&&re.jsx(kp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:re.jsx(Sp,{innerClassName:"flex space-x-4 w-6",innerChildren:re.jsxs(re.Fragment,{children:[re.jsx("p",{children:l("artworkCanvasBrightness")}),re.jsx(ib,{value:p,min:-1,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"brightness")})]})})}),S&&re.jsx(kp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:re.jsx(Sp,{innerClassName:"flex space-x-4 w-6",innerChildren:re.jsxs(re.Fragment,{children:[re.jsx("p",{children:l("artworkCanvasContrast")}),re.jsx(ib,{value:m,min:-100,max:100,step:1,onChange:ie=>B(parseFloat(ie.target.value),"contrast")})]})})})]})]}),re.jsx("div",{className:"mx-auto flex items-center",ref:se,children:re.jsxs(Aoe,{style:{border:"4px solid",borderColor:de},width:N,height:M,ref:u,onMouseDown:P,onTouchStart:P,children:[re.jsx(G3,{listening:!1,children:re.jsx(UD,{front:!1})}),re.jsx(G3,{children:n.map(ie=>re.jsx(Loe,{canvasImage:ie,isSelected:c?.id===ie.id,onSelect:()=>L(ie)},ie.id))}),re.jsx(G3,{listening:!1,children:re.jsx(UD,{front:!0})})]})})]})};function Boe({id:t,image:e}){const[{opacity:n},r,a]=BH(()=>({type:"artwork",item:{id:t,image:e},collect:o=>({opacity:o.isDragging()?.4:1})})),i=({item:o,style:s})=>re.jsx("img",{src:o.image,alt:o.id,style:{...s,cursor:"move",maxHeight:"100px",width:"auto",zIndex:99}});return re.jsxs(re.Fragment,{children:[re.jsx(bH,{connect:a,src:e}),re.jsx(U6,{children:i}),re.jsx("img",{src:e,alt:t,role:"presentation",style:{cursor:"move",marginRight:"10px",maxHeight:"100px",opacity:n,scrollSnapAlign:"start",width:"auto"},ref:r})]})}function zoe(){const{t}=su(),{artworkList:e}=Tc();return re.jsxs(io,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx("div",{className:"p-2",children:re.jsx("h1",{className:"text-xl",children:t("artworkTitle")})}),re.jsx(io,{margin:"my-4",className:"flex mx-auto overflow-x-auto",style:{maxHeight:"100px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:e.map((n,r)=>re.jsx(Boe,{...n},n.id+r))}),re.jsx(Foe,{})]})}let joe={data:""},Voe=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||joe,Uoe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Woe=/\/\*[^]*?\*\/|  +/g,WD=/\n+/g,vu=(t,e)=>{let n="",r="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?vu(o,i):i+"{"+vu(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=vu(o,e?e.replace(/([^,])+/g,s=>i.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,s):s?s+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=vu.p?vu.p(i,o):i+":"+o+";")}return n+(e&&a?e+"{"+a+"}":a)+r},sl={},GD=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+GD(t[n]);return e}return t},Goe=(t,e,n,r,a)=>{let i=GD(t),o=sl[i]||(sl[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!sl[o]){let l=i!==t?t:(u=>{let c,d,p=[{}];for(;c=Uoe.exec(u.replace(Woe,""));)c[4]?p.shift():c[3]?(d=c[3].replace(WD," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][c[1]]=c[2].replace(WD," ").trim();return p[0]})(t);sl[o]=vu(a?{["@keyframes "+o]:l}:l,n?"":"."+o)}let s=n&&sl.g?sl.g:null;return n&&(sl.g=sl[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(sl[o],e,r,s),o},Hoe=(t,e,n)=>t.reduce((r,a,i)=>{let o=e[i];if(o&&o.call){let s=o(n),l=s&&s.props&&s.props.className||/^go/.test(s)&&s;o=l?"."+l:s&&typeof s=="object"?s.props?"":vu(s,""):s===!1?"":s}return r+a+(o??"")},"");function fv(t){let e=this||{},n=t.call?t(e.p):t;return Goe(n.unshift?n.raw?Hoe(n,[].slice.call(arguments,1),e.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(e.p):a),{}):n,Voe(e.target),e.g,e.o,e.k)}let HD,H3,q3;fv.bind({g:1});let ll=fv.bind({k:1});function qoe(t,e,n,r){vu.p=e,HD=t,H3=n,q3=r}function xu(t,e){let n=this||{};return function(){let r=arguments;function a(i,o){let s=Object.assign({},i),l=s.className||a.className;n.p=Object.assign({theme:H3&&H3()},s),n.o=/ *go\d+/.test(l),s.className=fv.apply(n,r)+(l?" "+l:""),e&&(s.ref=o);let u=t;return t[0]&&(u=s.as||t,delete s.as),q3&&u[0]&&q3(s),HD(u,s)}return e?e(a):a}}var Koe=t=>typeof t=="function",gv=(t,e)=>Koe(t)?t(e):t,Xoe=(()=>{let t=0;return()=>(++t).toString()})(),qD=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Yoe=20,mv=new Map,Qoe=1e3,KD=t=>{if(mv.has(t))return;let e=setTimeout(()=>{mv.delete(t),jc({type:4,toastId:t})},Qoe);mv.set(t,e)},Zoe=t=>{let e=mv.get(t);e&&clearTimeout(e)},K3=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Yoe)};case 1:return e.toast.id&&Zoe(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return t.toasts.find(i=>i.id===n.id)?K3(t,{type:1,toast:n}):K3(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?KD(r):t.toasts.forEach(i=>{KD(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},yv=[],bv={toasts:[],pausedAt:void 0},jc=t=>{bv=K3(bv,t),yv.forEach(e=>{e(bv)})},Joe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ese=(t={})=>{let[e,n]=R.useState(bv);R.useEffect(()=>(yv.push(n),()=>{let a=yv.indexOf(n);a>-1&&yv.splice(a,1)}),[e]);let r=e.toasts.map(a=>{var i,o;return{...t,...t[a.type],...a,duration:a.duration||((i=t[a.type])==null?void 0:i.duration)||t?.duration||Joe[a.type],style:{...t.style,...(o=t[a.type])==null?void 0:o.style,...a.style}}});return{...e,toasts:r}},tse=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||Xoe()}),vg=t=>(e,n)=>{let r=tse(e,t,n);return jc({type:2,toast:r}),r.id},Mi=(t,e)=>vg("blank")(t,e);Mi.error=vg("error"),Mi.success=vg("success"),Mi.loading=vg("loading"),Mi.custom=vg("custom"),Mi.dismiss=t=>{jc({type:3,toastId:t})},Mi.remove=t=>jc({type:4,toastId:t}),Mi.promise=(t,e,n)=>{let r=Mi.loading(e.loading,{...n,...n?.loading});return t.then(a=>(Mi.success(gv(e.success,a),{id:r,...n,...n?.success}),a)).catch(a=>{Mi.error(gv(e.error,a),{id:r,...n,...n?.error})}),t};var nse=(t,e)=>{jc({type:1,toast:{id:t,height:e}})},rse=()=>{jc({type:5,time:Date.now()})},ase=t=>{let{toasts:e,pausedAt:n}=ese(t);R.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(s=>{if(s.duration===1/0)return;let l=(s.duration||0)+s.pauseDuration-(i-s.createdAt);if(l<0){s.visible&&Mi.dismiss(s.id);return}return setTimeout(()=>Mi.dismiss(s.id),l)});return()=>{o.forEach(s=>s&&clearTimeout(s))}},[e,n]);let r=R.useCallback(()=>{n&&jc({type:6,time:Date.now()})},[n]),a=R.useCallback((i,o)=>{let{reverseOrder:s=!1,gutter:l=8,defaultPosition:u}=o||{},c=e.filter(f=>(f.position||u)===(i.position||u)&&f.height),d=c.findIndex(f=>f.id===i.id),p=c.filter((f,m)=>m<d&&f.visible).length;return c.filter(f=>f.visible).slice(...s?[p+1]:[0,p]).reduce((f,m)=>f+(m.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:nse,startPause:rse,endPause:r,calculateOffset:a}}},ise=ll`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ose=ll`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sse=ll`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,lse=xu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ise} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ose} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${sse} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,use=ll`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,cse=xu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${use} 1s linear infinite;
`,dse=ll`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,pse=ll`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,hse=xu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${dse} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${pse} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fse=xu("div")`
  position: absolute;
`,gse=xu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,mse=ll`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yse=xu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${mse} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,bse=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?R.createElement(yse,null,e):e:n==="blank"?null:R.createElement(gse,null,R.createElement(cse,{...r}),n!=="loading"&&R.createElement(fse,null,n==="error"?R.createElement(lse,{...r}):R.createElement(hse,{...r})))},vse=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xse=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,wse="0%{opacity:0;} 100%{opacity:1;}",kse="0%{opacity:1;} 100%{opacity:0;}",Sse=xu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Cse=xu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ese=(t,e)=>{let n=t.includes("top")?1:-1,[r,a]=qD()?[wse,kse]:[vse(n),xse(n)];return{animation:e?`${ll(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ll(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ise=R.memo(({toast:t,position:e,style:n,children:r})=>{let a=t.height?Ese(t.position||e||"top-center",t.visible):{opacity:0},i=R.createElement(bse,{toast:t}),o=R.createElement(Cse,{...t.ariaProps},gv(t.message,t));return R.createElement(Sse,{className:t.className,style:{...a,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):R.createElement(R.Fragment,null,i,o))});qoe(R.createElement);var Tse=({id:t,className:e,style:n,onHeightUpdate:r,children:a})=>{let i=R.useCallback(o=>{if(o){let s=()=>{let l=o.getBoundingClientRect().height;r(t,l)};s(),new MutationObserver(s).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return R.createElement("div",{ref:i,className:e,style:n},a)},Nse=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:qD()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...a}},_se=fv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vv=16,Rse=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:s,handlers:l}=ase(n);return R.createElement("div",{style:{position:"fixed",zIndex:9999,top:vv,left:vv,right:vv,bottom:vv,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},s.map(u=>{let c=u.position||e,d=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),p=Nse(c,d);return R.createElement(Tse,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?_se:"",style:p},u.type==="custom"?gv(u.message,u):a?a(u):R.createElement(Ise,{toast:u,position:c}))}))},$se=Mi,XD={exports:{}},Ose="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Mse=Ose,Pse=Mse;function YD(){}function QD(){}QD.resetWarningCache=YD;var Ase=function(){function t(r,a,i,o,s,l){if(l!==Pse){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:QD,resetWarningCache:YD};return n.PropTypes=n,n};XD.exports=Ase();var Dse=XD.exports;const ca=Ki(Dse);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X3=function(t,e){return X3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},X3(t,e)};function ZD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Vo=function(){return Vo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Vo.apply(this,arguments)};function JD(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Vc(t,e){for(var n=0,r=e.length,a=t.length;n<r;n++,a++)t[a]=e[n];return t}var Lse=function(t){return Object.keys(t).filter(function(e){return t[e]}).join(" ")},xv=function(t,e){return t.x===e.x&&t.y===e.y},wv=function(t,e){return!t&&e||t&&!e||t.length!==e.length?!1:t.every(function(n,r){return xv(n,e[r])})},Uc=function(t,e){var n=t.x,r=t.y;return e===void 0&&(e=1),{x:Math.round((n+Number.EPSILON)*e)/e,y:Math.round((r+Number.EPSILON)*e)/e}},Fse=function(t,e,n){n===void 0&&(n=0);var r=t.findIndex(function(a){return Math.max(Math.abs(a.x-e.x),Math.abs(a.y-e.y))<=n});return{point:Vo({},t[r]||{x:NaN,y:NaN}),index:r}},e8=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},t8=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},Bse=function(t,e,n){var r=e8(t,e),a=t8(t,e),i=Math.round(a/n)*n;return{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i)}},zse=function(t,e,n){var r=e8(t,e),a=t8(t,e),i=n.reduce(function(o,s){return Math.abs(s-a)<Math.abs(o-a)?s:o},1/0);return i!==1/0&&(e.x=t.x+r*Math.cos(i),e.y=t.y+r*Math.sin(i)),e},jse=function(t){for(var e=[],n=1;n<t.length;n++){var r=Math.atan2(t[n].y-t[n-1].y,t[n].x-t[n-1].x),a=r+Math.PI;e.push(r,a>Math.PI?a-2*Math.PI:a)}return e.filter(function(i,o,s){return s.indexOf(i)===o})};function Vse(t,e,n,r){r===void 0&&(r=!0);var a=new Image;a.crossOrigin="Anonymous";var i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return n(new Error("CTX is null"),i);a.onerror=function(){n(new Error("Failed to load image"),i)},a.onload=function(){try{if(i.width=a.naturalWidth+2,i.height=a.naturalHeight+2,o.drawImage(a,0,0),e.length<3){n(null,i);return}if(o.beginPath(),o.moveTo(0,0),o.lineTo(i.width,0),o.lineTo(i.width,i.height),o.lineTo(0,i.height),o.lineTo(0,0),o.lineTo(e[0].x+1,e[0].y+1),e.slice(1).forEach(function(w){var S=w.x,C=w.y;return o.lineTo(S+1,C+1)}),o.lineTo(e[0].x+1,e[0].y+1),o.lineTo(0,0),o.closePath(),o.clip("evenodd"),o.globalCompositeOperation="destination-out",o.fill(),r){var s=e.map(function(w){var S=w.x;return S+1}),l=e.map(function(w){var S=w.y;return S+1}),u=[Math.min.apply(null,s),Math.min.apply(null,l)],c=u[0],d=u[1],p=[Math.max.apply(null,s),Math.max.apply(null,l)],f=p[0],m=p[1],y=[f-c,m-d],v=y[0],b=y[1],x=o.getImageData(c,d,v,b);i.width=v,i.height=b,o.putImageData(x,0,0)}n(null,i)}catch(w){n(w instanceof Error?w:new Error(String(w)),i)}},a.src=t}var n8=function(){function t(e){this.getSvgElement=e}return t.prototype.getSvg=function(){var e=this.getSvgElement();if(!e)throw new Error("SVG is null");return e},t.prototype.getCTM=function(){var e=this.getSvg(),n=e.getCTM();if(n===null){var r=e.querySelector('rect[visibility="hidden"]');n=r.getCTM()}if(!n)throw new Error("CTM is null");return n},t.prototype.getViewboxSize=function(){return this.getSvg().viewBox.baseVal},t.prototype.getRealSize=function(){var e=this.getSvg();return{width:e.clientWidth,height:e.clientHeight}},t.prototype.getViewboxOffset=function(){var e=this.getSvg(),n=this.getRealSize(),r=n.width,a=n.height,i=this.getViewboxSize(),o=i.width,s=i.height,l=Object.assign(e.createSVGPoint(),{x:r,y:a}),u=this.getCTM(),c=l.matrixTransform(u.inverse()),d=c.x,p=c.y;return{x:d-o,y:p-s}},t.prototype.convertViewboxPointsToReal=function(e){var n=this.getSvg(),r=this.getCTM();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Uc(s)})},t.prototype.convertRealPointsToViewbox=function(e){var n=this.getSvg(),r=this.getCTM().inverse();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Uc(s,1e3)})},t.prototype.getBorderPoints=function(e){e===void 0&&(e=!0);var n=this.getViewboxSize(),r=n.width,a=n.height,i=this.getViewboxOffset(),o=i.x,s=i.y,l=[{x:-o,y:-s},{x:r+o,y:-s},{x:r+o,y:a+s},{x:-o,y:a+s}];return e&&l.push({x:-o,y:-s}),l},t.prototype.isAboveTheBorder=function(e){var n=e.x,r=e.y,a=this.getViewboxSize(),i=a.width,o=a.height,s=this.getViewboxOffset(),l=s.x,u=s.y;return n<-l||n>i+l||r<-u||r>o+u},t.prototype.getMouseCoordinates=function(e){var n=e,r=n.changedTouches&&n.touches?n.changedTouches[0]||n.touches[0]:n,a=r.clientX,i=r.clientY,o=this.getSvg(),s=o.getScreenCTM();if(!s)throw new Error("ScreenCTM is null");var l=o.createSVGPoint();l.x=a,l.y=i;var u=l.matrixTransform(s.inverse()),c=u.x,d=u.y;return{x:c,y:d}},t}(),r8=function(t){return function(e){ZD(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.ref=G.createRef(),r.svg=new n8(function(){var a,i;return(i=(a=r.ref)===null||a===void 0?void 0:a.current)===null||i===void 0?void 0:i.ownerSVGElement}),r.dragLastPosition=null,r.wasMoved=!1,r.onMouseTouchDown=function(a){if(a.target===r.ref.current&&r.props.draggable){a.stopImmediatePropagation(),a.preventDefault();var i=a.target;r.dragLastPosition=r.getMousePosition(a),i.ownerSVGElement&&i.ownerSVGElement.focus({preventScroll:!0})}},r.onMouseTouchMove=function(a){if(r.dragLastPosition){a.stopImmediatePropagation(),a.preventDefault();var i=r.getMousePosition(a),o=i.x,s=i.y,l=o-r.dragLastPosition.x,u=s-r.dragLastPosition.y;!r.wasMoved&&r.props.onDragStart&&r.props.onDragStart({x:r.dragLastPosition.x,y:r.dragLastPosition.y,dx:l,dy:u}),r.props.onDrag&&r.props.onDrag({dx:l,dy:u}),r.dragLastPosition={x:o,y:s},r.wasMoved=!0}},r.onMouseTouchUp=function(a){r.dragLastPosition&&r.wasMoved&&(a.stopImmediatePropagation(),a.preventDefault(),(a instanceof MouseEvent||!a.touches)&&window.addEventListener("click",function(i){return i.stopPropagation()},{capture:!0,once:!0}),r.props.onDragEnd&&r.props.onDragEnd({x:r.dragLastPosition.x,y:r.dragLastPosition.y})),r.dragLastPosition=null,r.wasMoved=!1},r}return n.prototype.render=function(){var r=this.props,a=r.draggable;r.onDrag,r.onDragStart,r.onDragEnd;var i=JD(r,["draggable","onDrag","onDragStart","onDragEnd"]);return G.createElement(t,Vo({ref:this.ref},i,{draggable:a}))},n.prototype.componentDidUpdate=function(r){r.draggable&&!this.props.draggable&&this.dragLastPosition&&this.wasMoved&&(this.props.onDragEnd&&this.props.onDragEnd({x:this.dragLastPosition.x,y:this.dragLastPosition.y}),this.dragLastPosition=null,this.wasMoved=!1)},n.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onMouseTouchDown,!0),window.addEventListener("mousemove",this.onMouseTouchMove,!0),window.addEventListener("mouseup",this.onMouseTouchUp,!0),window.addEventListener("touchstart",this.onMouseTouchDown,!0),window.addEventListener("touchmove",this.onMouseTouchMove,!0),window.addEventListener("touchend",this.onMouseTouchUp,!0)},n.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onMouseTouchDown),window.removeEventListener("mousemove",this.onMouseTouchMove),window.removeEventListener("mouseup",this.onMouseTouchUp),window.removeEventListener("touchstart",this.onMouseTouchDown),window.removeEventListener("touchmove",this.onMouseTouchMove),window.removeEventListener("touchend",this.onMouseTouchUp)},n.prototype.getMousePosition=function(r){var a=r;return this.svg.getMouseCoordinates(a)},n}(G.Component)},Use=r8(G.forwardRef(function(t,e){var n=t.path,r=t.animate,a=t.draggable;return G.createElement("polyline",{ref:e,style:{cursor:a?"move":""},points:n.map(function(i){var o=i.x,s=i.y;return o+","+s}).join(" "),fill:"rgba(0,0,0,0)",stroke:"white",strokeWidth:"1.5",shapeRendering:"geometricPrecision",strokeDasharray:"3",strokeDashoffset:"0",vectorEffect:"non-scaling-stroke"},r&&G.createElement("animate",{attributeName:"stroke-dashoffset",values:"0;1000;0",dur:"100s",repeatCount:"indefinite"}))}));function Wse(t){var e=t.path;return G.createElement("polygon",{style:{pointerEvents:"none",transform:"translate(-1px, -1px)"},points:e.map(function(n){var r=n.x,a=n.y;return r+","+a}).join(" "),fill:"rgba(0, 0, 0, 0.5)",fillRule:"evenodd",stroke:"null",shapeRendering:"geometricPrecision"})}var Gse=r8(G.forwardRef(function(t,e){var n=t.x,r=t.y,a=t.onClickTouchEvent,i=t.draggable,o=t.style,s=o.cursor,l=s===void 0?i?"move":"default":s,u=JD(o,["cursor"]);return G.createElement("rect",{style:Vo({cursor:l},u),ref:e,x:n-10,y:r-10,onClick:function(c){c.stopPropagation(),c.preventDefault(),a(c)},onTouchEnd:function(c){c.stopPropagation(),c.preventDefault(),a(c)},width:"20px",height:"20",fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:"1.25",vectorEffect:"non-scaling-stroke"})})),Fr;(function(t){t.ADD="ADD",t.DELETE="DELETE",t.MODIFY="MODIFY",t.MOVE="MOVE",t.RESET="RESET",t.CHANGE="CHANGE"})(Fr||(Fr={}));function Hse(t,e){var n=t.points.length;switch(e.type){case Fr.ADD:{if(t.closed)return[t,!1];if(n>0&&xv(t.points[n-1],e.payload)||n>1&&xv(t.points[n-2],e.payload))return[t,!1];var r=n>2&&xv(t.points[0],e.payload);return r?[{points:Vc([],t.points),closed:!0},!0]:[{points:Vc(Vc([],t.points,!0),[e.payload]),closed:!1},!0]}case Fr.DELETE:return[{points:Vc([],t.points.filter(function(u,c){return e.payload!==c})),closed:n>4&&t.closed},!0];case Fr.MODIFY:{var a=t.points[e.payload.index],i=a.x,o=a.y,s=t.points.map(function(u){var c=u.x,d=u.y;return c===i&&d===o?{x:e.payload.x,y:e.payload.y}:{x:c,y:d}});return[{points:s,closed:t.closed},!!(e.payload.x||e.payload.y)]}case Fr.MOVE:return[{points:t.points.map(function(u){var c=u.x,d=u.y;return{x:c+e.payload.x,y:d+e.payload.y}}),closed:t.closed},!!(e.payload.x||e.payload.y)];case Fr.CHANGE:{var l=!wv(e.payload,t.points);return[{points:e.payload,closed:l?e.payload.length>2:t.closed},l]}case Fr.RESET:return[{points:[],closed:!1},!!t.points.length];default:return[t,!1]}}var qse=function(t){ZD(e,t);function e(n){var r=t.call(this,n)||this;return r.imageRef=G.createRef(),r.svgRef=G.createRef(),r.svg=new n8(function(){var a;return(a=r.svgRef)===null||a===void 0?void 0:a.current}),r.angles=[],r.path={points:[],closed:!1},r.lastEmittedPoints=[],r.lastUpdatedPoints=[],r.imgError=!1,r.setPathFromPropsOnMediaLoad=!0,r.hidePointer=function(){var a=r.path.points[r.path.points.length-1]||{x:0,y:0};r.setPointer(Vo({},a),!0)},r.onShapeDrag=function(a){var i=a.dx,o=a.dy,s=r.path.points.map(function(l){var u=l.x,c=l.y;return{x:u+i,y:c+o}});s.some(function(l){return r.svg.isAboveTheBorder(l)})||r.dispatchPathAction({type:Fr.MOVE,payload:{x:i,y:o}})},r.onPointDrag=function(a,i){var o=i.dx,s=i.dy,l=Vo({},r.path.points[a]);l.x+=o,l.y+=s,r.svg.isAboveTheBorder(l)||r.dispatchPathAction({type:Fr.MODIFY,payload:Vo(Vo({},l),{index:a})})},r.onPointClick=function(a){r.isLoaded()&&!r.props.disabled&&!r.path.closed&&r.dispatchPathAction({type:Fr.ADD,payload:r.path.points[a]})},r.onDragEnd=function(){r.checkIfPathUpdated(!1)},r.onMediaLoaded=function(a){r.setPathFromPropsOnMediaLoad&&(r.setPathStateFromProps(),r.setPathFromPropsOnMediaLoad=!1),r.imgError=!1,r.props.onImageLoad(a)},r.onMediaError=function(a){r.dispatchPathAction({type:Fr.RESET}),r.imgError=!0,r.props.onImageError(a)},r.onClickTouchEvent=function(a){if(r.isLoaded()&&!r.props.disabled){if(r.path.closed){a.target===r.svgRef.current&&r.dispatchPathAction({type:Fr.RESET});return}var i=r.getMousePosition(a)[0];r.svg.isAboveTheBorder(i)?r.hidePointer():r.dispatchPathAction({type:Fr.ADD,payload:Uc(i,1e3),pointer:i})}},r.onClick=function(a){r.onClickTouchEvent(a)},r.onTouchEnd=function(a){a.cancelable&&(a.preventDefault(),r.onClickTouchEvent(a)),r.hidePointer()},r.onMouseTouchMove=function(a){if(r.isLoaded()){var i=r.getMousePosition(a)[0];r.setPointer(i)}},r.onContextMenu=function(a){if(r.isLoaded()&&(a.preventDefault(),!r.props.disabled&&!r.path.closed)){var i=r.getMousePosition(a),o=i[0],s=i[1].index;s>-1?r.dispatchPathAction({type:Fr.DELETE,payload:s,pointer:o}):r.setPointer(o)}},r.state={path:{points:[],closed:!1},pointer:{x:n.viewBox.width/2,y:n.viewBox.width/2}},r}return e.prototype.render=function(){var n=this;return G.createElement("div",{className:Lse({ReactFreeSelect__Component:!0,ReactFreeSelect__Closed:this.state.path.closed,ReactFreeSelect__Disabled:this.props.disabled}),style:Vo({display:"inline-block",position:"relative",margin:"0",padding:"0",fontSize:"0",cursor:this.props.disabled?"not-allowed":"default"},this.props.style)},G.createElement("img",{ref:this.imageRef,src:this.props.src,alt:this.props.imageAlt,crossOrigin:this.props.crossOrigin,style:this.props.imageStyle,onLoad:this.onMediaLoaded,onError:this.onMediaError}),G.createElement("svg",{ref:this.svgRef,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",userSelect:"none",touchAction:"none"},viewBox:"0 0 "+this.props.viewBox.width+" "+this.props.viewBox.height,onMouseMove:this.onMouseTouchMove,onTouchMove:this.onMouseTouchMove,onClick:this.onClick,onTouchEnd:this.onTouchEnd,onContextMenu:this.onContextMenu,onMouseLeave:this.hidePointer},G.createElement("rect",{visibility:"hidden"}),!!this.state.path.points.length&&G.createElement(Wse,{path:this.getPolygonPoints()}),G.createElement(Use,{draggable:this.state.path.closed&&!this.props.disabled,onDrag:this.onShapeDrag,onDragEnd:this.onDragEnd,animate:!this.props.disabled,path:this.getPolylinePoints()}),this.getRoundedPoints().map(function(r,a){var i=r.x,o=r.y;return G.createElement(Gse,{key:a,x:i,y:o,draggable:!n.props.disabled,style:{cursor:!a&&n.state.path.points.length>2&&!n.state.path.closed?"pointer":void 0},onDrag:function(s){var l=s.dx,u=s.dy;return n.onPointDrag(a,{dx:l,dy:u})},onDragEnd:n.onDragEnd,onClickTouchEvent:function(){return n.onPointClick(a)}})})))},e.prototype.componentDidUpdate=function(n){!n.disabled&&this.props.disabled&&!this.path.closed&&this.hidePointer(),n.src&&n.src!==this.props.src?this.dispatchPathAction({type:Fr.RESET}):wv(n.value,this.props.value)||(this.isLoaded()?this.setPathStateFromProps():this.setPathFromPropsOnMediaLoad=!0)},e.prototype.convertPoints=function(n){var r=this.getAspectRatio();return this.svg.convertViewboxPointsToReal(n).map(function(a){var i=a.x,o=a.y;return{x:Math.round(i/r.x),y:Math.round(o/r.y)}})},e.prototype.checkIfPathUpdated=function(n){if(this.path.closed||n){var r=this.convertPoints(this.path.points);wv(r,this.lastUpdatedPoints)||(this.emitOnComplete(r),this.lastUpdatedPoints=r.map(function(a){var i=a.x,o=a.y;return{x:i,y:o}}))}},e.prototype.emitOnChange=function(n){var r=n.points;if(this.props.onChange){var a=this.convertPoints(r);this.lastEmittedPoints=a,this.props.onChange(a)}},e.prototype.emitOnComplete=function(n){this.props.onComplete&&this.props.onComplete(n)},e.prototype.setPointer=function(n,r){var a=n.x,i=n.y;r===void 0&&(r=!1),(r||!this.props.disabled)&&this.setState({path:this.path,pointer:{x:a,y:i}})},e.prototype.dispatchPathAction=function(n){var r=this.path.closed,a=Hse(this.path,n),i=a[0],o=a[1];i.points=i.points.map(function(s){return Uc(s,1e3)}),o&&(this.path=i,this.setState({pointer:n.pointer||this.path.points[this.path.points.length-1]||{x:0,y:0},path:i}),this.angles=jse(i.points),this.emitOnChange(i),[Fr.MODIFY,Fr.MOVE].includes(n.type)||this.checkIfPathUpdated(r))},e.prototype.isLoaded=function(){if(this.imgError||!this.svgRef.current)return!1;var n=this.svgRef.current;return!!(n.width.baseVal.value&&n.height.baseVal.value)},e.prototype.getAspectRatio=function(){return this.imageRef.current?{x:this.imageRef.current.clientWidth/this.imageRef.current.naturalWidth,y:this.imageRef.current.clientHeight/this.imageRef.current.naturalHeight}:{x:NaN,y:NaN}},e.prototype.setPathStateFromProps=function(){if(!wv(this.lastEmittedPoints,this.props.value)){var n=this.getAspectRatio(),r=this.svg.convertRealPointsToViewbox(this.props.value.map(function(a){var i=a.x,o=a.y;return{x:i*n.x,y:o*n.y}}));this.dispatchPathAction({type:Fr.CHANGE,payload:r})}},e.prototype.getRoundedPoints=function(){return this.state.path.points.map(function(n){return Uc(n)})},e.prototype.getBorder=function(){return this.svg.getBorderPoints().map(function(n){return Uc(n)}).map(function(n){var r=n.x,a=n.y;return{x:r-1,y:a+1}})},e.prototype.getPolygonPoints=function(){var n=this.getRoundedPoints(),r=this.getBorder();return this.state.path.closed?Vc(Vc(Vc([],r,!0),n,!0),[n[0],r[0]]):r},e.prototype.getPolylinePoints=function(){var n=this.getRoundedPoints();return n.concat(this.state.path.closed?n[0]:Uc(this.state.pointer))},e.prototype.getMousePosition=function(n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!0);var i=this.svg.getMouseCoordinates(n);if(a){var o=navigator.platform.includes("Mac")?n.metaKey:n.ctrlKey,s=this.path.points[this.path.points.length-1];o&&s&&(n.shiftKey?i=zse(s,i,this.angles):i=Bse(s,i,Math.PI/12))}var l=Fse(this.path.points,i,10),u=l.point,c=l.index;return r&&c>-1&&(i=Vo({},u)),[i,{point:u,index:c}]},e.propTypes={value:ca.arrayOf(ca.exact({x:ca.number.isRequired,y:ca.number.isRequired})),style:ca.shape({}),viewBox:ca.exact({width:ca.number.isRequired,height:ca.number.isRequired}),disabled:ca.bool,onChange:ca.func,onComplete:ca.func,src:ca.string.isRequired,imageAlt:ca.string,crossOrigin:ca.string,imageStyle:ca.shape({}),onImageLoad:ca.func,onImageError:ca.func},e.defaultProps={value:[],style:{},imageStyle:{},viewBox:{width:1e3,height:1e3},disabled:!1,onImageError:Function.prototype,onImageLoad:Function.prototype},e}(G.Component);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Kse=1e-7,Xse=1e-4;class Y3{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class kv{refCount(e){return Pi("refCount")}incRef(e){return Pi("incRef")}timerAvailable(){return!0}time(e){return Pi("time")}read(e){return Pi("read")}readSync(e){return Pi("readSync")}readToGPU(e,n){return Pi("readToGPU")}numDataIds(){return Pi("numDataIds")}disposeData(e,n){return Pi("disposeData")}write(e,n,r){return Pi("write")}move(e,n,r,a,i){return Pi("move")}memory(){return Pi("memory")}floatPrecision(){return Pi("floatPrecision")}epsilon(){return this.floatPrecision()===32?Kse:Xse}dispose(){return Pi("dispose")}}function Pi(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a8(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,ul(t,e,n)}function Yse(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,ul(t,n,r),ul(e,n,r)}function wu(t,e,n){return Math.max(t,Math.min(e,n))}function Sv(t){return t%2===0?t:t+1}function ul(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function i8(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Qse(t,e){const n=Math.random();return e*n+(1-n)*t}function Zse(t,e){let n=0;for(let r=0;r<t.length;r++){const a=Number(t[r])-Number(e[r]);n+=a*a}return n}function V(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Xr(t,e,n=""){V(xn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Wc(t){V(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function cl(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||da(t)&&!n)for(let r=0;r<t.length;++r)cl(t[r],e,n);else e.push(t);return e}function be(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Jse(t){return t.length===0}function xn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Gc(t){return t%1===0}function ele(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function Cv(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function tle(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return a8(e),e}function Hc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Q3(t,e=a=>0,n,r=setTimeout){return new Promise((a,i)=>{let o=0;const s=()=>{if(t()){a();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r(s,l)};s()})}function Z3(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function Yt(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),V(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),V(t.every(r=>Gc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function dl(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:Yt(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(i!=null){if(i[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(i[o]==null||i[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Tr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Nr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function o8(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function s8(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function J3(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function da(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function Ev(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function l8(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function gs(t){return typeof t=="string"||t instanceof String}function u8(t){return typeof t=="boolean"}function c8(t){return typeof t=="number"}function Lp(t){return Array.isArray(t)?Lp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":c8(t)?"float32":gs(t)?"string":u8(t)?"bool":"float32"}function ku(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Iv(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ze(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function d8(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)a[o]=n[t+o]}else{const i=e[0],o=e.slice(1),s=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)a[l]=d8(t+l*s,o,n,r)}return a}function Ai(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return d8(0,t,e,n)}function Tv(t,e){const n=Yr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Yr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function eT(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return Ai(t,new Float32Array(n));if(e==="int32")return Ai(t,new Int32Array(n));if(e==="bool")return Ai(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function tT(t){t.forEach(e=>{V(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Uo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function qc(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Kc(t){return t&&t.then&&typeof t.then=="function"}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p8="tfjsflags";class h8{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=nle,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Kc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);p8 in e&&e[p8].split(",").forEach(n=>{const[r,a]=n.split(":");this.urlFlags[r]=ale(r,a)})}}function nle(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(rle(e,r[0],r[1]),r.join("="))),e}function rle(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function ale(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function fe(){return nT}let nT=null;function ile(t){nT=t}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let rT;function f8(){if(rT==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");rT=t}return rT}function ole(){const t=f8();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function aT(t,e){const n=ole();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Nv="Abs",xg="Acos",wg="Acosh",Fp="Add",_v="AddN",Rv="All",$v="Any",Ov="ArgMax",Mv="ArgMin",kg="Asin",Sg="Asinh",Cg="Atan",Eg="Atanh",Ig="Atan2",Pv="AvgPool",iT="AvgPoolGrad",Av="AvgPool3D",oT="AvgPool3DGrad",Dv="BatchMatMul",Lv="BatchToSpaceND",Fv="Bincount",sle="BroadcastTo",Bv="BroadcastArgs",Tg="Cast",Ng="Ceil",_g="ClipByValue",zv="Complex",jv="ComplexAbs",Vv="Concat",Uv="Conv2D",Wv="Conv2DBackpropFilter",Gv="Conv2DBackpropInput",Hv="Conv3D",sT="Conv3DBackpropFilterV2",qv="Conv3DBackpropInputV2",Rg="Cos",$g="Cosh",Kv="Cumprod",Xv="Cumsum",Yv="CropAndResize",Qv="DenseBincount",Zv="DepthToSpace",Jv="DepthwiseConv2dNative",ex="DepthwiseConv2dNativeBackpropFilter",tx="DepthwiseConv2dNativeBackpropInput",nx="Diag",rx="Dilation2D",lT="Dilation2DBackpropInput",uT="Dilation2DBackpropFilter",Og="RealDiv",ax="Einsum",Mg="Elu",cT="EluGrad",Pg="Erf",Ag="Equal",Dg="Exp",ix="ExpandDims",Lg="Expm1",ox="FFT",sx="Fill",lx="FlipLeftRight",Fg="Floor",Bg="FloorDiv",ux="FusedBatchNorm",cx="GatherV2",dx="GatherNd",zg="Greater",jg="GreaterEqual",Vg="Identity",px="IFFT",hx="Imag",Ug="IsFinite",Wg="IsInf",Gg="IsNan",fx="LeakyRelu",Hg="Less",qg="LessEqual",gx="LinSpace",Kg="Log",Xg="Log1p",Yg="LogicalAnd",Qg="LogicalNot",Zg="LogicalOr",lle="LogicalXor",ule="LogSoftmax",cle="LowerBound",mx="LRN",dT="LRNGrad",yx="Max",Jg="Maximum",bx="MaxPool",pT="MaxPoolGrad",vx="MaxPool3D",hT="MaxPool3DGrad",xx="MaxPoolWithArgmax",wx="Mean",kx="Min",em="Minimum",Sx="MirrorPad",tm="Mod",Cx="Multinomial",nm="Multiply",Ex="Neg",rm="NotEqual",Ix="NonMaxSuppressionV3",Tx="NonMaxSuppressionV4",Nx="NonMaxSuppressionV5",_x="OnesLike",Rx="OneHot",$x="Pack",Ox="PadV2",dle="Pool",am="Pow",Mx="Prelu",Px="Prod",Ax="RaggedGather",Dx="RaggedTensorToTensor",Lx="Range",Fx="Real",im="Reciprocal",om="Relu",Bx="Reshape",zx="ResizeNearestNeighbor",fT="ResizeNearestNeighborGrad",jx="ResizeBilinear",gT="ResizeBilinearGrad",sm="Relu6",Vx="Reverse",lm="Round",um="Rsqrt",Ux="ScatterNd",Wx="SearchSorted",Gx="Select",cm="Selu",Hx="Slice",dm="Sin",pm="Sinh",hm="Sign",fm="Sigmoid",gm="Softplus",mm="Sqrt",qx="Sum",Kx="SpaceToBatchND",Xx="SplitV",Yx="Softmax",Qx="SparseFillEmptyRows",Zx="SparseReshape",Jx="SparseSegmentMean",ew="SparseSegmentSum",tw="SparseToDense",ym="SquaredDifference",mT="Square",nw="StridedSlice",rw="StringNGrams",aw="StringSplit",iw="StringToHashBucketFast",bm="Sub",vm="Tan",xm="Tanh",wm="Tile",ow="TopK",sw="Transform",Bp="Transpose",lw="Unique",uw="Unpack",cw="UnsortedSegmentSum",ple="UpperBound",dw="ZerosLike",km="Step",pw="FromPixels",hw="RotateWithOffset",Sm="_FusedMatMul",Cm="FusedConv2D",Em="FusedDepthwiseConv2D";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Di(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function hle(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zp=aT("kernelRegistry",()=>new Map),Im=aT("gradRegistry",()=>new Map);function fw(t,e){const n=bT(t,e);return zp.get(n)}function yT(t){return Im.get(t)}function gw(t){const e=zp.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,o]=a,[s]=i.split("_");s===t&&n.push(o)}return n}function mw(t){const{kernelName:e,backendName:n}=t,r=bT(e,n);zp.has(r)&&Di(`The kernel '${e}' for backend '${n}' is already registered`),zp.set(r,t)}function fle(t){const{kernelName:e}=t;Im.has(e)&&fe().getBool("DEBUG")&&Di(`Overriding the gradient for '${e}'`),Im.set(e,t)}function gle(t,e){const n=bT(t,e);if(!zp.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);zp.delete(n)}function mle(t){if(!Im.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Im.delete(t)}function yle(t,e){gw(t).forEach(n=>{const r=Object.assign({},n,{backendName:e});mw(r)})}function bT(t,e){return`${e}_${t}`}var g8=Mn,so=null;try{so=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Mn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Mn.prototype.__isLong__,Object.defineProperty(Mn.prototype,"__isLong__",{value:!0});function ci(t){return(t&&t.__isLong__)===!0}Mn.isLong=ci;var m8={},y8={};function Xc(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=y8[t],r)?r:(n=Pn(t,(t|0)<0?-1:0,!0),a&&(y8[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=m8[t],r)?r:(n=Pn(t,t<0?-1:0,!1),a&&(m8[t]=n),n))}Mn.fromInt=Xc;function lo(t,e){if(isNaN(t))return e?Yc:uo;if(e){if(t<0)return Yc;if(t>=v8)return C8}else{if(t<=-x8)return di;if(t+1>=x8)return S8}return t<0?lo(-t,e).neg():Pn(t%jp|0,t/jp|0,e)}Mn.fromNumber=lo;function Pn(t,e,n){return new Mn(t,e,n)}Mn.fromBits=Pn;var yw=Math.pow;function vT(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return uo;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return vT(t.substring(1),e,n).neg();for(var a=lo(yw(n,8)),i=uo,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var u=lo(yw(n,s));i=i.mul(u).add(lo(l))}else i=i.mul(a),i=i.add(lo(l))}return i.unsigned=e,i}Mn.fromString=vT;function Wo(t,e){return typeof t=="number"?lo(t,e):typeof t=="string"?vT(t,e):Pn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Mn.fromValue=Wo;var b8=65536,ble=1<<24,jp=b8*b8,v8=jp*jp,x8=v8/2,w8=Xc(ble),uo=Xc(0);Mn.ZERO=uo;var Yc=Xc(0,!0);Mn.UZERO=Yc;var Vp=Xc(1);Mn.ONE=Vp;var k8=Xc(1,!0);Mn.UONE=k8;var xT=Xc(-1);Mn.NEG_ONE=xT;var S8=Pn(-1,2147483647,!1);Mn.MAX_VALUE=S8;var C8=Pn(-1,-1,!0);Mn.MAX_UNSIGNED_VALUE=C8;var di=Pn(0,-2147483648,!1);Mn.MIN_VALUE=di;var Pe=Mn.prototype;Pe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Pe.toNumber=function(){return this.unsigned?(this.high>>>0)*jp+(this.low>>>0):this.high*jp+(this.low>>>0)},Pe.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(di)){var e=lo(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=lo(yw(t,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=i.sub(s.mul(a)).toInt()>>>0,u=l.toString(t);if(i=s,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},Pe.getHighBits=function(){return this.high},Pe.getHighBitsUnsigned=function(){return this.high>>>0},Pe.getLowBits=function(){return this.low},Pe.getLowBitsUnsigned=function(){return this.low>>>0},Pe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(di)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},Pe.isZero=function(){return this.high===0&&this.low===0},Pe.eqz=Pe.isZero,Pe.isNegative=function(){return!this.unsigned&&this.high<0},Pe.isPositive=function(){return this.unsigned||this.high>=0},Pe.isOdd=function(){return(this.low&1)===1},Pe.isEven=function(){return(this.low&1)===0},Pe.equals=function(t){return ci(t)||(t=Wo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},Pe.eq=Pe.equals,Pe.notEquals=function(t){return!this.eq(t)},Pe.neq=Pe.notEquals,Pe.ne=Pe.notEquals,Pe.lessThan=function(t){return this.comp(t)<0},Pe.lt=Pe.lessThan,Pe.lessThanOrEqual=function(t){return this.comp(t)<=0},Pe.lte=Pe.lessThanOrEqual,Pe.le=Pe.lessThanOrEqual,Pe.greaterThan=function(t){return this.comp(t)>0},Pe.gt=Pe.greaterThan,Pe.greaterThanOrEqual=function(t){return this.comp(t)>=0},Pe.gte=Pe.greaterThanOrEqual,Pe.ge=Pe.greaterThanOrEqual,Pe.compare=function(t){if(ci(t)||(t=Wo(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Pe.comp=Pe.compare,Pe.negate=function(){return!this.unsigned&&this.eq(di)?di:this.not().add(Vp)},Pe.neg=Pe.negate,Pe.add=function(t){ci(t)||(t=Wo(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,o=t.high&65535,s=t.low>>>16,l=t.low&65535,u=0,c=0,d=0,p=0;return p+=a+l,d+=p>>>16,p&=65535,d+=r+s,c+=d>>>16,d&=65535,c+=n+o,u+=c>>>16,c&=65535,u+=e+i,u&=65535,Pn(d<<16|p,u<<16|c,this.unsigned)},Pe.subtract=function(t){return ci(t)||(t=Wo(t)),this.add(t.neg())},Pe.sub=Pe.subtract,Pe.multiply=function(t){if(this.isZero())return uo;if(ci(t)||(t=Wo(t)),so){var e=so.mul(this.low,this.high,t.low,t.high);return Pn(e,so.get_high(),this.unsigned)}if(t.isZero())return uo;if(this.eq(di))return t.isOdd()?di:uo;if(t.eq(di))return this.isOdd()?di:uo;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(w8)&&t.lt(w8))return lo(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,p=0,f=0;return f+=i*u,p+=f>>>16,f&=65535,p+=a*u,d+=p>>>16,p&=65535,p+=i*l,d+=p>>>16,p&=65535,d+=r*u,c+=d>>>16,d&=65535,d+=a*l,c+=d>>>16,d&=65535,d+=i*s,c+=d>>>16,d&=65535,c+=n*u+r*l+a*s+i*o,c&=65535,Pn(p<<16|f,c<<16|d,this.unsigned)},Pe.mul=Pe.multiply,Pe.divide=function(t){if(ci(t)||(t=Wo(t)),t.isZero())throw Error("division by zero");if(so){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?so.div_u:so.div_s)(this.low,this.high,t.low,t.high);return Pn(e,so.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Yc:uo;var n,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Yc;if(t.gt(this.shru(1)))return k8;a=Yc}else{if(this.eq(di)){if(t.eq(Vp)||t.eq(xT))return di;if(t.eq(di))return Vp;var i=this.shr(1);return n=i.div(t).shl(1),n.eq(uo)?t.isNegative()?Vp:xT:(r=this.sub(t.mul(n)),a=n.add(r.div(t)),a)}else if(t.eq(di))return this.unsigned?Yc:uo;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=uo}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),s=o<=48?1:yw(2,o-48),l=lo(n),u=l.mul(t);u.isNegative()||u.gt(r);)n-=s,l=lo(n,this.unsigned),u=l.mul(t);l.isZero()&&(l=Vp),a=a.add(l),r=r.sub(u)}return a},Pe.div=Pe.divide,Pe.modulo=function(t){if(ci(t)||(t=Wo(t)),so){var e=(this.unsigned?so.rem_u:so.rem_s)(this.low,this.high,t.low,t.high);return Pn(e,so.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},Pe.mod=Pe.modulo,Pe.rem=Pe.modulo,Pe.not=function(){return Pn(~this.low,~this.high,this.unsigned)},Pe.and=function(t){return ci(t)||(t=Wo(t)),Pn(this.low&t.low,this.high&t.high,this.unsigned)},Pe.or=function(t){return ci(t)||(t=Wo(t)),Pn(this.low|t.low,this.high|t.high,this.unsigned)},Pe.xor=function(t){return ci(t)||(t=Wo(t)),Pn(this.low^t.low,this.high^t.high,this.unsigned)},Pe.shiftLeft=function(t){return ci(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Pn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Pn(0,this.low<<t-32,this.unsigned)},Pe.shl=Pe.shiftLeft,Pe.shiftRight=function(t){return ci(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Pn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Pn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Pe.shr=Pe.shiftRight,Pe.shiftRightUnsigned=function(t){if(ci(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var n=this.low;return Pn(n>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?Pn(e,0,this.unsigned):Pn(e>>>t-32,0,this.unsigned)},Pe.shru=Pe.shiftRightUnsigned,Pe.shr_u=Pe.shiftRightUnsigned,Pe.toSigned=function(){return this.unsigned?Pn(this.low,this.high,!1):this},Pe.toUnsigned=function(){return this.unsigned?this:Pn(this.low,this.high,!0)},Pe.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Pe.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},Pe.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},Mn.fromBytes=function(t,e,n){return n?Mn.fromBytesLE(t,e):Mn.fromBytesBE(t,e)},Mn.fromBytesLE=function(t,e){return new Mn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Mn.fromBytesBE=function(t,e){return new Mn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const E8=Ki(g8),vle=Qk({__proto__:null,default:E8},[g8]);/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qc=E8||vle;function Tm(t){return Qc.fromString(t,!0,16)}const I8=Tm("c3a5c85c97cb3127"),Zc=Tm("b492b66fbe98f273"),Oa=Tm("9ae16a3b2f90404f");function wT(t){return t.xor(t.shru(47))}function T8(t,e,n){const r=t.slice(e,e+n);return Qc.fromBytes(Array.from(r),!0,!0)}function En(t,e){return T8(t,e,8)}function N8(t,e){return T8(t,e,4)}function Br(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Su(t,e,n=Tm("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function xle(t,e,n,r,a,i){a=a.add(t),i=Br(i.add(a).add(r),21);const o=a;return a=a.add(e),a=a.add(n),i=i.add(Br(a,44)),[a.add(r),i.add(o)]}function bw(t,e,n,r){return xle(En(t,e),En(t,e+8),En(t,e+16),En(t,e+24),n,r)}function wle(t,e=t.length){if(e>=8){const n=Oa.add(e*2),r=En(t,0).add(Oa),a=En(t,e-8),i=Br(a,37).mul(n).add(r),o=Br(r,25).add(a).mul(n);return Su(i,o,n)}if(e>=4){const n=Oa.add(e*2),r=N8(t,0);return Su(r.shl(3).add(e),N8(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),o=e+(a<<2);return wT(Oa.mul(i).xor(I8.mul(o))).mul(Oa)}return Oa}function kle(t,e=t.length){const n=Oa.add(e*2),r=En(t,0).mul(Zc),a=En(t,8),i=En(t,e-8).mul(n),o=En(t,e-16).mul(Oa);return Su(Br(r.add(a),43).add(Br(i,30)).add(o),r.add(Br(a.add(Oa),18)).add(i),n)}function Sle(t,e=t.length){const n=Oa.add(e*2),r=En(t,0).mul(Oa),a=En(t,8),i=En(t,e-8).mul(n),o=En(t,e-16).mul(Oa),s=Br(r.add(a),43).add(Br(i,30)).add(o),l=Su(s,r.add(Br(a.add(Oa),18)).add(i),n),u=En(t,16).mul(n),c=En(t,24),d=s.add(En(t,e-32)).mul(n),p=l.add(En(t,e-24)).mul(n);return Su(Br(u.add(c),43).add(Br(d,30)).add(p),u.add(Br(c.add(r),18)).add(d),n)}function _8(t,e=t.length){const n=Qc.fromNumber(81,!0);if(e<=32)return e<=16?wle(t,e):kle(t,e);if(e<=64)return Sle(t,e);let r=n,a=n.mul(Zc).add(113),i=wT(a.mul(Oa).add(113)).mul(Oa),o=[Qc.UZERO,Qc.UZERO],s=[Qc.UZERO,Qc.UZERO];r=r.mul(Oa).add(En(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Br(r.add(a).add(o[0]).add(En(t,l+8)),37).mul(Zc),a=Br(a.add(o[1]).add(En(t,l+48)),42).mul(Zc),r=r.xor(s[1]),a=a.add(o[0]).add(En(t,l+40)),i=Br(i.add(s[0]),33).mul(Zc),o=bw(t,l,o[1].mul(Zc),r.add(s[0])),s=bw(t,l+32,i.add(s[1]),a.add(En(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=Zc.add(i.and(255).shl(1));return l=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Br(r.add(a).add(o[0]).add(En(t,l+8)),37).mul(d),a=Br(a.add(o[1]).add(En(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(En(t,l+40))),i=Br(i.add(s[0]),33).mul(d),o=bw(t,l,o[1].mul(d),r.add(s[0])),s=bw(t,l+32,i.add(s[1]),a.add(En(t,l+16))),[i,r]=[r,i],Su(Su(o[0],s[0],d).add(wT(a).mul(I8)).add(i),Su(o[1],s[1],d).add(r),d)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pl(t,e){return e==="string"?ms(t):Cu([t],e)}function Cle(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Cu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=cl(t)),fe().getBool("DEBUG")&&o8(t,e),Cle(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function pi(){return fe().platform.now()}function Ele(t,e){return fe().platform.fetch(t,e)}function ms(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function hl(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}const Ile=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:xn,assert:V,assertNonNegativeIntegerDimensions:tT,assertNonNull:Wc,assertShapesMatch:Xr,bytesFromStringArray:l8,bytesPerElement:Ev,checkConversionForErrors:o8,clamp:wu,computeStrides:Ze,createScalarValue:pl,createShuffledIndices:tle,decodeString:hl,distSquared:Zse,encodeString:ms,fetch:Ele,fingerPrint64:_8,flatten:cl,getArrayFromDType:Nr,getTypedArrayFromDType:Tr,hasEncodingLoss:J3,hexToLong:Tm,indexToLoc:qc,inferDtype:Lp,inferFromImplicitShape:Z3,isBoolean:u8,isFunction:ku,isInt:Gc,isNumber:c8,isPromise:Kc,isScalarShape:Jse,isString:gs,isTypedArray:da,isValidDtype:s8,locToIndex:Uo,makeOnesTypedArray:Tv,makeZerosNestedTypedArray:eT,makeZerosTypedArray:Yr,nearestDivisor:Iv,nearestLargerEven:Sv,now:pi,parseAxisParam:Yt,randUniform:Qse,repeatedTry:Q3,rightPad:Hc,shuffle:a8,shuffleCombo:Yse,sizeFromShape:be,sizeToSquarishShape:Cv,squeezeShape:dl,sum:i8,swap:ul,tanh:ele,toNestedArray:Ai,toTypedArray:Cu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Tle{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new _le)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let o;const s=pi();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();o=Promise.resolve({kernelMs:pi()-s})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const u=a[l];u.data().then(c=>{Nle(c,u.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),a,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],i,l[2])})})}}function Nle(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class _le{logKernelProfile(e,n,r,a,i,o){const s=typeof a=="number"?Hc(`${a}ms`,9):a.error,l=Hc(e,25),u=n.rank,c=n.size,d=Hc(n.shape.toString(),14);let p="";for(const f in i){const m=i[f];if(m!=null){const y=m.shape||n.shape,v=y.length;p+=`${f}: ${v}D ${v>0?y:""} `}}console.log(`%c${l}	%c${s}	%c${u}D ${d}	%c${c}	%c${p}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rle(t,e,n){const r={},a={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const p=c[d];let f=!1;for(let m=0;m<e.length;m++)if(r[p.id]){u.outputs.forEach(y=>r[y.id]=!0),f=!0,a[u.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const p in c)i[c[p].id]=!0,o[u.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const u=t[l];if(a[u.id]&&o[u.id]){const c={};for(const p in u.inputs){const f=u.inputs[p];r[f.id]&&(c[p]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,s.push(d)}}return s}function $le(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const s=i.gradient(o);for(const l in i.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const u=n(()=>s[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!xn(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const R8=20,Nm=3,kT=7;function Ole(t,e,n,r){const a=Ze(e),i=Mle(t,e,n,a),o=e.length,s=vw(t,e,n,a,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(u=>"    "+u).join(`
`)),l.join(`
`)}function Mle(t,e,n,r){const a=be(e),i=r[r.length-1],o=new Array(i).fill(0),s=e.length,l=n==="complex64"?Rm(t):t;if(s>1)for(let u=0;u<a/i;u++){const c=u*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],_m(l[c+d],0,n).length)}return o}function _m(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(kT))} + ${parseFloat(t[1].toFixed(kT))}j`:gs(t)?r=`'${t}'`:n==="bool"?r=$8(t):r=parseFloat(t.toFixed(kT)).toString(),Hc(r,e)}function $8(t){return t===0?"false":"true"}function vw(t,e,n,r,a,i=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=Rm(t);return[_m(y[0],0,n)]}return n==="bool"?[$8(t[0])]:[t[0].toString()]}if(l===1){if(s>R8){const y=Nm*o;let v=Array.from(t.slice(0,y)),b=Array.from(t.slice((s-Nm)*o,s*o));return n==="complex64"&&(v=Rm(v),b=Rm(b)),["["+v.map((x,w)=>_m(x,a[w],n)).join(", ")+", ..., "+b.map((x,w)=>_m(x,a[s-Nm+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?Rm(t):Array.from(t)).map((y,v)=>_m(y,a[v],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*o,p=[];if(s>R8){for(let y=0;y<Nm;y++){const v=y*d,b=v+d;p.push(...vw(t.slice(v,b),u,n,c,a,!1))}p.push("...");for(let y=s-Nm;y<s;y++){const v=y*d,b=v+d;p.push(...vw(t.slice(v,b),u,n,c,a,y===s-1))}}else for(let y=0;y<s;y++){const v=y*d,b=v+d;p.push(...vw(t.slice(v,b),u,n,c,a,y===s-1))}const f=l===2?",":"";p[0]="["+p[0]+f;for(let y=1;y<p.length-1;y++)p[y]=" "+p[y]+f;let m=`,
`;for(let y=2;y<l;y++)m+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":m),p}function Rm(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _r{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=be(e),r!=null){const a=r.length;V(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Nr(n,this.size),this.strides=Ze(e)}set(e,...n){n.length===0&&(n=[0]),V(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Go().makeTensor(this.values,this.shape,this.dtype)}}let Go=null,Up=null;function Ple(t){Go=t}function Ale(t){Up=t}class qn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=be(e),this.strides=Ze(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Up.buffer(this.shape,this.dtype,e)}bufferSync(){return Up.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ai(this.shape,e,this.dtype==="complex64")}arraySync(){return Ai(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Go().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>hl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Go().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Go().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>hl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Go().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Go().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Up.print(this,e)}clone(){return this.throwIfDisposed(),Up.clone(this)}toString(e=!1){const n=this.dataSync();return Ole(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Up.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Go().makeVariable(this,e,n,r)}}Object.defineProperty(qn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Dle(){return aT("Tensor",()=>qn)}Dle();class $m extends qn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!xn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Go().disposeTensor(this),this.dataId=e.dataId,Go().incRef(this,null)}dispose(){Go().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty($m,Symbol.hasInstance,{value:t=>t instanceof qn&&t.assign!=null&&t.assign instanceof Function});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var ST;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(ST||(ST={}));var CT;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(CT||(CT={}));var ET;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(ET||(ET={}));var IT;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(IT||(IT={}));var TT;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(TT||(TT={}));const Lle={float32:IT,int32:CT,bool:ET,complex64:TT};function Ya(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Lle[t][e]}function xw(t){return Ya(t,"int32")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ya(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function O8(t,e){V(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Fle(t,e){return e.some(n=>n.id===t.id)}function NT(t){const e=[];return M8(t,e,new Set),e}function M8(t,e,n){if(t==null)return;if(t instanceof qn){e.push(t);return}if(!Ble(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),M8(i,e,n))}}function Ble(t){return Array.isArray(t)||typeof t=="object"}const zle=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:O8,getTensorsInContainer:NT,isTensorInList:Fle,makeTypesMatch:Kn},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _T(t){return t.kernelName!=null}class P8{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Rh{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new P8}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Di(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Tle(this.backendInstance),!0}setupRegisteredKernels(){gw(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){gw(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof kv)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Di(`Initialization of backend ${e} failed`),Di(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Di(`Initialization of backend ${e} failed`),Di(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return Rh.nextTensorId++}nextVariableId(){return Rh.nextVariableId++}clone(e){const n=te.runKernel(Vg,{x:e}),r={x:e},a=o=>({x:()=>{const s="float32",l={x:o},u={dtype:s};return te.runKernel(Tg,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,fw(e,this.backendName)==null)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const u=_T(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(_T(e)){const{kernelName:m,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const b=fw(m,this.backendName);V(b!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),s=()=>{const x=this.backend.numDataIds();l=b.kernelFunc({inputs:y,attrs:v,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,x,w);const S=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(m,y,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:m}=e,y=v=>{a&&(r=v.map(b=>this.keep(this.clone(b))))};s=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,y));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,b),b}}const{inputs:c,attrs:d}=e,p=_T(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(f=this.profiler.profileKernel(u,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),a&&this.addTapeNode(u,c,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,n,r){const a=yT(e);if(a!=null){const i=a.inputsToSave||[],o=a.outputsToSave||[];let s;a.saveAllInputs?(V(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(u=>n[u])):s=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return s.concat(l)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&gs(e[0])&&(i=e.map(l=>ms(l)));const o=a.write(i,n,r),s=new qn(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){const l=this.state.tensorInfo.get(o),u=l8(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,o=new qn(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new $m(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Ev(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof $m||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Ev(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=yT(e);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=u=>(u=u.map((c,d)=>{if(c==null){const p=r[d],f=Yr(p.size,p.dtype);return this.makeTensor(f,p.shape,p.dtype)}return c}),a(u.length>1?u:u[0],i,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=NT(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(V(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));V(i instanceof qn,()=>"The result y returned by f() must be a tensor.");const o=Rle(this.state.activeTape,n,i);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[i.id]=r??jle(i.shape),$le(s,o,u=>this.tidy(u),Vle);const l=n.map(u=>s[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return V(ku(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{V(n.every(s=>s instanceof qn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((s,l)=>{a[l]=s});const i=(s,l)=>(r=e(...n,l),V(r.value instanceof qn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(ku(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];V(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(c.every(p=>p instanceof qn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((p,f)=>{d[f]=()=>p}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=pi(),r=await this.backend.time(e);return r.wallMs=pi()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new P8;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Rh.nextTensorId=0,Rh.nextVariableId=0;function jle(t){const e=Tv(be(t),"float32");return te.makeTensor(e,t,"float32")}function A8(){const t=f8();if(t._tfengine==null){const e=new h8(t);t._tfengine=new Rh(e)}return ile(t._tfengine.ENV),Ple(()=>t._tfengine),t._tfengine}const te=A8();function Vle(t,e){const n={a:t,b:e};return te.runKernel(Fp,n)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ule(){return typeof navigator<"u"&&navigator!=null}let RT;function Wle(t){RT=t}function $T(t){if(RT!==void 0)return RT;if(t||Ule()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function OT(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Gle=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:OT,isMobile:$T,mockIsMobile:Wle},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hi=fe();hi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),hi.registerFlag("IS_BROWSER",()=>OT()),hi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),hi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),hi.registerFlag("PROD",()=>!1),hi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>hi.getBool("DEBUG")),hi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),hi.registerFlag("IS_TEST",()=>!1),hi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),hi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),hi.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),hi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),hi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ys(t,e){let n=t;if(da(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||da(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&D8(t,r,[]),r}function D8(t,e,n){if(n=n||[],!Array.isArray(t)&&!da(t)){V(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}V(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),V(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)D8(t[a],r,n.concat(a))}function L8(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function z(t,e,n,r="numeric"){if(t instanceof qn)return L8(r,t.dtype,e,n),t;let a=Lp(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),L8(r,a,e,n),t==null||!da(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const s=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${s}'`)}const i=ys(t,a);!da(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?Cu(t,a):cl(t,[],!0);return te.makeTensor(o,i,a)}function Om(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>z(a,`${e}[${i}]`,n,r))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const MT="__op";function ee(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+MT;const a=(...i)=>{te.startScope(n);try{const o=r(...i);return Kc(o)&&console.error("Cannot return a Promise inside of tidy."),te.endScope(o),o}catch(o){throw te.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hle(t,e){const n=z(t,"real","complex"),r=z(e,"imag","complex");Xr(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return te.runKernel(zv,a)}const fl=ee({complex_:Hle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Eu(t,e,n,r){if(r==null&&(r=Lp(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!da(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){tT(e);const a=be(e),i=be(n);V(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==be(e.slice(o)):!0;V(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!da(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Cu(t,r):cl(t,[],!0),te.makeTensor(t,e,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ho(t,e,n){const r=ys(t,n);return Eu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PT={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ww=4;async function qle(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<a.length;++o){const s=a[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const u={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const p=await l.bytes(),f=p.reduce((v,b)=>v+b.length,0)+ww*p.length,m=new Uint8Array(f);let y=0;for(let v=0;v<p.length;v++){const b=p[v],x=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(x,y),y+=ww,m.set(b,y),y+=b.length}d(m)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:Kle(i),specs:n}}function F8(t,e){const n={};let r,a=0;for(const i of e){const o=i.name,s=i.dtype,l=i.shape,u=be(l);let c;if("quantization"in i){const d=i.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${i.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${i.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const p=PT[d.dtype],f=t.slice(a,a+u*p),m=d.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(s==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){c=new Float32Array(m.length);for(let y=0;y<m.length;y++){const v=m[y];c[y]=v*d.scale+d.min}}else if(d.dtype==="float16")r===void 0&&(r=eue()),c=r(m);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(s==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);c=new Int32Array(m.length);for(let y=0;y<m.length;y++){const v=m[y];c[y]=Math.round(v*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*p}else if(s==="string"){const d=be(i.shape);c=[];for(let p=0;p<d;p++){const f=new Uint32Array(t.slice(a,a+ww))[0];a+=ww;const m=new Uint8Array(t.slice(a,a+f));c.push(m),a+=f}}else{const d=PT[s],p=t.slice(a,a+u*d);if(s==="float32")c=new Float32Array(p);else if(s==="int32")c=new Int32Array(p);else if(s==="bool")c=new Uint8Array(p);else if(s==="complex64"){c=new Float32Array(p);const f=new Float32Array(c.length/2),m=new Float32Array(c.length/2);for(let b=0;b<f.length;b++)f[b]=c[b*2],m[b]=c[b*2+1];const y=Ho(f,l,"float32"),v=Ho(m,l,"float32");n[o]=fl(y,v),y.dispose(),v.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*d}s!=="complex64"&&(n[o]=Ho(c,l,s))}return n}function Kle(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const AT=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function B8(t){return AT?Buffer.byteLength(t):new Blob([t]).size}function Xle(t){if(AT)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Yle(t){if(AT){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function DT(t){if(t.length===1)return t[0];let e=0;t.forEach(a=>{e+=a.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(a=>{n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function z8(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function j8(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function V8(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}async function LT(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),V8(t,n,r)}function Mm(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:B8(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:B8(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function U8(t){const e=[];for(const n of t)e.push(...n.weights);return e}function Qle(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Zle(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Jle(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function eue(){const t=Qle(),e=Zle(),n=Jle();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];i[o]=l}return new Float32Array(a)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Xn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Xn.instance==null&&(Xn.instance=new Xn),Xn.instance}static registerSaveRouter(e){Xn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Xn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Xn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Xn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Xn.getInstance().loadRouters:Xn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&a.push(o)}),a}}const tue=t=>Xn.registerSaveRouter(t),nue=t=>Xn.registerLoadRouter(t),rue=t=>Xn.getSaveHandlers(t),aue=(t,e)=>Xn.getLoadHandlers(t,e);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FT="tensorflowjs",BT=1,Jc="models_store",Iu="model_info_store";function W8(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function zT(t){const e=t.result;e.createObjectStore(Jc,{keyPath:"modelPath"}),e.createObjectStore(Iu,{keyPath:"modelPath"})}class ed{constructor(e){if(this.indexedDB=W8(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(FT,BT);i.onupgradeneeded=()=>zT(i),i.onsuccess=()=>{const o=i.result;if(n==null){const s=o.transaction(Jc,"readonly"),l=s.objectStore(Jc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=u=>(o.close(),a(l.error)),s.oncomplete=()=>o.close()}else{const s=Mm(n),l=o.transaction(Iu,"readwrite");let u=l.objectStore(Iu);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:s});let d;c.onsuccess=()=>{d=o.transaction(Jc,"readwrite");const p=d.objectStore(Jc).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s});p.onsuccess=()=>r({modelArtifactsInfo:s}),p.onerror=f=>{u=l.objectStore(Iu);const m=u.delete(this.modelPath);m.onsuccess=()=>(o.close(),a(p.error)),m.onerror=y=>(o.close(),a(p.error))}},c.onerror=p=>(o.close(),a(c.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>a(i.error)})}}ed.URL_SCHEME="indexeddb://";const G8=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ed.URL_SCHEME)?iue(t.slice(ed.URL_SCHEME.length)):null;Xn.registerSaveRouter(G8),Xn.registerLoadRouter(G8);function iue(t){return new ed(t)}function oue(t){return t.startsWith(ed.URL_SCHEME)?t.slice(ed.URL_SCHEME.length):t}class sue{constructor(){this.indexedDB=W8()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(FT,BT);r.onupgradeneeded=()=>zT(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(Iu,"readonly"),o=i.objectStore(Iu).getAll();o.onsuccess=()=>{const s={};for(const l of o.result)s[l.modelPath]=l.modelArtifactsInfo;e(s)},o.onerror=s=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=oue(e),new Promise((n,r)=>{const a=this.indexedDB.open(FT,BT);a.onupgradeneeded=()=>zT(a),a.onsuccess=()=>{const i=a.result,o=i.transaction(Iu,"readwrite"),s=o.objectStore(Iu),l=s.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),d=()=>{u=i.transaction(Jc,"readwrite");const p=u.objectStore(Jc).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=f=>r(l.error)};c.onsuccess=d,c.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gl="/",Wp="tensorflowjs_models",H8="info",lue="model_topology",uue="weight_specs",cue="weight_data",due="model_metadata";function q8(t){return{info:[Wp,t,H8].join(gl),topology:[Wp,t,lue].join(gl),weightSpecs:[Wp,t,uue].join(gl),weightData:[Wp,t,cue].join(gl),modelMetadata:[Wp,t,due].join(gl)}}function K8(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function pue(t){const e=t.split(gl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(gl)}function hue(t){return t.startsWith(td.URL_SCHEME)?t.slice(td.URL_SCHEME.length):t}class td{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=q8(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Mm(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Xle(e.weightData));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch{throw K8(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const s=JSON.parse(i);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Yle(o),n}}td.URL_SCHEME="localstorage://";const X8=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(td.URL_SCHEME)?fue(t.slice(td.URL_SCHEME.length)):null;Xn.registerSaveRouter(X8),Xn.registerLoadRouter(X8);function fue(t){return new td(t)}class gue{constructor(){V(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Wp+gl,r=gl+H8;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const o=pue(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=hue(e);const n=q8(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return K8(n),r}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gp="://";class za{constructor(){this.managers={}}static getInstance(){return za.instance==null&&(za.instance=new za),za.instance}static registerManager(e,n){V(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Gp)&&(e=e.slice(0,e.indexOf(Gp))),V(e.length>0,()=>"scheme must not be an empty string.");const r=za.getInstance();V(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=za.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(za.getInstance().managers)}}function kw(t){if(t.indexOf(Gp)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${za.getSchemes().join(",")}`);return{scheme:t.split(Gp)[0],path:t.split(Gp)[1]}}async function Y8(t,e,n=!1){V(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Xn.getLoadHandlers(t);V(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),V(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Xn.getSaveHandlers(e);V(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),V(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],s=kw(t).scheme,l=kw(t).path,u=s===kw(t).scheme,c=await a.load();n&&u&&await za.getManager(s).removeModel(l);const d=await o.save(c);return n&&!u&&await za.getManager(s).removeModel(l),d.modelArtifactsInfo}async function mue(){const t=za.getSchemes(),e={};for(const n of t){const r=await za.getManager(n).listModels();for(const a in r){const i=n+Gp+a;e[i]=r[a]}}return e}async function yue(t){const e=kw(t);return za.getManager(e.scheme).removeModel(e.path)}async function bue(t,e){return Y8(t,e,!1)}async function vue(t,e){return Y8(t,e,!0)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xue{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(!window||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new xue);try{za.registerManager(td.URL_SCHEME,new gue)}catch{}try{za.registerManager(ed.URL_SCHEME,new sue)}catch{}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wue={importFetch:()=>require("node-fetch")};let jT;class kue{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(jT==null&&(jT=wue.importFetch()),jT(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new kue);/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ct(t,e="float32",n){return e=e||"float32",tT(t),new _r(t,e,n)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sue(t,e){const n=z(t,"x","cast");if(!s8(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return te.runKernel(Tg,r,a)}const zn=ee({cast_:Sue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cue(t){const e={x:z(t,"x","clone","string_or_numeric")};return te.runKernel(Vg,e)}const ml=ee({clone_:Cue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VT(t,e=!1){console.log(t.toString(e))}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/A8();const Eue={buffer:Ct,cast:zn,clone:ml,print:VT};Ale(Eue);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Iue="model",Tue=".json",Nue=".weights.bin";function Q8(t){return new Promise(e=>setTimeout(e)).then(t)}class wd{constructor(e){if(!fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(wd.URL_SCHEME)&&(e=e.slice(wd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Iue),this.modelJsonFileName=e+Tue,this.weightDataFileName=e+Nue}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=j8(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await Q8(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=n,await Q8(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Mm(e)}}}}wd.URL_SCHEME="downloads://";class _ue{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const s=LT(i,l=>this.loadWeights(l));e(s)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,a[o]));return Promise.all(i).then(o=>[n,DT(o)])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=o=>{const s=o.target.result;r(s)},i.onerror=o=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>z8(i.name)),a={};for(const i of e)i.paths.forEach(o=>{const s=z8(o);if(n.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);a[o]=this.weightsFiles[r.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const Rue=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(wd.URL_SCHEME)?$ue(t.slice(wd.URL_SCHEME.length)):null;Xn.registerSaveRouter(Rue);function $ue(t="model"){return new wd(t)}function Oue(t){return new _ue(t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z8(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let a=0;const i=l=>(l.then(u=>{const c=n+ ++a/t.length*(r-n);return e(c),u}),l);function o(l){V(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,u){V(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),V(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),V(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function J8(t,e){e==null&&(e={});const n=e.fetchFunc==null?fe().platform.fetch:e.fetchFunc,r=t.map(u=>n(u,e.requestInit,{isBinary:!0})),a=0,i=.5,o=(e.onProgress==null?await Promise.all(r):await Z8(r,e.onProgress,a,i)).map(u=>u.arrayBuffer());return e.onProgress==null?await Promise.all(o):await Z8(o,e.onProgress,.5,1)}async function Mue(t,e="",n,r){return eL(a=>J8(a,{requestInit:r}))(t,e,n)}function eL(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((f,m)=>{let y=0;f.weights.forEach(v=>{const b="quantization"in v?v.quantization.dtype:v.dtype,x=PT[b]*be(v.shape),w=()=>{a[m]=!0,i[m]==null&&(i[m]=[]),i[m].push({manifestEntry:v,groupOffset:y,sizeBytes:x})};r!=null?r.forEach((S,C)=>{S===v.name&&(w(),o[C]=!0)}):w(),s.push(v.name),y+=x})}),!o.every(f=>f)){const f=r.filter((m,y)=>!o[y]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const l=a.reduce((f,m,y)=>(m&&f.push(y),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(m=>{const y=n+(n.endsWith("/")?"":"/")+m;u.push(y)})});const c=await t(u),d={};let p=0;return l.forEach(f=>{const m=e[f].paths.length;let y=0;for(let w=0;w<m;w++)y+=c[p+w].byteLength;const v=new ArrayBuffer(y),b=new Uint8Array(v);let x=0;for(let w=0;w<m;w++){const S=new Uint8Array(c[p+w]);b.set(S,x),x+=S.byteLength}i[f].forEach(w=>{const S=v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),C=F8(S,[w.manifestEntry]);for(const E in C)d[E]=C[E]}),p+=m}),d}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pue="application/octet-stream",Aue="application/json";class UT{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(V(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=fe().platform.fetch,V(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&V(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=j8(e,r);n.body.append("model.json",new Blob([JSON.stringify(a)],{type:Aue}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:Pue}),"model.weights.bin");const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Mm(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return LT(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=Due(n),i=this.weightPathPrefix||r,o=U8(e),s=[],l=[];for(const c of e)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):s.push(i+d+a);this.weightUrlConverter&&s.push(...await Promise.all(l));const u=await J8(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,DT(u)]}}UT.URL_SCHEME_REGEX=/^https?:\/\//;function Due(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function WT(t){return t.match(UT.URL_SCHEME_REGEX)!=null}const tL=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>WT(r)):n=WT(t),n)return GT(t,e)}return null};Xn.registerSaveRouter(tL),Xn.registerLoadRouter(tL);function GT(t,e){return new UT(t,e)}function Lue(t,e){return GT(t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HT{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class nL{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Fue{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Bue(t,e,n,r){const a=arguments;return new Fue(rL(...a))}function rL(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new HT(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new HT({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new HT({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function zue(t){return new nL(t)}function jue(t){return new nL(t)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qT=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:Oue,browserHTTPRequest:Lue,concatenateArrayBuffers:DT,copyModel:bue,decodeWeights:F8,encodeWeights:qle,fromMemory:Bue,fromMemorySync:rL,getLoadHandlers:aue,getModelArtifactsForJSON:LT,getModelArtifactsForJSONSync:V8,getModelArtifactsInfoForJSON:Mm,getSaveHandlers:rue,getWeightSpecs:U8,http:GT,isHTTPScheme:WT,listModels:mue,loadWeights:Mue,moveModel:vue,registerLoadRouter:nue,registerSaveRouter:tue,removeModel:yue,weightsLoaderFactory:eL,withSaveHandler:zue,withSaveHandlerSync:jue},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vue(t,e,n=!1,r=!1){let a=z(t,"a","matMul"),i=z(e,"b","matMul");[a,i]=Kn(a,i);const o={a,b:i},s={transposeA:n,transposeB:r};return te.runKernel(Dv,o,s)}const un=ee({matMul_:Vue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uue(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:z(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return te.runKernel(Rx,i,o)}const Sw=ee({oneHot_:Uue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wue(){fe().set("PROD",!0)}function Gue(){fe().set("DEBUG",!0)}function Hue(){fe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function que(t){fe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Kue(){te.disposeVariables()}function yl(){return te}function Xue(){return te.memory()}function Yue(t){return te.profile(t)}function qt(t,e){return te.tidy(t,e)}function pa(t){NT(t).forEach(e=>e.dispose())}function bs(t){return te.keep(t)}function Que(t){return te.time(t)}function Zue(t){return te.setBackend(t)}function Jue(){return te.ready()}function ece(){return te.backendName}function tce(t){te.removeBackend(t)}function nce(t){return te.findBackend(t)}function rce(t){return te.findBackendFactory(t)}function KT(t,e,n=1){return te.registerBackend(t,e,n)}function ace(){return te.backend}function ice(t,e){fe().setPlatform(t,e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oce(t){const e={input:z(t,"input","imag")};return te.runKernel(hx,e)}const Pm=ee({imag_:oce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sce(t){const e={x:z(t,"x","neg")};return te.runKernel(Ex,e)}const vs=ee({neg_:sce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lce(t){const e={input:z(t,"input","real")};return te.runKernel(Fx,e)}const Hp=ee({real_:lce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uce(t,e,n){const r=z(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),V(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{V(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?qt(()=>{let o=Hp(r),s=Pm(r);return o=te.runKernel(Bp,{x:o},i),s=te.runKernel(Bp,{x:s},i),n&&(s=vs(s)),fl(o,s)}):te.runKernel(Bp,a,i)}const Am=ee({transpose_:uce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cce(t,e,n){const r=z(t,"labels","confusionMatrix"),a=z(e,"predictions","confusionMatrix");V(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),V(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),V(a.rank===1,()=>`Expected the rank of predictions to be 1, but got ${a.rank}`),V(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),V(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=Sw(zn(r,"int32"),n),o=Sw(zn(a,"int32"),n),s=Am(i),l=un(s,o);return zn(l,"int32")}const dce=ee({confusionMatrix_:cce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pce=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:dce},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nd(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function XT(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function jt(t,e){const n=[],r=Math.max(t.length,e.length);for(let a=0;a<r;a++){let i=t[t.length-a-1];i==null&&(i=1);let o=e[e.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else if(i!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else n.unshift(i)}return n}const hce=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:jt,getBroadcastDims:nd,getReductionAxes:XT},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YT(t,e,n){if(Wc(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=ys(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Eu(t,e,r,n)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let rd;function aL(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(fw(pw,te.backendName)!=null){const p={pixels:t},f={numChannels:e};return te.runKernel(pw,p,f)}const[l,u]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let c;if(o)c=t.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=t.data;else if(i||a||s){if(rd==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")rd=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else rd=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});rd.canvas.width=l,rd.canvas.height=u,rd.drawImage(t,0,0,l,u),c=rd.getImageData(0,0,l,u).data}let d;if(e===4)d=new Int32Array(c);else{const p=l*u;d=new Int32Array(p*e);for(let f=0;f<p;f++)for(let m=0;m<e;++m)d[f*e+m]=c[f*4+m]}return YT(d,[u,l,e],"int32")}function fce(t){return t!=null&&t.data instanceof Uint8Array}function gce(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function mce(t){return t!=null&&t.width!==0&&t.height!==0}function yce(t){return gce()&&!(t instanceof ImageBitmap)&&mce(t)&&!fce(t)}async function bce(t,e=3){let n=null;if(fe().getBool("WRAP_TO_IMAGEBITMAP")&&yce(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return aL(n,e)}async function iL(t,e){let n=z(t,"img","toPixels");if(!(t instanceof qn)){const u=n;n=zn(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),s=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const c=[0,0,0,255];for(let p=0;p<i;p++){const f=o[u*i+p];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*s,c[1]=f*s,c[2]=f*s):c[p]=f*s}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){e.width=a,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,a,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const oL=ee({fromPixels_:aL}),vce=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:oL,fromPixelsAsync:bce,toPixels:iL},Symbol.toStringTag,{value:"Module"}));function Cw(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(be(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let o=1;for(let d=0;d<a.length-1;++d)o*=a[d];const s=t.shape,l=a.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=s[d],l.push(s[d]);const c=[...Ze(t.shape).map(d=>d/u),1].slice(0,i);return[l,o,u,c]}const xce=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:Cw},Symbol.toStringTag,{value:"Module"}));function QT(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==t[o+r])throw new Error(i+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function ZT(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}QT(n,e,t)}function qp(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=a;d<i;++d)o*=n[d];const s=a<1?1:a,l=be(e.shape)/s,u=[...Ze(n.slice(0,a)),1],c=be(n);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const wce=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:qp,validateInput:ZT,validateUpdateShape:QT},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const JT=-2,kce=-1;function eN(t,e,n){const r=t.shape.length;V(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),V(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)V(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function Sce(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function tN(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function sL(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function lL(t,e,n){return n<=t?n:n-(e-1)}function uL(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Cce(t,e,n,r,a,i,o,s,l){const u=t.length;let c=new Array(u),d=new Array(u),p=new Array(u);if(e.length&&n>0){const f=e[0],m=n+1;c=cL(o,f,m,r,t),d=dL(s,f,m,a,t),p=sL(i,f,m,t)}else for(let f=0;f<u;f++)c[f]=hL(o,r,i,t,f,l),d[f]=fL(s,a,i,t,f,l),p[f]=pL(i,f,l);return{begin:c,end:d,strides:p}}function cL(t,e,n,r,a){const i=[...a],o=uL(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{const l=lL(e,n,s);let u=r[l];t&1<<l&&(u=0),i[s]=u}return i}function dL(t,e,n,r,a){const i=[...a],o=uL(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const l=lL(e,n,s);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[s]=u}for(let s=0;s<i.length;s++){const l=a[s];i[s]<0&&(i[s]+=l),i[s]=wu(0,i[s],a[s])}return i}function pL(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function hL(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=wu(0,o,l-1),o}function fL(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),s>0?o=wu(0,o,l):o=wu(-1,o,l-1),o}function nN(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function rN(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function aN(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(o=>{V(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((o,s)=>o>=0?o:(V(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,i]}function iN(t,e,n,r,a,i,o,s,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)c&&1<<x&s&&d.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Ece(d,p);let f=!0,m=!0,y=!0;const v=[],b=[];for(let x=0;x<t.length;++x){if(p.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(p.shrinkAxisMask&1<<x),S=t[x];if(S===-1){v.push(w?1:-1);continue}const C=[p.beginMask&1<<x,p.endMask&1<<x],E=[p.strides[x]>0?0:-1,p.strides[x]>0?S:S-1];if(w&&p.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&p.strides[x]===1;const _=!!(p.beginMask&1<<x&&p.endMask&1<<x);if(p.beginValid&&p.endValid){if(w){const L=p.begin[x]<0?S+p.begin[x]:p.begin[x];if(p.begin[x]=L,p.end[x]=p.begin[x]+1,L<0||L>=S)throw Error(`slice index ${p.begin[x]} of dimension ${x} out of bounds.`)}else p.begin[x]=gL(p.begin[x],0,p.strides[x],S,C,E),p.end[x]=gL(p.end[x],1,p.strides[x],S,C,E);const P=p.strides[x]===1&&p.begin[x]===0&&p.end[x]===S;f=f&&P,m=m&&(x===0&&p.strides[x]===1||P)}else f=f&&p.strides[x]===1&&_,m=m&&(x===0&&p.strides[x]===1||_);let N,M=!1;if(p.beginValid&&p.endValid?(N=p.end[x]-p.begin[x],M=!0):w?(N=1,M=!0):_&&S>=0&&(p.strides[x]<0?N=-S:N=S,M=!0),M){let P;N===0||N<0!=p.strides[x]<0?P=0:P=Math.trunc(N/p.strides[x])+(N%p.strides[x]!==0?1:0),v.push(P)}else v.push(-1)}for(let x=0;x<p.finalShapeGatherIndices.length;++x){const w=p.finalShapeGatherIndices[x];w>=0?b.push(v[w]):w===JT&&b.push(1)}return{finalShapeSparse:b.filter((x,w)=>p.finalShapeGatherIndices[w]!==JT),finalShape:b,isIdentity:f,sliceDim0:m,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}function Ece(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(JT),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(kce),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function gL(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const mL=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:eN,computeFlatOffset:rN,computeOutShape:tN,getNormalizedAxes:Cce,isSliceContinous:nN,maskToAxes:Sce,parseSliceParams:aN,sliceInfo:iN,startForAxis:hL,startIndicesWithElidedDims:cL,stopForAxis:fL,stopIndicesWithElidedDims:dL,stridesForAxis:pL,stridesWithElidedDims:sL},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class yL{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Gu{constructor(){this.classNameMap={}}static getMap(){return Gu.instance==null&&(Gu.instance=new Gu),Gu.instance}static register(e){Gu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Tu(t){V(t.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),V(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Gu.register(t)}const Ice=Object.freeze(Object.defineProperty({__proto__:null,Serializable:yL,SerializationMap:Gu,registerClass:Tu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tce=.001,bL=.1;function Nce(t,e,n){return n==null&&(n=oN()),sN(t,e,(r,a)=>lN(r,a,n))}function oN(){return te.backend.floatPrecision()===32?Tce:bL}function sN(t,e,n){let r=!0;if((da(t)||da(e))&&(r=!1),da(t)&&da(e)&&(r=!0),r){const o=t.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=ys(t),s=ys(e);if(!xn(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const a=da(t)?t:cl(t),i=da(e)?e:cl(e);if(a.length!==i.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${i.length}.
Actual:   ${a}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const s=a[o],l=i[o];if(!n(s,l))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${l}.
Actual:   ${a}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function _ce(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function Rce(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return gs(t)||gs(t[0])||gs(e)||gs(e[0])?sN(t,n,(r,a)=>r==a):sN(t,e,(r,a)=>lN(r,a,0))}function $ce(t,e,n){if(n==null&&(n=oN()),!lN(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function lN(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function Oce(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function Mce(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error(`Expected ArrayBuffer value at ${a} to be ${r[a]} but got ${n[a]} instead`)}function vL(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?vL(n):t[e]=ms(n)}return t}function Pce(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function Ace(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const Dce=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:bL,createVideoElement:Pce,encodeStrings:vL,expectArrayBuffersEqual:Mce,expectArraysClose:Nce,expectArraysEqual:Rce,expectNumbersClose:$ce,expectPromiseToFail:_ce,expectValuesInRange:Oce,play:Ace,testEpsilon:oN},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const Lce="3.21.0";/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fce(t,e){let n=z(t,"a","add"),r=z(e,"b","add");[n,r]=Kn(n,r);const a={a:n,b:r};return te.runKernel(Fp,a)}const ft=ee({add_:Fce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bce(t,e){let n=z(t,"a","floorDiv"),r=z(e,"b","floorDiv");[n,r]=Kn(n,r);const a={a:n,b:r};return te.runKernel(Bg,a)}const uN=ee({floorDiv_:Bce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zce(t,e){let n=z(t,"a","div"),r=z(e,"b","div");if([n,r]=Kn(n,r),n.dtype==="int32"&&r.dtype==="int32")return uN(n,r);const a={a:n,b:r},i={};return te.runKernel(Og,a,i)}const In=ee({div_:zce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jce(t,e){let n=z(t,"a","mul"),r=z(e,"b","mul");[n,r]=Kn(n,r);const a={a:n,b:r};return te.runKernel(nm,a)}const De=ee({mul_:jce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vce(t){const e=z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return te.runKernel(jv,n)}else{const n={x:e};return te.runKernel(Nv,n)}}const fi=ee({abs_:Vce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uce(t){const e={x:z(t,"x","acos")};return te.runKernel(xg,e)}const xL=ee({acos_:Uce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wce(t){const e={x:z(t,"x","acosh")};return te.runKernel(wg,e)}const wL=ee({acosh_:Wce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gce(t){V(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),V(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>z(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!xn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return te.runKernel(_v,r)}const kL=ee({addN_:Gce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hce(t,e=null,n=!1){const r={x:z(t,"x","all","bool")},a={axis:e,keepDims:n};return te.runKernel(Rv,r,a)}const SL=ee({all_:Hce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qce(t,e=null,n=!1){const r={x:z(t,"x","any","bool")},a={axis:e,keepDims:n};return te.runKernel($v,r,a)}const CL=ee({any_:qce});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kce(t,e=0){const n={x:z(t,"x","argMax")},r={axis:e};return te.runKernel(Ov,n,r)}const EL=ee({argMax_:Kce});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xce(t,e=0){const n={x:z(t,"x","argMin")},r={axis:e};return te.runKernel(Mv,n,r)}const IL=ee({argMin_:Xce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yce(t){const e={x:z(t,"x","asin")};return te.runKernel(kg,e)}const TL=ee({asin_:Yce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qce(t){const e={x:z(t,"x","asinh")};return te.runKernel(Sg,e)}const NL=ee({asinh_:Qce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zce(t){const e={x:z(t,"x","atan")};return te.runKernel(Cg,e)}const _L=ee({atan_:Zce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jce(t,e){let n=z(t,"a","atan2"),r=z(e,"b","atan2");[n,r]=Kn(n,r);const a={a:n,b:r};return te.runKernel(Ig,a)}const RL=ee({atan2_:Jce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ede(t){const e={x:z(t,"x","atanh")};return te.runKernel(Eg,e)}const $L=ee({atanh_:ede});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dm(t,e,n,r,a="NHWC",i){const o=t[3],s=[...e,o],l=vl(a);return zr(t,s,n,i,r,null,null,l)}function co(t,e,n,r,a,i,o="channelsLast"){const[s,l]=Ew(e);let u;if(o==="channelsLast")u=[s,l,t[3],t[3]];else if(o==="channelsFirst")u=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return zr(t,u,n,r,a,i,!1,o)}function bl(t,e,n,r,a,i,o="NDHWC"){const[s,l,u]=dN(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[s,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[s,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Nu(t,c,n,r,a,!1,d,i)}function zr(t,e,n,r,a,i,o=!1,s="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d]=t;else if(s==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[p,f,,m]=e,[y,v]=Ew(n),[b,x]=Ew(r),w=Kp(p,b),S=Kp(f,x),{padInfo:C,outHeight:E,outWidth:_}=rde(a,u,c,y,v,w,S,i,s),N=o?m*d:m;let M;return s==="channelsFirst"?M=[l,N,E,_]:s==="channelsLast"&&(M=[l,E,_,N]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:E,outWidth:_,outChannels:N,padInfo:C,strideHeight:y,strideWidth:v,filterHeight:p,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:x,inShape:t,outShape:M,filterShape:e}}function Nu(t,e,n,r,a,i=!1,o="channelsLast",s){let[l,u,c,d,p]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d,p]=t;else if(o==="channelsFirst")[l,p,u,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,m,y,,v]=e,[b,x,w]=dN(n),[S,C,E]=dN(r),_=Kp(f,S),N=Kp(m,C),M=Kp(y,E),{padInfo:P,outDepth:L,outHeight:j,outWidth:B}=ade(a,u,c,d,b,x,w,_,N,M,s),K=i?v*p:v;let X;return o==="channelsFirst"?X=[l,K,L,j,B]:o==="channelsLast"&&(X=[l,L,j,B,K]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:L,outHeight:j,outWidth:B,outChannels:K,padInfo:P,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:f,filterHeight:m,filterWidth:y,effectiveFilterDepth:_,effectiveFilterHeight:N,effectiveFilterWidth:M,dilationDepth:S,dilationHeight:C,dilationWidth:E,inShape:t,outShape:X,filterShape:e}}function tde(t,e,n,r,a){r==null&&(r=cN(t,e,n));const i=t[0],o=t[1],s=ad((i-e+2*r)/n+1,a),l=ad((o-e+2*r)/n+1,a);return[s,l]}function nde(t,e,n,r,a,i){a==null&&(a=cN(t,e,r));const o=t[0],s=t[1],l=t[2],u=ad((o-e+2*a)/r+1,i),c=ad((s-e+2*a)/r+1,i),d=ad((l-e+2*a)/r+1,i);return[u,c,d,n]}function cN(t,e,n,r=1){const a=Kp(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function Ew(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function dN(t){return typeof t=="number"?[t,t,t]:t}function Kp(t,e){return e<=1?t:t+(t-1)*(e-1)}function rde(t,e,n,r,a,i,o,s,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=tde([e,n],i,r,t,s);c=p[0],d=p[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/a);const p=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(d-1)*a+o-n),m=Math.floor(p/2),y=p-m,v=Math.floor(f/2),b=f-v;u={top:m,bottom:y,left:v,right:b,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/a);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];u={top:p,bottom:f,left:m,right:y,type:p===0&&f===0&&m===0&&y===0?"VALID":"EXPLICIT"},c=ad((e-i+p+f)/r+1,s),d=ad((n-o+m+y)/a+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function ade(t,e,n,r,a,i,o,s,l,u,c){let d,p,f,m;if(typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=nde([e,n,r,1],s,1,a,t,c);p=y[0],f=y[1],m=y[2]}else if(t==="same"){p=Math.ceil(e/a),f=Math.ceil(n/i),m=Math.ceil(r/o);const y=(p-1)*a+s-e,v=(f-1)*i+l-n,b=(m-1)*o+u-r,x=Math.floor(y/2),w=y-x,S=Math.floor(v/2),C=v-S,E=Math.floor(b/2),_=b-E;d={top:S,bottom:C,left:E,right:_,front:x,back:w,type:"SAME"}}else if(t==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/a),f=Math.ceil((n-l+1)/i),m=Math.ceil((r-u+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:f,outWidth:m}}function ad(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Lm(t){const[e,n,r]=Ew(t);return e===1&&n===1&&r===1}function ha(t,e){return Lm(t)||Lm(e)}function vl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function po(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")V(Gc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{V(Gc(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ide(t,e){const n={x:z(t,"x","reshape","string_or_numeric")},r={shape:e};return te.runKernel(Bx,n,r)}const Se=ee({reshape_:ide});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ode(t,e,n,r,a){const i=z(t,"x","avgPool","float32"),o=1;V(ha(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),po("avgPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let d=te.runKernel(Pv,u,c);return d=zn(d,i.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const pN=ee({avgPool_:ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sde(t,e,n,r,a,i="NDHWC"){const o=z(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),V(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),po("avgPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let d=te.runKernel(Av,u,c);return d=zn(d,s.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const OL=ee({avgPool3d_:sde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lde(t,e=0){V(t.length>=1,()=>"Pass at least one tensor to concat");const n=Om(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return ml(n[0]);const r=n,a={axis:e};return te.runKernel(Vv,r,a)}const fa=ee({concat_:lde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ude(t){const e={x:z(t,"x","sigmoid","float32")};return te.runKernel(fm,e)}const id=ee({sigmoid_:ude});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cde(t,e,n){const r=z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return te.runKernel(Hx,a,i)}const wn=ee({slice_:cde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dde(t){const e={x:z(t,"x","tanh","float32")};return te.runKernel(xm,e)}const Iw=ee({tanh_:dde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pde(t,e,n,r,a,i){const o=z(t,"forgetBias","basicLSTMCell"),s=z(e,"lstmKernel","basicLSTMCell"),l=z(n,"lstmBias","basicLSTMCell"),u=z(r,"data","basicLSTMCell"),c=z(a,"c","basicLSTMCell"),d=z(i,"h","basicLSTMCell"),p=fa([u,d],1),f=un(p,s),m=ft(f,l),y=m.shape[0],v=m.shape[1]/4,b=[y,v],x=wn(m,[0,0],b),w=wn(m,[0,v],b),S=wn(m,[0,v*2],b),C=wn(m,[0,v*3],b),E=ft(De(id(x),Iw(w)),De(c,id(ft(o,S)))),_=De(Iw(E),id(C));return[E,_]}const ML=ee({basicLSTMCell_:pde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hde(t,e,n){const r=z(t,"x","batchToSpaceND"),a=e.reduce((s,l)=>s*l);V(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),V(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),V(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},o={blockShape:e,crops:n};return te.runKernel(Lv,i,o)}const hN=ee({batchToSpaceND_:hde});function fde(t){let e;return t.rank===0||t.rank===1?e=Se(t,[1,1,1,t.size]):t.rank===2?e=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gde(t,e,n,r,a,i){i==null&&(i=.001);const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;r!=null&&(c=z(r,"offset","batchNorm")),V(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:fde(o),scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:i},f=te.runKernel(ux,d,p);return Se(f,o.shape)}const Fm=ee({batchNorm_:gde});function mde(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),V(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Fm(o,s,l,c,u,i)}const PL=ee({batchNorm2d_:mde});function yde(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),V(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Fm(o,s,l,c,u,i)}const AL=ee({batchNorm3d_:yde});function bde(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),V(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Fm(o,s,l,c,u,i)}const DL=ee({batchNorm4d_:bde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vde(t,e,n){const r=z(t,"x","bincount"),a=z(e,"weights","bincount");V(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},o={size:n};return te.runKernel(Fv,i,o)}const fN=ee({bincount_:vde});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xde(t,e){const n=z(t,"s0","broadcastArgs","int32"),r=z(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return te.runKernel(Bv,a)}const LL=ee({broadcastArgs_:xde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wde(t,e){let n=z(t,"broadcastTo","x");const r=n.shape;if(e.some(l=>!(l>0)||l%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=Se(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return ml(n);const o={x:n},s={reps:i};return te.runKernel(wm,o,s)}const Xp=ee({broadcastTo_:wde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kde(t){const e={x:z(t,"x","ceil","float32")};return te.runKernel(Ng,e)}const FL=ee({ceil_:kde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yp(t,e,n){const r={shape:t,value:e,dtype:n};return te.runKernel(sx,{},r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sde(t,e,n){const r=z(t,"x","clipByValue");if(V(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Yp(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return te.runKernel(_g,a,i)}const BL=ee({clipByValue_:Sde});function Cde(t){return fa(t,0)}const zL=ee({concat1d_:Cde});function Ede(t,e){return fa(t,e)}const jL=ee({concat2d_:Ede});function Ide(t,e){return fa(t,e)}const VL=ee({concat3d_:Ide});function Tde(t,e){return fa(t,e)}const UL=ee({concat4d_:Tde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nde(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","conv2d","float32"),l=z(e,"filter","conv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),po("conv2d",r,o);const d=a==="NHWC"?u.shape[3]:u.shape[1];V(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),V(ha(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},m=te.runKernel(Uv,p,f);return c?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Bm=ee({conv2d_:Nde});function _de(t,e,n,r,a="NWC",i=1,o){const s=z(t,"x","conv1d"),l=z(e,"filter","conv1d");let u=s,c=!1;s.rank===2&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1]])),V(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),po("conv1d",r,o),V(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(ha(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),V(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const d=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=Se(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=Bm(p,d,[1,n],r,"NHWC",[1,i],o);return c?Se(f,[f.shape[2],f.shape[3]]):Se(f,[f.shape[0],f.shape[2],f.shape[3]])}const WL=ee({conv1d_:_de});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rde(t,e,n,r,a,i="NHWC",o){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,u=!1;e.rank===3&&(u=!0,l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),V(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];V(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),V(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),po("conv2dDerInput",a,o);const p={dy:l,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},m=te.runKernel(Gv,p,f);return u?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const GL=ee({conv2DBackpropInput_:Rde});function $de(t,e,n,r,a,i){const o=z(t,"x","conv2dTranspose"),s=z(e,"filter","conv2dTranspose");return GL(n,o,s,r,a,"NHWC",i)}const HL=ee({conv2dTranspose_:$de});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ode(t,e,n,r,a="NDHWC",i=[1,1,1]){const o=z(t,"x","conv3d"),s=z(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),V(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),V(ha(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),V(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},p=te.runKernel(Hv,c,d);return u?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const qL=ee({conv3d_:Ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mde(t,e,n,r,a){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,s=!1;e.rank===4&&(s=!0,o=Se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];V(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),V(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),V(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),V(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),V(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},p=te.runKernel(qv,c,d);return s?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Pde=ee({conv3DBackpropInput_:Mde});function Ade(t,e,n,r,a){const i=z(t,"x","conv3dTranspose"),o=z(e,"filter","conv3dTranspose");return Pde(n,i,o,r,a)}const KL=ee({conv3dTranspose_:Ade});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dde(t){const e={x:z(t,"x","cos","float32")};return te.runKernel(Rg,e)}const XL=ee({cos_:Dde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lde(t){const e={x:z(t,"x","cosh","float32")};return te.runKernel($g,e)}const YL=ee({cosh_:Lde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fde(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(Kv,a,i)}const QL=ee({cumprod_:Fde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bde(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(Xv,a,i)}const ZL=ee({cumsum_:Bde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zde(t,e,n,r=!1){const a=z(t,"x","denseBincount"),i=z(e,"weights","denseBincount");V(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),V(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const o={x:a,weights:i},s={size:n,binaryOutput:r};return te.runKernel(Qv,o,s)}const JL=ee({denseBincount_:zde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jde(t,e,n="NHWC"){const r=z(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];V(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),V(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),V(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),V(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return te.runKernel(Zv,s,l)}const eF=ee({depthToSpace_:jde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vde(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","depthwiseConv2d","float32"),l=z(e,"filter","depthwiseConv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=a==="NHWC"?u.shape[3]:u.shape[1];V(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),po("depthwiseConv2d",r,o);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},m=te.runKernel(Jv,p,f);return c?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Tw=ee({depthwiseConv2d_:Vde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ude(t){const e={x:z(t,"x","diag")};return te.runKernel(nx,e)}const tF=ee({diag_:Ude});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wde(t,e,n,r,a=[1,1],i="NHWC"){const o=z(t,"x","dilation2d"),s=z(e,"filter","dilation2d");V(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),V(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),V(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:s},d={strides:n,pad:r,dilations:a},p=te.runKernel(rx,c,d);return u?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const nF=ee({dilation2d_:Wde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gde(t,e){let n=z(t,"a","equal","string_or_numeric"),r=z(e,"b","equal","string_or_numeric");[n,r]=Kn(n,r),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Ag,a)}const gN=ee({equal_:Gde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hde(t,e,n){const r=z(e,"a","where"),a=z(n,"b","where"),i=z(t,"condition","where","bool"),o=jt(jt(i.shape,r.shape),a.shape),s=Xp(i,o),l=Xp(r,o),u=Xp(a,o),c={condition:s,t:l,e:u};return te.runKernel(Gx,c)}const od=ee({where_:Hde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qde(t){const e={x:z(t,"x","zerosLike")};return te.runKernel(dw,e)}const gi=ee({zerosLike_:qde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kde(t,e){let n=z(t,"a","div"),r=z(e,"b","div");[n,r]=Kn(n,r);const a=In(n,r),i=gi(a),o=gN(r,i);return od(o,i,a)}const rF=ee({divNoNan_:Kde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xde(t,e){const n=z(t,"t1","dot"),r=z(e,"t2","dot");V((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(V(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const o=Se(n,[1,-1]),s=Se(r,[-1,1]),l=un(o,s);return Se(l,[])}else if(n.rank===1&&r.rank===2){const o=Se(n,[1,-1]),s=Se(r,[r.shape[0],r.shape[1]]),l=un(o,s);return Se(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Se(r,[-1,1]),s=un(n,o);return Se(s,[s.size])}else{const o=Se(r,[r.shape[0],r.shape[1]]);return un(n,o)}}const aF=ee({dot_:Xde});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yde(t,...e){const n=e.map((a,i)=>z(a,`tensors${i}`,"einsum")),r={equation:t};return te.runKernel(ax,n,r)}const iF=ee({einsum_:Yde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qde(t){const e={x:z(t,"x","elu","float32")};return te.runKernel(Mg,e)}const mN=ee({elu_:Qde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zde(t){let e=z(t,"x","erf");V(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=zn(e,"float32"));const n={x:e};return te.runKernel(Pg,n)}const oF=ee({erf_:Zde});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yN(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function sF(t,e,n){const r=t.length+e.length,a=[];let i=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?a.push(t[i++]):a.push(e[o++]);return a}function Qr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function Rr(t,e){const n=e.map(r=>1);return sF(t,n,e)}function Zr(t,e,n){V(yN(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function pr(t,e){if(yN(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function zm(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function hr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jde(t,e=null,n=!1){const r={x:z(t,"x","max")},a={reductionIndices:e,keepDims:n};return te.runKernel(yx,r,a)}const sd=ee({max_:Jde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function epe(t,e=null,n=!1){const r={x:z(t,"x","min")},a={axis:e,keepDims:n};return te.runKernel(kx,r,a)}const Nw=ee({min_:epe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tpe(t,e){let n=z(t,"base","pow"),r=z(e,"exp","pow");[n,r]=Kn(n,r);const a={a:n,b:r};return te.runKernel(am,a)}const Qp=ee({pow_:tpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bt(t,e){if((da(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&da(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Eu(t,[],[],e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function npe(t){const e={x:z(t,"x","sqrt","float32")};return te.runKernel(mm,e)}const xs=ee({sqrt_:npe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rpe(t){const e=z(t,"x","square"),n={};return te.runKernel("Square",{x:e},n)}const ho=ee({square_:rpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ape(t,e=null,n=!1){let r=z(t,"x","sum");r.dtype==="bool"&&(r=zn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(qx,a,i)}const Tn=ee({sum_:ape});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ipe(t,e="euclidean",n=null,r=!1){t=z(t,"x","norm");const a=lF(t,e,n);let i=a.shape;if(r){const o=Yt(n,t.shape);i=Rr(a.shape,o)}return Se(a,i)}function lF(t,e,n=null){if(t.rank===0)return fi(t);if(t.rank!==1&&n===null)return lF(Se(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Tn(fi(t),n);if(e===1/0)return sd(fi(t),n);if(e===-1/0)return Nw(fi(t),n);if(e==="euclidean"||e===2)return xs(Tn(Qp(fi(t),Bt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return sd(Tn(fi(t),n[0]),n[1]-1);if(e===1/0)return sd(Tn(fi(t),n[1]),n[0]);if(e===-1/0)return Nw(Tn(fi(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return xs(Tn(ho(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const jm=ee({norm_:ipe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ope(t,e=null,n=!1){return jm(t,"euclidean",e,n)}const uF=ee({euclideanNorm_:ope});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function spe(t){const e={x:z(t,"x","exp")};return te.runKernel(Dg,e)}const _u=ee({exp_:spe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lpe(t,e=0){const n=z(t,"x","expandDims","string_or_numeric");V(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return te.runKernel(ix,r,a)}const xl=ee({expandDims_:lpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function upe(t){const e={x:z(t,"x","expm1")};return te.runKernel(Lg,e)}const cF=ee({expm1_:upe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cpe(t,e){const n=z(t,"x","tile","string_or_numeric");V(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return te.runKernel(wm,r,a)}const Zp=ee({tile_:cpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dpe(t,e,n,r="float32"){e==null&&(e=t);const a=Ct([t,e],r),i=t<=e?t:e;for(let s=0;s<i;++s)a.set(1,s,s);const o=Se(a.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Zp(xl(o,0),[n[0],1,1]);if(n.length===2)return Zp(xl(xl(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Zp(xl(xl(xl(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const bN=ee({eye_:dpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ppe(t){const e={x:z(t,"x","floor","float32")};return te.runKernel(Fg,e)}const vN=ee({floor_:ppe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hpe(t,e,n=0,r=0){const a=z(t,"x","gather"),i=z(e,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return te.runKernel(cx,o,s)}const xN=ee({gather_:hpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fpe(t,e){let n=z(t,"a","greater","string_or_numeric"),r=z(e,"b","greater","string_or_numeric");[n,r]=Kn(n,r),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(zg,a)}const Vm=ee({greater_:fpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gpe(t,e){let n=z(t,"a","greaterEqual","string_or_numeric"),r=z(e,"b","greaterEqual","string_or_numeric");[n,r]=Kn(n,r),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(jg,a)}const wN=ee({greaterEqual_:gpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mpe(t){const e={x:z(t,"x","isFinite")};return te.runKernel(Ug,e)}const dF=ee({isFinite_:mpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ype(t){const e={x:z(t,"x","isInf")};return te.runKernel(Wg,e)}const pF=ee({isInf_:ype});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bpe(t){const e={x:z(t,"x","isNaN")};return te.runKernel(Gg,e)}const hF=ee({isNaN_:bpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vpe(t,e=.2){const n={x:z(t,"x","leakyRelu")},r={alpha:e};return te.runKernel(fx,n,r)}const kN=ee({leakyRelu_:vpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xpe(t,e){let n=z(t,"a","less","string_or_numeric"),r=z(e,"b","less","string_or_numeric");[n,r]=Kn(n,r),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Hg,a)}const fF=ee({less_:xpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wpe(t,e){let n=z(t,"a","lessEqual","string_or_numeric"),r=z(e,"b","lessEqual","string_or_numeric");[n,r]=Kn(n,r),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(qg,a)}const _w=ee({lessEqual_:wpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gF(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return te.runKernel(gx,{},r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kpe(t,e=5,n=1,r=1,a=.5){const i=z(t,"x","localResponseNormalization");V(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),V(Gc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,s=!1;i.rank===3&&(s=!0,o=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:a},c=te.runKernel(mx,l,u);return s?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const mF=ee({localResponseNormalization_:kpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Spe(t){const e={x:z(t,"x","log","float32")};return te.runKernel(Kg,e)}const Jp=ee({log_:Spe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cpe(t){const e={x:z(t,"x","log1p")};return te.runKernel(Xg,e)}const SN=ee({log1p_:Cpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Epe(t){return V(ku(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=z(e,"x","tf.grad","string_or_numeric"),a=n!=null?z(n,"dy","tf.grad"):null;return te.tidy(()=>{const{value:i,grads:o}=te.gradients(()=>t(r),[r],a);return a!=null&&Xr(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Rw(o),o[0]})}}function Ipe(t){return V(ku(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{V(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Om(e,"args","tf.grads","string_or_numeric"),a=n!=null?z(n,"dy","tf.grads"):null;return te.tidy(()=>{const{value:i,grads:o}=te.gradients(()=>t(...r),r,a);return a!=null&&Xr(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Rw(o),o})}}function Tpe(t){return V(ku(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{V(e instanceof qn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),V(n==null||n instanceof qn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:a}=te.gradients(()=>t(e),[e],n);return Rw(r),{grad:r[0],value:a}}}function Npe(t){return V(ku(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{V(Array.isArray(e)&&e.every(a=>a instanceof qn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),V(n==null||n instanceof qn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=te.gradients(()=>t(...e),e,n);return n!=null&&Xr(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Rw(r.grads),r}}function yF(t,e){V(ku(t),()=>"The f passed in variableGrads(f) must be a function"),V(e==null||Array.isArray(e)&&e.every(u=>u instanceof $m),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in te.registeredVariables)e.push(te.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,a=e.length;e=e.filter(u=>u.trainable),V(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:o,grads:s}=te.gradients(t,e,null,i);V(s.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{s[c]!=null&&(l[u.name]=s[c])}),r?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function ws(t){return te.customGrad(t)}function Rw(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _pe(t){const e={x:z(t,"x","softplus")};return te.runKernel(gm,e)}const CN=ee({softplus_:_pe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rpe(t){const e=z(t,"x","logSigmoid");return ws(n=>({value:vs(CN(vs(n))),gradFunc:r=>De(r,id(vs(n)))}))(e)}const bF=ee({logSigmoid_:Rpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $pe(t,e){let n=z(t,"a","sub"),r=z(e,"b","sub");[n,r]=Kn(n,r);const a={a:n,b:r};return te.runKernel(bm,a)}const At=ee({sub_:$pe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ope(t,e=-1){const n=z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return ws((r,a)=>{const i=sd(r,e,!0),o=At(r,i),s=At(zn(o,"float32"),Jp(Tn(_u(o),e,!0)));return a([s]),{value:s,gradFunc:(l,u)=>{const[c]=u,d=!0,p=_u(c);return At(l,De(Tn(l,e,d),p))}}})(n)}const vF=ee({logSoftmax_:Ope});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mpe(t,e=null,n=!1){const r=z(t,"x","logSumExp"),a=Yt(e,r.shape),i=sd(r,a,!0),o=At(r,i),s=_u(o),l=Tn(s,a),u=Jp(l),c=ft(Se(i,u.shape),u);if(n){const d=Rr(c.shape,a);return Se(c,d)}return c}const EN=ee({logSumExp_:Mpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ppe(t,e){const n=z(t,"a","logicalAnd","bool"),r=z(e,"b","logicalAnd","bool");jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Yg,a)}const Um=ee({logicalAnd_:Ppe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ape(t){const e={x:z(t,"x","logicalNot","bool")};return te.runKernel(Qg,e)}const IN=ee({logicalNot_:Ape});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dpe(t,e){const n=z(t,"a","logicalOr","bool"),r=z(e,"b","logicalOr","bool");jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Zg,a)}const TN=ee({logicalOr_:Dpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lpe(t,e){const n=z(t,"a","logicalXor","bool"),r=z(e,"b","logicalXor","bool");return jt(n.shape,r.shape),Um(TN(t,e),IN(Um(t,e)))}const xF=ee({logicalXor_:Lpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $w=2147483648;function Fpe(t,e,n="left"){const r=z(t,"sortedSequence","searchSorted"),a=z(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Se(r,[-1,i]),l=Se(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(be(l.shape)>=$w)throw new Error(`values tensor size must less than ${$w}`);if(s.shape[1]>=$w)throw new Error(`trailing dim_size must less than ${$w} for int32 output type, was ${s.shape[1]}`);const u={sortedSequence:s,values:l},c={side:n};return te.runKernel(Wx,u,c)}const Ow=ee({searchSorted_:Fpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wF(t,e){return Ow(t,e,"left")}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bpe(t,e,n,r,a){const i=z(t,"x","maxPool"),o=1;let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),V(ha(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),po("maxPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},d=te.runKernel(bx,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const NN=ee({maxPool_:Bpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zpe(t,e=[1,1,1],n,r,a,i="NDHWC"){const o=z(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),V(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),po("maxPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=te.runKernel(vx,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const kF=ee({maxPool3d_:zpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jpe(t,e,n,r,a=!1){const i={x:z(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},s=te.runKernel(xx,i,o);return{result:s[0],indexes:s[1]}}const SF=ee({maxPoolWithArgmax_:jpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vpe(t,e){let n=z(t,"a","maximum"),r=z(e,"b","maximum");[n,r]=Kn(n,r),n.dtype==="bool"&&(n=zn(n,"int32"),r=zn(r,"int32")),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Jg,a)}const _N=ee({maximum_:Vpe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Upe(t,e=null,n=!1){const r={x:z(t,"x","mean")},a={axis:e,keepDims:n};return te.runKernel(wx,r,a)}const Wm=ee({mean_:Upe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ru(t,e="float32"){if(e==="complex64"){const r=Ru(t,"float32"),a=Ru(t,"float32");return fl(r,a)}const n=Yr(be(t),e);return te.makeTensor(n,t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $u(t,e="float32"){if(e==="complex64"){const r=$u(t,"float32"),a=Ru(t,"float32");return fl(r,a)}const n=Tv(be(t),e);return te.makeTensor(n,t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CF(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=z(t,"x","meshgrid",t instanceof qn?t.dtype:"float32");if(e===void 0)return[r];let a=z(e,"y","meshgrid",e instanceof qn?e.dtype:"float32");const i=be(r.shape),o=be(a.shape);return n==="xy"?(r=Se(r,[1,-1]),a=Se(a,[-1,1]),[un($u([o,1],r.dtype),r),un(a,$u([1,i],a.dtype))]):(r=Se(r,[-1,1]),a=Se(a,[1,-1]),[un(r,$u([1,o],r.dtype)),un($u([i,1],a.dtype),a)])}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wpe(t,e){let n=z(t,"a","minimum"),r=z(e,"b","minimum");[n,r]=Kn(n,r),n.dtype==="bool"&&(n=zn(n,"int32"),r=zn(r,"int32")),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(em,a)}const RN=ee({minimum_:Wpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gpe(t,e,n){V(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)V(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(e[s][0]>=0&&e[s][0]<=r.shape[s]-a&&e[s][1]>=0&&e[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return te.runKernel(Sx,o,i)}const EF=ee({mirrorPad_:Gpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hpe(t,e){let n=z(t,"a","mod"),r=z(e,"b","mod");[n,r]=Kn(n,r);const a={a:n,b:r};return te.runKernel(tm,a)}const IF=ee({mod_:Hpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qpe(t,e=null,n=!1){t=z(t,"x","moments");const r=Yt(e,t.shape),a=Wm(t,r,n);let i=a.shape;n||(i=Rr(a.shape,r));const o=ho(At(zn(t,"float32"),Se(a,i))),s=Wm(o,r,n);return{mean:a,variance:s}}const TF=ee({moments_:qpe});function Kpe(t,e,n,r){const a=z(e,"data","multiRNNCell"),i=Om(n,"c","multiRNNCell"),o=Om(r,"h","multiRNNCell");let s=a;const l=[];for(let d=0;d<t.length;d++){const p=t[d](s,i[d],o[d]);l.push(p[0]),l.push(p[1]),s=p[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const NF=ee({multiRNNCell_:Kpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xpe(t,e,n,r=!1){const a=z(t,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const s={logits:o===1?Se(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},u=te.runKernel(Cx,s,l);return o===1?Se(u,[u.size]):u}const _F=ee({multinomial_:Xpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ype(t,e){let n=z(t,"a","notEqual","string_or_numeric"),r=z(e,"b","notEqual","string_or_numeric");[n,r]=Kn(n,r),jt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(rm,a)}const $N=ee({notEqual_:Ype});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qpe(t){const e={x:z(t,"x","onesLike")};return te.runKernel(_x,e)}const RF=ee({onesLike_:Qpe});function Zpe(t,e){const n=z(t,"v1","outerProduct"),r=z(e,"v2","outerProduct");V(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=Se(n,[-1,1]),i=Se(r,[1,-1]);return un(a,i)}const $F=ee({outerProduct_:Zpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jpe(t,e,n=0){const r=z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return te.runKernel(Ox,i,a)}const eh=ee({pad_:Jpe});function ehe(t,e,n=0){return V(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),eh(t,[e],n)}const OF=ee({pad1d_:ehe});function the(t,e,n=0){return V(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),eh(t,e,n)}const MF=ee({pad2d_:the});function nhe(t,e,n=0){return V(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),eh(t,e,n)}const PF=ee({pad3d_:nhe});function rhe(t,e,n=0){return V(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),eh(t,e,n)}const AF=ee({pad4d_:rhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ahe(t,e,n){const r=z(t,"x","spaceToBatchND");V(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),V(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),V(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return te.runKernel(Kx,a,i)}const ON=ee({spaceToBatchND_:ahe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ihe(t,e,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const s=z(t,"x","maxPool");let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(ha(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=co(l.shape,e,i,a,r),d=[c.dilationHeight,c.dilationWidth];let p;r==="same"?p=she([c.filterHeight,c.filterWidth],d):p=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[m,y]=ohe([c.inHeight,c.inWidth],d,p),v=f?r:"valid",b=f?l:ON(l,d,m),x=(n==="avg"?()=>pN(b,e,i,v,o):()=>NN(b,e,i,v,o))(),w=f?x:hN(x,d,y);return u?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function ohe(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),o=e.map((c,d)=>(c-i[d]%c)%c),s=a.map((c,d)=>c+o[d]),l=e.map((c,d)=>[r[d],s[d]]),u=e.map((c,d)=>[0,o[d]]);return[l,u]}function she(t,e){const n=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,o)=>i-r[o]);return n.map((i,o)=>[r[o],a[o]])}const DF=ee({pool_:ihe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lhe(t,e){const n=z(t,"x","prelu"),r=z(e,"alpha","prelu"),a={x:n,alpha:r};return te.runKernel(Mx,a)}const MN=ee({prelu_:lhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uhe(t,e=null,n=!1){let r=z(t,"x","prod");r.dtype==="bool"&&(r=zn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(Px,a,i)}const LF=ee({prod_:uhe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function che(t,e,n,r){const a=t.map((c,d)=>z(c,`tensors${d}`,"raggedGather","int32")),i=z(e,"paramsDenseValues","raggedGather"),o=z(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=te.runKernel(Ax,s,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const FF=ee({raggedGather_:che});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dhe(t,e,n,r,a){const i=z(t,"shape","raggedTensorToTensor","int32"),o=z(e,"values","raggedTensorToTensor"),s=z(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,p)=>z(d,`tensors${p}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:s,rowPartitionTensors:l},c={rowPartitionTypes:a};return te.runKernel(Dx,u,c)}const BF=ee({raggedTensorToTensor_:dhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function phe(t,e,n){const r=be(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return te.makeTensor(a,t,n)}const zF=ee({rand_:phe});var PN={exports:{}};PN.exports,function(t){(function(e,n,r){function a(l){var u=this,c=s();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new a(l),d=u&&u.state,p=c.next;return p.int32=function(){return c.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&i(d,c),p.state=function(){return i(c,{})}),p}function s(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Ga,t,!1)}(PN);var hhe=PN.exports,AN={exports:{}};AN.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Ga,t,!1)}(AN);var fhe=AN.exports,DN={exports:{}};DN.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Ga,t,!1)}(DN);var ghe=DN.exports,LN={exports:{}};LN.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.x,d=l.i,p,f;return p=c[d],p^=p>>>7,f=p^p<<24,p=c[d+1&7],f^=p^p>>>10,p=c[d+3&7],f^=p^p>>>3,p=c[d+4&7],f^=p^p<<7,p=c[d+7&7],p=p^p<<13,f^=p^p<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var p,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,p=0;p<d.length;++p)f[p&7]=f[p&7]<<15^d.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],c.x=f,c.i=0,p=256;p>0;--p)c.next()}u(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Ga,t,!1)}(LN);var mhe=LN.exports,FN={exports:{}};FN.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.w,d=l.X,p=l.i,f,m;return l.w=c=c+1640531527|0,m=d[p+34&127],f=d[p=p+1&127],m^=m<<13,f^=f<<17,m^=m>>>15,f^=f>>>12,m=d[p]=m^f,l.i=p,m+(c^c>>>16)|0};function u(c,d){var p,f,m,y,v,b=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),m=0,y=-32;y<x;++y)d&&(f^=d.charCodeAt((y+32)%d.length)),y===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,y>=0&&(v=v+1640531527|0,p=b[y&127]^=f+v,m=p==0?m+1:0);for(m>=128&&(b[(d&&d.length||0)&127]=-1),m=127,y=4*128;y>0;--y)f=b[m+34&127],p=b[m=m+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,b[m]=f^p;c.w=v,c.X=b,c.i=m}u(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Ga,t,!1)}(FN);var yhe=FN.exports,BN={exports:{}};BN.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.b,p=l.c,f=l.d,m=l.a;return d=d<<25^d>>>7^p,p=p-f|0,f=f<<24^f>>>8^m,m=m-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-f|0,l.d=f<<16^p>>>16^m,l.a=m-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Ga,t,!1)}(BN);var bhe=BN.exports,jF={exports:{}};const vhe={},xhe=Object.freeze(Object.defineProperty({__proto__:null,default:vhe},Symbol.toStringTag,{value:"Module"})),VF=DU(xhe);(function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",l=r.pow(a,i),u=r.pow(2,o),c=u*2,d=a-1,p;function f(S,C,E){var _=[];C=C==!0?{entropy:!0}:C||{};var N=b(v(C.entropy?[S,w(n)]:S??x(),3),_),M=new m(_),P=function(){for(var L=M.g(i),j=l,B=0;L<u;)L=(L+B)*a,j*=a,B=M.g(1);for(;L>=c;)L/=2,j/=2,B>>>=1;return(L+B)/j};return P.int32=function(){return M.g(4)|0},P.quick=function(){return M.g(4)/4294967296},P.double=P,b(w(M.S),n),(C.pass||E||function(L,j,B,K){return K&&(K.S&&y(K,M),L.state=function(){return y(M,{})}),B?(r[s]=L,j):L})(P,N,"global"in C?C.global:this==r,C.state)}function m(S){var C,E=S.length,_=this,N=0,M=_.i=_.j=0,P=_.S=[];for(E||(S=[E++]);N<a;)P[N]=N++;for(N=0;N<a;N++)P[N]=P[M=d&M+S[N%E]+(C=P[N])],P[M]=C;(_.g=function(L){for(var j,B=0,K=_.i,X=_.j,Z=_.S;L--;)j=Z[K=d&K+1],B=B*a+Z[d&(Z[K]=Z[X=d&X+j])+(Z[X]=j)];return _.i=K,_.j=X,B})(a)}function y(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function v(S,C){var E=[],_=typeof S,N;if(C&&_=="object")for(N in S)try{E.push(v(S[N],C-1))}catch{}return E.length?E:_=="string"?S:S+"\0"}function b(S,C){for(var E=S+"",_,N=0;N<E.length;)C[d&N]=d&(_^=C[d&N]*19)+E.charCodeAt(N++);return w(C)}function x(){try{var S;return p&&(S=p.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=f;try{p=VF}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:Ga,[],Math)})(jF);var whe=jF.exports,khe=hhe,She=fhe,Che=ghe,Ehe=mhe,Ihe=yhe,The=bhe,ld=whe;ld.alea=khe,ld.xor128=She,ld.xorwow=Che,ld.xorshift7=Ehe,ld.xor4096=Ihe,ld.tychei=The;var Mw=ld;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class zN{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=Mw.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,o;do a=2*this.random()-1,i=2*this.random()-1,o=a*a+i*i;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Nhe{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=Mw.alea(i.toString()),this.randn=new zN(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,o;for(;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class _he{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Mw.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rhe(t,e,n=1,r="float32",a){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new Nhe(e,n,r,a),o=Ct(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const UF=ee({randomGamma_:Rhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $he(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new zN(e,n,r,!1,a),o=Ct(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const jN=ee({randomNormal_:$he});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ohe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return jN(t,0,1,e,n)}const WF=ee({randomStandardNormal_:Ohe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mhe(t,e=0,n=1,r="float32",a){const i=Ct(t,r),o=new _he(e,n,null,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}const VN=ee({randomUniform_:Mhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function th(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return te.runKernel(Lx,{},a)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Phe(t){const e={x:z(t,"x","reciprocal")};return te.runKernel(im,e)}const GF=ee({reciprocal_:Phe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ahe(t){const e={x:z(t,"x","relu")};return te.runKernel(om,e)}const Gm=ee({relu_:Ahe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dhe(t){const e={x:z(t,"x","relu6")};return te.runKernel(sm,e)}const UN=ee({relu6_:Dhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lhe(t,e){const n={x:z(t,"x","reverse")},r={dims:e};return te.runKernel(Vx,n,r)}const Ou=ee({reverse_:Lhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fhe(t){const e=z(t,"x","reverse");return V(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Ou(e,0)}const HF=ee({reverse1d_:Fhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bhe(t,e){const n=z(t,"x","reverse");return V(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Ou(n,e)}const qF=ee({reverse2d_:Bhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zhe(t,e){const n=z(t,"x","reverse");return V(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Ou(n,e)}const KF=ee({reverse3d_:zhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jhe(t,e){const n=z(t,"x","reverse");return V(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Ou(n,e)}const XF=ee({reverse4d_:jhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vhe(t){const e={x:z(t,"x","round")};return te.runKernel(lm,e)}const WN=ee({round_:Vhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uhe(t){const e={x:z(t,"x","rsqrt","float32")};return te.runKernel(um,e)}const YF=ee({rsqrt_:Uhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Whe(t){const e={x:z(t,"x","selu")};return te.runKernel(cm,e)}const QF=ee({selu_:Whe});function Ghe(t,e,n,r,a,i=[1,1],o="NHWC"){const s=z(t,"x","separableConv2d"),l=z(e,"depthwiseFilter","separableConv2d"),u=z(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(s.rank===3&&(d=!0,c=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),V(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const p=l.shape[2],f=l.shape[3];V(u.shape[2]===p*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*f}, but got ${u.shape[2]}.`);const m=Tw(c,l,r,a,o,i),y=Bm(m,u,1,"valid",o);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const ZF=ee({separableConv2d_:Ghe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Hhe(t,e){const n=z(t,"x","setdiff1d"),r=z(e,"y","setdiff1d");V(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),V(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),V(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),o=new Set(i);let s=0;for(let c=0;c<a.length;c++)o.has(a[c])||s++;const l=new _r([s],n.dtype),u=new _r([s],"int32");for(let c=0,d=0;c<a.length;c++)o.has(a[c])||(l.values[d]=a[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const JF=Hhe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qhe(t){const e={x:z(t,"x","sign")};return te.runKernel(hm,e)}const e9=ee({sign_:qhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Khe(t){const e={x:z(t,"x","sin","float32")};return te.runKernel(dm,e)}const t9=ee({sin_:Khe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xhe(t){const e={x:z(t,"x","sinh")};return te.runKernel(pm,e)}const n9=ee({sinh_:Xhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yhe(t,e,n){const r=z(t,"x","slice1d");return V(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),wn(r,[e],[n])}const r9=ee({slice1d_:Yhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qhe(t,e,n){const r=z(t,"x","slice2d");return V(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),wn(r,e,n)}const a9=ee({slice2d_:Qhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zhe(t,e,n){const r=z(t,"x","slice3d");return V(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),wn(r,e,n)}const i9=ee({slice3d_:Zhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jhe(t,e,n){const r=z(t,"x","slice4d");return V(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),wn(r,e,n)}const o9=ee({slice4d_:Jhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function efe(t,e=-1){const n=z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return te.runKernel(Yx,r,a)}const s9=ee({softmax_:efe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tfe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(ox,e)}const Pw=ee({fft_:tfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nfe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(px,e)}const Hm=ee({ifft_:nfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rfe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=Se(t,[n,e]);r=Hm(a)}else{const a=[n,2*(e-1)],i=Se(Hp(t),[n,e]),o=Se(Pm(t),[n,e]),s=Ou(wn(i,[0,1],[n,e-2]),1),l=De(Ou(wn(o,[0,1],[n,e-2]),1),Bt(-1)),u=fa([i,s],1),c=fa([o,l],1),d=Se(fl(u,c),[a[0],a[1]]);r=Hm(d)}if(r=Hp(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=Se(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const GN=ee({irfft_:rfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function afe(t,e,n=0){const r={x:z(t,"x","split")},a={numOrSizeSplits:e,axis:n};return te.runKernel(Xx,r,a)}const nh=ee({split_:afe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ife(t,e){V(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const m=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,a=wn(t,m,y),n=e}else if(e!=null&&e>n){const m=t.shape.map(y=>y);m[t.shape.length-1]=e-n,a=fa([t,Ru(m)],t.shape.length-1),n=e}else a=t;const i=gi(a),o=Se(fl(a,i),[r,n]),s=Pw(o),l=Math.floor(n/2)+1,u=Hp(s),c=Pm(s),d=nh(u,[l,n-l],u.shape.length-1),p=nh(c,[l,n-l],c.shape.length-1),f=a.shape.slice();return f[a.shape.length-1]=l,Se(fl(d[0],p[0]),f)}const Aw=ee({rfft_:ife});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ofe(t,e){let n=z(t,"a","squaredDifference"),r=z(e,"b","squaredDifference");[n,r]=Kn(n,r),jt(n.shape,r.shape);const a={a:n,b:r},i={};return te.runKernel(ym,a,i)}const HN=ee({squaredDifference_:ofe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sfe(t,e){const n=z(t,"x","squeeze","string_or_numeric");return Se(n,dl(n.shape,e).newShape)}const qm=ee({squeeze_:sfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lfe(t,e=0){const n=Om(t,"tensors","stack","string_or_numeric");V(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&V(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return te.runKernel($x,r,a)}const ks=ee({stack_:lfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ufe(t,e=0){const n={x:z(t,"x","step")},r={alpha:e};return te.runKernel(km,n,r)}const qN=ee({step_:ufe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cfe(t,e,n,r,a=0,i=0,o=0,s=0,l=0){const u={x:z(t,"x","stridedSlice","string_or_numeric")},c={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return te.runKernel(nw,u,c)}const l9=ee({stridedSlice_:cfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dfe(t){const e={x:z(t,"x","tan","float32")};return te.runKernel(vm,e)}const u9=ee({tan_:dfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fo(t,e){Wc(t);const n=ys(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Eu(t,null,n,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rh(t,e,n){if(Wc(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=ys(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Eu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c9(t,e,n){if(Wc(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=ys(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Eu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d9(t,e,n){if(Wc(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=ys(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Eu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p9(t,e,n){if(Wc(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=ys(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Eu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pfe(t,e=1,n=!0){const r=z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[s,l]=te.runKernel(ow,i,o);return{values:s,indices:l}}const h9=ee({topk_:pfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hfe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new zN(e,n,r,!0,a),o=Ct(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const f9=ee({truncatedNormal_:hfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ffe(t,e=0){const n=z(t,"x","unique","string_or_numeric");V(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,o]=te.runKernel(lw,r,a);return{values:i,indices:o}}const g9=ee({unique_:ffe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gfe(t,e,n){const r=z(t,"x","unsortedSegmentSum"),a=z(e,"segmentIds","unsortedSegmentSum","int32");V(Gc(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},o={numSegments:n};return te.runKernel(cw,i,o)}const m9=ee({unsortedSegmentSum_:gfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mfe(t,e=0){const n=z(t,"x","unstack","string_or_numeric");V(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return te.runKernel(uw,r,a)}const Mu=ee({unstack_:mfe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y9(t,e){return Ow(t,e,"right")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b9(t,e=!0,n,r){return te.makeVariable(t,e,n,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dw(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Ct(t,"int32"),a=Ct([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),s=i*t.length;a.values.set(o,s)}return a.toTensor()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function yfe(t){const e=z(t,"condition","whereAsync","bool"),n=await e.data(),r=Dw(e.shape,n);return t!==e&&e.dispose(),r}const KN=yfe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function bfe(t,e,n){const r=z(t,"tensor","boolMask"),a=z(e,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape;V(o>0,()=>"mask cannot be scalar"),Xr(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=i;y<i+o;y++)l*=s[y];const u=s.slice(0,i).concat([l],s.slice(i+o)),c=Se(r,u),d=Se(a,[-1]),p=await KN(d),f=qm(p,[1]),m=xN(c,f,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),f.dispose(),c.dispose(),d.dispose(),p.dispose(),m}const v9=bfe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vfe(t,e,n,r,a=!0){const i=z(t,"v","movingAverage"),o=z(e,"x","movingAverage"),s=z(n,"decay","movingAverage");O8(i,o),V(xn(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=Bt(1),u=At(l,s);let c=De(At(o,i),u);if(a){V(r!=null,()=>"When using zeroDebias: true, step is required.");const d=z(r,"step","movingAverage");c=In(c,At(l,Qp(s,d)))}return ft(i,c)}const x9=ee({movingAverage_:vfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xfe(t,e,n){const r=z(t,"indices","scatterND","int32"),a=z(e,"updates","scatterND");ZT(a,r,n);const i={indices:r,updates:a},o={shape:n};return te.runKernel(Ux,i,o)}const w9=ee({scatterND_:xfe});function wfe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kfe(t,e,n,r=0){const a=z(t,"sparseIndices","sparseToDense","int32"),i=z(e,"sparseValues","sparseToDense","string_or_numeric"),o=z(r,"defaultValue","sparseToDense",i.dtype);wfe(a,i,n,o);const s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return te.runKernel(tw,s,l)}const k9=ee({sparseToDense_:kfe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sfe(t,e){const n=z(e,"indices","gatherND","int32"),r={params:z(t,"x","gatherND","string_or_numeric"),indices:n};return te.runKernel(dx,r)}const S9=ee({gatherND_:Sfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cfe(t,e){if(e==null)return t.shape.slice();if(xn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Efe(t,e,n,r){const a=z(t,"x","dropout");if(V(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),V(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof qn?a.clone():a;const i=Cfe(a,n),o=1-e,s=In(vN(ft(VN(i,0,1,"float32",r),o)),o);return De(a,s)}const C9=ee({dropout_:Efe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XN(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function Lw(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(o)}return fo(a,"float32")}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Ife(t,e,n=1){const r=z(t,"predictions","inTopK"),a=z(e,"targets","inTopK");V(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),V(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),Xr(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];V(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),s=await a.data(),[l,u]=[o.length/i,i],c=Tr("bool",l);for(let d=0;d<l;d++){const p=d*u,f=o.subarray(p,p+u),m=[];for(let y=0;y<f.length;y++)m.push({value:f[y],index:y});m.sort((y,v)=>v.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(m[y].index===s[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),Ho(c,a.shape,"bool")}const E9=Ife;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tfe(t,e,n,r,a,i="NHWC",o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]])),V(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];V(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),V(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),po("conv2dDerFilter",a,o);const d={x:s,dy:l},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return te.runKernel(Wv,d,p)}const Nfe=ee({conv2DBackpropFilter_:Tfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fw(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return De(t,qN(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Bw(t,e){let n=e;const r=XT(t.shape,e.shape);return r.length>0&&(n=Tn(n,r)),Se(n,t.shape)}function zw(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Gm(t);if(e==="elu")return mN(t);if(e==="relu6")return UN(t);if(e==="prelu")return MN(t,n);if(e==="leakyrelu")return kN(t,r);if(e==="sigmoid")return id(t);throw new Error(`Unknown fused activation ${e}.`)}const jw=(t,e)=>!(t>0)||e==="linear";/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _fe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",jw(te.state.gradientDepth,l)===!1){V(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=Bm(t,e,n,r,a,i,o);return s!=null&&(E=ft(E,s)),zw(E,l,u,c)}const d=z(t,"x","conv2d","float32"),p=z(e,"filter","conv2d","float32");let f=d,m=!1;d.rank===3&&(m=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),V(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),V(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),po("fused conv2d",r,o);const y=a==="NHWC"?f.shape[3]:f.shape[1];V(p.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${p.shape[2]}.`),V(ha(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=zr(f.shape,p.shape,n,i,r,o);let b;s!=null&&(b=z(s,"bias","fused conv2d"),[b]=Kn(b,d),a==="NHWC"?jt(v.outShape,b.shape):(V(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),V(b.shape.length===0||b.shape[0]===v.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let x;if(u!=null){const E=u.shape;if(V(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)V(E[0]===1||E[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${v.outChannels}).`);else if(E.length===3)try{jt(E,v.outShape)}catch{const _=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(_)}x=z(u,"prelu weights","fused conv2d")}const w=(E,_)=>{V(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[N,M,P,L]=_,j=Fw(E,P,l);V(Lm(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const B=GL(M.shape,j,N,n,r),K=Nfe(M,j,N.shape,n,r),X=[B,K];if(L!=null){const Z=Bw(L,j);X.push(Z)}return X},S={x:f,filter:p,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?ws((E,_,N)=>{let M=te.runKernel(Cm,S,C);return N([_,E,M]),m&&(M=Se(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:w}})(f,p):ws((E,_,N,M)=>{let P=te.runKernel(Cm,S,C);return M([_,E,P,N]),m&&(P=Se(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(f,p,b)}const Rfe=ee({fusedConv2d_:_fe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $fe(t,e,n,r,a,i=[1,1],o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return te.runKernel(ex,u,c)}const Ofe=ee({depthwiseConv2dNativeBackpropFilter_:$fe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mfe(t,e,n,r,a,i=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:t},d=te.runKernel(tx,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Pfe=ee({depthwiseConv2dNativeBackpropInput_:Mfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Afe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(jw(te.state.gradientDepth,l)===!1){let C=Tw(t,e,n,r,a,i,o);return s!=null&&(C=ft(C,s)),zw(C,l,u,c)}const d=z(t,"x","depthwiseConv2d","float32"),p=z(e,"filter","depthwiseConv2d","float32");let f=d,m=!1;d.rank===3&&(m=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),V(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),V(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),V(f.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),V(ha(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),po("fused depthwiseConv2d",r,o);const y=zr(f.shape,p.shape,n,i,r,o,!0);let v;s!=null&&(v=z(s,"bias","fused conv2d"),[v]=Kn(v,d),jt(y.outShape,v.shape));let b;u!=null&&(b=z(u,"prelu weights","fused depthwiseConv2d"));const x=(C,E)=>{V(Lm(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[_,N,M,P]=E,L=Fw(C,M,l),j=Pfe(N.shape,L,_,n,r,i,o),B=Ofe(N,L,_.shape,n,r,i,o);if(P!=null){const K=Bw(v,L);return[j,B,K]}return[j,B]},w={x:f,filter:p,bias:v,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?ws((C,E,_)=>{let N=te.runKernel(Em,w,S);return _([E,C,N]),m&&(N=Se(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(f,p):ws((C,E,_,N)=>{let M=te.runKernel(Em,w,S);return N([E,C,M,_]),m&&(M=Se(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:x}})(f,p,v)}const Dfe=ee({fusedDepthwiseConv2d_:Afe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lfe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(jw(te.state.gradientDepth,i)===!1){let P=un(t,e,n,r);return a!=null&&(P=ft(P,a)),zw(P,i,o,s)}let l=z(t,"a","fused matMul"),u=z(e,"b","fused matMul");[l,u]=Kn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=l.shape.slice(0,-2),y=u.shape.slice(0,-2),v=be(m),b=be(y);V(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=jt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),w=n?Se(l,[v,c,p]):Se(l,[v,p,c]),S=r?Se(u,[b,f,d]):Se(u,[b,d,f]);let C;a!=null&&(C=z(a,"bias","fused matMul"),[C]=Kn(C,l),jt(x,C.shape));let E;o!=null&&(E=z(o,"prelu weights","fused matMul"));const _=(P,L)=>{const[j,B,K,X]=L,Z=Fw(Se(P,K.shape),K,i);let H,F;if(!n&&!r?(H=un(Z,B,!1,!0),F=un(j,Z,!0,!1)):!n&&r?(H=un(Z,B,!1,!1),F=un(Z,j,!0,!1)):n&&!r?(H=un(B,Z,!1,!0),F=un(j,Z,!1,!1)):(H=un(B,Z,!0,!0),F=un(Z,j,!0,!0)),a!=null){const Y=Bw(X,Z);return[H,F,Y]}else return[H,F]},N={a:w,b:S,bias:C,preluActivationWeights:E},M={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:s};return a==null?ws((P,L,j)=>{const B=te.runKernel(Sm,N,M);return j([P,L,B]),{value:Se(B,x),gradFunc:_}})(w,S):ws((P,L,j,B)=>{const K=te.runKernel(Sm,N,M);return B([P,L,K,j]),{value:Se(K,x),gradFunc:_}})(w,S,C)}const Ffe=ee({fusedMatMul_:Lfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I9=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Rfe,depthwiseConv2d:Dfe,matMul:Ffe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bfe(t){return Lw(t,.54,.46)}const zfe=ee({hammingWindow_:Bfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jfe(t){return Lw(t,.5,.5)}const T9=ee({hannWindow_:jfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vfe(t,e,n,r=!1,a=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(wn(t,i,e)),i+=n;if(r)for(;i<t.size;){const s=i+e-t.size,l=fa([wn(t,i,e-s),Yp([s],a)]);o.push(l),i+=n}return o.length===0?rh([],[0,e]):Se(fa(o),[o.length,e])}const N9=ee({frame_:Vfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ufe(t,e,n,r,a=T9){r==null&&(r=XN(e));const i=N9(t,e,n),o=De(i,a(e));return Aw(o,r)}const Wfe=ee({stft_:Ufe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gfe(t,e,n,r,a="bilinear",i=0){const o=z(t,"image","cropAndResize"),s=z(e,"boxes","cropAndResize","float32"),l=z(n,"boxInd","cropAndResize","int32"),u=s.shape[0];V(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),V(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),V(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),V(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),V(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:o,boxes:s,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return te.runKernel(Yv,c,d)}const Hfe=ee({cropAndResize_:Gfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qfe(t){const e=z(t,"image","flipLeftRight","float32");V(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return te.runKernel(lx,n,{})}const Kfe=ee({flipLeftRight_:qfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xfe(t){const e=z(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];V(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),V(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,Zp(e,a)}const Yfe=ee({grayscaleToRGB_:Xfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qfe(t,e,n=0,r=.5){const a=z(t,"image","rotateWithOffset","float32");V(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},o={radians:e,fillValue:n,center:r};return te.runKernel(hw,i,o)}const Zfe=ee({rotateWithOffset_:Qfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ah(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),V(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),V(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),V(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),V(e.rank===1,()=>"scores must be a 1D tensor"),V(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),V(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppression","float32"),o=z(e,"scores","nonMaxSuppression","float32"),s=ah(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return te.runKernel(Ix,{boxes:i,scores:o},l)}const ege=ee({nonMaxSuppression_:Jfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tge(t,e,n){const r=nge(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function nge(t,e,n){return age(t,e,n||rge)}function rge(t,e){return t>e?1:t<e?-1:0}function age(t,e,n){let r=0,a=t.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);const s=n(e,t[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vw(t,e,n,r,a){return YN(t,e,n,r,a,0)}function Uw(t,e,n,r,a,i){return YN(t,e,n,r,a,0,!1,i,!0)}function Ww(t,e,n,r,a,i){return YN(t,e,n,r,a,i,!0)}function YN(t,e,n,r,a,i,o=!1,s=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>a&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(_9);const c=i>0?-.5/i:0,d=[],p=[];for(;d.length<n&&u.length>0;){const v=u.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=v;if(b<a)break;let S=!1;for(let C=d.length-1;C>=w;--C){const E=ige(t,x,d[C]);if(E>=r){S=!0;break}if(v.score=v.score*oge(r,c,E),v.score<=a)break}v.suppressBeginIndex=d.length,S||(v.score===b?(d.push(x),p.push(v.score)):v.score>a&&tge(u,v,_9))}const f=d.length,m=n-f;s&&m>0&&(d.push(...new Array(m).fill(0)),p.push(...new Array(m).fill(0)));const y={selectedIndices:d};return o&&(y.selectedScores=p),l&&(y.validOutputs=f),y}function ige(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-i)*(l-o),m=(d-u)*(p-c);if(f<=0||m<=0)return 0;const y=Math.max(i,u),v=Math.max(o,c),b=Math.min(s,d),x=Math.min(l,p),w=Math.max(b-y,0)*Math.max(x-v,0);return w/(f+m-w)}function oge(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function _9(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function sge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppressionAsync"),o=z(e,"scores","nonMaxSuppressionAsync"),s=ah(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:d}=Vw(u,c,n,r,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),fo(d,"int32")}const lge=sge;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=ah(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=te.runKernel(Nx,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const cge=ee({nonMaxSuppressionWithScore_:uge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function dge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=ah(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=Ww(c,d,n,r,a,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:fo(p,"int32"),selectedScores:fo(f)}}const pge=dge;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=ah(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p={boxes:o,scores:s},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},m=te.runKernel(Tx,p,f);return{selectedIndices:m[0],validOutputs:m[1]}}const fge=ee({nonMaxSuppressionPadded_:hge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function gge(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=ah(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:m,validOutputs:y}=Uw(p,f,u,c,d,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:fo(m,"int32"),validOutputs:Bt(y,"int32")}}const mge=gge;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yge(t,e,n=!1,r=!1){const a=z(t,"images","resizeBilinear");V(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),V(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),V(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=te.runKernel(jx,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const bge=ee({resizeBilinear_:yge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vge(t,e,n=!1,r=!1){const a=z(t,"images","resizeNearestNeighbor");V(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),V(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),V(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=te.runKernel(zx,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const xge=ee({resizeNearestNeighbor_:vge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* https://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wge(t,e="binary",n=!1,r=.5){const a=z(t,"image","threshold"),i=.2989,o=.587,s=.114,l=a.shape[0]*a.shape[1];let u=De(fo([r]),255),c,d,p,f;if(V(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),V(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),V(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),V(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,d,p]=nh(a,[1,1,1],-1);const y=De(c,i),v=De(d,o),b=De(p,s);f=ft(ft(y,v),b)}else f=t;if(e==="otsu"){const y=fN(zn(WN(f),"int32"),Ho([]),256);u=kge(y,l)}const m=n?_w(f,u):Vm(f,u);return zn(De(m,255),"int32")}function kge(t,e){let n=fo([-1]),r=fo([0]),a=fo([0]),i,o,s,l,u,c;for(let d=0;d<t.size-1;d++){i=wn(t,0,d+1),o=wn(t,d+1),u=In(Tn(i),e),c=In(Tn(o),e);const p=Tn(De(i,th(0,i.size)));s=In(p,Tn(i));const f=Yp(o.shape,i.size),m=ft(th(0,o.size),f),y=De(o,m);l=In(Tn(y),Tn(o));const v=At(s,l),b=At(s,l),x=De(u,c);a=De(De(x,v),b);const w=Vm(a,r);r=od(w,a,r),n=od(w,fo([d]),n)}return n}const Sge=ee({threshold_:wge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cge(t,e,n="nearest",r="constant",a=0,i){const o=z(t,"image","transform","float32"),s=z(e,"transforms","transform","float32");V(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),V(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return te.runKernel(sw,l,u)}const Ege=ee({transform_:Cge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ige(t,e,n){V(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),V(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=z(t,"a","bandPart");V(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const s=Se(th(0,i,1,"int32"),[-1,1]),l=th(0,o,1,"int32"),u=At(s,l),c=Um(_w(u,Bt(+e,"int32")),wN(u,Bt(-n,"int32"))),d=Ru([i,o],r.dtype);return Se(ks(Mu(Se(r,[-1,i,o])).map(p=>od(c,p,d))),a)}const Tge=ee({bandPart_:Ige});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nge(t){let e;if(Array.isArray(t)){e=!1,V(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)V(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=nh(t,t.shape[0],0).map(a=>qm(a,[0]));V(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(te.tidy(()=>{let i=r[a];if(a>0)for(let o=0;o<a;++o){const s=De(Tn(De(n[o],i)),n[o]);i=At(i,s)}return In(i,jm(i,"euclidean"))}));return e?ks(n,0):n}const _ge=ee({gramSchmidt_:Nge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rge(t,e=!1){if(V(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return R9(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Mu(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{const[u,c]=R9(l,e);a.push(u),i.push(c)});const o=Se(ks(a,0),t.shape),s=Se(ks(i,0),t.shape);return[o,s]}}function R9(t,e=!1){return te.tidy(()=>{V(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=bN(n),i=ml(t);const o=rh([[1]],[1,1]);let s=ml(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=s,p=a;[s,i,a]=te.tidy(()=>{const f=wn(i,[u,u],[n-u,1]),m=jm(f),y=wn(i,[u,u],[1,1]),v=od(Vm(y,0),rh([[-1]]),rh([[1]])),b=At(y,De(v,m)),x=In(f,b);x.shape[0]===1?s=ml(o):s=fa([o,wn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=vs(In(un(v,b),m)),S=wn(i,[u,0],[n-u,r]),C=De(w,s),E=Am(s);if(u===0)i=At(S,un(C,un(E,S)));else{const M=At(S,un(C,un(E,S)));i=fa([wn(i,[0,0],[u,r]),M],0)}const _=Am(C),N=wn(a,[0,u],[n,a.shape[1]-u]);if(u===0)a=At(N,un(un(N,s),_));else{const M=At(N,un(un(N,s),_));a=fa([wn(a,[0,0],[n,u]),M],1)}return[s,i,a]}),pa([c,d,p])}return!e&&n>r&&(a=wn(a,[0,0],[n,r]),i=wn(i,[0,0],[r,r])),[a,i]})}const $ge=ee({qr_:Rge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Ma;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ma||(Ma={}));function Oge(t,e,n=Ma.SUM_BY_NONZERO_WEIGHTS){const r=z(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=z(e,"weights","computeWeightedLoss"));const i=a==null?r:De(r,a);if(n===Ma.NONE)return i;if(n===Ma.SUM)return Tn(i);if(n===Ma.MEAN){if(a==null)return Wm(i);{const o=r.size/a.size,s=In(Tn(i),Tn(a));return o>1?In(s,Bt(o)):s}}if(n===Ma.SUM_BY_NONZERO_WEIGHTS){if(a==null)return In(Tn(i),Bt(r.size));{const o=De(a,$u(r.shape)),s=zn(Tn($N(o,Bt(0))),"float32");return In(Tn(i),s)}}throw Error(`Unknown reduction: ${n}`)}const wl=ee({computeWeightedLoss_:Oge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mge(t,e,n,r=Ma.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","absoluteDifference"),i=z(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=z(n,"weights","absoluteDifference")),Xr(a.shape,i.shape,"Error in absoluteDifference: ");const s=fi(At(a,i));return wl(s,o,r)}const Pge=ee({absoluteDifference_:Mge});function Age(t,e,n,r,a=Ma.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","cosineDistance"),o=z(e,"predictions","cosineDistance");let s=null;r!=null&&(s=z(r,"weights","cosineDistance")),Xr(i.shape,o.shape,"Error in cosineDistance: ");const l=Bt(1),u=At(l,Tn(De(i,o),n,!0));return wl(u,s,a)}const Dge=ee({cosineDistance_:Age});function Lge(t,e,n,r=Ma.SUM_BY_NONZERO_WEIGHTS){let a=z(t,"labels","hingeLoss");const i=z(e,"predictions","hingeLoss");let o=null;n!=null&&(o=z(n,"weights","hingeLoss")),Xr(a.shape,i.shape,"Error in hingeLoss: ");const s=Bt(1);a=At(De(Bt(2),a),s);const l=Gm(At(s,De(a,i)));return wl(l,o,r)}const Fge=ee({hingeLoss_:Lge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bge(t,e,n,r=1,a=Ma.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","huberLoss"),o=z(e,"predictions","huberLoss");let s=null;n!=null&&(s=z(n,"weights","huberLoss")),Xr(i.shape,o.shape,"Error in huberLoss: ");const l=Bt(r),u=fi(At(o,i)),c=RN(u,l),d=At(u,c),p=ft(De(Bt(.5),ho(c)),De(l,d));return wl(p,s,a)}const zge=ee({huberLoss_:Bge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jge(t,e,n,r=1e-7,a=Ma.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","logLoss"),o=z(e,"predictions","logLoss");let s=null;n!=null&&(s=z(n,"weights","logLoss")),Xr(i.shape,o.shape,"Error in logLoss: ");const l=Bt(1),u=Bt(r),c=vs(De(i,Jp(ft(o,u)))),d=De(At(l,i),Jp(ft(At(l,o),u))),p=At(c,d);return wl(p,s,a)}const Vge=ee({logLoss_:jge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uge(t,e,n,r=Ma.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","meanSquaredError"),i=z(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=z(n,"weights","meanSquaredError")),Xr(a.shape,i.shape,"Error in meanSquaredError: ");const s=HN(a,i);return wl(s,o,r)}const Wge=ee({meanSquaredError_:Uge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gge(t,e){const n=z(t,"labels","sigmoidCrossEntropyWithLogits"),r=z(e,"logits","sigmoidCrossEntropyWithLogits");Xr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Gm(r),i=De(r,n),o=SN(_u(vs(fi(r))));return ft(At(a,i),o)}function Hge(t,e,n,r=0,a=Ma.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"multiClassLabels","sigmoidCrossEntropy");const o=z(e,"logits","sigmoidCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","sigmoidCrossEntropy")),Xr(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Bt(r),c=Bt(1),d=Bt(.5);i=ft(De(i,At(c,u)),De(d,u))}const l=Gge(i,o);return wl(l,s,a)}const qge=ee({sigmoidCrossEntropy_:Hge});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kge(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return ws((r,a,i)=>{const o=EN(a,[n],!0),s=At(zn(a,"float32"),o);i([r,s]);const l=vs(De(s,r));return{value:Tn(l,[n]),gradFunc:(u,c)=>{const[d,p]=c,f=Rr(u.shape,[n]);return[De(Se(u,f),At(zn(d,"float32"),_u(p))),De(Se(u,f),At(_u(p),zn(d,"float32")))]}}})(t,e)}function Xge(t,e,n,r=0,a=Ma.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"onehotLabels","softmaxCrossEntropy");const o=z(e,"logits","softmaxCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","softmaxCrossEntropy")),Xr(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Bt(r),c=Bt(1),d=Bt(i.shape[1]);i=ft(De(i,At(c,u)),In(u,d))}const l=Kge(i,o);return wl(l,s,a)}const Yge=ee({softmaxCrossEntropy_:Xge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qge(t,e,n,r){const a=z(t,"indices","sparseFillEmptyRows","int32"),i=z(e,"values","sparseFillEmptyRows"),o=z(n,"denseShape","sparseFillEmptyRows","int32"),s=z(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:a,values:i,denseShape:o,defaultValue:s},u=te.runKernel(Qx,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Zge=ee({sparseFillEmptyRows_:Qge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jge(t,e,n){const r=z(t,"inputIndices","sparseReshape","int32"),a=z(e,"inputShape","sparseReshape","int32"),i=z(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:a,newShape:i},s=te.runKernel(Zx,o);return{outputIndices:s[0],outputShape:s[1]}}const eme=ee({sparseReshape_:Jge});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tme(t,e,n){const r=z(t,"data","sparseSegmentMean"),a=z(e,"indices","sparseSegmentMean","int32"),i=z(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return te.runKernel(Jx,o)}const nme=ee({sparseSegmentMean_:tme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rme(t,e,n){const r=z(t,"data","sparseSegmentSum"),a=z(e,"indices","sparseSegmentSum","int32"),i=z(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return te.runKernel(ew,o)}const ame=ee({sparseSegmentSum_:rme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ime(t,e,n,r,a,i,o,s){const l=z(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=z(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:u},p=te.runKernel(rw,d,c);return{nGrams:p[0],nGramsSplits:p[1]}}const ome=ee({stringNGrams_:ime});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sme(t,e,n=!0){const r=z(t,"input","stringSplit","string"),a=z(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},o={input:r,delimiter:a},s=te.runKernel(aw,o,i);return{indices:s[0],values:s[1],shape:s[2]}}const lme=ee({stringSplit_:sme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ume(t,e){const n=z(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return te.runKernel(iw,a,r)}const cme=ee({stringToHashBucketFast_:ume});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $9={fft:Pw,ifft:Hm,rfft:Aw,irfft:GN},O9={hammingWindow:zfe,hannWindow:T9,frame:N9,stft:Wfe},QN={flipLeftRight:Kfe,grayscaleToRGB:Yfe,resizeNearestNeighbor:xge,resizeBilinear:bge,rotateWithOffset:Zfe,cropAndResize:Hfe,nonMaxSuppression:ege,nonMaxSuppressionAsync:lge,nonMaxSuppressionWithScore:cge,nonMaxSuppressionWithScoreAsync:pge,nonMaxSuppressionPadded:fge,nonMaxSuppressionPaddedAsync:mge,threshold:Sge,transform:Ege},M9={bandPart:Tge,gramSchmidt:_ge,qr:$ge},P9={absoluteDifference:Pge,computeWeightedLoss:wl,cosineDistance:Dge,hingeLoss:Fge,huberLoss:zge,logLoss:Vge,meanSquaredError:Wge,sigmoidCrossEntropy:qge,softmaxCrossEntropy:Yge},A9={sparseFillEmptyRows:Zge,sparseReshape:eme,sparseSegmentMean:nme,sparseSegmentSum:ame},D9={stringNGrams:ome,stringSplit:lme,stringToHashBucketFast:cme};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Pu extends yL{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(o)}else this.applyGradients(i);return pa(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return yF(e,n)}dispose(){this.iterations_!=null&&pa(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Bt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Pu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Gw extends Pu{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accum_grad`,variable:qt(()=>gi(a).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${n}/accum_var`,variable:qt(()=>gi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedGrads[r].variable,l=this.accumulatedUpdates[r].variable;qt(()=>{const u=ft(De(s,this.rho),De(ho(o),1-this.rho)),c=De(In(xs(ft(l,this.epsilon)),xs(ft(s,this.epsilon))),o),d=ft(De(l,this.rho),De(ho(c),1-this.rho));s.assign(u),l.assign(d);const p=ft(De(c,-this.learningRate),a);a.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(pa(this.accumulatedGrads.map(e=>e.variable)),pa(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}Gw.className="Adadelta",Tu(Gw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Hw extends Pu{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accumulator`,variable:qt(()=>Yp(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[n];if(i==null)return;const o=this.accumulatedGrads[r].variable;qt(()=>{const s=ft(o,ho(i));o.assign(s);const l=ft(De(In(i,xs(ft(s,te.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&pa(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}Hw.className="Adagrad",Tu(Hw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qw extends Pu{constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],qt(()=>{this.accBeta1=Bt(n).variable(),this.accBeta2=Bt(r).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);qt(()=>{const r=At(1,this.accBeta1),a=At(1,this.accBeta2);n.forEach((i,o)=>{const s=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:qt(()=>gi(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:qt(()=>gi(s).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,p=ft(De(c,this.beta1),De(u,1-this.beta1)),f=ft(De(d,this.beta2),De(ho(u),1-this.beta2)),m=In(p,r),y=In(f,a);c.assign(p),d.assign(f);const v=ft(De(In(m,ft(xs(y),this.epsilon)),-this.learningRate),s);s.assign(v)}),this.accBeta1.assign(De(this.accBeta1,this.beta1)),this.accBeta2.assign(De(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&pa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&pa(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),qt(()=>{this.accBeta1.assign(Qp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Qp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}qw.className="Adam",Tu(qw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Kw extends Pu{constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],qt(()=>{this.iteration=Bt(0).variable(),this.accBeta1=Bt(n).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);qt(()=>{const r=At(1,this.accBeta1),a=In(-this.learningRate,ft(De(this.iteration,this.decay),1));n.forEach((i,o)=>{const s=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:gi(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:gi(s).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,p=ft(De(c,this.beta1),De(u,1-this.beta1)),f=De(d,this.beta2),m=fi(u),y=_N(f,m);c.assign(p),d.assign(y);const v=ft(De(In(a,r),In(p,ft(y,this.epsilon))),s);s.assign(v)}),this.iteration.assign(ft(this.iteration,1)),this.accBeta1.assign(De(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&pa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&pa(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}Kw.className="Adamax",Tu(Kw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Km extends Pu{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=Array.isArray(e)?e[r].tensor:e[n];if(a==null)return;const i=te.registeredVariables[n];qt(()=>{const o=ft(De(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=bs(Bt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}Km.className="SGD",Tu(Km);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Xw extends Km{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Bt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${n}/momentum`,variable:qt(()=>gi(a).variable(!1))});const i=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];o!=null&&qt(()=>{let s;const l=ft(De(this.m,i),o);this.useNesterov?s=ft(De(this.c,ft(o,De(l,this.m))),a):s=ft(De(this.c,l),a),i.assign(l),a.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&pa(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}Xw.className="Momentum",Tu(Xw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yw extends Pu{constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=te.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${n}/rms`,variable:qt(()=>gi(a).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${n}/momentum`,variable:qt(()=>gi(a).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${n}/mg`,variable:qt(()=>gi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedMeanSquares[r].variable,l=this.accumulatedMoments[r].variable;qt(()=>{const u=ft(De(s,this.decay),De(ho(o),1-this.decay));if(this.centered){const c=this.accumulatedMeanGrads[r].variable,d=ft(De(c,this.decay),De(o,1-this.decay)),p=In(De(o,this.learningRate),xs(At(u,ft(ho(d),this.epsilon)))),f=ft(De(l,this.momentum),p);s.assign(u),c.assign(d),l.assign(f);const m=At(a,f);a.assign(m)}else{const c=ft(De(s,this.decay),De(ho(o),1-this.decay)),d=ft(De(l,this.momentum),In(De(o,this.learningRate),xs(ft(c,this.epsilon))));s.assign(c),l.assign(d);const p=At(a,d);a.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&pa(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&pa(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&pa(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}Yw.className="RMSProp",Tu(Yw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Au{static sgd(e){return new Km(e)}static momentum(e,n,r=!1){return new Xw(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new Yw(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new qw(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new Gw(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new Kw(e,n,r,a,i)}static adagrad(e,n=.1){return new Hw(e,n)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dme={sgd:Au.sgd,momentum:Au.momentum,adadelta:Au.adadelta,adagrad:Au.adagrad,rmsprop:Au.rmsprop,adamax:Au.adamax,adam:Au.adam};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pme=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function L9(){return new Promise(t=>pme(()=>t()))}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZN(t,e){const n=t[0].length;t.forEach((a,i)=>{V(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),V(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let o=0;o<n;o++)V(o===e||a[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Ss(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var qo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(qo||(qo={}));function F9(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${s}`)}else r[o]=i}return r}function B9(t){const e={FIRST_DIM_SIZE:qo.FIRST_DIM_SIZE,VALUE_ROWIDS:qo.VALUE_ROWIDS,ROW_LENGTHS:qo.ROW_LENGTHS,ROW_SPLITS:qo.ROW_SPLITS,ROW_LIMITS:qo.ROW_LIMITS,ROW_STARTS:qo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function z9(t){return t.length===0?0:t[0]===qo.FIRST_DIM_SIZE?t.length-1:t.length}function j9(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],o=e[a+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${o}`)}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const JN=30;function Qw(t){return t<=JN?t:Iv(t,Math.floor(Math.sqrt(t)))}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e4(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xm(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(i+1))}return a}function Ym(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):a.push(o);r.push(...a),r.push(0),r.push(...i)}return r}function Qm(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function t4(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function n4(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r4=1.7580993408473768,a4=1.0507009873554805;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i4=.3275911,o4=.254829592,s4=-.284496736,l4=1.421413741,u4=-1.453152027,c4=1.061405429;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function V9(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function U9(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function W9(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function d4(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function G9(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function H9(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function q9(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p4="->",hme=/->/g,K9=",",X9="...";function h4(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(hme,"").length)/p4.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${p4}").`);const[r,a]=t.split(p4);V(r.indexOf(X9)===-1,()=>`The ellipsis notation ("${X9}") is not supported yet.`);const i=r.split(K9),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let p=0;p<a.length;++p){const f=a[p];if(!i.some(m=>m.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);s.indexOf(f)===-1&&s.push(f)}for(let p=0;p<r.length;++p){const f=r[p];s.indexOf(f)===-1&&f!==K9&&s.push(f)}const l=new Array(i.length);for(let p=0;p<o;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let f=0;f<i[p].length;++f)l[p].push(s.indexOf(i[p][f]))}const u=s.length,c=a.length,d=[];for(let p=c;p<u;++p)d.push(p);return{allDims:s,summedDims:d,idDims:l}}function f4(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function g4(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let o=0;o<e[a].length;++o)r[e[a][o]]===void 0?r[e[a][o]]=i[o]:V(r[e[a][o]]===i[o],()=>`Expected dimension ${r[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function m4(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let o=0;o<a;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const s=n[o],l=fme(e,s);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function y4(t){return t.every((e,n)=>e===n)}function fme(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function b4(t,e,n=0){let r=[];if(typeof e=="number")V(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);V(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[i]=t.shape[n]-o}V(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y9(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Q9(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Z9(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function J9(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function e7(t,e){return`size ${t} must be non-negative, not ${e}`}function t7(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function n7(t,e){const n=be(t),r=be(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function r7(t,e){const n=be(t),r=be(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v4(){return"segment ids must be >= 0"}function a7(){return"segment ids are not increasing"}function i7(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function o7(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s7(t,e){let n=!1,r;for(t<=JN?(r=t,n=!0):r=Iv(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Iv(t,r+1);return r}function l7(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function x4(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<a;d++)s.push(e.shape[d]);for(let d=n+1;d<i;d++)s.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}const gme=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:x4,computeOutShape:l7,segOpComputeOptimalWindowSize:s7},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ud(t){try{return t.map(e=>hl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function u7(t){return t.map(e=>ms(e))}const c7=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:o4,ERF_A2:s4,ERF_A3:l4,ERF_A4:u4,ERF_A5:c4,ERF_P:i4,PARALLELIZE_THRESHOLD:JN,get RowPartitionType(){return qo},SELU_SCALE:a4,SELU_SCALEALPHA:r4,applyActivation:zw,assertAndGetBroadcastShape:jt,assertAxesAreInnerMostDims:Zr,assertParamsConsistent:ZN,assignToTypedArray:G9,axesAreInnerMostDims:yN,calculateShapes:qp,checkEinsumDimSizes:g4,checkPadOnDimRoundingMode:po,combineLocations:sF,combineRaggedTensorToTensorShapes:F9,complexWithEvenIndex:U9,complexWithOddIndex:W9,computeConv2DInfo:zr,computeConv3DInfo:Nu,computeDefaultPad:cN,computeDilation2DInfo:Dm,computeOptimalWindowSize:Qw,computeOutAndReduceShapes:Qr,computeOutShape:Ss,computePool2DInfo:co,computePool3DInfo:bl,convertConv2DDataFormat:vl,decodeEinsumEquation:h4,eitherStridesOrDilationsAreOne:ha,expandShapeToKeepDim:Rr,exponent:q9,exponents:H9,fromStringArrayToUint8:u7,fromUint8ToStringArray:ud,getAxesPermutation:pr,getBroadcastDims:nd,getComplexWithIndex:d4,getEinsumComputePath:m4,getEinsumPermutation:f4,getFusedBiasGradient:Bw,getFusedDyActivation:Fw,getImageCenter:e4,getInnerMostAxes:hr,getPermuted:Ym,getRaggedRank:z9,getReductionAxes:XT,getReshaped:Xm,getReshapedPermuted:Qm,getRowPartitionTypesHelper:B9,getSliceBeginCoords:t4,getSliceSize:n4,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Y9,getSparseFillEmptyRowsNegativeIndexErrorMessage:Q9,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Z9,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:t7,getSparseReshapeInputOutputMismatchErrorMessage:r7,getSparseReshapeInputOutputMultipleErrorMessage:n7,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:J9,getSparseReshapeNegativeOutputDimErrorMessage:e7,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:o7,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:v4,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:a7,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:i7,getUndoAxesPermutation:zm,isIdentityPermutation:y4,log:hle,mergeRealAndImagArrays:kl,prepareAndValidate:Cw,prepareSplitSize:b4,segment_util:gme,shouldFuse:jw,slice_util:mL,splitRealAndImagArrays:V9,tupleValuesAreOne:Lm,upcastType:Ya,validateDefaultValueShape:j9,validateInput:ZT,validateUpdateShape:QT,warn:Di},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mme=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:Vw,nonMaxSuppressionV4Impl:Uw,nonMaxSuppressionV5Impl:Ww,whereImpl:Dw},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yme=Object.freeze(Object.defineProperty({__proto__:null,Abs:Nv,Acos:xg,Acosh:wg,AdadeltaOptimizer:Gw,AdagradOptimizer:Hw,AdamOptimizer:qw,AdamaxOptimizer:Kw,Add:Fp,AddN:_v,All:Rv,Any:$v,ArgMax:Ov,ArgMin:Mv,Asin:kg,Asinh:Sg,Atan:Cg,Atan2:Ig,Atanh:Eg,AvgPool:Pv,AvgPool3D:Av,AvgPool3DGrad:oT,AvgPoolGrad:iT,BatchMatMul:Dv,BatchToSpaceND:Lv,Bincount:Fv,BroadcastArgs:Bv,BroadcastTo:sle,Cast:Tg,Ceil:Ng,ClipByValue:_g,Complex:zv,ComplexAbs:jv,Concat:Vv,Conv2D:Uv,Conv2DBackpropFilter:Wv,Conv2DBackpropInput:Gv,Conv3D:Hv,Conv3DBackpropFilterV2:sT,Conv3DBackpropInputV2:qv,Cos:Rg,Cosh:$g,CropAndResize:Yv,Cumprod:Kv,Cumsum:Xv,DataStorage:Y3,DenseBincount:Qv,DepthToSpace:Zv,DepthwiseConv2dNative:Jv,DepthwiseConv2dNativeBackpropFilter:ex,DepthwiseConv2dNativeBackpropInput:tx,Diag:nx,Dilation2D:rx,Dilation2DBackpropFilter:uT,Dilation2DBackpropInput:lT,get ENV(){return nT},Einsum:ax,Elu:Mg,EluGrad:cT,Environment:h8,Equal:Ag,Erf:Pg,Exp:Dg,ExpandDims:ix,Expm1:Lg,FFT:ox,Fill:sx,FlipLeftRight:lx,Floor:Fg,FloorDiv:Bg,FromPixels:pw,FusedBatchNorm:ux,FusedConv2D:Cm,FusedDepthwiseConv2D:Em,GatherNd:dx,GatherV2:cx,Greater:zg,GreaterEqual:jg,IFFT:px,Identity:Vg,Imag:hx,IsFinite:Ug,IsInf:Wg,IsNan:Gg,KernelBackend:kv,LRN:mx,LRNGrad:dT,LeakyRelu:fx,Less:Hg,LessEqual:qg,LinSpace:gx,Log:Kg,Log1p:Xg,LogSoftmax:ule,LogicalAnd:Yg,LogicalNot:Qg,LogicalOr:Zg,LogicalXor:lle,LowerBound:cle,Max:yx,MaxPool:bx,MaxPool3D:vx,MaxPool3DGrad:hT,MaxPoolGrad:pT,MaxPoolWithArgmax:xx,Maximum:Jg,Mean:wx,Min:kx,Minimum:em,MirrorPad:Sx,Mod:tm,MomentumOptimizer:Xw,Multinomial:Cx,Multiply:nm,Neg:Ex,NonMaxSuppressionV3:Ix,NonMaxSuppressionV4:Tx,NonMaxSuppressionV5:Nx,NotEqual:rm,OP_SCOPE_SUFFIX:MT,OneHot:Rx,OnesLike:_x,Optimizer:Pu,OptimizerConstructors:Au,Pack:$x,PadV2:Ox,Pool:dle,Pow:am,Prelu:Mx,Prod:Px,RMSPropOptimizer:Yw,RaggedGather:Ax,RaggedTensorToTensor:Dx,Range:Lx,get Rank(){return ST},Real:Fx,RealDiv:Og,Reciprocal:im,get Reduction(){return Ma},Relu:om,Relu6:sm,Reshape:Bx,ResizeBilinear:jx,ResizeBilinearGrad:gT,ResizeNearestNeighbor:zx,ResizeNearestNeighborGrad:fT,Reverse:Vx,RotateWithOffset:hw,Round:lm,Rsqrt:um,SGDOptimizer:Km,ScatterNd:Ux,SearchSorted:Wx,Select:Gx,Selu:cm,Sigmoid:fm,Sign:hm,Sin:dm,Sinh:pm,Slice:Hx,Softmax:Yx,Softplus:gm,SpaceToBatchND:Kx,SparseFillEmptyRows:Qx,SparseReshape:Zx,SparseSegmentMean:Jx,SparseSegmentSum:ew,SparseToDense:tw,SplitV:Xx,Sqrt:mm,Square:mT,SquaredDifference:ym,Step:km,StridedSlice:nw,StringNGrams:rw,StringSplit:aw,StringToHashBucketFast:iw,Sub:bm,Sum:qx,Tan:vm,Tanh:xm,Tensor:qn,TensorBuffer:_r,Tile:wm,TopK:ow,Transform:sw,Transpose:Bp,Unique:lw,Unpack:uw,UnsortedSegmentSum:cw,UpperBound:ple,Variable:$m,ZerosLike:dw,_FusedMatMul:Sm,abs:fi,acos:xL,acosh:wL,add:ft,addN:kL,all:SL,any:CL,argMax:EL,argMin:IL,asin:TL,asinh:NL,atan:_L,atan2:RL,atanh:$L,avgPool:pN,avgPool3d:OL,backend:ace,backend_util:c7,basicLSTMCell:ML,batchNorm:Fm,batchNorm2d:PL,batchNorm3d:AL,batchNorm4d:DL,batchToSpaceND:hN,bincount:fN,booleanMaskAsync:v9,broadcastArgs:LL,broadcastTo:Xp,broadcast_util:hce,browser:vce,buffer:Ct,cast:zn,ceil:FL,clipByValue:BL,clone:ml,complex:fl,concat:fa,concat1d:zL,concat2d:jL,concat3d:VL,concat4d:UL,conv1d:WL,conv2d:Bm,conv2dTranspose:HL,conv3d:qL,conv3dTranspose:KL,copyRegisteredKernels:yle,cos:XL,cosh:YL,cosineWindow:Lw,cumprod:QL,cumsum:ZL,customGrad:ws,denseBincount:JL,deprecationWarn:que,depthToSpace:eF,depthwiseConv2d:Tw,device_util:Gle,diag:tF,dilation2d:nF,disableDeprecationWarnings:Hue,dispose:pa,disposeVariables:Kue,div:In,divNoNan:rF,dot:aF,dropout:C9,einsum:iF,elu:mN,enableDebugMode:Gue,enableProdMode:Wue,enclosingPowerOfTwo:XN,engine:yl,env:fe,equal:gN,erf:oF,euclideanNorm:uF,exp:_u,expandDims:xl,expm1:cF,eye:bN,fft:Pw,fill:Yp,findBackend:nce,findBackendFactory:rce,floor:vN,floorDiv:uN,fused:I9,gather:xN,gatherND:S9,gather_util:xce,getBackend:ece,getGradient:yT,getKernel:fw,getKernelsForBackend:gw,grad:Epe,grads:Ipe,greater:Vm,greaterEqual:wN,ifft:Hm,imag:Pm,image:QN,inTopKAsync:E9,io:qT,irfft:GN,isFinite:dF,isInf:pF,isNaN:hF,keep:bs,kernel_impls:mme,leakyRelu:kN,less:fF,lessEqual:_w,linalg:M9,linspace:gF,localResponseNormalization:mF,log:Jp,log1p:SN,logSigmoid:bF,logSoftmax:vF,logSumExp:EN,logicalAnd:Um,logicalNot:IN,logicalOr:TN,logicalXor:xF,losses:P9,lowerBound:wF,matMul:un,math:pce,max:sd,maxPool:NN,maxPool3d:kF,maxPoolWithArgmax:SF,maximum:_N,mean:Wm,memory:Xue,meshgrid:CF,min:Nw,minimum:RN,mirrorPad:EF,mod:IF,moments:TF,movingAverage:x9,mul:De,multiRNNCell:NF,multinomial:_F,neg:vs,nextFrame:L9,norm:jm,notEqual:$N,oneHot:Sw,ones:$u,onesLike:RF,op:ee,outerProduct:$F,pad:eh,pad1d:OF,pad2d:MF,pad3d:PF,pad4d:AF,pool:DF,pow:Qp,prelu:MN,print:VT,prod:LF,profile:Yue,raggedGather:FF,raggedTensorToTensor:BF,rand:zF,randomGamma:UF,randomNormal:jN,randomStandardNormal:WF,randomUniform:VN,range:th,ready:Jue,real:Hp,reciprocal:GF,registerBackend:KT,registerGradient:fle,registerKernel:mw,relu:Gm,relu6:UN,removeBackend:tce,reshape:Se,reverse:Ou,reverse1d:HF,reverse2d:qF,reverse3d:KF,reverse4d:XF,rfft:Aw,round:WN,rsqrt:YF,scalar:Bt,scatterND:w9,scatter_util:wce,searchSorted:Ow,selu:QF,separableConv2d:ZF,serialization:Ice,setBackend:Zue,setPlatform:ice,setdiff1dAsync:JF,sigmoid:id,sign:e9,signal:O9,sin:t9,sinh:n9,slice:wn,slice1d:r9,slice2d:a9,slice3d:i9,slice4d:o9,slice_util:mL,softmax:s9,softplus:CN,spaceToBatchND:ON,sparse:A9,sparseToDense:k9,spectral:$9,split:nh,sqrt:xs,square:ho,squaredDifference:HN,squeeze:qm,stack:ks,step:qN,stridedSlice:l9,string:D9,sub:At,sum:Tn,sumOutType:xw,tan:u9,tanh:Iw,tensor:Ho,tensor1d:fo,tensor2d:rh,tensor3d:YT,tensor4d:c9,tensor5d:d9,tensor6d:p9,tensor_util:zle,test_util:Dce,tidy:qt,tile:Zp,time:Que,topk:h9,train:dme,transpose:Am,truncatedNormal:f9,unique:g9,unregisterGradient:mle,unregisterKernel:gle,unsortedSegmentSum:m9,unstack:Mu,upcastType:Ya,upperBound:y9,util:Ile,valueAndGrad:Tpe,valueAndGrads:Npe,variable:b9,variableGrads:yF,version_core:Lce,where:od,whereAsync:KN,zeros:Ru,zerosLike:gi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bme=fe();bme.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
* =============================================================================
*/var go;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(go||(go={}));var d7;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(d7||(d7={}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vme={};function p7(t){return vme[t]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const s=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?s+1:i.inputIndexEnd;if(i.type==="tensor")return Pa(e.inputNames[i.inputIndexStart],n,r,a);if(i.type==="tensors")return e.inputNames.slice(s,l).map(d=>Pa(d,n,r,a));const u=Pa(e.inputNames.slice(s)[0],n,r,a),c=u.dataSync();return i.type==="number"?c[0]:Ai(u.shape,c)}const o=e.attrParams[t];return o&&o.value}function Pa(t,e,n,r){const[a,i]=mi(t);if(r!=null){const s=r.getHashTableHandleByName(a);if(s!=null)return s}const o=n.currentContextIds.find(s=>!!e[Zw(a,s)]);return o!==void 0?e[Zw(a,o)][i]:void 0}function xme(t,e,n){return e[Zw(t,n.currentContextId)]}function Cs(t,e){const[n,r,a]=mi(t);return[Zw(n,e&&e.currentContextId),r,a]}function Zw(t,e){return e?`${t}-${e}`:t}function mi(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,a=Number(e[e.length-1]);return[n,a,r]}function Jw(t,e,n){let r=$("pad",t,e,n);if(r==="explicit"){r=$("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function Sl(t){return t.kept?t:ml(t)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wme=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],kme=Object.freeze(Object.defineProperty({__proto__:null,json:wme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sme=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Cme=Object.freeze(Object.defineProperty({__proto__:null,json:Sme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Eme=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Ime=Object.freeze(Object.defineProperty({__proto__:null,json:Eme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tme=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Nme=Object.freeze(Object.defineProperty({__proto__:null,json:Tme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _me=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Rme=Object.freeze(Object.defineProperty({__proto__:null,json:_me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $me=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ome=Object.freeze(Object.defineProperty({__proto__:null,json:$me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mme=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Pme=Object.freeze(Object.defineProperty({__proto__:null,json:Mme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ame=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Dme=Object.freeze(Object.defineProperty({__proto__:null,json:Ame},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lme=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Fme=Object.freeze(Object.defineProperty({__proto__:null,json:Lme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bme=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],zme=Object.freeze(Object.defineProperty({__proto__:null,json:Bme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jme=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Vme=Object.freeze(Object.defineProperty({__proto__:null,json:jme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ume=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],Wme=Object.freeze(Object.defineProperty({__proto__:null,json:Ume},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gme=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Hme=Object.freeze(Object.defineProperty({__proto__:null,json:Gme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qme=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Kme=Object.freeze(Object.defineProperty({__proto__:null,json:qme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xme=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Yme=Object.freeze(Object.defineProperty({__proto__:null,json:Xme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qme=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Zme=Object.freeze(Object.defineProperty({__proto__:null,json:Qme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jme=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],e0e=Object.freeze(Object.defineProperty({__proto__:null,json:Jme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const t0e=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],n0e=Object.freeze(Object.defineProperty({__proto__:null,json:t0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r0e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],a0e=Object.freeze(Object.defineProperty({__proto__:null,json:r0e},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class h7{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[kme,Cme,Ime,Nme,Rme,Ome,Pme,Dme,Fme,zme,Vme,Wme,Hme,Kme,Yme,Zme,e0e,n0e,a0e],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],o=[],s=r.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?a.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&o.push(y[v.name]),y),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const p=Object.keys(s);p.forEach(y=>{const v=s[y];v.inputNames.forEach((b,x)=>{const[w,,S]=Cs(b),C=s[w];if(C.outputs!=null){const E=C.outputs.indexOf(S);if(E!==-1){const _=`${w}:${E}`;v.inputNames[x]=_}}v.inputs.push(C),C.children.push(v)})}),Object.keys(d).length===0?p.forEach(y=>{const v=s[y];v.children.length===0&&u.push(v)}):Object.keys(d).forEach(y=>{const[v]=Cs(y),b=s[v];b!=null&&(b.signatureKey=d[y],u.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[v]=Cs(y),b=s[v];b&&(b.signatureKey=c[y],l.push(b))}):l=a;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const m={nodes:s,inputs:l,outputs:u,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(m.initNodes=o),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=p7(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const o=i.type;let s;switch(i.type){case"string":s=w4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=w4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=_4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=_4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=S4(e.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=S4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=N4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=N4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=k4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=k4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=$4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=$4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=T4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=T4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=R4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=R4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=E4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=E4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=I4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=I4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=g7(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=g7(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:s,type:o},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((c,d)=>(c[d.name]=this.mapNode(d),d.op==="Const"&&a.push(c[d.name]),c),{}));const o=[],s=[];e.signature.inputArg.forEach(c=>{const[d]=Cs(c.name),p={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:C4(c.type),type:"dtype"}},children:[]};p.signatureKey=c.name,o.push(p),i[d]=p}),Object.keys(i).forEach(c=>{const d=i[c];d.inputNames.forEach((p,f)=>{const[m,,y]=Cs(p),v=i[m];if(v.outputs!=null){const b=v.outputs.indexOf(y);if(b!==-1){const x=`${m}:${b}`;d.inputNames[f]=x}}d.inputs.push(v),v.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(c=>{const[d,p]=Cs(l[c.name]),f=i[d];f!=null&&(f.defaultOutput=p,s.push(f))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function i0e(t){const e=fe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function f7(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):i0e(t);return e?n:n.toLowerCase()}function w4(t,e,n,r=!1){const a=t[e];return a!=null?f7(a.s,r):n}function k4(t,e,n){const r=t[e];return r?r.b:n}function S4(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function C4(t){switch(typeof t=="string"&&(t=go[t]),t){case go.DT_FLOAT:case go.DT_HALF:return"float32";case go.DT_INT32:case go.DT_INT64:case go.DT_INT8:case go.DT_UINT8:return"int32";case go.DT_BOOL:return"bool";case go.DT_DOUBLE:return"float32";case go.DT_STRING:return"string";default:return null}}function g7(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function E4(t,e,n){const r=t[e];return r&&r.type?C4(r.type):n}function I4(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>C4(a)):n}function m7(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function T4(t,e,n){const r=t[e];return r&&r.shape?m7(r.shape):n}function N4(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function _4(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>f7(i,r)):n}function R4(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>m7(a)):n}function $4(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class o0e{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return Pa(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Pa(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return S4(this.node.rawAttrs,e,n);if(r.s!=null)return w4(this.node.rawAttrs,e,n);if(r.b!=null)return k4(this.node.rawAttrs,e,n);if(r.shape!=null)return T4(this.node.rawAttrs,e,n);if(r.type!=null)return E4(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return N4(this.node.rawAttrs,e,n);if(r.list.s!=null)return _4(this.node.rawAttrs,e,n);if(r.list.shape!=null)return R4(this.node.rawAttrs,e,n);if(r.list.b!=null)return $4(this.node.rawAttrs,e,n);if(r.list.type!=null)return I4(this.node.rawAttrs,e,n)}return n}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ga=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:MT,abs:fi,acos:xL,acosh:wL,add:ft,addN:kL,all:SL,any:CL,argMax:EL,argMin:IL,asin:TL,asinh:NL,atan:_L,atan2:RL,atanh:$L,avgPool:pN,avgPool3d:OL,basicLSTMCell:ML,batchNorm:Fm,batchNorm2d:PL,batchNorm3d:AL,batchNorm4d:DL,batchToSpaceND:hN,bincount:fN,booleanMaskAsync:v9,broadcastArgs:LL,broadcastTo:Xp,buffer:Ct,cast:zn,ceil:FL,clipByValue:BL,clone:ml,complex:fl,concat:fa,concat1d:zL,concat2d:jL,concat3d:VL,concat4d:UL,conv1d:WL,conv2d:Bm,conv2dTranspose:HL,conv3d:qL,conv3dTranspose:KL,cos:XL,cosh:YL,cosineWindow:Lw,cumprod:QL,cumsum:ZL,denseBincount:JL,depthToSpace:eF,depthwiseConv2d:Tw,diag:tF,dilation2d:nF,div:In,divNoNan:rF,dot:aF,dropout:C9,einsum:iF,elu:mN,enclosingPowerOfTwo:XN,equal:gN,erf:oF,euclideanNorm:uF,exp:_u,expandDims:xl,expm1:cF,eye:bN,fft:Pw,fill:Yp,floor:vN,floorDiv:uN,fused:I9,gather:xN,gatherND:S9,greater:Vm,greaterEqual:wN,ifft:Hm,imag:Pm,image:QN,inTopKAsync:E9,irfft:GN,isFinite:dF,isInf:pF,isNaN:hF,leakyRelu:kN,less:fF,lessEqual:_w,linalg:M9,linspace:gF,localResponseNormalization:mF,log:Jp,log1p:SN,logSigmoid:bF,logSoftmax:vF,logSumExp:EN,logicalAnd:Um,logicalNot:IN,logicalOr:TN,logicalXor:xF,losses:P9,lowerBound:wF,matMul:un,max:sd,maxPool:NN,maxPool3d:kF,maxPoolWithArgmax:SF,maximum:_N,mean:Wm,meshgrid:CF,min:Nw,minimum:RN,mirrorPad:EF,mod:IF,moments:TF,movingAverage:x9,mul:De,multiRNNCell:NF,multinomial:_F,neg:vs,norm:jm,notEqual:$N,oneHot:Sw,ones:$u,onesLike:RF,op:ee,outerProduct:$F,pad:eh,pad1d:OF,pad2d:MF,pad3d:PF,pad4d:AF,pool:DF,pow:Qp,prelu:MN,print:VT,prod:LF,raggedGather:FF,raggedTensorToTensor:BF,rand:zF,randomGamma:UF,randomNormal:jN,randomStandardNormal:WF,randomUniform:VN,range:th,real:Hp,reciprocal:GF,relu:Gm,relu6:UN,reshape:Se,reverse:Ou,reverse1d:HF,reverse2d:qF,reverse3d:KF,reverse4d:XF,rfft:Aw,round:WN,rsqrt:YF,scalar:Bt,scatterND:w9,searchSorted:Ow,selu:QF,separableConv2d:ZF,setdiff1dAsync:JF,sigmoid:id,sign:e9,signal:O9,sin:t9,sinh:n9,slice:wn,slice1d:r9,slice2d:a9,slice3d:i9,slice4d:o9,softmax:s9,softplus:CN,spaceToBatchND:ON,sparse:A9,sparseToDense:k9,spectral:$9,split:nh,sqrt:xs,square:ho,squaredDifference:HN,squeeze:qm,stack:ks,step:qN,stridedSlice:l9,string:D9,sub:At,sum:Tn,tan:u9,tanh:Iw,tensor:Ho,tensor1d:fo,tensor2d:rh,tensor3d:YT,tensor4d:c9,tensor5d:d9,tensor6d:p9,tile:Zp,topk:h9,transpose:Am,truncatedNormal:f9,unique:g9,unsortedSegmentSum:m9,unstack:Mu,upperBound:y9,variable:b9,where:od,whereAsync:KN,zeros:Ru,zerosLike:gi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const s0e=(t,e,n,r=ga)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add($("a",t,e,n),$("b",t,e,n))];case"AddN":return[r.addN($("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod($("a",t,e,n),$("b",t,e,n))];case"Mul":return[r.mul($("a",t,e,n),$("b",t,e,n))];case"RealDiv":case"Div":return[r.div($("a",t,e,n),$("b",t,e,n))];case"DivNoNan":return[r.divNoNan($("a",t,e,n),$("b",t,e,n))];case"FloorDiv":return[r.floorDiv($("a",t,e,n),$("b",t,e,n))];case"Sub":return[r.sub($("a",t,e,n),$("b",t,e,n))];case"Minimum":return[r.minimum($("a",t,e,n),$("b",t,e,n))];case"Maximum":return[r.maximum($("a",t,e,n),$("b",t,e,n))];case"Pow":return[r.pow($("a",t,e,n),$("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference($("a",t,e,n),$("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l0e=(t,e,n,r=ga)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs($("x",t,e,n))];case"Acos":return[r.acos($("x",t,e,n))];case"Acosh":return[r.acosh($("x",t,e,n))];case"Asin":return[r.asin($("x",t,e,n))];case"Asinh":return[r.asinh($("x",t,e,n))];case"Atan":return[r.atan($("x",t,e,n))];case"Atan2":return[r.atan2($("x",t,e,n),$("y",t,e,n))];case"Atanh":return[r.atanh($("x",t,e,n))];case"Ceil":return[r.ceil($("x",t,e,n))];case"Complex":return[r.complex($("real",t,e,n),$("imag",t,e,n))];case"Cos":return[r.cos($("x",t,e,n))];case"Cosh":return[r.cosh($("x",t,e,n))];case"Elu":return[r.elu($("x",t,e,n))];case"Erf":return[r.erf($("x",t,e,n))];case"Exp":return[r.exp($("x",t,e,n))];case"Expm1":return[r.expm1($("x",t,e,n))];case"Floor":return[r.floor($("x",t,e,n))];case"Log":return[r.log($("x",t,e,n))];case"Log1p":return[r.log1p($("x",t,e,n))];case"Imag":return[r.imag($("x",t,e,n))];case"Neg":return[r.neg($("x",t,e,n))];case"Reciprocal":return[r.reciprocal($("x",t,e,n))];case"Real":return[r.real($("x",t,e,n))];case"Relu":return[r.relu($("x",t,e,n))];case"Round":return[r.round($("x",t,e,n))];case"Selu":return[r.selu($("x",t,e,n))];case"Sigmoid":return[r.sigmoid($("x",t,e,n))];case"Sin":return[r.sin($("x",t,e,n))];case"Sign":return[r.sign($("x",t,e,n))];case"Sinh":return[r.sinh($("x",t,e,n))];case"Softplus":return[r.softplus($("x",t,e,n))];case"Sqrt":return[r.sqrt($("x",t,e,n))];case"Square":return[r.square($("x",t,e,n))];case"Tanh":return[r.tanh($("x",t,e,n))];case"Tan":return[r.tan($("x",t,e,n))];case"ClipByValue":return[r.clipByValue($("x",t,e,n),$("clipValueMin",t,e,n),$("clipValueMax",t,e,n))];case"Relu6":return[r.relu6($("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Pa(t.inputNames[0],e,n))];case"Prod":return[r.prod($("x",t,e,n),$("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu($("x",t,e,n),$("alpha",t,e,n))];case"Prelu":return[r.prelu($("x",t,e,n),$("alpha",t,e,n))];case"IsNan":return[r.isNaN(Pa(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){V(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];V(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function y7(t){return!(typeof t=="number"||t.some(e=>e<0))}function Zm(t,e,n){let r=O4(t,n);const a=!y7(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=O4(i.shape,r)}),!y7(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function O4(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class u0e{constructor(e,n,r,a,i,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Bt(0),bs(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),mo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,bs(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return Ho([],[0].concat(this.elementShape));const r=this.readMany(e);return mo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ks(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Ho([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return mo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),fa(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Mu(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];qt(()=>{n=Se(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:a[l-1],0],c=[1,e[l],i];o[l]=Se(wn(n,u,c),this.elementShape)}return o});const s=[];for(let l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class kd{constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);mo(n,i.shape,"TensorList shape mismatch: "),bs(i)}),this.idTensor=Bt(0),this.maxNumElements=a,bs(this.idTensor)}get id(){return this.idTensor.id}copy(){return new kd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);mo(e,this.elementShape,"TensorList shape mismatch: ");const a=Zm(this.elementShape,this.tensors,e);return qt(()=>{const i=this.tensors.map(o=>Se(o,a));return ks(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Zm(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,mo(a.shape,e,"TensorList shape mismatch: "),Se(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(mo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");bs(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new kd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);mo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=Zm(this.elementShape,this.tensors,n);return Se(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);mo(this.elementShape,n.shape,"TensorList shape mismatch: "),bs(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);mo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=Zm(this.elementShape,this.tensors,r);return e.length===0?Ho([],[0].concat(a)):qt(()=>{const i=e.map(o=>Se(this.tensors[o],a));return ks(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);mo(this.elementShape,n,"TensorList shape mismatch: ");const r=Zm(this.elementShape,this.tensors,n);return this.size()===0?Ho([],[0].concat(r)):qt(()=>{const a=this.tensors.map(i=>Se(i,r));return fa(a,0)})}}function c0e(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);mo(a,e,"TensorList shape mismatch: ");const i=Mu(t);return new kd(i,e,r)}function d0e(t,e,n,r){return new kd([],t,e,r)}function p0e(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new kd([],n,t.dtype,r),o=Mu(t,0);return e.forEach((s,l)=>{i.setItem(s,o[l])}),i}function h0e(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=O4(i,n),s=r===0?0:t.size/r,l=qt(()=>{const c=[];t=Se(t,[1,r,s]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:a[d-1],0],f=[1,e[d],s];c[d]=Se(wn(t,p,f),o)}return t.dispose(),c}),u=new kd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const f0e=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=$("thenBranch",t,e,n),a=$("elseBranch",t,e,n),i=$("cond",t,e,n),o=$("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=$("body",t,e,n),a=$("cond",t,e,n),i=$("args",t,e,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&s.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const p=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const r=$("pred",t,e,n);return[Sl(r)]}case"Switch":{const r=$("pred",t,e,n);let a=$("data",t,e,n);return a.kept||(a=Sl(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Pa(a,e,n)!==void 0);if(r){const a=Pa(r,e,n);return[Sl(a)]}return}case"Enter":{const r=$("frameName",t,e,n),a=$("tensor",t,e,n);return n.enterFrame(r),[Sl(a)]}case"Exit":{const r=$("tensor",t,e,n);return n.exitFrame(),[Sl(r)]}case"NextIteration":{const r=$("tensor",t,e,n);return n.nextIteration(),[Sl(r)]}case"TensorArrayV3":{const r=$("size",t,e,n),a=$("dtype",t,e,n),i=$("elementShape",t,e,n),o=$("dynamicSize",t,e,n),s=$("clearAfterRead",t,e,n),l=$("identicalElementShapes",t,e,n),u=$("name",t,e,n),c=new u0e(u,a,r,i,l,o,s);return n.addTensorArray(c),[c.idTensor,Bt(1)]}case"TensorArrayWriteV3":{const r=$("tensorArrayId",t,e,n),a=$("index",t,e,n),i=$("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{const r=$("tensorArrayId",t,e,n),a=$("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=$("tensorArrayId",t,e,n),a=$("indices",t,e,n),i=$("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=$("tensorArrayId",t,e,n),a=$("indices",t,e,n),i=$("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=$("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=$("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=$("tensorArrayId",t,e,n),a=$("tensor",t,e,n),i=$("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{const r=$("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[Bt(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=$("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=$("tensorListId",t,e,n),a=$("index",t,e,n),i=$("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{const r=$("tensorListId",t,e,n),a=$("index",t,e,n),i=$("elementShape",t,e,n),o=$("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=$("indices",t,e,n),a=$("tensor",t,e,n),i=$("elementShape",t,e,n),o=$("numElements",t,e,n),s=p0e(a,r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=$("elementShape",t,e,n),a=$("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=$(i,t,e,n),s=t.op==="TensorListReserve"?-1:o,l=d0e(r,a,o,s);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=$("tensorListId",t,e,n),a=$("indices",t,e,n),i=$("elementShape",t,e,n),o=$("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,o,i)]}case"TensorListStack":{const r=$("tensorListId",t,e,n),a=$("elementShape",t,e,n),i=$("elementDType",t,e,n),o=$("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,o)]}case"TensorListFromTensor":{const r=$("tensor",t,e,n),a=$("elementShape",t,e,n),i=$("elementDType",t,e,n),o=c0e(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=$("tensorListId",t,e,n),a=n.getTensorList(r.id),i=$("dtype",t,e,n),o=$("elementShape",t,e,n);return[a.concat(i,o)]}case"TensorListPushBack":{const r=$("tensorListId",t,e,n),a=$("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=$("tensorListId",t,e,n),a=$("elementShape",t,e,n),i=$("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=$("tensor",t,e,n),a=$("elementShape",t,e,n),i=$("lengths",t,e,n),o=h0e(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=$("tensorListId",t,e,n),a=n.getTensorList(r.id);return[Bt(a.size(),"int32")]}case"TensorListResize":{const r=$("tensorListId",t,e,n),a=$("size",t,e,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b7(t,e,n){const[r,a]=$("fusedOps",t,e,n),i=r==="biasadd",o=!i,s=a==="prelu",l=r==="fusedbatchnorm",u=$("numArgs",t,e,n);if(i){if(s&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=$("strides",t,e,n),d=Jw(t,e,n),p=$("dataFormat",t,e,n).toUpperCase(),f=$("dilations",t,e,n);let[m,y]=$("args",t,e,n);o&&(y=m,m=void 0);const v=$("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:p,dilations:f,biasArg:m,preluArg:y,activationFunc:a,leakyreluAlpha:v}}const g0e=(t,e,n,r=ga)=>{switch(t.op){case"Conv1D":{const a=$("stride",t,e,n),i=$("pad",t,e,n),o=$("dataFormat",t,e,n).toUpperCase(),s=$("dilation",t,e,n);return[r.conv1d($("x",t,e,n),$("filter",t,e,n),a,i,o,s)]}case"Conv2D":{const a=$("strides",t,e,n),i=Jw(t,e,n),o=$("dataFormat",t,e,n).toUpperCase(),s=$("dilations",t,e,n);return[r.conv2d($("x",t,e,n),$("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=b7(t,e,n);return[r.fused.conv2d({x:$("x",t,e,n),filter:$("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=b7(t,e,n);return[r.fused.depthwiseConv2d({x:$("x",t,e,n),filter:$("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=$("outputShape",t,e,n),i=$("strides",t,e,n),o=Jw(t,e,n);return[r.conv2dTranspose($("x",t,e,n),$("filter",t,e,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=$("strides",t,e,n),i=Jw(t,e,n),o=$("dilations",t,e,n),s=$("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d($("input",t,e,n),$("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("dataFormat",t,e,n).toUpperCase(),s=$("dilations",t,e,n);return[r.conv3d($("x",t,e,n),$("filter",t,e,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.avgPool($("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.maxPool($("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n),s=$("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax($("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i,s);return[l,u]}case"AvgPool3D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.avgPool3d($("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.maxPool3d($("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("dilations",t,e,n),s=a[1],l=a[2],u=o[1],c=o[2];return[r.dilation2d($("x",t,e,n),$("filter",t,e,n),[s,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const m0e=(t,e,n,r=ga)=>{switch(t.op){case"Fill":{const a=$("shape",t,e,n),i=$("dtype",t,e,n),o=$("value",t,e,n);return[r.fill(a,o,i)]}case"LinSpace":{const a=$("start",t,e,n),i=$("stop",t,e,n),o=$("num",t,e,n);return[r.linspace(a,i,o)]}case"Multinomial":{const a=$("logits",t,e,n),i=$("numSamples",t,e,n),o=$("seed",t,e,n);return[r.multinomial(a,i,o)]}case"OneHot":{const a=$("indices",t,e,n),i=$("depth",t,e,n),o=$("onValue",t,e,n),s=$("offValue",t,e,n),l=$("dtype",t,e,n);return[r.oneHot(a,i,o,s,l)]}case"Ones":return[r.ones($("shape",t,e,n),$("dtype",t,e,n))];case"OnesLike":return[r.onesLike($("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal($("shape",t,e,n),$("dtype",t,e,n),$("seed",t,e,n))];case"RandomUniform":return[r.randomUniform($("shape",t,e,n),$("minval",t,e,n),$("maxval",t,e,n),$("dtype",t,e,n))];case"Range":{const a=$("start",t,e,n),i=$("stop",t,e,n),o=$("step",t,e,n);return[r.range(a,i,o,$("dtype",t,e,n))]}case"TruncatedNormal":{const a=$("shape",t,e,n),i=$("mean",t,e,n),o=$("stdDev",t,e,n),s=$("seed",t,e,n);return[r.truncatedNormal(a,i,o,$("dtype",t,e,n),s)]}case"Zeros":return[r.zeros($("shape",t,e,n),$("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike($("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M4(t,e,n){const r=$("boxes",t,e,n),a=$("scores",t,e,n),i=$("maxOutputSize",t,e,n),o=$("iouThreshold",t,e,n),s=$("scoreThreshold",t,e,n),l=$("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:l}}const y0e=async(t,e,n,r,a=ga)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=M4(t,e,n),d=await a.image.nonMaxSuppressionWithScoreAsync(i,o,s,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=M4(t,e,n),c=$("padToMaxOutputSize",t,e,n),d=await a.image.nonMaxSuppressionPaddedAsync(i,o,s,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=M4(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,o,s,l,u)]}case"Where":{const i=a.cast($("condition",t,e,n),"bool"),o=[await a.whereAsync(i)];return i.dispose(),o}case"ListDiff":return a.setdiff1dAsync($("x",t,e,n),$("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const b0e=(t,e,n,r=ga)=>{switch(t.op){case"LowerBound":{const a=$("sortedSequence",t,e,n),i=$("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=$("x",t,e,n),i=$("k",t,e,n),o=$("sorted",t,e,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{const a=$("sortedSequence",t,e,n),i=$("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=$("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=$("x",t,e,n),i=$("axis",t,e,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const v0e=(t,e,n,r=ga)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=$("default",t,e,n);return[Pa(t.name,e,n)||a];case"Placeholder":return[Pa(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=$("x",t,e,n);return[Sl(c)]}case"IdentityN":return $("x",t,e,n).map(c=>Sl(c));case"Snapshot":const i=$("x",t,e,n);return[Sl(i)];case"Shape":return[r.tensor1d($("x",t,e,n).shape,"int32")];case"ShapeN":return $("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar($("x",t,e,n).size,"int32")];case"Rank":return[r.scalar($("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=$("x",t,e,n),s=$("data",t,e,n),l=$("message",t,e,n),u=$("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<s.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class x0e{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Bt(0),this.tensorMap=new Map,bs(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Bt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),qt(()=>{const a=Mu(n),i=r.length,o=a.length;V(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let s=0;s<i;s++){const l=r[s],u=a[s];bs(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return qt(()=>{const a=[];for(let i=0;i<r.length;i++){const o=r[i],s=this.findWithDefault(o,n);a.push(s)}return ks(a)})}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w0e=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=$("keyDType",t,e,n),i=$("valueDType",t,e,n),o=new x0e(a,i);return r.addHashTable(t.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=$("tableHandle",t,e,n,r),i=$("keys",t,e,n),o=$("values",t,e,n);return[await r.getHashTableById(a.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=$("tableHandle",t,e,n,r),i=$("keys",t,e,n),o=$("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=$("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const k0e=(t,e,n,r=ga)=>{switch(t.op){case"ResizeBilinear":{const a=$("images",t,e,n),i=$("size",t,e,n),o=$("alignCorners",t,e,n),s=$("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{const a=$("images",t,e,n),i=$("size",t,e,n),o=$("alignCorners",t,e,n),s=$("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{const a=$("image",t,e,n),i=$("boxes",t,e,n),o=$("boxInd",t,e,n),s=$("cropSize",t,e,n),l=$("method",t,e,n),u=$("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,o,s,l,u)]}case"ImageProjectiveTransformV3":{const a=$("images",t,e,n),i=$("transforms",t,e,n),o=$("outputShape",t,e,n),s=$("fillValue",t,e,n),l=$("interpolation",t,e,n),u=$("fillMode",t,e,n);return[r.image.transform(a,i,l.toLowerCase(),u.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S0e=(t,e,n,r=ga)=>{switch(t.op){case"Equal":return[r.equal($("a",t,e,n),$("b",t,e,n))];case"NotEqual":return[r.notEqual($("a",t,e,n),$("b",t,e,n))];case"Greater":return[r.greater($("a",t,e,n),$("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual($("a",t,e,n),$("b",t,e,n))];case"Less":return[r.less($("a",t,e,n),$("b",t,e,n))];case"LessEqual":return[r.lessEqual($("a",t,e,n),$("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd($("a",t,e,n),$("b",t,e,n))];case"LogicalNot":return[r.logicalNot($("a",t,e,n))];case"LogicalOr":return[r.logicalOr($("a",t,e,n),$("b",t,e,n))];case"Select":case"SelectV2":return[r.where($("condition",t,e,n),$("a",t,e,n),$("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const C0e=(t,e,n,r=ga)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul($("a",t,e,n),$("b",t,e,n),$("transposeA",t,e,n),$("transposeB",t,e,n))];case"Einsum":return[r.einsum($("equation",t,e,n),...$("tensors",t,e,n))];case"Transpose":return[r.transpose($("x",t,e,n),$("perm",t,e,n))];case"_FusedMatMul":const[a,i]=$("fusedOps",t,e,n),o=a==="biasadd",s=i==="prelu",l=$("numArgs",t,e,n),u=$("leakyreluAlpha",t,e,n);if(o){if(s&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=$("args",t,e,n);return[r.fused.matMul({a:$("a",t,e,n),b:$("b",t,e,n),transposeA:$("transposeA",t,e,n),transposeB:$("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E0e=(t,e,n,r=ga)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm($("x",t,e,n),$("axis",t,e,n),$("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm($("x",t,e,n),$("mean",t,e,n),$("variance",t,e,n),$("offset",t,e,n),$("scale",t,e,n),$("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm($("x",t,e,n),$("mean",t,e,n),$("variance",t,e,n),$("offset",t,e,n),$("scale",t,e,n),$("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization($("x",t,e,n),$("radius",t,e,n),$("bias",t,e,n),$("alpha",t,e,n),$("beta",t,e,n))];case"Softmax":return[r.softmax($("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax($("x",t,e,n))];case"SparseToDense":return[r.sparseToDense($("sparseIndices",t,e,n),$("outputShape",t,e,n),$("sparseValues",t,e,n),$("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I0e=(t,e,n,r=ga)=>{switch(t.op){case"Max":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.max($("x",t,e,n),s,l)]}case"Mean":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.mean($("x",t,e,n),s,l)]}case"Min":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.min($("x",t,e,n),s,l)]}case"Sum":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.sum($("x",t,e,n),s,l)]}case"All":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.all($("x",t,e,n),s,l)]}case"Any":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.any($("x",t,e,n),s,l)]}case"ArgMax":{const s=$("axis",t,e,n);return[r.argMax($("x",t,e,n),s)]}case"ArgMin":{const s=$("axis",t,e,n);return[r.argMin($("x",t,e,n),s)]}case"Prod":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.prod($("x",t,e,n),s,l)]}case"Cumprod":{const s=$("axis",t,e,n),l=$("exclusive",t,e,n),u=$("reverse",t,e,n);return[r.cumprod($("x",t,e,n),s,l,u)]}case"Cumsum":{const s=$("axis",t,e,n),l=$("exclusive",t,e,n),u=$("reverse",t,e,n);return[r.cumsum($("x",t,e,n),s,l,u)]}case"Bincount":const a=$("x",t,e,n),i=$("weights",t,e,n),o=$("size",t,e,n);return[r.bincount(a,i,o)];case"DenseBincount":{const s=$("x",t,e,n),l=$("weights",t,e,n),u=$("size",t,e,n),c=$("binaryOutput",t,e,n);return[r.denseBincount(s,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T0e=(t,e,n,r=ga)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=$("n",t,e,n),i=$("axis",t,e,n);let o=$("tensors",t,e,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{const a=$("x",t,e,n),i=$("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=$("axis",t,e,n),i=$("batchDims",t,e,n),o=$("x",t,e,n),s=$("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{const a=$("dims",t,e,n),i=[];for(let s=0;s<a.length;s++)a[s]&&i.push(s);const o=$("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const a=$("axis",t,e,n),i=$("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=$("begin",t,e,n),i=$("size",t,e,n);return[r.slice($("x",t,e,n),a,i)]}case"StridedSlice":{const a=$("begin",t,e,n),i=$("end",t,e,n),o=$("strides",t,e,n),s=$("beginMask",t,e,n),l=$("endMask",t,e,n),u=$("ellipsisMask",t,e,n),c=$("newAxisMask",t,e,n),d=$("shrinkAxisMask",t,e,n),p=$("x",t,e,n);return[r.stridedSlice(p,a,i,o,s,l,u,c,d)]}case"Pack":return qt(()=>{const a=$("axis",t,e,n),i=$("tensors",t,e,n),o=i[0].shape,s=r.squeeze(i[0]).shape,l=i.map(u=>{const c=xn(u.shape,o);if(!c&&!xn(r.squeeze(u).shape,s))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,a)]});case"Unpack":{const a=$("axis",t,e,n),i=$("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=$("reps",t,e,n);return[r.tile($("x",t,e,n),a)]}case"Split":case"SplitV":{const a=$("axis",t,e,n),i=$("numOrSizeSplits",t,e,n),o=$("x",t,e,n);return r.split(o,i,a)}case"ScatterNd":{const a=$("indices",t,e,n),i=$("values",t,e,n),o=$("shape",t,e,n);return[r.scatterND(a,i,o)]}case"GatherNd":{const a=$("x",t,e,n),i=$("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=$("sparseIndices",t,e,n),i=$("outputShape",t,e,n),o=$("sparseValues",t,e,n),s=$("defaultValue",t,e,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const N0e=(t,e,n,r=ga)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows($("indices",t,e,n),$("values",t,e,n),$("denseShape",t,e,n),$("defaultValue",t,e,n));return[a,i,o,s]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape($("inputIndices",t,e,n),$("inputShape",t,e,n),$("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean($("data",t,e,n),$("indices",t,e,n),$("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum($("data",t,e,n),$("indices",t,e,n),$("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _0e=(t,e,n,r=ga)=>{switch(t.op){case"FFT":return[r.fft($("x",t,e,n))];case"IFFT":return[r.ifft($("x",t,e,n))];case"RFFT":return[r.rfft($("x",t,e,n))];case"IRFFT":return[r.irfft($("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const R0e=(t,e,n,r=ga)=>{switch(t.op){case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams($("data",t,e,n),$("dataSplits",t,e,n),$("separator",t,e,n),$("nGramWidths",t,e,n),$("leftPad",t,e,n),$("rightPad",t,e,n),$("padWidth",t,e,n),$("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:o}=r.string.stringSplit($("input",t,e,n),$("delimiter",t,e,n),$("skipEmpty",t,e,n));return[a,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast($("input",t,e,n),$("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $0e=(t,e,n,r=ga)=>{switch(t.op){case"Cast":return[r.cast($("x",t,e,n),$("dtype",t,e,n))];case"ExpandDims":{const a=$("axis",t,e,n);return[r.expandDims($("x",t,e,n),a)]}case"Squeeze":{const a=$("axis",t,e,n);return[r.squeeze($("x",t,e,n),a)]}case"Reshape":return[r.reshape($("x",t,e,n),$("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad($("x",t,e,n),$("padding",t,e,n),$("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad($("x",t,e,n),$("padding",t,e,n),$("constantValue",t,e,n))];case"SpaceToBatchND":{const a=$("blockShape",t,e,n),i=$("paddings",t,e,n);return[r.spaceToBatchND($("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=$("blockShape",t,e,n),i=$("crops",t,e,n);return[r.batchToSpaceND($("x",t,e,n),a,i)]}case"DepthToSpace":{const a=$("blockSize",t,e,n),i=$("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace($("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo($("x",t,e,n),$("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs($("s0",t,e,n),$("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v7(t,e,n,r,a=qt){const i=((o,s,l)=>{switch(o.category){case"arithmetic":return a(()=>s0e(o,s,l));case"basic_math":return a(()=>l0e(o,s,l));case"control":return f0e(o,s,l);case"convolution":return a(()=>g0e(o,s,l));case"creation":return a(()=>m0e(o,s,l));case"dynamic":return y0e(o,s,l);case"evaluation":return a(()=>b0e(o,s,l));case"image":return a(()=>k0e(o,s,l));case"graph":return a(()=>v0e(o,s,l));case"logical":return a(()=>S0e(o,s,l));case"matrices":return a(()=>C0e(o,s,l));case"normalization":return a(()=>E0e(o,s,l));case"reduction":return a(()=>I0e(o,s,l));case"slice_join":return a(()=>T0e(o,s,l));case"sparse":return a(()=>N0e(o,s,l));case"spectral":return a(()=>_0e(o,s,l));case"string":return a(()=>R0e(o,s,l));case"transformation":return a(()=>$0e(o,s,l));case"hash_table":return w0e(o,s,l,r);case"custom":const u=p7(o.op);if(u&&u.customExecutor)return u.customExecutor(new o0e(o,s,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Kc(i)?i.then(o=>[].concat(o)):[].concat(i)}class x7{constructor(e={},n={},r={},a={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w7(t,e,n,r){const a=new Set,i=[];let o=null,s=null;const l=new Set,u=Object.keys(t).map(p=>mi(p)[0]);let c=[];r!=null&&(c=r.map(p=>mi(p.name)[0]));const d=[...e];for(;d.length>0;){const p=d.pop();if((k7(p)||D0e(p)||L0e(p))&&o==null&&(o=p,s=o.children.map(f=>f.name).filter(f=>a.has(f))),a.add(p.name),n[p.name]==null&&u.indexOf(p.name)===-1&&c.indexOf(p.name)===-1){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function O0e(t,e,n){const{usedNodes:r,inputs:a}=n,i=[],o=Object.keys(a).map(c=>mi(c)[0]).map(c=>t.nodes[c]),s=t.initNodes;o.forEach(c=>{r.has(c.name)&&i.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&i.push(c)}),s?.forEach(c=>{r.has(c.name)&&i.push(c)});const l=new Set,u=[];for(;i.length>0;){const c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(d=>{!l.has(d.name)&&r.has(d.name)&&d.inputs.every(p=>l.has(p.name))&&i.push(d)})}return u}const M0e=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],P0e=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],A0e=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function k7(t){return M0e.indexOf(t.op)>=0}function D0e(t){return P0e.indexOf(t.op)>=0}function L0e(t){return A0e.indexOf(t.op)>=0}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class q2{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new q2(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,n){const r=w7(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(a.length>0){const s=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${a}]`)}return O0e(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[mi(d)[0]]),i=n.map(d=>mi(d)[0]);let o=i.map(d=>this.graph.nodes[d]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const s=this.getCompilationKey(a,o);let l=this.compiledMap.get(s);l==null&&(l=this.compile(e,o),this.compiledMap.set(s,l));const u={},c={};return qt(()=>{const d=new x7(this.weightMap,u,c,this.functionExecutorMap),p=Object.assign({},this.weightMap);Object.keys(e).forEach(y=>{const[v,b]=mi(y),x=[];x[b]=e[y],p[v]=x});const f=this.getFrozenTensorIds(p),m={};for(let y=0;y<l.length;y++){const v=l[y];if(!p[v.name]){const b=v7(v,p,d,this._resourceManager);if(Kc(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);p[v.name]=b,this.checkTensorForDisposal(v.name,v,p,d,f,i,m)}}return this.parent==null&&d.dispose(f),n.map(y=>Pa(y,p,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,o,s){n.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(s[l.id]=(s[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=xme(l.name,r,a);u?.forEach(c=>{if(c&&!c.kept&&!i.has(c.id)){const d=s[c.id];if(d===1){if(!this.keepTensorForDebug)c.dispose();else{const[p,f]=Cs(n.name,a);this.intermediateTensors[p]?this.intermediateTensors[p][f]=c:(this.intermediateTensors[p]=[],this.intermediateTensors[p][f]=c)}delete s[c.id]}else d!=null&&s[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(n=>{n&&!n.kept&&!n.isDisposed&&!this.keepIds.has(n.id)&&n.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,a={},i={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new x7(this.weightMap,a,i,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,n,r);const s=n.map(c=>Pa(c,this.tensorsMap,o)),l=s.map(c=>c.id),u=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...l,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,n,r){const a=e.reduce((i,o,s)=>(i[this.inputs[s].name]=o,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[mi(w)[0]]),s=r.map(w=>mi(w)[0]);let l=s.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:p}=w7(e,l,this.weightMap,this._initNodes),f=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[S,C]=mi(w),E=[];E[C]=e[w],m[S]=E});const y={},v=this.getFrozenTensorIds(m),b={};for(;f.length>0;){const w=this.processStack(o,f,n,m,b,v,s,y,u);await Promise.all(w)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const x=l.filter(w=>!k7(w)&&!Pa(w.name,m,n)).map(w=>w.name);if(x.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${x}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${w}`)}return m}processStack(e,n,r,a,i,o,s,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&$("isConstant",d.node,a,r)&&([p]=Cs(d.node.name,r)),a[d.node.name]==null){const f=v7(d.node,a,r,this._resourceManager);p||([p]=Cs(d.node.name,r));const m=r.currentContext;Kc(f)?c.push(f.then(y=>(a[p]=y,r.currentContext=m,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u),y))):(a[p]=f,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u))}else this.processChildNodes(d.node,n,r,a,i,u)}return c}processChildNodes(e,n,r,a,i,o){e.children.forEach(s=>{const[l]=Cs(s.name,r);i[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(u=>!!Pa(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(u=>!!Pa(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=mi(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);V(s,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&V(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const a=this._signature.inputs[r];n[a.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=mi(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=mi(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class F0e{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B0e="?tfjs-format=file",z0e="model.json";class j0e{constructor(e,n={},r=qT){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new F0e}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Kc(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new q2(h7.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=h7.Instance.transformGraph(e.modelInitializer);this.initializer=new q2(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const a=r instanceof qn?[r]:r,i={};return a.forEach((o,s)=>i[this.structuredOutputKeys[s]]=o),i}return r}normalizeInputs(e){if(!(e instanceof qn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,a)=>(n[r]=e[a],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function V0e(t,e={},n=qT){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=U0e(t));const r=new j0e(t,e,n);return await r.load(),r}function U0e(t){return t.endsWith("/")||(t=t+"/"),`${t}${z0e}${B0e}`}/**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function e2(t,e,n,r){return new(n||(n=Promise))(function(a,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?a(u.value):new n(function(c){c(u.value)}).then(o,s)}l((r=r.apply(t,e||[])).next())})}function t2(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(c[0]===6&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var W0e="https://tfhub.dev/tensorflow/tfjs-model/deeplab",G0e=513,P4={ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},A4={PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H0e(t,e){return""+W0e+"/"+(e===4?t+"/1/default/1/model.json":t+"/1/quantized/"+e+"/1/model.json")+"?tfjs-format=file"}function q0e(t){if(t==="pascal")return P4.PASCAL;if(t==="ade20k")return P4.ADE20K;if(t==="cityscapes")return P4.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function K0e(t){if(t==="pascal")return A4.PASCAL;if(t==="ade20k")return A4.ADE20K;if(t==="cityscapes")return A4.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function X0e(t,e,n,r){return e2(this,void 0,void 0,function(){var a,i,o,s,l,u,c,d,p,f,m,y,v,b;return t2(this,function(x){switch(x.label){case 0:if(t.length<e.length)throw new Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+t.length+", but there are "+e.length+" labels.");return a=n.shape,i=a[0],o=a[1],s=Ct([i,o,3],"int32"),[4,n.array()];case 1:for(l=x.sent(),u=new Set,c=0;c<i;++c)for(d=0;d<o;++d)b=l[c][d],u.add(b),s.set(t[b][0],c,d,0),s.set(t[b][1],c,d,1),s.set(t[b][2],c,d,2);return p=s.toTensor(),[4,iL(p,r)];case 2:for(f=x.sent(),pa(p),m={},y=0,v=Array.from(u);y<v.length;y++)b=v[y],m[e[b]]=t[b];return[2,{legend:m,segmentationMap:f}]}})})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y0e(t){return t===void 0&&(t={base:"pascal",quantizationBytes:2}),e2(this,void 0,void 0,function(){var e;return t2(this,function(n){switch(n.label){case 0:if(yme==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t.base){if(["pascal","cityscapes","ade20k"].indexOf(t.base)===-1)throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if([1,2,4].indexOf(t.quantizationBytes)===-1)throw new Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!t.modelUrl)throw new Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,V0e(t.modelUrl||H0e(t.base,t.quantizationBytes))];case 1:return e=n.sent(),[2,new Q0e(e,t.base)]}})})}var Q0e=function(){function t(e,n){this.model=e,this.base=n}return t.prototype.predict=function(e){var n=this;return qt(function(){var r=zn(function(a){return qt(function(){var i=a instanceof qn?a:oL(a),o=i.shape,s=o[0],l=o[1],u=G0e/Math.max(l,s),c=Math.round(s*u),d=Math.round(l*u);return xl(QN.resizeBilinear(i,[c,d]))})}(e),"int32");return qm(n.model.execute(r))})},t.prototype.segment=function(e,n){return n===void 0&&(n={}),e2(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,d,p,f=this;return t2(this,function(m){switch(m.label){case 0:if(!(n.colormap&&n.labels||this.base))throw new Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return n.colormap&&n.labels||(n.colormap=q0e(this.base),n.labels=K0e(this.base)),r=n.colormap,a=n.labels,i=n.canvas,o=qt(function(){return f.predict(e)}),s=o.shape,l=s[0],u=s[1],[4,X0e(r,a,o,i)];case 1:return c=m.sent(),d=c.legend,p=c.segmentationMap,pa(o),[2,{legend:d,height:l,width:u,segmentationMap:p}]}})})},t.prototype.dispose=function(){return e2(this,void 0,void 0,function(){return t2(this,function(e){return this.model&&this.model.dispose(),[2]})})},t}();/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function We(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Z0e=Dw;class K2 extends kv{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Y3(this,yl())}nextDataId(){return K2.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&Di(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&gs(r[0])){const i=r.map(o=>ms(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return kl(a,i)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>hl(a));return Ct(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ct(e.shape,e.dtype,n)}makeOutput(e,n,r){return yl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=pi();return e(),{kernelMs:pi()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){We([e],"where");const n=this.readSync(e.dataId);return Z0e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}K2.nextDataId=0;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S7(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const J0e=t=>{const{x:e}=t.inputs,n=t.backend;We(e,"abs");let r=new Float32Array(be(e.shape));const a=n.data.get(e.dataId).values;return r=S7(a),n.makeOutput(r,e.shape,e.dtype)},e1e={kernelName:Nv,backendName:"cpu",kernelFunc:J0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xr(t){return(e,n,r,a,i)=>{const o=jt(e,n),s=o.length,l=Ze(o),u=be(o),c=Tr(i,u),d=e.length,p=n.length,f=Ze(e),m=Ze(n),y=nd(e,o),v=nd(n,o);if(y.length+v.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=qc(b,s,l),w=x.slice(-d);y.forEach(_=>w[_]=0);const S=Uo(w,d,f),C=x.slice(-p);v.forEach(_=>C[_]=0);const E=Uo(C,p,m);c[b]=t(r[S],a[E])}return[c,o]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yi(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}const t1e={kernelName:zv,backendName:"cpu",kernelFunc:yi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function n2(t,e,n="float32"){if(n==="complex64"){const a=n2(t,e,"float32"),i=n2(t,e,"float32");return yi({inputs:{real:a,imag:i},backend:t})}const r=Yr(be(e),n);return t.makeTensorInfo(e,n,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Es(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const n1e={kernelName:Vg,backendName:"cpu",kernelFunc:Es};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cd(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const r1e={kernelName:Fx,backendName:"cpu",kernelFunc:cd};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C7(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=Cu([0],n),[i,o]=xr((s,l)=>s!==l?1:0)(e,[],t,a,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Du(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Es({inputs:{x:a},backend:n});const c=n2(n,a.shape,a.dtype),d=Du({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),p=yi({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),p}if(a.dtype==="complex64"){const c=cd({inputs:{input:a},backend:n}),d=Du({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!J3(a.dtype,i)){const c=Es({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const o=n.data.get(a.dataId).values,[s,l,u]=C7(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}const a1e={kernelName:Tg,backendName:"cpu",kernelFunc:Du};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jr(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;We([o,s],t);const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=o.dtype==="string"?ud(u):u,p=o.dtype==="string"?ud(c):c,f=r||o.dtype,[m,y]=e(o.shape,s.shape,d,p,f);return l.makeTensorInfo(y,f,m)}:({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;if(o.dtype==="complex64"||s.dtype==="complex64"){const u=Du({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,p=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,m=l.data.get(p.dataId).values,y=Du({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(y.dataId),b=v.complexTensorInfos.real,x=v.complexTensorInfos.imag,w=l.data.get(b.dataId).values,S=l.data.get(x.dataId).values,[C,E,_]=n(o.shape,s.shape,f,m,w,S),N=l.makeTensorInfo(_,"float32",C),M=l.makeTensorInfo(_,"float32",E),P=yi({inputs:{real:N,imag:M},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(M),P}else{const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=r||o.dtype,[p,f]=e(o.shape,s.shape,u,c,d);return l.makeTensorInfo(f,d,p)}}}function D4(t){return(e,n,r,a,i,o)=>{const s=jt(e,n),l=be(s),u=s.length,c=Ze(s),d=Tr("float32",l),p=Tr("float32",l),f=nd(e,s),m=nd(n,s),y=kl(r,a),v=kl(i,o),b=e.length,x=Ze(e),w=n.length,S=Ze(n);if(f.length+m.length===0)for(let C=0;C<d.length;C++){const E=C%y.length,_=C%v.length,N=t(y[E*2],y[E*2+1],v[_*2],v[_*2+1]);d[C]=N.real,p[C]=N.imag}else for(let C=0;C<d.length;C++){const E=qc(C,u,c),_=E.slice(-b);f.forEach(j=>_[j]=0);const N=Uo(_,b,x),M=E.slice(-w);m.forEach(j=>M[j]=0);const P=Uo(M,w,S),L=t(y[N*2],y[N*2+1],v[P*2],v[P*2+1]);d[C]=L.real,p[C]=L.imag}return[d,p,s]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E7=xr((t,e)=>t+e),i1e=D4((t,e,n,r)=>({real:t+n,imag:e+r})),ih=jr(Fp,E7,i1e),o1e={kernelName:Fp,backendName:"cpu",kernelFunc:ih};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function L4(t,e,n,r,a){const i=be(r),o=Yr(a,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?o[l]+=e[s]:o[l]+=1)}return o}function I7(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],o=Ct([a,n],e.dtype);for(let s=0;s<a;s++)for(let l=0;l<i;l++){const u=t.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):e.size>0?o.set(o.get(s,u)+e.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lu(t){return(e,n,r)=>{const a=Tr(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hn(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(We(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=be(o.shape),c=n||o.dtype,d=Nr(c,u);for(let p=0;p<u;++p)d[p]=e(l[p],a);return s.makeTensorInfo(o.shape,c,d)}}function oh(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(We(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,a);return s.makeTensorInfo(o.shape,u,c)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T7=Lu(t=>Math.ceil(t)),s1e=oh(Ng,T7),l1e={kernelName:Ng,backendName:"cpu",kernelFunc:s1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N7(t,e,n,r){const a=Nr(n,be(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const s=be(o.shape);a.set(o.vals,i),i+=s})}else{let i=0;t.forEach(o=>{const s=n==="string"?ud(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<o.shape[1];++d)a[c+d]=s[l++]}i+=o.shape[1]})}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _7=xr((t,e)=>t===e?1:0),R7=jr(Ag,_7,null,"bool"),u1e={kernelName:Ag,backendName:"cpu",kernelFunc:R7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $7=Lu(t=>Math.exp(t)),O7=oh(Dg,$7,"float32"),c1e={kernelName:Dg,backendName:"cpu",kernelFunc:O7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M7=Lu(t=>Math.expm1(t)),d1e=oh(Lg,M7),p1e={kernelName:Lg,backendName:"cpu",kernelFunc:d1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P7=Lu(t=>Math.floor(t)),h1e=oh(Fg,P7),f1e={kernelName:Fg,backendName:"cpu",kernelFunc:h1e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function A7(t,e,n,r,a,i,o,s,l){const u=Ct([r,i],n);for(let c=0;c<r;c++){const d=[];let p=0;for(let f=0;f<a;f++){const m=t[c*a+f];p+=m*o[f],d.push(m)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let f=0;f<i;f++)u.values[c*i+f]=e.get(...e.indexToLoc(p*i+f))}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D7(t,e,n){const r=Ct(n,t.dtype);for(let a=0;a<r.size;++a){const i=r.indexToLoc(a).slice(),o=i[0],s=i[2],l=e.locToIndex([o,s]);i[2]=e.values[l];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[a]=t.values[u])}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const L7=xr((t,e)=>t>e?1:0),g1e=jr(zg,L7,null,"bool"),m1e={kernelName:zg,backendName:"cpu",kernelFunc:g1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F7=xr((t,e)=>t>=e?1:0),y1e=jr(jg,F7,null,"bool"),b1e={kernelName:jg,backendName:"cpu",kernelFunc:y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B7=xr((t,e)=>t<e?1:0),v1e=jr(Hg,B7,null,"bool"),x1e={kernelName:Hg,backendName:"cpu",kernelFunc:v1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z7=xr((t,e)=>t<=e?1:0),w1e=jr(qg,z7,null,"bool"),k1e={kernelName:qg,backendName:"cpu",kernelFunc:w1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j7(t,e,n){const r=(e-t)/(n-1),a=Yr(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const V7=Lu(t=>Math.log(t)),S1e=oh(Kg,V7),C1e={kernelName:Kg,backendName:"cpu",kernelFunc:S1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U7(t,e,n,r){const a=Tr(r,be(n));for(let i=0;i<a.length;++i){const o=i*e;let s=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>s)&&(s=u)}a[i]=s}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W7=xr((t,e)=>Math.max(t,e)),E1e=jr(Jg,W7),I1e={kernelName:Jg,backendName:"cpu",kernelFunc:E1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const G7=xr((t,e)=>Math.min(t,e)),T1e=jr(em,G7),N1e={kernelName:em,backendName:"cpu",kernelFunc:T1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F4=xr((t,e)=>t*e),_1e=D4((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),r2=jr(nm,F4,_1e),R1e={kernelName:nm,backendName:"cpu",kernelFunc:r2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H7(t,e,n){const r=pl(-1,n);return F4([],e,r,t,n)}function $1e(t){const{inputs:e,backend:n}=t,{x:r}=e;We(r,"neg");const a=n.data.get(r.dataId).values,[i,o]=H7(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const O1e={kernelName:Ex,backendName:"cpu",kernelFunc:$1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q7=xr((t,e)=>t!==e?1:0),M1e=jr(rm,q7,null,"bool"),P1e={kernelName:rm,backendName:"cpu",kernelFunc:M1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B4(t,e,n,r,a){const i=e.length,o=be(e),s=Ze(e),l=Ze(a),u=Tr(n,be(a));for(let c=0;c<o;++c){const d=qc(c,i,s),p=new Array(d.length);for(let m=0;m<p.length;m++)p[m]=d[r[m]];const f=Uo(p,i,l);u[f]=t[c]}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qa(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;We(a,"transpose");const o=a.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=a.shape[i[c]];const l=r.data.get(a.dataId).values,u=B4(l,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}const A1e={kernelName:Bp,backendName:"cpu",kernelFunc:Qa};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K7(t,e,n,r){const[a,i]=Qr(t,r),o=Ya(e,"int32"),s=Yr(be(a),o),l=be(i);for(let u=0;u<s.length;++u){const c=u*l;let d=1;for(let p=0;p<l;++p)d*=n[c+p];s[u]=d}return{outVals:s,outShape:a,outDtype:o}}function D1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"prod");const s=a.shape.length,l=Yt(i,a.shape),u=pr(l,s);let c=l,d=a;const p=[];u!=null&&(d=Qa({inputs:{x:a},backend:n,attrs:{perm:u}}),p.push(d),c=hr(c.length,s));const f=n.data.get(d.dataId).values,{outVals:m,outShape:y,outDtype:v}=K7(d.shape,d.dtype,f,c);let b=y;return o&&(b=Rr(y,l)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,v,m)}const L1e={kernelName:Px,backendName:"cpu",kernelFunc:D1e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F1e(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=qc(a,e.length,Ze(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function B1e(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function z1e(t,e,n,r){const a=[];let i=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);B1e(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)s[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let p=0;p<n.length;++p){const f=n[p],m=p+e.length-1;if(m>=0){const y=s[m],v=y[y.length-1]-f[c];for(let b=c;b<d;++b)s[m].push(f[b+1]+v)}c=f[c],d=f[d]}d!==c&&(a.push([c,d]),i+=d-c)}return{outSplits:s,valueSlices:a,numValues:i}}function j1e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=Nr("int32",r);e.push(a),t[n].forEach((i,o)=>a[o]=i)}return e}function X7(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function V1e(t,e,n,r,a,i){const o=X7(e,2)[1],s=X7(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)a[l*s+d]=t[c*o+d];++l}}function U1e(t,e,n,r,a){const i=e.slice();i[0]=a;const o=Nr(n,be(i)),s=t.length,l=s===0?0:s/e[0];return V1e(t,e,r,l,o,i),[o,i]}function Y7(t,e,n,r,a,i,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(F1e(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:p}=z1e(i,o,t,u),f=j1e(c),m=U1e(n,r,a,d,p);return[f,m[0],m[1]]}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var yo=qo;class X2{constructor(e,n,r,a,i,o,s,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=B9(c),this.raggedRank=z9(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===yo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===yo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case yo.VALUE_ROWIDS:return X2.getMaxWidthValueRowID(n);case yo.ROW_SPLITS:return X2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${yo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let o=1;o<n;++o){const s=e[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Z7(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;j9(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=F9(this.raggedRank,a,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let o=0;for(let s=0;s<a;++s,o+=n)i.push(o);for(let s=a;s<e;++s)i.push(-1);return V(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,o=[];for(let s=0;s<i-1;++s){const l=e[s+1]-e[s];let u=Math.min(a,l),c=n[s];c===-1&&(u=0);for(let d=0;d<u;++d)o.push(c),c+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,o=[];if(i===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++s,s<a?u+=r:u=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case yo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case yo.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${yo[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case yo.FIRST_DIM_SIZE:return e[0];case yo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case yo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${yo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),n=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let o=r.length-2;o>=0;--o)r[o]=r[o+1]*n[o+1];const a=Z7(n,!1),i=Nr(this.valuesDType,be(a));if(r[0]*n[0]>0){let o=this.calculateFirstParentOutputIndex(e,r[0],n[0]);for(let s=1;s<=this.raggedRank;++s)o=this.calculateOutputIndex(s-1,o,r[s],n[s]);this.setOutput(this.raggedRank,o,i,a)}return[a,i]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,o=r;let s=a.slice();s=s.slice(e+1);const l=be(s),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const m=this.defaultValueShape;qt(()=>{const y=Se(c,m);c=Xp(y,s).dataSync()})}let d=0,p=0,f=0;for(let m=0;m<=u;++m){let y=m<u?n[m]:-1;if(y===f){++f;continue}if(p<f){const v=i.subarray(d*l),b=o.subarray(p*l),x=(f-p)*l;Q7(b,v,x)}if(m>=u){const v=r.length;y=Math.floor(v/l)}if(y>f)if(this.defaultValue.length===1)o.subarray(f*l,y*l).fill(this.defaultValue[0]),f=y;else for(;y>f;){const v=o.slice(f*l);Q7(v,c,l),++f}y<0?(d=m+1,p=f):(d=m,p=f,f=p+1)}}}function Q7(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function Z7(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function J7(t,e,n,r,a,i,o,s,l,u){return new X2(t,e,n,r,a,i,o,s,l,u).compute()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eB(t,e,n,r){const a=t===e,i=t<e&&n<0,o=e<t&&n>1;if(a||i||o)return Yr(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=Yr(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tB=Lu(t=>1/Math.sqrt(t)),W1e=oh(um,tB),G1e={kernelName:um,backendName:"cpu",kernelFunc:W1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sh(t,e,n,r,a,i,o,s,l,u){const c=[r/a,a],d=t.values,p=e.values;if(r===0)return Ct(n,e.dtype);const f=Ct(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let m=0;m<i;m++){const y=[];let v=0;for(let b=0;b<o;b++){const x=d[m*o+b];y.push(x),v+=x*s[b]}if(v<0||v>=r/a)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let b=0;b<a;b++)u?f.values[v*a+b]+=p[m*a+b]:f.values[v*a+b]=e.rank===0?p[0]:p[m*a+b]}return f}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const H1e=Lu(t=>1/(1+Math.exp(-t))),nB=hn(fm,t=>1/(1+Math.exp(-t))),q1e={kernelName:fm,backendName:"cpu",kernelFunc:nB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rB(t,e,n,r,a){const i=nN(r,e,n),o=be(n),s=Ze(r);if(i){const d=rN(e,s);return a==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=a==="string"?ud(t):t,u=Ct(r,a,l),c=Ct(n,a);for(let d=0;d<c.size;++d){const p=c.indexToLoc(d),f=p.map((m,y)=>m+e[y]);c.set(u.get(...f),...p)}return a==="string"?u7(c.values):c.values}function dd(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r;We(a,"slice");const[s,l]=aN(a,i,o);eN(a,s,l);const u=n.data.get(a.dataId).values,c=rB(u,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const K1e={kernelName:Hx,backendName:"cpu",kernelFunc:dd};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aB(t,e,n,r,a,i,o){const s=e[0],l=i[0],u=new Array(l),c=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(Y9(s));const v=Nr(n,0),b=Nr(a,0);return[v,[0,d],b,u,c]}let p=!0,f=0;const m=new Array(l).fill(0);for(let v=0;v<s;++v){const b=t[v*d];if(b<0)throw new Error(Q9(v,b));if(b>=l)throw new Error(Z9(v,b,l));++m[b],p=p&&b>=f,f=b}let y=!0;for(let v=0;v<l;++v){const b=m[v]===0;u[v]=b,y=y&&!b,m[v]=Math.max(m[v],1),v>0&&(m[v]+=m[v-1])}if(y&&p){const v=t,b=r;for(let x=0;x<s;++x)c[x]=x;return[v,[s,d],b,u,c]}else{const v=m[l-1],b=Nr(n,v*d),x=Nr(a,v),w=new Array(l).fill(0);for(let S=0;S<s;++S){const C=t[S*d],E=w[C],_=(C===0?0:m[C-1])+E;w[C]++;for(let N=0;N<d;++N)b[_*d+N]=t[S*d+N];x[_]=r[S],c[S]=_}for(let S=0;S<l;++S)if(w[S]===0){const C=S===0?0:m[S-1];b[C*d+0]=S;for(let E=1;E<d;++E)b[C*d+E]=0;x[C]=o}return[b,[v,d],x,u,c]}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iB(t,e,n,r,a){const i=be(r),o=e[0],s=a.length,l=[];let u=1,c=-1;for(let y=0;y<s;++y){const v=a[y];if(v===-1){if(c!==-1)throw new Error(J9(c,y));c=y,l.push(1)}else{if(v<0)throw new Error(e7(y,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(t7());const y=Math.trunc(i/u);if(u*y!==i)throw new Error(n7(r,l));l[c]=y}if(be(l)!==i)throw new Error(r7(r,l));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let y=d-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const f=[];if(s>0){f[s-1]=1;for(let y=s-2;y>=0;--y)f[y]=f[y+1]*l[y+1]}const m=Nr(n,o*s);for(let y=0;y<o;++y){let v=0;for(let b=0;b<d;++b)v+=t[y*d+b]*p[b];for(let b=0;b<s;++b)m[y*s+b]=Math.trunc(v/f[b]),v%=f[b]}return[m,[o,s],l]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function z4(t,e,n,r,a,i=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error(v4());const d=e.slice();d[0]=c;const p=d.reduce((x,w)=>x*w,1),f=Nr(n,p);if(s===0)return c>0&&f.fill(o),[f,d];if(c<=0)throw new Error(v4());let m=0,y=1,v=0,b=a[m];for(;;){let x=0;if(y<s){if(x=a[y],b===x){++y;continue}if(b>=x)throw new Error(a7())}if(b<0||b>=c)throw new Error(i7(b,c));b>v&&f.fill(o,v*u,b*u);for(let w=m;w<y;++w){const S=r[w];if(S<0||S>=l[0])throw new Error(o7(w,r[w],l[0]));for(let C=0;C<u;C++)f[b*u+C]+=t[S*u+C]}if(i)for(let w=0;w<u;w++)f[b*u+w]/=y-m;if(m=y,++y,v=b+1,b=x,y>s)break}return v<c&&f.fill(o,v*u,c*u),[f,d]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const X1e=Lu(t=>Math.sqrt(t)),Y1e=hn(mm,t=>Math.sqrt(t)),Q1e={kernelName:mm,backendName:"cpu",kernelFunc:Y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oB=xr((t,e)=>{const n=t-e;return n*n}),Z1e=jr(ym,oB),J1e={kernelName:ym,backendName:"cpu",kernelFunc:Z1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sB(t,e,n,r){const a=Ct(t,e.dtype);for(let i=0;i<a.size;i++){const o=a.indexToLoc(i),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];a.set(e.get(...s),...o)}return a}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class eye{constructor(e,n,r,a,i,o){this.separator=ms(e),this.nGramWidths=n,this.leftPad=ms(r),this.rightPad=ms(a),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,o){for(let s=0;s<i;++s){const l=this.getPadWidth(o),u=Math.max(0,l-s),c=Math.max(0,l-(i-(s+1))),d=o-(u+c),p=n+(u>0?0:s-l);let f=0;f+=u*this.leftPad.length;for(let x=0;x<d;++x)f+=e[p+x].length;f+=c*this.rightPad.length;const m=u+c+d-1;f+=m*this.separator.length,r[a+s]=new Uint8Array(f);const y=r[a+s];let v=0;const b=x=>x.forEach(w=>y[v++]=w);for(let x=0;x<u;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(e[p+x]),b(this.separator);if(d>0){b(e[p+d-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<a;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=a-1,o=Nr("int32",a);if(r===0||a===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const s=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],f=this.getNumNGrams(p,d);this.createNGrams(e,u,s,c,f,d),c+=f}),this.preserveShort&&c===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,u,s,c,1,p)}}return[s,o]}}function lB(t,e,n,r,a,i,o,s){return new eye(n,r,a,i,o,s).compute(t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tye(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(a,i);(!n||o.length!==0)&&r.push(o),a=i+1}}function uB(t,e,n){const r=t.length,a=[];let i=0,o=0;const s=new Array(r);for(let p=0;p<r;++p){const f=a.length;tye(t[p],e,n,a);const m=a.length-f;s[p]=m,i+=m,o=Math.max(o,m)}const l=Nr("int32",i*2),u=new Array(i),c=[r,o];let d=0;for(let p=0;p<r;++p)for(let f=0;f<s[p];++f)l[d*2]=p,l[d*2+1]=f,u[d]=a[d],++d;return[l,u,c]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cB(t,e){const n=Nr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=_8(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dB=xr((t,e)=>t-e),nye=D4((t,e,n,r)=>({real:t-n,imag:e-r})),j4=jr(bm,dB,nye),rye={kernelName:bm,backendName:"cpu",kernelFunc:j4};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pB(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=Ct(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const s=t.locToIndex(o);r.values[a]=t.values[s]}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jm=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function hB(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(s-c)/s)*Math.sign(l-s/2),p=Math.max(n,Math.floor(e-l*c/s+d)),f=Math.min(r,Math.floor(e+(s-l)*c/s+d));hB(t,e,p,f)}const a=t[e];let i=n,o=r;for(ul(t,n,e),Jm(t[r],a)>0&&ul(t,n,r);i<o;){for(ul(t,i,o),i++,o--;Jm(t[i],a)<0;)i=i+1;for(;Jm(t[o],a)>0;)o=o-1}Jm(t[n],a)===0?ul(t,n,o):(o=o+1,ul(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function fB(t,e,n,r,a){const i=e[e.length-1],[o,s]=[t.length/i,i],l=Tr(n,o*r),u=Tr("int32",o*r);for(let d=0;d<o;d++){const p=d*s,f=t.subarray(p,p+s);let m=new Array(f.length);f.forEach((x,w)=>m[w]={value:x,index:w}),r<m.length&&(hB(m,r),m=m.slice(0,r)),a&&m.sort(Jm);const y=d*r,v=l.subarray(y,y+r),b=u.subarray(y,y+r);for(let x=0;x<r;x++)v[x]=m[x].value,b[x]=m[x].index}const c=e.slice();return c[c.length-1]=r,[Ct(c,n,l),Ct(c,"int32",u)]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gB(t,e,n,r){const a=Yt(e,n)[0],i=[1,n[0],1];for(let m=0;m<a;m++)i[0]*=n[m];i[1]=n[a];for(let m=a+1;m<n.length;m++)i[2]*=n[m];const o={},s=new Int32Array(n[a]),l=new _r(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let m=0;m<n[a];m++){let y;if(c)y=t[m].toString();else{const v=[];for(let b=0;b<i[0];b++)for(let x=0;x<i[2];x++)v.push(l.get(b,m,x));y=v.join(",")}if(o[y]!==void 0)s[m]=o[y];else{const v=Object.keys(o).length;o[y]=v,s[m]=v,u.push(m)}}const d=i.slice();d[1]=Object.keys(o).length;const p=new _r(d,r);u.forEach((m,y)=>{for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)p.set(l.get(v,m,b),v,y,b)});const f=n.slice();return f[a]=d[1],{outputValues:p.values,outputShape:f,indices:s}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aye=Object.freeze(Object.defineProperty({__proto__:null,addImpl:E7,bincountImpl:L4,bincountReduceImpl:I7,castImpl:C7,ceilImpl:T7,concatImpl:N7,equalImpl:_7,expImpl:$7,expm1Impl:M7,floorImpl:P7,gatherNdImpl:A7,gatherV2Impl:D7,greaterEqualImpl:F7,greaterImpl:L7,lessEqualImpl:z7,lessImpl:B7,linSpaceImpl:j7,logImpl:V7,maxImpl:U7,maximumImpl:W7,minimumImpl:G7,multiplyImpl:F4,negImpl:H7,notEqualImpl:q7,prodImpl:K7,raggedGatherImpl:Y7,raggedTensorToTensorImpl:J7,rangeImpl:eB,rsqrtImpl:tB,scatterImpl:sh,sigmoidImpl:H1e,simpleAbsImpl:S7,sliceImpl:rB,sparseFillEmptyRowsImpl:aB,sparseReshapeImpl:iB,sparseSegmentReductionImpl:z4,sqrtImpl:X1e,squaredDifferenceImpl:oB,stridedSliceImpl:sB,stringNGramsImpl:lB,stringSplitImpl:uB,stringToHashBucketFastImpl:cB,subImpl:dB,tileImpl:pB,topKImpl:fB,transposeImpl:B4,uniqueImpl:gB},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/KT("cpu",()=>new K2,1);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mB=hn(Mg,t=>t>=0?t:Math.exp(t)-1),iye={kernelName:Mg,backendName:"cpu",kernelFunc:mB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;We([a],"leakyRelu");const o=be(a.shape),s=n.data.get(a.dataId).values,l=Tr("float32",o);for(let u=0;u<s.length;u++)l[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",l)}const oye={kernelName:fx,backendName:"cpu",kernelFunc:yB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sye=xr((t,e)=>t<0?e*t:t);function bB(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;We([r,a],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,l]=sye(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",s)}const lye={kernelName:Mx,backendName:"cpu",kernelFunc:bB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vB=hn(om,t=>Math.max(0,t)),uye={kernelName:om,backendName:"cpu",kernelFunc:vB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xB=hn(sm,t=>Math.min(Math.max(0,t),6)),cye={kernelName:sm,backendName:"cpu",kernelFunc:xB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a2(t,e,n,r,a){if(n==="linear")return Es({inputs:{x:e},backend:t});if(n==="relu")return vB({inputs:{x:e},backend:t});if(n==="elu")return mB({inputs:{x:e},backend:t});if(n==="relu6")return xB({inputs:{x:e},backend:t});if(n==="prelu")return bB({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return yB({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return nB({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nn(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=be(a.shape),s=Z3(i,o),l=be(s);V(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const dye={kernelName:Bx,backendName:"cpu",kernelFunc:Nn};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wB(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;We([a,i],"matMul");const l=a.shape.length,u=i.shape.length,c=o?a.shape[l-2]:a.shape[l-1],d=s?i.shape[u-1]:i.shape[u-2],p=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[u-2]:i.shape[u-1],m=a.shape.slice(0,-2),y=i.shape.slice(0,-2),v=be(m),b=be(y),x=jt(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);V(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[v,c,p]:[v,p,c],S=s?[b,f,d]:[b,d,f],C=Nn({inputs:{x:a},backend:n,attrs:{shape:w}}),E=Nn({inputs:{x:i},backend:n,attrs:{shape:S}}),_=o?C.shape[1]:C.shape[2],N=o?C.shape[2]:C.shape[1],M=s?E.shape[1]:E.shape[2],P=Math.max(v,b),L=n.data.get(C.dataId).values,j=n.data.get(E.dataId).values,B=Ze(C.shape),K=Ze(E.shape),[X,Z,H]=o?[B[0],1,B[1]]:[B[0],B[1],1],[F,Y,Q]=s?[1,K[1],K[0]]:[K[1],1,K[0]],ne=N*M,se=Ct([P,N,M],C.dtype),pe=se.values,de=n.blockSize;for(let ie=0;ie<P;ie++)for(let xe=0;xe<N;xe+=de)for(let q=0;q<M;q+=de)for(let oe=0;oe<_;oe+=de){const he=Math.min(xe+de,N),Ee=Math.min(q+de,M),Ie=Math.min(oe+de,_);for(let _e=xe;_e<he;_e++)for(let Fe=q;Fe<Ee;Fe++){let Xe=0;for(let Oe=oe;Oe<Ie;Oe++){const lt=Math.min(ie,v-1)*X,Je=Math.min(ie,b-1)*Q,nt=L[lt+_e*Z+Oe*H],et=j[Oe*F+Fe*Y+Je];Xe+=nt*et}pe[ie*ne+(_e*M+Fe)]+=Xe}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(x,se.dtype,se.values)}const pye={kernelName:Dv,backendName:"cpu",kernelFunc:wB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hye(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let p,f,m;const y=[];p=wB({inputs:{a,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(f=ih({inputs:{a:p,b:o},backend:n}),y.push(p),p=f),c&&(m=a2(n,p,c,s,d),y.push(p),p=m);for(const v of y)n.disposeIntermediateTensorInfo(v);return p}const fye={kernelName:Sm,backendName:"cpu",kernelFunc:hye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gye=hn(xg,t=>Math.acos(t)),mye={kernelName:xg,backendName:"cpu",kernelFunc:gye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yye=hn(wg,t=>Math.acosh(t)),bye={kernelName:wg,backendName:"cpu",kernelFunc:yye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vye(t){const{inputs:e,backend:n}=t,r=e;We(e,"addN");const a=r.map(s=>n.data.get(s.dataId).values),i=Ct(r[0].shape,r[0].dtype),o=i.values;for(let s=0;s<r.length;s++){const l=a[s];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const xye={kernelName:_v,backendName:"cpu",kernelFunc:vye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"all");const s=Yt(i,a.shape);let l=s;const u=pr(l,a.shape.length);let c=a;u!=null&&(c=Qa({inputs:{x:a},backend:n,attrs:{perm:u}}),l=hr(l.length,a.shape.length)),Zr("all",l,c.shape.length);const[d,p]=Qr(c.shape,l),f=be(p),m=Yr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w&&C}m[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,m);if(o){const b=Rr(d,s),x=Nn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const kye={kernelName:Rv,backendName:"cpu",kernelFunc:wye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"any");const s=Yt(i,a.shape);let l=s;const u=pr(l,a.shape.length);let c=a;u!=null&&(c=Qa({inputs:{x:a},backend:n,attrs:{perm:u}}),l=hr(l.length,a.shape.length)),Zr("any",l,c.shape.length);const[d,p]=Qr(c.shape,l),f=be(p),m=Yr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w||C}m[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,m);if(o){const b=Rr(d,s),x=Nn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const Cye={kernelName:$v,backendName:"cpu",kernelFunc:Sye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Eye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;We(a,"argMax");let o=Yt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Qa({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=hr(o.length,l.shape.length)),o=[o[0]],Zr("argMax",o,l.shape.length);const[c,d]=Qr(l.shape,o),p=be(c),f=Yr(p,"int32"),m=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*m;let x=y[b],w=0;for(let S=0;S<m;++S){const C=y[b+S];C>x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const Iye={kernelName:Ov,backendName:"cpu",kernelFunc:Eye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;We(a,"argMin");let o=Yt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Qa({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=hr(o.length,l.shape.length)),o=[o[0]],Zr("argMin",o,l.shape.length);const[c,d]=Qr(l.shape,o),p=be(c),f=Yr(p,"int32"),m=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*m;let x=y[b],w=0;for(let S=0;S<m;++S){const C=y[b+S];C<x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const Nye={kernelName:Mv,backendName:"cpu",kernelFunc:Tye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _ye=hn(kg,t=>Math.asin(t)),Rye={kernelName:kg,backendName:"cpu",kernelFunc:_ye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $ye=hn(Sg,t=>Math.asinh(t)),Oye={kernelName:Sg,backendName:"cpu",kernelFunc:$ye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mye=hn(Cg,t=>Math.atan(t)),Pye={kernelName:Cg,backendName:"cpu",kernelFunc:Mye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Aye=xr((t,e)=>Math.atan2(t,e)),Dye=jr(Ig,Aye),Lye={kernelName:Ig,backendName:"cpu",kernelFunc:Dye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fye=hn(Eg,t=>Math.atanh(t)),Bye={kernelName:Eg,backendName:"cpu",kernelFunc:Fye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function V4(t,e,n,r,a,i){const o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Ct(a.outShape,n),v=y.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,E=S*r[0];for(let _=0;_<a.inChannels;++_)for(let N=0;N<a.outHeight;++N){const M=N*o-p,P=Math.max(0,M),L=Math.min(a.inHeight,c+M),j=C+N*x;for(let B=0;B<a.outWidth;++B){const K=B*s-f,X=Math.max(0,K),Z=Math.min(a.inWidth,d+K);let H=m,F=0,Y=0;for(let ne=P;ne<L;ne+=l){const se=E+ne*r[1];for(let pe=X;pe<Z;pe+=u){const de=se+pe*r[2],ie=t[de+_];i==="max"&&ie>H?H=ie:i==="avg"&&(F+=ie,Y++)}if(isNaN(H))break}const Q=j+B*w+_;v[Q]=i==="avg"?F/Y:H}}}return y}function kB(t,e,n,r,a=!1,i=!1){const o=Ct(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,m=r.padInfo.left,y=Ct(e,n,t);for(let v=0;v<r.batchSize;++v)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*s-f;let S=w;for(;S<0;)S+=u;const C=Math.min(r.inHeight,d+w);for(let E=0;E<r.outWidth;++E){const _=E*l-m;let N=_;for(;N<0;)N+=c;const M=Math.min(r.inWidth,p+_);let P=Number.NEGATIVE_INFINITY,L=-1;for(let j=S;j<C;j+=u){const B=j-w;for(let K=N;K<M;K+=c){const X=K-_,Z=y.get(v,j,K,b);Z>P&&(P=Z,a?L=i?((v*r.inHeight+j)*r.inWidth+K)*r.inChannels+b:(j*r.inWidth+K)*r.inChannels+b:L=B*p+X)}}o.set(L,v,x,E,b)}}return o}function SB(t,e,n,r,a,i){const o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,m=a.effectiveFilterWidth,y=a.padInfo.front,v=a.padInfo.top,b=a.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Ct(a.outShape,n),S=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],_=a.outShape[3]*a.outShape[4],N=a.outShape[4];for(let M=0;M<a.batchSize;++M){const P=M*C,L=M*r[0];for(let j=0;j<a.inChannels;++j)for(let B=0;B<a.outDepth;++B){const K=B*o-y;let X=K;for(;X<0;)X+=u;const Z=Math.min(a.inDepth,p+K),H=P+B*E;for(let F=0;F<a.outHeight;++F){const Y=F*s-v;let Q=Y;for(;Q<0;)Q+=c;const ne=Math.min(a.inHeight,f+Y),se=H+F*_;for(let pe=0;pe<a.outWidth;++pe){const de=pe*l-b;let ie=de;for(;ie<0;)ie+=d;const xe=Math.min(a.inWidth,m+de),q=se+pe*N;let oe=x,he=0,Ee=0;for(let _e=X;_e<Z;_e+=u){const Fe=L+_e*r[1];for(let Xe=Q;Xe<ne;Xe+=c){const Oe=Fe+Xe*r[2];for(let lt=ie;lt<xe;lt+=d){const Je=Oe+lt*r[3],nt=t[Je+j];if(i==="max"&&nt>oe?oe=nt:i==="avg"&&(he+=nt,Ee++),isNaN(oe))break}if(isNaN(oe))break}if(isNaN(oe))break}const Ie=q+j;S[Ie]=i==="avg"?he/Ee:oe}}}}return w}function zye(t,e){const n=Ct(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,m=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let b=0;b<e.outDepth;++b){const x=b*r-p;let w=x;for(;w<0;)w+=o;const S=Math.min(e.inDepth,u+x);for(let C=0;C<e.outHeight;++C){const E=C*a-f;let _=E;for(;_<0;)_+=s;const N=Math.min(e.inHeight,c+E);for(let M=0;M<e.outWidth;++M){const P=M*i-m;let L=P;for(;L<0;)L+=l;const j=Math.min(e.inWidth,d+P);let B=Number.NEGATIVE_INFINITY,K=-1;for(let X=w;X<S;X+=o){const Z=X-x;for(let H=_;H<N;H+=s){const F=H-E;for(let Y=L;Y<j;Y+=l){const Q=Y-P,ne=t.get(y,X,H,Y,v);ne>=B&&(B=ne,K=Z*c*d+F*c+Q)}}}n.set(K,y,b,C,M,v)}}}return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;We(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ha(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=co(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&xn(c.inShape,c.outShape))d=Es({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=Ze(a.shape),m=V4(p,a.shape,a.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return d}const Vye={kernelName:Pv,backendName:"cpu",kernelFunc:jye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;We(a,"avgPool3d");const c=bl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=SB(d,a.shape,a.dtype,Ze(a.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const Wye={kernelName:Av,backendName:"cpu",kernelFunc:Uye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;We([a,i],"avgPool3DGrad");const c=bl(i.shape,o,s,1,l,u),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.filterDepth,y=c.filterHeight,v=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,_=S-1-c.padInfo.front,N=E-1-c.padInfo.left,M=C-1-c.padInfo.top,P=Ct(i.shape,"float32"),L=1/(m*y*v),j=n.bufferSync(a);for(let B=0;B<c.batchSize;++B)for(let K=0;K<c.inChannels;++K)for(let X=0;X<c.inDepth;++X)for(let Z=0;Z<c.inHeight;++Z)for(let H=0;H<c.inWidth;++H){const F=X-_,Y=Z-M,Q=H-N;let ne=0;for(let se=0;se<S;se+=b){const pe=(F+se)/d;if(!(pe<0||pe>=c.outDepth||Math.floor(pe)!==pe))for(let de=0;de<C;de+=x){const ie=(Y+de)/p;if(!(ie<0||ie>=c.outHeight||Math.floor(ie)!==ie))for(let xe=0;xe<E;xe+=w){const q=(Q+xe)/f;if(q<0||q>=c.outWidth||Math.floor(q)!==q)continue;const oe=j.get(B,pe,ie,q,K);ne+=oe}}}P.set(ne*L,B,X,Z,H,K)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const Hye={kernelName:oT,backendName:"cpu",kernelFunc:Gye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;We([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=co(o.shape,s,l,1,u),d=c.strideHeight,p=c.strideWidth,f=c.filterHeight,m=c.filterWidth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=Ct(o.shape,"float32"),E=1/(f*m),_=n.data.get(a.dataId).values,N=Ct(a.shape,"float32",_);for(let M=0;M<c.batchSize;++M)for(let P=0;P<c.inChannels;++P)for(let L=0;L<c.inHeight;++L)for(let j=0;j<c.inWidth;++j){const B=L-S,K=j-w;let X=0;for(let Z=0;Z<b;Z+=y){const H=(B+Z)/d;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let F=0;F<x;F+=v){const Y=(K+F)/p;if(Y<0||Y>=c.outWidth||Math.floor(Y)!==Y)continue;const Q=N.get(M,H,Y,P);X+=Q}}C.set(X*E,M,L,j,P)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const Kye={kernelName:iT,backendName:"cpu",kernelFunc:qye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:o,mean:s,variance:l}=e;V(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),We([a,s,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),m=o?n.data.get(o.dataId).values:new Float32Array([0]),y=new Float32Array(c.length),v=m.length,b=f.length,x=p.length,w=d.length;let S=0,C=0,E=0,_=0;for(let N=0;N<c.length;++N)y[N]=m[S++]+(c[N]-d[C++])*f[E++]/Math.sqrt(p[_++]+u),S>=v&&(S=0),C>=w&&(C=0),E>=b&&(E=0),_>=x&&(_=0);return n.makeTensorInfo(a.shape,a.dtype,y)}const Yye={kernelName:ux,backendName:"cpu",kernelFunc:Xye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;We([a],"batchToSpaceND");const s=i.reduce((b,x)=>b*x),l=Xm(a.shape,i,s),u=Ym(l.length,i.length),c=Qm(a.shape,i,s),d=t4(o,i.length),p=n4(c,o,i.length),f=Nn({inputs:{x:a},backend:n,attrs:{shape:l}}),m=Qa({inputs:{x:f},backend:n,attrs:{perm:u}}),y=Nn({inputs:{x:m},backend:n,attrs:{shape:c}}),v=dd({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const Zye={kernelName:Lv,backendName:"cpu",kernelFunc:Qye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=L4(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const ebe={kernelName:Fv,backendName:"cpu",kernelFunc:Jye};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tbe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=jt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const nbe={kernelName:Bv,backendName:"cpu",kernelFunc:tbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rbe=hn(_g,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),abe={kernelName:_g,backendName:"cpu",kernelFunc:rbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ibe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(be(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<s.length;u++){const c=s[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},obe={kernelName:jv,backendName:"cpu",kernelFunc:ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lh(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const sbe={kernelName:hx,backendName:"cpu",kernelFunc:lh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uh(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Yt(a,e[0].shape)[0],o=e.map(y=>y.shape);ZN(o,i);let s=Ss(e.map(y=>y.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(y=>be(y.shape)>0);if(l.length===1)return Es({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(S=>cd({inputs:{input:S},backend:n})),v=l.map(S=>lh({inputs:{input:S},backend:n})),b=uh({inputs:y,backend:n,attrs:{axis:i}}),x=uh({inputs:v,backend:n,attrs:{axis:i}}),w=yi({inputs:{real:b,imag:x},backend:n});return y.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const u=l.map(y=>{const v=[-1,be(y.shape.slice(i))];return Nn({inputs:{x:y},backend:n,attrs:{shape:v}})}),c=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));s=Ss(u.map(y=>y.shape),1);const d=u[0].shape[0]===1,p=N7(c,s,e[0].dtype,d),f=Ss(l.map(y=>y.shape),i),m=n.makeTensorInfo(f,e[0].dtype,p);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const lbe={kernelName:Vv,backendName:"cpu",kernelFunc:uh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;We([a,i],"conv2d");const d=vl(l),p=zr(a.shape,i.shape,o,u,s,c,!1,d),f=p.filterHeight,m=p.filterWidth,y=p.dilationHeight,v=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,w=p.dataFormat==="channelsLast",S=new _r(p.outShape,a.dtype),C=Ze(a.shape),E=Ze(i.shape),_=C[0],N=w?C[1]:C[2],M=w?C[2]:1,P=w?1:C[1],L=S.strides[0],j=w?S.strides[1]:S.strides[2],B=w?S.strides[2]:1,K=w?1:S.strides[1],X=n.data.get(a.dataId).values,Z=n.data.get(i.dataId).values,H=S.values;for(let F=0;F<p.batchSize;++F){const Y=F*_,Q=F*L;for(let ne=0;ne<p.outHeight;++ne){const se=Q+ne*j,pe=ne*p.strideHeight-x;for(let de=0;de<f;++de){const ie=pe+de*y;if(ie<0||ie>=p.inHeight)continue;const xe=de*E[0],q=Y+ie*N;for(let oe=0;oe<p.outWidth;++oe){const he=se+oe*B,Ee=oe*p.strideWidth-b;for(let Ie=0;Ie<m;++Ie){const _e=Ee+Ie*v;if(_e<0||_e>=p.inWidth)continue;const Fe=xe+Ie*E[1],Xe=q+_e*M;let Oe=Fe;for(let lt=0;lt<p.inChannels;++lt){const Je=X[Xe+lt*P];for(let nt=0;nt<p.outChannels;++nt)H[he+nt*K]+=Je*Z[Oe+nt];Oe+=p.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,H)}const ube={kernelName:Uv,backendName:"cpu",kernelFunc:CB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;We([a,i],"conv2dBackpropFilter");const d=vl(l),p=zr(a.shape,c,o,1,s,u,!1,d),{strideHeight:f,strideWidth:m,filterHeight:y,filterWidth:v}=p,b=p.dataFormat==="channelsLast",x=new _r(p.filterShape,"float32"),w=p.padInfo.left,S=p.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,_=new _r(a.shape,a.dtype,C),N=new _r(i.shape,i.dtype,E);for(let M=0;M<y;++M){const P=Math.max(0,Math.ceil((S-M)/f)),L=Math.min(p.outHeight,(p.inHeight+S-M)/f);for(let j=0;j<v;++j){const B=Math.max(0,Math.ceil((w-j)/m)),K=Math.min(p.outWidth,(p.inWidth+w-j)/m);for(let X=0;X<p.inChannels;++X)for(let Z=0;Z<p.outChannels;++Z){let H=0;for(let F=0;F<p.batchSize;++F)for(let Y=P;Y<L;++Y){const Q=M+Y*f-S;for(let ne=B;ne<K;++ne){const se=j+ne*m-w;b?H+=_.get(F,Q,se,X)*N.get(F,Y,ne,Z):H+=_.get(F,X,Q,se)*N.get(F,Z,Y,ne)}}x.set(H,M,j,X,Z)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const dbe={kernelName:Wv,backendName:"cpu",kernelFunc:cbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;We([a,i],"conv2dBackpropInput");const d=Ze(i.shape),p=Ze(a.shape);let f=vl(u);const m=zr(o,i.shape,s,1,l,c,!1,f),y=new _r(m.inShape,"float32"),v=y.values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,[w,S,C]=d,{batchSize:E,filterHeight:_,filterWidth:N,inChannels:M,inHeight:P,inWidth:L,outChannels:j,outHeight:B,outWidth:K,strideHeight:X,strideWidth:Z}=m;f=m.dataFormat;const H=_-1-m.padInfo.top,F=N-1-m.padInfo.left,Y=f==="channelsLast",Q=y.strides[0],ne=Y?y.strides[1]:y.strides[2],se=Y?y.strides[2]:1,pe=Y?1:y.strides[1],de=p[0],ie=Y?p[1]:p[2],xe=Y?p[2]:1,q=Y?1:p[1];for(let oe=0;oe<E;++oe)for(let he=0;he<M;++he)for(let Ee=0;Ee<P;++Ee){const Ie=Ee-H,_e=Math.max(0,Math.ceil(Ie/X)),Fe=Math.min(B,(_+Ie)/X);for(let Xe=0;Xe<L;++Xe){const Oe=Xe-F,lt=Math.max(0,Math.ceil(Oe/Z)),Je=Math.min(K,(N+Oe)/Z);let nt=0;for(let sn=_e;sn<Fe;++sn){const Vt=sn*X-Ie;for(let Qt=lt;Qt<Je;++Qt){const Zt=Qt*Z-Oe,Ot=de*oe+ie*sn+xe*Qt,Et=w*(_-1-Vt)+S*(N-1-Zt)+C*he;for(let jn=0;jn<j;++jn){const Yn=b[Ot+q*jn],ja=x[Et+jn];nt+=Yn*ja}}}const et=Q*oe+ne*Ee+se*Xe+pe*he;v[et]=nt}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const hbe={kernelName:Gv,backendName:"cpu",kernelFunc:pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r;We([a,i],"conv3d");const u=Nu(a.shape,i.shape,o,l,s),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:m,dilationWidth:y,padInfo:v}=u,b=v.front,x=v.left,w=v.top,S=new _r(u.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,_=S.values,N=Ze(a.shape),M=Ze(i.shape);for(let P=0;P<u.batchSize;++P){const L=P*N[0],j=P*S.strides[0];for(let B=0;B<u.outDepth;++B){const K=j+B*S.strides[1],X=B*u.strideDepth-b;for(let Z=0;Z<c;++Z){const H=X+Z*f;if(H<0||H>=u.inDepth)continue;const F=Z*M[0],Y=L+H*N[1];for(let Q=0;Q<u.outHeight;++Q){const ne=K+Q*S.strides[2],se=Q*u.strideHeight-w;for(let pe=0;pe<d;++pe){const de=se+pe*m;if(de<0||de>=u.inHeight)continue;const ie=F+pe*M[1],xe=Y+de*N[2];for(let q=0;q<u.outWidth;++q){const oe=ne+q*u.outChannels,he=q*u.strideWidth-x;for(let Ee=0;Ee<p;++Ee){const Ie=he+Ee*y;if(Ie<0||Ie>=u.inWidth)continue;const _e=ie+Ee*M[2],Fe=xe+Ie*u.inChannels;let Xe=_e;for(let Oe=0;Oe<u.inChannels;++Oe){const lt=C[Fe+Oe];for(let Je=0;Je<u.outChannels;++Je)_[oe+Je]+=lt*E[Xe+Je];Xe+=u.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const gbe={kernelName:Hv,backendName:"cpu",kernelFunc:fbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r;We([a,i],"conv3dBackpropFilterV2");const u=Ze(a.shape),c=Ze(i.shape),d=Nu(a.shape,l,o,1,s),p=d.strideDepth,f=d.strideHeight,m=d.strideWidth,y=d.filterDepth,v=d.filterHeight,b=d.filterWidth,x=new _r(d.filterShape,"float32"),w=x.values,[S,C,E,_]=x.strides,N=n.data.get(i.dataId).values,[M,P,L,j]=c,B=n.data.get(a.dataId).values,[K,X,Z,H]=u,F=d.padInfo.front,Y=d.padInfo.left,Q=d.padInfo.top;for(let ne=0;ne<y;++ne){const se=Math.max(0,Math.ceil((F-ne)/p)),pe=Math.min(d.outDepth,(d.inDepth+F-ne)/p),de=ne*S;for(let ie=0;ie<v;++ie){const xe=Math.max(0,Math.ceil((Q-ie)/f)),q=Math.min(d.outHeight,(d.inHeight+Q-ie)/f),oe=ie*C+de;for(let he=0;he<b;++he){const Ee=Math.max(0,Math.ceil((Y-he)/m)),Ie=Math.min(d.outWidth,(d.inWidth+Y-he)/m),_e=he*E+oe;for(let Fe=0;Fe<d.inChannels;++Fe){const Xe=Fe*_+_e;for(let Oe=0;Oe<d.outChannels;++Oe){let lt=0;for(let Je=0;Je<d.batchSize;++Je){const nt=Je*K,et=Je*M;for(let sn=se;sn<pe;++sn){const Vt=(ne+sn*p-F)*X+nt,Qt=sn*P+et;for(let Zt=xe;Zt<q;++Zt){const Ot=(ie+Zt*f-Q)*Z+Vt,Et=Zt*L+Qt;for(let jn=Ee;jn<Ie;++jn){const Yn=(he+jn*m-Y)*H+Ot,ja=jn*j+Et;lt+=B[Yn+Fe]*N[ja+Oe]}}}}w[Xe+Oe]=lt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const ybe={kernelName:sT,backendName:"cpu",kernelFunc:mbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r;We([a],"conv3dBackpropInputV2");const u=Ze(a.shape),c=Ze(i.shape),d=Nu(l,i.shape,s,1,o),p=new _r(d.inShape,"float32"),f=p.values,[m,y,v,b]=p.strides,x=n.data.get(a.dataId).values,[w,S,C,E]=u,_=n.data.get(i.dataId).values,[N,M,P,L]=c,{batchSize:j,filterDepth:B,filterHeight:K,filterWidth:X,inChannels:Z,inDepth:H,inHeight:F,inWidth:Y,outChannels:Q,outDepth:ne,outHeight:se,outWidth:pe,strideDepth:de,strideHeight:ie,strideWidth:xe}=d,q=B-1-d.padInfo.front,oe=K-1-d.padInfo.top,he=X-1-d.padInfo.left;for(let Ee=0;Ee<j;++Ee)for(let Ie=0;Ie<Z;++Ie)for(let _e=0;_e<H;++_e){const Fe=_e-q,Xe=Math.max(0,Math.ceil(Fe/de)),Oe=Math.min(ne,(B+Fe)/de);for(let lt=0;lt<F;++lt){const Je=lt-oe,nt=Math.max(0,Math.ceil(Je/ie)),et=Math.min(se,(K+Je)/ie);for(let sn=0;sn<Y;++sn){const Vt=sn-he,Qt=Math.max(0,Math.ceil(Vt/xe)),Zt=Math.min(pe,(X+Vt)/xe);let Ot=0;for(let Et=Xe;Et<Oe;++Et){const jn=Et*de-Fe;for(let Yn=nt;Yn<et;++Yn){const ja=Yn*ie-Je;for(let Rn=Qt;Rn<Zt;++Rn){const Za=Rn*xe-Vt,wo=w*Ee+S*Et+C*Yn+E*Rn,vi=N*(B-1-jn)+M*(K-1-ja)+P*(X-1-Za)+L*Ie;for(let fn=0;fn<Q;++fn){const Ja=x[wo+fn],xi=_[vi+fn];Ot+=Ja*xi}}}}f[m*Ee+y*_e+v*lt+b*sn+Ie]=Ot}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const vbe={kernelName:qv,backendName:"cpu",kernelFunc:bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xbe=hn(Rg,t=>Math.cos(t)),wbe={kernelName:Rg,backendName:"cpu",kernelFunc:xbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kbe=hn($g,t=>Math.cosh(t)),Sbe={kernelName:$g,backendName:"cpu",kernelFunc:kbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cbe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,p,f]=a.shape,m=i.shape[0],[y,v]=s,b=Ct([m,y,v,f],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,C=Ze(a.shape),E=Ze(b.shape);for(let _=0;_<m;_++){const N=_*4,M=x[N],P=x[N+1],L=x[N+2],j=x[N+3],B=w[_];if(B>=c)continue;const K=y>1?(L-M)*(d-1)/(y-1):0,X=v>1?(j-P)*(p-1)/(v-1):0;for(let Z=0;Z<y;Z++){const H=y>1?M*(d-1)+Z*K:.5*(M+L)*(d-1);if(H<0||H>d-1){for(let F=0;F<v;F++)for(let Y=0;Y<f;Y++){const Q=Y+F*E[2]+Z*E[1]+_*E[0];b.values[Q]=u}continue}if(l==="bilinear"){const F=Math.floor(H),Y=Math.ceil(H),Q=H-F;for(let ne=0;ne<v;ne++){const se=v>1?P*(p-1)+ne*X:.5*(P+j)*(p-1);if(se<0||se>p-1){for(let xe=0;xe<f;xe++){const q=xe+ne*E[2]+Z*E[1]+_*E[0];b.values[q]=u}continue}const pe=Math.floor(se),de=Math.ceil(se),ie=se-pe;for(let xe=0;xe<f;xe++){let q=xe+pe*C[2]+F*C[1]+B*C[0];const oe=S[q];q=xe+de*C[2]+F*C[1]+B*C[0];const he=S[q];q=xe+pe*C[2]+Y*C[1]+B*C[0];const Ee=S[q];q=xe+de*C[2]+Y*C[1]+B*C[0];const Ie=S[q],_e=oe+(he-oe)*ie,Fe=Ee+(Ie-Ee)*ie;q=xe+ne*E[2]+Z*E[1]+_*E[0],b.values[q]=_e+(Fe-_e)*Q}}}else for(let F=0;F<v;++F){const Y=v>1?P*(p-1)+F*X:.5*(P+j)*(p-1);if(Y<0||Y>p-1){for(let se=0;se<f;se++){const pe=se+F*E[2]+Z*E[1]+_*E[0];b.values[pe]=u}continue}const Q=Math.round(Y),ne=Math.round(H);for(let se=0;se<f;se++){const pe=se+Q*C[2]+ne*C[1]+B*C[0],de=se+F*E[2]+Z*E[1]+_*E[0];b.values[de]=S[pe]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Ebe={kernelName:Yv,backendName:"cpu",kernelFunc:Cbe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ibe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;We(a,"cumprod");const l=pr([i],a.shape.length);let u=a;l!=null&&(u=Qa({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=hr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Ya(u.dtype,"int32"),p=Tv(be(u.shape),d),f=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],y=s?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=m)for(let x=0;x<m;x++){const w=y(b,x);if(x===0)p[w]=o?1:f[w];else{const S=y(b,x-1);p[w]=o?f[S]*p[S]:f[w]*p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=zm(l),x=Qa({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const Tbe={kernelName:Kv,backendName:"cpu",kernelFunc:Ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;We(a,"cumsum");const l=pr([i],a.shape.length);let u=a;l!=null&&(u=Qa({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=hr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Ya(u.dtype,"int32"),p=Yr(be(u.shape),d),f=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],y=s?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=m)for(let x=0;x<m;x++){const w=y(b,x);if(x===0)p[w]=o?0:f[w];else{const S=y(b,x-1);p[w]=o?f[S]+p[S]:f[w]+p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=zm(l),x=Qa({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const _be={kernelName:Xv,backendName:"cpu",kernelFunc:Nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=L4(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=I7(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const $be={kernelName:Qv,backendName:"cpu",kernelFunc:Rbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Obe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r;V(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*i,p=u*i,f=c/(i*i),m=n.data.get(a.dataId).values,y=new Float32Array(s*d*p*f);let v=0;for(let b=0;b<s;++b)for(let x=0;x<d;++x){const w=Math.floor(x/i),S=x%i;for(let C=0;C<p;++C){const E=Math.floor(C/i),_=C%i,N=(S*i+_)*f;for(let M=0;M<f;++M){const P=M+N+c*(E+u*(w+l*b));y[v++]=m[P]}}}return n.makeTensorInfo([s,d,p,f],a.dtype,y)}const Mbe={kernelName:Zv,backendName:"cpu",kernelFunc:Obe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function EB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;We([a,i],"depthwiseConv2DNative");const c=Ze(a.shape),d=Ze(i.shape);let p=l;p==null&&(p=[1,1]),V(ha(o,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`);const f=zr(a.shape,i.shape,o,p,s,u,!0),{filterHeight:m,filterWidth:y,dilationHeight:v,dilationWidth:b,padInfo:x}=f,w=x.left,S=x.top,C=f.outChannels/f.inChannels,E=new _r(f.outShape,a.dtype),_=n.data.get(a.dataId).values,N=n.data.get(i.dataId).values,M=E.values;for(let P=0;P<f.batchSize;++P){const L=P*c[0],j=P*E.strides[0];for(let B=0;B<f.outHeight;++B){const K=j+B*E.strides[1],X=B*f.strideHeight-S;for(let Z=0;Z<m;++Z){const H=X+Z*v;if(H<0||H>=f.inHeight)continue;const F=Z*d[0],Y=L+H*c[1];for(let Q=0;Q<f.outWidth;++Q){const ne=K+Q*E.strides[2],se=Q*f.strideWidth-w;for(let pe=0;pe<y;++pe){const de=se+pe*b;if(de<0||de>=f.inWidth)continue;const ie=F+pe*d[1],xe=Y+de*f.inChannels;let q=ne,oe=ie;for(let he=0;he<f.inChannels;++he){const Ee=_[xe+he];for(let Ie=0;Ie<C;++Ie)M[q+Ie]+=Ee*N[oe+Ie];q+=C,oe+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Pbe={kernelName:Jv,backendName:"cpu",kernelFunc:EB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Abe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;We([a,i],"depthwiseConv2dNativeBackpropFilter");const d=zr(a.shape,c,o,s,l,u,!0),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:y}=d,v=new _r(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(a.dataId).values,C=new _r(a.shape,a.dtype,S),E=n.data.get(i.dataId).values,_=new _r(i.shape,i.dtype,E);for(let N=0;N<m;++N){const M=Math.max(0,Math.ceil((x-N)/p)),P=Math.min(d.outHeight,(d.inHeight+x-N)/p);for(let L=0;L<y;++L){const j=Math.max(0,Math.ceil((b-L)/f)),B=Math.min(d.outWidth,(d.inWidth+b-L)/f);for(let K=0;K<d.outChannels;++K){const X=Math.trunc(K/w),Z=K%w;let H=0;for(let F=0;F<d.batchSize;++F)for(let Y=M;Y<P;++Y){const Q=N+Y*p-x;for(let ne=j;ne<B;++ne){const se=L+ne*f-b;H+=C.get(F,Q,se,X)*_.get(F,Y,ne,K)}}v.set(H,N,L,X,Z)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Dbe={kernelName:ex,backendName:"cpu",kernelFunc:Abe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;We([a,i],"depthwiseConv2DNativeBackpropInput");const d=Ze(a.shape),p=Ze(i.shape),f=zr(c,i.shape,o,s,l,u,!0),m=new _r(f.inShape,"float32"),y=m.values,[v,b,x]=m.strides,w=n.data.get(a.dataId).values,[S,C,E]=d,_=n.data.get(i.dataId).values,[N,M,P]=p,{batchSize:L,filterHeight:j,filterWidth:B,inChannels:K,inHeight:X,inWidth:Z,outChannels:H,outHeight:F,outWidth:Y,strideHeight:Q,strideWidth:ne}=f,se=j-1-f.padInfo.top,pe=B-1-f.padInfo.left,de=H/K;for(let ie=0;ie<L;++ie)for(let xe=0;xe<K;++xe)for(let q=0;q<X;++q){const oe=q-se,he=Math.max(0,Math.ceil(oe/Q)),Ee=Math.min(F,(j+oe)/Q);for(let Ie=0;Ie<Z;++Ie){const _e=Ie-pe,Fe=Math.max(0,Math.ceil(_e/ne)),Xe=Math.min(Y,(B+_e)/ne);let Oe=0;for(let lt=he;lt<Ee;++lt){const Je=lt*Q-oe;for(let nt=Fe;nt<Xe;++nt){const et=nt*ne-_e,sn=S*ie+C*lt+E*nt,Vt=N*(j-1-Je)+M*(B-1-et)+P*xe;for(let Qt=0;Qt<de;++Qt){const Zt=xe*de+Qt,Ot=w[sn+Zt],Et=_[Vt+Qt];Oe+=Ot*Et}}}y[v*ie+b*q+x*Ie+xe]=Oe}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const Fbe={kernelName:tx,backendName:"cpu",kernelFunc:Lbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bbe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=be(r.shape),i=n.data.get(r.dataId).values,o=Ct([a,a],r.dtype),s=o.values;for(let u=0;u<i.length;u++)s[u*a+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const zbe={kernelName:nx,backendName:"cpu",kernelFunc:Bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jbe={kernelName:rx,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:o,dilations:s}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(a.dataId).values,p=a.shape.length,{batchSize:f,inHeight:m,inWidth:y,inChannels:v,outHeight:b,outWidth:x,padInfo:w,strideHeight:S,strideWidth:C,filterHeight:E,filterWidth:_,dilationHeight:N,dilationWidth:M,outShape:P}=Dm(r.shape,a.shape,i,o,"NHWC",s),L=be(P),j=P.length,B=Nr(r.dtype,L);for(let K=0;K<f;++K)for(let X=0;X<b;++X){const Z=X*S-w.top;for(let H=0;H<x;++H){const F=H*C-w.left;for(let Y=0;Y<v;++Y){let Q=Number.MIN_SAFE_INTEGER;for(let se=0;se<E;++se){const pe=Z+se*N;if(pe>=0&&pe<m)for(let de=0;de<_;++de){const ie=F+de*M;if(ie>=0&&ie<y){const xe=Uo([K,pe,ie,Y],c,Ze(r.shape)),q=Uo([se,de,Y],p,Ze(a.shape)),oe=u[xe]+d[q];oe>Q&&(Q=oe)}}}const ne=Uo([K,X,H,Y],j,Ze(P));B[ne]=Q}}}return{dataId:l.write(Cu(B,r.dtype),P,r.dtype),shape:P,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vbe={kernelName:uT,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Ai(r.shape,u.data.get(r.dataId).values),d=Ai(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:_,dilationWidth:N,outShape:M}=Dm(r.shape,a.shape,o,s,"NHWC",l);V(i.rank===M.length,()=>`Error in ${uT}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=Ai(M,u.data.get(i.dataId).values),L=eT(a.shape,a.dtype);for(let j=0;j<p;++j)for(let B=0;B<v;++B){const K=B*w-x.top;for(let X=0;X<b;++X){const Z=X*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Y=0,Q=0;for(let ne=0;ne<C;++ne){const se=K+ne*_;if(se>=0&&se<f)for(let pe=0;pe<E;++pe){const de=Z+pe*N;if(de>=0&&de<m){const ie=c[j][se][de][H]+d[ne][pe][H];ie>F&&(F=ie,Y=ne,Q=pe)}}}L[Y][Q][H]+=P[j][B][X][H]}}}return{dataId:u.write(Cu(L,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ube={kernelName:lT,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Ai(r.shape,u.data.get(r.dataId).values),d=Ai(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:_,dilationWidth:N,outShape:M}=Dm(r.shape,a.shape,o,s,"NHWC",l);V(i.rank===M.length,()=>`Error in ${lT}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=Ai(M,u.data.get(i.dataId).values),L=eT(r.shape,r.dtype);for(let j=0;j<p;++j)for(let B=0;B<v;++B){const K=B*w-x.top;for(let X=0;X<b;++X){const Z=X*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Y=K<0?0:K,Q=Z<0?0:Z;for(let ne=0;ne<C;++ne){const se=K+ne*_;if(se>=0&&se<f)for(let pe=0;pe<E;++pe){const de=Z+pe*N;if(de>=0&&de<m){const ie=c[j][se][de][H]+d[ne][pe][H];ie>F&&(F=ie,Y=se,Q=de)}}}L[j][Y][Q][H]+=P[j][B][X][H]}}}return{dataId:u.write(Cu(L,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e0(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"sum");let s;a.dtype==="bool"?s=Du({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):s=Es({inputs:{x:a},backend:n});const l=s.shape.length,u=Yt(i,s.shape),c=pr(u,l);let d=u,p=s;c!=null&&(p=Qa({inputs:{x:s},backend:n,attrs:{perm:c}}),d=hr(d.length,l)),Zr("sum",d,p.shape.length);const[f,m]=Qr(p.shape,d),y=Ya(p.dtype,"int32");let v=n2(n,f,y);const b=be(m),x=n.data.get(v.dataId).values,w=n.data.get(p.dataId).values;for(let S=0;S<x.length;++S){const C=S*b;let E=0;for(let _=0;_<b;++_)E+=w[C+_];x[S]=E}if(o){const S=Rr(v.shape,u),C=v;v=Nn({inputs:{x:v},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(p),v}const Wbe={kernelName:qx,backendName:"cpu",kernelFunc:e0};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gbe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=h4(a,i.length);g4(o.length,l,i);const{path:u,steps:c}=m4(s,l),d=c.length;let p=null,f=o.length;const m=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=f4(f,l[v]);let w;y4(b)?w=i[v]:(w=Qa({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),m.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);xn(w.shape,S)||(w=Nn({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),p===null?p=w:(p=r2({inputs:{a:w,b:p},backend:n}),m.push(p))}y<d-1&&(u[y]>=0&&(p=e0({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),m.push(p)),f--)}for(const y of m)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const Hbe={kernelName:ax,backendName:"cpu",kernelFunc:Gbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qbe(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;We([r,a],"eluGrad");const i=new Float32Array(be(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=1?i[l]=s[l]:i[l]=s[l]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}const Kbe={kernelName:cT,backendName:"cpu",kernelFunc:qbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xbe=i4,Ybe=o4,Qbe=s4,Zbe=l4,Jbe=u4,eve=c4,tve=hn(Pg,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+Xbe*n);return e*(1-((((eve*r+Jbe)*r+Zbe)*r+Qbe)*r+Ybe)*r*Math.exp(-n*n))}),nve={kernelName:Pg,backendName:"cpu",kernelFunc:tve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i2(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(V(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),Nn({inputs:{x:a},backend:n,attrs:{shape:s}})}const rve={kernelName:ix,backendName:"cpu",kernelFunc:i2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ave=xr((t,e)=>t/e),U4=jr(Og,ave),W4={kernelName:Og,backendName:"cpu",kernelFunc:U4};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function IB(t,e,n){const r=t.shape,a=r[0],i=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,i],c=be(u),d=Tr("float32",c),p=Tr("float32",c);for(let v=0;v<a;v++){const b=dd({inputs:{x:s},backend:n,attrs:{begin:[v,0],size:[1,i]}}),x=dd({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),w=yi({inputs:{real:b,imag:x},backend:n}),{real:S,imag:C}=ive(w,e,n),E=kl(S,C);for(let _=0;_<i;_++){const N=d4(E,_);d[v*i+_]=N.real,p[v*i+_]=N.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const f=n.makeTensorInfo(u,"float32",d),m=n.makeTensorInfo(u,"float32",p),y=yi({inputs:{real:f,imag:m},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}function ive(t,e,n){const r=be(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(ove(r)){const s=G4(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",pl(r,"float32")),p=Es({inputs:{x:d},backend:n}),f=W4.kernelFunc({inputs:{a:u,b:d},backend:n}),m=W4.kernelFunc({inputs:{a:c,b:p},backend:n}),y=n.data.get(f.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),{real:y,imag:v}}return s}else{const s=kl(i,o),l=sve(s,r,e);return V9(l)}}function ove(t){return(t&t-1)===0}function G4(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=kl(t,e),o=n/2,s=U9(i),l=s.real,u=s.imag,c=[l.length],d=a.makeTensorInfo(c,"float32",l),p=a.makeTensorInfo(c,"float32",u),f=yi({inputs:{real:d,imag:p},backend:a}),m=W9(i),y=m.real,v=m.imag,b=[y.length],x=a.makeTensorInfo(b,"float32",y),w=a.makeTensorInfo(b,"float32",v),S=yi({inputs:{real:x,imag:w},backend:a}),C=G4(l,u,o,r,a),E=C.real,_=C.imag,N=[E.length],M=a.makeTensorInfo(N,"float32",E),P=a.makeTensorInfo(N,"float32",_),L=yi({inputs:{real:M,imag:P},backend:a}),j=G4(y,v,o,r,a),B=j.real,K=j.imag,X=[B.length],Z=a.makeTensorInfo(X,"float32",B),H=a.makeTensorInfo(X,"float32",K),F=yi({inputs:{real:Z,imag:H},backend:a}),Y=H9(n,r),Q=[Y.real.length],ne=a.makeTensorInfo(Q,"float32",Y.real),se=a.makeTensorInfo(Q,"float32",Y.imag),pe=yi({inputs:{real:ne,imag:se},backend:a}),de=r2({inputs:{a:pe,b:F},backend:a}),ie=ih({inputs:{a:L,b:de},backend:a}),xe=j4({inputs:{a:L,b:de},backend:a}),q=cd({inputs:{input:ie},backend:a}),oe=cd({inputs:{input:xe},backend:a}),he=lh({inputs:{input:ie},backend:a}),Ee=lh({inputs:{input:xe},backend:a}),Ie=uh({inputs:[q,oe],backend:a,attrs:{axis:0}}),_e=uh({inputs:[he,Ee],backend:a,attrs:{axis:0}}),Fe=a.data.get(Ie.dataId).values,Xe=a.data.get(_e.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(xe),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(oe),a.disposeIntermediateTensorInfo(Ee),a.disposeIntermediateTensorInfo(Ie),a.disposeIntermediateTensorInfo(_e),{real:Fe,imag:Xe}}function sve(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,o=0;for(let s=0;s<e;s++){const l=q9(a*s,e,n),u=d4(t,s);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),G9(r,i,o,a)}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lve(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=Nn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=IB(s,!1,n),u=Nn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const uve={kernelName:ox,backendName:"cpu",kernelFunc:lve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H4(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,o=i||Lp(a),s=Nr(o,be(r));return dve(s,a,o),e.makeTensorInfo(r,o,s)}const cve={kernelName:sx,backendName:"cpu",kernelFunc:H4};function dve(t,e,n){t.fill(e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pve={kernelName:lx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=Tr(r.dtype,be(r.shape)),[o,s,l,u]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<o;d++){const p=d*l*s*u;for(let f=0;f<s;f++){const m=f*(l*u);for(let y=0;y<l;y++){const v=y*u;for(let b=0;b<u;b++){const x=Math.round(l-y-1),w=p+m+v+b;let S=c[w];if(x>=0&&x<l){const C=x*u,E=p+m+C+b;S=c[E]}i[w]=S}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hve=xr((t,e)=>Math.floor(t/e)),fve=jr(Bg,hve,null,"int32"),gve={kernelName:Bg,backendName:"cpu",kernelFunc:fve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=r;let y=CB({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const b=Nn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=ih({inputs:{a:y,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else y=ih({inputs:{a:y,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=y;if(c==="NCHW"&&f==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const b=Nn({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});y=a2(n,y,f,b,m),n.disposeIntermediateTensorInfo(b)}else y=a2(n,y,f,s,m);n.disposeIntermediateTensorInfo(v)}return y}const yve={kernelName:Cm,backendName:"cpu",kernelFunc:mve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=r;let y=EB({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;y=ih({inputs:{a:y,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=y;y=a2(n,y,f,s,m),n.disposeIntermediateTensorInfo(v)}return y}const vve={kernelName:Em,backendName:"cpu",kernelFunc:bve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xve(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=be(r.shape),o=a.shape,s=o[o.length-1],[l,u,c,d]=Cw(r,a);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(a.dataId).values,f=n.bufferSync(r),m=A7(p,f,r.dtype,u,s,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,m.values)}const wve={kernelName:dx,backendName:"cpu",kernelFunc:xve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r;We([a,i],"gatherV2");const l=Yt(o,a.shape)[0],u=n.data.get(i.dataId).values,c=a.shape[l];for(let S=0;S<u.length;++S){const C=u[S];V(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let d=s;s==null&&(d=0);const p=be(i.shape),f=x4(a,i,l,d),m=Nn({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),y=Nn({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,p/f.batchSize]}}),v=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize],b=n.bufferSync(y),x=n.bufferSync(m),w=D7(x,b,v);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}const Sve={kernelName:cx,backendName:"cpu",kernelFunc:kve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cve(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=Nn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=IB(s,!0,n),u=Nn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const Eve={kernelName:px,backendName:"cpu",kernelFunc:Cve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ive=hn(Ug,t=>Number.isFinite(t)?1:0,"bool"),Tve={kernelName:Ug,backendName:"cpu",kernelFunc:Ive};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nve=hn(Wg,t=>Math.abs(t)===1/0?1:0,"bool"),_ve={kernelName:Wg,backendName:"cpu",kernelFunc:Nve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rve=hn(Gg,t=>Number.isNaN(t)?1:0,"bool"),$ve={kernelName:Gg,backendName:"cpu",kernelFunc:Rve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ove(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=j7(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const Mve={kernelName:gx,backendName:"cpu",kernelFunc:Ove};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pve=hn(Xg,t=>Math.log1p(t)),Ave={kernelName:Xg,backendName:"cpu",kernelFunc:Pve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dve=xr((t,e)=>t&&e),Lve=jr(Yg,Dve,null,"bool"),Fve={kernelName:Yg,backendName:"cpu",kernelFunc:Lve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bve=hn(Qg,t=>t?0:1,"bool"),zve={kernelName:Qg,backendName:"cpu",kernelFunc:Bve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jve=xr((t,e)=>t||e),Vve=jr(Zg,jve,null,"bool"),Uve={kernelName:Zg,backendName:"cpu",kernelFunc:Vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r;We(a,"LRN");const u=a.shape[3],c=u-1,d=n.data.get(a.dataId).values,p=be(a.shape),f=new Float32Array(p);function m(y){const v=y%u;let b=y-v+Math.max(0,v-i);const x=y-v+Math.min(v+i,c);let w=0;for(;b<=x;b++){const S=d[b];w+=S*S}return w}for(let y=0;y<p;y++){const v=m(y),b=d[y]*Math.pow(o+s*v,-l);f[y]=b}return n.makeTensorInfo(a.shape,a.dtype,f)}const Gve={kernelName:mx,backendName:"cpu",kernelFunc:Wve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r;We(o,"LRNGrad");const d=be(o.shape),p=o.shape[3],f=n.data.get(o.dataId).values,m=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(d),b=d;for(let x=0;x<b;x++){const w=x%p,S=x-w+Math.max(0,w-s),C=x-w+Math.min(p,w+s+1);let E=0;for(let _=S;_<C;_++)E+=Math.pow(m[_],2);E=u*E+l;for(let _=S;_<C;_++){let N=-2*u*c*m[_]*y[x]/E;x===_&&(N+=Math.pow(E,-c)),N*=f[x],v[_]+=N}}return n.makeTensorInfo(o.shape,a.dtype,v)}const qve={kernelName:dT,backendName:"cpu",kernelFunc:Hve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=n;let l=a.shape;const u=l.length,c=Yt(i,l);let d=c;const p=pr(d,u);let f=s.data.get(a.dataId).values;if(p!=null){const S=new Array(u);for(let C=0;C<S.length;C++)S[C]=l[p[C]];f=B4(f,l,a.dtype,p,S),d=hr(d.length,u),l=S}We(a,"max"),Zr("max",d,u);const[m,y]=Qr(l,d),v=be(y),b=U7(f,v,m,a.dtype),x=s.write(b,m,a.dtype);let w=m;return o&&(w=Rr(m,c)),{dataId:x,shape:w,dtype:a.dtype}}const Kve={kernelName:yx,backendName:"cpu",kernelFunc:TB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;We(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ha(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=co(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&xn(c.inShape,c.outShape))d=Es({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=Ze(a.shape),m=V4(p,a.shape,a.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return d}const Yve={kernelName:bx,backendName:"cpu",kernelFunc:Xve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;We(a,"maxPool3d");const c=bl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=SB(d,a.shape,a.dtype,Ze(a.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const Zve={kernelName:vx,backendName:"cpu",kernelFunc:Qve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;We([a,i],"maxPool3DGrad");const c=bl(i.shape,o,s,1,l,u),d=n.bufferSync(i),p=zye(d,c),f=c.strideDepth,m=c.strideHeight,y=c.strideWidth,v=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=w-1-c.padInfo.front,_=C-1-c.padInfo.left,N=S-1-c.padInfo.top,M=Ct(i.shape,"float32"),P=n.bufferSync(a);for(let L=0;L<c.batchSize;++L)for(let j=0;j<c.inChannels;++j)for(let B=0;B<c.inDepth;++B)for(let K=0;K<c.inHeight;++K)for(let X=0;X<c.inWidth;++X){const Z=B-E,H=K-N,F=X-_;let Y=0;for(let Q=0;Q<w;Q+=v){const ne=(Z+Q)/f;if(!(ne<0||ne>=c.outDepth||Math.floor(ne)!==ne))for(let se=0;se<S;se+=b){const pe=(H+se)/m;if(!(pe<0||pe>=c.outHeight||Math.floor(pe)!==pe))for(let de=0;de<C;de+=x){const ie=(F+de)/y;if(ie<0||ie>=c.outWidth||Math.floor(ie)!==ie)continue;const xe=w*S*C-1-p.get(L,ne,pe,ie,j),q=Q*S*C+se*C+de,oe=xe===q?1:0;if(oe===0)continue;const he=P.get(L,ne,pe,ie,j);Y+=he*oe}}}M.set(Y,L,B,K,X,j)}return n.makeTensorInfo(M.shape,M.dtype,M.values)}const exe={kernelName:hT,backendName:"cpu",kernelFunc:Jve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function txe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;We([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=co(s.shape,l,u,1,c,d),f=n.data.get(s.dataId).values,m=Ct(p.outShape,s.dtype,kB(f,s.shape,s.dtype,p).values),y=p.strideHeight,v=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,w=p.effectiveFilterHeight,S=p.effectiveFilterWidth,C=S-1-p.padInfo.left,E=w-1-p.padInfo.top,_=Ct(s.shape,"float32"),N=n.data.get(a.dataId).values,M=Ct(a.shape,"float32",N);for(let P=0;P<p.batchSize;++P)for(let L=0;L<p.inChannels;++L)for(let j=0;j<p.inHeight;++j)for(let B=0;B<p.inWidth;++B){const K=j-E,X=B-C;let Z=0;for(let H=0;H<w;H+=b){const F=(K+H)/y;if(!(F<0||F>=p.outHeight||Math.floor(F)!==F))for(let Y=0;Y<S;Y+=x){const Q=(X+Y)/v;if(Q<0||Q>=p.outWidth||Math.floor(Q)!==Q)continue;const ne=w*S-1-m.get(P,F,Q,L),se=H*S+Y,pe=ne===se?1:0;if(pe===0)continue;const de=M.get(P,F,Q,L);Z+=de*pe}}_.set(Z,P,j,B,L)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const nxe={kernelName:pT,backendName:"cpu",kernelFunc:txe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rxe(t,e,n,r,a){const i=Ze(e),o=V4(t,e,n,i,a,"max"),s=kB(t,e,n,a,!0,r);return[o.values,s.values]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const axe={kernelName:xx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;We(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=co(r.shape,a,i,[1,1],o),[d,p]=rxe(u,r.shape,r.dtype,s,c),f=l.write(d,c.outShape,r.dtype),m=l.write(p,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ixe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=Yt(i,a.shape),l=Qr(a.shape,s)[1],u=be(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);const p=Du({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(p);const f=U4({inputs:{a:p,b:d},backend:n});c.push(f);const m=e0({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const oxe={kernelName:wx,backendName:"cpu",kernelFunc:ixe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;We(a,"min");const s=Yt(i,a.shape);let l=s;const u=pr(l,a.shape.length);let c=a;u!=null&&(c=Qa({inputs:{x:a},backend:n,attrs:{perm:u}}),l=hr(l.length,a.shape.length)),Zr("min",l,c.shape.length);const[d,p]=Qr(c.shape,l),f=be(p),m=Yr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];(Number.isNaN(C)||C<w)&&(w=C)}m[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,m);if(o){const b=Rr(d,s),x=Nn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const lxe={kernelName:kx,backendName:"cpu",kernelFunc:sxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:o}=r;We(a,"mirrorPad");const s=i.map((x,w)=>x[0]+a.shape[w]+x[1]),l=i.map(x=>x[0]),u=i.map((x,w)=>x[0]+a.shape[w]),c=o==="reflect"?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=Ze(a.shape),m=be(s),y=s.length,v=Ze(s),b=Tr(a.dtype,m);for(let x=0;x<m;x++){let w=qc(x,y,v);for(let C=0;C<y;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,E)=>C-l[E]);const S=Uo(w,p,f);b[x]=d[S]}return{dataId:n.write(b,s,a.dtype),shape:s,dtype:a.dtype}}const cxe={kernelName:Sx,backendName:"cpu",kernelFunc:uxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dxe=xr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),pxe=jr(tm,dxe),hxe={kernelName:tm,backendName:"cpu",kernelFunc:pxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function NB(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=a.shape.length;let s=i;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=Yt([s],a.shape),u=TB({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Rr(u.shape,l),d=Nn({inputs:{x:u},backend:n,attrs:{shape:c}}),p=j4({inputs:{a,b:d},backend:n}),f=O7({inputs:{x:p},backend:n}),m=e0({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=Nn({inputs:{x:m},backend:n,attrs:{shape:c}}),v=U4({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const fxe={kernelName:Yx,backendName:"cpu",kernelFunc:NB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gxe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r;We(a,"multinomial");const l=s?a:NB({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,p=[u,i],f=Yr(be(p),"int32");for(let m=0;m<u;++m){const y=m*c,v=new Float32Array(c-1);v[0]=d[y];for(let w=1;w<v.length;++w)v[w]=v[w-1]+d[y+w];const b=Mw.alea(o.toString()),x=m*i;for(let w=0;w<i;++w){const S=b();f[x+w]=v.length;for(let C=0;C<v.length;C++)if(S<v[C]){f[x+w]=C;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",f)}const mxe={kernelName:Cx,backendName:"cpu",kernelFunc:gxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yxe=Vw;function bxe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;We(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=yxe(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const vxe={kernelName:Ix,backendName:"cpu",kernelFunc:bxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xxe=Uw;function wxe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;We(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:f}=xxe(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const kxe={kernelName:Tx,backendName:"cpu",kernelFunc:wxe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sxe=Ww;function Cxe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;We(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,p=o,f=s,m=l,y=u,{selectedIndices:v,selectedScores:b}=Sxe(c,d,p,f,m,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const Exe={kernelName:Nx,backendName:"cpu",kernelFunc:Cxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ixe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r;We(a,"oneHot");const u=be(a.shape),c=new Float32Array(u*o);c.fill(l);const d=n.data.get(a.dataId).values;for(let p=0;p<u;++p)d[p]>=0&&d[p]<o&&(c[p*o+d[p]]=s);return n.makeTensorInfo([...a.shape,o],i,c)}const Txe={kernelName:Rx,backendName:"cpu",kernelFunc:Ixe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=cd({inputs:{input:r},backend:n}),i=o2({inputs:{x:a},backend:n}),o=lh({inputs:{input:r},backend:n}),s=o2({inputs:{x:o},backend:n}),l=yi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return H4({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Nxe={kernelName:dw,backendName:"cpu",kernelFunc:o2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _B(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=cd({inputs:{input:r},backend:n}),i=_B({inputs:{x:a},backend:n}),o=lh({inputs:{input:r},backend:n}),s=o2({inputs:{x:o},backend:n}),l=yi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return H4({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const _xe={kernelName:_x,backendName:"cpu",kernelFunc:_B};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RB(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return i2({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Xr(i,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=i2({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=uh({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const Rxe={kernelName:$x,backendName:"cpu",kernelFunc:RB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $xe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;We(a,"pad");const s=i.map((b,x)=>b[0]+a.shape[x]+b[1]),l=i.map(b=>b[0]),u=n.data.get(a.dataId).values,c=be(a.shape),d=a.shape.length,p=Ze(a.shape),f=be(s),m=s.length,y=Ze(s),v=Tr(a.dtype,f);o!==0&&v.fill(o);for(let b=0;b<c;b++){const x=qc(b,d,p).map((S,C)=>S+l[C]),w=Uo(x,m,y);v[w]=u[b]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}const $B={kernelName:Ox,backendName:"cpu",kernelFunc:$xe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Oxe=xr((t,e)=>Math.pow(t,e)),Mxe=jr(am,Oxe),Pxe={kernelName:am,backendName:"cpu",kernelFunc:Mxe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Axe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,s=a.map(v=>n.data.get(v.dataId).values),l=a.map(v=>v.shape),u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,[d,p,f]=Y7(s,l,u,i.shape,i.dtype,c,o.shape),m=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(f,i.dtype,p);return m.concat([y])}const Dxe={kernelName:Ax,backendName:"cpu",kernelFunc:Axe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lxe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=s.map(v=>n.data.get(v.dataId).values),f=s.map(v=>v.shape),[m,y]=J7(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(m,i.dtype,y)}const Fxe={kernelName:Dx,backendName:"cpu",kernelFunc:Lxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bxe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:o}=n,s=eB(r,a,o,i);return e.makeTensorInfo([s.length],i,s)}const zxe={kernelName:Lx,backendName:"cpu",kernelFunc:Bxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jxe=hn(im,t=>1/t),Vxe={kernelName:im,backendName:"cpu",kernelFunc:jxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uxe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;We(a,"resizeBilinear");const l=Ze(a.shape),[u,c]=s,[d,p,f,m]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(be([d,u,c,m])),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c];let w=0;const S=b[0]/x[0],C=b[1]/x[1];for(let E=0;E<d;E++)for(let _=0;_<u;_++){let N;o?N=S*(_+.5)-.5:N=S*_;const M=Math.max(0,Math.floor(N)),P=N-M,L=Math.min(p-1,Math.ceil(N)),j=E*l[0]+M*l[1],B=E*l[0]+L*l[1];for(let K=0;K<c;K++){let X;o?X=C*(K+.5)-.5:X=C*K;const Z=Math.max(0,Math.floor(X)),H=X-Z,F=Math.min(f-1,Math.ceil(X)),Y=j+Z*l[2],Q=B+Z*l[2],ne=j+F*l[2],se=B+F*l[2];for(let pe=0;pe<m;pe++){const de=y[Y+pe],ie=y[Q+pe],xe=y[ne+pe],q=y[se+pe],oe=de+(xe-de)*H,he=ie+(q-ie)*H,Ee=oe+(he-oe)*P;v[w++]=Ee}}}return n.makeTensorInfo([d,u,c,m],"float32",v)}const Wxe={kernelName:jx,backendName:"cpu",kernelFunc:Uxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gxe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;We([i,a],"resizeBilinearGrad");const s=Ze(a.shape),[l,u,c,d]=a.shape,[,p,f]=i.shape,m=new Float32Array(l*u*c*d),y=[o&&p>1?u-1:u,o&&f>1?c-1:c],v=[o&&p>1?p-1:p,o&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=n.data.get(i.dataId).values;let S=0;for(let C=0;C<l;C++){const E=C*s[0];for(let _=0;_<p;_++){const N=_*b,M=Math.floor(N),P=Math.min(Math.ceil(N),u-1),L=E+M*s[1],j=E+P*s[1],B=N-M,K=1-B;for(let X=0;X<f;X++){const Z=X*x,H=Math.floor(Z),F=Math.min(Math.ceil(Z),c-1),Y=Z-H,Q=1-Y,ne=L+H*s[2],se=L+F*s[2],pe=j+H*s[2],de=j+F*s[2],ie=K*Q,xe=K*Y,q=B*Q,oe=B*Y;for(let he=0;he<d;he++){const Ee=w[S++];m[ne+he]+=Ee*ie,m[se+he]+=Ee*xe,m[pe+he]+=Ee*q,m[de+he]+=Ee*oe}}}}return n.makeTensorInfo([l,c,u,d],"float32",m)}const Hxe={kernelName:gT,backendName:"cpu",kernelFunc:Gxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qxe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;We(a,"resizeNearestNeighbor");const l=Ze(a.shape),[u,c]=s,[d,p,f,m]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(d*u*c*m),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c],w=b[0]/x[0],S=b[1]/x[1];let C=0;for(let E=0;E<d;E++){const _=E*l[0];for(let N=0;N<u;N++){const M=o?w*(N+.5):w*N;let P=Math.min(p-1,i?Math.round(M):Math.floor(M));o&&(P=Math.max(0,P));const L=_+P*l[1];for(let j=0;j<c;j++){const B=o?S*(j+.5):S*j;let K=Math.min(f-1,i?Math.round(B):Math.floor(B));o&&(K=Math.max(0,K));const X=L+K*l[2];for(let Z=0;Z<m;Z++){const H=y[X+Z];v[C++]=H}}}}return n.makeTensorInfo([d,u,c,m],a.dtype,v)}const Kxe={kernelName:zx,backendName:"cpu",kernelFunc:qxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xxe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;We([i,a],"resizeNearestNeighborGrad");const s=Ze(a.shape),l=Ze(i.shape),[u,c,d,p]=a.shape,[,f,m]=i.shape,y=new Float32Array(u*c*d*p),v=n.data.get(i.dataId).values,b=[o&&f>1?c-1:c,o&&m>1?d-1:d],x=[o&&f>1?f-1:f,o&&m>1?m-1:m],w=b[0]/x[0],S=b[1]/x[1],C=1/w,E=1/S,_=Math.ceil(C)*2+2,N=Math.ceil(E)*2+2;for(let M=0;M<u;M++){const P=M*s[0];for(let L=0;L<c;L++){const j=P+L*s[1],B=Math.floor(L*C),K=Math.floor(B-_/2);for(let X=0;X<d;X++){const Z=j+X*s[2],H=Math.floor(X*E),F=Math.floor(H-N/2);for(let Y=0;Y<p;Y++){let Q=0;for(let ne=0;ne<_;ne++){const se=ne+K;if(se<0||se>=f)continue;const pe=P+se*l[1],de=se*w,ie=Math.min(c-1,o?Math.round(de):Math.floor(de));if(L===ie)for(let xe=0;xe<N;xe++){const q=xe+F;if(q<0||q>=m)continue;const oe=pe+q*l[2],he=q*S,Ee=Math.min(d-1,o?Math.round(he):Math.floor(he));X===Ee&&(Q+=v[oe+Y])}}y[Z+Y]=Q}}}}return n.makeTensorInfo(a.shape,a.dtype,y)}const Yxe={kernelName:fT,backendName:"cpu",kernelFunc:Xxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;We(a,"reverse");const o=a.shape.length,s=Yt(i,a.shape);if(o===0)return Es({inputs:{x:a},backend:n});const l=new _r(a.shape,a.dtype),u=n.bufferSync(a);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),p=d.slice();s.forEach(f=>p[f]=a.shape[f]-1-p[f]),l.set(u.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const Zxe={kernelName:Vx,backendName:"cpu",kernelFunc:Qxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jxe={kernelName:hw,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=Tr(r.dtype,be(r.shape)),[u,c,d,p]=r.shape,[f,m]=e4(o,c,d),y=255,v=Math.sin(a),b=Math.cos(a),x=s.data.get(r.dataId).values;for(let w=0;w<u;w++){const S=w*d*c*p;for(let C=0;C<c;C++){const E=C*(d*p);for(let _=0;_<d;_++){const N=_*p;for(let M=0;M<p;M++){const P=[u,C,_,M],L=P[2],j=P[1];let B=(L-f)*b-(j-m)*v,K=(L-f)*v+(j-m)*b;B=Math.round(B+f),K=Math.round(K+m);let X=i;if(typeof i!="number"&&(M===3?X=y:X=i[M]),B>=0&&B<d&&K>=0&&K<c){const H=K*(d*p),F=B*p,Y=S+H+F+M;X=x[Y]}const Z=S+E+N+M;l[Z]=X}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ewe=hn(lm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),twe={kernelName:lm,backendName:"cpu",kernelFunc:ewe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nwe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=qp(i,a,o),p=!0,f=n.bufferSync(a),m=n.bufferSync(i),y=sh(f,m,o,d,u,l,s,c,0,p);return n.makeTensorInfo(o,y.dtype,y.values)}const rwe={kernelName:Ux,backendName:"cpu",kernelFunc:nwe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function awe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function iwe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function owe(t,e,n,r,a,i){const o=Nr("int32",n*a);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),u=s*a;for(let c=0;c<a;++c)o[u+c]=i==="left"?awe(l,e[c+u]):iwe(l,e[c+u])}return o}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function swe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=owe(s,l,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const lwe={kernelName:Wx,backendName:"cpu",kernelFunc:swe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uwe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;We([r,a,i],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Ya(a.dtype,i.dtype),d=Yr(be(a.shape),c);let p=0;const f=o===0||o>1||a.shape.length===1?1:be(a.shape.slice(1));for(let m=0;m<s.length;m++)for(let y=0;y<f;y++)s[m]===1?d[p++]=l[m]:d[p++]=u[m];return n.makeTensorInfo(a.shape,c,d)}const cwe={kernelName:Gx,backendName:"cpu",kernelFunc:uwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dwe=r4,pwe=a4,hwe=hn(cm,t=>t>=0?pwe*t:dwe*(Math.exp(t)-1)),fwe={kernelName:cm,backendName:"cpu",kernelFunc:hwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gwe=hn(hm,t=>t<0?-1:t>0?1:0),mwe={kernelName:hm,backendName:"cpu",kernelFunc:gwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ywe=hn(dm,t=>Math.sin(t)),bwe={kernelName:dm,backendName:"cpu",kernelFunc:ywe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vwe=hn(pm,t=>Math.sinh(t)),xwe={kernelName:pm,backendName:"cpu",kernelFunc:vwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wwe=11920928955078125e-23,OB=Math.log(wwe)+2,kwe=hn(gm,t=>{const e=t>-OB,n=t<OB,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),Swe={kernelName:gm,backendName:"cpu",kernelFunc:kwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;We([a],"spaceToBatchND");const s=be(i),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<a.shape.length;++v)l.push([0,0]);const u=$B.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Xm(u.shape,i,s,!1),d=Ym(c.length,i.length,!1),p=Qm(u.shape,i,s,!1),f=Nn({inputs:{x:u},backend:n,attrs:{shape:c}}),m=Qa({inputs:{x:f},backend:n,attrs:{perm:d}}),y=Nn({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}const Ewe={kernelName:Kx,backendName:"cpu",kernelFunc:Cwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iwe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[d,p,f,m,y]=aB(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const Twe={kernelName:Qx,backendName:"cpu",kernelFunc:Iwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nwe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=iB(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const _we={kernelName:Zx,backendName:"cpu",kernelFunc:Nwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rwe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=z4(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const $we={kernelName:Jx,backendName:"cpu",kernelFunc:Rwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Owe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=z4(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const Mwe={kernelName:ew,backendName:"cpu",kernelFunc:Owe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pwe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=qp(i,a,s),f=!1,m=n.bufferSync(a);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),b=!!n.data.get(o.dataId).values[0];y=sh(m,v,s,p,c,u,l,d,b,f);break}case"float32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=sh(m,v,s,p,c,u,l,d,b,f);break}case"int32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=sh(m,v,s,p,c,u,l,d,b,f);break}case"string":{const v=n.bufferSync(i),b=hl(n.data.get(o.dataId).values[0]);y=sh(m,v,s,p,c,u,l,d,b,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(s,y.dtype,y.values)}const Awe={kernelName:tw,backendName:"cpu",kernelFunc:Pwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Yt(o,a.shape)[0],l=b4(a,i,s),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(d=>{const p=[...c];p[s]=d;const f=dd({inputs:{x:a},backend:n,attrs:{begin:u,size:p}});return u[s]+=d,f})}const Lwe={kernelName:Xx,backendName:"cpu",kernelFunc:Dwe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fwe={kernelName:mT,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;We(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const s=a[o];i[o]=s*s}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bwe=hn(km,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),zwe={kernelName:km,backendName:"cpu",kernelFunc:Bwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r;We(a,"stridedSlice");const{finalShapeSparse:f,finalShape:m,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=iN(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Nn({inputs:{x:a},backend:n,attrs:{shape:m}});else if(v||b){V(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=tN(x,w,S),_=dd({inputs:{x:a},backend:n,attrs:{begin:x,size:E}});C=Nn({inputs:{x:_},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(_)}else{const E=n.bufferSync(a),_=sB(f,E,S,x);C=n.makeTensorInfo(m,_.dtype,_.values)}return C}const Vwe={kernelName:nw,backendName:"cpu",kernelFunc:jwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uwe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[m,y]=lB(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",y)]}const Wwe={kernelName:rw,backendName:"cpu",kernelFunc:Uwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gwe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=uB(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Hwe={kernelName:aw,backendName:"cpu",kernelFunc:Gwe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qwe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,s=cB(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const Kwe={kernelName:iw,backendName:"cpu",kernelFunc:qwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xwe=hn(vm,t=>Math.tan(t)),Ywe={kernelName:vm,backendName:"cpu",kernelFunc:Xwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qwe=hn(xm,t=>Math.tanh(t)),Zwe={kernelName:xm,backendName:"cpu",kernelFunc:Qwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;We(a,"tile");const o=pB(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const e2e={kernelName:wm,backendName:"cpu",kernelFunc:Jwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r;We(a,"topk");const s=n.data.get(a.dataId).values,[l,u]=fB(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const n2e={kernelName:ow,backendName:"cpu",kernelFunc:t2e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r2e(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,p,f]=a.shape,[m,y]=u??[d,p],v=[c,m,y,f],b=Ze(a.shape),x=b[0],w=b[1],S=b[2],C=Ze(v),E=C[0],_=C[1],N=C[2],M=Tr(a.dtype,be(v));M.fill(l);const P=r.data.get(a.dataId).values,L=r.data.get(i.dataId).values;for(let j=0;j<c;++j){const B=i.shape[0]===1?L:L.subarray(j*8,j*8+8);for(let K=0;K<m;++K)for(let X=0;X<y;++X)for(let Z=0;Z<f;++Z){let H;const F=B[6]*X+B[7]*K+1;if(F===0)continue;const Y=(B[0]*X+B[1]*K+B[2])/F,Q=(B[3]*X+B[4]*K+B[5])/F,ne=MB(Y,p,s),se=MB(Q,d,s);switch(o){case"nearest":H=u2e(P,d,p,x,w,S,j,se,ne,Z,l);break;case"bilinear":H=c2e(P,d,p,x,w,S,j,se,ne,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const pe=j*E+K*_+X*N+Z;M[pe]=H}return r.makeTensorInfo(v,a.dtype,M)}return{dataId:r.write(M,v,a.dtype),shape:a.shape,dtype:a.dtype}}const a2e={kernelName:sw,backendName:"cpu",kernelFunc:r2e};function MB(t,e,n){switch(n){case"reflect":return i2e(t,e);case"wrap":return o2e(t,e);case"nearest":return l2e(t,e);case"constant":default:return s2e(t)}}function i2e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return wu(0,n,e-1)}function o2e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return wu(0,n,e-1)}function s2e(t,e){return t}function l2e(t,e){return wu(0,t,e-1)}function t0(t,e,n,r,a,i,o,s,l,u,c){const d=o*r+s*a+l*i+u;return 0<=s&&s<e&&0<=l&&l<n?t[d]:c}function u2e(t,e,n,r,a,i,o,s,l,u,c){const d=Math.round(s),p=Math.round(l);return t0(t,e,n,r,a,i,o,d,p,u,c)}function c2e(t,e,n,r,a,i,o,s,l,u,c){const d=Math.floor(s),p=Math.floor(l),f=d+1,m=p+1,y=(m-l)*t0(t,e,n,r,a,i,o,d,p,u,c)+(l-p)*t0(t,e,n,r,a,i,o,d,m,u,c),v=(m-l)*t0(t,e,n,r,a,i,o,f,p,u,c)+(l-p)*t0(t,e,n,r,a,i,o,f,m,u,c);return(f-s)*y+(s-d)*v}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d2e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;We(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:u}=gB(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const p2e={kernelName:lw,backendName:"cpu",kernelFunc:d2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h2e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a.shape.length,s=a.shape[i],l=new Array(o-1);let u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=a.shape[f]);const c=new Array(o).fill(0),d=a.shape.slice();d[i]=1;const p=new Array(s);for(let f=0;f<p.length;f++){c[i]=f;const m=dd({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});p[f]=Nn({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return p}const f2e={kernelName:uw,backendName:"cpu",kernelFunc:h2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r;We(a,"unsortedSegmentSum");const s=a.shape.length,l=i.shape.length,u=[],c=[],d=s-l;let p=i;for(let m=0;m<d;++m){const y=i2({inputs:{input:p},backend:n,attrs:{dim:m+1}});p=y,c.push(y)}for(let m=0;m<o;++m){const y=pl(m,"int32"),v=n.makeTensorInfo([],"int32",y),b=R7({inputs:{a:v,b:p},backend:n}),x=Du({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=r2({inputs:{a:x,b:a},backend:n}),S=e0({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});u.push(S),c.push(v),c.push(b),c.push(x),c.push(w),c.push(S)}const f=RB({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}const m2e={kernelName:cw,backendName:"cpu",kernelFunc:g2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y2e=[fye,e1e,mye,bye,o1e,xye,kye,Cye,Iye,Nye,Rye,Oye,Pye,Lye,Bye,Vye,Wye,Hye,Kye,pye,Yye,Zye,ebe,nbe,a1e,l1e,abe,t1e,obe,lbe,ube,dbe,hbe,gbe,ybe,vbe,wbe,Sbe,Ebe,Tbe,_be,$be,Mbe,Pbe,Dbe,Fbe,zbe,jbe,Vbe,Ube,Hbe,iye,Kbe,u1e,nve,c1e,rve,p1e,uve,cve,pve,f1e,gve,yve,vve,wve,Sve,m1e,b1e,n1e,Eve,sbe,Tve,_ve,$ve,oye,x1e,k1e,Mve,C1e,Ave,Fve,zve,Uve,Gve,qve,Kve,I1e,Yve,Zve,exe,nxe,axe,oxe,lxe,N1e,cxe,hxe,mxe,R1e,O1e,vxe,kxe,Exe,P1e,Txe,_xe,Rxe,$B,Pxe,lye,L1e,Dxe,Fxe,zxe,r1e,W4,Vxe,uye,cye,dye,Wxe,Hxe,Kxe,Yxe,Zxe,Jxe,twe,G1e,rwe,lwe,cwe,fwe,q1e,mwe,bwe,xwe,K1e,fxe,Swe,Ewe,Twe,_we,$we,Mwe,Awe,Lwe,Q1e,Fwe,J1e,zwe,Vwe,Wwe,Hwe,Kwe,rye,Wbe,Ywe,Zwe,e2e,n2e,a2e,A1e,p2e,f2e,m2e,Nxe];for(const t of y2e)mw(t);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pd={},s2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function b2e(t,e){pd[t]=e}function Ko(t,e){if(!(t in pd)||e!=null){const r=x2e(t,e);if(r!==null)pd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=pd[t];return n==null||n.isContextLost()?(delete pd[t],Ko(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),pd[t])}function v2e(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function x2e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??v2e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete pd[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(s2.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",s2)||n.getContext("experimental-webgl",s2):n.getContext("webgl2",s2)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var n0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(n0||(n0={}));var Li;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Li||(Li={}));var Jr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Jr||(Jr={}));function r0(t,e){return[e,t]}function w2e(t,e){return t*e}function l2(t){const e=be(t),n=Math.ceil(e/4);return Cv(n)}function ch(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function k2e(t,e){const[n,r]=ch(t,e);return n*r*4}function q4(t,e){const n=t;let r,a,i,o,s,l,u,c,d,p;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,c=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,o=n.RGBA,s=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function He(t,e){const n=e();return fe().getBool("DEBUG")&&S2e(t),n}function S2e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+T2e(t,e))}const C2e=596e-10,E2e=65504;function I2e(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||C2e<Math.abs(t)&&Math.abs(t)<E2e)}function T2e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function u2(t,e){return Cl(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function N2e(t,e){const n=Cl(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function _2e(t,e){const n=Cl(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw PB(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const R2e=/ERROR: [0-9]+:([0-9]+):/g;function PB(t,e){const n=R2e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,o=a.map((d,p)=>Hc((p+1).toString(),i)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Hc(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function $2e(t){return Cl(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function O2e(t,e){if(He(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function K4(t,e){if(He(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function M2e(t,e){const n=Cl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function P2e(t,e){const n=Cl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function A2e(t){return Cl(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function D2e(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function L2e(t){return Cl(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function AB(t,e,n,r,a,i,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),He(t,()=>t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)),He(t,()=>t.enableVertexAttribArray(s)),!0)}function F2e(t,e,n){U2e(t,n),He(t,()=>t.activeTexture(t.TEXTURE0+n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function B2e(t,e,n){return Cl(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function z2e(t,e,n){return t.getUniformLocation(e,n)}function j2e(t,e,n,r){He(t,()=>F2e(t,e,r)),He(t,()=>t.uniform1i(n,r))}function X4(t,e,n){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function DB(t,e){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function c2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+V2e(t,e))}function V2e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Cl(t,e,n){const r=He(t,()=>e());if(r==null)throw new Error(n);return r}function U2e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function dh(t,e=2){return be(t.slice(0,t.length-e))}function ph(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Y4(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[dh(t),...ph(t)]),e}function W2e(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?Sv(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=dl(t).newShape);let a=be(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const s=dh(t);let l=2,u=2;t.length&&([l,u]=ph(t)),a=s*(l/2)*(u/2),i=Cv(a).map(c=>c*2)}else i=Cv(a);return i}function d2(t){return t%2===0}function p2(t,e){if(t=t.slice(-2),e=e.slice(-2),xn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||d2(n)&&d2(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&d2(t[0])&&d2(e[0])}let Q4,Z4;function G2e(t){if(Q4==null){const e=Ko(t);Q4=e.getParameter(e.MAX_TEXTURE_SIZE)}return Q4}function H2e(t){if(Z4==null){const e=Ko(t);Z4=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Z4)}function q2e(t){if(t===0)return 0;let e;const n=Ko(t);return bo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:bo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function bo(t,e){return t.getExtension(e)!=null}function LB(t){try{if(Ko(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function K2e(t){if(t===0)return!1;const e=Ko(t);if(t===1){if(!bo(e,"OES_texture_float"))return!1}else if(!bo(e,"EXT_color_buffer_float"))return!1;return J4(e)}function X2e(t){if(t===0)return!1;const e=Ko(t);if(t===1){if(!bo(e,"OES_texture_float")||!bo(e,"WEBGL_color_buffer_float"))return!1}else{if(bo(e,"EXT_color_buffer_float"))return J4(e);const n="EXT_color_buffer_half_float";if(bo(e,n)){const r=e.getExtension(n);return Y2e(e,r)}return!1}return J4(e)}function J4(t){const e=q4(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function Y2e(t,e){const n=q4(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function Q2e(t){return t!==2?!1:Ko(t).fenceSync!=null}function a0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ye=fe();Ye.registerFlag("HAS_WEBGL",()=>Ye.getNumber("WEBGL_VERSION")>0),Ye.registerFlag("WEBGL_VERSION",()=>LB(2)?2:LB(1)?1:0),Ye.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ye.get("WEBGL_VERSION")===2),Ye.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Ye.registerFlag("WEBGL_PACK",()=>Ye.getBool("HAS_WEBGL")),Ye.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_CLIP",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_REDUCE",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_CONV_IM2COL",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>G2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>H2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ye.getNumber("WEBGL_VERSION");return t===0?0:q2e(t)}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!$T()),Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>K2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ye.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>X2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Q2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Ye.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),Ye.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>$T()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),Ye.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Ye.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Ye.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_EXP_CONV",()=>!1),Ye.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ye.getBool("IS_TEST")),Ye.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Ye.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Ye.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Aa(){let t,e,n,r,a,i,o,s,l,u;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hd(t,e,n="index"){const r=Ze(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${a}`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${o}; ${s};`}).join("")}function h2(t,e,n="index"){const r=Ze(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${s};`}).join("")}function Z2e(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function J2e(t,e,n="index"){const r=t.map((i,o)=>o),a=Z2e(r,e);return a.map((i,o)=>{const s=`int ${t[o]} = ${n} / ${a[o]}`,l=o===a.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${a[o]}`:`index -= ${t[o]} * ${a[o]}`;return`${s}; ${l};`}).join("")}function e_(t){const e=Ze(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function t_(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const FB=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{getBroadcastDims:BB}=c7;function eke(t,e,n){const r=[];if(t.forEach(p=>{const f=be(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:m}=n_(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(p=>tke(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Aa(),l=ake(s);let u,c,d=ske(s);return e.isPacked?(u=nke(e.logicalShape,o,n.enableShapeUniforms),c=oke(s)):(u=rke(e.logicalShape,o,n.enableShapeUniforms),c=ike(s)),n.packedInputs&&(d+=dke),[d,l,c,a,u,i,n.userCode].join(`
`)}function hh(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Ske(t,e);case 1:return Eke(t,e);case 2:return Tke(t,e);case 3:return _ke(t,e);case 4:return $ke(t,e);case 5:return Oke(t);case 6:return Mke(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function zB(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return kke(t);case 1:return Cke(t,e);case 2:return Ike(t,e);case 3:return Nke(t,e);default:return Rke(t,e)}}function tke(t,e,n=!1,r){let a="";n?a+=zB(t,r):a+=hh(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?a+=Pke(t,e):a+=Ake(t,e)),a}function nke(t,e,n){switch(t.length){case 0:return jB();case 1:return pke(t,e,n);case 2:return xke(t,e,n);case 3:return fke(t,e,n);default:return mke(t,e,n)}}function rke(t,e,n){switch(t.length){case 0:return jB();case 1:return hke(t,e,n);case 2:return wke(t,e,n);case 3:return gke(t,e,n);case 4:return yke(t,e,n);case 5:return bke(t,e);case 6:return vke(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function ake(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function ike(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function oke(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function ske(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${lke}
    ${uke}
    ${cke}
  `}const lke=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,uke=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cke=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dke=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function jB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function pke(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function hke(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function fke(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function gke(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${h2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=hd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function mke(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let o=i,s="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],s=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+s,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${l});
    }
  `}function yke(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${h2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=hd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function bke(t,e){const n=hd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function vke(t,e){const n=hd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function xke(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(xn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function wke(t,e,n){return xn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function fd(t){return`offset${t}`}function kke(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Aa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Ske(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=fd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Cke(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=Aa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Eke(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${fh(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],o=a[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=fd(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function Ike(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],s=i[1],l=Aa();if(i!=null&&xn(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Tke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&xn(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=i[0],f=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=dl(n),l=o;if(l.length<n.length){const p=gh(t,l),f=["row","col"];return`
      ${hh(p,e)}
      float ${a}(int row, int col) {
        return ${a}(${mh(f,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${fh(t)}
      }
    `;const u=i[0],c=i[1],d=fd(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Nke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),f=[1,2],m=gh(t,p),y=["b","row","col"];return`
        ${zB(m,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${mh(y,f)});
        }
      `}const s=Aa();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function _ke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=dl(n),u=s;if(u.length<n.length){const y=gh(t,u),v=["row","col","depth"];return`
        ${hh(y,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${mh(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${fh(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],p=c[1],f=t.shapeInfo.flatOffset;if(p===i&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===o&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=fd(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Rke(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Aa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2);let p=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",m=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<o-1;y++)f=`int b${y}, `+f,p*=i[o-y-1],m=`b${y} * ${p} + `+m;return`
    vec4 ${r}(${f}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${a.texture2D}(${n}, uv);
    }
  `}function $ke(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,{newShape:l,keptDims:u}=dl(n);if(l.length<n.length){const x=gh(t,l),w=["row","col","depth","depth2"];return`
      ${hh(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${mh(w,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${i}, 1)));
        ${fh(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1],m=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(f===s&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${m}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=fd(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${f}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function Oke(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,o=e[2]*i,s=e[1]*o,{newShape:l,keptDims:u}=dl(e);if(l.length<e.length){const y=gh(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${hh(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${mh(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${i}, ${a})) +
          depth3;
        ${fh(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=fd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${i} +
          depth2 * ${a} + depth3 + ${m};
      vec2 uv = uvFromFlat(${p}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Mke(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=dl(e);if(a.length<e.length){const v=gh(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${hh(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${mh(b,i)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${fh(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],m=p[1];if(m===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=fd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${y};
      vec2 uv = uvFromFlat(${f}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function fh(t){const e=t.name,n=be(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Pke(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=BB(t.shapeInfo.logicalShape,e.logicalShape),l=_n(o),u=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let p="";o<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let f="return outputValue;";const m=be(t.shapeInfo.logicalShape)===1,y=be(e.logicalShape)===1;if(i===1&&!m&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(s.length){const v=i-2,b=i-1;s.indexOf(v)>-1&&s.indexOf(b)>-1?f="return vec4(outputValue.x);":s.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(b)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${p});
      ${f}
    }
  `}function Ake(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&xn(o,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=_n(l),c=BB(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let p;const f=["x","y","z","w","u","v"];s===0?p="":l<2&&c.length>=1?p="coords = 0;":p=c.map(y=>`coords.${f[y+d]} = 0;`).join(`
`);let m="";return l<2&&s>0?m="coords":m=t.shapeInfo.logicalShape.map((y,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${a}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${r}(${m});
    }
  `}function _n(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function n_(t,e,n){const{newShape:r,keptDims:a}=dl(e),i=e.length,o=t&&i===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&i>1&&!xn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:a}}function gh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function mh(t,e){return e.map(n=>t[n]).join(", ")}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dke(t,e,n,r){const a=n.map((c,d)=>{const p={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(p.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),i=a.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=eke(a,o,e),l=_2e(t.gl,s),u=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},VB(t,e,u))}function VB(t,e,n){const r={},a={},i={},o=[];let s,l,u,c=null,d=null;d=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const p=!1;for(let f=0;f<e.variableNames.length;f++){const m=e.variableNames[f];r[m]=t.getUniformLocation(n,m,p),r[`offset${m}`]=t.getUniformLocation(n,`offset${m}`,p),e.enableShapeUniforms&&(a[`${m}Shape`]=t.getUniformLocation(n,`${m}Shape`,p),i[`${m}TexShape`]=t.getUniformLocation(n,`${m}TexShape`,p))}return e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",p),u=t.getUniformLocation(n,"outShapeStrides",p),l=t.getUniformLocation(n,"outTexShape",p)),e.customUniforms&&e.customUniforms.forEach((f,m)=>{o[m]=t.getUniformLocation(n,f.name,p)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:d,inShapesLocations:a,inTexShapesLocations:i,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}}function UB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],o=i.shape;if(!xn(a,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!xn(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function Lke(t,e,n,r,a){e.program.enableShapeUniforms||(UB(e.inShapeInfos,n),UB([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,u)=>{const c=e.program.variableNames[u],d=e.uniformLocations[c],p=e.uniformLocations[`offset${c}`],f=e.inShapesLocations[`${c}Shape`],m=e.inTexShapesLocations[`${c}TexShape`];if(f){const{uniformShape:y}=n_(e.program.packedInputs,l.shape,l.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(f,new Int32Array(y));break;case 2:t.gl.uniform2iv(f,new Int32Array(y));break;case 3:t.gl.uniform3iv(f,new Int32Array(y));break;case 4:t.gl.uniform4iv(f,new Int32Array(y));break}}if(m&&t.gl.uniform2i(m,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(be(l.shape)<2)t.gl.uniform1f(d,l.uniformValues[0]);else{let y=l.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(d,y)}return}l.texData.slice!=null&&p!=null&&t.gl.uniform1i(p,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ze(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a&&e.program.customUniforms.forEach((l,u)=>{const c=e.customUniformLocations[u],d=a[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function Fke(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=n_(t.packedInputs,o.shape,l);let p="",f="",m="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=Ze(c);m=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const y=o.shape.length,v=c.length===2&&xn(o.shape,l),b=be(o.shape)===1,x=nd(o.shape,n.shape),w=!t.packedInputs&&y===n.shape.length&&xn(l,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${w}_${u?d:""}_${c.length}_${b}_${x}_${v}_${p}_${f}_${m}_${S}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${fe().getNumber("WEBGL_VERSION")}`,i}function Da(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Bke{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=n0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Aa();this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?h2(["r","c","d"],e):hd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class zke{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=n0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Aa();this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?h2(["r","c","d"],e):hd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class jke{constructor(e){this.variableNames=["A"],this.outTexUsage=Li.DOWNLOAD;const n=Aa();this.outputShape=e,this.userCode=`
      ${FB}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Vke{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Li.DOWNLOAD;const n=Aa();this.outputShape=e,this.userCode=`
      ${FB}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Uke{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Aa();this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?t_():e_(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Wke{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Aa();this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?t_():e_(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gke(t){const e=Aa(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return N2e(t,n)}function Hke(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return M2e(t,e)}function qke(t){const e=new Uint16Array([0,1,2,2,1,3]);return P2e(t,e)}function i0(t,e,n,r,a,i){D2e(e,n);const o=A2e(t),s=t.TEXTURE_2D;return He(t,()=>t.bindTexture(s,o)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),He(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?He(t,()=>t.texImage2D(s,0,r,e,n,0,a,i,null)):He(t,()=>t.texStorage2D(s,1,r,e,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function WB(t){return t.internalFormatFloat}function Kke(t,e,n,r){const[a,i]=r0(e,n);return i0(t,a,i,WB(r),r.textureFormatFloat,t.FLOAT)}function GB(t){return t.internalFormatHalfFloat}function Xke(t,e,n,r){const[a,i]=r0(e,n);return i0(t,a,i,GB(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function HB(t){return t.downloadTextureFormat}function Yke(t,e,n,r){const[a,i]=r0(e,n);return i0(t,a,i,HB(r),t.RGBA,t.UNSIGNED_BYTE)}function qB(t){return t.internalFormatPackedFloat}function Qke(t,e,n,r){const[a,i]=ch(e,n);return i0(t,a,i,qB(r),t.RGBA,t.FLOAT)}function KB(t){return t.internalFormatPackedHalfFloat}function Zke(t,e,n,r){const[a,i]=ch(e,n);return i0(t,a,i,KB(r),t.RGBA,r.textureTypeHalfFloat)}function Jke(t,e,n){return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),AB(t,e,"clipSpacePos",n,3,20,0)&&AB(t,e,"uv",n,2,20,12)}function eSe(t,e,n,r,a,i){He(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=i.internalFormatPackedFloat),o.set(a),fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function tSe(t,e,n){He(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function nSe(t,e,n,r){const a=t.createBuffer();He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const i=4*4*e*n;return He(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)),He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function rSe(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function aSe(t,e,n,r){const[a,i]=r0(e,n),o=4,s=new Uint8Array(w2e(e*n,o));return He(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function iSe(t,e,n,r,a,i,o,s){const l=t,u=new Float32Array(k2e(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function oSe(t,e,n){const r=new Float32Array(e*n*4);return He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class r_{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,b2e(n,e)):this.gl=Ko(n);let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=u2(this.gl,i),bo(this.gl,o))this.textureHalfFloatExtension=u2(this.gl,o);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),bo(this.gl,a))this.colorBufferHalfFloatExtension=u2(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",bo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(bo(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Hke(this.gl),this.indexBuffer=qke(this.gl),this.framebuffer=L2e(this.gl),this.textureConfig=q4(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;He(e,()=>e.finish()),He(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),He(e,()=>e.deleteFramebuffer(this.framebuffer)),He(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),He(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),He(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Kke(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Xke(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),Yke(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),tSe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),eSe(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),Zke(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),Qke(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(DB(this.gl,this.framebuffer),this.outputTexture=null),He(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>aSe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,o){return iSe(this.gl,e,n,r,a,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return rSe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=nSe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=a.clientWaitSync(i,0,0);return o===a.ALREADY_SIGNALED||o===a.CONDITION_SATISFIED},n=i}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>oSe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Gke(n));const r=$2e(n);return He(n,()=>n.attachShader(r,this.vertexShader)),He(n,()=>n.attachShader(r,e)),O2e(n,r),this.debug&&K4(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=Jke(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&He(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&K4(this.gl,this.program),He(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?B2e(this.gl,e,n):z2e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),He(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),j2e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=ch(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&K4(this.gl,this.program),c2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),He(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),He(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=u2(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Q3(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=sSe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),Q3(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),X4(this.gl,e,this.framebuffer),this.debug&&c2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(X4(this.gl,this.outputTexture,this.framebuffer),this.debug&&c2(this.gl)):DB(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;X4(a,e,this.framebuffer),this.debug&&c2(a),this.outputTexture=e,He(a,()=>a.viewport(0,0,n,r)),He(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),He(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function sSe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{addImpl:lSe,bincountImpl:XB,bincountReduceImpl:uSe,castImpl:cSe,ceilImpl:dSe,concatImpl:pSe,equalImpl:hSe,expImpl:fSe,expm1Impl:gSe,floorImpl:mSe,gatherNdImpl:ySe,gatherV2Impl:bSe,greaterImpl:vSe,greaterEqualImpl:xSe,lessImpl:wSe,lessEqualImpl:kSe,linSpaceImpl:SSe,logImpl:CSe,maxImpl:ESe,maximumImpl:ISe,minimumImpl:TSe,multiplyImpl:NSe,negImpl:_Se,notEqualImpl:RSe,prodImpl:$Se,raggedGatherImpl:OSe,raggedTensorToTensorImpl:MSe,rangeImpl:PSe,rsqrtImpl:ASe,scatterImpl:DSe,sigmoidImpl:LSe,simpleAbsImpl:YB,sliceImpl:FSe,sparseFillEmptyRowsImpl:BSe,sparseReshapeImpl:zSe,sparseSegmentReductionImpl:QB,sqrtImpl:jSe,stridedSliceImpl:VSe,stringNGramsImpl:USe,stringSplitImpl:WSe,stringToHashBucketFastImpl:GSe,subImpl:HSe,tileImpl:qSe,topKImpl:KSe,transposeImpl:a_,uniqueImpl:XSe}=aye;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZB(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function La(t,e){return e===1?[t]:ZB(t,e)}function YSe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class QSe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Da(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=La("rc",this.rank),r=_n(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JB{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${ZSe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?t_():e_(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function ZSe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?J2e(["r","c","d"],"inputShape"):hd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JSe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const a=tz(n,r),i=nz(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=ez(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let s;return a===Jr.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Jr.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Jr.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Jr.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Jr.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=tz(r,a),o=nz(n,i,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=ez(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),l=fe().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function eCe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F||e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function ez(t,e,n,r,a){const i=tCe(e,r);let o;if(a){const[l,u]=ch(t[0],t[1]);o=l*u}else{const[l,u]=r0(t[0],t[1]);o=l*u}const s=eCe(n,i);return o*s}function tCe(t,e){switch(t){case Jr.PACKED_2X2_FLOAT32:return qB(e);case Jr.PACKED_2X2_FLOAT16:return KB(e);case Jr.UNPACKED_FLOAT32:return WB(e);case Jr.UNPACKED_FLOAT16:return GB(e);case Jr.PACKED_4X1_UNSIGNED_BYTE:return HB(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function nCe(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Jr.PACKED_2X2_FLOAT32:Jr.UNPACKED_FLOAT32:t?Jr.PACKED_2X2_FLOAT16:Jr.UNPACKED_FLOAT16}function tz(t,e){if(t===Li.UPLOAD)return Jr.PACKED_2X2_FLOAT32;if(t===Li.RENDER||t==null)return nCe(e);if(t===Li.DOWNLOAD||t===Li.PIXELS)return Jr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function nz(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class El{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const vo="if (isnan(x)) return x;",rCe="return x;",rz="return abs(x);",aCe="return (x >= 0.0) ? x : (exp(x) - 1.0);",iCe=vo+`
  return (x < 0.0) ? 0.0 : x;
`,oCe=vo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,yh="return x;",sCe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lCe="return x;",uCe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,cCe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,dCe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,pCe="return 1.0 / (1.0 + exp(-1.0 * x));";class gd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class hCe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length);const n=e.length,r=La("rc",n),a=_n(n),i=YSe(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fCe=Dw,gCe=1e-7,mCe=1e-4,i_={};function yCe(t){return t in i_||(i_[t]={}),i_[t]}const bCe=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),vCe=600;function xCe(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*vCe/1024/1024}class Y2 extends kv{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof r_)n=e;else{const r=Ko(fe().getNumber("WEBGL_VERSION"),e);n=new r_(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Ko(fe().getNumber("WEBGL_VERSION"));n=new r_(r),this.binaryCache=yCe(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new JSe(this.gpgpu),this.numMBBeforeWarning=xCe(),this.texData=new Y3(this,yl())}nextDataId(){return Y2.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Li.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Li.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:o,shape:s,isPacked:l}=n;if(o!=null){let p;l?p=new gd(s,yh):p=new El(s,yh);const f=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),m=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=pi());let d;if(a==="complex64"){const p=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=kl(p,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=pi()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(y=>m.push(y))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(i!=null){let m;l?m=new gd(a,yh):m=new El(a,yh);const y=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:o}],o),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const m=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...l2(a))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const m=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),y=m[0],v=m[1];d=kl(y,v)}else if(u==null)d=this.getValuesFromTexture(e);else{const m=be(a);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const m=this.gpgpu.gl;He(m,()=>m.deleteBuffer(u))}const p=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(m=>m(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&yl().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:o,dtype:s,isPacked:l,texture:u}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new gd(i,yh):f=new El(i,yh);const m=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:s}],s),y=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),y}if(u==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=yl().makeTensorFromTensorInfo(c),p=this.texData.get(c.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>hl(a));return Ct(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ct(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!I2e(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=be(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),f=this.texData.get(p.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...l2(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),m}const o=fe().getBool("WEBGL_PACK")&&a===!0,s=o?Y4(n):n,l=o?new Vke(s):new jke(s),u=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=cl(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=cl(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);s.kernelMs=i8(l),s.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:pi(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=pi(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=bCe){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&be(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Di("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return fCe(e.shape,n)}packedUnaryOp(e,n,r){const a=new gd(e.shape,n),i=this.compileAndRun(a,[e],r);return yl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=YB(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rz,e.dtype);const n=new El(e.shape,rz),r=this.compileAndRun(n,[e]);return yl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&gs(r[0])){const i=r.map(o=>ms(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return yl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new hCe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new QSe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[dh(e.shape),...ph(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[dh(n),...ph(n)],o=new JB(i,r),s=!0,l=[r],u=this.runWebGLProgram(o,[a],e.dtype,l,s);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:o}=r;if(n!=null){const p=be(i),f=n[0]*n[1]*4;V(p<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=Y4(i);let l;a?l=new zke(s):l=new Bke(s);const u=!0,c=[n??l2(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,a,i=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===n0.DENSE){const b=o??l2(e.outputShape);l.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),be(s.shape)===0)return l.values=Tr(s.dtype,0),s;const u=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&be(b.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!p2(x.shape,b.shape)){const w=b,S=b.shape;b.shape=x.shape,b=this.packedReshape(b,S),u.push(b),x=this.texData.get(b.dataId),w.shape=S}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},p=Fke(e,c,d),f=this.getAndSaveBinary(p,()=>Dke(this.gpgpu,e,c,d)),m=this.activeTimers!=null;let y;m&&(y=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||Lke(this.gpgpu,f,c,d,a),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),m&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=fe().get("WEBGL_FLUSH_THRESHOLD");if(v>0){const b=pi();b-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=qt(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(Bt(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?gCe:mCe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=pi());let d=n.texShape;if(d==null&&(d=W2e(r,l),n.texShape=d),i!=null){const p=Y4(r);let f,m=d[1],y=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([m,y]=ch(d[0],d[1])),l?f=new Wke(p,v):f=new Uke(p,v);const b=v?[y,m]:d,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);v?w.usage=Li.PIXELS:w.usage=Li.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,y,i);const S=[[y,m]],C=!0,E=this.runWebGLProgram(f,[x],a,S,C),_=this.texData.get(E.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=pi()-c)}else{const p=this.acquireTexture(d,s,a,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return this.releaseGPUData(e),n!=null&&(r.values=wCe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*Ev(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await L9(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(PB(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=VB(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=l,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}}Y2.nextDataId=0;function wCe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/OT()&&KT("webgl",()=>new Y2,2);/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const o_=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class bh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=jt(n,r),this.enableShapeUniforms=Da(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const o0=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class s0{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=jt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Da(i);let o="";if(a)if(i===0||be(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${_n(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const s=La("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const kCe={kernelName:Vg,backendName:"webgl",kernelFunc:bi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fu(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=bi({inputs:{x:r},backend:n}),l=bi({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}const SCe={kernelName:zv,backendName:"webgl",kernelFunc:Fu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const az="return (a < 0.) ? b * a : a;",iz=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function CCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",pl(i,"float32")),s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s0(iz,a.shape,o.shape):new bh(az,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const ECe={kernelName:fx,backendName:"webgl",kernelFunc:CCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oz="return (a < 0.) ? b * a : a;",sz=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function ICe(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s0(sz,r.shape,a.shape):new bh(oz,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const TCe={kernelName:Mx,backendName:"webgl",kernelFunc:ICe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vh="if (isnan(x)) return x;";function Kt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:o}=a,s=i,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),p=n(d.values,l);return s.makeTensorInfo(o.shape,l,p)}const u=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new gd(o.shape,e):c=new El(o.shape,t),s.runWebGLProgram(c,[o],l)}}function ea({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:o,backend:s})=>{const{a:l,b:u}=o,c=s;if(r&&l.dtype==="complex64"){const m=c.texData.get(l.dataId),y=c.texData.get(u.dataId),[v,b]=[[m.complexTensorInfos.real,y.complexTensorInfos.real],[m.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(w=>{const[S,C]=w,E={dataId:S.dataId,dtype:S.dtype,shape:l.shape},_={dataId:C.dataId,dtype:C.dtype,shape:u.shape},N=new bh(t,l.shape,u.shape);return c.runWebGLProgram(N,[E,_],Ya(S.dtype,C.dtype))}),x=Fu({inputs:{real:v,imag:b},backend:c});return c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(b),x}const d=i||Ya(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&a!=null){const m=c.texData.get(l.dataId).values,y=c.texData.get(u.dataId).values,v=l.dtype==="string"?ud(m):m,b=l.dtype==="string"?ud(y):y,[x,w]=a(l.shape,u.shape,v,b,d),S=c.makeTensorInfo(w,d),C=c.texData.get(S.dataId);return C.values=x,S}const p=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return p?f=new s0(e,l.shape,u.shape,n):f=new bh(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function l0(t,e=!1){if(t==="linear")return e?lCe:rCe;if(t==="relu")return e?cCe:iCe;if(t==="elu")return e?uCe:aCe;if(t==="relu6")return e?dCe:oCe;if(t==="prelu")return e?sz:oz;if(t==="leakyrelu")return e?iz:az;if(t==="sigmoid")return e?pCe:sCe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lz{constructor(e,n,r,a=!1,i=!1,o=!1,s=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Da(this.outputShape.length);const c=a?e[1]:e[2],d=Math.ceil(c/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",b="";s&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:v=`vec4 activation(vec4 x) {
          ${s}
        }`,b="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(S=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${S};
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${y[0]});
          result += (${m[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uz={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class cz{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=jt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dz="return a * b;";function s_(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=Ya(r.dtype,a.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),u=new cz(uz.REAL,r.shape,a.shape),c=new cz(uz.IMAG,r.shape,a.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),m=Fu({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}if(n.shouldExecuteOnCPU([r,a])){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[u,c]=NSe(r.shape,a.shape,s.values,l.values,i),d=n.makeTensorInfo(c,i),p=n.texData.get(d.dataId);return p.values=u,d}let o;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new s0(dz,r.shape,a.shape):o=new bh(dz,r.shape,a.shape),n.runWebGLProgram(o,[r,a],i)}const NCe={kernelName:nm,backendName:"webgl",kernelFunc:s_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _Ce(t,e,n){const r=[dh(t.shape),...ph(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[dh(e),...ph(e)],o=new JB(i,r),s=!0,l=[r],u=n.runWebGLProgram(o,[a],t.dtype,l,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=n,s=be(a.shape),l=Z3(i,s),u=be(l);V(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(a.dataId);return c.isPacked&&!p2(a.shape,l)&&!(c.texture!==null&&p2(c.shape,l))?_Ce(a,l,o):(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}const RCe={kernelName:Bx,backendName:"webgl",kernelFunc:Le};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class pz{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];const s=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Gc(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $Ce{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OCe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=Qw(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function md(t,e,n,r){const a=OCe(t.shape);let i=t;for(let o=0;o<a.length;o++){const{inSize:s,windowSize:l,outSize:u}=a[o];let c,d;n==="mean"?c=o===0?new pz({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},s):new pz({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u}):c=new $Ce({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class MCe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const a=_n(this.rank),i=PCe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function PCe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ACe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=_n(this.rank),i=ZB("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const s=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f2(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ACe(t.shape,e):new MCe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DCe(t,e,n,r){const a=e,i=t.shape.length,o=Yt(a,t.shape);let s=o;const l=pr(s,i),u=l!=null;let c=t;u&&(c=f2(t,l,r),s=hr(s.length,i)),Zr("sum",s,i);const[d,p]=Qr(c.shape,s);let f=d;n&&(f=Rr(d,o));const m=be(p),y=be(t.shape)/m,v=Le({inputs:{x:c},attrs:{shape:[y,m]},backend:r}),b=xw(t.dtype),x=md(v,b,"sum",r),w=Le({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),w}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g2(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;return DCe(a,i,o,n)}const LCe={kernelName:qx,backendName:"webgl",kernelFunc:g2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fa(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,o=n,s=a.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=a.shape[i[c]];let u;if(o.shouldExecuteOnCPU([a])){const c=o.texData.get(a.dataId).values,d=a_(c,a.shape,a.dtype,i,l);u=o.makeTensorInfo(l,a.dtype);const p=o.texData.get(u.dataId);p.values=d}else u=f2(a,i,o);return u}const FCe={kernelName:Bp,backendName:"webgl",kernelFunc:Fa};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hz=1e3;function m2({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],p=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],m=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),b=be(y),x=be(v),w=jt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,m]);V(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[b,d,f]:[b,f,d],C=r?[x,m,p]:[x,p,m],E=Le({inputs:{x:t},backend:a,attrs:{shape:S}}),_=Le({inputs:{x:e},backend:a,attrs:{shape:C}}),N=[E,_],M=Math.max(b,x),P=n?E.shape[1]:E.shape[2],L=i!=null,j=o!=null,B=l==="leakyrelu",K=l!=null?l0(l,!0):null,X=L||j||B||K!=null;let Z;if((f===1||m===1)&&P>hz&&X===!1){let F=E,Y=_;n&&(F=Fa({inputs:{x:E},backend:a,attrs:{perm:[0,2,1]}}),N.push(F)),r&&(Y=Fa({inputs:{x:_},backend:a,attrs:{perm:[0,2,1]}}),N.push(Y));const Q=m!==1,ne=m===1;let se=F;Q&&(se=Le({inputs:{x:F},backend:a,attrs:{shape:[M,P,1]}}),N.push(se));const pe=m===1?2:1;let de=Y;ne&&(de=Le({inputs:{x:Y},backend:a,attrs:{shape:[M,1,P]}}),N.push(de));const ie=s_({inputs:{a:se,b:de},backend:a});Z=g2({inputs:{x:ie},backend:a,attrs:{axis:pe,keepDims:!0}}),N.push(ie)}else{const F=Ya(t.dtype,e.dtype),Y=new lz(S,C,[M,f,m],n,r,L,K,j,B),Q=[E,_];if(i!=null&&Q.push(i),j&&Q.push(o),B){const ne=a.makeTensorInfo([],"float32",pl(s,"float32"));Q.push(ne),N.push(ne)}Z=a.runWebGLProgram(Y,Q,F)}const H=Le({inputs:{x:Z},backend:a,attrs:{shape:w}});N.push(Z);for(const F of N)a.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BCe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return m2({a,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}const zCe={kernelName:Sm,backendName:"webgl",kernelFunc:BCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fz="return abs(x);";function jCe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=YB(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new gd(r.shape,fz):a=new El(r.shape,fz),n.runWebGLProgram(a,[r],r.dtype)}const VCe={kernelName:Nv,backendName:"webgl",kernelFunc:jCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const UCe=vo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,WCe=Kt({opSnippet:UCe}),GCe={kernelName:xg,backendName:"webgl",kernelFunc:WCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const HCe=vo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,qCe=Kt({opSnippet:HCe}),KCe={kernelName:wg,backendName:"webgl",kernelFunc:qCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gz="return a + b;",XCe=ea({opSnippet:gz,packedOpSnippet:gz,supportsComplex:!0,cpuKernelImpl:lSe}),YCe={kernelName:Fp,backendName:"webgl",kernelFunc:XCe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class QCe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ZCe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y2(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return bi({inputs:{x:r[0]},backend:n});if(r.length>fe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const s=Math.floor(r.length/2),l=y2({inputs:r.slice(0,s),backend:n}),u=y2({inputs:r.slice(s),backend:n});return y2({inputs:[l,u],backend:n})}const a=r.map(s=>s.dtype).reduce((s,l)=>Ya(s,l)),i=r.map(s=>s.shape),o=fe().getBool("WEBGL_PACK")?new ZCe(r[0].shape,i):new QCe(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const JCe={kernelName:_v,backendName:"webgl",kernelFunc:y2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Yt(i,a.shape);let u=l;const c=pr(u,s);let d=a;c!=null&&(d=Fa({inputs:{x:a},backend:n,attrs:{perm:c}}),u=hr(u.length,s)),Zr("all",u,s);const[p,f]=Qr(d.shape,u),m=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=md(y,y.dtype,"all",n);let b;if(o){const x=Rr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const tEe={kernelName:Rv,backendName:"webgl",kernelFunc:eEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Yt(i,a.shape);let u=l;const c=pr(u,s);let d=a;c!=null&&(d=Fa({inputs:{x:a},backend:n,attrs:{perm:c}}),u=hr(u.length,s)),Zr("any",u,s);const[p,f]=Qr(d.shape,u),m=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=md(y,y.dtype,"any",n);let b;if(o){const x=Rr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const rEe={kernelName:$v,backendName:"webgl",kernelFunc:nEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class aEe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class iEe{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,u=_n(l),c=La("coords",l);let d,p;if(o===1){p=l+1;const N=_n(p);d=`
        ${N} sourceLocR = ${N}(${c.join()}, 0);
        ++${c[l-1]};
        ${N} sourceLocG = ${N}(${c.join()}, 0);
        ++${c[l-2]};
        ${N} sourceLocA = ${N}(${c.join()}, 0);
        --${c[l-1]};
        ${N} sourceLocB = ${N}(${c.join()}, 0);
        --${c[l-2]};`}else p=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,p),m="."+f[p-1],y=f.map(N=>"int "+N),v=La("sourceLocR",p-1).concat("inIdx.r"),b=La("sourceLocG",p-1).concat("inIdx.g"),x=La("sourceLocB",p-1).concat("inIdx.b"),w=La("sourceLocA",p-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,E=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,_=a?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mz(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const o=Qw(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new aEe(s,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=mz(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function yz(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],o=Qw(i),s=new iEe(a,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(s,l,"int32");if(u.shape.length===e.shape.length){const c=yz(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function bz(t,e,n,r){const a=[n];if(Zr("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Qr(l.shape,a),d=be(c),p=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);const f=mz(t,p,r);i.push(f);const m=Le({inputs:{x:f},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),m}return yz(t,e,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Yt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Fa({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=hr(o.length,l.shape.length)),Zr("argMax",[o[0]],l.shape.length);const c=bz(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const sEe={kernelName:Ov,backendName:"webgl",kernelFunc:oEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Yt(i,a.shape);const s=pr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Fa({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=hr(o.length,l.shape.length)),Zr("argMin",[o[0]],l.shape.length);const c=bz(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const uEe={kernelName:Mv,backendName:"webgl",kernelFunc:lEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cEe=vo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,dEe=Kt({opSnippet:cEe}),pEe={kernelName:kg,backendName:"webgl",kernelFunc:dEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hEe=vo+"return log(x + sqrt(x * x + 1.0));",fEe=Kt({opSnippet:hEe}),gEe={kernelName:Sg,backendName:"webgl",kernelFunc:fEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mEe=vo+`
  return atan(x);
`,yEe=Kt({opSnippet:mEe}),bEe={kernelName:Cg,backendName:"webgl",kernelFunc:yEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vEe=o_+`
  return atan(a, b);
`,xEe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+o0+`
  return result;
`,wEe=ea({opSnippet:vEe,packedOpSnippet:xEe}),kEe={kernelName:Ig,backendName:"webgl",kernelFunc:wEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const SEe=vo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,CEe=Kt({opSnippet:SEe}),EEe={kernelName:Eg,backendName:"webgl",kernelFunc:CEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class u0{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(y||(x="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${f}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?v:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const C=Math.floor(o/4)*4,E=o%4,_=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${f}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${S});
      }
    `}}class l_{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,f=e.effectiveFilterDepth,m=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),r){const P=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${P} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / count");const _=Math.floor(o/4)*4,N=o%4,M=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${b}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${M}
            }

            int xC = xCCorner + ${_};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${M}
            }
          }
          setOutput(${E});
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function IEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;a0(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ha(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=co(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&xn(c.inShape,c.outShape))return bi({inputs:{x:a},backend:n});const d=new u0(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const TEe={kernelName:Pv,backendName:"webgl",kernelFunc:IEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function NEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=bl(a.shape,i,o,c,s,l,u),p=new l_(d,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}const _Ee={kernelName:Av,backendName:"webgl",kernelFunc:NEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class REe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class $Ee{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=d-1-e.padInfo.front,y=p-1-e.padInfo.top,v=f-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${y}, ${v});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=bl(o.shape,s,l,d,u,c),f=new $Ee(p);return n.runWebGLProgram(f,[a],o.dtype)}const MEe={kernelName:oT,backendName:"webgl",kernelFunc:OEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;a0([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=co(o.shape,s,l,1,u),d=new REe(c);return n.runWebGLProgram(d,[a],o.dtype)}const AEe={kernelName:iT,backendName:"webgl",kernelFunc:PEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DEe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;return m2({a,b:i,transposeA:o,transposeB:s,backend:n})}const LEe={kernelName:Dv,backendName:"webgl",kernelFunc:DEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class FEe{constructor(e,n,r,a,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],jt(e,n),jt(e,r);let s="0.0";a!=null&&(jt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";i!=null&&(jt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BEe{constructor(e,n,r,a,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],jt(e,n),jt(e,r);let s="vec4(0.0)";a!=null&&(jt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(jt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zEe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:o,scale:s}=t;V(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,a,i];let c=null;o!=null&&(c=o.shape,u.push(o));let d=null;s!=null&&(d=s.shape,u.push(s));const p=fe().getBool("WEBGL_PACK_NORMALIZATION")?new BEe(r.shape,a.shape,i.shape,c,d,l):new FEe(r.shape,a.shape,i.shape,c,d,l);return e.runWebGLProgram(p,u,u[0].dtype)},jEe={kernelName:ux,backendName:"webgl",kernelFunc:zEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class VEe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=_n(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=UEe(this.rank);let a;const i=e.map((o,s)=>`sourceLoc.${u_[s]} = start[${s}] + coords.${u_[s]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const u_=["x","y","z","w","u","v"];function UEe(t){if(t===1)return"sourceLoc";if(t<=6)return u_.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class WEe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=_n(this.rank),r=La("coords",this.rank),a=La("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${o};
        --${a[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${a[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GEe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=rN(e,Ze(t.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function xh(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r,[s,l]=aN(a,i,o);if(eN(a,s,l),be(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const d=n.texData.get(a.dataId),p=FSe(d.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}const{isPacked:u}=n.texData.get(a.dataId),c=nN(a.shape,s,l);if(u||!c){const d=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WEe(l):new VEe(l),p=[s];return n.runWebGLProgram(d,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),GEe(a,s,l,n)}const HEe={kernelName:Hx,backendName:"webgl",kernelFunc:xh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qEe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;V(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((x,w)=>x*w),l=Xm(a.shape,i,s),u=Ym(l.length,i.length),c=Qm(a.shape,i,s),d=t4(o,i.length),p=n4(c,o,i.length),f=[],m=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),y=Fa({inputs:{x:m},backend:n,attrs:{perm:u}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:c}}),b=xh({inputs:{x:v},backend:n,attrs:{begin:d,size:p}});return f.push(m),f.push(y),f.push(v),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},KEe={kernelName:Lv,backendName:"webgl",kernelFunc:qEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=XB(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const YEe={kernelName:Fv,backendName:"webgl",kernelFunc:XEe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QEe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=jt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const ZEe={kernelName:Bv,backendName:"webgl",kernelFunc:QEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const JEe="return float(a != b);",vz=ea({opSnippet:JEe,cpuKernelImpl:RSe,dtype:"bool"}),eIe={kernelName:rm,backendName:"webgl",kernelFunc:vz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c0(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return bi({inputs:{x:a.complexTensorInfos.real},backend:n})}const tIe={kernelName:Fx,backendName:"webgl",kernelFunc:c0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nIe="return float(int(x));";function rIe(t,e){const n=new El(t.shape,nIe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c_(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return bi({inputs:{x:a},backend:n});const o=Ru(a.shape),s=c_({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=Fu({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(a.dtype==="complex64"){const o=c0({inputs:{input:a},backend:n}),s=c_({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),s}if(!J3(a.dtype,i)){const o=bi({inputs:{x:a},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const o=n.texData.get(a.dataId).values,[s,l,u]=cSe(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}if(i==="int32")return rIe(a,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Tr("bool",1)),s=vz({inputs:{a,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),s}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const aIe={kernelName:Tg,backendName:"webgl",kernelFunc:c_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xz="return ceil(x);",iIe=Kt({opSnippet:xz,packedOpSnippet:xz,cpuKernelImpl:dSe}),oIe={kernelName:Ng,backendName:"webgl",kernelFunc:iIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sIe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lIe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:o}=r;let s;fe().getBool("WEBGL_PACK_CLIP")?s=new lIe(a.shape):s=new sIe(a.shape);const l=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,l)}const cIe={kernelName:_g,backendName:"webgl",kernelFunc:uIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class dIe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wz(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function pIe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new dIe(r.shape),o=[wz(r,a.complexTensorInfos.real),wz(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const hIe={kernelName:jv,backendName:"webgl",kernelFunc:pIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class fIe{constructor(e){this.outputShape=[],this.outputShape=Ss(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gIe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ss(e,n);const r=this.outputShape,a=r.length,i=_n(a),o=La("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((y,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const u=s[n],c=s.slice(-2),d=s.join();let p=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<l.length;y++){const v=l[y-1];p+=`
        if (${u} < ${l[y]}  && ${u} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${b2(s,u,v)}),
            vec2(${b2(c,u,v)}));
        }`}const f=l.length,m=l[l.length-1];p+=`
        return getChannel(
          getT${f}(${b2(s,u,m)}),
          vec2(${b2(c,u,m)}));`,this.userCode=`
      float getValue(${s.map(y=>"int "+y)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[a-1]} = ${o[a-1]} + 1;
        if (${o[a-1]} < ${r[a-1]}) {
          result.g = getValue(${o});
        }

        ${o[a-2]} = ${o[a-2]} + 1;
        if (${o[a-2]} < ${r[a-2]}) {
          result.a = getValue(${o});
        }

        ${o[a-1]} = ${o[a-1]} - 1;
        if (${o[a-2]} < ${r[a-2]} &&
            ${o[a-1]} < ${r[a-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function b2(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v2(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return bi({inputs:{x:a.complexTensorInfos.imag},backend:n})}const mIe={kernelName:hx,backendName:"webgl",kernelFunc:v2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d0(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(v=>c0({inputs:{input:v},backend:n})),p=t.map(v=>v2({inputs:{input:v},backend:n})),f=d0(d,e,n),m=d0(p,e,n),y=Fu({inputs:{real:f,imag:m},backend:n});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const d=t.map(x=>{const w=[-1,be(x.shape.slice(e))];return Le({inputs:{x},backend:n,attrs:{shape:w}})}),p=d.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),f=Ss(d.map(x=>x.shape),1),m=d[0].shape[0]===1,y=pSe(p,f,r,m),v=Ss(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>i){const d=[];for(let f=0;f<t.length;f+=i){const m=t.slice(f,f+i);d.push(d0(m,e,n))}const p=d0(d,e,n);for(const f of d)n.disposeIntermediateTensorInfo(f);return p}if(fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const d=new gIe(t.map(p=>p.shape),e);return n.runWebGLProgram(d,t,r)}const{tensors2D:o,outShape:s}=yIe(t,e,n),l=new fIe(o.map(d=>d.shape)),u=n.runWebGLProgram(l,o,r);o.forEach(d=>n.disposeIntermediateTensorInfo(d));const c=Le({inputs:{x:u},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(u),c}function yIe(t,e,n){const r=Ss(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Le({inputs:{x:a},attrs:{shape:[-1,be(a.shape.slice(e))]},backend:n})),outShape:r}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kz(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Yt(a,e[0].shape)[0],o=e.map(u=>u.shape);ZN(o,i);const s=Ss(e.map(u=>u.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(u=>be(u.shape)>0);return l.length===1?bi({inputs:{x:l[0]},backend:n}):d0(l,i,n)}const bIe={kernelName:Vv,backendName:"webgl",kernelFunc:kz};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Sz{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,m=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",b=v?1:2,x=v?2:3,w=v?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class vIe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,f=e.filterWidth,m=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Cz{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Da(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<c;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<c;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const b=v*2;if(p+=`
           xC = xCCorner + ${b*l};
           `,s===1){if(b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=o%2===0?Sv(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let f="",m="";r&&(a?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${m}
         setOutput(result);
       }
     `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xIe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Da(this.outputShape.length);const{dataFormat:r}=n,a=Aa(),i=r==="channelsLast",o=i?1:2,s=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${a.output} = result;
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Ez({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,f=n.dataFormat==="channelsLast",m=!1,y=!1;let v;const b=[];if(i!=null){const x=x2(i.shape,f);x!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:x}}),b.push(i))}if(a!=null){const x=x2(a.shape,f);x!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:x}}),b.push(a))}if(!((d===1||p===1)&&c>hz)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&xn(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,V(p2(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);const E=m2({a:w,b:C,backend:r,transposeA:m,transposeB:y,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o}),_=r.texData.get(E.dataId);V(_.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,_.shape=n.outShape,v=bi({inputs:{x:E},backend:r}),v.shape=n.outShape,b.push(E)}else{const x=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=m2({a:f?w:S,b:f?S:w,transposeA:!f,transposeB:y,backend:r,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o});v=Le({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),b.push(w),b.push(S),b.push(C)}for(const x of b)r.disposeIntermediateTensorInfo(x);return v}function Iz({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:p,dataFormat:f}=n,m=f==="channelsLast",y=l*u*c,v=p*d,b=[n.batchSize,y,v],x=!0,w=!1,S=[];if(i!=null){const F=x2(i.shape,m);F!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:F}}),S.push(i))}if(a!=null){const F=x2(a.shape,m);F!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:F}}),S.push(a))}const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,y,be(e.shape)/y]}});S.push(C);const E=new xIe(b,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(E,[t],"float32",_),M=Le({inputs:{x:N},backend:r,attrs:{shape:b}});S.push(N),S.push(M);const P=a!=null,L=i!=null,j=s==="leakyrelu",B=s?l0(s,!0):null,K=new lz(m?M.shape:C.shape,m?C.shape:M.shape,m?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],x,w,P,B,L,j),X=m?[M,C]:[C,M];if(a&&X.push(a),L&&X.push(i),j){const F=r.makeTensorInfo([],"float32",pl(o,"float32"));X.push(F),S.push(F)}const Z=r.runWebGLProgram(K,X,"float32"),H=Le({inputs:{x:Z},backend:r,attrs:{shape:n.outShape}});S.push(Z);for(const F of S)r.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=vl(l),p=zr(a.shape,i.shape,o,u,s,c,!1,d);let f;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))f=Ez({x:a,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const y=new Cz(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];f=n.runWebGLProgram(y,[a,i],"float32",v)}else if(fe().getBool("WEBGL_CONV_IM2COL"))f=Iz({x:a,filter:i,convInfo:p,backend:n});else{const y=new Sz(p);f=n.runWebGLProgram(y,[a,i],"float32")}const m=Le({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),m}const kIe={kernelName:Uv,backendName:"webgl",kernelFunc:wIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class SIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class CIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class EIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class IIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=vl(l),p=zr(a.shape,c,o,1,s,u,!1,d),f=new SIe(p);return n.runWebGLProgram(f,[a,i],"float32")}const NIe={kernelName:Wv,backendName:"webgl",kernelFunc:TIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _Ie(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=vl(u),p=zr(o,i.shape,s,1,l,c,!1,d),f=new CIe(p);return n.runWebGLProgram(f,[a,i],"float32")}const RIe={kernelName:Gv,backendName:"webgl",kernelFunc:_Ie};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $Ie(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=Nu(a.shape,i.shape,o,l,s),c=new vIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const OIe={kernelName:Hv,backendName:"webgl",kernelFunc:$Ie};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function MIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r,u=Nu(a.shape,l,o,1,s),c=new EIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const PIe={kernelName:sT,backendName:"webgl",kernelFunc:MIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function AIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r,u=Nu(l,i.shape,s,1,o),c=new IIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const DIe={kernelName:qv,backendName:"webgl",kernelFunc:AIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const LIe=vh+`
  return cos(x);
`,FIe=Kt({opSnippet:LIe}),BIe={kernelName:Rg,backendName:"webgl",kernelFunc:FIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zIe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,jIe=Kt({opSnippet:zIe}),VIe={kernelName:$g,backendName:"webgl",kernelFunc:jIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class UIe{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,u]=e,[c]=n,[d,p]=r;this.outputShape=[c,d,p,u];const f=a==="bilinear"?1:0,[m,y]=[`${s-1}.0`,`${l-1}.0`],[v,b,x]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[w,S,C]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const WIe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,c=new UIe(a.shape,i.shape,s,l,u);return n.runWebGLProgram(c,[a,i,o],"float32")},GIe={kernelName:Yv,backendName:"webgl",kernelFunc:WIe};var p0;(function(t){t.Prod="*",t.Sum="+"})(p0||(p0={}));class Tz{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===p0.Prod?"1.0":"0.0",s=r?o:`getX(${Nz(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=a?`end != ${l-1}`:"end != 0",c=a?"end + 1":"end - 1"):(u=a?`end + pow2 < ${l}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${_n(i)} coords = getOutputCoords();
        int end = ${_z(i,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${_z(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${Nz(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Nz(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function _z(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rz(t,e,n,r,a,i){const o=e.shape.length,s=pr([r],o);let l=e;s!=null&&(l=Fa({inputs:{x:e},backend:n,attrs:{perm:s}}));const u=hr(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=bi({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(c))-1;p++){const f=new Tz(t,l.shape,!1,i),m=[[p]],y=d;d=n.runWebGLProgram(f,[d],d.dtype,m),n.disposeIntermediateTensorInfo(y)}if(a){const p=new Tz(t,l.shape,a,i),f=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(s!=null){const p=zm(s),f=Fa({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function HIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return Rz(p0.Prod,a,n,i,o,s)}const qIe={kernelName:Kv,backendName:"webgl",kernelFunc:HIe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return Rz(p0.Sum,a,n,i,o,s)}const XIe={kernelName:Xv,backendName:"webgl",kernelFunc:KIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=XB(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=uSe(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const QIe={kernelName:Qv,backendName:"webgl",kernelFunc:YIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ZIe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function JIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r,s=a.shape[0],l=o==="NHWC"?a.shape[1]:a.shape[2],u=o==="NHWC"?a.shape[2]:a.shape[3],c=o==="NHWC"?a.shape[3]:a.shape[1],d=l*i,p=u*i,f=c/(i*i),m=o==="NHWC"?[s,d,p,f]:[s,f,d,p],y=new ZIe(m,i,o);return n.runWebGLProgram(y,[a],a.dtype)}const e3e={kernelName:Zv,backendName:"webgl",kernelFunc:JIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $z{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Da(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(a?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Oz{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Da(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)f+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<d;b++)f+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){const x=b*2;if(f+=`
          xC = xCCorner + ${x*u};
          `,l===1){if(x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,u===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const w=s%2===0?Sv(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let m="",y="";r&&(a?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),V(ha(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=zr(a.shape,i.shape,o,c,s,u,!0);let p;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new Oz(d):p=new $z(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[a,i],"float32",f)}const n3e={kernelName:Jv,backendName:"webgl",kernelFunc:t3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class r3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class a3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=zr(a.shape,c,o,s,l,u,!0),p=new r3e(d);return n.runWebGLProgram(p,[a,i],"float32")}const o3e={kernelName:ex,backendName:"webgl",kernelFunc:i3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=zr(c,i.shape,o,s,l,u,!0),p=new a3e(d);return n.runWebGLProgram(p,[a,i],"float32")}const l3e={kernelName:tx,backendName:"webgl",kernelFunc:s3e};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class u3e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c3e(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=be(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new u3e(i),l=n.runWebGLProgram(s,[o],o.dtype),u=Le({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const d3e={kernelName:nx,backendName:"webgl",kernelFunc:c3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class p3e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:p}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=Dm(a.shape,i.shape,o,s,"NHWC",l);let c;const d=new p3e(u);c=n.runWebGLProgram(d,[a,i],"float32");const p=Le({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),p}const f3e={kernelName:rx,backendName:"webgl",kernelFunc:h3e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g3e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=h4(a,i.length);g4(o.length,l,i);const{path:u,steps:c}=m4(s,l),d=c.length;let p=null,f=o.length;const m=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=f4(f,l[v]);let w;y4(b)?w=i[v]:(w=Fa({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),m.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);xn(w.shape,S)||(w=Le({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),p===null?p=w:(p=s_({inputs:{a:w,b:p},backend:n}),m.push(p))}y<d-1&&(u[y]>=0&&(p=g2({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),m.push(p)),f--)}for(const y of m)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const m3e={kernelName:ax,backendName:"webgl",kernelFunc:g3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y3e="return (x >= 0.0) ? x : (exp(x) - 1.0);",b3e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,v3e=Kt({opSnippet:y3e,packedOpSnippet:b3e}),x3e={kernelName:Mg,backendName:"webgl",kernelFunc:v3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w3e="return (b >= 1.0) ? a : a * (b + 1.0);",k3e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,S3e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s0(k3e,r.shape,a.shape):new bh(w3e,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},C3e={kernelName:cT,backendName:"webgl",kernelFunc:S3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E3e=`
  return vec4(equal(a, b));
`,I3e="return float(a == b);",T3e=ea({opSnippet:I3e,packedOpSnippet:E3e,dtype:"bool",cpuKernelImpl:hSe}),N3e={kernelName:Ag,backendName:"webgl",kernelFunc:T3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _3e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${i4};
  float a1 = ${o4};
  float a2 = ${s4};
  float a3 = ${l4};
  float a4 = ${u4};
  float a5 = ${c4};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,R3e=Kt({opSnippet:_3e}),$3e={kernelName:Pg,backendName:"webgl",kernelFunc:R3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O3e=vh+`
  return exp(x);
`,M3e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Mz=Kt({opSnippet:O3e,packedOpSnippet:M3e,cpuKernelImpl:fSe,dtype:"float32"}),P3e={kernelName:Dg,backendName:"webgl",kernelFunc:Mz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d_(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(V(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:s}})}const A3e={kernelName:ix,backendName:"webgl",kernelFunc:d_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pz="return exp(x) - 1.0;",D3e=Kt({opSnippet:Pz,packedOpSnippet:Pz,cpuKernelImpl:gSe}),L3e={kernelName:Lg,backendName:"webgl",kernelFunc:D3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Az{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${a}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dz(t,e,n){const r=n.texData.get(t.dataId),a=be(t.shape),i=t.shape[t.shape.length-1],o=a/i,s=Le({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=s.shape,u=new Az("real",l,e),c=new Az("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),m=Fu({inputs:{real:p,imag:f},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f);const y=Le({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(m),y}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F3e(t){const{inputs:e,backend:n}=t,{input:r}=e;return Dz(r,!1,n)}const B3e={kernelName:ox,backendName:"webgl",kernelFunc:F3e};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class z3e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h0(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||Lp(a),i==="string"){const o=Nr(i,be(r));return o.fill(a),e.makeTensorInfo(r,i,o)}else{const o=new z3e(r,a),s=[[a]];return e.runWebGLProgram(o,[],i,s)}}const j3e={kernelName:sx,backendName:"webgl",kernelFunc:h0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class V3e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U3e={kernelName:lx,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new V3e(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lz="return floor(x);",W3e=Kt({opSnippet:Lz,packedOpSnippet:Lz,cpuKernelImpl:mSe}),G3e={kernelName:Fg,backendName:"webgl",kernelFunc:W3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const H3e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,q3e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,K3e=ea({opSnippet:H3e,packedOpSnippet:q3e,dtype:"int32"}),X3e={kernelName:Bg,backendName:"webgl",kernelFunc:K3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Y3e{constructor(e){this.variableNames=["A"];const n=Aa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Q3e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Aa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Z3e={kernelName:pw,backendName:"webgl",kernelFunc:J3e};let wh,p_=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function J3e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,u]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[u,l],d=[u,l,i];if(s||o){const y=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(wh==null||y!==p_)&&(p_=y,wh=document.createElement("canvas").getContext("2d",{willReadFrequently:p_})),wh.canvas.width=l,wh.canvas.height=u,wh.drawImage(a,0,0,l,u),a=wh.canvas}const p=n.makeTensorInfo(c,"int32");n.texData.get(p.dataId).usage=Li.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);const f=fe().getBool("WEBGL_PACK")?new Q3e(d):new Y3e(d),m=n.runWebGLProgram(f,[p],"int32");return n.disposeData(p.dataId),m}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=r,y=vl(c),v=zr(a.shape,i.shape,l,d,u,p,!1,y);let b;const x=[],w=o!=null,S=s!=null,C=f==="leakyrelu",E=()=>{const N=[a,i],M=(P,L)=>{if(L==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){const j=Le({inputs:{x:P},backend:n,attrs:{shape:[P.shape[0],1,1]}});return x.push(j),j}return P};if(w&&N.push(M(o,c)),S&&N.push(M(s,c)),C){const P=n.makeTensorInfo([],"float32",pl(m,"float32"));N.push(P),x.push(P)}return N};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))b=Ez({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:m});else if(v.strideWidth<=2&&y==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const N=f?l0(f,!0):null,M=new Cz(v,w,N,S,C),P=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],L=E();b=n.runWebGLProgram(M,L,"float32",P)}else if(fe().getBool("WEBGL_CONV_IM2COL"))b=Iz({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:m});else{const N=f?l0(f,!1):null,M=new Sz(v,w,N,S,C),P=E();b=n.runWebGLProgram(M,P,"float32")}const _=Le({inputs:{x:b},backend:n,attrs:{shape:v.outShape}});return x.push(b),x.forEach(N=>n.disposeIntermediateTensorInfo(N)),_}const tTe={kernelName:Cm,backendName:"webgl",kernelFunc:eTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=[];let y=c;y==null&&(y=[1,1]),V(ha(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const v=zr(a.shape,i.shape,l,y,u,d,!0),b=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,x=p?l0(p,b):null,w=[a,i],S=o!=null,C=s!=null,E=p==="leakyrelu";if(S&&w.push(o),C&&w.push(s),E){const P=n.makeTensorInfo([],"float32",pl(f,"float32"));w.push(P),m.push(P)}let _;b?_=new Oz(v,S,x,C,E):_=new $z(v,S,x,C,E);const N=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],M=n.runWebGLProgram(_,w,"float32",N);return m.forEach(P=>n.disposeIntermediateTensorInfo(P)),M}const rTe={kernelName:Em,backendName:"webgl",kernelFunc:nTe};class aTe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=_n(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iTe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,o=i[i.length-1],s=be(r.shape),[l,u,c,d]=Cw(r,a),p=Le({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[be(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=ySe(b,x,r.dtype,u,o,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,w.values)}const m=new aTe(o,d,[u,c],r.shape),y=n.runWebGLProgram(m,[f,p],f.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),v}const oTe={kernelName:dx,backendName:"webgl",kernelFunc:iTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sTe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=_n(this.rank),a=lTe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function lTe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r,l=Yt(o,a.shape)[0];if(fe().get("DEBUG")){const x=n.readSync(i.dataId),w=a.shape[l];for(let S=0;S<x.length;++S){const C=x[S];V(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const u=x4(a,i,l,s),c=be(i.shape),d=[],p=Le({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Le({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(p),d.push(f);const m=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const x=n.bufferSync(f),w=n.bufferSync(p),S=bSe(w,x,m);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(u.outputShape,S.dtype,S.values)}const y=new sTe(p.shape,m),v=n.runWebGLProgram(y,[p,f],p.dtype);d.push(v);const b=Le({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const uTe={kernelName:cx,backendName:"webgl",kernelFunc:Fz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cTe="return float(a > b);",dTe=`
  return vec4(greaterThan(a, b));
`,pTe=ea({opSnippet:cTe,packedOpSnippet:dTe,cpuKernelImpl:vSe,dtype:"bool"}),hTe={kernelName:zg,backendName:"webgl",kernelFunc:pTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fTe="return float(a >= b);",gTe=`
  return vec4(greaterThanEqual(a, b));
`,mTe=ea({opSnippet:fTe,packedOpSnippet:gTe,dtype:"bool",cpuKernelImpl:xSe}),yTe={kernelName:jg,backendName:"webgl",kernelFunc:mTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bTe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Dz(r,!0,n)}const vTe={kernelName:px,backendName:"webgl",kernelFunc:bTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xTe="return float(!isnan(x) && !isinf(x));",wTe=Kt({opSnippet:xTe,dtype:"bool"}),kTe={kernelName:Ug,backendName:"webgl",kernelFunc:wTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const STe="return float(isinf(x));",CTe=Kt({opSnippet:STe,dtype:"bool"}),ETe={kernelName:Wg,backendName:"webgl",kernelFunc:CTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ITe="return float(isnan(x));",TTe=Kt({opSnippet:ITe,dtype:"bool"}),NTe={kernelName:Gg,backendName:"webgl",kernelFunc:TTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _Te="return float(a < b);",RTe=`
  return vec4(lessThan(a, b));
`,$Te=ea({opSnippet:_Te,packedOpSnippet:RTe,cpuKernelImpl:wSe,dtype:"bool"}),OTe={kernelName:Hg,backendName:"webgl",kernelFunc:$Te};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const MTe="return float(a <= b);",PTe=`
  return vec4(lessThanEqual(a, b));
`,ATe=ea({opSnippet:MTe,packedOpSnippet:PTe,cpuKernelImpl:kSe,dtype:"bool"}),DTe={kernelName:qg,backendName:"webgl",kernelFunc:ATe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LTe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=SSe(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const FTe={kernelName:gx,backendName:"webgl",kernelFunc:LTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const BTe=vh+`
  return x < 0.0 ? 0./0. : log(x);
`,zTe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,jTe=Kt({opSnippet:BTe,packedOpSnippet:zTe,cpuKernelImpl:CSe}),VTe={kernelName:Kg,backendName:"webgl",kernelFunc:jTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const UTe=vh+`
  return log(1.0 + x);
`,WTe=Kt({opSnippet:UTe}),GTe={kernelName:Xg,backendName:"webgl",kernelFunc:WTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const HTe="return float(a >= 1.0 && b >= 1.0);",qTe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,KTe=ea({opSnippet:HTe,packedOpSnippet:qTe,dtype:"bool"}),XTe={kernelName:Yg,backendName:"webgl",kernelFunc:KTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const YTe="return float(!(x >= 1.0));",QTe=Kt({opSnippet:YTe}),ZTe={kernelName:Qg,backendName:"webgl",kernelFunc:QTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const JTe="return float(a >= 1.0 || b >= 1.0);",eNe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,tNe=ea({opSnippet:JTe,packedOpSnippet:eNe,dtype:"bool"}),nNe={kernelName:Zg,backendName:"webgl",kernelFunc:tNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rNe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class aNe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r,u=fe().getBool("WEBGL_PACK_NORMALIZATION")?new aNe(a.shape,i,o,s,l):new rNe(a.shape,i,o,s,l);return n.runWebGLProgram(u,[a],a.dtype)},oNe={kernelName:mx,backendName:"webgl",kernelFunc:iNe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sNe{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new sNe(a.shape,s,l,u,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)},uNe={kernelName:dT,backendName:"webgl",kernelFunc:lNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cNe(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=md(o,t.dtype,"max",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=a.shape.length,l=Yt(i,a.shape);let u=l;const c=pr(u,s),d=c!=null,p=n.shouldExecuteOnCPU([a]);let f=a;if(d){if(p){const x=n.texData.get(f.dataId).values,w=new Array(s);for(let E=0;E<w.length;E++)w[E]=a.shape[c[E]];const S=a_(x,a.shape,a.dtype,c,w);f=n.makeTensorInfo(w,a.dtype);const C=n.texData.get(f.dataId);C.values=S}else f=f2(a,c,n);u=hr(u.length,s)}Zr("max",u,s);const[m,y]=Qr(f.shape,u);let v=m;o&&(v=Rr(m,l));let b;if(p){const x=n.texData.get(f.dataId).values,w=ESe(x,be(y),v,a.dtype);b=n.makeTensorInfo(v,a.dtype);const S=n.texData.get(b.dataId);S.values=w}else b=cNe(f,y,v,n);return d&&n.disposeIntermediateTensorInfo(f),b}const dNe={kernelName:yx,backendName:"webgl",kernelFunc:Bz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pNe=o_+`
  return max(a, b);
`,hNe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+o0+`
  return result;
`,fNe=ea({opSnippet:pNe,packedOpSnippet:hNe,cpuKernelImpl:ISe}),gNe={kernelName:Jg,backendName:"webgl",kernelFunc:fNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;a0(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(ha(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=co(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&xn(c.inShape,c.outShape))return bi({inputs:{x:a},backend:n});const d=new u0(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const yNe={kernelName:bx,backendName:"webgl",kernelFunc:mNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=bl(a.shape,i,o,c,s,u,l),p=new l_(d,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}const vNe={kernelName:vx,backendName:"webgl",kernelFunc:bNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class wNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=u-1-e.padInfo.top,f=c-1-e.padInfo.left,m=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=bl(o.shape,s,l,d,u,c),f=new l_(p,"max",!0),m=n.runWebGLProgram(f,[o],o.dtype),y=new wNe(p),v=n.runWebGLProgram(y,[a,m],o.dtype);return n.disposeIntermediateTensorInfo(m),v}const SNe={kernelName:hT,backendName:"webgl",kernelFunc:kNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;a0([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=co(s.shape,l,u,1,c,d),f=!0,m=new u0(p,"max",f),y=n.runWebGLProgram(m,[s],s.dtype),v=new xNe(p),b=n.runWebGLProgram(v,[a,y],s.dtype);return n.disposeIntermediateTensorInfo(y),b}const ENe={kernelName:pT,backendName:"webgl",kernelFunc:CNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function INe(t,e,n,r){let a=new u0(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new u0(n,"max",!0,!0,e);const o=r.runWebGLProgram(a,[t],"float32");return[i,o]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TNe={kernelName:xx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;V(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];V(ha(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=co(r.shape,a,i,u,o),[d,p]=INe(r,s,c,l);return[d,p]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function NNe(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=md(o,"float32","mean",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _Ne={kernelName:wx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,o=n,s=r.shape.length,l=Yt(i,r.shape);let u=l;const c=pr(u,s),d=c!=null,p=o.shouldExecuteOnCPU([r]),f=[];let m=r;if(d){if(p){const w=o.texData.get(m.dataId).values,S=new Array(s);for(let _=0;_<S.length;_++)S[_]=r.shape[c[_]];const C=a_(w,r.shape,r.dtype,c,S);m=o.makeTensorInfo(S,r.dtype);const E=o.texData.get(m.dataId);E.values=C}else m=f2(r,c,o);f.push(m),u=hr(u.length,s)}Zr("sum",u,s);const[y,v]=Qr(m.shape,u);let b=y;a&&(b=Rr(y,l));const x=NNe(m,v,b,o);for(const w of f)o.disposeIntermediateTensorInfo(w);return x}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Yt(i,a.shape);let u=l;const c=pr(u,s);let d=a;c!=null&&(d=Fa({inputs:{x:a},backend:n,attrs:{perm:c}}),u=hr(u.length,a.shape.length)),Zr("min",u,s);const[p,f]=Qr(d.shape,u),m=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=md(y,y.dtype,"min",n);let b;if(o){const x=Rr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const $Ne={kernelName:kx,backendName:"webgl",kernelFunc:RNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ONe=o_+`
  return min(a, b);
`,MNe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+o0+`
  return result;
`,PNe=ea({opSnippet:ONe,packedOpSnippet:MNe,cpuKernelImpl:TSe}),ANe={kernelName:em,backendName:"webgl",kernelFunc:PNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class DNe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const a=e.length,i=_n(a),o=n.map(c=>c[0]).join(","),s=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LNe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,y)=>m[0]+e[y]+m[1]);const a=e.length,i=_n(a),o=n.map(m=>m[0]).join(","),s=n.map((m,y)=>m[0]+e[y]).join(","),l=La("rc",a),u=La("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=r==="reflect"?0:1;let f="";if(a===1){const m=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const m=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[a-2]} += 1;
        if(${l[a-2]} < ${this.outputShape[a-2]}) {
          ${m}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[a-1]} += 1;
          if(${c}) {
            ${m}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FNe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LNe(r.shape,a,i):new DNe(r.shape,a,i);return e.runWebGLProgram(o,[r],r.dtype)},BNe={kernelName:Sx,backendName:"webgl",kernelFunc:FNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zNe=`if (b == 0.0) return NAN;
  return mod(a, b);`,jNe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+o0+`
  return result;
`,VNe=ea({opSnippet:zNe,packedOpSnippet:jNe}),UNe={kernelName:tm,backendName:"webgl",kernelFunc:VNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class WNe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const GNe=`
if (a == b) {
  return 1.0;
};
return a / b;`,HNe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,zz=ea({opSnippet:GNe,packedOpSnippet:HNe,checkOutOfBounds:!0}),qNe={kernelName:Og,backendName:"webgl",kernelFunc:zz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jz="return a - b;",Vz=ea({opSnippet:jz,packedOpSnippet:jz,supportsComplex:!0,cpuKernelImpl:HSe}),KNe={kernelName:bm,backendName:"webgl",kernelFunc:Vz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uz(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=Yt([i],a.shape),s=Bz({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Rr(s.shape,o),u=Le({inputs:{x:s},backend:n,attrs:{shape:l}}),c=Vz({inputs:{a,b:u},backend:n}),d=Mz({inputs:{x:c},backend:n}),p=g2({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:p},backend:n,attrs:{shape:l}}),m=zz({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}const XNe={kernelName:Yx,backendName:"webgl",kernelFunc:Uz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YNe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r,l=s?a:Uz({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new WNe(u,c,i),p=[[o]],f=n.runWebGLProgram(d,[l],"int32",p);return s||n.disposeIntermediateTensorInfo(l),f}const QNe={kernelName:Cx,backendName:"webgl",kernelFunc:YNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ZNe=vo+`
  return -x;
`,JNe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function e4e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,s]=_Se(i.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new gd(r.shape,JNe):a=new El(r.shape,ZNe),n.runWebGLProgram(a,[r],r.dtype)}const t4e={kernelName:Ex,backendName:"webgl",kernelFunc:e4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const n4e=Vw;function r4e(t){Di("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=n4e(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const a4e={kernelName:Ix,backendName:"webgl",kernelFunc:r4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i4e=Uw;function o4e(t){Di("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:p,validOutputs:f}=i4e(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const s4e={kernelName:Tx,backendName:"webgl",kernelFunc:o4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l4e=Ww;function u4e(t){Di("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),p=o,f=s,m=l,y=u,{selectedIndices:v,selectedScores:b}=l4e(c,d,p,f,m,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const c4e={kernelName:Nx,backendName:"webgl",kernelFunc:u4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class d4e{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r,u=be(a.shape),c=new d4e(u,o,s,l),d=Le({inputs:{x:a},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...a.shape,o],m=Le({inputs:{x:p},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),m},h4e={kernelName:Rx,backendName:"webgl",kernelFunc:p4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=c0({inputs:{input:r},backend:n}),i=w2({inputs:{x:a},backend:n}),o=v2({inputs:{input:r},backend:n}),s=w2({inputs:{x:o},backend:n}),l=Fu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return h0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const f4e={kernelName:dw,backendName:"webgl",kernelFunc:w2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wz(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=c0({inputs:{input:r},backend:n}),i=Wz({inputs:{x:a},backend:n}),o=v2({inputs:{input:r},backend:n}),s=w2({inputs:{x:o},backend:n}),l=Fu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return h0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const g4e={kernelName:_x,backendName:"webgl",kernelFunc:Wz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m4e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return d_({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Xr(i,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=d_({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=kz({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const y4e={kernelName:$x,backendName:"webgl",kernelFunc:m4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class b4e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const a=e.length,i=_n(a),o=n.map(u=>u[0]).join(","),s=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class v4e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const a=e.length,i=_n(a),o=n.map(y=>y[0]).join(","),s=n.map((y,v)=>y[0]+e[v]).join(","),l=La("rc",a),u=La("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${l[a-2]} += 1;
       if(${l[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${l[a-1]} += 1;
         if(${c}) {`],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let y=0,v=a===1?2:4;y<v;y++)m+=`
        ${p[y]}
        if (${f}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${d});
        }
      `;m+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gz=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;if(be(a.shape)===0){const u=i.map((c,d)=>c[0]+a.shape[d]+c[1]);return h0({backend:n,attrs:{shape:u,value:o,dtype:a.dtype}})}const s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new v4e(a.shape,i,o):new b4e(a.shape,i,o),l=[[o]];return n.runWebGLProgram(s,[a],a.dtype,l)},x4e={kernelName:Ox,backendName:"webgl",kernelFunc:Gz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w4e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,k4e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+o0+`
  return result;
`,S4e=ea({opSnippet:w4e,packedOpSnippet:k4e}),C4e={kernelName:am,backendName:"webgl",kernelFunc:S4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=[],u=Yt(i,a.shape);let c=u;const d=pr(c,s);let p=a;d!=null&&(p=Fa({inputs:{x:a},backend:n,attrs:{perm:d}}),c=hr(c.length,s),l.push(p)),Zr("prod",c,s);let f;if(n.shouldExecuteOnCPU([p])){const m=n.texData.get(p.dataId).values,{outVals:y,outShape:v,outDtype:b}=$Se(p.shape,p.dtype,m,c);f=n.makeTensorInfo(v,b,y)}else{const[m,y]=Qr(p.shape,c),v=be(y),b=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),x=xw(a.dtype),w=md(b,x,"prod",n);f=Le({inputs:{x:w},backend:n,attrs:{shape:m}}),l.push(b),l.push(w)}if(o){l.push(f);const m=Rr(f.shape,u);f=Le({inputs:{x:f},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}const I4e={kernelName:Px,backendName:"webgl",kernelFunc:E4e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T4e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:s}=r,l=a.map(b=>n.readSync(b.dataId)),u=a.map(b=>b.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[p,f,m]=OSe(l,u,c,i.shape,i.dtype,d,o.shape,s),y=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),v=n.makeTensorInfo(m,i.dtype,f);return y.concat([v])}const N4e={kernelName:Ax,backendName:"webgl",kernelFunc:T4e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _4e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),p=s.map(v=>n.readSync(v.dataId)),f=s.map(v=>v.shape),[m,y]=MSe(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(m,i.dtype,y)}const R4e={kernelName:Dx,backendName:"webgl",kernelFunc:_4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hz=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:o}=n,s=PSe(r,a,i,o);return e.makeTensorInfo([s.length],o,s)},$4e={kernelName:Lx,backendName:"webgl",kernelFunc:Hz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O4e="return 1.0 / x;",M4e=Kt({opSnippet:O4e}),P4e={kernelName:im,backendName:"webgl",kernelFunc:M4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A4e=vo+`
  return (x < 0.0) ? 0.0 : x;
`,D4e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,L4e=Kt({opSnippet:A4e,packedOpSnippet:D4e}),F4e={kernelName:om,backendName:"webgl",kernelFunc:L4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B4e=vo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,z4e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,j4e=Kt({opSnippet:B4e,packedOpSnippet:z4e}),V4e={kernelName:sm,backendName:"webgl",kernelFunc:j4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class U4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class W4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new W4e(a.shape,l,u,i,o):new U4e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],"float32")}const H4e={kernelName:jx,backendName:"webgl",kernelFunc:G4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class q4e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,m=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${m});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new q4e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const X4e={kernelName:gT,backendName:"webgl",kernelFunc:K4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Y4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Q4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Q4e(a.shape,l,u,i,o):new Y4e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],a.dtype)}const J4e={kernelName:zx,backendName:"webgl",kernelFunc:Z4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class e_e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,m=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${m});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t_e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new e_e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const n_e={kernelName:fT,backendName:"webgl",kernelFunc:t_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class r_e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,i=e.map((s,l)=>a(l)).join(","),o=_n(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class a_e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=La("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,s=_n(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(a.slice())};
          if(${i}){
            result.g = ${u(a.slice())};
          }
          if(${o}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${d(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return p(m)}function u(m){return m[r-1]="("+m[r-1]+" + 1)",p(m)}function c(m){return m[r-2]="("+m[r-2]+" + 1)",p(m)}function d(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",p(m)}function p(m){const y=e.map((x,w)=>f(w,m)),v=y.join(","),b=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${b}))`}function f(m,y){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${y[m]} - 1`:`${y[m]}`}}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,o=a.shape.length,s=Yt(i,a.shape);if(o===0)return bi({inputs:{x:a},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a_e(a.shape,s):new r_e(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}const o_e={kernelName:Vx,backendName:"webgl",kernelFunc:i_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class s_e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l_e={kernelName:hw,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=new s_e(r.shape,i),[u,c]=e4(o,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(a),Math.cos(a)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const u_e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,c_e=Kt({opSnippet:u_e}),d_e={kernelName:lm,backendName:"webgl",kernelFunc:c_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const p_e="return inversesqrt(x);",h_e=Kt({opSnippet:p_e,cpuKernelImpl:ASe}),f_e={kernelName:um,backendName:"webgl",kernelFunc:h_e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qz{constructor(e,n,r,a,i,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=_n(i.length),u=_n(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const d=`getIndices(${c})`;let p="";a===1?p="i":a===2&&(p="i, coords[1]");const f=`getUpdates(${p})`,m=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${m};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g_e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=qp(i,a,o),p=[d/u,u];if(d===0)return n.makeTensorInfo(o,a.dtype);const f=Le({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),m=Le({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new qz(l,s,f.shape.length,m.shape.length,c,p),b=n.runWebGLProgram(v,[m,f,y],m.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),x}const m_e={kernelName:Ux,backendName:"webgl",kernelFunc:g_e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class y_e{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=fe().getNumber("WEBGL_VERSION")===2?i:o,l=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b_e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=new y_e(a.shape[0],a.shape[1],i.shape[1],o),l=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",l)}const v_e={kernelName:Wx,backendName:"webgl",kernelFunc:b_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class x_e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${s[c]}`),c<e&&l.push(`${s[c]}`);a=l.join(),i=u.join()}const o=_n(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w_e(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,o=new x_e(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Ya(a.dtype,i.dtype))}const k_e={kernelName:Gx,backendName:"webgl",kernelFunc:w_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S_e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${r4};
  float scale = ${a4};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,C_e=Kt({opSnippet:S_e}),E_e={kernelName:cm,backendName:"webgl",kernelFunc:C_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I_e=vh+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,T_e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,N_e=Kt({opSnippet:I_e,packedOpSnippet:T_e,cpuKernelImpl:LSe}),__e={kernelName:fm,backendName:"webgl",kernelFunc:N_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const R_e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,$_e=Kt({opSnippet:R_e}),O_e={kernelName:hm,backendName:"webgl",kernelFunc:$_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M_e=vh+`
  return sin(x);
`,P_e=Kt({opSnippet:M_e}),A_e={kernelName:dm,backendName:"webgl",kernelFunc:P_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D_e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,L_e=Kt({opSnippet:D_e}),F_e={kernelName:pm,backendName:"webgl",kernelFunc:L_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B_e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,z_e=Kt({opSnippet:B_e}),j_e={kernelName:gm,backendName:"webgl",kernelFunc:z_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const V_e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;V(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((b,x)=>b*x),l=[[0,0]];l.push(...o);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);const u=[],c=Gz({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=Xm(c.shape,i,s,!1),p=Ym(d.length,i.length,!1),f=Qm(c.shape,i,s,!1),m=Le({inputs:{x:c},backend:n,attrs:{shape:d}}),y=Fa({inputs:{x:m},backend:n,attrs:{perm:p}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:f}});return u.push(c),u.push(m),u.push(y),u.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},U_e={kernelName:Kx,backendName:"webgl",kernelFunc:V_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W_e(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,p,f,m,y]=BSe(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const G_e={kernelName:Qx,backendName:"webgl",kernelFunc:W_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H_e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=zSe(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const q_e={kernelName:Zx,backendName:"webgl",kernelFunc:H_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K_e(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=QB(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const X_e={kernelName:Jx,backendName:"webgl",kernelFunc:K_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y_e(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=QB(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const Q_e={kernelName:ew,backendName:"webgl",kernelFunc:Y_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z_e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=qp(i,a,s),f=!1;if(i.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(i),w=hl(n.readSync(o.dataId)[0]),S=DSe(b,x,s,p,c,u,l,d,w,f);return n.makeTensorInfo(s,S.dtype,S.values)}const m=new qz(u,l,a.shape.length,i.shape.length,d,[p,1],f),y=n.runWebGLProgram(m,[i,a,o],i.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(y),v}const J_e={kernelName:tw,backendName:"webgl",kernelFunc:Z_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Yt(o,a.shape)[0],l=b4(a,i,s),u=a.shape.length,c=new Array(u).fill(0),d=a.shape.slice();return l.map(p=>{const f=[...d];f[s]=p;const m=xh({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});return c[s]+=p,m})}const t5e={kernelName:Xx,backendName:"webgl",kernelFunc:e5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Kz="return sqrt(x);",n5e=Kt({opSnippet:Kz,packedOpSnippet:Kz,cpuKernelImpl:jSe}),r5e={kernelName:mm,backendName:"webgl",kernelFunc:n5e};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const a5e="return x * x;",i5e=Kt({opSnippet:a5e}),o5e={kernelName:mT,backendName:"webgl",kernelFunc:i5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xz="return (a - b) * (a - b);",s5e=ea({opSnippet:Xz,packedOpSnippet:Xz}),l5e={kernelName:ym,backendName:"webgl",kernelFunc:s5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u5e({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=vo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new El(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const c5e={kernelName:km,backendName:"webgl",kernelFunc:u5e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class d5e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=_n(r.length),o=_n(r.length);let s="";if(a===1)s="coords * strides + begin";else{let l=0;s=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:f,finalShape:m,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=iN(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Le({inputs:{x:a},backend:n,attrs:{shape:m}});else if(v||b){V(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const _=tN(x,w,S),N=xh({inputs:{x:a},backend:n,attrs:{begin:x,size:_}});C=Le({inputs:{x:N},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([a])){const _=n.readSync(a.dataId),N=Ct(a.shape,a.dtype,_),M=VSe(f,N,S,x);C=n.makeTensorInfo(m,a.dtype,M.values)}else{const _=new d5e(x,S,f);C=n.runWebGLProgram(_,[a],a.dtype)}const E=Le({inputs:{x:C},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(C),E}const h5e={kernelName:nw,backendName:"webgl",kernelFunc:p5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f5e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.readSync(c.dataId),f=n.readSync(d.dataId),[m,y]=USe(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",y)]}const g5e={kernelName:rw,backendName:"webgl",kernelFunc:f5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m5e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=WSe(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const y5e={kernelName:aw,backendName:"webgl",kernelFunc:m5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b5e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),s=GSe(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const v5e={kernelName:iw,backendName:"webgl",kernelFunc:b5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const x5e="return tan(x);",w5e=Kt({opSnippet:x5e}),k5e={kernelName:vm,backendName:"webgl",kernelFunc:w5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,C5e=Kt({opSnippet:S5e}),E5e={kernelName:xm,backendName:"webgl",kernelFunc:C5e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class I5e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const a=_n(this.rank),i=T5e(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function T5e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const s=n.readSync(a.dataId),l=a.dtype==="string"?s.map(d=>hl(d)):s,u=Ct(a.shape,a.dtype,l),c=qSe(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}const o=new I5e(a.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const N5e={kernelName:wm,backendName:"webgl",kernelFunc:Yz};class _5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class R5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yd(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function Qz(t){let e=1;for(;e<t;)e*=2;return e}function $5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r,s=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>l){const M=n.readSync(a.dataId),[P,L]=KSe(M,u,a.dtype,i,o);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(L.shape,L.dtype,L.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[a,h0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),p=d!==null&&d.isPacked,f=p?n.unpackTensor(a):a,m=be(u)/c,y=Le({inputs:{x:f},attrs:{shape:[m,c]},backend:n});p&&yd(n,f);const v=Qz(i),b=Qz(c);let x=null;const w=()=>x===null?[y,y]:[y,x],S=(M,P,L)=>{const j=w(),B=new _5e(L),K=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[M],[P]],X=x;x=n.runWebGLProgram(B,j,"int32",K),yd(n,X)};for(let M=1;M<v;M*=2){const P=M*2;for(let L=M;L>=1;L/=2)S(P,L,[m,b])}for(let M=b;M>v;M/=2){const P=w(),L=new R5e([m,M/2]),j=[[c],[x===null?1:0],[v]],B=x;x=n.runWebGLProgram(L,P,"int32",j),yd(n,B);const K=v/2,X=K*2;for(let Z=K;Z>=1;Z/=2)S(X,Z,x.shape)}let C=x;x=xh({inputs:{x},backend:n,attrs:{begin:0,size:[m,i]}}),yd(n,C);let E=Fz({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});yd(n,y);const _=u.slice(0,-1);_.push(i),C=x,x=Le({inputs:{x},attrs:{shape:_},backend:n}),yd(n,C);const N=E;return E=Le({inputs:{x:E},attrs:{shape:_},backend:n}),yd(n,N),[E,x]}const O5e={kernelName:ow,backendName:"webgl",kernelFunc:$5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class M5e{constructor(e,n,r,a,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(a){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,p,f]=a.shape,[m,y]=u??[d,p],v=[c,m,y,f],b=new M5e(d,p,o,s,l,v);return n.runWebGLProgram(b,[a,i],"float32")}const A5e={kernelName:sw,backendName:"webgl",kernelFunc:P5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D5e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;a0(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:u}=XSe(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const L5e={kernelName:lw,backendName:"webgl",kernelFunc:D5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F5e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a,s=o.shape.length,l=a.shape[i],u=new Array(s-1);let c=0;for(let y=0;y<s;y++)y!==i&&(u[c++]=o.shape[y]);const d=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;const m=new Array(l);for(let y=0;y<m.length;y++){p[i]=y;const v=xh({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),b=Le({inputs:{x:v},backend:n,attrs:{shape:u}});m[y]=b,d.push(v)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const B5e={kernelName:uw,backendName:"webgl",kernelFunc:F5e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class z5e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r,s=a.shape.length,l=[];let u=0;const c=pr([u],s);let d=a;c!=null&&(d=Fa({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(d),u=hr(1,s)[0]);const p=l7(d.shape,u,o),f=be([d.shape[u]]),m=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(m);const y=xw(a.dtype),v=(S,C,E,_,N)=>{const M=S.shape[0],P=S.shape[1],L=s7(P,N),j={windowSize:L,inSize:P,batchSize:M,numSegments:N},B=new z5e(j,C),K=n.compileAndRun(B,[S,E],_);if(l.push(K),K.shape[1]===N)return K;const X=Hz({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),Z=Yz({inputs:{x:X},backend:n,attrs:{reps:[P/L]}});return l.push(X),l.push(Z),v(K,C,Z,_,N)},b=v(m,"unsortedSegmentSum",i,y,o),x=Le({inputs:{x:b},backend:n,attrs:{shape:p}});let w=x;if(c!=null){l.push(x);const S=zm(c);w=Fa({inputs:{x:w},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const V5e={kernelName:cw,backendName:"webgl",kernelFunc:j5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U5e=[zCe,VCe,GCe,KCe,YCe,JCe,tEe,rEe,sEe,uEe,pEe,gEe,bEe,kEe,EEe,TEe,_Ee,MEe,AEe,LEe,jEe,KEe,YEe,ZEe,aIe,oIe,cIe,SCe,hIe,bIe,kIe,NIe,RIe,OIe,PIe,DIe,BIe,VIe,GIe,qIe,XIe,QIe,e3e,n3e,o3e,l3e,d3e,f3e,m3e,x3e,C3e,N3e,$3e,P3e,A3e,L3e,B3e,j3e,U3e,G3e,X3e,Z3e,tTe,rTe,oTe,uTe,hTe,yTe,kCe,vTe,mIe,kTe,ETe,NTe,ECe,OTe,DTe,FTe,VTe,GTe,XTe,ZTe,nNe,oNe,uNe,dNe,gNe,yNe,vNe,SNe,ENe,TNe,_Ne,$Ne,ANe,BNe,UNe,QNe,NCe,t4e,a4e,s4e,c4e,eIe,h4e,g4e,y4e,x4e,C4e,TCe,I4e,N4e,R4e,$4e,tIe,qNe,P4e,F4e,V4e,RCe,H4e,X4e,J4e,n_e,o_e,l_e,d_e,f_e,m_e,v_e,k_e,E_e,__e,O_e,A_e,F_e,HEe,XNe,j_e,U_e,G_e,q_e,X_e,Q_e,J_e,t5e,r5e,o5e,l5e,c5e,h5e,g5e,y5e,v5e,KNe,LCe,k5e,E5e,N5e,O5e,A5e,FCe,L5e,B5e,V5e,f4e];for(const t of U5e)mw(t);async function W5e(){return await Y0e({base:"pascal",quantizationBytes:2})}async function G5e(t,e){const n=await t.segment(e);return q5e(e,n)}function H5e(t,e,n,r,a){const i=document.createElement("canvas"),o=document.createElement("canvas"),s=i.getContext("2d"),l=o.getContext("2d");i.width=r,i.height=a,o.width=r,o.height=a,s.drawImage(e,0,0,r,a),l.putImageData(n,0,0);const u=s.getImageData(0,0,r,a),c=u.data,d=l.getImageData(0,0,r,a).data;for(let p=0,f=d.length;p<f;p+=4)d[p]===t[0]&&d[p+1]===t[1]&&d[p+2]===t[2]&&(c[p+3]=0);return s.putImageData(u,0,0),i.toDataURL()}function q5e(t,e){const{height:n,width:r,segmentationMap:a}=e,i=new ImageData(a,r,n);return H5e([0,0,0],t,i,r,n)}const K5e=()=>{const t=R.useRef(null),e=async n=>(t.current||(t.current=await W5e()),await G5e(t.current,n));return R.useEffect(()=>()=>{t.current&&t.current.dispose()},[]),{autoRemoveBackground:e}};async function X5e(t){try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);const n=await e.json();return"@type"in n?n["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+n["@type"]),null):Q5e(n):"type"in n?n.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+n.type),null):Z5e(n):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(e){return console.log("I was unable to get the Manifest you supplied due to: "+e),null}}function Y5e(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function Q5e(t){var e,n,r;if("sequences"in t){let a=t.sequences;Y5e(a)&&(a=[a]);let i=!1;for(const o of a)if("canvases"in o){i=!0;for(const s of o.canvases){const l=(r=(n=(e=s.images[0])==null?void 0:e.resource)==null?void 0:n.service)==null?void 0:r["@id"];if(l)return l}}else i||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function Z5e(t){if("items"in t){const e=t.items;for(const n of e){const r=n.items[0].items[0].body.service[0]["@id"];if(r)return r}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function Zz(t,e){const n=window.getComputedStyle(t);return parseInt(n.getPropertyValue(e),10)}function J5e(t,e){const{width:n,height:r}=e,a=1080,i="0",o="default",s=".jpg",l=document.querySelector(".displayregioncontainer"),u=document.querySelector(".displayregion");if(!l||!u)throw new Error("Canvas or selection element not found");const{clientWidth:c,clientHeight:d}=l,p=n*d/r,f=(c-p)/2,m=n/p,y=9,v=Zz(u,"left"),b=Zz(u,"top"),x=Math.round(u.clientWidth+y),w=Math.round(u.clientHeight+y),S=Math.max(Math.round((v-f)*m),0),C=Math.max(Math.round(b*m),0),E=Math.min(Math.round(x*m),n),_=Math.min(Math.round(w*m),r),N=`${S},${C},${E},${_}`;return`${t}/${N}/${a},/${i}/${o}${s}`}const Jz={fetchIIIFIdentifier:async t=>{try{return await X5e(t)}catch(e){return console.error(e),null}},getCroppedImagePath:async t=>{try{const e=t+"/info.json",n=await fetch(e);if(!n.ok)throw new Error(n.statusText);const r=await n.json();return J5e(t,r)}catch(e){console.error(e)}}};function eRe({imageList:t,handleImageClick:e}){return re.jsx(io,{margin:"my-4",className:"flex overflow-x-auto",style:{maxHeight:"200px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:t.map(n=>re.jsx("img",{src:n.thumbnail,alt:n.name,onClick:()=>e(n),style:{cursor:"pointer",marginRight:"10px",scrollSnapAlign:"start"},role:"presentation"},n.id))})}const tRe=R.lazy(()=>LP(()=>import("./index-fU5Lufi0.js"),T0([]))),nRe={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1,showHomeControl:!1,showFullPageControl:!1,showRotationControl:!1,showFlipControl:!1,showZoomControl:!1},showTitle:!1,showIIIFBadge:!1},rRe={colors:{primary:"#b990c1",accent:"#b990c1",secondary:"#EDECEA"}};function aRe(){const{t}=su(),e=()=>$se.success(t("collectionToastSuccess")),{addToArtwork:n,imageLikeList:r}=Tc(),[a,i]=R.useState(r[0]||null),[o,s]=R.useState(""),[l,u]=R.useState(""),[c,d]=R.useState([]),[p,f]=R.useState(""),[m,y]=R.useState(!0),{autoRemoveBackground:v}=K5e();R.useEffect(()=>{o&&setTimeout(()=>{u(document.querySelectorAll("canvas")[0].toDataURL())},1e3)},[o]),R.useEffect(()=>{a&&u(a?.image)},[a]);const b=E=>{i(E)},x=E=>{const _=new Image;_.src=E,v(_).then(N=>{f(N)})},w=async(E,_)=>{try{if(e(),m){const N=await Jz.getCroppedImagePath(_);N&&n(E,N)}else n(E,_)}catch(N){console.error("Error:",N)}},S=E=>{E&&s(E)},C=()=>re.jsxs("h2",{className:"mt-4 text-xl",children:["\u{1F300} ",t("collectionLoading")]});return re.jsxs(io,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx("div",{className:"p-2",children:re.jsx("h1",{className:"text-xl",children:t("collectionTitle")})}),re.jsx(Rse,{}),re.jsx(eRe,{imageList:r,handleImageClick:b}),a&&re.jsxs(io,{margin:"my-0",className:"space-y-4",children:[re.jsxs(io,{margin:"mb-4",className:"flex flex-wrap gap-4 container justify-center text-center mx-auto",children:[re.jsx("p",{className:"text-xl self-center",children:t("collectionSwitchLasso")}),re.jsx(YP,{checked:m,onChange:()=>y(!m)}),re.jsx("p",{className:"text-xl self-center",children:t("collectionSwitchViewer")}),re.jsx(br,{className:"p-4 text-xl text-black w-2/3 mx-auto h-16",rounded:!0,inline:!0,onClick:()=>m?w(a?.id,a?.identifier):w("1",p),children:t("collectionAddText")})]}),m?re.jsx(R.Suspense,{fallback:C(),children:re.jsx(tRe,{iiifContent:a.url,options:nRe,customTheme:rRe,canvasIdCallback:S})}):re.jsxs(re.Fragment,{children:[re.jsx(qse,{value:c,src:l,onChange:E=>{d(E)},onComplete:E=>{E.length&&Vse(l,E,(_,N)=>{_||f(N.toDataURL())})}}),re.jsxs("div",{children:[p&&re.jsx(br,{className:"p-4 text-xl text-black w-2/3 mx-auto h-16",rounded:!0,inline:!0,onClick:()=>x(p),children:t("collectionRemoveText")}),re.jsx("img",{className:"my-4 mx-auto",src:p,alt:""})]})]})]})]})}function iRe(){const{t}=su();return re.jsxs(XP,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed k-color-brand-primary text-center",innerClassName:"tabbar-inner",children:[re.jsx(ag,{active:cu({path:ao("/").pathname,end:!0}),to:"/",component:qy,icon:re.jsx(Ra,{material:re.jsx(dte,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:ao("/").pathname,end:!0})&&"animate-pulse"}`}),label:t("start"),touchRipple:!1}),re.jsx(ag,{active:cu({path:ao("/selection").pathname,end:!0}),to:"/selection",component:qy,icon:re.jsx(Ra,{material:re.jsx(lte,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:ao("/selection").pathname,end:!0})&&"animate-pulse"}`}),label:t("selection"),touchRipple:!1}),re.jsx(ag,{active:cu({path:ao("/collection").pathname,end:!0}),to:"/collection",component:qy,icon:re.jsx(Ra,{material:re.jsx(xte,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:ao("/collection").pathname,end:!0})&&"animate-pulse"}`}),label:t("collection"),touchRipple:!1}),re.jsx(ag,{active:cu({path:ao("/creation").pathname,end:!0}),to:"/creation",component:qy,icon:re.jsx(Ra,{material:re.jsx(fte,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:ao("/creation").pathname,end:!0})&&"animate-pulse"}`}),label:t("artwork"),touchRipple:!1})]})}const oRe="/logos/bmbf_logo_de.jpg",sRe="/logos/bmbf_logo_en.jpg",lRe="/logos/digitalwarenkombinat.png",uRe="/logos/prototype_fund_logo.png",cRe=()=>re.jsx(wp,{href:"https://prototypefund.de/",target:"_blank",children:re.jsx("img",{src:uRe,alt:"Logo Protype Fund",className:"w-64 m-auto"})}),dRe=()=>{const{i18n:t}=su();return re.jsx(wp,{href:"https://www.bmbf.de/",target:"_blank",children:re.jsx("img",{src:t.resolvedLanguage==="en"?sRe:oRe,alt:"Logo Bundesministerium f\xFCr Bildung und Forschung",className:"w-64 m-auto"})})},pRe=()=>re.jsx(wp,{href:"https://digitalwarenkombinat.de/",target:"_blank",children:re.jsx("img",{src:lRe,alt:"Logo Digitalwarenkombinat",className:"w-64 m-auto"})});function hRe(t,e){const{t:n,i18n:r}=su();return re.jsx(qP,{side:"right",opened:t,onBackdropClick:()=>e(!1),children:re.jsxs(ab,{children:[re.jsx(tb,{right:re.jsx(_te,{onClick:()=>e(!1),className:"mr-4 w-10 h-10"})}),re.jsxs(io,{className:"space-y-4",children:[re.jsx("p",{className:"text-xl",children:n("sidebarChooseLanguage")}),re.jsx(br,{onClick:()=>r.changeLanguage("de"),className:"p-4 text-xl text-black w-10 mr-2 h-10",rounded:!0,inline:!0,children:"DE"}),re.jsx(br,{onClick:()=>r.changeLanguage("en"),className:"p-4 text-xl text-black w-10 h-10",rounded:!0,inline:!0,children:"EN"}),re.jsx("p",{children:n("sidebarAbout")}),re.jsx("p",{children:n("sidebarLegal")}),re.jsx(cRe,{}),re.jsx(dRe,{}),re.jsx(pRe,{})]})]})})}function fRe(){const[t,e]=R.useState(!1);return re.jsxs(re.Fragment,{children:[re.jsx(BP,{theme:"material",children:re.jsxs(ab,{children:[re.jsx(tb,{className:"top-0 sticky",transparent:!0,right:re.jsx(qee,{onClick:()=>e(!0),className:"mr-4 w-10 h-10"})}),re.jsx("main",{className:"h-[calc(100%_-_192px)] overflow-auto",children:re.jsx(DY,{})}),re.jsx(iRe,{}),hRe(t,e)]})}),re.jsx(nQ,{})]})}var ej={exports:{}},tj={exports:{}},nj={exports:{}},rj={exports:{}},aj={exports:{}},h_=Object.defineProperty,gRe=Object.getOwnPropertyDescriptor,mRe=Object.getOwnPropertyNames,yRe=Object.prototype.hasOwnProperty,ij=(t,e)=>{for(var n in e)h_(t,n,{get:e[n],enumerable:!0})},bRe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of mRe(e))!yRe.call(t,a)&&a!==n&&h_(t,a,{get:()=>e[a],enumerable:!(r=gRe(e,a))||r.enumerable});return t},vRe=t=>bRe(h_({},"__esModule",{value:!0}),t),oj={};ij(oj,{FluidValue:()=>FRe,Globals:()=>sj,addFluidObserver:()=>BRe,callFluidObserver:()=>Fj,callFluidObservers:()=>LRe,clamp:()=>kj,colorToRgba:()=>E_,colors:()=>_Re,createInterpolator:()=>I_,createStringInterpolator:()=>GRe,defineHidden:()=>kRe,deprecateDirectCall:()=>XRe,deprecateInterpolate:()=>qRe,each:()=>fj,eachProp:()=>CRe,easings:()=>PRe,flush:()=>gj,flushCalls:()=>IRe,frameLoop:()=>vj,getFluidObservers:()=>DRe,getFluidValue:()=>Lj,hasFluidValue:()=>ARe,hex3:()=>Tj,hex4:()=>Nj,hex6:()=>_j,hex8:()=>Rj,hsl:()=>Ej,hsla:()=>Ij,is:()=>Is,isAnimatedString:()=>YRe,isEqual:()=>SRe,isSSR:()=>S2,noop:()=>hj,onResize:()=>Uj,onScroll:()=>a$e,once:()=>N_,prefix:()=>M2,raf:()=>en,removeFluidObserver:()=>zRe,rgb:()=>Sj,rgba:()=>Cj,setFluidGetter:()=>Bj,toArray:()=>ERe,useConstant:()=>o$e,useForceUpdate:()=>c$e,useIsomorphicLayoutEffect:()=>R_,useMemoOne:()=>d$e,useOnce:()=>f$e,usePrev:()=>m$e,useReducedMotion:()=>b$e});var xRe=vRe(oj),sj={};ij(sj,{assign:()=>bj,colors:()=>ju,createStringInterpolator:()=>x_,skipAnimation:()=>yj,to:()=>mj,willAdvance:()=>w_});var f_=g0(),en=t=>f0(t,f_),g_=g0();en.write=t=>f0(t,g_);var k2=g0();en.onStart=t=>f0(t,k2);var m_=g0();en.onFrame=t=>f0(t,m_);var y_=g0();en.onFinish=t=>f0(t,y_);var kh=[];en.setTimeout=(t,e)=>{let n=en.now()+e,r=()=>{let i=kh.findIndex(o=>o.cancel==r);~i&&kh.splice(i,1),zu-=~i?1:0},a={time:n,handler:t,cancel:r};return kh.splice(lj(n),0,a),zu+=1,uj(),a};var lj=t=>~(~kh.findIndex(e=>e.time>t)||~kh.length);en.cancel=t=>{k2.delete(t),m_.delete(t),y_.delete(t),f_.delete(t),g_.delete(t)},en.sync=t=>{v_=!0,en.batchedUpdates(t),v_=!1},en.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...a){e=a,en.onStart(n)}return r.handler=t,r.cancel=()=>{k2.delete(n),e=null},r};var b_=typeof window<"u"?window.requestAnimationFrame:()=>{};en.use=t=>b_=t,en.now=typeof performance<"u"?()=>performance.now():Date.now,en.batchedUpdates=t=>t(),en.catch=console.error,en.frameLoop="always",en.advance=()=>{en.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):dj()};var Bu=-1,zu=0,v_=!1;function f0(t,e){v_?(e.delete(t),t(0)):(e.add(t),uj())}function uj(){Bu<0&&(Bu=0,en.frameLoop!=="demand"&&b_(cj))}function wRe(){Bu=-1}function cj(){~Bu&&(b_(cj),en.batchedUpdates(dj))}function dj(){let t=Bu;Bu=en.now();let e=lj(Bu);if(e&&(pj(kh.splice(0,e),n=>n.handler()),zu-=e),!zu){wRe();return}k2.flush(),f_.flush(t?Math.min(64,Bu-t):16.667),m_.flush(),g_.flush(),y_.flush()}function g0(){let t=new Set,e=t;return{add(n){zu+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return zu-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,zu-=e.size,pj(e,r=>r(n)&&t.add(r)),zu+=t.size,e=t)}}}function pj(t,e){t.forEach(n=>{try{e(n)}catch(r){en.catch(r)}})}function hj(){}var kRe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Is={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function SRe(t,e){if(Is.arr(t)){if(!Is.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var fj=(t,e)=>t.forEach(e);function CRe(t,e,n){if(Is.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var ERe=t=>Is.und(t)?[]:Is.arr(t)?t:[t];function gj(t,e){if(t.size){let n=Array.from(t);t.clear(),fj(n,e)}}var IRe=(t,...e)=>gj(t,n=>n(...e)),S2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),x_,mj,ju=null,yj=!1,w_=hj,bj=t=>{t.to&&(mj=t.to),t.now&&(en.now=t.now),t.colors!==void 0&&(ju=t.colors),t.skipAnimation!=null&&(yj=t.skipAnimation),t.createStringInterpolator&&(x_=t.createStringInterpolator),t.requestAnimationFrame&&en.use(t.requestAnimationFrame),t.batchedUpdates&&(en.batchedUpdates=t.batchedUpdates),t.willAdvance&&(w_=t.willAdvance),t.frameLoop&&(en.frameLoop=t.frameLoop)},m0=new Set,xo=[],k_=[],C2=0,vj={get idle(){return!m0.size&&!xo.length},start(t){C2>t.priority?(m0.add(t),en.onStart(TRe)):(xj(t),en(S_))},advance:S_,sort(t){if(C2)en.onFrame(()=>vj.sort(t));else{let e=xo.indexOf(t);~e&&(xo.splice(e,1),wj(t))}},clear(){xo=[],m0.clear()}};function TRe(){m0.forEach(xj),m0.clear(),en(S_)}function xj(t){xo.includes(t)||wj(t)}function wj(t){xo.splice(NRe(xo,e=>e.priority>t.priority),0,t)}function S_(t){let e=k_;for(let n=0;n<xo.length;n++){let r=xo[n];C2=r.priority,r.idle||(w_(r),r.advance(t),r.idle||e.push(r))}return C2=0,k_=xo,k_.length=0,xo=e,xo.length>0}function NRe(t,e){let n=t.findIndex(e);return n<0?t.length:n}var kj=(t,e,n)=>Math.min(Math.max(n,t),e),_Re={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Xo="[-+]?\\d*\\.?\\d+",E2=Xo+"%";function I2(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Sj=new RegExp("rgb"+I2(Xo,Xo,Xo)),Cj=new RegExp("rgba"+I2(Xo,Xo,Xo,Xo)),Ej=new RegExp("hsl"+I2(Xo,E2,E2)),Ij=new RegExp("hsla"+I2(Xo,E2,E2,Xo)),Tj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Nj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_j=/^#([0-9a-fA-F]{6})$/,Rj=/^#([0-9a-fA-F]{8})$/;function RRe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=_j.exec(t))?parseInt(e[1]+"ff",16)>>>0:ju&&ju[t]!==void 0?ju[t]:(e=Sj.exec(t))?(Sh(e[1])<<24|Sh(e[2])<<16|Sh(e[3])<<8|255)>>>0:(e=Cj.exec(t))?(Sh(e[1])<<24|Sh(e[2])<<16|Sh(e[3])<<8|Mj(e[4]))>>>0:(e=Tj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Rj.exec(t))?parseInt(e[1],16)>>>0:(e=Nj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Ej.exec(t))?($j(Oj(e[1]),T2(e[2]),T2(e[3]))|255)>>>0:(e=Ij.exec(t))?($j(Oj(e[1]),T2(e[2]),T2(e[3]))|Mj(e[4]))>>>0:null}function C_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $j(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,i=C_(a,r,t+1/3),o=C_(a,r,t),s=C_(a,r,t-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function Sh(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function Oj(t){return(parseFloat(t)%360+360)%360/360}function Mj(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function T2(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function E_(t){let e=RRe(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,a=(e&65280)>>>8,i=(e&255)/255;return`rgba(${n}, ${r}, ${a}, ${i})`}var I_=(t,e,n)=>{if(Is.fun(t))return t;if(Is.arr(t))return I_({range:t,output:e,extrapolate:n});if(Is.str(t.output[0]))return x_(t);let r=t,a=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{let c=ORe(u,i);return $Re(u,i[c],i[c+1],a[c],a[c+1],l,o,s,r.map)}};function $Re(t,e,n,r,a,i,o,s,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(s==="identity")return u;s==="clamp"&&(u=n)}return r===a?r:e===n?t<=e?r:a:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=i(u),r===-1/0?u=-u:a===1/0?u=u+r:u=u*(a-r)+r,u)}function ORe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var MRe=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,a=e==="end"?Math.floor(r):Math.ceil(r);return kj(0,1,a/t)},N2=1.70158,_2=N2*1.525,Pj=N2+1,Aj=2*Math.PI/3,Dj=2*Math.PI/4.5,R2=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,PRe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Pj*t*t*t-N2*t*t,easeOutBack:t=>1+Pj*Math.pow(t-1,3)+N2*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((_2+1)*2*t-_2)/2:(Math.pow(2*t-2,2)*((_2+1)*(t*2-2)+_2)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Aj),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Aj)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Dj))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Dj)/2+1,easeInBounce:t=>1-R2(1-t),easeOutBounce:R2,easeInOutBounce:t=>t<.5?(1-R2(1-2*t))/2:(1+R2(2*t-1))/2,steps:MRe},y0=Symbol.for("FluidValue.get"),Ch=Symbol.for("FluidValue.observers"),ARe=t=>!!(t&&t[y0]),Lj=t=>t&&t[y0]?t[y0]():t,DRe=t=>t[Ch]||null;function Fj(t,e){t.eventObserved?t.eventObserved(e):t(e)}function LRe(t,e){let n=t[Ch];n&&n.forEach(r=>{Fj(r,e)})}var FRe=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Bj(this,t)}},Bj=(t,e)=>zj(t,y0,e);function BRe(t,e){if(t[y0]){let n=t[Ch];n||zj(t,Ch,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function zRe(t,e){let n=t[Ch];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[Ch]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var zj=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),$2=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,jRe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,jj=new RegExp(`(${$2.source})(%|[a-z]+)`,"i"),VRe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,O2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Vj=t=>{let[e,n]=URe(t);if(!e||S2())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&O2.test(n)?Vj(n):n||t},URe=t=>{let e=O2.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},T_,WRe=(t,e,n,r,a)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`,GRe=t=>{T_||(T_=ju?new RegExp(`(${Object.keys(ju).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(a=>Lj(a).replace(O2,Vj).replace(jRe,E_).replace(T_,E_)),n=e.map(a=>a.match($2).map(Number)),r=n[0].map((a,i)=>n.map(o=>{if(!(i in o))throw Error('The arity of each "output" value must be equal');return o[i]})).map(a=>I_({...t,output:a}));return a=>{var i;let o=!jj.test(e[0])&&((i=e.find(l=>jj.test(l)))==null?void 0:i.replace($2,"")),s=0;return e[0].replace($2,()=>`${r[s++](a)}${o||""}`).replace(VRe,WRe)}},M2="react-spring: ",N_=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${M2}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},HRe=N_(console.warn);function qRe(){HRe(`${M2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var KRe=N_(console.warn);function XRe(){KRe(`${M2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function YRe(t){return Is.str(t)&&(t[0]=="#"||/\d/.test(t)||!S2()&&O2.test(t)||t in(ju||{}))}var Eh,P2=new WeakMap,QRe=t=>t.forEach(({target:e,contentRect:n})=>{var r;return(r=P2.get(e))==null?void 0:r.forEach(a=>a(n))});function ZRe(t,e){Eh||typeof ResizeObserver<"u"&&(Eh=new ResizeObserver(QRe));let n=P2.get(e);return n||(n=new Set,P2.set(e,n)),n.add(t),Eh&&Eh.observe(e),()=>{let r=P2.get(e);r&&(r.delete(t),!r.size&&Eh&&Eh.unobserve(e))}}var A2=new Set,b0,JRe=()=>{let t=()=>{A2.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},e$e=t=>(A2.add(t),b0||(b0=JRe()),()=>{A2.delete(t),!A2.size&&b0&&(b0(),b0=void 0)}),Uj=(t,{container:e=document.documentElement}={})=>e===document.documentElement?e$e(t):ZRe(t,e),t$e=(t,e,n)=>e-t===0?1:(n-t)/(e-t),n$e={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},r$e=class{constructor(t,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=n=>{let r=this.info[n],{length:a,position:i}=n$e[n];r.current=this.container[`scroll${i}`],r.scrollLength=this.container["scroll"+a]-this.container["client"+a],r.progress=t$e(0,r.scrollLength,r.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},v0=new WeakMap,Wj=new WeakMap,__=new WeakMap,Gj=t=>t===document.documentElement?window:t,a$e=(t,{container:e=document.documentElement}={})=>{let n=__.get(e);n||(n=new Set,__.set(e,n));let r=new r$e(t,e);if(n.add(r),!v0.has(e)){let i=()=>(n?.forEach(s=>s.advance()),!0);v0.set(e,i);let o=Gj(e);window.addEventListener("resize",i,{passive:!0}),e!==document.documentElement&&Wj.set(e,Uj(i,{container:e})),o.addEventListener("scroll",i,{passive:!0})}let a=v0.get(e);return en(a),()=>{var i;en.cancel(a);let o=__.get(e);if(!o||(o.delete(r),o.size))return;let s=v0.get(e);v0.delete(e),s&&(Gj(e).removeEventListener("scroll",s),window.removeEventListener("resize",s),(i=Wj.get(e))==null||i())}},i$e=R;function o$e(t){let e=(0,i$e.useRef)(null);return e.current===null&&(e.current=t()),e.current}var s$e=R,l$e=R,Hj=R,R_=S2()?Hj.useEffect:Hj.useLayoutEffect,u$e=()=>{let t=(0,l$e.useRef)(!1);return R_(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function c$e(){let t=(0,s$e.useState)()[1],e=u$e();return()=>{e.current&&t(Math.random())}}var $_=R;function d$e(t,e){let[n]=(0,$_.useState)(()=>({inputs:e,result:t()})),r=(0,$_.useRef)(),a=r.current,i=a;return i?e&&i.inputs&&p$e(e,i.inputs)||(i={inputs:e,result:t()}):i=n,(0,$_.useEffect)(()=>{r.current=i,a==n&&(n.inputs=n.result=void 0)},[i]),i.result}function p$e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var h$e=R,f$e=t=>(0,h$e.useEffect)(t,g$e),g$e=[],qj=R;function m$e(t){let e=(0,qj.useRef)();return(0,qj.useEffect)(()=>{e.current=t}),e.current}var y$e=R,b$e=()=>{let[t,e]=(0,y$e.useState)(null);return R_(()=>{let n=window.matchMedia("(prefers-reduced-motion)"),r=a=>{e(a.matches),bj({skipAnimation:a.matches})};return r(n),n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),t};aj.exports=xRe;var tn=aj.exports,Kj={exports:{}},v$e=Object.create,D2=Object.defineProperty,x$e=Object.getOwnPropertyDescriptor,w$e=Object.getOwnPropertyNames,k$e=Object.getPrototypeOf,S$e=Object.prototype.hasOwnProperty,C$e=(t,e)=>{for(var n in e)D2(t,n,{get:e[n],enumerable:!0})},Xj=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of w$e(e))!S$e.call(t,a)&&a!==n&&D2(t,a,{get:()=>e[a],enumerable:!(r=x$e(e,a))||r.enumerable});return t},E$e=(t,e,n)=>(n=t!=null?v$e(k$e(t)):{},Xj(e||!t||!t.__esModule?D2(n,"default",{value:t,enumerable:!0}):n,t)),I$e=t=>Xj(D2({},"__esModule",{value:!0}),t),Yj={};C$e(Yj,{Animated:()=>O_,AnimatedArray:()=>A_,AnimatedObject:()=>B2,AnimatedString:()=>L2,AnimatedValue:()=>w0,createHost:()=>D$e,getAnimated:()=>Zj,getAnimatedType:()=>$$e,getPayload:()=>eV,isAnimated:()=>Qj,setAnimated:()=>Jj});var T$e=I$e(Yj),N$e=tn,x0=Symbol.for("Animated:node"),Qj=t=>!!t&&t[x0]===t,Zj=t=>t&&t[x0],Jj=(t,e)=>(0,N$e.defineHidden)(t,x0,e),eV=t=>t&&t[x0]&&t[x0].getPayload(),O_=class{constructor(){Jj(this,this)}getPayload(){return this.payload||[]}},M_=tn,w0=class extends O_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,M_.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new w0(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return M_.is.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){let{done:t}=this;this.done=!1,M_.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},P_=tn,L2=class extends w0{constructor(t){super(0),this._string=null,this._toString=(0,P_.createInterpolator)({output:[t,t]})}static create(t){return new L2(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(P_.is.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=(0,P_.createInterpolator)({output:[this.getValue(),t]})),this._value=0,super.reset()}},_$e=tn,bd=tn,F2={dependencies:null},B2=class extends O_{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){let e={};return(0,bd.eachProp)(this.source,(n,r)=>{Qj(n)?e[r]=n.getValue(t):(0,bd.hasFluidValue)(n)?e[r]=(0,bd.getFluidValue)(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&(0,bd.each)(this.payload,t=>t.reset())}_makePayload(t){if(t){let e=new Set;return(0,bd.eachProp)(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){F2.dependencies&&(0,bd.hasFluidValue)(t)&&F2.dependencies.add(t);let e=eV(t);e&&(0,bd.each)(e,n=>this.add(n))}},A_=class extends B2{constructor(t){super(t)}static create(t){return new A_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){let e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(R$e)),!0)}};function R$e(t){return((0,_$e.isAnimatedString)(t)?L2:w0).create(t)}var tV=tn;function $$e(t){let e=Zj(t);return e?e.constructor:tV.is.arr(t)?A_:(0,tV.isAnimatedString)(t)?L2:w0}var Ih=tn,O$e=E$e(R),k0=R,Fi=tn,nV=(t,e)=>{let n=!Fi.is.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,k0.forwardRef)((r,a)=>{let i=(0,k0.useRef)(null),o=n&&(0,k0.useCallback)(m=>{i.current=A$e(a,m)},[a]),[s,l]=P$e(r,e),u=(0,Fi.useForceUpdate)(),c=()=>{let m=i.current;n&&!m||(m?e.applyAnimatedValues(m,s.getValue(!0)):!1)===!1&&u()},d=new M$e(c,l),p=(0,k0.useRef)();(0,Fi.useIsomorphicLayoutEffect)(()=>(p.current=d,(0,Fi.each)(l,m=>(0,Fi.addFluidObserver)(m,d)),()=>{p.current&&((0,Fi.each)(p.current.deps,m=>(0,Fi.removeFluidObserver)(m,p.current)),Fi.raf.cancel(p.current.update))})),(0,k0.useEffect)(c,[]),(0,Fi.useOnce)(()=>()=>{let m=p.current;(0,Fi.each)(m.deps,y=>(0,Fi.removeFluidObserver)(y,m))});let f=e.getComponentProps(s.getValue());return O$e.createElement(t,{...f,ref:o})})},M$e=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Fi.raf.write(this.update)}};function P$e(t,e){let n=new Set;return F2.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new B2(t),F2.dependencies=null,[t,n]}function A$e(t,e){return t&&(Fi.is.fun(t)?t(e):t.current=e),e}var rV=Symbol.for("AnimatedComponent"),D$e=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=a=>new B2(a),getComponentProps:r=a=>a}={})=>{let a={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},i=o=>{let s=aV(o)||"Anonymous";return Ih.is.str(o)?o=i[o]||(i[o]=nV(o,a)):o=o[rV]||(o[rV]=nV(o,a)),o.displayName=`Animated(${s})`,o};return(0,Ih.eachProp)(t,(o,s)=>{Ih.is.arr(t)&&(s=aV(o)),i[s]=i(o)}),{animated:i}},aV=t=>Ih.is.str(t)?t:t&&Ih.is.str(t.displayName)?t.displayName:Ih.is.fun(t)&&t.name||null;Kj.exports=T$e;var S0=Kj.exports,iV={exports:{}},D_,oV;function L$e(){if(oV)return D_;oV=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,a=(u,c)=>{for(var d in c)t(u,d,{get:c[d],enumerable:!0})},i=(u,c,d,p)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of n(c))!r.call(u,f)&&f!==d&&t(u,f,{get:()=>c[f],enumerable:!(p=e(c,f))||p.enumerable});return u},o=u=>i(t({},"__esModule",{value:!0}),u),s={};a(s,{Any:()=>l}),D_=o(s);var l=class{};return D_}var sV;function F$e(){return sV||(sV=1,iV.exports=L$e()),iV.exports}(function(t){var e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(D,U)=>{for(var J in U)n(D,J,{get:U[J],enumerable:!0})},l=(D,U,J,ae)=>{if(U&&typeof U=="object"||typeof U=="function")for(let ve of a(U))!o.call(D,ve)&&ve!==J&&n(D,ve,{get:()=>U[ve],enumerable:!(ae=r(U,ve))||ae.enumerable});return D},u=(D,U,J)=>(l(D,U,"default"),J&&l(J,U,"default")),c=(D,U,J)=>(J=D!=null?e(i(D)):{},l(U||!D||!D.__esModule?n(J,"default",{value:D,enumerable:!0}):J,D)),d=D=>l(n({},"__esModule",{value:!0}),D),p={};s(p,{BailSignal:()=>Je,Controller:()=>ke,FrameValue:()=>Zt,Globals:()=>$s.Globals,Interpolation:()=>Xu,Spring:()=>Rs,SpringContext:()=>gn,SpringRef:()=>Qo,SpringValue:()=>fn,Trail:()=>va,Transition:()=>Cd,config:()=>ne,createInterpolator:()=>Os.createInterpolator,easings:()=>Os.easings,inferTo:()=>N,interpolate:()=>Ed,to:()=>Z2,update:()=>Yu,useChain:()=>K,useInView:()=>ba,useIsomorphicLayoutEffect:()=>Os.useIsomorphicLayoutEffect,useReducedMotion:()=>Os.useReducedMotion,useResize:()=>kn,useScroll:()=>_l,useSpring:()=>ya,useSpringRef:()=>qu,useSpringValue:()=>Zo,useSprings:()=>zi,useTrail:()=>nn,useTransition:()=>Nl}),t.exports=d(p);var f=tn,m=tn;function y(D,...U){return m.is.fun(D)?D(...U):D}var v=(D,U)=>D===!0||!!(U&&D&&(m.is.fun(D)?D(U):(0,m.toArray)(D).includes(U))),b=(D,U)=>m.is.obj(D)?U&&D[U]:D,x=(D,U)=>D.default===!0?D[U]:D.default?D.default[U]:void 0,w=D=>D,S=(D,U=w)=>{let J=C;D.default&&D.default!==!0&&(D=D.default,J=Object.keys(D));let ae={};for(let ve of J){let Ce=U(D[ve],ve);m.is.und(Ce)||(ae[ve]=Ce)}return ae},C=["config","onProps","onStart","onChange","onPause","onResume","onRest"],E={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function _(D){let U={},J=0;if((0,m.eachProp)(D,(ae,ve)=>{E[ve]||(U[ve]=ae,J++)}),J)return U}function N(D){let U=_(D);if(U){let J={to:U};return(0,m.eachProp)(D,(ae,ve)=>ve in U||(J[ve]=ae)),J}return{...D}}function M(D){return D=(0,m.getFluidValue)(D),m.is.arr(D)?D.map(M):(0,m.isAnimatedString)(D)?m.Globals.createStringInterpolator({range:[0,1],output:[D,D]})(1):D}function P(D){for(let U in D)return!0;return!1}function L(D){return m.is.fun(D)||m.is.arr(D)&&m.is.obj(D[0])}function j(D,U){var J;(J=D.ref)==null||J.delete(D),U?.delete(D)}function B(D,U){var J;U&&D.ref!==U&&((J=D.ref)==null||J.delete(D),U.add(D),D.ref=U)}function K(D,U,J=1e3){(0,f.useIsomorphicLayoutEffect)(()=>{if(U){let ae=0;(0,f.each)(D,(ve,Ce)=>{let Ae=ve.current;if(Ae.length){let $e=J*U[Ce];isNaN($e)?$e=ae:ae=$e,(0,f.each)(Ae,Ne=>{(0,f.each)(Ne.queue,je=>{let gt=je.delay;je.delay=rt=>$e+y(gt||0,rt)})}),ve.start()}})}else{let ae=Promise.resolve();(0,f.each)(D,ve=>{let Ce=ve.current;if(Ce.length){let Ae=Ce.map($e=>{let Ne=$e.queue;return $e.queue=[],Ne});ae=ae.then(()=>((0,f.each)(Ce,($e,Ne)=>(0,f.each)(Ae[Ne]||[],je=>$e.queue.push(je))),Promise.all(ve.start())))}})}})}var X=tn,Z=R,H=tn,F=tn,Y=S0,Q=tn,ne={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},se={...ne.default,mass:1,damping:1,easing:Q.easings.linear,clamp:!1},pe=class{constructor(){this.velocity=0,Object.assign(this,se)}};function de(D,U,J){J&&(J={...J},ie(J,U),U={...J,...U}),ie(D,U),Object.assign(D,U);for(let Ae in se)D[Ae]==null&&(D[Ae]=se[Ae]);let{frequency:ae,damping:ve}=D,{mass:Ce}=D;return Q.is.und(ae)||(ae<.01&&(ae=.01),ve<0&&(ve=0),D.tension=Math.pow(2*Math.PI/ae,2)*Ce,D.friction=4*Math.PI*ve*Ce/ae),D}function ie(D,U){if(!Q.is.und(U.decay))D.duration=void 0;else{let J=!Q.is.und(U.tension)||!Q.is.und(U.friction);(J||!Q.is.und(U.frequency)||!Q.is.und(U.damping)||!Q.is.und(U.mass))&&(D.duration=void 0,D.decay=void 0),J&&(D.frequency=void 0)}}var xe=[],q=class{constructor(){this.changed=!1,this.values=xe,this.toValues=null,this.fromValues=xe,this.config=new pe,this.immediate=!1}},oe=tn;function he(D,{key:U,props:J,defaultProps:ae,state:ve,actions:Ce}){return new Promise((Ae,$e)=>{let Ne,je,gt=v(J.cancel??ae?.cancel,U);if(gt)wt();else{oe.is.und(J.pause)||(ve.paused=v(J.pause,U));let Ke=ae?.pause;Ke!==!0&&(Ke=ve.paused||v(Ke,U)),Ne=y(J.delay||0,U),Ke?(ve.resumeQueue.add($t),Ce.pause()):(Ce.resume(),$t())}function rt(){ve.resumeQueue.add($t),ve.timeouts.delete(je),je.cancel(),Ne=je.time-oe.raf.now()}function $t(){Ne>0&&!oe.Globals.skipAnimation?(ve.delayed=!0,je=oe.raf.setTimeout(wt,Ne),ve.pauseQueue.add(rt),ve.timeouts.add(je)):wt()}function wt(){ve.delayed&&(ve.delayed=!1),ve.pauseQueue.delete(rt),ve.timeouts.delete(je),D<=(ve.cancelId||0)&&(gt=!0);try{Ce.start({...J,callId:D,cancel:gt},Ae)}catch(Ke){$e(Ke)}}})}var Ee=tn,Ie=(D,U)=>U.length==1?U[0]:U.some(J=>J.cancelled)?Xe(D.get()):U.every(J=>J.noop)?_e(D.get()):Fe(D.get(),U.every(J=>J.finished)),_e=D=>({value:D,noop:!0,finished:!0,cancelled:!1}),Fe=(D,U,J=!1)=>({value:D,finished:U,cancelled:J}),Xe=D=>({value:D,cancelled:!0,finished:!1});function Oe(D,U,J,ae){let{callId:ve,parentId:Ce,onRest:Ae}=U,{asyncTo:$e,promise:Ne}=J;return!Ce&&D===$e&&!U.reset?Ne:J.promise=(async()=>{J.asyncId=ve,J.asyncTo=D;let je=S(U,(pt,at)=>at==="onRest"?void 0:pt),gt,rt,$t=new Promise((pt,at)=>(gt=pt,rt=at)),wt=pt=>{let at=ve<=(J.cancelId||0)&&Xe(ae)||ve!==J.asyncId&&Fe(ae,!1);if(at)throw pt.result=at,rt(pt),pt},Ke=(pt,at)=>{let kt=new Je,st=new nt;return(async()=>{if(Ee.Globals.skipAnimation)throw lt(J),st.result=Fe(ae,!1),rt(st),st;wt(kt);let vt=Ee.is.obj(pt)?{...pt}:{...at,to:pt};vt.parentId=ve,(0,Ee.eachProp)(je,(ei,Wt)=>{Ee.is.und(vt[Wt])&&(vt[Wt]=ei)});let ir=await ae.start(vt);return wt(kt),J.paused&&await new Promise(ei=>{J.resumeQueue.add(ei)}),ir})()},ct;if(Ee.Globals.skipAnimation)return lt(J),Fe(ae,!1);try{let pt;Ee.is.arr(D)?pt=(async at=>{for(let kt of at)await Ke(kt)})(D):pt=Promise.resolve(D(Ke,ae.stop.bind(ae))),await Promise.all([pt.then(gt),$t]),ct=Fe(ae.get(),!0,!1)}catch(pt){if(pt instanceof Je)ct=pt.result;else if(pt instanceof nt)ct=pt.result;else throw pt}finally{ve==J.asyncId&&(J.asyncId=Ce,J.asyncTo=Ce?$e:void 0,J.promise=Ce?Ne:void 0)}return Ee.is.fun(Ae)&&Ee.raf.batchedUpdates(()=>{Ae(ct,ae,ae.item)}),ct})()}function lt(D,U){(0,Ee.flush)(D.timeouts,J=>J.cancel()),D.pauseQueue.clear(),D.resumeQueue.clear(),D.asyncId=D.asyncTo=D.promise=void 0,U&&(D.cancelId=U)}var Je=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},nt=class extends Error{constructor(){super("SkipAnimationSignal")}},et=tn,sn=S0,Vt=D=>D instanceof Zt,Qt=1,Zt=class extends et.FluidValue{constructor(){super(...arguments),this.id=Qt++,this._priority=0}get priority(){return this._priority}set priority(D){this._priority!=D&&(this._priority=D,this._onPriorityChange(D))}get(){let D=(0,sn.getAnimated)(this);return D&&D.getValue()}to(...D){return et.Globals.to(this,D)}interpolate(...D){return(0,et.deprecateInterpolate)(),et.Globals.to(this,D)}toJSON(){return this.get()}observerAdded(D){D==1&&this._attach()}observerRemoved(D){D==0&&this._detach()}_attach(){}_detach(){}_onChange(D,U=!1){(0,et.callFluidObservers)(this,{type:"change",parent:this,value:D,idle:U})}_onPriorityChange(D){this.idle||et.frameLoop.sort(this),(0,et.callFluidObservers)(this,{type:"priority",parent:this,priority:D})}},Ot=Symbol.for("SpringPhase"),Et=1,jn=2,Yn=4,ja=D=>(D[Ot]&Et)>0,Rn=D=>(D[Ot]&jn)>0,Za=D=>(D[Ot]&Yn)>0,wo=(D,U)=>U?D[Ot]|=jn|Et:D[Ot]&=~jn,vi=(D,U)=>U?D[Ot]|=Yn:D[Ot]&=~Yn,fn=class extends Zt{constructor(D,U){if(super(),this.animation=new q,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!F.is.und(D)||!F.is.und(U)){let J=F.is.obj(D)?{...D}:{...U,from:D};F.is.und(J.default)&&(J.default=!0),this.start(J)}}get idle(){return!(Rn(this)||this._state.asyncTo)||Za(this)}get goal(){return(0,F.getFluidValue)(this.animation.to)}get velocity(){let D=(0,Y.getAnimated)(this);return D instanceof Y.AnimatedValue?D.lastVelocity||0:D.getPayload().map(U=>U.lastVelocity||0)}get hasAnimated(){return ja(this)}get isAnimating(){return Rn(this)}get isPaused(){return Za(this)}get isDelayed(){return this._state.delayed}advance(D){let U=!0,J=!1,ae=this.animation,{toValues:ve}=ae,{config:Ce}=ae,Ae=(0,Y.getPayload)(ae.to);!Ae&&(0,F.hasFluidValue)(ae.to)&&(ve=(0,F.toArray)((0,F.getFluidValue)(ae.to))),ae.values.forEach((je,gt)=>{if(je.done)return;let rt=je.constructor==Y.AnimatedString?1:Ae?Ae[gt].lastPosition:ve[gt],$t=ae.immediate,wt=rt;if(!$t){if(wt=je.lastPosition,Ce.tension<=0){je.done=!0;return}let Ke=je.elapsedTime+=D,ct=ae.fromValues[gt],pt=je.v0!=null?je.v0:je.v0=F.is.arr(Ce.velocity)?Ce.velocity[gt]:Ce.velocity,at,kt=Ce.precision||(ct==rt?.005:Math.min(1,Math.abs(rt-ct)*.001));if(F.is.und(Ce.duration))if(Ce.decay){let st=Ce.decay===!0?.998:Ce.decay,vt=Math.exp(-(1-st)*Ke);wt=ct+pt/(1-st)*(1-vt),$t=Math.abs(je.lastPosition-wt)<=kt,at=pt*vt}else{at=je.lastVelocity==null?pt:je.lastVelocity;let st=Ce.restVelocity||kt/10,vt=Ce.clamp?0:Ce.bounce,ir=!F.is.und(vt),ei=ct==rt?je.v0>0:ct<rt,Wt,Un=!1,Dn=1,xa=Math.ceil(D/Dn);for(let Va=0;Va<xa&&(Wt=Math.abs(at)>st,!(!Wt&&($t=Math.abs(rt-wt)<=kt,$t)));++Va){ir&&(Un=wt==rt||wt>rt==ei,Un&&(at=-at*vt,wt=rt));let Co=-Ce.tension*1e-6*(wt-rt),kr=-Ce.friction*.001*at,ht=(Co+kr)/Ce.mass;at=at+ht*Dn,wt=wt+at*Dn}}else{let st=1;Ce.duration>0&&(this._memoizedDuration!==Ce.duration&&(this._memoizedDuration=Ce.duration,je.durationProgress>0&&(je.elapsedTime=Ce.duration*je.durationProgress,Ke=je.elapsedTime+=D)),st=(Ce.progress||0)+Ke/this._memoizedDuration,st=st>1?1:st<0?0:st,je.durationProgress=st),wt=ct+Ce.easing(st)*(rt-ct),at=(wt-je.lastPosition)/D,$t=st==1}je.lastVelocity=at,Number.isNaN(wt)&&(console.warn("Got NaN while animating:",this),$t=!0)}Ae&&!Ae[gt].done&&($t=!1),$t?je.done=!0:U=!1,je.setValue(wt,Ce.round)&&(J=!0)});let $e=(0,Y.getAnimated)(this),Ne=$e.getValue();if(U){let je=(0,F.getFluidValue)(ae.to);(Ne!==je||J)&&!Ce.decay?($e.setValue(je),this._onChange(je)):J&&Ce.decay&&this._onChange(Ne),this._stop()}else J&&this._onChange(Ne)}set(D){return F.raf.batchedUpdates(()=>{this._stop(),this._focus(D),this._set(D)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Rn(this)){let{to:D,config:U}=this.animation;F.raf.batchedUpdates(()=>{this._onStart(),U.decay||this._set(D,!1),this._stop()})}return this}update(D){return(this.queue||(this.queue=[])).push(D),this}start(D,U){let J;return F.is.und(D)?(J=this.queue||[],this.queue=[]):J=[F.is.obj(D)?D:{...U,to:D}],Promise.all(J.map(ae=>this._update(ae))).then(ae=>Ie(this,ae))}stop(D){let{to:U}=this.animation;return this._focus(this.get()),lt(this._state,D&&this._lastCallId),F.raf.batchedUpdates(()=>this._stop(U,D)),this}reset(){this._update({reset:!0})}eventObserved(D){D.type=="change"?this._start():D.type=="priority"&&(this.priority=D.priority+1)}_prepareNode(D){let U=this.key||"",{to:J,from:ae}=D;J=F.is.obj(J)?J[U]:J,(J==null||L(J))&&(J=void 0),ae=F.is.obj(ae)?ae[U]:ae,ae==null&&(ae=void 0);let ve={to:J,from:ae};return ja(this)||(D.reverse&&([J,ae]=[ae,J]),ae=(0,F.getFluidValue)(ae),F.is.und(ae)?(0,Y.getAnimated)(this)||this._set(J):this._set(ae)),ve}_update({...D},U){let{key:J,defaultProps:ae}=this;D.default&&Object.assign(ae,S(D,(Ae,$e)=>/^on/.test($e)?b(Ae,J):Ae)),Sd(this,D,"onProps"),Yo(this,"onProps",D,this);let ve=this._prepareNode(D);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ce=this._state;return he(++this._lastCallId,{key:J,props:D,defaultProps:ae,state:Ce,actions:{pause:()=>{Za(this)||(vi(this,!0),(0,F.flushCalls)(Ce.pauseQueue),Yo(this,"onPause",Fe(this,Ja(this,this.animation.to)),this))},resume:()=>{Za(this)&&(vi(this,!1),Rn(this)&&this._resume(),(0,F.flushCalls)(Ce.resumeQueue),Yo(this,"onResume",Fe(this,Ja(this,this.animation.to)),this))},start:this._merge.bind(this,ve)}}).then(Ae=>{if(D.loop&&Ae.finished&&!(U&&Ae.noop)){let $e=xi(D);if($e)return this._update($e,!0)}return Ae})}_merge(D,U,J){if(U.cancel)return this.stop(!0),J(Xe(this));let ae=!F.is.und(D.to),ve=!F.is.und(D.from);if(ae||ve)if(U.callId>this._lastToId)this._lastToId=U.callId;else return J(Xe(this));let{key:Ce,defaultProps:Ae,animation:$e}=this,{to:Ne,from:je}=$e,{to:gt=Ne,from:rt=je}=D;ve&&!ae&&(!U.default||F.is.und(gt))&&(gt=rt),U.reverse&&([gt,rt]=[rt,gt]);let $t=!(0,F.isEqual)(rt,je);$t&&($e.from=rt),rt=(0,F.getFluidValue)(rt);let wt=!(0,F.isEqual)(gt,Ne);wt&&this._focus(gt);let Ke=L(U.to),{config:ct}=$e,{decay:pt,velocity:at}=ct;(ae||ve)&&(ct.velocity=0),U.config&&!Ke&&de(ct,y(U.config,Ce),U.config!==Ae.config?y(Ae.config,Ce):void 0);let kt=(0,Y.getAnimated)(this);if(!kt||F.is.und(gt))return J(Fe(this,!0));let st=F.is.und(U.reset)?ve&&!U.default:!F.is.und(rt)&&v(U.reset,Ce),vt=st?rt:this.get(),ir=M(gt),ei=F.is.num(ir)||F.is.arr(ir)||(0,F.isAnimatedString)(ir),Wt=!Ke&&(!ei||v(Ae.immediate||U.immediate,Ce));if(wt){let Va=(0,Y.getAnimatedType)(gt);if(Va!==kt.constructor)if(Wt)kt=this._set(ir);else throw Error(`Cannot animate between ${kt.constructor.name} and ${Va.name}, as the "to" prop suggests`)}let Un=kt.constructor,Dn=(0,F.hasFluidValue)(gt),xa=!1;if(!Dn){let Va=st||!ja(this)&&$t;(wt||Va)&&(xa=(0,F.isEqual)(M(vt),ir),Dn=!xa),(!(0,F.isEqual)($e.immediate,Wt)&&!Wt||!(0,F.isEqual)(ct.decay,pt)||!(0,F.isEqual)(ct.velocity,at))&&(Dn=!0)}if(xa&&Rn(this)&&($e.changed&&!st?Dn=!0:Dn||this._stop(Ne)),!Ke&&((Dn||(0,F.hasFluidValue)(Ne))&&($e.values=kt.getPayload(),$e.toValues=(0,F.hasFluidValue)(gt)?null:Un==Y.AnimatedString?[1]:(0,F.toArray)(ir)),$e.immediate!=Wt&&($e.immediate=Wt,!Wt&&!st&&this._set(Ne)),Dn)){let{onRest:Va}=$e;(0,F.each)(Il,kr=>Sd(this,U,kr));let Co=Fe(this,Ja(this,Ne));(0,F.flushCalls)(this._pendingCalls,Co),this._pendingCalls.add(J),$e.changed&&F.raf.batchedUpdates(()=>{var kr;$e.changed=!st,Va?.(Co,this),st?y(Ae.onRest,Co):(kr=$e.onStart)==null||kr.call($e,Co,this)})}st&&this._set(vt),Ke?J(Oe(U.to,U,this._state,this)):Dn?this._start():Rn(this)&&!wt?this._pendingCalls.add(J):J(_e(vt))}_focus(D){let U=this.animation;D!==U.to&&((0,F.getFluidObservers)(this)&&this._detach(),U.to=D,(0,F.getFluidObservers)(this)&&this._attach())}_attach(){let D=0,{to:U}=this.animation;(0,F.hasFluidValue)(U)&&((0,F.addFluidObserver)(U,this),Vt(U)&&(D=U.priority+1)),this.priority=D}_detach(){let{to:D}=this.animation;(0,F.hasFluidValue)(D)&&(0,F.removeFluidObserver)(D,this)}_set(D,U=!0){let J=(0,F.getFluidValue)(D);if(!F.is.und(J)){let ae=(0,Y.getAnimated)(this);if(!ae||!(0,F.isEqual)(J,ae.getValue())){let ve=(0,Y.getAnimatedType)(J);!ae||ae.constructor!=ve?(0,Y.setAnimated)(this,ve.create(J)):ae.setValue(J),ae&&F.raf.batchedUpdates(()=>{this._onChange(J,U)})}}return(0,Y.getAnimated)(this)}_onStart(){let D=this.animation;D.changed||(D.changed=!0,Yo(this,"onStart",Fe(this,Ja(this,D.to)),this))}_onChange(D,U){U||(this._onStart(),y(this.animation.onChange,D,this)),y(this.defaultProps.onChange,D,this),super._onChange(D,U)}_start(){let D=this.animation;(0,Y.getAnimated)(this).reset((0,F.getFluidValue)(D.to)),D.immediate||(D.fromValues=D.values.map(U=>U.lastPosition)),Rn(this)||(wo(this,!0),Za(this)||this._resume())}_resume(){F.Globals.skipAnimation?this.finish():F.frameLoop.start(this)}_stop(D,U){if(Rn(this)){wo(this,!1);let J=this.animation;(0,F.each)(J.values,ve=>{ve.done=!0}),J.toValues&&(J.onChange=J.onPause=J.onResume=void 0),(0,F.callFluidObservers)(this,{type:"idle",parent:this});let ae=U?Xe(this.get()):Fe(this.get(),Ja(this,D??J.to));(0,F.flushCalls)(this._pendingCalls,ae),J.changed&&(J.changed=!1,Yo(this,"onRest",ae,this))}}};function Ja(D,U){let J=M(U),ae=M(D.get());return(0,F.isEqual)(ae,J)}function xi(D,U=D.loop,J=D.to){let ae=y(U);if(ae){let ve=ae!==!0&&N(ae),Ce=(ve||D).reverse,Ae=!ve||ve.reset;return wi({...D,loop:U,default:!1,pause:void 0,to:!Ce||L(J)?J:void 0,from:Ae?D.from:void 0,reset:Ae,...ve})}}function wi(D){let{to:U,from:J}=D=N(D),ae=new Set;return F.is.obj(U)&&ma(U,ae),F.is.obj(J)&&ma(J,ae),D.keys=ae.size?Array.from(ae):null,D}function _s(D){let U=wi(D);return F.is.und(U.default)&&(U.default=S(U)),U}function ma(D,U){(0,F.eachProp)(D,(J,ae)=>J!=null&&U.add(ae))}var Il=["onStart","onRest","onChange","onPause","onResume"];function Sd(D,U,J){D.animation[J]=U[J]!==x(U,J)?b(U[J],D.key):void 0}function Yo(D,U,...J){var ae,ve,Ce,Ae;(ve=(ae=D.animation)[U])==null||ve.call(ae,...J),(Ae=(Ce=D.defaultProps)[U])==null||Ae.call(Ce,...J)}var Ut=tn,ue=["onStart","onChange","onRest"],ge=1,ke=class{constructor(D,U){this.id=ge++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),U&&(this._flush=U),D&&this.start({default:!0,...D})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(D=>D.idle&&!D.isDelayed&&!D.isPaused)}get item(){return this._item}set item(D){this._item=D}get(){let D={};return this.each((U,J)=>D[J]=U.get()),D}set(D){for(let U in D){let J=D[U];Ut.is.und(J)||this.springs[U].set(J)}}update(D){return D&&this.queue.push(wi(D)),this}start(D){let{queue:U}=this;return D?U=(0,Ut.toArray)(D).map(wi):this.queue=[],this._flush?this._flush(this,U):(Mt(this,U),Me(this,U))}stop(D,U){if(D!==!!D&&(U=D),U){let J=this.springs;(0,Ut.each)((0,Ut.toArray)(U),ae=>J[ae].stop(!!D))}else lt(this._state,this._lastAsyncId),this.each(J=>J.stop(!!D));return this}pause(D){if(Ut.is.und(D))this.start({pause:!0});else{let U=this.springs;(0,Ut.each)((0,Ut.toArray)(D),J=>U[J].pause())}return this}resume(D){if(Ut.is.und(D))this.start({pause:!1});else{let U=this.springs;(0,Ut.each)((0,Ut.toArray)(D),J=>U[J].resume())}return this}each(D){(0,Ut.eachProp)(this.springs,D)}_onFrame(){let{onStart:D,onChange:U,onRest:J}=this._events,ae=this._active.size>0,ve=this._changed.size>0;(ae&&!this._started||ve&&!this._started)&&(this._started=!0,(0,Ut.flush)(D,([$e,Ne])=>{Ne.value=this.get(),$e(Ne,this,this._item)}));let Ce=!ae&&this._started,Ae=ve||Ce&&J.size?this.get():null;ve&&U.size&&(0,Ut.flush)(U,([$e,Ne])=>{Ne.value=Ae,$e(Ne,this,this._item)}),Ce&&(this._started=!1,(0,Ut.flush)(J,([$e,Ne])=>{Ne.value=Ae,$e(Ne,this,this._item)}))}eventObserved(D){if(D.type=="change")this._changed.add(D.parent),D.idle||this._active.add(D.parent);else if(D.type=="idle")this._active.delete(D.parent);else return;Ut.raf.onFrame(this._onFrame)}};function Me(D,U){return Promise.all(U.map(J=>Ge(D,J))).then(J=>Ie(D,J))}async function Ge(D,U,J){let{keys:ae,to:ve,from:Ce,loop:Ae,onRest:$e,onResolve:Ne}=U,je=Ut.is.obj(U.default)&&U.default;Ae&&(U.loop=!1),ve===!1&&(U.to=null),Ce===!1&&(U.from=null);let gt=Ut.is.arr(ve)||Ut.is.fun(ve)?ve:void 0;gt?(U.to=void 0,U.onRest=void 0,je&&(je.onRest=void 0)):(0,Ut.each)(ue,ct=>{let pt=U[ct];if(Ut.is.fun(pt)){let at=D._events[ct];U[ct]=({finished:kt,cancelled:st})=>{let vt=at.get(pt);vt?(kt||(vt.finished=!1),st&&(vt.cancelled=!0)):at.set(pt,{value:null,finished:kt||!1,cancelled:st||!1})},je&&(je[ct]=U[ct])}});let rt=D._state;U.pause===!rt.paused?(rt.paused=U.pause,(0,Ut.flushCalls)(U.pause?rt.pauseQueue:rt.resumeQueue)):rt.paused&&(U.pause=!0);let $t=(ae||Object.keys(D.springs)).map(ct=>D.springs[ct].start(U)),wt=U.cancel===!0||x(U,"cancel")===!0;(gt||wt&&rt.asyncId)&&$t.push(he(++D._lastAsyncId,{props:U,state:rt,actions:{pause:Ut.noop,resume:Ut.noop,start(ct,pt){wt?(lt(rt,D._lastAsyncId),pt(Xe(D))):(ct.onRest=$e,pt(Oe(gt,ct,rt,D)))}}})),rt.paused&&await new Promise(ct=>{rt.resumeQueue.add(ct)});let Ke=Ie(D,await Promise.all($t));if(Ae&&Ke.finished&&!(J&&Ke.noop)){let ct=xi(U,Ae,ve);if(ct)return Mt(D,[ct]),Ge(D,ct,!0)}return Ne&&Ut.raf.batchedUpdates(()=>Ne(Ke,D,D.item)),Ke}function bt(D,U){let J={...D.springs};return U&&(0,Ut.each)((0,Ut.toArray)(U),ae=>{Ut.is.und(ae.keys)&&(ae=wi(ae)),Ut.is.obj(ae.to)||(ae={...ae,to:void 0}),tt(J,ae,ve=>ot(ve))}),ut(D,J),J}function ut(D,U){(0,Ut.eachProp)(U,(J,ae)=>{D.springs[ae]||(D.springs[ae]=J,(0,Ut.addFluidObserver)(J,D))})}function ot(D,U){let J=new fn;return J.key=D,U&&(0,Ut.addFluidObserver)(J,U),J}function tt(D,U,J){U.keys&&(0,Ut.each)(U.keys,ae=>{(D[ae]||(D[ae]=J(ae)))._prepareNode(U)})}function Mt(D,U){(0,Ut.each)(U,J=>{tt(D.springs,J,ae=>ot(ae,D))})}var An=c(R),xt=R,cn=tn,gn=({children:D,...U})=>{let J=(0,xt.useContext)($r),ae=U.pause||!!J.pause,ve=U.immediate||!!J.immediate;U=(0,cn.useMemoOne)(()=>({pause:ae,immediate:ve}),[ae,ve]);let{Provider:Ce}=$r;return An.createElement(Ce,{value:U},D)},$r=ar(gn,{});gn.Provider=$r.Provider,gn.Consumer=$r.Consumer;function ar(D,U){return Object.assign(D,An.createContext(U)),D.Provider._context=D,D.Consumer._context=D,D}var fr=tn,Qo=()=>{let D=[],U=function(ae){(0,fr.deprecateDirectCall)();let ve=[];return(0,fr.each)(D,(Ce,Ae)=>{if(fr.is.und(ae))ve.push(Ce.start());else{let $e=J(ae,Ce,Ae);$e&&ve.push(Ce.start($e))}}),ve};U.current=D,U.add=function(ae){D.includes(ae)||D.push(ae)},U.delete=function(ae){let ve=D.indexOf(ae);~ve&&D.splice(ve,1)},U.pause=function(){return(0,fr.each)(D,ae=>ae.pause(...arguments)),this},U.resume=function(){return(0,fr.each)(D,ae=>ae.resume(...arguments)),this},U.set=function(ae){(0,fr.each)(D,(ve,Ce)=>{let Ae=fr.is.fun(ae)?ae(Ce,ve):ae;Ae&&ve.set(Ae)})},U.start=function(ae){let ve=[];return(0,fr.each)(D,(Ce,Ae)=>{if(fr.is.und(ae))ve.push(Ce.start());else{let $e=this._getProps(ae,Ce,Ae);$e&&ve.push(Ce.start($e))}}),ve},U.stop=function(){return(0,fr.each)(D,ae=>ae.stop(...arguments)),this},U.update=function(ae){return(0,fr.each)(D,(ve,Ce)=>ve.update(this._getProps(ae,ve,Ce))),this};let J=function(ae,ve,Ce){return fr.is.fun(ae)?ae(Ce,ve):ae};return U._getProps=J,U};function zi(D,U,J){let ae=H.is.fun(U)&&U;ae&&!J&&(J=[]);let ve=(0,Z.useMemo)(()=>ae||arguments.length==3?Qo():void 0,[]),Ce=(0,Z.useRef)(0),Ae=(0,H.useForceUpdate)(),$e=(0,Z.useMemo)(()=>({ctrls:[],queue:[],flush(at,kt){let st=bt(at,kt);return Ce.current>0&&!$e.queue.length&&!Object.keys(st).some(vt=>!at.springs[vt])?Me(at,kt):new Promise(vt=>{ut(at,st),$e.queue.push(()=>{vt(Me(at,kt))}),Ae()})}}),[]),Ne=(0,Z.useRef)([...$e.ctrls]),je=[],gt=(0,H.usePrev)(D)||0;(0,Z.useMemo)(()=>{(0,H.each)(Ne.current.slice(D,gt),at=>{j(at,ve),at.stop(!0)}),Ne.current.length=D,rt(gt,D)},[D]),(0,Z.useMemo)(()=>{rt(0,Math.min(gt,D))},J);function rt(at,kt){for(let st=at;st<kt;st++){let vt=Ne.current[st]||(Ne.current[st]=new ke(null,$e.flush)),ir=ae?ae(st,vt):U[st];ir&&(je[st]=_s(ir))}}let $t=Ne.current.map((at,kt)=>bt(at,je[kt])),wt=(0,Z.useContext)(gn),Ke=(0,H.usePrev)(wt),ct=wt!==Ke&&P(wt);(0,H.useIsomorphicLayoutEffect)(()=>{Ce.current++,$e.ctrls=Ne.current;let{queue:at}=$e;at.length&&($e.queue=[],(0,H.each)(at,kt=>kt())),(0,H.each)(Ne.current,(kt,st)=>{ve?.add(kt),ct&&kt.start({default:wt});let vt=je[st];vt&&(B(kt,vt.ref),kt.ref?kt.queue.push(vt):kt.start(vt))})}),(0,H.useOnce)(()=>()=>{(0,H.each)($e.ctrls,at=>at.stop(!0))});let pt=$t.map(at=>({...at}));return ve?[pt,ve]:pt}function ya(D,U){let J=X.is.fun(D),[[ae],ve]=zi(1,J?D:[D],J?U||[]:U);return J||arguments.length==2?[ae,ve]:ae}var ko=R,Hu=()=>Qo(),qu=()=>(0,ko.useState)(Hu)[0],Tl=tn,Zo=(D,U)=>{let J=(0,Tl.useConstant)(()=>new fn(D,U));return(0,Tl.useOnce)(()=>()=>{J.stop()}),J},So=tn;function nn(D,U,J){let ae=So.is.fun(U)&&U;ae&&!J&&(J=[]);let ve=!0,Ce,Ae=zi(D,($e,Ne)=>{let je=ae?ae($e,Ne):U;return Ce=je.ref,ve=ve&&je.reverse,je},J||[{}]);if((0,So.useIsomorphicLayoutEffect)(()=>{(0,So.each)(Ae[1].current,($e,Ne)=>{let je=Ae[1].current[Ne+(ve?1:-1)];if(B($e,Ce),$e.ref){je&&$e.update({to:je.springs});return}je?$e.start({to:je.springs}):$e.start()})},J),ae||arguments.length==3){let $e=Ce??Ae[1];return $e._getProps=(Ne,je,gt)=>{let rt=So.is.fun(Ne)?Ne(gt,je):Ne;if(rt){let $t=$e.current[gt+(rt.reverse?1:-1)];return $t&&(rt.to=$t.springs),rt}},Ae}return Ae[0]}var dn=c(R),wr=R,Dt=tn;function Nl(D,U,J){let ae=Dt.is.fun(U)&&U,{reset:ve,sort:Ce,trail:Ae=0,expires:$e=!0,exitBeforeEnter:Ne=!1,onDestroyed:je,ref:gt,config:rt}=ae?ae():U,$t=(0,wr.useMemo)(()=>ae||arguments.length==3?Qo():void 0,[]),wt=(0,Dt.toArray)(D),Ke=[],ct=(0,wr.useRef)(null),pt=ve?null:ct.current;(0,Dt.useIsomorphicLayoutEffect)(()=>{ct.current=Ke}),(0,Dt.useOnce)(()=>((0,Dt.each)(Ke,ht=>{$t?.add(ht.ctrl),ht.ctrl.ref=$t}),()=>{(0,Dt.each)(ct.current,ht=>{ht.expired&&clearTimeout(ht.expirationId),j(ht.ctrl,$t),ht.ctrl.stop(!0)})}));let at=Q2(wt,ae?ae():U,pt),kt=ve&&ct.current||[];(0,Dt.useIsomorphicLayoutEffect)(()=>(0,Dt.each)(kt,({ctrl:ht,item:Rt,key:Sr})=>{j(ht,$t),y(je,Rt,Sr)}));let st=[];if(pt&&(0,Dt.each)(pt,(ht,Rt)=>{ht.expired?(clearTimeout(ht.expirationId),kt.push(ht)):(Rt=st[Rt]=at.indexOf(ht.key),~Rt&&(Ke[Rt]=ht))}),(0,Dt.each)(wt,(ht,Rt)=>{Ke[Rt]||(Ke[Rt]={key:at[Rt],item:ht,phase:"mount",ctrl:new ke},Ke[Rt].ctrl.item=ht)}),st.length){let ht=-1,{leave:Rt}=ae?ae():U;(0,Dt.each)(st,(Sr,Cr)=>{let pn=pt[Cr];~Sr?(ht=Ke.indexOf(pn),Ke[ht]={...pn,item:wt[Sr]}):Rt&&Ke.splice(++ht,0,pn)})}Dt.is.fun(Ce)&&Ke.sort((ht,Rt)=>Ce(ht.item,Rt.item));let vt=-Ae,ir=(0,Dt.useForceUpdate)(),ei=S(U),Wt=new Map,Un=(0,wr.useRef)(new Map),Dn=(0,wr.useRef)(!1);(0,Dt.each)(Ke,(ht,Rt)=>{let Sr=ht.key,Cr=ht.phase,pn=ae?ae():U,$n,ta,Eo=y(pn.delay||0,Sr);if(Cr=="mount")$n=pn.enter,ta="enter";else{let Ua=at.indexOf(Sr)<0;if(Cr!="leave")if(Ua)$n=pn.leave,ta="leave";else if($n=pn.update)ta="update";else return;else if(!Ua)$n=pn.enter,ta="enter";else return}if($n=y($n,ht.item,Rt),$n=Dt.is.obj($n)?N($n):{to:$n},!$n.config){let Ua=rt||ei.config;$n.config=y(Ua,ht.item,Rt,ta)}vt+=Ae;let na={...ei,delay:Eo+vt,ref:gt,immediate:pn.immediate,reset:!1,...$n};if(ta=="enter"&&Dt.is.und(na.from)){let Ua=ae?ae():U,Ps=Dt.is.und(Ua.initial)||pt?Ua.from:Ua.initial;na.from=y(Ps,ht.item,Rt)}let{onResolve:Ms}=na;na.onResolve=Ua=>{y(Ms,Ua);let Ps=ct.current,or=Ps.find(ra=>ra.key===Sr);if(or&&!(Ua.cancelled&&or.phase!="update")&&or.ctrl.idle){let ra=Ps.every(rn=>rn.ctrl.idle);if(or.phase=="leave"){let rn=y($e,or.item);if(rn!==!1){let As=rn===!0?0:rn;if(or.expired=!0,!ra&&As>0){As<=2147483647&&(or.expirationId=setTimeout(ir,As));return}}}ra&&Ps.some(rn=>rn.expired)&&(Un.current.delete(or),Ne&&(Dn.current=!0),ir())}};let Mh=bt(ht.ctrl,na);ta==="leave"&&Ne?Un.current.set(ht,{phase:ta,springs:Mh,payload:na}):Wt.set(ht,{phase:ta,springs:Mh,payload:na})});let xa=(0,wr.useContext)(gn),Va=(0,Dt.usePrev)(xa),Co=xa!==Va&&P(xa);(0,Dt.useIsomorphicLayoutEffect)(()=>{Co&&(0,Dt.each)(Ke,ht=>{ht.ctrl.start({default:xa})})},[xa]),(0,Dt.each)(Wt,(ht,Rt)=>{if(Un.current.size){let Sr=Ke.findIndex(Cr=>Cr.key===Rt.key);Ke.splice(Sr,1)}}),(0,Dt.useIsomorphicLayoutEffect)(()=>{(0,Dt.each)(Un.current.size?Un.current:Wt,({phase:ht,payload:Rt},Sr)=>{let{ctrl:Cr}=Sr;Sr.phase=ht,$t?.add(Cr),Co&&ht=="enter"&&Cr.start({default:xa}),Rt&&(B(Cr,Rt.ref),(Cr.ref||$t)&&!Dn.current?Cr.update(Rt):(Cr.start(Rt),Dn.current&&(Dn.current=!1)))})},ve?void 0:J);let kr=ht=>dn.createElement(dn.Fragment,null,Ke.map((Rt,Sr)=>{let{springs:Cr}=Wt.get(Rt)||Rt.ctrl,pn=ht({...Cr},Rt.item,Rt,Sr);return pn&&pn.type?dn.createElement(pn.type,{...pn.props,key:Dt.is.str(Rt.key)||Dt.is.num(Rt.key)?Rt.key:Rt.ctrl.id,ref:pn.ref}):pn}));return $t?[kr,$t]:kr}var $h=1;function Q2(D,{key:U,keys:J=U},ae){if(J===null){let ve=new Set;return D.map(Ce=>{let Ae=ae&&ae.find($e=>$e.item===Ce&&$e.phase!=="leave"&&!ve.has($e));return Ae?(ve.add(Ae),Ae.key):$h++})}return Dt.is.und(J)?D:Dt.is.fun(J)?D.map(J):(0,Dt.toArray)(J)}var Ku=tn,_l=({container:D,...U}={})=>{let[J,ae]=ya(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...U}),[]);return(0,Ku.useIsomorphicLayoutEffect)(()=>{let ve=(0,Ku.onScroll)(({x:Ce,y:Ae})=>{ae.start({scrollX:Ce.current,scrollXProgress:Ce.progress,scrollY:Ae.current,scrollYProgress:Ae.progress})},{container:D?.current||void 0});return()=>{(0,Ku.each)(Object.values(J),Ce=>Ce.stop()),ve()}},[]),J},ji=tn,kn=({container:D,...U})=>{let[J,ae]=ya(()=>({width:0,height:0,...U}),[]);return(0,ji.useIsomorphicLayoutEffect)(()=>{let ve=(0,ji.onResize)(({width:Ce,height:Ae})=>{ae.start({width:Ce,height:Ae,immediate:J.width.get()===0||J.height.get()===0})},{container:D?.current||void 0});return()=>{(0,ji.each)(Object.values(J),Ce=>Ce.stop()),ve()}},[]),J},mn=R,Vi=tn,Ur={any:0,all:1};function ba(D,U){let[J,ae]=(0,mn.useState)(!1),ve=(0,mn.useRef)(),Ce=Vi.is.fun(D)&&D,Ae=Ce?Ce():{},{to:$e={},from:Ne={},...je}=Ae,gt=Ce?U:D,[rt,$t]=ya(()=>({from:Ne,...je}),[]);return(0,Vi.useIsomorphicLayoutEffect)(()=>{let wt=ve.current,{root:Ke,once:ct,amount:pt="any",...at}=gt??{};if(!wt||ct&&J||typeof IntersectionObserver>"u")return;let kt=new WeakMap,st=()=>($e&&$t.start($e),ae(!0),ct?void 0:()=>{Ne&&$t.start(Ne),ae(!1)}),vt=ei=>{ei.forEach(Wt=>{let Un=kt.get(Wt.target);if(Wt.isIntersecting!==!!Un)if(Wt.isIntersecting){let Dn=st();Vi.is.fun(Dn)?kt.set(Wt.target,Dn):ir.unobserve(Wt.target)}else Un&&(Un(),kt.delete(Wt.target))})},ir=new IntersectionObserver(vt,{root:Ke&&Ke.current||void 0,threshold:typeof pt=="number"||Array.isArray(pt)?pt:Ur[pt],...at});return ir.observe(wt),()=>ir.unobserve(wt)},[gt]),Ce?[ve,rt]:[ve,J]}function Rs({children:D,...U}){return D(ya(U))}var Rl=tn;function va({items:D,children:U,...J}){let ae=nn(D.length,J);return D.map((ve,Ce)=>{let Ae=U(ve,Ce);return Rl.is.fun(Ae)?Ae(ae[Ce]):Ae})}function Cd({items:D,children:U,...J}){return Nl(D,J)(U)}var R0=tn,Vn=tn,Jo=S0,Xu=class extends Zt{constructor(D,U){super(),this.source=D,this.idle=!0,this._active=new Set,this.calc=(0,Vn.createInterpolator)(...U);let J=this._get(),ae=(0,Jo.getAnimatedType)(J);(0,Jo.setAnimated)(this,ae.create(J))}advance(D){let U=this._get(),J=this.get();(0,Vn.isEqual)(U,J)||((0,Jo.getAnimated)(this).setValue(U),this._onChange(U,this.idle)),!this.idle&&$0(this._active)&&Oh(this)}_get(){let D=Vn.is.arr(this.source)?this.source.map(Vn.getFluidValue):(0,Vn.toArray)((0,Vn.getFluidValue)(this.source));return this.calc(...D)}_start(){this.idle&&!$0(this._active)&&(this.idle=!1,(0,Vn.each)((0,Jo.getPayload)(this),D=>{D.done=!1}),Vn.Globals.skipAnimation?(Vn.raf.batchedUpdates(()=>this.advance()),Oh(this)):Vn.frameLoop.start(this))}_attach(){let D=1;(0,Vn.each)((0,Vn.toArray)(this.source),U=>{(0,Vn.hasFluidValue)(U)&&(0,Vn.addFluidObserver)(U,this),Vt(U)&&(U.idle||this._active.add(U),D=Math.max(D,U.priority+1))}),this.priority=D,this._start()}_detach(){(0,Vn.each)((0,Vn.toArray)(this.source),D=>{(0,Vn.hasFluidValue)(D)&&(0,Vn.removeFluidObserver)(D,this)}),this._active.clear(),Oh(this)}eventObserved(D){D.type=="change"?D.idle?this.advance():(this._active.add(D.parent),this._start()):D.type=="idle"?this._active.delete(D.parent):D.type=="priority"&&(this.priority=(0,Vn.toArray)(this.source).reduce((U,J)=>Math.max(U,(Vt(J)?J.priority:0)+1),0))}};function ki(D){return D.idle!==!1}function $0(D){return!D.size||Array.from(D).every(ki)}function Oh(D){D.idle||(D.idle=!0,(0,Vn.each)((0,Jo.getPayload)(D),U=>{U.done=!0}),(0,Vn.callFluidObservers)(D,{type:"idle",parent:D}))}var Z2=(D,...U)=>new Xu(D,U),Ed=(D,...U)=>((0,R0.deprecateInterpolate)(),new Xu(D,U)),$s=tn;$s.Globals.assign({createStringInterpolator:$s.createStringInterpolator,to:(D,U)=>new Xu(D,U)});var Yu=$s.frameLoop.advance,Os=tn;u(p,F$e(),t.exports)})(rj);var B$e=rj.exports;nj.exports=B$e;var lV=nj.exports;(function(t){var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i=(H,F)=>{for(var Y in F)e(H,Y,{get:F[Y],enumerable:!0})},o=(H,F,Y,Q)=>{if(F&&typeof F=="object"||typeof F=="function")for(let ne of r(F))!a.call(H,ne)&&ne!==Y&&e(H,ne,{get:()=>F[ne],enumerable:!(Q=n(F,ne))||Q.enumerable});return H},s=(H,F,Y)=>(o(H,F,"default"),Y&&o(Y,F,"default")),l=H=>o(e({},"__esModule",{value:!0}),H),u={};i(u,{a:()=>Z,animated:()=>Z}),t.exports=l(u);var c=lV,d=fp,p=tn,f=S0,m=/^--/;function y(H,F){return F==null||typeof F=="boolean"||F===""?"":typeof F=="number"&&F!==0&&!m.test(H)&&!(x.hasOwnProperty(H)&&x[H])?F+"px":(""+F).trim()}var v={};function b(H,F){if(!H.nodeType||!H.setAttribute)return!1;let Y=H.nodeName==="filter"||H.parentNode&&H.parentNode.nodeName==="filter",{style:Q,children:ne,scrollTop:se,scrollLeft:pe,viewBox:de,...ie}=F,xe=Object.values(ie),q=Object.keys(ie).map(oe=>Y||H.hasAttribute(oe)?oe:v[oe]||(v[oe]=oe.replace(/([A-Z])/g,he=>"-"+he.toLowerCase())));ne!==void 0&&(H.textContent=ne);for(let oe in Q)if(Q.hasOwnProperty(oe)){let he=y(oe,Q[oe]);m.test(oe)?H.style.setProperty(oe,he):H.style[oe]=he}q.forEach((oe,he)=>{H.setAttribute(oe,xe[he])}),se!==void 0&&(H.scrollTop=se),pe!==void 0&&(H.scrollLeft=pe),de!==void 0&&H.setAttribute("viewBox",de)}var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=(H,F)=>H+F.charAt(0).toUpperCase()+F.substring(1),S=["Webkit","Ms","Moz","O"];x=Object.keys(x).reduce((H,F)=>(S.forEach(Y=>H[w(Y,F)]=H[F]),H),x);var C=S0,E=tn,_=/^(matrix|translate|scale|rotate|skew)/,N=/^(translate)/,M=/^(rotate|skew)/,P=(H,F)=>E.is.num(H)&&H!==0?H+F:H,L=(H,F)=>E.is.arr(H)?H.every(Y=>L(Y,F)):E.is.num(H)?H===F:parseFloat(H)===F,j=class extends C.AnimatedObject{constructor({x:H,y:F,z:Y,...Q}){let ne=[],se=[];(H||F||Y)&&(ne.push([H||0,F||0,Y||0]),se.push(pe=>[`translate3d(${pe.map(de=>P(de,"px")).join(",")})`,L(pe,0)])),(0,E.eachProp)(Q,(pe,de)=>{if(de==="transform")ne.push([pe||""]),se.push(ie=>[ie,ie===""]);else if(_.test(de)){if(delete Q[de],E.is.und(pe))return;let ie=N.test(de)?"px":M.test(de)?"deg":"";ne.push((0,E.toArray)(pe)),se.push(de==="rotate3d"?([xe,q,oe,he])=>[`rotate3d(${xe},${q},${oe},${P(he,ie)})`,L(he,0)]:xe=>[`${de}(${xe.map(q=>P(q,ie)).join(",")})`,L(xe,de.startsWith("scale")?1:0)])}}),ne.length&&(Q.transform=new B(ne,se)),super(Q)}},B=class extends E.FluidValue{constructor(H,F){super(),this.inputs=H,this.transforms=F,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let H="",F=!0;return(0,E.each)(this.inputs,(Y,Q)=>{let ne=(0,E.getFluidValue)(Y[0]),[se,pe]=this.transforms[Q](E.is.arr(ne)?ne:Y.map(E.getFluidValue));H+=" "+se,F=F&&pe}),F?"none":H}observerAdded(H){H==1&&(0,E.each)(this.inputs,F=>(0,E.each)(F,Y=>(0,E.hasFluidValue)(Y)&&(0,E.addFluidObserver)(Y,this)))}observerRemoved(H){H==0&&(0,E.each)(this.inputs,F=>(0,E.each)(F,Y=>(0,E.hasFluidValue)(Y)&&(0,E.removeFluidObserver)(Y,this)))}eventObserved(H){H.type=="change"&&(this._value=null),(0,E.callFluidObservers)(this,H)}},K=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];s(u,lV,t.exports),c.Globals.assign({batchedUpdates:d.unstable_batchedUpdates,createStringInterpolator:p.createStringInterpolator,colors:p.colors});var X=(0,f.createHost)(K,{applyAnimatedValues:b,createAnimatedStyle:H=>new j(H),getComponentProps:({scrollTop:H,scrollLeft:F,...Y})=>Y}),Z=X.animated})(tj);var z$e=tj.exports;ej.exports=z$e;var j$e=ej.exports;const{useState:V$e,useEffect:U$e}=R;function W$e(){const[t,e]=V$e({width:void 0,height:void 0});return U$e(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}var G$e=W$e;const Th=R,{useSpring:H$e,animated:q$e}=j$e,K$e=G$e,Vu={maxTilt:25,rotationPower:50,swipeThreshold:.5},L_={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},uV=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),X$e=t=>{const e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}},C0=async(t,e,n,r)=>{const a=uV(n,r),i=uV(t.x,t.y),o=a*t.x,s=a*t.y,l=t.x*45,u=a/i;return e.start({xyrot:[o,s,l],config:{duration:u}}),await new Promise(c=>setTimeout(()=>{c()},u))},cV=t=>new Promise(e=>{t.start({xyrot:[0,0,0],config:L_.animateBack,onRest:e})}),dV=t=>{if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>Vu.swipeThreshold)return"right";if(t.x<-Vu.swipeThreshold)return"left"}else{if(t.y>Vu.swipeThreshold)return"down";if(t.y<-Vu.swipeThreshold)return"up"}return"none"},Y$e=q$e.div,Q$e=Th.forwardRef(({flickOnSwipe:t=!0,children:e,onSwipe:n,onCardLeftScreen:r,className:a,preventSwipe:i=[],swipeRequirementType:o="velocity",swipeThreshold:s=Vu.swipeThreshold,onSwipeRequirementFulfilled:l,onSwipeRequirementUnfulfilled:u},c)=>{const{width:d,height:p}=K$e(),[{xyrot:f},m]=H$e(()=>({xyrot:[0,0,0],config:L_.touchResponsive}));Vu.swipeThreshold=s,Th.useImperativeHandle(c,()=>({async swipe(w="right"){n&&n(w);const S=1.3,C=(Math.random()-.5)/2;w==="right"?await C0({x:S,y:C},m,d,p):w==="left"?await C0({x:-S,y:C},m,d,p):w==="up"?await C0({x:C,y:-S},m,d,p):w==="down"&&await C0({x:C,y:S},m,d,p),r&&r(w)},async restoreCard(){await cV(m)}}));const y=Th.useCallback(async(w,S)=>{const C=dV({x:o==="velocity"?S.vx:S.dx,y:o==="velocity"?S.vy:S.dy});if(C!=="none"&&t&&!i.includes(C)){n&&n(C),await C0(o==="velocity"?{x:S.vx,y:S.vy}:X$e({x:S.dx,y:S.dy}),w,d,p),r&&r(C);return}cV(w)},[o,t,i,n,r,d,p]);let v="none";const b=(w,S,C,E)=>{let _=E?w.touches[0].clientX-S.x:w.clientX-S.x,N=E?w.touches[0].clientY-S.y:w.clientY-S.y;S.x===0&&S.y===0&&(_=0,N=0);const M=-(_-C.dx)/(C.timeStamp-Date.now()),P=-(N-C.dy)/(C.timeStamp-Date.now());return{dx:_,dy:N,vx:M,vy:P,timeStamp:Date.now()}};Th.useLayoutEffect(()=>{let w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},C=!1;const E=B=>{!B.srcElement.className.includes("pressable")&&B.cancelable&&B.preventDefault(),S=b(B,w,S,!0),w={x:B.touches[0].clientX,y:B.touches[0].clientY}};x.current.addEventListener("touchstart",E);const _=B=>{C=!0,S=b(B,w,S,!1),w={x:B.clientX,y:B.clientY}};x.current.addEventListener("mousedown",_);const N=B=>{if(l||u){const X=dV({x:o==="velocity"?B.vx:B.dx,y:o==="velocity"?B.vy:B.dy});X!==v&&(v=X,v==="none"?u&&u():l&&l(X))}let K=B.vx*15;isNaN(K)&&(K=0),K=Math.max(Math.min(K,Vu.maxTilt),-Vu.maxTilt),m.start({xyrot:[B.dx,B.dy,K],config:L_.touchResponsive})},M=B=>{if(!C)return;const K=b(B,w,S,!1);S=K,N(K)};window.addEventListener("mousemove",M);const P=B=>{C&&(C=!1,y(m,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})};window.addEventListener("mouseup",P);const L=B=>{const K=b(B,w,S,!0);S=K,N(K)};x.current.addEventListener("touchmove",L);const j=B=>{y(m,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}};return x.current.addEventListener("touchend",j),()=>{x.current.removeEventListener("touchstart",E),x.current.removeEventListener("touchmove",L),x.current.removeEventListener("touchend",j),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",P),x.current.removeEventListener("mousedown",_)}},[y,m,l,u]);const x=Th.useRef();return Th.createElement(Y$e,{ref:x,className:a,style:{transform:f.to((w,S,C)=>`translate3d(${w}px, ${S}px, 0px) rotate(${C}deg)`)},children:e})});var Z$e=Q$e;const J$e=Ki(Z$e);function Bi(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const eOe=Bi(/^[1-9][0-9]*$/),F_=Bi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),tOe=Bi(/^E[1-9][0-9]*$/),z2=Bi(/^Q[1-9][0-9]*$/),j2=Bi(/^P[1-9][0-9]*$/),pV=Bi(/^L[1-9][0-9]*$/),hV=Bi(/^L[1-9][0-9]*-F[1-9][0-9]*$/),fV=Bi(/^L[1-9][0-9]*-S[1-9][0-9]*$/),nOe=Bi(/^M[1-9][0-9]*$/),rOe=Bi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),aOe=Bi(/^[0-9a-f]{40}$/),gV=Bi(/^\d+$/),mV=Bi(/^(Q|P|L|M)[1-9][0-9]*$/);function iOe(t){if(typeof t!="string")return!1;const[e,n]=t.split("#");return F_(e)&&j2(n)}function yV(t){return typeof t!="string"?!1:t.startsWith("Item:")?z2(t.substring(5)):t.startsWith("Lexeme:")?pV(t.substring(7)):t.startsWith("Property:")?j2(t.substring(9)):z2(t)}function oOe(t){if(!mV(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function sOe(t,e){let n=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(n+=`?width=${e}`),n}function lOe(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const uOe=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:lOe,getImageUrl:sOe,getNumericId:oOe,isEntityId:F_,isEntityPageTitle:yV,isEntitySchemaId:tOe,isFormId:hV,isGuid:rOe,isHash:aOe,isItemId:z2,isLexemeId:pV,isMediaInfoId:nOe,isNonNestedEntityId:mV,isNumericId:eOe,isPropertyClaimsId:iOe,isPropertyId:j2,isRevisionId:gV,isSenseId:fV},Symbol.toStringTag,{value:"Module"}));function Ts(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function bV(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const vV=t=>encodeURIComponent(t).replace(/[!'()*]/g,pOe),cOe=t=>t.replace(/\s/g,"_");function dOe(t){return Array.from(new Set(t))}const pOe=t=>"%"+t.charCodeAt(0).toString(16);function Uu(t){if(t.length!==1||!bV(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function E0(t,e){return typeof e=="string"&&t.includes(e)}function B_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function z_(t){return Object.entries(t)}function j_(t){typeof t=="object"&&(t=t.time);const e=t[0];let[n,r]=t.slice(1).split("T");n=n.replace(/-00/g,"-01");const a=`${n}T${r}`;return hOe(e,a)}const hOe=(t,e)=>{const n=e.split("-")[0];return t==="-"||n.length>4?fOe(t,e,n):new Date(e)},fOe=(t,e,n)=>{let r;return n.length===4?r=`${t}00${e}`:n.length===5?r=`${t}0${e}`:r=t+e,new Date(r)};function V_(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[r,a]=e.slice(1).split("T");if(!n||!r||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return r=r.replace(/-00/g,"-01"),`${n}${r}T${a}`}}}const gOe=t=>j_(t).getTime(),mOe=t=>j_(t).toISOString(),yOe=t=>{if(typeof t=="object"){const{time:e,precision:n}=t;n===9?t=e.replace("-01-01T","-00-00T"):n===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},xV=V_(gOe),wV=V_(mOe),kV=V_(yOe),bOe=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:j_,wikibaseTimeToEpochTime:xV,wikibaseTimeToISOString:wV,wikibaseTimeToSimpleDay:kV},Symbol.toStringTag,{value:"Module"})),Wu=t=>t.value,vOe=(t,e)=>e.keepRichValues?t.value:t.value.text,Nh=(t,e)=>wOe(t,e.entityPrefix),xOe={item:"Q",lexeme:"L",property:"P"},wOe=(t,e)=>{const{value:n}=t,r=n.id||xOe[n["entity-type"]]+n["numeric-id"];return typeof e=="string"?`${e}:${r}`:r},kOe=(t,e)=>{const{value:n}=t,r=parseFloat(n.amount);if(e.keepRichValues){const a={amount:parseFloat(n.amount),unit:n.unit.replace(/^https?:\/\/.*\/entity\//,"")};return n.upperBound!=null&&(a.upperBound=parseFloat(n.upperBound)),n.lowerBound!=null&&(a.lowerBound=parseFloat(n.lowerBound)),a}else return r},SOe=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],COe=(t,e)=>{let n;if(typeof e.timeConverter=="function"?n=e.timeConverter(t.value):n=EOe(e.timeConverter)(t.value),e.keepRichValues){const{timezone:r,before:a,after:i,precision:o,calendarmodel:s}=t.value;return{time:n,timezone:r,before:a,after:i,precision:o,calendarmodel:s}}else return n},EOe=(t="iso")=>{const e=IOe[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},IOe={iso:wV,epoch:xV,"simple-day":kV,none:t=>typeof t=="string"?t:t.time},TOe={commonsMedia:Wu,"external-id":Wu,"geo-shape":Wu,"globe-coordinate":SOe,math:Wu,monolingualtext:vOe,"musical-notation":Wu,quantity:kOe,string:Wu,"tabular-data":Wu,time:COe,url:Wu,"wikibase-entityid":Nh,"wikibase-form":Nh,"wikibase-item":Nh,"wikibase-lexeme":Nh,"wikibase-property":Nh,"wikibase-sense":Nh},SV=t=>t.toLowerCase().replace(/[\s-]/g,""),CV={};for(const[t,e]of Object.entries(TOe))CV[SV(t)]=e;function NOe(t,e,n,r){t=t||e.type;try{const a=CV[SV(t)];return a(e,n)}catch(a){throw a.message==="parsers[datatype] is not a function"&&(a.message=`${t} claim parser isn't implemented
      Claim id: ${r}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),a}}function U_(t){const e={};for(const n of t){const{rank:r}=n;e[r]=e[r]||[],e[r].push(n)}return e.preferred||e.normal||[]}function EV(t){return t.filter(e=>e.rank!=="deprecated")}function _Oe(t){const e={};for(const[n,r]of z_(t))e[n]=U_(r);return e}const ROe=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:EV,truthyClaims:_Oe,truthyPropertyClaims:U_},Symbol.toStringTag,{value:"Module"}));function W_(t,e){const{propertyPrefix:n}=e,r={};for(let a in t){const i=t[a];n&&(a=n+":"+a),r[a]=G_(i,e)}return r}function G_(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:n,keepNonDeprecated:r,areSubSnaks:a}=RV(e);return r?t=EV(t):n||a||(t=U_(t)),t=t.map(i=>H_(i,e)).filter(i=>i!==void 0),t[0]&&typeof t[0]!="object"?dOe(t):t}function IV(t,e){const{keepQualifiers:n,keepReferences:r,keepIds:a,keepHashes:i,keepTypes:o,keepSnaktypes:s,keepRanks:l}=RV(e),{mainsnak:u,rank:c}=t;let d,p,f,m,y,v;if(u?(p=u.datatype,f=u.datavalue,m=u.snaktype):(f=t.datavalue,p=t.datatype,m=t.snaktype,t.hash?y=!0:v=!0),f)d=NOe(p,f,e,t.id);else if(m==="somevalue")d=e.somevalueValue;else if(m==="novalue")d=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(y){if(!(i||o||s))return d;const w={value:d};return i&&(w.hash=t.hash),o&&(w.type=p),s&&(w.snaktype=m),w}if(v)return o?{type:p,value:d}:d;if(!(n||r||a||o||s||l))return d;const b={value:d};o&&(b.type=p),s&&(b.snaktype=m),l&&(b.rank=c);const x=V2(e);return x.keepHashes=i,n&&(b.qualifiers=NV(t.qualifiers,x)),r&&(t.references=t.references||[],b.references=_V(t.references,x)),a&&(b.id=t.id),b}function _h(t,e={}){return W_(t,e)}function TV(t,e={}){return G_(t,e)}function H_(t,e={}){return IV(t,e)}function NV(t,e={}){return W_(t,V2(e))}function $Oe(t,e={}){return G_(t,V2(e))}function OOe(t,e={}){return IV(t,e)}function _V(t,e={}){return t.map(n=>MOe(n,e))}function MOe(t,e={}){const n=V2(e),r=W_(t.snaks,n);return n.keepHashes?{snaks:r,hash:t.hash}:r}const V2=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),POe=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],RV=(t={})=>(t.keepAll&&POe.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function I0(t){const e={};for(const[n,r]of z_(t))e[n]=r!=null?r.value:null;return e}function AOe(t){const e={};for(const[n,r]of z_(t))e[n]=r!=null?r.map(a=>a.value):[];return e}function $V(t){return I0(t)}function OV(t){return I0(t)}function MV(t){return AOe(t)}function PV(t){return I0(t)}function AV(t){return I0(t)}function DV(t){return I0(t)}const LV=(t,e={})=>{const{id:n,representations:r,grammaticalFeatures:a,claims:i}=t;if(!hV(n))throw new Error("invalid form object");return{id:n,representations:AV(r),grammaticalFeatures:a,claims:_h(i,e)}},FV=(t,e={})=>t.map(n=>LV(n,e)),BV=(t,e={})=>{const{id:n,glosses:r,claims:a}=t;if(!fV(n))throw new Error("invalid sense object");return{id:n,glosses:DV(r),claims:_h(a,e)}};function zV(t,e={}){return t.map(n=>BV(n,e))}const q_={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},K_=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],DOe="https://www.wikidata.org/wiki/";function jV({site:t,title:e}){if(Uu(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(B_(U2,t))return U2[t](e);const n=t.replace(/wiki$/,"");if(B_(U2,n))return U2[n](e);const{lang:r,project:a}=VV(t);return e=vV(cOe(e)),`https://${r}.${a}.org/wiki/${e}`}const vd=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,U2={commons:vd("commons"),foundation:vd("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:vd("meta"),outreach:vd("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:vd("species"),wikidata:t=>{const e=LOe[t[0]];let n=e?`${e}:${t}`:t;return n=n.replace("-","#"),`${DOe}${n}`},wikifunctions:vd("wikifunctions"),wikimania:vd("wikimania")},LOe={E:"EntitySchema",L:"Lexeme",P:"Property"},FOe=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function VV(t){if(t.startsWith("http")){const e=t,n=e.match(FOe);if(!n)throw new Error(`invalid sitelink url: ${e}`);let[r,a,i]=n.slice(1);if(i=decodeURIComponent(i),r==="commons")return{lang:"en",project:"commons",key:"commons",title:i,url:e};if(!E0(zOe,a))throw new Error(`project is unknown: ${a}`);if(r==="www")return{lang:"en",project:a,key:a,title:i,url:e};const o=`${r.replace(/-/g,"_")}${a}`.replace("wikipedia","wiki");return{lang:r,project:a,key:o,title:i,url:e}}else{if(B_(q_,t))return{lang:"en",project:q_[t],key:t};if(!E0(K_,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,n,r]=t.split("wik");if(r!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const a=WV[n];if(!a)throw new Error(`sitelink project not found: ${a}`);return{lang:e,project:a,key:t}}}const UV=t=>E0(K_,t),BOe=UV,WV={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},zOe=[...Object.values(WV),...Object.values(q_)],jOe=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:VV,getSitelinkUrl:jV,isSite:UV,isSitelinkKey:BOe},Symbol.toStringTag,{value:"Module"}));function GV(t,e={}){let{addUrl:n,keepBadges:r,keepAll:a}=e;return r=r||a,Object.keys(t).reduce(VOe({sitelinks:t,addUrl:n,keepBadges:r}),{})}const VOe=({sitelinks:t,addUrl:e,keepBadges:n})=>(r,a)=>{if(t[a]==null)return r[a]=t[a],r;const{title:i,badges:o}=t[a];return e||n?(r[a]={title:i},e&&(r[a].url=jV({site:a,title:i})),n&&(r[a].badges=o)):r[a]=i,r},UOe={labels:$V,descriptions:OV,aliases:MV,claims:_h,statements:_h,sitelinks:GV,lemmas:PV,forms:FV,senses:zV},HV=(t,e={})=>{const{type:n}=t,r={id:t.id,type:n,modified:t.modified};return n==="item"?(Ba(t,r,"labels"),Ba(t,r,"descriptions"),Ba(t,r,"aliases"),Ba(t,r,"claims",e),Ba(t,r,"sitelinks",e)):n==="property"?(r.datatype=t.datatype,Ba(t,r,"labels"),Ba(t,r,"descriptions"),Ba(t,r,"aliases"),Ba(t,r,"claims",e)):n==="lexeme"?(Ba(t,r,"lemmas"),r.lexicalCategory=t.lexicalCategory,r.language=t.language,Ba(t,r,"claims",e),Ba(t,r,"forms",e),Ba(t,r,"senses",e)):n==="mediainfo"&&(Ba(t,r,"labels"),Ba(t,r,"descriptions"),Ba(t,r,"statements",e)),r},Ba=(t,e,n,r)=>{t[n]!=null&&(e[n]=UOe[n](t[n],r))},qV=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:n}=e,r={};for(const[a,i]of Object.entries(t)){const o=n?`${n}:${a}`:a;r[o]=HV(i,e)}return r};function WOe(t){t=t.body||t;const{entities:e}=t;return qV(e)}function GOe(t){return t=t.body||t,t.query.search.map(e=>e.title)}const HOe=Object.freeze(Object.defineProperty({__proto__:null,entities:WOe,pagesTitles:GOe},Symbol.toStringTag,{value:"Module"}));function qOe(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:n}=t.head,r=t.results.bindings;if(n.length===1&&e.minimize){const s=n[0];return r.map(l=>X_(l[s])).filter(l=>l!=null)}const{richVars:a,associatedVars:i,standaloneVars:o}=YOe(n);return r.map(s=>QOe(a,i,o,s))}function X_(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return KOe(e);const n=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return n==="decimal"||n==="integer"||n==="float"||n==="double"?parseFloat(e):n==="boolean"?e==="true":e}function KOe(t){return t.match(/http.*\/entity\/statement\//)?XOe(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function XOe(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function YOe(t){let e=t.filter(i=>{const o=new RegExp(`^${i}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(i=>!e.some(o=>i!==o&&i.startsWith(o)));const n=new RegExp(`^(${e.join("|")})[A-Z]`),r=t.filter(i=>n.test(i)),a=t.filter(i=>!e.includes(i)&&!n.test(i));return{richVars:e,associatedVars:r,standaloneVars:a}}function QOe(t,e,n,r){const a={};for(const i of t){const o={},s=X_(r[i]);s!=null&&(o.value=s);for(const l of e)l.startsWith(i)&&ZOe(r,i,l,o);Object.keys(o).length>0&&(a[i]=o)}for(const i of n){const o=X_(r[i]);o!=null&&(a[i]=o)}return a}function ZOe(t,e,n,r){let a=n.split(e)[1];a=a[0].toLowerCase()+a.slice(1),a=a==="altLabel"?"aliases":a;const i=t[n];i!=null&&(r[a]=i.value)}const JOe=Object.freeze(Object.defineProperty({__proto__:null,aliases:MV,claim:H_,claims:_h,descriptions:OV,entities:qV,entity:HV,form:LV,forms:FV,glosses:DV,labels:$V,lemmas:PV,propertyClaims:TV,propertyQualifiers:$Oe,propertySnaks:TV,qualifier:OOe,qualifiers:NV,references:_V,representations:AV,sense:BV,senses:zV,sitelinks:GV,snak:H_,snaks:_h,sparqlResults:qOe},Symbol.toStringTag,{value:"Module"})),eMe=/^\d+[|\d]*$/;function tMe(t){return function(e){Uu(arguments);for(const[f,m]of Object.entries(e))if(f.startsWith("sr")){const y=f.replace(/^sr/,"");if(e[y]!=null)throw new Error(`${y} and ${f} are the same`);e[y]=m}const{search:n,haswbstatement:r,format:a="json",limit:i,offset:o,profile:s,sort:l}=e;let{namespace:u,prop:c}=e;if(!(n||r))throw new Error('missing "search" or "haswbstatement" parameter');let d="";if(n&&(d+=n),r){const f=r instanceof Array?r:[r];for(const m of f)m[0]==="-"?d+=` -haswbstatement:${m.slice(1)}`:d+=` haswbstatement:${m}`}if(i!=null&&(typeof i!="number"||i<1))throw new Error(`invalid limit: ${i}`);if(o!=null&&(typeof o!="number"||o<0))throw new Error(`invalid offset: ${o}`);if(u instanceof Array?u=u.join("|"):typeof u=="number"&&(u=u.toString()),u&&!eMe.test(u))throw new Error(`invalid namespace: ${u}`);if(s!=null&&typeof s!="string")throw new Error(`invalid profile: ${s} (${typeof s}, expected string)`);if(l!=null&&typeof l!="string")throw new Error(`invalid sort: ${l} (${typeof l}, expected string)`);let p;if(c!=null){if(c instanceof Array&&(c=c.join("|")),typeof c!="string")throw new Error(`invalid prop: ${c} (${typeof c}, expected string)`);p=c.toString()}return t({action:"query",list:"search",srsearch:d.trim(),format:a,srnamespace:u,srlimit:i,sroffset:o,srqiprofile:s,srsort:l,srprop:p})}}function W2(t,e){return function(n){if(!e(n))throw new Error(`invalid ${t}: ${n} (type: ${iMe(n)})`)}}const KV=W2("entity id",F_),nMe=W2("property id",j2),rMe=W2("entity page title",yV),aMe=W2("revision id",gV);function iMe(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function XV(t){return function({ids:e,languages:n,props:r,format:a="json",redirects:i}){if(Uu(arguments),!(e&&e.length>0))throw new Error("no id provided");e=Ts(e),e.forEach(s=>KV(s)),e.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const o={action:"wbgetentities",ids:e.join("|"),format:a};return i===!1&&(o.redirects="no"),n&&(n=Ts(n),o.languages=n.join("|")),r&&r.length>0&&(o.props=Ts(r).join("|")),t(o)}}function oMe(t){return function({titles:e,sites:n,languages:r,props:a,format:i="json",redirects:o}){if(Uu(arguments),!(e&&e.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),e=Ts(e),n=Ts(n).map(sMe),a=Ts(a);const s={action:"wbgetentities",titles:e.join("|"),sites:n.join("|"),format:i};return n.length===1&&e.length===1&&(s.normalize=!0),r&&(r=Ts(r),s.languages=r.join("|")),a.length>0&&(s.props=a.join("|")),o===!1&&(s.redirects="no"),t(s)}}function sMe(t){return E0(K_,t)?t:t.replace(/-/g,"_")+"wiki"}function lMe(t,e){return function({id:n,revision:r}){return Uu(arguments),KV(n),aMe(r),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${r}`}}function uMe(t){const e=XV(t);return function({ids:n,languages:r,props:a,format:i,redirects:o}){if(Uu(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return cMe(n).map(s=>e({ids:s,languages:r,props:a,format:i,redirects:o}))}}function cMe(t){const e=[];for(;t.length>0;){const n=t.slice(0,50);t=t.slice(50),e.push(n)}return e}function YV(t){return function(e){const n=vV(e);return`${t}?format=json&query=${n}`}}const dMe="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",pMe=t=>{const e=YV(t);return function(n){let{properties:r}=n;const{values:a,limit:i,caseInsensitive:o,keepProperties:s}=n,l=o?gMe:fMe,u=s?"":dMe;r=Ts(r),r.forEach(d=>nMe(d));let c=`SELECT DISTINCT ?subject WHERE { ${hMe(a,l,r,u)} }`;return i&&(c+=` LIMIT ${i}`),e(c)}},hMe=(t,e,n,r)=>(n=n.map(mMe).join("|"),t instanceof Array?"{ "+t.map(QV).map(a=>e(n,a,r)).join("} UNION {")+" }":e(n,QV(t),r)),QV=t=>(z2(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),fMe=(t,e,n)=>`?subject ${t} ${e} .
    ${n}`,gMe=(t,e,n)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${n}`,mMe=t=>"wdt:"+t;function yMe(t){return function({ids:e,format:n,limit:r,start:a,end:i,prop:o,user:s,excludeuser:l,tag:u}){Uu(arguments),e=Ts(e),e.forEach(p=>rMe(p));const c=e.length===1,d={action:"query",prop:"revisions"};return d.titles=e.join("|"),d.format=n||"json",c&&(d.rvlimit=r||"max"),c&&a&&(d.rvstart=ZV(a)),c&&i&&(d.rvend=ZV(i)),o?d.rvprop=Ts(o).join("|"):d.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",d.rvslots="*",s&&(d.rvuser=s),l&&(d.rvexcludeuser=l),u&&(d.rvtag=u),t(d)}}const ZV=t=>typeof t=="number"&&t<bMe?t:Math.trunc(new Date(t).getTime()/1e3),bMe=new Date("2000-01-01").getTime(),vMe=["item","property","lexeme","form","sense"],xMe=t=>function({search:e,language:n="en",uselang:r,limit:a="20",continue:i="0",format:o="json",type:s="item"}){if(Uu(arguments),r=r||n,!(e&&e.length>0))throw new Error("search can't be empty");if(!E0(vMe,s))throw new Error(`invalid type: ${s}`);return t({action:"wbsearchentities",search:e,language:n,limit:a,continue:i,format:o,uselang:r,type:s})},wMe=typeof location<"u"&&typeof document<"u";function kMe(t){return e=>{wMe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const n=Object.entries(e).filter(([,a])=>a!=null).map(([a,i])=>[a,String(i)]),r=new URLSearchParams(n).toString();return t+"?"+r}}const SMe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,CMe=Object.assign(Object.assign(Object.assign(Object.assign({simplify:JOe,parse:HOe},uOe),jOe),ROe),bOe);function EMe(t){if(!bV(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:n}=t;let{wgScriptPath:r="w"}=t;if(r=r.replace(/^\//,""),!(e||n))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${SMe}`);let a,i,o;if(e){JV("instance",e),i=e.replace(/\/$/,"").replace(`/${r}/api.php`,""),o=`${i}/${r}/api.php`;const l=kMe(o);a={searchEntities:xMe(l),cirrusSearchPages:tMe(l),getEntities:XV(l),getManyEntities:uMe(l),getRevisions:yMe(l),getEntityRevision:lMe(e,r),getEntitiesFromSitelinks:oMe(l)}}else a={searchEntities:xd("searchEntities"),cirrusSearchPages:xd("cirrusSearchPages"),getEntities:xd("getEntities"),getManyEntities:xd("getManyEntities"),getRevisions:xd("getRevisions"),getEntityRevision:xd("getEntityRevision"),getEntitiesFromSitelinks:xd("getEntitiesFromSitelinks")};let s;return n?(JV("sparqlEndpoint",n),s={sparqlQuery:YV(n),getReverseClaims:pMe(n)}):s={sparqlQuery:tU("sparqlQuery"),getReverseClaims:tU("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:i,apiEndpoint:o}},CMe),a),s)}const JV=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},eU=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},tU=eU("a sparqlEndpoint"),xd=eU("an instance"),IMe={sparqlQuery:(t="")=>{const e=EMe({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),n=`
      SELECT ?item ?itemLabel ?artworkLabel ?countryLabel ?genreLabel ?year ?locationLabel ?creatorLabel ?materialLabel ?depictsLabel ?collectionLabel ?iiifManifest (MD5(CONCAT(str(?item),str(RAND()))) as ?random)
      WITH {    
        SELECT ?item (SAMPLE(?artwork) as ?artwork) (SAMPLE(?country) as ?country) (SAMPLE(?genre) as ?genre) (SAMPLE(YEAR(?inception)) as ?year) (SAMPLE(?location) as ?location) (SAMPLE(?creator) as ?creator) (SAMPLE(?material) as ?material) (SAMPLE(?depicts) as ?depicts) (SAMPLE(?collection) as ?collection) (SAMPLE(?iiifManifest) as ?iiifManifest)
        WHERE {
          ?item wdt:P6108 ?iiifManifest ;
                wdt:P195 ?collection ;
                wdt:P31 ?artwork .
                FILTER ( ?artwork = wd:Q3305213 || ?artwork = wd:Q93184 || ?artwork = wd:Q11060274 || ?artwork = wd:Q860861 || ?artwork = wd:Q125191 )
                ${t!==""?`FILTER ( ?material = ${t} )`:""}
                OPTIONAL {
                  ?item wdt:P495 ?countryOfOrigin.
                  FILTER(?countryOfOrigin = wd:Q31 || ?countryOfOrigin = wd:Q213 || ?countryOfOrigin = wd:Q35 || ?countryOfOrigin = wd:Q142 || ?countryOfOrigin = wd:Q36 || ?countryOfOrigin = wd:Q39 || ?countryOfOrigin = wd:Q32 || ?countryOfOrigin = wd:Q40 || ?countryOfOrigin = wd:Q55 || ?countryOfOrigin = wd:Q183 )
                }
                OPTIONAL {
                  ?collection wdt:P17 ?country.
                  FILTER(?country = wd:Q31 || ?country = wd:Q213 || ?country = wd:Q35 || ?country = wd:Q142 || ?country = wd:Q36 || ?country = wd:Q39 || ?country = wd:Q32 || ?country = wd:Q40 || ?country = wd:Q55 || ?country = wd:Q183 )
                }
                BIND(COALESCE(?countryOfOrigin, ?country) AS ?country)
                FILTER(BOUND(?country))

                OPTIONAL { ?item wdt:P136 ?genre. }
                OPTIONAL { ?item wdt:P571 ?inception. }
                OPTIONAL { ?item wdt:P276 ?location. }
                OPTIONAL { ?item wdt:P170 ?creator. }
                OPTIONAL { ?item wdt:P186 ?material. }
                OPTIONAL { ?item wdt:P180 ?depicts. }
        }
        GROUP BY ?item
        LIMIT 100
      } AS %result
      WHERE {
        INCLUDE %result.
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
      } ORDER BY ?random
    `;return e.sparqlQuery(n)}},TMe=()=>{const[t,e]=R.useState([]),[n,r]=R.useState(!0),[a,i]=R.useState(null);return R.useEffect(()=>{(async()=>{try{const o=await fetch(IMe.sparqlQuery());if(!o.ok)throw new Error(`Error: ${o.status} - ${o.statusText}`);const s=await o.json();e(s.results.bindings)}catch(o){i(o.message)}finally{r(!1)}})()},[]),{data:t,loading:n,error:a}},nU=({onClick:t,materialIcon:e})=>re.jsx(br,{className:"p-4 text-xl text-black",onClick:t,rounded:!0,inline:!0,children:re.jsx(Ra,{material:e})});function NMe(){const{t}=su(),{addToImageList:e,imageList:n,removeFromImageList:r,likeImage:a}=Tc(),{data:i}=TMe(),[o,s]=R.useState(0),l=R.useRef(o),u=R.useRef(null);R.useEffect(()=>{const y=async v=>{if(!v)return;const b=(await Promise.all(v.map(async x=>{var w,S,C,E,_;try{const N=await Jz.fetchIIIFIdentifier(x.iiifManifest.value);return N?{id:x.item.value,name:((w=x.itemLabel)==null?void 0:w.value)||"",year:((S=x.year)==null?void 0:S.value)||"",country:((C=x.countryLabel)==null?void 0:C.value)||"",location:((E=x.locationLabel)==null?void 0:E.value)||"",creator:((_=x.creatorLabel)==null?void 0:_.value)||"",url:x.iiifManifest.value,identifier:N,image:`${N}/full/400,/0/default.jpg`,thumbnail:`${N}/full/100,100/0/default.jpg`}:null}catch(N){return console.error("Error processing image:",N),null}}))).filter(x=>x!==null);e(b)};i.length>0&&y(i)},[i,e]);const c=y=>{y==="right"&&o<n.length&&a(n[o]),r(n[o].id),s(v=>v+1)},d=y=>{var v;l.current>=y&&((v=u.current)==null||v.restoreCard())},p=async y=>{var v;o>=0&&o<n.length&&await((v=u.current)==null?void 0:v.swipe(y))},f=n[o],m=y=>y&&!y.includes("http")?y:t("selectionUnknown");return re.jsxs(io,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx("div",{className:"p-2",children:re.jsx("h1",{className:"text-xl",children:t("selectionTitle")})}),re.jsx("div",{className:"mx-auto h-2/3",children:re.jsx(VP,{className:"flex shadow-md shadow-[#BC13FE]/90",children:f&&re.jsxs(re.Fragment,{children:[re.jsx(J$e,{ref:u,className:"mb-4",onSwipe:y=>c(y),onCardLeftScreen:()=>d(o),swipeRequirementType:"position",swipeThreshold:100,preventSwipe:["up","down"],children:re.jsx("img",{alt:f.name,src:f.image})},f.id),re.jsxs("div",{className:"flex justify-between",children:[re.jsx(nU,{onClick:()=>p("left"),materialIcon:re.jsx(nte,{className:"w-6 h-6"})}),re.jsx(nU,{onClick:()=>p("right"),materialIcon:re.jsx(ite,{className:"w-6 h-6"})})]})]})})}),re.jsxs("div",{className:"mb-8 p-4 bg-white rounded h-1/3 opacity-90 max-w-lg w-3/4 text-center mx-auto shadow-md shadow-[#BC13FE]/90",children:[re.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:f?.name}),re.jsxs("p",{className:"text-gray-600",children:[t("selectionYear")," ",f?.year||t("selectionUnknown")]}),re.jsxs("p",{className:"text-gray-600",children:[t("selectionCreator")," ",m(f?.creator)]}),re.jsxs("p",{className:"text-gray-600",children:[t("selectionLocation")," ",f?.location||t("selectionUnknown")]})]})]})}const _Me="/collage.webp",RMe="/logo_animated.svg",$Me=()=>re.jsx("img",{src:RMe,alt:"Logo GLAMorous Europe",className:"w-96 m-auto"}),OMe=()=>re.jsx("img",{src:_Me,alt:"Collage GLAMorous Europe",className:"w-96 m-auto",decoding:"async"});function MMe(){const{t}=su(),{imageLikeList:e,resetState:n}=Tc(),[r,a]=R.useState(!1),i=()=>{e.length>0?a(!0):window.location.href="/selection"},o=()=>{a(!1)},s=()=>{a(!1),n()};return re.jsxs(io,{margin:"mb-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx($Me,{}),re.jsx("h1",{className:"text-xl",children:t("startTitle")}),re.jsx(OMe,{}),re.jsx("p",{className:"text-xl",children:t("startSubtitle")}),re.jsx("p",{className:"text-xl",children:t("startText")}),re.jsx(br,{large:!0,className:"text-xl w-1/2 mx-auto h-16",rounded:!0,inline:!0,onClick:i,children:t("startButtonText")}),r&&re.jsx(KP,{opened:r,onBackdropClick:()=>a(!1),children:re.jsxs(ab,{children:[re.jsx(tb,{title:t("discardModalTitle"),right:re.jsx(XE,{preventScrollReset:!0,to:"/",onClick:o,children:t("discardModalCancel")})}),re.jsxs(io,{className:"space-y-4",children:[re.jsx("p",{children:t("discardModalMessage")}),re.jsx(br,{className:"p-4 rounded-full text-xl bg-red-500 text-white",children:re.jsx(XE,{preventScrollReset:!0,to:"/selection",onClick:s,children:t("discardModalConfirm")})}),re.jsx(br,{className:"p-4 rounded-full text-xl bg-red-500 text-white",onClick:o,children:t("discardModalNotConfirm")})]})]})})]})}const PMe=WY(KE(re.jsxs(xp,{path:"/",element:re.jsx(fRe,{}),children:[re.jsx(xp,{index:!0,element:re.jsx(MMe,{})}),re.jsx(xp,{path:"selection",element:re.jsx(NMe,{})}),re.jsx(xp,{path:"collection",element:re.jsx(aRe,{})}),re.jsx(xp,{path:"creation",element:re.jsx(zoe,{})})]})));function AMe(){return cQ({immediate:!0}),re.jsx(ZY,{router:PMe})}const DMe={artwork:"Meine Leinwand",artworkCanvasBrightness:"Helligkeit",artworkCanvasContrast:"Kontrast",artworkCanvasOpacity:"Deckkraft",artworkEmpty:"F\xFCge deine eigenen Bildausschnitte hinzu",artworkTitle:"Ziehe die Ausschnitte oder vorbereiteten Sticker in die Leinwand. Du kannst sie ver\xE4ndern und die Leinwand austauschen. Gestalte dein eigenes Kunstwerk und teile es mit deinen Freund:innen!",chooseLanguage:"Sprache w\xE4hlen:",collection:"Meine Sammlung",collectionAddText:"Ausschnitt hinzuf\xFCgen",collectionRemoveText:"Hintergrund entfernen",collectionClose:"Schlie\xDFen",collectionSwitchLasso:"Lassoauswahl",collectionSwitchViewer:"Zoomauswahl",collectionToastSuccess:"Ausschnitt hinzugef\xFCgt",collectionLoading:"Lade...",collectionTitle:"W\xE4hle Bildausschnitte aus deinen Lieblingsobjekten aus, um sie deiner Leinwand hinzuzuf\xFCgen.",discardModalCancel:"Abbrechen",discardModalConfirm:"Ja",discardModalMessage:"M\xF6chtest du deine bisherige Auswahl verwerfen?",discardModalNotConfirm:"Nein",discardModalTitle:"Bisherige Auswahl",selection:"Meine Auswahl",selectionCreator:"K\xFCnstler:in:",selectionLocation:"Sammlungsort:",selectionTitle:"W\xE4hle deine Lieblingsobjekte per Swipe oder Klick. F\xFCge sie somit zu deiner Sammlung hinzu.",selectionUnknown:"Unbekannt",selectionYear:"Entstehungsjahr:",sidebarAbout:"\xDCber uns",sidebarChooseLanguage:"Sprache",sidebarLegal:"Impressum",start:"Start",startButtonText:"Los geht's!",startSubtitle:"Durchst\xF6bere Kunstwerke aus Museen, Galerien, Bibliotheken und Archiven.",startText:"Sammle deine Lieblingsobjekte, w\xE4hle daraus Motive aus und gestalte dein ganz pers\xF6nliches Kunstwerk.",startTitle:"Entdecke mit GLAMorous Europe europ\xE4isches Kulturerbe!"},LMe={translation:DMe},FMe={artwork:"My Canvas",artworkCanvasBrightness:"Brightness",artworkCanvasContrast:"Contrast",artworkCanvasOpacity:"Opacity",artworkEmpty:"Add your image details.",artworkTitle:"Drag the image details or prepared stickers onto the canvas. You can change them and replace the canvas. Create your own work of art and share it with your friends!",chooseLanguage:"Choose Language:",collection:"My Collection",collectionAddText:"Add choosen detail",collectionClose:"Close",collectionLoading:"Loading...",collectionSwitchLasso:"Select Lasso",collectionSwitchViewer:"Select zoom",collectionRemoveText:"Remove Background",collectionToastSuccess:"Added choosen detail",collectionTitle:"Select image details from your favorites to add them to your canvas.",discardModalCancel:"Close",discardModalConfirm:"Yes",discardModalMessage:"Would you like to discard your previous selection?",discardModalNotConfirm:"No",discardModalTitle:"Current selection",selection:"My Selection",selectionCreator:"Artist:",selectionLocation:"Location:",selectionTitle:"Select your favorites by swiping or clicking. This will add them to your collection.",selectionUnknown:"Unknown",selectionYear:"Year of creation:",sidebarAbout:"About",sidebarChooseLanguage:"Language",sidebarLegal:"Legal",start:"Start",startButtonText:"Let's go!",startSubtitle:"Explore works of art from museums, galleries, libraries and archives.",startText:"Collect your favorite objects, select details from them and create your very own work of art.",startTitle:"Dating European cultural heritage with GLAMorous Europe!"},BMe={translation:FMe};oa.init({interpolation:{escapeValue:!1},lng:"auto",fallbackLng:"de",resources:{de:{...LMe},en:{...BMe}}});const zMe={backends:[{id:"html5",backend:jW,transition:HW},{id:"touch",backend:fX,options:{delay:50,ignoreContextMenu:!0,scrollAngleRanges:[{start:300},{end:60},{start:120,end:240}]},preview:!0,transition:GW}]};H6(document.getElementById("root")).render(re.jsx(G.StrictMode,{children:re.jsx(_X,{i18n:oa,children:re.jsx(rX,{options:zMe,children:re.jsx(AMe,{})})})}));export{FR as $,hS as a,JW as b,ZW as c,h$ as d,fp as e,G as f,Ga as g,VF as h,Ki as i,z6 as j,R as r};function T0(t){return T0.viteFileDeps||(T0.viteFileDeps=[]),t.map(e=>T0.viteFileDeps[e])}
